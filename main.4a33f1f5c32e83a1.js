(self.webpackChunklovlund=self.webpackChunklovlund||[]).push([[179],{359:(Lm,Fm,Oa)=>{"use strict";function ln(n){return"function"==typeof n}function Hn(n){const e=n(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Nm=Hn(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function qo(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class Jn{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(ln(i))try{i()}catch(s){t=s instanceof Nm?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{ty(s)}catch(o){t=null!=t?t:[],o instanceof Nm?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Nm(t)}}add(t){var e;if(t&&t!==this)if(this.closed)ty(t);else{if(t instanceof Jn){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&qo(e,t)}remove(t){const{_finalizers:e}=this;e&&qo(e,t),t instanceof Jn&&t._removeParent(this)}}Jn.EMPTY=(()=>{const n=new Jn;return n.closed=!0,n})();const Cc=Jn.EMPTY;function ey(n){return n instanceof Jn||n&&"closed"in n&&ln(n.remove)&&ln(n.add)&&ln(n.unsubscribe)}function ty(n){ln(n)?n():n.unsubscribe()}const Yo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ml={setTimeout(n,t,...e){const{delegate:i}=ml;return(null==i?void 0:i.setTimeout)?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=ml;return((null==t?void 0:t.clearTimeout)||clearTimeout)(n)},delegate:void 0};function Nh(n){ml.setTimeout(()=>{const{onUnhandledError:t}=Yo;if(!t)throw n;t(n)})}function Sc(){}const Ec=de("C",void 0,void 0);function de(n,t,e){return{kind:n,value:t,error:e}}let Ie=null;function ot(n){if(Yo.useDeprecatedSynchronousErrorHandling){const t=!Ie;if(t&&(Ie={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:i}=Ie;if(Ie=null,e)throw i}}else n()}class rt extends Jn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ey(t)&&t.add(this)):this.destination=Hu}static create(t,e,i){return new rn(t,e,i)}next(t){this.isStopped?Ei(function re(n){return de("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Ei(function ny(n){return de("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ei(Ec,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function Jt(n,t){return mt.call(n,t)}class wn{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){ei(i)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){ei(i)}else ei(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){ei(e)}}}class rn extends rt{constructor(t,e,i){let r;if(super(),ln(t)||!t)r={next:null!=t?t:void 0,error:null!=e?e:void 0,complete:null!=i?i:void 0};else{let s;this&&Yo.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Jt(t.next,s),error:t.error&&Jt(t.error,s),complete:t.complete&&Jt(t.complete,s)}):r=t}this.destination=new wn(r)}}function ei(n){Yo.useDeprecatedSynchronousErrorHandling?function ct(n){Yo.useDeprecatedSynchronousErrorHandling&&Ie&&(Ie.errorThrown=!0,Ie.error=n)}(n):Nh(n)}function Ei(n,t){const{onStoppedNotification:e}=Yo;e&&ml.setTimeout(()=>e(n,t))}const Hu={closed:!0,next:Sc,error:function On(n){throw n},complete:Sc},Xo="function"==typeof Symbol&&Symbol.observable||"@@observable";function cs(n){return n}let Mn=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){const s=function N$(n){return n&&n instanceof rt||function Ns(n){return n&&ln(n.next)&&ln(n.error)&&ln(n.complete)}(n)&&ey(n)}(e)?e:new rn(e,i,r);return ot(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=Tc(i))((r,s)=>{const o=new rn({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Xo](){return this}pipe(...e){return function iy(n){return 0===n.length?cs:1===n.length?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=Tc(e))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function Tc(n){var t;return null!==(t=null!=n?n:Yo.Promise)&&void 0!==t?t:Promise}const B$=Hn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Tt=(()=>{class n extends Mn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new rk(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new B$}next(e){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Cc:(this.currentObservers=null,s.push(e),new Jn(()=>{this.currentObservers=null,qo(s,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){const e=new Mn;return e.source=this,e}}return n.create=(t,e)=>new rk(t,e),n})();class rk extends Tt{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:Cc}}function sk(n){return ln(null==n?void 0:n.lift)}function Ti(n){return t=>{if(sk(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ci(n,t,e,i,r){return new V$(n,t,e,i,r)}class V$ extends rt{constructor(t,e,i,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function en(n,t){return Ti((e,i)=>{let r=0;e.subscribe(ci(i,s=>{i.next(n.call(t,s,r++))}))})}function zu(n){return this instanceof zu?(this.v=n,this):new zu(n)}function z$(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(n,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof zu?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function G$(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function lk(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const WM=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ck(n){return ln(null==n?void 0:n.then)}function uk(n){return ln(n[Xo])}function dk(n){return Symbol.asyncIterator&&ln(null==n?void 0:n[Symbol.asyncIterator])}function hk(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fk=function j$(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pk(n){return ln(null==n?void 0:n[fk])}function mk(n){return z$(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:i,done:r}=yield zu(e.read());if(r)return yield zu(void 0);yield yield zu(i)}}finally{e.releaseLock()}})}function gk(n){return ln(null==n?void 0:n.getReader)}function us(n){if(n instanceof Mn)return n;if(null!=n){if(uk(n))return function $$(n){return new Mn(t=>{const e=n[Xo]();if(ln(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(WM(n))return function q$(n){return new Mn(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(ck(n))return function Y$(n){return new Mn(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Nh)})}(n);if(dk(n))return _k(n);if(pk(n))return function X$(n){return new Mn(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(gk(n))return function K$(n){return _k(mk(n))}(n)}throw hk(n)}function _k(n){return new Mn(t=>{(function Z$(n,t){var e,i,r,s;return function H$(n,t,e,i){return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=G$(n);!(i=yield e.next()).done;)if(t.next(i.value),t.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function gl(n,t,e,i=0,r=!1){const s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function hr(n,t,e=1/0){return ln(t)?hr((i,r)=>en((s,o)=>t(i,s,r,o))(us(n(i,r))),e):("number"==typeof t&&(e=t),Ti((i,r)=>function Q$(n,t,e,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&t.complete()},f=m=>c<i?p(m):l.push(m),p=m=>{s&&t.next(m),c++;let g=!1;us(e(m,u++)).subscribe(ci(t,_=>{null==r||r(_),s?f(_):t.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){const _=l.shift();o?gl(t,o,()=>p(_)):p(_)}h()}catch(_){t.error(_)}}))};return n.subscribe(ci(t,f,()=>{d=!0,h()})),()=>{null==a||a()}}(i,r,n,e)))}function Bm(n=1/0){return hr(cs,n)}const _l=new Mn(n=>n.complete());function vk(n){return n&&ln(n.schedule)}function jM(n){return n[n.length-1]}function yk(n){return ln(jM(n))?n.pop():void 0}function Vm(n){return vk(jM(n))?n.pop():void 0}function bk(n,t=0){return Ti((e,i)=>{e.subscribe(ci(i,r=>gl(i,n,()=>i.next(r),t),()=>gl(i,n,()=>i.complete(),t),r=>gl(i,n,()=>i.error(r),t)))})}function xk(n,t=0){return Ti((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function wk(n,t){if(!n)throw new Error("Iterable cannot be null");return new Mn(e=>{gl(e,t,()=>{const i=n[Symbol.asyncIterator]();gl(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Sr(n,t){return t?function a7(n,t){if(null!=n){if(uk(n))return function t7(n,t){return us(n).pipe(xk(t),bk(t))}(n,t);if(WM(n))return function r7(n,t){return new Mn(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}(n,t);if(ck(n))return function n7(n,t){return us(n).pipe(xk(t),bk(t))}(n,t);if(dk(n))return wk(n,t);if(pk(n))return function s7(n,t){return new Mn(e=>{let i;return gl(e,t,()=>{i=n[fk](),gl(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>ln(null==i?void 0:i.return)&&i.return()})}(n,t);if(gk(n))return function o7(n,t){return wk(mk(n),t)}(n,t)}throw hk(n)}(n,t):us(n)}function Bh(...n){const t=Vm(n),e=function e7(n,t){return"number"==typeof jM(n)?n.pop():t}(n,1/0),i=n;return i.length?1===i.length?us(i[0]):Bm(e)(Sr(i,t)):_l}function Mk(n={}){const{connector:t=(()=>new Tt),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const m=o;f(),null==m||m.unsubscribe()};return Ti((m,g)=>{c++,!d&&!u&&h();const _=l=null!=l?l:t();g.add(()=>{c--,0===c&&!d&&!u&&(a=$M(p,r))}),_.subscribe(g),!o&&c>0&&(o=new rn({next:v=>_.next(v),error:v=>{d=!0,h(),a=$M(f,e,v),_.error(v)},complete:()=>{u=!0,h(),a=$M(f,i),_.complete()}}),us(m).subscribe(o))})(s)}}function $M(n,t,...e){if(!0===t)return void n();if(!1===t)return;const i=new rn({next:()=>{i.unsubscribe(),n()}});return t(...e).subscribe(i)}function Wn(n){for(let t in n)if(n[t]===Wn)return t;throw Error("Could not find renamed property on target object.")}function qM(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Pn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Pn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function YM(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const l7=Wn({__forward_ref__:Wn});function sn(n){return n.__forward_ref__=sn,n.toString=function(){return Pn(this())},n}function Xt(n){return Ck(n)?n():n}function Ck(n){return"function"==typeof n&&n.hasOwnProperty(l7)&&n.__forward_ref__===sn}class Je extends Error{constructor(t,e){super(function XM(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}function Ut(n){return"string"==typeof n?n:null==n?"":String(n)}function Hr(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ut(n)}function ry(n,t){const e=t?` in ${t}`:"";throw new Je(-201,`No provider for ${Hr(n)} found${e}`)}function Vs(n,t){null==n&&function jn(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}(t,n,null,"!=")}function be(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function st(n){return{providers:n.providers||[],imports:n.imports||[]}}function KM(n){return Sk(n,sy)||Sk(n,Tk)}function Sk(n,t){return n.hasOwnProperty(t)?n[t]:null}function Ek(n){return n&&(n.hasOwnProperty(ZM)||n.hasOwnProperty(m7))?n[ZM]:null}const sy=Wn({\u0275prov:Wn}),ZM=Wn({\u0275inj:Wn}),Tk=Wn({ngInjectableDef:Wn}),m7=Wn({ngInjectorDef:Wn});var Lt=(()=>((Lt=Lt||{})[Lt.Default=0]="Default",Lt[Lt.Host=1]="Host",Lt[Lt.Self=2]="Self",Lt[Lt.SkipSelf=4]="SkipSelf",Lt[Lt.Optional=8]="Optional",Lt))();let QM;function Ac(n){const t=QM;return QM=n,t}function Ak(n,t,e){const i=KM(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Lt.Optional?null:void 0!==t?t:void ry(Pn(n),"Injector")}function Dc(n){return{toString:n}.toString()}var Ko=(()=>((Ko=Ko||{})[Ko.OnPush=0]="OnPush",Ko[Ko.Default=1]="Default",Ko))(),Zo=(()=>{return(n=Zo||(Zo={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Zo;var n})();const _7="undefined"!=typeof globalThis&&globalThis,v7="undefined"!=typeof window&&window,y7="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Un=_7||"undefined"!=typeof global&&global||v7||y7,Vh={},$n=[],oy=Wn({\u0275cmp:Wn}),JM=Wn({\u0275dir:Wn}),eC=Wn({\u0275pipe:Wn}),Dk=Wn({\u0275mod:Wn}),yl=Wn({\u0275fac:Wn}),Hm=Wn({__NG_ELEMENT_ID__:Wn});let b7=0;function ft(n){return Dc(()=>{const e={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ko.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||$n,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Zo.Emulated,id:"c",styles:n.styles||$n,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=b7++,i.inputs=Ok(n.inputs,e),i.outputs=Ok(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(Rk):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ik):null,i})}function Rk(n){return jr(n)||function Rc(n){return n[JM]||null}(n)}function Ik(n){return function Gu(n){return n[eC]||null}(n)}const kk={};function at(n){return Dc(()=>{const t={type:n.type,bootstrap:n.bootstrap||$n,declarations:n.declarations||$n,imports:n.imports||$n,exports:n.exports||$n,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(kk[n.id]=n.type),t})}function Ok(n,t){if(null==n)return Vh;const e={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=i,t&&(t[r]=s)}return e}const oe=ft;function ws(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function jr(n){return n[oy]||null}function _o(n,t){const e=n[Dk]||null;if(!e&&!0===t)throw new Error(`Type ${Pn(n)} does not have '\u0275mod' property.`);return e}function Pa(n){return Array.isArray(n)&&"object"==typeof n[1]}function Jo(n){return Array.isArray(n)&&!0===n[1]}function iC(n){return 0!=(8&n.flags)}function uy(n){return 2==(2&n.flags)}function dy(n){return 1==(1&n.flags)}function ea(n){return null!==n.template}function E7(n){return 0!=(512&n[2])}function qu(n,t){return n.hasOwnProperty(yl)?n[yl]:null}class D7{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function fr(){return Lk}function Lk(n){return n.type.prototype.ngOnChanges&&(n.setInput=I7),R7}function R7(){const n=Nk(this),t=null==n?void 0:n.current;if(t){const e=n.previous;if(e===Vh)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function I7(n,t,e,i){const r=Nk(n)||function k7(n,t){return n[Fk]=t}(n,{previous:Vh,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[e],l=o[a];s[a]=new D7(l&&l.currentValue,t,o===Vh),n[i]=t}fr.ngInherit=!0;const Fk="__ngSimpleChanges__";function Nk(n){return n[Fk]||null}let lC;function cC(){return void 0!==lC?lC:"undefined"!=typeof document?document:void 0}function Ai(n){return!!n.listen}const Bk={createRenderer:(n,t)=>cC()};function Zi(n){for(;Array.isArray(n);)n=n[0];return n}function hy(n,t){return Zi(t[n])}function bo(n,t){return Zi(t[n.index])}function uC(n,t){return n.data[t]}function Wh(n,t){return n[t]}function Us(n,t){const e=t[n];return Pa(e)?e:e[0]}function Vk(n){return 4==(4&n[2])}function dC(n){return 128==(128&n[2])}function Ic(n,t){return null==t?null:n[t]}function Hk(n){n[18]=0}function hC(n,t){n[5]+=t;let e=n,i=n[3];for(;null!==i&&(1===t&&1===e[5]||-1===t&&0===e[5]);)i[5]+=t,e=i,i=i[3]}const zt={lFrame:Xk(null),bindingsEnabled:!0};function zk(){return zt.bindingsEnabled}function xe(){return zt.lFrame.lView}function yn(){return zt.lFrame.tView}function pn(n){return zt.lFrame.contextLView=n,n[8]}function pr(){let n=Gk();for(;null!==n&&64===n.type;)n=n.parent;return n}function Gk(){return zt.lFrame.currentTNode}function La(n,t){const e=zt.lFrame;e.currentTNode=n,e.isParent=t}function fC(){return zt.lFrame.isParent}function pC(){zt.lFrame.isParent=!1}function ds(){const n=zt.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function bl(){return zt.lFrame.bindingIndex}function jh(){return zt.lFrame.bindingIndex++}function xl(n){const t=zt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function X7(n,t){const e=zt.lFrame;e.bindingIndex=e.bindingRootIndex=n,mC(t)}function mC(n){zt.lFrame.currentDirectiveIndex=n}function gC(n){const t=zt.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}function $k(){return zt.lFrame.currentQueryIndex}function _C(n){zt.lFrame.currentQueryIndex=n}function Z7(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function qk(n,t,e){if(e&Lt.SkipSelf){let r=t,s=n;for(;!(r=r.parent,null!==r||e&Lt.Host||(r=Z7(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,n=s}const i=zt.lFrame=Yk();return i.currentTNode=t,i.lView=n,!0}function py(n){const t=Yk(),e=n[1];zt.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Yk(){const n=zt.lFrame,t=null===n?null:n.child;return null===t?Xk(n):t}function Xk(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Kk(){const n=zt.lFrame;return zt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Zk=Kk;function my(){const n=Kk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hs(){return zt.lFrame.selectedIndex}function kc(n){zt.lFrame.selectedIndex=n}function Di(){const n=zt.lFrame;return uC(n.tView,n.selectedIndex)}function qn(){zt.lFrame.currentNamespace="svg"}function gy(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-e,o),a&&((n.contentHooks||(n.contentHooks=[])).push(e,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-e,l),c&&((n.viewHooks||(n.viewHooks=[])).push(e,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(e,u)}}function _y(n,t,e){Jk(n,t,3,e)}function vy(n,t,e,i){(3&n[2])===e&&Jk(n,t,e,i)}function vC(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function Jk(n,t,e,i){const s=null!=i?i:-1,o=t.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(r9(n,e,t,l),n[18]=(4294901760&n[18])+l+2),l++}function r9(n,t,e,i){const r=e[i]<0,s=e[i+1],a=n[r?-e[i]:e[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class jm{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function yy(n,t,e){const i=Ai(n);let r=0;for(;r<e.length;){const s=e[r];if("number"==typeof s){if(0!==s)break;r++;const o=e[r++],a=e[r++],l=e[r++];i?n.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=e[++r];bC(o)?i&&n.setProperty(t,o,a):i?n.setAttribute(t,o,a):t.setAttribute(o,a),r++}}return r}function eO(n){return 3===n||4===n||6===n}function bC(n){return 64===n.charCodeAt(0)}function by(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?e=r:0===e||tO(n,e,r,null,-1===e||2===e?t[++i]:null)}}return n}function tO(n,t,e,i,r){let s=0,o=n.length;if(-1===t)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function nO(n){return-1!==n}function $h(n){return 32767&n}function qh(n,t){let e=function c9(n){return n>>16}(n),i=t;for(;e>0;)i=i[15],e--;return i}let xC=!0;function xy(n){const t=xC;return xC=n,t}let u9=0;function qm(n,t){const e=MC(n,t);if(-1!==e)return e;const i=t[1];i.firstCreatePass&&(n.injectorIndex=t.length,wC(i.data,n),wC(t,null),wC(i.blueprint,null));const r=wy(n,t),s=n.injectorIndex;if(nO(r)){const o=$h(r),a=qh(r,t),l=a[1].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function wC(n,t){n.push(0,0,0,0,0,0,0,0,t)}function MC(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function wy(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function My(n,t,e){!function d9(n,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Hm)&&(i=e[Hm]),null==i&&(i=e[Hm]=u9++);const r=255&i;t.data[n+(r>>5)]|=1<<r}(n,t,e)}function sO(n,t,e){if(e&Lt.Optional)return n;ry(t,"NodeInjector")}function oO(n,t,e,i){if(e&Lt.Optional&&void 0===i&&(i=null),0==(e&(Lt.Self|Lt.Host))){const r=n[9],s=Ac(void 0);try{return r?r.get(t,i,e&Lt.Optional):Ak(t,i,e&Lt.Optional)}finally{Ac(s)}}return sO(i,t,e)}function aO(n,t,e,i=Lt.Default,r){if(null!==n){const s=function m9(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Hm)?n[Hm]:void 0;return"number"==typeof t?t>=0?255&t:f9:t}(e);if("function"==typeof s){if(!qk(t,n,i))return i&Lt.Host?sO(r,e,i):oO(t,e,i,r);try{const o=s(i);if(null!=o||i&Lt.Optional)return o;ry(e)}finally{Zk()}}else if("number"==typeof s){let o=null,a=MC(n,t),l=-1,c=i&Lt.Host?t[16][6]:null;for((-1===a||i&Lt.SkipSelf)&&(l=-1===a?wy(n,t):t[a+8],-1!==l&&uO(i,!1)?(o=t[1],a=$h(l),t=qh(l,t)):a=-1);-1!==a;){const u=t[1];if(cO(s,a,u.data)){const d=p9(a,t,e,o,i,c);if(d!==lO)return d}l=t[a+8],-1!==l&&uO(i,t[1].data[a+8]===c)&&cO(s,a,t)?(o=u,a=$h(l),t=qh(l,t)):a=-1}}}return oO(t,e,i,r)}const lO={};function f9(){return new Yh(pr(),xe())}function p9(n,t,e,i,r,s){const o=t[1],a=o.data[n+8],u=Cy(a,o,e,null==i?uy(a)&&xC:i!=o&&0!=(3&a.type),r&Lt.Host&&s===a);return null!==u?Ym(t,o,u,a):lO}function Cy(n,t,e,i,r){const s=n.providerIndexes,o=t.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(r){const f=o[l];if(f&&ea(f)&&f.type===e)return l}return null}function Ym(n,t,e,i){let r=n[e];const s=t.data;if(function s9(n){return n instanceof jm}(r)){const o=r;o.resolving&&function c7(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Je(-200,`Circular dependency in DI detected for ${n}${e}`)}(Hr(s[e]));const a=xy(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ac(o.injectImpl):null;qk(n,i,Lt.Default);try{r=n[e]=o.factory(void 0,s,n,i),t.firstCreatePass&&e>=i.directiveStart&&function i9(n,t,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const o=Lk(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,s))}(e,s[e],t)}finally{null!==l&&Ac(l),xy(a),o.resolving=!1,Zk()}}return r}function cO(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function uO(n,t){return!(n&Lt.Self||n&Lt.Host&&t)}class Yh{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return aO(this._tNode,this._lView,t,i,e)}}function He(n){return Dc(()=>{const t=n.prototype.constructor,e=t[yl]||CC(t),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[yl]||CC(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function CC(n){return Ck(n)?()=>{const t=CC(Xt(n));return t&&t()}:qu(n)}function zs(n){return function h9(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const s=e[r];if(eO(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(pr(),n)}const Kh="__parameters__";function Qh(n,t,e){return Dc(()=>{const i=function SC(n){return function(...e){if(n){const i=n(...e);for(const r in i)this[r]=i[r]}}}(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Kh)?l[Kh]:Object.defineProperty(l,Kh,{value:[]})[Kh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class ve{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=be({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const _9=new ve("AnalyzeForEntryComponents");function xo(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)?(t===n&&(t=n.slice(0,e)),xo(i,t)):t!==n&&t.push(i)}return t}function Fa(n,t){n.forEach(e=>Array.isArray(e)?Fa(e,t):t(e))}function hO(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Sy(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Zm(n,t){const e=[];for(let i=0;i<n;i++)e.push(t);return e}function Gs(n,t,e){let i=Jh(n,t);return i>=0?n[1|i]=e:(i=~i,function b9(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(1===r)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;)n[r]=n[r-2],r--;n[t]=e,n[t+1]=i}}(n,i,t,e)),i}function TC(n,t){const e=Jh(n,t);if(e>=0)return n[1|e]}function Jh(n,t){return function mO(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}(n,t,1)}const Qm={},DC="__NG_DI_FLAG__",Ty="ngTempTokenPath",T9=/\n/gm,_O="__source",D9=Wn({provide:String,useValue:Wn});let Jm;function vO(n){const t=Jm;return Jm=n,t}function R9(n,t=Lt.Default){if(void 0===Jm)throw new Je(203,"");return null===Jm?Ak(n,void 0,t):Jm.get(n,t&Lt.Optional?null:void 0,t)}function ee(n,t=Lt.Default){return(function g7(){return QM}()||R9)(Xt(n),t)}const ef=ee;function RC(n){const t=[];for(let e=0;e<n.length;e++){const i=Xt(n[e]);if(Array.isArray(i)){if(0===i.length)throw new Je(900,"");let r,s=Lt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=I9(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(ee(r,s))}else t.push(ee(i))}return t}function eg(n,t){return n[DC]=t,n.prototype[DC]=t,n}function I9(n){return n[DC]}const Ay=eg(Qh("Inject",n=>({token:n})),-1),wo=eg(Qh("Optional"),8),Yu=eg(Qh("SkipSelf"),4);let Ry,Iy;function nf(n){var t;return(null===(t=function kC(){if(void 0===Ry&&(Ry=null,Un.trustedTypes))try{Ry=Un.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ry}())||void 0===t?void 0:t.createHTML(n))||n}function CO(n){var t;return(null===(t=function OC(){if(void 0===Iy&&(Iy=null,Un.trustedTypes))try{Iy=Un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Iy}())||void 0===t?void 0:t.createHTML(n))||n}class Xu{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class W9 extends Xu{getTypeName(){return"HTML"}}class j9 extends Xu{getTypeName(){return"Style"}}class $9 extends Xu{getTypeName(){return"Script"}}class q9 extends Xu{getTypeName(){return"URL"}}class Y9 extends Xu{getTypeName(){return"ResourceURL"}}function Ws(n){return n instanceof Xu?n.changingThisBreaksApplicationSecurity:n}function Na(n,t){const e=TO(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function TO(n){return n instanceof Xu&&n.getTypeName()||null}class eq{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(nf(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class tq{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=nf(t),e;const i=this.inertDocument.createElement("body");return i.innerHTML=nf(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let i=t.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const iq=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,rq=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ng(n){return(n=String(n)).match(iq)||n.match(rq)?n:"unsafe:"+n}function DO(n){return(n=String(n)).split(",").map(t=>ng(t.trim())).join(", ")}function Ba(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function ig(...n){const t={};for(const e of n)for(const i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}const RO=Ba("area,br,col,hr,img,wbr"),IO=Ba("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kO=Ba("rp,rt"),PC=ig(RO,ig(IO,Ba("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ig(kO,Ba("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ig(kO,IO)),LC=Ba("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),FC=Ba("srcset"),OO=ig(LC,FC,Ba("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ba("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sq=Ba("script,style,template");class oq{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!PC.hasOwnProperty(e))return this.sanitizedSomething=!0,!sq.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=t.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!OO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;LC[a]&&(l=ng(l)),FC[a]&&(l=DO(l)),this.buf.push(" ",o,'="',PO(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();PC.hasOwnProperty(e)&&!RO.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(PO(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const aq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lq=/([^\#-~ |!])/g;function PO(n){return n.replace(/&/g,"&amp;").replace(aq,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(lq,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ky;function LO(n,t){let e=null;try{ky=ky||function AO(n){const t=new tq(n);return function nq(){try{return!!(new window.DOMParser).parseFromString(nf(""),"text/html")}catch(n){return!1}}()?new eq(t):t}(n);let i=t?String(t):"";e=ky.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=ky.getInertBodyElement(i)}while(i!==s);return nf((new oq).sanitizeChildren(NC(e)||e))}finally{if(e){const i=NC(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function NC(n){return"content"in n&&function cq(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var En=(()=>((En=En||{})[En.NONE=0]="NONE",En[En.HTML=1]="HTML",En[En.STYLE=2]="STYLE",En[En.SCRIPT=3]="SCRIPT",En[En.URL=4]="URL",En[En.RESOURCE_URL=5]="RESOURCE_URL",En))();function Ku(n){const t=rg();return t?CO(t.sanitize(En.HTML,n)||""):Na(n,"HTML")?CO(Ws(n)):LO(cC(),Ut(n))}function BC(n){const t=rg();return t?t.sanitize(En.URL,n)||"":Na(n,"URL")?Ws(n):ng(Ut(n))}function rg(){const n=xe();return n&&n[12]}const BO="__ngContext__";function qr(n,t){n[BO]=t}function HC(n){const t=function sg(n){return n[BO]||null}(n);return t?Array.isArray(t)?t:t.lView:null}function zC(n){return n.ngOriginalError}function Sq(n,...t){n.error(...t)}class Pc{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),i=function Cq(n){return n&&n.ngErrorLogger||Sq}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&zC(t);for(;e&&zC(e);)e=zC(e);return e||null}}const Lq=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Un))();function GC(n){return n.ownerDocument.defaultView}function Va(n){return n instanceof Function?n():n}var js=(()=>((js=js||{})[js.Important=1]="Important",js[js.DashCase=2]="DashCase",js))();function jC(n,t){return undefined(n,t)}function og(n){const t=n[3];return Jo(t)?t[3]:t}function $C(n){return qO(n[13])}function qC(n){return qO(n[4])}function qO(n){for(;null!==n&&!Jo(n);)n=n[4];return n}function sf(n,t,e,i,r){if(null!=i){let s,o=!1;Jo(i)?s=i:Pa(i)&&(o=!0,i=i[0]);const a=Zi(i);0===n&&null!==e?null==r?JO(t,e,a):Zu(t,e,a,r||null,!0):1===n&&null!==e?Zu(t,e,a,r||null,!0):2===n?function oP(n,t,e){const i=Oy(n,t);i&&function Yq(n,t,e,i){Ai(n)?n.removeChild(t,e,i):t.removeChild(e)}(n,i,t,e)}(t,a,o):3===n&&t.destroyNode(a),null!=s&&function Zq(n,t,e,i,r){const s=e[7];s!==Zi(e)&&sf(t,n,i,s,r);for(let a=10;a<e.length;a++){const l=e[a];ag(l[1],l,n,t,i,s)}}(t,n,s,e,r)}}function XC(n,t,e){if(Ai(n))return n.createElement(t,e);{const i=null!==e?function F7(n){const t=n.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(e):null;return null===i?n.createElement(t):n.createElementNS(i,t)}}function XO(n,t){const e=n[9],i=e.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,hC(r,-1)),e.splice(i,1)}function KC(n,t){if(n.length<=10)return;const e=10+t,i=n[e];if(i){const r=i[17];null!==r&&r!==n&&XO(r,i),t>0&&(n[e-1][4]=i[4]);const s=Sy(n,10+t);!function Hq(n,t){ag(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function KO(n,t){if(!(256&t[2])){const e=t[11];Ai(e)&&e.destroyNode&&ag(n,t,e,3,null,null),function Gq(n){let t=n[13];if(!t)return ZC(n[1],n);for(;t;){let e=null;if(Pa(t))e=t[13];else{const i=t[10];i&&(e=i)}if(!e){for(;t&&!t[4]&&t!==n;)Pa(t)&&ZC(t[1],t),t=t[3];null===t&&(t=n),Pa(t)&&ZC(t[1],t),e=t&&t[4]}t=e}}(t)}}function ZC(n,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function qq(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let i=0;i<e.length;i+=2){const r=t[e[i]];if(!(r instanceof jm)){const s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,t),function $q(n,t){const e=n.cleanup,i=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],a="function"==typeof o?o(t):Zi(t[o]),l=i[r=e[s+2]],c=e[s+3];"boolean"==typeof c?a.removeEventListener(e[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=e[s+1]];e[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();t[7]=null}}(n,t),1===t[1].type&&Ai(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&Jo(t[3])){e!==t[3]&&XO(e,t);const i=t[19];null!==i&&i.detachView(n)}}}function ZO(n,t,e){return function QO(n,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Zo.None||r===Zo.Emulated)return null}return bo(i,e)}(n,t.parent,e)}function Zu(n,t,e,i,r){Ai(n)?n.insertBefore(t,e,i,r):t.insertBefore(e,i,r)}function JO(n,t,e){Ai(n)?n.appendChild(t,e):t.appendChild(e)}function eP(n,t,e,i,r){null!==i?Zu(n,t,e,i,r):JO(n,t,e)}function Oy(n,t){return Ai(n)?n.parentNode(t):t.parentNode}function tP(n,t,e){return iP(n,t,e)}let iP=function nP(n,t,e){return 40&n.type?bo(n,e):null};function Py(n,t,e,i){const r=ZO(n,i,t),s=t[11],a=tP(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)eP(s,r,e[l],a,!1);else eP(s,r,e,a,!1)}function Ly(n,t){if(null!==t){const e=t.type;if(3&e)return bo(t,n);if(4&e)return JC(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return Ly(n,i);{const r=n[t.index];return Jo(r)?JC(-1,r):Zi(r)}}if(32&e)return jC(t,n)()||Zi(n[t.index]);{const i=sP(n,t);return null!==i?Array.isArray(i)?i[0]:Ly(og(n[16]),i):Ly(n,t.next)}}return null}function sP(n,t){return null!==t?n[16][6].projection[t.projection]:null}function JC(n,t){const e=10+n+1;if(e<t.length){const i=t[e],r=i[1].firstChild;if(null!==r)return Ly(i,r)}return t[7]}function eS(n,t,e,i,r,s,o){for(;null!=e;){const a=i[e.index],l=e.type;if(o&&0===t&&(a&&qr(Zi(a),i),e.flags|=4),64!=(64&e.flags))if(8&l)eS(n,t,e.child,i,r,s,!1),sf(t,n,r,a,s);else if(32&l){const c=jC(e,i);let u;for(;u=c();)sf(t,n,r,u,s);sf(t,n,r,a,s)}else 16&l?aP(n,t,i,e,r,s):sf(t,n,r,a,s);e=o?e.projectionNext:e.next}}function ag(n,t,e,i,r,s){eS(e,i,n.firstChild,t,r,s,!1)}function aP(n,t,e,i,r,s){const o=e[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)sf(t,n,r,l[c],s);else eS(n,t,l,o[3],r,s,!0)}function lP(n,t,e){Ai(n)?n.setAttribute(t,"style",e):t.style.cssText=e}function tS(n,t,e){Ai(n)?""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e):t.className=e}function cP(n,t,e){let i=n.length;for(;;){const r=n.indexOf(t,e);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}const uP="ng-template";function Jq(n,t,e){let i=0;for(;i<n.length;){let r=n[i++];if(e&&"class"===r){if(r=n[i],-1!==cP(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function dP(n){return 4===n.type&&n.value!==uP}function eY(n,t,e){return t===(4!==n.type||e?n.value:uP)}function tY(n,t,e){let i=4;const r=n.attrs||[],s=function rY(n){for(let t=0;t<n.length;t++)if(eO(n[t]))return t;return n.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!eY(n,l,e)||""===l&&1===t.length){if(ta(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==n.attrs){if(!Jq(n.attrs,c,e)){if(ta(i))return!1;o=!0}continue}const d=nY(8&i?"class":l,r,dP(n),e);if(-1===d){if(ta(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==cP(f,c,0)||2&i&&c!==h){if(ta(i))return!1;o=!0}}}}else{if(!o&&!ta(i)&&!ta(l))return!1;if(o&&ta(l))continue;o=!1,i=l|1&i}}return ta(i)||o}function ta(n){return 0==(1&n)}function nY(n,t,e,i){if(null===t)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function sY(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const i=n[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,n)}function hP(n,t,e=!1){for(let i=0;i<t.length;i++)if(tY(n,t[i],e))return!0;return!1}function oY(n,t){e:for(let e=0;e<t.length;e++){const i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function fP(n,t){return n?":not("+t.trim()+")":t}function aY(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&i){const a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ta(o)&&(t+=fP(s,r),r=""),i=o,s=s||!ta(i);e++}return""!==r&&(t+=fP(s,r)),t}const Gt={};function $(n){pP(yn(),xe(),hs()+n,!1)}function pP(n,t,e,i){if(!i)if(3==(3&t[2])){const s=n.preOrderCheckHooks;null!==s&&_y(t,s,e)}else{const s=n.preOrderHooks;null!==s&&vy(t,s,0,e)}kc(e)}function Fy(n,t){return n<<17|t<<2}function na(n){return n>>17&32767}function nS(n){return 2|n}function wl(n){return(131068&n)>>2}function iS(n,t){return-131069&n|t<<2}function rS(n){return 1|n}function SP(n,t){const e=n.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],s=e[i+1];if(-1!==s){const o=n.data[s];_C(r),o.contentQueries(2,t[s],s)}}}function lg(n,t,e,i,r,s,o,a,l,c){const u=t.blueprint.slice();return u[0]=r,u[2]=140|i,Hk(u),u[3]=u[15]=n,u[8]=e,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==t.type?n[16]:u,u}function af(n,t,e,i,r){let s=n.data[t];if(null===s)s=function fS(n,t,e,i,r){const s=Gk(),o=fC(),l=n.data[t]=function SY(n,t,e,i,r,s){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,t,e,i,r),function Y7(){return zt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=i,s.attrs=r;const o=function Wm(){const n=zt.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return La(s,!0),s}function lf(n,t,e,i){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function cg(n,t,e){py(t);try{const i=n.viewQuery;null!==i&&wS(1,i,e);const r=n.template;null!==r&&EP(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&SP(n,t),n.staticViewQueries&&wS(2,n.viewQuery,e);const s=n.components;null!==s&&function wY(n,t){for(let e=0;e<t.length;e++)GY(n,t[e])}(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[2]&=-5,my()}}function cf(n,t,e,i){const r=t[2];if(256!=(256&r)){py(t);try{Hk(t),function Wk(n){return zt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&EP(n,t,e,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&_y(t,c,null)}else{const c=n.preOrderHooks;null!==c&&vy(t,c,0,null),vC(t,0)}if(function UY(n){for(let t=$C(n);null!==t;t=qC(t)){if(!t[2])continue;const e=t[9];for(let i=0;i<e.length;i++){const r=e[i],s=r[3];0==(1024&r[2])&&hC(s,1),r[2]|=1024}}}(t),function HY(n){for(let t=$C(n);null!==t;t=qC(t))for(let e=10;e<t.length;e++){const i=t[e],r=i[1];dC(i)&&cf(r,i,r.template,i[8])}}(t),null!==n.contentQueries&&SP(n,t),o){const c=n.contentCheckHooks;null!==c&&_y(t,c)}else{const c=n.contentHooks;null!==c&&vy(t,c,1),vC(t,1)}!function bY(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)kc(~r);else{const s=r,o=e[++i],a=e[++i];X7(o,s),a(2,t[s])}}}finally{kc(-1)}}(n,t);const a=n.components;null!==a&&function xY(n,t){for(let e=0;e<t.length;e++)zY(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&wS(2,l,i),o){const c=n.viewCheckHooks;null!==c&&_y(t,c)}else{const c=n.viewHooks;null!==c&&vy(t,c,2),vC(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[2]&=-73,1024&t[2]&&(t[2]&=-1025,hC(t[3],-1))}finally{my()}}}function MY(n,t,e,i){const r=t[10],o=Vk(t);try{!o&&r.begin&&r.begin(),o&&cg(n,t,i),cf(n,t,e,i)}finally{!o&&r.end&&r.end()}}function EP(n,t,e,i,r){const s=hs(),o=2&i;try{kc(-1),o&&t.length>20&&pP(n,t,20,!1),e(i,r)}finally{kc(s)}}function TP(n,t,e){if(iC(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function pS(n,t,e){!zk()||(function kY(n,t,e,i){const r=e.directiveStart,s=e.directiveEnd;n.firstCreatePass||qm(e,t),qr(i,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=ea(l);c&&NY(t,e,l);const u=Ym(t,n,a,e);qr(u,t),null!==o&&BY(0,a-r,u,l,0,o),c&&(Us(e.index,t)[8]=u)}}(n,t,e,bo(e,t)),128==(128&e.flags)&&function OY(n,t,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,a=function K7(){return zt.lFrame.currentDirectiveIndex}();try{kc(o);for(let l=i;l<r;l++){const c=n.data[l],u=t[l];mC(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&LP(c,u)}}finally{kc(-1),mC(a)}}(n,t,e))}function mS(n,t,e=bo){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?e(t,n):n[o];n[r++]=a}}}function AP(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Vy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Vy(n,t,e,i,r,s,o,a,l,c){const u=20+i,d=u+r,h=function CY(n,t){const e=[];for(let i=0;i<t;i++)e.push(i<n?null:Gt);return e}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function IP(n,t,e,i){const r=UP(t);null===e?r.push(i):(r.push(e),n.firstCreatePass&&zP(n).push(i,r.length-1))}function kP(n,t,e){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(t,r):e[i]=[t,r]}return e}function $s(n,t,e,i,r,s,o,a){const l=bo(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[i])?(jP(n,e,u,i,r),uy(t)&&function AY(n,t){const e=Us(t,n);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(i=function TY(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,t.value||"",i):r,Ai(s)?s.setProperty(l,i,r):bC(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function gS(n,t,e,i){let r=!1;if(zk()){const s=function PY(n,t,e){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];hP(e,o.selectors,!1)&&(r||(r=[]),My(qm(e,t),n,o.type),ea(o)?(FP(n,e),r.unshift(o)):r.push(o))}return r}(n,t,e),o=null===i?null:{"":-1};if(null!==s){r=!0,NP(e,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=lf(n,t,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];e.mergedAttrs=by(e.mergedAttrs,d.hostAttrs),BP(n,e,t,c,d),FY(c,d,o),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function EY(n,t){const i=t.directiveEnd,r=n.data,s=t.attrs,o=[];let a=null,l=null;for(let c=t.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||dP(t)?null:VY(d,s);o.push(h),a=kP(d,c,a),l=kP(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=l}(n,e)}o&&function LY(n,t,e){if(t){const i=n.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new Je(-301,!1);i.push(t[r],s)}}}(e,i,o)}return e.mergedAttrs=by(e.mergedAttrs,e.attrs),r}function PP(n,t,e,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~t.index;(function IY(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function LP(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function FP(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function FY(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;ea(t)&&(e[""]=n)}}function NP(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function BP(n,t,e,i,r){n.data[i]=r;const s=r.factory||(r.factory=qu(r.type)),o=new jm(s,ea(r),null);n.blueprint[i]=o,e[i]=o,PP(n,t,0,i,lf(n,e,r.hostVars,Gt),r)}function NY(n,t,e){const i=bo(t,n),r=AP(e),s=n[10],o=Hy(n,lg(n,r,null,e.onPush?64:16,i,t,s,s.createRenderer(i,e),null,null));n[t.index]=o}function Ha(n,t,e,i,r,s){const o=bo(n,t);!function _S(n,t,e,i,r,s,o){if(null==s)Ai(n)?n.removeAttribute(t,r,e):t.removeAttribute(r);else{const a=null==o?Ut(s):o(s,i||"",r);Ai(n)?n.setAttribute(t,r,a,e):e?t.setAttributeNS(e,r,a):t.setAttribute(r,a)}}(t[11],o,s,n.value,e,i,r)}function BY(n,t,e,i,r,s){const o=s[t];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(e,d,c,u):e[u]=d}}}function VY(n,t){let e=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,n[r],t[i+1])),i+=2}else i+=2;else i+=4}return e}function VP(n,t,e,i){return new Array(n,!0,!1,t,null,0,i,e,null,null)}function zY(n,t){const e=Us(t,n);if(dC(e)){const i=e[1];80&e[2]?cf(i,e,i.template,e[8]):e[5]>0&&vS(e)}}function vS(n){for(let i=$C(n);null!==i;i=qC(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];cf(o,s,o.template,s[8])}else s[5]>0&&vS(s)}const e=n[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=Us(e[i],n);dC(r)&&r[5]>0&&vS(r)}}function GY(n,t){const e=Us(t,n),i=e[1];(function WY(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(i,e),cg(i,e,e[8])}function Hy(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function yS(n){for(;n;){n[2]|=64;const t=og(n);if(E7(n)&&!t)return n;n=t}return null}function HP(n){!function bS(n){for(let t=0;t<n.components.length;t++){const e=n.components[t],i=HC(e),r=i[1];MY(r,i,r.template,e)}}(n[8])}function wS(n,t,e){_C(0),t(n,e)}const $Y=(()=>Promise.resolve(null))();function UP(n){return n[7]||(n[7]=[])}function zP(n){return n.cleanup||(n.cleanup=[])}function GP(n,t,e){return(null===n||ea(n))&&(e=function V7(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(e[t.index])),e[11]}function WP(n,t){const e=n[9],i=e?e.get(Pc,null):null;i&&i.handleError(t)}function jP(n,t,e,i,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Ml(n,t,e){const i=hy(t,n);!function YO(n,t,e){Ai(n)?n.setValue(t,e):t.textContent=e}(n[11],i,e)}function Uy(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=YM(r,a):2==s&&(i=YM(i,a+": "+t[++o]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}const MS=new ve("INJECTOR",-1);class $P{get(t,e=Qm){if(e===Qm){const i=new Error(`NullInjectorError: No provider for ${Pn(t)}!`);throw i.name="NullInjectorError",i}return e}}const CS=new ve("Set Injector scope."),ug={},XY={};let SS;function qP(){return void 0===SS&&(SS=new $P),SS}function YP(n,t=null,e=null,i){const r=XP(n,t,e,i);return r._resolveInjectorDefTypes(),r}function XP(n,t=null,e=null,i){return new KY(n,e,t||qP(),i)}class KY{constructor(t,e,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];e&&Fa(e,a=>this.processProvider(a,t,e)),Fa([t],a=>this.processInjectorType(a,[],s)),this.records.set(MS,uf(void 0,this));const o=this.records.get(CS);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:Pn(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Qm,i=Lt.Default){this.assertNotDestroyed();const r=vO(this),s=Ac(void 0);try{if(!(i&Lt.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function rX(n){return"function"==typeof n||"object"==typeof n&&n instanceof ve}(t)&&KM(t);a=l&&this.injectableDefInScope(l)?uf(ES(t),ug):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&Lt.Self?qP():this.parent).get(t,e=i&Lt.Optional&&e===Qm?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Ty]=o[Ty]||[]).unshift(Pn(t)),r)throw o;return function k9(n,t,e,i){const r=n[Ty];throw t[_O]&&r.unshift(t[_O]),n.message=function O9(n,t,e,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=Pn(t);if(Array.isArray(t))r=t.map(Pn).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Pn(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(T9,"\n  ")}`}("\n"+n.message,r,e,i),n.ngTokenPath=r,n[Ty]=null,n}(o,t,"R3InjectorError",this.source)}throw o}finally{Ac(s),vO(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((i,r)=>t.push(Pn(r))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Je(205,!1)}processInjectorType(t,e,i){if(!(t=Xt(t)))return!1;let r=Ek(t);const s=null==r&&t.ngModule||void 0,o=void 0===s?t:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=Ek(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{Fa(r.imports,d=>{this.processInjectorType(d,e,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];Fa(f,p=>this.processProvider(p,h,f||$n))}}this.injectorDefTypes.add(o);const l=qu(o)||(()=>new o);this.records.set(o,uf(l,ug));const c=r.providers;if(null!=c&&!a){const u=t;Fa(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==t.providers}processProvider(t,e,i){let r=df(t=Xt(t))?t:Xt(t&&t.provide);const s=function QY(n,t,e){return ZP(n)?uf(void 0,n.useValue):uf(KP(n),ug)}(t);if(df(t)||!0!==t.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=uf(void 0,ug,!0),o.factory=()=>RC(o.multi),this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,s)}hydrate(t,e){return e.value===ug&&(e.value=XY,e.value=e.factory()),"object"==typeof e.value&&e.value&&function iX(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Xt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ES(n){const t=KM(n),e=null!==t?t.factory:qu(n);if(null!==e)return e;if(n instanceof ve)throw new Je(204,!1);if(n instanceof Function)return function ZY(n){const t=n.length;if(t>0)throw Zm(t,"?"),new Je(204,!1);const e=function f7(n){const t=n&&(n[sy]||n[Tk]);if(t){const e=function p7(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Je(204,!1)}function KP(n,t,e){let i;if(df(n)){const r=Xt(n);return qu(r)||ES(r)}if(ZP(n))i=()=>Xt(n.useValue);else if(function eX(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...RC(n.deps||[]));else if(function JY(n){return!(!n||!n.useExisting)}(n))i=()=>ee(Xt(n.useExisting));else{const r=Xt(n&&(n.useClass||n.provide));if(!function nX(n){return!!n.deps}(n))return qu(r)||ES(r);i=()=>new r(...RC(n.deps))}return i}function uf(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function ZP(n){return null!==n&&"object"==typeof n&&D9 in n}function df(n){return"function"==typeof n}let Ui=(()=>{class n{static create(e,i){var r;if(Array.isArray(e))return YP({name:""},i,e,"");{const s=null!==(r=e.name)&&void 0!==r?r:"";return YP({name:s},e.parent,e.providers,s)}}}return n.THROW_IF_NOT_FOUND=Qm,n.NULL=new $P,n.\u0275prov=be({token:n,providedIn:"any",factory:()=>ee(MS)}),n.__NG_ELEMENT_ID__=-1,n})();function hX(n,t){gy(HC(n)[1],pr())}function he(n){let t=function cL(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const i=[n];for(;t;){let r;if(ea(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Je(903,"");r=t.\u0275dir}if(r){if(e){i.push(r);const o=n;o.inputs=DS(n.inputs),o.declaredInputs=DS(n.declaredInputs),o.outputs=DS(n.outputs);const a=r.hostBindings;a&&gX(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&pX(n,l),c&&mX(n,c),qM(n.inputs,r.inputs),qM(n.declaredInputs,r.declaredInputs),qM(n.outputs,r.outputs),ea(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===he&&(e=!1)}}t=Object.getPrototypeOf(t)}!function fX(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=by(r.hostAttrs,e=by(e,r.hostAttrs))}}(i)}function DS(n){return n===Vh?{}:n===$n?[]:n}function pX(n,t){const e=n.viewQuery;n.viewQuery=e?(i,r)=>{t(i,r),e(i,r)}:t}function mX(n,t){const e=n.contentQueries;n.contentQueries=e?(i,r,s)=>{t(i,r,s),e(i,r,s)}:t}function gX(n,t){const e=n.hostBindings;n.hostBindings=e?(i,r)=>{t(i,r),e(i,r)}:t}let zy=null;function hf(){if(!zy){const n=Un.Symbol;if(n&&n.iterator)zy=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const i=t[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(zy=i)}}}return zy}function dg(n){return!!RS(n)&&(Array.isArray(n)||!(n instanceof Map)&&hf()in n)}function RS(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ua(n,t,e){return n[t]=e}function Yr(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Qu(n,t,e,i){const r=Yr(n,t,e);return Yr(n,t+1,i)||r}function bn(n,t,e,i){const r=xe();return Yr(r,jh(),t)&&(yn(),Ha(Di(),r,n,t,e,i)),bn}function pf(n,t,e,i){return Yr(n,jh(),e)?t+Ut(e)+i:Gt}function mf(n,t,e,i,r,s){const a=Qu(n,bl(),e,r);return xl(2),a?t+Ut(e)+i+Ut(r)+s:Gt}function bf(n,t,e,i,r,s,o,a,l,c,u,d,h,f,p,m){const g=bl();let _=function Mo(n,t,e,i,r,s){const o=Qu(n,t,e,i);return Qu(n,t+2,r,s)||o}(n,g,e,r,o,l);return _=function Gy(n,t,e,i,r){const s=Qu(n,t,e,i);return Yr(n,t+2,r)||s}(n,g+4,u,h,p)||_,xl(7),_?t+Ut(e)+i+Ut(r)+s+Ut(o)+a+Ut(l)+c+Ut(u)+d+Ut(h)+f+Ut(p)+m:Gt}function Ge(n,t,e,i,r,s,o,a){const l=xe(),c=yn(),u=n+20,d=c.firstCreatePass?function MX(n,t,e,i,r,s,o,a,l){const c=t.consts,u=af(t,n,4,o||null,Ic(c,a));gS(t,e,u,Ic(c,l)),gy(t,u);const d=u.tViews=Vy(2,u,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,i,r,s,o):c.data[u];La(d,!1);const h=l[11].createComment("");Py(c,l,h,d),qr(h,l),Hy(l,l[u]=VP(h,l,h,d)),dy(d)&&pS(c,l,d),null!=o&&mS(l,d,a)}function ui(n){return Wh(function q7(){return zt.lFrame.contextLView}(),20+n)}function M(n,t=Lt.Default){const e=xe();return null===e?ee(n,t):aO(pr(),e,Xt(n),t)}function fg(){throw new Error("invalid")}function Z(n,t,e){const i=xe();return Yr(i,jh(),t)&&$s(yn(),Di(),i,n,t,i[11],e,!1),Z}function LS(n,t,e,i,r){const o=r?"class":"style";jP(n,e,t.inputs[o],o,i)}function S(n,t,e,i){const r=xe(),s=yn(),o=20+n,a=r[11],l=r[o]=XC(a,t,function n9(){return zt.lFrame.currentNamespace}()),c=s.firstCreatePass?function WX(n,t,e,i,r,s,o){const a=t.consts,c=af(t,n,2,r,Ic(a,s));return gS(t,e,c,Ic(a,o)),null!==c.attrs&&Uy(c,c.attrs,!1),null!==c.mergedAttrs&&Uy(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,r,0,t,e,i):s.data[o];La(c,!0);const u=c.mergedAttrs;null!==u&&yy(a,l,u);const d=c.classes;null!==d&&tS(a,l,d);const h=c.styles;return null!==h&&lP(a,l,h),64!=(64&c.flags)&&Py(s,r,l,c),0===function z7(){return zt.lFrame.elementDepthCount}()&&qr(l,r),function G7(){zt.lFrame.elementDepthCount++}(),dy(c)&&(pS(s,r,c),TP(s,c,r)),null!==i&&mS(r,c),S}function T(){let n=pr();fC()?pC():(n=n.parent,La(n,!1));const t=n;!function W7(){zt.lFrame.elementDepthCount--}();const e=yn();return e.firstCreatePass&&(gy(e,n),iC(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function a9(n){return 0!=(16&n.flags)}(t)&&LS(e,t,xe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function l9(n){return 0!=(32&n.flags)}(t)&&LS(e,t,xe(),t.stylesWithoutHost,!1),T}function ae(n,t,e,i){return S(n,t,e,i),T(),ae}function Tr(n,t,e){const i=xe(),r=yn(),s=n+20,o=r.firstCreatePass?function jX(n,t,e,i,r){const s=t.consts,o=Ic(s,i),a=af(t,n,8,"ng-container",o);return null!==o&&Uy(a,o,!0),gS(t,e,a,Ic(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,i,t,e):r.data[s];La(o,!0);const a=i[s]=i[11].createComment("");return Py(r,i,a,o),qr(a,i),dy(o)&&(pS(r,i,o),TP(r,o,i)),null!=e&&mS(i,o),Tr}function Ar(){let n=pr();const t=yn();return fC()?pC():(n=n.parent,La(n,!1)),t.firstCreatePass&&(gy(t,n),iC(n)&&t.queries.elementEnd(n)),Ar}function ra(n,t,e){return Tr(n,t,e),Ar(),ra}function Co(){return xe()}function pg(n){return!!n&&"function"==typeof n.then}function DL(n){return!!n&&"function"==typeof n.subscribe}const FS=DL;function Xe(n,t,e,i){const r=xe(),s=yn(),o=pr();return RL(s,r,r[11],o,n,t,!!e,i),Xe}function jy(n,t){const e=pr(),i=xe(),r=yn();return RL(r,i,GP(gC(r.data),e,i),e,n,t,!1),jy}function RL(n,t,e,i,r,s,o,a){const l=dy(i),u=n.firstCreatePass&&zP(n),d=t[8],h=UP(t);let f=!0;if(3&i.type||a){const g=bo(i,t),_=a?a(g):g,v=h.length,y=a?b=>a(Zi(b[i.index])):i.index;if(Ai(e)){let b=null;if(!a&&l&&(b=function $X(n,t,e,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===i){const a=t[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,t,r,i.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,f=!1;else{s=NS(i,t,d,s,!1);const x=e.listen(_,r,s);h.push(s,x),u&&u.push(r,y,v,v+1)}}else s=NS(i,t,d,s,!0),_.addEventListener(r,s,o),h.push(s),u&&u.push(r,y,v,o)}else s=NS(i,t,d,s,!1);const p=i.outputs;let m;if(f&&null!==p&&(m=p[r])){const g=m.length;if(g)for(let _=0;_<g;_+=2){const w=t[m[_]][m[_+1]].subscribe(s),E=h.length;h.push(s,w),u&&u.push(r,i.index,E,-(E+1))}}}function IL(n,t,e,i){try{return!1!==e(i)}catch(r){return WP(n,r),!1}}function NS(n,t,e,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?Us(n.index,t):t;0==(32&t[2])&&yS(a);let l=IL(t,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=IL(t,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Qe(n=1){return function Q7(n){return(zt.lFrame.contextLView=function J7(n,t){for(;n>0;)t=t[15],n--;return t}(n,zt.lFrame.contextLView))[8]}(n)}function qX(n,t){let e=null;const i=function iY(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===i?hP(n,s,!0):oY(i,s))return r}else e=r}return e}function zi(n){const t=xe()[16][6];if(!t.projection){const i=t.projection=Zm(n?n.length:1,null),r=i.slice();let s=t.child;for(;null!==s;){const o=n?qX(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Tn(n,t=0,e){const i=xe(),r=yn(),s=af(r,20+n,16,null,e||null);null===s.projection&&(s.projection=t),pC(),64!=(64&s.flags)&&function Kq(n,t,e){aP(t[11],0,t,e,ZO(n,e,t),tP(e.parent||t[6],e,t))}(r,i,s)}function $y(n,t,e){return zn(n,"",t,"",e),$y}function zn(n,t,e,i,r){const s=xe(),o=pf(s,t,e,i);return o!==Gt&&$s(yn(),Di(),s,n,o,s[11],r,!1),zn}function HL(n,t,e,i,r){const s=n[e+1],o=null===t;let a=i?na(s):wl(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];KX(n[a],t)&&(l=!0,n[a+1]=i?rS(u):nS(u)),a=i?na(u):wl(u)}l&&(n[e+1]=i?nS(s):rS(s))}function KX(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Jh(n,t)>=0}const gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function UL(n){return n.substring(gr.key,gr.keyEnd)}function zL(n,t){const e=gr.textEnd;return e===t?-1:(t=gr.keyEnd=function eK(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,gr.key=t,e),Mf(n,t,e))}function Mf(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Xr(n,t,e){return sa(n,t,e,!1),Xr}function Zt(n,t){return sa(n,t,null,!0),Zt}function Ga(n,t){for(let e=function QX(n){return function WL(n){gr.key=0,gr.keyEnd=0,gr.value=0,gr.valueEnd=0,gr.textEnd=n.length}(n),zL(n,Mf(n,0,gr.textEnd))}(t);e>=0;e=zL(t,e))Gs(n,UL(t),!0)}function sa(n,t,e,i){const r=xe(),s=yn(),o=xl(2);s.firstUpdatePass&&XL(s,n,o,i),t!==Gt&&Yr(r,o,t)&&ZL(s,s.data[hs()],r,r[11],n,r[o+1]=function uK(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=Pn(Ws(n)))),n}(t,e),i,o)}function oa(n,t,e,i){const r=yn(),s=xl(2);r.firstUpdatePass&&XL(r,null,s,i);const o=xe();if(e!==Gt&&Yr(o,s,e)){const a=r.data[hs()];if(JL(a,i)&&!YL(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=YM(l,e||"")),LS(r,a,o,e,i)}else!function cK(n,t,e,i,r,s,o,a){r===Gt&&(r=$n);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let m,p=null;u===d?(l+=2,c+=2,h!==f&&(p=d,m=f)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,m=f),null!==p&&ZL(n,t,e,i,p,m,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function lK(n,t,e){if(null==e||""===e)return $n;const i=[],r=Ws(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&t(i,r);return i}(n,t,e),i,s)}}function YL(n,t){return t>=n.expandoStartIndex}function XL(n,t,e,i){const r=n.data;if(null===r[e+1]){const s=r[hs()],o=YL(n,e);JL(s,i)&&null===t&&!o&&(t=!1),t=function rK(n,t,e,i){const r=gC(n);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(e=mg(e=BS(null,n,t,e,i),t.attrs,i),s=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==r)if(e=BS(r,n,t,e,i),null===s){let l=function sK(n,t,e){const i=e?t.classBindings:t.styleBindings;if(0!==wl(i))return n[na(i)]}(n,t,i);void 0!==l&&Array.isArray(l)&&(l=BS(null,n,t,l[1],i),l=mg(l,t.attrs,i),function oK(n,t,e,i){n[na(e?t.classBindings:t.styleBindings)]=i}(n,t,i,l))}else s=function aK(n,t,e){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=mg(i,n[s].hostAttrs,e);return mg(i,t.attrs,e)}(n,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,i),function YX(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=na(o),l=wl(o);n[i]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||Jh(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const h=na(n[a+1]);n[i+1]=Fy(h,a),0!==h&&(n[h+1]=iS(n[h+1],i)),n[a+1]=function uY(n,t){return 131071&n|t<<17}(n[a+1],i)}else n[i+1]=Fy(a,0),0!==a&&(n[a+1]=iS(n[a+1],i)),a=i;else n[i+1]=Fy(l,0),0===a?a=i:n[l+1]=iS(n[l+1],i),l=i;c&&(n[i+1]=nS(n[i+1])),HL(n,u,i,!0),HL(n,u,i,!1),function XX(n,t,e,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof t&&Jh(s,t)>=0&&(e[i+1]=rS(e[i+1]))}(t,u,n,i,s),o=Fy(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,i)}}function BS(n,t,e,i,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],i=mg(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function mg(n,t,e){const i=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Gs(n,o,!!e||t[++s]))}return void 0===n?null:n}function ZL(n,t,e,i,r,s,o,a){if(!(3&t.type))return;const l=n.data,c=l[a+1];qy(function _P(n){return 1==(1&n)}(c)?QL(l,t,e,r,wl(c),o):void 0)||(qy(s)||function gP(n){return 2==(2&n)}(c)&&(s=QL(l,null,e,r,a,o)),function Qq(n,t,e,i,r){const s=Ai(n);if(t)r?s?n.addClass(e,i):e.classList.add(i):s?n.removeClass(e,i):e.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:js.DashCase;if(null==r)s?n.removeStyle(e,i,o):e.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=js.Important),s?n.setStyle(e,i,r,o):e.style.setProperty(i,r,a?"important":"")}}}(i,o,hy(hs(),e),r,s))}function QL(n,t,e,i,r,s){const o=null===t;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[r+1];h===Gt&&(h=d?$n:void 0);let f=d?TC(h,i):u===i?h:void 0;if(c&&!qy(f)&&(f=TC(l,i)),qy(f)&&(a=f,o))return a;const p=n[r+1];r=o?na(p):wl(p)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=TC(l,i))}return a}function qy(n){return void 0!==n}function JL(n,t){return 0!=(n.flags&(t?16:32))}function k(n,t=""){const e=xe(),i=yn(),r=n+20,s=i.firstCreatePass?af(i,r,1,t,null):i.data[r],o=e[r]=function YC(n,t){return Ai(n)?n.createText(t):n.createTextNode(t)}(e[11],t);Py(i,e,o,s),La(s,!1)}function Ju(n){return Ot("",n,""),Ju}function Ot(n,t,e){const i=xe(),r=pf(i,n,t,e);return r!==Gt&&Ml(i,hs(),r),Ot}function gg(n,t,e,i,r){const s=xe(),o=mf(s,n,t,e,i,r);return o!==Gt&&Ml(s,hs(),o),gg}function mi(n,t,e){oa(Gs,Ga,pf(xe(),n,t,e),!0)}function Yy(n,t,e,i,r){return sa(n,pf(xe(),t,e,i),r,!1),Yy}function Cf(n,t,e){const i=xe();return Yr(i,jh(),t)&&$s(yn(),Di(),i,n,t,i[11],e,!0),Cf}function Xy(n,t,e){const i=xe();if(Yr(i,jh(),t)){const s=yn(),o=Di();$s(s,o,i,n,t,GP(gC(s.data),o,i),e,!0)}return Xy}const Ky="en-US";let yF=Ky;function US(n,t,e,i,r){if(n=Xt(n),Array.isArray(n))for(let s=0;s<n.length;s++)US(n[s],t,e,i,r);else{const s=yn(),o=xe();let a=df(n)?n:Xt(n.provide),l=KP(n);const c=pr(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(df(n)||!n.multi){const f=new jm(l,r,M),p=GS(a,t,r?u:u+h,d);-1===p?(My(qm(c,o),s,a),zS(s,n,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(f),o.push(f)):(e[p]=f,o[p]=f)}else{const f=GS(a,t,u+h,d),p=GS(a,t,u,u+h),m=f>=0&&e[f],g=p>=0&&e[p];if(r&&!g||!r&&!m){My(qm(c,o),s,a);const _=function EZ(n,t,e,i,r){const s=new jm(n,e,M);return s.multi=[],s.index=t,s.componentProviders=0,GF(s,r,i&&!e),s}(r?SZ:CZ,e.length,r,i,l);!r&&g&&(e[p].providerFactory=_),zS(s,n,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(_),o.push(_)}else zS(s,n,f>-1?f:p,GF(e[r?p:f],l,!r&&i));!r&&i&&g&&e[p].componentProviders++}}}function zS(n,t,e,i){const r=df(t),s=function tX(n){return!!n.useClass}(t);if(r||s){const l=(s?Xt(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function GF(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function GS(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function CZ(n,t,e,i){return WS(this.multi,[])}function SZ(n,t,e,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ym(e,e[1],this.providerFactory.index,i);s=a.slice(0,o),WS(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],WS(r,s);return s}function WS(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function gt(n,t=[]){return e=>{e.providersResolver=(i,r)=>function MZ(n,t,e){const i=yn();if(i.firstCreatePass){const r=ea(n);US(e,i.data,i.blueprint,r,!0),US(t,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,t)}}class WF{}class DZ{resolveComponentFactory(t){throw function AZ(n){const t=Error(`No component factory found for ${Pn(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let td=(()=>{class n{}return n.NULL=new DZ,n})();function RZ(){return Tf(pr(),xe())}function Tf(n,t){return new Ve(bo(n,t))}let Ve=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=RZ,n})();function IZ(n){return n instanceof Ve?n.nativeElement:n}class xg{}let aa=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function OZ(){const n=xe(),e=Us(pr().index,n);return function kZ(n){return n[11]}(Pa(e)?e:n)}(),n})(),PZ=(()=>{class n{}return n.\u0275prov=be({token:n,providedIn:"root",factory:()=>null}),n})();class Nc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const LZ=new Nc("13.3.11"),jS={};function t0(n,t,e,i,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&i.push(Zi(s)),Jo(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&t0(l[1],l,c,i)}const o=e.type;if(8&o)t0(n,t,e.child,i);else if(32&o){const a=jC(e,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=sP(t,e);if(Array.isArray(a))i.push(...a);else{const l=og(t[16]);t0(l[1],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}class wg{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return t0(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Jo(t)){const e=t[8],i=e?e.indexOf(this):-1;i>-1&&(KC(t,i),Sy(e,i))}this._attachedToViewContainer=!1}KO(this._lView[1],this._lView)}onDestroy(t){IP(this._lView[1],this._lView,null,t)}markForCheck(){yS(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function xS(n,t,e){const i=t[10];i.begin&&i.begin();try{cf(n,t,n.template,e)}catch(r){throw WP(t,r),r}finally{i.end&&i.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zq(n,t){ag(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Je(902,"");this._appRef=t}}class FZ extends wg{constructor(t){super(t),this._view=t}detectChanges(){HP(this._view)}checkNoChanges(){}get context(){return null}}class $F extends td{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=jr(t);return new $S(e,this.ngModule)}}function qF(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class $S extends WF{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function lY(n){return n.map(aY).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return qF(this.componentDef.inputs)}get outputs(){return qF(this.componentDef.outputs)}create(t,e,i,r){const s=(r=r||this.ngModule)?function BZ(n,t){return{get:(e,i,r)=>{const s=n.get(e,jS,r);return s!==jS||i===jS?s:t.get(e,i,r)}}}(t,r.injector):t,o=s.get(xg,Bk),a=s.get(PZ,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function RP(n,t,e){if(Ai(n))return n.selectRootElement(t,e===Zo.ShadowDom);let i="string"==typeof t?n.querySelector(t):t;return i.textContent="",i}(l,i,this.componentDef.encapsulation):XC(o.createRenderer(null,this.componentDef),c,function NZ(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function lL(n,t){return{components:[],scheduler:n||Lq,clean:$Y,playerHandler:t||null,flags:0}}(),f=Vy(0,null,null,1,0,null,null,null,null,null),p=lg(null,f,h,d,null,null,o,l,a,s);let m,g;py(p);try{const _=function oL(n,t,e,i,r,s){const o=e[1];e[20]=n;const l=af(o,20,2,"#host",null),c=l.mergedAttrs=t.hostAttrs;null!==c&&(Uy(l,c,!0),null!==n&&(yy(r,n,c),null!==l.classes&&tS(r,n,l.classes),null!==l.styles&&lP(r,n,l.styles)));const u=i.createRenderer(n,t),d=lg(e,AP(t),null,t.onPush?64:16,e[20],l,i,u,s||null,null);return o.firstCreatePass&&(My(qm(l,e),o,t.type),FP(o,l),NP(l,e.length,1)),Hy(e,d),e[20]=d}(u,this.componentDef,p,o,l);if(u)if(i)yy(l,u,["ng-version",LZ.full]);else{const{attrs:v,classes:y}=function cY(n){const t=[],e=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&t.push(s,n[++i]):8===r&&e.push(s);else{if(!ta(r))break;r=s}i++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);v&&yy(l,u,v),y&&y.length>0&&tS(l,u,y.join(" "))}if(g=uC(f,20),void 0!==e){const v=g.projection=[];for(let y=0;y<this.ngContentSelectors.length;y++){const b=e[y];v.push(null!=b?Array.from(b):null)}}m=function aL(n,t,e,i,r){const s=e[1],o=function RY(n,t,e){const i=pr();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),BP(n,i,t,lf(n,t,1,null),e));const r=Ym(t,n,i.directiveStart,i);qr(r,t);const s=bo(i,t);return s&&qr(s,t),r}(s,e,t);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,t)),t.contentQueries){const l=pr();t.contentQueries(1,o,l.directiveStart)}const a=pr();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(kc(a.index),PP(e[1],a,0,a.directiveStart,a.directiveEnd,t),LP(t,o)),o}(_,this.componentDef,p,h,[hX]),cg(f,p,null)}finally{my()}return new HZ(this.componentType,m,Tf(g,p),p,g)}}class HZ extends class TZ{}{constructor(t,e,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new FZ(r),this.componentType=t}get injector(){return new Yh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class Cl{}class YF{}const Af=new Map;class ZF extends Cl{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $F(this);const i=_o(t);this._bootstrapComponents=Va(i.bootstrap),this._r3Injector=XP(t,e,[{provide:Cl,useValue:this},{provide:td,useValue:this.componentFactoryResolver}],Pn(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ui.THROW_IF_NOT_FOUND,i=Lt.Default){return t===Ui||t===Cl||t===MS?this:this._r3Injector.get(t,e,i)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class qS extends YF{constructor(t){super(),this.moduleType=t,null!==_o(t)&&function zZ(n){const t=new Set;!function e(i){const r=_o(i,!0),s=r.id;null!==s&&(function XF(n,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${n} - ${Pn(t)} vs ${Pn(t.name)}`)}(s,Af.get(s),i),Af.set(s,i));const o=Va(r.imports);for(const a of o)t.has(a)||(t.add(a),e(a))}(n)}(t)}create(t){return new ZF(this.moduleType,t)}}function nd(n,t,e){const i=ds()+n,r=xe();return r[i]===Gt?Ua(r,i,e?t.call(e):t()):function hg(n,t){return n[t]}(r,i)}function Sl(n,t,e,i){return QF(xe(),ds(),n,t,e,i)}function QF(n,t,e,i,r,s){const o=t+e;return Yr(n,o,r)?Ua(n,o+1,s?i.call(s,r):i(r)):function Mg(n,t){const e=n[t];return e===Gt?void 0:e}(n,o+1)}function Dr(n,t){const e=yn();let i;const r=n+20;e.firstCreatePass?(i=function ZZ(n,t){if(t)for(let e=t.length-1;e>=0;e--){const i=t[e];if(n===i.name)return i}}(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const s=i.factory||(i.factory=qu(i.type)),o=Ac(M);try{const a=xy(!1),l=s();return xy(a),function CX(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}(e,xe(),r,l),l}finally{Ac(o)}}function Rr(n,t,e){const i=n+20,r=xe(),s=Wh(r,i);return function Cg(n,t){return n[1].data[t].pure}(r,i)?QF(r,ds(),t,s.transform,e,s):s.transform(e)}function YS(n){return t=>{setTimeout(n,void 0,t)}}const Wt=class nQ extends Tt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){var r,s,o;let a=t,l=e||(()=>null),c=i;if(t&&"object"==typeof t){const d=t;a=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=YS(l),a&&(a=YS(a)),c&&(c=YS(c)));const u=super.subscribe({next:a,error:l,complete:c});return t instanceof Jn&&t.add(u),u}};function iQ(){return this._results[hf()]()}class Df{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=hf(),i=Df.prototype;i[e]||(i[e]=iQ)}get changes(){return this._changes||(this._changes=new Wt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const r=xo(t);(this._changesDetected=!function v9(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ir=(()=>{class n{}return n.__NG_ELEMENT_ID__=oQ,n})();const rQ=Ir,sQ=class extends rQ{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(t){const e=this._declarationTContainer.tViews,i=lg(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(e)),cg(e,i,t),new wg(i)}};function oQ(){return n0(pr(),xe())}function n0(n,t){return 4&n.type?new sQ(t,n,Tf(n,t)):null}let kr=(()=>{class n{}return n.__NG_ELEMENT_ID__=aQ,n})();function aQ(){return o2(pr(),xe())}const lQ=kr,r2=class extends lQ{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Tf(this._hostTNode,this._hostLView)}get injector(){return new Yh(this._hostTNode,this._hostLView)}get parentInjector(){const t=wy(this._hostTNode,this._hostLView);if(nO(t)){const e=qh(t,this._hostLView),i=$h(t);return new Yh(e[1].data[i+8],e)}return new Yh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=s2(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,i){const r=t.createEmbeddedView(e||{});return this.insert(r,i),r}createComponent(t,e,i,r,s){const o=t&&!function Km(n){return"function"==typeof n}(t);let a;if(o)a=e;else{const d=e||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.ngModuleRef}const l=o?t:new $S(jr(t)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Cl,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(t,e){const i=t._lView,r=i[1];if(function U7(n){return Jo(n[3])}(i)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const d=i[3],h=new r2(d,d[6],d[3]);h.detach(h.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function Wq(n,t,e,i){const r=10+i,s=e.length;i>0&&(e[r-1][4]=t),i<s-10?(t[4]=e[r],hO(e,10+i,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function jq(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(n),t[2]|=128}(r,i,o,s);const a=JC(s,o),l=i[11],c=Oy(l,o[7]);return null!==c&&function Uq(n,t,e,i,r,s){i[0]=r,i[6]=t,ag(n,i,e,1,r,s)}(r,o[6],l,i,c,a),t.attachToViewContainerRef(),hO(XS(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=s2(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=KC(this._lContainer,e);i&&(Sy(XS(this._lContainer),e),KO(i[1],i))}detach(t){const e=this._adjustIndex(t,-1),i=KC(this._lContainer,e);return i&&null!=Sy(XS(this._lContainer),e)?new wg(i):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function s2(n){return n[8]}function XS(n){return n[8]||(n[8]=[])}function o2(n,t){let e;const i=t[n.index];if(Jo(i))e=i;else{let r;if(8&n.type)r=Zi(i);else{const s=t[11];r=s.createComment("");const o=bo(n,t);Zu(s,Oy(s,o),r,function Xq(n,t){return Ai(n)?n.nextSibling(t):t.nextSibling}(s,o),!1)}t[n.index]=e=VP(i,t,r,n),Hy(t,e)}return new r2(e,n,t)}class KS{constructor(t){this.queryList=t,this.matches=null}clone(){return new KS(this.queryList)}setDirty(){this.queryList.setDirty()}}class ZS{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new ZS(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==d2(t,e).matches&&this.queries[e].setDirty()}}class a2{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class QS{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,null!==e?e.push(s):e=[s])}return null!==e?new QS(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class JS{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new JS(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(t,e,dQ(e,s)),this.matchTNodeWithReadOption(t,e,Cy(e,t,s,!1,!1))}else i===Ir?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Cy(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ve||r===kr||r===Ir&&4&e.type)this.addMatch(e.index,-2);else{const s=Cy(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function dQ(n,t){const e=n.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function fQ(n,t,e,i){return-1===e?function hQ(n,t){return 11&n.type?Tf(n,t):4&n.type?n0(n,t):null}(t,n):-2===e?function pQ(n,t,e){return e===Ve?Tf(t,n):e===Ir?n0(t,n):e===kr?o2(t,n):void 0}(n,t,i):Ym(n,n[1],e,t)}function l2(n,t,e,i){const r=t[19].queries[i];if(null===r.matches){const s=n.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:fQ(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function eE(n,t,e,i){const r=n.queries.getByIndex(e),s=r.matches;if(null!==s){const o=l2(n,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=t[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&eE(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];eE(f[1],f,c,i)}}}}}return i}function Ct(n){const t=xe(),e=yn(),i=$k();_C(i+1);const r=d2(e,i);if(n.dirty&&Vk(t)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?eE(e,t,i,[]):l2(e,t,r,i);n.reset(s,IZ),n.notifyOnChanges()}return!0}return!1}function ni(n,t,e){const i=yn();i.firstCreatePass&&(u2(i,new a2(n,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),c2(i,xe(),t)}function di(n,t,e,i){const r=yn();if(r.firstCreatePass){const s=pr();u2(r,new a2(t,e,i),s.index),function gQ(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(r,n),2==(2&e)&&(r.staticContentQueries=!0)}c2(r,xe(),e)}function St(){return function mQ(n,t){return n[19].queries[t].queryList}(xe(),$k())}function c2(n,t,e){const i=new Df(4==(4&e));IP(n,t,i,i.destroy),null===t[19]&&(t[19]=new ZS),t[19].queries.push(new KS(i))}function u2(n,t,e){null===n.queries&&(n.queries=new QS),n.queries.track(new JS(t,e))}function d2(n,t){return n.queries.getByIndex(t)}function Wa(n,t){return n0(n,t)}function o0(...n){}const oE=new ve("Application Initializer");let aE=(()=>{class n{constructor(e){this.appInits=e,this.resolve=o0,this.reject=o0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(pg(s))e.push(s);else if(FS(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(ee(oE,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Eg=new ve("AppId",{providedIn:"root",factory:function A2(){return`${lE()}${lE()}${lE()}`}});function lE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const D2=new ve("Platform Initializer"),qs=new ve("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cE=new ve("appBootstrapListener");let OQ=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const El=new ve("LocaleId",{providedIn:"root",factory:()=>ef(El,Lt.Optional|Lt.SkipSelf)||function PQ(){return"undefined"!=typeof $localize&&$localize.locale||Ky}()});class FQ{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let R2=(()=>{class n{compileModuleSync(e){return new qS(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),s=Va(_o(e).declarations).reduce((o,a)=>{const l=jr(a);return l&&o.push(new $S(l)),o},[]);return new FQ(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BQ=(()=>Promise.resolve(0))();function uE(n){"undefined"==typeof Zone?BQ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class It{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wt(!1),this.onMicrotaskEmpty=new Wt(!1),this.onStable=new Wt(!1),this.onError=new Wt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function VQ(){let n=Un.requestAnimationFrame,t=Un.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function zQ(n){const t=()=>{!function UQ(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Un,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,hE(n),n.isCheckStableRunning=!0,dE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),hE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,s,o,a)=>{try{return I2(n),e.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&t(),k2(n)}},onInvoke:(e,i,r,s,o,a,l)=>{try{return I2(n),e.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),k2(n)}},onHasTask:(e,i,r,s)=>{e.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,hE(n),dE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,i,r,s)=>(e.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!It.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(It.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,HQ,o0,o0);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const HQ={};function dE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function I2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function k2(n){n._nesting--,dE(n)}class GQ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wt,this.onMicrotaskEmpty=new Wt,this.onStable=new Wt,this.onError=new Wt}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}}let fE=(()=>{class n{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{It.assertNotInAngularZone(),uE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uE(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,r){return[]}}return n.\u0275fac=function(e){return new(e||n)(ee(It))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),WQ=(()=>{class n{constructor(){this._applications=new Map,pE.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return pE.findTestabilityInTree(this,e,i)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class jQ{addToWindow(t){}findTestabilityInTree(t,e,i){return null}}let pE=new jQ,id=null;const O2=new ve("AllowMultipleToken"),P2=new ve("PlatformOnDestroy");class L2{constructor(t,e){this.name=t,this.token=e}}function F2(n,t,e=[]){const i=`Platform: ${t}`,r=new ve(i);return(s=[])=>{let o=mE();if(!o||o.injector.get(O2,!1)){const a=[...e,...s,{provide:r,useValue:!0}];n?n(a):function XQ(n){if(id&&!id.get(O2,!1))throw new Je(400,"");id=n;const t=n.get(N2),e=n.get(D2,null);e&&e.forEach(i=>i())}(function ZQ(n=[],t){return Ui.create({name:t,providers:[{provide:CS,useValue:"platform"},{provide:P2,useValue:()=>id=null},...n]})}(a,i))}return function KQ(n){const t=mE();if(!t)throw new Je(401,"");return t}()}}function mE(){var n;return null!==(n=null==id?void 0:id.get(N2))&&void 0!==n?n:null}let N2=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const a=function QQ(n,t){let e;return e="noop"===n?new GQ:("zone.js"===n?void 0:n)||new It({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:It,useValue:a}];return a.run(()=>{const c=Ui.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get(Pc,null);if(!d)throw new Je(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{gE(this._modules,u),h.unsubscribe()})}),function JQ(n,t,e){try{const i=e();return pg(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}(d,a,()=>{const h=u.injector.get(aE);return h.runInitializers(),h.donePromise.then(()=>(function kK(n){Vs(n,"Expected localeId to be defined"),"string"==typeof n&&(yF=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(El,Ky)||Ky),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,i=[]){const r=B2({},i);return function qQ(n,t,e){const i=new qS(e);return Promise.resolve(i)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const i=e.injector.get(a0);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Je(403,"");e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,"");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(P2,null);null==e||e(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(ee(Ui))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function B2(n,t){return Array.isArray(t)?t.reduce(B2,n):Object.assign(Object.assign({},n),t)}let a0=(()=>{class n{constructor(e,i,r,s){this._zone=e,this._injector=i,this._exceptionHandler=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Mn(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new Mn(l=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{It.assertNotInAngularZone(),uE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{It.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{c.unsubscribe(),u.unsubscribe()}});this.isStable=Bh(o,a.pipe(Mk()))}bootstrap(e,i){if(!this._initStatus.done)throw new Je(405,"");let r;r=e instanceof WF?e:this._injector.get(td).resolveComponentFactory(e),this.componentTypes.push(r.componentType);const s=function YQ(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Cl),a=r.create(Ui.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(fE,null),u=c&&a.injector.get(WQ);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),gE(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Je(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;gE(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(cE,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(e){return new(e||n)(ee(It),ee(Ui),ee(Pc),ee(aE))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gE(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let H2=!0,Qi=(()=>{class n{}return n.__NG_ELEMENT_ID__=nJ,n})();function nJ(n){return function iJ(n,t,e){if(uy(n)&&!e){const i=Us(n.index,t);return new wg(i,i)}return 47&n.type?new wg(t[16],t):null}(pr(),xe(),16==(16&n))}class j2{constructor(){}supports(t){return dg(t)}create(t){return new cJ(t)}}const lJ=(n,t)=>t;class cJ{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||lJ}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){const o=!i||e&&e.currentIndex<q2(i,r,s)?e:i,a=q2(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!dg(t))throw new Je(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),i=!0),e=e._next}else r=0,function wX(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[hf()]();let i;for(;!(i=e.next()).done;)t(i.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new uJ(e,i),s,r),t}_verifyReinsertion(t,e,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new $2),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $2),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class uJ{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dJ{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class $2{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new dJ,this.map.set(e,i)),i.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function q2(n,t,e){const i=n.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}class Y2{constructor(){}supports(t){return t instanceof Map||RS(t)}create(){return new hJ}}class hJ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||RS(t)))throw new Je(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new fJ(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}}class fJ{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function X2(){return new ja([new j2])}let ja=(()=>{class n{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||X2()),deps:[[n,new Yu,new wo]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new Je(901,"")}}return n.\u0275prov=be({token:n,providedIn:"root",factory:X2}),n})();function K2(){return new sd([new Y2])}let sd=(()=>{class n{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||K2()),deps:[[n,new Yu,new wo]]}}find(e){const i=this.factories.find(s=>s.supports(e));if(i)return i;throw new Je(901,"")}}return n.\u0275prov=be({token:n,providedIn:"root",factory:K2}),n})();const gJ=F2(null,"core",[]);let _J=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(ee(a0))},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})(),u0=null;function $a(){return u0}const Pt=new ve("DocumentToken");let od=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:function(){return function xJ(){return ee(Z2)}()},providedIn:"platform"}),n})();const wJ=new ve("Location Initialized");let Z2=(()=>{class n extends od{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $a().getBaseHref(this._doc)}onPopState(e){const i=$a().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=$a().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){Q2()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){Q2()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt))},n.\u0275prov=be({token:n,factory:function(){return function MJ(){return new Z2(ee(Pt))}()},providedIn:"platform"}),n})();function Q2(){return!!window.history.pushState}function xE(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function J2(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Tl(n){return n&&"?"!==n[0]?"?"+n:n}let If=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:function(){return function CJ(n){const t=ee(Pt).location;return new eN(ee(od),t&&t.origin||"")}()},providedIn:"root"}),n})();const wE=new ve("appBaseHref");let eN=(()=>{class n extends If{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return xE(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Tl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const o=this.prepareExternalUrl(r+Tl(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){const o=this.prepareExternalUrl(r+Tl(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(ee(od),ee(wE,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),SJ=(()=>{class n extends If{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=xE(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+Tl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+Tl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(ee(od),ee(wE,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),Tg=(()=>{class n{constructor(e,i){this._subject=new Wt,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=J2(tN(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Tl(i))}normalize(e){return n.stripTrailingSlash(function TJ(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,tN(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Tl(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Tl(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=Tl,n.joinWithSlash=xE,n.stripTrailingSlash=J2,n.\u0275fac=function(e){return new(e||n)(ee(If),ee(od))},n.\u0275prov=be({token:n,factory:function(){return function EJ(){return new Tg(ee(If),ee(od))}()},providedIn:"root"}),n})();function tN(n){return n.replace(/\/index.html$/,"")}function uN(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}class dee{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ad=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new dee(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),dN(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{dN(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(M(kr),M(Ir),M(ja))},n.\u0275dir=oe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function dN(n,t){n.context.$implicit=t.item}let Ys=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new hee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){hN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){hN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(M(kr),M(Ir))},n.\u0275dir=oe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class hee{constructor(){this.$implicit=null,this.ngIf=null}}function hN(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Pn(t)}'.`)}class OE{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let b0=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=oe({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),fN=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new OE(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(M(kr),M(Ir),M(b0,9))},n.\u0275dir=oe({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),ld=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split(".");null!=(i=null!=i&&s?`${i}${s}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(sd),M(aa))},n.\u0275dir=oe({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),mN=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(M(kr))},n.\u0275dir=oe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[fr]}),n})();class mee{createSubscription(t,e){return t.subscribe({next:e,error:i=>{throw i}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class gee{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}onDestroy(t){}}const _ee=new gee,vee=new mee;let kf=(()=>{class n{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(pg(e))return _ee;if(DL(e))return vee;throw function ca(n,t){return new Je(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(M(Qi,16))},n.\u0275pipe=ws({name:"async",type:n,pure:!1}),n})(),gN=(()=>{class n{transform(e){return JSON.stringify(e,null,2)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=ws({name:"json",type:n,pure:!1}),n})(),Ss=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})();const vN="browser";function Bc(n){return n===vN}function Of(n){return"server"===n}let Nee=(()=>{class n{}return n.\u0275prov=be({token:n,providedIn:"root",factory:()=>new Bee(ee(Pt),window)}),n})();class Bee{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Vee(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=yN(this.window.history)||yN(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function yN(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bN{}class FE extends class Hee extends class bJ{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function yJ(n){u0||(u0=n)}(new FE)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Uee(){return Rg=Rg||document.querySelector("base"),Rg?Rg.getAttribute("href"):null}();return null==e?null:function zee(n){x0=x0||document.createElement("a"),x0.setAttribute("href",n);const t=x0.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Rg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return uN(document.cookie,t)}}let x0,Rg=null;const xN=new ve("TRANSITION_ID"),Wee=[{provide:oE,useFactory:function Gee(n,t,e){return()=>{e.get(aE).donePromise.then(()=>{const i=$a(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[xN,Pt,Ui],multi:!0}];class NE{static init(){!function $Q(n){pE=n}(new NE)}addToWindow(t){Un.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Un.getAllAngularTestabilities=()=>t.getAllTestabilities(),Un.getAllAngularRootElements=()=>t.getAllRootElements(),Un.frameworkStabilizers||(Un.frameworkStabilizers=[]),Un.frameworkStabilizers.push(i=>{const r=Un.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?$a().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let jee=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const w0=new ve("EventManagerPlugins");let M0=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(ee(w0),ee(It))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class wN{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=$a().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let MN=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),Ig=(()=>{class n extends MN{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(CN),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(CN))}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function CN(n){$a().remove(n)}const BE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},VE=/%COMP%/g;function C0(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?C0(n,r,e):(r=r.replace(VE,n),e.push(r))}return e}function TN(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let S0=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new HE(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case Zo.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Zee(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case Zo.ShadowDom:return new Qee(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=C0(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(ee(M0),ee(Ig),ee(Eg))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class HE{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(BE[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=BE[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=BE[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(js.DashCase|js.Important)?t.style.setProperty(e,i,r&js.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&js.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,TN(i)):this.eventManager.addEventListener(t,e,TN(i))}}class Zee extends HE{constructor(t,e,i,r){super(t),this.component=i;const s=C0(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function Yee(n){return"_ngcontent-%COMP%".replace(VE,n)}(r+"-"+i.id),this.hostAttr=function Xee(n){return"_nghost-%COMP%".replace(VE,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Qee extends HE{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=C0(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Jee=(()=>{class n extends wN{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const DN=["alt","control","meta","shift"],tte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RN={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},nte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ite=(()=>{class n extends wN{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$a().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(DN.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(e){let i="",r=function rte(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&RN.hasOwnProperty(t)&&(t=RN[t]))}return tte[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),DN.forEach(s=>{s!=r&&nte[s](e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const lte=F2(gJ,"browser",[{provide:qs,useValue:vN},{provide:D2,useValue:function ste(){FE.makeCurrent(),NE.init()},multi:!0},{provide:Pt,useFactory:function ate(){return function N7(n){lC=n}(document),document},deps:[]}]),cte=[{provide:CS,useValue:"root"},{provide:Pc,useFactory:function ote(){return new Pc},deps:[]},{provide:w0,useClass:Jee,multi:!0,deps:[Pt,It,qs]},{provide:w0,useClass:ite,multi:!0,deps:[Pt]},{provide:S0,useClass:S0,deps:[M0,Ig,Eg]},{provide:xg,useExisting:S0},{provide:MN,useExisting:Ig},{provide:Ig,useClass:Ig,deps:[Pt]},{provide:fE,useClass:fE,deps:[It]},{provide:M0,useClass:M0,deps:[w0,It]},{provide:bN,useClass:jee,deps:[]}];let IN=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:Eg,useValue:e.appId},{provide:xN,useExisting:Eg},Wee]}}}return n.\u0275fac=function(e){return new(e||n)(ee(n,12))},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:cte,imports:[Ss,_J]}),n})();"undefined"!=typeof window&&window;let kg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:function(e){let i=null;return i=e?new(e||n):ee(PN),i},providedIn:"root"}),n})(),PN=(()=>{class n extends kg{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case En.NONE:return i;case En.HTML:return Na(i,"HTML")?Ws(i):LO(this._doc,String(i)).toString();case En.STYLE:return Na(i,"Style")?Ws(i):i;case En.SCRIPT:if(Na(i,"Script"))return Ws(i);throw new Error("unsafe value used in a script context");case En.URL:return TO(i),Na(i,"URL")?Ws(i):ng(String(i));case En.RESOURCE_URL:if(Na(i,"ResourceURL"))return Ws(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function X9(n){return new W9(n)}(e)}bypassSecurityTrustStyle(e){return function K9(n){return new j9(n)}(e)}bypassSecurityTrustScript(e){return function Z9(n){return new $9(n)}(e)}bypassSecurityTrustUrl(e){return function Q9(n){return new q9(n)}(e)}bypassSecurityTrustResourceUrl(e){return function J9(n){return new Y9(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt))},n.\u0275prov=be({token:n,factory:function(e){let i=null;return i=e?new e:function yte(n){return new PN(n.get(Pt))}(ee(Ui)),i},providedIn:"root"}),n})();class Ln extends Tt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var To=(()=>{return(n=To||(To={})).insulated="insulated",n.orientation="orientation",n.baseDimension="base-dimension",n.extensionToNorth="extension-north",n.extensionToSouth="extension-south",n.extensionToWest="extension-west",n.extensionToEast="extension-east",n.halfCircle="half-circle",n.bendPoint="bend-point",n.roofBoth="roof-both",n.roofCircle="roof-circle",n.roof70="roof-70",n.roofWalls="roof-walls",n.efficiency="efficiency",n.greyOut="greyOut",n.amountSteps="amount-steps",n.viewlines="viewlines",n.warmWaterBuffer="warm-water-buffer",n.iJoists="i-joits",n.dampOpen="damp-open",n.airTight="air-tight",n.pipeLayer="pipe-layer",n.woodFiberPlate="wood-fiber-plate",To;var n})(),tt=(()=>{return(n=tt||(tt={})).welcome="welcome",n.passiv="passiv",n.basics="basics",n.extensions="extensions",n.tower="tower",n.end="end",n.roofBasics="roof-basics",n.roofCircle="roof-circle",n.roofIntermezzo="roof-intermezzo",n.roof70="roof70",n.roofChoice="roof-choice",n.roofEdge="roof-edge",n.stairStart="stair-start",n.stairBasic="stair-basic",n.stairCheck="stair-check",n.stairPlan="stair-plan",n.facadeStart="facade-start",n.facadeWindow="facade-window",n.facadeBrick="facade-Brick",n.facadeDoor="facade-Door",n.contructionFoundation="contruction-foundation",n.contructionCrawlerSpace="contruction-crawler-space",n.contructionRoof="contruction-roof",n.contructionFloor="contruction-floor",n.contructionWall="contruction-wall",n.contructionWallFinish="contruction-wall-finish",n.instaltionDrinkWater="instaltions-drink-water",n.instaltionGreyWater="instaltions-grey-water",n.instaltionHeating="instaltions-heating",n.instaltionElectricity="instaltions-electricity",n.instaltionVentilation="instaltions-ventilation",n.instaltionSmartHome="instaltions-smartHome",n.wiredPower="wired-power",n.wiredEthernet="wired-ethernet",n.wiredSafety="wired-safety",n.wiredExtra="wired-extra",n.wiredLight="wired-light",tt;var n})(),ua=(()=>{return(n=ua||(ua={})).stats="stats",n.grey="grey",n.measure="measure",n.decoration="decoration",n.stramien="stramien",n.towerFootprint="towerFootprint",n.grid="grid",ua;var n})(),te=(()=>{return(n=te||(te={})).top="top",n.ground="ground",n.ceiling="ceiling",n.all="all",n.none="none",te;var n})(),Pf=(()=>{return(n=Pf||(Pf={})).left="left",n.right="right",Pf;var n})(),vr=(()=>{return(n=vr||(vr={})).plan="plan",n.cross="cross",n.stair="stair",n.window="window",n.none="none",vr;var n})(),Ee=(()=>{return(n=Ee||(Ee={})).socket="socket",n.perilex="perilex",n.pir="pir",n.poe="poe",n.ethernet="ethernet",n.light="light",n.lightSwitch="light-switch",n.dimmer="dimmer",n.blinds="blinds",n.temperature="temperature",n.alarm="alarm",n.dlc="dlc",n.ventIn="vent-in",n.ventOut="vent-out",n.smoke="smoke",n.wifi="wifi",n.camera="camera",Ee;var n})(),da=(()=>{return(n=da||(da={})).OutsidePOE="OutsidePOE",n.SharedEthernet="SharedEthernet",da;var n})();let zE=(()=>{class n{constructor(e,i){this.document=e,this.platformId=i,this.documentIsAccessible=Bc(this.platformId)}static getCookieRegExp(e){const i=e.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch(i){return e}}check(e){return!!this.documentIsAccessible&&(e=encodeURIComponent(e),n.getCookieRegExp(e).test(this.document.cookie))}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);const r=n.getCookieRegExp(e).exec(this.document.cookie);return r[1]?n.safeDecodeURIComponent(r[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const e={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(r=>{const[s,o]=r.split("=");e[n.safeDecodeURIComponent(s.replace(/^ /,""))]=n.safeDecodeURIComponent(o)}),e}set(e,i,r,s,o,a,l){if(!this.documentIsAccessible)return;if("number"==typeof r||r instanceof Date||s||o||a||l)return void this.set(e,i,{expires:r,path:s,domain:o,secure:a,sameSite:l||"Lax"});let c=encodeURIComponent(e)+"="+encodeURIComponent(i)+";";const u=r||{};u.expires&&(c+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(c+="path="+u.path+";"),u.domain&&(c+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(c+="secure;"),u.sameSite||(u.sameSite="Lax"),c+="sameSite="+u.sameSite+";",this.document.cookie=c}delete(e,i,r,s,o="Lax"){if(!this.documentIsAccessible)return;const a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:a,path:i,domain:r,secure:s,sameSite:o})}deleteAll(e,i,r,s="Lax"){if(!this.documentIsAccessible)return;const o=this.getAll();for(const a in o)o.hasOwnProperty(a)&&this.delete(a,e,i,r,s)}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt),ee(qs))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wi=(()=>{class n{constructor(e){this.cookieService=e,this.darkMode=!1,this.title="Lindelund",this.update$=new Tt,this.tag$=new Ln(void 0),this.graphic$=new Ln(void 0),this.states$=new Ln([]),this.popupActive$=new Ln(!1),this.fullscreen$=new Ln(!0),this.floor$=new Ln(te.ground),this.scroll$=new Ln({scroll:0,percentage:0,section:void 0,graphicSide:void 0,graphic:void 0}),this.getCookies()}setStates(e,i){const r=this.states$.value;let s;const o=()=>r.includes(e),a=()=>{s=o()?r:[...r,e]};!0===i?a():!1===i||o()?s=r.filter(c=>c!==e):a(),this.states$.next(s)}getCookies(){let e=this.cookieService.get("floor");""===e&&(e=te.ground),this.floor$.next(e);let i=this.cookieService.get("fullscreen");i=""!==i&&"true"===i,this.fullscreen$.next(i)}setFloor(e){let i;void 0!==e?i=e:(this.floor$.value===te.ground&&(i=te.top),this.floor$.value===te.top&&(i=te.ground)),this.floor$.next(i),this.cookieService.set("floor",i),this.update$.next()}setTag(e){this.tag$.next(e),this.update$.next()}setDarkMode(e){document.body.classList.remove("light"),document.body.classList.remove("dark"),this.darkMode=void 0!==e?e:!this.darkMode,this.darkMode?document.body.classList.add("dark"):document.body.classList.add("light")}}return n.\u0275fac=function(e){return new(e||n)(ee(zE))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ft(n){return null!=n&&"false"!=`${n}`}function Xs(n,t=0){return function bte(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function LN(n){return Array.isArray(n)?n:[n]}function tr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function cd(n){return n instanceof Ve?n.nativeElement:n}function _t(...n){return Sr(n,Vm(n))}const{isArray:xte}=Array;function GE(n){return en(t=>function wte(n,t){return xte(t)?n(...t):n(t)}(n,t))}const Mte=["addListener","removeListener"],Cte=["addEventListener","removeEventListener"],Ste=["on","off"];function Og(n,t,e,i){if(ln(e)&&(i=e,e=void 0),i)return Og(n,t,e).pipe(GE(i));const[r,s]=function Ate(n){return ln(n.addEventListener)&&ln(n.removeEventListener)}(n)?Cte.map(o=>a=>n[o](t,a,e)):function Ete(n){return ln(n.addListener)&&ln(n.removeListener)}(n)?Mte.map(FN(n,t)):function Tte(n){return ln(n.on)&&ln(n.off)}(n)?Ste.map(FN(n,t)):[];if(!r&&WM(n))return hr(o=>Og(o,t,e))(us(n));if(!r)throw new TypeError("Invalid event target");return new Mn(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function FN(n,t){return e=>i=>n[e](t,i)}class Dte extends Jn{constructor(t,e){super()}schedule(t,e=0){return this}}const E0={setInterval(n,t,...e){const{delegate:i}=E0;return(null==i?void 0:i.setInterval)?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=E0;return((null==t?void 0:t.clearInterval)||clearInterval)(n)},delegate:void 0};class WE extends Dte{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,i=0){return E0.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;E0.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,i=!1;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,qo(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const Pg={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Pg;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Jn(()=>null==e?void 0:e(r))},requestAnimationFrame(...n){const{delegate:t}=Pg;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Pg;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},NN={now:()=>(NN.delegate||Date).now(),delegate:void 0};class Lg{constructor(t,e=Lg.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}Lg.now=NN.now;class jE extends Lg{constructor(t,e=Lg.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}new class Ite extends jE{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class Rte extends WE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Pg.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(Pg.cancelAnimationFrame(e),t._scheduled=void 0)}});let $E,Ote=1;const T0={};function BN(n){return n in T0&&(delete T0[n],!0)}const Pte={setImmediate(n){const t=Ote++;return T0[t]=!0,$E||($E=Promise.resolve()),$E.then(()=>BN(t)&&n()),t},clearImmediate(n){BN(n)}},{setImmediate:Lte,clearImmediate:Fte}=Pte,A0={setImmediate(...n){const{delegate:t}=A0;return((null==t?void 0:t.setImmediate)||Lte)(...n)},clearImmediate(n){const{delegate:t}=A0;return((null==t?void 0:t.clearImmediate)||Fte)(n)},delegate:void 0},D0=(new class Bte extends jE{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class Nte extends WE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=A0.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(A0.clearImmediate(e),t._scheduled=void 0)}}),new jE(WE)),Hte=D0;function VN(n=0,t,e=Hte){let i=-1;return null!=t&&(vk(t)?e=t:i=t),new Mn(r=>{let s=function zte(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function HN(n,t=D0){return function Ute(n){return Ti((t,e)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(ci(e,c=>{i=!0,r=c,s||us(n(c)).subscribe(s=ci(e,a,l))},()=>{o=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>VN(n,t))}function hi(n,t){return Ti((e,i)=>{let r=0;e.subscribe(ci(i,s=>n.call(t,s,r++)&&i.next(s)))})}function In(n){return Ti((t,e)=>{us(n).subscribe(ci(e,()=>e.complete(),Sc)),!e.closed&&t.subscribe(e)})}let qE;try{qE="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){qE=!1}let Fg,R0,ud,YE,Es=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Bc(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!qE)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(ee(qs))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hc(n){return function Gte(){if(null==Fg&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Fg=!0}))}finally{Fg=Fg||!1}return Fg}()?n:!!n.capture}function zN(){if(null==ud){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ud=!1,ud;if("scrollBehavior"in document.documentElement.style)ud=!0;else{const n=Element.prototype.scrollTo;ud=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ud}function Ng(){if("object"!=typeof document||!document)return 0;if(null==R0){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),R0=0,0===n.scrollLeft&&(n.scrollLeft=1,R0=0===n.scrollLeft?1:2),n.remove()}return R0}function GN(n){if(function Wte(){if(null==YE){const n="undefined"!=typeof document?document.head:null;YE=!(!n||!n.createShadowRoot&&!n.attachShadow)}return YE}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function XE(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function dd(n){return n.composedPath?n.composedPath()[0]:n.target}function KE(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const jte=new ve("cdk-dir-doc",{providedIn:"root",factory:function $te(){return ef(Pt)}}),qte=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Dl=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new Wt,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function Yte(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?qte.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(ee(jte,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})(),I0=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Tt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Mn(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(HN(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):_t()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(hi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=cd(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Og(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(ee(It),ee(Es),ee(Pt,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bg=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Tt,this._elementScrolled=new Mn(o=>this.ngZone.runOutsideAngular(()=>Og(this.elementRef.nativeElement,"scroll").pipe(In(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=Ng()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==Ng()?e.left=e.right:1==Ng()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;zN()?i.scrollTo(e):(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left))}measureScrollOffset(e){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?r:i:"end"==e&&(e=o?i:r),o&&2==Ng()?e==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Ng()?e==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(I0),M(It),M(Dl,8))},n.\u0275dir=oe({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),Vg=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new Tt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(HN(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(ee(Es),ee(It),ee(Pt,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})(),k0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[hd,fd],hd,fd]}),n})();function Ff(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function ji(n,t,e){const i=ln(n)||t||e?{next:n,error:t,complete:e}:n;return i?Ti((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(ci(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):cs}function JE(n,t=D0){return Ti((e,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=t.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}e.subscribe(ci(i,c=>{s=c,o=t.now(),r||(r=t.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function Ts(n){return n<=0?()=>_l:Ti((t,e)=>{let i=0;t.subscribe(ci(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function ZN(n,t=cs){return n=null!=n?n:dne,Ti((e,i)=>{let r,s=!0;e.subscribe(ci(i,o=>{const a=t(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function dne(n,t){return n===t}let QN=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hne=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=cd(e);return new Mn(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new Tt,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(ee(QN))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JN=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new Wt,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Ft(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Xs(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(JE(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(M(hne),M(Ve),M(It))},n.\u0275dir=oe({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Hg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[QN]}),n})(),eT=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function vne(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function _ne(n){try{return n.frameElement}catch(t){return null}}(function Ene(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===iB(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=iB(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Cne(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function Sne(n){return!function bne(n){return function wne(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function yne(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function xne(n){return function Mne(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||nB(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(ee(Es))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nB(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function iB(n){if(!nB(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class Tne{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Ts(1)).subscribe(t)}}let rB=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new Tne(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(ee(eT),ee(It),ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sB(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function oB(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const Ane=new ve("cdk-input-modality-detector-options"),Dne={ignoreKeys:[18,17,224,91,16]},Nf=Hc({passive:!0,capture:!0});let Rne=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Ln(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=dd(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(sB(o)?"keyboard":"mouse"),this._mostRecentTarget=dd(o))},this._onTouchstart=o=>{oB(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=dd(o))},this._options=Object.assign(Object.assign({},Dne),s),this.modalityDetected=this._modality.pipe(function une(n){return hi((t,e)=>n<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(ZN()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Nf),r.addEventListener("mousedown",this._onMousedown,Nf),r.addEventListener("touchstart",this._onTouchstart,Nf)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Nf),document.removeEventListener("mousedown",this._onMousedown,Nf),document.removeEventListener("touchstart",this._onTouchstart,Nf))}}return n.\u0275fac=function(e){return new(e||n)(ee(Es),ee(It),ee(Pt),ee(Ane,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kne=new ve("cdk-focus-monitor-default-options"),O0=Hc({passive:!0,capture:!0});let Rl=(()=>{class n{constructor(e,i,r,s,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Tt,this._rootNodeFocusAndBlurListener=a=>{const l=dd(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(e,i=!1){const r=cd(e);if(!this._platform.isBrowser||1!==r.nodeType)return _t(null);const s=GN(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Tt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=cd(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=cd(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=dd(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,O0),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,O0)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(In(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,O0),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,O0),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}}return n.\u0275fac=function(e){return new(e||n)(ee(It),ee(Es),ee(Rne),ee(Pt,8),ee(kne,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lB="cdk-high-contrast-black-on-white",cB="cdk-high-contrast-white-on-black",tT="cdk-high-contrast-active";let uB=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(tT),e.remove(lB),e.remove(cB),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(tT),e.add(lB)):2===i&&(e.add(tT),e.add(cB))}}}return n.\u0275fac=function(e){return new(e||n)(ee(Es),ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dB=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(ee(uB))},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[Hg]]}),n})();function nT(...n){return function One(){return Bm(1)}()(Sr(n,Vm(n)))}function Bf(...n){const t=Vm(n);return Ti((e,i)=>{(t?nT(n,e,t):nT(n,e)).subscribe(i)})}class iT{}const Il="*";function Kr(n,t){return{type:7,name:n,definitions:t,options:{}}}function Yn(n,t=null){return{type:4,styles:t,timings:n}}function hB(n,t=null){return{type:3,steps:n,options:t}}function fB(n,t=null){return{type:2,steps:n,options:t}}function bt(n){return{type:6,styles:n,offset:null}}function Xn(n,t,e){return{type:0,name:n,styles:t,options:e}}function ri(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function rT(n=null){return{type:9,options:n}}function sT(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function pB(n){Promise.resolve(null).then(n)}class Ug{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class mB{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?pB(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const cn=!1;function gB(n){return new Je(3e3,cn)}function mie(){return"undefined"!=typeof window&&void 0!==window.document}function aT(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Uc(n){switch(n.length){case 0:return new Ug;case 1:return n[0];default:return new mB(n)}}function _B(n,t,e,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let m=p,g=u[p];if("offset"!==p)switch(m=t.normalizePropertyName(m,o),g){case"!":g=r[p];break;case Il:g=s[p];break;default:g=t.normalizeStyleValue(p,m,g,o)}f[m]=g}),h||a.push(f),c=f,l=d}),o.length)throw function rie(n){return new Je(3502,cn)}();return a}function lT(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&cT(e,"start",n)));break;case"done":n.onDone(()=>i(e&&cT(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&cT(e,"destroy",n)))}}function cT(n,t,e){const i=e.totalTime,s=uT(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),o=n._data;return null!=o&&(s._data=o),s}function uT(n,t,e,i,r="",s=0,o){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Ks(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function vB(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let dT=(n,t)=>!1,yB=(n,t,e)=>[],bB=null;function hT(n){const t=n.parentNode||n.host;return t===bB?null:t}(aT()||"undefined"!=typeof Element)&&(mie()?(bB=(()=>document.documentElement)(),dT=(n,t)=>{for(;t;){if(t===n)return!0;t=hT(t)}return!1}):dT=(n,t)=>n.contains(t),yB=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let pd=null,xB=!1;function wB(n){pd||(pd=function _ie(){return"undefined"!=typeof document?document.body:null}()||{},xB=!!pd.style&&"WebkitAppearance"in pd.style);let t=!0;return pd.style&&!function gie(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in pd.style,!t&&xB&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in pd.style)),t}const MB=dT,CB=yB;let SB=(()=>{class n{validateStyleProperty(e){return wB(e)}matchesElement(e,i){return!1}containsElement(e,i){return MB(e,i)}getParentElement(e){return hT(e)}query(e,i,r){return CB(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,o,a=[],l){return new Ug(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),fT=(()=>{class n{}return n.NOOP=new SB,n})();const pT="ng-enter",L0="ng-leave",F0="ng-trigger",N0=".ng-trigger",TB="ng-animating",mT=".ng-animating";function md(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:gT(parseFloat(t[1]),t[2])}function gT(n,t){return"s"===t?1e3*n:n}function B0(n,t,e){return n.hasOwnProperty("duration")?n:function bie(n,t,e){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(gB()),{duration:0,delay:0,easing:""};r=gT(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=gT(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!e){let a=!1,l=t.length;r<0&&(t.push(function Fne(){return new Je(3100,cn)}()),a=!0),s<0&&(t.push(function Nne(){return new Je(3101,cn)}()),a=!0),a&&t.splice(l,0,gB())}return{duration:r,delay:s,easing:o}}(n,t,e)}function Vf(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function zc(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else Vf(n,e);return e}function DB(n,t,e){return e?t+":"+e+";":""}function RB(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=DB(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=DB(0,Mie(e),n.style[e]));n.setAttribute("style",t)}function qa(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=vT(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),aT()&&RB(n))}function gd(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=vT(e);n.style[i]=""}),aT()&&RB(n))}function zg(n){return Array.isArray(n)?1==n.length?n[0]:fB(n):n}const _T=new RegExp("{{\\s*(.+?)\\s*}}","g");function IB(n){let t=[];if("string"==typeof n){let e;for(;e=_T.exec(n);)t.push(e[1]);_T.lastIndex=0}return t}function V0(n,t,e){const i=n.toString(),r=i.replace(_T,(s,o)=>{let a=t[o];return t.hasOwnProperty(o)||(e.push(function Vne(n){return new Je(3003,cn)}()),a=""),a.toString()});return r==i?n:r}function H0(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const wie=/-+([a-z0-9])/g;function vT(n){return n.replace(wie,(...t)=>t[1].toUpperCase())}function Mie(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zs(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function Hne(n){return new Je(3004,cn)}()}}function kB(n,t){return window.getComputedStyle(n)[t]}function Die(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Rie(n,t,e){if(":"==n[0]){const l=function Iie(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function eie(n){return new Je(3016,cn)}()),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function Jne(n){return new Je(3015,cn)}()),t;const r=i[1],s=i[2],o=i[3];t.push(OB(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(OB(o,r))}(i,e,t)):e.push(n),e}const W0=new Set(["true","1"]),j0=new Set(["false","0"]);function OB(n,t){const e=W0.has(n)||j0.has(n),i=W0.has(t)||j0.has(t);return(r,s)=>{let o="*"==n||n==r,a="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?W0.has(n):j0.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?W0.has(t):j0.has(t)),o&&a}}const kie=new RegExp("s*:selfs*,?","g");function yT(n,t,e,i){return new Oie(n).build(t,e,i)}class Oie{constructor(t){this._driver=t}build(t,e,i){const r=new Fie(e);this._resetContextStyleTimingState(r);const s=Zs(this,zg(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function zne(){return new Je(3006,cn)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);i+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push(function Gne(){return new Je(3007,cn)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{if($0(a)){const l=a;Object.keys(l).forEach(c=>{IB(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(H0(s.values()),e.errors.push(function Wne(n,t){return new Je(3008,cn)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Zs(this,zg(t.animation),e);return{type:1,matchers:Die(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:_d(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Zs(this,i,e)),options:_d(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=i;const a=Zs(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:_d(t.options)}}visitAnimate(t,e){const i=function Bie(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return bT(B0(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=bT(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=B0(e,t);return bT(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:bt({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=bt(c)}e.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(o=>{"string"==typeof o?o==Il?i.push(o):e.errors.push(function jne(n){return new Je(3002,cn)}()):i.push(o)}):i.push(t.styles);let r=!1,s=null;return i.forEach(o=>{if($0(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void e.unsupportedCSSPropertiesFound.add(a);const l=e.collectedStyles[e.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(e.errors.push(function $ne(n,t,e,i,r){return new Je(3010,cn)}()),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),e.options&&function xie(n,t,e){const i=t.params||{},r=IB(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function Bne(n){return new Je(3001,cn)}())})}(o[a],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function qne(){return new Je(3011,cn)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=t.steps.map(_=>{const v=this._makeStyleAst(_,e);let y=null!=v.offset?v.offset:function Nie(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if($0(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if($0(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(v.styles),b=0;return null!=y&&(s++,b=v.offset=y),l=l||b<0||b>1,a=a||b<c,c=b,o.push(b),v});l&&e.errors.push(function Yne(){return new Je(3012,cn)}()),a&&e.errors.push(function Xne(){return new Je(3200,cn)}());const d=t.steps.length;let h=0;s>0&&s<d?e.errors.push(function Kne(){return new Je(3202,cn)}()):0==s&&(h=1/(d-1));const f=d-1,p=e.currentTime,m=e.currentAnimateTimings,g=m.duration;return u.forEach((_,v)=>{const y=h>0?v==f?1:h*v:o[v],b=y*g;e.currentTime=p+m.delay+b,m.duration=b,this._validateStyleAst(_,e),_.offset=y,i.styles.push(_)}),i}visitReference(t,e){return{type:8,animation:Zs(this,zg(t.animation),e),options:_d(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:_d(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:_d(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function Pie(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(kie,"")),n=n.replace(/@\*/g,N0).replace(/@\w+/g,e=>N0+"-"+e.substr(1)).replace(/:animating/g,mT),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Ks(e.collectedStyles,e.currentQuerySelector,{});const a=Zs(this,zg(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:_d(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Zne(){return new Je(3013,cn)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:B0(t.timings,e.errors,!0);return{type:12,animation:Zs(this,zg(t.animation),e),timings:i,options:null}}}class Fie{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function $0(n){return!Array.isArray(n)&&"object"==typeof n}function _d(n){return n?(n=Vf(n)).params&&(n.params=function Lie(n){return n?Vf(n):null}(n.params)):n={},n}function bT(n,t,e){return{duration:n,delay:t,easing:e}}function xT(n,t,e,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class q0{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Uie=new RegExp(":enter","g"),Gie=new RegExp(":leave","g");function wT(n,t,e,i,r,s={},o={},a,l,c=[]){return(new Wie).buildKeyframes(n,t,e,i,r,s,o,a,l,c)}class Wie{buildKeyframes(t,e,i,r,s,o,a,l,c,u=[]){c=c||new q0;const d=new MT(t,e,c,r,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),Zs(this,i,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const m=h[p];if(m.element===e){f=m;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[xT(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const o=null!=i.duration?md(i.duration):null,a=null!=i.delay?md(i.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Zs(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Y0);const o=md(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Zs(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?md(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),Zs(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return B0(e.params?V0(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?md(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Y0);let o=i;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const d=e.createSubContext(t.options,c);s&&d.delayNextStep(s),c===e.element&&(l=d.currentTimeline),Zs(this,t.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Zs(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const Y0={};class MT{constructor(t,e,i,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Y0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new X0(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=md(i.duration)),null!=i.delay&&(r.delay=md(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=V0(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new MT(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Y0,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new jie(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Uie,"."+this._enterClassName)).replace(Gie,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function Qne(n){return new Je(3014,cn)}()),a}}class X0{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new X0(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Il,this._currentKeyframe[e]=Il}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},o=function $ie(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(s=>{e[s]=Il})):zc(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=V0(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Il),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=zc(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?t.add(u):d==Il&&e.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=t.size?H0(t.values()):[],o=e.size?H0(e.values()):[];if(i){const a=r[0],l=Vf(a);a.offset=0,l.offset=1,r=[a,l]}return xT(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class jie extends X0{constructor(t,e,i,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=i+e,a=e/o,l=zc(t[0],!1);l.offset=0,s.push(l);const c=zc(t[0],!1);c.offset=FB(a),s.push(c);const u=t.length-1;for(let d=1;d<=u;d++){let h=zc(t[d],!1);h.offset=FB((e+h.offset*i)/o),s.push(h)}i=o,e=0,r="",t=s}return xT(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function FB(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class CT{}class qie extends CT{normalizePropertyName(t,e){return vT(t)}normalizeStyleValue(t,e,i,r){let s="";const o=i.toString().trim();if(Yie[e]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Une(n,t){return new Je(3005,cn)}())}return o+s}}const Yie=(()=>function Xie(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function NB(n,t,e,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const ST={};class BB{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function Kie(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],s=this._stateStyles[t],o=r?r.buildStyles(e,i):{};return s?s.buildStyles(e,i):o}build(t,e,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||ST,p=this.buildStyles(i,a&&a.params||ST,d),m=l&&l.params||ST,g=this.buildStyles(r,m,d),_=new Set,v=new Map,y=new Map,b="void"===r,x={params:Object.assign(Object.assign({},h),m)},w=u?[]:wT(t,e,this.ast.animation,s,o,p,g,x,c,d);let E=0;if(w.forEach(F=>{E=Math.max(F.duration+F.delay,E)}),d.length)return NB(e,this._triggerName,i,r,b,p,g,[],[],v,y,E,d);w.forEach(F=>{const N=F.element,C=Ks(v,N,{});F.preStyleProps.forEach(Y=>C[Y]=!0);const L=Ks(y,N,{});F.postStyleProps.forEach(Y=>L[Y]=!0),N!==e&&_.add(N)});const R=H0(_.values());return NB(e,this._triggerName,i,r,b,p,g,w,R,v,y,E)}}class Zie{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=Vf(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=V0(l,r,e));const c=this.normalizer.normalizePropertyName(a,e);l=this.normalizer.normalizeStyleValue(a,c,l,e),i[c]=l})}}),i}}class Jie{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new Zie(r.style,r.options&&r.options.params||{},i)}),VB(this.states,"true","1"),VB(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new BB(t,r,this.states))}),this.fallbackTransition=function ere(n,t,e){return new BB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(o=>o.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function VB(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const tre=new q0;class nre{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],s=yT(this._driver,e,i,[]);if(i.length)throw function sie(n){return new Je(3503,cn)}();this._animations[t]=s}_buildPlayer(t,e,i){const r=t.element,s=_B(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations[t];let o;const a=new Map;if(s?(o=wT(this._driver,e,s,pT,L0,{},{},i,tre,r),o.forEach(u=>{const d=Ks(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(r.push(function oie(){return new Je(3300,cn)}()),o=[]),r.length)throw function aie(n){return new Je(3504,cn)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,Il)})});const c=Uc(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[t]=c,c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function lie(n){return new Je(3301,cn)}();return e}listen(t,e,i,r){const s=uT(e,"","","");return lT(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const HB="ng-animate-queued",ET="ng-animate-disabled",are=[],UB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lre={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ao="__ng_removed";class TT{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function hre(n){return null!=n?n:null}(i?t.value:t),i){const s=Vf(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Gg="void",AT=new TT(Gg);class cre{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Do(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw function cie(n,t){return new Je(3302,cn)}();if(null==i||0==i.length)throw function uie(n){return new Je(3303,cn)}();if(!function fre(n){return"start"==n||"done"==n}(i))throw function die(n,t){return new Je(3400,cn)}();const s=Ks(this._elementListeners,t,[]),o={name:e,phase:i,callback:r};s.push(o);const a=Ks(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Do(t,F0),Do(t,F0+"-"+e),a[e]=AT),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function hie(n){return new Je(3401,cn)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),o=new DT(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Do(t,F0),Do(t,F0+"-"+e),this._engine.statesByElement.set(t,a={}));let l=a[e];const c=new TT(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[e]=c,l||(l=AT),c.value!==Gg&&l.value===c.value){if(!function gre(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(l.params,c.params)){const m=[],g=s.matchStyles(l.value,l.params,m),_=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{gd(t,g),qa(t,_)})}return}const h=Ks(this._engine.playersByElement,t,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==e&&m.queued&&m.destroy()});let f=s.matchTransition(l.value,c.value,t,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Do(t,HB),o.onStart(()=>{Hf(t,HB)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(t);if(g){let _=g.indexOf(o);_>=0&&g.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,N0,!0);i.forEach(r=>{if(r[Ao])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(t,l,Gg,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),i&&Uc(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||AT,u=new TT(Gg),d=new DT(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Ao];(!s||s===UB)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Do(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=uT(s,i.triggerName,i.fromState.value,i.toState.value);l._data=t,lT(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class ure{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new cre(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(i[a].hostElement,e)){i.splice(a+1,0,t),o=!0;break}o||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&e.add(a)}}}return e}trigger(t,e,i,r){if(K0(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!K0(e))return;const s=e[Ao];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Do(t,ET)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Hf(t,ET))}removeNode(t,e,i,r){if(K0(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Ao]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return K0(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,N0,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,mT,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Uc(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const i=t[Ao];if(i&&i.setForRemoval){if(t[Ao]=UB,i.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(ET))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Do(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Uc(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function fie(n){return new Je(3402,cn)}()}_flushAnimations(t,e){const i=new q0,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(D=>{u.add(D);const P=this.driver.query(D,".ng-animate-queued",!0);for(let O=0;O<P.length;O++)u.add(P[O])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=WB(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((D,P)=>{const O=pT+m++;p.set(P,O),D.forEach(q=>Do(q,O))});const g=[],_=new Set,v=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const P=this.collectedLeaveElements[D],O=P[Ao];O&&O.setForRemoval&&(g.push(P),_.add(P),O.hasAnimation?this.driver.query(P,".ng-star-inserted",!0).forEach(q=>_.add(q)):v.add(P))}const y=new Map,b=WB(h,Array.from(_));b.forEach((D,P)=>{const O=L0+m++;y.set(P,O),D.forEach(q=>Do(q,O))}),t.push(()=>{f.forEach((D,P)=>{const O=p.get(P);D.forEach(q=>Hf(q,O))}),b.forEach((D,P)=>{const O=y.get(P);D.forEach(q=>Hf(q,O))}),g.forEach(D=>{this.processLeaveNode(D)})});const x=[],w=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(e).forEach(O=>{const q=O.player,K=O.element;if(x.push(q),this.collectedEnterElements.length){const Re=K[Ao];if(Re&&Re.setForMove){if(Re.previousTriggersValues&&Re.previousTriggersValues.has(O.triggerName)){const Pe=Re.previousTriggersValues.get(O.triggerName),et=this.statesByElement.get(O.element);et&&et[O.triggerName]&&(et[O.triggerName].value=Pe)}return void q.destroy()}}const J=!d||!this.driver.containsElement(d,K),j=y.get(K),we=p.get(K),fe=this._buildInstruction(O,i,we,j,J);if(fe.errors&&fe.errors.length)return void w.push(fe);if(J)return q.onStart(()=>gd(K,fe.fromStyles)),q.onDestroy(()=>qa(K,fe.toStyles)),void r.push(q);if(O.isFallbackTransition)return q.onStart(()=>gd(K,fe.fromStyles)),q.onDestroy(()=>qa(K,fe.toStyles)),void r.push(q);const _e=[];fe.timelines.forEach(Re=>{Re.stretchStartingKeyframe=!0,this.disabledNodes.has(Re.element)||_e.push(Re)}),fe.timelines=_e,i.append(K,fe.timelines),o.push({instruction:fe,player:q,element:K}),fe.queriedElements.forEach(Re=>Ks(a,Re,[]).push(q)),fe.preStyleProps.forEach((Re,Pe)=>{const et=Object.keys(Re);if(et.length){let ye=l.get(Pe);ye||l.set(Pe,ye=new Set),et.forEach(vt=>ye.add(vt))}}),fe.postStyleProps.forEach((Re,Pe)=>{const et=Object.keys(Re);let ye=c.get(Pe);ye||c.set(Pe,ye=new Set),et.forEach(vt=>ye.add(vt))})});if(w.length){const D=[];w.forEach(P=>{D.push(function pie(n,t){return new Je(3505,cn)}())}),x.forEach(P=>P.destroy()),this.reportError(D)}const E=new Map,R=new Map;o.forEach(D=>{const P=D.element;i.has(P)&&(R.set(P,P),this._beforeAnimationBuild(D.player.namespaceId,D.instruction,E))}),r.forEach(D=>{const P=D.element;this._getPreviousPlayers(P,!1,D.namespaceId,D.triggerName,null).forEach(q=>{Ks(E,P,[]).push(q),q.destroy()})});const F=g.filter(D=>$B(D,l,c)),N=new Map;GB(N,this.driver,v,c,Il).forEach(D=>{$B(D,l,c)&&F.push(D)});const L=new Map;f.forEach((D,P)=>{GB(L,this.driver,new Set(D),l,"!")}),F.forEach(D=>{const P=N.get(D),O=L.get(D);N.set(D,Object.assign(Object.assign({},P),O))});const Y=[],I=[],z={};o.forEach(D=>{const{element:P,player:O,instruction:q}=D;if(i.has(P)){if(u.has(P))return O.onDestroy(()=>qa(P,q.toStyles)),O.disabled=!0,O.overrideTotalTime(q.totalTime),void r.push(O);let K=z;if(R.size>1){let j=P;const we=[];for(;j=j.parentNode;){const fe=R.get(j);if(fe){K=fe;break}we.push(j)}we.forEach(fe=>R.set(fe,K))}const J=this._buildAnimation(O.namespaceId,q,E,s,L,N);if(O.setRealPlayer(J),K===z)Y.push(O);else{const j=this.playersByElement.get(K);j&&j.length&&(O.parentPlayer=Uc(j)),r.push(O)}}else gd(P,q.fromStyles),O.onDestroy(()=>qa(P,q.toStyles)),I.push(O),u.has(P)&&r.push(O)}),I.forEach(D=>{const P=s.get(D.element);if(P&&P.length){const O=Uc(P);D.setRealPlayer(O)}}),r.forEach(D=>{D.parentPlayer?D.syncPlayerEvents(D.parentPlayer):D.destroy()});for(let D=0;D<g.length;D++){const P=g[D],O=P[Ao];if(Hf(P,L0),O&&O.hasAnimation)continue;let q=[];if(a.size){let J=a.get(P);J&&J.length&&q.push(...J);let j=this.driver.query(P,mT,!0);for(let we=0;we<j.length;we++){let fe=a.get(j[we]);fe&&fe.length&&q.push(...fe)}}const K=q.filter(J=>!J.destroyed);K.length?pre(this,P,K):this.processLeaveNode(P)}return g.length=0,Y.forEach(D=>{this.players.push(D),D.onDone(()=>{D.destroy();const P=this.players.indexOf(D);this.players.splice(P,1)}),D.play()}),Y}elementContainsData(t,e){let i=!1;const r=e[Ao];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==Gg;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,i){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==s,d=Ks(i,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}gd(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,o){const a=e.triggerName,l=e.element,c=[],u=new Set,d=new Set,h=e.timelines.map(p=>{const m=p.element;u.add(m);const g=m[Ao];if(g&&g.removedBeforeQueried)return new Ug(p.duration,p.delay);const _=m!==l,v=function mre(n){const t=[];return jB(n,t),t}((i.get(m)||are).map(E=>E.getRealPlayer())).filter(E=>!!E.element&&E.element===m),y=s.get(m),b=o.get(m),x=_B(0,this._normalizer,0,p.keyframes,y,b),w=this._buildPlayer(p,x,v);if(p.subTimeline&&r&&d.add(m),_){const E=new DT(t,a,m);E.setRealPlayer(w),c.push(E)}return w});c.forEach(p=>{Ks(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function dre(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Do(p,TB));const f=Uc(h);return f.onDestroy(()=>{u.forEach(p=>Hf(p,TB)),qa(l,e.toStyles)}),d.forEach(p=>{Ks(r,p,[]).push(f)}),f}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Ug(t.duration,t.delay)}}class DT{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Ug,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>lT(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ks(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function K0(n){return n&&1===n.nodeType}function zB(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function GB(n,t,e,i,r){const s=[];e.forEach(l=>s.push(zB(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=t.computeStyle(c,d,r);(!h||0==h.length)&&(c[Ao]=lre,o.push(c))}),n.set(c,u)});let a=0;return e.forEach(l=>zB(l,s[a++])),o}function WB(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function Do(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function Hf(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function pre(n,t,e){Uc(e).onDone(()=>n.processLeaveNode(t))}function jB(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof mB?jB(i.players,t):t.push(i)}}function $B(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class Z0{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new ure(t,e,i),this._timelineEngine=new nre(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=yT(this._driver,s,l,[]);if(l.length)throw function iie(n,t){return new Je(3404,cn)}();a=function Qie(n,t,e){return new Jie(n,t,e)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,o]=vB(i);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[o,a]=vB(i);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let vre=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&qa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qa(this._element,this._initialStyles),this._endStyles&&(qa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(gd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(gd(this._element,this._endStyles),this._endStyles=null),qa(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function RT(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];yre(r)&&(t=t||{},t[r]=n[r])}return t}function yre(n){return"display"===n||"position"===n}class qB{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(i=>{"offset"!=i&&(t[i]=this._finished?e[i]:kB(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class bre{validateStyleProperty(t){return wB(t)}matchesElement(t,e){return!1}containsElement(t,e){return MB(t,e)}getParentElement(t){return hT(t)}query(t,e,i){return CB(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c={},u=o.filter(h=>h instanceof qB);(function Cie(n,t){return 0===n||0===t})(i,r)&&u.forEach(h=>{let f=h.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),e=function Sie(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let s=t[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=e[a]}),o.length)for(var r=1;r<t.length;r++){let a=t[r];o.forEach(function(l){a[l]=kB(n,l)})}}return t}(t,e=e.map(h=>zc(h,!1)),c);const d=function _re(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=RT(t[0]),t.length>1&&(i=RT(t[t.length-1]))):t&&(e=RT(t)),e||i?new vre(n,e,i):null}(t,e);return new qB(t,e,l,d)}}let xre=(()=>{class n extends iT{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:Zo.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?fB(e):e;return YB(this._renderer,null,i,"register",[r]),new wre(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(ee(xg),ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class wre extends class Pne{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Mre(this._id,t,e||{},this._renderer)}}class Mre{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return YB(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function YB(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const XB="@.disabled";let Cre=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new KB("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,e,u.name,u)};return i.data.animation.forEach(l),new Sre(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(ee(xg),ee(Z0),ee(It))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class KB{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==XB?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Sre extends KB{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==XB?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function Ere(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Tre(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,e,i)}}let Are=(()=>{class n extends Z0{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt),ee(fT),ee(CT))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const Ro=new ve("AnimationModuleType"),ZB=[{provide:iT,useClass:xre},{provide:CT,useFactory:function Dre(){return new qie}},{provide:Z0,useClass:Are},{provide:xg,useFactory:function Rre(n,t,e){return new Cre(n,t,e)},deps:[S0,Z0,It]}],QB=[{provide:fT,useFactory:()=>new bre},{provide:Ro,useValue:"BrowserAnimations"},...ZB],Ire=[{provide:fT,useClass:SB},{provide:Ro,useValue:"NoopAnimations"},...ZB];let kre=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Ire:QB}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:QB,imports:[IN]}),n})();const Pre=new ve("mat-sanity-checks",{providedIn:"root",factory:function Ore(){return!0}});let pt=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!KE()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(ee(uB),ee(Pre,8),ee(Pt))},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[hd],hd]}),n})();function Wg(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Ft(t)}}}function vd(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function kl(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Ft(t)}}}function J0(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Xs(e):this.defaultTabIndex}}}let e3=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=oe({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function jg(n,t,e){n.nativeElement.classList.toggle(t,e)}let eb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[pt],pt]}),n})();class Fre{constructor(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const r3={enterDuration:225,exitDuration:150},IT=Hc({passive:!0}),s3=["mousedown","touchstart"],o3=["mouseup","mouseleave","touchend","touchcancel"];class Bre{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=cd(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},r3),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=i.radius||function Hre(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function Vre(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const d=new Fre(this,u,i);return d.state=0,this._activeRipples.add(d),i.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!i.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=t.element,r=Object.assign(Object.assign({},r3),t.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=cd(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(s3))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(o3),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=sB(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!oB(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,IT)})})}_removeTriggerEvents(){this._triggerElement&&(s3.forEach(t=>{this._triggerElement.removeEventListener(t,this,IT)}),this._pointerUpEventsRegistered&&o3.forEach(t=>{this._triggerElement.removeEventListener(t,this,IT)}))}}const Ure=new ve("mat-ripple-global-options");let Ol=(()=>{class n{constructor(e,i,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Bre(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(It),M(Es),M(Ure,8),M(Ro,8))},n.\u0275dir=oe({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&Zt("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),ha=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[pt],pt]}),n})(),kT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[pt]]}),n})(),a3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[ha,Ss,pt,kT]]}),n})();function l3(n){return en(()=>n)}const tb=["*"],Gre=["content"];function Wre(n,t){if(1&n){const e=Co();S(0,"div",2),Xe("click",function(){return pn(e),Qe()._onBackdropClicked()}),T()}2&n&&Zt("mat-drawer-shown",Qe()._isShowingBackdrop())}function jre(n,t){1&n&&(S(0,"mat-drawer-content"),Tn(1,2),T())}const $re=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],qre=["mat-drawer","mat-drawer-content","*"];function Yre(n,t){if(1&n){const e=Co();S(0,"div",2),Xe("click",function(){return pn(e),Qe()._onBackdropClicked()}),T()}2&n&&Zt("mat-drawer-shown",Qe()._isShowingBackdrop())}function Xre(n,t){1&n&&(S(0,"mat-sidenav-content"),Tn(1,2),T())}const Kre=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Zre=["mat-sidenav","mat-sidenav-content","*"],c3={transformDrawer:Kr("transform",[Xn("open, open-instant",bt({transform:"none",visibility:"visible"})),Xn("void",bt({"box-shadow":"none",visibility:"hidden"})),ri("void => open-instant",Yn("0ms")),ri("void <=> open, open-instant => void",Yn("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Jre=new ve("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function ese(){return!1}}),OT=new ve("MAT_DRAWER_CONTAINER");let nb=(()=>{class n extends Bg{constructor(e,i,r,s,o){super(r,s,o),this._changeDetectorRef=e,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(e){return new(e||n)(M(Qi),M(sn(()=>d3)),M(Ve),M(I0),M(It))},n.\u0275cmp=ft({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,i){2&e&&Xr("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[gt([{provide:Bg,useExisting:n}]),he],ngContentSelectors:tb,decls:1,vars:0,template:function(e,i){1&e&&(zi(),Tn(0))},encapsulation:2,changeDetection:0}),n})(),u3=(()=>{class n{constructor(e,i,r,s,o,a,l,c){this._elementRef=e,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Tt,this._animationEnd=new Tt,this._animationState="void",this.openedChange=new Wt(!0),this._openedStream=this.openedChange.pipe(hi(u=>u),en(()=>{})),this.openedStart=this._animationStarted.pipe(hi(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),l3(void 0)),this._closedStream=this.openedChange.pipe(hi(u=>!u),en(()=>{})),this.closedStart=this._animationStarted.pipe(hi(u=>u.fromState!==u.toState&&"void"===u.toState),l3(void 0)),this._destroyed=new Tt,this.onPositionChanged=new Wt,this._modeChanged=new Tt,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Og(this._elementRef.nativeElement,"keydown").pipe(hi(u=>27===u.keyCode&&!this.disableClose&&!Ff(u)),In(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(ZN((u,d)=>u.fromState===d.fromState&&u.toState===d.toState)).subscribe(u=>{const{fromState:d,toState:h}=u;(0===h.indexOf("open")&&"void"===d||"void"===h&&0===d.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=Ft(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"===this.mode?"dialog":"first-tabbable":e}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=Ft(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(Ft(e))}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var e;this._focusTrap&&this._focusTrap.destroy(),null===(e=this._anchor)||void 0===e||e.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,i){e&&i&&(this._openedVia=i);const r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,i,r){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Ts(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(rB),M(Rl),M(Es),M(It),M(eT),M(Pt,8),M(OT,8))},n.\u0275cmp=ft({type:n,selectors:[["mat-drawer"]],viewQuery:function(e,i){if(1&e&&ni(Gre,5),2&e){let r;Ct(r=St())&&(i._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,i){1&e&&jy("@transform.start",function(s){return i._animationStarted.next(s)})("@transform.done",function(s){return i._animationEnd.next(s)}),2&e&&(bn("align",null),Xy("@transform",i._animationState),Zt("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:tb,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,i){1&e&&(zi(),S(0,"div",0,1),Tn(2),T())},directives:[Bg],encapsulation:2,data:{animation:[c3.transformDrawer]},changeDetection:0}),n})(),d3=(()=>{class n{constructor(e,i,r,s,o,a=!1,l){this._dir=e,this._element=i,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new Df,this.backdropClick=new Wt,this._destroyed=new Tt,this._doCheckSubject=new Tt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Tt,e&&e.change.pipe(In(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(In(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=Ft(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:Ft(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Bf(this._allDrawers),In(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Bf(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(JE(10),In(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();e+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,e-=r}e=e||null,i=i||null,(e!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:e,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(hi(i=>i.fromState!==i.toState),In(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(In(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(In(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Ts(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(In(Bh(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return n.\u0275fac=function(e){return new(e||n)(M(Dl,8),M(Ve),M(It),M(Qi),M(Vg),M(Jre),M(Ro,8))},n.\u0275cmp=ft({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(e,i,r){if(1&e&&(di(r,nb,5),di(r,u3,5)),2&e){let s;Ct(s=St())&&(i._content=s.first),Ct(s=St())&&(i._allDrawers=s)}},viewQuery:function(e,i){if(1&e&&ni(nb,5),2&e){let r;Ct(r=St())&&(i._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,i){2&e&&Zt("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[gt([{provide:OT,useExisting:n}])],ngContentSelectors:qre,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,i){1&e&&(zi($re),Ge(0,Wre,1,2,"div",0),Tn(1),Tn(2,1),Ge(3,jre,2,0,"mat-drawer-content",1)),2&e&&(Z("ngIf",i.hasBackdrop),$(3),Z("ngIf",!i._content))},directives:[nb,Ys],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),PT=(()=>{class n extends nb{constructor(e,i,r,s,o){super(e,i,r,s,o)}}return n.\u0275fac=function(e){return new(e||n)(M(Qi),M(sn(()=>f3)),M(Ve),M(I0),M(It))},n.\u0275cmp=ft({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,i){2&e&&Xr("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[gt([{provide:Bg,useExisting:n}]),he],ngContentSelectors:tb,decls:1,vars:0,template:function(e,i){1&e&&(zi(),Tn(0))},encapsulation:2,changeDetection:0}),n})(),h3=(()=>{class n extends u3{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=Ft(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=Xs(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=Xs(e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275cmp=ft({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,i){2&e&&(bn("align",null),Xr("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),Zt("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened)("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[he],ngContentSelectors:tb,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,i){1&e&&(zi(),S(0,"div",0,1),Tn(2),T())},directives:[Bg],encapsulation:2,data:{animation:[c3.transformDrawer]},changeDetection:0}),n})(),f3=(()=>{class n extends d3{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275cmp=ft({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(e,i,r){if(1&e&&(di(r,PT,5),di(r,h3,5)),2&e){let s;Ct(s=St())&&(i._content=s.first),Ct(s=St())&&(i._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,i){2&e&&Zt("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],features:[gt([{provide:OT,useExisting:n}]),he],ngContentSelectors:Zre,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,i){1&e&&(zi(Kre),Ge(0,Yre,1,2,"div",0),Tn(1),Tn(2,1),Ge(3,Xre,2,0,"mat-sidenav-content",1)),2&e&&(Z("ngIf",i.hasBackdrop),$(3),Z("ngIf",!i._content))},directives:[PT,Ys],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),tse=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[Ss,pt,fd],fd,pt]}),n})();function LT(n){return n&&"function"==typeof n.connect}class p3{applyChanges(t,e,i,r,s){t.forEachOperation((o,a,l)=>{let c,u;if(null==o.previousIndex){const d=i(o,a,l);c=e.createEmbeddedView(d.templateRef,d.context,d.index),u=1}else null==l?(e.remove(a),u=3):(c=e.get(a),e.move(c,l),u=2);s&&s({context:null==c?void 0:c.context,operation:u,record:o})})}detach(){}}class FT{constructor(t=!1,e,i=!0){this._multiple=t,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Tt,e&&e.length&&(t?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}const $g=new ve("_ViewRepeater"),{isArray:ise}=Array,{getPrototypeOf:rse,prototype:sse,keys:ose}=Object;function g3(n){if(1===n.length){const t=n[0];if(ise(t))return{args:t,keys:null};if(function ase(n){return n&&"object"==typeof n&&rse(n)===sse}(t)){const e=ose(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function _3(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function v3(...n){const t=yk(n),{args:e,keys:i}=g3(n),r=new Mn(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;us(e[u]).subscribe(ci(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?_3(i,a):a),s.complete())}))}});return t?r.pipe(GE(t)):r}let y3=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(M(aa),M(Ve))},n.\u0275dir=oe({type:n}),n})(),yd=(()=>{class n extends y3{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,features:[he]}),n})();const Zr=new ve("NgValueAccessor"),cse={provide:Zr,useExisting:sn(()=>NT),multi:!0},dse=new ve("CompositionEventMode");let NT=(()=>{class n extends y3{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function use(){const n=$a()?$a().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(M(aa),M(Ve),M(dse,8))},n.\u0275dir=oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&Xe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[gt([cse]),he]}),n})();const Or=new ve("NgValidators"),Wc=new ve("NgAsyncValidators");function R3(n){return null!=n}function I3(n){const t=pg(n)?Sr(n):n;return FS(t),t}function k3(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function O3(n,t){return t.map(e=>e(n))}function P3(n){return n.map(t=>function fse(n){return!n.validate}(t)?t:e=>t.validate(e))}function BT(n){return null!=n?function L3(n){if(!n)return null;const t=n.filter(R3);return 0==t.length?null:function(e){return k3(O3(e,t))}}(P3(n)):null}function VT(n){return null!=n?function F3(n){if(!n)return null;const t=n.filter(R3);return 0==t.length?null:function(e){return v3(O3(e,t).map(I3)).pipe(en(k3))}}(P3(n)):null}function N3(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function HT(n){return n?Array.isArray(n)?n:[n]:[]}function rb(n,t){return Array.isArray(n)?n.includes(t):n===t}function H3(n,t){const e=HT(t);return HT(n).forEach(r=>{rb(e,r)||e.push(r)}),e}function U3(n,t){return HT(t).filter(e=>!rb(n,e))}class z3{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=BT(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=VT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class jc extends z3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class gs extends z3{get formDirective(){return null}get path(){return null}}let UT=(()=>{class n extends class G3{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(M(jc,2))},n.\u0275dir=oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&Zt("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[he]}),n})();function qg(n,t){(function WT(n,t){const e=function B3(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(N3(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function V3(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(N3(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();lb(t._rawValidators,r),lb(t._rawAsyncValidators,r)})(n,t),t.valueAccessor.writeValue(n.value),function wse(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&j3(n,t)})}(n,t),function Cse(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Mse(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&j3(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function xse(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function lb(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function j3(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qT(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Yg="VALID",ub="INVALID",Uf="PENDING",Xg="DISABLED";function XT(n){return(db(n)?n.validators:n)||null}function X3(n){return Array.isArray(n)?BT(n):n||null}function KT(n,t){return(db(t)?t.asyncValidators:n)||null}function K3(n){return Array.isArray(n)?VT(n):n||null}function db(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const ZT=n=>n instanceof JT;function Q3(n){return(n=>n instanceof tV)(n)?n.value:n.getRawValue()}function J3(n,t){const e=ZT(n),i=n.controls;if(!(e?Object.keys(i):i).length)throw new Je(1e3,"");if(!i[t])throw new Je(1001,"")}function eV(n,t){ZT(n),n._forEachChild((i,r)=>{if(void 0===t[r])throw new Je(1002,"")})}class QT{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=X3(this._rawValidators),this._composedAsyncValidatorFn=K3(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Yg}get invalid(){return this.status===ub}get pending(){return this.status==Uf}get disabled(){return this.status===Xg}get enabled(){return this.status!==Xg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=X3(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=K3(t)}addValidators(t){this.setValidators(H3(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(H3(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(U3(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(U3(t,this._rawAsyncValidators))}hasValidator(t){return rb(this._rawValidators,t)}hasAsyncValidator(t){return rb(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Uf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Xg,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Yg,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yg||this.status===Uf)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xg:Yg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Uf,this._hasOwnPendingAsyncValidator=!0;const e=I3(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function Ase(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=ZT(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof Rse)(i)&&i.at(r)||null}),i}(this,t,".")}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Wt,this.statusChanges=new Wt}_calculateStatus(){return this._allControlsDisabled()?Xg:this.errors?ub:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uf)?Uf:this._anyControlsHaveStatus(ub)?ub:Yg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){db(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class tV extends QT{constructor(t=null,e,i){super(XT(e),KT(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),db(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){qT(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){qT(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class JT extends QT{constructor(t,e,i){super(XT(e),KT(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){eV(this,t),Object.keys(t).forEach(i=>{J3(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=Q3(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Rse extends QT{constructor(t,e,i){super(XT(e),KT(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){eV(this,t),t.forEach((i,r)=>{J3(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>Q3(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Ose={provide:jc,useExisting:sn(()=>hb)},rV=(()=>Promise.resolve(null))();let hb=(()=>{class n extends jc{constructor(e,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new tV,this._registered=!1,this.update=new Wt,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function $T(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===NT?e=s:function Tse(n){return Object.getPrototypeOf(n.constructor)===yd}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function jT(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){rV.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;rV.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(e){return this._parent?function ob(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(M(gs,9),M(Or,10),M(Wc,10),M(Zr,10),M(Qi,8))},n.\u0275dir=oe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gt([Ose]),he,fr]}),n})(),oV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})(),soe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[oV]]}),n})(),ooe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[soe]}),n})(),aoe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[pt],pt]}),n})();const MV=["*"],loe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],coe=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],poe=Wg(kl(class{})),moe=kl(class{}),SV=new ve("MatList"),goe=new ve("MatNavList");let _oe=(()=>{class n extends poe{constructor(e){super(),this._elementRef=e,this._stateChanges=new Tt,"action-list"===this._getListType()&&e.nativeElement.classList.add("mat-action-list")}_getListType(){const e=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===e?"list":"mat-action-list"===e?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(e){return new(e||n)(M(Ve))},n.\u0275cmp=ft({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[gt([{provide:SV,useExisting:n}]),he,fr],ngContentSelectors:MV,decls:1,vars:0,template:function(e,i){1&e&&(zi(),Tn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),n})(),EV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=oe({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),TV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=oe({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),voe=(()=>{class n extends moe{constructor(e,i,r,s){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new Tt,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(In(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=Ft(e)}ngAfterContentInit(){!function n3(n,t,e="mat"){n.changes.pipe(Bf(n)).subscribe(({length:i})=>{jg(t,`${e}-2-line`,!1),jg(t,`${e}-3-line`,!1),jg(t,`${e}-multi-line`,!1),2===i||3===i?jg(t,`${e}-${i}-line`,!0):i>3&&jg(t,`${e}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(Qi),M(goe,8),M(SV,8))},n.\u0275cmp=ft({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,i,r){if(1&e&&(di(r,EV,5),di(r,TV,5),di(r,t3,5)),2&e){let s;Ct(s=St())&&(i._avatar=s.first),Ct(s=St())&&(i._icon=s.first),Ct(s=St())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,i){2&e&&Zt("mat-list-item-disabled",i.disabled)("mat-list-item-avatar",i._avatar||i._icon)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[he],ngContentSelectors:coe,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,i){1&e&&(zi(loe),S(0,"span",0),ae(1,"span",1),Tn(2),S(3,"span",2),Tn(4,1),T(),Tn(5,2),T()),2&e&&($(1),Z("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},directives:[Ol],encapsulation:2,changeDetection:0}),n})(),Coe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[eb,ha,pt,kT,Ss],eb,pt,kT,aoe]}),n})();function DV(n){for(let t in n){let e=n[t]||"";switch(t){case"display":n.display="flex"===e?["-webkit-flex","flex"]:"inline-flex"===e?["-webkit-inline-flex","inline-flex"]:e;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+t]=e;break;case"flex-direction":e=e||"row",n["-webkit-flex-direction"]=e,n["flex-direction"]=e;break;case"order":n.order=n["-webkit-"+t]=isNaN(+e)?"0":e}}return n}const l1="inline",pb=["row","column","row-reverse","column-reverse"];function RV(n){let[t,e,i]=IV(n);return function Eoe(n,t=null,e=!1){return{display:e?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":t||null}}(t,e,i)}function IV(n){var t;n=null!==(t=null==n?void 0:n.toLowerCase())&&void 0!==t?t:"";let[e,i,r]=n.split(" ");return pb.find(s=>s===e)||(e=pb[0]),i===l1&&(i=r!==l1?r:"",r=l1),[e,Soe(i),!!r]}function Zg(n){let[t]=IV(n);return t.indexOf("row")>-1}function Soe(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function Pl(n,...t){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let e of t)if(null!=e)for(let i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}const Aoe={provide:cE,useFactory:function Toe(n,t){return()=>{if(Bc(t)){const e=Array.from(n.querySelectorAll(`[class*=${kV}]`)),i=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${kV}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[Pt,qs],multi:!0},kV="flex-layout-";let c1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[Aoe]}),n})();class xd{constructor(t=!1,e="all",i="",r="",s=0){this.matches=t,this.mediaQuery=e,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new xd(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let Doe=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(e,i,r){const s=this.stylesheet.get(e);s?s.set(i,r):this.stylesheet.set(e,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(e,i){const r=this.stylesheet.get(e);let s="";if(r){const o=r.get(i);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const u1={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},fa=new ve("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>u1}),zf=new ve("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),d1=new ve("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function OV(n,t){return n=n?n.clone():new xd,t&&(n.mqAlias=t.alias,n.mediaQuery=t.mediaQuery,n.suffix=t.suffix,n.priority=t.priority),n}class Ii{constructor(){this.shouldCache=!0}sideEffect(t,e,i){}}let fi=(()=>{class n{constructor(e,i,r,s){this._serverStylesheet=e,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(e,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:DV(i),this._applyMultiValueStyleToElement(s,e)}applyStyleToElements(e,i=[]){const r=this.layoutConfig.disableVendorPrefixes?e:DV(e);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(e){const i="flex-direction";let r=this.lookupStyle(e,i);return[r||"row",this.lookupInlineStyle(e,i)||Of(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(e){return"wrap"===this.lookupStyle(e,"flex-wrap")}lookupAttributeValue(e,i){var r;return null!==(r=e.getAttribute(i))&&void 0!==r?r:""}lookupInlineStyle(e,i){return Bc(this._platformId)?e.style.getPropertyValue(i):function Roe(n,t){var e;return null!==(e=PV(n)[t])&&void 0!==e?e:""}(e,i)}lookupStyle(e,i,r=!1){let s="";return e&&((s=this.lookupInlineStyle(e,i))||(Bc(this._platformId)?r||(s=getComputedStyle(e).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(e,i)))),s?s.trim():""}_applyMultiValueStyleToElement(e,i){Object.keys(e).sort().forEach(r=>{const s=e[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",Bc(this._platformId)||!this._serverModuleLoaded?Bc(this._platformId)?i.style.setProperty(r,a):Ioe(i,r,a):this._serverStylesheet.addStyleToElement(i,r,a)})}}return n.\u0275fac=function(e){return new(e||n)(ee(Doe),ee(zf),ee(qs),ee(fa))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ioe(n,t,e){t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=PV(n);i[t]=null!=e?e:"",function koe(n,t){let e="";for(const i in t)t[i]&&(e+=`${i}:${t[i]};`);n.setAttribute("style",e)}(n,i)}function PV(n){const t={},e=n.getAttribute("style");if(e){const i=e.split(/;+/g);for(let r=0;r<i.length;r++){const s=i[r].trim();if(s.length>0){const o=s.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${s}`);t[s.substr(0,o).trim()]=s.substr(o+1).trim()}}}return t}function Qg(n,t){return(t&&t.priority||0)-(n&&n.priority||0)}function Ooe(n,t){return(n.priority||0)-(t.priority||0)}let h1=(()=>{class n{constructor(e,i,r){this._zone=e,this._platformId=i,this._document=r,this.source=new Ln(new xd(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const e=[];return this.registry.forEach((i,r)=>{i.matches&&e.push(r)}),e}isActive(e){var i;const r=this.registry.get(e);return null!==(i=null==r?void 0:r.matches)&&void 0!==i?i:this.registerQuery(e).some(s=>s.matches)}observe(e,i=!1){if(e&&e.length){const r=this._observable$.pipe(hi(o=>!i||e.indexOf(o.mediaQuery)>-1));return Bh(new Mn(o=>{const a=this.registerQuery(e);if(a.length){const l=a.pop();a.forEach(c=>{o.next(c)}),this.source.next(l)}o.complete()}),r)}return this._observable$}registerQuery(e){const i=Array.isArray(e)?e:[e],r=[];return function Poe(n,t){const e=n.filter(i=>!LV[i]);if(e.length>0){const i=e.join(", ");try{const r=t.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(t.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),t.head.appendChild(r),e.forEach(s=>LV[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const o=l=>{this._zone.run(()=>this.source.next(new xd(l.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new xd(!0,s))}),r}ngOnDestroy(){let e;for(;e=this.pendingRemoveListenerFns.pop();)e()}buildMQL(e){return function Loe(n,t){return t&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(e,Bc(this._platformId))}}return n.\u0275fac=function(e){return new(e||n)(ee(It),ee(qs),ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LV={},Foe=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],FV="(orientation: portrait) and (max-width: 599.98px)",NV="(orientation: landscape) and (max-width: 959.98px)",BV="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",VV="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",HV="(orientation: portrait) and (min-width: 840px)",UV="(orientation: landscape) and (min-width: 1280px)",Ll={HANDSET:`${FV}, ${NV}`,TABLET:`${BV} , ${VV}`,WEB:`${HV}, ${UV} `,HANDSET_PORTRAIT:`${FV}`,TABLET_PORTRAIT:`${BV} `,WEB_PORTRAIT:`${HV}`,HANDSET_LANDSCAPE:`${NV}`,TABLET_LANDSCAPE:`${VV}`,WEB_LANDSCAPE:`${UV}`},Noe=[{alias:"handset",priority:2e3,mediaQuery:Ll.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Ll.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Ll.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Ll.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Ll.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Ll.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Ll.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Ll.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Ll.WEB_PORTRAIT,overlapping:!0}],Boe=/(\.|-|_)/g;function Voe(n){let t=n.length>0?n.charAt(0):"",e=n.length>1?n.slice(1):"";return t.toUpperCase()+e}const Goe=new ve("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=ef(d1),t=ef(fa),e=[].concat.apply([],(n||[]).map(r=>Array.isArray(r)?r:[r]));return function zoe(n,t=[]){const e={};return n.forEach(i=>{e[i.alias]=i}),t.forEach(i=>{e[i.alias]?Pl(e[i.alias],i):e[i.alias]=i}),function Uoe(n){return n.forEach(t=>{t.suffix||(t.suffix=function Hoe(n){return n.replace(Boe,"|").split("|").map(Voe).join("")}(t.alias),t.overlapping=!!t.overlapping)}),n}(Object.keys(e).map(i=>e[i]))}((t.disableDefaultBps?[]:Foe).concat(t.addOrientationBps?Noe:[]),e)}});let f1=(()=>{class n{constructor(e){this.findByMap=new Map,this.items=[...e].sort(Ooe)}findByAlias(e){return e?this.findWithPredicate(e,i=>i.alias===e):null}findByQuery(e){return this.findWithPredicate(e,i=>i.mediaQuery===e)}get overlappings(){return this.items.filter(e=>e.overlapping)}get aliases(){return this.items.map(e=>e.alias)}get suffixes(){return this.items.map(e=>{var i;return null!==(i=null==e?void 0:e.suffix)&&void 0!==i?i:""})}findWithPredicate(e,i){var r;let s=this.findByMap.get(e);return s||(s=null!==(r=this.items.find(i))&&void 0!==r?r:null,this.findByMap.set(e,s)),null!=s?s:null}}return n.\u0275fac=function(e){return new(e||n)(ee(Goe))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gf="print",Woe={alias:Gf,mediaQuery:Gf,priority:1e3};let joe=(()=>{class n{constructor(e,i,r){this.breakpoints=e,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new $oe,this.deactivations=[]}withPrintQuery(e){return[...e,Gf]}isPrintEvent(e){return e.mediaQuery.startsWith(Gf)}get printAlias(){var e;return[...null!==(e=this.layoutConfig.printWithBreakpoints)&&void 0!==e?e:[]]}get printBreakPoints(){return this.printAlias.map(e=>this.breakpoints.findByAlias(e)).filter(e=>null!==e)}getEventBreakpoints({mediaQuery:e}){const i=this.breakpoints.findByQuery(e);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(Qg)}updateEvent(e){var i;let r=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(r=this.getEventBreakpoints(e)[0],e.mediaQuery=null!==(i=null==r?void 0:r.mediaQuery)&&void 0!==i?i:""),OV(e,r)}registerBeforeAfterPrintHooks(e){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(e,this.getEventBreakpoints(new xd(!0,Gf))),e.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(e),e.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(e){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(e,this.getEventBreakpoints(i)),e.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(e),e.updateStyles()):this.collectActivations(e,i)}}blockPropagation(){return e=>!(this.isPrinting||this.isPrintEvent(e))}startPrinting(e,i){this.isPrinting=!0,this.formerActivations=e.activatedBreakpoints,e.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(e,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const r=this.breakpoints.findByQuery(i.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),o=!this.formerActivations&&e.activatedBreakpoints.includes(r);(s||o)&&(this.deactivations.push(r),this.deactivations.sort(Qg))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("beforeprint",e)),this.afterPrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("afterprint",e)))}}return n.\u0275fac=function(e){return new(e||n)(ee(f1),ee(fa),ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $oe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(t){return t.push(Woe),t.sort(Qg),t.forEach(e=>this.addBreakpoint(e)),this.printBreakpoints}addBreakpoint(t){t&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===t.mediaQuery)&&(this.printBreakpoints=function qoe(n){var t;return null!==(t=null==n?void 0:n.mediaQuery.startsWith(Gf))&&void 0!==t&&t}(t)?[t,...this.printBreakpoints]:[...this.printBreakpoints,t])}clear(){this.printBreakpoints=[]}}let gi=(()=>{class n{constructor(e,i,r){this.matchMedia=e,this.breakpoints=i,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Tt,this.observeActivations()}get activatedAlias(){var e,i;return null!==(i=null===(e=this.activatedBreakpoints[0])||void 0===e?void 0:e.alias)&&void 0!==i?i:""}set activatedBreakpoints(e){this._activatedBreakpoints=[...e]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(e){this._useFallbacks=e}onMediaChange(e){const i=this.findByQuery(e.mediaQuery);if(i){e=OV(e,i);const r=this.activatedBreakpoints.indexOf(i);e.matches&&-1===r?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(Qg),this.updateStyles()):!e.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(Qg),this.updateStyles())}}init(e,i,r,s,o=[]){zV(this.updateMap,e,i,r),zV(this.clearMap,e,i,s),this.buildElementKeyMap(e,i),this.watchExtraTriggers(e,i,o)}getValue(e,i,r){const s=this.elementMap.get(e);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(o)return o.get(i)}}hasValue(e,i){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(e,i,r,s){var o;let a=this.elementMap.get(e);if(a){const c=(null!==(o=a.get(s))&&void 0!==o?o:new Map).set(i,r);a.set(s,c),this.elementMap.set(e,a)}else a=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(e,a);const l=this.getValue(e,i);void 0!==l&&this.updateElement(e,i,l)}trackValue(e,i){return this.subject.asObservable().pipe(hi(r=>r.element===e&&r.key===i))}updateStyles(){this.elementMap.forEach((e,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(e);s&&s.forEach((o,a)=>{this.updateElement(i,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(e,o),s){const a=s.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(e,i){const r=this.clearMap.get(e);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:e,key:i,value:""}))}}updateElement(e,i,r){const s=this.updateMap.get(e);if(s){const o=s.get(i);o&&(o(r),this.subject.next({element:e,key:i,value:r}))}}releaseElement(e){const i=this.watcherMap.get(e);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(e));const r=this.elementMap.get(e);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(e))}triggerUpdate(e,i){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(e,i,s.get(i)):s.forEach((o,a)=>this.updateElement(e,a,o)))}}buildElementKeyMap(e,i){let r=this.elementKeyMap.get(e);r||(r=new Set,this.elementKeyMap.set(e,r)),r.add(i)}watchExtraTriggers(e,i,r){if(r&&r.length){let s=this.watcherMap.get(e);if(s||(s=new Map,this.watcherMap.set(e,s)),!s.get(i)){const a=Bh(...r).subscribe(()=>{const l=this.getValue(e,i);this.updateElement(e,i,l)});s.set(i,a)}}}findByQuery(e){return this.breakpoints.findByQuery(e)}getActivatedValues(e,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=e.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const r=e.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const e=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe(ji(this.hook.interceptEvents(this)),hi(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(e){return new(e||n)(ee(h1),ee(f1),ee(joe))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zV(n,t,e,i){var r;if(void 0!==i){const s=null!==(r=n.get(t))&&void 0!==r?r:new Map;s.set(e,i),n.set(t,s)}}let wi=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Tt,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}ngOnChanges(e){Object.keys(e).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(e[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(e=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}addStyles(e,i){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(e);(!o||!s)&&(o=r.buildStyles(e,i),s&&this.styleCache.set(e,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),r.sideEffect(e,o,i)}clearStyles(){Object.keys(this.mru).forEach(e=>{this.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(e,i=!1){if(e){const[r,s]=this.styler.getFlowDirection(e);if(!s&&i){const o=RV(r);this.styler.applyStyleToElements(o,[e])}return r.trim()}return"row"}hasWrap(e){return this.styler.hasWrap(e)}applyStyleToElement(e,i,r=this.nativeElement){this.styler.applyStyleToElement(r,e,i)}setValue(e,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,i)}updateWithValue(e){this.currentValue!==e&&(this.addStyles(e),this.currentValue=e)}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(Ii),M(fi),M(gi))},n.\u0275dir=oe({type:n,features:[fr]}),n})();function GV(n,t="1",e="1"){let i=[t,e,n],r=n.indexOf("calc");if(r>0){i[2]=WV(n.substring(r).trim());let s=n.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=WV(n.trim());else{let s=n.split(" ");i=3===s.length?s:[t,e,n]}return i}function WV(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function mb(n,t){if(void 0===t)return n;const e=i=>{const r=+i.slice(0,-"x".length);return n.endsWith("x")&&!isNaN(r)?`${r*t.value}${t.unit}`:n};return n.includes(" ")?n.split(" ").map(e).join(" "):e(n)}let Koe=(()=>{class n extends Ii{buildStyles(e,{display:i}){const r=RV(e);return Object.assign(Object.assign({},r),{display:"none"===i?i:r.display})}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zoe=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let Qoe=(()=>{class n extends wi{constructor(e,i,r,s,o){super(e,r,i,s),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(e){var i;const s=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=null!==(i=$V.get(s))&&void 0!==i?i:new Map,$V.set(s,this.styleCache),this.currentValue!==e&&(this.addStyles(e,{display:s}),this.currentValue=e)}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(fi),M(Koe),M(gi),M(fa))},n.\u0275dir=oe({type:n,features:[he]}),n})(),Jg=(()=>{class n extends Qoe{constructor(){super(...arguments),this.inputs=Zoe}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[he]}),n})();const $V=new Map,qV={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let Joe=(()=>{class n extends Ii{constructor(e,i){super(),this._styler=e,this._config=i}buildStyles(e,i){return e.endsWith(_b)?function aae(n,t){const[e,i]=n.split(" "),s=c=>`-${c}`;let o="0px",a=s(null!=i?i:e),l="0px";return"rtl"===t?l=s(e):o=s(e),{margin:`0px ${o} ${a} ${l}`}}(e=mb(e=e.slice(0,e.indexOf(_b)),this._config.multiplier),i.directionality):{}}sideEffect(e,i,r){const s=r.items;if(e.endsWith(_b)){const o=function oae(n,t){const[e,i]=n.split(" ");let s="0px",a="0px";return"rtl"===t?a=e:s=e,{padding:`0px ${s} ${null!=i?i:e} ${a}`}}(e=mb(e=e.slice(0,e.indexOf(_b)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(o,r.items)}else{e=mb(e,this._config.multiplier),e=this.addFallbackUnit(e);const o=s.pop(),a=function lae(n,t){const e=YV(t.directionality,t.layout),i=Object.assign({},qV);return i[e]=n,i}(e,r);this._styler.applyStyleToElements(a,s),this._styler.applyStyleToElements(qV,[o])}}addFallbackUnit(e){return isNaN(+e)?e:`${e}${this._config.defaultUnit}`}}return n.\u0275fac=function(e){return new(e||n)(ee(fi),ee(fa))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eae=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let tae=(()=>{class n extends wi{constructor(e,i,r,s,o,a){super(e,o,s,a),this.zone=i,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new Tt;const l=[this.directionality.change,this.observerSubject.asObservable()];this.init(l),this.marshal.trackValue(this.nativeElement,"layout").pipe(In(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const e=this.nativeElement.children,i=[];for(let r=e.length;r--;)i[r]=e[r];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(e){const r=e.value.split(" ");this.layout=r[0],pb.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(e){const i=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const o=+this.styler.lookupStyle(r,"order"),a=+this.styler.lookupStyle(s,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(i.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=nae:"row"===s&&"rtl"!==r?this.styleCache=rae:"column"===s&&"rtl"===r?this.styleCache=iae:"column"===s&&"rtl"!==r&&(this.styleCache=sae),this.addStyles(e,{directionality:r,items:i,layout:s})}}clearStyles(){const e=Object.keys(this.mru).length>0,i=e?"padding":YV(this.directionality.value,this.layout);e&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(e){const i=this.marshal.getValue(e,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(e,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{"undefined"!=typeof MutationObserver&&(this.observer=new MutationObserver(e=>{e.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(It),M(Dl),M(fi),M(Joe),M(gi))},n.\u0275dir=oe({type:n,features:[he]}),n})(),gb=(()=>{class n extends tae{constructor(){super(...arguments),this.inputs=eae}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[he]}),n})();const nae=new Map,iae=new Map,rae=new Map,sae=new Map,_b=" grid";function YV(n,t){switch(t){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===n?"margin-left":"margin-right";case"row-reverse":return"rtl"===n?"margin-right":"margin-left"}}let cae=(()=>{class n extends Ii{constructor(e){super(),this.layoutConfig=e}buildStyles(e,i){let[r,s,...o]=e.split(" "),a=o.join(" ");const l=i.direction.indexOf("column")>-1?"column":"row",c=Zg(l)?"max-width":"max-height",u=Zg(l)?"min-width":"min-height",d=String(a).indexOf("calc")>-1,h=d||"auto"===a,f=String(a).indexOf("%")>-1&&!d,p=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let m=d||p;r="0"==r?0:r,s="0"==s?0:s;const g=!r&&!s;let _={};const v={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const y=!1!==this.layoutConfig.useColumnBasisZero;a="row"===l?"0%":y?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!m&&!f&&!isNaN(a)&&(a+="%"),"0%"===a&&(m=!0),"0px"===a&&(a="0%"),_=Pl(v,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":m?a:"100%"}:{flex:`${r} ${s} ${m?a:"100%"}`})}return _.flex||_["flex-grow"]||(_=Pl(v,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(_[u]=g||m&&r?a:null,_[c]=g||!h&&s?a:null),_[u]||_[c]?i.hasWrap&&(_[d?"flex-basis":"flex"]=_[c]?d?_[c]:`${r} ${s} ${_[c]}`:d?_[u]:`${r} ${s} ${_[u]}`):_=Pl(v,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),Pl(_,{"box-sizing":"border-box"})}}return n.\u0275fac=function(e){return new(e||n)(ee(fa))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uae=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let dae=(()=>{class n extends wi{constructor(e,i,r,s,o){super(e,s,i,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(e){this.flexShrink=e||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(e){this.flexGrow=e||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(In(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(In(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(e){const r=e.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(e){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=pae:s&&!o?this.styleCache=hae:!s&&o?this.styleCache=mae:!s&&!o&&(this.styleCache=fae);const l=GV(String(e).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(l.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const e=this.activatedValue;if(void 0!==e){const i=GV(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(fi),M(fa),M(cae),M(gi))},n.\u0275dir=oe({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[he]}),n})(),p1=(()=>{class n extends dae{constructor(){super(...arguments),this.inputs=uae}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[he]}),n})();const hae=new Map,fae=new Map,pae=new Map,mae=new Map;let Bae=(()=>{class n extends Ii{buildStyles(e,i){const r={},[s,o]=e.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return Pl(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?Zg(i.layout)?null:"100%":null,"max-height":"stretch"===o&&Zg(i.layout)?"100%":null})}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vae=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let Hae=(()=>{class n extends wi{constructor(e,i,r,s){super(e,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(In(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(e){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=jae:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=qae:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=$ae:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=Yae:"column-reverse"===i&&!r&&(this.styleCache=Wae):this.styleCache=zae:this.styleCache=Gae:this.styleCache=Uae,this.addStyles(e,{layout:i,inline:r})}onLayoutChange(e){const i=e.value.split(" ");this.layout=i[0],this.inline=e.value.includes("inline"),pb.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(fi),M(Bae),M(gi))},n.\u0275dir=oe({type:n,features:[he]}),n})(),Wf=(()=>{class n extends Hae{constructor(){super(...arguments),this.inputs=Vae}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[he]}),n})();const Uae=new Map,zae=new Map,Gae=new Map,Wae=new Map,jae=new Map,$ae=new Map,qae=new Map,Yae=new Map;let XV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[c1,hd]]}),n})();function e_(n,t){const e=ln(n)?n:()=>n,i=r=>r.error(e());return new Mn(t?r=>t.schedule(i,0,r):i)}function Ya(n){return Ti((t,e)=>{let s,i=null,r=!1;i=t.subscribe(ci(e,void 0,void 0,o=>{s=us(n(o,Ya(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function KV(n){return Ti((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function jf(n,t){return ln(t)?hr(n,t,1):hr(n,1)}class ZV{}class QV{}class Fl{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Fl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Fl;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Fl?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Xae{encodeKey(t){return JV(t)}encodeValue(t){return JV(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Zae=/%(\d[a-f0-9])/gi,Qae={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function JV(n){return encodeURIComponent(n).replace(Zae,(t,e)=>{var i;return null!==(i=Qae[e])&&void 0!==i?i:t})}function eH(n){return`${n}`}class $c{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Xae,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Kae(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e];this.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new $c({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(eH(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(eH(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Jae{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function tH(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function nH(n){return"undefined"!=typeof Blob&&n instanceof Blob}function iH(n){return"undefined"!=typeof FormData&&n instanceof FormData}class t_{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function ele(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Fl),this.context||(this.context=new Jae),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new $c,this.urlWithParams=e}serializeBody(){return null===this.body?null:tH(this.body)||nH(this.body)||iH(this.body)||function tle(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $c?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||iH(this.body)?null:nH(this.body)?this.body.type||null:tH(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $c?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const i=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,u=t.params||this.params;const d=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((h,f)=>h.set(f,t.setHeaders[f]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,f)=>h.set(f,t.setParams[f]),u)),new t_(i,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var nr=(()=>((nr=nr||{})[nr.Sent=0]="Sent",nr[nr.UploadProgress=1]="UploadProgress",nr[nr.ResponseHeader=2]="ResponseHeader",nr[nr.DownloadProgress=3]="DownloadProgress",nr[nr.Response=4]="Response",nr[nr.User=5]="User",nr))();class m1{constructor(t,e=200,i="OK"){this.headers=t.headers||new Fl,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class g1 extends m1{constructor(t={}){super(t),this.type=nr.ResponseHeader}clone(t={}){return new g1({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class vb extends m1{constructor(t={}){super(t),this.type=nr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new vb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class rH extends m1{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function _1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let wd=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof t_)s=e;else{let l,c;l=r.headers instanceof Fl?r.headers:new Fl(r.headers),r.params&&(c=r.params instanceof $c?r.params:new $c({fromObject:r.params})),s=new t_(e,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=_t(s).pipe(jf(l=>this.handler.handle(l)));if(e instanceof t_||"events"===r.observe)return o;const a=o.pipe(hi(l=>l instanceof vb));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(en(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(en(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(en(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(en(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new $c).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,_1(r,i))}post(e,i,r={}){return this.request("POST",e,_1(r,i))}put(e,i,r={}){return this.request("PUT",e,_1(r,i))}}return n.\u0275fac=function(e){return new(e||n)(ee(ZV))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class sH{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const oH=new ve("HTTP_INTERCEPTORS");let nle=(()=>{class n{intercept(e,i){return i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const ile=/^\)\]\}',?\n/;let aH=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Mn(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((f,p)=>r.setRequestHeader(f,p.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const s=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=r.statusText||"OK",p=new Fl(r.getAllResponseHeaders()),m=function rle(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new g1({headers:p,status:r.status,statusText:f,url:m}),o},l=()=>{let{headers:f,status:p,statusText:m,url:g}=a(),_=null;204!==p&&(_=void 0===r.response?r.responseText:r.response),0===p&&(p=_?200:0);let v=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof _){const y=_;_=_.replace(ile,"");try{_=""!==_?JSON.parse(_):null}catch(b){_=y,v&&(v=!1,_={error:b,text:_})}}v?(i.next(new vb({body:_,headers:f,status:p,statusText:m,url:g||void 0})),i.complete()):i.error(new rH({error:_,headers:f,status:p,statusText:m,url:g||void 0}))},c=f=>{const{url:p}=a(),m=new rH({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});i.error(m)};let u=!1;const d=f=>{u||(i.next(a()),u=!0);let p={type:nr.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===e.responseType&&!!r.responseText&&(p.partialText=r.responseText),i.next(p)},h=f=>{let p={type:nr.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),i.next(p)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),e.reportProgress&&(r.addEventListener("progress",d),null!==s&&r.upload&&r.upload.addEventListener("progress",h)),r.send(s),i.next({type:nr.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),e.reportProgress&&(r.removeEventListener("progress",d),null!==s&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(ee(bN))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const v1=new ve("XSRF_COOKIE_NAME"),y1=new ve("XSRF_HEADER_NAME");class lH{}let sle=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=uN(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt),ee(qs),ee(v1))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),b1=(()=>{class n{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(ee(lH),ee(y1))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),ole=(()=>{class n{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(oH,[]);this.chain=i.reduceRight((r,s)=>new sH(r,s),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(ee(QV),ee(Ui))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),ale=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:b1,useClass:nle}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:v1,useValue:e.cookieName}:[],e.headerName?{provide:y1,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[b1,{provide:oH,useExisting:b1,multi:!0},{provide:lH,useClass:sle},{provide:v1,useValue:"XSRF-TOKEN"},{provide:y1,useValue:"X-XSRF-TOKEN"}]}),n})(),lle=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[wd,{provide:ZV,useClass:ole},aH,{provide:QV,useExisting:aH}],imports:[[ale.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const cle=["*"];let yb;function n_(n){var t;return(null===(t=function ule(){if(void 0===yb&&(yb=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(yb=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return yb}())||void 0===t?void 0:t.createHTML(n))||n}function cH(n){return Error(`Unable to find icon with the name "${n}"`)}function uH(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function dH(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Md{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let i_=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new Md(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const o=this._sanitizer.sanitize(En.HTML,r);if(!o)throw dH(r);const a=n_(o);return this._addSvgIconConfig(e,i,new Md("",a,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Md(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(En.HTML,i);if(!s)throw dH(i);const o=n_(s);return this._addSvgIconSetConfig(e,new Md("",o,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(En.RESOURCE_URL,e);if(!i)throw uH(e);const r=this._cachedIconsByUrl.get(i);return r?_t(bb(r)):this._loadSvgIconFromConfig(new Md(e,null)).pipe(ji(s=>this._cachedIconsByUrl.set(i,s)),en(s=>bb(s)))}getNamedSvgIcon(e,i=""){const r=hH(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(e,o):e_(cH(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?_t(bb(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(en(i=>bb(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?_t(r):v3(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Ya(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(En.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),_t(null)})))).pipe(en(()=>{const o=this._extractIconWithNameFromAnySet(e,i);if(!o)throw cH(e);return o}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(ji(i=>e.svgText=i),en(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?_t(null):this._fetchIcon(e).pipe(ji(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(n_("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(n_("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){var i;const{url:r,options:s}=e,o=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function dle(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(En.RESOURCE_URL,r);if(!a)throw uH(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(en(u=>n_(u)),KV(()=>this._inProgressUrlFetches.delete(a)),Mk());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(hH(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return fle(s)?new Md(s.url,null,s.options):new Md(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(ee(wd,8),ee(kg),ee(Pt,8),ee(Pc))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bb(n){return n.cloneNode(!0)}function hH(n,t){return n+":"+t}function fle(n){return!(!n.url||!n.options)}const ple=vd(class{constructor(n){this._elementRef=n}}),mle=new ve("mat-icon-location",{providedIn:"root",factory:function gle(){const n=ef(Pt),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),fH=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],_le=fH.map(n=>`[${n}]`).join(", "),vle=/^url\(['"]?#(.*?)['"]?\)$/;let pH=(()=>{class n extends ple{constructor(e,i,r,s,o){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=Jn.EMPTY,r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Ft(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),i&&e.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(_le),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)fH.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(vle):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Ts(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(i_),zs("aria-hidden"),M(mle),M(Pc))},n.\u0275cmp=ft({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(bn("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Zt("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[he],ngContentSelectors:cle,decls:1,vars:0,template:function(e,i){1&e&&(zi(),Tn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),mH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[pt],pt]}),n})();function gH(n,t,e){n?gl(e,n,t):t()}const xb=Hn(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function x1(n){return new Mn(t=>{us(n()).subscribe(t)})}function _H(){return Ti((n,t)=>{let e=null;n._refCount++;const i=ci(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class xle extends Mn{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,sk(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Jn;const e=this.getSubject();t.add(this.source.subscribe(ci(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Jn.EMPTY)}return t}refCount(){return _H()(this)}}function Cd(n,t){return Ti((e,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();e.subscribe(ci(i,l=>{null==r||r.unsubscribe();let c=0;const u=s++;us(n(l,u)).subscribe(r=ci(i,d=>i.next(t?t(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function wle(n,t,e,i,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(ci(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function vH(n,t){return Ti(wle(n,t,arguments.length>=2,!0))}function w1(n){return n<=0?()=>_l:Ti((t,e)=>{let i=[];t.subscribe(ci(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function yH(n=Mle){return Ti((t,e)=>{let i=!1;t.subscribe(ci(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Mle(){return new xb}function bH(n){return Ti((t,e)=>{let i=!1;t.subscribe(ci(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function $f(n,t){const e=arguments.length>=2;return i=>i.pipe(n?hi((r,s)=>n(r,s,i)):cs,Ts(1),e?bH(t):yH(()=>new xb))}class Nl{constructor(t,e){this.id=t,this.url=e}}class M1 extends Nl{constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qf extends Nl{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xH extends Nl{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Sle extends Nl{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ele extends Nl{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tle extends Nl{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ale extends Nl{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Dle extends Nl{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rle extends Nl{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wH{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MH{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ile{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kle{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ole{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ple{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CH{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const nn="primary";class Lle{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Yf(n){return new Lle(n)}const SH="ngNavigationCancelingError";function C1(n){const t=Error("NavigationCancelingError: "+n);return t[SH]=!0,t}function Nle(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Xa(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!EH(n[r],t[r]))return!1;return!0}function EH(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function TH(n){return Array.prototype.concat.apply([],n)}function AH(n){return n.length>0?n[n.length-1]:null}function Ur(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Ka(n){return FS(n)?n:pg(n)?Sr(Promise.resolve(n)):_t(n)}const Hle={exact:function IH(n,t,e){if(!Ed(n.segments,t.segments)||!wb(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!IH(n.children[i],t.children[i],e))return!1;return!0},subset:kH},DH={exact:function Ule(n,t){return Xa(n,t)},subset:function zle(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>EH(n[e],t[e]))},ignored:()=>!0};function RH(n,t,e){return Hle[e.paths](n.root,t.root,e.matrixParams)&&DH[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function kH(n,t,e){return OH(n,t,t.segments,e)}function OH(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Ed(r,e)||t.hasChildren()||!wb(r,e,i))}if(n.segments.length===e.length){if(!Ed(n.segments,e)||!wb(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!kH(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Ed(n.segments,r)&&wb(n.segments,r,i)&&n.children[nn])&&OH(n.children[nn],t,s,i)}}function wb(n,t,e){return t.every((i,r)=>DH[e](n[r].parameters,i.parameters))}class Sd{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yf(this.queryParams)),this._queryParamMap}toString(){return jle.serialize(this)}}class un{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ur(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mb(this)}}class r_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Yf(this.parameters)),this._parameterMap}toString(){return BH(this)}}function Ed(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class PH{}class LH{parse(t){const e=new ece(t);return new Sd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${s_(t.root,!0)}`,i=function Yle(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Cb(e)}=${Cb(r)}`).join("&"):`${Cb(e)}=${Cb(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function $le(n){return encodeURI(n)}(t.fragment)}`:""}`}}const jle=new LH;function Mb(n){return n.segments.map(t=>BH(t)).join("/")}function s_(n,t){if(!n.hasChildren())return Mb(n);if(t){const e=n.children[nn]?s_(n.children[nn],!1):"",i=[];return Ur(n.children,(r,s)=>{s!==nn&&i.push(`${s}:${s_(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Wle(n,t){let e=[];return Ur(n.children,(i,r)=>{r===nn&&(e=e.concat(t(i,r)))}),Ur(n.children,(i,r)=>{r!==nn&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===nn?[s_(n.children[nn],!1)]:[`${r}:${s_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[nn]?`${Mb(n)}/${e[0]}`:`${Mb(n)}/(${e.join("//")})`}}function FH(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cb(n){return FH(n).replace(/%3B/gi,";")}function S1(n){return FH(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sb(n){return decodeURIComponent(n)}function NH(n){return Sb(n.replace(/\+/g,"%20"))}function BH(n){return`${S1(n.path)}${function qle(n){return Object.keys(n).map(t=>`;${S1(t)}=${S1(n[t])}`).join("")}(n.parameters)}`}const Xle=/^[^\/()?;=#]+/;function Eb(n){const t=n.match(Xle);return t?t[0]:""}const Kle=/^[^=?&#]+/,Qle=/^[^&#]+/;class ece{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[nn]=new un(t,e)),i}parseSegment(){const t=Eb(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new r_(Sb(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Eb(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Eb(this.remaining);r&&(i=r,this.capture(i))}t[Sb(e)]=Sb(i)}parseQueryParam(t){const e=function Zle(n){const t=n.match(Kle);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function Jle(n){const t=n.match(Qle);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=NH(e),s=NH(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Eb(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=nn);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[nn]:new un([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class VH{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=E1(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=E1(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=T1(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return T1(t,this._root).map(e=>e.value)}}function E1(n,t){if(n===t.value)return t;for(const e of t.children){const i=E1(n,e);if(i)return i}return null}function T1(n,t){if(n===t.value)return[t];for(const e of t.children){const i=T1(n,e);if(i.length)return i.unshift(t),i}return[]}class Bl{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Xf(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class HH extends VH{constructor(t,e){super(t),this.snapshot=e,A1(this,t)}toString(){return this.snapshot.toString()}}function UH(n,t){const e=function tce(n,t){const o=new Tb([],{},{},"",{},nn,t,null,n.root,-1,{});return new GH("",new Bl(o,[]))}(n,t),i=new Ln([new r_("",{})]),r=new Ln({}),s=new Ln({}),o=new Ln({}),a=new Ln(""),l=new Td(i,r,o,a,s,nn,t,e.root);return l.snapshot=e.root,new HH(new Bl(l,[]),e)}class Td{constructor(t,e,i,r,s,o,a,l){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(en(t=>Yf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(en(t=>Yf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zH(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function nce(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Tb{constructor(t,e,i,r,s,o,a,l,c,u,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class GH extends VH{constructor(t,e){super(e),this.url=t,A1(this,e)}toString(){return WH(this._root)}}function A1(n,t){t.value._routerState=n,t.children.forEach(e=>A1(n,e))}function WH(n){const t=n.children.length>0?` { ${n.children.map(WH).join(", ")} } `:"";return`${n.value}${t}`}function D1(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Xa(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Xa(t.params,e.params)||n.params.next(e.params),function Ble(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Xa(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Xa(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function R1(n,t){const e=Xa(n.params,t.params)&&function Gle(n,t){return Ed(n,t)&&n.every((e,i)=>Xa(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||R1(n.parent,t.parent))}function o_(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function rce(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return o_(n,i,r);return o_(n,i)})}(n,t,e);return new Bl(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>o_(n,a)),o}}const i=function sce(n){return new Td(new Ln(n.url),new Ln(n.params),new Ln(n.queryParams),new Ln(n.fragment),new Ln(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>o_(n,s));return new Bl(i,r)}}function Ab(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function a_(n){return"object"==typeof n&&null!=n&&n.outlets}function I1(n,t,e,i,r){let s={};if(i&&Ur(i,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===t)return new Sd(e,s,r);const o=jH(n,t,e);return new Sd(o,s,r)}function jH(n,t,e){const i={};return Ur(n.children,(r,s)=>{i[s]=r===t?e:jH(r,t,e)}),new un(n.segments,i)}class $H{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Ab(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(a_);if(r&&r!==AH(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class k1{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function qH(n,t,e){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return Db(n,t,e);const i=function dce(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const o=n.segments[r],a=e[i];if(a_(a))break;const l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!XH(l,c,o))return s;i+=2}else{if(!XH(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new un(n.segments.slice(0,i.pathIndex),{});return s.children[nn]=new un(n.segments.slice(i.pathIndex),n.children),Db(s,0,r)}return i.match&&0===r.length?new un(n.segments,{}):i.match&&!n.hasChildren()?O1(n,t,e):i.match?Db(n,0,r):O1(n,t,e)}function Db(n,t,e){if(0===e.length)return new un(n.segments,{});{const i=function uce(n){return a_(n[0])?n[0].outlets:{[nn]:n}}(e),r={};return Ur(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=qH(n.children[o],t,s))}),Ur(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new un(n.segments,r)}}function O1(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(a_(s)){const l=hce(s.outlets);return new un(i,l)}if(0===r&&Ab(e[0])){i.push(new r_(n.segments[t].path,YH(e[0]))),r++;continue}const o=a_(s)?s.outlets[nn]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Ab(a)?(i.push(new r_(o,YH(a))),r+=2):(i.push(new r_(o,{})),r++)}return new un(i,{})}function hce(n){const t={};return Ur(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=O1(new un([],{}),0,e))}),t}function YH(n){const t={};return Ur(n,(e,i)=>t[i]=`${e}`),t}function XH(n,t,e){return n==e.path&&Xa(t,e.parameters)}class pce{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),D1(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Xf(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Ur(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Xf(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Xf(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=Xf(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ple(s.value.snapshot))}),t.children.length&&this.forwardEvent(new kle(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(D1(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),D1(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=function mce(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class P1{constructor(t,e){this.routes=t,this.module=e}}function qc(n){return"function"==typeof n}function Ad(n){return n instanceof Sd}const l_=Symbol("INITIAL_VALUE");function c_(){return Cd(n=>function yle(...n){const t=Vm(n),e=yk(n),{args:i,keys:r}=g3(n);if(0===i.length)return Sr([],t);const s=new Mn(function ble(n,t,e=cs){return i=>{gH(t,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)gH(t,()=>{const c=Sr(n[l],t);let u=!1;c.subscribe(ci(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,t,r?o=>_3(r,o):cs));return e?s.pipe(GE(e)):s}(n.map(t=>t.pipe(Ts(1),Bf(l_)))).pipe(vH((t,e)=>{let i=!1;return e.reduce((r,s,o)=>r!==l_?r:(s===l_&&(i=!0),i||!1!==s&&o!==e.length-1&&!Ad(s)?r:s),t)},l_),hi(t=>t!==l_),en(t=>Ad(t)?t:!0===t),Ts(1)))}class xce{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new u_,this.attachRef=null}}class u_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new xce,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let Rb=(()=>{class n{constructor(e,i,r,s,o){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Wt,this.deactivateEvents=new Wt,this.attachEvents=new Wt,this.detachEvents=new Wt,this.name=s||nn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new wce(e,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(M(u_),M(kr),M(td),zs("name"),M(Qi))},n.\u0275dir=oe({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class wce{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Td?this.route:t===u_?this.childContexts:this.parent.get(t,e)}}let KH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=ft({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&ae(0,"router-outlet")},directives:[Rb],encapsulation:2}),n})();function ZH(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];Mce(i,Cce(t,i))}}function Mce(n,t){n.children&&ZH(n.children,t)}function Cce(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function L1(n){const t=n.children&&n.children.map(L1),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==nn&&(e.component=KH),e}function Io(n){return n.outlet||nn}function QH(n,t){const e=n.filter(i=>Io(i)===t);return e.push(...n.filter(i=>Io(i)!==t)),e}const JH={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ib(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},JH):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||Nle)(e,n,t);if(!s)return Object.assign({},JH);const o={};Ur(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function kb(n,t,e,i,r="corrected"){if(e.length>0&&function Tce(n,t,e){return e.some(i=>Ob(n,t,i)&&Io(i)!==nn)}(n,e,i)){const o=new un(t,function Ece(n,t,e,i){const r={};r[nn]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Io(s)!==nn){const o=new un([],{});o._sourceSegment=n,o._segmentIndexShift=t.length,r[Io(s)]=o}return r}(n,t,i,new un(e,n.children)));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function Ace(n,t,e){return e.some(i=>Ob(n,t,i))}(n,e,i)){const o=new un(n.segments,function Sce(n,t,e,i,r,s){const o={};for(const a of i)if(Ob(n,e,a)&&!r[Io(a)]){const l=new un([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:t.length,o[Io(a)]=l}return Object.assign(Object.assign({},r),o)}(n,t,e,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new un(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Ob(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function eU(n,t,e,i){return!!(Io(n)===i||i!==nn&&Ob(t,e,n))&&("**"===n.path||Ib(t,n,e).matched)}function tU(n,t,e){return 0===t.length&&!n.children[e]}class Pb{constructor(t){this.segmentGroup=t||null}}class nU{constructor(t){this.urlTree=t}}function d_(n){return e_(new Pb(n))}function iU(n){return e_(new nU(n))}class kce{constructor(t,e,i,r,s){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(Cl)}apply(){const t=kb(this.urlTree.root,[],[],this.config).segmentGroup,e=new un(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,nn).pipe(en(s=>this.createUrlTree(F1(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ya(s=>{if(s instanceof nU)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Pb?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,nn).pipe(en(r=>this.createUrlTree(F1(r),t.queryParams,t.fragment))).pipe(Ya(r=>{throw r instanceof Pb?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const r=t.segments.length>0?new un([],{[nn]:t}):t;return new Sd(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe(en(s=>new un([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Sr(r).pipe(jf(s=>{const o=i.children[s],a=QH(e,s);return this.expandSegmentGroup(t,a,o,s).pipe(en(l=>({segment:l,outlet:s})))}),vH((s,o)=>(s[o.outlet]=o.segment,s),{}),function Cle(n,t){const e=arguments.length>=2;return i=>i.pipe(n?hi((r,s)=>n(r,s,i)):cs,w1(1),e?bH(t):yH(()=>new xb))}())}expandSegment(t,e,i,r,s,o){return Sr(i).pipe(jf(a=>this.expandSegmentAgainstRoute(t,e,i,a,r,s,o).pipe(Ya(c=>{if(c instanceof Pb)return _t(null);throw c}))),$f(a=>!!a),Ya((a,l)=>{if(a instanceof xb||"EmptyError"===a.name)return tU(e,r,s)?_t(new un([],{})):d_(e);throw a}))}expandSegmentAgainstRoute(t,e,i,r,s,o,a){return eU(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o):d_(e):d_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?iU(s):this.lineralizeSegments(i,s).pipe(hr(o=>{const a=new un(o,{});return this.expandSegment(t,a,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Ib(e,r,s);if(!a)return d_(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?iU(d):this.lineralizeSegments(r,d).pipe(hr(h=>this.expandSegment(t,e,i,h.concat(c),o,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?_t(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe(en(d=>(i._loadedConfig=d,new un(r,{})))):_t(new un(r,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=Ib(e,i,r);return o?this.getChildConfig(t,i,r).pipe(hr(u=>{const d=u.module,h=u.routes,{segmentGroup:f,slicedSegments:p}=kb(e,a,l,h),m=new un(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(en(y=>new un(a,y)));if(0===h.length&&0===p.length)return _t(new un(a,{}));const g=Io(i)===s;return this.expandSegment(d,m,h,p,g?nn:s,!0).pipe(en(v=>new un(a.concat(v.segments),v.children)))})):d_(e)}getChildConfig(t,e,i){return e.children?_t(new P1(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?_t(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe(hr(r=>r?this.configLoader.load(t.injector,e).pipe(en(s=>(e._loadedConfig=s,s))):function Rce(n){return e_(C1(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):_t(new P1([],t))}runCanLoadGuards(t,e,i){const r=e.canLoad;return r&&0!==r.length?_t(r.map(o=>{const a=t.get(o);let l;if(function _ce(n){return n&&qc(n.canLoad)}(a))l=a.canLoad(e,i);else{if(!qc(a))throw new Error("Invalid CanLoad guard");l=a(e,i)}return Ka(l)})).pipe(c_(),ji(o=>{if(!Ad(o))return;const a=C1(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),en(o=>!0===o)):_t(!0)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return _t(i);if(r.numberOfChildren>1||!r.children[nn])return e_(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));r=r.children[nn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Sd(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Ur(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=e[a]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let o={};return Ur(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,i,r)}),new un(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}function F1(n){const t={};for(const i of Object.keys(n.children)){const s=F1(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function Oce(n){if(1===n.numberOfChildren&&n.children[nn]){const t=n.children[nn];return new un(n.segments.concat(t.segments),t.children)}return n}(new un(n.segments,t))}class rU{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Lb{constructor(t,e){this.component=t,this.route=e}}function Lce(n,t,e){const i=n._root;return h_(i,t?t._root:null,e,[i.value])}function Fb(n,t,e){const i=function Nce(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function h_(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Xf(t);return n.children.forEach(o=>{(function Bce(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Vce(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Ed(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ed(n.url,t.url)||!Xa(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!R1(n,t)||!Xa(n.queryParams,t.queryParams);default:return!R1(n,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new rU(i)):(s.data=o.data,s._resolvedData=o._resolvedData),h_(n,t,s.component?a?a.children:null:e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Lb(a.outlet.component,o))}else o&&f_(t,a,r),r.canActivateChecks.push(new rU(i)),h_(n,null,s.component?a?a.children:null:e,i,r)})(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Ur(s,(o,a)=>f_(o,e.getContext(a),r)),r}function f_(n,t,e){const i=Xf(n),r=n.value;Ur(i,(s,o)=>{f_(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new Lb(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class Yce{}function sU(n){return new Mn(t=>t.error(n))}class Kce{constructor(t,e,i,r,s,o){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const t=kb(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,nn);if(null===e)return null;const i=new Tb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},nn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Bl(i,e),s=new GH(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,i=zH(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const s of Object.keys(e.children)){const o=e.children[s],a=QH(t,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;i.push(...l)}const r=oU(i);return function Zce(n){n.sort((t,e)=>t.value.outlet===nn?-1:e.value.outlet===nn?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,i,r){for(const s of t){const o=this.processSegmentAgainstRoute(s,e,i,r);if(null!==o)return o}return tU(e,i,r)?[]:null}processSegmentAgainstRoute(t,e,i,r){if(t.redirectTo||!eU(t,e,i,r))return null;let s,o=[],a=[];if("**"===t.path){const f=i.length>0?AH(i).parameters:{};s=new Tb(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,cU(t),Io(t),t.component,t,aU(e),lU(e)+i.length,uU(t))}else{const f=Ib(e,t,i);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new Tb(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,cU(t),Io(t),t.component,t,aU(e),lU(e)+o.length,uU(t))}const l=function Qce(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:u}=kb(e,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new Bl(s,f)]}if(0===l.length&&0===u.length)return[new Bl(s,[])];const d=Io(t)===r,h=this.processSegment(l,c,u,d?nn:r);return null===h?null:[new Bl(s,h)]}}function Jce(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function oU(n){const t=[],e=new Set;for(const i of n){if(!Jce(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=oU(i.children);t.push(new Bl(i.value,r))}return t.filter(i=>!e.has(i))}function aU(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function lU(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function cU(n){return n.data||{}}function uU(n){return n.resolve||{}}function dU(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function N1(n){return Cd(t=>{const e=n(t);return e?Sr(e).pipe(en(()=>t)):_t(t)})}class aue extends class oue{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const B1=new ve("ROUTES");class hU{constructor(t,e,i,r){this.injector=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(en(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=s.create(t);return new P1(TH(o.injector.get(B1,void 0,Lt.Self|Lt.Optional)).map(L1),o)}),Ya(s=>{throw e._loader$=void 0,s}));return e._loader$=new xle(r,()=>new Tt).pipe(_H()),e._loader$}loadModuleFactory(t){return Ka(t()).pipe(hr(e=>e instanceof YF?_t(e):Sr(this.compiler.compileModuleAsync(e))))}}class cue{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function uue(n){throw n}function due(n,t,e){return t.parse("/")}function fU(n,t){return _t(null)}const hue={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fue={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let As=(()=>{class n{constructor(e,i,r,s,o,a,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tt,this.errorHandler=uue,this.malformedUriErrorHandler=due,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fU,afterPreactivation:fU},this.urlHandlingStrategy=new cue,this.routeReuseStrategy=new aue,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Cl),this.console=o.get(OQ);const d=o.get(It);this.isNgZoneEnabled=d instanceof It&&It.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Vle(){return new Sd(new un([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hU(o,a,h=>this.triggerEvent(new wH(h)),h=>this.triggerEvent(new MH(h))),this.routerState=UH(this.currentUrlTree,this.rootComponentType),this.transitions=new Ln({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(hi(r=>0!==r.id),en(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Cd(r=>{let s=!1,o=!1;return _t(r).pipe(ji(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Cd(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return pU(a.source)&&(this.browserUrlTree=a.extractedUrl),_t(a).pipe(Cd(d=>{const h=this.transitions.getValue();return i.next(new M1(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?_l:Promise.resolve(d)}),function Pce(n,t,e,i){return Cd(r=>function Ice(n,t,e,i,r){return new kce(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe(en(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ji(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function eue(n,t,e,i,r){return hr(s=>function Xce(n,t,e,i,r="emptyOnly",s="legacy"){try{const o=new Kce(n,t,e,i,r,s).recognize();return null===o?sU(new Yce):_t(o)}catch(o){return sU(o)}}(n,t,s.urlAfterRedirects,e(s.urlAfterRedirects),i,r).pipe(en(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),ji(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new Ele(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:g}=a,_=new M1(h,this.serializeUrl(f),p,m);i.next(_);const v=UH(f,this.rootComponentType).snapshot;return _t(Object.assign(Object.assign({},a),{targetSnapshot:v,urlAfterRedirects:f,extras:Object.assign(Object.assign({},g),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),_l}),N1(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),ji(a=>{const l=new Tle(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),en(a=>Object.assign(Object.assign({},a),{guards:Lce(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function Hce(n,t){return hr(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?_t(Object.assign(Object.assign({},e),{guardsResult:!0})):function Uce(n,t,e,i){return Sr(n).pipe(hr(r=>function qce(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?_t(s.map(a=>{const l=Fb(a,t,r);let c;if(function bce(n){return n&&qc(n.canDeactivate)}(l))c=Ka(l.canDeactivate(n,t,e,i));else{if(!qc(l))throw new Error("Invalid CanDeactivate guard");c=Ka(l(n,t,e,i))}return c.pipe($f())})).pipe(c_()):_t(!0)}(r.component,r.route,e,t,i)),$f(r=>!0!==r,!0))}(o,i,r,n).pipe(hr(a=>a&&function gce(n){return"boolean"==typeof n}(a)?function zce(n,t,e,i){return Sr(t).pipe(jf(r=>nT(function Wce(n,t){return null!==n&&t&&t(new Ile(n)),_t(!0)}(r.route.parent,i),function Gce(n,t){return null!==n&&t&&t(new Ole(n)),_t(!0)}(r.route,i),function $ce(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function Fce(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(o)).filter(o=>null!==o).map(o=>x1(()=>_t(o.guards.map(l=>{const c=Fb(l,o.node,e);let u;if(function yce(n){return n&&qc(n.canActivateChild)}(c))u=Ka(c.canActivateChild(i,n));else{if(!qc(c))throw new Error("Invalid CanActivateChild guard");u=Ka(c(i,n))}return u.pipe($f())})).pipe(c_())));return _t(s).pipe(c_())}(n,r.path,e),function jce(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return _t(!0);const r=i.map(s=>x1(()=>{const o=Fb(s,t,e);let a;if(function vce(n){return n&&qc(n.canActivate)}(o))a=Ka(o.canActivate(t,n));else{if(!qc(o))throw new Error("Invalid CanActivate guard");a=Ka(o(t,n))}return a.pipe($f())}));return _t(r).pipe(c_())}(n,r.route,e))),$f(r=>!0!==r,!0))}(i,s,n,t):_t(a)),en(a=>Object.assign(Object.assign({},e),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),ji(a=>{if(Ad(a.guardsResult)){const c=C1(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new Ale(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),hi(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),N1(a=>{if(a.guards.canActivateChecks.length)return _t(a).pipe(ji(l=>{const c=new Dle(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Cd(l=>{let c=!1;return _t(l).pipe(function tue(n,t){return hr(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return _t(e);let s=0;return Sr(r).pipe(jf(o=>function nue(n,t,e,i){return function iue(n,t,e,i){const r=dU(n);if(0===r.length)return _t({});const s={};return Sr(r).pipe(hr(o=>function rue(n,t,e,i){const r=Fb(n,t,i);return Ka(r.resolve?r.resolve(t,e):r(t,e))}(n[o],t,e,i).pipe(ji(a=>{s[o]=a}))),w1(1),hr(()=>dU(s).length===r.length?_t(s):_l))}(n._resolve,n,t,i).pipe(en(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),zH(n,e).resolve),null)))}(o.route,i,n,t)),ji(()=>s++),w1(1),hr(o=>s===r.length?_t(e):_l))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ji({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),ji(l=>{const c=new Rle(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),N1(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),en(a=>{const l=function ice(n,t,e){const i=o_(n,t._root,e?e._root:void 0);return new HH(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),ji(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,t,e)=>en(i=>(new pce(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),ji({next(){s=!0},complete(){s=!0}}),KV(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),Ya(a=>{if(o=!0,function Fle(n){return n&&n[SH]}(a)){const l=Ad(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new xH(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||pU(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new Sle(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return _l}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e.url);this.scheduleNavigation(a,i,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){ZH(e),this.config=e.map(L1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function oce(n,t,e,i,r){if(0===e.length)return I1(t.root,t.root,t.root,i,r);const s=function ace(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new $H(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Ur(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new $H(e,t,i)}(e);if(s.toRoot())return I1(t.root,t.root,new un([],{}),i,r);const o=function lce(n,t,e){if(n.isAbsolute)return new k1(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new k1(s,s===t.root,0)}const i=Ab(n.commands[0])?0:1;return function cce(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new k1(i,!1,r-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,t,n),a=o.processChildren?Db(o.segmentGroup,o.index,s.commands):qH(o.segmentGroup,o.index,s.commands);return I1(t.root,o.segmentGroup,a,i,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Ad(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function pue(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},hue):!1===i?Object.assign({},fue):i,Ad(e))return RH(this.currentUrlTree,e,r);const s=this.parseUrl(e);return RH(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new qf(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((p,m)=>{c=p,u=m});const h=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):f=0,this.setTransition({id:h,targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new xH(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){fg()},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function pU(n){return"imperative"!==n}let Nb=(()=>{class n{constructor(e,i,r,s,o){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new Tt,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Kf(this.skipLocationChange),replaceUrl:Kf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kf(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(M(As),M(Td),zs("tabindex"),M(aa),M(Ve))},n.\u0275dir=oe({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&Xe("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[fr]}),n})(),V1=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new Tt,this.subscription=e.events.subscribe(s=>{s instanceof qf&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,o){if(0!==e||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:Kf(this.skipLocationChange),replaceUrl:Kf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kf(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(M(As),M(Td),M(If))},n.\u0275dir=oe({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&Xe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&bn("target",i.target)("href",i.href,BC)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[fr]}),n})();function Kf(n){return""===n||!!n}let mU=(()=>{class n{constructor(e,i,r,s,o,a){this.router=e,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Wt,this.routerEventsSubscription=e.events.subscribe(l=>{l instanceof qf&&this.update()})}ngAfterContentInit(){_t(this.links.changes,this.linksWithHrefs.changes,_t(null)).pipe(Bm()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const i=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Sr(i).pipe(Bm()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function mue(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return n.\u0275fac=function(e){return new(e||n)(M(As),M(Ve),M(aa),M(Qi),M(Nb,8),M(V1,8))},n.\u0275dir=oe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,i,r){if(1&e&&(di(r,Nb,5),di(r,V1,5)),2&e){let s;Ct(s=St())&&(i.links=s),Ct(s=St())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[fr]}),n})();class gU{}class _U{preload(t,e){return _t(null)}}let vU=(()=>{class n{constructor(e,i,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new hU(r,i,l=>e.triggerEvent(new wH(l)),l=>e.triggerEvent(new MH(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(hi(e=>e instanceof qf),jf(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Cl);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children));return Sr(r).pipe(Bm(),en(s=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?_t(i._loadedConfig):this.loader.load(e.injector,i)).pipe(hr(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(ee(As),ee(R2),ee(Ui),ee(gU))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),H1=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof M1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof qf&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof CH&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new CH(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){fg()},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const Dd=new ve("ROUTER_CONFIGURATION"),yU=new ve("ROUTER_FORROOT_GUARD"),_ue=[Tg,{provide:PH,useClass:LH},{provide:As,useFactory:function Mue(n,t,e,i,r,s,o={},a,l){const c=new As(null,n,t,e,i,r,TH(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function Cue(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[PH,u_,Tg,Ui,R2,B1,Dd,[class lue{},new wo],[class sue{},new wo]]},u_,{provide:Td,useFactory:function Sue(n){return n.routerState.root},deps:[As]},vU,_U,class gue{preload(t,e){return e().pipe(Ya(()=>_t(null)))}},{provide:Dd,useValue:{enableTracing:!1}}];function vue(){return new L2("Router",As)}let yue=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[_ue,bU(e),{provide:yU,useFactory:wue,deps:[[As,new wo,new Yu]]},{provide:Dd,useValue:i||{}},{provide:If,useFactory:xue,deps:[od,[new Ay(wE),new wo],Dd]},{provide:H1,useFactory:bue,deps:[As,Nee,Dd]},{provide:gU,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:_U},{provide:L2,multi:!0,useFactory:vue},[U1,{provide:oE,multi:!0,useFactory:Eue,deps:[U1]},{provide:xU,useFactory:Tue,deps:[U1]},{provide:cE,multi:!0,useExisting:xU}]]}}static forChild(e){return{ngModule:n,providers:[bU(e)]}}}return n.\u0275fac=function(e){return new(e||n)(ee(yU,8),ee(As,8))},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})();function bue(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new H1(n,t,e)}function xue(n,t,e={}){return e.useHash?new SJ(n,t):new eN(n,t)}function wue(n){return"guarded"}function bU(n){return[{provide:_9,multi:!0,useValue:n},{provide:B1,multi:!0,useValue:n}]}let U1=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Tt}appInitializer(){return this.injector.get(wJ,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(As),o=this.injector.get(Dd);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?_t(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(Dd),r=this.injector.get(vU),s=this.injector.get(H1),o=this.injector.get(As),a=this.injector.get(a0);e===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(ee(Ui))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function Eue(n){return n.appInitializer.bind(n)}function Tue(n){return n.bootstrapListener.bind(n)}const xU=new ve("Router Initializer");class Uue{constructor(t,e,i=!0){this.key=t,this.value=e,this.key=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=i?e.replace(/['"]/g,"").trim():e.trim(),this.value=this.value.replace(/;/,"")}}function wU(n){let t=typeof n;return"object"===t?n.constructor===Array?"array":n.constructor===Set?"set":"object":t}function CU(n){const[t,...e]=n.split(":");return new Uue(t,e.join(":"))}function SU(n,t){return t.key&&(n[t.key]=t.value),n}let Wue=(()=>{class n extends wi{constructor(e,i,r,s,o,a,l,c,u){var d;super(e,null,i,r),this.sanitizer=s,this.ngStyleInstance=l,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new ld(e,o,a)),this.init();const h=null!==(d=this.nativeElement.getAttribute("style"))&&void 0!==d?d:"";this.fallbackStyles=this.buildStyleMap(h),this.isServer=c&&Of(u)}updateWithValue(e){const i=this.buildStyleMap(e);this.ngStyleInstance.ngStyle=Object.assign(Object.assign({},this.fallbackStyles),i),this.isServer&&this.applyStyleToElement(i),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(e){const i=r=>{var s;return null!==(s=this.sanitizer.sanitize(En.STYLE,r))&&void 0!==s?s:""};if(e)switch(wU(e)){case"string":return EU(function zue(n,t=";"){return String(n).trim().split(t).map(e=>e.trim()).filter(e=>""!==e)}(e),i);case"array":return EU(e,i);default:return function MU(n,t){let e=[];return"set"===wU(n)?n.forEach(i=>e.push(i)):Object.keys(n).forEach(i=>{e.push(`${i}:${n[i]}`)}),function Gue(n,t){return n.map(CU).filter(i=>!!i).map(i=>(t&&(i.value=t(i.value)),i)).reduce(SU,{})}(e,t)}(e,i)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(fi),M(gi),M(kg),M(sd),M(aa),M(ld,10),M(zf),M(qs))},n.\u0275dir=oe({type:n,features:[he]}),n})();const jue=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let Bb=(()=>{class n extends Wue{constructor(){super(...arguments),this.inputs=jue}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[he]}),n})();function EU(n,t){return n.map(CU).filter(i=>!!i).map(i=>(t&&(i.value=t(i.value)),i)).reduce(SU,{})}let TU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[c1]]}),n})();function $ue(n,t){1&n&&(S(0,"mat-icon"),k(1,"close"),T())}function que(n,t){1&n&&(S(0,"mat-icon"),k(1,"menu"),T())}function Yue(n,t){1&n&&(S(0,"span"),k(1,"Close"),T())}function Xue(n,t){if(1&n&&(S(0,"span"),k(1),T()),2&n){const e=Qe();$(1),Ju(e.title)}}function Kue(n,t){1&n&&(S(0,"mat-icon"),k(1,"light_mode"),T())}function Zue(n,t){1&n&&(S(0,"mat-icon"),k(1,"dark_mode"),T())}const Que=function(n){return{transform:n}};let Jue=(()=>{class n{constructor(e){this.appService=e,this.mini=!0,this.collapsed=!0,this.title=this.appService.title}open(){this.mini&&(this.collapsed=!1),this.mini=!this.mini}click(){this.collapsed=!0}ngOnInit(){}get darkMode(){return this.appService.darkMode}set darkMode(e){this.appService.setDarkMode(e)}}return n.\u0275fac=function(e){return new(e||n)(M(Wi))},n.\u0275cmp=ft({type:n,selectors:[["app-sidemenu"]],hostVars:4,hostBindings:function(e,i){2&e&&Zt("mini",i.mini)("collapsed",i.collapsed)},decls:74,vars:19,consts:[[1,"side"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1",1,"menu"],["mat-list-item","",3,"click"],[4,"ngIf"],["mat-list-item","",1,"title"],[2,"opacity","0","transition","0"],["mat-list-item","","routerLink","/house","routerLinkActive","active",3,"disabled","click"],["house","routerLinkActive"],[2,"font-family","Material Icons Outlined"],["mat-list-item","","routerLink","/stairs","routerLinkActive","active",3,"disabled","click"],["stairs","routerLinkActive"],["mat-list-item","","routerLink","/facade","routerLinkActive","active",3,"disabled","click"],["facade","routerLinkActive"],["mat-list-item","","routerLink","/construction","routerLinkActive","active",3,"disabled","click"],["construction","routerLinkActive"],["mat-list-item","","routerLink","/wired","routerLinkActive","active",3,"disabled","click"],["wired","routerLinkActive"],["mat-list-item","","routerLink","/costs","routerLinkActive","active",3,"disabled","click"],["mat-list-item","","routerLink","/installations","routerLinkActive","active",3,"disabled","click"],["installations","routerLinkActive"],["mat-list-item","","routerLink","/map","routerLinkActive","active",3,"disabled","click"],["map","routerLinkActive"],["fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","16px"],["mat-list-item","",2,"opacity","0.7",3,"click"],[3,"ngStyle"]],template:function(e,i){if(1&e&&(S(0,"div",0)(1,"mat-action-list",1)(2,"button",2),Xe("click",function(){return i.open()}),Ge(3,$ue,2,0,"mat-icon",3),Ge(4,que,2,0,"mat-icon",3),Ge(5,Yue,2,0,"span",3),Ge(6,Xue,2,1,"span",3),T(),S(7,"button",4)(8,"mat-icon",5),k(9,"gite"),T(),S(10,"span"),k(11),T()(),S(12,"button",6,7),Xe("click",function(){return i.click()}),S(14,"mat-icon",8),k(15,"home"),T(),S(16,"span"),k(17,"The house"),T()(),S(18,"button",9,10),Xe("click",function(){return i.click()}),S(20,"mat-icon",8),k(21,"stairs"),T(),S(22,"span"),k(23,"Stairs"),T()(),S(24,"button",11,12),Xe("click",function(){return i.click()}),S(26,"mat-icon"),k(27,"roofing"),T(),S(28,"span"),k(29,"Fa\xe7ade"),T()(),S(30,"button",13,14),Xe("click",function(){return i.click()}),S(32,"mat-icon"),k(33,"handyman"),T(),S(34,"span"),k(35,"Construction"),T()(),S(36,"button",15,16),Xe("click",function(){return i.click()}),S(38,"mat-icon"),k(39,"bolt"),T(),S(40,"span"),k(41,"Wired"),T()(),S(42,"button",17,16),Xe("click",function(){return i.click()}),S(44,"mat-icon",8),k(45,"savings"),T(),S(46,"span"),k(47,"Costs"),T()(),S(48,"button",18,19),Xe("click",function(){return i.click()}),S(50,"mat-icon"),k(51,"solar_power"),T(),S(52,"span"),k(53,"Installations"),T()(),S(54,"button",20,21),Xe("click",function(){return i.click()}),S(56,"mat-icon"),k(57,"pin_drop"),T(),S(58,"span"),k(59,"Map"),T()(),ae(60,"div",22),S(61,"button",23),Xe("click",function(){return i.darkMode=!i.darkMode}),S(62,"mat-icon",5),k(63,"dark_mode"),T(),S(64,"span",24),Ge(65,Kue,2,0,"mat-icon",3),Ge(66,Zue,2,0,"mat-icon",3),S(67,"div"),k(68),T()()(),S(69,"button",25),Xe("click",function(){return i.collapsed=!i.collapsed}),S(70,"mat-icon",26),k(71,"double_arrow"),T(),S(72,"span"),k(73,"Collapse"),T()()()()),2&e){const r=ui(13),s=ui(19),o=ui(25),a=ui(31),l=ui(37),c=ui(49),u=ui(55);$(3),Z("ngIf",!i.mini),$(1),Z("ngIf",i.mini),$(1),Z("ngIf",!i.mini),$(1),Z("ngIf",i.mini),$(5),Ju(i.title),$(1),Z("disabled",r.isActive),$(6),Z("disabled",s.isActive),$(6),Z("disabled",o.isActive),$(6),Z("disabled",a.isActive),$(6),Z("disabled",l.isActive),$(6),Z("disabled",l.isActive),$(6),Z("disabled",c.isActive),$(6),Z("disabled",u.isActive),$(11),Z("ngIf",i.darkMode),$(1),Z("ngIf",!i.darkMode),$(2),Ot("",i.darkMode?"Light":"Dark"," mode"),$(2),Z("ngStyle",Sl(17,Que,"rotate("+(i.collapsed?0:-180)+"deg) scale(0.7)"))}},directives:[_oe,Jg,Wf,p1,voe,Ys,pH,Nb,mU,gb,ld,Bb],styles:[".side[_ngcontent-%COMP%]{top:0;position:fixed;display:flex;flex-direction:column;max-width:200px;overflow:hidden;transition:.6s;height:100vh;max-height:100vh;border-right:1px solid var(--color-30);border-bottom:1px solid var(--color-30)}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{height:100vh;padding:0}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{min-height:56px;white-space:nowrap;opacity:1;transition:.4s}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transition:.4s}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:initial;pointer-events:none;opacity:.7}[_nghost-%COMP%]{display:flex;flex-direction:row}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-width:50px}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{opacity:.5}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:hover{opacity:1}.mini[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-height:50px}"]}),n})();const ede=["*",[["mat-toolbar-row"]]],tde=["*","mat-toolbar-row"],nde=vd(class{constructor(n){this._elementRef=n}});let ide=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=oe({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),rde=(()=>{class n extends nde{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(Es),M(Pt))},n.\u0275cmp=ft({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,i,r){if(1&e&&di(r,ide,5),2&e){let s;Ct(s=St())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,i){2&e&&Zt("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[he],ngContentSelectors:tde,decls:2,vars:0,template:function(e,i){1&e&&(zi(ede),Tn(0),Tn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),sde=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[pt],pt]}),n})(),ode=(()=>{class n{constructor(e){this.appService=e,this.year=(new Date).getFullYear(),this.title=this.appService.title}ngOnInit(){this.appService.setDarkMode(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)}ngAfterViewInit(){}}return n.\u0275fac=function(e){return new(e||n)(M(Wi))},n.\u0275cmp=ft({type:n,selectors:[["app-root"]],decls:14,vars:2,consts:[[1,"example-container"],["mode","side","opened",""],["fxLayout","column","fxLayoutAlign","center center"],["href","https://github.com/meijer3/passiv"]],template:function(e,i){1&e&&(S(0,"mat-sidenav-container",0)(1,"mat-sidenav",1),ae(2,"app-sidemenu"),T(),S(3,"mat-sidenav-content")(4,"main"),ae(5,"router-outlet"),T(),S(6,"footer")(7,"mat-toolbar",2)(8,"div"),k(9),T(),S(10,"div"),k(11," Everything is Free and open source. See "),S(12,"a",3),k(13,"github"),T()()()()()()),2&e&&($(9),gg(" ",i.title," 2019 - ",i.year," "))},directives:[f3,h3,Jue,PT,Rb,rde,Jg,Wf],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}main[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}footer[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{padding:48px 0;font-size:.8rem;opacity:.8;font-weight:400}.mat-drawer-content[_ngcontent-%COMP%]{overflow-y:hidden}"]}),n})();const ade=["mat-button",""],lde=["*"],ude=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],dde=vd(Wg(kl(class{constructor(n){this._elementRef=n}})));let AU=(()=>{class n extends dde{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of ude)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(Rl),M(Ro,8))},n.\u0275cmp=ft({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&ni(Ol,5),2&e){let r;Ct(r=St())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(bn("disabled",i.disabled||null),Zt("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[he],attrs:ade,ngContentSelectors:lde,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(zi(),S(0,"span",0),Tn(1),T(),ae(2,"span",1)(3,"span",2)),2&e&&($(2),Zt("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Z("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Ol],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),G1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[ha,pt],pt]}),n})(),hde=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})();class W1{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Vb extends W1{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class j1 extends W1{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class fde extends W1{constructor(t){super(),this.element=t instanceof Ve?t.nativeElement:t}}class $1{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Vb?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof j1?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof fde?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class pde extends $1{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Ui.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let DU=(()=>{class n extends $1{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Wt,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(M(td),M(kr),M(Pt))},n.\u0275dir=oe({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[he]}),n})(),Zf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})(),mde=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[Ss,pt,hde,Zf]]}),n})();const gde=["sliderWrapper"],ko=Hc({passive:!1}),xde={provide:Zr,useExisting:sn(()=>q1),multi:!0};class wde{}const Mde=J0(vd(Wg(class{constructor(n){this._elementRef=n}}),"accent"));let q1=(()=>{class n extends Mde{constructor(e,i,r,s,o,a,l,c){super(e),this._focusMonitor=i,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=c,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Wt,this.input=new Wt,this.valueChange=new Wt,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=Jn.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!p_(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=p_(u)?function Cde(n,t){for(let e=0;e<n.touches.length;e++){const i=n.touches[e].target;if(t===i||t.contains(i))return n.touches[e].identifier}}(u,this._elementRef.nativeElement):void 0;const d=kU(u,this._touchId);if(d){const h=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(d),this._valueOnSlideStart=h,u.cancelable&&u.preventDefault(),h!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const d=kU(u,this._touchId);if(d){u.preventDefault();const h=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(d),h!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!p_(u)||"number"!=typeof this._touchId||Y1(u.changedTouches,this._touchId))&&(u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=l,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=e.nativeElement;u.addEventListener("mousedown",this._pointerDown,ko),u.addEventListener("touchstart",this._pointerDown,ko)})}get invert(){return this._invert}set invert(e){this._invert=Ft(e)}get max(){return this._max}set max(e){this._max=Xs(e,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(e){this._min=Xs(e,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(e){this._step=Xs(e,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(e){this._thumbLabel=Ft(e)}get tickInterval(){return this._tickInterval}set tickInterval(e){this._tickInterval="auto"===e?"auto":"number"==typeof e||"string"==typeof e?Xs(e,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(e){if(e!==this._value){let i=Xs(e,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(e){this._vertical=Ft(e)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(e){this._focusHostElement(e)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const e=this.percent,r=this.vertical?`1, ${e}, 1`:`${e}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===e?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let e=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${e}%`:`${e}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${e/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const l=this._shouldInvertAxis();let c;c=this.vertical?l?"Bottom":"Top":l?"Right":"Left",a[`padding${c}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const e=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?e:!e)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const e=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?e:!e}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{this._isActive=!!e&&"keyboard"!==e,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mousedown",this._pointerDown,ko),e.removeEventListener("touchstart",this._pointerDown,ko),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(e){if(this.disabled||Ff(e)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(e.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",e.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(e){const i=this._document,r=p_(e),o=r?"touchend":"mouseup";i.addEventListener(r?"touchmove":"mousemove",this._pointerMove,ko),i.addEventListener(o,this._pointerUp,ko),r&&i.addEventListener("touchcancel",this._pointerUp,ko);const a=this._getWindow();void 0!==a&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const e=this._document;e.removeEventListener("mousemove",this._pointerMove,ko),e.removeEventListener("mouseup",this._pointerUp,ko),e.removeEventListener("touchmove",this._pointerMove,ko),e.removeEventListener("touchend",this._pointerUp,ko),e.removeEventListener("touchcancel",this._pointerUp,ko);const i=this._getWindow();void 0!==i&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(e){const i=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(i+this.step*e,this.min,this.max)}_updateValueFromPosition(e){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?e.y:e.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),l=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(l,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let e;if("auto"==this.tickInterval){let i=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;e=Math.ceil(30/(i*this.step/(this.max-this.min)))*this.step/i}else e=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=IU(e)?e:0}_createChangeEvent(e=this.value){let i=new wde;return i.source=this,i.value=e,i}_calculatePercentage(e){const i=((e||0)-this.min)/(this.max-this.min);return IU(i)?i:0}_calculateValue(e){return this.min+e*(this.max-this.min)}_clamp(e,i=0,r=1){return Math.max(i,Math.min(e,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(e){this._elementRef.nativeElement.focus(e)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(e){this.value=e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(Rl),M(Qi),M(Dl,8),zs("tabindex"),M(It),M(Pt),M(Ro,8))},n.\u0275cmp=ft({type:n,selectors:[["mat-slider"]],viewQuery:function(e,i){if(1&e&&ni(gde,5),2&e){let r;Ct(r=St())&&(i._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(e,i){1&e&&Xe("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&e&&(Cf("tabIndex",i.tabIndex),bn("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",null==i.valueText?i.displayValue:i.valueText)("aria-orientation",i.vertical?"vertical":"horizontal"),Zt("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[gt([xde]),he],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(e,i){1&e&&(S(0,"div",0,1)(2,"div",2),ae(3,"div",3)(4,"div",4),T(),S(5,"div",5),ae(6,"div",6),T(),S(7,"div",7),ae(8,"div",8)(9,"div",9),S(10,"div",10)(11,"span",11),k(12),T()()()()),2&e&&($(3),Z("ngStyle",i._getTrackBackgroundStyles()),$(1),Z("ngStyle",i._getTrackFillStyles()),$(1),Z("ngStyle",i._getTicksContainerStyles()),$(1),Z("ngStyle",i._getTicksStyles()),$(1),Z("ngStyle",i._getThumbContainerStyles()),$(5),Ju(i.displayValue))},directives:[ld],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),n})();function IU(n){return!isNaN(n)&&isFinite(n)}function p_(n){return"t"===n.type[0]}function kU(n,t){let e;return e=p_(n)?"number"==typeof t?Y1(n.touches,t)||Y1(n.changedTouches,t):n.touches[0]||n.changedTouches[0]:n,e?{x:e.clientX,y:e.clientY}:void 0}function Y1(n,t){for(let e=0;e<n.length;e++)if(n[e].identifier===t)return n[e]}let Sde=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[Ss,pt],pt]}),n})(),LU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})(),Nde=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[ha,pt,Hg,LU],pt,LU]}),n})();const FU=zN();class Bde{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=tr(-this._previousScrollPosition.left),t.style.top=tr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),FU&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),FU&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class Vde{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class NU{enable(){}disable(){}attach(){}}function X1(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function BU(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Hde{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();X1(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ude=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new NU,this.close=o=>new Vde(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Bde(this._viewportRuler,this._document),this.reposition=o=>new Hde(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(ee(I0),ee(Vg),ee(It),ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class VU{constructor(t){if(this.scrollStrategy=new NU,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class Hb{constructor(t,e,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class zde{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class Gde{constructor(t,e,i,r,s,o,a,l,c){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new Tt,this._attachments=new Tt,this._detachments=new Tt,this._locationChanges=Jn.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new Tt,this._outsidePointerEvents=new Tt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ts(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=tr(this._config.width),t.height=tr(this._config.height),t.minWidth=tr(this._config.minWidth),t.minHeight=tr(this._config.minHeight),t.maxWidth=tr(this._config.maxWidth),t.maxHeight=tr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,i){const r=LN(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(In(Bh(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let K1=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||KE()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),KE()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt),ee(Es))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HU="cdk-overlay-connected-position-bounding-box",Wde=/([A-Za-z%]+)$/;class jde{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Tt,this._resizeSubscription=Jn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(HU),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Rd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(HU),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==i.originX?o:a}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=zU(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),m=this._subtractOverflows(s.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,o=UU(this._overlayRef.getConfig().minHeight),a=UU(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportHorizontally||null!=a&&a<=s;return(t.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=zU(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-i.top-t.y,0),c=Math.max(s.left-i.left-t.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-i.left-t.x:0,d=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:u,y:d},{x:t.x+u,y:t.y+d}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new zde(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===e.overlayY)o=t.y,s=i.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-t.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-t.y+i.top,t.y),p=this._lastBoundingBoxSize.height;s=2*f,o=t.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-p/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)h=i.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)d=t.x,u=i.right-t.x;else{const f=Math.min(i.right-t.x+i.left,t.x),p=this._lastBoundingBoxSize.width;u=2*f,d=t.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=tr(i.height),r.top=tr(i.top),r.bottom=tr(i.bottom),r.width=tr(i.width),r.left=tr(i.left),r.right=tr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=tr(s)),o&&(r.maxWidth=tr(o))}this._lastBoundingBoxSize=i,Rd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Rd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Rd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Rd(i,this._getExactOverlayY(e,t,u)),Rd(i,this._getExactOverlayX(e,t,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=tr(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=tr(o.maxWidth):s&&(i.maxWidth="")),Rd(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=tr(s.y),r}_getExactOverlayX(t,e,i){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=tr(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:BU(t,i),isOriginOutsideView:X1(t,i),isOverlayClipped:BU(e,i),isOverlayOutsideView:X1(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&LN(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Ve)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Rd(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function UU(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(Wde);return e&&"px"!==e?null:parseFloat(t)}return n||null}function zU(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const GU="cdk-global-overlay-wrapper";class $de{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(GU),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(GU),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let qde=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new $de}flexibleConnectedTo(e){return new jde(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(ee(Vg),ee(Pt),ee(Es),ee(K1))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WU=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yde=(()=>{class n extends WU{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt),ee(It,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xde=(()=>{class n extends WU{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=dd(s)},this._clickListener=s=>{const o=dd(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(ee(Pt),ee(Es),ee(It,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kde=0,Vl=(()=>{class n{constructor(e,i,r,s,o,a,l,c,u,d,h){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new VU(e);return o.direction=o.direction||this._directionality.value,new Gde(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Kde++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(a0)),new pde(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(ee(Ude),ee(K1),ee(td),ee(qde),ee(Yde),ee(Ui),ee(It),ee(Pt),ee(Dl),ee(Tg),ee(Xde))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const Zde=new ve("cdk-connected-overlay-scroll-strategy");let Qde=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(M(Ve))},n.\u0275dir=oe({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})();const ehe={provide:Zde,deps:[Vl],useFactory:function Jde(n){return()=>n.scrollStrategies.reposition()}};let Qf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[Vl,ehe],imports:[[hd,Zf,k0],k0]}),n})();const rhe={provide:new ve("mat-menu-scroll-strategy"),deps:[Vl],useFactory:function ihe(n){return()=>n.scrollStrategies.reposition()}};let she=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[rhe],imports:[[Ss,pt,ha,Qf],fd,pt]}),n})();function ohe(n,t){}class Z1{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const ahe={dialogContainer:Kr("dialogContainer",[Xn("void, exit",bt({opacity:0,transform:"scale(0.7)"})),Xn("enter",bt({transform:"none"})),ri("* => enter",hB([Yn("150ms cubic-bezier(0, 0, 0.2, 1)",bt({transform:"none",opacity:1})),sT("@*",rT(),{optional:!0})])),ri("* => void, * => exit",hB([Yn("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",bt({opacity:0})),sT("@*",rT(),{optional:!0})]))])};let lhe=(()=>{class n extends $1{constructor(e,i,r,s,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=c,this._animationStateChanged=new Wt,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(u)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=XE())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=XE(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=XE();return e===i||e.contains(i)}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(rB),M(Qi),M(Pt,8),M(Z1),M(eT),M(It),M(Rl))},n.\u0275dir=oe({type:n,viewQuery:function(e,i){if(1&e&&ni(DU,7),2&e){let r;Ct(r=St())&&(i._portalOutlet=r.first)}},features:[he]}),n})(),che=(()=>{class n extends lhe{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275cmp=ft({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&jy("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(Cf("id",i._id),bn("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Xy("@dialogContainer",i._state))},features:[he],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&Ge(0,ohe,0,0,"ng-template",0)},directives:[DU],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[ahe.dialogContainer]}}),n})(),uhe=0;class dhe{constructor(t,e,i="mat-dialog-"+uhe++){this._overlayRef=t,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Tt,this._afterClosed=new Tt,this._beforeClosed=new Tt,this._state=0,e._id=i,e._animationStateChanged.pipe(hi(r=>"opened"===r.state),Ts(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(hi(r=>"closed"===r.state),Ts(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(hi(r=>27===r.keyCode&&!this.disableClose&&!Ff(r))).subscribe(r=>{r.preventDefault(),$U(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():$U(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(hi(e=>"closing"===e.state),Ts(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function $U(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const hhe=new ve("MatDialogData"),fhe=new ve("mat-dialog-default-options"),qU=new ve("mat-dialog-scroll-strategy"),mhe={provide:qU,deps:[Vl],useFactory:function phe(n){return()=>n.scrollStrategies.block()}};let ghe=(()=>{class n{constructor(e,i,r,s,o,a,l,c,u,d){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Tt,this._afterOpenedAtThisLevel=new Tt,this._ariaHiddenElements=new Map,this.afterAllClosed=x1(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Bf(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){i=function vhe(n,t){return Object.assign(Object.assign({},t),n)}(i,this._defaultOptions||new Z1),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(e,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new VU({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const s=Ui.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:Z1,useValue:i}]}),o=new Vb(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return e.attach(o).instance}_attachDialogContent(e,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(e instanceof Ir)i.attachTemplatePortal(new j1(e,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),l=i.attachComponentPortal(new Vb(e,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(e,i,r){const s=e&&e.viewContainerRef&&e.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!s||!s.get(Dl,null,Lt.Optional))&&o.push({provide:Dl,useValue:{value:e.direction,change:_t()}}),Ui.create({parent:s||this._injector,providers:o})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){fg()},n.\u0275dir=oe({type:n}),n})(),_he=(()=>{class n extends ghe{constructor(e,i,r,s,o,a,l,c){super(e,i,s,a,l,o,dhe,che,hhe,c)}}return n.\u0275fac=function(e){return new(e||n)(ee(Vl),ee(Ui),ee(Tg,8),ee(fhe,8),ee(qU),ee(n,12),ee(K1),ee(Ro,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),yhe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[_he,mhe],imports:[[Qf,Zf,pt],pt]}),n})(),khe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[ha,pt],pt]}),n})(),Ohe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[pt],pt]}),n})();const Phe=["thumbContainer"],Lhe=["toggleBar"],Fhe=["input"],Nhe=function(n){return{enterDuration:n}},Bhe=["*"],Vhe=new ve("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let Hhe=0;const Uhe={provide:Zr,useExisting:sn(()=>ZU),multi:!0};class zhe{constructor(t,e){this.source=t,this.checked=e}}const Ghe=J0(vd(kl(Wg(class{constructor(n){this._elementRef=n}}))));let ZU=(()=>{class n extends Ghe{constructor(e,i,r,s,o,a){super(e),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++Hhe,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Wt,this.toggleChange=new Wt,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a}get required(){return this._required}set required(e){this._required=Ft(e)}get checked(){return this._checked}set checked(e){this._checked=Ft(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new zhe(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(M(Ve),M(Rl),M(Qi),zs("tabindex"),M(Vhe),M(Ro,8))},n.\u0275cmp=ft({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(e,i){if(1&e&&(ni(Phe,5),ni(Lhe,5),ni(Fhe,5)),2&e){let r;Ct(r=St())&&(i._thumbEl=r.first),Ct(r=St())&&(i._thumbBarEl=r.first),Ct(r=St())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(e,i){2&e&&(Cf("id",i.id),bn("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),Zt("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[gt([Uhe]),he],ngContentSelectors:Bhe,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,i){if(1&e&&(zi(),S(0,"label",0,1)(2,"span",2,3)(4,"input",4,5),Xe("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),T(),S(6,"span",6,7),ae(8,"span",8),S(9,"span",9),ae(10,"span",10),T()()(),S(11,"span",11,12),Xe("cdkObserveContent",function(){return i._onLabelTextChange()}),S(13,"span",13),k(14,"\xa0"),T(),Tn(15),T()()),2&e){const r=ui(1),s=ui(12);bn("for",i.inputId),$(2),Zt("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),$(2),Z("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),bn("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),$(5),Z("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Sl(18,Nhe,i._noopAnimations?0:150))}},directives:[Ol,JN],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),n})(),QU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})(),$he=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[QU,ha,pt,Hg],QU,pt]}),n})(),Ub=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[Ss,pt,Hg],pt]}),n})(),Zhe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[hd]]}),n})(),Q1=(()=>{class n{constructor(){this.changes=new Tt,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lfe={provide:Q1,deps:[[new wo,new Yu,Q1]],useFactory:function afe(n){return n||new Q1}};let cfe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[lfe,e3],imports:[[pt,Ss,Zf,G1,Zhe,mH,ha],pt]}),n})(),ez=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({}),n})(),ufe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[e3],imports:[[ez,Ub,pt],ez,Ub]}),n})(),mfe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[Ss,pt,Zf,ha,Hg,dB],pt]}),n})(),vfe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[eb,pt],eb,pt]}),n})();const yfe=["button"],bfe=["*"],nz=new ve("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),iz=new ve("MatButtonToggleGroup"),xfe={provide:Zr,useExisting:sn(()=>oz),multi:!0};let rz=0;class sz{constructor(t,e){this.source=t,this.value=e}}let oz=(()=>{class n{constructor(e,i){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+rz++,this.valueChange=new Wt,this.change=new Wt,this.appearance=i&&i.appearance?i.appearance:"standard"}get name(){return this._name}set name(e){this._name=e,this._buttonToggles&&this._buttonToggles.forEach(i=>{i.name=this._name,i._markForCheck()})}get vertical(){return this._vertical}set vertical(e){this._vertical=Ft(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(i=>i.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=Ft(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=Ft(e),this._buttonToggles&&this._buttonToggles.forEach(i=>i._markForCheck())}ngOnInit(){this._selectionModel=new FT(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(){const e=this.selected,i=Array.isArray(e)?e[e.length-1]:e,r=new sz(i,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(e,i,r=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(r)):this._updateModelValue(r)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=e.value&&i===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===e);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(e){e&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}return n.\u0275fac=function(e){return new(e||n)(M(Qi),M(nz,8))},n.\u0275dir=oe({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,i,r){if(1&e&&di(r,az,5),2&e){let s;Ct(s=St())&&(i._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,i){2&e&&(bn("aria-disabled",i.disabled),Zt("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[gt([xfe,{provide:iz,useExisting:n}])]}),n})();const wfe=kl(class{});let az=(()=>{class n extends wfe{constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=s,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Wt;const l=Number(o);this.tabIndex=l||0===l?l:null,this.buttonToggleGroup=e,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const i=Ft(e);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=Ft(e)}ngOnInit(){const e=this.buttonToggleGroup;this._isSingleSelector=e&&!e.multiple,this.id=this.id||"mat-button-toggle-"+rz++,this._isSingleSelector&&(this.name=e.name),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new sz(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(M(iz,8),M(Qi),M(Ve),M(Rl),zs("tabindex"),M(nz,8))},n.\u0275cmp=ft({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(e,i){if(1&e&&ni(yfe,5),2&e){let r;Ct(r=St())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,i){1&e&&Xe("focus",function(){return i.focus()}),2&e&&(bn("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),Zt("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[he],ngContentSelectors:bfe,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,i){if(1&e&&(zi(),S(0,"button",0,1),Xe("click",function(){return i._onButtonClick()}),S(2,"span",2),Tn(3),T()(),ae(4,"span",3)(5,"span",4)),2&e){const r=ui(1);Z("id",i.buttonId)("disabled",i.disabled||null),bn("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i.name||null)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),$(5),Z("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},directives:[Ol],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent;transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .cdk-high-contrast-active .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),n})(),Mfe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[pt,ha],pt]}),n})(),Efe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[Qf,Zf,Ss,G1,pt],pt]}),n})();const Ife={provide:new ve("mat-tooltip-scroll-strategy"),deps:[Vl],useFactory:function Rfe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let Ofe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[Ife],imports:[[dB,Ss,Qf,pt],pt,fd]}),n})();const Bfe={provide:new ve("mat-select-scroll-strategy"),deps:[Vl],useFactory:function Nfe(n){return()=>n.scrollStrategies.reposition()}};let Vfe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({providers:[Bfe],imports:[[Ss,Qf,a3,pt],fd,Ub,a3,pt]}),n})();function Hfe(n,t){if(1&n&&(qn(),ae(0,"circle",4)),2&n){const e=Qe(),i=ui(1);Xr("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),bn("r",e._getCircleRadius())}}function Ufe(n,t){if(1&n&&(qn(),ae(0,"circle",4)),2&n){const e=Qe(),i=ui(1);Xr("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),bn("r",e._getCircleRadius())}}const Gfe=vd(class{constructor(n){this._elementRef=n}},"primary"),Wfe=new ve("mat-progress-spinner-default-options",{providedIn:"root",factory:function jfe(){return{diameter:100}}});class Yc extends Gfe{constructor(t,e,i,r,s,o,a,l){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Jn.EMPTY,this.mode="determinate";const c=Yc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(i.head)||c.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=Xs(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Xs(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Xs(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=GN(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){var e;const i=50*(null!==(e=t.currentScale)&&void 0!==e?e:1);return`${i}% ${i}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=Yc._diameters;let r=i.get(t);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),r||(r=new Set,i.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Yc._diameters=new WeakMap,Yc.\u0275fac=function(t){return new(t||Yc)(M(Ve),M(Es),M(Pt,8),M(Ro,8),M(Wfe),M(Qi),M(Vg),M(It))},Yc.\u0275cmp=ft({type:Yc,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(bn("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Xr("width",e.diameter,"px")("height",e.diameter,"px"),Zt("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[he],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(qn(),S(0,"svg",0,1),Ge(2,Hfe,1,11,"circle",2),Ge(3,Ufe,1,9,"circle",3),T()),2&t&&(Xr("width",e.diameter,"px")("height",e.diameter,"px"),Z("ngSwitch","indeterminate"===e.mode),bn("viewBox",e._getViewBox()),$(2),Z("ngSwitchCase",!0),$(1),Z("ngSwitchCase",!1))},directives:[b0,fN],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let qfe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[pt,Ss],pt]}),n})();const Xfe=[[["caption"]],[["colgroup"],["col"]]],Kfe=["caption","colgroup, col"];function eA(n){return class extends n{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=Ft(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const Jf=new ve("CDK_TABLE");let ep=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(M(Ir))},n.\u0275dir=oe({type:n,selectors:[["","cdkCellDef",""]]}),n})(),tp=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(M(Ir))},n.\u0275dir=oe({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),zb=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(M(Ir))},n.\u0275dir=oe({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class epe{}const tpe=eA(epe);let Hl=(()=>{class n extends tpe{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const i=this._stickyEnd;this._stickyEnd=Ft(e),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(e){return new(e||n)(M(Jf,8))},n.\u0275dir=oe({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,i,r){if(1&e&&(di(r,ep,5),di(r,tp,5),di(r,zb,5)),2&e){let s;Ct(s=St())&&(i.cell=s.first),Ct(s=St())&&(i.headerCell=s.first),Ct(s=St())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[gt([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),he]}),n})();class tA{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}}let nA=(()=>{class n extends tA{constructor(e,i){super(e,i)}}return n.\u0275fac=function(e){return new(e||n)(M(Hl),M(Ve))},n.\u0275dir=oe({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[he]}),n})(),iA=(()=>{class n extends tA{constructor(e,i){var r;if(super(e,i),1===(null===(r=e._table)||void 0===r?void 0:r._elementRef.nativeElement.nodeType)){const s=e._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return n.\u0275fac=function(e){return new(e||n)(M(Hl),M(Ve))},n.\u0275dir=oe({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[he]}),n})();class uz{constructor(){this.tasks=[],this.endTasks=[]}}const rA=new ve("_COALESCED_STYLE_SCHEDULER");let dz=(()=>{class n{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Tt}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new uz,this._getScheduleObservable().pipe(In(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new uz;for(const i of e.tasks)i();for(const i of e.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?Sr(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Ts(1))}}return n.\u0275fac=function(e){return new(e||n)(ee(It))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),sA=(()=>{class n{constructor(e,i){this.template=e,this._differs=i}ngOnChanges(e){if(!this._columnsDiffer){const i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof m_?e.headerCell.template:this instanceof g_?e.footerCell.template:e.cell.template}}return n.\u0275fac=function(e){return new(e||n)(M(Ir),M(ja))},n.\u0275dir=oe({type:n,features:[fr]}),n})();class npe extends sA{}const ipe=eA(npe);let m_=(()=>{class n extends ipe{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(M(Ir),M(ja),M(Jf,8))},n.\u0275dir=oe({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[he,fr]}),n})();class rpe extends sA{}const spe=eA(rpe);let g_=(()=>{class n extends spe{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(M(Ir),M(ja),M(Jf,8))},n.\u0275dir=oe({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[he,fr]}),n})(),Gb=(()=>{class n extends sA{constructor(e,i,r){super(e,i),this._table=r}}return n.\u0275fac=function(e){return new(e||n)(M(Ir),M(ja),M(Jf,8))},n.\u0275dir=oe({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[he]}),n})(),Ul=(()=>{class n{constructor(e){this._viewContainer=e,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(e){return new(e||n)(M(kr))},n.\u0275dir=oe({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),oA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=ft({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&ra(0,0)},directives:[Ul],encapsulation:2}),n})(),lA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=ft({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&ra(0,0)},directives:[Ul],encapsulation:2}),n})(),Wb=(()=>{class n{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(e){return new(e||n)(M(Ir))},n.\u0275dir=oe({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const hz=["top","bottom","left","right"];class ope{constructor(t,e,i,r,s=!0,o=!0,a){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const i=[];for(const r of t)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,i,r=!0){if(!t.length||!this._isBrowser||!e.some(h=>h)&&!i.some(h=>h))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=t[0],o=s.children.length,a=this._getCellWidths(s,r),l=this._getStickyStartColumnPositions(a,e),c=this._getStickyEndColumnPositions(a,i),u=e.lastIndexOf(!0),d=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const h="rtl"===this.direction,f=h?"right":"left",p=h?"left":"right";for(const m of t)for(let g=0;g<o;g++){const _=m.children[g];e[g]&&this._addStickyStyle(_,f,l[g],g===u),i[g]&&this._addStickyStyle(_,p,c[g],g===d)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:a.slice(0,u+1).map((m,g)=>e[g]?m:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===d?[]:a.slice(d).map((m,g)=>i[g+d]?m:null).reverse()}))})}stickRows(t,e,i){if(!this._isBrowser)return;const r="bottom"===i?t.slice().reverse():t,s="bottom"===i?e.slice().reverse():e,o=[],a=[],l=[];for(let u=0,d=0;u<r.length;u++){if(!s[u])continue;o[u]=d;const h=r[u];l[u]=this._isNativeHtmlTable?Array.from(h.children):[h];const f=h.getBoundingClientRect().height;d+=f,a[u]=f}const c=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var u,d;for(let h=0;h<r.length;h++){if(!s[h])continue;const f=o[h],p=h===c;for(const m of l[h])this._addStickyStyle(m,i,f,p)}"top"===i?null===(u=this._positionListener)||void 0===u||u.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:l}):null===(d=this._positionListener)||void 0===d||d.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:l})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const i=t.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(t,e){for(const r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);hz.some(r=>-1===e.indexOf(r)&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,i,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${i}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let i=0;for(const r of hz)t.style[r]&&(i+=e[r]);return i?`${i}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=t.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(t,e){const i=[];let r=0;for(let s=0;s<t.length;s++)e[s]&&(i[s]=r,r+=t[s]);return i}_getStickyEndColumnPositions(t,e){const i=[];let r=0;for(let s=t.length;s>0;s--)e[s]&&(i[s]=r,r+=t[s]);return i}}const cA=new ve("CDK_SPL");let jb=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(M(kr),M(Ve))},n.\u0275dir=oe({type:n,selectors:[["","rowOutlet",""]]}),n})(),$b=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(M(kr),M(Ve))},n.\u0275dir=oe({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),qb=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(M(kr),M(Ve))},n.\u0275dir=oe({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),Yb=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(M(kr),M(Ve))},n.\u0275dir=oe({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),Xb=(()=>{class n{constructor(e,i,r,s,o,a,l,c,u,d,h,f){this._differs=e,this._changeDetectorRef=i,this._elementRef=r,this._dir=o,this._platform=l,this._viewRepeater=c,this._coalescedStyleScheduler=u,this._viewportRuler=d,this._stickyPositioningListener=h,this._ngZone=f,this._onDestroy=new Tt,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Wt,this.viewChange=new Ln({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=Ft(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=Ft(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(In(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),LT(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&It.isInAngularZone()?this._ngZone.onStable.pipe(Ts(1),In(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let a=0;a<i.length;a++)this._renderRows[a].rowDef===s&&o.push(i[a]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const o=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let l=o[a];const c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,i,r){return this._getRowDefs(e,i).map(o=>{const a=r&&r.has(o)?r.get(o):[];if(a.length){const l=a.shift();return l.dataIndex=i,l}return{data:e,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Kb(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=Kb(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Kb(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Kb(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(o,a)=>o||!!a.getColumnsDiff(),i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(e){this._data=[],LT(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;LT(this.dataSource)?e=this.dataSource.connect(this):function Yfe(n){return!!n&&(n instanceof Mn||ln(n.lift)&&ln(n.subscribe))}(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=_t(this.dataSource)),this._renderChangeSubscription=e.pipe(In(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){const r=Array.from(i.columns||[]).map(a=>this._columnDefsByName.get(a)),s=r.map(a=>a.sticky),o=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const i=[];for(let r=0;r<e.viewContainer.length;r++){const s=e.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(e,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,e));else{let s=this._rowDefs.find(o=>o.when&&o.when(i,e))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(e,i){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:i}}_renderRow(e,i,r,s={}){const o=e.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),o}_renderCellTemplateForItem(e,i){for(let r of this._getCellTemplates(e))Ul.mostRecentCellOutlet&&Ul.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let i=0,r=e.length;i<r;i++){const o=e.get(i).context;o.count=r,o.first=0===i,o.last=i===r-1,o.even=i%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,i=>{const r=this._columnDefsByName.get(i);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const o of r.outlets)s.appendChild(o.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new ope(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:_t()).pipe(In(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(e.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&(null==o?void 0:o.nodeType)===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(e){return new(e||n)(M(ja),M(Qi),M(Ve),zs("role"),M(Dl,8),M(Pt),M(Es),M($g),M(rA),M(Vg),M(cA,12),M(It,8))},n.\u0275cmp=ft({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,i,r){if(1&e&&(di(r,Wb,5),di(r,Hl,5),di(r,Gb,5),di(r,m_,5),di(r,g_,5)),2&e){let s;Ct(s=St())&&(i._noDataRow=s.first),Ct(s=St())&&(i._contentColumnDefs=s),Ct(s=St())&&(i._contentRowDefs=s),Ct(s=St())&&(i._contentHeaderRowDefs=s),Ct(s=St())&&(i._contentFooterRowDefs=s)}},viewQuery:function(e,i){if(1&e&&(ni(jb,7),ni($b,7),ni(qb,7),ni(Yb,7)),2&e){let r;Ct(r=St())&&(i._rowOutlet=r.first),Ct(r=St())&&(i._headerRowOutlet=r.first),Ct(r=St())&&(i._footerRowOutlet=r.first),Ct(r=St())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,i){2&e&&Zt("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[gt([{provide:Jf,useExisting:n},{provide:$g,useClass:p3},{provide:rA,useClass:dz},{provide:cA,useValue:null}])],ngContentSelectors:Kfe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(zi(Xfe),Tn(0),Tn(1,1),ra(2,0)(3,1)(4,2)(5,3))},directives:[$b,jb,Yb,qb],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function Kb(n,t){return n.concat(Array.from(t))}let lpe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[k0]]}),n})();const cpe=[[["caption"]],[["colgroup"],["col"]]],upe=["caption","colgroup, col"];let pz=(()=>{class n extends Xb{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275cmp=ft({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,i){2&e&&Zt("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[gt([{provide:$g,useClass:p3},{provide:Xb,useExisting:n},{provide:Jf,useExisting:n},{provide:rA,useClass:dz},{provide:cA,useValue:null}]),he],ngContentSelectors:upe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(zi(cpe),Tn(0),Tn(1,1),ra(2,0)(3,1)(4,2)(5,3))},directives:[$b,jb,Yb,qb],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),uA=(()=>{class n extends ep{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","matCellDef",""]],features:[gt([{provide:ep,useExisting:n}]),he]}),n})(),dA=(()=>{class n extends tp{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","matHeaderCellDef",""]],features:[gt([{provide:tp,useExisting:n}]),he]}),n})(),hA=(()=>{class n extends Hl{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[gt([{provide:Hl,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),he]}),n})(),fA=(()=>{class n extends nA{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[he]}),n})(),pA=(()=>{class n extends iA{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[he]}),n})(),mz=(()=>{class n extends m_{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[gt([{provide:m_,useExisting:n}]),he]}),n})(),gz=(()=>{class n extends Gb{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275dir=oe({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[gt([{provide:Gb,useExisting:n}]),he]}),n})(),_z=(()=>{class n extends oA{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275cmp=ft({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[gt([{provide:oA,useExisting:n}]),he],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&ra(0,0)},directives:[Ul],encapsulation:2}),n})(),vz=(()=>{class n extends lA{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=He(n)))(i||n)}}(),n.\u0275cmp=ft({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[gt([{provide:lA,useExisting:n}]),he],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&ra(0,0)},directives:[Ul],encapsulation:2}),n})(),bpe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[lpe,pt],pt]}),n})(),wpe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[],Qf,ufe,sde,mH,G1,tse,Coe,mde,Sde,Nde,she,yhe,khe,cfe,Ohe,$he,Ub,bpe,ooe,mfe,vfe,ha,Mfe,Efe,Ofe,Vfe,qfe,k0]}),n})(),Ez=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[c1]]}),n})(),Wme=(()=>{class n{constructor(e,i){Of(i)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,i=[]){return{ngModule:n,providers:e.serverLoaded?[{provide:fa,useValue:Object.assign(Object.assign({},u1),e)},{provide:d1,useValue:i,multi:!0},{provide:zf,useValue:!0}]:[{provide:fa,useValue:Object.assign(Object.assign({},u1),e)},{provide:d1,useValue:i,multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)(ee(zf),ee(qs))},n.\u0275mod=at({type:n}),n.\u0275inj=st({imports:[[XV,TU,Ez],XV,TU,Ez]}),n})();function Tz(n,t,e,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(i,r)}function yr(n){return function(){var t=this,e=arguments;return new Promise(function(i,r){var s=n.apply(t,e);function o(l){Tz(s,i,r,o,a,"next",l)}function a(l){Tz(s,i,r,o,a,"throw",l)}o(void 0)})}}function mA(n,t){let e=0;if(void 0===t)for(let i of n)(i=+i)&&(e+=i);else{let i=-1;for(let r of n)(r=+t(r,++i,n))&&(e+=r)}return e}function jme(){}function gA(n){return null==n?jme:function(){return this.querySelector(n)}}function qme(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function Yme(){return[]}function Az(n){return null==n?Yme:function(){return this.querySelectorAll(n)}}function Dz(n){return function(){return this.matches(n)}}function Rz(n){return function(t){return t.matches(n)}}var Zme=Array.prototype.find;function Jme(){return this.firstElementChild}var tge=Array.prototype.filter;function nge(){return Array.from(this.children)}function Iz(n){return new Array(n.length)}function Zb(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}function age(n){return function(){return n}}function lge(n,t,e,i,r,s){for(var a,o=0,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],i[o]=a):e[o]=new Zb(n,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function cge(n,t,e,i,r,s,o){var a,l,f,c=new Map,u=t.length,d=s.length,h=new Array(u);for(a=0;a<u;++a)(l=t[a])&&(h[a]=f=o.call(l,l.__data__,a,t)+"",c.has(f)?r[a]=l:c.set(f,l));for(a=0;a<d;++a)f=o.call(n,s[a],a,s)+"",(l=c.get(f))?(i[a]=l,l.__data__=s[a],c.delete(f)):e[a]=new Zb(n,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(r[a]=l)}function uge(n){return n.__data__}function hge(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function vge(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}Zb.prototype={constructor:Zb,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var _A="http://www.w3.org/1999/xhtml";const kz={svg:"http://www.w3.org/2000/svg",xhtml:_A,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qb(n){var t=n+="",e=t.indexOf(":");return e>=0&&"xmlns"!==(t=n.slice(0,e))&&(n=n.slice(e+1)),kz.hasOwnProperty(t)?{space:kz[t],local:n}:n}function Sge(n){return function(){this.removeAttribute(n)}}function Ege(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Tge(n,t){return function(){this.setAttribute(n,t)}}function Age(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function Dge(n,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function Rge(n,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function Oz(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function kge(n){return function(){this.style.removeProperty(n)}}function Oge(n,t,e){return function(){this.style.setProperty(n,t,e)}}function Pge(n,t,e){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function np(n,t){return n.style.getPropertyValue(t)||Oz(n).getComputedStyle(n,null).getPropertyValue(t)}function Fge(n){return function(){delete this[n]}}function Nge(n,t){return function(){this[n]=t}}function Bge(n,t){return function(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function Pz(n){return n.trim().split(/^|\s+/)}function vA(n){return n.classList||new Lz(n)}function Lz(n){this._node=n,this._names=Pz(n.getAttribute("class")||"")}function Fz(n,t){for(var e=vA(n),i=-1,r=t.length;++i<r;)e.add(t[i])}function Nz(n,t){for(var e=vA(n),i=-1,r=t.length;++i<r;)e.remove(t[i])}function Hge(n){return function(){Fz(this,n)}}function Uge(n){return function(){Nz(this,n)}}function zge(n,t){return function(){(t.apply(this,arguments)?Fz:Nz)(this,n)}}function Wge(){this.textContent=""}function jge(n){return function(){this.textContent=n}}function $ge(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}function Yge(){this.innerHTML=""}function Xge(n){return function(){this.innerHTML=n}}function Kge(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}function Qge(){this.nextSibling&&this.parentNode.appendChild(this)}function e_e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function n_e(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===_A&&t.documentElement.namespaceURI===_A?t.createElement(n):t.createElementNS(e,n)}}function i_e(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Bz(n){var t=Qb(n);return(t.local?i_e:n_e)(t)}function s_e(){return null}function a_e(){var n=this.parentNode;n&&n.removeChild(this)}function c_e(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function u_e(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function p_e(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function m_e(n){return function(){var t=this.__on;if(t){for(var s,e=0,i=-1,r=t.length;e<r;++e)s=t[e],n.type&&s.type!==n.type||s.name!==n.name?t[++i]=s:this.removeEventListener(s.type,s.listener,s.options);++i?t.length=i:delete this.__on}}}function g_e(n,t,e){return function(){var r,i=this.__on,s=function f_e(n){return function(t){n.call(this,t,this.__data__)}}(t);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===n.type&&r.name===n.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=e),void(r.value=t);this.addEventListener(n.type,s,e),r={type:n.type,name:n.name,value:t,listener:s,options:e},i?i.push(r):this.__on=[r]}}function Vz(n,t,e){var i=Oz(n),r=i.CustomEvent;"function"==typeof r?r=new r(t,e):(r=i.document.createEvent("Event"),e?(r.initEvent(t,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(t,!1,!1)),n.dispatchEvent(r)}function v_e(n,t){return function(){return Vz(this,n,t)}}function y_e(n,t){return function(){return Vz(this,n,t.apply(this,arguments))}}Lz.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var Hz=[null];function Qs(n,t){this._groups=n,this._parents=t}function Uz(){return new Qs([[document.documentElement]],Hz)}Qs.prototype=Uz.prototype={constructor:Qs,select:function $me(n){"function"!=typeof n&&(n=gA(n));for(var t=this._groups,e=t.length,i=new Array(e),r=0;r<e;++r)for(var l,c,s=t[r],o=s.length,a=i[r]=new Array(o),u=0;u<o;++u)(l=s[u])&&(c=n.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Qs(i,this._parents)},selectAll:function Kme(n){n="function"==typeof n?function Xme(n){return function(){return qme(n.apply(this,arguments))}}(n):Az(n);for(var t=this._groups,e=t.length,i=[],r=[],s=0;s<e;++s)for(var l,o=t[s],a=o.length,c=0;c<a;++c)(l=o[c])&&(i.push(n.call(l,l.__data__,c,o)),r.push(l));return new Qs(i,r)},selectChild:function ege(n){return this.select(null==n?Jme:function Qme(n){return function(){return Zme.call(this.children,n)}}("function"==typeof n?n:Rz(n)))},selectChildren:function rge(n){return this.selectAll(null==n?nge:function ige(n){return function(){return tge.call(this.children,n)}}("function"==typeof n?n:Rz(n)))},filter:function sge(n){"function"!=typeof n&&(n=Dz(n));for(var t=this._groups,e=t.length,i=new Array(e),r=0;r<e;++r)for(var l,s=t[r],o=s.length,a=i[r]=[],c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new Qs(i,this._parents)},data:function dge(n,t){if(!arguments.length)return Array.from(this,uge);var e=t?cge:lge,i=this._parents,r=this._groups;"function"!=typeof n&&(n=age(n));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],d=r[c],h=d.length,f=hge(n.call(u,u&&u.__data__,c,i)),p=f.length,m=a[c]=new Array(p),g=o[c]=new Array(p),_=l[c]=new Array(h);e(u,d,m,g,_,f,t);for(var b,x,v=0,y=0;v<p;++v)if(b=m[v]){for(v>=y&&(y=v+1);!(x=g[y])&&++y<p;);b._next=x||null}}return(o=new Qs(o,i))._enter=a,o._exit=l,o},enter:function oge(){return new Qs(this._enter||this._groups.map(Iz),this._parents)},exit:function fge(){return new Qs(this._exit||this._groups.map(Iz),this._parents)},join:function pge(n,t,e){var i=this.enter(),r=this,s=this.exit();return"function"==typeof n?(i=n(i))&&(i=i.selection()):i=i.append(n+""),null!=t&&(r=t(r))&&(r=r.selection()),null==e?s.remove():e(s),i&&r?i.merge(r).order():r},merge:function mge(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,r=e.length,o=Math.min(r,i.length),a=new Array(r),l=0;l<o;++l)for(var f,c=e[l],u=i[l],d=c.length,h=a[l]=new Array(d),p=0;p<d;++p)(f=c[p]||u[p])&&(h[p]=f);for(;l<r;++l)a[l]=e[l];return new Qs(a,this._parents)},selection:function w_e(){return this},order:function gge(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var o,i=n[t],r=i.length-1,s=i[r];--r>=0;)(o=i[r])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function _ge(n){function t(d,h){return d&&h?n(d.__data__,h.__data__):!d-!h}n||(n=vge);for(var e=this._groups,i=e.length,r=new Array(i),s=0;s<i;++s){for(var c,o=e[s],a=o.length,l=r[s]=new Array(a),u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Qs(r,this._parents).order()},call:function yge(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function bge(){return Array.from(this)},node:function xge(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function wge(){let n=0;for(const t of this)++n;return n},empty:function Mge(){return!this.node()},each:function Cge(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var a,r=t[e],s=0,o=r.length;s<o;++s)(a=r[s])&&n.call(a,a.__data__,s,r);return this},attr:function Ige(n,t){var e=Qb(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((null==t?e.local?Ege:Sge:"function"==typeof t?e.local?Rge:Dge:e.local?Age:Tge)(e,t))},style:function Lge(n,t,e){return arguments.length>1?this.each((null==t?kge:"function"==typeof t?Pge:Oge)(n,t,null==e?"":e)):np(this.node(),n)},property:function Vge(n,t){return arguments.length>1?this.each((null==t?Fge:"function"==typeof t?Bge:Nge)(n,t)):this.node()[n]},classed:function Gge(n,t){var e=Pz(n+"");if(arguments.length<2){for(var i=vA(this.node()),r=-1,s=e.length;++r<s;)if(!i.contains(e[r]))return!1;return!0}return this.each(("function"==typeof t?zge:t?Hge:Uge)(e,t))},text:function qge(n){return arguments.length?this.each(null==n?Wge:("function"==typeof n?$ge:jge)(n)):this.node().textContent},html:function Zge(n){return arguments.length?this.each(null==n?Yge:("function"==typeof n?Kge:Xge)(n)):this.node().innerHTML},raise:function Jge(){return this.each(Qge)},lower:function t_e(){return this.each(e_e)},append:function r_e(n){var t="function"==typeof n?n:Bz(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function o_e(n,t){var e="function"==typeof n?n:Bz(n),i=null==t?s_e:"function"==typeof t?t:gA(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function l_e(){return this.each(a_e)},clone:function d_e(n){return this.select(n?u_e:c_e)},datum:function h_e(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function __e(n,t,e){var r,o,i=p_e(n+""),s=i.length;if(!(arguments.length<2)){for(a=t?g_e:m_e,r=0;r<s;++r)this.each(a(i[r],t,e));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function b_e(n,t){return this.each(("function"==typeof t?y_e:v_e)(n,t))},[Symbol.iterator]:function*x_e(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var o,i=n[t],r=0,s=i.length;r<s;++r)(o=i[r])&&(yield o)}};const __=Uz;var M_e={value:()=>{}};function zz(){for(var i,n=0,t=arguments.length,e={};n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Jb(e)}function Jb(n){this._=n}function C_e(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}function S_e(n,t){for(var r,e=0,i=n.length;e<i;++e)if((r=n[e]).name===t)return r.value}function Gz(n,t,e){for(var i=0,r=n.length;i<r;++i)if(n[i].name===t){n[i]=M_e,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=e&&n.push({name:t,value:e}),n}Jb.prototype=zz.prototype={constructor:Jb,on:function(n,t){var r,e=this._,i=C_e(n+"",e),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(n=i[s]).type)e[r]=Gz(e[r],n.name,t);else if(null==t)for(r in e)e[r]=Gz(e[r],n.name,null);return this}for(;++s<o;)if((r=(n=i[s]).type)&&(r=S_e(e[r],n.name)))return r},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new Jb(n)},call:function(n,t){if((r=arguments.length-2)>0)for(var r,s,e=new Array(r),i=0;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,r=(s=this._[n]).length;i<r;++i)s[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(t,e)}};const Wz=zz;var ex,b_,ip=0,v_=0,y_=0,tx=0,kd=0,nx=0,x_="object"==typeof performance&&performance.now?performance:Date,$z="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function yA(){return kd||($z(E_e),kd=x_.now()+nx)}function E_e(){kd=0}function ix(){this._call=this._time=this._next=null}function qz(n,t,e){var i=new ix;return i.restart(n,t,e),i}function Yz(){kd=(tx=x_.now())+nx,ip=v_=0;try{!function T_e(){yA(),++ip;for(var t,n=ex;n;)(t=kd-n._time)>=0&&n._call.call(void 0,t),n=n._next;--ip}()}finally{ip=0,function D_e(){for(var n,e,t=ex,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:ex=e);b_=n,bA(i)}(),kd=0}}function A_e(){var n=x_.now(),t=n-tx;t>1e3&&(nx-=t,tx=n)}function bA(n){ip||(v_&&(v_=clearTimeout(v_)),n-kd>24?(n<1/0&&(v_=setTimeout(Yz,n-x_.now()-nx)),y_&&(y_=clearInterval(y_))):(y_||(tx=x_.now(),y_=setInterval(A_e,1e3)),ip=1,$z(Yz)))}function Xz(n,t,e){var i=new ix;return i.restart(r=>{i.stop(),n(r+t)},t=null==t?0:+t,e),i}ix.prototype=qz.prototype={constructor:ix,restart:function(n,t,e){if("function"!=typeof n)throw new TypeError("callback is not a function");e=(null==e?yA():+e)+(null==t?0:+t),!this._next&&b_!==this&&(b_?b_._next=this:ex=this,b_=this),this._call=n,this._time=e,bA()},stop:function(){this._call&&(this._call=null,this._time=1/0,bA())}};var R_e=Wz("start","end","cancel","interrupt"),I_e=[];function ox(n,t,e,i,r,s){var o=n.__transition;if(o){if(e in o)return}else n.__transition={};!function k_e(n,t,e){var r,i=n.__transition;function o(c){var u,d,h,f;if(1!==e.state)return l();for(u in i)if((f=i[u]).name===e.name){if(3===f.state)return Xz(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",n,n.__data__,f.index,f.group),delete i[u]):+u<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",n,n.__data__,f.index,f.group),delete i[u])}if(Xz(function(){3===e.state&&(e.state=4,e.timer.restart(a,e.delay,e.time),a(c))}),e.state=2,e.on.call("start",n,n.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(h=e.tween.length),u=0,d=-1;u<h;++u)(f=e.tween[u].value.call(n,n.__data__,e.index,e.group))&&(r[++d]=f);r.length=d+1}}function a(c){for(var u=c<e.duration?e.ease.call(null,c/e.duration):(e.timer.restart(l),e.state=5,1),d=-1,h=r.length;++d<h;)r[d].call(n,u);5===e.state&&(e.on.call("end",n,n.__data__,e.index,e.group),l())}function l(){for(var c in e.state=6,e.timer.stop(),delete i[t],i)return;delete n.__transition}i[t]=e,e.timer=qz(function s(c){e.state=1,e.timer.restart(o,e.delay,e.time),e.delay<=c&&o(c-e.delay)},0,e.time)}(n,e,{name:t,index:i,group:r,on:R_e,tween:I_e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function MA(n,t){var e=pa(n,t);if(e.state>0)throw new Error("too late; already scheduled");return e}function Za(n,t){var e=pa(n,t);if(e.state>3)throw new Error("too late; already running");return e}function pa(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function ax(n,t){var i,r,o,e=n.__transition,s=!0;if(e){for(o in t=null==t?null:t+"",e)(i=e[o]).name===t?(r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[o]):s=!1;s&&delete n.__transition}}function Xc(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var lx,Jz=180/Math.PI,CA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eG(n,t,e,i,r,s){var o,a,l;return(o=Math.sqrt(n*n+t*t))&&(n/=o,t/=o),(l=n*e+t*i)&&(e-=n*l,i-=t*l),(a=Math.sqrt(e*e+i*i))&&(e/=a,i/=a,l/=a),n*i<t*e&&(n=-n,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,n)*Jz,skewX:Math.atan(l)*Jz,scaleX:o,scaleY:a}}function tG(n,t,e,i){function r(c){return c.length?c.pop()+" ":""}return function(c,u){var d=[],h=[];return c=n(c),u=n(u),function s(c,u,d,h,f,p){if(c!==d||u!==h){var m=f.push("translate(",null,t,null,e);p.push({i:m-4,x:Xc(c,d)},{i:m-2,x:Xc(u,h)})}else(d||h)&&f.push("translate("+d+t+h+e)}(c.translateX,c.translateY,u.translateX,u.translateY,d,h),function o(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(r(d)+"rotate(",null,i)-2,x:Xc(c,u)})):u&&d.push(r(d)+"rotate("+u+i)}(c.rotate,u.rotate,d,h),function a(c,u,d,h){c!==u?h.push({i:d.push(r(d)+"skewX(",null,i)-2,x:Xc(c,u)}):u&&d.push(r(d)+"skewX("+u+i)}(c.skewX,u.skewX,d,h),function l(c,u,d,h,f,p){if(c!==d||u!==h){var m=f.push(r(f)+"scale(",null,",",null,")");p.push({i:m-4,x:Xc(c,d)},{i:m-2,x:Xc(u,h)})}else(1!==d||1!==h)&&f.push(r(f)+"scale("+d+","+h+")")}(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(f){for(var g,p=-1,m=h.length;++p<m;)d[(g=h[p]).i]=g.x(f);return d.join("")}}}var F_e=tG(function P_e(n){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?CA:eG(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),N_e=tG(function L_e(n){return null!=n&&(lx||(lx=document.createElementNS("http://www.w3.org/2000/svg","g")),lx.setAttribute("transform",n),n=lx.transform.baseVal.consolidate())?eG((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):CA},", ",")",")");function B_e(n,t){var e,i;return function(){var r=Za(this,n),s=r.tween;if(s!==e)for(var o=0,a=(i=e=s).length;o<a;++o)if(i[o].name===t){(i=i.slice()).splice(o,1);break}r.tween=i}}function V_e(n,t,e){var i,r;if("function"!=typeof e)throw new Error;return function(){var s=Za(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:t,value:e},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function SA(n,t,e){var i=n._id;return n.each(function(){var r=Za(this,i);(r.value||(r.value={}))[t]=e.apply(this,arguments)}),function(r){return pa(r,i).value[t]}}function EA(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function nG(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function w_(){}var cx=1/.7,rp="\\s*([+-]?\\d+)\\s*",C_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",U_e=/^#([0-9a-f]{3,8})$/,z_e=new RegExp(`^rgb\\(${rp},${rp},${rp}\\)$`),G_e=new RegExp(`^rgb\\(${Qa},${Qa},${Qa}\\)$`),W_e=new RegExp(`^rgba\\(${rp},${rp},${rp},${C_}\\)$`),j_e=new RegExp(`^rgba\\(${Qa},${Qa},${Qa},${C_}\\)$`),$_e=new RegExp(`^hsl\\(${C_},${Qa},${Qa}\\)$`),q_e=new RegExp(`^hsla\\(${C_},${Qa},${Qa},${C_}\\)$`),iG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rG(){return this.rgb().formatHex()}function sG(){return this.rgb().formatRgb()}function S_(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=U_e.exec(n))?(e=t[1].length,t=parseInt(t[1],16),6===e?oG(t):3===e?new Ds(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===e?ux(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===e?ux(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=z_e.exec(n))?new Ds(t[1],t[2],t[3],1):(t=G_e.exec(n))?new Ds(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=W_e.exec(n))?ux(t[1],t[2],t[3],t[4]):(t=j_e.exec(n))?ux(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=$_e.exec(n))?cG(t[1],t[2]/100,t[3]/100,1):(t=q_e.exec(n))?cG(t[1],t[2]/100,t[3]/100,t[4]):iG.hasOwnProperty(n)?oG(iG[n]):"transparent"===n?new Ds(NaN,NaN,NaN,0):null}function oG(n){return new Ds(n>>16&255,n>>8&255,255&n,1)}function ux(n,t,e,i){return i<=0&&(n=t=e=NaN),new Ds(n,t,e,i)}function K_e(n){return n instanceof w_||(n=S_(n)),n?new Ds((n=n.rgb()).r,n.g,n.b,n.opacity):new Ds}function dx(n,t,e,i){return 1===arguments.length?K_e(n):new Ds(n,t,e,null==i?1:i)}function Ds(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}function aG(){return`#${Pd(this.r)}${Pd(this.g)}${Pd(this.b)}`}function lG(){const n=hx(this.opacity);return`${1===n?"rgb(":"rgba("}${Od(this.r)}, ${Od(this.g)}, ${Od(this.b)}${1===n?")":`, ${n})`}`}function hx(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Od(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Pd(n){return((n=Od(n))<16?"0":"")+n.toString(16)}function cG(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new ma(n,t,e,i)}function uG(n){if(n instanceof ma)return new ma(n.h,n.s,n.l,n.opacity);if(n instanceof w_||(n=S_(n)),!n)return new ma;if(n instanceof ma)return n;var t=(n=n.rgb()).r/255,e=n.g/255,i=n.b/255,r=Math.min(t,e,i),s=Math.max(t,e,i),o=NaN,a=s-r,l=(s+r)/2;return a?(o=t===s?(e-i)/a+6*(e<i):e===s?(i-t)/a+2:(t-e)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new ma(o,a,l,n.opacity)}function ma(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}function dG(n){return(n=(n||0)%360)<0?n+360:n}function fx(n){return Math.max(0,Math.min(1,n||0))}function TA(n,t,e){return 255*(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)}function hG(n,t,e,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*t+(4-6*s+3*o)*e+(1+3*n+3*s-3*o)*i+o*r)/6}EA(w_,S_,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:rG,formatHex:rG,formatHex8:function Y_e(){return this.rgb().formatHex8()},formatHsl:function X_e(){return uG(this).formatHsl()},formatRgb:sG,toString:sG}),EA(Ds,dx,nG(w_,{brighter(n){return n=null==n?cx:Math.pow(cx,n),new Ds(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Ds(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ds(Od(this.r),Od(this.g),Od(this.b),hx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aG,formatHex:aG,formatHex8:function Z_e(){return`#${Pd(this.r)}${Pd(this.g)}${Pd(this.b)}${Pd(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:lG,toString:lG})),EA(ma,function Q_e(n,t,e,i){return 1===arguments.length?uG(n):new ma(n,t,e,null==i?1:i)},nG(w_,{brighter(n){return n=null==n?cx:Math.pow(cx,n),new ma(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new ma(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,r=2*e-i;return new Ds(TA(n>=240?n-240:n+120,r,i),TA(n,r,i),TA(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new ma(dG(this.h),fx(this.s),fx(this.l),hx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=hx(this.opacity);return`${1===n?"hsl(":"hsla("}${dG(this.h)}, ${100*fx(this.s)}%, ${100*fx(this.l)}%${1===n?")":`, ${n})`}`}}));const fG=n=>()=>n;function mG(n,t){var e=t-n;return e?function pG(n,t){return function(e){return n+e*t}}(n,e):fG(isNaN(n)?t:n)}const gG=function n(t){var e=function nve(n){return 1==(n=+n)?mG:function(t,e){return e-t?function tve(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}(t,e,n):fG(isNaN(t)?e:t)}}(t);function i(r,s){var o=e((r=dx(r)).r,(s=dx(s)).r),a=e(r.g,s.g),l=e(r.b,s.b),c=mG(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=n,i}(1);function _G(n){return function(t){var o,a,e=t.length,i=new Array(e),r=new Array(e),s=new Array(e);for(o=0;o<e;++o)a=dx(t[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}_G(function J_e(n){var t=n.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),r=n[i],s=n[i+1];return hG((e-i/t)*t,i>0?n[i-1]:2*r-s,r,s,i<t-1?n[i+2]:2*s-r)}}),_G(function eve(n){var t=n.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*t);return hG((e-i/t)*t,n[(i+t-1)%t],n[i%t],n[(i+1)%t],n[(i+2)%t])}});var AA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,DA=new RegExp(AA.source,"g");function sve(n,t){var i,r,s,e=AA.lastIndex=DA.lastIndex=0,o=-1,a=[],l=[];for(n+="",t+="";(i=AA.exec(n))&&(r=DA.exec(t));)(s=r.index)>e&&(s=t.slice(e,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Xc(i,r)})),e=DA.lastIndex;return e<t.length&&(s=t.slice(e),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?function rve(n){return function(t){return n(t)+""}}(l[0].x):function ive(n){return function(){return n}}(t):(t=l.length,function(c){for(var d,u=0;u<t;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function vG(n,t){var e;return("number"==typeof t?Xc:t instanceof S_?gG:(e=S_(t))?(t=e,gG):sve)(n,t)}function ove(n){return function(){this.removeAttribute(n)}}function ave(n){return function(){this.removeAttributeNS(n.space,n.local)}}function lve(n,t,e){var i,s,r=e+"";return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=t(i=o,e)}}function cve(n,t,e){var i,s,r=e+"";return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=t(i=o,e)}}function uve(n,t,e){var i,r,s;return function(){var o,l,a=e(this);return null==a?void this.removeAttribute(n):(o=this.getAttribute(n))===(l=a+"")?null:o===i&&l===r?s:(r=l,s=t(i=o,a))}}function dve(n,t,e){var i,r,s;return function(){var o,l,a=e(this);return null==a?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local))===(l=a+"")?null:o===i&&l===r?s:(r=l,s=t(i=o,a))}}function fve(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function pve(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function mve(n,t){var e,i;function r(){var s=t.apply(this,arguments);return s!==i&&(e=(i=s)&&pve(n,s)),e}return r._value=t,r}function gve(n,t){var e,i;function r(){var s=t.apply(this,arguments);return s!==i&&(e=(i=s)&&fve(n,s)),e}return r._value=t,r}function vve(n,t){return function(){MA(this,n).delay=+t.apply(this,arguments)}}function yve(n,t){return t=+t,function(){MA(this,n).delay=t}}function xve(n,t){return function(){Za(this,n).duration=+t.apply(this,arguments)}}function wve(n,t){return t=+t,function(){Za(this,n).duration=t}}function Cve(n,t){if("function"!=typeof t)throw new Error;return function(){Za(this,n).ease=t}}function Ive(n,t,e){var i,r,s=function Rve(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(t)?MA:Za;return function(){var o=s(this,n),a=o.on;a!==i&&(r=(i=a).copy()).on(t,e),o.on=r}}var Nve=__.prototype.constructor;function yG(n){return function(){this.style.removeProperty(n)}}function Wve(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function jve(n,t,e){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&Wve(n,o,e)),i}return s._value=t,s}function Kve(n){return function(t){this.textContent=n.call(this,t)}}function Zve(n){var t,e;function i(){var r=n.apply(this,arguments);return r!==e&&(t=(e=r)&&Kve(r)),t}return i._value=n,i}var tye=0;function zl(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function bG(){return++tye}var Gl=__.prototype;zl.prototype=function nye(n){return __().transition(n)}.prototype={constructor:zl,select:function Lve(n){var t=this._name,e=this._id;"function"!=typeof n&&(n=gA(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var u,d,a=i[o],l=a.length,c=s[o]=new Array(l),h=0;h<l;++h)(u=a[h])&&(d=n.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,ox(c[h],t,e,h,c,pa(u,e)));return new zl(s,this._parents,t,e)},selectAll:function Fve(n){var t=this._name,e=this._id;"function"!=typeof n&&(n=Az(n));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var u,l=i[a],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var f,h=n.call(u,u.__data__,d,l),p=pa(u,e),m=0,g=h.length;m<g;++m)(f=h[m])&&ox(f,t,e,m,h,p);s.push(h),o.push(u)}return new zl(s,o,t,e)},selectChild:Gl.selectChild,selectChildren:Gl.selectChildren,filter:function Ave(n){"function"!=typeof n&&(n=Dz(n));for(var t=this._groups,e=t.length,i=new Array(e),r=0;r<e;++r)for(var l,s=t[r],o=s.length,a=i[r]=[],c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new zl(i,this._parents,this._name,this._id)},merge:function Dve(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,s=Math.min(i,e.length),o=new Array(i),a=0;a<s;++a)for(var h,l=t[a],c=e[a],u=l.length,d=o[a]=new Array(u),f=0;f<u;++f)(h=l[f]||c[f])&&(d[f]=h);for(;a<i;++a)o[a]=t[a];return new zl(o,this._parents,this._name,this._id)},selection:function Bve(){return new Nve(this._groups,this._parents)},transition:function Jve(){for(var n=this._name,t=this._id,e=bG(),i=this._groups,r=i.length,s=0;s<r;++s)for(var l,o=i[s],a=o.length,c=0;c<a;++c)if(l=o[c]){var u=pa(l,t);ox(l,n,e,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new zl(i,this._parents,n,e)},call:Gl.call,nodes:Gl.nodes,node:Gl.node,size:Gl.size,empty:Gl.empty,each:Gl.each,on:function kve(n,t){var e=this._id;return arguments.length<2?pa(this.node(),e).on.on(n):this.each(Ive(e,n,t))},attr:function hve(n,t){var e=Qb(n),i="transform"===e?N_e:vG;return this.attrTween(n,"function"==typeof t?(e.local?dve:uve)(e,i,SA(this,"attr."+n,t)):null==t?(e.local?ave:ove)(e):(e.local?cve:lve)(e,i,t))},attrTween:function _ve(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;var i=Qb(n);return this.tween(e,(i.local?mve:gve)(i,t))},style:function Gve(n,t,e){var i="transform"==(n+="")?F_e:vG;return null==t?this.styleTween(n,function Vve(n,t){var e,i,r;return function(){var s=np(this,n),o=(this.style.removeProperty(n),np(this,n));return s===o?null:s===e&&o===i?r:r=t(e=s,i=o)}}(n,i)).on("end.style."+n,yG(n)):"function"==typeof t?this.styleTween(n,function Uve(n,t,e){var i,r,s;return function(){var o=np(this,n),a=e(this),l=a+"";return null==a&&(this.style.removeProperty(n),l=a=np(this,n)),o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a))}}(n,i,SA(this,"style."+n,t))).each(function zve(n,t){var e,i,r,a,s="style."+t,o="end."+s;return function(){var l=Za(this,n),c=l.on,u=null==l.value[s]?a||(a=yG(t)):void 0;(c!==e||r!==u)&&(i=(e=c).copy()).on(o,r=u),l.on=i}}(this._id,n)):this.styleTween(n,function Hve(n,t,e){var i,s,r=e+"";return function(){var o=np(this,n);return o===r?null:o===i?s:s=t(i=o,e)}}(n,i,t),e).on("end.style."+n,null)},styleTween:function $ve(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,jve(n,t,null==e?"":e))},text:function Xve(n){return this.tween("text","function"==typeof n?function Yve(n){return function(){var t=n(this);this.textContent=null==t?"":t}}(SA(this,"text",n)):function qve(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function Qve(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==n)return this.tween(t,null);if("function"!=typeof n)throw new Error;return this.tween(t,Zve(n))},remove:function Pve(){return this.on("end.remove",function Ove(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}(this._id))},tween:function H_e(n,t){var e=this._id;if(n+="",arguments.length<2){for(var o,i=pa(this.node(),e).tween,r=0,s=i.length;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((null==t?B_e:V_e)(e,n,t))},delay:function bve(n){var t=this._id;return arguments.length?this.each(("function"==typeof n?vve:yve)(t,n)):pa(this.node(),t).delay},duration:function Mve(n){var t=this._id;return arguments.length?this.each(("function"==typeof n?xve:wve)(t,n)):pa(this.node(),t).duration},ease:function Sve(n){var t=this._id;return arguments.length?this.each(Cve(t,n)):pa(this.node(),t).ease},easeVarying:function Tve(n){if("function"!=typeof n)throw new Error;return this.each(function Eve(n,t){return function(){var e=t.apply(this,arguments);if("function"!=typeof e)throw new Error;Za(this,n).ease=e}}(this._id,n))},end:function eye(){var n,t,e=this,i=e._id,r=e.size();return new Promise(function(s,o){var a={value:o},l={value:function(){0==--r&&s()}};e.each(function(){var c=Za(this,i),u=c.on;u!==n&&((t=(n=u).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),0===r&&s()})},[Symbol.iterator]:Gl[Symbol.iterator]};var rye={time:null,delay:0,duration:250,ease:function iye(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function sye(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}__.prototype.interrupt=function O_e(n){return this.each(function(){ax(this,n)})},__.prototype.transition=function oye(n){var t,e;n instanceof zl?(t=n._id,n=n._name):(t=bG(),(e=rye).time=yA(),n=null==n?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var l,o=i[s],a=o.length,c=0;c<a;++c)(l=o[c])&&ox(l,n,t,c,o,e||sye(l,t));return new zl(i,this._parents,n,t)};Math;function E_(n){return{type:n}}function Fn(n){return"string"==typeof n?new Qs([[document.querySelector(n)]],[document.documentElement]):new Qs([[n]],Hz)}["w","e"].map(E_),["n","s"].map(E_),["n","w","e","s","nw","ne","sw","se"].map(E_);const PA={capture:!0,passive:!1};function LA(n){n.preventDefault(),n.stopImmediatePropagation()}function mye(n){var t=n.document.documentElement,e=Fn(n).on("dragstart.drag",LA,PA);"onselectstart"in t?e.on("selectstart.drag",LA,PA):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function gye(n,t){var e=n.document.documentElement,i=Fn(n).on("dragstart.drag",null);t&&(i.on("click.drag",LA,PA),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function EG(n){return((n=Math.exp(n))+1/n)/2}const bye=function n(t,e,i){function r(s,o){var g,_,a=s[0],l=s[1],c=s[2],h=o[2],f=o[0]-a,p=o[1]-l,m=f*f+p*p;if(m<1e-12)_=Math.log(h/c)/t,g=function(E){return[a+E*f,l+E*p,c*Math.exp(t*E*_)]};else{var v=Math.sqrt(m),y=(h*h-c*c+i*m)/(2*c*e*v),b=(h*h-c*c-i*m)/(2*h*e*v),x=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(b*b+1)-b);_=(w-x)/t,g=function(E){var R=E*_,F=EG(x),N=c/(e*v)*(F*function yye(n){return((n=Math.exp(2*n))-1)/(n+1)}(t*R+x)-function vye(n){return((n=Math.exp(n))-1/n)/2}(x));return[a+N*f,l+N*p,c*F/EG(t*R+x)]}}return g.duration=1e3*_*t/Math.SQRT2,g}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o;return n(o,a,a*a)},r}(Math.SQRT2,2,4);function Ld(n,t){if(n=function xye(n){let t;for(;t=n.sourceEvent;)n=t;return n}(n),void 0===t&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop]}}return[n.pageX,n.pageY]}const gx=n=>()=>n;function wye(n,{sourceEvent:t,target:e,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function jl(n,t,e){this.k=n,this.x=t,this.y=e}jl.prototype={constructor:jl,scale:function(n){return 1===n?this:new jl(this.k*n,this.x,this.y)},translate:function(n,t){return 0===n&0===t?this:new jl(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var FA=new jl(1,0,0);function NA(n){n.stopImmediatePropagation()}function T_(n){n.preventDefault(),n.stopImmediatePropagation()}function Cye(n){return!(n.ctrlKey&&"wheel"!==n.type||n.button)}function Sye(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n).hasAttribute("viewBox")?[[(n=n.viewBox.baseVal).x,n.y],[n.x+n.width,n.y+n.height]]:[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]:[[0,0],[n.clientWidth,n.clientHeight]]}function TG(){return this.__zoom||FA}function Eye(n){return-n.deltaY*(1===n.deltaMode?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function Tye(){return navigator.maxTouchPoints||"ontouchstart"in this}function Aye(n,t,e){var i=n.invertX(t[0][0])-e[0][0],r=n.invertX(t[1][0])-e[1][0],s=n.invertY(t[0][1])-e[0][1],o=n.invertY(t[1][1])-e[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}const jt=(n,t)=>Math.round(t*10**n)/10**n,$l=(n,t=3)=>jt(t,n.reduce((e,i)=>e+i,0)),si=(n,t,e=[0,0],i=3)=>{const r=n*Math.PI/180,s=t*Math.cos(r),o=t*Math.sin(r);return[jt(i,s+e[0]),jt(i,o+e[1])]},Kc=(n,t)=>180*Math.atan2(t[1]-n[1],t[0]-n[0])/Math.PI,AG=(n,t,e,i=0,r=0)=>{const s=f=>f*f,o=f=>Math.sqrt(f);var a=1+s(t),l=2*-i+t*(e-r)*2,c=s(i)+s(e-r)-s(n);s(l);const h=(o(s(l)-4*a*c),(-l-o(s(l)-4*a*c))/(2*a));return[h,t*h+e]},BA=(n,t)=>{const[[e,i],[r,s]]=n,[[o,a],[l,c]]=t;var u,h=(c-a)*(r-e)-(l-o)*(s-i);return 0==h?null:[e+(u=((l-o)*(i-a)-(c-a)*(e-o))/h)*(r-e),i+u*(s-i)]},ga=(n,t,e=2)=>Math.round(Math.hypot(t[0]-n[0],t[1]-n[1])*10**e)/10**e,H=(n,t)=>[n[0]+t[0],n[1]+t[1]],Vt=(n,t,e=!0)=>e?[n[0],t[1]]:[t[0],n[1]];String.prototype.toTitleCase=function(){return this.replace(/\b\w/g,n=>n.toLocaleUpperCase())};class ki extends Js{constructor(t){super(),this.coords=[],this.floor=te.ground,this.hole=!1,this.centralElectricity=[0,0],this.theoretic=!1,this.width=0,this.height=0,this.tooltip=()=>{console.log(this.selector);let e=`Room <b>${this.name}</b> \n    <br>${this.floor}-level\n    <br>${this.area()}m2`;return this.width&&(e+=`<br>width: ${this.width}m`),this.height&&(e+=`<br>height: ${this.height}m`),e},this.area=()=>0===this.coords.length||this.hole?0:Math.abs(Math.round(10*function pye(n){for(var i,t=-1,e=n.length,r=n[e-1],s=0;++t<e;)s+=(i=r)[1]*(r=n[t])[0]-i[0]*r[1];return s/2}(this.coords))/10),this.volume=()=>this.floor===te.top||this.hole||this.floor===te.ground||this.hole?this.area()*this.parent.cross.ceilingHeight:void 0,this.squaredRoom=(e,i)=>{this.width=jt(3,e),this.height=jt(3,i),this.coords=[this.northWestCorner,H(this.northWestCorner,[e,0]),H(this.northWestCorner,[e,i]),H(this.northWestCorner,[0,i])],this.center=H(this.northWestCorner,[e/2,i/2]),this.centralElectricity=this.center},Object.assign(this,t)}setup(){}draw(t){var e=this;return yr(function*(){void 0===e.svg&&(e.svg=Fn(`#${e.selector}`),e.name||(e.name=e.selector),e.classes=[`floor-${e.floor}`],e.hole&&(e.classes.push("room-hole"),e.svg.attr("filter","url(#inset-shadow)")),e.classes.push("bg-fill")),e.show(t)?(e.svg.attr("points",e.coords.join(" ")),e.setClass(e.svg)):e.svg.attr("points","")})()}}let A_={};var Oe=(()=>{return(n=Oe||(Oe={})).outer="outer",n.inner="inner",n.theoretic="theoretic",Oe;var n})(),Q=(()=>{return(n=Q||(Q={})).in="in",n.out="out",n.left="left",n.right="right",Q;var n})(),Ht=(()=>{return(n=Ht||(Ht={})).inside="inside",n.outside="outside",n.tower="tower",n.straight="straight",Ht;var n})();class We extends Js{constructor(t){super(),this.origin=[0,0],this.orientation="",this.ceiling=-1,this.gable=!1,this.tooltip=()=>`Wall <b>${this.orientation}</b> (of ${this.parent.name} room) \n    <br>Inside ${this.getLength(Q.in,2)}m2\n    <br>Outside ${this.outerWallLength=this.getLength(Q.out,2)}m2`,Object.assign(this,t)}createSelector(){this.selector=this.parent.selector;const t=Kc(this.sides[Q.in][0],this.sides[Q.in][1]);this.orientation=0===t?"North":45===t?"NortEast":-45===t||315===t?"NorthWest":90===t?"East":180===t?"South":270===t||-90===t?"West":`${t}`.split(".")[0],this.selector+=`-${this.orientation}Wall`,this.selector in A_||(A_[this.selector]=0),A_[this.selector]++,A_[this.selector]>1&&(this.selector+=`-${A_[this.selector]}`)}draw(t){var e=this;return yr(function*(){if(void 0===e.svg&&(e.svg=Fn(`#${e.selector}`),e.svgOrigin=e.svg.select(".wall-origin"),e.svgLeft=e.svg.select(".wall-left"),e.svgRight=e.svg.select(".wall-right"),e.svgFill=e.svg.select(".wall-fill"),e.type===Oe.outer&&(e.thickness=e.parent.parent.wallOuterThickness),e.type===Oe.inner&&(e.thickness=e.parent.parent.wallInnerThickness),e.svg.node()&&e.svg.node().classList.add(`type-${e.type}`)),!e.show(t))return e.svgFill.attr("points",""),e.svgLeft.attr("points",""),void e.svgRight.attr("points","");e.svgOrigin.attr("cx",e.origin[0]).attr("cy",e.origin[1]).attr("stroke-width",e.meterPerPixel*e.lineThickness),e.sides.in&&e.sides.out&&e.svgFill.attr("points",[...e.sides.in,...[...e.sides.out].reverse()].join(" "));for(let i of Object.keys(Q)){const r=i;if(!(r in e.sides))return;let s;s=r===Q.in?e.svgLeft:e.svgRight,s.attr("stroke-width",e.meterPerPixel*e.lineThickness*(e.type===Oe.theoretic?4:1)).attr("points",e.sides[r].join(" ")),s.node()&&s.node().classList.add(`side-${r}`)}e.innerWallLength=e.getLength(Q.in),e.outerWallLength=e.getLength(Q.out)})()}getLength(t,e=2){const i=this.sides[t];return i&&i[0]&&i[1]?jt(e,ga(...i)):0}getArea(t,e=2){const i=this.getLength(t);return 0===i?0:jt(e,i*this.ceiling)}getPosition(t,e,i=0){const r=this.sides[t],s=this.getLength(t)*e,o=Kc(r[0],r[1]);return si(o,s+i,r[0])}drawTheoretic(t,e,i){this.thickness=i,"n"===t&&this.drawByRoom(0,1,e,Ht.straight,Ht.straight),"e"===t&&this.drawByRoom(1,2,e,Ht.straight,Ht.straight),"s"===t&&this.drawByRoom(2,3,e,Ht.straight,Ht.straight),"w"===t&&this.drawByRoom(3,0,e,Ht.straight,Ht.straight)}drawByRoom(t,e,i,r,s){this.type===Oe.inner&&(this.thickness=i.wallInnerThickness,this.ceiling=i.cross.ceilingHeight),this.type===Oe.outer&&(this.thickness=i.wallOuterThickness,this.ceiling=i.cross.outerWallHeight),this.type===Oe.theoretic&&(this.ceiling=i.cross.ceilingHeight);const o=(d,h,f)=>h===Ht.inside&&0===d?f+45:h===Ht.inside&&1===d||h===Ht.outside&&0===d?f-45:h===Ht.outside&&1===d?f+45:h===Ht.tower&&0===d?f+67.5:h===Ht.tower&&1===d?f-67.5:h===Ht.straight?f:void 0,a=d=>{const h=Math.sqrt(this.thickness**2*2),f=i.tower;return d===Ht.inside||d===Ht.outside?h:d===Ht.tower?ga(f.innerCoords[0],f.outerCoords[7]):d===Ht.straight?this.thickness:void 0};let l=this.parent.coords[t],c=this.parent.coords[e];this.origin=l,this.innerWallLength=ga(l,c);let u=Kc(l,c)-90;this.sides={[Q.in]:[l,c]},this.type!==Oe.theoretic&&(this.sides[Q.out]=[si(o(0,r,u),a(r),l),si(o(1,s,u),a(s),c)])}}class ql extends Js{constructor(t){super(),this.points=[],Object.assign(this,t)}draw(t){var e=this;return yr(function*(){void 0===e.svg&&(e.svg=Fn(`#${e.selector}`)),e.show(t)?(e.svg.attr("points",e.points.join(" ")).attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("transform",e.transform),e.setClass(e.svg)):e.svg.attr("points","")})()}}class Rye extends Js{constructor(t){super(),this.last=!1,this.visible=!0,this.fontSize=14,Object.assign(this,t)}draw(t){var e=this;return yr(function*(){void 0===e.svg&&(e.svg=Fn(`#${e.selector}`),e.svgRun=e.svg.select(".step-run"),e.svgRise=e.svg.select(".step-rise"),e.svgText=e.svg.select(".step-text"),e.last&&e.classes.push("last")),e.svg.style("display",e.show?"":"none"),e.svg.attr("transform",`translate(${e.index*e.parent.run}, ${-e.index*e.parent.rise})`),e.setClass(e.svg),e.svgRun.attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("points",[[0,0],[0,e.parent.runThickness],[e.last?e.parent.nose:e.parent.run+e.parent.riseThickness+e.parent.nose,e.parent.runThickness],[e.last?e.parent.nose:e.parent.run+e.parent.riseThickness+e.parent.nose,0]].join(" ")),e.svgRise.attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("points",[[e.parent.nose,e.parent.runThickness],[e.parent.nose,e.parent.rise],[e.parent.nose+e.parent.riseThickness,e.parent.rise],[e.parent.nose+e.parent.riseThickness,e.parent.runThickness]].join(" ")),e.svgText.attr("font-size",e.fontSize*e.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*e.meterPerPixel).attr("transform",`\n        translate(${e.parent.run/2} ${16*-e.meterPerPixel}) \n        `).text(e.index)})()}}class _x extends Js{constructor(t){super(),this.d="",Object.assign(this,t)}draw(t){var e=this;return yr(function*(){if(void 0===e.svg){if(!e.show(t))return;e.svg=Fn(`#${e.selector}`)}e.svg.attr("d",e.d).attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("transform",e.transform),e.setClass(e.svg)})()}setClass(t){!t.node()||0===this.classes.length||t.node().classList.add(this.classes)}}class $i extends Js{constructor(t){super(),this.textRotate=0,this.fontSize=14,this.a=[0,0],this.b=[4,4],this.offsetPixels=0,this.offsetMeters=0,this.direction=90,this.lineThickness=.6,this.decimals=1,this.classes=["measure"],this.visible=!1,Object.assign(this,t)}between(t,e){return[t[0]+(e[0]-t[0])/2,t[1]+(e[1]-t[1])/2]}draw(t){var e=this;return yr(function*(){if(void 0===e.svg){if(!e.show(t))return;e.svg=Fn(`#${e.selector}`),e.setClass(e.svg),e.svgLine=e.svg.append("polyline"),e.svgArrow1=e.svg.append("text"),e.svgArrow2=e.svg.append("text"),e.svgText=e.svg.append("text")}if(!e.show(t))return e.svgLine.attr("points",""),e.svgText.text(""),e.svgArrow1.text(""),void e.svgArrow2.text("");let i=[...e.a],r=[...e.b],s=[0,0];90===e.direction&&(i=[i[0],Math.max(i[1],r[1])],r=[r[0],Math.max(i[1],r[1])]),-90===e.direction&&(i=[i[0],Math.min(i[1],r[1])],r=[r[0],Math.min(i[1],r[1])]),0===e.direction&&(i=[Math.max(i[0],r[0]),i[1]],r=[Math.max(i[0],r[0]),r[1]]),180===e.direction&&(i=[Math.min(i[0],r[0]),i[1]],r=[Math.min(i[0],r[0]),r[1]]);const o=e.offsetPixels*e.meterPerPixel,a=si(e.direction,o+e.offsetMeters,i),l=si(e.direction,o+e.offsetMeters,r),u=e.between(a,l);var d=l[0]-a[0],h=l[1]-a[1],f=jt(e.decimals,Math.sqrt(d*d+h*h));e.svg.style("visibility",0===f?"hidden":""),e.svgLine.attr("points",[e.a,i,a,l,r,e.b].join(" ")).attr("stroke-width",e.meterPerPixel*e.lineThickness),e.svgText.attr("font-size",e.meterPerPixel*e.fontSize).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*e.meterPerPixel).attr("transform",`\n        translate(${u[0]+s[0]} ${u[1]+s[1]}) \n        rotate(${e.textRotate})\n        `).text(f);let p=90;[90,0].includes(e.direction)&&(p=-90),e.svgArrow1.attr("font-size",16*e.meterPerPixel).attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n        translate(${a[0]} ${a[1]}) \n        rotate(${e.direction+p})\n        `).text("<"),e.svgArrow2.attr("font-size",16*e.meterPerPixel).attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n          translate(${l[0]} ${l[1]}) \n          rotate(${e.direction+p+180})\n          `).text("<")})()}}class DG extends Js{constructor(t){super(),this.name="",this.cx=0,this.cy=0,this.r=1,this.lineThickness=.2,Object.assign(this,t)}draw(t){var e=this;return yr(function*(){if(void 0===e.svg){if(!e.show(t))return;e.svg=Fn(`#${e.selector}`)}e.svg.attr("cx",e.cx).attr("cy",e.cy).attr("r",e.r).attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("transform",e.transform),e.setClass(e.svg)})()}}class Iye extends Js{constructor(t){super(),this.floor=te.all,this.name="step",this.last=!1,this.visible=!0,this.fontSize=10,this.walkLineXY=[0,0],this.nextWalkLineXY=[0,0],this.stringerXY=[0,0],this.nextStingerXY=[0,0],this.lineThickness=.3,Object.assign(this,t)}draw(t){var e=this;return yr(function*(){void 0===e.svg&&(e.svg=Fn(`#${e.selector}`),e.svgText=e.svg.select(".step-plan-text"),e.svgRise=e.svg.select(".step-plan-rise"),e.svgStep=e.svg.select(".step-plan-lines"),e.last&&e.classes.push("last"));const i=Kc(e.walkLineXY,e.nextWalkLineXY),r=si(i-45,.8*e.parent.run,e.walkLineXY),s=Kc(e.stringerXY,e.walkLineXY),o=Kc(e.nextStingerXY,e.nextWalkLineXY),a=si(s,1,e.walkLineXY),l=si(o,1,e.nextWalkLineXY);e.svgStep.attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("points",[e.walkLineXY,e.stringerXY,e.nextStingerXY,e.nextWalkLineXY,l,a].join(" ")),e.svgRise.attr("stroke-width",e.meterPerPixel*e.lineThickness*1).attr("points",[si(s+90,e.parent.nose,a),si(s+90,e.parent.nose,e.stringerXY)].join(" ")),e.svgText.attr("font-size",e.fontSize*e.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]}, ${r[1]})`).text(e.index),e.setClass(e.svg)})()}}class kye{constructor(){this.outerBase=-1,this.wallOuterThickness=-1,this.ceilingHeight=3.3,this.floorThickness=.5,this.extensionToNorth=-1,this.groundFloorTop=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.totalRise=-1,this.totalRun=6,this.run=.3,this.runThickness=.02,this.rise=.2,this.riseThickness=.02,this.nose=.02,this.steps=20,this.walkWidth=.8,this.stairOrigin=[0,0],this.stepsRight=12,this.leftFlightSteps=5,this.midFlightSteps=4,this.totalWidth=2.7,this.totalHeight=-1,this.lesserHeight=-1,this.intersections={},this.walkLineOffset=.3,this.parts=[],this.create()}create(){this.createBuilding(),this.createStep(),this.createMeasures(),this.createPlan()}calculate(t){this.house=t,this.outerBase=this.outerBase,this.wallOuterThickness=this.wallOuterThickness,this.extensionToNorth=this.extensionToNorth,this.ceilingHeight=this.house.cross.ceilingHeight,this.floorThickness=this.house.cross.floorThickness,this.groundFloorTop=0,this.topFloorTop=-this.house.cross.groundFloorTop,this.totalRise=this.topFloorTop-this.groundFloorTop,this.stairOrigin=[this.house.stramien.in.we.b,this.house.extensionToNorth-5],this.angle=jt(this.house.stramien.in.ns.b,Math.atan(this.totalRise/this.totalRun)*(180/Math.PI)),this.run=jt(3,this.totalRun/this.steps),this.rise=jt(3,this.totalRise/this.steps),this.step=jt(3,2*this.run+this.run),this.maxSteps=Math.ceil(this.totalRise/.182),this.minSteps=Math.ceil(this.totalRise/.22);const[e,i]=[this.alongWalkLine(1)[1]-this.stairOrigin[1],this.alongWalkLine(this.steps)[1]-this.stairOrigin[1]];this.totalHeight=Math.max(e,i),this.lesserHeight=Math.min(e,i),this.calculateCorrectionArray()}createBuilding(){this.parts.push(new _i({selector:"floor-groundfloor",floor:te.all,parent:this,onUpdate:function(t){this.coords=[[-t.run,t.groundFloorTop],[10,t.groundFloorTop],[10,t.groundFloorTop+t.floorThickness],[-t.run,t.groundFloorTop+t.floorThickness]]}})),this.parts.push(new _i({selector:"floor-topfloor-shadow",floor:te.all,parent:this,onUpdate:function(t){this.coords=[[t.totalRun,-t.topFloorTop],[-t.run,-t.topFloorTop],[-t.run,-(t.topFloorTop-t.floorThickness)],[t.totalRun,-(t.topFloorTop-t.floorThickness)]]}})),this.parts.push(new _i({selector:"floor-topfloor",floor:te.all,parent:this,onUpdate:function(t){this.coords=[[t.totalRun+t.nose,-t.topFloorTop],[10,-t.topFloorTop],[10,-(t.topFloorTop-t.floorThickness)],[t.totalRun+t.nose,-(t.topFloorTop-t.floorThickness)]]}})),this.parts.push(new _x({selector:"nose-line",floor:te.all,parent:this,onUpdate:function(t){this.d=`M0 0 L${t.totalRun} ${-t.totalRise} `}})),this.parts.push(new _x({selector:"back-line",floor:te.all,parent:this,onUpdate:function(t){const e=1*t.run;this.d=`M${e} 0 L${si(-t.angle,-t.run/Math.tan(t.angle*Math.PI/180),[t.totalRun+e,-t.totalRise])}`}}))}createStep(){for(let t=1;t<25;t++)this.parts.push(new Rye({selector:`step-${t}`,floor:te.all,parent:this,index:t,onUpdate:function(e){this.visible=t<e.steps}}))}createMeasures(){this.parts.push(new $i({selector:"run-size",floor:te.all,direction:-90,decimals:3,onUpdate:function(t){this.offsetPixels=0,this.offsetMeters=1*t.rise,this.distance=0,this.a=[7*t.run,7*-t.rise],this.b=[8*t.run,8*-t.rise]}})),this.parts.push(new $i({selector:"rise-size",floor:te.all,direction:180,offsetPixels:.5,decimals:3,onUpdate:function(t){this.offsetPixels=0,this.offsetMeters=1*t.run,this.distance=0,this.a=[7*t.run,7*-t.rise],this.b=[8*t.run,8*-t.rise]}})),this.parts.push(new $i({selector:"total-rise-size",floor:te.all,direction:0,offsetPixels:0,onUpdate:function(t){const e=t.totalRun+2*t.run;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e,0],this.b=[e,-t.totalRise]}})),this.parts.push(new $i({selector:"total-run-size",floor:te.all,direction:90,onUpdate:function(t){this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[0,0],this.b=[t.totalRun,0]}})),this.parts.push(new $i({selector:"plateau-width",floor:te.all,direction:-90,onUpdate:function(t){const e=t.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t.stairOrigin[0]+0,e],this.b=[t.stairOrigin[0]+t.walkWidth,e]}})),this.parts.push(new $i({selector:"mid-width",floor:te.all,direction:-90,onUpdate:function(t){const e=t.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t.stairOrigin[0]+t.walkWidth,e],this.b=[t.stairOrigin[0]+t.totalWidth-t.walkWidth,e]}})),this.parts.push(new $i({selector:"total-width",floor:te.all,direction:-90,onUpdate:function(t){const e=t.stairOrigin[1]-.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[t.stairOrigin[0],e],this.b=[t.stairOrigin[0]+t.totalWidth,e]}})),this.parts.push(new $i({selector:"total-height",floor:te.all,direction:0,onUpdate:function(t){const e=t.stairOrigin[0]+t.totalWidth+.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.b=[e,t.stairOrigin[1]],this.a=[e,t.stairOrigin[1]+t.totalHeight]}})),this.parts.push(new $i({selector:"lesser-height",floor:te.all,direction:0,onUpdate:function(t){const e=t.stairOrigin[0]+t.totalWidth+.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.b=[e,t.stairOrigin[1]],this.a=[e,t.stairOrigin[1]+t.lesserHeight]}}))}getAngle(t,e,i=[0,0]){const r=e*Math.cos(t),s=e*Math.sin(t);return[r+i[0],s+i[1]]}createPlan(){for(let t=1;t<this.steps+1;t++)this.parts.push(new Iye({selector:`step-plan-${t}`,floor:te.all,parent:this,index:t,onUpdate:function(e){this.walkLineXY=e.alongWalkLine(t),this.nextWalkLineXY=e.alongWalkLine(t+1),this.stringerXY=e.alongStinger(t),this.nextStingerXY=e.alongStinger(t+1)}})),this.parts.push(new DG({selector:"walk-line-"+t,floor:te.all,parent:this,onUpdate:function(e){this.r=.1*this.lineThickness,[this.cx,this.cy]=e.alongWalkLine(t)}})),this.parts.push(new DG({selector:"step-stinger-"+t,floor:te.all,parent:this,onUpdate:function(e){this.r=.1*this.lineThickness,[this.cx,this.cy]=e.alongStinger(t)}}));this.parts.push(new _i({selector:"clip-roof-ref",onUpdate:function(t){const[e,i]=t.stairOrigin,r=e+t.walkWidth,s=e+t.totalWidth-t.walkWidth,o=Math.max(t.alongWalkLine(1)[1],i+t.walkWidth),a=Math.max(t.alongWalkLine(t.steps)[1],i+t.walkWidth);this.coords=[[e,i],[e+t.totalWidth,i],[e+t.totalWidth,a],[s,a],[s,i+t.walkWidth],[r,i+t.walkWidth],[r,o],[e,o]]}})),this.parts.push(new _i({selector:"outline",floor:te.all,parent:this,onUpdate:function(t){const[e,i]=t.stairOrigin,r=e+t.walkWidth,s=e+t.totalWidth-t.walkWidth,o=Math.max(t.alongWalkLine(1)[1],i+t.walkWidth),a=Math.max(t.alongWalkLine(t.steps)[1],i+t.walkWidth);this.coords=[[e,i],[e+t.totalWidth,i],[e+t.totalWidth,a],[s,a],[s,i+t.walkWidth],[r,i+t.walkWidth],[r,o],[e,o]]}})),this.parts.push(new ql({selector:"middleLine",floor:te.all,parent:this,lineThickness:2,onUpdate:function(t){const e=t.stairOrigin[0]+t.totalWidth/2;this.points=[[e,t.stairOrigin[1]],[e,t.stairOrigin[1]+t.walkWidth]]}})),this.parts.push(new ql({selector:"left-corner-line",floor:te.all,parent:this,lineThickness:2,onUpdate:function(t){this.points=[[t.stairOrigin[0],t.stairOrigin[1]],[t.stairOrigin[0]+t.walkWidth,t.stairOrigin[1]+t.walkWidth]]}})),this.parts.push(new ql({selector:"right-corner-line",floor:te.all,parent:this,lineThickness:2,onUpdate:function(t){const[e,i]=[t.stairOrigin[0]+t.totalWidth,t.stairOrigin[1]];this.points=[[e,i],[e-t.walkWidth,i+t.walkWidth]]}})),this.parts.push(new _x({selector:"walk-line",floor:te.all,parent:this,onUpdate:function(t){const e=t.walkWidth-t.walkLineOffset,i=t.alongWalkLine(t.steps),r=t.alongWalkLine(1);this.d=`\n        M${r[0]} ${r[1]} \n        L${r[0]} ${t.stairOrigin[1]+t.walkWidth}\n        a${t.walkLineOffset},${t.walkLineOffset} 0 0 1 ${t.walkLineOffset},${-t.walkLineOffset}\n        L${t.stairOrigin[0]+t.walkWidth} ${t.stairOrigin[1]+e}\n        L${t.stairOrigin[0]+t.totalWidth-t.walkWidth} ${t.stairOrigin[1]+e}\n        a${t.walkLineOffset},${t.walkLineOffset} 0 0 1 ${t.walkLineOffset},${t.walkLineOffset}\n        L${i[0]} ${i[1]}\n        `}}))}calculateCorrectionArray(){const t=this.walkLineOffset*Math.PI/2,e=(this.totalWidth-2*this.walkWidth)/2,i=(this.stepsRight+1)*this.run,s=this.totalRun-i-t-e,o=i-t-e;this.intersections={};const c=this.getEGMethod(s+t/2,this.alongWalkLine(1)[1]-(this.stairOrigin[1]+this.walkWidth),0,0*this.run,!1),u=this.getEGMethod(e+t/2,this.totalWidth/2-this.walkWidth,c+0,0,!0),d=this.getEGMethod(e+t/2,this.totalWidth/2-this.walkWidth,c+0+u,this.run,!1);this.getEGMethod(o+t/2,this.alongWalkLine(this.steps)[1]-(this.stairOrigin[1]+this.walkWidth),c+0+u+d,0*this.run,!0)}getEGMethod(t,e,i,r,s=!1){let o,a,l,c,u;const d=t-r,h=Math.ceil(d/this.run),f=e-r;s?(o=[0,0],a=[0,d],l=[-f,0],c=AG(f,-a[1]/f,a[1]),c=[-c[0],c[1]]):(o=[0,0],a=[0,d],l=[f,0],c=AG(f,-a[1]/f,a[1]));const p=[];for(let m=0;m<h+1;m++)u=s?[0,Math.min(this.run*(h-m),d)]:[0,Math.min(this.run*m,d)],p.push(BA([o,c],[u,l]));for(let m=0;m<h+1;m++)if(0!==m)try{let g;g=s?p[m+1]:p[m-1],this.intersections[i+m]=this.run-ga(g,p[m])}catch(g){}return h}alongStinger(t){let e=(t-1)*this.run;const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,l=this.alongWalkLine(t),c=this.alongWalkLine(t+1),d=(Kc(l,c),isNaN(this.intersections[t])?0:this.intersections[t]);return e<o-r-i/2?[this.stairOrigin[0]+this.walkWidth,l[1]+d]:e<o?[l[0]+d,this.stairOrigin[1]+this.walkWidth]:e-o<r+i/2?[l[0]-d,this.stairOrigin[1]+this.walkWidth]:[this.stairOrigin[0]+this.totalWidth-this.walkWidth,l[1]+d]}alongWalkLine(t){let e=(t-1)*this.run;const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,a=o-i-r;if(e<a){const[l,c]=[this.stairOrigin[0]+this.walkWidth-this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[l,c+a-e]}if(e<a+i)return e-=a,si(180+e/i*90,this.walkLineOffset,[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth]);if(e<o){e-=a+i;const[l,c]=[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[l+e,c]}if(e<o+r){e-=o;const[l,c]=[this.stairOrigin[0]+this.totalWidth/2,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[l+e,c]}if(e<o+r+i)return e-=o+r,si(e/i*90-90,this.walkLineOffset,[this.stairOrigin[0]+this.totalWidth-this.walkWidth,this.stairOrigin[1]+this.walkWidth]);{e-=o+r+i;const[l,c]=[this.stairOrigin[0]+this.totalWidth-this.walkWidth+this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[l,c+e]}}}class Oye extends Js{constructor(t){super(),this.origin=[0,0],this.scale=[1,1],this.rotate=0,Object.assign(this,t)}draw(t){var e=this;return yr(function*(){if(void 0===e.svg){if(!e.show(t))return;e.svg=Fn(`#${e.selector}`),e.svg1=e.svg.select(".house-wind-rose-1"),e.svg2=e.svg.select(".house-wind-rose-2"),e.svgText=e.svg.select(".house-wind-rose-text")}e.svg.style("transform",` \n      translate(${e.origin[0]}px, ${e.origin[1]}px) \n      rotate(${e.rotate}deg) \n      scale(${e.scale[0]}, ${e.scale[1]})\n      `),e.svg1.attr("points",[[0,0],[10,30],[0,20]].map(([r,s])=>[r*e.meterPerPixel,s*e.meterPerPixel]).join(" ")).attr("stroke-width",1),e.svg2.attr("points",[[0,0],[-10,30],[0,20]].map(([r,s])=>[r*e.meterPerPixel,s*e.meterPerPixel]).join(" ")).attr("stroke-width",1),e.svgText.attr("font-size",12).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6).attr("transform",`\n          translate(0 ${-8*e.meterPerPixel}) \n          rotate(${e.rotate})\n          `).text("North")})()}}class VA extends class Pye{}{constructor(t){super(),this.outerBase=void 0,this.extensionToNorth=void 0,this.extensionToSouth=void 0,this.extensionToWest=void 0,this.extensionToEast=void 0,this.houseWidth=void 0,this.houseLength=void 0,this.gridSizeY=void 0,this.gridSizeX=void 0,this.balconyWidth=void 0,this.balconyEdge=.3,this.serverRoom=[void 0,void 0],this.cross=new Lye,this.stair=new kye,this.stats={wall:{},floor:{}},this.tower={show:void 0,innerCoords:void 0,outerCoords:void 0,outerWallOffset:void 0,width:void 0,houseIncrement:void 0,innerIncrement:void 0,outerIncrement:void 0,innerWallLength:void 0,outerWallLength:void 0,intersectionEast:void 0,intersectionWest:void 0,wallOuterThickness:void 0,footprintVisible:!1},Object.assign(this,t),window.house=this,this.calculateHouse(),this.linkParts(),this.calculateStats(),this.createStramien(),this.createGrid(),this.createMeasures(),this.createExtra()}createExtra(){const t=new ql({selector:"view-lines",floor:te.ground,lineThickness:3,onUpdate:function(i){const r=i.stramien.in,s=3*i.studDistance,o=r.we.b+1,a=r.ns.b+(r.ns.c-r.ns.b)/2;this.points=[[o,i.stair.stairOrigin[1]],[o,r.ns.d+s],[o,a],[r.we.a-s,a],[r.we.d+s,a]]}});this.parts.push(t);const e=new _i({selector:"tower-walls",floor:te.all,onUpdate:function(i){this.visible=i.tower.footprintVisible,this.coords=[...i.tower.innerCoords,i.tower.innerCoords[0],...[...i.tower.outerCoords].reverse(),i.tower.outerCoords[7]]}});this.parts.push(e)}createMeasures(){this.parts.push(new $i({selector:"house-total-width",floor:te.all,direction:90,textRotate:0,onUpdate:function(t){const e=t.houseLength+2*t.studDistance;this.offsetPixels=16,this.a=[t.stramien.out.we.a,e],this.b=[t.stramien.out.we.d,e]}}));for(let t=0;t<3;t++){const e=["a","b","c","d"];this.parts.push(new $i({selector:"house-width-"+(t+1),floor:te.all,direction:90,textRotate:0,onUpdate:function(r){const s=r.houseLength+2*r.studDistance;this.offsetPixels=0,this.a=[r.stramien.out.we[e[t+0]],s],this.b=[r.stramien.out.we[e[t+1]],s]}}))}this.parts.push(new $i({selector:"house-height-1",floor:te.all,direction:0,textRotate:0,onUpdate:function(t){const e=t.houseWidth+1*t.studDistance;this.offsetPixels=8,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.out.ns.a],this.a=[e,t.stramien.out.ns.b]}})),this.parts.push(new $i({selector:"house-height-inner",floor:te.all,direction:0,textRotate:0,onUpdate:function(t){const e=t.houseWidth+6*t.studDistance;this.offsetPixels=8,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.in.ns.b],this.a=[e,t.stramien.in.ns.c]}})),this.parts.push(new $i({selector:"house-height-2",floor:te.all,direction:0,textRotate:0,onUpdate:function(t){const e=t.houseWidth+1*t.studDistance;this.offsetPixels=8,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.out.ns.b],this.a=[e,t.stramien.out.ns.c]}})),this.parts.push(new $i({selector:"house-height-3",floor:te.all,direction:0,textRotate:0,onUpdate:function(t){const e=t.houseWidth+1*t.studDistance;this.offsetPixels=8,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.out.ns.c],this.a=[e,t.stramien.out.ns.d]}})),this.parts.push(new $i({selector:"house-total-height",floor:te.all,direction:0,textRotate:0,onUpdate:function(t){const e=t.houseWidth+1*t.studDistance;this.offsetPixels=32,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.out.ns.a],this.a=[e,t.stramien.out.ns.d]}}))}createStramien(){const t=3*this.studDistance;for(let e of["in","out"])for(let i of["we","ns"])for(let r of["a","b","c","d"]){const s=`house-stramien-${e}-${i}-${r}`;this.parts.push(new ql("ns"===i?{floor:te.all,selector:s,lineThickness:1.5,onUpdate:function(o){this.points=[[-t,o.stramien[e][i][r]],[o.houseWidth+t,o.stramien[e][i][r]]]}}:{floor:te.all,selector:s,lineThickness:1.5,onUpdate:function(o){this.points=[[o.stramien[e][i][r],-t],[o.stramien[e][i][r],o.houseLength+t]]}}))}}createGrid(){const t=3*this.studDistance;this.gridSizeY=Math.round(this.houseWidth/this.studDistance+2+1);for(let i=0;i<55;i++){const o=new ql({selector:`grid-index-${i}.grid-vertical`,lineThickness:(i-1)%this.studAmount==0?.8:.6,index:i,floor:te.all,onUpdate:function(a){const l=(i-1)*a.studDistance;this.points=this.index<a.gridSizeY?[[l,-t],[l,a.houseLength+t]]:[],this.classes=[(i-1)%a.studAmount==0?"grid-main":i%3?"grid-sub":"grid-subsub"]}});o.createSelector(),this.parts.push(o)}this.gridSizeX=Math.round(this.houseLength/this.studDistance+2+1);for(let i=0;i<55;i++){const r=i-1==0||i-1===this.studAmountNorth||i-1===this.studAmountNorth+this.studAmount||i-1===this.studAmountSouth+this.studAmount+this.studAmountSouth;this.parts.push(new ql({lineThickness:r?.8:.6,selector:`grid-index-${i}.grid-horizontal`,index:i,floor:te.all,onUpdate:function(o){const a=(i-1)*o.studDistance;this.points=this.index<o.gridSizeX?[[-t,a],[o.houseWidth+t,a]]:[],this.classes=[r?"grid-main":i%3?"grid-sub":"grid-subsub"]}}))}this.parts[".house-wind-rose"]=new Oye({rotate:0,floor:te.all,parent:this,onUpdate:function(i){this.origin=[2,0]}})}linkParts(){const t=(e,i)=>{e.parent=i,e.onUpdate(this),e.createSelector(),e.parts&&e.parts.forEach(r=>t(r,e)),this.partsFlatten.push(e)};this.partsFlatten=[],this.parts.forEach(e=>t(e,this))}calculateTower(){this.tower.wallOuterThickness=this.wallOuterThickness,this.tower.outerWallOffset=jt(4,this.tower.wallOuterThickness*Math.tan(22.5*Math.PI/180)),this.tower.innerWallLength=this.towerWidth,this.tower.outerWallLength=2*this.tower.outerWallOffset+this.tower.innerWallLength,this.tower.show=this.showTower,this.tower.width=this.towerWidth,this.tower.houseIncrement=jt(3,Math.sqrt(this.tower.outerWallLength)/2+this.tower.outerWallLength)}calculateHouse(){this.outerBase=this.studAmount*this.studDistance,this.extensionToSouth=this.studAmountSouth*this.studDistance,this.extensionToNorth=this.studAmountNorth*this.studDistance,this.extensionToEast=this.studAmountEast*this.studDistance,this.extensionToWest=this.studAmountWest*this.studDistance,this.calculateTower(),this.tower.show?this.extensionToNorth=Math.max(this.extensionToNorth,Math.ceil(this.tower.houseIncrement)):this.tower.houseIncrement=0;const t={we:{a:this.wallOuterThickness,b:this.extensionToWest+1*this.wallOuterThickness,c:this.extensionToWest+1*this.outerBase+-1*this.wallOuterThickness,d:this.extensionToEast+this.outerBase+this.extensionToWest+-1*this.wallOuterThickness},ns:{a:0,b:this.extensionToNorth+-1*this.wallOuterThickness,c:this.extensionToNorth+this.outerBase+-3*this.wallOuterThickness,d:this.extensionToNorth+this.outerBase+this.extensionToSouth+-3*this.wallOuterThickness}};this.stramien={in:t,out:{we:{a:t.we.a-this.wallOuterThickness,b:t.we.b-this.wallOuterThickness,c:t.we.c+this.wallOuterThickness,d:t.we.d+this.wallOuterThickness},ns:{a:t.ns.a-this.wallOuterThickness,b:t.ns.b-this.wallOuterThickness,c:t.ns.c+this.wallOuterThickness,d:t.ns.d+this.wallOuterThickness}}},this.serverRoom=[this.stramien.in.we.c-1,this.stramien.in.ns.b-this.wallInnerThickness],this.houseWidth=jt(4,this.stramien.out.we.d-this.stramien.out.we.a),this.houseLength=jt(4,this.stramien.out.ns.d-this.stramien.out.ns.a),this.calculateTowerCoords(),this.cross.calculate(this),this.stair.calculate(this)}calculateStats(){this.getWallLength(),this.getWallArea(),this.getFloorArea()}getWallLength(){this.stats.wall.innerLength=Math.ceil($l(Object.values(this.partsFlatten).filter(t=>t instanceof We).map(t=>t.type===Oe.outer?t.getLength(Q.in):t.type===Oe.inner?t.getLength(Q.out)+t.getLength(Q.in):0))),this.stats.wall.outerLength=Math.ceil($l(Object.values(this.partsFlatten).filter(t=>t instanceof We).filter(t=>t.type===Oe.outer).map(t=>t.getLength(Q.out)),1))}getWallArea(){this.stats.wall.innerArea=Math.ceil($l(Object.values(this.partsFlatten).filter(t=>t instanceof We).map(t=>{let e=0;return t.type===Oe.inner&&(e+=t.getArea(Q.out)),e+=t.getArea(Q.in),e}))),this.stats.wall.outerArea=Math.ceil($l(Object.values(this.partsFlatten).filter(t=>t instanceof We).filter(t=>t.type===Oe.outer).map(t=>t.getArea(Q.out)),1))}getFloorArea(){let t={};Object.keys(te).map(e=>{t[e]={area:0,volume:0}}),this.partsFlatten.filter(e=>e instanceof ki).filter(e=>"innerFootprint"!==e.name).forEach(e=>{t[e.floor].area+=e.area(),t[e.floor].volume+=e.volume()}),this.stats.floor=t,console.log(this.stats.floor)}calculateTowerCoords(){!1===this.tower.show&&(this.tower.width=0,this.tower.outerWallOffset=0,this.tower.innerWallLength=0,this.tower.outerWallLength=0,this.tower.houseIncrement=0,this.tower.wallOuterThickness=0);let t=this.tower.wallOuterThickness/Math.cos(22.5*Math.PI/180);this.tower.innerIncrement=Math.sqrt(this.tower.innerWallLength**2/2),this.tower.outerIncrement=Math.sqrt(this.tower.outerWallLength**2/2);const e=[this.stramien.out.we.c+this.tower.outerWallOffset,this.stramien.out.ns.b-this.tower.innerIncrement-this.tower.innerWallLength-this.tower.outerWallOffset],i=e,r=H(e,[this.tower.width,0]),s=si(45,this.tower.width,r),o=H(s,[0,this.tower.width]),a=si(135,this.tower.width,o),l=H(a,[-this.tower.width,0]),c=si(225,this.tower.width,l),u=H(c,[0,-this.tower.width]);this.tower.innerCoords=[i,r,s,o,a,l,c,u],this.tower.outerCoords=[si(-112.5,t,i),si(-67.5,t,r),si(-22.5,t,s),si(22.5,t,o),si(67.5,t,a),si(112.5,t,l),si(157.5,t,c),si(202.5,t,u)],this.tower.intersectionWest=H(this.tower.outerCoords[0],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),this.tower.intersectionEast=H(this.tower.outerCoords[3],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),!1===this.tower.show&&(this.tower.intersectionWest=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.intersectionEast=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.innerCoords=[...Array(8).keys()].map(d=>[this.stramien.in.we.c,this.stramien.in.ns.b]),this.tower.outerCoords=[...Array(8).keys()].map(d=>[this.stramien.out.we.c,this.stramien.out.ns.b]))}redrawHouse(t,e,i){const r=(s,o)=>{o.parts.forEach(function(){var a=yr(function*(l){yield l.redraw(s,t,i),void 0!==l.parts&&r(s,l)});return function(l){return a.apply(this,arguments)}}())};e===vr.plan&&r(this,this),e===vr.cross&&r(this.cross,this.cross),e===vr.stair&&r(this.stair,this.stair)}}let vx={};class Js{constructor(){this.lineThickness=1,this.classes=[],this.transform="",this.selector="",this.index=0,this.visible=!0,this.theoretic=!1,this.tooltip=t=>`<b>${this.name?this.name:this.selector}</b>`}show(t){return(this.floor===t||this.floor===te.all)&&!this.theoretic&&this.visible}redraw(t,e,i){var r=this;return yr(function*(){r.onUpdate(t),t instanceof VA?void 0===r.floor&&r.parent&&r.parent.floor&&(r.floor=r.parent.floor):r.floor=te.all,r.meterPerPixel=i,yield r.draw(e)})()}createSelector(){if(!this.selector)if(this.parent&&(this.parent instanceof VA?(this.floor===te.ground&&(this.selector="L0"),this.floor===te.top&&(this.selector="L1")):this.selector=this.parent.selector),void 0!==this.name)this.selector+=`-${this.name.replace(/\s/g,"")}`;else{let t=this.constructor.name;"sensorType"in this&&(t=this.sensorType),t in vx||(vx[t]=0),vx[t]++,this.selector+=`-${t}-${vx[t]}`}}draw(t){return yr(function*(){})()}select(){document.querySelectorAll("svg .selected").forEach((t,e)=>{t.classList.remove("selected")}),this.svg.node().classList.add("selected")}setClass(t){!t.node()||!this.classes||this.classes.forEach(e=>{t.node().classList.add(e)})}}class _i extends Js{constructor(t){super(),this.name="",this.coords=[],this.lineThickness=.2,Object.assign(this,t)}draw(t){var e=this;return yr(function*(){if(void 0===e.svg){if(!e.show(t))return;e.svg=Fn(`#${e.selector}`)}e.svg.attr("points",e.show(t)?e.coords.join(" "):"").attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("transform",e.transform),e.setClass(e.svg)})()}}var br=(()=>{return(n=br||(br={})).outer="outer",n.inner="inner",n.sketch="sketch",n.shadow="shadow",br;var n})(),Rs=(()=>{return(n=Rs||(Rs={})).roof70="roof70",n.roofCircle="roofCircle",n.roofCircleAnd70="roofCircleAnd70",Rs;var n})();class Lye{constructor(){this.innerWidth=-1,this.wallOuterThickness=-1,this.roofThickness=.5,this.ceilingHeight=3.3,this.floorAboveGround=.7,this.crawlerSpace=!0,this.floorThickness=.5,this.center=[],this.roofCirclePullDown=1,this.roofCircleExtra=-1,this.roofCircleWalls=1,this.roof70offset=.6,this.roof70Extension=1.2,this.roof70Walls=1.4,this.bendPoint=[-1,-1],this.bendPointInner=[-1,-1],this.roofTop=-1,this.crawlerHeight=-1,this.groundFloorTop=-1,this.groundFloorBottom=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.houseHeight=-1,this.outerWallHeight=-1,this.gableWallArea=-1,this.minimumHeight=1.5,this.minimumHeightRoom=2.3,this.roofStyle=Rs.roof70,this.viewedRoofStyle=Rs.roof70,this.parts=[],this.create()}create(){this.createCircleRoof(),this.createBuilding(),this.create70Roof(),this.createHelpers(),this.parts.push(new _i({selector:"clip-roof",name:"#clip-roof",onUpdate:function(t){this.coords=[[0,-t.roof70Walls],[0,-t.innerWidth],[t.innerWidth,-t.innerWidth],[t.innerWidth,-t.roof70Walls],[t.innerWidth-t.wallOuterThickness,-t.roof70Walls],[t.innerWidth-t.wallOuterThickness,0],[t.wallOuterThickness,0],[t.wallOuterThickness,-t.roof70Walls],,]}}))}calculate(t){this.house=t,this.innerWidth=this.house.outerBase,this.wallOuterThickness=this.house.wallOuterThickness,this.center=[this.house.outerBase/2,0],this.roofCircleExtra=Math.round(Math.cos(65*Math.PI/180)*this.roofCirclePullDown*100)/100,this.bendPoint=[this.roof70offset,-this.getAngle(70,this.roof70offset)-this.roof70Walls],this.bendPointInner=[this.roof70offset,-this.getAngle(70,this.roof70offset)],this.topFloorTop=0,this.topFloorBottom=this.topFloorTop+-this.floorThickness,this.groundFloorTop=this.topFloorBottom-this.ceilingHeight,this.groundFloorBottom=this.groundFloorTop-this.floorThickness,this.groundElevation=this.groundFloorTop-(this.crawlerSpace?this.floorAboveGround:0),this.crawlerHeight=this.crawlerSpace?.9:0,this.roofTop=this.topFloorTop+(this.roof70Walls+2),this.houseHeight=jt(3,this.roofTop-this.groundElevation),this.roofInnerContourLine(),this.gableWallArea=10,this.outerWallHeight=Math.abs(this.groundElevation)}createBuilding(){this.parts.push(new _i({selector:"building-ground-fill",onUpdate:function(t){this.coords=[[-2,-t.groundElevation],[t.innerWidth+2,-t.groundElevation],[t.innerWidth+2,2-t.groundElevation],[-2,2-t.groundElevation]]}})),this.parts.push(new _i({selector:"building-ground",onUpdate:function(t){this.coords=[[-2,-t.groundElevation],[t.innerWidth+2,-t.groundElevation],[t.innerWidth+2,2-t.groundElevation],[-2,2-t.groundElevation]]}})),this.parts.push(new ql({selector:"building-ground-line",onUpdate:function(t){this.points=[[-2,-t.groundElevation],[t.innerWidth+2,-t.groundElevation]]}})),this.parts.push(new _i({selector:"building-crawler",onUpdate:function(t){const[e,i]=[t.innerWidth-2*t.wallOuterThickness,t.crawlerHeight],r=[t.wallOuterThickness,-t.groundFloorBottom];this.coords=[[r[0],r[1]],[r[0]+e,r[1]],[r[0]+e,r[1]+i],[r[0],r[1]+i]]}})),this.parts.push(new _i({selector:"building-walls",onUpdate:function(t){const[e,i]=[t.innerWidth,-(t.groundFloorBottom-t.crawlerHeight)],r=[0,-t.topFloorTop];this.coords=[[r[0],r[1]],[r[0]+e,r[1]],[r[0]+e,r[1]+i],[r[0],r[1]+i]]}})),this.parts.push(new _i({selector:"building-room",onUpdate:function(t){this.coords=[[t.wallOuterThickness,-t.topFloorBottom],[t.innerWidth-t.wallOuterThickness,-t.topFloorBottom],[t.innerWidth-t.wallOuterThickness,-t.groundFloorTop],[t.wallOuterThickness,-t.groundFloorTop]]}})),this.parts.push(new _i({selector:"building-fill",onUpdate:function(t){const e=t.viewedRoofStyle===Rs.roof70?t.roof70Walls:t.roofCircleWalls,[i,r]=[t.innerWidth,-(t.groundElevation-e)],s=[0,-e];this.coords=[[s[0],s[1]],[s[0]+i,s[1]],[s[0]+i,s[1]+r],[s[0],s[1]+r]]}})),this.parts.push(new _i({selector:"building-roof-70-wall1",onUpdate:function(t){this.coords=[[0,-t.roof70Walls],[t.wallOuterThickness,-t.roof70Walls],[t.wallOuterThickness,0],[0,0]]}})),this.parts.push(new _i({selector:"building-roof-70-wall2",onUpdate:function(t){this.coords=[[t.innerWidth,-t.roof70Walls],[t.innerWidth-t.wallOuterThickness,-t.roof70Walls],[t.innerWidth-t.wallOuterThickness,0],[t.innerWidth,0]]}})),this.parts.push(new _i({selector:"building-roof-circle-wall1",onUpdate:function(t){this.coords=[[0,-t.roofCircleWalls],[t.wallOuterThickness,-t.roofCircleWalls],[t.wallOuterThickness,0],[0,0]]}})),this.parts.push(new _i({selector:"building-roof-circle-wall2",onUpdate:function(t){this.coords=[[t.innerWidth,-t.roofCircleWalls],[t.innerWidth-t.wallOuterThickness,-t.roofCircleWalls],[t.innerWidth-t.wallOuterThickness,0],[t.innerWidth,0]]}}))}createHelpers(){this.parts.push(new $i({selector:"minimum",floor:te.all,direction:0,textRotate:0,onUpdate:function(t){this.offsetPixels=-60;const e=t.getIntersectionWithRoof(t.minimumHeight);this.offsetMeters=-e[0],this.a=[e[0]+t.wallOuterThickness,0],this.b=[e[0]+t.wallOuterThickness,-e[1]]}})),this.parts.push(new $i({selector:"minimum-h",floor:te.all,direction:-90,textRotate:0,onUpdate:function(t){this.offsetPixels=0;const e=t.getIntersectionWithRoof(t.minimumHeight);this.offsetMeters=1.5,this.a=[+t.wallOuterThickness,0],this.b=[e[0]+t.wallOuterThickness,-e[1]]}})),this.parts.push(new $i({selector:"minimum-room",floor:te.all,direction:0,textRotate:0,onUpdate:function(t){this.offsetPixels=60;const e=t.getIntersectionWithRoof(t.minimumHeightRoom);this.offsetMeters=e[0];const i=t.innerWidth-e[0]-t.wallOuterThickness;this.a=[i,0],this.b=[i,-e[1]]}})),this.parts.push(new $i({selector:"minimum-room-h",floor:te.all,direction:-90,textRotate:0,onUpdate:function(t){this.offsetPixels=0;const e=t.getIntersectionWithRoof(t.minimumHeightRoom);this.offsetMeters=1.5;const i=t.innerWidth-e[0]-t.wallOuterThickness;this.a=[i,-e[1]],this.b=[i+e[0],0]}}))}getIntersectionWithRoof(t){const e=[];this.innerRoofContourLine.forEach((r,s,o)=>{if(s+1===o.length)return;const l=BA([r,o[s+1]],[[-100,t],[100,t]]);e.push(l)});let i=e.sort((r,s)=>s[0]-r[0])[0];return i[0]>=(this.innerWidth-this.wallOuterThickness)/2?this.innerRoofContourLine[3]:i}createCircleRoof(){this.parts.push(new _i({selector:"roof-circle-fill",onUpdate:function(t){this.coords=[...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),br.outer))].map(e=>[e[0],e[1]-t.roofCircleWalls])}})),this.parts.push(new _i({selector:"roof-circle-shadow",onUpdate:function(t){this.coords=[...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),br.outer)),...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),br.inner)).reverse()].map(e=>[e[0],e[1]-t.roofCircleWalls])}})),this.parts.push(new _i({selector:"roof-circle",onUpdate:function(t){this.coords=[...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),br.outer)),...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),br.inner)).reverse()].map(e=>[e[0],e[1]-t.roofCircleWalls])}})),this.parts.push(new _x({selector:"roof-circle__h-circle",lineThickness:2,onUpdate:function(t){const[e,i]=t.pointOnCircleRoof(0,br.outer),r=e-t.innerWidth,s=2*r+t.innerWidth;this.d=`M${s},0 a1,1 0 0,0 ${-s},0`,this.transform=`translate(${-r} ${i-t.roofCircleWalls})`}})),this.parts.push(new _i({selector:"roof-circle__h-line",lineThickness:2,onUpdate:function(t){this.coords=[t.pointOnCircleRoof(Math.PI*(-3/4),br.sketch),[t.center[0],t.center[1]+t.roofCirclePullDown],t.pointOnCircleRoof(Math.PI,br.outer),t.pointOnCircleRoof(0,br.outer),[t.center[0],t.center[1]+t.roofCirclePullDown],t.pointOnCircleRoof(Math.PI*(-1/4),br.sketch)].map(function(e){return[e[0],e[1]-t.roofCircleWalls]})}}))}create70Roof(){this.parts.push(new _i({selector:"roof-70-fill",onUpdate:function(t){this.coords=t.pointOfRoof().slice(0,7)}})),this.parts.push(new _i({selector:"roof-70-shadow",onUpdate:function(t){this.coords=t.pointOfRoof(!0)}})),this.parts.push(new _i({selector:"roof-70",onUpdate:function(t){this.coords=t.pointOfRoof()}}))}roofInnerContourLine(){const t=this.pointOfRoof(),e=this.viewedRoofStyle===Rs.roof70,i=[this.wallOuterThickness,this.topFloorTop-3],r=[this.wallOuterThickness,this.topFloorTop],s=e?-this.roof70Walls:-this.roofCircleWalls,o=e?t[13]:H(this.pointOnCircleRoof(-1*Math.PI,br.inner),[0,s]),a=e?t[11]:H(this.pointOnCircleRoof(Math.PI*(-3/4),br.inner),[0,s]),l=e?t[10]:H(this.pointOnCircleRoof(-.5*Math.PI,br.inner),[0,s]),c=BA([r,i],[o,a]);this.innerRoofContourLine=[r,c,a,l].map(u=>H(u,[-this.wallOuterThickness,0]).map(h=>Math.abs(jt(3,h))))}pointOfRoof(t=!1){const e=this.roofThickness/Math.sin(70*Math.PI/180),i=.5/Math.tan(70*Math.PI/180),r=Math.sqrt(i**2+e**2),s=this.roofThickness*Math.sin(30*Math.PI/180),o=this.innerWidth/2,a=this.roof70offset,l=this.getAngle(70,a)+this.roof70Walls,c=this.angle(-40,r),u=a-c[0],d=l+c[1],h=o-a,f=h-s,g=this.getAngle(30,h)+l,_=this.getAngle(30,f)+d;return[this.angle(110*Math.PI/180,this.roof70Extension,[0,-this.roof70Walls]),[0,-this.roof70Walls],[a,-l],[o,-g],[this.innerWidth-a,-l],[this.innerWidth,-this.roof70Walls],this.angle(70*Math.PI/180,this.roof70Extension,[this.innerWidth,-this.roof70Walls]),this.angle(70*Math.PI/180,this.roof70Extension,[this.innerWidth-e,-this.roof70Walls]),[this.innerWidth-e,-this.roof70Walls],[this.innerWidth-u,-d],[o,-_],[u,-d],[e,-this.roof70Walls],this.angle(110*Math.PI/180,this.roof70Extension,[e,-this.roof70Walls])]}getAngle(t,e){return e*Math.tan(t*Math.PI/180)}pointOnCircleRoof(t,e){let i;e===br.outer&&(i=this.innerWidth/2+this.roofCircleExtra),e===br.inner&&(i=this.innerWidth/2-this.roofThickness+this.roofCircleExtra),e===br.sketch&&(i=this.innerWidth/2+1.5*this.roofThickness+this.roofCircleExtra);const r=this.angle(t,i);return[r[0]+this.center[0],r[1]+this.center[1]+this.roofCirclePullDown]}angle(t,e,i=[0,0]){const r=e*Math.cos(t),s=e*Math.sin(t);return[r+i[0],s+i[1]]}}const OG=Kr("slideInOut",[ri(":enter",[bt({transform:"translateY(100%)"}),Yn("600ms 0ms ease-out",bt({transform:"translateY(0%)"}))]),ri(":leave",[Yn("300ms  ease-in",bt({transform:"translateY(100%)"}))])]),Fye=Kr("fallInOut",[ri(":enter",[bt({transform:"translateY(-100%)"}),Yn("600ms 0ms ease-out",bt({transform:"translateY(0%)"}))]),ri(":leave",[Yn("300ms ease-in",bt({transform:"translateY(-100%)"}))])]);class De extends Js{constructor(t){super(),this.points=[],this.offset=[0,0],this.offsetWall=.3,this.elevation=.3,this.verticalCableLength=0,this.cableOnly=!1,this.sensorOnly=!1,this.wallSide=Q.in,this.cableLength=0,this.amount=1,this.floor=te.ground,this.fontSize=14,this.visible=!1,this.tooltip=()=>{let e=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(e+=`<br>Cable length ${jt(1,this.cableLength)}m2`),this.group&&(e+=`<br>Group ${this.group}`),e},Object.assign(this,t)}getSVG(){var t=this;return yr(function*(){return(yield(yield fetch(`assets/svg/${t.sensorType}.svg`)).text()).replace(/id=\"\w+-?\w*\"/gi,"")})()}draw(t){var e=this;return yr(function*(){if(void 0===e.svg){if(!e.show(t))return;if(e.svg=Fn(`#${e.selector}.sensor-cable`),e.sensorType===Ee.temperature&&(e.sensorOnly=!0),e.cableOnly)e.lineThickness=2,e.classes.push("sensor-room-cable");else{e.svgIcon=Fn(`#${e.selector}.sensor-icon`),e.svgIcon.node().innerHTML=yield e.getSVG();const r=Math.round(32*e.meterPerPixel*64);e.svgIcon.selectChild().attr("height",`${r}px`).attr("width",`${r}px`).attr("x",-r/2+"px").attr("y",-r/2+"px"),e.badge()}e.group&&e.classes.push(`el-group-${e.group}`),e.cableType&&e.classes.push(`cable-${e.cableType}`),e.classes.push(`sensor-${e.sensorType}`)}if(!e.show(t))return e.svgIcon.attr("points",""),void e.svg.attr("points","");const i=e.calcOffsetWall();e.cableOnly||(e.svgIcon.attr("transform",`translate(${i[0]}, ${i[1]}) scale(${e.show(t)?.01:1e-4})`),e.setClass(e.svgIcon)),e.sensorOnly||(e.svg.attr("points",e.cablePoints(i,t).join(" ")).attr("stroke-width",e.meterPerPixel*e.lineThickness*3).attr("transform",e.transform),e.cableType===da.OutsidePOE&&e.svg.attr("stroke-dasharray",`${e.meterPerPixel*e.lineThickness*10*.5} ${e.meterPerPixel*e.lineThickness*10}`),e.setClass(e.svg),e.cableLength=e.getLength())})()}cablePoints(t,e){return this.show(e)?[t,...this.points]:[]}getLength(){let e=0;return this.points.forEach((i,r,s)=>{r+1!==this.points.length&&(e+=((i,r)=>Math.hypot(r[0]-i[0],r[1]-i[1]))(i,s[r+1]))}),jt(2,e+this.verticalCableLength+.3*this.amount)}badge(){if(this.amount<2)return;const t=this.svgIcon.append("g").attr("class","sensor-badge");t.append("circle").attr("r",24).attr("cx",26).attr("fill",2===this.amount?"white":"#333").attr("stroke","black").attr("cy",-26).attr("stroke-width",this.meterPerPixel*this.lineThickness*40),t.append("text").attr("fill",2===this.amount?"black":"white").attr("x",26).attr("y",-22).attr("text-anchor","middle").attr("class","sensor-badge-text").attr("stroke","none").attr("dominant-baseline","middle").attr("font-size",3*this.fontSize).text(`${this.amount}`)}calcOffsetWall(){if(this.parent instanceof We){const e=this.parent.sides[this.wallSide],i=Kc(e[0],e[1]);return si(i+90,this.offsetWall,this.points[0])}return[this.points[0][0]+this.offset[0],this.points[0][1]+this.offset[1]]}select(){document.querySelectorAll("svg .selected").forEach((t,e)=>{t.classList.remove("selected")}),[Ee.socket,Ee.perilex].includes(this.sensorType)?document.querySelectorAll(`.el-group-${this.group}`).forEach((t,e)=>{t.classList.add("selected")}):(this.svg.node().classList.add("selected"),this.svgIcon.node().classList.add("selected"))}}let Nye=(()=>{class n{constructor(){this.class="base",this.html="dummy"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=ft({type:n,selectors:[["tooltip"]],hostAttrs:[1,"popup"],hostVars:2,hostBindings:function(e,i){2&e&&function qL(n){oa(Gs,Ga,n,!0)}(i.class)},decls:2,vars:1,consts:[[3,"innerHtml"],[1,"popup-arrow","popup-arrow-mid"]],template:function(e,i){1&e&&ae(0,"div",0)(1,"div",1),2&e&&Z("innerHtml",i.html,Ku)},styles:[".popup-arrow-mid{left:calc(50% - 10px)!important;background:inherit}[_nghost-%COMP%]{position:relative!important}"]}),n})();class vi extends Js{constructor(t){super(),this.width=.8,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.outside=!1,Object.assign(this,t)}draw(t){var e=this;return yr(function*(){if(void 0===e.svg&&(e.svg=Fn(`#${e.selector}`),e.svgOpening=e.svg.select(".door-wall-opening"),e.svgSwing=e.svg.select(".door-swing")),!e.show(t))return e.svgOpening.attr("points",""),void e.svgSwing.attr("d","");let i;i=1===e.scale[0]?[0,0]:[e.parent.thickness,0],e.svg.style("transform",` \n      translate(${e.origin[0]+i[0]}px, ${e.origin[1]+i[1]}px) \n      rotate(${e.rotate}deg) \n      scale(${e.scale[0]}, ${e.scale[1]})\n      `),e.svgOpening.attr("points",[[0,-e.width],[e.parent.thickness,-e.width],[e.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill").attr("stroke-width",e.meterPerPixel*e.lineThickness),e.svgSwing.attr("d",`M${e.parent.thickness},0 \n        L0,0  \n        L${-e.width},0  \n        A${e.width},${e.width} 0 0,1  \n        0,${-e.width}\n        L${e.parent.thickness},${-e.width}  `).attr("stroke-width",1*e.meterPerPixel)})()}}var Zc=(()=>{return(n=Zc||(Zc={})).windowWall="windowWall",n.standard="standard",n.hexagon="hexagon",Zc;var n})();class Oi extends Js{constructor(t){super(),this.floor=te.ground,this.windowForm=Zc.standard,this.width=2,this.height=2,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.frameThickness=.1,this.frameDepth=.1,this.innerDepthFrame=.1,this.openable=!0,Object.assign(this,t)}get outerDepthFrame(){return this.innerDepthFrame+this.frameDepth}draw(t){var e=this;return yr(function*(){if(void 0===e.svg&&(e.svg=Fn(`#${e.selector}`),e.svgOpening=e.svg.select(".window-wall-opening"),e.svgPane=e.svg.select(".window-pane")),!e.show(t))return e.svgOpening.attr("points",""),void e.svgPane.attr("d","");let i;i=1===e.scale[0]?[0,0]:[e.parent.thickness,0],e.svg.style("transform",` \n      translate(${e.origin[0]+i[0]}px, ${e.origin[1]+i[1]}px) \n      rotate(${e.rotate}deg) \n      scale(${e.scale[0]}, ${e.scale[1]})\n      `),e.svgOpening.attr("points",[[0,e.width],[e.parent.thickness,e.width],[e.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill").attr("stroke-width",e.meterPerPixel*e.lineThickness),e.svgPane.attr("d",`M${e.innerDepthFrame},0  \n          L${e.innerDepthFrame},${e.frameThickness} \n          L${e.outerDepthFrame},${e.frameThickness}  \n          L${e.outerDepthFrame},0  \n          \n          L${e.outerDepthFrame},${e.width}  \n          L${e.outerDepthFrame},${e.width-e.frameThickness}  \n          L${e.innerDepthFrame},${e.width-e.frameThickness} \n          L${e.innerDepthFrame},${e.width}  \n\n          L${e.innerDepthFrame},0  \n          L${e.innerDepthFrame},${e.frameThickness} \n          L${e.innerDepthFrame+e.frameDepth/2},${e.frameThickness}  \n          L${e.innerDepthFrame+e.frameDepth/2},${e.width-e.frameThickness}  \n          `).attr("stroke-width",1*e.meterPerPixel)})()}}const Bye=[new ki({name:"Toilet-upstairs",floor:te.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-n.wallInnerThickness],this.squaredRoom(1.7,1)},parts:[new We({floor:te.top,type:Oe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[Q.out]:[H(this.origin,[0,-n.wallInnerThickness]),H(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}}}),new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[Q.out]:[H(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),H(this.origin,[+n.wallInnerThickness,t.height+n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}}}),new We({floor:te.top,type:Oe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,t.height]),this.sides={[Q.out]:[H(this.origin,[+n.wallInnerThickness,n.wallInnerThickness]),H(this.origin,[-t.width,n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[-t.width,0])]}},parts:[new vi({scale:[-1,1],rotate:-90,onUpdate:function(n){this.origin=H(this.parent.getPosition(Q.in,0,0),[-n.wallInnerThickness,0])}})]}),new We({type:Oe.theoretic,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.innerWallLength=t.height,this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,-this.innerWallLength])]}}})]}),new ki({name:"storage-upstairs",floor:te.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-2*n.wallInnerThickness-1],this.squaredRoom(1.7,1)},parts:[new We({floor:te.top,type:Oe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[Q.out]:[H(this.origin,[0,-n.wallInnerThickness]),H(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}}}),new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[Q.out]:[H(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),H(this.origin,[+n.wallInnerThickness,t.height])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}},parts:[new vi({scale:[-1,1],rotate:180,onUpdate:function(n){this.origin=H(this.parent.getPosition(Q.in,0,0),[-n.wallInnerThickness,0])}})]})]}),new ki({name:"main-bedroom",floor:te.top,onUpdate:function(n){this.width=jt(2,n.stramien.in.we.c-n.stramien.in.we.b),this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.height=jt(2,n.stramien.in.ns.b-n.tower.houseIncrement-2*n.wallOuterThickness);const t=n.stair.totalWidth+n.wallInnerThickness,e=n.stramien.in.ns.a+n.stair.stairOrigin[1]-n.wallInnerThickness;this.coords=[this.northWestCorner,H(this.northWestCorner,[this.width,0]),H(this.northWestCorner,[this.width,this.height]),H(this.northWestCorner,[t,this.height]),H(this.northWestCorner,[t,e]),H(this.northWestCorner,[0,e])]},parts:[new We({floor:te.top,type:Oe.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallOuterThickness,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}},parts:[new Oi({windowForm:Zc.hexagon,floor:te.top,rotate:-90,width:1,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,.5,-this.width/2)}})]}),new We({floor:te.top,type:Oe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[2],this.innerWallLength=ga(t.coords[3],t.coords[2]),this.sides={[Q.out]:[H(this.origin,[0,n.wallInnerThickness]),H(this.origin,[-(this.innerWallLength+n.wallInnerThickness),n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[-this.innerWallLength,0])]}},parts:[new vi({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=H(this.parent.getPosition(Q.in,1,0),[0,0])}})]}),new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const t=this.parent;this.origin=t.coords[3],this.innerWallLength=ga(t.coords[4],t.coords[3]),this.sides={[Q.out]:[H(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),H(this.origin,[-n.wallInnerThickness,-this.innerWallLength+n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,-this.innerWallLength])]}}}),new We({name:"SouthLeft",floor:te.top,type:Oe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[4],this.innerWallLength=ga(t.coords[5],t.coords[4]),this.sides={[Q.out]:[H(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),H(this.origin,[-this.innerWallLength,n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[-this.innerWallLength,0])]}}})]}),new ki({name:"bathroom",floor:te.top,onUpdate:function(n){const t=n.stramien.in.ns.b-n.tower.houseIncrement-2*n.wallOuterThickness+n.wallInnerThickness,i=n.stramien.in.ns.b-.5,r=n.tower.innerCoords[3][0]-1;this.northWestCorner=[n.stair.stairOrigin[0]+n.stair.totalWidth+1.0001+n.wallInnerThickness,t],this.coords=[this.northWestCorner,[n.stramien.in.we.c,t],[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1],n.tower.innerCoords[2],[n.tower.innerCoords[3][0],i],[r,i],[r,n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]]},parts:[new We({floor:te.top,type:Oe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[5],this.innerWallLength=ga(t.coords[5],t.coords[6]),this.sides={[Q.out]:[H(t.coords[5],[0,n.wallInnerThickness]),H(t.coords[6],[n.wallInnerThickness,n.wallInnerThickness])],[Q.in]:[H(t.coords[5],[0,0]),H(t.coords[6],[0,0])]}}}),new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[6],this.innerWallLength=ga(t.coords[6],t.coords[7]),this.sides={[Q.out]:[H(t.coords[6],[n.wallInnerThickness,n.wallInnerThickness]),H(t.coords[7],[n.wallInnerThickness,n.wallInnerThickness])],[Q.in]:[H(t.coords[6],[0,0]),H(t.coords[7],[0,0])]}}}),new We({name:"SouthLeft",floor:te.top,type:Oe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[5],this.innerWallLength=ga(t.coords[7],t.coords[8]),this.sides={[Q.out]:[H(t.coords[7],[n.wallInnerThickness,n.wallInnerThickness]),H(t.coords[8],[-n.wallInnerThickness,n.wallInnerThickness])],[Q.in]:[H(t.coords[7],[0,0]),H(t.coords[8],[0,0])]}},parts:[new vi({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=H(this.parent.getPosition(Q.in,1,0),[0,0])}})]}),new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[8],this.innerWallLength=ga(t.coords[8],t.coords[0]),this.sides={[Q.out]:[H(t.coords[8],[-n.wallInnerThickness,n.wallInnerThickness]),H(t.coords[0],[-n.wallInnerThickness,0])],[Q.in]:[H(t.coords[8],[0,0]),H(t.coords[0],[0,0])]}}})]}),new ki({name:"Upper-east",floor:te.top,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.c+n.wallInnerThickness,e.in.ns.b+n.balconyWidth+n.wallInnerThickness],this.squaredRoom(e.in.we.d-e.in.we.c-n.wallInnerThickness,e.in.ns.c-e.in.ns.b-n.balconyWidth-n.wallInnerThickness)},parts:[new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,0*t.height]),this.sides={[Q.out]:[H(t.northWestCorner,[-n.wallInnerThickness,-n.wallInnerThickness]),H(t.northWestCorner,[1*t.width,0*t.height-n.wallInnerThickness])],[Q.in]:[H(t.northWestCorner,[0*t.width,0*t.height]),H(t.northWestCorner,[1*t.width,0*t.height])]}},parts:[new vi({scale:[1,-1],rotate:-90,onUpdate:function(n){this.origin=H(this.parent.getPosition(Q.in,0,0),[0,0])}})]}),new We({type:Oe.theoretic,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[1*t.width,0*t.height]),this.sides={[Q.in]:[H(t.northWestCorner,[1*t.width,0*t.height]),H(t.northWestCorner,[1*t.width,1*t.height])]}}}),new We({type:Oe.theoretic,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[1*t.width,1*t.height]),this.sides={[Q.in]:[H(t.northWestCorner,[1*t.width,1*t.height]),H(t.northWestCorner,[0*t.width,1*t.height])]}}}),new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[1],this.sides={[Q.out]:[H(t.northWestCorner,[0*t.width-n.wallInnerThickness,1*t.height]),H(t.northWestCorner,[0*t.width-n.wallInnerThickness,0*t.height-n.wallInnerThickness])],[Q.in]:[H(t.northWestCorner,[0*t.width,1*t.height]),H(t.northWestCorner,[0*t.width,0*t.height])]}}})]}),new ki({name:"upper-west-one",floor:te.top,onUpdate:function(n){const t=n.stramien,e=t.in.ns.c-t.in.ns.b-n.balconyWidth-n.wallInnerThickness,i=(t.in.we.b-t.in.we.a)/3-n.wallInnerThickness;this.northWestCorner=[t.in.we.b-1/3*(t.in.we.b-t.in.we.a),t.in.ns.b+n.balconyWidth+n.wallInnerThickness],this.squaredRoom(i,e)},parts:[new We({floor:te.top,type:Oe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[Q.out]:[H(this.origin,[0,-n.wallInnerThickness]),H(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}},parts:[new vi({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=H(this.parent.getPosition(Q.in,1,0),[0,0])}})]}),new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[Q.out]:[H(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),H(this.origin,[+n.wallInnerThickness,t.height])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}},parts:[]}),new We({type:Oe.theoretic,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,t.height]),this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[-1*t.width,0*t.height])]}},parts:[]}),new We({type:Oe.theoretic,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0*t.width,-1*t.height])]}},parts:[]})]}),new ki({name:"upper-west-two",floor:te.top,onUpdate:function(n){const t=n.stramien,e=t.in.ns.c-t.in.ns.b-n.balconyWidth-n.wallInnerThickness,i=(t.in.we.b-t.in.we.a)/3-n.wallInnerThickness;this.northWestCorner=[t.in.we.b-2/3*(t.in.we.b-t.in.we.a),t.in.ns.b+n.balconyWidth+n.wallInnerThickness],this.squaredRoom(i,e)},parts:[new We({floor:te.top,type:Oe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[Q.out]:[H(this.origin,[0,-n.wallInnerThickness]),H(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}},parts:[new vi({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=H(this.parent.getPosition(Q.in,1,0),[0,0])}})]}),new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[Q.out]:[H(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),H(this.origin,[+n.wallInnerThickness,t.height])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}},parts:[]}),new We({type:Oe.theoretic,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,t.height]),this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[-1*t.width,0*t.height])]}},parts:[]}),new We({type:Oe.theoretic,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0*t.width,-1*t.height])]}},parts:[]})]}),new ki({name:"upper-west-three",floor:te.top,onUpdate:function(n){const t=n.stramien,e=t.in.ns.c-t.in.ns.b,i=(t.in.we.b-t.in.we.a)/3-n.wallInnerThickness;this.northWestCorner=[t.in.we.b-1*(t.in.we.b-t.in.we.a),t.in.ns.b],this.squaredRoom(i,e)},parts:[new We({floor:te.top,type:Oe.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}}}),new We({type:Oe.inner,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[Q.out]:[H(this.origin,[+n.wallInnerThickness,0]),H(this.origin,[+n.wallInnerThickness,t.height])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}},parts:[new vi({scale:[1,-1],rotate:0,onUpdate:function(n){this.origin=H(this.parent.getPosition(Q.in,0,0),[0,0])}})]}),new We({type:Oe.theoretic,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,t.height]),this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[-1*t.width,0*t.height])]}},parts:[]}),new We({type:Oe.theoretic,floor:te.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0*t.width,-1*t.height])]}},parts:[]})]}),new ki({name:"balcony",floor:te.top,onUpdate:function(n){const t=n.stramien,e=n.stair,i=n.stramien.in.ns.b-n.tower.houseIncrement-2*n.wallOuterThickness+n.wallInnerThickness,r=n.stair.stairOrigin[0]+n.stair.totalWidth+1.0001,s=n.stramien.in.ns.b-.5+n.wallInnerThickness,o=n.tower.innerCoords[3][0]-1+n.wallInnerThickness,a=H(e.stairOrigin,[e.totalWidth,e.totalHeight]),l=t.in.ns.b+n.balconyWidth,c=t.in.we.a+1/3*(t.in.we.b-t.in.we.a);this.coords=[H(a,[-e.walkWidth,0]),a,[a[0],i],[r,i],[r,t.in.ns.b],[o,t.in.ns.b],[o,s],[t.in.we.c,s],[n.tower.innerCoords[3][0],s],[n.tower.innerCoords[3][0],t.in.ns.b],[t.in.we.d,t.in.ns.b],[t.in.we.d,l],[n.tower.innerCoords[3][0],l],H([t.in.we.c,l],[0,0]),H([t.in.we.c,l],[0,n.balconyEdge]),H([t.in.we.b,l],[0,n.balconyEdge]),H([t.in.we.b,l],[0,0]),[c,l],[c,t.in.ns.b],[a[0]-e.walkWidth,t.in.ns.b]]},parts:[]})],Vye={studAmount:10,studDistance:.61,towerWidth:1,wallInnerThickness:.2,wallOuterThickness:.4,roof70DegOffset:1,studAmountNorth:14,studAmountSouth:2,studAmountWest:12,studAmountEast:6,showTower:!0,balconyWidth:1.2,name:"Lindelund",orientation:{lat:52,log:5.2,rotation:180},parts:[new ki({name:"innerFootprint",floor:te.ground,onUpdate:function(n){const t=n.stramien,e=n.tower;this.coords=[[t.in.we.b,t.in.ns.b],[t.in.we.b,t.in.ns.a],[t.in.we.c,t.in.ns.a],[t.in.we.c,e.innerCoords[0][1]],e.innerCoords[0],e.innerCoords[1],e.innerCoords[2],e.innerCoords[3],[e.innerCoords[3][0],t.in.ns.b],[t.in.we.d,t.in.ns.b],[t.in.we.d,t.in.ns.c],[t.in.we.c,t.in.ns.c],[t.in.we.c,t.in.ns.d],[t.in.we.b,t.in.ns.d],[t.in.we.b,t.in.ns.c],[t.in.we.a,t.in.ns.c],[t.in.we.a,t.in.ns.b]]},parts:[...[...Array(17).keys()].map((n,t,e)=>{const i=[3,4,5,6,7];if([3,4,5,6,7].includes(n))return;const s=[0,11,14,17],o=e.length;return new We({type:Oe.outer,floor:te.all,onUpdate:function(a){const l=c=>c===i[0]||c===i[4]+1||s.includes(c)?Ht.inside:s.includes(c)?void 0:Ht.outside;this.drawByRoom(n,n+1!==o?n+1:0,a,l(n),l(n+1))}})}).filter(n=>n),new We({type:Oe.outer,floor:te.all,onUpdate:function(n){if(this.ceiling=n.cross.ceilingHeight,!n.showTower)return void(this.sides={[Q.in]:[],[Q.in]:[]});const e=n.wallOuterThickness-n.wallInnerThickness;this.origin=[n.stramien.in.we.c,n.tower.innerCoords[0][1]],this.innerWallLength=n.towerWidth-e,this.sides={[Q.out]:[n.tower.outerCoords[0],n.tower.outerCoords[1]],[Q.in]:[[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1]]}}}),new We({type:Oe.outer,floor:te.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,n.showTower?(this.origin=this.parent.coords[2],this.sides={[Q.out]:[n.tower.outerCoords[1],n.tower.outerCoords[2]],[Q.in]:[n.tower.innerCoords[1],n.tower.innerCoords[2]]}):this.sides={[Q.in]:[],[Q.in]:[]}}}),new We({type:Oe.outer,floor:te.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,n.showTower?(this.origin=this.parent.coords[3],this.sides={[Q.out]:[n.tower.outerCoords[2],n.tower.outerCoords[3]],[Q.in]:[n.tower.innerCoords[2],[n.tower.innerCoords[3][0],n.stramien.in.ns.b]]}):this.sides={[Q.in]:[],[Q.in]:[]}},parts:[]})]}),new ki({name:"West",floor:te.ground,onUpdate:function(n){const t=n.stramien;this.northWestCorner=[t.in.we.a,t.in.ns.b],this.squaredRoom(t.in.we.b-t.in.we.a-n.wallInnerThickness,t.in.ns.c-t.in.ns.b)},parts:[new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new De({offset:[0,.3],sensorType:Ee.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(Q.in,3/4,0);this.points=[t,Vt(n,t,!1),n]}}),new De({offset:[0,.3],sensorType:Ee.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(Q.in,1/4,0);this.points=[t,Vt(n,t,!1),n]}}),new Oi({rotate:-90,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1/3,-this.width/2)}}),new Oi({rotate:-90,width:1,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,2/3,-this.width/2)}}),new De({group:1,sensorType:Ee.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=H(this.parent.sides[Q.in][1],[-1,0]);this.points=[t]}}),new De({group:1,sensorType:Ee.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=H(this.parent.sides[Q.in][1],[-this.parent.parent.width/2,0]);this.points=[e]}}),new De({group:1,sensorType:Ee.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=H(this.parent.sides[Q.in][0],[1,0]);this.points=[t]}})]}),new We({type:Oe.inner,floor:te.ground,onUpdate:function(n){this.drawByRoom(1,2,n,Ht.straight,Ht.straight)},parts:[new De({group:2,sensorType:Ee.socket,amount:2,offset:[-.3,0],onUpdate:function(){const t=H(this.parent.sides[Q.in][1],[0,-1]);this.points=[t]}}),new De({group:1,sensorType:Ee.socket,amount:2,offset:[-.3,0],onUpdate:function(){const t=H(this.parent.sides[Q.in][0],[0,1]);this.points=[t]}}),new vi({scale:[1,-1],onUpdate:function(n){this.origin=H(this.parent.sides[Q.in][0],[0,this.parent.parent.height/2-this.width])}}),new vi({scale:[1,1],onUpdate:function(n){this.origin=H(this.parent.sides[Q.in][0],[0,this.parent.parent.height/2+this.width])}}),new De({sensorType:Ee.lightSwitch,onUpdate:function(n){const t=this.parent.getPosition(Q.in,0,1.5);this.points=[t,Vt(n.serverRoom,t,!1),n.serverRoom]}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Oi({rotate:90,width:1.2,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1/3,-this.width/2)}}),new Oi({rotate:90,width:1.2,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,2/3,-this.width/2)}}),new De({group:2,sensorType:Ee.socket,amount:2,offset:[0,-.3],onUpdate:function(){const t=H(this.parent.sides[Q.in][0],[-1,0]);this.points=[t]}}),new De({group:2,sensorType:Ee.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=H(this.parent.sides[Q.in][0],[-this.parent.parent.width/2,0]);this.points=[e]}}),new De({group:2,sensorType:Ee.socket,amount:2,offset:[0,-.3],onUpdate:function(){const t=H(this.parent.sides[Q.in][1],[1,0]);this.points=[t]}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new De({group:1,sensorType:Ee.socket,amount:2,offset:[.3,0],onUpdate:function(){const t=H(this.parent.sides[Q.in][1],[0,1]);this.points=[t]}}),new De({group:2,sensorType:Ee.socket,amount:2,offset:[.3,0],onUpdate:function(){const t=H(this.parent.sides[Q.in][0],[0,-1]);this.points=[t]}}),new Oi({rotate:180,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1/3,-this.width/2)}}),new Oi({rotate:180,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,2/3,-this.width/2)}})]}),new De({sensorType:Ee.smoke,onUpdate:function(n){const t=H(this.parent.northWestCorner,[.8*this.parent.width,.5*this.parent.height]),e=H(t,[0,.5*-this.parent.height]);this.points=[t,e,Vt(e,n.serverRoom,!1),n.serverRoom]}}),new De({sensorType:Ee.socket,amount:2,cableOnly:!0,group:1,onUpdate:function(n){const t=this.parent;this.points=[H(t.northWestCorner,[t.width-t.parent.wallInnerThickness,t.height/2-1]),H(t.northWestCorner,[t.width-t.parent.wallInnerThickness,0]),H(t.northWestCorner,[0,0]),H(t.northWestCorner,[0,t.height/2-1])]}}),new De({sensorType:Ee.socket,amount:2,cableOnly:!0,group:2,onUpdate:function(n){const t=this.parent;this.points=[H(t.northWestCorner,[0,t.height/2+1]),H(t.northWestCorner,[0,t.height]),H(t.northWestCorner,[t.width-t.parent.wallInnerThickness,t.height]),H(t.northWestCorner,[t.width-t.parent.wallInnerThickness,t.height/2+1])]}}),new De({group:1,sensorType:Ee.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const t=this.parent,e=H(t.northWestCorner,[t.width-n.wallInnerThickness,0]);this.points=[e,Vt(n.serverRoom,e,!0),n.serverRoom]}}),new De({group:2,sensorType:Ee.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const t=this.parent,e=H(t.northWestCorner,[t.width,t.height/2+1]);this.points=[H(t.northWestCorner,[t.width-n.wallInnerThickness,t.height/2+1]),e,Vt(n.serverRoom,e,!1),n.serverRoom]}}),...[Ee.camera,Ee.poe].map(n=>new De({sensorType:n,cableType:da.OutsidePOE,offset:[0,-1],onUpdate:function(t){const e=this.parent,i=H(e.northWestCorner,[e.width/2,-t.wallOuterThickness]);this.points=[i,H(i,[0,1]),t.serverRoom]}})),...[Ee.camera,Ee.poe].map(n=>new De({sensorType:n,cableType:da.OutsidePOE,offset:[0,1],onUpdate:function(t){const e=this.parent,i=H(e.northWestCorner,[1,e.height+t.wallOuterThickness]);this.points=[i,H(i,[0,-1]),t.serverRoom]}}))]}),new ki({name:"East",floor:te.ground,onUpdate:function(n){const t=n.stramien;this.northWestCorner=[t.in.we.c+n.wallInnerThickness,t.in.ns.b],this.squaredRoom(t.in.we.d-t.in.we.c-n.wallInnerThickness,t.in.ns.c-t.in.ns.b)},parts:[new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new Oi({rotate:90,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,.5,this.width/2)}}),new De({sensorType:Ee.dimmer,onUpdate:function(n){const t=this.parent.getPosition(Q.in,.3333333333333333,0);this.points=[t,Vt(n.serverRoom,t,!1),n.serverRoom]}}),new De({group:3,sensorType:Ee.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,1/3,0)]}}),new De({group:3,sensorType:Ee.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,2/3,0)]}}),new De({offset:[0,.3],sensorType:Ee.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(Q.in,3/4,0);this.points=[t,Vt(n,t,!0),n]}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[Ee.camera,Ee.poe].map(n=>new De({sensorType:n,cableType:da.OutsidePOE,offsetWall:-.3,onUpdate:function(t){const e=this.parent.getPosition(Q.in,0,0);this.points=[e,H(e,[-1,1]),t.serverRoom]}})),new De({sensorType:Ee.lightSwitch,onUpdate:function(n){const t=this.parent.getPosition(Q.in,.3333333333333333,0);this.points=[t,Vt(n.serverRoom,t,!1),n.serverRoom]}}),new Oi({width:.9,rotate:0,onUpdate:function(n){this.origin=H(this.parent.sides[Q.in][0],[0,.5])}}),new Oi({width:.9,rotate:0,onUpdate:function(n){this.origin=H(this.parent.sides[Q.in][1],[0,-1.4])}}),new vi({scale:[-1,-1],outside:!0,onUpdate:function(n){this.origin=H(this.parent.sides[Q.in][0],[0,this.parent.parent.height/2-this.width])}}),new vi({scale:[-1,1],outside:!0,onUpdate:function(n){this.origin=H(this.parent.sides[Q.in][0],[0,this.parent.parent.height/2+this.width])}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Oi({width:1.2,rotate:-90,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,.5,this.width/2)}}),new De({group:3,amount:2,sensorType:Ee.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,1/3,0)]}}),new De({group:3,sensorType:Ee.socket,amount:2,offset:[0,.3],onUpdate:function(){this.points=[this.parent.getPosition(Q.in,2/3,0)]}}),new De({sensorType:Ee.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(Q.in,1/4,0),e=this.parent.parent.northWestCorner;this.points=[t,Vt(t,e,!0),e,Vt(n,e,!0),n]}})]}),new We({type:Oe.inner,floor:te.ground,onUpdate:function(n){this.drawByRoom(3,0,n,Ht.straight,Ht.straight)},parts:[new De({sensorType:Ee.lightSwitch,onUpdate:function(n){const t=this.parent.getPosition(Q.in,.6666666666666666,0);this.points=[t,Vt(n.serverRoom,t,!1),n.serverRoom]}}),new vi({scale:[-1,-1],outside:!0,onUpdate:function(n){this.origin=H(this.parent.sides[Q.in][1],[0,this.parent.parent.height/2-this.width])}}),new vi({scale:[-1,1],outside:!0,onUpdate:function(n){this.origin=H(this.parent.sides[Q.in][1],[0,this.parent.parent.height/2+this.width])}})]}),new De({sensorType:Ee.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const t=this.parent;this.points=[H(t.northWestCorner,[t.width,t.height/2-1]),H(t.northWestCorner,[t.width,0]),H(t.northWestCorner,[0,0]),H(t.northWestCorner,[0,t.height/2-1])]}}),new De({sensorType:Ee.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const t=this.parent;this.points=[H(t.northWestCorner,[0,t.height/2+1]),H(t.northWestCorner,[0,t.height]),H(t.northWestCorner,[t.width,t.height]),H(t.northWestCorner,[t.width,t.height/2+1])]}}),new De({group:3,sensorType:Ee.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=H(this.parent.northWestCorner,[0,0]);this.points=[e,Vt(n.serverRoom,e,!0),n.serverRoom]}}),new De({group:3,sensorType:Ee.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const t=this.parent,e=H(t.northWestCorner,[-n.wallInnerThickness,t.height/2+1]);this.points=[H(t.northWestCorner,[0,t.height/2+1]),e,Vt(n.serverRoom,e,!1),n.serverRoom]}}),new De({sensorType:Ee.light,onUpdate:function(n){const e=H(this.parent.center,[0,0]);this.points=[e,Vt(n.serverRoom,e,!1),n.serverRoom]}})]}),new ki({name:"Central",floor:te.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.d-n.stramien.in.ns.b)},parts:[new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=H(this.parent.northWestCorner,[this.parent.width,n.stramien.in.ns.c-n.stramien.in.ns.b]),this.sides={[Q.in]:[H(this.origin,[n.wallOuterThickness,+n.wallOuterThickness]),H(this.origin,[n.wallOuterThickness,this.innerWallLength+n.wallOuterThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,this.innerWallLength])]}},parts:[new De({group:4,amount:3,sensorType:Ee.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,.5,0)]}}),new De({group:4,amount:2,sensorType:Ee.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,0,-1)]}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[new De({sensorType:Ee.lightSwitch,onUpdate:function(n){const t=this.parent.getPosition(Q.in,0,1.5);this.points=[t,Vt(n.serverRoom,t,!1),n.serverRoom]}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Oi({floor:te.all,windowForm:Zc.windowWall,rotate:90,onUpdate:function(n){const t=Q.in;this.width=this.parent.parent.width,this.origin=this.parent.sides[t][0]}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=H(this.parent.northWestCorner,[0,n.stramien.in.ns.d-n.stramien.in.ns.b]),this.sides={[Q.in]:[H(this.origin,[-n.wallOuterThickness,+n.wallOuterThickness]),H(this.origin,[-n.wallOuterThickness,-this.innerWallLength+n.wallOuterThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,-this.innerWallLength])]}},parts:[new De({group:5,amount:6,sensorType:Ee.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,.5,0)]}}),new De({group:5,amount:6,sensorType:Ee.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,1,1)]}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new De({sensorType:Ee.lightSwitch,onUpdate:function(n){const t=this.parent.getPosition(Q.in,1,-1.5);this.points=[t,Vt(n.serverRoom,t,!1),n.serverRoom]}})]}),new We({type:Oe.inner,floor:te.all,onUpdate:function(n){this.drawByRoom(0,1,n,Ht.straight,Ht.straight)},parts:[]}),new De({group:7,offset:[.6,0],sensorType:Ee.perilex,verticalCableLength:4,onUpdate:function(n){const t=H(this.parent.northWestCorner,[0,this.parent.height-2]);this.points=[t,Vt(t,n.serverRoom,!0),n.serverRoom]}}),new De({group:4,cableOnly:!0,sensorType:Ee.socket,amount:2,onUpdate:function(n){const t=H(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[H(this.parent.northWestCorner,[this.parent.width,this.parent.height]),H(this.parent.northWestCorner,[this.parent.width,0]),t,Vt(t,n.serverRoom,!0),n.serverRoom]}}),new De({group:5,cableOnly:!0,sensorType:Ee.socket,amount:2,onUpdate:function(n){const t=H(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[H(this.parent.northWestCorner,[0,this.parent.height]),H(this.parent.northWestCorner,[0,0]),t,Vt(t,n.serverRoom,!0),n.serverRoom]}}),new De({group:5,amount:6,sensorType:Ee.socket,onUpdate:function(n){const t=H(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),e=H(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[t,Vt(t,e,!0),e]}}),new De({group:5,amount:2,offset:[.3,0],sensorType:Ee.socket,onUpdate:function(n){const t=H(this.parent.northWestCorner,[0*this.parent.width,.15*this.parent.height]),e=H(this.parent.northWestCorner,[0,.15*this.parent.height]);this.points=[t,Vt(t,e,!0),e]}}),new De({group:4,amount:2,offset:[-.3,0],sensorType:Ee.socket,onUpdate:function(n){const t=H(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]),e=H(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]);this.points=[t,Vt(t,e,!0),e]}}),new De({sensorType:Ee.smoke,verticalCableLength:6,onUpdate:function(n){const t=H(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),e=H(this.parent.northWestCorner,[0*this.parent.width,.8*this.parent.height]),i=this.parent.northWestCorner;this.points=[t,e,i,Vt(i,n.serverRoom,!0),n.serverRoom]}}),new De({sensorType:Ee.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,t=H(this.parent.northWestCorner,[0,.5*this.parent.height-2]);this.points=[t,Vt(n,t,!1),n]}}),new De({sensorType:Ee.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,t=H(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[t,Vt(n,t,!1),n]}}),new De({offset:[-.3,0],sensorType:Ee.ethernet,onUpdate:function(){const n=this.parent.parent.serverRoom,t=H(this.parent.northWestCorner,[this.parent.width,.5*this.parent.height-2]);this.points=[t,Vt(n,t,!1),n]}}),new De({sensorType:Ee.pir,cableType:da.SharedEthernet,offset:[0,.3],onUpdate:function(n){const t=this.parent,e=H(t.northWestCorner,[t.width/2,0]),i=Vt(e,n.serverRoom,!0);this.points=[e,i,n.serverRoom]}})]}),new ki({name:"Hall",floor:te.ground,onUpdate:function(n){this.northWestCorner=n.stair.stairOrigin,this.squaredRoom(n.stair.totalWidth-n.stair.walkWidth,n.stramien.in.ns.b-n.stair.stairOrigin[1]-n.wallInnerThickness)},parts:[new De({sensorType:Ee.pir,cableType:da.SharedEthernet,offset:[-.3,0],onUpdate:function(n){const t=this.parent,e=H(t.northWestCorner,[t.width,t.height-1]),i=H(t.northWestCorner,[t.width,t.height]);this.points=[e,i,n.serverRoom]}}),new We({type:Oe.inner,floor:te.ground,onUpdate:function(n){this.drawByRoom(1,2,n,Ht.straight,Ht.straight)},parts:[new vi({rotate:0,scale:[-1,1],onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1,-1.2-n.wallInnerThickness)}}),new De({sensorType:Ee.lightSwitch,onUpdate:function(n){const t=this.parent.getPosition(Q.in,1,-2.5);this.points=[t,Vt(n.serverRoom,t,!1),n.serverRoom]}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new De({sensorType:Ee.lightSwitch,onUpdate:function(n){const t=this.parent.getPosition(Q.in,0,2.5);this.points=[t,Vt(n.serverRoom,t,!1),n.serverRoom]}})]})]}),new ki({name:"Office",floor:te.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,Math.abs(n.stair.stairOrigin[1]-n.wallInnerThickness))},parts:[new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[2/6,4/6].map(n=>new De({offsetWall:.3,sensorType:Ee.ethernet,onUpdate:function(){const t=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(Q.in,n,0);this.points=[e,Vt(t,e,!1),t]}}))]}),new We({type:Oe.inner,onUpdate:function(n){this.drawByRoom(2,3,n,Ht.straight,Ht.straight)},parts:[new vi({rotate:90,scale:[1,1],onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1,-(n.stair.totalWidth+n.wallInnerThickness-this.width))}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[2/6,4/6].map(n=>new De({offsetWall:-.3,sensorType:Ee.ethernet,onUpdate:function(){const t=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(Q.in,n,0);this.points=[e,Vt(t,e,!1),t]}}))]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[]}),new De({sensorType:Ee.smoke,onUpdate:function(n){const t=H(this.parent.northWestCorner,[.5*this.parent.width,.5*this.parent.height]);this.points=[t,Vt(t,n.serverRoom,!0),n.serverRoom]}}),new De({sensorType:Ee.socket,amount:2,via:te.ceiling,group:6,offset:[0,.3],onUpdate:function(n){const i=H(this.parent.northWestCorner,[1,0]);this.points=[i]}}),new De({sensorType:Ee.socket,amount:2,group:6,offset:[0,.3],onUpdate:function(n){const t=this.parent,i=H(t.northWestCorner,[t.width-1,0]);this.points=[i]}}),new De({sensorType:Ee.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const t=this.parent,i=H(t.northWestCorner,[0,t.height-1]);this.points=[i]}}),new De({sensorType:Ee.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const i=H(this.parent.northWestCorner,[0,1]);this.points=[i]}}),new De({sensorType:Ee.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const t=this.parent,i=H(t.northWestCorner,[t.width,1]);this.points=[i]}}),new De({sensorType:Ee.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const t=this.parent,i=H(t.northWestCorner,[t.width,t.height-1]);this.points=[i]}}),new De({sensorType:Ee.socket,amount:2,cableOnly:!0,group:6,onUpdate:function(n){const t=this.parent;this.points=[H(t.northWestCorner,[0,t.height-1]),H(t.northWestCorner,[0,0]),H(t.northWestCorner,[t.width,0]),H(t.northWestCorner,[t.width,t.height]),H(t.northWestCorner,[.5*t.width,t.height]),Vt(n.serverRoom,H(t.northWestCorner,[.5*t.width,t.height]),!1),n.serverRoom]}})]}),new ki({name:"Toilet",floor:te.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness,n.stramien.in.ns.b-1.2-n.wallInnerThickness],this.squaredRoom(.8,1.2)},parts:[new We({type:Oe.inner,onUpdate:function(n){this.drawByRoom(0,1,n,Ht.straight,Ht.outside)}}),new We({type:Oe.inner,onUpdate:function(n){this.drawByRoom(1,2,n,Ht.outside,Ht.straight)}}),new We({type:Oe.theoretic,floor:te.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.innerWallLength=t.height,this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,-this.innerWallLength])]}},parts:[new De({sensorType:Ee.lightSwitch,onUpdate:function(n){const t=this.parent.getPosition(Q.in,0,.8);this.points=[t,Vt(n.serverRoom,t,!1),n.serverRoom]}}),new vi({scale:[1,1],rotate:0,floor:te.ground,onUpdate:function(n){this.origin=H(this.parent.getPosition(Q.in,0,0),[-n.wallInnerThickness,0])}})]})]}),new ki({name:"Server",floor:te.ground,onUpdate:function(n){const e=n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+1.2;this.northWestCorner=[e,n.stramien.in.ns.b-.5-n.wallInnerThickness],this.squaredRoom(n.stramien.in.we.c-e,.5)},parts:[new We({type:Oe.inner,onUpdate:function(n){this.drawByRoom(0,1,n,Ht.straight,Ht.straight)}}),new De({sensorType:Ee.smoke,onUpdate:function(n){const t=this.parent.center;this.points=[t,Vt(t,n.serverRoom,!0),n.serverRoom]}}),...[Ee.poe,Ee.wifi].map(n=>new De({offset:[0,.3],sensorType:n,onUpdate:function(t){const e=this.parent.center;this.points=[e,Vt(e,t.serverRoom,!0),t.serverRoom]}})),...[Ee.lightSwitch,Ee.temperature].map(n=>new De({sensorType:n,offset:[0,.3],onUpdate:function(t){const e=this.parent,i=H(e.northWestCorner,[.2*e.width,0*e.height]),r=H(e.northWestCorner,[0*e.width,0*e.height]);this.points=[i,r,Vt(t.serverRoom,r,!1),t.serverRoom]}}))]}),new ki({name:"Tower",floor:te.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.out.we.c-(n.wallOuterThickness-n.wallInnerThickness),n.tower.innerCoords[0][1]],n.showTower?(this.center=H(this.northWestCorner,[1,1]),this.centralElectricity=this.center,this.coords=[this.northWestCorner,n.tower.innerCoords[0],n.tower.innerCoords[1],n.tower.innerCoords[2],n.tower.innerCoords[3],[n.tower.innerCoords[3][0],n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]]):this.coords=[]},parts:[new We({type:Oe.inner,floor:te.ground,onUpdate:function(n){this.drawByRoom(6,0,n,Ht.outside,Ht.straight)},parts:[new vi({scale:[1,-1],rotate:90,floor:te.ground,onUpdate:function(n){this.floor=te.ground,this.origin=this.parent.getPosition(Q.in,0,0)}})]}),new We({type:Oe.inner,floor:te.ground,onUpdate:function(n){this.drawByRoom(5,6,n,Ht.straight,Ht.outside)},parts:[new vi({scale:[-1,-1],rotate:0,floor:te.ground,onUpdate:function(n){this.floor=te.ground,this.origin=this.parent.getPosition(Q.in,1,0)}})]}),new De({sensorType:Ee.pir,cableType:da.SharedEthernet,offset:[.3,0],onUpdate:function(n){const t=this.parent,e=H(t.northWestCorner,[0,t.height-1]),i=Vt(e,n.serverRoom,!0);this.points=[e,i,n.serverRoom]}}),new De({sensorType:Ee.socket,amount:2,cableOnly:!0,group:4,onUpdate:function(n){const e=this.parent.centralElectricity;this.points=[e,Vt(e,n.serverRoom,!0),n.serverRoom]}})]}),new ki({name:"Laundry",floor:te.ground,onUpdate:function(n){const t=n.stramien.in.ns.b-n.stair.stairOrigin[1]-1.2-2*n.wallInnerThickness,e=n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness;this.northWestCorner=[e,n.stair.stairOrigin[1]],this.squaredRoom(n.stramien.in.we.c-e,t)},parts:[new De({sensorType:Ee.smoke,onUpdate:function(n){const t=this.parent.center;this.points=[t,Vt(t,n.serverRoom,!0),n.serverRoom]}}),new De({sensorType:Ee.ethernet,offset:[.3,0],onUpdate:function(n){const t=n.serverRoom,e=this.parent,i=H(e.northWestCorner,[0*e.width,.5*e.height]);this.points=[i,Vt(t,i,!1),t]}})]})],a:[new ki({name:"North",theoretic:!0,floor:te.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.b-n.stramien.in.ns.a)},parts:[new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[Q.in]:[H(this.origin,[-n.wallOuterThickness,-n.wallOuterThickness]),H(this.origin,[this.parent.width+n.wallOuterThickness,-n.wallOuterThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}},parts:[...[1/6,5/6].map(n=>new De({offset:[0,.3],sensorType:Ee.ethernet,onUpdate:function(){const t=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(Q.in,n,0);this.points=[e,Vt(t,e,!1),t]}})),new Oi({rotate:90,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1/3,this.width/2)}}),new Oi({rotate:90,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,2/3,this.width/2)}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[this.parent.width,0]),this.sides={[Q.in]:[H(this.origin,[n.wallOuterThickness,-n.wallOuterThickness]),n.tower.outerCoords[0]],[Q.in]:[H(this.origin,[0,0]),n.tower.intersectionWest]}},parts:[...[Ee.camera,Ee.poe].map(n=>new De({sensorType:n,cableType:da.OutsidePOE,offsetWall:-.3,onUpdate:function(t){const e=this.parent.getPosition(Q.in,0,0);this.points=[e,H(e,[-1,1]),t.serverRoom]}})),new Oi({rotate:0,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1/3,-this.width/2)}}),new Oi({rotate:0,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,2/3,-this.width/2)}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness,this.origin=H(this.parent.northWestCorner,[this.parent.width,0]),this.innerWallLength=this.parent.height,this.sides={[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,this.innerWallLength])]}},parts:[]}),new We({type:Oe.inner,floor:te.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[this.parent.width,this.parent.height]),this.sides={[Q.in]:[H(this.origin,[0,-n.wallInnerThickness]),H(this.origin,[-this.parent.width,-n.wallInnerThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[-this.parent.width,0])]}},parts:[new vi({rotate:-90,scale:[1,-1],onUpdate:function(n){this.origin=H(this.parent.sides[Q.in][1],[.5,0])}})]}),new We({type:Oe.theoretic,floor:te.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,this.parent.height]),this.sides={[Q.in]:[H(this.origin,[-n.wallOuterThickness,-n.wallOuterThickness]),H(this.origin,[-n.wallOuterThickness,-this.parent.height-n.wallOuterThickness])],[Q.in]:[H(this.origin,[0,0]),H(this.origin,[0,-this.parent.height])]}},parts:[new vi({floor:te.ground,rotate:0,scale:[1,-1],onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,0,n.tower.houseIncrement)}}),new De({sensorType:Ee.ethernet,onUpdate:function(n){this.offsetWall=-n.wallOuterThickness;const t=n.serverRoom,e=this.parent.getPosition(Q.in,0,n.tower.houseIncrement-.8);this.points=[e,Vt(t,e,!1),t]}}),new De({sensorType:Ee.ethernet,offset:[.3,0],onUpdate:function(n){const t=n.serverRoom,e=this.parent.getPosition(Q.in,0,n.tower.houseIncrement-.8);this.points=[e,Vt(t,e,!1),t]}}),new Oi({rotate:180,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1/3,this.width/2)}}),new Oi({rotate:180,width:.9,onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,2/3,this.width/2)}})]})]}),...Bye]},zr=[];for(let n=0;n<256;n++)zr[n]=(n<16?"0":"")+n.toString(16);Math,Math;var ap=(()=>{return(n=ap||(ap={})).amount="amount",n.name="name",n.sizeOrVersion="sizeOrVersion",n.price="price",n.priceAvg="priceAvg",n.priceMax="priceMax",n.priceTotal="priceTotal",n.remarks="other",n.unit="unit",ap;var n})();class ir{constructor(t){this.amount=1,this.type="single",Object.assign(this,t)}get calcPrice(){return jt(3,this.amount*this.price)}get calcAmount(){return this.amount}}class yx extends ir{constructor(t){super(t),this.costs=[],this.type="group",this.collapsed=!1,Object.assign(this,t)}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}get calcPrice(){return mA(this.costs.map(t=>t.calcPrice))}get calcAmount(){return mA(this.costs.map(t=>t.amount))}}class jye extends yx{constructor(t){super(t),this.costs=[],this.type="total",Object.assign(this,t)}get calcPrice(){return mA(this.costs.map(t=>t.calcPrice))}get calcAmount(){return 0}get folded(){return'<span class="material-icons">remove</span>'}}let rr=(()=>{class n{constructor(e){this.appService=e,this.house$=new Ln(new VA(Vye)),this.roomKeys=this.house$.value.partsFlatten.filter(i=>i instanceof ki).map(i=>i.selector),this.wallKeys=this.house$.value.partsFlatten.filter(i=>i instanceof We).map(i=>i.selector),this.doorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof vi).map(i=>i.selector),this.windowKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Oi).map(i=>i.selector),this.sensorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof De).map(i=>i.selector).sort((i,r)=>i.localeCompare(r))}update(e="house",i,r,s){console.log("updates");const o=this.house$.value;"house"===e&&(o[i]=r),"stair"===e&&(o.stair[i]=r),"cross"===e&&(o.cross[i]=r),o.calculateHouse(),o.calculateStats(),this.house$.next(o),void 0!==s&&(this.appService.tag$.next(s),clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.appService.tag$.next(void 0)},600))}destroyParts(){const e=r=>{r.parts.forEach(function(){var s=yr(function*(o){o.svg=void 0,void 0!==o.parts&&e(o)});return function(o){return s.apply(this,arguments)}}())},i=this.house$.value;e(i),e(i.cross),e(i.stair)}getGroups(e){return[...new Set(Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof De).filter(r=>r.sensorType===e).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s)}getOutlets(e){return jt(1,Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof De).filter(r=>r.sensorType===e).map(r=>r.amount).reduce((r,s)=>r+s,0))}getCable(e,i=1){return jt(i,Object.values(this.house$.value.partsFlatten).filter(s=>s instanceof De).filter(s=>s.sensorType===e).map(s=>s.cableLength).reduce((s,o)=>s+o,0))}getWallLength(){const e=this.house$.value;return{innerLength:Math.ceil($l(Object.values(e.partsFlatten).filter(s=>s instanceof We).map(s=>{let o=0;return s.type===Oe.inner&&(o+=s.getLength(Q.out)),o+=s.getLength(Q.in),o}))),outerLength:Math.ceil($l(Object.values(e.partsFlatten).filter(s=>s instanceof We).filter(s=>s.type===Oe.outer).map(s=>s.getLength(Q.out)),1))}}getWallArea(){const e=this.house$.value;return{innerArea:Math.ceil($l(Object.values(e.partsFlatten).filter(s=>s instanceof We).map(s=>{let o=0;return s.type===Oe.inner&&(o+=s.getArea(Q.out)),o+=s.getArea(Q.in),o}))),outerArea:Math.ceil($l(Object.values(e.partsFlatten).filter(s=>s instanceof We).filter(s=>s.type===Oe.outer).map(s=>s.getArea(Q.out)),1))}}getT(e,i,r,s=(()=>!0),o=!0){const a=function zye(){const n=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(zr[255&n]+zr[n>>8&255]+zr[n>>16&255]+zr[n>>24&255]+"-"+zr[255&t]+zr[t>>8&255]+"-"+zr[t>>16&15|64]+zr[t>>24&255]+"-"+zr[63&e|128]+zr[e>>8&255]+"-"+zr[e>>16&255]+zr[e>>24&255]+zr[255&i]+zr[i>>8&255]+zr[i>>16&255]+zr[i>>24&255]).toLowerCase()}(),l=Object.values(this.house$.value.partsFlatten.filter(c=>c instanceof e).filter(c=>s(c)).reduce((c,u)=>{const d=i.map(h=>`${u[h]}`).join(",");return d in c||(c[d]={count:0,part:u}),c[d].count+=e!==De||o?1:u.getLength(),c},{})).map(c=>{const u=new ir(r(c.part));return u.amount=jt(1,c.count),u.uuid=a,u});if(l.length>1){const c=new yx({uuid:a,name:`${l[0].name}`,costs:l});return c[l[0].name]=!1,c}{if(!l[0])return;const c=l[0];return c.uuid=void 0,c}}}return n.\u0275fac=function(e){return new(e||n)(ee(Wi))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lp=(()=>{class n{constructor(e,i){this.overlay=e,this.houseService=i,this.tooltipHTML$=new Ln(void 0),this.unsubscribe=new Tt}attachPopup([e,i],r){this.detachOverlay(),this.origin=r instanceof De?r.svgIcon.node():r.svg.node(),this.overlayRef=this.overlay.create({positionStrategy:this.getPositionStrategy([e,i]),scrollStrategy:this.overlay.scrollStrategies.reposition(),hasBackdrop:!1}),this.overlayRef.backdropClick().pipe(In(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.attachOverlay(r)}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach()}updateOverlay(){}attachOverlay(e){if(this.overlayRef&&!this.overlayRef.hasAttached()){const i=new Vb(Nye);this.componentRef=this.overlayRef.attach(i),this.componentRef.instance.html=e.tooltip(this.houseService.house$.value)}}getPositionStrategy([e,i]){return this.overlay.position().flexibleConnectedTo(this.origin).withPositions([new Hb({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"},0,-20),new Hb({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"},0,20,"flipped")]).withPush(!0)}}return n.\u0275fac=function(e){return new(e||n)(ee(Vl),ee(rr))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$ye=(()=>{class n{constructor(e,i){this.appService=e,this.houseService=i,this.appService.states$.subscribe(r=>{this.states=r,this.house=this.houseService.house$.value,this.cross=this.house.cross,this.filterOut(),this.appService.update$.next()})}filterOut(){this.house.tower.footprintVisible=this.states.includes(ua.towerFootprint),[...this.house.parts,...this.cross.parts].filter(e=>e instanceof $i).forEach(e=>e.visible=this.states.includes(ua.measure)),this.house.parts.filter(e=>e.selector.includes("house-stramien-")).forEach(e=>{e.visible=this.states.includes(ua.stramien)}),this.house.parts.filter(e=>e.selector.includes("grid-index")).forEach(e=>{e.visible=this.states.includes(ua.grid)})}}return n.\u0275fac=function(e){return new(e||n)(ee(Wi),ee(rr))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qye(n,t){if(1&n){const e=Co();S(0,"div",6)(1,"button",7),Xe("click",function(){pn(e);const r=Qe(3);return r.setStates(r.States.grid)}),S(2,"label"),k(3," Grid "),T(),S(4,"mat-icon",8),k(5,"grid_on"),T()(),S(6,"button",7),Xe("click",function(){pn(e);const r=Qe(3);return r.setStates(r.States.stramien)}),S(7,"label"),k(8," Stramien "),T(),S(9,"mat-icon",8),k(10,"delete"),T()(),S(11,"button",7),Xe("click",function(){pn(e);const r=Qe(3);return r.setStates(r.States.towerFootprint)}),S(12,"label"),k(13," Tower footprint "),T(),S(14,"mat-icon",8),k(15,"hexagon"),T()(),S(16,"button",7),Xe("click",function(){pn(e);const r=Qe(3);return r.setStates(r.States.measure)}),S(17,"label"),k(18," Measurements "),T(),S(19,"mat-icon",8),k(20,"square_foot"),T()()()}if(2&n){const e=Qe(2).ngIf,i=Qe();$(1),Zt("active",e.includes(i.States.grid)),$(5),Zt("active",e.includes(i.States.stramien)),$(5),Zt("active",e.includes(i.States.towerFootprint)),$(5),Zt("active",e.includes(i.States.measure))}}function Yye(n,t){1&n&&(S(0,"mat-icon"),k(1,"exposure_plus_1"),T())}function Xye(n,t){1&n&&(S(0,"mat-icon"),k(1,"exposure_zero"),T())}function Kye(n,t){if(1&n){const e=Co();S(0,"button",3),Xe("click",function(){return pn(e),Qe(3).setFloor()}),Ge(1,Yye,2,0,"mat-icon",2),Ge(2,Xye,2,0,"mat-icon",2),T()}if(2&n){const e=t.ngIf,i=Qe(3);$(1),Z("ngIf",e===i.Floor.top),$(1),Z("ngIf",e===i.Floor.ground)}}function Zye(n,t){if(1&n){const e=Co();Tr(0),Ge(1,qye,21,8,"div",4),S(2,"button",3),Xe("click",function(){pn(e);const r=Qe(2);return r.extra=!r.extra}),S(3,"mat-icon"),k(4,"keyboard_double_arrow_down "),T()(),Ge(5,Kye,3,2,"button",5),Dr(6,"async"),Ar()}if(2&n){const e=Qe(2);$(1),Z("ngIf",e.extra),$(1),Zt("active",e.extra),$(1),Yy("transform","rotate(",e.extra?20:180,"deg)"),Xr("transition","0.4s"),$(2),Z("ngIf",Rr(6,9,e.floor$))}}function Qye(n,t){1&n&&(S(0,"mat-icon"),k(1,"home"),T())}function Jye(n,t){1&n&&(S(0,"mat-icon",8),k(1,"home_outline"),T())}function e0e(n,t){if(1&n){const e=Co();S(0,"div",6)(1,"button",7),Xe("click",function(){pn(e);const r=Qe(3);return r.setStates(r.States.measure)}),S(2,"label"),k(3," Measurements "),T(),S(4,"mat-icon"),k(5,"square_foot"),T()(),S(6,"button",7),Xe("click",function(){pn(e);const r=Qe(3);return r.setStates(r.States.grey)}),S(7,"label"),k(8," Silhouette "),T(),Ge(9,Qye,2,0,"mat-icon",9),Ge(10,Jye,2,0,"ng-template",null,10,Wa),T()()}if(2&n){const e=ui(11),i=Qe(2).ngIf,r=Qe();$(1),Zt("active",i.includes(r.States.measure)),$(5),Zt("active",i.includes(r.States.grey)),$(3),Z("ngIf",!i.includes(r.States.grey))("ngIfElse",e)}}function t0e(n,t){if(1&n){const e=Co();Tr(0),Ge(1,e0e,12,6,"div",4),S(2,"button",3),Xe("click",function(){pn(e);const r=Qe(2);return r.extra=!r.extra}),S(3,"mat-icon"),k(4,"keyboard_double_arrow_down "),T()(),Ar()}if(2&n){const e=Qe(2);$(1),Z("ngIf",e.extra),$(1),Zt("active",e.extra),$(1),Yy("transform","rotate(",e.extra?-20:-180,"deg)"),Xr("transition","0.4s")}}function n0e(n,t){1&n&&(S(0,"mat-icon"),k(1,"fullscreen"),T())}function i0e(n,t){1&n&&(S(0,"mat-icon"),k(1,"fullscreen_exit"),T())}function r0e(n,t){if(1&n){const e=Co();S(0,"div",1),Dr(1,"async"),Ge(2,Zye,7,11,"ng-container",2),Dr(3,"async"),Ge(4,t0e,5,8,"ng-container",2),Dr(5,"async"),S(6,"button",3),Xe("click",function(){pn(e);const r=Qe();return r.fullscreen=!r.fullscreen}),Ge(7,n0e,2,0,"mat-icon",2),Ge(8,i0e,2,0,"mat-icon",2),T()()}if(2&n){const e=Qe();mi("container\nsection-",Rr(1,7,e.scroll$).section,""),$(2),Z("ngIf",Rr(3,9,e.scroll$).graphic===e.Graphic.plan),$(2),Z("ngIf",Rr(5,11,e.scroll$).graphic===e.Graphic.cross),$(3),Z("ngIf",!e.fullscreen),$(1),Z("ngIf",e.fullscreen)}}let s0e=(()=>{class n{constructor(e,i,r,s){this.appService=e,this.elementRef=i,this.houseService=r,this.cookieService=s,this.house$=this.houseService.house$,this.Floor=te,this.floor$=this.appService.floor$,this.scroll$=this.appService.scroll$,this.states$=this.appService.states$,this.setFloor=()=>this.appService.setFloor(),this.Graphic=vr,this.States=ua,this.extra=!0,this.setStates=this.appService.setStates}get fullscreen(){return this.appService.fullscreen$.value}set fullscreen(e){this.cookieService.set("fullscreen",`${e}`),this.appService.fullscreen$.next(e)}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(M(Wi),M(Ve),M(rr),M(zE))},n.\u0275cmp=ft({type:n,selectors:[["controls"]],decls:2,vars:3,consts:[["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",3,"class",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],[4,"ngIf"],["mat-mini-fab","","color","accent",3,"click"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",4,"ngIf"],["mat-mini-fab","","color","accent",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",1,"sub-controls"],["mat-mini-fab","",3,"click"],[2,"font-family","Material Icons Outlined"],[4,"ngIf","ngIfElse"],["elseGrey",""]],template:function(e,i){1&e&&(Ge(0,r0e,9,13,"div",0),Dr(1,"async")),2&e&&Z("ngIf",Rr(1,1,i.states$))},directives:[Ys,Jg,Wf,gb,AU,pH],pipes:[kf],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:0px;z-index:9999}.controls-left[_nghost-%COMP%]{left:50px}.controls-left[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{left:-24px;bottom:8px;position:relative}.controls-left[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:left;left:50px;color:var(--color-100)}.controls-right[_nghost-%COMP%]{right:50px}.controls-right[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}.controls-right[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100)}.active[_ngcontent-%COMP%]{background-color:var(--accent-50)!important;box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}"],data:{animation:[OG]}}),n})();const LG={leading:!0,trailing:!1};const l0e=["svg"];let bx=(()=>{class n{constructor(e,i,r,s){this.houseService=e,this.appService=i,this.tooltipService=r,this.host=s,this.isChild=!1,this.marginInMeters=[0,0,0,0],this.marginInPixels=[0,0,0,0],this.house$=this.houseService.house$,this.sections=Object.values(tt),this.tags=Object.values(To),this.resize$=new Ln(void 0),this.subscriptions=[],this.drawingSize=[[0,0],[200,100]]}onClick(e){const i=a=>{if(a&&a!==this.svgEl.nativeElement)return"id"in a&&`${a.id}`.length>0?a.id:i(a.parentNode)},r=i(e.target),s=()=>{this.tooltipService.detachOverlay(),document.body.classList.remove("selection-active"),document.querySelectorAll("svg .selected").forEach((a,l)=>{a.classList.remove("selected")})};if(!r)return s();const o=this.house.partsFlatten.find(a=>a.selector===r);if(!o)return console.log(`Couldnt find [${r}] in `,e.target,"probably its only a part of its full ID"),s();document.body.classList.add("selection-active"),o.select(),this.tooltipService.attachPopup([e.pageX,e.pageY],o)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.observer&&this.observer.unobserve(this.host.nativeElement),console.log("destroy",this.graphic),this.houseService.destroyParts()}svgUpdateMarginAndSize(){}setUp(){this.svg=Fn(this.svgEl.nativeElement),this.g=this.svg.select("g"),this.observer=new ResizeObserver(e=>this.resize$.next(e)),this.observer.observe(this.host.nativeElement),this.resize$.pipe(Ya(e=>_t(void 0))),this.subscriptions.push(Bh(this.house$.pipe(ji(e=>{const i=this.house$.value;this.house=i,this.cross=i.cross,this.stair=i.stair})),this.appService.update$,this.appService.fullscreen$.pipe(ji(e=>{e?this.svg.call(function Dye(){var u,d,h,n=Cye,t=Sye,e=Aye,i=Eye,r=Tye,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=bye,c=Wz("start","zoom","end"),f=500,m=0,g=10;function _(I){I.property("__zoom",TG).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",N).filter(r).on("touchstart.zoom",C).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(I,z){return(z=Math.max(s[0],Math.min(s[1],z)))===I.k?I:new jl(z,I.x,I.y)}function y(I,z,D){var P=z[0]-D[0]*I.k,O=z[1]-D[1]*I.k;return P===I.x&&O===I.y?I:new jl(I.k,P,O)}function b(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function x(I,z,D,P){I.on("start.zoom",function(){w(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(P).end()}).tween("zoom",function(){var O=this,q=arguments,K=w(O,q).event(P),J=t.apply(O,q),j=null==D?b(J):"function"==typeof D?D.apply(O,q):D,we=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),fe=O.__zoom,_e="function"==typeof z?z.apply(O,q):z,ie=l(fe.invert(j).concat(we/fe.k),_e.invert(j).concat(we/_e.k));return function(Re){if(1===Re)Re=_e;else{var Pe=ie(Re),et=we/Pe[2];Re=new jl(et,j[0]-Pe[0]*et,j[1]-Pe[1]*et)}K.zoom(null,Re)}})}function w(I,z,D){return!D&&I.__zooming||new E(I,z)}function E(I,z){this.that=I,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,z),this.taps=0}function R(I,...z){if(n.apply(this,arguments)){var D=w(this,z).event(I),P=this.__zoom,O=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,i.apply(this,arguments)))),q=Ld(I);if(D.wheel)(D.mouse[0][0]!==q[0]||D.mouse[0][1]!==q[1])&&(D.mouse[1]=P.invert(D.mouse[0]=q)),clearTimeout(D.wheel);else{if(P.k===O)return;D.mouse=[q,P.invert(q)],ax(this),D.start()}T_(I),D.wheel=setTimeout(K,150),D.zoom("mouse",e(y(v(P,O),D.mouse[0],D.mouse[1]),D.extent,o))}function K(){D.wheel=null,D.end()}}function F(I,...z){if(!h&&n.apply(this,arguments)){var D=I.currentTarget,P=w(this,z,!0).event(I),O=Fn(I.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",we,!0),q=Ld(I,D),K=I.clientX,J=I.clientY;mye(I.view),NA(I),P.mouse=[q,this.__zoom.invert(q)],ax(this),P.start()}function j(fe){if(T_(fe),!P.moved){var _e=fe.clientX-K,ie=fe.clientY-J;P.moved=_e*_e+ie*ie>m}P.event(fe).zoom("mouse",e(y(P.that.__zoom,P.mouse[0]=Ld(fe,D),P.mouse[1]),P.extent,o))}function we(fe){O.on("mousemove.zoom mouseup.zoom",null),gye(fe.view,P.moved),T_(fe),P.event(fe).end()}}function N(I,...z){if(n.apply(this,arguments)){var D=this.__zoom,P=Ld(I.changedTouches?I.changedTouches[0]:I,this),O=D.invert(P),K=e(y(v(D,D.k*(I.shiftKey?.5:2)),P,O),t.apply(this,z),o);T_(I),a>0?Fn(this).transition().duration(a).call(x,K,P,I):Fn(this).call(_.transform,K,P,I)}}function C(I,...z){if(n.apply(this,arguments)){var q,K,J,j,D=I.touches,P=D.length,O=w(this,z,I.changedTouches.length===P).event(I);for(NA(I),K=0;K<P;++K)j=[j=Ld(J=D[K],this),this.__zoom.invert(j),J.identifier],O.touch0?!O.touch1&&O.touch0[2]!==j[2]&&(O.touch1=j,O.taps=0):(O.touch0=j,q=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),q&&(O.taps<2&&(d=j[0],u=setTimeout(function(){u=null},f)),ax(this),O.start())}}function L(I,...z){if(this.__zooming){var q,K,J,j,D=w(this,z).event(I),P=I.changedTouches,O=P.length;for(T_(I),q=0;q<O;++q)J=Ld(K=P[q],this),D.touch0&&D.touch0[2]===K.identifier?D.touch0[0]=J:D.touch1&&D.touch1[2]===K.identifier&&(D.touch1[0]=J);if(K=D.that.__zoom,D.touch1){var we=D.touch0[0],fe=D.touch0[1],_e=D.touch1[0],ie=D.touch1[1],Re=(Re=_e[0]-we[0])*Re+(Re=_e[1]-we[1])*Re,Pe=(Pe=ie[0]-fe[0])*Pe+(Pe=ie[1]-fe[1])*Pe;K=v(K,Math.sqrt(Re/Pe)),J=[(we[0]+_e[0])/2,(we[1]+_e[1])/2],j=[(fe[0]+ie[0])/2,(fe[1]+ie[1])/2]}else{if(!D.touch0)return;J=D.touch0[0],j=D.touch0[1]}D.zoom("touch",e(y(K,J,j),D.extent,o))}}function Y(I,...z){if(this.__zooming){var q,K,D=w(this,z).event(I),P=I.changedTouches,O=P.length;for(NA(I),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),q=0;q<O;++q)K=P[q],D.touch0&&D.touch0[2]===K.identifier?delete D.touch0:D.touch1&&D.touch1[2]===K.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),2===D.taps&&(K=Ld(K,this),Math.hypot(d[0]-K[0],d[1]-K[1])<g)){var J=Fn(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return _.transform=function(I,z,D,P){var O=I.selection?I.selection():I;O.property("__zoom",TG),I!==O?x(I,z,D,P):O.interrupt().each(function(){w(this,arguments).event(P).start().zoom(null,"function"==typeof z?z.apply(this,arguments):z).end()})},_.scaleBy=function(I,z,D,P){_.scaleTo(I,function(){return this.__zoom.k*("function"==typeof z?z.apply(this,arguments):z)},D,P)},_.scaleTo=function(I,z,D,P){_.transform(I,function(){var O=t.apply(this,arguments),q=this.__zoom,K=null==D?b(O):"function"==typeof D?D.apply(this,arguments):D,J=q.invert(K),j="function"==typeof z?z.apply(this,arguments):z;return e(y(v(q,j),K,J),O,o)},D,P)},_.translateBy=function(I,z,D,P){_.transform(I,function(){return e(this.__zoom.translate("function"==typeof z?z.apply(this,arguments):z,"function"==typeof D?D.apply(this,arguments):D),t.apply(this,arguments),o)},null,P)},_.translateTo=function(I,z,D,P,O){_.transform(I,function(){var q=t.apply(this,arguments),K=this.__zoom,J=null==P?b(q):"function"==typeof P?P.apply(this,arguments):P;return e(FA.translate(J[0],J[1]).scale(K.k).translate("function"==typeof z?-z.apply(this,arguments):-z,"function"==typeof D?-D.apply(this,arguments):-D),q,o)},P,O)},E.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,z){return this.mouse&&"mouse"!==I&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&"touch"!==I&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&"touch"!==I&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var z=Fn(this.that).datum();c.call(I,this.that,new wye(I,{sourceEvent:this.sourceEvent,target:_,type:I,transform:this.that.__zoom,dispatch:c}),z)}},_.wheelDelta=function(I){return arguments.length?(i="function"==typeof I?I:gx(+I),_):i},_.filter=function(I){return arguments.length?(n="function"==typeof I?I:gx(!!I),_):n},_.touchable=function(I){return arguments.length?(r="function"==typeof I?I:gx(!!I),_):r},_.extent=function(I){return arguments.length?(t="function"==typeof I?I:gx([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),_):t},_.scaleExtent=function(I){return arguments.length?(s[0]=+I[0],s[1]=+I[1],_):[s[0],s[1]]},_.translateExtent=function(I){return arguments.length?(o[0][0]=+I[0][0],o[1][0]=+I[1][0],o[0][1]=+I[0][1],o[1][1]=+I[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(I){return arguments.length?(e=I,_):e},_.duration=function(I){return arguments.length?(a=+I,_):a},_.interpolate=function(I){return arguments.length?(l=I,_):l},_.on=function(){var I=c.on.apply(c,arguments);return I===c?_:I},_.clickDistance=function(I){return arguments.length?(m=(I=+I)*I,_):Math.sqrt(m)},_.tapDistance=function(I){return arguments.length?(g=+I,_):g},_}().on("zoom",i=>{this.setTransform(i.transform,0)})):(this.svg.on(".zoom",null),this.setTransform())})),this.resize$.pipe(function a0e(n,t=D0,e=LG){const i=VN(n,t);return function o0e(n,t=LG){return Ti((e,i)=>{const{leading:r,trailing:s}=t;let o=!1,a=null,l=null,c=!1;const u=()=>{null==l||l.unsubscribe(),l=null,s&&(f(),c&&i.complete())},d=()=>{l=null,c&&i.complete()},h=p=>l=us(n(p)).subscribe(ci(i,u,d)),f=()=>{if(o){o=!1;const p=a;a=null,i.next(p),!c&&h(p)}};e.subscribe(ci(i,p=>{o=!0,a=p,(!l||l.closed)&&(r?f():h(p))},()=>{c=!0,(!(s&&o&&l)||l.closed)&&i.complete()}))})}(()=>i,e)}(10)),this.appService.scroll$.pipe(ji(e=>{this.section=this.appService.scroll$.value.section}))).pipe(hi(e=>void 0!==this.house)).subscribe(e=>{this.updateSVG()}))}setTransform(e="translate(0,0) scale(1)",i=100){this.g.transition().duration(i).attr("transform",e).on("end",()=>this.updateSVG())}updateSVG(){this.tooltipService.updateOverlay(),this.svgUpdateMarginAndSize();const[[e,i],[r,s]]=this.drawingSize,o=-this.marginInMeters[3]+e,a=-this.marginInMeters[0]+i,l=r+this.marginInMeters[3]+this.marginInMeters[1],c=s+this.marginInMeters[0]+this.marginInMeters[2],u=Math.abs(jt(0,this.svgEl.nativeElement.clientWidth)-this.marginInPixels[1]-this.marginInPixels[3]),d=Math.abs(jt(0,this.svgEl.nativeElement.clientHeight)-this.marginInPixels[0]-this.marginInPixels[2]),h=jt(5,l/u),f=jt(5,c/d);this.meterPerPixel=Math.max(h,f)/this.getScale();const p=this.marginInPixels.map(m=>jt(4,m*this.meterPerPixel));this.isChild||(this.setLines(),this.svg.attr("viewBox",`\n        ${-p[3]+o} \n        ${-p[0]+a} \n        ${Math.abs(l+(p[3]+p[1]))} \n        ${Math.abs(c+(p[0]+p[2]))}`).on("end",()=>this.setLines())),this.house.redrawHouse(this.appService.floor$.value,this.graphic,this.meterPerPixel)}getScale(){const e=/scale\(\d+\.?\d*/g.exec(this.g.attr("transform"));return e?Number(e[0].replace("scale(","").replace(")","")):1}setLines(){this.svgEl.nativeElement.querySelectorAll(".scale-icon>svg").forEach(e=>{const i=Math.round(32*this.meterPerPixel*64);e.setAttribute("height",`${i}px`),e.setAttribute("width",`${i}px`),e.setAttribute("x",-i/2+"px"),e.setAttribute("y",-i/2+"px")}),this.svgEl.nativeElement.querySelectorAll(".scale-icon>*:not(svg)").forEach(e=>{const i=jt(3,32*this.meterPerPixel);e.setAttribute("transform",`scale(${i})`)})}}return n.\u0275fac=function(e){return new(e||n)(M(rr),M(Wi),M(lp),M(Ve))},n.\u0275cmp=ft({type:n,selectors:[["app-svg-base"]],viewQuery:function(e,i){if(1&e&&ni(l0e,5),2&e){let r;Ct(r=St())&&(i.svgEl=r.first)}},hostBindings:function(e,i){1&e&&Xe("click",function(s){return i.onClick(s)})},inputs:{isChild:"isChild"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),FG=(()=>{class n{constructor(e,i,r){this.houseService=e,this.appService=i,this.httpClient=r}loadSVG(e,i,r){const s=new c0e(i,r);return s.get(this.httpClient,e),s}}return n.\u0275fac=function(e){return new(e||n)(ee(rr),ee(Wi),ee(wd))},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class c0e{constructor(t,e){this.selector=t,this.callback=e}get(t,e){t.get(e,{responseType:"text"}).pipe(Ts(1)).subscribe(i=>{Fn(this.selector).html(i)})}update(){this.callback(this.selector)}}function u0e(n,t){1&n&&(qn(),ae(0,"circle",42)),2&n&&zn("id","roof-point-",t.$implicit,"")}const NG=function(n){return{opacity:n}},d0e=function(){return[0,1,2,3,4,5,6,7,8,9,10]};let h0e=(()=>{class n extends bx{constructor(e,i,r,s,o){super(e,i,r,s),this.houseService=e,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.marginInMeters=[3,3,3,3],this.graphic=vr.cross,this.RoofStyle=Rs}ngAfterViewInit(){this.loadFigure(),this.setUp()}loadFigure(){this.figure=this.d3Service.loadSVG("assets/models/dude.svg",".g-figure",e=>{let s,o,a;const l=.3913732394366197;[tt.roofBasics].includes(this.section)?(s=this.house$.value.cross.groundFloorTop,o=3*this.house$.value.cross.floorThickness,a=!0):(s=this.house$.value.cross.topFloorTop,o=this.house$.value.cross.innerWidth/2-l/2+.5,a=!1),Fn(e).selectChild("svg").attr("height","1.9px").attr("y",-s-1.9+"px").attr("x",o+"px").attr("width",l+"px").selectChild("g").attr("transform",a?"translate(117,0) scale(-1 1)":"")})}svgUpdateMarginAndSize(){this.drawingSize=[[0,-this.cross.roofTop],[this.house.outerBase,this.cross.houseHeight]],this.drawBendPoint(),this.figure.update()}drawPoints(){const e=this.cross.getIntersectionWithRoof(this.cross.minimumHeight),i=this.cross.getIntersectionWithRoof(this.cross.minimumHeightRoom),r=this.cross;[...r.innerRoofContourLine,e,i].forEach((s,o)=>{Fn(`#roof-point-${o}`).attr("cx",s[0]+r.wallOuterThickness).attr("cy",-s[1]).attr("r",o<4?.1:.13).style("fill",o<4?"var(--color-50)":"var(--color-80)").attr("stroke-width",0*this.meterPerPixel)})}drawBendPoint(){Fn("#bend-point__h-line").attr("points",[[0,-this.cross.roof70Walls],[this.cross.bendPoint[0],-this.cross.roof70Walls],[this.cross.bendPoint[0],this.cross.bendPoint[1]+.1]].join(" ")).attr("stroke-width",2*this.meterPerPixel),Fn("#bend-point__h-point").attr("cx",this.cross.bendPoint[0]).attr("cy",this.cross.bendPoint[1]).attr("r",.1).attr("stroke-width",2*this.meterPerPixel)}roofCheck(e){return this.section===tt.roof70?e===Rs.roof70?1:0:this.section===tt.roofCircle?e===Rs.roofCircle?1:0:[Rs.roofCircleAnd70,e].includes(this.house$.value.cross.roofStyle)?1:0}}return n.\u0275fac=function(e){return new(e||n)(M(rr),M(Wi),M(lp),M(Ve),M(FG))},n.\u0275cmp=ft({type:n,selectors:[["app-svg-cross"]],features:[he],decls:43,vars:8,consts:[["preserveAspectRatio","xMidYMid meet",1,"cross"],["svg",""],["id","clip-roof","d","M130.532,285.709c0,0-17.042,21.134-29.287,14.291c-20.5-11.457-98.902,19.709-98.902,19.709\n    l-5.333,253.333h152.667L130.532,285.709z"],["id","diagonalHatch","patternUnits","userSpaceOnUse","width","4","height","4","patternTransform","scale(0.1)"],["d","M-1,1 l2,-2\n               M0,4 l4,-4\n               M3,5 l2,-2",2,"stroke","black","stroke-width","0.1"],["id","clip-roof2"],[0,"xlink","href","#clip-roof","overflow","visible"],["transform","rotate(0)",1,"all"],[1,"g-figure"],[1,"g-building"],["id","building-walls"],["id","building-room"],["id","building-crawler"],["id","building-ground-line"],["id","building-fill"],["id","building-ground-fill"],["id","building-ground","fill","url(#diagonalHatch)"],[1,"g-roof-circle",3,"ngStyle"],["id","building-roof-circle-wall1"],["id","building-roof-circle-wall2"],["id","roof-circle","clip-path","url(#clip-roof2)"],["id","roof-circle-shadow"],["id","roof-circle-fill"],[1,"g-roof-70",3,"ngStyle"],["id","building-roof-70-wall1"],["id","building-roof-70-wall2"],["id","roof-70","clip-path","url(#clip-roof2)"],["id","roof-70-fill"],["id","roof-70-shadow"],[1,"g-helper"],[3,"id",4,"ngFor","ngForOf"],[1,"g-h-circle-roof"],["id","roof-circle__h-line"],["id","roof-circle__h-circle"],[1,"g-h-bend-point"],["id","bend-point__h-line"],["id","bend-point__h-point"],[1,"cross-measure"],["id","minimum"],["id","minimum-h"],["id","minimum-room"],["id","minimum-room-h"],[3,"id"]],template:function(e,i){1&e&&(qn(),S(0,"svg",0,1)(2,"defs"),ae(3,"polygon",2),S(4,"pattern",3),ae(5,"path",4),T()(),S(6,"clipPath",5),ae(7,"use",6),T(),S(8,"g",7),ae(9,"g",8),S(10,"g",9),ae(11,"polygon",10)(12,"polygon",11)(13,"polygon",12)(14,"polyline",13)(15,"polygon",14)(16,"polygon",15)(17,"polygon",16),T(),S(18,"g",17),ae(19,"polygon",18)(20,"polygon",19)(21,"polygon",20)(22,"polygon",21)(23,"polygon",22),T(),S(24,"g",23),ae(25,"polygon",24)(26,"polygon",25)(27,"polygon",26)(28,"polygon",27)(29,"polygon",28),T(),S(30,"g",29),Ge(31,u0e,1,1,"circle",30),S(32,"g",31),ae(33,"polyline",32)(34,"path",33),T(),S(35,"g",34),ae(36,"polyline",35)(37,"circle",36),T()(),S(38,"g",37),ae(39,"g",38)(40,"g",39)(41,"g",40)(42,"g",41),T()()()),2&e&&($(18),Z("ngStyle",Sl(3,NG,i.roofCheck(i.RoofStyle.roofCircle))),$(6),Z("ngStyle",Sl(5,NG,i.roofCheck(i.RoofStyle.roof70))),$(7),Z("ngForOf",nd(7,d0e)))},directives:[ld,Bb,ad],styles:["svg.cross{width:100%;height:100%;position:relative}  svg.cross *[id*=-fill]{stroke:none;opacity:0}  svg.cross *[id*=-fill]#building-ground-fill{opacity:1;fill:var(--color-0)}  svg.cross *{transition:fill .4s}  svg.cross .g-roof-circle,   svg.cross .g-roof-70,   svg.cross .g-building{stroke:var(--color-70);fill:var(--color-30)}  svg.cross .g-roof-circle #building-crawler,   svg.cross .g-roof-circle #building-room,   svg.cross .g-roof-70 #building-crawler,   svg.cross .g-roof-70 #building-room,   svg.cross .g-building #building-crawler,   svg.cross .g-building #building-room{fill:var(--color-0)}  svg.cross .g-helper>*{stroke:var(--primary-color)!important;opacity:0;fill:none}  svg.cross .g-helper>*[id^=roof-point-]{opacity:1!important}  .section-roof-basics #building-ground-fill{fill:transparent!important}  .tag-roof-both #roof-70-shadow,   .section-roof-choice #roof-70-shadow{opacity:.6;fill:var(--primary-color)!important}  .tag-roof-both #roof-circle-shadow,   .section-roof-choice #roof-circle-shadow{opacity:1;fill:var(--accent-color)!important}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-grey #building-roof-circle-wall1,   .state-grey #building-roof-circle-wall2,   .state-grey #building-roof-70-wall1,   .state-grey #building-roof-70-wall2,   .state-grey *[id*=-fill]:not(#building-ground-fill){fill:var(--color-90)!important;opacity:1!important}  .state-grey *[id*=-shadow]{fill:var(--color-90)!important}"]}),n})();function f0e(n,t){1&n&&(qn(),ae(0,"circle",12)),2&n&&zn("id","walk-line-dot walk-line-",t.index,"")}function p0e(n,t){1&n&&(qn(),S(0,"g",12),ae(1,"polygon",13)(2,"polyline",14)(3,"text",15),T()),2&n&&zn("id","step-plan-",t.index,"")}function m0e(n,t){1&n&&(qn(),S(0,"g",16),ae(1,"g",17)(2,"g",18)(3,"g",19)(4,"g",20)(5,"g",21),T())}const BG=function(){return[]};function g0e(n,t){if(1&n&&(qn(),S(0,"g")(1,"g",6),ae(2,"path",7),Ge(3,f0e,1,1,"circle",8),T(),ae(4,"polygon",9),S(5,"g",10),Ge(6,p0e,4,1,"g",8),T(),Ge(7,m0e,6,0,"g",11),T()),2&n){const e=Qe();$(3),Z("ngForOf",nd(3,BG).constructor(25)),$(3),Z("ngForOf",nd(4,BG).constructor(25)),$(1),Z("ngIf",!e.isChild)}}let _0e=(()=>{class n extends bx{constructor(e,i,r,s){super(e,i,r,s),this.houseService=e,this.appService=i,this.tooltipService=r,this.host=s,this.graphic=vr.stair,this.floor=te.all,this.marginInMeters=[0,0,0,0],this.marginInPixels=[64,64,0,0],this.steps=new Ln(25)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){this.drawingSize=[this.stair.stairOrigin,[this.stair.totalWidth,this.stair.totalHeight]],this.marginInMeters=[2*this.stair.run,2*this.stair.run,2*this.stair.run,2*this.stair.run],[tt.stairStart,tt.stairBasic,tt.stairCheck].includes(this.section)?this.svg.style("opacity",0):this.svg.style("opacity",1)}}return n.\u0275fac=function(e){return new(e||n)(M(rr),M(Wi),M(lp),M(Ve))},n.\u0275cmp=ft({type:n,selectors:[["app-svg-stair-plan"]],features:[he],decls:8,vars:3,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-plan"],["svg",""],["id","clip-roof-ref"],["id","clip-roof"],[0,"xlink","href","#clip-roof-ref","overflow","visible"],[4,"ngIf"],[1,"g-walk-line"],[1,"walk-line"],[3,"id",4,"ngFor","ngForOf"],["id","outline",1,"outline"],["clip-path","url(#clip-roof)",1,"g-step-plan"],["class","measure-stair",4,"ngIf"],[3,"id"],[1,"step-plan-lines"],[1,"step-plan-rise"],[1,"step-plan-text"],[1,"measure-stair"],["id","plateau-width"],["id","mid-width"],["id","total-width"],["id","total-height"],["id","lesser-height"]],template:function(e,i){1&e&&(qn(),S(0,"svg",0,1)(2,"defs"),ae(3,"polygon",2),T(),S(4,"clipPath",3),ae(5,"use",4),T(),Ge(6,g0e,8,5,"g",5),Dr(7,"async"),T()),2&e&&($(6),Z("ngIf",Rr(7,1,i.house$)))},directives:[Ys,ad],pipes:[kf],styles:["svg.stairs-plan{width:100%;height:100%;position:relative;transition:.4s}  svg.stairs-plan .left-corner-line,   svg.stairs-plan .right-corner-line,   svg.stairs-plan .middleLine{stroke:#00f}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .outline,   svg.stairs-plan .step-plan-lines{fill:none;stroke:#000}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .step-stinger,   svg.stairs-plan .walk-line-dot,   svg.stairs-plan .walk-line,   svg.stairs-plan .step-plan-text{display:none}  .section-stair-plan .step-plan-rise,   .section-stair-plan .step-stinger,   .section-stair-plan .walk-line-dot,   .section-stair-plan .walk-line,   .section-stair-plan .step-plan-text{display:initial!important}  .section-stair-plan .walk-line-dot{fill:red}  .section-stair-plan .walk-line{fill:none;transition:0s;stroke:red}  .section-stair-plan .step-stinger{fill:green}  .section-stair-plan .step-plan-text{display:initial}  .section-stair-plan .step-plan-rise{stroke-dasharray:1%}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}"]}),n})();const v0e=["render"];function y0e(n,t){1&n&&(qn(),ae(0,"polyline",64)),2&n&&zn("id","grid-index-",t.index,"")}function b0e(n,t){1&n&&(qn(),ae(0,"polyline",65)),2&n&&zn("id","grid-index-",t.index,"")}function x0e(n,t){1&n&&(qn(),ae(0,"polygon",66)),2&n&&Z("id",t.$implicit)}function w0e(n,t){1&n&&(qn(),S(0,"g",66),ae(1,"polyline",67)(2,"polyline",68)(3,"polygon",69)(4,"circle",70),T()),2&n&&Z("id",t.$implicit)}function M0e(n,t){1&n&&(qn(),S(0,"g",66),ae(1,"polygon",71)(2,"path",72),T()),2&n&&Z("id",t.$implicit)}function C0e(n,t){1&n&&(qn(),S(0,"g",66),ae(1,"polygon",73)(2,"path",74),T()),2&n&&Z("id",t.$implicit)}function S0e(n,t){if(1&n&&(qn(),ae(0,"polyline",66)),2&n){const e=Qe().$implicit;mi("sensor-cable ",e,""),$y("id",e)}}function E0e(n,t){if(1&n&&(qn(),Tr(0),Ge(1,S0e,1,4,"polyline",76),Ar()),2&n){const e=t.$implicit,i=Qe().$implicit;$(1),Z("ngIf",e.includes(i))}}function T0e(n,t){if(1&n&&(qn(),S(0,"g"),Ge(1,E0e,2,1,"ng-container",75),T()),2&n){const e=t.$implicit,i=Qe();mi("g-sensor-",e,""),$(1),Z("ngForOf",i.sensorKeys)}}function A0e(n,t){if(1&n&&(qn(),ae(0,"g",66)),2&n){const e=Qe().$implicit;mi("sensor-icon scale-icon ",e,""),$y("id",e)}}function D0e(n,t){if(1&n&&(qn(),Tr(0),Ge(1,A0e,1,4,"g",76),Ar()),2&n){const e=t.$implicit,i=Qe().$implicit;$(1),Z("ngIf",e.includes(i))}}function R0e(n,t){if(1&n&&(qn(),S(0,"g"),Ge(1,D0e,2,1,"ng-container",75),T()),2&n){const e=t.$implicit,i=Qe();mi("g-sensor-",e,""),$(1),Z("ngForOf",i.sensorKeys)}}const VG=function(){return[]};let I0e=(()=>{class n extends bx{constructor(e,i,r,s,o,a){super(e,i,r,s),this.houseService=e,this.appService=i,this.tooltipService=r,this.host=s,this.httpClient=o,this.d3Service=a,this.marginInMeters=[0,0,0,0],this.marginInPixels=[72,64,64,8],this.gridSizeX$=new Ln(100),this.gridSizeY$=new Ln(100),this.roomKeys=this.houseService.roomKeys,this.doorKeys=this.houseService.doorKeys,this.wallKeys=this.houseService.wallKeys,this.windowKeys=this.houseService.windowKeys,this.sensorKeys=this.houseService.sensorKeys,this.SensorTypes=Object.values(Ee),this.graphic=vr.plan,this.transformOrigin=[0,0]}ngAfterViewInit(){this.sun=this.d3Service.loadSVG("assets/models/sun.svg",".g-sun",e=>{const i=this.house$.value,r=40*this.meterPerPixel;Fn(e).selectChild("svg").attr("height",r+"px").attr("width",r+"px").attr("x",i.houseWidth/2+"px").attr("y",i.houseLength+1*i.studDistance+"px")}),this.setUp(),this.setStairs(),this.renderImg=this.svg.select(".render-img").attr("xlink:href","/assets/img/top_render.jpg").attr("x",-636).attr("y",-354).attr("width",2).attr("height",2),Fn("svg")}svgUpdateMarginAndSize(){this.sun.update(),this.gridSizeX$.next(this.house.gridSizeX),this.gridSizeY$.next(this.house.gridSizeY);const e=2*this.house.studDistance;this.marginInMeters=[e,e,e,e],this.drawingSize=[[0,-this.house.extensionToSouth],[this.house.houseWidth,this.house.houseLength]],this.scaleRenderImage(),this.scaleStairs()}setStairs(){const e=document.querySelector(".svg-plan-stair-plan").firstChild;console.log(e);const i=this.svg.select(".plan-stair-plan");this.svg.on("mousedown.drag",null),i.select(".plan-stair-plan").node().replaceWith(e),e.classList.add("plan-stair-plan"),setTimeout(()=>{this.updateSVG()},0)}scaleStairs(){this.svg.select(".plan-stair-plan").attr("transform-origin",`${this.stair.stairOrigin[0]+this.stair.totalWidth/2} ${this.house.stair.stairOrigin[1]+this.stair.totalHeight/2}`)}scaleRenderImage(){const e=[636,394],s=jt(1,this.house.houseWidth/this.meterPerPixel),o=jt(1,this.house.houseLength/this.meterPerPixel),a=jt(5,535/s),l=jt(5,495/o),c=Math.max(l,a);!this.renderImg||this.renderImg.attr("x",-e[0]*this.meterPerPixel/c).attr("y",-e[1]*this.meterPerPixel/c).attr("width",1920*this.meterPerPixel/c).attr("height",1080*this.meterPerPixel/c)}}return n.\u0275fac=function(e){return new(e||n)(M(rr),M(Wi),M(lp),M(Ve),M(wd),M(FG))},n.\u0275cmp=ft({type:n,selectors:[["app-svg-plan"]],viewQuery:function(e,i){if(1&e&&ni(v0e,5),2&e){let r;Ct(r=St())&&(i.renderEl=r.first)}},features:[he],decls:71,vars:10,consts:[["preserveAspectRatio","xMidYMid meet",1,"plan"],["svg",""],["type","text/css"],["id","MyGradient","gradientTransform","rotate(90)"],["offset","-10%",1,"alt-stop"],["offset","30%",1,"alt-stop"],["offset","100%",1,"main-stop"],["id","inset-shadow"],["stdDeviation","0.5","result","offset-blur"],["operator","out","in","SourceGraphic","in2","offset-blur","result","inverse"],["flood-color","black","flood-opacity","1","result","color"],["operator","in","in","color","in2","inverse","result","shadow"],["in","shadow","result","shadow"],["type","linear","slope",".175"],["transform","rotate(0)",1,"all"],[1,"house-stramien"],["clas","house-stramien","id","house-stramien-in"],["clas","house-stramien","id","house-stramien-in-we-a"],["clas","house-stramien","id","house-stramien-in-we-b"],["clas","house-stramien","id","house-stramien-in-we-c"],["clas","house-stramien","id","house-stramien-in-we-d"],["clas","house-stramien","id","house-stramien-in-ns-a"],["clas","house-stramien","id","house-stramien-in-ns-b"],["clas","house-stramien","id","house-stramien-in-ns-c"],["clas","house-stramien","id","house-stramien-in-ns-d"],["clas","house-stramien","id","house-stramien-out"],["clas","house-stramien","id","house-stramien-out-we-a"],["clas","house-stramien","id","house-stramien-out-we-b"],["clas","house-stramien","id","house-stramien-out-we-c"],["clas","house-stramien","id","house-stramien-out-we-d"],["clas","house-stramien","id","house-stramien-out-ns-a"],["clas","house-stramien","id","house-stramien-out-ns-b"],["clas","house-stramien","id","house-stramien-out-ns-c"],["clas","house-stramien","id","house-stramien-out-ns-d"],[1,"g-grid"],["class","grid-vertical",3,"id",4,"ngFor","ngForOf"],["class","grid-horizontal",3,"id",4,"ngFor","ngForOf"],[1,"house-wind-rose"],[1,"house-wind-rose-1"],[1,"house-wind-rose-2"],[1,"house-wind-rose-text"],[1,"g-room"],[3,"id",4,"ngFor","ngForOf"],[1,"plan-stair-plan"],[1,"g-wall"],[1,"g-door"],[1,"g-window"],[1,"extra"],["id","view-lines"],["id","central-void","filter","url(#inset-shadow)"],["id","tower-walls"],[1,"house-measure"],["id","house-total-height"],["id","house-total-width"],["id","house-width-1"],["id","house-width-2"],["id","house-width-3"],["id","house-height-1"],["id","house-height-2"],["id","house-height-inner"],["id","house-height-3"],[1,"g-sensor"],[3,"class",4,"ngFor","ngForOf"],[1,"g-sun"],[1,"grid-vertical",3,"id"],[1,"grid-horizontal",3,"id"],[3,"id"],[1,"wall-left"],[1,"wall-right"],[1,"wall-fill"],["r","0.1","stroke-width","1",1,"wall-origin"],[1,"door-wall-opening"],[1,"door-swing"],[1,"window-wall-opening"],[1,"window-pane"],[4,"ngFor","ngForOf"],[3,"id","class",4,"ngIf"]],template:function(e,i){1&e&&(qn(),S(0,"svg",0,1)(2,"style",2),k(3," .g-room { fill: url(#MyGradient) } "),T(),S(4,"defs")(5,"linearGradient",3),ae(6,"stop",4)(7,"stop",5)(8,"stop",6),T(),S(9,"filter",7),ae(10,"feGaussianBlur",8)(11,"feComposite",9)(12,"feFlood",10)(13,"feComposite",11),S(14,"feComponentTransfer",12),ae(15,"feFuncA",13),T()()(),S(16,"g",14)(17,"g",15)(18,"g",16),ae(19,"polyline",17)(20,"polyline",18)(21,"polyline",19)(22,"polyline",20)(23,"polyline",21)(24,"polyline",22)(25,"polyline",23)(26,"polyline",24),T(),S(27,"g",25),ae(28,"polyline",26)(29,"polyline",27)(30,"polyline",28)(31,"polyline",29)(32,"polyline",30)(33,"polyline",31)(34,"polyline",32)(35,"polyline",33),T()(),S(36,"g",34),Ge(37,y0e,1,1,"polyline",35),Ge(38,b0e,1,1,"polyline",36),T(),S(39,"g",37),ae(40,"polygon",38)(41,"polygon",39)(42,"text",40),T(),S(43,"g",41),Ge(44,x0e,1,1,"polygon",42),T(),S(45,"g",43),ae(46,"svg",43),T(),S(47,"g",44),Ge(48,w0e,5,1,"g",42),T(),S(49,"g",45),Ge(50,M0e,3,1,"g",42),T(),S(51,"g",46),Ge(52,C0e,3,1,"g",42),T(),S(53,"g",47),ae(54,"polyline",48)(55,"polygon",49)(56,"polygon",50),T(),S(57,"g",51),ae(58,"g",52)(59,"g",53)(60,"g",54)(61,"g",55)(62,"g",56)(63,"g",57)(64,"g",58)(65,"g",59)(66,"g",60),T(),S(67,"g",61),Ge(68,T0e,2,4,"g",62),Ge(69,R0e,2,4,"g",62),T(),ae(70,"g",63),T()()),2&e&&($(37),Z("ngForOf",nd(8,VG).constructor(55)),$(1),Z("ngForOf",nd(9,VG).constructor(55)),$(6),Z("ngForOf",i.roomKeys),$(4),Z("ngForOf",i.wallKeys),$(2),Z("ngForOf",i.doorKeys),$(2),Z("ngForOf",i.windowKeys),$(16),Z("ngForOf",i.SensorTypes),$(1),Z("ngForOf",i.SensorTypes))},directives:[ad,Ys],styles:[".sensor-pir,   .sensor-vent-out,   .sensor-ethernet,   .sensor-perilex,   .sensor-light-switch{fill:var(--primary-color)}  .sensor-pir.sensor-cable,   .sensor-vent-out.sensor-cable,   .sensor-ethernet.sensor-cable,   .sensor-perilex.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--primary-color)!important}  .sensor-vent-in,   .sensor-camera,   .sensor-poe,   .sensor-socket,   .sensor-light{fill:var(--accent-color)}  .sensor-vent-in.sensor-cable,   .sensor-camera.sensor-cable,   .sensor-poe.sensor-cable,   .sensor-socket.sensor-cable,   .sensor-light.sensor-cable{stroke:var(--accent-color)!important}  .sensor-temperature,   .sensor-alarm,   .sensor-dlc,   .sensor-light-switch{fill:var(--first-color)}  .sensor-temperature.sensor-cable,   .sensor-alarm.sensor-cable,   .sensor-dlc.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--first-color)!important}  .sensor-wifi,   .sensor-blinds,   .sensor-dimmer{fill:var(--second-color)}  .sensor-wifi.sensor-cable,   .sensor-blinds.sensor-cable,   .sensor-dimmer.sensor-cable{stroke:var(--second-color)!important}  .sensor-smoke{fill:#a80000}  .sensor-smoke.sensor-cable{stroke:#a80000!important}  .selection-active .g-sensor>g>*:not(.selected){opacity:0!important}  svg.plan{height:100%;width:100%;position:relative}  svg.plan .all{transition:.4s}  svg.plan .g-sun{transition:.4s;opacity:0}  svg.plan .g-sun g{transform-origin:center;fill:#fdc865}  svg.plan #view-lines{fill:none;stroke:var(--primary-color);opacity:0}  svg.plan .render-img{pointer-events:none;transition:.4s;opacity:0;clip-path:polygon(0% 0%,100% 0%,100% 130%,51.7% 78.7%,51.7% 52.9%,42.4% 36.5%,33.1% 36.5%)}  svg.plan .house-wind-rose,   svg.plan .g-sensor,   svg.plan .g-grid,   svg.plan .g-wall,   svg.plan .g-room{fill:none;transition:.4s,stroke-width 1ms;stroke:#000;stroke-linecap:square}  svg.plan #tower-walls{fill:var(--accent-color);stroke:none;pointer-events:none;opacity:.6}  svg.plan .house-stramien{transition:.4s,stroke-width 1ms;stroke:red;stroke-linecap:square}  svg.plan .house-stramien .house-stramien-out{stroke:orange}  svg.plan .house-wind-rose{opacity:0}  svg.plan .house-wind-rose .house-wind-rose-text{stroke:none;fill:currentColor}  svg.plan .house-wind-rose .house-wind-rose-1{fill:currentColor}  svg.plan .g-grid .grid-main{stroke:#656565}  svg.plan .g-grid .grid-sub{stroke:#e5e5e5}  svg.plan .g-grid .grid-subsub{stroke:#bebebe}  svg.plan .g-sensor>*{opacity:0;pointer-events:none;overflow:visible}  svg.plan .g-sensor *{transition:.2s}  svg.plan .g-sensor polyline{transition:.5s;fill:none;stroke:#00f}  svg.plan .g-sensor polyline.cable-connection{stroke:#079372}  svg.plan .g-sensor>g{transition:.5s;fill:var(--primary-color);stroke:none}  svg.plan .g-room #L0-House{fill:var(--accent-color)!important;opacity:.7}  svg.plan .g-room polygon{stroke:none!important;transition:.4s;fill:var(--primary-color)!important;opacity:.8}  svg.plan .g-room polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-room polygon.room-hole{box-shadow:inset 3px 5px 2px #0006}  svg.plan .g-room polygon.selected{fill:var(--primary-color)}  svg.plan .g-wall{transition:.4s;opacity:1}  svg.plan .g-wall .selected polygon{fill:var(--primary-color)}  svg.plan .g-wall .selected circle{opacity:1}  svg.plan .g-wall polygon{transition:.5s;fill-rule:nonzero}  svg.plan .g-wall polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-wall circle{fill:red;stroke:var(--color-100)}  svg.plan .g-wall .type-outer{stroke:#565656}  svg.plan .g-wall .type-outer .side-out{stroke:#0e03a7}  svg.plan .g-wall .side-out{transition:.6s}  svg.plan .g-wall .type-inner{opacity:.5;stroke:#565656}  svg.plan .g-wall .type-theoretic{opacity:1;stroke:#0091b6;stroke-width:3px}  svg.plan .g-wall .wall-fill{stroke:none}  svg.plan .g-door g{transition:opacity .4s}  svg.plan .g-door polygon{transition:.5s}  svg.plan .g-door path{fill:none;stroke:#565656;stroke-linecap:square}  svg.plan .g-window polygon{transition:.5s;fill:#fff9;stroke:#565656}  svg.plan .g-window path{fill:none;stroke:#565656;stroke-linecap:square}  svg.plan .plan-stair-plan .measure-stair{display:none}  .section-welcome:not(.fullscreen) .all{transform:scale(.6) translate(25%)}  .section-welcome:not(.fullscreen) .render-img{opacity:1!important}  .section-welcome:not(.fullscreen) .g-window g{opacity:0!important}  .section-welcome .g-door g,   .section-passiv .g-door g{opacity:0!important}  .section-basics .house-wind-rose,   .section-basics .g-grid{transition:2s;opacity:.7!important}  .section-tower .room-f{transition:2s;fill:var(--primary-color)!important}  .section-wired-light .g-sensor *[class*=sensor-light-switch],   .section-wired-light .g-sensor *[class*=sensor-dimmer],   .section-wired-light .g-sensor *[class*=sensor-light]{opacity:1;pointer-events:all}  .section-wired-power .g-sensor *[class*=sensor-perilex],   .section-wired-power .g-sensor *[class*=sensor-socket]{opacity:1;pointer-events:all}  .section-wired-ethernet .g-sensor *[class*=sensor-poe],   .section-wired-ethernet .g-sensor *[class*=sensor-wifi],   .section-wired-ethernet .g-sensor *[class*=sensor-ethernet]{opacity:1;pointer-events:all}  .section-wired-safety .g-sensor *[class*=sensor-pir],   .section-wired-safety .g-sensor *[class*=sensor-camera],   .section-wired-safety .g-sensor *[class*=sensor-smoke],   .section-wired-safety .g-sensor *[class*=sensor-alarm]{opacity:1;pointer-events:all}  .section-wired-extra .g-sensor *[class*=sensor-pir],   .section-wired-extra .g-sensor *[class*=sensor-blinds],   .section-wired-extra .g-sensor *[class*=sensor-temperature]{opacity:1;pointer-events:all}  .tag-base-dimension #L0-West-WestWall .side-out,   .tag-base-dimension #L0-North-NorthWall .side-out,   .tag-base-dimension #L0-Central-SouthWall .side-out,   .tag-base-dimension #L0-East-EastWall .side-out{transition:.4s;stroke-width:1!important;stroke:var(--primary-color)!important;stroke-linecap:round}  .tag-orientation .main-stop{stop-color:#fdc865}  .tag-orientation .alt-stop{stop-color:var(--color-0)}  .tag-orientation .house-wind-rose{opacity:.7!important}  .tag-orientation #L0-Central{fill:#fdc865!important}  .tag-orientation #L0-West,   .tag-orientation #L0-Central,   .tag-orientation #L0-East{shape-rendering:crispEdges;fill:url(#MyGradient)!important}  .tag-orientation .g-sun{opacity:.7!important}  .tag-orientation .g-sun g{animation:spin-animation 12s infinite}  .tag-insulated .g-wall *:not(.type-inner) polygon{fill:var(--primary-color);stroke:none!important}  .tag-viewlines #view-lines{opacity:.7!important}@keyframes spin-animation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),n})();function Yl(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function HG(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}var HA,Oo,sr,Mi,Lo,jA,$A,qG,KG,pp,N_,l,c,u,d,h,f,n,t,e,i,r,s,o,a,p,eo={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},cp={duration:.5,overwrite:!1,delay:0},Po=1e8,Kn=1e-8,UA=2*Math.PI,k0e=UA/4,O0e=0,UG=Math.sqrt,P0e=Math.cos,L0e=Math.sin,Pr=function(t){return"string"==typeof t},Pi=function(t){return"function"==typeof t},Xl=function(t){return"number"==typeof t},zA=function(t){return void 0===t},Ja=function(t){return"object"==typeof t},Is=function(t){return!1!==t},zG=function(){return"undefined"!=typeof window},xx=function(t){return Pi(t)||Pr(t)},GG="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},es=Array.isArray,GA=/(?:-?\.?\d|\.)+/gi,WG=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,up=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,WA=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,jG=/[+-]=-?[.\d]+/,$G=/[^,'"\[\]\s]+/gi,F0e=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,to={},wx={},YG=function(t){return(wx=Nd(t,to))&&ro},qA=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Mx=function(t,e){return!e&&console.warn(t)},XG=function(t,e){return t&&(to[t]=e)&&wx&&(wx[t]=e)||to},D_=function(){return 0},N0e={suppressEvents:!0,isStart:!0},R_={suppressEvents:!0},YA={},Qc=[],XA={},no={},KA={},ZG=30,Cx=[],ZA="",QA=function(t){var i,r,e=t[0];if(Ja(e)||Pi(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(r=Cx.length;r--&&!Cx[r].targetTest(e););i=Cx[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new S5(t[r],i)))||t.splice(r,1);return t},Fd=function(t){return t._gsap||QA(Bo(t))[0]._gsap},QG=function(t,e,i){return(i=t[e])&&Pi(i)?t[e]():zA(i)&&t.getAttribute&&t.getAttribute(e)||i},ks=function(t,e){return(t=t.split(",")).forEach(e)||t},qi=function(t){return Math.round(1e5*t)/1e5||0},Gr=function(t){return Math.round(1e7*t)/1e7||0},dp=function(t,e){var i=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),"+"===i?t+r:"-"===i?t-r:"*"===i?t*r:t/r},B0e=function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i},Sx=function(){var i,r,t=Qc.length,e=Qc.slice(0);for(XA={},Qc.length=0,i=0;i<t;i++)(r=e[i])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},JG=function(t,e,i,r){Qc.length&&Sx(),t.render(e,i,r||Oo),Qc.length&&Sx()},e5=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match($G).length<2?e:Pr(t)?t.trim():t},t5=function(t){return t},Fo=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Nd=function(t,e){for(var i in e)t[i]=e[i];return t},n5=function n(t,e){for(var i in e)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=Ja(e[i])?n(t[i]||(t[i]={}),e[i]):e[i]);return t},Ex=function(t,e){var r,i={};for(r in t)r in e||(i[r]=t[r]);return i},I_=function(t){var e=t.parent||Mi,i=t.keyframes?function(t){return function(e,i){for(var r in i)r in e||"duration"===r&&t||"ease"===r||(e[r]=i[r])}}(es(t.keyframes)):Fo;if(Is(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},r5=function(t,e,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var a,o=t[r];if(s)for(a=e[s];o&&o[s]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},Tx=function(t,e,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[i]===e&&(t[i]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},Kl=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Bd=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},U0e=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},JA=function(t,e,i,r){return t._startAt&&(Oo?t._startAt.revert(R_):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},z0e=function n(t){return!t||t._ts&&n(t.parent)},s5=function(t){return t._repeat?hp(t._tTime,t=t.duration()+t._rDelay)*t:0},hp=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},Ax=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Dx=function(t){return t._end=Gr(t._start+(t._tDur/Math.abs(t._ts||t._rts||Kn)||0))},Rx=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Gr(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Dx(t),i._dirty||Bd(i,t)),t},o5=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=Ax(t.rawTime(),e),(!e._dur||O_(0,e.totalDuration(),i)-e._tTime>Kn)&&e.render(i,!0)),Bd(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-Kn}},el=function(t,e,i,r){return e.parent&&Kl(e),e._start=Gr((Xl(i)?i:i||t!==Mi?No(t,i,e):t._time)+e._delay),e._end=Gr(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),r5(t,e,"_first","_last",t._sort?"_start":0),eD(e)||(t._recent=e),r||o5(t,e),t._ts<0&&Rx(t,t._tTime),t},a5=function(t,e){return(to.ScrollTrigger||qA("scrollTrigger",e))&&to.ScrollTrigger.create(e,t)},l5=function(t,e,i,r){return cD(t,e),t._initted?!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&KG!==io.frame?(Qc.push(t),t._lazy=[e,r],1):void 0:1},G0e=function n(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||n(e))},eD=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},fp=function(t,e,i,r){var s=t._repeat,o=Gr(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:Gr(o*(s+1)+t._rDelay*s):o,a>0&&!r?Rx(t,t._tTime=t._tDur*a):t.parent&&Dx(t),i||Bd(t.parent,t),t},c5=function(t){return t instanceof Os?Bd(t):fp(t,t._dur)},$0e={_start:0,endTime:D_,totalDuration:D_},No=function n(t,e,i){var a,l,c,r=t.labels,s=t._recent||$0e,o=t.duration()>=Po?s.endTime(!1):t._dur;return Pr(e)&&(isNaN(e)||e in r)?(l=e.charAt(0),c="%"===e.substr(-1),a=e.indexOf("="),"<"===l||">"===l?(a>=0&&(e=e.replace(/=/,"")),("<"===l?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(e in r||(r[e]=o),r[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),c&&i&&(l=l/100*(es(i)?i[0]:i).totalDuration()),a>1?n(t,e.substr(0,a-1),i)+l:o+l)):null==e?o:+e},k_=function(t,e,i){var a,l,r=Xl(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s];if(r&&(o.duration=e[1]),o.parent=i,t){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Is(l.vars.inherit)&&l.parent;o.immediateRender=Is(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new xr(e[0],o,e[s+1])},Jc=function(t,e){return t||0===t?e(t):e},O_=function(t,e,i){return i<t?t:i>e?e:i},ts=function(t,e){return Pr(t)&&(e=F0e.exec(t))?e[1]:""},tD=[].slice,u5=function(t,e){return t&&Ja(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Ja(t[0]))&&!t.nodeType&&t!==Lo},Bo=function(t,e,i){return sr&&!e&&sr.selector?sr.selector(t):!Pr(t)||i||!jA&&mp()?es(t)?function(t,e,i){return void 0===i&&(i=[]),t.forEach(function(r){var s;return Pr(r)&&!e||u5(r,1)?(s=i).push.apply(s,Bo(r)):i.push(r)})||i}(t,i):u5(t)?tD.call(t,0):t?[t]:[]:tD.call((e||$A).querySelectorAll(t),0)},nD=function(t){return t=Bo(t)[0]||Mx("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return Bo(e,i.querySelectorAll?i:i===t?Mx("Invalid scope")||$A.createElement("div"):t)}},d5=function(t){return t.sort(function(){return.5-Math.random()})},h5=function(t){if(Pi(t))return t;var e=Ja(t)?t:{each:t},i=Vd(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=e.axis,u=r,d=r;return Pr(r)?u=d={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],d=r[1]),function(h,f,p){var _,v,y,b,x,w,E,R,F,m=(p||e).length,g=o[m];if(!g){if(!(F="auto"===e.grid?0:(e.grid||[1,Po])[1])){for(E=-Po;E<(E=p[F++].getBoundingClientRect().left)&&F<m;);F--}for(g=o[m]=[],_=l?Math.min(F,m)*u-.5:r%F,v=F===Po?0:l?m*d/F-.5:r/F|0,E=0,R=Po,w=0;w<m;w++)y=w%F-_,b=v-(w/F|0),g[w]=x=c?Math.abs("y"===c?b:y):UG(y*y+b*b),x>E&&(E=x),x<R&&(R=x);"random"===r&&d5(g),g.max=E-R,g.min=R,g.v=m=(parseFloat(e.amount)||parseFloat(e.each)*(F>m?m-1:c?"y"===c?m/F:F:Math.max(F,m/F))||0)*("edges"===r?-1:1),g.b=m<0?s-m:s,g.u=ts(e.amount||e.each)||0,i=i&&m<0?w5(i):i}return m=(g[h]-g.min)/g.max||0,Gr(g.b+(i?i(m):m)*g.v)+g.u}},iD=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=Gr(Math.round(parseFloat(i)/t)*t*e);return(r-r%1)/e+(Xl(i)?0:ts(i))}},f5=function(t,e){var r,s,i=es(t);return!i&&Ja(t)&&(r=i=t.radius||Po,t.values?(t=Bo(t.values),(s=!Xl(t[0]))&&(r*=r)):t=iD(t.increment)),Jc(e,i?Pi(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var h,f,a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Po,u=0,d=t.length;d--;)(h=s?(h=t[d].x-a)*h+(f=t[d].y-l)*f:Math.abs(t[d]-a))<c&&(c=h,u=d);return u=!r||c<=r?t[u]:o,s||u===o||Xl(o)?u:u+ts(o)}:iD(t))},p5=function(t,e,i,r){return Jc(es(t)?!e:!0===i?!!(i=0):!r,function(){return es(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*r)/r})},m5=function(t,e,i){return Jc(i,function(r){return t[~~e(r)]})},P_=function(t){for(var r,s,o,a,e=0,i="";~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),a="["===t.charAt(r+7),s=t.substr(r+7,o-r-7).match(a?$G:GA),i+=t.substr(e,r-e)+p5(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),e=o+1;return i+t.substr(e,t.length-e)},g5=function(t,e,i,r,s){var o=e-t,a=r-i;return Jc(s,function(l){return i+((l-t)/o*a||0)})},_5=function(t,e,i){var o,a,l,r=t.labels,s=Po;for(o in r)(a=r[o]-e)<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Vo=function(t,e,i){var l,c,u,r=t.vars,s=r[e],o=sr,a=t._ctx;if(s)return l=r[e+"Params"],c=r.callbackScope||t,i&&Qc.length&&Sx(),a&&(sr=a),u=l?s.apply(c,l):s.call(c),sr=o,u},L_=function(t){return Kl(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&Vo(t,"onInterrupt"),t},tbe=function(t){var e=(t=!t.name&&t.default||t).name,i=Pi(t),r=e&&!i&&t.init?function(){this._props=[]}:t,s={init:D_,render:hD,add:aD,kill:_be,modifier:gbe,rawVars:0},o={targetTest:0,get:0,getSetter:dD,aliases:{},register:0};if(mp(),t!==r){if(no[e])return;Fo(r,Fo(Ex(t,s),o)),Nd(r.prototype,Nd(s,Ex(t,o))),no[r.prop=e]=r,t.targetTest&&(Cx.push(r),YA[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}XG(e,r),t.register&&t.register(ro,r,Ps)},Zn=255,F_={aqua:[0,Zn,Zn],lime:[0,Zn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Zn],navy:[0,0,128],white:[Zn,Zn,Zn],olive:[128,128,0],yellow:[Zn,Zn,0],orange:[Zn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Zn,0,0],pink:[Zn,192,203],cyan:[0,Zn,Zn],transparent:[Zn,Zn,Zn,0]},rD=function(t,e,i){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*Zn+.5|0},v5=function(t,e,i){var s,o,a,l,c,u,d,h,f,p,r=t?Xl(t)?[t>>16,t>>8&Zn,t&Zn]:0:F_.black;if(!r){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),F_[t])r=F_[t];else if("#"===t.charAt(0)){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+s+s+o+o+a+a+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(r=parseInt(t.substr(1,6),16))>>16,r>>8&Zn,r&Zn,parseInt(t.substr(7),16)/255];r=[(t=parseInt(t.substr(1),16))>>16,t>>8&Zn,t&Zn]}else if("hsl"===t.substr(0,3))if(r=p=t.match(GA),e){if(~t.indexOf("="))return r=t.match(WG),i&&r.length<4&&(r[3]=1),r}else l=+r[0]%360/360,c=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(c+1):u+c-u*c),r.length>3&&(r[3]*=1),r[0]=rD(l+1/3,s,o),r[1]=rD(l,s,o),r[2]=rD(l-1/3,s,o);else r=t.match(GA)||F_.transparent;r=r.map(Number)}return e&&!p&&(s=r[0]/Zn,o=r[1]/Zn,a=r[2]/Zn,u=((d=Math.max(s,o,a))+(h=Math.min(s,o,a)))/2,d===h?l=c=0:(f=d-h,c=u>.5?f/(2-d-h):f/(d+h),l=d===s?(o-a)/f+(o<a?6:0):d===o?(a-s)/f+2:(s-o)/f+4,l*=60),r[0]=~~(l+.5),r[1]=~~(100*c+.5),r[2]=~~(100*u+.5)),i&&r.length<4&&(r[3]=1),r},y5=function(t){var e=[],i=[],r=-1;return t.split(eu).forEach(function(s){var o=s.match(up)||[];e.push.apply(e,o),i.push(r+=o.length+1)}),e.c=i,e},b5=function(t,e,i){var l,c,u,d,r="",s=(t+r).match(eu),o=e?"hsla(":"rgba(",a=0;if(!s)return t;if(s=s.map(function(h){return(h=v5(h,e,1))&&o+(e?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(u=y5(t),(l=i.c).join(r)!==u.c.join(r)))for(d=(c=t.replace(eu,"1").split(up)).length-1;a<d;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!c)for(d=(c=t.split(eu)).length-1;a<d;a++)r+=c[a]+s[a];return r+c[d]},eu=function(){var t,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in F_)n+="|"+t+"\\b";return new RegExp(n+")","gi")}(),nbe=/hsl[a]?\(/,x5=function(t){var i,e=t.join(" ");if(eu.lastIndex=0,eu.test(e))return i=nbe.test(e),t[1]=b5(t[1],i),t[0]=b5(t[0],i,y5(t[1])),!0},io=(n=Date.now,t=500,e=33,i=n(),r=i,o=s=1e3/240,p=function m(g){var y,b,x,w,_=n()-r,v=!0===g;if(_>t&&(i+=_-e),((y=(x=(r+=_)-i)-o)>0||v)&&(w=++d.frame,h=x-1e3*d.time,d.time=x/=1e3,o+=y+(y>=s?4:s-y),b=1),v||(l=c(m)),b)for(f=0;f<a.length;f++)a[f](x,h,w,g)},d={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return h/(1e3/(g||60))},wake:function(){qG&&(!jA&&zG()&&(Lo=jA=window,$A=Lo.document||{},to.gsap=ro,(Lo.gsapVersions||(Lo.gsapVersions=[])).push(ro.version),YG(wx||Lo.GreenSockGlobals||!Lo.gsap&&Lo||{}),u=Lo.requestAnimationFrame),l&&d.sleep(),c=u||function(g){return setTimeout(g,o-1e3*d.time+1|0)},N_=1,p(2))},sleep:function(){(u?Lo.cancelAnimationFrame:clearTimeout)(l),N_=0,c=D_},lagSmoothing:function(g,_){t=g||1/Kn,e=Math.min(_,t,0)},fps:function(g){o=1e3*d.time+(s=1e3/(g||240))},add:function(g,_,v){var y=_?function(b,x,w,E){g(b,x,w,E),d.remove(y)}:g;return d.remove(g),a[v?"unshift":"push"](y),mp(),y},remove:function(g,_){~(_=a.indexOf(g))&&a.splice(_,1)&&f>=_&&f--},_listeners:a=[]}),mp=function(){return!N_&&io.wake()},mn={},ibe=/^[\d.\-M][\d.\-,\s]/,rbe=/["']/g,sbe=function(t){for(var a,l,c,e={},i=t.substr(1,t.length-3).split(":"),r=i[0],s=1,o=i.length;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),e[r]=isNaN(c)?c.replace(rbe,"").trim():+c,r=l.substr(a+1).trim();return e},w5=function(t){return function(e){return 1-t(1-e)}},M5=function n(t,e){for(var r,i=t._first;i;)i instanceof Os?n(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?n(i.timeline,e):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=e)),i=i._next},Vd=function(t,e){return t&&(Pi(t)?t:mn[t]||function(t){var e=(t+"").split("("),i=mn[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[sbe(e[1])]:function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<i?t.indexOf(")",i+1):i)}(t).split(",").map(e5)):mn._CE&&ibe.test(t)?mn._CE("",t):i}(t))||e},Hd=function(t,e,i,r){void 0===i&&(i=function(l){return 1-e(1-l)}),void 0===r&&(r=function(l){return l<.5?e(2*l)/2:1-e(2*(1-l))/2});var o,s={easeIn:e,easeOut:i,easeInOut:r};return ks(t,function(a){for(var l in mn[a]=to[a]=s,mn[o=a.toLowerCase()]=i,s)mn[o+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=mn[a+"."+l]=s[l]}),s},C5=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},sD=function n(t,e,i){var r=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),o=s/UA*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*L0e((u-o)*s)+1},l="out"===t?a:"in"===t?function(c){return 1-a(1-c)}:C5(a);return s=UA/s,l.config=function(c,u){return n(t,c,u)},l},oD=function n(t,e){void 0===e&&(e=1.70158);var i=function(o){return o?--o*o*((e+1)*o+e)+1:0},r="out"===t?i:"in"===t?function(s){return 1-i(1-s)}:C5(i);return r.config=function(s){return n(t,s)},r};ks("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,t){var e=t<5?t+1:t;Hd(n+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(2*i,e)/2:1-Math.pow(2*(1-i),e)/2})}),mn.Linear.easeNone=mn.none=mn.Linear.easeIn,Hd("Elastic",sD("in"),sD("out"),sD()),function(n,t){var s=function(a){return a<.36363636363636365?n*a*a:a<.7272727272727273?n*Math.pow(a-1.5/t,2)+.75:a<.9090909090909092?n*(a-=2.25/t)*a+.9375:n*Math.pow(a-2.625/t,2)+.984375};Hd("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),Hd("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),Hd("Circ",function(n){return-(UG(1-n*n)-1)}),Hd("Sine",function(n){return 1===n?1:1-P0e(n*k0e)}),Hd("Back",oD("in"),oD("out"),oD()),mn.SteppedEase=mn.steps=to.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,r=t+(e?0:1),s=e?1:0;return function(a){return((r*O_(0,.99999999,a)|0)+s)*i}}},cp.ease=mn["quad.out"],ks("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return ZA+=n+","+n+"Params,"});var S5=function(t,e){this.id=O0e++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:QG,this.set=e?e.getSetter:dD},gp=function(){function n(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,fp(this,+e.duration,1,1),this.data=e.data,sr&&(this._ctx=sr,sr.data.push(this)),N_||io.wake()}var t=n.prototype;return t.delay=function(i){return i||0===i?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,fp(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,r){if(mp(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Rx(this,i),!s._dp||s.parent||o5(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&el(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Kn||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),JG(this,i,r)),this},t.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+s5(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},t.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?i:1-i)+s5(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?hp(this._tTime,s)+1:1},t.timeScale=function(i){if(!arguments.length)return this._rts===-Kn?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?Ax(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Kn?0:this._rts,this.totalTime(O_(-this._delay,this._tDur,r),!0),Dx(this),U0e(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(mp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Kn&&(this._tTime-=Kn)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&el(r,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Is(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ax(r.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){void 0===i&&(i=R_);var r=Oo;return Oo=i,this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents),"nested"!==this.data&&Kl(this),Oo=r,this},t.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this.vars.immediateRender?-1:s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,c5(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,c5(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,r){return this.totalTime(No(this,i),Is(r))},t.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Is(r))},t.play=function(i,r){return null!=i&&this.seek(i,r),this.reversed(!1).paused(!1)},t.reverse=function(i,r){return null!=i&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(i,r){return null!=i&&this.seek(i,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Kn:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Kn,this},t.isActive=function(){var s,i=this.parent||this._dp,r=this._start;return!(i&&!(this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Kn))},t.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),"onUpdate"===i&&(this._onUpdate=r)):delete o[i],this):o[i]},t.then=function(i){var r=this;return new Promise(function(s){var o=Pi(i)?i:t5,a=function(){var c=r.then;r.then=null,Pi(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},t.kill=function(){L_(this)},n}();Fo(gp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Kn,_prom:0,_ps:!1,_rts:1});var Os=function(n){function t(i,r){var s;return void 0===i&&(i={}),(s=n.call(this,i)||this).labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Is(i.sortChildren),Mi&&el(i.parent||Mi,Yl(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&a5(Yl(s),i.scrollTrigger),s}HG(t,n);var e=t.prototype;return e.to=function(r,s,o){return k_(0,arguments,this),this},e.from=function(r,s,o){return k_(1,arguments,this),this},e.fromTo=function(r,s,o,a){return k_(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,I_(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new xr(r,s,No(this,o),1),this},e.call=function(r,s,o){return el(this,xr.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new xr(r,o,No(this,l)),this},e.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,I_(o).immediateRender=Is(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},e.staggerFromTo=function(r,s,o,a,l,c,u,d){return a.startAt=o,I_(a).immediateRender=Is(a.immediateRender),this.staggerTo(r,s,a,l,c,u,d)},e.render=function(r,s,o){var h,f,p,m,g,_,v,y,b,x,w,E,a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:Gr(r),d=this._zTime<0!=r<0&&(this._initted||!c);if(this!==Mi&&u>l&&r>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),h=u,b=this._start,_=!(y=this._ts),d&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(w=this._yoyo,g=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*g+r,s,o);if(h=Gr(u%g),u===l?(m=this._repeat,h=c):((m=~~(u/g))&&m===u/g&&(h=c,m--),h>c&&(h=c)),x=hp(this._tTime,g),!a&&this._tTime&&x!==m&&(x=m),w&&1&m&&(h=c-h,E=1),m!==x&&!this._lock){var R=w&&1&x,F=R===(w&&1&m);if(m<x&&(R=!R),a=R?0:c,this._lock=1,this.render(a||(E?0:Gr(m*g)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Vo(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,F&&(this._lock=2,this.render(a=R?c:-1e-4,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;M5(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,Gr(a),Gr(h)),v&&(u-=h-(h=v._start))),this._tTime=u,this._time=h,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&!s&&(Vo(this,"onStart"),this._tTime!==u))return this;if(h>=a&&r>=0)for(f=this._first;f;){if(p=f._next,(f._act||h>=f._start)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!_){v=0,p&&(u+=this._zTime=-Kn);break}}f=p}else{o=o||Oo,f=this._last;for(var N=r<0?r:h;f;){if(p=f._prev,(f._act||N<=f._end)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(N-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(N-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!_){v=0,p&&(u+=this._zTime=N?-Kn:Kn);break}}f=p}}if(v&&!s&&(this.pause(),v.render(h>=a?0:-Kn)._zTime=h>=a?1:-1,this._ts))return this._start=b,Dx(this),this.render(r,s,o);this._onUpdate&&!s&&Vo(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(b===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Kl(this,1),!s&&(!(r<0)||a)&&(u||a||!l)&&(Vo(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(Xl(s)||(s=No(this,s,r)),!(r instanceof gp)){if(es(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Pr(r))return this.addLabel(r,s);if(!Pi(r))return this;r=xr.delayedCall(0,r)}return this!==r?el(this,r,s):this},e.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-Po);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof xr?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return Pr(r)?this.removeLabel(r):Pi(r)?this.killTweensOf(r):(Tx(this,r),r===this._recent&&(this._recent=this._last),Bd(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Gr(io.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=No(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var a=xr.delayedCall(0,s||D_,o);return a.data="isPause",this._hasPause=1,el(this,a,No(this,r))},e.removePause=function(r){var s=this._first;for(r=No(this,r);s;)s._start===r&&"isPause"===s.data&&Kl(s),s=s._next},e.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)tu!==a[l]&&a[l].kill(r,s);return this},e.getTweensOf=function(r,s){for(var u,o=[],a=Bo(r),l=this._first,c=Xl(s);l;)l instanceof xr?B0e(l._targets,a)&&(c?(!tu||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},e.tweenTo=function(r,s){s=s||{};var f,o=this,a=No(o,r),c=s.startAt,u=s.onStart,d=s.onStartParams,h=s.immediateRender,p=xr.to(o,Fo({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Kn,onStart:function(){if(o.pause(),!f){var g=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());p._dur!==g&&fp(p,g,0,1).render(p._time,!0,!0),f=1}u&&u.apply(p,d||[])}},s));return h?p.render(0):p},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,Fo({startAt:{time:No(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return void 0===r&&(r=this._time),_5(this,No(this,r))},e.previousLabel=function(r){return void 0===r&&(r=this._time),_5(this,No(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Kn)},e.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var c,a=this._first,l=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return Bd(this)},e.invalidate=function(){var r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return n.prototype.invalidate.call(this)},e.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Bd(this)},e.totalDuration=function(r){var c,u,d,s=0,o=this,a=o._last,l=Po;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,el(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;fp(o,o===Mi&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(Mi._ts&&(JG(Mi,Ax(r,Mi)),KG=io.frame),io.frame>=ZG){ZG+=eo.autoSleep||120;var s=Mi._first;if((!s||!s._ts)&&eo.autoSleep&&io._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||io.sleep()}}},t}(gp);Fo(Os.prototype,{_lock:0,_hasPause:0,_forcing:0});var tu,lD,lbe=function(t,e,i,r,s,o,a){var d,h,f,p,m,g,_,v,l=new Ps(this._pt,t,e,0,1,I5,null,s),c=0,u=0;for(l.b=i,l.e=r,i+="",(_=~(r+="").indexOf("random("))&&(r=P_(r)),o&&(o(v=[i,r],t,e),i=v[0],r=v[1]),h=i.match(WA)||[];d=WA.exec(r);)p=d[0],m=r.substring(c,d.index),f?f=(f+1)%5:"rgba("===m.substr(-5)&&(f=1),p!==h[u++]&&(g=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:m||1===u?m:",",s:g,c:"="===p.charAt(1)?dp(g,p)-g:parseFloat(p)-g,m:f&&f<4?Math.round:0},c=WA.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(jG.test(r)||_)&&(l.e=0),this._pt=l,l},aD=function(t,e,i,r,s,o,a,l,c,u){Pi(r)&&(r=r(s||0,t,o));var p,d=t[e],h="get"!==i?i:Pi(d)?c?t[e.indexOf("set")||!Pi(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():d,f=Pi(d)?c?fbe:D5:uD;if(Pr(r)&&(~r.indexOf("random(")&&(r=P_(r)),"="===r.charAt(1)&&((p=dp(h,r)+(ts(h)||0))||0===p)&&(r=p)),!u||h!==r||lD)return isNaN(h*r)||""===r?(!d&&!(e in t)&&qA(e,r),lbe.call(this,t,e,h,r,f,l||eo.stringFilter,c)):(p=new Ps(this._pt,t,e,+h||0,r-(h||0),"boolean"==typeof d?mbe:R5,0,f),c&&(p.fp=c),a&&p.modifier(a,this,t),this._pt=p)},E5=function(t,e,i,r,s,o){var a,l,c,u;if(no[t]&&!1!==(a=new no[t]).init(s,a.rawVars?e[t]:function(t,e,i,r,s){if(Pi(t)&&(t=B_(t,s,e,i,r)),!Ja(t)||t.style&&t.nodeType||es(t)||GG(t))return Pr(t)?B_(t,s,e,i,r):t;var a,o={};for(a in t)o[a]=B_(t[a],s,e,i,r);return o}(e[t],r,s,o,i),i,r,o)&&(i._pt=l=new Ps(i._pt,s,t,0,1,a.render,a,0,a.priority),i!==pp))for(c=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},cD=function n(t,e){var w,E,R,F,N,C,L,Y,I,z,D,P,O,i=t.vars,r=i.ease,s=i.startAt,o=i.immediateRender,a=i.lazy,l=i.onUpdate,c=i.onUpdateParams,u=i.callbackScope,d=i.runBackwards,h=i.yoyoEase,f=i.keyframes,p=i.autoRevert,m=t._dur,g=t._startAt,_=t._targets,v=t.parent,y=v&&"nested"===v.data?v.vars.targets:_,b="auto"===t._overwrite&&!HA,x=t.timeline;if(x&&(!f||!r)&&(r="none"),t._ease=Vd(r,cp.ease),t._yEase=h?w5(Vd(!0===h?r:h,cp.ease)):0,h&&t._yoyo&&!t._repeat&&(h=t._yEase,t._yEase=t._ease,t._ease=h),t._from=!x&&!!i.runBackwards,!x||f&&!i.stagger){if(P=(Y=_[0]?Fd(_[0]).harness:0)&&i[Y.prop],w=Ex(i,YA),g&&(e<0&&d&&o&&!p?g.render(-1,!0):g.revert(d&&m?R_:N0e),g._lazy=0),s){if(Kl(t._startAt=xr.set(_,Fo({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:Is(a),startAt:null,delay:0,onUpdate:l,onUpdateParams:c,callbackScope:u,stagger:0},s))),e<0&&(Oo||!o&&!p)&&t._startAt.revert(R_),o&&m&&e<=0)return void(e&&(t._zTime=e))}else if(d&&m&&!g)if(e&&(o=!1),R=Fo({overwrite:!1,data:"isFromStart",lazy:o&&Is(a),immediateRender:o,stagger:0,parent:v},w),P&&(R[Y.prop]=P),Kl(t._startAt=xr.set(_,R)),e<0&&(Oo?t._startAt.revert(R_):t._startAt.render(-1,!0)),t._zTime=e,o){if(!e)return}else n(t._startAt,Kn);for(t._pt=t._ptCache=0,a=m&&Is(a)||a&&!m,E=0;E<_.length;E++){if(L=(N=_[E])._gsap||QA(_)[E]._gsap,t._ptLookup[E]=z={},XA[L.id]&&Qc.length&&Sx(),D=y===_?E:y.indexOf(N),Y&&!1!==(I=new Y).init(N,P||w,t,D,y)&&(t._pt=F=new Ps(t._pt,N,I.name,0,1,I.render,I,0,I.priority),I._props.forEach(function(q){z[q]=F}),I.priority&&(C=1)),!Y||P)for(R in w)no[R]&&(I=E5(R,w,t,D,N,y))?I.priority&&(C=1):z[R]=F=aD.call(t,N,R,"get",w[R],D,y,0,i.stringFilter);t._op&&t._op[E]&&t.kill(N,t._op[E]),b&&t._pt&&(tu=t,Mi.killTweensOf(N,z,t.globalTime(e)),O=!t.parent,tu=0),t._pt&&a&&(XA[L.id]=1)}C&&k5(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!O,f&&e<=0&&x.render(Po,!0,!0)},hbe=function(t,e,i,r){var o,a,s=e.ease||r||"power1.inOut";if(es(e))a=i[t]||(i[t]=[]),e.forEach(function(l,c){return a.push({t:c/(e.length-1)*100,v:l,e:s})});else for(o in e)a=i[o]||(i[o]=[]),"ease"===o||a.push({t:parseFloat(t),v:e[o],e:s})},B_=function(t,e,i,r,s){return Pi(t)?t.call(e,i,r,s):Pr(t)&&~t.indexOf("random(")?P_(t):t},T5=ZA+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",A5={};ks(T5+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return A5[n]=1});var xr=function(n){function t(i,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var b,x,w,E,R,F,N,C,l=(a=n.call(this,o?r:I_(r))||this).vars,c=l.duration,u=l.delay,d=l.immediateRender,h=l.stagger,f=l.overwrite,p=l.keyframes,m=l.defaults,g=l.scrollTrigger,_=l.yoyoEase,v=r.parent||Mi,y=(es(i)||GG(i)?Xl(i[0]):"length"in r)?[i]:Bo(i);if(a._targets=y.length?QA(y):Mx("GSAP target "+i+" not found. https://greensock.com",!eo.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||h||xx(c)||xx(u)){if(r=a.vars,(b=a.timeline=new Os({data:"nested",defaults:m||{},targets:v&&"nested"===v.data?v.vars.targets:y})).kill(),b.parent=b._dp=Yl(a),b._start=0,h||xx(c)||xx(u)){if(E=y.length,N=h&&h5(h),Ja(h))for(R in h)~T5.indexOf(R)&&(C||(C={}),C[R]=h[R]);for(x=0;x<E;x++)(w=Ex(r,A5)).stagger=0,_&&(w.yoyoEase=_),C&&Nd(w,C),F=y[x],w.duration=+B_(c,Yl(a),x,F,y),w.delay=(+B_(u,Yl(a),x,F,y)||0)-a._delay,!h&&1===E&&w.delay&&(a._delay=u=w.delay,a._start+=u,w.delay=0),b.to(F,w,N?N(x,F,y):0),b._ease=mn.none;b.duration()?c=u=0:a.timeline=0}else if(p){I_(Fo(b.vars.defaults,{ease:"none"})),b._ease=Vd(p.ease||r.ease||"none");var Y,I,z,L=0;if(es(p))p.forEach(function(D){return b.to(y,D,">")}),b.duration();else{for(R in w={},p)"ease"===R||"easeEach"===R||hbe(R,p[R],w,p.easeEach);for(R in w)for(Y=w[R].sort(function(D,P){return D.t-P.t}),L=0,x=0;x<Y.length;x++)(z={ease:(I=Y[x]).e,duration:(I.t-(x?Y[x-1].t:0))/100*c})[R]=I.v,b.to(y,z,L),L+=z.duration;b.duration()<c&&b.to({},{duration:c-b.duration()})}}c||a.duration(c=b.duration())}else a.timeline=0;return!0===f&&!HA&&(tu=Yl(a),Mi.killTweensOf(y),tu=0),el(v,Yl(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!c&&!p&&a._start===Gr(v._time)&&Is(d)&&z0e(Yl(a))&&"nested"!==v.data)&&(a._tTime=-Kn,a.render(Math.max(0,-u))),g&&a5(Yl(a),g),a}HG(t,n);var e=t.prototype;return e.render=function(r,s,o){var h,f,p,m,g,_,v,y,b,a=this._time,l=this._tDur,c=this._dur,u=r<0,d=r>l-Kn&&!u?l:r<Kn?0:r;if(c){if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(h=d,y=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*m+r,s,o);if(h=Gr(d%m),d===l?(p=this._repeat,h=c):((p=~~(d/m))&&p===d/m&&(h=c,p--),h>c&&(h=c)),(_=this._yoyo&&1&p)&&(b=this._yEase,h=c-h),g=hp(this._tTime,m),h===a&&!o&&this._initted)return this._tTime=d,this;p!==g&&(y&&this._yEase&&M5(y,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=o=1,this.render(Gr(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(l5(this,u?r:h,o,s))return this._tTime=0,this;if(a!==this._time)return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(b||this._ease)(h/c),this._from&&(this.ratio=v=1-v),h&&!a&&!s&&(Vo(this,"onStart"),this._tTime!==d))return this;for(f=this._pt;f;)f.r(v,f.d),f=f._next;y&&y.render(r<0?r:!h&&_?-Kn:y._dur*y._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&JA(this,r,0,o),Vo(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!s&&this.parent&&Vo(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&JA(this,r,0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Kl(this,1),!s&&(!u||a)&&(d||a)&&(Vo(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,i,r){var c,u,d,s=t.ratio,o=e<0||!e&&(!t._start&&G0e(t)&&(t._initted||!eD(t))||(t._ts<0||t._dp._ts<0)&&!eD(t))?0:1,a=t._rDelay,l=0;if(a&&t._repeat&&(l=O_(0,t._tDur,e),u=hp(l,a),t._yoyo&&1&u&&(o=1-o),u!==hp(t._tTime,a)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||Oo||r||t._zTime===Kn||!e&&t._zTime){if(!t._initted&&l5(t,e,r,i))return;for(d=t._zTime,t._zTime=e||(i?Kn:0),i||(i=e&&!d),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&JA(t,e,0,!0),t._onUpdate&&!i&&Vo(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&Vo(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Kl(t,1),!i&&!Oo&&(Vo(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,r,s,o);return this},e.targets=function(){return this._targets},e.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),n.prototype.invalidate.call(this)},e.resetTo=function(r,s,o,a){N_||io.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||cD(this,l),function(t,e,i,r,s,o,a){var c,u,d,h,l=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!l)for(l=t._ptCache[e]=[],d=t._ptLookup,h=t._targets.length;h--;){if((c=d[h][e])&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==e&&c.fp!==e;)c=c._next;if(!c)return lD=1,t.vars[e]="+=0",cD(t,a),lD=0,1;l.push(c)}for(h=l.length;h--;)(c=(u=l[h])._pt||u).s=!r&&0!==r||s?c.s+(r||0)+o*c.c:r,c.c=i-c.s,u.e&&(u.e=qi(i)+ts(u.e)),u.b&&(u.b=c.s+ts(u.b))}(this,r,s,o,a,this._ease(l/this._dur),l)?this.resetTo(r,s,o,a):(Rx(this,0),this.parent||r5(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?L_(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,tu&&!0!==tu.vars.overwrite)._first||L_(this),this.parent&&o!==this.timeline.totalDuration()&&fp(this,this._dur*this.timeline._tDur/o,0,1),this}var d,h,f,p,m,g,_,a=this._targets,l=r?Bo(r):a,c=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0}(a,l))return"all"===s&&(this._pt=0),L_(this);for(d=this._op=this._op||[],"all"!==s&&(Pr(s)&&(m={},ks(s,function(v){return m[v]=1}),s=m),s=function(t,e){var s,o,a,l,i=t[0]?Fd(t[0]).harness:0,r=i&&i.aliases;if(!r)return e;for(o in s=Nd({},e),r)if(o in s)for(a=(l=r[o].split(",")).length;a--;)s[l[a]]=s[o];return s}(a,s)),_=a.length;_--;)if(~l.indexOf(a[_]))for(m in h=c[_],"all"===s?(d[_]=s,p=h,f={}):(f=d[_]=d[_]||{},p=s),p)(g=h&&h[m])&&((!("kill"in g.d)||!0===g.d.kill(m))&&Tx(this,g,"_pt"),delete h[m]),"all"!==f&&(f[m]=1);return this._initted&&!this._pt&&u&&L_(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return k_(1,arguments)},t.delayedCall=function(r,s,o,a){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(r,s,o){return k_(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return Mi.killTweensOf(r,s,o)},t}(gp);Fo(xr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ks("staggerTo,staggerFrom,staggerFromTo",function(n){xr[n]=function(){var t=new Os,e=tD.call(arguments,0);return e.splice("staggerFromTo"===n?5:4,0,0),t[n].apply(t,e)}});var uD=function(t,e,i){return t[e]=i},D5=function(t,e,i){return t[e](i)},fbe=function(t,e,i,r){return t[e](r.fp,i)},pbe=function(t,e,i){return t.setAttribute(e,i)},dD=function(t,e){return Pi(t[e])?D5:zA(t[e])&&t.setAttribute?pbe:uD},R5=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},mbe=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},I5=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},hD=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},gbe=function(t,e,i,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(t,e,i),s=o},_be=function(t){for(var i,r,e=this._pt;e;)r=e._next,e.p===t&&!e.op||e.op===t?Tx(this,e,"_pt"):e.dep||(i=1),e=r;return!i},vbe=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},k5=function(t){for(var i,r,s,o,e=t._pt;e;){for(i=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=i}t._pt=s},Ps=function(){function n(e,i,r,s,o,a,l,c,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||R5,this.d=l||this,this.set=c||uD,this.pr=u||0,this._next=e,e&&(e._prev=this)}return n.prototype.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=vbe,this.m=i,this.mt=s,this.tween=r},n}();ks(ZA+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return YA[n]=1}),to.TweenMax=to.TweenLite=xr,to.TimelineLite=to.TimelineMax=Os,Mi=new Os({sortChildren:!1,defaults:cp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),eo.stringFilter=x5;var _p=[],Ix={},ybe=[],O5=0,fD=function(t){return(Ix[t]||ybe).map(function(e){return e()})},pD=function(){var t=Date.now(),e=[];t-O5>2&&(fD("matchMediaInit"),_p.forEach(function(i){var o,a,l,c,r=i.queries,s=i.conditions;for(a in r)(o=Lo.matchMedia(r[a]).matches)&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&e.push(i))}),fD("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i)}),O5=t,fD("matchMedia"))},P5=function(){function n(e,i){this.selector=i&&nD(i),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=n.prototype;return t.add=function(i,r,s){Pi(i)&&(s=r,r=i,i=Pi);var o=this,a=function(){var d,c=sr,u=o.selector;return c&&c!==o&&c.data.push(o),s&&(o.selector=nD(s)),sr=o,d=r.apply(o,arguments),Pi(d)&&o._r.push(d),sr=c,o.selector=u,o.isReverted=!1,d};return o.last=a,i===Pi?a(o):i?o[i]=a:a},t.ignore=function(i){var r=sr;sr=null,i(this),sr=r},t.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof xr&&i.push(r)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,r){var s=this;if(i?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,l){return l.g-a.g||-1}).forEach(function(a){return a.t.revert(i)}),this.data.forEach(function(a){return!(a instanceof gp)&&a.revert&&a.revert(i)}),this._r.forEach(function(a){return a(i,s)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r){var o=_p.indexOf(this);~o&&_p.splice(o,1)}},t.revert=function(i){this.kill(i||{})},n}(),bbe=function(){function n(e){this.contexts=[],this.scope=e}var t=n.prototype;return t.add=function(i,r,s){Ja(i)||(i={matches:i});var l,c,u,o=new P5(0,s||this.scope),a=o.conditions={};for(c in this.contexts.push(o),r=o.add("onMatch",r),o.queries=i,i)"all"===c?u=1:(l=Lo.matchMedia(i[c]))&&(_p.indexOf(o)<0&&_p.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(pD):l.addEventListener("change",pD));return u&&r(o),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),kx={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(r){return tbe(r)})},timeline:function(t){return new Os(t)},getTweensOf:function(t,e){return Mi.getTweensOf(t,e)},getProperty:function(t,e,i,r){Pr(t)&&(t=Bo(t)[0]);var s=Fd(t||{}).get,o=i?t5:e5;return"native"===i&&(i=""),t&&(e?o((no[e]&&no[e].get||s)(t,e,i,r)):function(a,l,c){return o((no[a]&&no[a].get||s)(t,a,l,c))})},quickSetter:function(t,e,i){if((t=Bo(t)).length>1){var r=t.map(function(u){return ro.quickSetter(u,e,i)}),s=r.length;return function(u){for(var d=s;d--;)r[d](u)}}var o=no[e],a=Fd(t=t[0]||{}),l=a.harness&&(a.harness.aliases||{})[e]||e,c=o?function(u){var d=new o;pp._pt=0,d.init(t,i?u+i:u,pp,0,[t]),d.render(1,d),pp._pt&&hD(1,pp)}:a.set(t,l);return o?c:function(u){return c(t,l,i?u+i:u,a,1)}},quickTo:function(t,e,i){var r,s=ro.to(t,Nd(((r={})[e]="+=0.1",r.paused=!0,r),i||{})),o=function(l,c,u){return s.resetTo(e,l,c,u)};return o.tween=s,o},isTweening:function(t){return Mi.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Vd(t.ease,cp.ease)),n5(cp,t||{})},config:function(t){return n5(eo,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,s=t.defaults,o=t.extendTimeline;(t.plugins||"").split(",").forEach(function(a){return a&&!no[a]&&!to[a]&&Mx(e+" effect requires "+a+" plugin.")}),KA[e]=function(a,l,c){return i(Bo(a),Fo(l||{},s),c)},o&&(Os.prototype[e]=function(a,l,c){return this.add(KA[e](a,Ja(l)?l:(c=l)&&{},this),c)})},registerEase:function(t,e){mn[t]=Vd(e)},parseEase:function(t,e){return arguments.length?Vd(t,e):mn},getById:function(t){return Mi.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var r,s,i=new Os(t);for(i.smoothChildTiming=Is(t.smoothChildTiming),Mi.remove(i),i._dp=0,i._time=i._tTime=Mi._time,r=Mi._first;r;)s=r._next,(e||!(!r._dur&&r instanceof xr&&r.vars.onComplete===r._targets[0]))&&el(i,r,r._start-r._delay),r=s;return el(Mi,i,0),i},context:function(t,e){return t?new P5(t,e):sr},matchMedia:function(t){return new bbe(t)},matchMediaRefresh:function(){return _p.forEach(function(t){var i,r,e=t.conditions;for(r in e)e[r]&&(e[r]=!1,i=1);i&&t.revert()})||pD()},addEventListener:function(t,e){var i=Ix[t]||(Ix[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Ix[t],r=i&&i.indexOf(e);r>=0&&i.splice(r,1)},utils:{wrap:function n(t,e,i){var r=e-t;return es(t)?m5(t,n(0,t.length),e):Jc(i,function(s){return(r+(s-t)%r)%r+t})},wrapYoyo:function n(t,e,i){var r=e-t,s=2*r;return es(t)?m5(t,n(0,t.length-1),e):Jc(i,function(o){return t+((o=(s+(o-t)%s)%s||0)>r?s-o:o)})},distribute:h5,random:p5,snap:f5,normalize:function(t,e,i){return g5(t,e,0,1,i)},getUnit:ts,clamp:function(t,e,i){return Jc(i,function(r){return O_(t,e,r)})},splitColor:v5,toArray:Bo,selector:nD,mapRange:g5,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(r){return e.reduce(function(s,o){return o(s)},r)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||ts(i))}},interpolate:function n(t,e,i,r){var s=isNaN(t+e)?0:function(f){return(1-f)*t+f*e};if(!s){var l,c,u,d,h,o=Pr(t),a={};if(!0===i&&(r=1)&&(i=null),o)t={p:t},e={p:e};else if(es(t)&&!es(e)){for(u=[],h=(d=t.length)-2,c=1;c<d;c++)u.push(n(t[c-1],t[c]));d--,s=function(p){p*=d;var m=Math.min(h,~~p);return u[m](p-m)},i=e}else r||(t=Nd(es(t)?[]:{},t));if(!u){for(l in e)aD.call(a,t,l,"get",e[l]);s=function(p){return hD(p,a)||(o?t.p:t)}}}return Jc(i,s)},shuffle:d5},install:YG,effects:KA,ticker:io,updateRoot:Os.updateRoot,plugins:no,globalTimeline:Mi,core:{PropTween:Ps,globals:XG,Tween:xr,Timeline:Os,Animation:gp,getCache:Fd,_removeLinkedListItem:Tx,reverting:function(){return Oo},context:function(t){return t&&sr&&(sr.data.push(t),t._ctx=sr),sr},suppressOverwrites:function(t){return HA=t}}};ks("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return kx[n]=xr[n]}),io.add(Os.updateRoot),pp=kx.to({},{duration:0});var xbe=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},mD=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(Pr(s)&&(l={},ks(s,function(u){return l[u]=1}),s=l),e){for(c in l={},s)l[c]=e(s[c]);s=l}!function(t,e){var r,s,o,i=t._targets;for(r in e)for(s=i.length;s--;)(o=t._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=xbe(o,r)),o&&o.modifier&&o.modifier(e[r],t,i[s],r))}(a,s)}}}},ro=kx.registerPlugin({name:"attr",init:function(t,e,i,r,s){var o,a,l;for(o in this.tween=i,e)l=t.getAttribute(o)||"",(a=this.add(t,"setAttribute",(l||0)+"",e[o],r,s,0,0,o)).op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var i=e._pt;i;)Oo?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},mD("roundProps",iD),mD("modifiers"),mD("snap",f5))||kx;xr.version=Os.version=ro.version="3.11.1",qG=1,zG()&&mp();var L5,nu,vp,gD,Ud,F5,_D,z5,Zl={},zd=180/Math.PI,yp=Math.PI/180,bp=Math.atan2,N5=1e8,vD=/([A-Z])/g,Sbe=/(left|right|width|margin|padding|x)/i,Ebe=/[\s,\(]\S/,Ql={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},yD=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Tbe=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Abe=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Dbe=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},B5=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},V5=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Rbe=function(t,e,i){return t.style[e]=i},Ibe=function(t,e,i){return t.style.setProperty(e,i)},kbe=function(t,e,i){return t._gsap[e]=i},Obe=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Pbe=function(t,e,i,r,s){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},Lbe=function(t,e,i,r,s){var o=t._gsap;o[e]=i,o.renderTransform(s,o)},Li="transform",_a=Li+"Origin",Fbe=function(t){var e=this,i=this.target,r=i.style;if(t in Zl){if(this.tfm=this.tfm||{},"transform"!==t&&(~(t=Ql[t]||t).indexOf(",")?t.split(",").forEach(function(s){return e.tfm[s]=Jl(i,s)}):this.tfm[t]=i._gsap.x?i._gsap[t]:Jl(i,t)),this.props.indexOf(Li)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(_a,"")),t=Li}r&&this.props.push(t,r[t])},H5=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Nbe=function(){var s,o,t=this.props,e=this.target,i=e.style,r=e._gsap;for(s=0;s<t.length;s+=2)t[s+1]?i[t[s]]=t[s+1]:i.removeProperty(t[s].replace(vD,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),(s=_D())&&!s.isStart&&!i[Li]&&(H5(i),r.uncache=1)}},U5=function(t,e){var i={target:t,props:[],revert:Nbe,save:Fbe};return e&&e.split(",").forEach(function(r){return i.save(r)}),i},bD=function(t,e){var i=nu.createElementNS?nu.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):nu.createElement(t);return i.style?i:nu.createElement(t)},tl=function n(t,e,i){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(vD,"-$1").toLowerCase())||r.getPropertyValue(e)||!i&&n(t,xp(e)||e,1)||""},G5="O,Moz,ms,Ms,Webkit".split(","),xp=function(t,e,i){var s=(e||Ud).style,o=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(G5[o]+t in s););return o<0?null:(3===o?"ms":o>=0?G5[o]:"")+t},xD=function(){"undefined"!=typeof window&&window.document&&(L5=window,vp=(nu=L5.document).documentElement,Ud=bD("div")||{style:{}},bD("div"),Li=xp(Li),_a=Li+"Origin",Ud.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",z5=!!xp("perspective"),_D=ro.core.reverting,gD=1)},wD=function n(t){var o,e=bD("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(vp.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch(a){}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),vp.removeChild(e),this.style.cssText=s,o},W5=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},j5=function(t){var e;try{e=t.getBBox()}catch(i){e=wD.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===wD||(e=wD.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+W5(t,["x","cx","x1"])||0,y:+W5(t,["y","cy","y1"])||0,width:0,height:0}},$5=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!j5(t))},V_=function(t,e){if(e){var i=t.style;e in Zl&&e!==_a&&(e=Li),i.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),i.removeProperty(e.replace(vD,"-$1").toLowerCase())):i.removeAttribute(e)}},iu=function(t,e,i,r,s,o){var a=new Ps(t._pt,e,i,0,1,o?V5:B5);return t._pt=a,a.b=r,a.e=s,t._props.push(i),a},q5={deg:1,rad:1,turn:1},Bbe={grid:1,flex:1},ru=function n(t,e,i,r){var p,m,g,_,s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Ud.style,l=Sbe.test(e),c="svg"===t.tagName.toLowerCase(),u=(c?"client":"offset")+(l?"Width":"Height"),d=100,h="px"===r,f="%"===r;return r===o||!s||q5[r]||q5[o]?s:("px"!==o&&!h&&(s=n(t,e,i,"px")),_=t.getCTM&&$5(t),!f&&"%"!==o||!Zl[e]&&!~e.indexOf("adius")?(a[l?"width":"height"]=d+(h?o:r),m=~e.indexOf("adius")||"em"===r&&t.appendChild&&!c?t:t.parentNode,_&&(m=(t.ownerSVGElement||{}).parentNode),(!m||m===nu||!m.appendChild)&&(m=nu.body),(g=m._gsap)&&f&&g.width&&l&&g.time===io.time&&!g.uncache?qi(s/g.width*d):((f||"%"===o)&&!Bbe[tl(m,"display")]&&(a.position=tl(t,"position")),m===t&&(a.position="static"),m.appendChild(Ud),p=Ud[u],m.removeChild(Ud),a.position="absolute",l&&f&&((g=Fd(m)).time=io.time,g.width=m[u]),qi(h?p*s/d:p&&s?d/p*s:0))):(p=_?t.getBBox()[l?"width":"height"]:t[u],qi(f?s/p*d:s/100*p)))},Jl=function(t,e,i,r){var s;return gD||xD(),e in Ql&&"transform"!==e&&~(e=Ql[e]).indexOf(",")&&(e=e.split(",")[0]),Zl[e]&&"transform"!==e?(s=U_(t,r),s="transformOrigin"!==e?s[e]:s.svg?s.origin:Px(tl(t,_a))+" "+s.zOrigin+"px"):(!(s=t.style[e])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=Ox[e]&&Ox[e](t,e,i)||tl(t,e)||QG(t,e)||("opacity"===e?1:0)),i&&!~(s+"").trim().indexOf(" ")?ru(t,e,s,i)+i:s},Vbe=function(t,e,i,r){if(!i||"none"===i){var s=xp(e,t,1),o=s&&tl(t,s,1);o&&o!==i?(e=s,i=o):"borderColor"===e&&(i=tl(t,"borderTopColor"))}var u,d,h,f,p,m,g,_,v,y,b,a=new Ps(this._pt,t.style,e,0,1,I5),l=0,c=0;if(a.b=i,a.e=r,i+="","auto"==(r+="")&&(t.style[e]=r,r=tl(t,e)||r,t.style[e]=i),x5(u=[i,r]),r=u[1],h=(i=u[0]).match(up)||[],(r.match(up)||[]).length){for(;d=up.exec(r);)g=d[0],v=r.substring(l,d.index),p?p=(p+1)%5:("rgba("===v.substr(-5)||"hsla("===v.substr(-5))&&(p=1),g!==(m=h[c++]||"")&&(f=parseFloat(m)||0,b=m.substr((f+"").length),"="===g.charAt(1)&&(g=dp(f,g)+b),_=parseFloat(g),y=g.substr((_+"").length),l=up.lastIndex-y.length,y||(y=y||eo.units[e]||b,l===r.length&&(r+=y,a.e+=y)),b!==y&&(f=ru(t,e,m,y)||0),a._pt={_next:a._pt,p:v||1===c?v:",",s:f,c:_-f,m:p&&p<4||"zIndex"===e?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r="display"===e&&"none"===r?V5:B5;return jG.test(r)&&(a.e=0),this._pt=a,a},Y5={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Hbe=function(t){var e=t.split(" "),i=e[0],r=e[1]||"50%";return("top"===i||"bottom"===i||"left"===r||"right"===r)&&(t=i,i=r,r=t),e[0]=Y5[i]||i,e[1]=Y5[r]||r,e.join(" ")},Ube=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var a,l,c,i=e.t,r=i.style,s=e.u,o=i._gsap;if("all"===s||!0===s)r.cssText="",l=1;else for(c=(s=s.split(",")).length;--c>-1;)Zl[a=s[c]]&&(l=1,a="transformOrigin"===a?_a:Li),V_(i,a);l&&(V_(i,Li),o&&(o.svg&&i.removeAttribute("transform"),U_(i,1),o.uncache=1,H5(r)))}},Ox={clearProps:function(t,e,i,r,s){if("isFromStart"!==s.data){var o=t._pt=new Ps(t._pt,e,i,0,0,Ube);return o.u=r,o.pr=-10,o.tween=s,t._props.push(i),1}}},H_=[1,0,0,1,0,0],X5={},K5=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Z5=function(t){var e=tl(t,Li);return K5(e)?H_:e.substr(7).match(WG).map(qi)},MD=function(t,e){var o,a,l,c,i=t._gsap||Fd(t),r=t.style,s=Z5(t);return i.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(l=t.transform.baseVal.consolidate().matrix).a,l.b,l.c,l.d,l.e,l.f]).join(",")?H_:s:(s===H_&&!t.offsetParent&&t!==vp&&!i.svg&&(l=r.display,r.display="block",(!(o=t.parentNode)||!t.offsetParent)&&(c=1,a=t.nextElementSibling,vp.appendChild(t)),s=Z5(t),l?r.display=l:V_(t,"display"),c&&(a?o.insertBefore(t,a):o?o.appendChild(t):vp.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},CD=function(t,e,i,r,s,o){var w,E,F,a=t._gsap,l=s||MD(t,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,f=l[0],p=l[1],m=l[2],g=l[3],_=l[4],v=l[5],y=e.split(" "),b=parseFloat(y[0])||0,x=parseFloat(y[1])||0;i?l!==H_&&(E=f*g-p*m)&&(F=b*(-p/E)+x*(f/E)-(f*v-p*_)/E,b=b*(g/E)+x*(-m/E)+(m*v-g*_)/E,x=F):(b=(w=j5(t)).x+(~y[0].indexOf("%")?b/100*w.width:b),x=w.y+(~(y[1]||y[0]).indexOf("%")?x/100*w.height:x)),r||!1!==r&&a.smooth?(a.xOffset=d+((_=b-c)*f+(v=x-u)*m)-_,a.yOffset=h+(_*p+v*g)-v):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=x,a.smooth=!!r,a.origin=e,a.originIsAbsolute=!!i,t.style[_a]="0px 0px",o&&(iu(o,a,"xOrigin",c,b),iu(o,a,"yOrigin",u,x),iu(o,a,"xOffset",d,a.xOffset),iu(o,a,"yOffset",h,a.yOffset)),t.setAttribute("data-svg-origin",b+" "+x)},U_=function(t,e){var i=t._gsap||new S5(t);if("x"in i&&!e&&!i.uncache)return i;var u,d,h,f,p,m,g,_,v,y,b,x,w,E,R,F,N,C,L,Y,I,z,D,P,O,q,K,J,j,we,fe,_e,r=t.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(t),c=tl(t,_a)||"0";return u=d=h=m=g=_=v=y=b=0,f=p=1,i.svg=!(!t.getCTM||!$5(t)),l.translate&&(("none"!==l.translate||"none"!==l.scale||"none"!==l.rotate)&&(r[Li]=("none"!==l.translate?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==l.rotate?"rotate("+l.rotate+") ":"")+("none"!==l.scale?"scale("+l.scale.split(" ").join(",")+") ":"")+l[Li]),r.scale=r.rotate=r.translate="none"),E=MD(t,i.svg),i.svg&&(i.uncache?(O=t.getBBox(),c=i.xOrigin-O.x+"px "+(i.yOrigin-O.y)+"px",P=""):P=!e&&t.getAttribute("data-svg-origin"),CD(t,P||c,!!P||i.originIsAbsolute,!1!==i.smooth,E)),x=i.xOrigin||0,w=i.yOrigin||0,E!==H_&&(C=E[0],L=E[1],Y=E[2],I=E[3],u=z=E[4],d=D=E[5],6===E.length?(f=Math.sqrt(C*C+L*L),p=Math.sqrt(I*I+Y*Y),m=C||L?bp(L,C)*zd:0,(v=Y||I?bp(Y,I)*zd+m:0)&&(p*=Math.abs(Math.cos(v*yp))),i.svg&&(u-=x-(x*C+w*Y),d-=w-(x*L+w*I))):(we=E[7],K=E[8],J=E[9],fe=E[11],u=E[12],d=E[13],h=E[14],g=(R=bp(_e=E[6],j=E[10]))*zd,R&&(P=z*(F=Math.cos(-R))+K*(N=Math.sin(-R)),O=D*F+J*N,q=_e*F+j*N,K=z*-N+K*F,J=D*-N+J*F,j=_e*-N+j*F,fe=we*-N+fe*F,z=P,D=O,_e=q),_=(R=bp(-Y,j))*zd,R&&(F=Math.cos(-R),fe=I*(N=Math.sin(-R))+fe*F,C=P=C*F-K*N,L=O=L*F-J*N,Y=q=Y*F-j*N),m=(R=bp(L,C))*zd,R&&(P=C*(F=Math.cos(R))+L*(N=Math.sin(R)),O=z*F+D*N,L=L*F-C*N,D=D*F-z*N,C=P,z=O),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,_=180-_),f=qi(Math.sqrt(C*C+L*L+Y*Y)),p=qi(Math.sqrt(D*D+_e*_e)),R=bp(z,D),v=Math.abs(R)>2e-4?R*zd:0,b=fe?1/(fe<0?-fe:fe):0),i.svg&&(P=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!K5(tl(t,Li)),P&&t.setAttribute("transform",P))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(f*=-1,v+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,v+=v<=0?180:-180)),e=e||i.uncache,i.x=u-((i.xPercent=u&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+o,i.z=h+o,i.scaleX=qi(f),i.scaleY=qi(p),i.rotation=qi(m)+a,i.rotationX=qi(g)+a,i.rotationY=qi(_)+a,i.skewX=v+a,i.skewY=y+a,i.transformPerspective=b+o,(i.zOrigin=parseFloat(c.split(" ")[2])||0)&&(r[_a]=Px(c)),i.xOffset=i.yOffset=0,i.force3D=eo.force3D,i.renderTransform=i.svg?Gbe:z5?Q5:zbe,i.uncache=0,i},Px=function(t){return(t=t.split(" "))[0]+" "+t[1]},SD=function(t,e,i){var r=ts(e);return qi(parseFloat(e)+parseFloat(ru(t,"x",i+"px",r)))+r},zbe=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Q5(t,e)},Gd="0deg",z_="0px",Wd=") ",Q5=function(t,e){var i=e||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,d=i.rotationX,h=i.skewX,f=i.skewY,p=i.scaleX,m=i.scaleY,g=i.transformPerspective,_=i.force3D,v=i.target,y=i.zOrigin,b="",x="auto"===_&&t&&1!==t||!0===_;if(y&&(d!==Gd||u!==Gd)){var F,w=parseFloat(u)*yp,E=Math.sin(w),R=Math.cos(w);w=parseFloat(d)*yp,F=Math.cos(w),o=SD(v,o,E*F*-y),a=SD(v,a,-Math.sin(w)*-y),l=SD(v,l,R*F*-y+y)}g!==z_&&(b+="perspective("+g+Wd),(r||s)&&(b+="translate("+r+"%, "+s+"%) "),(x||o!==z_||a!==z_||l!==z_)&&(b+=l!==z_||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Wd),c!==Gd&&(b+="rotate("+c+Wd),u!==Gd&&(b+="rotateY("+u+Wd),d!==Gd&&(b+="rotateX("+d+Wd),(h!==Gd||f!==Gd)&&(b+="skew("+h+", "+f+Wd),(1!==p||1!==m)&&(b+="scale("+p+", "+m+Wd),v.style[Li]=b||"translate(0, 0)"},Gbe=function(t,e){var x,w,E,R,F,i=e||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,d=i.scaleX,h=i.scaleY,f=i.target,p=i.xOrigin,m=i.yOrigin,g=i.xOffset,_=i.yOffset,v=i.forceCSS,y=parseFloat(o),b=parseFloat(a);l=parseFloat(l),c=parseFloat(c),(u=parseFloat(u))&&(c+=u=parseFloat(u),l+=u),l||c?(l*=yp,c*=yp,x=Math.cos(l)*d,w=Math.sin(l)*d,E=Math.sin(l-c)*-h,R=Math.cos(l-c)*h,c&&(u*=yp,F=Math.tan(c-u),E*=F=Math.sqrt(1+F*F),R*=F,u&&(F=Math.tan(u),x*=F=Math.sqrt(1+F*F),w*=F)),x=qi(x),w=qi(w),E=qi(E),R=qi(R)):(x=d,R=h,w=E=0),(y&&!~(o+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(y=ru(f,"x",o,"px"),b=ru(f,"y",a,"px")),(p||m||g||_)&&(y=qi(y+p-(p*x+m*E)+g),b=qi(b+m-(p*w+m*R)+_)),(r||s)&&(F=f.getBBox(),y=qi(y+r/100*F.width),b=qi(b+s/100*F.height)),f.setAttribute("transform",F="matrix("+x+","+w+","+E+","+R+","+y+","+b+")"),v&&(f.style[Li]=F)},Wbe=function(t,e,i,r,s){var d,h,o=360,a=Pr(s),c=parseFloat(s)*(a&&~s.indexOf("rad")?zd:1)-r,u=r+c+"deg";return a&&("short"===(d=s.split("_")[1])&&(c%=o)!=c%180&&(c+=c<0?o:-o),"cw"===d&&c<0?c=(c+o*N5)%o-~~(c/o)*o:"ccw"===d&&c>0&&(c=(c-o*N5)%o-~~(c/o)*o)),t._pt=h=new Ps(t._pt,e,i,r,c,Tbe),h.e=u,h.u="deg",t._props.push(i),h},J5=function(t,e){for(var i in e)t[i]=e[i];return t},jbe=function(t,e,i){var a,l,c,u,d,h,p,r=J5({},i._gsap),o=i.style;for(l in r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[Li]=e,a=U_(i,1),V_(i,Li),i.setAttribute("transform",c)):(c=getComputedStyle(i)[Li],o[Li]=e,a=U_(i,1),o[Li]=c),Zl)(c=r[l])!==(u=a[l])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(l)<0&&(d=ts(c)!==(p=ts(u))?ru(i,l,c,p):parseFloat(c),h=parseFloat(u),t._pt=new Ps(t._pt,a,l,d,h-d,yD),t._pt.u=p||0,t._props.push(l));J5(a,r)};ks("padding,margin,Width,Radius",function(n,t){var e="Top",i="Right",r="Bottom",s="Left",o=(t<3?[e,i,r,s]:[e+s,e+i,r+i,r+s]).map(function(a){return t<2?n+a:"border"+a+n});Ox[t>1?"border"+n:n]=function(a,l,c,u,d){var h,f;if(arguments.length<4)return h=o.map(function(p){return Jl(a,p,c)}),5===(f=h.join(" ")).split(h[0]).length?h[0]:f;h=(u+"").split(" "),f={},o.forEach(function(p,m){return f[p]=h[m]=h[m]||h[(m-1)/2|0]}),a.init(l,f,d)}});var e4={name:"css",register:xD,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,s){var c,u,d,h,f,p,m,g,_,v,y,b,x,w,E,R,o=this._props,a=t.style,l=i.vars.startAt;for(m in gD||xD(),this.styles=this.styles||U5(t),R=this.styles.props,this.tween=i,e)if("autoRound"!==m&&(u=e[m],!no[m]||!E5(m,e,i,r,t,s)))if(p=Ox[m],"function"==(f=typeof u)&&(f=typeof(u=u.call(i,r,t,s))),"string"===f&&~u.indexOf("random(")&&(u=P_(u)),p)p(this,t,m,u,i)&&(E=1);else if("--"===m.substr(0,2))c=(getComputedStyle(t).getPropertyValue(m)+"").trim(),u+="",eu.lastIndex=0,eu.test(c)||(g=ts(c),_=ts(u)),_?g!==_&&(c=ru(t,m,c,_)+_):g&&(u+=g),this.add(a,"setProperty",c,u,r,s,0,0,m),o.push(m),R.push(m,a[m]);else if("undefined"!==f){if(l&&m in l?(c="function"==typeof l[m]?l[m].call(i,r,t,s):l[m],Pr(c)&&~c.indexOf("random(")&&(c=P_(c)),ts(c+"")||(c+=eo.units[m]||ts(Jl(t,m))||""),"="===(c+"").charAt(1)&&(c=Jl(t,m))):c=Jl(t,m),h=parseFloat(c),(v="string"===f&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),d=parseFloat(u),m in Ql&&("autoAlpha"===m&&(1===h&&"hidden"===Jl(t,"visibility")&&d&&(h=0),R.push("visibility",a.visibility),iu(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),"scale"!==m&&"transform"!==m&&~(m=Ql[m]).indexOf(",")&&(m=m.split(",")[0])),y=m in Zl)if(this.styles.save(m),b||((x=t._gsap).renderTransform&&!e.parseTransform||U_(t,e.parseTransform),w=!1!==e.smoothOrigin&&x.smooth,(b=this._pt=new Ps(this._pt,a,Li,0,1,x.renderTransform,x,0,-1)).dep=1),"scale"===m)this._pt=new Ps(this._pt,x,"scaleY",x.scaleY,(v?dp(x.scaleY,v+d):d)-x.scaleY||0,yD),this._pt.u=0,o.push("scaleY",m),m+="X";else{if("transformOrigin"===m){R.push(_a,a[_a]),u=Hbe(u),x.svg?CD(t,u,0,w,0,this):((_=parseFloat(u.split(" ")[2])||0)!==x.zOrigin&&iu(this,x,"zOrigin",x.zOrigin,_),iu(this,a,m,Px(c),Px(u)));continue}if("svgOrigin"===m){CD(t,u,1,w,0,this);continue}if(m in X5){Wbe(this,x,m,h,v?dp(h,v+u):u);continue}if("smoothOrigin"===m){iu(this,x,"smooth",x.smooth,u);continue}if("force3D"===m){x[m]=u;continue}if("transform"===m){jbe(this,u,t);continue}}else m in a||(m=xp(m)||m);if(y||(d||0===d)&&(h||0===h)&&!Ebe.test(u)&&m in a)d||(d=0),(g=(c+"").substr((h+"").length))!==(_=ts(u)||(m in eo.units?eo.units[m]:g))&&(h=ru(t,m,c,_)),this._pt=new Ps(this._pt,y?x:a,m,h,(v?dp(h,v+d):d)-h,y||"px"!==_&&"zIndex"!==m||!1===e.autoRound?yD:Dbe),this._pt.u=_||0,g!==_&&"%"!==_&&(this._pt.b=c,this._pt.r=Abe);else if(m in a)Vbe.call(this,t,m,c,v?v+u:u);else{if(!(m in t)){qA(m,u);continue}this.add(t,m,c||t[m],v?v+u:u,r,s)}y||R.push(m,a[m]),o.push(m)}E&&k5(this)},render:function(t,e){if(e.tween._time||!_D())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Jl,aliases:Ql,getSetter:function(t,e,i){var r=Ql[e];return r&&r.indexOf(",")<0&&(e=r),e in Zl&&e!==_a&&(t._gsap.x||Jl(t,"x"))?i&&F5===i?"scale"===e?Obe:kbe:(F5=i||{})&&("scale"===e?Pbe:Lbe):t.style&&!zA(t.style[e])?Rbe:~e.indexOf("-")?Ibe:dD(t,e)},core:{_removeProperty:V_,_getMatrix:MD}};ro.utils.checkPrefix=xp,ro.core.getStyleSaver=U5,function(n,t,e,i){var r=ks(n+","+t+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){Zl[s]=1});ks(t,function(s){eo.units[s]="deg",X5[s]=1}),Ql[r[13]]=n+","+t,ks("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");Ql[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),ks("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){eo.units[n]="px"}),ro.registerPlugin(e4);var so=ro.registerPlugin(e4)||ro;const Xd=1e3,_s=1001,or=1003,Fi=1006,ou=1008,Kd=1009,$_=1012,au=1015,Ep=1016,Tp=1020,Uo=1023,Zd=1026,Ap=1027,q_=2300,Dp=2301,Rp=2400,Ip=2401,tc=3e3,An=3001,nc="srgb",Jd="srgb-linear",Y_=35044,X_=35048;class lu{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const i=this._listeners[t.type];if(void 0!==i){t.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Wr=[];for(let n=0;n<256;n++)Wr[n]=(n<16?"0":"")+n.toString(16);let F4=1234567;const eh=Math.PI/180,K_=180/Math.PI;function oo(){const n=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Wr[255&n]+Wr[n>>8&255]+Wr[n>>16&255]+Wr[n>>24&255]+"-"+Wr[255&t]+Wr[t>>8&255]+"-"+Wr[t>>16&15|64]+Wr[t>>24&255]+"-"+Wr[63&e|128]+Wr[e>>8&255]+"-"+Wr[e>>16&255]+Wr[e>>24&255]+Wr[255&i]+Wr[i>>8&255]+Wr[i>>16&255]+Wr[i>>24&255]).toLowerCase()}function Yi(n,t,e){return Math.max(t,Math.min(e,n))}function BD(n,t){return(n%t+t)%t}function Z_(n,t,e){return(1-e)*n+e*t}function VD(n){return 0==(n&n-1)&&0!==n}function N4(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function zx(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}var owe=Object.freeze({__proto__:null,DEG2RAD:eh,RAD2DEG:K_,generateUUID:oo,clamp:Yi,euclideanModulo:BD,mapLinear:function jxe(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)},inverseLerp:function $xe(n,t,e){return n!==t?(e-n)/(t-n):0},lerp:Z_,damp:function qxe(n,t,e,i){return Z_(n,t,1-Math.exp(-e*i))},pingpong:function Yxe(n,t=1){return t-Math.abs(BD(n,2*t)-t)},smoothstep:function Xxe(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t))*n*(3-2*n)},smootherstep:function Kxe(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t))*n*n*(n*(6*n-15)+10)},randInt:function Zxe(n,t){return n+Math.floor(Math.random()*(t-n+1))},randFloat:function Qxe(n,t){return n+Math.random()*(t-n)},randFloatSpread:function Jxe(n){return n*(.5-Math.random())},seededRandom:function ewe(n){void 0!==n&&(F4=n);let t=F4+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function twe(n){return n*eh},radToDeg:function nwe(n){return n*K_},isPowerOfTwo:VD,ceilPowerOfTwo:N4,floorPowerOfTwo:zx,setQuaternionFromProperEuler:function iwe(n,t,e,i,r){const s=Math.cos,o=Math.sin,a=s(e/2),l=o(e/2),c=s((t+i)/2),u=o((t+i)/2),d=s((t-i)/2),h=o((t-i)/2),f=s((i-t)/2),p=o((i-t)/2);switch(r){case"XYX":n.set(a*u,l*d,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:function swe(n,t){switch(t.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}},denormalize:function rwe(n,t){switch(t.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}});class me{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*i-o*r+t.x,this.y=s*r+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}me.prototype.isVector2=!0;class Lr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,r,s,o,a,l,c){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],m=r[0],g=r[3],_=r[6],v=r[1],y=r[4],b=r[7],x=r[2],w=r[5],E=r[8];return s[0]=o*m+a*v+l*x,s[3]=o*g+a*y+l*w,s[6]=o*_+a*b+l*E,s[1]=c*m+u*v+d*x,s[4]=c*g+u*y+d*w,s[7]=c*_+u*b+d*E,s[2]=h*m+f*v+p*x,s[5]=h*g+f*y+p*w,s[8]=h*_+f*b+p*E,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return e*o*u-e*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=e*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=d*m,t[1]=(r*c-u*i)*m,t[2]=(a*i-r*o)*m,t[3]=h*m,t[4]=(u*e-r*l)*m,t[5]=(r*s-a*e)*m,t[6]=f*m,t[7]=(i*l-c*e)*m,t[8]=(o*e-i*s)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=e*s+i*l,r[3]=e*o+i*c,r[6]=e*a+i*u,r[1]=-i*s+e*l,r[4]=-i*o+e*c,r[7]=-i*a+e*u,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function B4(n){for(let t=n.length-1;t>=0;--t)if(n[t]>65535)return!0;return!1}function Q_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function th(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Gx(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Lr.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const HD={[nc]:{[Jd]:th},[Jd]:{[nc]:Gx}},va={legacyMode:!0,get workingColorSpace(){return Jd},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,t,e){if(this.legacyMode||t===e||!t||!e)return n;if(HD[t]&&void 0!==HD[t][e]){const i=HD[t][e];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,t){return this.convert(n,this.workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this.workingColorSpace)}},V4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wr={r:0,g:0,b:0},ya={h:0,s:0,l:0},Wx={h:0,s:0,l:0};function UD(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+6*(t-n)*(2/3-e):n}function jx(n,t){return t.r=n.r,t.g=n.g,t.b=n.b,t}let Op,Fe=(()=>{class n{constructor(e,i,r){return void 0===i&&void 0===r?this.set(e):this.setRGB(e,i,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=nc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,va.toWorkingColorSpace(this,i),this}setRGB(e,i,r,s=Jd){return this.r=e,this.g=i,this.b=r,va.toWorkingColorSpace(this,s),this}setHSL(e,i,r,s=Jd){if(e=BD(e,1),i=Yi(i,0,1),r=Yi(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=UD(a,o,e+1/3),this.g=UD(a,o,e),this.b=UD(a,o,e-1/3)}return va.toWorkingColorSpace(this,s),this}setStyle(e,i=nc){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,va.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,va.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,u=parseInt(o[2],10)/100,d=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(c,u,d,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,va.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,va.toWorkingColorSpace(this,i),this}return e&&e.length>0?this.setColorName(e,i):this}setColorName(e,i=nc){const r=V4[e.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=th(e.r),this.g=th(e.g),this.b=th(e.b),this}copyLinearToSRGB(e){return this.r=Gx(e.r),this.g=Gx(e.g),this.b=Gx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=nc){return va.fromWorkingColorSpace(jx(this,wr),e),Yi(255*wr.r,0,255)<<16^Yi(255*wr.g,0,255)<<8^Yi(255*wr.b,0,255)<<0}getHexString(e=nc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=Jd){va.fromWorkingColorSpace(jx(this,wr),i);const r=wr.r,s=wr.g,o=wr.b,a=Math.max(r,s,o),l=Math.min(r,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case r:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-r)/h+2;break;case o:c=(r-s)/h+4}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,i=Jd){return va.fromWorkingColorSpace(jx(this,wr),i),e.r=wr.r,e.g=wr.g,e.b=wr.b,e}getStyle(e=nc){return va.fromWorkingColorSpace(jx(this,wr),e),e!==nc?`color(${e} ${wr.r} ${wr.g} ${wr.b})`:`rgb(${255*wr.r|0},${255*wr.g|0},${255*wr.b|0})`}offsetHSL(e,i,r){return this.getHSL(ya),ya.h+=e,ya.s+=i,ya.l+=r,this.setHSL(ya.h,ya.s,ya.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,r){return this.r=e.r+(i.r-e.r)*r,this.g=e.g+(i.g-e.g)*r,this.b=e.b+(i.b-e.b)*r,this}lerpHSL(e,i){this.getHSL(ya),e.getHSL(Wx);const r=Z_(ya.h,Wx.h,i),s=Z_(ya.s,Wx.s,i),o=Z_(ya.l,Wx.l,i);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=V4,n})();Fe.prototype.isColor=!0,Fe.prototype.r=1,Fe.prototype.g=1,Fe.prototype.b=1;class nh{static getDataURL(t){if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Op&&(Op=Q_("canvas")),Op.width=t.width,Op.height=t.height;const i=Op.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Op}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=Q_("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*th(s[o]/255);return i.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e[i]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*th(e[i]/255)):th(e[i]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Pp{constructor(t=null){this.uuid=oo(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(zD(r[o].isDataTexture?r[o].image:r[o]))}else s=zD(r);i.url=s}return e||(t.images[this.uuid]=i),i}}function zD(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?nh.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Pp.prototype.isSource=!0;let lwe=0,ns=(()=>{class n extends lu{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=_s,s=_s,o=Fi,a=ou,l=Uo,c=Kd,u=1,d=tc){super(),Object.defineProperty(this,"id",{value:lwe++}),this.uuid=oo(),this.name="",this.source=new Pp(e),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new me(0,0),this.repeat=new me(1,1),this.center=new me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Lr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const i=void 0===e||"string"==typeof e;if(!i&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Xd:e.x=e.x-Math.floor(e.x);break;case _s:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Xd:e.y=e.y-Math.floor(e.y);break;case _s:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();ns.prototype.isTexture=!0;class Nn{constructor(t=0,e=0,i=0,r=1){this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,s;const l=t.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],m=l[2],g=l[6],_=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const y=(c+1)/2,b=(f+1)/2,x=(_+1)/2,w=(u+h)/4,E=(d+m)/4,R=(p+g)/4;return y>b&&y>x?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=w/i,s=E/i):b>x?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=w/r,s=R/r):x<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),i=E/s,r=R/s),this.set(i,r,s,e),this}let v=Math.sqrt((g-p)*(g-p)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(g-p)/v,this.y=(d-m)/v,this.z=(h-u)/v,this.w=Math.acos((c+f+_-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Nn.prototype.isVector4=!0;class ao extends lu{constructor(t,e,i={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Nn(0,0,t,e),this.scissorTest=!1,this.viewport=new Nn(0,0,t,e),this.texture=new ns({width:t,height:e,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Fi,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){(this.width!==t||this.height!==e||this.depth!==i)&&(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},t.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}ao.prototype.isWebGLRenderTarget=!0;class $x extends ns{constructor(t=null,e=1,i=1,r=1){super(null),this.image={data:t,width:e,height:i,depth:r},this.magFilter=or,this.minFilter=or,this.wrapR=_s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}$x.prototype.isDataArrayTexture=!0,class cwe extends ao{constructor(t,e,i){super(t,e),this.depth=i,this.texture=new $x(null,t,e,i),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class GD extends ns{constructor(t=null,e=1,i=1,r=1){super(null),this.image={data:t,width:e,height:i,depth:r},this.magFilter=or,this.minFilter=or,this.wrapR=_s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}GD.prototype.isData3DTexture=!0,class uwe extends ao{constructor(t,e,i){super(t,e),this.depth=i,this.texture=new GD(null,t,e,i),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class dwe extends ao{constructor(t,e,i,r={}){super(t,e,r);const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,i=t.texture.length;e<i;e++)this.texture[e]=t.texture[e].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Mr{constructor(t=0,e=0,i=0,r=1){this._x=t,this._y=e,this._z=i,this._w=r}static slerp(t,e,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(t,e,r)}static slerpFlat(t,e,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(0===a)return t[e+0]=l,t[e+1]=c,t[e+2]=u,void(t[e+3]=d);if(1===a)return t[e+0]=h,t[e+1]=f,t[e+2]=p,void(t[e+3]=m);if(d!==m||l!==h||c!==f||u!==p){let g=1-a;const _=l*h+c*f+u*p+d*m,v=_>=0?1:-1,y=1-_*_;if(y>Number.EPSILON){const x=Math.sqrt(y),w=Math.atan2(x,_*v);g=Math.sin(g*w)/x,a=Math.sin(a*w)/x}const b=a*v;if(l=l*g+h*b,c=c*g+f*b,u=u*g+p*b,d=d*g+m*b,g===1-a){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}t[e]=l,t[e+1]=c,t[e+2]=u,t[e+3]=d}static multiplyQuaternionsFlat(t,e,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return t[e]=a*p+u*d+l*f-c*h,t[e+1]=l*p+u*h+c*d-a*f,t[e+2]=c*p+u*f+a*h-l*d,t[e+3]=u*p-a*d-l*h-c*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],u=e[6],d=e[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Yi(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,r=t._y,s=t._z,o=t._w,a=e._x,l=e._y,c=e._z,u=e._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+i*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-e;return this._w=f*o+e*this._w,this._x=f*i+e*this._x,this._y=f*r+e*this._y,this._z=f*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-e)*u)/c,h=Math.sin(e*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),i*Math.sin(s),i*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Mr.prototype.isQuaternion=!0;class V{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(H4.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(H4.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*r,this.y=s[1]*e+s[4]*i+s[7]*r,this.z=s[2]*e+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=l*e+o*r-a*i,u=l*i+a*e-s*r,d=l*r+s*i-o*e,h=-s*e-o*i-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r,this.y=s[1]*e+s[5]*i+s[9]*r,this.z=s[2]*e+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return WD.copy(this).projectOnVector(t),this.sub(WD)}reflect(t){return this.sub(WD.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Yi(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}V.prototype.isVector3=!0;const WD=new V,H4=new Mr;class lo{constructor(t=new V(1/0,1/0,1/0),e=new V(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.length;l<c;l+=3){const u=t[l],d=t[l+1],h=t[l+2];u<e&&(e=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(e,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(t){let e=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.count;l<c;l++){const u=t.getX(l),d=t.getY(l),h=t.getZ(l);u<e&&(e=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(e,i,r),this.max.set(s,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=ih.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i)if(e&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)ih.fromBufferAttribute(s,o).applyMatrix4(t.matrixWorld),this.expandByPoint(ih)}else null===i.boundingBox&&i.computeBoundingBox(),jD.copy(i.boundingBox),jD.applyMatrix4(t.matrixWorld),this.union(jD);const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,ih),ih.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(J_),qx.subVectors(this.max,J_),Lp.subVectors(t.a,J_),Fp.subVectors(t.b,J_),Np.subVectors(t.c,J_),cu.subVectors(Fp,Lp),uu.subVectors(Np,Fp),rh.subVectors(Lp,Np);let e=[0,-cu.z,cu.y,0,-uu.z,uu.y,0,-rh.z,rh.y,cu.z,0,-cu.x,uu.z,0,-uu.x,rh.z,0,-rh.x,-cu.y,cu.x,0,-uu.y,uu.x,0,-rh.y,rh.x,0];return!(!$D(e,Lp,Fp,Np,qx)||(e=[1,0,0,0,1,0,0,0,1],!$D(e,Lp,Fp,Np,qx)))&&(Yx.crossVectors(cu,uu),e=[Yx.x,Yx.y,Yx.z],$D(e,Lp,Fp,Np,qx))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return ih.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(ih).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(ic[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ic[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ic[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ic[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ic[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ic[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ic[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ic[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ic)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}lo.prototype.isBox3=!0;const ic=[new V,new V,new V,new V,new V,new V,new V,new V],ih=new V,jD=new lo,Lp=new V,Fp=new V,Np=new V,cu=new V,uu=new V,rh=new V,J_=new V,qx=new V,Yx=new V,sh=new V;function $D(n,t,e,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){sh.fromArray(n,s);const a=r.x*Math.abs(sh.x)+r.y*Math.abs(sh.y)+r.z*Math.abs(sh.z),l=t.dot(sh),c=e.dot(sh),u=i.dot(sh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const hwe=new lo,U4=new V,Xx=new V,qD=new V;class du{constructor(t=new V,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):hwe.setFromPoints(t).getCenter(i);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){qD.subVectors(t,this.center);const e=qD.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),r=.5*(i-this.radius);this.center.add(qD.multiplyScalar(r/i)),this.radius+=r}return this}union(t){return!0===this.center.equals(t.center)?Xx.set(0,0,1).multiplyScalar(t.radius):Xx.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(U4.copy(t.center).add(Xx)),this.expandByPoint(U4.copy(t.center).sub(Xx)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const rc=new V,YD=new V,Kx=new V,hu=new V,XD=new V,Zx=new V,KD=new V;class oh{constructor(t=new V,e=new V(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,rc)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=rc.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(rc.copy(this.direction).multiplyScalar(e).add(this.origin),rc.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){YD.copy(t).add(e).multiplyScalar(.5),Kx.copy(e).sub(t).normalize(),hu.copy(this.origin).sub(YD);const s=.5*t.distanceTo(e),o=-this.direction.dot(Kx),a=hu.dot(this.direction),l=-hu.dot(Kx),c=hu.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const m=1/u;d*=m,h*=m,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Kx).multiplyScalar(h).add(YD),f}intersectSphere(t,e){rc.subVectors(t.center,this.origin);const i=rc.dot(this.direction),r=rc.dot(rc)-i*i,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(i=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),u>=0?(s=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(s=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),d>=0?(a=(t.min.z-h.z)*d,l=(t.max.z-h.z)*d):(a=(t.max.z-h.z)*d,l=(t.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return null!==this.intersectBox(t,rc)}intersectTriangle(t,e,i,r,s){XD.subVectors(e,t),Zx.subVectors(i,t),KD.crossVectors(XD,Zx);let a,o=this.direction.dot(KD);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}hu.subVectors(this.origin,t);const l=a*this.direction.dot(Zx.crossVectors(hu,Zx));if(l<0)return null;const c=a*this.direction.dot(XD.cross(hu));if(c<0||l+c>o)return null;const u=-a*hu.dot(KD);return u<0?null:this.at(u/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class lt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,r,s,o,a,l,c,u,d,h,f,p,m,g){const _=this.elements;return _[0]=t,_[4]=e,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=h,_[3]=f,_[7]=p,_[11]=m,_[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new lt).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,r=1/Bp.setFromMatrixColumn(t,0).length(),s=1/Bp.setFromMatrixColumn(t,1).length(),o=1/Bp.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,i=t.x,r=t.y,s=t.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===t.order){const h=o*u,f=o*d,p=a*u,m=a*d;e[0]=l*u,e[4]=-l*d,e[8]=c,e[1]=f+p*c,e[5]=h-m*c,e[9]=-a*l,e[2]=m-h*c,e[6]=p+f*c,e[10]=o*l}else if("YXZ"===t.order){const h=l*u,f=l*d,p=c*u,m=c*d;e[0]=h+m*a,e[4]=p*a-f,e[8]=o*c,e[1]=o*d,e[5]=o*u,e[9]=-a,e[2]=f*a-p,e[6]=m+h*a,e[10]=o*l}else if("ZXY"===t.order){const h=l*u,f=l*d,p=c*u,m=c*d;e[0]=h-m*a,e[4]=-o*d,e[8]=p+f*a,e[1]=f+p*a,e[5]=o*u,e[9]=m-h*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if("ZYX"===t.order){const h=o*u,f=o*d,p=a*u,m=a*d;e[0]=l*u,e[4]=p*c-f,e[8]=h*c+m,e[1]=l*d,e[5]=m*c+h,e[9]=f*c-p,e[2]=-c,e[6]=a*l,e[10]=o*l}else if("YZX"===t.order){const h=o*l,f=o*c,p=a*l,m=a*c;e[0]=l*u,e[4]=m-h*d,e[8]=p*d+f,e[1]=d,e[5]=o*u,e[9]=-a*u,e[2]=-c*u,e[6]=f*d+p,e[10]=h-m*d}else if("XZY"===t.order){const h=o*l,f=o*c,p=a*l,m=a*c;e[0]=l*u,e[4]=-d,e[8]=c*u,e[1]=h*d+m,e[5]=o*u,e[9]=f*d-p,e[2]=p*d-f,e[6]=a*u,e[10]=m*d+h}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(fwe,t,pwe)}lookAt(t,e,i){const r=this.elements;return co.subVectors(t,e),0===co.lengthSq()&&(co.z=1),co.normalize(),fu.crossVectors(i,co),0===fu.lengthSq()&&(1===Math.abs(i.z)?co.x+=1e-4:co.z+=1e-4,co.normalize(),fu.crossVectors(i,co)),fu.normalize(),Qx.crossVectors(co,fu),r[0]=fu.x,r[4]=Qx.x,r[8]=co.x,r[1]=fu.y,r[5]=Qx.y,r[9]=co.y,r[2]=fu.z,r[6]=Qx.z,r[10]=co.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],m=i[6],g=i[10],_=i[14],v=i[3],y=i[7],b=i[11],x=i[15],w=r[0],E=r[4],R=r[8],F=r[12],N=r[1],C=r[5],L=r[9],Y=r[13],I=r[2],z=r[6],D=r[10],P=r[14],O=r[3],q=r[7],K=r[11],J=r[15];return s[0]=o*w+a*N+l*I+c*O,s[4]=o*E+a*C+l*z+c*q,s[8]=o*R+a*L+l*D+c*K,s[12]=o*F+a*Y+l*P+c*J,s[1]=u*w+d*N+h*I+f*O,s[5]=u*E+d*C+h*z+f*q,s[9]=u*R+d*L+h*D+f*K,s[13]=u*F+d*Y+h*P+f*J,s[2]=p*w+m*N+g*I+_*O,s[6]=p*E+m*C+g*z+_*q,s[10]=p*R+m*L+g*D+_*K,s[14]=p*F+m*Y+g*P+_*J,s[3]=v*w+y*N+b*I+x*O,s[7]=v*E+y*C+b*z+x*q,s[11]=v*R+y*L+b*D+x*K,s[15]=v*F+y*Y+b*P+x*J,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],u=t[2],d=t[6],h=t[10],f=t[14];return t[3]*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+t[7]*(+e*l*f-e*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+t[11]*(+e*c*d-e*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+t[15]*(-r*a*u-e*l*d+e*a*h+r*o*d-i*o*h+i*l*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],_=t[15],v=d*g*c-m*h*c+m*l*f-a*g*f-d*l*_+a*h*_,y=p*h*c-u*g*c-p*l*f+o*g*f+u*l*_-o*h*_,b=u*m*c-p*d*c+p*a*f-o*m*f-u*a*_+o*d*_,x=p*d*l-u*m*l-p*a*h+o*m*h+u*a*g-o*d*g,w=e*v+i*y+r*b+s*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/w;return t[0]=v*E,t[1]=(m*h*s-d*g*s-m*r*f+i*g*f+d*r*_-i*h*_)*E,t[2]=(a*g*s-m*l*s+m*r*c-i*g*c-a*r*_+i*l*_)*E,t[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*E,t[4]=y*E,t[5]=(u*g*s-p*h*s+p*r*f-e*g*f-u*r*_+e*h*_)*E,t[6]=(p*l*s-o*g*s-p*r*c+e*g*c+o*r*_-e*l*_)*E,t[7]=(o*h*s-u*l*s+u*r*c-e*h*c-o*r*f+e*l*f)*E,t[8]=b*E,t[9]=(p*d*s-u*m*s-p*i*f+e*m*f+u*i*_-e*d*_)*E,t[10]=(o*m*s-p*a*s+p*i*c-e*m*c-o*i*_+e*a*_)*E,t[11]=(u*a*s-o*d*s-u*i*c+e*d*c+o*i*f-e*a*f)*E,t[12]=x*E,t[13]=(u*m*r-p*d*r+p*i*h-e*m*h-u*i*g+e*d*g)*E,t[14]=(p*a*r-o*m*r-p*i*l+e*m*l+o*i*g-e*a*g)*E,t[15]=(o*d*r-u*a*r+u*i*l-e*d*l-o*i*h+e*a*h)*E,this}scale(t){const e=this.elements,i=t.x,r=t.y,s=t.z;return e[0]*=i,e[4]*=r,e[8]*=s,e[1]*=i,e[5]*=r,e[9]*=s,e[2]*=i,e[6]*=r,e[10]*=s,e[3]*=i,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),r=Math.sin(e),s=1-i,o=t.x,a=t.y,l=t.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,s,o){return this.set(1,i,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){const r=this.elements,s=e._x,o=e._y,a=e._z,l=e._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,m=o*u,g=o*d,_=a*d,v=l*c,y=l*u,b=l*d,x=i.x,w=i.y,E=i.z;return r[0]=(1-(m+_))*x,r[1]=(f+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+_))*w,r[6]=(g+v)*w,r[7]=0,r[8]=(p+y)*E,r[9]=(g-v)*E,r[10]=(1-(h+m))*E,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){const r=this.elements;let s=Bp.set(r[0],r[1],r[2]).length();const o=Bp.set(r[4],r[5],r[6]).length(),a=Bp.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],ba.copy(this);const c=1/s,u=1/o,d=1/a;return ba.elements[0]*=c,ba.elements[1]*=c,ba.elements[2]*=c,ba.elements[4]*=u,ba.elements[5]*=u,ba.elements[6]*=u,ba.elements[8]*=d,ba.elements[9]*=d,ba.elements[10]*=d,e.setFromRotationMatrix(ba),i.x=s,i.y=o,i.z=a,this}makePerspective(t,e,i,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(i-r),u=(e+t)/(e-t),d=(i+r)/(i-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(e-t),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,r,s,o){const a=this.elements,l=1/(e-t),c=1/(i-r),u=1/(o-s),d=(e+t)*l,h=(i+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}lt.prototype.isMatrix4=!0;const Bp=new V,ba=new lt,fwe=new V(0,0,0),pwe=new V(1,1,1),fu=new V,Qx=new V,co=new V,z4=new lt,G4=new Mr;class ah{constructor(t=0,e=0,i=0,r=ah.DefaultOrder){this._x=t,this._y=e,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,r=this._order){return this._x=t,this._y=e,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const r=t.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],d=r[2],h=r[6],f=r[10];switch(e){case"XYZ":this._y=Math.asin(Yi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Yi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Yi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Yi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Yi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Yi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return z4.makeRotationFromQuaternion(t),this.setFromRotationMatrix(z4,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return G4.setFromEuler(this),this.setFromQuaternion(G4,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}ah.prototype.isEuler=!0,ah.DefaultOrder="XYZ",ah.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class ZD{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let mwe=0;const W4=new V,Vp=new Mr,sc=new lt,Jx=new V,ev=new V,gwe=new V,_we=new Mr,j4=new V(1,0,0),$4=new V(0,1,0),q4=new V(0,0,1),vwe={type:"added"},Y4={type:"removed"};class Dn extends lu{constructor(){super(),Object.defineProperty(this,"id",{value:mwe++}),this.uuid=oo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Dn.DefaultUp.clone();const t=new V,e=new ah,i=new Mr,r=new V(1,1,1);e._onChange(function s(){i.setFromEuler(e,!1)}),i._onChange(function o(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new lt},normalMatrix:{value:new Lr}}),this.matrix=new lt,this.matrixWorld=new lt,this.matrixAutoUpdate=Dn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ZD,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Vp.setFromAxisAngle(t,e),this.quaternion.multiply(Vp),this}rotateOnWorldAxis(t,e){return Vp.setFromAxisAngle(t,e),this.quaternion.premultiply(Vp),this}rotateX(t){return this.rotateOnAxis(j4,t)}rotateY(t){return this.rotateOnAxis($4,t)}rotateZ(t){return this.rotateOnAxis(q4,t)}translateOnAxis(t,e){return W4.copy(t).applyQuaternion(this.quaternion),this.position.add(W4.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(j4,t)}translateY(t){return this.translateOnAxis($4,t)}translateZ(t){return this.translateOnAxis(q4,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(sc.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?Jx.copy(t):Jx.set(t,e,i);const r=this.parent;this.updateWorldMatrix(!0,!1),ev.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sc.lookAt(ev,Jx,this.up):sc.lookAt(Jx,ev,this.up),this.quaternion.setFromRotationMatrix(sc),r&&(sc.extractRotation(r.matrixWorld),Vp.setFromRotationMatrix(sc),this.quaternion.premultiply(Vp.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(vwe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Y4)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Y4)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),sc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),sc.multiply(t.parent.matrixWorld)),t.applyMatrix4(sc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(t,e);if(void 0!==o)return o}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ev,t,gwe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ev,_we,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(t)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(t.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)s(t.shapes,l[c]);else s(t.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(t.materials,this.material[l]));r.material=a}else r.material=s(t.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(s(t.animations,this.animations[a]))}if(e){const a=o(t.geometries),l=o(t.materials),c=o(t.textures),u=o(t.images),d=o(t.shapes),h=o(t.skeletons),f=o(t.animations),p=o(t.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let i=0;i<t.children.length;i++)this.add(t.children[i].clone());return this}}Dn.DefaultUp=new V(0,1,0),Dn.DefaultMatrixAutoUpdate=!0,Dn.prototype.isObject3D=!0;const xa=new V,oc=new V,QD=new V,ac=new V,Hp=new V,Up=new V,X4=new V,JD=new V,eR=new V,tR=new V;class ar{constructor(t=new V,e=new V,i=new V){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),xa.subVectors(t,e),r.cross(xa);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,i,r,s){xa.subVectors(r,e),oc.subVectors(i,e),QD.subVectors(t,e);const o=xa.dot(xa),a=xa.dot(oc),l=xa.dot(QD),c=oc.dot(oc),u=oc.dot(QD),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,ac),ac.x>=0&&ac.y>=0&&ac.x+ac.y<=1}static getUV(t,e,i,r,s,o,a,l){return this.getBarycoord(t,e,i,r,ac),l.set(0,0),l.addScaledVector(s,ac.x),l.addScaledVector(o,ac.y),l.addScaledVector(a,ac.z),l}static isFrontFacing(t,e,i,r){return xa.subVectors(i,e),oc.subVectors(t,e),xa.cross(oc).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return xa.subVectors(this.c,this.b),oc.subVectors(this.a,this.b),.5*xa.cross(oc).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ar.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ar.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,r,s){return ar.getUV(t,this.a,this.b,this.c,e,i,r,s)}containsPoint(t){return ar.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ar.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,r=this.b,s=this.c;let o,a;Hp.subVectors(r,i),Up.subVectors(s,i),JD.subVectors(t,i);const l=Hp.dot(JD),c=Up.dot(JD);if(l<=0&&c<=0)return e.copy(i);eR.subVectors(t,r);const u=Hp.dot(eR),d=Up.dot(eR);if(u>=0&&d<=u)return e.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),e.copy(i).addScaledVector(Hp,o);tR.subVectors(t,s);const f=Hp.dot(tR),p=Up.dot(tR);if(p>=0&&f<=p)return e.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),e.copy(i).addScaledVector(Up,a);const g=u*p-f*d;if(g<=0&&d-u>=0&&f-p>=0)return X4.subVectors(s,r),a=(d-u)/(d-u+(f-p)),e.copy(r).addScaledVector(X4,a);const _=1/(g+m+h);return o=m*_,a=h*_,e.copy(i).addScaledVector(Hp,o).addScaledVector(Up,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let ywe=0;class Ci extends lu{constructor(){super(),Object.defineProperty(this,"id",{value:ywe++}),this.uuid=oo(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const r=e.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}Ci.prototype.isMaterial=!0,Ci.fromType=function(){return null};class vs extends Ci{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new Fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}vs.prototype.isMeshBasicMaterial=!0;const lr=new V,ew=new me;class Gn{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=Y_,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let i=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Fe),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this}copyVector2sArray(t){const e=this.array;let i=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new me),e[i++]=o.x,e[i++]=o.y}return this}copyVector3sArray(t){const e=this.array;let i=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new V),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this}copyVector4sArray(t){const e=this.array;let i=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Nn),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)ew.fromBufferAttribute(this,e),ew.applyMatrix3(t),this.setXY(e,ew.x,ew.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)lr.fromBufferAttribute(this,e),lr.applyMatrix3(t),this.setXYZ(e,lr.x,lr.y,lr.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)lr.fromBufferAttribute(this,e),lr.applyMatrix4(t),this.setXYZ(e,lr.x,lr.y,lr.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)lr.fromBufferAttribute(this,e),lr.applyNormalMatrix(t),this.setXYZ(e,lr.x,lr.y,lr.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)lr.fromBufferAttribute(this,e),lr.transformDirection(t),this.setXYZ(e,lr.x,lr.y,lr.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,s){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Y_&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}}Gn.prototype.isBufferAttribute=!0;class K4 extends Gn{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class Z4 extends Gn{constructor(t,e,i){super(new Uint32Array(t),e,i)}}(class bwe extends Gn{constructor(t,e,i){super(new Uint16Array(t),e,i)}}).prototype.isFloat16BufferAttribute=!0;class ut extends Gn{constructor(t,e,i){super(new Float32Array(t),e,i)}}let xwe=0;const zo=new lt,nR=new Dn,zp=new V,uo=new lo,tv=new lo,Fr=new V;class kt extends lu{constructor(){super(),Object.defineProperty(this,"id",{value:xwe++}),this.uuid=oo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(B4(t)?Z4:K4)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Lr).getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return zo.makeRotationFromQuaternion(t),this.applyMatrix4(zo),this}rotateX(t){return zo.makeRotationX(t),this.applyMatrix4(zo),this}rotateY(t){return zo.makeRotationY(t),this.applyMatrix4(zo),this}rotateZ(t){return zo.makeRotationZ(t),this.applyMatrix4(zo),this}translate(t,e,i){return zo.makeTranslation(t,e,i),this.applyMatrix4(zo),this}scale(t,e,i){return zo.makeScale(t,e,i),this.applyMatrix4(zo),this}lookAt(t){return nR.lookAt(t),nR.updateMatrix(),this.applyMatrix4(nR.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zp).negate(),this.translate(zp.x,zp.y,zp.z),this}setFromPoints(t){const e=[];for(let i=0,r=t.length;i<r;i++){const s=t[i];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ut(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new lo);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++)uo.setFromBufferAttribute(e[i]),this.morphTargetsRelative?(Fr.addVectors(this.boundingBox.min,uo.min),this.boundingBox.expandByPoint(Fr),Fr.addVectors(this.boundingBox.max,uo.max),this.boundingBox.expandByPoint(Fr)):(this.boundingBox.expandByPoint(uo.min),this.boundingBox.expandByPoint(uo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new du);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new V,1/0);if(t){const i=this.boundingSphere.center;if(uo.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)tv.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(Fr.addVectors(uo.min,tv.min),uo.expandByPoint(Fr),Fr.addVectors(uo.max,tv.max),uo.expandByPoint(Fr)):(uo.expandByPoint(tv.min),uo.expandByPoint(tv.max));uo.getCenter(i);let r=0;for(let s=0,o=t.count;s<o;s++)Fr.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(Fr));if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Fr.fromBufferAttribute(a,c),l&&(zp.fromBufferAttribute(t,c),Fr.add(zp)),r=Math.max(r,i.distanceToSquared(Fr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Gn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let N=0;N<a;N++)c[N]=new V,u[N]=new V;const d=new V,h=new V,f=new V,p=new me,m=new me,g=new me,_=new V,v=new V;function y(N,C,L){d.fromArray(r,3*N),h.fromArray(r,3*C),f.fromArray(r,3*L),p.fromArray(o,2*N),m.fromArray(o,2*C),g.fromArray(o,2*L),h.sub(d),f.sub(d),m.sub(p),g.sub(p);const Y=1/(m.x*g.y-g.x*m.y);!isFinite(Y)||(_.copy(h).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(Y),v.copy(f).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(Y),c[N].add(_),c[C].add(_),c[L].add(_),u[N].add(v),u[C].add(v),u[L].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:i.length}]);for(let N=0,C=b.length;N<C;++N){const L=b[N],Y=L.start;for(let z=Y,D=Y+L.count;z<D;z+=3)y(i[z+0],i[z+1],i[z+2])}const x=new V,w=new V,E=new V,R=new V;function F(N){E.fromArray(s,3*N),R.copy(E);const C=c[N];x.copy(C),x.sub(E.multiplyScalar(E.dot(C))).normalize(),w.crossVectors(R,C);const Y=w.dot(u[N])<0?-1:1;l[4*N]=x.x,l[4*N+1]=x.y,l[4*N+2]=x.z,l[4*N+3]=Y}for(let N=0,C=b.length;N<C;++N){const L=b[N],Y=L.start;for(let z=Y,D=Y+L.count;z<D;z+=3)F(i[z+0]),F(i[z+1]),F(i[z+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new Gn(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new V,s=new V,o=new V,a=new V,l=new V,c=new V,u=new V,d=new V;if(t)for(let h=0,f=t.count;h<f;h+=3){const p=t.getX(h+0),m=t.getX(h+1),g=t.getX(h+2);r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,m),o.fromBufferAttribute(e,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=e.count;h<f;h+=3)r.fromBufferAttribute(e,h+0),s.fromBufferAttribute(e,h+1),o.fromBufferAttribute(e,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(void 0===t.attributes[r])continue;const o=i[r].array,a=t.attributes[r],l=a.array,c=a.itemSize*e,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Fr.fromBufferAttribute(t,e),Fr.normalize(),t.setXYZ(e,Fr.x,Fr.y,Fr.z)}toNonIndexed(){function t(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let m=0,g=l.length;m<g;m++){f=a.isInterleavedBufferAttribute?l[m]*a.data.stride+a.offset:l[m]*u;for(let _=0;_<u;_++)h[p++]=c[f++]}return new Gn(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new kt,i=this.index.array,r=this.attributes;for(const a in r){const c=t(r[a],i);e.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=t(c[u],i);l.push(f)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];e.addGroup(c.start,c.count,c.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const l in i)t.data.attributes[l]=i[l].toJSON(t.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(t.data));u.length>0&&(r[l]=u,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(e));const s=t.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(e));this.morphAttributes[c]=u}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}kt.prototype.isBufferGeometry=!0;const Q4=new lt,Gp=new oh,iR=new du,pu=new V,mu=new V,gu=new V,rR=new V,sR=new V,oR=new V,tw=new V,nw=new V,iw=new V,rw=new me,sw=new me,ow=new me,aR=new V,aw=new V;class Xi extends Dn{constructor(t=new kt,e=new vs){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),iR.copy(i.boundingSphere),iR.applyMatrix4(s),!1===t.ray.intersectsSphere(iR))||(Q4.copy(s).invert(),Gp.copy(t.ray).applyMatrix4(Q4),null!==i.boundingBox&&!1===Gp.intersectsBox(i.boundingBox)))return;let o;if(i.isBufferGeometry){const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,h=i.attributes.uv2,f=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let x=Math.max(_.start,p.start),w=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));x<w;x+=3){const E=a.getX(x),R=a.getX(x+1),F=a.getX(x+2);o=lw(this,v,t,Gp,l,c,u,d,h,E,R,F),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,e.push(o))}}else for(let _=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);_<v;_+=3){const y=a.getX(_),b=a.getX(_+1),x=a.getX(_+2);o=lw(this,r,t,Gp,l,c,u,d,h,y,b,x),o&&(o.faceIndex=Math.floor(_/3),e.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let x=Math.max(_.start,p.start),w=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));x<w;x+=3)o=lw(this,v,t,Gp,l,c,u,d,h,x,x+1,x+2),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,e.push(o))}else for(let _=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);_<v;_+=3)o=lw(this,r,t,Gp,l,c,u,d,h,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),e.push(o))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function lw(n,t,e,i,r,s,o,a,l,c,u,d){pu.fromBufferAttribute(r,c),mu.fromBufferAttribute(r,u),gu.fromBufferAttribute(r,d);const h=n.morphTargetInfluences;if(s&&h){tw.set(0,0,0),nw.set(0,0,0),iw.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const g=h[p],_=s[p];0!==g&&(rR.fromBufferAttribute(_,c),sR.fromBufferAttribute(_,u),oR.fromBufferAttribute(_,d),o?(tw.addScaledVector(rR,g),nw.addScaledVector(sR,g),iw.addScaledVector(oR,g)):(tw.addScaledVector(rR.sub(pu),g),nw.addScaledVector(sR.sub(mu),g),iw.addScaledVector(oR.sub(gu),g)))}pu.add(tw),mu.add(nw),gu.add(iw)}n.isSkinnedMesh&&(n.boneTransform(c,pu),n.boneTransform(u,mu),n.boneTransform(d,gu));const f=function wwe(n,t,e,i,r,s,o,a){let l;if(l=1===t.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==t.side,a),null===l)return null;aw.copy(a),aw.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(aw);return c<e.near||c>e.far?null:{distance:c,point:aw.clone(),object:n}}(n,t,e,i,pu,mu,gu,aR);if(f){a&&(rw.fromBufferAttribute(a,c),sw.fromBufferAttribute(a,u),ow.fromBufferAttribute(a,d),f.uv=ar.getUV(aR,pu,mu,gu,rw,sw,ow,new me)),l&&(rw.fromBufferAttribute(l,c),sw.fromBufferAttribute(l,u),ow.fromBufferAttribute(l,d),f.uv2=ar.getUV(aR,pu,mu,gu,rw,sw,ow,new me));const p={a:c,b:u,c:d,normal:new V,materialIndex:0};ar.getNormal(pu,mu,gu,p.normal),f.face=p}return f}Xi.prototype.isMesh=!0;class lh extends kt{constructor(t=1,e=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(m,g,_,v,y,b,x,w,E,R,F){const N=b/E,C=x/R,L=b/2,Y=x/2,I=w/2,z=E+1,D=R+1;let P=0,O=0;const q=new V;for(let K=0;K<D;K++){const J=K*C-Y;for(let j=0;j<z;j++)q[m]=(j*N-L)*v,q[g]=J*y,q[_]=I,c.push(q.x,q.y,q.z),q[m]=0,q[g]=0,q[_]=w>0?1:-1,u.push(q.x,q.y,q.z),d.push(j/E),d.push(1-K/R),P+=1}for(let K=0;K<R;K++)for(let J=0;J<E;J++){const we=h+J+z*(K+1),fe=h+(J+1)+z*(K+1),_e=h+(J+1)+z*K;l.push(h+J+z*K,we,_e),l.push(we,fe,_e),O+=6}a.addGroup(f,O,F),f+=O,h+=P}p("z","y","x",-1,-1,i,e,t,o,s,0),p("z","y","x",1,-1,i,e,-t,o,s,1),p("x","z","y",1,1,t,i,e,r,o,2),p("x","z","y",1,-1,t,i,-e,r,o,3),p("x","y","z",1,-1,t,e,i,r,s,4),p("x","y","z",-1,-1,t,e,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ut(c,3)),this.setAttribute("normal",new ut(u,3)),this.setAttribute("uv",new ut(d,2))}static fromJSON(t){return new lh(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Wp(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const r=n[e][i];t[e][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function is(n){const t={};for(let e=0;e<n.length;e++){const i=Wp(n[e]);for(const r in i)t[r]=i[r]}return t}const Mwe={clone:Wp,merge:is};class wa extends Ci{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Wp(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}wa.prototype.isShaderMaterial=!0;class cw extends Dn{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new lt,this.projectionMatrix=new lt,this.projectionMatrixInverse=new lt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}cw.prototype.isCamera=!0;class Cr extends cw{constructor(t=50,e=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*K_*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*eh*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*K_*Math.atan(Math.tan(.5*eh*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*eh*this.fov)/this.zoom,i=2*e,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,e-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Cr.prototype.isPerspectiveCamera=!0;class lR extends Dn{constructor(t,e,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const r=new Cr(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new V(1,0,0)),this.add(r);const s=new Cr(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new V(-1,0,0)),this.add(s);const o=new Cr(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new V(0,1,0)),this.add(o);const a=new Cr(90,1,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new V(0,-1,0)),this.add(a);const l=new Cr(90,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new V(0,0,1)),this.add(l);const c=new Cr(90,1,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new V(0,0,-1)),this.add(c)}update(t,e){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=t.getRenderTarget(),d=t.outputEncoding,h=t.toneMapping,f=t.xr.enabled;t.outputEncoding=tc,t.toneMapping=0,t.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,s),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=p,t.setRenderTarget(i,5),t.render(e,c),t.setRenderTarget(u),t.outputEncoding=d,t.toneMapping=h,t.xr.enabled=f,i.texture.needsPMREMUpdate=!0}}class nv extends ns{constructor(t,e,i,r,s,o,a,l,c,u){super(t=void 0!==t?t:[],e=void 0!==e?e:301,i,r,s,o,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}nv.prototype.isCubeTexture=!0;class J4 extends ao{constructor(t,e={}){super(t,t,e);const i={width:t,height:t,depth:1};this.texture=new nv([i,i,i,i,i,i],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Fi}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new lh(5,5,5),s=new wa({name:"CubemapFromEquirect",uniforms:Wp(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new Xi(r,s),a=e.minFilter;return e.minFilter===ou&&(e.minFilter=Fi),new lR(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,i,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,i,r);t.setRenderTarget(s)}}J4.prototype.isWebGLCubeRenderTarget=!0;const cR=new V,Ewe=new V,Twe=new Lr;class lc{constructor(t=new V(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const r=cR.subVectors(i,e).cross(Ewe.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const i=t.delta(cR),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(i).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||Twe.getNormalMatrix(t),r=this.coplanarPoint(cR).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}lc.prototype.isPlane=!0;const qp=new du,uw=new V;class dw{constructor(t=new lc,e=new lc,i=new lc,r=new lc,s=new lc,o=new lc){this.planes=[t,e,i,r,s,o]}set(t,e,i,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],f=i[9],p=i[10],m=i[11],g=i[12],_=i[13],v=i[14],y=i[15];return e[0].setComponents(a-r,d-l,m-h,y-g).normalize(),e[1].setComponents(a+r,d+l,m+h,y+g).normalize(),e[2].setComponents(a+s,d+c,m+f,y+_).normalize(),e[3].setComponents(a-s,d-c,m-f,y-_).normalize(),e[4].setComponents(a-o,d-u,m-p,y-v).normalize(),e[5].setComponents(a+o,d+u,m+p,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),qp.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(qp)}intersectsSprite(t){return qp.center.set(0,0,0),qp.radius=.7071067811865476,qp.applyMatrix4(t.matrixWorld),this.intersectsSphere(qp)}intersectsSphere(t){const e=this.planes,i=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const r=e[i];if(uw.x=r.normal.x>0?t.max.x:t.min.x,uw.y=r.normal.y>0?t.max.y:t.min.y,uw.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(uw)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function eW(){let n=null,t=!1,e=null,i=null;function r(s,o){e(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){n=s}}}function Awe(n,t){const e=t.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);void 0===d?i.set(c,function r(c,u){const d=c.array,h=c.usage,f=n.createBuffer();let p;if(n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);p=5121}return{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(e?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class Yp extends kt{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};const s=t/2,o=e/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=t/a,h=e/l,f=[],p=[],m=[],g=[];for(let _=0;_<u;_++){const v=_*h-o;for(let y=0;y<c;y++)p.push(y*d-s,-v,0),m.push(0,0,1),g.push(y/a),g.push(1-_/l)}for(let _=0;_<l;_++)for(let v=0;v<a;v++){const b=v+c*(_+1),x=v+1+c*(_+1),w=v+1+c*_;f.push(v+c*_,b,w),f.push(b,x,w)}this.setIndex(f),this.setAttribute("position",new ut(p,3)),this.setAttribute("normal",new ut(m,3)),this.setAttribute("uv",new ut(g,2))}static fromJSON(t){return new Yp(t.width,t.height,t.widthSegments,t.heightSegments)}}const an={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},je={common:{diffuse:{value:new Fe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Lr},uv2Transform:{value:new Lr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Lr}},sprite:{diffuse:{value:new Fe(16777215)},opacity:{value:1},center:{value:new me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Lr}}},nl={basic:{uniforms:is([je.common,je.specularmap,je.envmap,je.aomap,je.lightmap,je.fog]),vertexShader:an.meshbasic_vert,fragmentShader:an.meshbasic_frag},lambert:{uniforms:is([je.common,je.specularmap,je.envmap,je.aomap,je.lightmap,je.emissivemap,je.fog,je.lights,{emissive:{value:new Fe(0)}}]),vertexShader:an.meshlambert_vert,fragmentShader:an.meshlambert_frag},phong:{uniforms:is([je.common,je.specularmap,je.envmap,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.fog,je.lights,{emissive:{value:new Fe(0)},specular:{value:new Fe(1118481)},shininess:{value:30}}]),vertexShader:an.meshphong_vert,fragmentShader:an.meshphong_frag},standard:{uniforms:is([je.common,je.envmap,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.roughnessmap,je.metalnessmap,je.fog,je.lights,{emissive:{value:new Fe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag},toon:{uniforms:is([je.common,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.gradientmap,je.fog,je.lights,{emissive:{value:new Fe(0)}}]),vertexShader:an.meshtoon_vert,fragmentShader:an.meshtoon_frag},matcap:{uniforms:is([je.common,je.bumpmap,je.normalmap,je.displacementmap,je.fog,{matcap:{value:null}}]),vertexShader:an.meshmatcap_vert,fragmentShader:an.meshmatcap_frag},points:{uniforms:is([je.points,je.fog]),vertexShader:an.points_vert,fragmentShader:an.points_frag},dashed:{uniforms:is([je.common,je.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:an.linedashed_vert,fragmentShader:an.linedashed_frag},depth:{uniforms:is([je.common,je.displacementmap]),vertexShader:an.depth_vert,fragmentShader:an.depth_frag},normal:{uniforms:is([je.common,je.bumpmap,je.normalmap,je.displacementmap,{opacity:{value:1}}]),vertexShader:an.meshnormal_vert,fragmentShader:an.meshnormal_frag},sprite:{uniforms:is([je.sprite,je.fog]),vertexShader:an.sprite_vert,fragmentShader:an.sprite_frag},background:{uniforms:{uvTransform:{value:new Lr},t2D:{value:null}},vertexShader:an.background_vert,fragmentShader:an.background_frag},cube:{uniforms:is([je.envmap,{opacity:{value:1}}]),vertexShader:an.cube_vert,fragmentShader:an.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:an.equirect_vert,fragmentShader:an.equirect_frag},distanceRGBA:{uniforms:is([je.common,je.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:an.distanceRGBA_vert,fragmentShader:an.distanceRGBA_frag},shadow:{uniforms:is([je.lights,je.fog,{color:{value:new Fe(0)},opacity:{value:1}}]),vertexShader:an.shadow_vert,fragmentShader:an.shadow_frag}};function CCe(n,t,e,i,r,s){const o=new Fe(0);let l,c,a=!0===r?0:1,u=null,d=0,h=null;function p(m,g){e.buffers.color.setClear(m.r,m.g,m.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),a=g,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,p(o,a)},render:function f(m,g){let _=!1,v=!0===g.isScene?g.background:null;v&&v.isTexture&&(v=t.get(v));const y=n.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(v=null),null===v?p(o,a):v&&v.isColor&&(p(v,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===c&&(c=new Xi(new lh(1,1,1),new wa({name:"BackgroundCubeMaterial",uniforms:Wp(nl.cube.uniforms),vertexShader:nl.cube.vertexShader,fragmentShader:nl.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(x,w,E){this.matrixWorld.copyPosition(E.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,(u!==v||d!==v.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=v,d=v.version,h=n.toneMapping),m.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Xi(new Yp(2,2),new wa({name:"BackgroundMaterial",uniforms:Wp(nl.background.uniforms),vertexShader:nl.background.vertexShader,fragmentShader:nl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(u!==v||d!==v.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=v,d=v.version,h=n.toneMapping),m.unshift(l,l.geometry,l.material,0,0,null))}}}function SCe(n,t,e,i){const r=n.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=g(null);let c=l,u=!1;function f(I){return i.isWebGL2?n.bindVertexArray(I):s.bindVertexArrayOES(I)}function p(I){return i.isWebGL2?n.deleteVertexArray(I):s.deleteVertexArrayOES(I)}function g(I){const z=[],D=[],P=[];for(let O=0;O<r;O++)z[O]=0,D[O]=0,P[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:D,attributeDivisors:P,object:I,attributes:{},index:null}}function y(){const I=c.newAttributes;for(let z=0,D=I.length;z<D;z++)I[z]=0}function b(I){x(I,0)}function x(I,z){const P=c.enabledAttributes,O=c.attributeDivisors;c.newAttributes[I]=1,0===P[I]&&(n.enableVertexAttribArray(I),P[I]=1),O[I]!==z&&((i.isWebGL2?n:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](I,z),O[I]=z)}function w(){const I=c.newAttributes,z=c.enabledAttributes;for(let D=0,P=z.length;D<P;D++)z[D]!==I[D]&&(n.disableVertexAttribArray(D),z[D]=0)}function E(I,z,D,P,O,q){!0!==i.isWebGL2||5124!==D&&5125!==D?n.vertexAttribPointer(I,z,D,P,O,q):n.vertexAttribIPointer(I,z,D,O,q)}function L(){Y(),u=!0,c!==l&&(c=l,f(c.object))}function Y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(I,z,D,P,O){let q=!1;if(o){const K=function m(I,z,D){const P=!0===D.wireframe;let O=a[I.id];void 0===O&&(O={},a[I.id]=O);let q=O[z.id];void 0===q&&(q={},O[z.id]=q);let K=q[P];return void 0===K&&(K=g(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),q[P]=K),K}(P,D,z);c!==K&&(c=K,f(c.object)),q=function _(I,z){const D=c.attributes,P=I.attributes;let O=0;for(const q in P){const K=D[q],J=P[q];if(void 0===K||K.attribute!==J||K.data!==J.data)return!0;O++}return c.attributesNum!==O||c.index!==z}(P,O),q&&function v(I,z){const D={},P=I.attributes;let O=0;for(const q in P){const K=P[q],J={};J.attribute=K,K.data&&(J.data=K.data),D[q]=J,O++}c.attributes=D,c.attributesNum=O,c.index=z}(P,O)}else{const K=!0===z.wireframe;(c.geometry!==P.id||c.program!==D.id||c.wireframe!==K)&&(c.geometry=P.id,c.program=D.id,c.wireframe=K,q=!0)}!0===I.isInstancedMesh&&(q=!0),null!==O&&e.update(O,34963),(q||u)&&(u=!1,function R(I,z,D,P){if(!1===i.isWebGL2&&(I.isInstancedMesh||P.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;y();const O=P.attributes,q=D.getAttributes(),K=z.defaultAttributeValues;for(const J in q){const j=q[J];if(j.location>=0){let we=O[J];if(void 0===we&&("instanceMatrix"===J&&I.instanceMatrix&&(we=I.instanceMatrix),"instanceColor"===J&&I.instanceColor&&(we=I.instanceColor)),void 0!==we){const fe=we.normalized,_e=we.itemSize,ie=e.get(we);if(void 0===ie)continue;const Re=ie.buffer,Pe=ie.type,et=ie.bytesPerElement;if(we.isInterleavedBufferAttribute){const ye=we.data,vt=ye.stride,ue=we.offset;if(ye.isInstancedInterleavedBuffer){for(let pe=0;pe<j.locationSize;pe++)x(j.location+pe,ye.meshPerAttribute);!0!==I.isInstancedMesh&&void 0===P._maxInstanceCount&&(P._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let pe=0;pe<j.locationSize;pe++)b(j.location+pe);n.bindBuffer(34962,Re);for(let pe=0;pe<j.locationSize;pe++)E(j.location+pe,_e/j.locationSize,Pe,fe,vt*et,(ue+_e/j.locationSize*pe)*et)}else{if(we.isInstancedBufferAttribute){for(let ye=0;ye<j.locationSize;ye++)x(j.location+ye,we.meshPerAttribute);!0!==I.isInstancedMesh&&void 0===P._maxInstanceCount&&(P._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let ye=0;ye<j.locationSize;ye++)b(j.location+ye);n.bindBuffer(34962,Re);for(let ye=0;ye<j.locationSize;ye++)E(j.location+ye,_e/j.locationSize,Pe,fe,_e*et,_e/j.locationSize*ye*et)}}else if(void 0!==K){const fe=K[J];if(void 0!==fe)switch(fe.length){case 2:n.vertexAttrib2fv(j.location,fe);break;case 3:n.vertexAttrib3fv(j.location,fe);break;case 4:n.vertexAttrib4fv(j.location,fe);break;default:n.vertexAttrib1fv(j.location,fe)}}}}w()}(I,z,D,P),null!==O&&n.bindBuffer(34963,e.get(O).buffer))},reset:L,resetDefaultState:Y,dispose:function F(){L();for(const I in a){const z=a[I];for(const D in z){const P=z[D];for(const O in P)p(P[O].object),delete P[O];delete z[D]}delete a[I]}},releaseStatesOfGeometry:function N(I){if(void 0===a[I.id])return;const z=a[I.id];for(const D in z){const P=z[D];for(const O in P)p(P[O].object),delete P[O];delete z[D]}delete a[I.id]},releaseStatesOfProgram:function C(I){for(const z in a){const D=a[z];if(void 0===D[I.id])continue;const P=D[I.id];for(const O in P)p(P[O].object),delete P[O];delete D[I.id]}},initAttributes:y,enableAttribute:b,disableUnusedAttributes:w}}function ECe(n,t,e,i){const r=i.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),e.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),e.update(u,s,d)}}function TCe(n,t,e){let i;function s(E){if("highp"===E){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return"mediump"===E&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==e.precision?e.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||t.has("WEBGL_draw_buffers"),u=!0===e.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),g=n.getParameter(36347),_=n.getParameter(36348),v=n.getParameter(36349),y=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const E=t.get("EXT_texture_filter_anisotropic");i=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?n.getParameter(36183):0}}function ACe(n){const t=this;let e=null,i=0,r=!1,s=!1;const o=new lc,a=new Lr,l={value:null,needsUpdate:!1};function c(){l.value!==e&&(l.value=e,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(d,h,f,p){const m=null!==d?d.length:0;let g=null;if(0!==m){if(g=l.value,!0!==p||null===g){const _=f+4*m,v=h.matrixWorldInverse;a.getNormalMatrix(v),(null===g||g.length<_)&&(g=new Float32Array(_));for(let y=0,b=f;y!==m;++y,b+=4)o.copy(d[y]).applyMatrix4(v,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=m,t.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const p=0!==d.length||h||0!==i||r;return r=h,e=u(d,f,0),i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const p=d.clippingPlanes,m=d.clipIntersection,g=d.clipShadows,_=n.get(d);if(!r||null===p||0===p.length||s&&!g)s?u(null):c();else{const v=s?0:i,y=4*v;let b=_.clippingState||null;l.value=b,b=u(p,h,y,f);for(let x=0;x!==y;++x)b[x]=e[x];_.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=v}}}function DCe(n){let t=new WeakMap;function e(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(t.has(o))return e(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new J4(l.height/2);return c.fromEquirectangularTexture(n,o),t.set(o,c),o.addEventListener("dispose",r),e(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}nl.physical={uniforms:is([nl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new me(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Fe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Fe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Fe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag};class iv extends cw{constructor(t=-1,e=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-t,o=i+t,a=r+e,l=r-e;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}iv.prototype.isOrthographicCamera=!0;const tW=[.125,.215,.35,.446,.526,.582],uR=new iv,nW=new Fe;let dR=null;const uh=(1+Math.sqrt(5))/2,Kp=1/uh,iW=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,uh,Kp),new V(0,uh,-Kp),new V(Kp,0,uh),new V(-Kp,0,uh),new V(uh,Kp,0),new V(-uh,Kp,0)];class rW{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){dR=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,i,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=aW(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=oW(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(dR),t.scissorTest=!1,hw(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),dR=this._renderer.getRenderTarget();const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize-32,i={magFilter:Fi,minFilter:Fi,generateMipmaps:!1,type:Ep,format:Uo,encoding:tc,depthBuffer:!1},r=sW(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=sW(t,e,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function RCe(n){const t=[],e=[],i=[];let r=n;const s=n-4+1+tW.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);e.push(a);let l=1/a;o>n-4?l=tW[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-1),u=-c/2,d=1+c/2,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,m=3,g=2,_=1,v=new Float32Array(m*p*f),y=new Float32Array(g*p*f),b=new Float32Array(_*p*f);for(let w=0;w<f;w++){const E=w%3*2/3-1,R=w>2?0:-1;v.set([E,R,0,E+2/3,R,0,E+2/3,R+1,0,E,R,0,E+2/3,R+1,0,E,R+1,0],m*p*w),y.set(h,g*p*w),b.set([w,w,w,w,w,w],_*p*w)}const x=new kt;x.setAttribute("position",new Gn(v,m)),x.setAttribute("uv",new Gn(y,g)),x.setAttribute("faceIndex",new Gn(b,_)),t.push(x),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}(s)),this._blurMaterial=function ICe(n,t,e){const i=new Float32Array(20),r=new V(0,1,0);return new wa({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Xi(this._lodPlanes[0],t);this._renderer.compile(e,uR)}_sceneToCubeUV(t,e,i,r){const a=new Cr(90,1,e,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(nW),u.toneMapping=0,u.autoClear=!1;const f=new vs({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Xi(new lh,f);let m=!1;const g=t.background;g?g.isColor&&(f.color.copy(g),t.background=null,m=!0):(f.color.copy(nW),m=!0);for(let _=0;_<6;_++){const v=_%3;0===v?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===v?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const y=this._cubeSize;hw(r,v*y,_>2?y:0,y,y),u.setRenderTarget(r),m&&u.render(p,a),u.render(t,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,t.background=g}_textureToCubeUV(t,e){const i=this._renderer,r=301===t.mapping||302===t.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=aW()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=oW());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Xi(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const l=this._cubeSize;hw(e,0,0,3*l,2*l),i.setRenderTarget(e),i.render(o,uR)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,iW[(r-1)%iW.length])}e.autoClear=i}_blur(t,e,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,r,"latitudinal",s),this._halfBlur(o,t,i,i,r,"longitudinal",s)}_halfBlur(t,e,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Xi(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,m=s/p,g=isFinite(s)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const _=[];let v=0;for(let E=0;E<20;++E){const R=E/m,F=Math.exp(-R*R/2);_.push(F),0===E?v+=F:E<g&&(v+=2*F)}for(let E=0;E<_.length;E++)_[E]=_[E]/v;h.envMap.value=t.texture,h.samples.value=g,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-i;const b=this._sizeLods[r];hw(e,3*b*(r>y-4?r-y+4:0),4*(this._cubeSize-b),3*b,2*b),l.setRenderTarget(e),l.render(d,uR)}}function sW(n,t,e){const i=new ao(n,t,e);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function hw(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function oW(){return new wa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function aW(){return new wa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function kCe(n){let t=new WeakMap,e=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=t.get(a);return null===e&&(e=new rW(n)),d=c?e.fromEquirectangular(a,d):e.fromCubemap(a,d),t.set(a,d),d.texture}if(t.has(a))return t.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===e&&(e=new rW(n));const h=c?e.fromEquirectangular(a):e.fromCubemap(a);return t.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function OCe(n){const t={};function e(i){if(void 0!==t[i])return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return null!==e(i)},init:function(i){i.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(i){const r=e(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function PCe(n,t,e,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&t.remove(h.index);for(const p in h.attributes)t.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(t.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,e.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let m=0;if(null!==f){const v=f.array;m=f.version;for(let y=0,b=v.length;y<b;y+=3){const x=v[y+0],w=v[y+1],E=v[y+2];h.push(x,w,w,E,E,x)}}else{m=p.version;for(let y=0,b=p.array.length/3-1;y<b;y+=3){const x=y+0,w=y+1,E=y+2;h.push(x,w,w,E,E,x)}}const g=new(B4(h)?Z4:K4)(h,1);g.version=m;const _=s.get(d);_&&t.remove(_),s.set(d,g)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,e.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const p in h)t.update(h[p],34962);const f=d.morphAttributes;for(const p in f){const m=f[p];for(let g=0,_=m.length;g<_;g++)t.update(m[g],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function LCe(n,t,e,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(s,f,a,h*l),e.update(f,s,1)},this.renderInstances=function d(h,f,p){if(0===p)return;let m,g;if(r)m=n,g="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](s,f,a,h*l,p),e.update(f,s,p)}}function FCe(n){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function i(s,o,a){switch(e.calls++,o){case 4:e.triangles+=a*(s/3);break;case 1:e.lines+=a*(s/2);break;case 3:e.lines+=a*(s-1);break;case 2:e.lines+=a*s;break;case 0:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function NCe(n,t){return n[0]-t[0]}function BCe(n,t){return Math.abs(t[1])-Math.abs(n[1])}function fR(n,t){let e=1;const i=t.isInterleavedBufferAttribute?t.data.array:t.array;i instanceof Int8Array?e=127:i instanceof Int16Array?e=32767:i instanceof Int32Array?e=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(e)}function VCe(n,t,e){const i={},r=new Float32Array(8),s=new WeakMap,o=new Nn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===t.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=void 0!==p?p.length:0;let g=s.get(u);if(void 0===g||g.count!==m){let z=function(){Y.dispose(),s.delete(u),u.removeEventListener("dispose",z)};void 0!==g&&g.texture.dispose();const y=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,x=void 0!==u.morphAttributes.color,w=u.morphAttributes.position||[],E=u.morphAttributes.normal||[],R=u.morphAttributes.color||[];let F=0;!0===y&&(F=1),!0===b&&(F=2),!0===x&&(F=3);let N=u.attributes.position.count*F,C=1;N>t.maxTextureSize&&(C=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const L=new Float32Array(N*C*4*m),Y=new $x(L,N,C,m);Y.type=au,Y.needsUpdate=!0;const I=4*F;for(let D=0;D<m;D++){const P=w[D],O=E[D],q=R[D],K=N*C*4*D;for(let J=0;J<P.count;J++){const j=J*I;!0===y&&(o.fromBufferAttribute(P,J),!0===P.normalized&&fR(o,P),L[K+j+0]=o.x,L[K+j+1]=o.y,L[K+j+2]=o.z,L[K+j+3]=0),!0===b&&(o.fromBufferAttribute(O,J),!0===O.normalized&&fR(o,O),L[K+j+4]=o.x,L[K+j+5]=o.y,L[K+j+6]=o.z,L[K+j+7]=0),!0===x&&(o.fromBufferAttribute(q,J),!0===q.normalized&&fR(o,q),L[K+j+8]=o.x,L[K+j+9]=o.y,L[K+j+10]=o.z,L[K+j+11]=4===q.itemSize?o.w:1)}}g={count:m,texture:Y,size:new me(N,C)},s.set(u,g),u.addEventListener("dispose",z)}let _=0;for(let y=0;y<f.length;y++)_+=f[y];const v=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",v),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,e),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const p=void 0===f?0:f.length;let m=i[u.id];if(void 0===m||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];i[u.id]=m}for(let b=0;b<p;b++){const x=m[b];x[0]=b,x[1]=f[b]}m.sort(BCe);for(let b=0;b<8;b++)b<p&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(NCe);const g=u.morphAttributes.position,_=u.morphAttributes.normal;let v=0;for(let b=0;b<8;b++){const x=a[b],w=x[0],E=x[1];w!==Number.MAX_SAFE_INTEGER&&E?(g&&u.getAttribute("morphTarget"+b)!==g[w]&&u.setAttribute("morphTarget"+b,g[w]),_&&u.getAttribute("morphNormal"+b)!==_[w]&&u.setAttribute("morphNormal"+b,_[w]),r[b]=E,v+=E):(g&&!0===u.hasAttribute("morphTarget"+b)&&u.deleteAttribute("morphTarget"+b),_&&!0===u.hasAttribute("morphNormal"+b)&&u.deleteAttribute("morphNormal"+b),r[b]=0)}const y=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function HCe(n,t,e,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),e.remove(c.instanceMatrix),null!==c.instanceColor&&e.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=t.get(l,l.geometry);return r.get(d)!==c&&(t.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),e.update(l.instanceMatrix,34962),null!==l.instanceColor&&e.update(l.instanceColor,34962)),d},dispose:function o(){r=new WeakMap}}}const lW=new ns,cW=new $x,uW=new GD,dW=new nv,hW=[],fW=[],pW=new Float32Array(16),mW=new Float32Array(9),gW=new Float32Array(4);function Zp(n,t,e){const i=n[0];if(i<=0||i>0)return n;const r=t*e;let s=hW[r];if(void 0===s&&(s=new Float32Array(r),hW[r]=s),0!==t){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,n[o].toArray(s,a)}return s}function ys(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function rs(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function fw(n,t){let e=fW[t];void 0===e&&(e=new Int32Array(t),fW[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function UCe(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function zCe(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ys(e,t))return;n.uniform2fv(this.addr,t),rs(e,t)}}function GCe(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(ys(e,t))return;n.uniform3fv(this.addr,t),rs(e,t)}}function WCe(n,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ys(e,t))return;n.uniform4fv(this.addr,t),rs(e,t)}}function jCe(n,t){const e=this.cache,i=t.elements;if(void 0===i){if(ys(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),rs(e,t)}else{if(ys(e,i))return;gW.set(i),n.uniformMatrix2fv(this.addr,!1,gW),rs(e,i)}}function $Ce(n,t){const e=this.cache,i=t.elements;if(void 0===i){if(ys(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),rs(e,t)}else{if(ys(e,i))return;mW.set(i),n.uniformMatrix3fv(this.addr,!1,mW),rs(e,i)}}function qCe(n,t){const e=this.cache,i=t.elements;if(void 0===i){if(ys(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),rs(e,t)}else{if(ys(e,i))return;pW.set(i),n.uniformMatrix4fv(this.addr,!1,pW),rs(e,i)}}function YCe(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function XCe(n,t){const e=this.cache;ys(e,t)||(n.uniform2iv(this.addr,t),rs(e,t))}function KCe(n,t){const e=this.cache;ys(e,t)||(n.uniform3iv(this.addr,t),rs(e,t))}function ZCe(n,t){const e=this.cache;ys(e,t)||(n.uniform4iv(this.addr,t),rs(e,t))}function QCe(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function JCe(n,t){const e=this.cache;ys(e,t)||(n.uniform2uiv(this.addr,t),rs(e,t))}function eSe(n,t){const e=this.cache;ys(e,t)||(n.uniform3uiv(this.addr,t),rs(e,t))}function tSe(n,t){const e=this.cache;ys(e,t)||(n.uniform4uiv(this.addr,t),rs(e,t))}function nSe(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2D(t||lW,r)}function iSe(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||uW,r)}function rSe(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||dW,r)}function sSe(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||cW,r)}function aSe(n,t){n.uniform1fv(this.addr,t)}function lSe(n,t){const e=Zp(t,this.size,2);n.uniform2fv(this.addr,e)}function cSe(n,t){const e=Zp(t,this.size,3);n.uniform3fv(this.addr,e)}function uSe(n,t){const e=Zp(t,this.size,4);n.uniform4fv(this.addr,e)}function dSe(n,t){const e=Zp(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function hSe(n,t){const e=Zp(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function fSe(n,t){const e=Zp(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function pSe(n,t){n.uniform1iv(this.addr,t)}function mSe(n,t){n.uniform2iv(this.addr,t)}function gSe(n,t){n.uniform3iv(this.addr,t)}function _Se(n,t){n.uniform4iv(this.addr,t)}function vSe(n,t){n.uniform1uiv(this.addr,t)}function ySe(n,t){n.uniform2uiv(this.addr,t)}function bSe(n,t){n.uniform3uiv(this.addr,t)}function xSe(n,t){n.uniform4uiv(this.addr,t)}function wSe(n,t,e){const i=t.length,r=fw(e,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)e.setTexture2D(t[s]||lW,r[s])}function MSe(n,t,e){const i=t.length,r=fw(e,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)e.setTexture3D(t[s]||uW,r[s])}function CSe(n,t,e){const i=t.length,r=fw(e,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)e.setTextureCube(t[s]||dW,r[s])}function SSe(n,t,e){const i=t.length,r=fw(e,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)e.setTexture2DArray(t[s]||cW,r[s])}function TSe(n,t,e){this.id=n,this.addr=e,this.cache=[],this.setValue=function oSe(n){switch(n){case 5126:return UCe;case 35664:return zCe;case 35665:return GCe;case 35666:return WCe;case 35674:return jCe;case 35675:return $Ce;case 35676:return qCe;case 5124:case 35670:return YCe;case 35667:case 35671:return XCe;case 35668:case 35672:return KCe;case 35669:case 35673:return ZCe;case 5125:return QCe;case 36294:return JCe;case 36295:return eSe;case 36296:return tSe;case 35678:case 36198:case 36298:case 36306:case 35682:return nSe;case 35679:case 36299:case 36307:return iSe;case 35680:case 36300:case 36308:case 36293:return rSe;case 36289:case 36303:case 36311:case 36292:return sSe}}(t.type)}function _W(n,t,e){this.id=n,this.addr=e,this.cache=[],this.size=t.size,this.setValue=function ESe(n){switch(n){case 5126:return aSe;case 35664:return lSe;case 35665:return cSe;case 35666:return uSe;case 35674:return dSe;case 35675:return hSe;case 35676:return fSe;case 5124:case 35670:return pSe;case 35667:case 35671:return mSe;case 35668:case 35672:return gSe;case 35669:case 35673:return _Se;case 5125:return vSe;case 36294:return ySe;case 36295:return bSe;case 36296:return xSe;case 35678:case 36198:case 36298:case 36306:case 35682:return wSe;case 35679:case 36299:case 36307:return MSe;case 35680:case 36300:case 36308:case 36293:return CSe;case 36289:case 36303:case 36311:case 36292:return SSe}}(t.type)}function vW(n){this.id=n,this.seq=[],this.map={}}_W.prototype.updateCache=function(n){const t=this.cache;n instanceof Float32Array&&t.length!==n.length&&(this.cache=new Float32Array(n.length)),rs(t,n)},vW.prototype.setValue=function(n,t,e){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,t[o.id],e)}};const pR=/(\w+)(\])?(\[|\.)?/g;function yW(n,t){n.seq.push(t),n.map[t.id]=t}function ASe(n,t,e){const i=n.name,r=i.length;for(pR.lastIndex=0;;){const s=pR.exec(i),o=pR.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){yW(e,void 0===c?new TSe(a,n,t):new _W(a,n,t));break}{let d=e.map[a];void 0===d&&(d=new vW(a),yW(e,d)),e=d}}}function _u(n,t){this.seq=[],this.map={};const e=n.getProgramParameter(t,35718);for(let i=0;i<e;++i){const r=n.getActiveUniform(t,i);ASe(r,n.getUniformLocation(t,r.name),this)}}function bW(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}_u.prototype.setValue=function(n,t,e,i){const r=this.map[t];void 0!==r&&r.setValue(n,e,i)},_u.prototype.setOptional=function(n,t,e){const i=t[e];void 0!==i&&this.setValue(n,e,i)},_u.upload=function(n,t,e,i){for(let r=0,s=t.length;r!==s;++r){const o=t[r],a=e[o.id];!1!==a.needsUpdate&&o.setValue(n,a.value,i)}},_u.seqWithValue=function(n,t){const e=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in t&&e.push(s)}return e};let DSe=0;function xW(n,t,e){const i=n.getShaderParameter(t,35713),r=n.getShaderInfoLog(t).trim();if(i&&""===r)return"";const s=parseInt(/ERROR: 0:(\d+)/.exec(r)[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function RSe(n,t){const e=n.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++)i.push(o+1+": "+e[o]);return i.join("\n")}(n.getShaderSource(t),s)}function kSe(n,t){const e=function ISe(n){switch(n){case tc:return["Linear","( value )"];case An:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(t);return"vec4 "+n+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function OSe(n,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function rv(n){return""!==n}function wW(n,t){return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function MW(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const NSe=/^[ \t]*#include +<([\w\d./]+)>/gm;function mR(n){return n.replace(NSe,BSe)}function BSe(n,t){const e=an[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return mR(e)}const VSe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,HSe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CW(n){return n.replace(HSe,SW).replace(VSe,USe)}function USe(n,t,e,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),SW(0,t,e,i)}function SW(n,t,e,i){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function EW(n){let t="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?t+="\n#define HIGH_PRECISION":"mediump"===n.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(t+="\n#define LOW_PRECISION"),t}function qSe(n,t,e,i){const r=n.getContext(),s=e.defines;let o=e.vertexShader,a=e.fragmentShader;const l=function zSe(n){let t="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),c=function GSe(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),u=function WSe(n){let t="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),d=function jSe(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),h=function $Se(n){const t=n.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t/32+1)+3,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:i,maxMip:e}}(e),f=e.isWebGL2?"":function PSe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rv).join("\n")}(e),p=function LSe(n){const t=[];for(const e in n){const i=n[e];!1!==i&&t.push("#define "+e+" "+i)}return t.join("\n")}(s),m=r.createProgram();let g,_,v=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(g=[p].filter(rv).join("\n"),g.length>0&&(g+="\n"),_=[f,p].filter(rv).join("\n"),_.length>0&&(_+="\n")):(g=[EW(e),"#define SHADER_NAME "+e.shaderName,p,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rv).join("\n"),_=[f,EW(e),"#define SHADER_NAME "+e.shaderName,p,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+u:"",e.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?an.tonemapping_pars_fragment:"",0!==e.toneMapping?OSe("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",an.encodings_pars_fragment,kSe("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(rv).join("\n")),o=mR(o),o=wW(o,e),o=MW(o,e),a=mR(a),a=wW(a,e),a=MW(a,e),o=CW(o),a=CW(a),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const b=v+_+a,x=bW(r,35633,v+g+o),w=bW(r,35632,b);if(r.attachShader(m,x),r.attachShader(m,w),void 0!==e.index0AttributeName?r.bindAttribLocation(m,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const F=r.getProgramInfoLog(m).trim(),N=r.getShaderInfoLog(x).trim(),C=r.getShaderInfoLog(w).trim();let L=!0,Y=!0;if(!1===r.getProgramParameter(m,35714)){L=!1;const I=xW(r,x,"vertex"),z=xW(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+F+"\n"+I+"\n"+z)}else""!==F?console.warn("THREE.WebGLProgram: Program Info Log:",F):(""===N||""===C)&&(Y=!1);Y&&(this.diagnostics={runnable:L,programLog:F,vertexShader:{log:N,prefix:g},fragmentShader:{log:C,prefix:_}})}let E,R;return r.deleteShader(x),r.deleteShader(w),this.getUniforms=function(){return void 0===E&&(E=new _u(r,m)),E},this.getAttributes=function(){return void 0===R&&(R=function FSe(n,t){const e={},i=n.getProgramParameter(t,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(t,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),e[o]={type:s.type,location:n.getAttribLocation(t,o),locationSize:a}}return e}(r,m)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=e.shaderName,this.id=DSe++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let YSe=0;class XSe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const i=new KSe(t);e.set(t,i)}return e.get(t)}}class KSe{constructor(t){this.id=YSe++,this.code=t,this.usedTimes=0}}function ZSe(n,t,e,i,r,s,o){const a=new ZD,l=new XSe,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.floatVertexTextures,f=r.maxVertexUniforms,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function v(C,L,Y,I,z){const D=I.fog,P=z.geometry,q=(C.isMeshStandardMaterial?e:t).get(C.envMap||(C.isMeshStandardMaterial?I.environment:null)),K=q&&306===q.mapping?q.image.height:null,J=g[C.type],j=z.isSkinnedMesh?function _(C){const Y=C.skeleton.bones;if(h)return 1024;{const z=Math.floor((f-20)/4),D=Math.min(z,Y.length);return D<Y.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Y.length+" bones. This GPU supports "+D+"."),0):D}}(z):0;null!==C.precision&&(m=r.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const we=P.morphAttributes.position||P.morphAttributes.normal||P.morphAttributes.color,fe=void 0!==we?we.length:0;let ie,Re,Pe,et,_e=0;if(void 0!==P.morphAttributes.position&&(_e=1),void 0!==P.morphAttributes.normal&&(_e=2),void 0!==P.morphAttributes.color&&(_e=3),J){const Te=nl[J];ie=Te.vertexShader,Re=Te.fragmentShader}else ie=C.vertexShader,Re=C.fragmentShader,l.update(C),Pe=l.getVertexShaderID(C),et=l.getFragmentShaderID(C);const ye=n.getRenderTarget(),ue=C.clearcoat>0;return{isWebGL2:u,shaderID:J,shaderName:C.type,vertexShader:ie,fragmentShader:Re,defines:C.defines,customVertexShaderID:Pe,customFragmentShaderID:et,isRawShaderMaterial:!0===C.isRawShaderMaterial,glslVersion:C.glslVersion,precision:m,instancing:!0===z.isInstancedMesh,instancingColor:!0===z.isInstancedMesh&&null!==z.instanceColor,supportsVertexTextures:p,outputEncoding:null===ye?n.outputEncoding:!0===ye.isXRRenderTarget?ye.texture.encoding:tc,map:!!C.map,matcap:!!C.matcap,envMap:!!q,envMapMode:q&&q.mapping,envMapCubeUVHeight:K,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:1===C.normalMapType,tangentSpaceNormalMap:0===C.normalMapType,decodeVideoTexture:!!C.map&&!0===C.map.isVideoTexture&&C.map.encoding===An,clearcoat:ue,clearcoatMap:ue&&!!C.clearcoatMap,clearcoatRoughnessMap:ue&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:ue&&!!C.clearcoatNormalMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:!1===C.transparent&&1===C.blending,alphaMap:!!C.alphaMap,alphaTest:C.alphaTest>0,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!P.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:!0===C.vertexColors&&!!P.attributes.color&&4===P.attributes.color.itemSize,vertexUvs:!!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatMap||C.clearcoatRoughnessMap||C.clearcoatNormalMap||C.displacementMap||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheenColorMap||C.sheenRoughnessMap),uvsVertexOnly:!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatNormalMap||C.transmission>0||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheen>0||C.sheenColorMap||C.sheenRoughnessMap||!C.displacementMap),fog:!!D,useFog:C.fog,fogExp2:D&&D.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===z.isSkinnedMesh&&j>0,maxBones:j,useVertexTexture:h,morphTargets:void 0!==P.morphAttributes.position,morphNormals:void 0!==P.morphAttributes.normal,morphColors:void 0!==P.morphAttributes.color,morphTargetsCount:fe,morphTextureStride:_e,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&Y.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:2===C.side,flipSided:1===C.side,depthPacking:void 0!==C.depthPacking&&C.depthPacking,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}},getProgramCacheKey:function y(C){const L=[];if(C.shaderID?L.push(C.shaderID):(L.push(C.customVertexShaderID),L.push(C.customFragmentShaderID)),void 0!==C.defines)for(const Y in C.defines)L.push(Y),L.push(C.defines[Y]);return!1===C.isRawShaderMaterial&&(function b(C,L){C.push(L.precision),C.push(L.outputEncoding),C.push(L.envMapMode),C.push(L.envMapCubeUVHeight),C.push(L.combine),C.push(L.vertexUvs),C.push(L.fogExp2),C.push(L.sizeAttenuation),C.push(L.maxBones),C.push(L.morphTargetsCount),C.push(L.morphAttributeCount),C.push(L.numDirLights),C.push(L.numPointLights),C.push(L.numSpotLights),C.push(L.numHemiLights),C.push(L.numRectAreaLights),C.push(L.numDirLightShadows),C.push(L.numPointLightShadows),C.push(L.numSpotLightShadows),C.push(L.shadowMapType),C.push(L.toneMapping),C.push(L.numClippingPlanes),C.push(L.numClipIntersection)}(L,C),function x(C,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.map&&a.enable(4),L.matcap&&a.enable(5),L.envMap&&a.enable(6),L.lightMap&&a.enable(7),L.aoMap&&a.enable(8),L.emissiveMap&&a.enable(9),L.bumpMap&&a.enable(10),L.normalMap&&a.enable(11),L.objectSpaceNormalMap&&a.enable(12),L.tangentSpaceNormalMap&&a.enable(13),L.clearcoat&&a.enable(14),L.clearcoatMap&&a.enable(15),L.clearcoatRoughnessMap&&a.enable(16),L.clearcoatNormalMap&&a.enable(17),L.displacementMap&&a.enable(18),L.specularMap&&a.enable(19),L.roughnessMap&&a.enable(20),L.metalnessMap&&a.enable(21),L.gradientMap&&a.enable(22),L.alphaMap&&a.enable(23),L.alphaTest&&a.enable(24),L.vertexColors&&a.enable(25),L.vertexAlphas&&a.enable(26),L.vertexUvs&&a.enable(27),L.vertexTangents&&a.enable(28),L.uvsVertexOnly&&a.enable(29),L.fog&&a.enable(30),C.push(a.mask),a.disableAll(),L.useFog&&a.enable(0),L.flatShading&&a.enable(1),L.logarithmicDepthBuffer&&a.enable(2),L.skinning&&a.enable(3),L.useVertexTexture&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.morphColors&&a.enable(7),L.premultipliedAlpha&&a.enable(8),L.shadowMapEnabled&&a.enable(9),L.physicallyCorrectLights&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.depthPacking&&a.enable(13),L.dithering&&a.enable(14),L.specularIntensityMap&&a.enable(15),L.specularColorMap&&a.enable(16),L.transmission&&a.enable(17),L.transmissionMap&&a.enable(18),L.thicknessMap&&a.enable(19),L.sheen&&a.enable(20),L.sheenColorMap&&a.enable(21),L.sheenRoughnessMap&&a.enable(22),L.decodeVideoTexture&&a.enable(23),L.opaque&&a.enable(24),C.push(a.mask)}(L,C),L.push(n.outputEncoding)),L.push(C.customProgramCacheKey),L.join()},getUniforms:function w(C){const L=g[C.type];let Y;return Y=L?Mwe.clone(nl[L].uniforms):C.uniforms,Y},acquireProgram:function E(C,L){let Y;for(let I=0,z=c.length;I<z;I++){const D=c[I];if(D.cacheKey===L){Y=D,++Y.usedTimes;break}}return void 0===Y&&(Y=new qSe(n,L,C,s),c.push(Y)),Y},releaseProgram:function R(C){if(0==--C.usedTimes){const L=c.indexOf(C);c[L]=c[c.length-1],c.pop(),C.destroy()}},releaseShaderCache:function F(C){l.remove(C)},programs:c,dispose:function N(){l.dispose()}}}function QSe(){let n=new WeakMap;return{get:function t(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function e(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function JSe(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function TW(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function AW(){const n=[];let t=0;const e=[],i=[],r=[];function o(d,h,f,p,m,g){let _=n[t];return void 0===_?(_={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:m,group:g},n[t]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=f,_.groupOrder=p,_.renderOrder=d.renderOrder,_.z=m,_.group=g),t++,_}return{opaque:e,transmissive:i,transparent:r,init:function s(){t=0,e.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,m,g){const _=o(d,h,f,p,m,g);f.transmission>0?i.push(_):!0===f.transparent?r.push(_):e.push(_)},unshift:function l(d,h,f,p,m,g){const _=o(d,h,f,p,m,g);f.transmission>0?i.unshift(_):!0===f.transparent?r.unshift(_):e.unshift(_)},finish:function u(){for(let d=t,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){e.length>1&&e.sort(d||JSe),i.length>1&&i.sort(h||TW),r.length>1&&r.sort(h||TW)}}}function eEe(){let n=new WeakMap;return{get:function t(i,r){let s;return!1===n.has(i)?(s=new AW,n.set(i,[s])):r>=n.get(i).length?(s=new AW,n.get(i).push(s)):s=n.get(i)[r],s},dispose:function e(){n=new WeakMap}}}function tEe(){const n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new V,color:new Fe};break;case"SpotLight":e={position:new V,direction:new V,color:new Fe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new V,color:new Fe,distance:0,decay:0};break;case"HemisphereLight":e={direction:new V,skyColor:new Fe,groundColor:new Fe};break;case"RectAreaLight":e={color:new Fe,position:new V,halfWidth:new V,halfHeight:new V}}return n[t.id]=e,e}}}let iEe=0;function rEe(n,t){return(t.castShadow?1:0)-(n.castShadow?1:0)}function sEe(n,t){const e=new tEe,i=function nEe(){const n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me,shadowCameraNear:1,shadowCameraFar:1e3}}return n[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new V);const s=new V,o=new lt,a=new lt;return{setup:function l(u,d){let h=0,f=0,p=0;for(let F=0;F<9;F++)r.probe[F].set(0,0,0);let m=0,g=0,_=0,v=0,y=0,b=0,x=0,w=0;u.sort(rEe);const E=!0!==d?Math.PI:1;for(let F=0,N=u.length;F<N;F++){const C=u[F],L=C.color,Y=C.intensity,I=C.distance,z=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)h+=L.r*Y*E,f+=L.g*Y*E,p+=L.b*Y*E;else if(C.isLightProbe)for(let D=0;D<9;D++)r.probe[D].addScaledVector(C.sh.coefficients[D],Y);else if(C.isDirectionalLight){const D=e.get(C);if(D.color.copy(C.color).multiplyScalar(C.intensity*E),C.castShadow){const P=C.shadow,O=i.get(C);O.shadowBias=P.bias,O.shadowNormalBias=P.normalBias,O.shadowRadius=P.radius,O.shadowMapSize=P.mapSize,r.directionalShadow[m]=O,r.directionalShadowMap[m]=z,r.directionalShadowMatrix[m]=C.shadow.matrix,b++}r.directional[m]=D,m++}else if(C.isSpotLight){const D=e.get(C);if(D.position.setFromMatrixPosition(C.matrixWorld),D.color.copy(L).multiplyScalar(Y*E),D.distance=I,D.coneCos=Math.cos(C.angle),D.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),D.decay=C.decay,C.castShadow){const P=C.shadow,O=i.get(C);O.shadowBias=P.bias,O.shadowNormalBias=P.normalBias,O.shadowRadius=P.radius,O.shadowMapSize=P.mapSize,r.spotShadow[_]=O,r.spotShadowMap[_]=z,r.spotShadowMatrix[_]=C.shadow.matrix,w++}r.spot[_]=D,_++}else if(C.isRectAreaLight){const D=e.get(C);D.color.copy(L).multiplyScalar(Y),D.halfWidth.set(.5*C.width,0,0),D.halfHeight.set(0,.5*C.height,0),r.rectArea[v]=D,v++}else if(C.isPointLight){const D=e.get(C);if(D.color.copy(C.color).multiplyScalar(C.intensity*E),D.distance=C.distance,D.decay=C.decay,C.castShadow){const P=C.shadow,O=i.get(C);O.shadowBias=P.bias,O.shadowNormalBias=P.normalBias,O.shadowRadius=P.radius,O.shadowMapSize=P.mapSize,O.shadowCameraNear=P.camera.near,O.shadowCameraFar=P.camera.far,r.pointShadow[g]=O,r.pointShadowMap[g]=z,r.pointShadowMatrix[g]=C.shadow.matrix,x++}r.point[g]=D,g++}else if(C.isHemisphereLight){const D=e.get(C);D.skyColor.copy(C.color).multiplyScalar(Y*E),D.groundColor.copy(C.groundColor).multiplyScalar(Y*E),r.hemi[y]=D,y++}}v>0&&(t.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=je.LTC_FLOAT_1,r.rectAreaLTC2=je.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=je.LTC_HALF_1,r.rectAreaLTC2=je.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const R=r.hash;(R.directionalLength!==m||R.pointLength!==g||R.spotLength!==_||R.rectAreaLength!==v||R.hemiLength!==y||R.numDirectionalShadows!==b||R.numPointShadows!==x||R.numSpotShadows!==w)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=v,r.point.length=g,r.hemi.length=y,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=x,r.spotShadowMatrix.length=w,R.directionalLength=m,R.pointLength=g,R.spotLength=_,R.rectAreaLength=v,R.hemiLength=y,R.numDirectionalShadows=b,R.numPointShadows=x,R.numSpotShadows=w,r.version=iEe++)},setupView:function c(u,d){let h=0,f=0,p=0,m=0,g=0;const _=d.matrixWorldInverse;for(let v=0,y=u.length;v<y;v++){const b=u[v];if(b.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),h++}else if(b.isSpotLight){const x=r.spot[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),p++}else if(b.isRectAreaLight){const x=r.rectArea[m];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),a.identity(),o.copy(b.matrixWorld),o.premultiply(_),a.extractRotation(o),x.halfWidth.set(.5*b.width,0,0),x.halfHeight.set(0,.5*b.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){const x=r.point[f];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),f++}else if(b.isHemisphereLight){const x=r.hemi[g];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(_),x.direction.normalize(),g++}}},state:r}}function DW(n,t){const e=new sEe(n,t),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:e},setupLights:function l(d){e.setup(i,d)},setupLightsView:function c(d){e.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function oEe(n,t){let e=new WeakMap;return{get:function i(s,o=0){let a;return!1===e.has(s)?(a=new DW(n,t),e.set(s,[a])):o>=e.get(s).length?(a=new DW(n,t),e.get(s).push(a)):a=e.get(s)[o],a},dispose:function r(){e=new WeakMap}}}class gR extends Ci{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}gR.prototype.isMeshDepthMaterial=!0;class _R extends Ci{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function RW(n,t,e){let i=new dw;const r=new me,s=new me,o=new Nn,a=new gR({depthPacking:3201}),l=new _R,c={},u=e.maxTextureSize,d={0:1,1:0,2:2},h=new wa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new me},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new kt;p.setAttribute("position",new Gn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Xi(p,h),g=this;function _(b,x){const w=t.update(m);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(x,null,w,h,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(x,null,w,f,m,null)}function v(b,x,w,E,R,F){let N=null;const C=!0===w.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(N=void 0!==C?C:!0===w.isPointLight?l:a,n.localClippingEnabled&&!0===x.clipShadows&&0!==x.clippingPlanes.length||x.displacementMap&&0!==x.displacementScale||x.alphaMap&&x.alphaTest>0){const L=N.uuid,Y=x.uuid;let I=c[L];void 0===I&&(I={},c[L]=I);let z=I[Y];void 0===z&&(z=N.clone(),I[Y]=z),N=z}return N.visible=x.visible,N.wireframe=x.wireframe,N.side=3===F?null!==x.shadowSide?x.shadowSide:x.side:null!==x.shadowSide?x.shadowSide:d[x.side],N.alphaMap=x.alphaMap,N.alphaTest=x.alphaTest,N.clipShadows=x.clipShadows,N.clippingPlanes=x.clippingPlanes,N.clipIntersection=x.clipIntersection,N.displacementMap=x.displacementMap,N.displacementScale=x.displacementScale,N.displacementBias=x.displacementBias,N.wireframeLinewidth=x.wireframeLinewidth,N.linewidth=x.linewidth,!0===w.isPointLight&&!0===N.isMeshDistanceMaterial&&(N.referencePosition.setFromMatrixPosition(w.matrixWorld),N.nearDistance=E,N.farDistance=R),N}function y(b,x,w,E,R){if(!1===b.visible)return;if(b.layers.test(x.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&3===R)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,b.matrixWorld);const C=t.update(b),L=b.material;if(Array.isArray(L)){const Y=C.groups;for(let I=0,z=Y.length;I<z;I++){const D=Y[I],P=L[D.materialIndex];if(P&&P.visible){const O=v(b,P,E,w.near,w.far,R);n.renderBufferDirect(w,null,C,O,b,D)}}}else if(L.visible){const Y=v(b,L,E,w.near,w.far,R);n.renderBufferDirect(w,null,C,Y,b,null)}}const N=b.children;for(let C=0,L=N.length;C<L;C++)y(N[C],x,w,E,R)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(b,x,w){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===b.length)return;const E=n.getRenderTarget(),R=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),N=n.state;N.setBlending(0),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let C=0,L=b.length;C<L;C++){const Y=b[C],I=Y.shadow;if(void 0===I){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(!1===I.autoUpdate&&!1===I.needsUpdate)continue;r.copy(I.mapSize);const z=I.getFrameExtents();r.multiply(z),s.copy(I.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/z.x),r.x=s.x*z.x,I.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/z.y),r.y=s.y*z.y,I.mapSize.y=s.y)),null===I.map&&!I.isPointLightShadow&&3===this.type&&(I.map=new ao(r.x,r.y),I.map.texture.name=Y.name+".shadowMap",I.mapPass=new ao(r.x,r.y),I.camera.updateProjectionMatrix()),null===I.map&&(I.map=new ao(r.x,r.y,{minFilter:or,magFilter:or,format:Uo}),I.map.texture.name=Y.name+".shadowMap",I.camera.updateProjectionMatrix()),n.setRenderTarget(I.map),n.clear();const D=I.getViewportCount();for(let P=0;P<D;P++){const O=I.getViewport(P);o.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),N.viewport(o),I.updateMatrices(Y,P),i=I.getFrustum(),y(x,w,I.camera,Y,this.type)}!I.isPointLightShadow&&3===this.type&&_(I,w),I.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(E,R,F)}}function cEe(n,t,e){const i=e.isWebGL2,a=new function r(){let X=!1;const ke=new Nn;let Se=null;const xt=new Nn(0,0,0,0);return{setMask:function(ze){Se!==ze&&!X&&(n.colorMask(ze,ze,ze,ze),Se=ze)},setLocked:function(ze){X=ze},setClear:function(ze,ht,Be,Nt,Qn){!0===Qn&&(ze*=Nt,ht*=Nt,Be*=Nt),ke.set(ze,ht,Be,Nt),!1===xt.equals(ke)&&(n.clearColor(ze,ht,Be,Nt),xt.copy(ke))},reset:function(){X=!1,Se=null,xt.set(-1,0,0,0)}}},l=new function s(){let X=!1,ke=null,Se=null,xt=null;return{setTest:function(ze){ze?_e(2929):ie(2929)},setMask:function(ze){ke!==ze&&!X&&(n.depthMask(ze),ke=ze)},setFunc:function(ze){if(Se!==ze){if(ze)switch(ze){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);Se=ze}},setLocked:function(ze){X=ze},setClear:function(ze){xt!==ze&&(n.clearDepth(ze),xt=ze)},reset:function(){X=!1,ke=null,Se=null,xt=null}}},c=new function o(){let X=!1,ke=null,Se=null,xt=null,ze=null,ht=null,Be=null,Nt=null,Qn=null;return{setTest:function(fn){X||(fn?_e(2960):ie(2960))},setMask:function(fn){ke!==fn&&!X&&(n.stencilMask(fn),ke=fn)},setFunc:function(fn,mo,go){(Se!==fn||xt!==mo||ze!==go)&&(n.stencilFunc(fn,mo,go),Se=fn,xt=mo,ze=go)},setOp:function(fn,mo,go){(ht!==fn||Be!==mo||Nt!==go)&&(n.stencilOp(fn,mo,go),ht=fn,Be=mo,Nt=go)},setLocked:function(fn){X=fn},setClear:function(fn){Qn!==fn&&(n.clearStencil(fn),Qn=fn)},reset:function(){X=!1,ke=null,Se=null,xt=null,ze=null,ht=null,Be=null,Nt=null,Qn=null}}};let u={},d={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,v=null,y=null,b=null,x=null,w=null,E=!1,R=null,F=null,N=null,C=null,L=null;const Y=n.getParameter(35661);let I=!1,z=0;const D=n.getParameter(7938);-1!==D.indexOf("WebGL")?(z=parseFloat(/^WebGL (\d)/.exec(D)[1]),I=z>=1):-1!==D.indexOf("OpenGL ES")&&(z=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),I=z>=2);let P=null,O={};const q=n.getParameter(3088),K=n.getParameter(2978),J=(new Nn).fromArray(q),j=(new Nn).fromArray(K);function we(X,ke,Se){const xt=new Uint8Array(4),ze=n.createTexture();n.bindTexture(X,ze),n.texParameteri(X,10241,9728),n.texParameteri(X,10240,9728);for(let ht=0;ht<Se;ht++)n.texImage2D(ke+ht,0,6408,1,1,0,6408,5121,xt);return ze}const fe={};function _e(X){!0!==u[X]&&(n.enable(X),u[X]=!0)}function ie(X){!1!==u[X]&&(n.disable(X),u[X]=!1)}fe[3553]=we(3553,3553,1),fe[34067]=we(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),_e(2929),l.setFunc(3),Te(!1),Ze(1),_e(2884),ue(0);const ye={100:32774,101:32778,102:32779};if(i)ye[103]=32775,ye[104]=32776;else{const X=t.get("EXT_blend_minmax");null!==X&&(ye[103]=X.MIN_EXT,ye[104]=X.MAX_EXT)}const vt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ue(X,ke,Se,xt,ze,ht,Be,Nt){if(0!==X){if(!1===m&&(_e(3042),m=!0),5===X)ze=ze||ke,ht=ht||Se,Be=Be||xt,(ke!==_||ze!==b)&&(n.blendEquationSeparate(ye[ke],ye[ze]),_=ke,b=ze),(Se!==v||xt!==y||ht!==x||Be!==w)&&(n.blendFuncSeparate(vt[Se],vt[xt],vt[ht],vt[Be]),v=Se,y=xt,x=ht,w=Be),g=X,E=null;else if(X!==g||Nt!==E){if((100!==_||100!==b)&&(n.blendEquation(32774),_=100,b=100),Nt)switch(X){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",X)}else switch(X){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",X)}v=null,y=null,x=null,w=null,g=X,E=Nt}}else!0===m&&(ie(3042),m=!1)}function Te(X){R!==X&&(n.frontFace(X?2304:2305),R=X)}function Ze(X){0!==X?(_e(2884),X!==F&&n.cullFace(1===X?1029:2===X?1028:1032)):ie(2884),F=X}function Ae(X,ke,Se){X?(_e(32823),(C!==ke||L!==Se)&&(n.polygonOffset(ke,Se),C=ke,L=Se)):ie(32823)}function it(X){void 0===X&&(X=33984+Y-1),P!==X&&(n.activeTexture(X),P=X)}return{buffers:{color:a,depth:l,stencil:c},enable:_e,disable:ie,bindFramebuffer:function Re(X,ke){return d[X]!==ke&&(n.bindFramebuffer(X,ke),d[X]=ke,i&&(36009===X&&(d[36160]=ke),36160===X&&(d[36009]=ke)),!0)},drawBuffers:function Pe(X,ke){let Se=f,xt=!1;if(X)if(Se=h.get(ke),void 0===Se&&(Se=[],h.set(ke,Se)),X.isWebGLMultipleRenderTargets){const ze=X.texture;if(Se.length!==ze.length||36064!==Se[0]){for(let ht=0,Be=ze.length;ht<Be;ht++)Se[ht]=36064+ht;Se.length=ze.length,xt=!0}}else 36064!==Se[0]&&(Se[0]=36064,xt=!0);else 1029!==Se[0]&&(Se[0]=1029,xt=!0);xt&&(e.isWebGL2?n.drawBuffers(Se):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Se))},useProgram:function et(X){return p!==X&&(n.useProgram(X),p=X,!0)},setBlending:ue,setMaterial:function pe(X,ke){2===X.side?ie(2884):_e(2884);let Se=1===X.side;ke&&(Se=!Se),Te(Se),1===X.blending&&!1===X.transparent?ue(0):ue(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.premultipliedAlpha),l.setFunc(X.depthFunc),l.setTest(X.depthTest),l.setMask(X.depthWrite),a.setMask(X.colorWrite);const xt=X.stencilWrite;c.setTest(xt),xt&&(c.setMask(X.stencilWriteMask),c.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),c.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),Ae(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),!0===X.alphaToCoverage?_e(32926):ie(32926)},setFlipSided:Te,setCullFace:Ze,setLineWidth:function Ne(X){X!==N&&(I&&n.lineWidth(X),N=X)},setPolygonOffset:Ae,setScissorTest:function $e(X){X?_e(3089):ie(3089)},activeTexture:it,bindTexture:function qt(X,ke){null===P&&it();let Se=O[P];void 0===Se&&(Se={type:void 0,texture:void 0},O[P]=Se),(Se.type!==X||Se.texture!==ke)&&(n.bindTexture(X,ke||fe[X]),Se.type=X,Se.texture=ke)},unbindTexture:function xn(){const X=O[P];void 0!==X&&void 0!==X.type&&(n.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)},compressedTexImage2D:function W(){try{n.compressedTexImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texImage2D:function dt(){try{n.texImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texImage3D:function U(){try{n.texImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texStorage2D:function Ue(){try{n.texStorage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texStorage3D:function qe(){try{n.texStorage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texSubImage2D:function B(){try{n.texSubImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texSubImage3D:function le(){try{n.texSubImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},compressedTexSubImage2D:function Me(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},scissor:function Ce(X){!1===J.equals(X)&&(n.scissor(X.x,X.y,X.z,X.w),J.copy(X))},viewport:function nt(X){!1===j.equals(X)&&(n.viewport(X.x,X.y,X.z,X.w),j.copy(X))},reset:function Le(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},P=null,O={},d={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,v=null,y=null,b=null,x=null,w=null,E=!1,R=null,F=null,N=null,C=null,L=null,J.set(0,0,n.canvas.width,n.canvas.height),j.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function uEe(n,t,e,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let _=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function v(W,B){return _?new OffscreenCanvas(W,B):Q_("canvas")}function y(W,B,le,Me){let Ue=1;if((W.width>Me||W.height>Me)&&(Ue=Me/Math.max(W.width,W.height)),Ue<1||!0===B){if("undefined"!=typeof HTMLImageElement&&W instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&W instanceof ImageBitmap){const qe=B?zx:Math.floor,dt=qe(Ue*W.width),U=qe(Ue*W.height);void 0===m&&(m=v(dt,U));const Ce=le?v(dt,U):m;return Ce.width=dt,Ce.height=U,Ce.getContext("2d").drawImage(W,0,0,dt,U),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+dt+"x"+U+")."),Ce}return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W}return W}function b(W){return VD(W.width)&&VD(W.height)}function w(W,B){return W.generateMipmaps&&B&&W.minFilter!==or&&W.minFilter!==Fi}function E(W){n.generateMipmap(W)}function R(W,B,le,Me,Ue=!1){if(!1===a)return B;if(null!==W){if(void 0!==n[W])return n[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let qe=B;return 6403===B&&(5126===le&&(qe=33326),5131===le&&(qe=33325),5121===le&&(qe=33321)),33319===B&&(5126===le&&(qe=33328),5131===le&&(qe=33327),5121===le&&(qe=33323)),6408===B&&(5126===le&&(qe=34836),5131===le&&(qe=34842),5121===le&&(qe=Me===An&&!1===Ue?35907:32856),32819===le&&(qe=32854),32820===le&&(qe=32855)),(33325===qe||33326===qe||33327===qe||33328===qe||34842===qe||34836===qe)&&t.get("EXT_color_buffer_float"),qe}function F(W,B,le){return!0===w(W,le)||W.isFramebufferTexture&&W.minFilter!==or&&W.minFilter!==Fi?Math.log2(Math.max(B.width,B.height))+1:void 0!==W.mipmaps&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?B.mipmaps.length:1}function N(W){return W===or||1004===W||1005===W?9728:9729}function C(W){const B=W.target;B.removeEventListener("dispose",C),function Y(W){const B=i.get(W);if(void 0===B.__webglInit)return;const le=W.source,Me=g.get(le);if(Me){const Ue=Me[B.__cacheKey];Ue.usedTimes--,0===Ue.usedTimes&&I(W),0===Object.keys(Me).length&&g.delete(le)}i.remove(W)}(B),B.isVideoTexture&&p.delete(B)}function L(W){const B=W.target;B.removeEventListener("dispose",L),function z(W){const B=W.texture,le=i.get(W),Me=i.get(B);if(void 0!==Me.__webglTexture&&(n.deleteTexture(Me.__webglTexture),o.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Ue=0;Ue<6;Ue++)n.deleteFramebuffer(le.__webglFramebuffer[Ue]),le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer[Ue]);else n.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&n.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer&&n.deleteRenderbuffer(le.__webglColorRenderbuffer),le.__webglDepthRenderbuffer&&n.deleteRenderbuffer(le.__webglDepthRenderbuffer);if(W.isWebGLMultipleRenderTargets)for(let Ue=0,qe=B.length;Ue<qe;Ue++){const dt=i.get(B[Ue]);dt.__webglTexture&&(n.deleteTexture(dt.__webglTexture),o.memory.textures--),i.remove(B[Ue])}i.remove(B),i.remove(W)}(B)}function I(W){const B=i.get(W);n.deleteTexture(B.__webglTexture),delete g.get(W.source)[B.__cacheKey],o.memory.textures--}let D=0;function K(W,B){const le=i.get(W);if(W.isVideoTexture&&function qt(W){const B=o.render.frame;p.get(W)!==B&&(p.set(W,B),W.update())}(W),!1===W.isRenderTargetTexture&&W.version>0&&le.__version!==W.version){const Me=W.image;if(null===Me)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Me.complete)return void Pe(le,W,B);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.activeTexture(33984+B),e.bindTexture(3553,le.__webglTexture)}const fe={[Xd]:10497,[_s]:33071,1002:33648},_e={[or]:9728,1004:9984,1005:9986,[Fi]:9729,1007:9985,[ou]:9987};function ie(W,B,le){if(le?(n.texParameteri(W,10242,fe[B.wrapS]),n.texParameteri(W,10243,fe[B.wrapT]),(32879===W||35866===W)&&n.texParameteri(W,32882,fe[B.wrapR]),n.texParameteri(W,10240,_e[B.magFilter]),n.texParameteri(W,10241,_e[B.minFilter])):(n.texParameteri(W,10242,33071),n.texParameteri(W,10243,33071),(32879===W||35866===W)&&n.texParameteri(W,32882,33071),(B.wrapS!==_s||B.wrapT!==_s)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(W,10240,N(B.magFilter)),n.texParameteri(W,10241,N(B.minFilter)),B.minFilter!==or&&B.minFilter!==Fi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const Me=t.get("EXT_texture_filter_anisotropic");if(B.type===au&&!1===t.has("OES_texture_float_linear")||!1===a&&B.type===Ep&&!1===t.has("OES_texture_half_float_linear"))return;(B.anisotropy>1||i.get(B).__currentAnisotropy)&&(n.texParameterf(W,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,r.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy)}}function Re(W,B){let le=!1;void 0===W.__webglInit&&(W.__webglInit=!0,B.addEventListener("dispose",C));const Me=B.source;let Ue=g.get(Me);void 0===Ue&&(Ue={},g.set(Me,Ue));const qe=function q(W){const B=[];return B.push(W.wrapS),B.push(W.wrapT),B.push(W.magFilter),B.push(W.minFilter),B.push(W.anisotropy),B.push(W.internalFormat),B.push(W.format),B.push(W.type),B.push(W.generateMipmaps),B.push(W.premultiplyAlpha),B.push(W.flipY),B.push(W.unpackAlignment),B.push(W.encoding),B.join()}(B);if(qe!==W.__cacheKey){void 0===Ue[qe]&&(Ue[qe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,le=!0),Ue[qe].usedTimes++;const dt=Ue[W.__cacheKey];void 0!==dt&&(Ue[W.__cacheKey].usedTimes--,0===dt.usedTimes&&I(B)),W.__cacheKey=qe,W.__webglTexture=Ue[qe].texture}return le}function Pe(W,B,le){let Me=3553;B.isDataArrayTexture&&(Me=35866),B.isData3DTexture&&(Me=32879);const Ue=Re(W,B),qe=B.source;if(e.activeTexture(33984+le),e.bindTexture(Me,W.__webglTexture),qe.version!==qe.__currentVersion||!0===Ue){n.pixelStorei(37440,B.flipY),n.pixelStorei(37441,B.premultiplyAlpha),n.pixelStorei(3317,B.unpackAlignment),n.pixelStorei(37443,0);const dt=function x(W){return!a&&(W.wrapS!==_s||W.wrapT!==_s||W.minFilter!==or&&W.minFilter!==Fi)}(B)&&!1===b(B.image);let U=y(B.image,dt,!1,u);U=xn(B,U);const Ce=b(U)||a,nt=s.convert(B.format,B.encoding);let ke,Le=s.convert(B.type),X=R(B.internalFormat,nt,Le,B.encoding,B.isVideoTexture);ie(Me,B,Ce);const Se=B.mipmaps,xt=a&&!0!==B.isVideoTexture,ze=void 0===W.__version,ht=F(B,U,Ce);if(B.isDepthTexture)X=6402,a?X=B.type===au?36012:1014===B.type?33190:B.type===Tp?35056:33189:B.type===au&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===Zd&&6402===X&&B.type!==$_&&1014!==B.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=$_,Le=s.convert(B.type)),B.format===Ap&&6402===X&&(X=34041,B.type!==Tp&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Tp,Le=s.convert(B.type))),xt&&ze?e.texStorage2D(3553,1,X,U.width,U.height):e.texImage2D(3553,0,X,U.width,U.height,0,nt,Le,null);else if(B.isDataTexture)if(Se.length>0&&Ce){xt&&ze&&e.texStorage2D(3553,ht,X,Se[0].width,Se[0].height);for(let Be=0,Nt=Se.length;Be<Nt;Be++)ke=Se[Be],xt?e.texSubImage2D(3553,Be,0,0,ke.width,ke.height,nt,Le,ke.data):e.texImage2D(3553,Be,X,ke.width,ke.height,0,nt,Le,ke.data);B.generateMipmaps=!1}else xt?(ze&&e.texStorage2D(3553,ht,X,U.width,U.height),e.texSubImage2D(3553,0,0,0,U.width,U.height,nt,Le,U.data)):e.texImage2D(3553,0,X,U.width,U.height,0,nt,Le,U.data);else if(B.isCompressedTexture){xt&&ze&&e.texStorage2D(3553,ht,X,Se[0].width,Se[0].height);for(let Be=0,Nt=Se.length;Be<Nt;Be++)ke=Se[Be],B.format!==Uo?null!==nt?xt?e.compressedTexSubImage2D(3553,Be,0,0,ke.width,ke.height,nt,ke.data):e.compressedTexImage2D(3553,Be,X,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xt?e.texSubImage2D(3553,Be,0,0,ke.width,ke.height,nt,Le,ke.data):e.texImage2D(3553,Be,X,ke.width,ke.height,0,nt,Le,ke.data)}else if(B.isDataArrayTexture)xt?(ze&&e.texStorage3D(35866,ht,X,U.width,U.height,U.depth),e.texSubImage3D(35866,0,0,0,0,U.width,U.height,U.depth,nt,Le,U.data)):e.texImage3D(35866,0,X,U.width,U.height,U.depth,0,nt,Le,U.data);else if(B.isData3DTexture)xt?(ze&&e.texStorage3D(32879,ht,X,U.width,U.height,U.depth),e.texSubImage3D(32879,0,0,0,0,U.width,U.height,U.depth,nt,Le,U.data)):e.texImage3D(32879,0,X,U.width,U.height,U.depth,0,nt,Le,U.data);else if(B.isFramebufferTexture)xt&&ze?e.texStorage2D(3553,ht,X,U.width,U.height):e.texImage2D(3553,0,X,U.width,U.height,0,nt,Le,null);else if(Se.length>0&&Ce){xt&&ze&&e.texStorage2D(3553,ht,X,Se[0].width,Se[0].height);for(let Be=0,Nt=Se.length;Be<Nt;Be++)ke=Se[Be],xt?e.texSubImage2D(3553,Be,0,0,nt,Le,ke):e.texImage2D(3553,Be,X,nt,Le,ke);B.generateMipmaps=!1}else xt?(ze&&e.texStorage2D(3553,ht,X,U.width,U.height),e.texSubImage2D(3553,0,0,0,nt,Le,U)):e.texImage2D(3553,0,X,nt,Le,U);w(B,Ce)&&E(Me),qe.__currentVersion=qe.version,B.onUpdate&&B.onUpdate(B)}W.__version=B.version}function ye(W,B,le,Me,Ue){const qe=s.convert(le.format,le.encoding),dt=s.convert(le.type),U=R(le.internalFormat,qe,dt,le.encoding);i.get(B).__hasExternalTextures||(32879===Ue||35866===Ue?e.texImage3D(Ue,0,U,B.width,B.height,B.depth,0,qe,dt,null):e.texImage2D(Ue,0,U,B.width,B.height,0,qe,dt,null)),e.bindFramebuffer(36160,W),it(B)?h.framebufferTexture2DMultisampleEXT(36160,Me,Ue,i.get(le).__webglTexture,0,$e(B)):n.framebufferTexture2D(36160,Me,Ue,i.get(le).__webglTexture,0),e.bindFramebuffer(36160,null)}function vt(W,B,le){if(n.bindRenderbuffer(36161,W),B.depthBuffer&&!B.stencilBuffer){let Me=33189;if(le||it(B)){const Ue=B.depthTexture;Ue&&Ue.isDepthTexture&&(Ue.type===au?Me=36012:1014===Ue.type&&(Me=33190));const qe=$e(B);it(B)?h.renderbufferStorageMultisampleEXT(36161,qe,Me,B.width,B.height):n.renderbufferStorageMultisample(36161,qe,Me,B.width,B.height)}else n.renderbufferStorage(36161,Me,B.width,B.height);n.framebufferRenderbuffer(36160,36096,36161,W)}else if(B.depthBuffer&&B.stencilBuffer){const Me=$e(B);le&&!1===it(B)?n.renderbufferStorageMultisample(36161,Me,35056,B.width,B.height):it(B)?h.renderbufferStorageMultisampleEXT(36161,Me,35056,B.width,B.height):n.renderbufferStorage(36161,34041,B.width,B.height),n.framebufferRenderbuffer(36160,33306,36161,W)}else{const Me=!0===B.isWebGLMultipleRenderTargets?B.texture[0]:B.texture,Ue=s.convert(Me.format,Me.encoding),qe=s.convert(Me.type),dt=R(Me.internalFormat,Ue,qe,Me.encoding),U=$e(B);le&&!1===it(B)?n.renderbufferStorageMultisample(36161,U,dt,B.width,B.height):it(B)?h.renderbufferStorageMultisampleEXT(36161,U,dt,B.width,B.height):n.renderbufferStorage(36161,dt,B.width,B.height)}n.bindRenderbuffer(36161,null)}function pe(W){const B=i.get(W),le=!0===W.isWebGLCubeRenderTarget;if(W.depthTexture&&!B.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");!function ue(W,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,W),!B.depthTexture||!B.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),K(B.depthTexture,0);const Me=i.get(B.depthTexture).__webglTexture,Ue=$e(B);if(B.depthTexture.format===Zd)it(B)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Me,0,Ue):n.framebufferTexture2D(36160,36096,3553,Me,0);else{if(B.depthTexture.format!==Ap)throw new Error("Unknown depthTexture format");it(B)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Me,0,Ue):n.framebufferTexture2D(36160,33306,3553,Me,0)}}(B.__webglFramebuffer,W)}else if(le){B.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)e.bindFramebuffer(36160,B.__webglFramebuffer[Me]),B.__webglDepthbuffer[Me]=n.createRenderbuffer(),vt(B.__webglDepthbuffer[Me],W,!1)}else e.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=n.createRenderbuffer(),vt(B.__webglDepthbuffer,W,!1);e.bindFramebuffer(36160,null)}function $e(W){return Math.min(d,W.samples)}function it(W){const B=i.get(W);return a&&W.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==B.__useRenderToTexture}function xn(W,B){const le=W.encoding,Me=W.format,Ue=W.type;return!0===W.isCompressedTexture||!0===W.isVideoTexture||1035===W.format||le!==tc&&(le===An?!1===a?!0===t.has("EXT_sRGB")&&Me===Uo?(W.format=1035,W.minFilter=Fi,W.generateMipmaps=!1):B=nh.sRGBToLinear(B):(Me!==Uo||Ue!==Kd)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),B}this.allocateTextureUnit=function O(){const W=D;return W>=l&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+l),D+=1,W},this.resetTextureUnits=function P(){D=0},this.setTexture2D=K,this.setTexture2DArray=function J(W,B){const le=i.get(W);W.version>0&&le.__version!==W.version?Pe(le,W,B):(e.activeTexture(33984+B),e.bindTexture(35866,le.__webglTexture))},this.setTexture3D=function j(W,B){const le=i.get(W);W.version>0&&le.__version!==W.version?Pe(le,W,B):(e.activeTexture(33984+B),e.bindTexture(32879,le.__webglTexture))},this.setTextureCube=function we(W,B){const le=i.get(W);W.version>0&&le.__version!==W.version?function et(W,B,le){if(6!==B.image.length)return;const Me=Re(W,B),Ue=B.source;if(e.activeTexture(33984+le),e.bindTexture(34067,W.__webglTexture),Ue.version!==Ue.__currentVersion||!0===Me){n.pixelStorei(37440,B.flipY),n.pixelStorei(37441,B.premultiplyAlpha),n.pixelStorei(3317,B.unpackAlignment),n.pixelStorei(37443,0);const qe=B.isCompressedTexture||B.image[0].isCompressedTexture,dt=B.image[0]&&B.image[0].isDataTexture,U=[];for(let Be=0;Be<6;Be++)U[Be]=qe||dt?dt?B.image[Be].image:B.image[Be]:y(B.image[Be],!1,!0,c),U[Be]=xn(B,U[Be]);const Ce=U[0],nt=b(Ce)||a,Le=s.convert(B.format,B.encoding),X=s.convert(B.type),ke=R(B.internalFormat,Le,X,B.encoding),Se=a&&!0!==B.isVideoTexture,xt=void 0===W.__version;let ht,ze=F(B,Ce,nt);if(ie(34067,B,nt),qe){Se&&xt&&e.texStorage2D(34067,ze,ke,Ce.width,Ce.height);for(let Be=0;Be<6;Be++){ht=U[Be].mipmaps;for(let Nt=0;Nt<ht.length;Nt++){const Qn=ht[Nt];B.format!==Uo?null!==Le?Se?e.compressedTexSubImage2D(34069+Be,Nt,0,0,Qn.width,Qn.height,Le,Qn.data):e.compressedTexImage2D(34069+Be,Nt,ke,Qn.width,Qn.height,0,Qn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Se?e.texSubImage2D(34069+Be,Nt,0,0,Qn.width,Qn.height,Le,X,Qn.data):e.texImage2D(34069+Be,Nt,ke,Qn.width,Qn.height,0,Le,X,Qn.data)}}}else{ht=B.mipmaps,Se&&xt&&(ht.length>0&&ze++,e.texStorage2D(34067,ze,ke,U[0].width,U[0].height));for(let Be=0;Be<6;Be++)if(dt){Se?e.texSubImage2D(34069+Be,0,0,0,U[Be].width,U[Be].height,Le,X,U[Be].data):e.texImage2D(34069+Be,0,ke,U[Be].width,U[Be].height,0,Le,X,U[Be].data);for(let Nt=0;Nt<ht.length;Nt++){const fn=ht[Nt].image[Be].image;Se?e.texSubImage2D(34069+Be,Nt+1,0,0,fn.width,fn.height,Le,X,fn.data):e.texImage2D(34069+Be,Nt+1,ke,fn.width,fn.height,0,Le,X,fn.data)}}else{Se?e.texSubImage2D(34069+Be,0,0,0,Le,X,U[Be]):e.texImage2D(34069+Be,0,ke,Le,X,U[Be]);for(let Nt=0;Nt<ht.length;Nt++){const Qn=ht[Nt];Se?e.texSubImage2D(34069+Be,Nt+1,0,0,Le,X,Qn.image[Be]):e.texImage2D(34069+Be,Nt+1,ke,Le,X,Qn.image[Be])}}}w(B,nt)&&E(34067),Ue.__currentVersion=Ue.version,B.onUpdate&&B.onUpdate(B)}W.__version=B.version}(le,W,B):(e.activeTexture(33984+B),e.bindTexture(34067,le.__webglTexture))},this.rebindTextures=function Te(W,B,le){const Me=i.get(W);void 0!==B&&ye(Me.__webglFramebuffer,W,W.texture,36064,3553),void 0!==le&&pe(W)},this.setupRenderTarget=function Ze(W){const B=W.texture,le=i.get(W),Me=i.get(B);W.addEventListener("dispose",L),!0!==W.isWebGLMultipleRenderTargets&&(void 0===Me.__webglTexture&&(Me.__webglTexture=n.createTexture()),Me.__version=B.version,o.memory.textures++);const Ue=!0===W.isWebGLCubeRenderTarget,qe=!0===W.isWebGLMultipleRenderTargets,dt=b(W)||a;if(Ue){le.__webglFramebuffer=[];for(let U=0;U<6;U++)le.__webglFramebuffer[U]=n.createFramebuffer()}else if(le.__webglFramebuffer=n.createFramebuffer(),qe)if(r.drawBuffers){const U=W.texture;for(let Ce=0,nt=U.length;Ce<nt;Ce++){const Le=i.get(U[Ce]);void 0===Le.__webglTexture&&(Le.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&W.samples>0&&!1===it(W)){le.__webglMultisampledFramebuffer=n.createFramebuffer(),le.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,le.__webglColorRenderbuffer);const U=s.convert(B.format,B.encoding),Ce=s.convert(B.type),nt=R(B.internalFormat,U,Ce,B.encoding),Le=$e(W);n.renderbufferStorageMultisample(36161,Le,nt,W.width,W.height),e.bindFramebuffer(36160,le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,le.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),W.depthBuffer&&(le.__webglDepthRenderbuffer=n.createRenderbuffer(),vt(le.__webglDepthRenderbuffer,W,!0)),e.bindFramebuffer(36160,null)}if(Ue){e.bindTexture(34067,Me.__webglTexture),ie(34067,B,dt);for(let U=0;U<6;U++)ye(le.__webglFramebuffer[U],W,B,36064,34069+U);w(B,dt)&&E(34067),e.unbindTexture()}else if(qe){const U=W.texture;for(let Ce=0,nt=U.length;Ce<nt;Ce++){const Le=U[Ce],X=i.get(Le);e.bindTexture(3553,X.__webglTexture),ie(3553,Le,dt),ye(le.__webglFramebuffer,W,Le,36064+Ce,3553),w(Le,dt)&&E(3553)}e.unbindTexture()}else{let U=3553;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?U=W.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(U,Me.__webglTexture),ie(U,B,dt),ye(le.__webglFramebuffer,W,B,36064,U),w(B,dt)&&E(U),e.unbindTexture()}W.depthBuffer&&pe(W)},this.updateRenderTargetMipmap=function Ne(W){const B=b(W)||a,le=!0===W.isWebGLMultipleRenderTargets?W.texture:[W.texture];for(let Me=0,Ue=le.length;Me<Ue;Me++){const qe=le[Me];if(w(qe,B)){const dt=W.isWebGLCubeRenderTarget?34067:3553,U=i.get(qe).__webglTexture;e.bindTexture(dt,U),E(dt),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ae(W){if(a&&W.samples>0&&!1===it(W)){const B=W.width,le=W.height;let Me=16384;const Ue=[36064],qe=W.stencilBuffer?33306:36096;W.depthBuffer&&Ue.push(qe);const dt=i.get(W),U=void 0!==dt.__ignoreDepthValues&&dt.__ignoreDepthValues;!1===U&&(W.depthBuffer&&(Me|=256),W.stencilBuffer&&(Me|=1024)),e.bindFramebuffer(36008,dt.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,dt.__webglFramebuffer),!0===U&&(n.invalidateFramebuffer(36008,[qe]),n.invalidateFramebuffer(36009,[qe])),n.blitFramebuffer(0,0,B,le,0,0,B,le,Me,9728),f&&n.invalidateFramebuffer(36008,Ue),e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,dt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=it}function dEe(n,t,e){const i=e.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Kd)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(s===$_)return 5123;if(1013===s)return 5124;if(1014===s)return 5125;if(s===au)return 5126;if(s===Ep)return i?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Uo)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===Zd)return 6402;if(s===Ap)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===An){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===An?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===An?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===An?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===Tp?i?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}_R.prototype.isMeshDistanceMaterial=!0;class IW extends Cr{constructor(t=[]){super(),this.cameras=t}}IW.prototype.isArrayCamera=!0;class cc extends Dn{constructor(){super(),this.type="Group"}}cc.prototype.isGroup=!0;const hEe={type:"move"};class vR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new cc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new cc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new cc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(r=e.getPose(t.targetRaySpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(hEe))),c&&t.hand){o=!0;for(const m of t.hand.values()){const g=e.getJointPose(m,i);if(void 0===c.joints[m.jointName]){const v=new cc;v.matrixAutoUpdate=!1,v.visible=!1,c.joints[m.jointName]=v,c.add(v)}const _=c.joints[m.jointName];null!==g&&(_.matrix.fromArray(g.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=g.radius),_.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(s=e.getPose(t.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class kW extends ns{constructor(t,e,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:Zd)!==Zd&&u!==Ap)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Zd&&(i=$_),void 0===i&&u===Ap&&(i=Tp),super(null,r,s,o,a,l,u,i,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:or,this.minFilter=void 0!==l?l:or,this.flipY=!1,this.generateMipmaps=!1}}kW.prototype.isDepthTexture=!0;class fEe extends lu{constructor(t,e){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null;const f=e.getContextAttributes();let p=null,m=null;const g=[],_=new Map,v=new Cr;v.layers.enable(1),v.viewport=new Nn;const y=new Cr;y.layers.enable(2),y.viewport=new Nn;const b=[v,y],x=new IW;x.layers.enable(1),x.layers.enable(2);let w=null,E=null;function R(O){const q=_.get(O.inputSource);q&&q.dispatchEvent({type:O.type,data:O.inputSource})}function F(){_.forEach(function(O,q){O.disconnect(q)}),_.clear(),w=null,E=null,t.setRenderTarget(p),d=null,u=null,c=null,r=null,m=null,P.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function N(O){const q=r.inputSources;for(let K=0;K<g.length;K++)_.set(q[K],g[K]);for(let K=0;K<O.removed.length;K++){const J=O.removed[K],j=_.get(J);j&&(j.dispatchEvent({type:"disconnected",data:J}),_.delete(J))}for(let K=0;K<O.added.length;K++){const J=O.added[K],j=_.get(J);j&&j.dispatchEvent({type:"connected",data:J})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let q=g[O];return void 0===q&&(q=new vR,g[O]=q),q.getTargetRaySpace()},this.getControllerGrip=function(O){let q=g[O];return void 0===q&&(q=new vR,g[O]=q),q.getGripSpace()},this.getHand=function(O){let q=g[O];return void 0===q&&(q=new vR,g[O]=q),q.getHandSpace()},this.setFramebufferScaleFactor=function(O){s=O,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){a=O,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=function(){var O=yr(function*(q){if(r=q,null!==r){if(p=t.getRenderTarget(),r.addEventListener("select",R),r.addEventListener("selectstart",R),r.addEventListener("selectend",R),r.addEventListener("squeeze",R),r.addEventListener("squeezestart",R),r.addEventListener("squeezeend",R),r.addEventListener("end",F),r.addEventListener("inputsourceschange",N),!0!==f.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)d=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:d}),m=new ao(d.framebufferWidth,d.framebufferHeight,{format:Uo,type:Kd,encoding:t.outputEncoding});else{let K=null,J=null,j=null;f.depth&&(j=f.stencil?35056:33190,K=f.stencil?Ap:Zd,J=f.stencil?Tp:$_);const we={colorFormat:t.outputEncoding===An?35907:32856,depthFormat:j,scaleFactor:s};c=new XRWebGLBinding(r,e),u=c.createProjectionLayer(we),r.updateRenderState({layers:[u]}),m=new ao(u.textureWidth,u.textureHeight,{format:Uo,type:Kd,depthTexture:new kW(u.textureWidth,u.textureHeight,J,void 0,void 0,void 0,void 0,void 0,void 0,K),stencilBuffer:f.stencil,encoding:t.outputEncoding,samples:f.antialias?4:0}),t.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=yield r.requestReferenceSpace(a),P.setContext(r),P.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(q){return O.apply(this,arguments)}}();const C=new V,L=new V;function I(O,q){null===q?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(q.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(null===r)return;x.near=y.near=v.near=O.near,x.far=y.far=v.far=O.far,(w!==x.near||E!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,E=x.far);const q=O.parent,K=x.cameras;I(x,q);for(let j=0;j<K.length;j++)I(K[j],q);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),O.position.copy(x.position),O.quaternion.copy(x.quaternion),O.scale.copy(x.scale),O.matrix.copy(x.matrix),O.matrixWorld.copy(x.matrixWorld);const J=O.children;for(let j=0,we=J.length;j<we;j++)J[j].updateMatrixWorld(!0);2===K.length?function Y(O,q,K){C.setFromMatrixPosition(q.matrixWorld),L.setFromMatrixPosition(K.matrixWorld);const J=C.distanceTo(L),j=q.projectionMatrix.elements,we=K.projectionMatrix.elements,fe=j[14]/(j[10]-1),_e=j[14]/(j[10]+1),ie=(j[9]+1)/j[5],Re=(j[9]-1)/j[5],Pe=(j[8]-1)/j[0],et=(we[8]+1)/we[0],ye=fe*Pe,vt=fe*et,ue=J/(-Pe+et),pe=ue*-Pe;q.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(pe),O.translateZ(ue),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const Te=fe+ue,Ze=_e+ue;O.projectionMatrix.makePerspective(ye-pe,vt+(J-pe),ie*_e/Ze*Te,Re*_e/Ze*Te,Te,Ze)}(x,v,y):x.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(O){null!==u&&(u.fixedFoveation=O),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=O)};let z=null;const P=new eW;P.setAnimationLoop(function D(O,q){if(l=q.getViewerPose(o),h=q,null!==l){const J=l.views;null!==d&&(t.setRenderTargetFramebuffer(m,d.framebuffer),t.setRenderTarget(m));let j=!1;J.length!==x.cameras.length&&(x.cameras.length=0,j=!0);for(let we=0;we<J.length;we++){const fe=J[we];let _e=null;if(null!==d)_e=d.getViewport(fe);else{const Re=c.getViewSubImage(u,fe);_e=Re.viewport,0===we&&(t.setRenderTargetTextures(m,Re.colorTexture,u.ignoreDepthValues?void 0:Re.depthStencilTexture),t.setRenderTarget(m))}const ie=b[we];ie.matrix.fromArray(fe.transform.matrix),ie.projectionMatrix.fromArray(fe.projectionMatrix),ie.viewport.set(_e.x,_e.y,_e.width,_e.height),0===we&&x.matrix.copy(ie.matrix),!0===j&&x.cameras.push(ie)}}const K=r.inputSources;for(let J=0;J<g.length;J++)g[J].update(K[J],q,o);z&&z(O,q),h=null}),this.setAnimationLoop=function(O){z=O},this.dispose=function(){}}}function pEe(n,t){function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const _=t.get(g).envMap;if(_&&(m.envMap.value=_,m.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const b=!0!==n.physicallyCorrectLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}let v,y;g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity),g.map?v=g.map:g.specularMap?v=g.specularMap:g.displacementMap?v=g.displacementMap:g.normalMap?v=g.normalMap:g.bumpMap?v=g.bumpMap:g.roughnessMap?v=g.roughnessMap:g.metalnessMap?v=g.metalnessMap:g.alphaMap?v=g.alphaMap:g.emissiveMap?v=g.emissiveMap:g.clearcoatMap?v=g.clearcoatMap:g.clearcoatNormalMap?v=g.clearcoatNormalMap:g.clearcoatRoughnessMap?v=g.clearcoatRoughnessMap:g.specularIntensityMap?v=g.specularIntensityMap:g.specularColorMap?v=g.specularColorMap:g.transmissionMap?v=g.transmissionMap:g.thicknessMap?v=g.thicknessMap:g.sheenColorMap?v=g.sheenColorMap:g.sheenRoughnessMap&&(v=g.sheenRoughnessMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix)),g.aoMap?y=g.aoMap:g.lightMap&&(y=g.lightMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uv2Transform.value.copy(y.matrix))}return{refreshFogUniforms:function e(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function i(m,g,_,v,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(r(m,g),function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(r(m,g),function d(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function h(m,g,_){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&m.clearcoatNormalScale.value.negate())),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=_.texture,m.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}(m,g,y)):g.isMeshMatcapMaterial?(r(m,g),function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}(m,g),g.isLineDashedMaterial&&function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function a(m,g,_,v){let y;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*_,m.scale.value=.5*v,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}(m,g,_,v):g.isSpriteMaterial?function l(m,g){let _;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function Bn(n={}){const t=void 0!==n.canvas?n.canvas:function mEe(){const n=Q_("canvas");return n.style.display="block",n}(),e=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=void 0!==n.context?e.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let d=null,h=null;const f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=tc,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,_=0,v=0,y=null,b=-1,x=null;const w=new Nn,E=new Nn;let R=null,F=t.width,N=t.height,C=1,L=null,Y=null;const I=new Nn(0,0,F,N),z=new Nn(0,0,F,N);let D=!1;const P=new dw;let O=!1,q=!1,K=null;const J=new lt,j=new me,we=new V,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function _e(){return null===y?C:1}let Pe,et,ye,vt,ue,pe,Te,Ze,Ne,Ae,$e,it,qt,xn,W,B,le,Me,Ue,qe,dt,U,Ce,ie=e;function Re(G,ne){for(let ce=0;ce<G.length;ce++){const ge=t.getContext(G[ce],ne);if(null!==ge)return ge}return null}try{const G={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r139"),t.addEventListener("webglcontextlost",X,!1),t.addEventListener("webglcontextrestored",ke,!1),null===ie){const ne=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&ne.shift(),ie=Re(ne,G),null===ie)throw Re(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ie.getShaderPrecisionFormat&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}function nt(){Pe=new OCe(ie),et=new TCe(ie,Pe,n),Pe.init(et),U=new dEe(ie,Pe,et),ye=new cEe(ie,Pe,et),vt=new FCe(ie),ue=new QSe,pe=new uEe(ie,Pe,ye,ue,et,U,vt),Te=new DCe(m),Ze=new kCe(m),Ne=new Awe(ie,et),Ce=new SCe(ie,Pe,Ne,et),Ae=new PCe(ie,Ne,vt,Ce),$e=new HCe(ie,Ae,Ne,vt),Ue=new VCe(ie,et,pe),B=new ACe(ue),it=new ZSe(m,Te,Ze,Pe,et,Ce,B),qt=new pEe(m,ue),xn=new eEe,W=new oEe(Pe,et),Me=new CCe(m,Te,ye,$e,u,o),le=new RW(m,$e,et),qe=new ECe(ie,Pe,vt,et),dt=new LCe(ie,Pe,vt,et),vt.programs=it.programs,m.capabilities=et,m.extensions=Pe,m.properties=ue,m.renderLists=xn,m.shadowMap=le,m.state=ye,m.info=vt}nt();const Le=new fEe(m,ie);function X(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const G=vt.autoReset,ne=le.enabled,ce=le.autoUpdate,se=le.needsUpdate,ge=le.type;nt(),vt.autoReset=G,le.enabled=ne,le.autoUpdate=ce,le.needsUpdate=se,le.type=ge}function Se(G){const ne=G.target;ne.removeEventListener("dispose",Se),function xt(G){(function ze(G){const ne=ue.get(G).programs;void 0!==ne&&(ne.forEach(function(ce){it.releaseProgram(ce)}),G.isShaderMaterial&&it.releaseShaderCache(G))})(G),ue.remove(G)}(ne)}this.xr=Le,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const G=Pe.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Pe.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(G){void 0!==G&&(C=G,this.setSize(F,N,!1))},this.getSize=function(G){return G.set(F,N)},this.setSize=function(G,ne,ce){Le.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(F=G,N=ne,t.width=Math.floor(G*C),t.height=Math.floor(ne*C),!1!==ce&&(t.style.width=G+"px",t.style.height=ne+"px"),this.setViewport(0,0,G,ne))},this.getDrawingBufferSize=function(G){return G.set(F*C,N*C).floor()},this.setDrawingBufferSize=function(G,ne,ce){F=G,N=ne,C=ce,t.width=Math.floor(G*ce),t.height=Math.floor(ne*ce),this.setViewport(0,0,G,ne)},this.getCurrentViewport=function(G){return G.copy(w)},this.getViewport=function(G){return G.copy(I)},this.setViewport=function(G,ne,ce,se){G.isVector4?I.set(G.x,G.y,G.z,G.w):I.set(G,ne,ce,se),ye.viewport(w.copy(I).multiplyScalar(C).floor())},this.getScissor=function(G){return G.copy(z)},this.setScissor=function(G,ne,ce,se){G.isVector4?z.set(G.x,G.y,G.z,G.w):z.set(G,ne,ce,se),ye.scissor(E.copy(z).multiplyScalar(C).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(G){ye.setScissorTest(D=G)},this.setOpaqueSort=function(G){L=G},this.setTransparentSort=function(G){Y=G},this.getClearColor=function(G){return G.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor.apply(Me,arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha.apply(Me,arguments)},this.clear=function(G=!0,ne=!0,ce=!0){let se=0;G&&(se|=16384),ne&&(se|=256),ce&&(se|=1024),ie.clear(se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",X,!1),t.removeEventListener("webglcontextrestored",ke,!1),xn.dispose(),W.dispose(),ue.dispose(),Te.dispose(),Ze.dispose(),$e.dispose(),Ce.dispose(),it.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",Nt),Le.removeEventListener("sessionend",Qn),K&&(K.dispose(),K=null),fn.stop()},this.renderBufferDirect=function(G,ne,ce,se,ge,Et){null===ne&&(ne=fe);const Bt=ge.isMesh&&ge.matrixWorld.determinant()<0,yt=function Lh(G,ne,ce,se,ge){!0!==ne.isScene&&(ne=fe),pe.resetTextureUnits();const Et=ne.fog,yt=null===y?m.outputEncoding:!0===y.isXRRenderTarget?y.texture.encoding:tc,wt=(se.isMeshStandardMaterial?Ze:Te).get(se.envMap||(se.isMeshStandardMaterial?ne.environment:null)),Sn=!0===se.vertexColors&&!!ce.attributes.color&&4===ce.attributes.color.itemSize,_n=!!se.normalMap&&!!ce.attributes.tangent,vn=!!ce.morphAttributes.position,Vi=!!ce.morphAttributes.normal,Fh=!!ce.morphAttributes.color,km=se.toneMapped?m.toneMapping:0,Om=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,fl=void 0!==Om?Om.length:0,kn=ue.get(se),Pm=h.state.lights;!0!==O||!0!==q&&G===x||B.setState(se,G,G===x&&se.id===b);let dr=!1;se.version===kn.__version?(kn.needsLights&&kn.lightsStateVersion!==Pm.state.version||kn.outputEncoding!==yt||ge.isInstancedMesh&&!1===kn.instancing||!ge.isInstancedMesh&&!0===kn.instancing||ge.isSkinnedMesh&&!1===kn.skinning||!ge.isSkinnedMesh&&!0===kn.skinning||kn.envMap!==wt||se.fog&&kn.fog!==Et||void 0!==kn.numClippingPlanes&&(kn.numClippingPlanes!==B.numPlanes||kn.numIntersection!==B.numIntersection)||kn.vertexAlphas!==Sn||kn.vertexTangents!==_n||kn.morphTargets!==vn||kn.morphNormals!==Vi||kn.morphColors!==Fh||kn.toneMapping!==km||!0===et.isWebGL2&&kn.morphTargetsCount!==fl)&&(dr=!0):(dr=!0,kn.__version=se.version);let pl=kn.currentProgram;!0===dr&&(pl=Mc(se,ne,ge));let Vu=!1,Qv=!1,nk=!1;const ls=pl.getUniforms(),Jv=kn.uniforms;if(ye.useProgram(pl.program)&&(Vu=!0,Qv=!0,nk=!0),se.id!==b&&(b=se.id,Qv=!0),Vu||x!==G){if(ls.setValue(ie,"projectionMatrix",G.projectionMatrix),et.logarithmicDepthBuffer&&ls.setValue(ie,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),x!==G&&(x=G,Qv=!0,nk=!0),se.isShaderMaterial||se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshStandardMaterial||se.envMap){const ka=ls.map.cameraPosition;void 0!==ka&&ka.setValue(ie,we.setFromMatrixPosition(G.matrixWorld))}(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial)&&ls.setValue(ie,"isOrthographic",!0===G.isOrthographicCamera),(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial||se.isShadowMaterial||ge.isSkinnedMesh)&&ls.setValue(ie,"viewMatrix",G.matrixWorldInverse)}if(ge.isSkinnedMesh){ls.setOptional(ie,ge,"bindMatrix"),ls.setOptional(ie,ge,"bindMatrixInverse");const ka=ge.skeleton;ka&&(et.floatVertexTextures?(null===ka.boneTexture&&ka.computeBoneTexture(),ls.setValue(ie,"boneTexture",ka.boneTexture,pe),ls.setValue(ie,"boneTextureSize",ka.boneTextureSize)):ls.setOptional(ie,ka,"boneMatrices"))}const ik=ce.morphAttributes;return(void 0!==ik.position||void 0!==ik.normal||void 0!==ik.color&&!0===et.isWebGL2)&&Ue.update(ge,ce,se,pl),(Qv||kn.receiveShadow!==ge.receiveShadow)&&(kn.receiveShadow=ge.receiveShadow,ls.setValue(ie,"receiveShadow",ge.receiveShadow)),Qv&&(ls.setValue(ie,"toneMappingExposure",m.toneMappingExposure),kn.needsLights&&function UM(G,ne){G.ambientLightColor.needsUpdate=ne,G.lightProbe.needsUpdate=ne,G.directionalLights.needsUpdate=ne,G.directionalLightShadows.needsUpdate=ne,G.pointLights.needsUpdate=ne,G.pointLightShadows.needsUpdate=ne,G.spotLights.needsUpdate=ne,G.spotLightShadows.needsUpdate=ne,G.rectAreaLights.needsUpdate=ne,G.hemisphereLights.needsUpdate=ne}(Jv,nk),Et&&se.fog&&qt.refreshFogUniforms(Jv,Et),qt.refreshMaterialUniforms(Jv,se,C,N,K),_u.upload(ie,kn.uniformsList,Jv,pe)),se.isShaderMaterial&&!0===se.uniformsNeedUpdate&&(_u.upload(ie,kn.uniformsList,Jv,pe),se.uniformsNeedUpdate=!1),se.isSpriteMaterial&&ls.setValue(ie,"center",ge.center),ls.setValue(ie,"modelViewMatrix",ge.modelViewMatrix),ls.setValue(ie,"normalMatrix",ge.normalMatrix),ls.setValue(ie,"modelMatrix",ge.matrixWorld),pl}(G,ne,ce,se,ge);ye.setMaterial(se,Bt);let wt=ce.index;const Sn=ce.attributes.position;if(null===wt){if(void 0===Sn||0===Sn.count)return}else if(0===wt.count)return;let _n=1;!0===se.wireframe&&(wt=Ae.getWireframeAttribute(ce),_n=2),Ce.setup(ge,se,yt,ce,wt);let vn,Vi=qe;null!==wt&&(vn=Ne.get(wt),Vi=dt,Vi.setIndex(vn));const Fh=null!==wt?wt.count:Sn.count,km=ce.drawRange.start*_n,Om=ce.drawRange.count*_n,fl=null!==Et?Et.start*_n:0,kn=null!==Et?Et.count*_n:1/0,Pm=Math.max(km,fl),dr=Math.min(Fh,km+Om,fl+kn)-1,pl=Math.max(0,dr-Pm+1);if(0!==pl){if(ge.isMesh)!0===se.wireframe?(ye.setLineWidth(se.wireframeLinewidth*_e()),Vi.setMode(1)):Vi.setMode(4);else if(ge.isLine){let Vu=se.linewidth;void 0===Vu&&(Vu=1),ye.setLineWidth(Vu*_e()),Vi.setMode(ge.isLineSegments?1:ge.isLineLoop?2:3)}else ge.isPoints?Vi.setMode(0):ge.isSprite&&Vi.setMode(4);if(ge.isInstancedMesh)Vi.renderInstances(Pm,pl,ge.count);else if(ce.isInstancedBufferGeometry){const Vu=Math.min(ce.instanceCount,ce._maxInstanceCount);Vi.renderInstances(Pm,pl,Vu)}else Vi.render(Pm,pl)}},this.compile=function(G,ne){h=W.get(G),h.init(),p.push(h),G.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ne.layers)&&(h.pushLight(ce),ce.castShadow&&h.pushShadow(ce))}),h.setupLights(m.physicallyCorrectLights),G.traverse(function(ce){const se=ce.material;if(se)if(Array.isArray(se))for(let ge=0;ge<se.length;ge++)Mc(se[ge],G,ce);else Mc(se,G,ce)}),p.pop(),h=null};let ht=null;function Nt(){fn.stop()}function Qn(){fn.start()}const fn=new eW;function mo(G,ne,ce,se){if(!1===G.visible)return;if(G.layers.test(ne.layers))if(G.isGroup)ce=G.renderOrder;else if(G.isLOD)!0===G.autoUpdate&&G.update(ne);else if(G.isLight)h.pushLight(G),G.castShadow&&h.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||P.intersectsSprite(G)){se&&we.setFromMatrixPosition(G.matrixWorld).applyMatrix4(J);const Bt=$e.update(G),yt=G.material;yt.visible&&d.push(G,Bt,yt,ce,we.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(G.isSkinnedMesh&&G.skeleton.frame!==vt.render.frame&&(G.skeleton.update(),G.skeleton.frame=vt.render.frame),!G.frustumCulled||P.intersectsObject(G))){se&&we.setFromMatrixPosition(G.matrixWorld).applyMatrix4(J);const Bt=$e.update(G),yt=G.material;if(Array.isArray(yt)){const wt=Bt.groups;for(let Sn=0,_n=wt.length;Sn<_n;Sn++){const vn=wt[Sn],Vi=yt[vn.materialIndex];Vi&&Vi.visible&&d.push(G,Bt,Vi,ce,we.z,vn)}}else yt.visible&&d.push(G,Bt,yt,ce,we.z,null)}const Et=G.children;for(let Bt=0,yt=Et.length;Bt<yt;Bt++)mo(Et[Bt],ne,ce,se)}function go(G,ne,ce,se){const ge=G.opaque,Et=G.transmissive,Bt=G.transparent;h.setupLightsView(ce),Et.length>0&&function Kv(G,ne,ce){const se=et.isWebGL2;null===K&&(K=new ao(1,1,{generateMipmaps:!0,type:null!==U.convert(Ep)?Ep:Kd,minFilter:ou,samples:se&&!0===s?4:0})),m.getDrawingBufferSize(j),se?K.setSize(j.x,j.y):K.setSize(zx(j.x),zx(j.y));const ge=m.getRenderTarget();m.setRenderTarget(K),m.clear();const Et=m.toneMapping;m.toneMapping=0,Ph(G,ne,ce),m.toneMapping=Et,pe.updateMultisampleRenderTarget(K),pe.updateRenderTargetMipmap(K),m.setRenderTarget(ge)}(ge,ne,ce),se&&ye.viewport(w.copy(se)),ge.length>0&&Ph(ge,ne,ce),Et.length>0&&Ph(Et,ne,ce),Bt.length>0&&Ph(Bt,ne,ce),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Ph(G,ne,ce){const se=!0===ne.isScene?ne.overrideMaterial:null;for(let ge=0,Et=G.length;ge<Et;ge++){const Bt=G[ge],yt=Bt.object,wt=Bt.geometry,Sn=null===se?Bt.material:se,_n=Bt.group;yt.layers.test(ce.layers)&&Zv(yt,ne,ce,wt,Sn,_n)}}function Zv(G,ne,ce,se,ge,Et){G.onBeforeRender(m,ne,ce,se,ge,Et),G.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),ge.onBeforeRender(m,ne,ce,se,G,Et),!0===ge.transparent&&2===ge.side?(ge.side=1,ge.needsUpdate=!0,m.renderBufferDirect(ce,ne,se,ge,G,Et),ge.side=0,ge.needsUpdate=!0,m.renderBufferDirect(ce,ne,se,ge,G,Et),ge.side=2):m.renderBufferDirect(ce,ne,se,ge,G,Et),G.onAfterRender(m,ne,ce,se,ge,Et)}function Mc(G,ne,ce){!0!==ne.isScene&&(ne=fe);const se=ue.get(G),ge=h.state.lights,Bt=ge.state.version,yt=it.getParameters(G,ge.state,h.state.shadowsArray,ne,ce),wt=it.getProgramCacheKey(yt);let Sn=se.programs;se.environment=G.isMeshStandardMaterial?ne.environment:null,se.fog=ne.fog,se.envMap=(G.isMeshStandardMaterial?Ze:Te).get(G.envMap||se.environment),void 0===Sn&&(G.addEventListener("dispose",Se),Sn=new Map,se.programs=Sn);let _n=Sn.get(wt);if(void 0!==_n){if(se.currentProgram===_n&&se.lightsStateVersion===Bt)return Bu(G,yt),_n}else yt.uniforms=it.getUniforms(G),G.onBuild(ce,yt,m),G.onBeforeCompile(yt,m),_n=it.acquireProgram(yt,wt),Sn.set(wt,_n),se.uniforms=yt.uniforms;const vn=se.uniforms;(!G.isShaderMaterial&&!G.isRawShaderMaterial||!0===G.clipping)&&(vn.clippingPlanes=B.uniform),Bu(G,yt),se.needsLights=function zM(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&!0===G.lights}(G),se.lightsStateVersion=Bt,se.needsLights&&(vn.ambientLightColor.value=ge.state.ambient,vn.lightProbe.value=ge.state.probe,vn.directionalLights.value=ge.state.directional,vn.directionalLightShadows.value=ge.state.directionalShadow,vn.spotLights.value=ge.state.spot,vn.spotLightShadows.value=ge.state.spotShadow,vn.rectAreaLights.value=ge.state.rectArea,vn.ltc_1.value=ge.state.rectAreaLTC1,vn.ltc_2.value=ge.state.rectAreaLTC2,vn.pointLights.value=ge.state.point,vn.pointLightShadows.value=ge.state.pointShadow,vn.hemisphereLights.value=ge.state.hemi,vn.directionalShadowMap.value=ge.state.directionalShadowMap,vn.directionalShadowMatrix.value=ge.state.directionalShadowMatrix,vn.spotShadowMap.value=ge.state.spotShadowMap,vn.spotShadowMatrix.value=ge.state.spotShadowMatrix,vn.pointShadowMap.value=ge.state.pointShadowMap,vn.pointShadowMatrix.value=ge.state.pointShadowMatrix);const Vi=_n.getUniforms(),Fh=_u.seqWithValue(Vi.seq,vn);return se.currentProgram=_n,se.uniformsList=Fh,_n}function Bu(G,ne){const ce=ue.get(G);ce.outputEncoding=ne.outputEncoding,ce.instancing=ne.instancing,ce.skinning=ne.skinning,ce.morphTargets=ne.morphTargets,ce.morphNormals=ne.morphNormals,ce.morphColors=ne.morphColors,ce.morphTargetsCount=ne.morphTargetsCount,ce.numClippingPlanes=ne.numClippingPlanes,ce.numIntersection=ne.numClipIntersection,ce.vertexAlphas=ne.vertexAlphas,ce.vertexTangents=ne.vertexTangents,ce.toneMapping=ne.toneMapping}fn.setAnimationLoop(function Be(G){ht&&ht(G)}),"undefined"!=typeof self&&fn.setContext(self),this.setAnimationLoop=function(G){ht=G,Le.setAnimationLoop(G),null===G?fn.stop():fn.start()},Le.addEventListener("sessionstart",Nt),Le.addEventListener("sessionend",Qn),this.render=function(G,ne){if(void 0===ne||!0===ne.isCamera){if(!0!==g){if(!0===G.autoUpdate&&G.updateMatrixWorld(),null===ne.parent&&ne.updateMatrixWorld(),!0===Le.enabled&&!0===Le.isPresenting&&(!0===Le.cameraAutoUpdate&&Le.updateCamera(ne),ne=Le.getCamera()),!0===G.isScene&&G.onBeforeRender(m,G,ne,y),h=W.get(G,p.length),h.init(),p.push(h),J.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),P.setFromProjectionMatrix(J),q=this.localClippingEnabled,O=B.init(this.clippingPlanes,q,ne),d=xn.get(G,f.length),d.init(),f.push(d),mo(G,ne,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(L,Y),!0===O&&B.beginShadows(),le.render(h.state.shadowsArray,G,ne),!0===O&&B.endShadows(),!0===this.info.autoReset&&this.info.reset(),Me.render(d,G),h.setupLights(m.physicallyCorrectLights),ne.isArrayCamera){const se=ne.cameras;for(let ge=0,Et=se.length;ge<Et;ge++){const Bt=se[ge];go(d,G,Bt,Bt.viewport)}}else go(d,G,ne);null!==y&&(pe.updateMultisampleRenderTarget(y),pe.updateRenderTargetMipmap(y)),!0===G.isScene&&G.onAfterRender(m,G,ne),Ce.resetDefaultState(),b=-1,x=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(G,ne,ce){ue.get(G.texture).__webglTexture=ne,ue.get(G.depthTexture).__webglTexture=ce;const se=ue.get(G);se.__hasExternalTextures=!0,se.__hasExternalTextures&&(se.__autoAllocateDepthBuffer=void 0===ce,se.__autoAllocateDepthBuffer||!0===Pe.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),se.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,ne){const ce=ue.get(G);ce.__webglFramebuffer=ne,ce.__useDefaultFramebuffer=void 0===ne},this.setRenderTarget=function(G,ne=0,ce=0){y=G,_=ne,v=ce;let se=!0;if(G){const wt=ue.get(G);void 0!==wt.__useDefaultFramebuffer?(ye.bindFramebuffer(36160,null),se=!1):void 0===wt.__webglFramebuffer?pe.setupRenderTarget(G):wt.__hasExternalTextures&&pe.rebindTextures(G,ue.get(G.texture).__webglTexture,ue.get(G.depthTexture).__webglTexture)}let ge=null,Et=!1,Bt=!1;if(G){const wt=G.texture;(wt.isData3DTexture||wt.isDataArrayTexture)&&(Bt=!0);const Sn=ue.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(ge=Sn[ne],Et=!0):ge=et.isWebGL2&&G.samples>0&&!1===pe.useMultisampledRTT(G)?ue.get(G).__webglMultisampledFramebuffer:Sn,w.copy(G.viewport),E.copy(G.scissor),R=G.scissorTest}else w.copy(I).multiplyScalar(C).floor(),E.copy(z).multiplyScalar(C).floor(),R=D;if(ye.bindFramebuffer(36160,ge)&&et.drawBuffers&&se&&ye.drawBuffers(G,ge),ye.viewport(w),ye.scissor(E),ye.setScissorTest(R),Et){const wt=ue.get(G.texture);ie.framebufferTexture2D(36160,36064,34069+ne,wt.__webglTexture,ce)}else if(Bt){const wt=ue.get(G.texture);ie.framebufferTextureLayer(36160,36064,wt.__webglTexture,ce||0,ne||0)}b=-1},this.readRenderTargetPixels=function(G,ne,ce,se,ge,Et,Bt){if(!G||!G.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let yt=ue.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&void 0!==Bt&&(yt=yt[Bt]),yt){ye.bindFramebuffer(36160,yt);try{const wt=G.texture,Sn=wt.format,_n=wt.type;if(Sn!==Uo&&U.convert(Sn)!==ie.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const vn=_n===Ep&&(Pe.has("EXT_color_buffer_half_float")||et.isWebGL2&&Pe.has("EXT_color_buffer_float"));if(!(_n===Kd||U.convert(_n)===ie.getParameter(35738)||_n===au&&(et.isWebGL2||Pe.has("OES_texture_float")||Pe.has("WEBGL_color_buffer_float"))||vn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ne>=0&&ne<=G.width-se&&ce>=0&&ce<=G.height-ge&&ie.readPixels(ne,ce,se,ge,U.convert(Sn),U.convert(_n),Et)}finally{const wt=null!==y?ue.get(y).__webglFramebuffer:null;ye.bindFramebuffer(36160,wt)}}},this.copyFramebufferToTexture=function(G,ne,ce=0){if(!0!==ne.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const se=Math.pow(2,-ce),ge=Math.floor(ne.image.width*se),Et=Math.floor(ne.image.height*se);pe.setTexture2D(ne,0),ie.copyTexSubImage2D(3553,ce,0,0,G.x,G.y,ge,Et),ye.unbindTexture()},this.copyTextureToTexture=function(G,ne,ce,se=0){const ge=ne.image.width,Et=ne.image.height,Bt=U.convert(ce.format),yt=U.convert(ce.type);pe.setTexture2D(ce,0),ie.pixelStorei(37440,ce.flipY),ie.pixelStorei(37441,ce.premultiplyAlpha),ie.pixelStorei(3317,ce.unpackAlignment),ne.isDataTexture?ie.texSubImage2D(3553,se,G.x,G.y,ge,Et,Bt,yt,ne.image.data):ne.isCompressedTexture?ie.compressedTexSubImage2D(3553,se,G.x,G.y,ne.mipmaps[0].width,ne.mipmaps[0].height,Bt,ne.mipmaps[0].data):ie.texSubImage2D(3553,se,G.x,G.y,Bt,yt,ne.image),0===se&&ce.generateMipmaps&&ie.generateMipmap(3553),ye.unbindTexture()},this.copyTextureToTexture3D=function(G,ne,ce,se,ge=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Et=G.max.x-G.min.x+1,Bt=G.max.y-G.min.y+1,yt=G.max.z-G.min.z+1,wt=U.convert(se.format),Sn=U.convert(se.type);let _n;if(se.isData3DTexture)pe.setTexture3D(se,0),_n=32879;else{if(!se.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");pe.setTexture2DArray(se,0),_n=35866}ie.pixelStorei(37440,se.flipY),ie.pixelStorei(37441,se.premultiplyAlpha),ie.pixelStorei(3317,se.unpackAlignment);const vn=ie.getParameter(3314),Vi=ie.getParameter(32878),Fh=ie.getParameter(3316),km=ie.getParameter(3315),Om=ie.getParameter(32877),fl=ce.isCompressedTexture?ce.mipmaps[0]:ce.image;ie.pixelStorei(3314,fl.width),ie.pixelStorei(32878,fl.height),ie.pixelStorei(3316,G.min.x),ie.pixelStorei(3315,G.min.y),ie.pixelStorei(32877,G.min.z),ce.isDataTexture||ce.isData3DTexture?ie.texSubImage3D(_n,ge,ne.x,ne.y,ne.z,Et,Bt,yt,wt,Sn,fl.data):ce.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ie.compressedTexSubImage3D(_n,ge,ne.x,ne.y,ne.z,Et,Bt,yt,wt,fl.data)):ie.texSubImage3D(_n,ge,ne.x,ne.y,ne.z,Et,Bt,yt,wt,Sn,fl),ie.pixelStorei(3314,vn),ie.pixelStorei(32878,Vi),ie.pixelStorei(3316,Fh),ie.pixelStorei(3315,km),ie.pixelStorei(32877,Om),0===ge&&se.generateMipmaps&&ie.generateMipmap(_n),ye.unbindTexture()},this.initTexture=function(G){pe.setTexture2D(G,0),ye.unbindTexture()},this.resetState=function(){_=0,v=0,y=null,ye.reset(),Ce.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Bn.prototype.isWebGLRenderer=!0,class gEe extends Bn{}.prototype.isWebGL1Renderer=!0;class pw{constructor(t,e=25e-5){this.name="",this.color=new Fe(t),this.density=e}clone(){return new pw(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}pw.prototype.isFogExp2=!0;class mw{constructor(t,e=1,i=1e3){this.name="",this.color=new Fe(t),this.near=e,this.far=i}clone(){return new mw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}mw.prototype.isFog=!0;class gw extends Dn{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}gw.prototype.isScene=!0;class dh{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Y_,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=oo()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=oo()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=oo()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}dh.prototype.isInterleavedBuffer=!0;const bs=new V;class vu{constructor(t,e,i,r=!1){this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)bs.fromBufferAttribute(this,e),bs.applyMatrix4(t),this.setXYZ(e,bs.x,bs.y,bs.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)bs.fromBufferAttribute(this,e),bs.applyNormalMatrix(t),this.setXYZ(e,bs.x,bs.y,bs.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)bs.fromBufferAttribute(this,e),bs.transformDirection(t),this.setXYZ(e,bs.x,bs.y,bs.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,s){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new Gn(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new vu(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}vu.prototype.isInterleavedBufferAttribute=!0;class yR extends Ci{constructor(t){super(),this.type="SpriteMaterial",this.color=new Fe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let Qp;yR.prototype.isSpriteMaterial=!0;const sv=new V,Jp=new V,em=new V,tm=new me,ov=new me,OW=new lt,_w=new V,av=new V,vw=new V,PW=new me,bR=new me,LW=new me;function yw(n,t,e,i,r,s){tm.subVectors(n,e).addScalar(.5).multiply(i),void 0!==r?(ov.x=s*tm.x-r*tm.y,ov.y=r*tm.x+s*tm.y):ov.copy(tm),n.copy(t),n.x+=ov.x,n.y+=ov.y,n.applyMatrix4(OW)}(class FW extends Dn{constructor(t){if(super(),this.type="Sprite",void 0===Qp){Qp=new kt;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new dh(e,5);Qp.setIndex([0,1,2,0,2,3]),Qp.setAttribute("position",new vu(i,3,0,!1)),Qp.setAttribute("uv",new vu(i,2,3,!1))}this.geometry=Qp,this.material=void 0!==t?t:new yR,this.center=new me(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Jp.setFromMatrixScale(this.matrixWorld),OW.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),em.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Jp.multiplyScalar(-em.z);const i=this.material.rotation;let r,s;0!==i&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;yw(_w.set(-.5,-.5,0),em,o,Jp,r,s),yw(av.set(.5,-.5,0),em,o,Jp,r,s),yw(vw.set(.5,.5,0),em,o,Jp,r,s),PW.set(0,0),bR.set(1,0),LW.set(1,1);let a=t.ray.intersectTriangle(_w,av,vw,!1,sv);if(null===a&&(yw(av.set(-.5,.5,0),em,o,Jp,r,s),bR.set(0,1),a=t.ray.intersectTriangle(_w,vw,av,!1,sv),null===a))return;const l=t.ray.origin.distanceTo(sv);l<t.near||l>t.far||e.push({distance:l,point:sv.clone(),uv:ar.getUV(sv,_w,av,vw,PW,bR,LW,new me),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}).prototype.isSprite=!0;const BW=new V,VW=new Nn,HW=new Nn,vEe=new V,UW=new lt;class xw extends Xi{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new lt,this.bindMatrixInverse=new lt}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Nn,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const i=this.skeleton,r=this.geometry;VW.fromBufferAttribute(r.attributes.skinIndex,t),HW.fromBufferAttribute(r.attributes.skinWeight,t),BW.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const o=HW.getComponent(s);if(0!==o){const a=VW.getComponent(s);UW.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(vEe.copy(BW).applyMatrix4(UW),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}xw.prototype.isSkinnedMesh=!0;class ww extends Dn{constructor(){super(),this.type="Bone"}}ww.prototype.isBone=!0;class nm extends ns{constructor(t=null,e=1,i=1,r,s,o,a,l,c=or,u=or,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}nm.prototype.isDataTexture=!0;const zW=new lt,yEe=new lt;class Mw{constructor(t=[],e=[]){this.uuid=oo(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new lt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new lt;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=t.length;s<o;s++)zW.multiplyMatrices(t[s]?t[s].matrixWorld:yEe,e[s]),zW.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Mw(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=N4(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new nm(e,t,t,Uo,au);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const r=this.bones[e];if(r.name===t)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){const s=t.bones[i];let o=e[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new ww),this.bones.push(o),this.boneInverses.push((new lt).fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let r=0,s=e.length;r<s;r++)t.bones.push(e[r].uuid),t.boneInverses.push(i[r].toArray());return t}}class im extends Gn{constructor(t,e,i,r=1){"number"==typeof i&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,i),this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}im.prototype.isInstancedBufferAttribute=!0;const GW=new lt,WW=new lt,Cw=[],lv=new Xi;(class jW extends Xi{constructor(t,e,i){super(t,e),this.instanceMatrix=new im(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const i=this.matrixWorld,r=this.count;if(lv.geometry=this.geometry,lv.material=this.material,void 0!==lv.material)for(let s=0;s<r;s++){this.getMatrixAt(s,GW),WW.multiplyMatrices(i,GW),lv.matrixWorld=WW,lv.raycast(t,Cw);for(let o=0,a=Cw.length;o<a;o++){const l=Cw[o];l.instanceId=s,l.object=this,e.push(l)}Cw.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new im(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Nr extends Ci{constructor(t){super(),this.type="LineBasicMaterial",this.color=new Fe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Nr.prototype.isLineBasicMaterial=!0;const $W=new V,qW=new V,YW=new lt,xR=new oh,Sw=new du;class yu extends Dn{constructor(t=new kt,e=new Nr){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,i=[0];for(let r=1,s=e.count;r<s;r++)$W.fromBufferAttribute(e,r-1),qW.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=$W.distanceTo(qW);t.setAttribute("lineDistance",new ut(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const i=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Sw.copy(i.boundingSphere),Sw.applyMatrix4(r),Sw.radius+=s,!1===t.ray.intersectsSphere(Sw))return;YW.copy(r).invert(),xR.copy(t.ray).applyMatrix4(YW);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new V,u=new V,d=new V,h=new V,f=this.isLineSegments?2:1;if(i.isBufferGeometry){const p=i.index,g=i.attributes.position;if(null!==p)for(let y=Math.max(0,o.start),b=Math.min(p.count,o.start+o.count)-1;y<b;y+=f){const x=p.getX(y),w=p.getX(y+1);if(c.fromBufferAttribute(g,x),u.fromBufferAttribute(g,w),xR.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const R=t.ray.origin.distanceTo(h);R<t.near||R>t.far||e.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,o.start),b=Math.min(g.count,o.start+o.count)-1;y<b;y+=f){if(c.fromBufferAttribute(g,y),u.fromBufferAttribute(g,y+1),xR.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const w=t.ray.origin.distanceTo(h);w<t.near||w>t.far||e.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}yu.prototype.isLine=!0;const XW=new V,KW=new V;class hh extends yu{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,i=[];for(let r=0,s=e.count;r<s;r+=2)XW.fromBufferAttribute(e,r),KW.fromBufferAttribute(e,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+XW.distanceTo(KW);t.setAttribute("lineDistance",new ut(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}hh.prototype.isLineSegments=!0;class wR extends yu{constructor(t,e){super(t,e),this.type="LineLoop"}}wR.prototype.isLineLoop=!0;class Ew extends Ci{constructor(t){super(),this.type="PointsMaterial",this.color=new Fe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}Ew.prototype.isPointsMaterial=!0;const ZW=new lt,MR=new oh,Tw=new du,Aw=new V;class CR extends Dn{constructor(t=new kt,e=new Ew){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Tw.copy(i.boundingSphere),Tw.applyMatrix4(r),Tw.radius+=s,!1===t.ray.intersectsSphere(Tw))return;ZW.copy(r).invert(),MR.copy(t.ray).applyMatrix4(ZW);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(i.isBufferGeometry){const c=i.index,d=i.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);p<m;p++){const g=c.getX(p);Aw.fromBufferAttribute(d,g),QW(Aw,g,l,r,t,e,this)}else for(let p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);p<m;p++)Aw.fromBufferAttribute(d,p),QW(Aw,p,l,r,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function QW(n,t,e,i,r,s,o){const a=MR.distanceSqToPoint(n);if(a<e){const l=new V;MR.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}CR.prototype.isPoints=!0,class bEe extends ns{constructor(t,e,i,r,s,o,a,l,c){super(t,e,i,r,s,o,a,l,c),this.minFilter=void 0!==o?o:Fi,this.magFilter=void 0!==s?s:Fi,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function d(){u.needsUpdate=!0,t.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t==0&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class xEe extends ns{constructor(t,e,i){super({width:t,height:e}),this.format=i,this.magFilter=or,this.minFilter=or,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class JW extends ns{constructor(t,e,i,r,s,o,a,l,c,u,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class wEe extends ns{constructor(t,e,i,r,s,o,a,l,c){super(t,e,i,r,s,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class Go{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)i=this.getPoint(o/t),s+=i.distanceTo(r),e.push(s),r=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let r=0;const s=i.length;let o;o=e||t*i[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=e||(o.isVector2?new me:new V);return l.copy(a).sub(o).normalize(),l}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new V,r=[],s=[],o=[],a=new V,l=new lt;for(let f=0;f<=t;f++)r[f]=this.getTangentAt(f/t,new V);s[0]=new V,o[0]=new V;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=t;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Yi(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(!0===e){let f=Math.acos(Yi(s[0].dot(s[t]),-1,1));f/=t,r[0].dot(a.crossVectors(s[0],s[t]))>0&&(f=-f);for(let p=1;p<=t;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Dw extends Go{constructor(t=0,e=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(t,e){const i=e||new me,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+t*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return i.set(l,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Dw.prototype.isEllipseCurve=!0;class ej extends Dw{constructor(t,e,i,r,s,o){super(t,e,i,i,r,s,o),this.type="ArcCurve"}}function SR(){let n=0,t=0,e=0,i=0;function r(s,o,a,l){n=s,t=a,e=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,r(o,a,h,f)},calc:function(s){const o=s*s;return n+t*s+e*o+i*(o*s)}}}ej.prototype.isArcCurve=!0;const Rw=new V,ER=new SR,TR=new SR,AR=new SR;class tj extends Go{constructor(t=[],e=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=r}getPoint(t,e=new V){const i=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(Rw.subVectors(r[0],r[1]).add(r[0]),c=Rw);const d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Rw.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Rw),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(d),f),m=Math.pow(d.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(u),f);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),ER.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,p,m,g),TR.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,p,m,g),AR.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,p,m,g)}else"catmullrom"===this.curveType&&(ER.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),TR.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),AR.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(ER.calc(l),TR.calc(l),AR.calc(l)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push((new V).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function nj(n,t,e,i,r){const s=.5*(i-t),o=.5*(r-e),a=n*n;return(2*e-2*i+s+o)*(n*a)+(-3*e+3*i-2*s-o)*a+s*n+e}function cv(n,t,e,i){return function MEe(n,t){const e=1-n;return e*e*t}(n,t)+function CEe(n,t){return 2*(1-n)*n*t}(n,e)+function SEe(n,t){return n*n*t}(n,i)}function uv(n,t,e,i,r){return function EEe(n,t){const e=1-n;return e*e*e*t}(n,t)+function TEe(n,t){const e=1-n;return 3*e*e*n*t}(n,e)+function AEe(n,t){return 3*(1-n)*n*n*t}(n,i)+function DEe(n,t){return n*n*n*t}(n,r)}tj.prototype.isCatmullRomCurve3=!0;class DR extends Go{constructor(t=new me,e=new me,i=new me,r=new me){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new me){const i=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(uv(t,r.x,s.x,o.x,a.x),uv(t,r.y,s.y,o.y,a.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}DR.prototype.isCubicBezierCurve=!0;class ij extends Go{constructor(t=new V,e=new V,i=new V,r=new V){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new V){const i=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(uv(t,r.x,s.x,o.x,a.x),uv(t,r.y,s.y,o.y,a.y),uv(t,r.z,s.z,o.z,a.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}ij.prototype.isCubicBezierCurve3=!0;class Iw extends Go{constructor(t=new me,e=new me){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new me){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const i=e||new me;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Iw.prototype.isLineCurve=!0;class RR extends Go{constructor(t=new me,e=new me,i=new me){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new me){const i=e,r=this.v0,s=this.v1,o=this.v2;return i.set(cv(t,r.x,s.x,o.x),cv(t,r.y,s.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}RR.prototype.isQuadraticBezierCurve=!0;class IR extends Go{constructor(t=new V,e=new V,i=new V){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new V){const i=e,r=this.v0,s=this.v1,o=this.v2;return i.set(cv(t,r.x,s.x,o.x),cv(t,r.y,s.y,o.y),cv(t,r.z,s.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}IR.prototype.isQuadraticBezierCurve3=!0;class kR extends Go{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new me){const i=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(nj(a,l.x,c.x,u.x,d.x),nj(a,l.y,c.y,u.y,d.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push((new me).fromArray(r))}return this}}kR.prototype.isSplineCurve=!0;var OR=Object.freeze({__proto__:null,ArcCurve:ej,CatmullRomCurve3:tj,CubicBezierCurve:DR,CubicBezierCurve3:ij,EllipseCurve:Dw,LineCurve:Iw,LineCurve3:class REe extends Go{constructor(t=new V,e=new V){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new V){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:RR,QuadraticBezierCurve3:IR,SplineCurve:kR});class IEe extends Go{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Iw(e,t))}getPoint(t,e){const i=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,r=this.curves.length;i<r;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(e.push(u),i=u)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const r=t.curves[e];this.curves.push((new OR[r.type]).fromJSON(r))}return this}}class dv extends IEe{constructor(t){super(),this.type="Path",this.currentPoint=new me,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new Iw(this.currentPoint.clone(),new me(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,r){const s=new RR(this.currentPoint.clone(),new me(t,e),new me(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(t,e,i,r,s,o){const a=new DR(this.currentPoint.clone(),new me(t,e),new me(i,r),new me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new kR(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,i,r,s,o),this}absarc(t,e,i,r,s,o){return this.absellipse(t,e,i,i,r,s,o),this}ellipse(t,e,i,r,s,o,a,l){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,i,r,s,o,a,l),this}absellipse(t,e,i,r,s,o,a,l){const c=new Dw(t,e,i,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}new V,new V,new V,new ar;class il extends dv{constructor(t){super(t),this.uuid=oo(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,r=this.holes.length;i<r;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const r=t.holes[e];this.holes.push((new dv).fromJSON(r))}return this}}function sj(n,t,e,i,r){let s,o;if(r===function YEe(n,t,e,i){let r=0;for(let s=t,o=e-i;s<e;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,t,e,i)>0)for(s=t;s<e;s+=i)o=lj(s,n[s],n[s+1],o);else for(s=e-i;s>=t;s-=i)o=lj(s,n[s],n[s+1],o);return o&&Vw(o,o.next)&&(mv(o),o=o.next),o}function xu(n,t){if(!n)return n;t||(t=n);let i,e=n;do{if(i=!1,e.steiner||!Vw(e,e.next)&&0!==Si(e.prev,e,e.next))e=e.next;else{if(mv(e),e=t=e.prev,e===e.next)break;i=!0}}while(i||e!==t);return t}function fv(n,t,e,i,r,s,o){if(!n)return;!o&&s&&function zEe(n,t,e,i){let r=n;do{null===r.z&&(r.z=LR(r.x,r.y,t,e,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function GEe(n){let t,e,i,r,s,o,a,l,c=1;do{for(e=n,n=null,s=null,o=0;e;){for(o++,i=e,a=0,t=0;t<c&&(a++,i=i.nextZ,i);t++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||e.z<=i.z)?(r=e,e=e.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;e=i}s.nextZ=null,c*=2}while(o>1)}(r)}(n,i,r,s);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,s?PEe(n,i,r,s):OEe(n))t.push(l.i/e),t.push(n.i/e),t.push(c.i/e),mv(n),n=c.next,a=c.next;else if((n=c)===a){o?1===o?fv(n=LEe(xu(n),t,e),t,e,i,r,s,2):2===o&&FEe(n,t,e,i,r,s):fv(xu(n),t,e,i,r,s,1);break}}function OEe(n){const t=n.prev,e=n,i=n.next;if(Si(t,e,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(sm(t.x,t.y,e.x,e.y,i.x,i.y,r.x,r.y)&&Si(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function PEe(n,t,e,i){const r=n.prev,s=n,o=n.next;if(Si(r,s,o)>=0)return!1;const c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,d=LR(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,t,e,i),h=LR(c,u,t,e,i);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==n.prev&&f!==n.next&&sm(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Si(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&sm(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Si(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&sm(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Si(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==n.prev&&p!==n.next&&sm(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Si(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function LEe(n,t,e){let i=n;do{const r=i.prev,s=i.next.next;!Vw(r,s)&&oj(r,i,i.next,s)&&pv(r,s)&&pv(s,r)&&(t.push(r.i/e),t.push(i.i/e),t.push(s.i/e),mv(i),mv(i.next),i=n=s),i=i.next}while(i!==n);return xu(i)}function FEe(n,t,e,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&jEe(o,a)){let l=aj(o,a);return o=xu(o,o.next),l=xu(l,l.next),fv(o,t,e,i,r,s),void fv(l,t,e,i,r,s)}a=a.next}o=o.next}while(o!==n)}function BEe(n,t){return n.x-t.x}function VEe(n,t){if(t=function HEe(n,t){let e=t;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){const h=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(h<=i&&h>s){if(s=h,h===i){if(r===e.y)return e;if(r===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let d,u=1/0;e=o;do{i>=e.x&&e.x>=l&&i!==e.x&&sm(r<c?i:s,r,l,c,r<c?s:i,r,e.x,e.y)&&(d=Math.abs(r-e.y)/(i-e.x),pv(e,n)&&(d<u||d===u&&(e.x>o.x||e.x===o.x&&UEe(o,e)))&&(o=e,u=d)),e=e.next}while(e!==a);return o}(n,t),t){const e=aj(t,n);xu(t,t.next),xu(e,e.next)}}function UEe(n,t){return Si(n.prev,n,t.prev)<0&&Si(t.next,n,n.next)<0}function LR(n,t,e,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-e)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function WEe(n){let t=n,e=n;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==n);return e}function sm(n,t,e,i,r,s,o,a){return(r-o)*(t-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(e-o)*(t-a)>=0&&(e-o)*(s-a)-(r-o)*(i-a)>=0}function jEe(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function $Ee(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&oj(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}(n,t)&&(pv(n,t)&&pv(t,n)&&function qEe(n,t){let e=n,i=!1;const r=(n.x+t.x)/2,s=(n.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next}while(e!==n);return i}(n,t)&&(Si(n.prev,n,t.prev)||Si(n,t.prev,t))||Vw(n,t)&&Si(n.prev,n,n.next)>0&&Si(t.prev,t,t.next)>0)}function Si(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Vw(n,t){return n.x===t.x&&n.y===t.y}function oj(n,t,e,i){const r=Uw(Si(n,t,e)),s=Uw(Si(n,t,i)),o=Uw(Si(e,i,n)),a=Uw(Si(e,i,t));return!!(r!==s&&o!==a||0===r&&Hw(n,e,t)||0===s&&Hw(n,i,t)||0===o&&Hw(e,n,i)||0===a&&Hw(e,t,i))}function Hw(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Uw(n){return n>0?1:n<0?-1:0}function pv(n,t){return Si(n.prev,n,n.next)<0?Si(n,t,n.next)>=0&&Si(n,n.prev,t)>=0:Si(n,t,n.prev)<0||Si(n,n.next,t)<0}function aj(n,t){const e=new FR(n.i,n.x,n.y),i=new FR(t.i,t.x,t.y),r=n.next,s=t.prev;return n.next=t,t.prev=n,e.next=r,r.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function lj(n,t,e,i){const r=new FR(n,t,e);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function mv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function FR(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class uc{static area(t){const e=t.length;let i=0;for(let r=e-1,s=0;s<e;r=s++)i+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*i}static isClockWise(t){return uc.area(t)<0}static triangulateShape(t,e){const i=[],r=[],s=[];cj(t),uj(i,t);let o=t.length;e.forEach(cj);for(let l=0;l<e.length;l++)r.push(o),o+=e[l].length,uj(i,e[l]);const a=function(n,t,e=2){const i=t&&t.length,r=i?t[0]*e:n.length;let s=sj(n,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,f;if(i&&(s=function NEe(n,t,e,i){const r=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*i,l=s<o-1?t[s+1]*i:n.length,c=sj(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(WEe(c));for(r.sort(BEe),s=0;s<r.length;s++)VEe(r[s],e),e=xu(e,e.next);return e}(n,t,s,e)),n.length>80*e){a=c=n[0],l=u=n[1];for(let p=e;p<r;p+=e)d=n[p],h=n[p+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return fv(s,o,e,a,l,f),o}(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function cj(n){const t=n.length;t>2&&n[t-1].equals(n[0])&&n.pop()}function uj(n,t){for(let e=0;e<t.length;e++)n.push(t[e].x),n.push(t[e].y)}class dc extends kt{constructor(t=new il([new me(.5,.5),new me(-.5,.5),new me(-.5,-.5),new me(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,r=[],s=[];for(let a=0,l=t.length;a<l;a++)o(t[a]);function o(a){const l=[],c=void 0!==e.curveSegments?e.curveSegments:12,u=void 0!==e.steps?e.steps:1;let d=void 0!==e.depth?e.depth:1,h=void 0===e.bevelEnabled||e.bevelEnabled,f=void 0!==e.bevelThickness?e.bevelThickness:.2,p=void 0!==e.bevelSize?e.bevelSize:f-.1,m=void 0!==e.bevelOffset?e.bevelOffset:0,g=void 0!==e.bevelSegments?e.bevelSegments:3;const _=e.extrudePath,v=void 0!==e.UVGenerator?e.UVGenerator:XEe;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=e.amount);let y,x,w,E,R,b=!1;_&&(y=_.getSpacedPoints(u),b=!0,h=!1,x=_.computeFrenetFrames(u,!1),w=new V,E=new V,R=new V),h||(g=0,f=0,p=0,m=0);const F=a.extractPoints(c);let N=F.shape;const C=F.holes;if(!uc.isClockWise(N)){N=N.reverse();for(let ue=0,pe=C.length;ue<pe;ue++){const Te=C[ue];uc.isClockWise(Te)&&(C[ue]=Te.reverse())}}const Y=uc.triangulateShape(N,C),I=N;for(let ue=0,pe=C.length;ue<pe;ue++)N=N.concat(C[ue]);function z(ue,pe,Te){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().multiplyScalar(Te).add(ue)}const D=N.length,P=Y.length;function O(ue,pe,Te){let Ze,Ne,Ae;const $e=ue.x-pe.x,it=ue.y-pe.y,qt=Te.x-ue.x,xn=Te.y-ue.y,W=$e*$e+it*it;if(Math.abs($e*xn-it*qt)>Number.EPSILON){const le=Math.sqrt(W),Me=Math.sqrt(qt*qt+xn*xn),Ue=pe.x-it/le,qe=pe.y+$e/le,Ce=((Te.x-xn/Me-Ue)*xn-(Te.y+qt/Me-qe)*qt)/($e*xn-it*qt);Ze=Ue+$e*Ce-ue.x,Ne=qe+it*Ce-ue.y;const nt=Ze*Ze+Ne*Ne;if(nt<=2)return new me(Ze,Ne);Ae=Math.sqrt(nt/2)}else{let le=!1;$e>Number.EPSILON?qt>Number.EPSILON&&(le=!0):$e<-Number.EPSILON?qt<-Number.EPSILON&&(le=!0):Math.sign(it)===Math.sign(xn)&&(le=!0),le?(Ze=-it,Ne=$e,Ae=Math.sqrt(W)):(Ze=$e,Ne=it,Ae=Math.sqrt(W/2))}return new me(Ze/Ae,Ne/Ae)}const q=[];for(let ue=0,pe=I.length,Te=pe-1,Ze=ue+1;ue<pe;ue++,Te++,Ze++)Te===pe&&(Te=0),Ze===pe&&(Ze=0),q[ue]=O(I[ue],I[Te],I[Ze]);const K=[];let J,j=q.concat();for(let ue=0,pe=C.length;ue<pe;ue++){const Te=C[ue];J=[];for(let Ze=0,Ne=Te.length,Ae=Ne-1,$e=Ze+1;Ze<Ne;Ze++,Ae++,$e++)Ae===Ne&&(Ae=0),$e===Ne&&($e=0),J[Ze]=O(Te[Ze],Te[Ae],Te[$e]);K.push(J),j=j.concat(J)}for(let ue=0;ue<g;ue++){const pe=ue/g,Te=f*Math.cos(pe*Math.PI/2),Ze=p*Math.sin(pe*Math.PI/2)+m;for(let Ne=0,Ae=I.length;Ne<Ae;Ne++){const $e=z(I[Ne],q[Ne],Ze);Re($e.x,$e.y,-Te)}for(let Ne=0,Ae=C.length;Ne<Ae;Ne++){const $e=C[Ne];J=K[Ne];for(let it=0,qt=$e.length;it<qt;it++){const xn=z($e[it],J[it],Ze);Re(xn.x,xn.y,-Te)}}}const we=p+m;for(let ue=0;ue<D;ue++){const pe=h?z(N[ue],j[ue],we):N[ue];b?(E.copy(x.normals[0]).multiplyScalar(pe.x),w.copy(x.binormals[0]).multiplyScalar(pe.y),R.copy(y[0]).add(E).add(w),Re(R.x,R.y,R.z)):Re(pe.x,pe.y,0)}for(let ue=1;ue<=u;ue++)for(let pe=0;pe<D;pe++){const Te=h?z(N[pe],j[pe],we):N[pe];b?(E.copy(x.normals[ue]).multiplyScalar(Te.x),w.copy(x.binormals[ue]).multiplyScalar(Te.y),R.copy(y[ue]).add(E).add(w),Re(R.x,R.y,R.z)):Re(Te.x,Te.y,d/u*ue)}for(let ue=g-1;ue>=0;ue--){const pe=ue/g,Te=f*Math.cos(pe*Math.PI/2),Ze=p*Math.sin(pe*Math.PI/2)+m;for(let Ne=0,Ae=I.length;Ne<Ae;Ne++){const $e=z(I[Ne],q[Ne],Ze);Re($e.x,$e.y,d+Te)}for(let Ne=0,Ae=C.length;Ne<Ae;Ne++){const $e=C[Ne];J=K[Ne];for(let it=0,qt=$e.length;it<qt;it++){const xn=z($e[it],J[it],Ze);b?Re(xn.x,xn.y+y[u-1].y,y[u-1].x+Te):Re(xn.x,xn.y,d+Te)}}}function ie(ue,pe){let Te=ue.length;for(;--Te>=0;){const Ze=Te;let Ne=Te-1;Ne<0&&(Ne=ue.length-1);for(let Ae=0,$e=u+2*g;Ae<$e;Ae++){const it=D*Ae,qt=D*(Ae+1);et(pe+Ze+it,pe+Ne+it,pe+Ne+qt,pe+Ze+qt)}}}function Re(ue,pe,Te){l.push(ue),l.push(pe),l.push(Te)}function Pe(ue,pe,Te){ye(ue),ye(pe),ye(Te);const Ze=r.length/3,Ne=v.generateTopUV(i,r,Ze-3,Ze-2,Ze-1);vt(Ne[0]),vt(Ne[1]),vt(Ne[2])}function et(ue,pe,Te,Ze){ye(ue),ye(pe),ye(Ze),ye(pe),ye(Te),ye(Ze);const Ne=r.length/3,Ae=v.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);vt(Ae[0]),vt(Ae[1]),vt(Ae[3]),vt(Ae[1]),vt(Ae[2]),vt(Ae[3])}function ye(ue){r.push(l[3*ue+0]),r.push(l[3*ue+1]),r.push(l[3*ue+2])}function vt(ue){s.push(ue.x),s.push(ue.y)}(function fe(){const ue=r.length/3;if(h){let pe=0,Te=D*pe;for(let Ze=0;Ze<P;Ze++){const Ne=Y[Ze];Pe(Ne[2]+Te,Ne[1]+Te,Ne[0]+Te)}pe=u+2*g,Te=D*pe;for(let Ze=0;Ze<P;Ze++){const Ne=Y[Ze];Pe(Ne[0]+Te,Ne[1]+Te,Ne[2]+Te)}}else{for(let pe=0;pe<P;pe++){const Te=Y[pe];Pe(Te[2],Te[1],Te[0])}for(let pe=0;pe<P;pe++){const Te=Y[pe];Pe(Te[0]+D*u,Te[1]+D*u,Te[2]+D*u)}}i.addGroup(ue,r.length/3-ue,0)})(),function _e(){const ue=r.length/3;let pe=0;ie(I,pe),pe+=I.length;for(let Te=0,Ze=C.length;Te<Ze;Te++){const Ne=C[Te];ie(Ne,pe),pe+=Ne.length}i.addGroup(ue,r.length/3-ue,1)}()}this.setAttribute("position",new ut(r,3)),this.setAttribute("uv",new ut(s,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function KEe(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)e.shapes.push(n[i].uuid);else e.shapes.push(n.uuid);return void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const i=[];for(let s=0,o=t.shapes.length;s<o;s++)i.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new OR[r.type]).fromJSON(r)),new dc(i,t.options)}}const XEe={generateTopUV:function(n,t,e,i,r){const a=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new me(t[3*e],t[3*e+1]),new me(a,l),new me(c,u)]},generateSideWallUV:function(n,t,e,i,r,s){const o=t[3*e],a=t[3*e+1],l=t[3*e+2],c=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*s],g=t[3*s+1],_=t[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new me(o,1-l),new me(c,1-d),new me(h,1-p),new me(m,1-_)]:[new me(a,1-l),new me(u,1-d),new me(f,1-p),new me(g,1-_)]}};class _v extends kt{constructor(t=new il([new me(0,.5),new me(-.5,-.5),new me(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],r=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(t))c(t);else for(let u=0;u<t.length;u++)c(t[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const d=r.length/3,h=u.extractPoints(e);let f=h.shape;const p=h.holes;!1===uc.isClockWise(f)&&(f=f.reverse());for(let g=0,_=p.length;g<_;g++){const v=p[g];!0===uc.isClockWise(v)&&(p[g]=v.reverse())}const m=uc.triangulateShape(f,p);for(let g=0,_=p.length;g<_;g++)f=f.concat(p[g]);for(let g=0,_=f.length;g<_;g++){const v=f[g];r.push(v.x,v.y,0),s.push(0,0,1),o.push(v.x,v.y)}for(let g=0,_=m.length;g<_;g++){const v=m[g];i.push(v[0]+d,v[1]+d,v[2]+d),l+=3}}this.setIndex(i),this.setAttribute("position",new ut(r,3)),this.setAttribute("normal",new ut(s,3)),this.setAttribute("uv",new ut(o,2))}toJSON(){const t=super.toJSON();return function ZEe(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e<i;e++)t.shapes.push(n[e].uuid);else t.shapes.push(n.uuid);return t}(this.parameters.shapes,t)}static fromJSON(t,e){const i=[];for(let r=0,s=t.shapes.length;r<s;r++)i.push(e[t.shapes[r]]);return new _v(i,t.curveSegments)}}class pj extends Ci{constructor(t){super(),this.type="ShadowMaterial",this.color=new Fe(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}pj.prototype.isShadowMaterial=!0;class mj extends wa{constructor(t){super(t),this.type="RawShaderMaterial"}}mj.prototype.isRawShaderMaterial=!0;class om extends Ci{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}om.prototype.isMeshStandardMaterial=!0;class wu extends om{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new Fe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Fe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Fe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}wu.prototype.isMeshPhysicalMaterial=!0;class gj extends Ci{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new Fe(16777215),this.specular=new Fe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}gj.prototype.isMeshPhongMaterial=!0;class _j extends Ci{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}_j.prototype.isMeshToonMaterial=!0;class vj extends Ci{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}vj.prototype.isMeshNormalMaterial=!0;class yj extends Ci{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new Fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}yj.prototype.isMeshLambertMaterial=!0;class bj extends Ci{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}bj.prototype.isMeshMatcapMaterial=!0;class xj extends Nr{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}xj.prototype.isLineDashedMaterial=!0;const QEe={ShadowMaterial:pj,SpriteMaterial:yR,RawShaderMaterial:mj,ShaderMaterial:wa,PointsMaterial:Ew,MeshPhysicalMaterial:wu,MeshStandardMaterial:om,MeshPhongMaterial:gj,MeshToonMaterial:_j,MeshNormalMaterial:vj,MeshLambertMaterial:yj,MeshDepthMaterial:gR,MeshDistanceMaterial:_R,MeshBasicMaterial:vs,MeshMatcapMaterial:bj,LineDashedMaterial:xj,LineBasicMaterial:Nr,Material:Ci};Ci.fromType=function(n){return new QEe[n]};const yi={arraySlice:function(n,t,e){return yi.isTypedArray(n)?new n.constructor(n.subarray(t,void 0!==e?e:n.length)):n.slice(t,e)},convertArray:function(n,t,e){return!n||!e&&n.constructor===t?n:"number"==typeof t.BYTES_PER_ELEMENT?new t(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(function t(r,s){return n[r]-n[s]}),i},sortedArray:function(n,t,e){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=e[s]*t;for(let l=0;l!==t;++l)r[o++]=n[a+l]}return r},flattenJSON:function(n,t,e,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(t.push(s.time),e.push.apply(e,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(t.push(s.time),o.toArray(e,e.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(t.push(s.time),e.push(o)),s=n[r++]}while(void 0!==s)},subclip:function(n,t,e,i,r=30){const s=n.clone();s.name=t;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<e||p>=i)){d.push(c.times[f]);for(let m=0;m<u;++m)h.push(c.values[f*u+m])}}0!==d.length&&(c.times=yi.convertArray(d,c.times.constructor),c.values=yi.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,t=0,e=n,i=30){i<=0&&(i=30);const r=e.tracks.length,s=t/i;for(let o=0;o<r;++o){const a=e.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let m;if(s<=a.times[0])m=yi.arraySlice(a.values,u,d-u);else if(s>=a.times[p]){const _=p*d+u;m=yi.arraySlice(a.values,_,_+d-u)}else{const _=a.createInterpolant(),v=u,y=d-u;_.evaluate(s),m=yi.arraySlice(_.resultBuffer,v,y)}"quaternion"===l&&(new Mr).fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let _=0;_<g;++_){const v=_*f+h;if("quaternion"===l)Mr.multiplyQuaternionsFlat(c.values,v,m,0,c.values,v);else{const y=f-2*h;for(let b=0;b<y;++b)c.values[v+b]-=m[b]}}}return n.blendMode=2501,n}};class hc{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,r=e[i],s=e[i-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=i+2;;){if(void 0===r){if(t<s)break i;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,s)}if(i===a)break;if(s=r,r=e[++i],t<r)break t}o=e.length;break n}if(t>=s)break e;{const a=e[1];t<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(i===l)break;if(r=s,s=e[--i-1],t>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;t<e[a]?o=a:i=a+1}if(r=e[i],s=e[i-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,s,t)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=i[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}hc.prototype.beforeStart_=hc.prototype.copySampleValue_,hc.prototype.afterEnd_=hc.prototype.copySampleValue_;class JEe extends hc{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Rp,endingEnd:Rp}}intervalChanged_(t,e,i){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ip:s=t,a=2*e-i;break;case 2402:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case Ip:o=t,l=2*i-e;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=t-1,l=e}const c=.5*(i-e),u=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(t,e,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-e)/(r-e),m=p*p,g=m*p,_=-h*g+2*h*m-h*p,v=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,y=(-1-f)*g+(1.5+f)*m+.5*p,b=f*g-f*m;for(let x=0;x!==a;++x)s[x]=_*o[u+x]+v*o[c+x]+y*o[l+x]+b*o[d+x];return s}}class wj extends hc{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,u=(i-e)/(r-e),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class eTe extends hc{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class rl{constructor(t,e,i,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=yi.convertArray(e,this.TimeBufferType),this.values=yi.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:yi.convertArray(t.times,Array),values:yi.convertArray(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new eTe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new wj(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new JEe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case q_:e=this.InterpolantFactoryMethodDiscrete;break;case Dp:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return q_;case this.InterpolantFactoryMethodLinear:return Dp;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<t;)++s;for(;-1!==o&&i[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=yi.arraySlice(i,s,o),this.values=yi.arraySlice(this.values,s*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==r&&yi.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=yi.arraySlice(this.times),e=yi.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const m=e[d+p];if(m!==e[h+p]||m!==e[f+p]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)e[h+f]=e[d+f]}++o}}if(s>0){t[o]=t[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)e[l+c]=e[a+c];++o}return o!==t.length?(this.times=yi.arraySlice(t,0,o),this.values=yi.arraySlice(e,0,o*i)):(this.times=t,this.values=e),this}clone(){const t=yi.arraySlice(this.times,0),e=yi.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}rl.prototype.TimeBufferType=Float32Array,rl.prototype.ValueBufferType=Float32Array,rl.prototype.DefaultInterpolation=Dp;class am extends rl{}am.prototype.ValueTypeName="bool",am.prototype.ValueBufferType=Array,am.prototype.DefaultInterpolation=q_,am.prototype.InterpolantFactoryMethodLinear=void 0,am.prototype.InterpolantFactoryMethodSmooth=void 0;class Mj extends rl{}Mj.prototype.ValueTypeName="color";class yv extends rl{}yv.prototype.ValueTypeName="number";class tTe extends hc{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-e)/(r-e);let c=t*a;for(let u=c+a;c!==u;c+=4)Mr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class fh extends rl{InterpolantFactoryMethodLinear(t){return new tTe(this.times,this.values,this.getValueSize(),t)}}fh.prototype.ValueTypeName="quaternion",fh.prototype.DefaultInterpolation=Dp,fh.prototype.InterpolantFactoryMethodSmooth=void 0;class lm extends rl{}lm.prototype.ValueTypeName="string",lm.prototype.ValueBufferType=Array,lm.prototype.DefaultInterpolation=q_,lm.prototype.InterpolantFactoryMethodLinear=void 0,lm.prototype.InterpolantFactoryMethodSmooth=void 0;class bv extends rl{}bv.prototype.ValueTypeName="vector";class xv{constructor(t,e=-1,i,r=2500){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=oo(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,r=1/(t.fps||1);for(let o=0,a=i.length;o!==a;++o)e.push(iTe(i[o]).scale(r));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=i.length;s!==o;++s)e.push(rl.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(t,e,i,r){const s=e.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=yi.getKeyframeOrder(l);l=yi.sortedArray(l,1,u),c=yi.sortedArray(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new yv(".morphTargetInfluences["+e[a].name+"]",l,c).scale(1/i))}return new this(t,-1,o)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){const c=t[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,i));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,p,m){if(0!==f.length){const g=[],_=[];yi.flattenJSON(f,g,_,p),0!==g.length&&m.push(new d(h,g,_))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode;let l=t.length||-1;const c=t.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const g=[],_=[];for(let v=0;v!==h[p].morphTargets.length;++v){const y=h[p];g.push(y.time),_.push(y.morphTarget===m?1:0)}r.push(new yv(".morphTargetInfluence["+m+"]",g,_))}l=f.length*o}else{const f=".bones["+e[d].name+"]";i(bv,f+".position",h,"pos",r),i(fh,f+".quaternion",h,"rot",r),i(bv,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let e=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function iTe(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function nTe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yv;case"vector":case"vector2":case"vector3":case"vector4":return bv;case"color":return Mj;case"quaternion":return fh;case"bool":case"boolean":return am;case"string":return lm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const e=[],i=[];yi.flattenJSON(n.keys,e,i,"value"),n.times=e,n.values=i}return void 0!==t.parse?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}const cm={enabled:!1,files:{},add:function(n,t){!1!==this.enabled&&(this.files[n]=t)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const rTe=new class Cj{constructor(t,e,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}};class fc{constructor(t){this.manager=void 0!==t?t:rTe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(r,s){i.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const pc={};class sl extends fc{constructor(t){super(t)}load(t,e,i,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=cm.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==pc[t])return void pc[t].push({onLoad:e,onProgress:i,onError:r});pc[t]=[],pc[t].push({onLoad:e,onProgress:i,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===c.body||void 0===c.body.getReader)return c;const u=pc[t],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,p=0!==f;let m=0;const g=new ReadableStream({start(_){!function v(){d.read().then(({done:y,value:b})=>{if(y)_.close();else{m+=b.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let w=0,E=u.length;w<E;w++){const R=u[w];R.onProgress&&R.onProgress(x)}_.enqueue(b),v()}})}()}});return new Response(g)}throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{cm.add(t,c);const u=pc[t];delete pc[t];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=pc[t];if(void 0===u)throw this.manager.itemError(t),c;delete pc[t];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Yw extends fc{constructor(t){super(t)}load(t,e,i,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=cm.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a=Q_("img");function l(){u(),cm.add(t,this),e&&e(this),s.manager.itemEnd(t)}function c(d){u(),r&&r(d),s.manager.itemError(t),s.manager.itemEnd(t)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}}class sTe extends fc{constructor(t){super(t)}load(t,e,i,r){const s=new nv,o=new Yw(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(t[c],function(u){s.images[c]=u,a++,6===a&&(s.needsUpdate=!0,e&&e(s))},void 0,r)}for(let c=0;c<t.length;++c)l(c);return s}}class Sj extends fc{constructor(t){super(t)}load(t,e,i,r){const s=new ns,o=new Yw(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a,s.needsUpdate=!0,void 0!==e&&e(s)},i,r),s}}class ol extends Dn{constructor(t,e=1){super(),this.type="Light",this.color=new Fe(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}ol.prototype.isLight=!0;class NR extends ol{constructor(t,e,i){super(t,i),this.type="HemisphereLight",this.position.copy(Dn.DefaultUp),this.updateMatrix(),this.groundColor=new Fe(e)}copy(t){return ol.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}NR.prototype.isHemisphereLight=!0;const Ej=new lt,Tj=new V,Aj=new V;class BR{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new me(512,512),this.map=null,this.mapPass=null,this.matrix=new lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new dw,this._frameExtents=new me(1,1),this._viewportCount=1,this._viewports=[new Nn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;Tj.setFromMatrixPosition(t.matrixWorld),e.position.copy(Tj),Aj.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Aj),e.updateMatrixWorld(),Ej.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ej),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Dj extends BR{constructor(){super(new Cr(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,i=2*K_*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(i!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=i,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}Dj.prototype.isSpotLightShadow=!0;class VR extends ol{constructor(t,e,i=0,r=Math.PI/3,s=0,o=1){super(t,e),this.type="SpotLight",this.position.copy(Dn.DefaultUp),this.updateMatrix(),this.target=new Dn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new Dj}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}VR.prototype.isSpotLight=!0;const Rj=new lt,wv=new V,HR=new V;class Ij extends BR{constructor(){super(new Cr(90,1,.5,500)),this._frameExtents=new me(4,2),this._viewportCount=6,this._viewports=[new Nn(2,1,1,1),new Nn(0,1,1,1),new Nn(3,1,1,1),new Nn(1,1,1,1),new Nn(3,0,1,1),new Nn(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,r=this.matrix,s=t.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),wv.setFromMatrixPosition(t.matrixWorld),i.position.copy(wv),HR.copy(i.position),HR.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(HR),i.updateMatrixWorld(),r.makeTranslation(-wv.x,-wv.y,-wv.z),Rj.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rj)}}Ij.prototype.isPointLightShadow=!0;class UR extends ol{constructor(t,e,i=0,r=1){super(t,e),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Ij}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}UR.prototype.isPointLight=!0;class kj extends BR{constructor(){super(new iv(-5,5,5,-5,.5,500))}}kj.prototype.isDirectionalLightShadow=!0;class Xw extends ol{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Dn.DefaultUp),this.updateMatrix(),this.target=new Dn,this.shadow=new kj}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}Xw.prototype.isDirectionalLight=!0;(class Oj extends ol{constructor(t,e){super(t,e),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class Pj extends ol{constructor(t,e,i=10,r=10){super(t,e),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}).prototype.isRectAreaLight=!0;class Lj{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new V)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*s),e.addScaledVector(o[3],.488603*i),e.addScaledVector(o[4],i*r*1.092548),e.addScaledVector(o[5],r*s*1.092548),e.addScaledVector(o[6],.315392*(3*s*s-1)),e.addScaledVector(o[7],i*s*1.092548),e.addScaledVector(o[8],.546274*(i*i-r*r)),e}getIrradianceAt(t,e){const i=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*s),e.addScaledVector(o[3],1.023328*i),e.addScaledVector(o[4],.858086*i*r),e.addScaledVector(o[5],.858086*r*s),e.addScaledVector(o[6],.743125*s*s-.247708),e.addScaledVector(o[7],.858086*i*s),e.addScaledVector(o[8],.429043*(i*i-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const i=t.x,r=t.y,s=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*s,e[3]=.488603*i,e[4]=1.092548*i*r,e[5]=1.092548*r*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*i*s,e[8]=.546274*(i*i-r*r)}}Lj.prototype.isSphericalHarmonics3=!0;class Kw extends ol{constructor(t=new Lj,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}Kw.prototype.isLightProbe=!0;class al{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(i){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}(class Fj extends kt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}).prototype.isInstancedBufferGeometry=!0;class Vj extends fc{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=cm.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){cm.add(t,l),e&&e(l),s.manager.itemEnd(t)}).catch(function(l){r&&r(l),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}}let Zw;Vj.prototype.isImageBitmapLoader=!0;class cTe extends fc{constructor(t){super(t)}load(t,e,i,r){const s=this,o=new sl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{const l=a.slice(0);(void 0===Zw&&(Zw=new(window.AudioContext||window.webkitAudioContext)),Zw).decodeAudioData(l,function(u){e(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},i,r)}}(class uTe extends Kw{constructor(t,e,i=1){super(void 0,i);const r=(new Fe).set(t),s=(new Fe).set(e),o=new V(r.r,r.g,r.b),a=new V(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class dTe extends Kw{constructor(t,e=1){super(void 0,e);const i=(new Fe).set(t);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class _Te{constructor(t,e,i){let r,s,o;switch(this.binding=t,this.valueSize=i,e){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,r=this.valueSize,s=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=e}else o+=e,this._mixBufferRegion(i,s,0,e/o,r);this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,r=t*e+e,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,e*this._origIndex,1-s,e),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(let l=e,c=e+e;l!==c;++l)if(i[l]!==i[l+e]){a.setValue(i,r);break}}saveOriginalState(){const e=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(e,r);for(let s=i,o=r;s!==o;++s)e[s]=e[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)t[e+o]=t[i+o]}_slerp(t,e,i,r){Mr.slerpFlat(t,e,t,e,t,i,r)}_slerpAdditive(t,e,i,r,s){const o=this._workIndex*s;Mr.multiplyQuaternionsFlat(t,o,t,e,t,i),Mr.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=e+a;t[l]=t[l]*o+t[i+a]*r}}_lerpAdditive(t,e,i,r,s){for(let o=0;o!==s;++o){const a=e+o;t[a]=t[a]+t[i+o]*r}}}const zR="\\[\\]\\.:\\/",vTe=new RegExp("["+zR+"]","g"),GR="[^"+zR+"]",yTe="[^"+zR.replace("\\.","")+"]",bTe=/((?:WC+[\/:])*)/.source.replace("WC",GR),xTe=/(WCOD+)?/.source.replace("WCOD",yTe),wTe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",GR),MTe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",GR),CTe=new RegExp("^"+bTe+xTe+wTe+MTe+"$"),STe=["material","materials","bones"];class ETe{constructor(t,e,i){const r=i||oi.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}let oi=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(vTe,"")}static parseTrackName(e){const i=CTe.exec(e);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==STe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(void 0===i||""===i||"."===i||-1===i||i===e.name||i===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(i);if(void 0!==r)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[i++]=r[s]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++]}_setValue_array_setNeedsUpdate(e,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==u){if(void 0===e[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[u]}}const a=e[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=ETe,n})();oi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},oi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},oi.prototype.GetterByBindingType=[oi.prototype._getValue_direct,oi.prototype._getValue_array,oi.prototype._getValue_arrayElement,oi.prototype._getValue_toArray],oi.prototype.SetterByBindingTypeAndVersioning=[[oi.prototype._setValue_direct,oi.prototype._setValue_direct_setNeedsUpdate,oi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_array,oi.prototype._setValue_array_setNeedsUpdate,oi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_arrayElement,oi.prototype._setValue_arrayElement_setNeedsUpdate,oi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_fromArray,oi.prototype._setValue_fromArray_setNeedsUpdate,oi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ATe{constructor(t,e,i=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=r;const s=e.tracks,o=s.length,a=new Array(o),l={endingStart:Rp,endingEnd:Rp};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const r=this._clip.duration,s=t._clip.duration,a=r/s;t.warp(1,s/r,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,r){if(!this.enabled)return void this._updateWeight(t);const s=this._startTime;if(null!==s){const l=(t-s)*i;if(l<0||0===i)return;this._startTime=null,e=i*l}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let r=this.time+t,s=this._loopCount;const o=2202===i;if(0===t)return-1===s?r:o&&1==(1&s)?e-r:r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===s&&(t>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const a=Math.floor(r/e);r-=e*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===l){const c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return e-r}return r}_setEndings(t,e,i){const r=this._interpolantSettings;i?(r.endingStart=Ip,r.endingEnd=Ip):(r.endingStart=t?this.zeroSlopeAtStart?Ip:Rp:2402,r.endingEnd=e?this.zeroSlopeAtEnd?Ip:Rp:2402)}_scheduleFading(t,e,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=e,a[1]=s+t,l[1]=i,this}}(class DTe extends lu{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,r=t._clip.tracks,s=r.length,o=t._propertyBindings,a=t._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=r[d],f=h.name;let p=u[f];if(void 0!==p)++p.referenceCount,o[d]=p;else{if(p=o[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new _Te(oi.create(i,f,e&&e._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const i=(t._localRoot||this._root).uuid,r=t._clip.uuid,s=this._actionsByClip[r];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,r,i)}const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const s=e[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const s=e[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,i){const r=this._actions,s=this._actionsByClip;let o=s[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=o;else{const a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],r=t._cacheIndex;i._cacheIndex=r,e[r]=i,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=t._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const s=e[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_addInactiveBinding(t,e,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[i]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=e[e.length-1],c=t._cacheIndex;l._cacheIndex=c,e[c]=l,e.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return void 0===i&&(i=new wj(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,s=e[r];t.__cacheIndex=r,e[r]=t,s.__cacheIndex=i,e[i]=s}clipAction(t,e,i){const r=e||this._root,s=r.uuid;let o="string"==typeof t?xv.findByName(r,t):t;const a=null!==o?o.uuid:t,l=this._actionsByClip[a];let c=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==l){const d=l.actionByRoot[s];if(void 0!==d&&d.blendMode===i)return d;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new ATe(this,o,e,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(t,e){const i=e||this._root,r=i.uuid,s="string"==typeof t?xv.findByName(i,t):t,a=this._actionsByClip[s?s.uuid:t];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)t[i].stop();return this}update(t){const e=this._actions,i=this._nActiveActions,r=this.time+=t*=this.timeScale,s=Math.sign(t),o=this._accuIndex^=1;for(let c=0;c!==i;++c)e[c]._update(r,t,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,e[u]=d,e.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot[e];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[e];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){const i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class WR{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new WR(void 0===this.value.clone?this.value:this.value.clone())}}(class RTe extends dh{constructor(t,e,i=1){super(t,e),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}).prototype.isInstancedInterleavedBuffer=!0;class qj{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Yi(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Yj=new me;class Mv{constructor(t=new me(1/0,1/0),e=new me(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Yj.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Yj.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Mv.prototype.isBox2=!0;const Mu=new V,Jw=new lt,$R=new lt;function Zj(n){const t=[];!0===n.isBone&&t.push(n);for(let e=0;e<n.children.length;e++)t.push.apply(t,Zj(n.children[e]));return t}const r8=new ArrayBuffer(4),Ma=(new Float32Array(r8),new Uint32Array(r8),new Uint32Array(512)),Ca=new Uint32Array(512);for(let n=0;n<256;++n){const t=n-127;t<-27?(Ma[n]=0,Ma[256|n]=32768,Ca[n]=24,Ca[256|n]=24):t<-14?(Ma[n]=1024>>-t-14,Ma[256|n]=1024>>-t-14|32768,Ca[n]=-t-1,Ca[256|n]=-t-1):t<=15?(Ma[n]=t+15<<10,Ma[256|n]=t+15<<10|32768,Ca[n]=13,Ca[256|n]=13):t<128?(Ma[n]=31744,Ma[256|n]=64512,Ca[n]=24,Ca[256|n]=24):(Ma[n]=31744,Ma[256|n]=64512,Ca[n]=13,Ca[256|n]=13)}const YR=new Uint32Array(2048),um=new Uint32Array(64),a8=new Uint32Array(64);for(let n=1;n<1024;++n){let t=n<<13,e=0;for(;0==(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,YR[n]=t|e}for(let n=1024;n<2048;++n)YR[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)um[n]=n<<23;um[31]=1199570944,um[32]=2147483648;for(let n=33;n<63;++n)um[n]=2147483648+(n-32<<23);um[63]=3347054592;for(let n=1;n<64;++n)32!==n&&(a8[n]=1024);Go.create=function(n,t){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Go.prototype),n.prototype.constructor=n,n.prototype.getPoint=t,n},dv.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class LTe extends hh{constructor(t=10,e=10,i=4473924,r=8947848){i=new Fe(i),r=new Fe(r);const s=e/2,o=t/e,a=t/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=e;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=h===s?i:r;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}const u=new kt;u.setAttribute("position",new ut(l,3)),u.setAttribute("color",new ut(c,3)),super(u,new Nr({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class OTe extends hh{constructor(t){const e=Zj(t),i=new kt,r=[],s=[],o=new Fe(0,0,1),a=new Fe(0,1,0);for(let c=0;c<e.length;c++){const u=e[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ut(r,3)),i.setAttribute("color",new ut(s,3)),super(i,new Nr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,r=i.getAttribute("position");$R.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<e.length;s++){const a=e[s];a.parent&&a.parent.isBone&&(Jw.multiplyMatrices($R,a.matrixWorld),Mu.setFromMatrixPosition(Jw),r.setXYZ(o,Mu.x,Mu.y,Mu.z),Jw.multiplyMatrices($R,a.parent.matrixWorld),Mu.setFromMatrixPosition(Jw),r.setXYZ(o+1,Mu.x,Mu.y,Mu.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},fc.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),al.extractUrlBase(n)},fc.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Mv.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},Mv.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Mv.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Mv.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},lo.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},lo.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},lo.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},lo.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},lo.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},ah.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},du.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},dw.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},Lr.prototype.flattenToArrayOffset=function(n,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,t)},Lr.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Lr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Lr.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Lr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Lr.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},lt.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},lt.prototype.flattenToArrayOffset=function(n,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,t)},lt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new V).setFromMatrixColumn(this,3)},lt.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},lt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},lt.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},lt.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},lt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},lt.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},lt.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},lt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},lt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},lt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},lt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},lt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},lt.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},lt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},lt.prototype.makeFrustum=function(n,t,e,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,t,i,e,r,s)},lt.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},lc.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},Mr.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},Mr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},oh.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},oh.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},oh.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},ar.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ar.prototype.barycoordFromPoint=function(n,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,t)},ar.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},ar.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},ar.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},ar.barycoordFromPoint=function(n,t,e,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ar.getBarycoord(n,t,e,i,r)},ar.normal=function(n,t,e,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ar.getNormal(n,t,e,i)},il.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},il.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new dc(this,n)},il.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new _v(this,n)},me.prototype.fromAttribute=function(n,t,e){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,t,e)},me.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},me.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},V.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},V.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},V.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},V.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},V.prototype.getColumnFromMatrix=function(n,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,n)},V.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},V.prototype.fromAttribute=function(n,t,e){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,t,e)},V.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},V.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Nn.prototype.fromAttribute=function(n,t,e){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,t,e)},Nn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Dn.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},Dn.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Dn.prototype.translate=function(n,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,n)},Dn.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Dn.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(Dn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Xi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Xi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),xw.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Cr.prototype.setLens=function(n,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(n)},Object.defineProperties(ol.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(Gn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===X_},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(X_)}}}),Gn.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?X_:Y_),this},Gn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Gn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},kt.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},kt.prototype.addAttribute=function(n,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(n,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Gn(arguments[1],arguments[2])))},kt.prototype.addDrawCall=function(n,t,e){void 0!==e&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,t)},kt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},kt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},kt.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},kt.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(kt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),dh.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?X_:Y_),this},dh.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},dc.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},dc.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},dc.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},gw.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},WR.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ci.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Fe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(wa.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),Bn.prototype.clearTarget=function(n,t,e,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(t,e,i)},Bn.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},Bn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Bn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Bn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Bn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Bn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Bn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Bn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Bn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Bn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Bn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Bn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Bn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Bn.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},Bn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Bn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Bn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Bn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Bn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Bn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Bn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Bn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Bn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Bn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Bn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?An:tc}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(RW.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ao.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class pTe extends Dn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new cTe).load(n,function(i){t.setBuffer(i)}),this},lR.prototype.updateCubeMap=function(n,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,t)},lR.prototype.clear=function(n,t,e,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,t,e,i)},nh.crossOrigin=void 0,nh.loadTexture=function(n,t,e,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Sj;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,e,void 0,i);return t&&(s.mapping=t),s},nh.loadTextureCube=function(n,t,e,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new sTe;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,e,void 0,i);return t&&(s.mapping=t),s},nh.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},nh.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"139"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="139");const l8={type:"change"},XR={type:"start"},c8={type:"end"};class FTe extends lu{constructor(t,e){super(),void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new V,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(U){U.addEventListener("keydown",xn),this._domElementKeyEvents=U},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(l8),i.update(),s=r.NONE},this.update=function(){const U=new V,Ce=(new Mr).setFromUnitVectors(t.up,new V(0,1,0)),nt=Ce.clone().invert(),Le=new V,X=new Mr,ke=2*Math.PI;return function(){const xt=i.object.position;U.copy(xt).sub(i.target),U.applyQuaternion(Ce),a.setFromVector3(U),i.autoRotate&&s===r.NONE&&F(function E(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let ze=i.minAzimuthAngle,ht=i.maxAzimuthAngle;return isFinite(ze)&&isFinite(ht)&&(ze<-Math.PI?ze+=ke:ze>Math.PI&&(ze-=ke),ht<-Math.PI?ht+=ke:ht>Math.PI&&(ht-=ke),a.theta=ze<=ht?Math.max(ze,Math.min(ht,a.theta)):a.theta>(ze+ht)/2?Math.max(ze,a.theta):Math.min(ht,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),U.setFromSpherical(a),U.applyQuaternion(nt),xt.copy(i.target).add(U),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(d||Le.distanceToSquared(i.object.position)>o||8*(1-X.dot(i.object.quaternion))>o)&&(i.dispatchEvent(l8),Le.copy(i.object.position),X.copy(i.object.quaternion),d=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",le),i.domElement.removeEventListener("pointerdown",Te),i.domElement.removeEventListener("pointercancel",Ae),i.domElement.removeEventListener("wheel",qt),i.domElement.removeEventListener("pointermove",Ze),i.domElement.removeEventListener("pointerup",Ne),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",xn)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new qj,l=new qj;let c=1;const u=new V;let d=!1;const h=new me,f=new me,p=new me,m=new me,g=new me,_=new me,v=new me,y=new me,b=new me,x=[],w={};function R(){return Math.pow(.95,i.zoomSpeed)}function F(U){l.theta-=U}function N(U){l.phi-=U}const C=function(){const U=new V;return function(nt,Le){U.setFromMatrixColumn(Le,0),U.multiplyScalar(-nt),u.add(U)}}(),L=function(){const U=new V;return function(nt,Le){!0===i.screenSpacePanning?U.setFromMatrixColumn(Le,1):(U.setFromMatrixColumn(Le,0),U.crossVectors(i.object.up,U)),U.multiplyScalar(nt),u.add(U)}}(),Y=function(){const U=new V;return function(nt,Le){const X=i.domElement;if(i.object.isPerspectiveCamera){U.copy(i.object.position).sub(i.target);let Se=U.length();Se*=Math.tan(i.object.fov/2*Math.PI/180),C(2*nt*Se/X.clientHeight,i.object.matrix),L(2*Le*Se/X.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(C(nt*(i.object.right-i.object.left)/i.object.zoom/X.clientWidth,i.object.matrix),L(Le*(i.object.top-i.object.bottom)/i.object.zoom/X.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function I(U){i.object.isPerspectiveCamera?c/=U:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*U)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function z(U){i.object.isPerspectiveCamera?c*=U:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/U)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function D(U){h.set(U.clientX,U.clientY)}function O(U){m.set(U.clientX,U.clientY)}function fe(){1===x.length?h.set(x[0].pageX,x[0].pageY):h.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function _e(){1===x.length?m.set(x[0].pageX,x[0].pageY):m.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function ie(){const U=x[0].pageX-x[1].pageX,Ce=x[0].pageY-x[1].pageY,nt=Math.sqrt(U*U+Ce*Ce);v.set(0,nt)}function et(U){if(1==x.length)f.set(U.pageX,U.pageY);else{const nt=dt(U);f.set(.5*(U.pageX+nt.x),.5*(U.pageY+nt.y))}p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const Ce=i.domElement;F(2*Math.PI*p.x/Ce.clientHeight),N(2*Math.PI*p.y/Ce.clientHeight),h.copy(f)}function ye(U){if(1===x.length)g.set(U.pageX,U.pageY);else{const Ce=dt(U);g.set(.5*(U.pageX+Ce.x),.5*(U.pageY+Ce.y))}_.subVectors(g,m).multiplyScalar(i.panSpeed),Y(_.x,_.y),m.copy(g)}function vt(U){const Ce=dt(U),nt=U.pageX-Ce.x,Le=U.pageY-Ce.y,X=Math.sqrt(nt*nt+Le*Le);y.set(0,X),b.set(0,Math.pow(y.y/v.y,i.zoomSpeed)),I(b.y),v.copy(y)}function Te(U){!1!==i.enabled&&(0===x.length&&(i.domElement.setPointerCapture(U.pointerId),i.domElement.addEventListener("pointermove",Ze),i.domElement.addEventListener("pointerup",Ne)),function Me(U){x.push(U)}(U),"touch"===U.pointerType?function W(U){switch(qe(U),x.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;fe(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;_e(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Re(){i.enableZoom&&ie(),i.enablePan&&_e()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Pe(){i.enableZoom&&ie(),i.enableRotate&&fe()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(XR)}(U):function $e(U){let Ce;switch(U.button){case 0:Ce=i.mouseButtons.LEFT;break;case 1:Ce=i.mouseButtons.MIDDLE;break;case 2:Ce=i.mouseButtons.RIGHT;break;default:Ce=-1}switch(Ce){case 1:if(!1===i.enableZoom)return;(function P(U){v.set(U.clientX,U.clientY)})(U),s=r.DOLLY;break;case 0:if(U.ctrlKey||U.metaKey||U.shiftKey){if(!1===i.enablePan)return;O(U),s=r.PAN}else{if(!1===i.enableRotate)return;D(U),s=r.ROTATE}break;case 2:if(U.ctrlKey||U.metaKey||U.shiftKey){if(!1===i.enableRotate)return;D(U),s=r.ROTATE}else{if(!1===i.enablePan)return;O(U),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(XR)}(U))}function Ze(U){!1!==i.enabled&&("touch"===U.pointerType?function B(U){switch(qe(U),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;et(U),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;ye(U),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function ue(U){i.enableZoom&&vt(U),i.enablePan&&ye(U)})(U),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function pe(U){i.enableZoom&&vt(U),i.enableRotate&&et(U)})(U),i.update();break;default:s=r.NONE}}(U):function it(U){if(!1!==i.enabled)switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function q(U){f.set(U.clientX,U.clientY),p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const Ce=i.domElement;F(2*Math.PI*p.x/Ce.clientHeight),N(2*Math.PI*p.y/Ce.clientHeight),h.copy(f),i.update()}(U);break;case r.DOLLY:if(!1===i.enableZoom)return;!function K(U){y.set(U.clientX,U.clientY),b.subVectors(y,v),b.y>0?I(R()):b.y<0&&z(R()),v.copy(y),i.update()}(U);break;case r.PAN:if(!1===i.enablePan)return;!function J(U){g.set(U.clientX,U.clientY),_.subVectors(g,m).multiplyScalar(i.panSpeed),Y(_.x,_.y),m.copy(g),i.update()}(U)}}(U))}function Ne(U){Ue(U),0===x.length&&(i.domElement.releasePointerCapture(U.pointerId),i.domElement.removeEventListener("pointermove",Ze),i.domElement.removeEventListener("pointerup",Ne)),i.dispatchEvent(c8),s=r.NONE}function Ae(U){Ue(U)}function qt(U){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(U.preventDefault(),i.dispatchEvent(XR),function j(U){U.deltaY<0?z(R()):U.deltaY>0&&I(R()),i.update()}(U),i.dispatchEvent(c8))}function xn(U){!1===i.enabled||!1===i.enablePan||function we(U){let Ce=!1;switch(U.code){case i.keys.UP:Y(0,i.keyPanSpeed),Ce=!0;break;case i.keys.BOTTOM:Y(0,-i.keyPanSpeed),Ce=!0;break;case i.keys.LEFT:Y(i.keyPanSpeed,0),Ce=!0;break;case i.keys.RIGHT:Y(-i.keyPanSpeed,0),Ce=!0}Ce&&(U.preventDefault(),i.update())}(U)}function le(U){!1!==i.enabled&&U.preventDefault()}function Ue(U){delete w[U.pointerId];for(let Ce=0;Ce<x.length;Ce++)if(x[Ce].pointerId==U.pointerId)return void x.splice(Ce,1)}function qe(U){let Ce=w[U.pointerId];void 0===Ce&&(Ce=new me,w[U.pointerId]=Ce),Ce.set(U.pageX,U.pageY)}function dt(U){return w[(U.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}i.domElement.addEventListener("contextmenu",le),i.domElement.addEventListener("pointerdown",Te),i.domElement.addEventListener("pointercancel",Ae),i.domElement.addEventListener("wheel",qt,{passive:!1}),this.update()}}class NTe extends fc{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new UTe(e)}),this.register(function(e){return new qTe(e)}),this.register(function(e){return new YTe(e)}),this.register(function(e){return new zTe(e)}),this.register(function(e){return new GTe(e)}),this.register(function(e){return new WTe(e)}),this.register(function(e){return new jTe(e)}),this.register(function(e){return new $Te(e)}),this.register(function(e){return new VTe(e)}),this.register(function(e){return new XTe(e)})}load(t,e,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:al.extractUrlBase(t),this.manager.itemStart(t);const a=function(c){r?r(c):console.error(c),s.manager.itemError(t),s.manager.itemEnd(t)},l=new sl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{s.parse(c,o,function(u){e(u),s.manager.itemEnd(t)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,r){let s;const o={},a={};if("string"==typeof t)s=t;else if(al.decodeText(new Uint8Array(t,0,4))===u8){try{o[gn.KHR_BINARY_GLTF]=new KTe(t)}catch(d){return void(r&&r(d))}s=o[gn.KHR_BINARY_GLTF].content}else s=al.decodeText(new Uint8Array(t));const l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new c1e(l,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const d=l.extensionsUsed[u],h=l.extensionsRequired||[];switch(d){case gn.KHR_MATERIALS_UNLIT:o[d]=new HTe;break;case gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[d]=new JTe;break;case gn.KHR_DRACO_MESH_COMPRESSION:o[d]=new ZTe(l,this.dracoLoader);break;case gn.KHR_TEXTURE_TRANSFORM:o[d]=new QTe;break;case gn.KHR_MESH_QUANTIZATION:o[d]=new e1e;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(t,e){const i=this;return new Promise(function(r,s){i.parse(t,e,r,s)})}}function BTe(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}const gn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class VTe{constructor(t){this.parser=t,this.name=gn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let i=0,r=e.length;i<r;i++){const s=e[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,i="light:"+t;let r=e.cache.get(i);if(r)return r;const s=e.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let c;const u=new Fe(16777215);void 0!==l.color&&u.fromArray(l.color);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new Xw(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new UR(u),c.distance=d;break;case"spot":c=new VR(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,void 0!==l.intensity&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(c),e.cache.add(i,r),r}createNodeAttachment(t){const e=this,i=this.parser,s=i.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return i._getNodeRef(e.cache,a,l)})}}class HTe{constructor(){this.name=gn.KHR_MATERIALS_UNLIT}getMaterialType(){return vs}extendParams(t,e,i){const r=[];t.color=new Fe(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(t,"map",s.baseColorTexture,An))}return Promise.all(r)}}class UTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?wu:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new me(a,a)}return Promise.all(s)}}class zTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_SHEEN}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?wu:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new Fe(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&e.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(e,"sheenColorMap",o.sheenColorTexture,An)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class GTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?wu:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class WTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_VOLUME}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?wu:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=new Fe(a[0],a[1],a[2]),Promise.all(s)}}class jTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_IOR}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?wu:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class $Te{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?wu:null}extendMaterialParams(t,e){const i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=new Fe(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(i.assignTexture(e,"specularColorMap",o.specularColorTexture,An)),Promise.all(s)}}class qTe{constructor(t){this.parser=t,this.name=gn.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,i=e.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,o)}}class YTe{constructor(t){this.parser=t,this.name=gn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,i=this.parser,r=i.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class XTe{constructor(t){this.name=gn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,d=r.byteStride,h=new ArrayBuffer(u*d),f=new Uint8Array(a[0],l,c);return o.decodeGltfBuffer(new Uint8Array(h),u,d,f,r.mode,r.filter),h})}return null}}const u8="glTF";class KTe{constructor(t){this.name=gn.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:al.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==u8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(t,12);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const l=new Uint8Array(t,12+s,o);this.content=al.decodeText(l)}else if(5130562===a){const l=12+s;this.body=t.slice(l,l+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ZTe{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=gn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const i=this.json,r=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=ZR[u]||u.toLowerCase();a[d]=o[u]}for(const u in t.attributes){const d=ZR[u]||u.toLowerCase();if(void 0!==o[u]){const h=i.accessors[t.attributes[u]];c[d]=Sv[h.componentType],l[d]=!0===h.normalized}}return e.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(h){for(const f in h.attributes){const p=h.attributes[f],m=l[f];void 0!==m&&(p.normalized=m)}d(h)},a,c)})})}}class QTe{constructor(){this.name=gn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class KR extends om{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Fe).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class JTe{constructor(){this.name=gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return KR}extendParams(t,e,i){const r=e.extensions[this.name];t.color=new Fe(1,1,1),t.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;t.color.fromArray(o),t.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(i.assignTexture(t,"map",r.diffuseTexture,An)),t.emissive=new Fe(0,0,0),t.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,t.specular=new Fe(1,1,1),Array.isArray(r.specularFactor)&&t.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(i.assignTexture(t,"glossinessMap",o)),s.push(i.assignTexture(t,"specularMap",o,An))}return Promise.all(s)}createMaterial(t){const e=new KR(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=0,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e}}class e1e{constructor(){this.name=gn.KHR_MESH_QUANTIZATION}}class yh extends hc{constructor(t,e,i,r){super(t,e,i,r)}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r*3+r;for(let o=0;o!==r;o++)e[o]=i[s+o];return e}}yh.prototype.beforeStart_=yh.prototype.copySampleValue_,yh.prototype.afterEnd_=yh.prototype.copySampleValue_,yh.prototype.interpolate_=function(n,t,e,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,c=i-t,u=(e-t)/c,d=u*u,h=d*u,f=n*l,p=f-l,m=-2*h+3*d,g=h-d,_=1-m,v=g-d+u;for(let y=0;y!==o;y++)r[y]=_*s[p+y+o]+v*(s[p+y+a]*c)+m*s[f+y+o]+g*(s[f+y]*c);return r};const t1e=new Mr;class n1e extends yh{interpolate_(t,e,i,r){const s=super.interpolate_(t,e,i,r);return t1e.fromArray(s).normalize().toArray(s),s}}const Sv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},h8={9728:or,9729:Fi,9984:1004,9985:1007,9986:1005,9987:ou},f8={33071:_s,33648:1002,10497:Xd},p8={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ZR={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Cu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},i1e={CUBICSPLINE:void 0,LINEAR:Dp,STEP:q_};function r1e(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new om({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function Ev(n,t,e){for(const i in e.extensions)void 0===n[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function bh(n,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function o1e(n,t){if(n.updateMorphTargets(),void 0!==t.weights)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,r=e.length;i<r;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function a1e(n){const t=n.extensions&&n.extensions[gn.KHR_DRACO_MESH_COMPRESSION];let e;return e=t?"draco:"+t.bufferView+":"+t.indices+":"+m8(t.attributes):n.indices+":"+m8(n.attributes)+":"+n.mode,e}function m8(n){let t="";const e=Object.keys(n).sort();for(let i=0,r=e.length;i<r;i++)t+=e[i]+":"+n[e[i]]+";";return t}function JR(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class c1e{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new BTe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},this.textureLoader="undefined"!=typeof createImageBitmap&&!1===/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?new Vj(this.options.manager):new Sj(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new sl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};Ev(s,a,r),bh(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){t(a)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=e.length;r<s;r++){const o=e[r].joints;for(let a=0,l=o.length;a<l;a++)t[o[a]].isBone=!0}for(let r=0,s=t.length;r<s;r++){const o=t[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){const r=t(e[i]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const i=[];for(let r=0;r<e.length;r++){const s=t(e[r]);s&&i.push(s)}return i}getDependency(t,e){const i=t+":"+e;let r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this.loadAnimation(e);break;case"camera":r=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(i,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const i=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(s,o){return i.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],i=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[gn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(al.resolveURL(e.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){const s=e.byteOffset||0;return i.slice(s,s+(e.byteLength||0))})}loadAccessor(t){const e=this,i=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=p8[r.type],c=Sv[r.componentType],u=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let m,g;if(f&&f!==u*l){const _=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let y=e.cache.get(v);y||(m=new c(a,_*f,r.count*f/u),y=new dh(m,f/u),e.cache.add(v,y)),g=new vu(y,l,h%f/u,p)}else m=null===a?new c(r.count*l):new c(a,h,r.count*l),g=new Gn(m,l,p);if(void 0!==r.sparse){const b=r.sparse.values.byteOffset||0,x=new(0,Sv[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*p8.SCALAR),w=new c(o[2],b,r.sparse.count*l);null!==a&&(g=new Gn(g.array.slice(),g.itemSize,g.normalized));for(let E=0,R=x.length;E<R;E++){const F=x[E];if(g.setX(F,w[E*l]),l>=2&&g.setY(F,w[E*l+1]),l>=3&&g.setZ(F,w[E*l+2]),l>=4&&g.setW(F,w[E*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(t){const e=this.json,s=e.textures[t].source,o=e.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,e,i){const r=this,s=this.json,o=s.textures[t],a=s.images[e],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(e,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=h8[h.magFilter]||Fi,u.minFilter=h8[h.minFilter]||ou,u.wrapS=f8[h.wrapS]||Xd,u.wrapT=f8[h.wrapT]||Xd,r.associations.set(u,{textures:t}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,e){const r=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(d=>d.clone());const o=r.images[t],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let p=h;!0===e.isImageBitmapLoader&&(p=function(m){const g=new ns(m);g.needsUpdate=!0,h(g)}),e.load(al.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return!0===c&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||function l1e(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[t]=u,u}assignTexture(t,e,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===e&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+e+" not yet supported."),s.extensions[gn.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[gn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[gn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.encoding=r),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let i=t.material;const r=void 0===e.attributes.tangent,s=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Ew,Ci.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(t.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Nr,Ci.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=i}getMaterialType(){return om}loadMaterial(t){const e=this,r=this.extensions,s=this.json.materials[t];let o;const a={},l=s.extensions||{},c=[];if(l[gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=d.getMaterialType(),c.push(d.extendParams(a,s,e))}else if(l[gn.KHR_MATERIALS_UNLIT]){const d=r[gn.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,e))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Fe(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==d.baseColorTexture&&c.push(e.assignTexture(a,"map",d.baseColorTexture,An)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(e.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(e.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==vs&&(c.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new me(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return void 0!==s.occlusionTexture&&o!==vs&&(c.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==vs&&(a.emissive=(new Fe).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==vs&&c.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture,An)),Promise.all(c).then(function(){let d;return d=o===KR?r[gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(d.name=s.name),bh(d,s),e.associations.set(d,{materials:t}),s.extensions&&Ev(r,d,s),d})}createUniqueName(t){const e=oi.sanitizeNodeName(t||"");let i=e;for(let r=1;this.nodeNamesUsed[i];++r)i=e+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(t){const e=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[gn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return _8(l,a,e)})}const o=[];for(let a=0,l=t.length;a<l;a++){const c=t[a],u=a1e(c),d=r[u];if(d)o.push(d.promise);else{let h;h=c.extensions&&c.extensions[gn.KHR_DRACO_MESH_COMPRESSION]?s(c):_8(new kt,c,e),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(t){const e=this,r=this.extensions,s=this.json.meshes[t],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?r1e(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(e.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],g=o[f];let _;const v=c[f];if(4===g.mode||5===g.mode||6===g.mode||void 0===g.mode)_=!0===s.isSkinnedMesh?new xw(m,v):new Xi(m,v),!0===_.isSkinnedMesh&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),5===g.mode?_.geometry=v8(_.geometry,1):6===g.mode&&(_.geometry=v8(_.geometry,2));else if(1===g.mode)_=new hh(m,v);else if(3===g.mode)_=new yu(m,v);else if(2===g.mode)_=new wR(m,v);else{if(0!==g.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);_=new CR(m,v)}Object.keys(_.geometry.morphAttributes).length>0&&o1e(_,s),_.name=e.createUniqueName(s.name||"mesh_"+t),bh(_,s),g.extensions&&Ev(r,_,g),e.assignFinalMaterial(_),d.push(_)}for(let f=0,p=d.length;f<p;f++)e.associations.set(d[f],{meshes:t,primitives:f});if(1===d.length)return d[0];const h=new cc;e.associations.set(h,{meshes:t});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(t){let e;const i=this.json.cameras[t],r=i[i.type];if(r)return"perspective"===i.type?e=new Cr(owe.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(e=new iv(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),bh(e,i),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],i={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",e.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(t){const i=this.json.animations[t],r=[],s=[],o=[],a=[],l=[];for(let c=0,u=i.channels.length;c<u;c++){const d=i.channels[c],h=i.samplers[d.sampler],f=d.target,m=void 0!==i.parameters?i.parameters[h.input]:h.input,g=void 0!==i.parameters?i.parameters[h.output]:h.output;r.push(this.getDependency("node",void 0!==f.node?f.node:f.id)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(h),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2],f=c[3],p=c[4],m=[];for(let _=0,v=u.length;_<v;_++){const y=u[_],b=d[_],x=h[_],w=f[_],E=p[_];if(void 0===y)continue;let R;switch(y.updateMatrix(),y.matrixAutoUpdate=!0,Cu[E.path]){case Cu.weights:R=yv;break;case Cu.rotation:R=fh;break;default:R=bv}const F=y.name?y.name:y.uuid,N=void 0!==w.interpolation?i1e[w.interpolation]:Dp,C=[];Cu[E.path]===Cu.weights?y.traverse(function(Y){Y.morphTargetInfluences&&C.push(Y.name?Y.name:Y.uuid)}):C.push(F);let L=x.array;if(x.normalized){const Y=JR(L.constructor),I=new Float32Array(L.length);for(let z=0,D=L.length;z<D;z++)I[z]=L[z]*Y;L=I}for(let Y=0,I=C.length;Y<I;Y++){const z=new R(C[Y]+"."+Cu[E.path],b.array,L,N);"CUBICSPLINE"===w.interpolation&&(z.createInterpolant=function(P){return new(this instanceof fh?n1e:yh)(this.times,this.values,this.getValueSize()/3,P)},z.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(z)}}return new xv(i.name?i.name:"animation_"+t,void 0,m)})}createNodeMesh(t){const i=this,r=this.json.nodes[t];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(t){const i=this.extensions,r=this,s=this.json.nodes[t],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(l=!0===s.isBone?new ww:a.length>1?new cc:1===a.length?a[0]:new Dn,l!==a[0])for(let c=0,u=a.length;c<u;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),bh(l,s),s.extensions&&Ev(i,l,s),void 0!==s.matrix){const c=new lt;c.fromArray(s.matrix),l.applyMatrix4(c)}else void 0!==s.translation&&l.position.fromArray(s.translation),void 0!==s.rotation&&l.quaternion.fromArray(s.rotation),void 0!==s.scale&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=t,l})}loadScene(t){const e=this.json,i=this.extensions,r=this.json.scenes[t],s=this,o=new cc;r.name&&(o.name=s.createUniqueName(r.name)),bh(o,r),r.extensions&&Ev(i,o,r);const a=r.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(g8(a[c],o,e,s));return Promise.all(l).then(function(){return s.associations=(u=>{const d=new Map;for(const[h,f]of s.associations)(h instanceof Ci||h instanceof ns)&&d.set(h,f);return u.traverse(h=>{const f=s.associations.get(h);null!=f&&d.set(h,f)}),d})(o),o})}}function g8(n,t,e,i){const r=e.nodes[n];return i.getDependency("node",n).then(function(s){if(void 0===r.skin)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,u=o.joints.length;c<u;c++)l.push(i.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let d=0,h=a.length;d<h;d++){const f=a[d];if(f){c.push(f);const p=new lt;void 0!==o.inverseBindMatrices&&p.fromArray(o.inverseBindMatrices.array,16*d),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[d])}l.bind(new Mw(c,u),l.matrixWorld)}),s})}).then(function(s){t.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++)o.push(g8(a[l],s,e,i))}return Promise.all(o)})}function _8(n,t,e){const i=t.attributes,r=[];function s(o,a){return e.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=ZR[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==t.indices&&!n.index){const o=e.getDependency("accessor",t.indices).then(function(a){n.setIndex(a)});r.push(o)}return bh(n,t),function u1e(n,t,e){const i=t.attributes,r=new lo;if(void 0===i.POSITION)return;{const a=e.json.accessors[i.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new V(l[0],l[1],l[2]),new V(c[0],c[1],c[2])),a.normalized){const u=JR(Sv[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=t.targets;if(void 0!==s){const a=new V,l=new V;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(void 0!==d.POSITION){const h=e.json.accessors[d.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const m=JR(Sv[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new du;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,t,e),Promise.all(r).then(function(){return void 0!==t.targets?function s1e(n,t,e){let i=!1,r=!1,s=!1;for(let c=0,u=t.length;c<u;c++){const d=t[c];if(void 0!==d.POSITION&&(i=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=t.length;c<u;c++){const d=t[c];if(i){const h=void 0!==d.POSITION?e.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(r){const h=void 0!==d.NORMAL?e.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=void 0!==d.COLOR_0?e.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[1],h=c[2];return i&&(n.morphAttributes.position=c[0]),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,t.targets,e):n})}function v8(n,t){let e=n.getIndex();if(null===e){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),e=n.getIndex()}const i=e.count-2,r=[];if(2===t)for(let o=1;o<=i;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}let y8=(()=>{class n{filter(e,i){e.children.forEach(r=>{console.log(r.name,i),r.visible=!!r.name.includes(i)})}lights(e){const s=new NR(11657727,12155424,.7);e.add(s);const l=new Xw(16777215,1);l.position.set(30,30,30),l.target.position.set(0,0,0),l.castShadow=!0,l.shadow.mapSize.width=512,l.shadow.mapSize.height=512,l.shadow.camera.near=.5,l.shadow.camera.far=500,e.add(l.target),e.add(l)}createSimpleMesh(e){const s=new il;s.moveTo(5,5),s.bezierCurveTo(5,5,4,0,0,0),s.bezierCurveTo(-6,0,-6,7,-6,7),s.bezierCurveTo(-6,11,-3,15.4,5,19),s.bezierCurveTo(12,15.4,16,11,16,7),s.bezierCurveTo(16,7,16,0,10,0),s.bezierCurveTo(7,0,5,5,5,5);const o=new dc(s,{steps:2,depth:16,bevelEnabled:!0,bevelThickness:1,bevelSize:1,bevelOffset:0,bevelSegments:1}),a=new vs({color:65280});return new Xi(o,a)}import(e,i,r){(new NTe).load("/assets/models/threejstest.glb",o=>{const a=o.scene;a.children.forEach(l=>{l.castShadow=!0,l.receiveShadow=!0}),a.castShadow=!0,a.receiveShadow=!0,a.name=i,e.add(a),r(a)})}basicGround(e){const r=new Yp(100,100,1,1),s=new vs({color:16777215}),o=new Xi(r,s);o.position.set(0,-.5,0),o.rotateX(-Math.PI/2),o.receiveShadow=!0,e.add(o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const d1e=["rendererContainer"];var $t=(()=>(function(n){n.OSB="OSB",n.Insulation="Insulation",n.construction="construction",n.drywall="drywall",n.serviceStuds="serviceStuds",n.tapes="tapes",n.floorBeam="floorBeam"}($t||($t={})),$t))();let h1e=(()=>{class n{constructor(e,i,r,s){this.threeService=e,this.houseService=i,this.host=r,this.appService=s,this.resize$=new Ln(void 0),this.renderer=new Bn({antialias:!0,alpha:!0}),this.scene=new gw,this.subscriptions=[],this.modelName="wallDetail",this.subModels={},this.showingSubModels={[$t.OSB]:!1,[$t.Insulation]:!1,[$t.construction]:!1,[$t.drywall]:!1,[$t.serviceStuds]:!1,[$t.tapes]:!1,[$t.floorBeam]:!1}}onResize(){const e=this.host.nativeElement.getBoundingClientRect(),i=e.height,r=e.width;this.camera&&(this.camera.aspect=r/i,this.camera.updateProjectionMatrix()),this.renderer.setSize(r,i),this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}animate(){window.requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}createSceneAndCamera(){this.camera=new Cr(50,1,.1,1e3),this.camera.position.set(0,1.7,10),this.controls=new FTe(this.camera,this.renderer.domElement),this.controls.minDistance=.1,this.controls.maxDistance=50,this.controls.update(),this.scene.background=null,this.renderer.shadowMap.enabled=!0,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),this.animate()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.observer.unobserve(this.host.nativeElement)}ngAfterViewInit(){this.createSceneAndCamera(),this.observer=new ResizeObserver(e=>this.resize$.next(e)),this.observer.observe(this.host.nativeElement),this.subscriptions.push(this.resize$.subscribe(()=>{this.onResize()}),this.appService.fullscreen$.subscribe(e=>{this.onResize(),this.controls.enableZoom=e}),this.appService.tag$.subscribe(()=>{this.tag=this.appService.tag$.value,this.sectionShowing()}),this.appService.scroll$.subscribe(()=>{const e=this.appService.scroll$.value;this.section!==e.section&&(this.section=e.section,this.sectionShowing())})),this.threeService.basicGround(this.scene),this.threeService.lights(this.scene),this.threeService.import(this.scene,this.modelName,e=>{this.model=e,this.model.children.forEach(i=>{i.userData.position=i.position.clone(),i.material.transparent=!0}),this.setSubModels(),this.sectionShowing(!0),console.log("Complete model:",e)})}setSubModels(){this.subModels[$t.Insulation]=this.model.children.filter(e=>{const i=e.name.toLocaleLowerCase();return i.includes("iso")||i.includes("iso")}),this.subModels[$t.OSB]=this.model.children.filter(e=>e.name.toLocaleLowerCase().includes("g-__")),this.subModels[$t.construction]=this.model.children.filter(e=>{const i=e.name.toLocaleLowerCase();return i.includes("joist")||i.includes("stud")}),this.subModels[$t.drywall]=this.model.children.filter(e=>e.name.toLocaleLowerCase().includes("gips")),this.subModels[$t.serviceStuds]=this.model.children.filter(e=>e.name.toLocaleLowerCase().includes("service"))}sectionShowing(e=!1){!this.model||(console.log(this.section,this.subModels),[tt.contructionFoundation].includes(this.section)&&(this.showingSubModels={[$t.Insulation]:!1,[$t.OSB]:!1,[$t.construction]:!0,[$t.drywall]:!1,[$t.floorBeam]:!1,[$t.serviceStuds]:!1,[$t.tapes]:!1}),[tt.contructionCrawlerSpace].includes(this.section)&&(this.showingSubModels={[$t.Insulation]:!1,[$t.OSB]:!0,[$t.construction]:!0,[$t.drywall]:!1,[$t.floorBeam]:!1,[$t.serviceStuds]:!1,[$t.tapes]:!1}),[tt.facadeDoor].includes(this.section)&&(this.showingSubModels={[$t.Insulation]:!0,[$t.OSB]:!0,[$t.construction]:!0,[$t.drywall]:!1,[$t.floorBeam]:!1,[$t.serviceStuds]:!1,[$t.tapes]:!1}),this.toggleInsulation(),this.toggleOSB(),this.toggleContruction())}toggleContruction(){const e=this.subModels[$t.Insulation];if(!e)return;const i=this.showingSubModels[$t.Insulation];e.forEach(r=>{const s=r.material,o=r.userData.position;i?(so.to(s,{opacity:1,duration:1,ease:"power1.out"}),console.log(r.position.y,o.y),r.position.y!==o.y&&so.fromTo(r.position,{y:r.position.y-3},{y:o.y,duration:1,ease:"power1.out"})):so.to(s,{opacity:0,duration:.3,ease:"power1.out"})})}toggleInsulation(){const e=this.subModels[$t.Insulation];if(!e)return;const i=this.showingSubModels[$t.Insulation];e.forEach(r=>{const s=r.material,o=r.userData.position;i?(so.to(s,{opacity:1,duration:1,ease:"power1.out"}),console.log(r.position.y,o.y),r.position.y!==o.y&&so.fromTo(r.position,{y:r.position.y-3},{y:o.y,duration:1,ease:"power1.out"})):so.to(s,{opacity:0,duration:.3,ease:"power1.out"})})}toggleOSB(){const e=this.subModels[$t.OSB],i=this.showingSubModels[$t.OSB];!e||!i||e.forEach(r=>{const s=r.material,o=r.userData.position;s.transparent=!0,console.log(r),i?so.fromTo(s,{opacity:1},{opacity:0,duration:.3,ease:"power1.out"}):(so.fromTo(s,{opacity:0},{opacity:1,duration:1,ease:"power1.out"}),so.fromTo(r.position,{y:o.y-3},{y:o.y,duration:1,ease:"power1.out"}))})}toggleDrywall(){const e=this.subModels[$t.drywall],i=this.showingSubModels[$t.drywall];!e||!i||e.forEach(r=>{const s=r.material,o=r.userData.position;s.transparent=!0,console.log(r),i?so.fromTo(s,{opacity:1},{opacity:0,duration:.3,ease:"power1.out"}):(so.fromTo(s,{opacity:0},{opacity:1,duration:1,ease:"power1.out"}),so.fromTo(r.position,{y:o.y-3},{y:o.y,duration:1,ease:"power1.out"}))})}}return n.\u0275fac=function(e){return new(e||n)(M(y8),M(rr),M(Ve),M(Wi))},n.\u0275cmp=ft({type:n,selectors:[["app-three-window"]],viewQuery:function(e,i){if(1&e&&ni(d1e,5),2&e){let r;Ct(r=St())&&(i.rendererContainer=r.first)}},decls:2,vars:0,consts:[["rendererContainer",""]],template:function(e,i){1&e&&ae(0,"div",null,0)},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();function f1e(n,t){1&n&&(qn(),S(0,"g",15),ae(1,"polygon",16)(2,"polygon",17)(3,"text",18),T()),2&n&&zn("id","step-",t.index,"")}const p1e=function(){return[]};let m1e=(()=>{class n extends bx{constructor(e,i,r,s,o){super(e,i,r,s),this.houseService=e,this.appService=i,this.tooltipService=r,this.host=s,this.httpClient=o,this.graphic=vr.stair,this.floor=te.all,this.steps=new Ln(1)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){const e=this.stair.totalRise/Math.tan(Math.PI/180*30);[tt.stairCheck,tt.stairPlan].includes(this.section)?this.drawingSize=[[5*this.stair.run,9*-this.stair.rise],[4*this.stair.run,4*this.stair.rise]]:(this.drawingSize=[[-this.stair.run,-this.stair.totalRise],[e,this.stair.totalRise+this.stair.floorThickness]],this.marginInPixels=[40,0,0,0]),this.marginInMeters=[0,2*this.stair.run,0,0],[tt.stairPlan].includes(this.section)?this.svg.style("opacity",0):this.svg.style("opacity",1)}}return n.\u0275fac=function(e){return new(e||n)(M(rr),M(Wi),M(lp),M(Ve),M(wd))},n.\u0275cmp=ft({type:n,selectors:[["app-svg-stair-steps"]],features:[he],decls:16,vars:2,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-step"],["svg",""],[1,"g-building"],["id","floor-groundfloor"],["id","floor-topfloor-shadow"],["id","floor-topfloor"],[1,"g-step"],[3,"id",4,"ngFor","ngForOf"],[1,"g-helper"],["id","nose-line"],["id","back-line"],["id","run-size"],["id","rise-size"],["id","total-run-size"],["id","total-rise-size"],[3,"id"],[1,"step-run"],[1,"step-rise"],[1,"step-text"]],template:function(e,i){1&e&&(qn(),S(0,"svg",0,1)(2,"g")(3,"g",2),ae(4,"polygon",3)(5,"polygon",4)(6,"polygon",5),T(),S(7,"g",6),Ge(8,f1e,4,1,"g",7),T(),S(9,"g",8),ae(10,"path",9)(11,"path",10)(12,"g",11)(13,"g",12)(14,"g",13)(15,"g",14),T()()()),2&e&&($(8),Z("ngForOf",nd(1,p1e).constructor(25)))},directives:[ad],styles:["svg.stairs-step{width:100%;height:100%;position:relative}  svg.stairs-step .g-helper,   svg.stairs-step .g-building,   svg.stairs-step .g-step{fill:#8d7d7d;transition:.4s,stroke-width 1ms;stroke:#000}  svg.stairs-step .g-step{fill:#000;stroke:none}  svg.stairs-step .g-step text{transition:.4s;opacity:0}  svg.stairs-step .nose-line{stroke-dasharray:1%;opacity:.3}  svg.stairs-step .g-building{fill:#f9f9f9}  svg.stairs-step .g-building .floor-topfloor-shadow{opacity:.3}  svg.stairs-step .measure{fill:none;transition:.4s,stroke-width 1ms;stroke:#0700de}  svg.stairs-step .measure text{stroke:#fff;paint-order:stroke;fill:#0700de}  svg.stairs-step .measure.rise-size,   svg.stairs-step .measure.run-size{transition:.4s 0s;opacity:0}  .section-stair-check .rise-size,   .section-stair-check .run-size{transition:.4s .6s!important;opacity:1!important}  .tag-amount-steps text{opacity:1!important}"]}),n})();function g1e(n,t){1&n&&ae(0,"controls",10),2&n&&Z("@slideInOut",void 0)}function _1e(n,t){1&n&&ae(0,"controls",11),2&n&&Z("@slideInOut",void 0)}function v1e(n,t){1&n&&ae(0,"app-svg-cross",15)}function y1e(n,t){1&n&&(Tr(0),ae(1,"app-svg-stair-plan",16)(2,"app-svg-plan",17),Ar()),2&n&&($(1),Z("isChild",!0))}function b1e(n,t){1&n&&(Tr(0),ae(1,"app-three-window"),Ar())}function x1e(n,t){1&n&&(Tr(0),ae(1,"app-svg-stair-plan",18)(2,"app-svg-stair-steps",19),Ar())}function w1e(n,t){if(1&n&&(Tr(0),S(1,"div",12),Ge(2,v1e,1,0,"app-svg-cross",13),T(),S(3,"div",14),Ge(4,y1e,3,1,"ng-container",8),Ge(5,b1e,2,0,"ng-container",8),Ge(6,x1e,3,0,"ng-container",8),T(),Ar()),2&n){const e=t.ngIf,i=Qe();$(2),Z("ngIf",e===i.Graphic.cross),$(2),Z("ngIf",e===i.Graphic.plan),$(1),Z("ngIf",e===i.Graphic.window),$(1),Z("ngIf",e===i.Graphic.stair)}}const M1e=function(n){return{top:n}};let C1e=(()=>{class n{constructor(e,i,r,s,o,a){this.appService=e,this.tooltipService=i,this.houseService=r,this.router=s,this.activatedRoute=o,this.visibleService=a,this.sections=Object.keys(tt),this.Tag=To,this.GraphicSide=Pf,this.Graphic=vr,this.sectionScroll={},this.goalLine=.4,this.popupActive$=this.appService.popupActive$,this.fullscreen$=this.appService.fullscreen$,this.scroll$=this.appService.scroll$,this.floor$=this.appService.floor$,this.tag$=this.appService.tag$,this.states$=this.appService.states$,this.cssStates$=this.states$.pipe(en(l=>l.map(c=>`state-${c}`).join(" ")))}isScrolledIntoView(){this.calcSection()}ngAfterViewInit(){this.router.events.pipe(hi(e=>e instanceof qf)).subscribe(e=>{setTimeout(()=>{this.setup()},0)}),this.setup()}setup(){this.sectionEls=document.querySelectorAll("section"),this.sectionScroll={},this.sectionEls.forEach(r=>{const s=r.id;this.sectionScroll[s]={id:s,top:r.offsetTop}}),this.calcSection();const i=this.activatedRoute.snapshot.params.tag;i&&this.tag$.next(i)}calcSection(){this.section=this.getSection(),void 0!==this.section&&(this.graphic=this.setGraphic(this.section),this.graphicSide=this.getSide(),this.updateStateBasedOnSection(this.section),document.querySelector(`section#${this.section}`).classList.add("section-active"),this.appService.scroll$.next({scroll:Math.round(window.pageYOffset),percentage:this.getVerticalScrollPercentage(document.body),section:this.section,graphicSide:this.graphicSide,graphic:this.graphic}),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:this.section},replaceUrl:!0,queryParamsHandling:"merge"}))}getVerticalScrollPercentage(e){var i=e.parentNode;return Math.round((e.scrollTop||i.scrollTop)/(i.scrollHeight-i.clientHeight)*1e3)/1e3}setGraphic(e){let i;return[tt.welcome,tt.passiv,tt.basics,tt.extensions,tt.tower,tt.wiredPower,tt.wiredEthernet,tt.wiredExtra,tt.wiredLight,tt.wiredSafety].includes(e)&&(i=vr.plan,this.appService.setStates(ua.grid,!0)),[tt.roof70,tt.roofBasics,tt.roofChoice,tt.roofCircle,tt.roofEdge,tt.roofIntermezzo].includes(e)&&(i=vr.cross,[tt.roof70].includes(e)&&this.houseService.update("cross","viewedRoofStyle",Rs.roof70),[tt.roofBasics,tt.roofCircle].includes(e)&&this.houseService.update("cross","viewedRoofStyle",Rs.roofCircle)),[tt.stairStart,tt.stairBasic,tt.stairCheck,tt.stairPlan].includes(e)&&(i=vr.stair),[tt.facadeStart,tt.facadeWindow,tt.facadeDoor].includes(e)&&(i=vr.none),[tt.contructionCrawlerSpace,tt.contructionFloor,tt.contructionFoundation,tt.contructionRoof,tt.contructionWall,tt.contructionWallFinish].includes(e)&&(i=vr.window),[tt.instaltionDrinkWater,tt.instaltionElectricity,tt.instaltionGreyWater,tt.instaltionHeating,tt.instaltionSmartHome,tt.instaltionVentilation].includes(e)&&(i=vr.none),this.graphic!==i&&(console.log("Swap side!"),this.tooltipService.detachOverlay()),this.graphic=i,i}updateStateBasedOnSection(e){this.appService.setStates(ua.grey,[tt.roofEdge].includes(e)),this.appService.setStates(ua.measure,[tt.basics,tt.roof70,tt.roofCircle].includes(e))}getSection(){var e=Math.round(window.innerHeight*this.goalLine),r=Math.round(window.pageYOffset)+e;this.sectionEls.forEach(o=>{const a=o.id;this.sectionScroll[a].past=this.sectionScroll[a].top<r,o.classList.remove("section-active")});const s=Object.values(this.sectionScroll).filter(o=>o.past).sort((o,a)=>a.top-o.top);return s&&s[0]?s[0].id:void 0}getSide(){return[vr.cross].includes(this.graphic)?Pf.left:Pf.right}}return n.\u0275fac=function(e){return new(e||n)(M(Wi),M(lp),M(rr),M(As),M(Td),M($ye))},n.\u0275cmp=ft({type:n,selectors:[["app-main-page"]],hostBindings:function(e,i){1&e&&Xe("scroll",function(s){return i.isScrolledIntoView(s)},!1,GC)},decls:21,vars:31,consts:[[1,"page"],[1,"left-blinder","bg"],[1,"left-flex"],[1,"center"],[1,"right-flex"],[1,"right-blinder","bg"],["class","controls controls-left",4,"ngIf"],["class","controls controls-right",4,"ngIf"],[4,"ngIf"],[1,"goal-marker",3,"ngStyle"],[1,"controls","controls-left"],[1,"controls","controls-right"],[1,"floating","floating-left"],["class","svg-cross",4,"ngIf"],[1,"floating","floating-right"],[1,"svg-cross"],["fxFlex","0 0 0",1,"svg-plan-stair-plan",3,"isChild"],[1,"svg-plan",2,"max-height","580px"],["fxFlex","1 1 50%",1,"svg-stair-plan"],["fxFlex","1 1 50%",1,"svg-stair-steps"]],template:function(e,i){1&e&&(S(0,"div",0)(1,"div"),Dr(2,"async"),Dr(3,"async"),Dr(4,"async"),Dr(5,"async"),Dr(6,"async"),Dr(7,"async"),Dr(8,"async"),ae(9,"div",1),S(10,"main"),ae(11,"div",2),S(12,"div",3),ae(13,"router-outlet"),T(),ae(14,"div",4),T(),ae(15,"div",5),Ge(16,g1e,1,1,"controls",6),Ge(17,_1e,1,1,"controls",7),Ge(18,w1e,7,4,"ng-container",8),Dr(19,"async"),T()(),ae(20,"div",9)),2&e&&($(1),function lF(n,t,e,i,r,s,o,a,l,c,u,d,h,f,p){oa(Gs,Ga,bf(xe(),n,t,e,i,r,s,o,a,l,c,u,d,h,f,p),!0)}("container \n  tag-",Rr(2,13,i.tag$)," \n  floor-",Rr(3,15,i.floor$)," \n  section-",Rr(4,17,i.scroll$).section," \n  show-",Rr(5,19,i.scroll$).graphicSide," \n  ",Rr(6,21,i.popupActive$)?"popup-active":""," \n  ",Rr(7,23,i.fullscreen$)?"fullscreen":"","\n  ",Rr(8,25,i.cssStates$)," \n  "),$(15),Z("ngIf",i.graphicSide===i.GraphicSide.left),$(1),Z("ngIf",i.graphicSide===i.GraphicSide.right),$(1),Z("ngIf",Rr(19,27,i.scroll$).graphic),$(2),Z("ngStyle",Sl(29,M1e,100*i.goalLine+"vh")))},directives:[Rb,Ys,s0e,h0e,_0e,p1,I0e,h1e,m1e,ld,Bb],pipes:[kf],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.page[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:row;flex:1 1 100vw}.container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{max-width:800px;justify-content:center;display:flex;flex-direction:row;flex:10 1 800px}.container[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{transition:.6s}.container.show-left[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container.show-left[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container.show-right[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 0vw}.container.show-right[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 100vw;border-left:0vw solid transparent;border-right:0vw solid transparent;max-width:450px;overflow-x:hidden;z-index:2}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{display:block;height:100%;width:0vw;position:absolute;z-index:5;transition:.8s ease-in;opacity:.8}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%]{left:0px}.container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{right:0px}.container.fullscreen.show-left[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container.fullscreen.show-right[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{transition:.6s ease-out;width:100vw;opacity:1}.floating[_ngcontent-%COMP%]{top:0;height:100vh;position:fixed;max-width:100vh;display:flex;flex-direction:column;justify-content:center;z-index:500;transition:1s}.floating.floating-right[_ngcontent-%COMP%]{left:50vw;width:50vw}.floating.floating-left[_ngcontent-%COMP%]{right:50vw;width:50vw}.floating[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 100%;position:relative}.show-right[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:50vw;right:100vw}.show-left[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:50vw;left:100vw}.fullscreen.show-left[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:100vw;right:0vw;max-width:100vw}.fullscreen.show-right[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:100vw;left:0vw;max-width:100vw}.goal-marker[_ngcontent-%COMP%]{position:fixed;border:1px solid var(--color-30);height:13px;width:13px;transform:rotate(45deg);left:-10px}"],data:{animation:[OG,Fye]}}),n})();const S1e=["*"];let rM=(()=>{class n{constructor(e,i){this.appService=e,this.elementRef=i}mouseover(){this.appService.setTag(this.tag)}mouseout(){this.appService.setTag(void 0)}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(M(Wi),M(Ve))},n.\u0275cmp=ft({type:n,selectors:[["tag"]],hostBindings:function(e,i){1&e&&Xe("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})},inputs:{tag:"tag"},ngContentSelectors:S1e,decls:2,vars:0,consts:[["mat-flat-button","",1,"mat-button-tag"]],template:function(e,i){1&e&&(zi(),S(0,"button",0),Tn(1),T())},directives:[AU],styles:[".mat-button-tag[_ngcontent-%COMP%]{padding:3px 0 5px;border:1px solid var(--color-30);line-height:1em}.mat-button-tag[_ngcontent-%COMP%]     .mat-button-wrapper{padding:8px;font-weight:initial}"]}),n})(),E1e=(()=>{class n{constructor(e,i,r,s){this.builder=e,this.overlay=i,this.appService=r,this.viewContainerRef=s,this.open=!1,this.animate=!0,this.byClick=!1,this.unsubscribe=new Tt}mouseover(){this.attachOverlay()}mouseout(){this.appService.popupActive$.next(!1),this.detachOverlay()}onResize(e){this.updateOnChange()}getPositionStrategy(){let e;return e=this.overlay.position().flexibleConnectedTo(this.viewContainerRef.element.nativeElement).withPositions([new Hb({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,-20),new Hb({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,20,"flipped")]).withPush(!0),e}getScrollStrategy(){return this.overlay.scrollStrategies.reposition()}ngOnInit(){this.pageEl=document.querySelector(".center"),this.btn=this.viewContainerRef.element.nativeElement;const e=this.getPositionStrategy(),i=this.getScrollStrategy();this.overlayRef=this.overlay.create({positionStrategy:e,scrollStrategy:i,hasBackdrop:this.byClick}),this.overlayRef.backdropClick().pipe(In(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.open&&this.attachOverlay()}ngOnDestroy(){this.detachOverlay(),this.unsubscribe.next(),this.unsubscribe.complete(),this.overlayRef.dispose()}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.arrowEl.remove(),this.overlayRef.detach())}attachOverlay(){const e=new j1(this.overlayTemplate,this.viewContainerRef);this.overlayRef&&!this.overlayRef.hasAttached()&&(this.componentRef=this.overlayRef.attach(e),this.updateOnChange(),this.createMakeMeAPopup(),this.appService.popupActive$.next(!0))}createMakeMeAPopup(){this.overlayRef.overlayElement.classList.add("popup","base"),this.arrowEl=document.createElement("div"),this.arrowEl.classList.add("popup-arrow","base"),this.setArrow(),this.overlayRef.overlayElement.append(this.arrowEl)}setArrow(){const{left:e,width:i}=this.btn.getBoundingClientRect(),{x:r}=this.pageEl.getBoundingClientRect();this.arrowEl.style.left=e-r-20+i/2+"px"}updateOnChange(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.updatePosition(),this.overlayRef.updateSize({width:this.pageEl.clientWidth}),this.arrowEl&&this.setArrow())}playAnimation(e,i){const s=this.builder.build(e).create(i);return s.play(),s}enterAnimation(e){return e.style.maxWidth="100%",[bt({"max-width":"0%"}),Yn("150ms ease-out",bt({"max-width":"100%"}))]}leaveAnimation(){return[Yn("200ms ease-in",bt({"max-width":"0%"}))]}}return n.\u0275fac=function(e){return new(e||n)(M(iT),M(Vl),M(Wi),M(kr))},n.\u0275dir=oe({type:n,selectors:[["","overlayTemplate",""]],hostBindings:function(e,i){1&e&&Xe("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})("resize",function(s){return i.onResize(s)},!1,GC)},inputs:{overlayTemplate:"overlayTemplate",open:"open"}}),n})();function T1e(n,t){1&n&&k(0),2&n&&Ot(" Insulation keeps you warm. Passiv houses have almost no heatloss so therefore (almost) no heating is needed! The walls are thicker than you are used to: ",.5," meter ")}function A1e(n,t){1&n&&k(0," In the winter, we need the sun to warmup the house. In the summer the house needs to be shaded on the outside to prevent overheating. ")}function D1e(n,t){1&n&&(k(0," It is even a hashtag "),S(1,"b"),k(2,"#EfficiencyFirst"),T(),k(3,". Why look at green energy if we wast still alot of energy. ( Ofcourse we still need green energy! ). First insulation to the max, before thinking of solarpanels. "))}function R1e(n,t){1&n&&k(0," It is not really a thing, more a concept. The house has a west-east-length of 3 * base-dimension (Rule of thirds / Trinity). It helps the already complex roof to look good. And also, very helpfull with calculations. ")}function I1e(n,t){1&n&&k(0," This extension is to greaten the three-part south facade, creates a bigger roof on the second floor. ")}function k1e(n,t){1&n&&k(0," Dont make this too long, it does not fit with the compact design, enlarge the base-dimension if you like. ")}function O1e(n,t){1&n&&k(0," A concept, how far is the bend-point of the roof, away from the outside wall. ")}function P1e(n,t){if(1&n){const e=Co();Tr(0),S(1,"section",1)(2,"h1"),k(3),T(),S(4,"p",2),k(5," A passiv-haus but in Dutch (neo)-renaissance style, but above all open-source. We love to share our plans as a community. See it as free building plans for your own house or give it to your constructor. Its truly free. "),T()(),S(6,"section",1)(7,"h2"),k(8,"Passiv? "),S(9,"span",3),k(10,"(Its German)"),T()(),S(11,"p"),k(12,"Passive houses are the future. Feel free to "),S(13,"a",4),k(14,"search online for 'Passiv Haus'"),T(),k(15," (not really sexy or anything). Therefor let us try to explain it. Well, really short: "),T(),S(16,"ul")(17,"li")(18,"tag",5),k(19,"Great insulated"),T(),Ge(20,T1e,1,1,"ng-template",null,6,Wa),T(),S(22,"li"),k(23,"Well & compact desinged"),T(),S(24,"li")(25,"tag",5),k(26,"Orientation"),T(),k(27," to the sun "),Ge(28,A1e,1,0,"ng-template",null,7,Wa),T(),S(30,"li"),k(31,"No thermal bridges"),T(),S(32,"li"),k(33,"Can be houses, but also offices etc"),T(),S(34,"li"),k(35,"Sustainable (well in our opinion)"),T()(),S(36,"p"),k(37,"Passiv Haus in one punchline:"),T(),S(38,"div",8)(39,"tag",5),k(40,"Efficiency first"),T(),Ge(41,D1e,4,0,"ng-template",null,9,Wa),T(),S(43,"p"),k(44," Sometimes passive houses are often not so pretty. (maybe, if you like form-follow-function). Effiency first, but style second for us! Therefore we try to combine old design styles with this great concept. "),T()(),S(45,"section",1)(46,"h2"),k(47,"The basics"),T(),S(48,"p"),k(49," The house is based on parametric design. So play with all the sliders, its interactive. Lets start at the very basics. And why does it look like a church from above? "),T(),S(50,"h3"),k(51,"Threefold or Trinity"),T(),S(52,"p"),k(53,"The main house, seen from the south (up here) has three equal parts, we call them the "),S(54,"tag",5),k(55,"base dimension"),T(),k(56,". A design seen often in classical buildings. It comes often with great "),S(57,"tag",10),k(58,"viewlines"),T(),k(59,". "),T(),Ge(60,R1e,1,0,"ng-template",null,11,Wa),S(62,"label")(63,"span"),k(64,"Base dimension "),T(),S(65,"mat-slider",12),Xe("input",function(r){pn(e);const s=Qe();return s.update("house","studAmount",r.value,s.tags.baseDimension)}),T()(),S(66,"label",13)(67,"span"),k(68,"Technical "),T(),k(69),S(70,"tag",5),k(71,"base dimension"),T(),k(72),T(),S(73,"label",13)(74,"span"),k(75,"Design"),T(),S(76,"ul")(77,"li"),k(78,"We follow "),S(79,"a",14),k(80,"Rule of thirds"),T()()()()(),S(81,"section",1)(82,"h2"),k(83,"Extensions"),T(),S(84,"p"),k(85," Break boring lines on the southface and create more interesting view points with a "),S(86,"tag",5),k(87,"south extension"),T(),ae(88,"i"),k(89,". The colder, darker side (less windows by design) is located in the convenient "),S(90,"tag",5),k(91,"north wing"),T()(),S(92,"h3"),k(93,"Body parts "),T(),Ge(94,I1e,1,0,"ng-template",null,15,Wa),Ge(96,k1e,1,0,"ng-template",null,16,Wa),S(98,"label")(99,"span"),k(100,"South extension "),T(),S(101,"mat-slider",17),Xe("input",function(r){pn(e);const s=Qe();return s.update("house","studAmountSouth",r.value,s.tags.extensionToSouth)}),T()(),S(102,"label")(103,"span"),k(104," North wing "),T(),S(105,"mat-slider",18),Xe("input",function(r){pn(e);const s=Qe();return s.update("house","studAmountNorth",r.value,s.tags.extensionToNorth)}),T()(),S(106,"label")(107,"span"),k(108," West wing "),T(),S(109,"mat-slider",18),Xe("input",function(r){pn(e);const s=Qe();return s.update("house","studAmountWest",r.value,s.tags.extensionToWest)}),T()(),S(110,"label")(111,"span"),k(112," East wing "),T(),S(113,"mat-slider",18),Xe("input",function(r){pn(e);const s=Qe();return s.update("house","studAmountEast",r.value,s.tags.extensionToEast)}),T()(),S(114,"label",13)(115,"span"),k(116,"Technical "),T(),S(117,"table")(118,"tr")(119,"td"),k(120),T(),S(121,"td"),k(122," South studs"),T()(),S(123,"tr")(124,"td"),k(125),T(),S(126,"td"),k(127," studs makes a wall"),T()(),S(128,"tr")(129,"td"),k(130),T(),S(131,"td"),k(132," Inside wall Length"),T()(),S(133,"tr")(134,"td"),k(135),T(),S(136,"td"),k(137," Inside wall Area"),T()(),S(138,"tr")(139,"td"),k(140),T(),S(141,"td"),k(142," Outside wall Length"),T()(),S(143,"tr")(144,"td"),k(145),T(),S(146,"td"),k(147," Outside wall Area"),T()(),S(148,"tr")(149,"td"),k(150),Dr(151,"json"),T(),S(152,"td"),k(153," floor "),T()()()()(),S(154,"section",19)(155,"h3"),k(156,"Tower"),T(),S(157,"p"),k(158,"This tower is a practical backdoor and allows you to walk from the kitch to the rest of the house. It creates also a viewpoint from the roof! We like the tower. "),T(),S(159,"mat-slide-toggle",20),Xe("ngModelChange",function(r){return pn(e),Qe().update("house","showTower",r)}),k(160,"With a practical tower "),T()(),S(161,"section",1)(162,"h1"),k(163,"Cross section"),T(),S(164,"h2"),k(165,"Slicing it, the basics"),T(),S(166,"p"),k(167,"High ceilings are nice and makes the house feel larger, they costs more but worth it. Heat problems are less with floorheathing."),T(),S(168,"label")(169,"span"),k(170),T(),S(171,"mat-slider",21),Xe("input",function(r){return pn(e),Qe().update("cross","ceilingHeight",r.value)}),T()(),S(172,"h3"),k(173),T(),S(174,"p"),k(175,"Way too technical in this design fase! However a crawler space can raise the whole building, changing the overall experience. It can protect more against climate change. Floodings or heavy rains. It is also more expensive and takes more time to build."),T(),S(176,"mat-slide-toggle",20),Xe("ngModelChange",function(r){return pn(e),Qe().update("cross","crawlerSpace",r)}),k(177),T(),S(178,"label")(179,"span"),k(180),T(),S(181,"mat-slider",22),Xe("input",function(r){return pn(e),Qe().update("cross","floorAboveGround",r.value)}),T()()(),S(182,"section",1)(183,"h2"),k(184,"Roof style"),T(),S(185,"p")(186,"a",23),k(187,"Mansard or Gambrel roof"),T(),k(188," is gives a nice classic countryside stylefull roof.There are three methods to create them. We check both the \"circle\" and '70\xb0/30\xb0'"),T(),S(189,"h2"),k(190,"Circle-based"),T(),S(191,"p"),k(192,"Draw a "),S(193,"tag",10),k(194,"half circle"),T(),k(195," with 45\xb0 lines to create the breakpoints. If you use the slider to create more overhang, the circle moves with it, to keep proportions. The angles are resp: 67.5\xb0, 22.5\xb0 "),T(),S(196,"label")(197,"span"),k(198,"(Fictive) 'Wider roof'"),T(),S(199,"mat-slider",24),Xe("input",function(r){pn(e);const s=Qe();return s.update("cross","roofCirclePullDown",r.value,s.tags.halfCircle)}),T()(),S(200,"label")(201,"span"),k(202),T(),S(203,"mat-slider",24),Xe("input",function(r){return pn(e),Qe().update("cross","roofCircleWalls",r.value)}),T()()(),S(204,"section",1)(205,"h2"),k(206,"The 70\xb0/30\xb0 roof"),T(),S(207,"p"),k(208,"With this technique, draw a line 70\xb0 until a "),S(209,"tag",5),k(210,"bend point"),T(),k(211,". After than follow 30\xb0. Think about the solar potential! "),T(),k(212," . A common seen classical symmetrical design. "),Ge(213,O1e,1,0,"ng-template",null,25,Wa),S(215,"label")(216,"span"),k(217,"Move "),S(218,"tag",5),k(219,"bend point"),T()(),S(220,"mat-slider",24),Xe("input",function(r){pn(e);const s=Qe();return s.update("cross","roof70offset",r.value,s.tags.bendPoint)}),T()(),S(221,"label")(222,"span"),k(223),T(),S(224,"mat-slider",24),Xe("input",function(r){pn(e);const s=Qe();return s.update("cross","roof70Walls",r.value,s.tags.roofWalls)}),T()(),S(225,"label")(226,"span"),k(227),T(),S(228,"mat-slider",24),Xe("input",function(r){return pn(e),Qe().update("cross","roof70Extension",r.value)}),T()()(),S(229,"section",1)(230,"h3"),k(231,"Roof, 70\xb0 or Circle"),T(),S(232,"p"),k(233,"We should choose a roof. There are more possibilities in the end. But for now a mansard roof it is. "),T(),S(234,"mat-button-toggle-group",26),Xe("ngModelChange",function(r){return pn(e).ngIf.cross.roofStyle=r})("ngModelChange",function(r){return pn(e),Qe().choosenRoofstyle(r)}),S(235,"mat-button-toggle",27),k(236,"Circle based"),T(),S(237,"mat-button-toggle",27),k(238,"Both"),T(),S(239,"mat-button-toggle",27),k(240,"70\xb0 based"),T()()(),S(241,"section",1)(242,"h3"),k(243,"The roof edge"),T(),S(244,"p"),k(245,"We can look at the silhouette to image it a bit better. We can also add or remove a gutter, and more decorative "),T()(),Ar()}if(2&n){const e=t.ngIf,i=ui(21),r=ui(29),s=ui(42),o=ui(61),a=ui(95),l=ui(97),c=ui(214),u=Qe();$(1),Z("id",u.Section.welcome),$(2),Ot("Welcome to ",e.name,""),$(3),Z("id",u.Section.passiv),$(12),Z("tag",u.tags.insulated)("overlayTemplate",i),$(7),Z("tag",u.tags.orientation)("overlayTemplate",r),$(14),Z("tag",u.tags.efficiency)("overlayTemplate",s),$(6),Z("id",u.Section.basics),$(9),Z("tag",u.tags.baseDimension)("overlayTemplate",o),$(3),Z("tag",u.tags.viewlines),$(8),Z("ngModel",e.studAmount),$(4),Ot(" We talk in studs, wooden columns in the wall. They are the core that follow a grid of ",100*e.studDistance," cm. The "),$(1),Z("tag",u.tags.baseDimension)("overlayTemplate",o),$(2),Ot(" wall has now ",e.studAmount," studs. "),$(9),Z("id",u.Section.extensions),$(5),Z("tag",u.tags.extensionToSouth)("overlayTemplate",a),$(4),Z("tag",u.tags.extensionToNorth)("overlayTemplate",l),$(11),Z("ngModel",e.studAmountSouth)("displayWith",u.studLabel),$(4),Z("min",9)("max",18)("ngModel",e.studAmountNorth)("displayWith",u.studLabel),$(4),Z("min",5)("max",15)("ngModel",e.studAmountWest)("displayWith",u.studLabel),$(4),Z("min",5)("max",9)("ngModel",e.studAmountEast)("displayWith",u.studLabel),$(7),Ju(e.studAmountSouth),$(5),Ju(e.studAmountNorth),$(5),Ot("",e.stats.wall.innerLength,"m"),$(5),Ot("",e.stats.wall.innerArea,"m2"),$(5),Ot("",e.stats.wall.outerLength,"m"),$(5),Ot("",e.stats.wall.outerArea,"m2"),$(5),Ot("",Rr(151,75,e.stats.floor.total),"m2"),$(4),Z("id",u.Section.tower),$(5),Z("ngModel",e.showTower),$(2),Z("id",u.Section.roofBasics),$(9),Ot("Ceiling height: ",e.cross.ceilingHeight," m"),$(1),Z("ngModel",e.cross.ceilingHeight),$(2),Ot("Foundation: ",e.cross.crawlerSpace?"crawler space":"flat foundation",""),$(3),Z("ngModel",e.cross.crawlerSpace),$(1),Ot("With a ",e.cross.crawlerSpace?"crawler space":"flat foundation"," "),$(3),Ot("Ground floor above ground: ",e.cross.floorAboveGround," m"),$(1),Z("ngModel",e.cross.floorAboveGround),$(1),Z("id",u.Section.roofCircle),$(11),Z("tag",u.tags.halfCircle),$(6),Z("ngModel",e.cross.roofCirclePullDown),$(3),Ot("Walls under the roof ",e.cross.roofCircleWalls,"m"),$(1),Z("ngModel",e.cross.roofCircleWalls),$(1),Z("id",u.Section.roof70),$(5),Z("tag",u.tags.bendPoint)("overlayTemplate",c),$(9),Z("tag",u.tags.bendPoint)("overlayTemplate",c),$(2),Z("ngModel",e.cross.roof70offset),$(3),Ot("Walls under the roof: ",e.cross.roof70Walls,"m"),$(1),Z("ngModel",e.cross.roof70Walls),$(3),Ot("Roof extension: ",e.cross.roof70Extension,"m"),$(1),Z("ngModel",e.cross.roof70Extension),$(1),Z("id",u.Section.roofChoice),$(5),Z("ngModel",e.cross.roofStyle),$(1),Z("value",u.RoofStyle.roofCircle),$(2),Z("value",u.RoofStyle.roofCircleAnd70),$(2),Z("value",u.RoofStyle.roof70),$(2),Z("id",u.Section.roofEdge)}}let L1e=(()=>{class n{constructor(e,i){this.houseService=e,this.appService=i,this.house$=this.houseService.house$,this.Section=tt,this.tags=To,this.RoofStyle=Rs,this.update=this.houseService.update}ngAfterViewInit(){}studLabel(e){return`#${e} `}sizeLabel(e){return`${e} m`}choosenRoofstyle(e){this.houseService.update("cross","roofStyle",e)}}return n.\u0275fac=function(e){return new(e||n)(M(rr),M(Wi))},n.\u0275cmp=ft({type:n,selectors:[["app-page-house"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"id"],[1,"mat-caption"],[2,"font-size","0.7em"],["href","https://passivehouse.com/","target","_blank"],["cdkOverlayOrigin","",3,"tag","overlayTemplate"],["insulated",""],["orientation",""],["fxLayoutAlign","center",2,"margin","8px 0 32px"],["efficiency",""],[3,"tag"],["baseDimension",""],["min","6","max","15","tickInterval","1",3,"ngModel","input"],[1,"technical"],["href","https://en.wikipedia.org/wiki/Rule_of_thirds"],["extensionToSouth",""],["extensionToNorth",""],["min","0","max","4","thumbLabel","","tickInterval","1",3,"ngModel","displayWith","input"],["thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],[2,"padding-bottom","80px",3,"id"],[3,"ngModel","ngModelChange"],["min","1.9","max","3.6","step","0.1","tickInterval","1",3,"ngModel","input"],["min","0","max","1","step","0.1","tickInterval","1",3,"ngModel","input"],["href","https://en.wikipedia.org/wiki/Mansard_roof","target","_blank"],["min","0","max","2","step","0.1","tickInterval","1",3,"ngModel","input"],["bendPoint",""],["name","roofstyle",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,i){1&e&&(Ge(0,P1e,246,77,"ng-container",0),Dr(1,"async")),2&e&&Z("ngIf",Rr(1,1,i.house$))},directives:[Ys,rM,Qde,E1e,Wf,q1,UT,hb,ZU,oz,az],pipes:[kf,gN],styles:[""]}),n})();function F1e(n,t){if(1&n){const e=Co();Tr(0),S(1,"section",1)(2,"h1"),k(3,"Stairs"),T(),S(4,"p",2),k(5," Stairs are its own thing. There are even whole pinterest collections dedicated to stairs. "),T()(),S(6,"section",1)(7,"h2"),k(8,"Stair 101"),T(),S(9,"p"),k(10," There are different approaches to calculate stairs. We already did the following for us. "),T(),S(11,"ol")(12,"li"),k(13,"The "),S(14,"b"),k(15,"vertical"),T(),k(16),T(),S(17,"li"),k(18,"Building code allows the rise of the step to be between: 182mm and 220mm.Therefore we can only have between "),S(19,"b"),k(20),T()()(),S(21,"label")(22,"span"),k(23),T(),S(24,"mat-slider",3),Xe("input",function(r){pn(e);const s=Qe();return s.update("stair","steps",r.value,s.Tag.amountSteps)}),T()(),S(25,"ol",4)(26,"li"),k(27,"The min and max "),S(28,"b"),k(29,"horizontal distance"),T(),k(30," is easy, the stairs should be between 30\xb0 and 35\xb0"),T()(),S(31,"label")(32,"span"),k(33),T(),S(34,"mat-slider",5),Xe("input",function(r){return pn(e),Qe().update("stair","totalRun",r.value)}),T()()(),S(35,"section",1)(36,"h2"),k(37,"The good, bad and perfect stairs"),T(),S(38,"label")(39,"span"),k(40,"Checks"),T(),k(41),S(42,"div"),k(43),T(),S(44,"div"),k(45),T(),S(46,"div"),k(47),T(),S(48,"div"),k(49),T()()(),S(50,"section",1)(51,"h2"),k(52,"Stair layout"),T(),S(53,"p"),k(54," Stairs can be straight, but we like to have two bends. This makes the stairs relative more compact. It prevents to falldown the complete stairs in accidents. Sideplus, it comes with a nice open hall effect. "),T(),S(55,"label")(56,"span"),k(57),T(),S(58,"mat-slider",6),Xe("input",function(r){return pn(e),Qe().update("stair","walkWidth",r.value)}),T()(),S(59,"label")(60,"span"),k(61),T(),S(62,"mat-slider",6),Xe("input",function(r){return pn(e),Qe().update("stair","totalWidth",r.value)}),T()(),S(63,"label")(64,"span"),k(65),T(),S(66,"mat-slider",7),Xe("input",function(r){return pn(e),Qe().update("stair","stepsRight",r.value)}),T()(),S(67,"p"),k(68," For now we keep the model as simple as possible. Stairs are quite complex. Steps can change direction slowly to make it a piece of art by it self. "),T(),ae(69,"img",8),T(),Ar()}if(2&n){const e=t.ngIf,i=Qe();$(1),Z("id",i.Section.stairStart),$(5),Z("id",i.Section.stairBasic),$(10),Ot(" distance is already decided by the house: ",e.stair.totalRise,"m"),$(4),gg("",e.stair.minSteps," and ",e.stair.maxSteps," steps"),$(3),Ot("Total steps: horizontal ",e.stair.steps,""),$(1),Z("min",e.stair.minSteps)("max",e.stair.maxSteps)("ngModel",e.stair.steps)("displayWith",i.sizeLabel),$(9),Ot("Total length stairs: horizontal ",e.stair.totalRun,"m"),$(1),Z("min",i.totalRunMin)("max",i.totalRunMax)("ngModel",e.stair.totalRun)("displayWith",i.sizeLabel),$(1),Z("id",i.Section.stairCheck),$(6),Ot(" The angle will be ",e.stair.angle,"\xb0 "),$(2),Ot("Steps: ",e.stair.steps,""),$(2),Ot("Rise: ",e.stair.rise," m"),$(2),Ot("Run: ",e.stair.run," m"),$(2),Ot("Rise+Run+Rise: ",10*e.stair.step," cm"),$(1),Z("id",i.Section.stairPlan),$(7),Ot("Width ",e.stair.walkWidth,"m"),$(1),Z("min",.7)("max",1.2)("ngModel",e.stair.walkWidth),$(3),Ot("Total width of stairs: ",e.stair.totalWidth,"m"),$(1),Z("min",2*e.stair.walkWidth)("max",12)("ngModel",e.stair.totalWidth),$(3),gg("Steps on the rightside: ",e.stair.stepsRight," of ",e.stair.steps,""),$(1),Z("min",0)("max",e.stair.steps/2)("ngModel",e.stair.stepsRight)}}let N1e=(()=>{class n{constructor(e,i){this.houseService=e,this.appService=i,this.house$=this.houseService.house$,this.Section=tt,this.Tag=To,this.tagsKeys=Object.keys(To),this.deltas=4,this.update=this.houseService.update}ngAfterViewInit(){}sizeLabel(e){return`${e}m`}get totalRunMax(){return jt(1,this.house$.value.stair.totalRise/Math.tan(24*Math.PI/180))}get totalRunMin(){return jt(1,this.house$.value.stair.totalRise/Math.tan(40*Math.PI/180))}get rangeRun(){return this.totalRunMax-this.totalRunMin}get rangeSteps(){const e=this.house$.value.stair;return e.maxSteps-e.minSteps+1}currentRun(e){return jt(2,e/(this.deltas-1)*this.rangeRun+this.totalRunMin)}currentCell(e,i){const r=this.house$.value.stair,s=this.currentRun(i);return jt(-1,s/(r.minSteps+e)*1e3)}score(e,i){return e<220?"too-little":e>300?"too-much":void 0}select(e,i){this.update("stair","steps",e),this.update("stair","totalRun",i)}}return n.\u0275fac=function(e){return new(e||n)(M(rr),M(Wi))},n.\u0275cmp=ft({type:n,selectors:[["app-page-stairs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"id"],[1,"mat-caption"],["step","1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","3"],["step","0.1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["step","0.1","tickInterval","1",3,"min","max","ngModel","input"],["step","1","tickInterval","1",3,"min","max","ngModel","input"],["width","100%","src","https://berkela.home.xs4all.nl/stijgpunten/afbeeldingen/tn_2005extra07_11.jpg"]],template:function(e,i){1&e&&(Ge(0,F1e,70,35,"ng-container",0),Dr(1,"async")),2&e&&Z("ngIf",Rr(1,1,i.house$))},directives:[Ys,q1,UT,hb],pipes:[kf],styles:[".matrix[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-wrap:wrap;flex-direction:row}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{display:block;border:1px solid black;border-radius:0;padding:0;margin:0;min-width:initial;min-height:inherit;line-height:1em;white-space:pre-wrap}.matrix[_ngcontent-%COMP%]   .matrix-cell.too-much[_ngcontent-%COMP%], .matrix[_ngcontent-%COMP%]   .matrix-cell.too-litte[_ngcontent-%COMP%]{border:1px solid white;opacity:.6}"]}),n})(),B1e=(()=>{class n{constructor(e,i,r){this.zone=e,this.appService=i,this.houseService=r,this.Tag=To,this.Section=tt}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return n.\u0275fac=function(e){return new(e||n)(M(It),M(Wi),M(rr))},n.\u0275cmp=ft({type:n,selectors:[["app-page-construction"]],decls:100,vars:9,consts:[[3,"id"],[3,"tag"]],template:function(e,i){1&e&&(S(0,"h1"),k(1," Construction\n"),T(),S(2,"section",0)(3,"h2"),k(4," Foundation "),T(),S(5,"ol")(6,"li"),k(7,"Stroke"),T(),S(8,"li"),k(9,"Poles"),T(),S(10,"li"),k(11,"Slab (not for crawler spaces)"),T(),S(12,"li"),k(13,"Slab + basement"),T()(),S(14,"p"),k(15," Poles Stroke "),T()(),S(16,"section",0)(17,"h2"),k(18," Crawler space "),T(),S(19,"p"),k(20," A crawler space is a space under the ground floor. It highers the ground floor, so a handyman can go under. And change pipes and such after the house is build. Kitchen on the otherside of the house? Or even only the sink? Crawlerspaces helps a lot."),ae(21,"br")(22,"br"),k(23," It helps too keep your wooden floors dry incase of a flooding or heavy rains. (to some limit ofcourse). "),T()(),S(24,"section",0)(25,"h2"),k(26," Walls & Roof "),T(),S(27,"p"),k(28," Wood is the material for construction. It is a storage of CO"),S(29,"sub"),k(30,"2"),T(),k(31,", natural, light and easy to work with. Modern products like, "),S(32,"tag"),k(33,"I Joists"),T(),k(34,", are even stronger than their natual twins. And you don't need to have a 30cm tree to produce a 30cm beam, so trees can be used more effective. (A disadvantage can be the glue used tho). Wood can last forever, think of all the old houses in old cities."),ae(35,"br")(36,"br"),T(),S(37,"h2"),k(38,"The water problem"),T(),S(39,"p"),k(40," Warm air can contain more water, so the inside air normally would go through the wall and cools down. To a point that it cannot hold longer that amount of water, so it condens in the middle of the wall. "),ae(41,"br")(42,"br"),k(43," Traditonal building takes that problem with plastic wraps. One on the outside to keep weather out. And a even more water-closed layer in the inside. Water moves out the contsturction. It is important during the building fase, to keep everything relatively dry. "),ae(44,"br")(45,"br"),k(46," The alternative is: "),S(47,"tag"),k(48,"damp Open"),T(),k(49,". where no wraps are needed. The innerlayer of the house has a water-closed natural layer (OSB sheets). The outside layer is 'damp-open' so it would not absorble rainwater, but the moist air from inside can escape. It is more like a Dutch slogan: not fighting the water, but living with (some) water. "),ae(50,"br")(51,"br"),k(52," We try to look what is the best insulation out there. We think wood-fiber is the best most sustainable in therms of production/insulation values. Stone/glass fibers are a little bit less on the production level, but a bit more durable over time. "),ae(53,"br")(54,"br"),S(55,"tag",1),k(56,"Wood fiber panels"),T(),k(57," are treated with bitume, there are light, water-resistand and still insulating. They are a perfect layer for the outside layer of the construction (not final outer layer). "),ae(58,"br")(59,"br"),k(60," On the inside of the OSB is an extra 2cm layer and finised of with wood or drywall(gipsplates). This layer is pratical, because all the switches and wallsocket cannot interfair with the air-tight-layer. With a "),S(61,"tag",1),k(62," pipeLayer"),T(),k(63," is it: "),T(),S(64,"ol")(65,"li"),k(66,"Easier to buid keep it "),S(67,"tag",1),k(68,"air tight"),T()(),S(69,"li"),k(70,"Deal with sockets in a later stage"),T(),S(71,"li"),k(72,"Modifications"),T()()(),S(73,"section",0)(74,"h2"),k(75," Walls outerfinish "),T(),S(76,"p"),k(77," Wooden house, has wood on the outside. Not completely tru. Wood is a sustainable choice (altho we wonder, painting it every 10 years...), but in theory can we have anything on the outside. Keep in mind if you build"),S(78,"tag"),k(79,"damp-open "),T(),k(80," that the finish-layer should also be damp-open. Bricks are for example. The cement is defentily not sustainable, but there is no maintaince in the comming 100-ish years. "),ae(81,"br")(82,"br"),k(83," In l\xf6vlund did we pick for brick-strips. The reason is, its thinner/lighter and we aren't skilled in bricklaying. We can glue strips on a wall. It is for now unclear how we can attach the strips. Cement fiber plates? "),T()(),S(84,"section",0)(85,"h2"),k(86," Floor "),T(),S(87,"p"),k(88," Mass (heavy things) can keep heat. Like a stone wall after sunset would emit heat. It works also the oppostite. Like churches are nice cool in the summer. Mass balance out the heat in a nice way. A complete wooden house, would not have that effect. Therefore some mass is a good thing to have. "),ae(89,"br")(90,"br"),k(91," A holow-concrate-plate are relatively light and have the mass we look for. They can come with insulation, altho this would not be damp-open. "),T()(),S(92,"section",0)(93,"h2"),k(94," The roof "),T(),S(95,"p"),k(96," The roof looks a lot like a wall, maybe a bit thinker. The inside does not need a OSB layer ???ToDo??? "),ae(97,"br")(98,"br"),k(99," The outside layer is ofcourse no bricks, but rooftiles (sometimes architects mixed them up...). "),T()()),2&e&&($(2),Z("id",i.Section.contructionFoundation),$(14),Z("id",i.Section.contructionCrawlerSpace),$(8),Z("id",i.Section.contructionWall),$(31),Z("tag",i.Tag.woodFiberPlate),$(6),Z("tag",i.Tag.pipeLayer),$(6),Z("tag",i.Tag.airTight),$(6),Z("id",i.Section.contructionWallFinish),$(11),Z("id",i.Section.contructionFloor),$(8),Z("id",i.Section.contructionRoof))},directives:[rM],styles:[""]}),n})(),V1e=(()=>{class n{constructor(e,i,r){this.houseService=e,this.threeService=i,this.appService=r,this.house$=this.houseService.house$,this.Section=tt,this.Tag=To,this.wallDetail="wallDetail",this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}ngAfterViewInit(){this.subscriptions.push()}showPerSection(){}}return n.\u0275fac=function(e){return new(e||n)(M(rr),M(y8),M(Wi))},n.\u0275cmp=ft({type:n,selectors:[["app-page-facade"]],decls:41,vars:3,consts:[[3,"id"],[1,"mat-caption"],[1,"technical",2,"max-width","640px"],["fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","center center",2,"padding","16px 0 24px"],["src","/assets/img/window_1.jpg",2,"max-height","360px"],["src","/assets/img/window_2.jpg",2,"max-height","360px"],["src","https://ars.els-cdn.com/content/image/1-s2.0-S0378778816316383-gr9.jpg"],["src","/assets/img/door_step_1.jpg",2,"max-height","360px"]],template:function(e,i){1&e&&(S(0,"section",0)(1,"h1"),k(2,"Facade"),T(),S(3,"p",1),k(4," We cover here all the basics about the outside of the house. Windows, doors, domers and bricks. "),T()(),S(5,"section",0)(6,"h1"),k(7,"Window"),T(),S(8,"p"),k(9," Windows are a tradeoff between a nice open light house and: heatloss, heatgain, complexer builds and more exepensive. In a passiv house, belongs high end windows, triple glass and high-end framing. That makes it one of the most costly invenstments. "),T(),S(10,"label",2)(11,"span"),k(12,"Design"),T(),S(13,"span"),k(14," Dutch traditional windows have some variations. "),ae(15,"br")(16,"br"),k(17," The right one is is nicely detailed. Look how the windowframe ends in a litte stone, to keep it dry and prevent rotting. However the windowframe is missing at the bottom, the window rest on the stone. Not our modern standards. "),ae(18,"br")(19,"br"),k(20," The major difference between them is that the left one has a frame at the bottom. That is better insulated, and we do need to use less pressious stone. "),T(),S(21,"div",3),ae(22,"img",4)(23,"img",5),T(),S(24,"span"),k(25," Furthermore both window-bottom-stones go into the brickwork. If you don't do this, you would create a channel for rainwater (wind blows it in the corner). And the dirt will collect on your walls. Now it would drip off. "),T()(),S(26,"p"),k(27," Place the window in the middle of insulation "),ae(28,"img",6),T()(),S(29,"section",0)(30,"h1"),k(31,"Doors"),T(),S(32,"p"),k(33," For guests the first warm welcome "),T(),S(34,"label",2)(35,"span"),k(36,"Design"),T(),S(37,"span"),k(38,"They kinda look like windows. Ofcourse the bottomframe is missing here. The bottom frame should be wheelchair friendly, altho its a bit contradictive with a eleveated ground floor (due to crawler space). The door and frame should be extreme insulated. "),T(),S(39,"div",3),ae(40,"img",7),T()()()),2&e&&(Z("id",i.Section.facadeStart),$(5),Z("id",i.Section.facadeWindow),$(24),Z("id",i.Section.facadeDoor))},directives:[Jg,gb,Wf],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:48px;align-items:center}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})(),H1e=(()=>{class n{constructor(e,i,r){this.zone=e,this.appService=i,this.houseService=r,this.Tag=To,this.Section=tt}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return n.\u0275fac=function(e){return new(e||n)(M(It),M(Wi),M(rr))},n.\u0275cmp=ft({type:n,selectors:[["app-page-installation"]],decls:93,vars:9,consts:[[3,"id"],[3,"tag"]],template:function(e,i){1&e&&(S(0,"h1"),k(1,"Installations"),T(),S(2,"section",0)(3,"h2"),k(4,"Drink water"),T(),S(5,"p"),k(6," Not anything special here on the cold side. You can have a local source if you live on the countryside. "),ae(7,"br")(8,"br"),k(9," Hot/Warm drinkwater is needed in the sinks and showers. This water can be heated up via the central "),S(10,"tag",1),k(11," warm water buffer"),T(),k(12,". A big tank that takes heat from different sources, and allows for hotwater and even heating. "),T()(),S(13,"section",0)(14,"h2"),k(15,"Heating"),T(),S(16,"p"),k(17," This is a bit of a contraverse subject. A passive house is passive, it receives energy from the sun, people and machines. The heatloss is minimum. Some passive houses don't need heating at all! In some colder climates some heating in extreme winters can be needed. There is only one real option (except air heating, which is fine for a few days, but less healty): floorheathing. It can use low-heat water from the "),S(18,"tag",1),k(19," warm water buffer"),T(),k(20,"1 "),T()(),S(21,"section",0)(22,"h2"),k(23,"Electricity"),T(),S(24,"p"),k(25," We like the off-grid principles, but still difficult to achive in the 2020s. However we can take away a huge part of the electricity needed by solar panels and store energy in form of warm water. We can use solar-heat-pannels or heating the overflow of electricity during the day to warm up the "),S(26,"tag",1),k(27," warm water buffer "),T(),k(28,". Warm water can be used in the shower, or heating. "),ae(29,"br")(30,"br"),k(31," This Mansard roof is a (near) perfect angle for solarpannels. However the to make it look nice is harder. We are still looking for the right panel types with old, classical rooftiles. "),ae(32,"br")(33,"br"),k(34," There is a balance between the time you need electricity (evening, electricity-car & cooking) and when they produce the most (around noon). If you can return-to-the-net orientation to noon is the best. Otherwise some pannels could actually more orientated to the west. "),T()(),S(35,"section",0)(36,"h2"),k(37,"Grey water"),T(),S(38,"p"),k(39," With a fancy word, climate adaption: Save rain water when it rains, like a buffer, an use it when a draught happens, or save on treated drinkwater. Rainwater water is perfect, because there are amost no levels of calculium. Water your plants with it, they love it! Flush the toilets with it and was your cloths with it, you ll see that you need less soap. "),ae(40,"br")(41,"br"),k(42," We need a big watertank outside in the ground (10m"),S(43,"sub"),k(44,"3"),T(),k(45,"), a pomp and 3-filter system. All the systems that need to use the rain water need also 'grey'-pipes. If the rainwater tank is empty, you still want the flush the toilets. There is a machine that puts normal drink-water in the 'grey'-pipes as backup. Automatically! "),ae(46,"br")(47,"br"),k(48,"In theory showering with rainwater seems perfect, but most law forbids to bend cold-rainwater with warm-drinkwater. If you do, you need less soap and your hair will be smooooth. "),T()(),S(49,"section",0)(50,"h2"),k(51,"Ventilation"),T(),S(52,"p"),k(53," A passive house is air-tight. It saves on heatloss (more than you would think). A modern house has a blow-in and suck-out ventilation system. The system can take the heatout of exit-air and warm the incomming air up. Only 6% of the heat is lost. A normal ventilation is 100% heatloss. Air-tight, than I cann't open my windows. "),ae(54,"br"),k(55," Bit of a missconception. If the outside temperature is near the inside temperature it's completely fine. Altho with a good climate system you shouldn't feel the need to open the windows! This closed system filters the air. It is perfect when there is smog or if you have hayfever or other allergies . "),ae(56,"br")(57,"br"),k(58," Some rooms get fresh air, livingroom, sleepingrooms. And some rooms the air is pomped out, the wetrooms and kitchen. This is in balance. In the floor there is some space for this ducts. In the "),S(59,"tag"),k(60,"installation room"),T(),k(61," there is a quite big pomp / filter. "),T()(),S(62,"section",0)(63,"h2"),k(64,"Domotica / Smart home"),T(),S(65,"p"),k(66," With more complex houses, house should become more smart. The air, and maybe the heating, should be automatic. You shouldn't even notice it. On hot summer days, the sunscreens should come down, and with rain up. "),ae(67,"br")(68,"br"),k(69," There is a basic level of intellicance needed but we can take it a few steps further with automatic lights and such. 'Smart home' creates some irritations here and there. And often completely undestandable. A smart light withouth a button is annoying, sometimes you used need a button and not a voicecommand or smartphone. A smart home has them all, but above all knows when you want to turn on the lamp. "),ae(70,"br")(71,"br"),k(72,"Think of (all if overrulable) "),T(),S(73,"ul")(74,"li"),k(75,"Lights dimm more if its evening"),T(),S(76,"li"),k(77,"Red nightlight in the toilet after 23:00"),T(),S(78,"li"),k(79,"Block the sunlight with screens"),T(),S(80,"li"),k(81,"Random light go on if you are on holiday"),T(),S(82,"li"),k(83,"Remote controllable (local VPN not via cloud)"),T(),S(84,"li"),k(85,"More secure, camera's and alarms"),T()(),ae(86,"br")(87,"br"),S(88,"p"),k(89," Wifi is great, but cables are better. If you build a new home, put some more internetcables than needed. A smart home can uses internet cables for sensors, camera and of course computers. Cat 6 cables are easy the work with and fine speeds for most applications (if not longer than 30m orso). Maybe put up a better cat cable for your work- or kids gamestations. "),ae(90,"br")(91,"br"),k(92," For us this is still a process we need to rethink. For now we think one single local controler per room for a more decentralized system. Light switches to has a twisted-pair wire back to the room-controller. The light is on a hotel-switch so the button would always work as the digital version. "),T()()),2&e&&($(2),Z("id",i.Section.instaltionDrinkWater),$(8),Z("tag",i.Tag.warmWaterBuffer),$(3),Z("id",i.Section.instaltionHeating),$(5),Z("tag",i.Tag.warmWaterBuffer),$(3),Z("id",i.Section.instaltionElectricity),$(5),Z("tag",i.Tag.warmWaterBuffer),$(9),Z("id",i.Section.instaltionGreyWater),$(14),Z("id",i.Section.instaltionVentilation),$(13),Z("id",i.Section.instaltionSmartHome))},directives:[rM],styles:[""]}),n})();var U1e=function(){function n(t){this.type=t,this.target=null}return n.prototype.preventDefault=function(){this.defaultPrevented=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n}();const gc=U1e;var z1e=function(){function n(){this.disposed=!1}return n.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},n}();const eI=z1e;function xh(n,t){return n>t?1:n<t?-1:0}function tI(n,t,e){var i=n.length;if(n[0]<=t)return 0;if(t<=n[i-1])return i-1;var r=void 0;if(e>0){for(r=1;r<i;++r)if(n[r]<t)return r-1}else if(e<0){for(r=1;r<i;++r)if(n[r]<=t)return r}else for(r=1;r<i;++r){if(n[r]==t)return r;if(n[r]<t)return"function"==typeof e?e(t,n[r-1],n[r])>0?r-1:r:n[r-1]-t<t-n[r]?r-1:r}return i-1}function G1e(n,t,e){for(;t<e;){var i=n[t];n[t]=n[e],n[e]=i,++t,--e}}function b8(n,t){for(var e=Array.isArray(t)?t:[t],i=e.length,r=0;r<i;r++)n[n.length]=e[r]}function wh(n,t){var e=n.length;if(e!==t.length)return!1;for(var i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function hm(){return!0}function sM(){return!1}function Mh(){}var Br="function"==typeof Object.assign?Object.assign:function(n,t){if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(n),i=1,r=arguments.length;i<r;++i){var s=arguments[i];if(null!=s)for(var o in s)s.hasOwnProperty(o)&&(e[o]=s[o])}return e};function Tv(n){for(var t in n)delete n[t]}var x8="function"==typeof Object.values?Object.values:function(n){var t=[];for(var e in n)t.push(n[e]);return t};function Av(n){var t;for(t in n)return!1;return!t}var $1e=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),q1e=function(n){function t(e){var i=n.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return $1e(t,n),t.prototype.addEventListener=function(e,i){if(e&&i){var r=this.listeners_||(this.listeners_={}),s=r[e]||(r[e]=[]);-1===s.indexOf(i)&&s.push(i)}},t.prototype.dispatchEvent=function(e){var i="string"==typeof e,r=i?e:e.type,s=this.listeners_&&this.listeners_[r];if(s){var o=i?new gc(e):e;o.target||(o.target=this.eventTarget_||this);var a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,l[r]=0),++a[r];for(var c,u=0,d=s.length;u<d;++u)if(!1===(c="handleEvent"in s[u]?s[u].handleEvent(o):s[u].call(this,o))||o.propagationStopped){c=!1;break}if(0==--a[r]){var h=l[r];for(delete l[r];h--;)this.removeEventListener(r,Mh);delete a[r]}return c}},t.prototype.disposeInternal=function(){this.listeners_&&Tv(this.listeners_)},t.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},t.prototype.hasListener=function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)},t.prototype.removeEventListener=function(e,i){var r=this.listeners_&&this.listeners_[e];if(r){var s=r.indexOf(i);-1!==s&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[s]=Mh,++this.pendingRemovals_[e]):(r.splice(s,1),0===r.length&&delete this.listeners_[e]))}},t}(eI);const fm=q1e;function Cn(n,t,e,i,r){if(i&&i!==n&&(e=e.bind(i)),r){var s=e;e=function(){n.removeEventListener(t,e),s.apply(this,arguments)}}var o={target:n,type:t,listener:e};return n.addEventListener(t,e),o}function oM(n,t,e,i){return Cn(n,t,e,i,!0)}function bi(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Tv(n))}var Y1e=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),aM=function(n){function t(){var e=n.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return Y1e(t,n),t.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(e,i){if(Array.isArray(e)){for(var r=e.length,s=new Array(r),o=0;o<r;++o)s[o]=Cn(this,e[o],i);return s}return Cn(this,e,i)},t.prototype.onceInternal=function(e,i){var r;if(Array.isArray(e)){var s=e.length;r=new Array(s);for(var o=0;o<s;++o)r[o]=oM(this,e[o],i)}else r=oM(this,e,i);return i.ol_key=r,r},t.prototype.unInternal=function(e,i){var r=i.ol_key;if(r)!function X1e(n){if(Array.isArray(n))for(var t=0,e=n.length;t<e;++t)bi(n[t]);else bi(n)}(r);else if(Array.isArray(e))for(var s=0,o=e.length;s<o;++s)this.removeEventListener(e[s],i);else this.removeEventListener(e,i)},t}(fm);const w8=aM;function dn(){return function(){throw new Error("Unimplemented abstract method.")}()}var K1e=0;function Rn(n){return n.ol_uid||(n.ol_uid=String(++K1e))}var M8=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),C8=function(n){function t(e,i,r){var s=n.call(this,e)||this;return s.key=i,s.oldValue=r,s}return M8(t,n),t}(gc),Z1e=function(n){function t(e){var i=n.call(this)||this;return Rn(i),i.values_=null,void 0!==e&&i.setProperties(e),i}return M8(t,n),t.prototype.get=function(e){var i;return this.values_&&this.values_.hasOwnProperty(e)&&(i=this.values_[e]),i},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&Br({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(e,i){var r;r="change:".concat(e),this.hasListener(r)&&this.dispatchEvent(new C8(r,e,i)),this.hasListener(r="propertychange")&&this.dispatchEvent(new C8(r,e,i))},t.prototype.addChangeListener=function(e,i){this.addEventListener("change:".concat(e),i)},t.prototype.removeChangeListener=function(e,i){this.removeEventListener("change:".concat(e),i)},t.prototype.set=function(e,i,r){var s=this.values_||(this.values_={});if(r)s[e]=i;else{var o=s[e];s[e]=i,o!==i&&this.notify(e,o)}},t.prototype.setProperties=function(e,i){for(var r in e)this.set(r,e[r],i)},t.prototype.applyProperties=function(e){!e.values_||Br(this.values_||(this.values_={}),e.values_)},t.prototype.unset=function(e,i){if(this.values_&&e in this.values_){var r=this.values_[e];delete this.values_[e],Av(this.values_)&&(this.values_=null),i||this.notify(e,r)}},t}(w8);const ll=Z1e;var Q1e=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),J1e=function(n){function t(e){var i=this,s="Assertion failed. See https://openlayers.org/en/v"+"6.15.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(i=n.call(this,s)||this).code=e,i.name="AssertionError",i.message=s,i}return Q1e(t,n),t}(Error);const S8=J1e;function hn(n,t){if(!n)throw new S8(t)}var eAe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),tAe=function(n){function t(e){var i=n.call(this)||this;return i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?i.setGeometry(e):i.setProperties(e)),i}return eAe(t,n),t.prototype.clone=function(){var e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&e.setGeometry(i.clone());var r=this.getStyle();return r&&e.setStyle(r),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(bi(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=Cn(e,"change",this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?function nAe(n){return"function"==typeof n?n:(Array.isArray(n)?t=n:(hn("function"==typeof n.getZIndex,41),t=[n]),function(){return t});var t}(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(ll);const iAe=tAe;var A8,Su="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",rAe=-1!==Su.indexOf("firefox"),oAe=(-1!==Su.indexOf("safari")&&-1==Su.indexOf("chrom")&&(Su.indexOf("version/15.4")>=0||Su.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==Su.indexOf("webkit")&&-1==Su.indexOf("edge")),aAe=-1!==Su.indexOf("macintosh"),E8="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,lM="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,lAe="undefined"!=typeof Image&&Image.prototype.decode,T8=function(){var n=!1;try{var t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}return n}();function cr(n,t){var e=t[0],i=t[1];return t[0]=n[0]*e+n[2]*i+n[4],t[1]=n[1]*e+n[3]*i+n[5],t}function cl(n,t,e,i,r,s,o,a){var l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=o*i*c-a*i*l+t,n[5]=o*r*l+a*r*c+e,n}function cM(n,t){var e=function dAe(n){return n[0]*n[3]-n[1]*n[2]}(t);hn(0!==e,32);var i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return n[0]=o/e,n[1]=-r/e,n[2]=-s/e,n[3]=i/e,n[4]=(s*l-o*a)/e,n[5]=-(i*l-r*a)/e,n}function sI(n){var t="matrix("+n.join(", ")+")";if(lM)return t;var e=A8||(A8=document.createElement("div"));return e.style.transform=t,e.style.transform}new Array(6);function D8(n){for(var t=[1/0,1/0,-1/0,-1/0],e=0,i=n.length;e<i;++e)gm(t,n[e]);return t}function oI(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function R8(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function I8(n,t,e){var i,r;return(i=t<n[0]?n[0]-t:n[2]<t?t-n[2]:0)*i+(r=e<n[1]?n[1]-e:n[3]<e?e-n[3]:0)*r}function Rv(n,t){return k8(n,t[0],t[1])}function pm(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function k8(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function aI(n,t){var o=t[0],a=t[1],l=0;return o<n[0]?l|=16:o>n[2]&&(l|=4),a<n[1]?l|=8:a>n[3]&&(l|=2),0===l&&(l=1),l}function ul(n,t,e,i,r){return r?(r[0]=n,r[1]=t,r[2]=e,r[3]=i,r):[n,t,e,i]}function mm(n){return ul(1/0,1/0,-1/0,-1/0,n)}function Iv(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function gm(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function P8(n,t,e,i,r){for(;e<i;e+=r)_Ae(n,t[e],t[e+1]);return n}function _Ae(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function L8(n,t){var e;return!!((e=t(dM(n)))||(e=t(hM(n)),e)||(e=t(fM(n)),e)||(e=t(Ch(n)),e))&&e}function uM(n){var t=0;return uI(n)||(t=ai(n)*ho(n)),t}function dM(n){return[n[0],n[1]]}function hM(n){return[n[2],n[1]]}function _m(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function vAe(n,t){var e;return"bottom-left"===t?e=dM(n):"bottom-right"===t?e=hM(n):"top-left"===t?e=Ch(n):"top-right"===t?e=fM(n):hn(!1,13),e}function lI(n,t,e,i,r){var s=cI(n,t,e,i),o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],d=s[5],h=s[6],f=s[7];return ul(Math.min(o,l,u,h),Math.min(a,c,d,f),Math.max(o,l,u,h),Math.max(a,c,d,f),r)}function cI(n,t,e,i){var r=t*i[0]/2,s=t*i[1]/2,o=Math.cos(e),a=Math.sin(e),l=r*o,c=r*a,u=s*o,d=s*a,h=n[0],f=n[1];return[h-l+d,f-c-u,h-l-d,f-c+u,h+l-d,f+c+u,h+l+d,f+c-u,h-l+d,f-c-u]}function ho(n){return n[3]-n[1]}function vm(n,t,e){var i=e||[1/0,1/0,-1/0,-1/0];return Ls(n,t)?(i[0]=n[0]>t[0]?n[0]:t[0],i[1]=n[1]>t[1]?n[1]:t[1],i[2]=n[2]<t[2]?n[2]:t[2],i[3]=n[3]<t[3]?n[3]:t[3]):mm(i),i}function Ch(n){return[n[0],n[3]]}function fM(n){return[n[2],n[3]]}function ai(n){return n[2]-n[0]}function Ls(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function uI(n){return n[2]<n[0]||n[3]<n[1]}function F8(n,t){var e=t.getExtent(),i=_m(n);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){var r=ai(e),o=Math.floor((i[0]-e[0])/r)*r;n[0]-=o,n[2]-=o}return n}function ur(n,t,e){return Math.min(Math.max(n,t),e)}var MAe=function(){var n;return n="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},n}(),CAe=function(){var n;return n="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E},n}();function SAe(n,t,e,i,r,s){var o=r-e,a=s-i;if(0!==o||0!==a){var l=((n-e)*o+(t-i)*a)/(o*o+a*a);l>1?(e=r,i=s):l>0&&(e+=o*l,i+=a*l)}return ym(n,t,e,i)}function ym(n,t,e,i){var r=e-n,s=i-t;return r*r+s*s}function pM(n){return n*Math.PI/180}function bm(n,t){var e=n%t;return e*t<0?e+t:e}function Sh(n,t,e){return n+e*(t-n)}function dI(n,t){var e=Math.pow(10,t);return Math.round(n*e)/e}function mM(n,t){return Math.floor(dI(n,t))}function gM(n,t){return Math.ceil(dI(n,t))}var N8=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,B8=/^([a-z]*)$|^hsla?\(.*\)$/i;function V8(n){return"string"==typeof n?n:z8(n)}var TAe=function(){var t={},e=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(e>=1024){var s=0;for(var o in t)0==(3&s++)&&(delete t[o],--e)}r=function AAe(n){var t,e,i,r,s;if(B8.exec(n)&&(n=function H8(n){var t=document.createElement("div");if(t.style.color=n,""!==t.style.color){document.body.appendChild(t);var e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}(n)),N8.exec(n)){var a,o=n.length-1;a=o<=4?1:2;var l=4===o||8===o;t=parseInt(n.substr(1+0*a,a),16),e=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),r=l?parseInt(n.substr(1+3*a,a),16):255,1==a&&(t=(t<<4)+t,e=(e<<4)+e,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[t,e,i,r/255]}else 0==n.indexOf("rgba(")?U8(s=n.slice(5,-1).split(",").map(Number)):0==n.indexOf("rgb(")?((s=n.slice(4,-1).split(",").map(Number)).push(1),U8(s)):hn(!1,14);return s}(i),t[i]=r,++e}return r}}();function _M(n){return Array.isArray(n)?n:TAe(n)}function U8(n){return n[0]=ur(n[0]+.5|0,0,255),n[1]=ur(n[1]+.5|0,0,255),n[2]=ur(n[2]+.5|0,0,255),n[3]=ur(n[3],0,1),n}function z8(n){var t=n[0];t!=(0|t)&&(t=t+.5|0);var e=n[1];e!=(0|e)&&(e=e+.5|0);var i=n[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+t+","+e+","+i+","+(void 0===n[3]?1:Math.round(100*n[3])/100)+")"}var DAe=function(){function n(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return n.prototype.clear=function(){this.cache_={},this.cacheSize_=0},n.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},n.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_)0==(3&t++)&&!this.cache_[e].hasListener()&&(delete this.cache_[e],--this.cacheSize_)}},n.prototype.get=function(t,e,i){var r=G8(t,e,i);return r in this.cache_?this.cache_[r]:null},n.prototype.set=function(t,e,i,r){var s=G8(t,e,i);this.cache_[s]=r,++this.cacheSize_},n.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},n}();function G8(n,t,e){return t+":"+n+":"+(e?V8(e):"null")}var vM=new DAe;var RAe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),IAe=function(n){function t(e){var i=n.call(this)||this;i.background_=e.background;var r=Br({},e);return"object"==typeof e.properties&&(delete r.properties,Br(r,e.properties)),r.opacity=void 0!==e.opacity?e.opacity:1,hn("number"==typeof r.opacity,64),r.visible=void 0===e.visible||e.visible,r.zIndex=e.zIndex,r.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,r.minResolution=void 0!==e.minResolution?e.minResolution:0,r.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,r.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,i.className_=void 0!==r.className?r.className:"ol-layer",delete r.className,i.setProperties(r),i.state_=null,i}return RAe(t,n),t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(e){var i=this.state_||{layer:this,managed:void 0===e||e},r=this.getZIndex();return i.opacity=ur(Math.round(100*this.getOpacity())/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=void 0!==r||i.managed?r:1/0,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i},t.prototype.getLayersArray=function(e){return dn()},t.prototype.getLayerStatesArray=function(e){return dn()},t.prototype.getExtent=function(){return this.get("extent")},t.prototype.getMaxResolution=function(){return this.get("maxResolution")},t.prototype.getMinResolution=function(){return this.get("minResolution")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.getOpacity=function(){return this.get("opacity")},t.prototype.getSourceState=function(){return dn()},t.prototype.getVisible=function(){return this.get("visible")},t.prototype.getZIndex=function(){return this.get("zIndex")},t.prototype.setBackground=function(e){this.background_=e,this.changed()},t.prototype.setExtent=function(e){this.set("extent",e)},t.prototype.setMaxResolution=function(e){this.set("maxResolution",e)},t.prototype.setMinResolution=function(e){this.set("minResolution",e)},t.prototype.setMaxZoom=function(e){this.set("maxZoom",e)},t.prototype.setMinZoom=function(e){this.set("minZoom",e)},t.prototype.setOpacity=function(e){hn("number"==typeof e,64),this.set("opacity",e)},t.prototype.setVisible=function(e){this.set("visible",e)},t.prototype.setZIndex=function(e){this.set("zIndex",e)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),n.prototype.disposeInternal.call(this)},t}(ll);const W8=IAe;var kAe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),OAe=function(n){function t(e){var i=this,r=Br({},e);return delete r.source,(i=n.call(this,r)||this).mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,i.rendered=!1,e.render&&(i.render=e.render),e.map&&i.setMap(e.map),i.addChangeListener("source",i.handleSourcePropertyChange_),i.setSource(e.source?e.source:null),i}return kAe(t,n),t.prototype.getLayersArray=function(e){var i=e||[];return i.push(this),i},t.prototype.getLayerStatesArray=function(e){var i=e||[];return i.push(this.getLayerState()),i},t.prototype.getSource=function(){return this.get("source")||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(bi(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=Cn(e,"change",this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(function(i){return i([])})},t.prototype.getData=function(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null},t.prototype.render=function(e,i){var r=this.getRenderer();if(r.prepareFrame(e))return this.rendered=!0,r.renderFrame(e,i)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(e){e||this.unrender(),this.set("map",e)},t.prototype.getMapInternal=function(){return this.get("map")},t.prototype.setMap=function(e){this.mapPrecomposeKey_&&(bi(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(bi(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Cn(e,"precompose",function(i){var s=i.frameState.layerStatesArray,o=this.getLayerState(!1);hn(!s.some(function(a){return a.layer===o.layer}),67),s.push(o)},this),this.mapRenderKey_=Cn(this,"change",e.render,e),this.changed())},t.prototype.setSource=function(e){this.set("source",e)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),n.prototype.disposeInternal.call(this)},t}(W8);function yM(n,t){if(!n.visible)return!1;var e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;var i=t.zoom;return i>n.minZoom&&i<=n.maxZoom}const bM=OAe;function xM(n,t){for(var e=!0,i=n.length-1;i>=0;--i)if(n[i]!=t[i]){e=!1;break}return e}function hI(n,t){var e=Math.cos(t),i=Math.sin(t),s=n[1]*e+n[0]*i;return n[0]=n[0]*e-n[1]*i,n[1]=s,n}function q8(n,t){if(t.canWrapX()){var e=ai(t.getExtent()),i=function VAe(n,t,e){var i=t.getExtent(),r=0;if(t.canWrapX()&&(n[0]<i[0]||n[0]>i[2])){var s=e||ai(i);r=Math.floor((n[0]-i[0])/s)}return r}(n,t,e);i&&(n[0]-=i*e)}return n}var HAe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),UAe=function(n){function t(e){var i=n.call(this)||this;return i.map_=e,i}return HAe(t,n),t.prototype.dispatchRenderEvent=function(e,i){dn()},t.prototype.calculateMatrices2D=function(e){var i=e.viewState,r=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;cl(r,e.size[0]/2,e.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),cM(s,r)},t.prototype.forEachFeatureAtCoordinate=function(e,i,r,s,o,a,l,c){var u,d=i.viewState;function h(z,D,P,O){return o.call(a,D,z?P:null,O)}var f=d.projection,p=q8(e.slice(),f),m=[[0,0]];if(f.canWrapX()&&s){var _=ai(f.getExtent());m.push([-_,0],[_,0])}for(var v=i.layerStatesArray,y=v.length,b=[],x=[],w=0;w<m.length;w++)for(var E=y-1;E>=0;--E){var R=v[E],F=R.layer;if(F.hasRenderer()&&yM(R,d)&&l.call(c,F)){var N=F.getRenderer(),C=F.getSource();if(N&&C){var L=C.getWrapX()?p:e,Y=h.bind(null,R.managed);x[0]=L[0]+m[w][0],x[1]=L[1]+m[w][1],u=N.forEachFeatureAtCoordinate(x,i,r,Y,b)}if(u)return u}}if(0!==b.length){var I=1/b.length;return b.forEach(function(z,D){return z.distanceSq+=D*I}),b.sort(function(z,D){return z.distanceSq-D.distanceSq}),b.some(function(z){return u=z.callback(z.feature,z.layer,z.geometry)}),u}},t.prototype.forEachLayerAtPixel=function(e,i,r,s,o){return dn()},t.prototype.hasFeatureAtCoordinate=function(e,i,r,s,o,a){return void 0!==this.forEachFeatureAtCoordinate(e,i,r,s,hm,this,o,a)},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(e){dn()},t.prototype.scheduleExpireIconCache=function(e){vM.canExpireCache()&&e.postRenderFunctions.push(zAe)},t}(eI);function zAe(n,t){vM.expire()}const GAe=UAe;var WAe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),jAe=function(n){function t(e,i,r,s){var o=n.call(this,e)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=s,o}return WAe(t,n),t}(gc);const Y8=jAe;var wM="ol-hidden",MM="ol-unselectable",fI="ol-control",X8="ol-collapsed",$Ae=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),K8=["style","variant","weight","size","lineHeight","family"],Z8=function(n){var t=n.match($Ae);if(!t)return null;for(var e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},i=0,r=K8.length;i<r;++i){var s=t[i+1];void 0!==s&&(e[K8[i]]=s)}return e.families=e.family.split(/,\s?/),e};function fo(n,t,e,i){var r;return r=e&&e.length?e.shift():lM?new OffscreenCanvas(n||300,t||300):document.createElement("canvas"),n&&(r.width=n),t&&(r.height=t),r.getContext("2d",i)}function Q8(n){var t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function J8(n,t){var e=t.parentNode;e&&e.replaceChild(n,t)}function pI(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}var e6="10px sans-serif",_c="#000",CM="round",kv=[],xm="round",Lv="#000",Fv="center",SM="middle",Eh=[0,0,0,0],vc=new ll;(new fm).setSize=function(){console.warn("labelCache is deprecated.")};var mI,wm=null,gI={},KAe=function(){var s,o,t="32px ",e=["monospace","serif"],i=e.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";function a(c,u,d){for(var h=!0,f=0;f<i;++f){var p=e[f];if(o=EM(c+" "+u+" "+t+p,r),d!=p){var m=EM(c+" "+u+" "+t+d+","+p,r);h=h&&m!=o}}return!!h}function l(){for(var c=!0,u=vc.getKeys(),d=0,h=u.length;d<h;++d){var f=u[d];vc.get(f)<100&&(a.apply(this,f.split("\n"))?(Tv(gI),wm=null,mI=void 0,vc.set(f,100)):(vc.set(f,vc.get(f)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){var u=Z8(c);if(u)for(var d=u.families,h=0,f=d.length;h<f;++h){var p=d[h],m=u.style+"\n"+u.weight+"\n"+p;void 0===vc.get(m)&&(vc.set(m,100,!0),a(u.style,u.weight,p)||(vc.set(m,0,!0),void 0===s&&(s=setInterval(l,32))))}}}(),ZAe=function(){var n;return function(t){var e=gI[t];if(null==e){if(lM){var i=Z8(t),r=t6(t,"\u017dg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||((n=document.createElement("div")).innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);gI[t]=e}return e}}();function t6(n,t){return wm||(wm=fo(1,1)),n!=mI&&(wm.font=n,mI=wm.font),wm.measureText(t)}function EM(n,t){return t6(n,t).width}function n6(n,t,e){if(t in e)return e[t];var i=t.split("\n").reduce(function(r,s){return Math.max(r,EM(n,s))},0);return e[t]=i,i}var tDe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nDe=function(n){function t(e){var i=n.call(this,e)||this;i.fontChangeListenerKey_=Cn(vc,"propertychange",e.redrawText.bind(e)),i.element_=document.createElement("div");var r=i.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.element_.className=MM+" ol-layers";var s=e.getViewport();return s.insertBefore(i.element_,s.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return tDe(t,n),t.prototype.dispatchRenderEvent=function(e,i){var r=this.getMap();if(r.hasListener(e)){var s=new Y8(e,void 0,i);r.dispatchEvent(s)}},t.prototype.disposeInternal=function(){bi(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),n.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);var i=e.layerStatesArray.sort(function(f,p){return f.zIndex-p.zIndex}),r=e.viewState;this.children_.length=0;for(var s=[],o=null,a=0,l=i.length;a<l;++a){var c=i[a];e.layerIndex=a;var u=c.layer,d=u.getSourceState();if(!yM(c,r)||"ready"!=d&&"undefined"!=d)u.unrender();else{var h=u.render(e,o);!h||(h!==o&&(this.children_.push(h),o=h),"getDeclutter"in u&&s.push(u))}}for(a=s.length-1;a>=0;--a)s[a].renderDeclutter(e);(function YAe(n,t){for(var e=n.childNodes,i=0;;++i){var r=e[i],s=t[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},t.prototype.forEachLayerAtPixel=function(e,i,r,s,o){for(var a=i.viewState,l=i.layerStatesArray,u=l.length-1;u>=0;--u){var d=l[u],h=d.layer;if(h.hasRenderer()&&yM(d,a)&&o(h)){var p=h.getRenderer().getDataAtPixel(e,i,r);if(p){var m=s(h,p);if(m)return m}}}},t}(GAe);const iDe=nDe;var r6=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),TM=function(n){function t(e,i,r){var s=n.call(this,e)||this;return s.element=i,s.index=r,s}return r6(t,n),t}(gc),rDe=function(n){function t(e,i){var r=n.call(this)||this;if(r.unique_=!!(i||{}).unique,r.array_=e||[],r.unique_)for(var o=0,a=r.array_.length;o<a;++o)r.assertUnique_(r.array_[o],o);return r.updateLength_(),r}return r6(t,n),t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(e){for(var i=0,r=e.length;i<r;++i)this.push(e[i]);return this},t.prototype.forEach=function(e){for(var i=this.array_,r=0,s=i.length;r<s;++r)e(i[r],r,i)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(e){return this.array_[e]},t.prototype.getLength=function(){return this.get("length")},t.prototype.insertAt=function(e,i){this.unique_&&this.assertUnique_(i),this.array_.splice(e,0,i),this.updateLength_(),this.dispatchEvent(new TM("add",i,e))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(e){this.unique_&&this.assertUnique_(e);var i=this.getLength();return this.insertAt(i,e),this.getLength()},t.prototype.remove=function(e){for(var i=this.array_,r=0,s=i.length;r<s;++r)if(i[r]===e)return this.removeAt(r)},t.prototype.removeAt=function(e){var i=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new TM("remove",i,e)),i},t.prototype.setAt=function(e,i){var r=this.getLength();if(e<r){this.unique_&&this.assertUnique_(i,e);var s=this.array_[e];this.array_[e]=i,this.dispatchEvent(new TM("remove",s,e)),this.dispatchEvent(new TM("add",i,e))}else{for(var o=r;o<e;++o)this.insertAt(o,void 0);this.insertAt(e,i)}},t.prototype.updateLength_=function(){this.set("length",this.array_.length)},t.prototype.assertUnique_=function(e,i){for(var r=0,s=this.array_.length;r<s;++r)if(this.array_[r]===e&&r!==i)throw new S8(58)},t}(ll);const Wo=rDe;var o6=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tu=function(n){function t(e,i){var r=n.call(this,e)||this;return r.layer=i,r}return o6(t,n),t}(gc),sDe=function(n){function t(e){var i=this,r=e||{},s=Br({},r);delete s.layers;var o=r.layers;return(i=n.call(this,s)||this).layersListenerKeys_=[],i.listenerKeys_={},i.addChangeListener("layers",i.handleLayersChanged_),o?Array.isArray(o)?o=new Wo(o.slice(),{unique:!0}):hn("function"==typeof o.getArray,43):o=new Wo(void 0,{unique:!0}),i.setLayers(o),i}return o6(t,n),t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(bi),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var i in this.layersListenerKeys_.push(Cn(e,"add",this.handleLayersAdd_,this),Cn(e,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[i].forEach(bi);Tv(this.listenerKeys_);for(var r=e.getArray(),s=0,o=r.length;s<o;s++){var a=r[s];this.registerLayerListeners_(a),this.dispatchEvent(new Tu("addlayer",a))}this.changed()},t.prototype.registerLayerListeners_=function(e){var i=[Cn(e,"propertychange",this.handleLayerChange_,this),Cn(e,"change",this.handleLayerChange_,this)];e instanceof t&&i.push(Cn(e,"addlayer",this.handleLayerGroupAdd_,this),Cn(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Rn(e)]=i},t.prototype.handleLayerGroupAdd_=function(e){this.dispatchEvent(new Tu("addlayer",e.layer))},t.prototype.handleLayerGroupRemove_=function(e){this.dispatchEvent(new Tu("removelayer",e.layer))},t.prototype.handleLayersAdd_=function(e){var i=e.element;this.registerLayerListeners_(i),this.dispatchEvent(new Tu("addlayer",i)),this.changed()},t.prototype.handleLayersRemove_=function(e){var i=e.element,r=Rn(i);this.listenerKeys_[r].forEach(bi),delete this.listenerKeys_[r],this.dispatchEvent(new Tu("removelayer",i)),this.changed()},t.prototype.getLayers=function(){return this.get("layers")},t.prototype.setLayers=function(e){var i=this.getLayers();if(i)for(var r=i.getArray(),s=0,o=r.length;s<o;++s)this.dispatchEvent(new Tu("removelayer",r[s]));this.set("layers",e)},t.prototype.getLayersArray=function(e){var i=void 0!==e?e:[];return this.getLayers().forEach(function(r){r.getLayersArray(i)}),i},t.prototype.getLayerStatesArray=function(e){var i=void 0!==e?e:[],r=i.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(i)});var s=this.getLayerState(),o=s.zIndex;!e&&void 0===s.zIndex&&(o=0);for(var a=r,l=i.length;a<l;a++){var c=i[a];c.opacity*=s.opacity,c.visible=c.visible&&s.visible,c.maxResolution=Math.min(c.maxResolution,s.maxResolution),c.minResolution=Math.max(c.minResolution,s.minResolution),c.minZoom=Math.max(c.minZoom,s.minZoom),c.maxZoom=Math.min(c.maxZoom,s.maxZoom),void 0!==s.extent&&(c.extent=void 0!==c.extent?vm(c.extent,s.extent):s.extent),void 0===c.zIndex&&(c.zIndex=o)}return i},t.prototype.getSourceState=function(){return"ready"},t}(W8);const AM=sDe;var oDe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),aDe=function(n){function t(e,i,r){var s=n.call(this,e)||this;return s.map=i,s.frameState=void 0!==r?r:null,s}return oDe(t,n),t}(gc);const Mm=aDe;var lDe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),cDe=function(n){function t(e,i,r,s,o,a){var l=n.call(this,e,i,o)||this;return l.originalEvent=r,l.pixel_=null,l.coordinate_=null,l.dragging=void 0!==s&&s,l.activePointers=a,l}return lDe(t,n),Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(e){this.pixel_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(e){this.coordinate_=e},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){n.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){n.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(Mm);const Au=cDe,Bi={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var uDe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),dDe=function(n){function t(e,i){var r=n.call(this,e)||this;r.map_=e,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===i?1:i,r.down_=null;var s=r.map_.getViewport();return r.activePointers_=[],r.trackedTouches_={},r.element_=s,r.pointerdownListenerKey_=Cn(s,"pointerdown",r.handlePointerDown_,r),r.relayedListenerKey_=Cn(s,"pointermove",r.relayMoveEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener("touchmove",r.boundHandleTouchMove_,!!T8&&{passive:!1}),r}return uDe(t,n),t.prototype.emulateClick_=function(e){var i=new Au(Bi.CLICK,this.map_,e);this.dispatchEvent(i),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new Au(Bi.DBLCLICK,this.map_,e),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var r=new Au(Bi.SINGLECLICK,this.map_,e);this.dispatchEvent(r)}.bind(this),250)},t.prototype.updateActivePointers_=function(e){var i=e,r=i.pointerId;if(i.type==Bi.POINTERUP||i.type==Bi.POINTERCANCEL){for(var s in delete this.trackedTouches_[r],this.trackedTouches_)if(this.trackedTouches_[s].target!==i.target){delete this.trackedTouches_[s];break}}else(i.type==Bi.POINTERDOWN||i.type==Bi.POINTERMOVE)&&(this.trackedTouches_[r]=i);this.activePointers_=x8(this.trackedTouches_)},t.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var i=new Au(Bi.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(bi),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(e){return 0===e.button},t.prototype.handlePointerDown_=function(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);var i=new Au(Bi.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);for(var r in this.dispatchEvent(i),this.down_={},e){var s=e[r];this.down_[r]="function"==typeof s?Mh:s}if(0===this.dragListenerKeys_.length){var o=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Cn(o,Bi.POINTERMOVE,this.handlePointerMove_,this),Cn(o,Bi.POINTERUP,this.handlePointerUp_,this),Cn(this.element_,Bi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==o&&this.dragListenerKeys_.push(Cn(this.element_.getRootNode(),Bi.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;var i=new Au(Bi.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}},t.prototype.relayMoveEvent_=function(e){this.originalPointerMoveEvent_=e;var i=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Au(Bi.POINTERMOVE,this.map_,e,i))},t.prototype.handleTouchMove_=function(e){var i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()},t.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(bi(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(bi(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(bi),this.dragListenerKeys_.length=0,this.element_=null,n.prototype.disposeInternal.call(this)},t}(fm);const hDe=dDe;var DM=1/0,fDe=function(){function n(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Tv(this.queuedElements_)},n.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(i);return delete this.queuedElements_[r],i},n.prototype.enqueue=function(t){hn(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=DM&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(t){return 2*t+1},n.prototype.getRightChildIndex_=function(t){return 2*t+2},n.prototype.getParentIndex_=function(t){return t-1>>1},n.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},n.prototype.isEmpty=function(){return 0===this.elements_.length},n.prototype.isKeyQueued=function(t){return t in this.queuedElements_},n.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},n.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,r=e.length,s=e[t],o=i[t],a=t;t<r>>1;){var l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<r&&i[c]<i[l]?c:l;e[t]=e[u],i[t]=i[u],t=u}e[t]=s,i[t]=o,this.siftDown_(a,t)},n.prototype.siftDown_=function(t,e){for(var i=this.elements_,r=this.priorities_,s=i[e],o=r[e];e>t;){var a=this.getParentIndex_(e);if(!(r[a]>o))break;i[e]=i[a],r[e]=r[a],e=a}i[e]=s,r[e]=o},n.prototype.reprioritize=function(){var o,a,l,t=this.priorityFunction_,e=this.elements_,i=this.priorities_,r=0,s=e.length;for(a=0;a<s;++a)(l=t(o=e[a]))==DM?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,e[r++]=o);e.length=r,i.length=r,this.heapify_()},n}();const pDe=fDe;var mDe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),gDe=function(n){function t(e,i){var r=n.call(this,function(s){return e.apply(null,s)},function(s){return s[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=i,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return mDe(t,n),t.prototype.enqueue=function(e){var i=n.prototype.enqueue.call(this,e);return i&&e[0].addEventListener("change",this.boundHandleTileChange_),i},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(e){var i=e.target,r=i.getState();if(2===r||3===r||4===r){i.removeEventListener("change",this.boundHandleTileChange_);var s=i.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(e,i){for(var o,a,r=0;this.tilesLoading_<e&&r<i&&this.getCount()>0;)a=(o=this.dequeue()[0]).getKey(),0===o.getState()&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++r,o.load())},t}(pDe);const _De=gDe;var Ta={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},jo={};jo[Ta.RADIANS]=6370997/(2*Math.PI),jo[Ta.DEGREES]=2*Math.PI*6370997/360,jo[Ta.FEET]=.3048,jo[Ta.METERS]=1,jo[Ta.USFEET]=1200/3937;const Ru=Ta,Aa={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var xDe=function(){function n(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||jo[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},n.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},n.prototype.setWorldExtent=function(t){this.worldExtent_=t},n.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},n}();const a6=xDe;var wDe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bv=6378137,Cm=Math.PI*Bv,MDe=[-Cm,-Cm,Cm,Cm],CDe=[-180,-85,180,85],RM=Bv*Math.log(Math.tan(Math.PI/2)),Sm=function(n){function t(e){return n.call(this,{code:e,units:Ru.METERS,extent:MDe,global:!0,worldExtent:CDe,getPointResolution:function(i,r){return i/MAe(r[1]/Bv)}})||this}return wDe(t,n),t}(a6),l6=[new Sm("EPSG:3857"),new Sm("EPSG:102100"),new Sm("EPSG:102113"),new Sm("EPSG:900913"),new Sm("http://www.opengis.net/def/crs/EPSG/0/3857"),new Sm("http://www.opengis.net/gml/srs/epsg.xml#3857")];function SDe(n,t,e){var i=n.length,r=e>1?e:2,s=t;void 0===s&&(s=r>2?n.slice():new Array(i));for(var o=0;o<i;o+=r){s[o]=Cm*n[o]/180;var a=Bv*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));a>RM?a=RM:a<-RM&&(a=-RM),s[o+1]=a}return s}function EDe(n,t,e){var i=n.length,r=e>1?e:2,s=t;void 0===s&&(s=r>2?n.slice():new Array(i));for(var o=0;o<i;o+=r)s[o]=180*n[o]/Cm,s[o+1]=360*Math.atan(Math.exp(n[o+1]/Bv))/Math.PI-90;return s}var TDe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),c6=[-180,-90,180,90],DDe=6378137*Math.PI/180,Th=function(n){function t(e,i){return n.call(this,{code:e,units:Ru.DEGREES,extent:c6,axisOrientation:i,global:!0,metersPerUnit:DDe,worldExtent:c6})||this}return TDe(t,n),t}(a6),u6=[new Th("CRS:84"),new Th("EPSG:4326","neu"),new Th("urn:ogc:def:crs:OGC:1.3:CRS84"),new Th("urn:ogc:def:crs:OGC:2:84"),new Th("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Th("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Th("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],IM={},Da={};function kM(n,t,e){var i=n.getCode(),r=t.getCode();i in Da||(Da[i]={}),Da[i][r]=e}function bI(n,t,e){var i=e||6371008.8,r=pM(n[1]),s=pM(t[1]),o=(s-r)/2,a=pM(t[0]-n[0])/2,l=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}var wI=!0;function MI(n,t,e){var i;if(void 0!==t){for(var r=0,s=n.length;r<s;++r)t[r]=n[r];i=t}else i=n.slice();return i}function h6(n,t,e){if(void 0!==t&&n!==t){for(var i=0,r=n.length;i<r;++i)t[i]=n[i];n=t}return n}function LDe(n){(function IDe(n,t){IM[n]=t})(n.getCode(),n),kM(n,n,MI)}function as(n){return"string"==typeof n?function RDe(n){return IM[n]||IM[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(n):n||null}function f6(n,t,e,i){var r,s=(n=as(n)).getPointResolutionFunc();if(s)r=s(t,e),i&&i!==n.getUnits()&&(o=n.getMetersPerUnit())&&(r=r*o/jo[i]);else{var a=n.getUnits();if(a==Ru.DEGREES&&!i||i==Ru.DEGREES)r=t;else{var o,l=Vv(n,as("EPSG:4326"));if(l===h6&&a!==Ru.DEGREES)r=t*n.getMetersPerUnit();else{var c=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];r=(bI((c=l(c,c,2)).slice(0,2),c.slice(2,4))+bI(c.slice(4,6),c.slice(6,8)))/2}void 0!==(o=i?jo[i]:n.getMetersPerUnit())&&(r/=o)}}return r}function p6(n){(function FDe(n){n.forEach(LDe)})(n),n.forEach(function(t){n.forEach(function(e){t!==e&&kM(t,e,MI)})})}function CI(n,t){return n?"string"==typeof n?as(n):n:as(t)}function Em(n,t){if(n===t)return!0;var e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||Vv(n,t)===MI)&&e}function Vv(n,t){var r=function kDe(n,t){var e;return n in Da&&t in Da[n]&&(e=Da[n][t]),e}(n.getCode(),t.getCode());return r||(r=h6),r}function Hv(n,t){return Vv(as(n),as(t))}function Uv(n,t,e){return Hv(t,e)(n,void 0,n.length)}var xs=null;function _6(){return xs}function SI(n,t){return n}function yc(n,t){return wI&&!xM(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(wI=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function EI(n,t){return n}function Ah(n,t){return n}function VDe(n,t){return n}function v6(n,t,e){return function(i,r,s,o,a){if(i){if(!r&&!t)return i;var l=t?0:s[0]*r,c=t?0:s[1]*r,u=a?a[0]:0,d=a?a[1]:0,h=n[0]+l/2+u,f=n[2]-l/2+u,p=n[1]+c/2+d,m=n[3]-c/2+d;h>f&&(f=h=(f+h)/2),p>m&&(m=p=(m+p)/2);var g=ur(i[0],h,f),_=ur(i[1],p,m);if(o&&e&&r){var v=30*r;g+=-v*Math.log(1+Math.max(0,h-i[0])/v)+v*Math.log(1+Math.max(0,i[0]-f)/v),_+=-v*Math.log(1+Math.max(0,p-i[1])/v)+v*Math.log(1+Math.max(0,i[1]-m)/v)}return[g,_]}}}function UDe(n){return n}function TI(n,t,e,i){var r=ai(t)/e[0],s=ho(t)/e[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function AI(n,t,e){var i=Math.min(n,t);return i*=Math.log(1+50*Math.max(0,n/t-1))/50+1,e&&(i=Math.max(i,e),i/=Math.log(1+50*Math.max(0,e/n-1))/50+1),ur(i,e/2,2*t)}function y6(n,t,e,i,r){return function(s,o,a,l){if(void 0!==s){var c=i?TI(n,i,a,r):n;return(void 0===e||e)&&l?AI(s,c,t):ur(s,t,c)}}}function DI(n){if(void 0!==n)return 0}function b6(n){if(void 0!==n)return n}function x6(n){return Math.pow(n,3)}function Tm(n){return 1-x6(1-n)}function RI(n){return 3*n*n-2*n*n*n}function $De(n){return n}!function HDe(){p6(l6),p6(u6),function NDe(n,t,e,i){n.forEach(function(r){t.forEach(function(s){kM(r,s,e),kM(s,r,i)})})}(u6,l6,SDe,EDe)}();function Dh(n,t,e,i,r,s){for(var o=s||[],a=0,l=t;l<e;l+=i){var c=n[l],u=n[l+1];o[a++]=r[0]*c+r[2]*u+r[4],o[a++]=r[1]*c+r[3]*u+r[5]}return s&&o.length!=a&&(o.length=a),o}function w6(n,t,e,i,r,s,o){for(var a=o||[],l=Math.cos(r),c=Math.sin(r),u=s[0],d=s[1],h=0,f=t;f<e;f+=i){var p=n[f]-u,m=n[f+1]-d;a[h++]=u+p*l-m*c,a[h++]=d+p*c+m*l;for(var g=f+2;g<f+i;++g)a[h++]=n[g]}return o&&a.length!=h&&(a.length=h),a}var XDe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),M6=[1,0,0,1,0,0],KDe=function(n){function t(){var e=n.call(this)||this;return e.extent_=[1/0,1/0,-1/0,-1/0],e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=function j1e(n){var e,i,r,t=!1;return function(){var s=Array.prototype.slice.call(arguments);return(!t||this!==r||!wh(s,i))&&(t=!0,r=this,i=s,e=n.apply(this,arguments)),e}}(function(i,r,s){if(!s)return this.getSimplifiedGeometry(r);var o=this.clone();return o.applyTransform(s),o.getSimplifiedGeometry(r)}),e}return XDe(t,n),t.prototype.simplifyTransformed=function(e,i){return this.simplifyTransformedInternal(this.getRevision(),e,i)},t.prototype.clone=function(){return dn()},t.prototype.closestPointXY=function(e,i,r,s){return dn()},t.prototype.containsXY=function(e,i){var r=this.getClosestPoint([e,i]);return r[0]===e&&r[1]===i},t.prototype.getClosestPoint=function(e,i){var r=i||[NaN,NaN];return this.closestPointXY(e[0],e[1],r,1/0),r},t.prototype.intersectsCoordinate=function(e){return this.containsXY(e[0],e[1])},t.prototype.computeExtent=function(e){return dn()},t.prototype.getExtent=function(e){if(this.extentRevision_!=this.getRevision()){var i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&mm(i),this.extentRevision_=this.getRevision()}return function yAe(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}(this.extent_,e)},t.prototype.rotate=function(e,i){dn()},t.prototype.scale=function(e,i,r){dn()},t.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)},t.prototype.getSimplifiedGeometry=function(e){return dn()},t.prototype.getType=function(){return dn()},t.prototype.applyTransform=function(e){dn()},t.prototype.intersectsExtent=function(e){return dn()},t.prototype.translate=function(e,i){dn()},t.prototype.transform=function(e,i){var r=as(e),s=r.getUnits()==Ru.TILE_PIXELS?function(o,a,l){var c=r.getExtent(),u=r.getWorldExtent(),d=ho(u)/ho(c);return cl(M6,u[0],u[3],d,-d,0,0,0),Dh(o,0,o.length,l,M6,a),Hv(r,i)(o,a,l)}:Hv(r,i);return this.applyTransform(s),this},t}(ll);const ZDe=KDe;var QDe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),JDe=function(n){function t(){var e=n.call(this)||this;return e.layout="XY",e.stride=2,e.flatCoordinates=null,e}return QDe(t,n),t.prototype.computeExtent=function(e){return function pAe(n,t,e,i,r){return P8(mm(r),n,t,e,i)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinates=function(){return dn()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=this.getSimplifiedGeometryInternal(e);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)},t.prototype.getSimplifiedGeometryInternal=function(e){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(e,i){this.stride=C6(e),this.layout=e,this.flatCoordinates=i},t.prototype.setCoordinates=function(e,i){dn()},t.prototype.setLayout=function(e,i,r){var s;if(e)s=C6(e);else{for(var o=0;o<r;++o){if(0===i.length)return this.layout="XY",void(this.stride=2);i=i[0]}e=function eRe(n){var t;return 2==n?t="XY":3==n?t="XYZ":4==n&&(t="XYZM"),t}(s=i.length)}this.layout=e,this.stride=s},t.prototype.applyTransform=function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(e,i){var r=this.getFlatCoordinates();if(r){var s=this.getStride();w6(r,0,r.length,s,e,i,r),this.changed()}},t.prototype.scale=function(e,i,r){var s=i;void 0===s&&(s=e);var o=r;o||(o=_m(this.getExtent()));var a=this.getFlatCoordinates();if(a){var l=this.getStride();(function qDe(n,t,e,i,r,s,o,a){for(var l=a||[],c=o[0],u=o[1],d=0,h=t;h<e;h+=i){var p=n[h+1]-u;l[d++]=c+r*(n[h]-c),l[d++]=u+s*p;for(var m=h+2;m<h+i;++m)l[d++]=n[m]}a&&l.length!=d&&(l.length=d)})(a,0,a.length,l,e,s,o,a),this.changed()}},t.prototype.translate=function(e,i){var r=this.getFlatCoordinates();if(r){var s=this.getStride();(function YDe(n,t,e,i,r,s,o){for(var a=o||[],l=0,c=t;c<e;c+=i){a[l++]=n[c]+r,a[l++]=n[c+1]+s;for(var u=c+2;u<c+i;++u)a[l++]=n[u]}o&&a.length!=l&&(a.length=l)})(r,0,r.length,s,e,i,r),this.changed()}},t}(ZDe);function C6(n){var t;return"XY"==n?t=2:"XYZ"==n||"XYM"==n?t=3:"XYZM"==n&&(t=4),t}const II=JDe;function S6(n,t,e,i,r,s,o){var d,a=n[t],l=n[t+1],c=n[e]-a,u=n[e+1]-l;if(0===c&&0===u)d=t;else{var h=((r-a)*c+(s-l)*u)/(c*c+u*u);if(h>1)d=e;else{if(h>0){for(var f=0;f<i;++f)o[f]=Sh(n[t+f],n[e+f],h);return void(o.length=i)}d=t}}for(f=0;f<i;++f)o[f]=n[d+f];o.length=i}function E6(n,t,e,i,r){var s=n[t],o=n[t+1];for(t+=i;t<e;t+=i){var a=n[t],l=n[t+1],c=ym(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function A6(n,t,e,i,r,s,o,a,l,c,u){if(t==e)return c;var d,h;if(0===r){if((h=ym(o,a,n[t],n[t+1]))<c){for(d=0;d<i;++d)l[d]=n[t+d];return l.length=i,h}return c}for(var f=u||[NaN,NaN],p=t+i;p<e;)if(S6(n,p-i,p,i,o,a,f),(h=ym(o,a,f[0],f[1]))<c){for(c=h,d=0;d<i;++d)l[d]=f[d];l.length=i,p+=i}else p+=i*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(s&&(S6(n,e-i,t,i,o,a,f),(h=ym(o,a,f[0],f[1]))<c)){for(c=h,d=0;d<i;++d)l[d]=f[d];l.length=i}return c}function R6(n,t,e,i){for(var r=0,s=e.length;r<s;++r)for(var o=e[r],a=0;a<i;++a)n[t++]=o[a];return t}function Rh(n,t){return t*Math.round(n/t)}function sRe(n,t,e,i,r,s,o){if(t==e)return o;var c,u,a=Rh(n[t],r),l=Rh(n[t+1],r);t+=i,s[o++]=a,s[o++]=l;do{if(c=Rh(n[t],r),u=Rh(n[t+1],r),(t+=i)==e)return s[o++]=c,s[o++]=u,o}while(c==a&&u==l);for(;t<e;){var d=Rh(n[t],r),h=Rh(n[t+1],r);if(t+=i,d!=c||h!=u){var f=c-a,p=u-l,m=d-a,g=h-l;if(f*g==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&g<p||p==g||p>0&&g>p)){c=d,u=h;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=d,u=h}}return s[o++]=c,s[o++]=u,o}function Am(n,t,e,i,r){for(var s=void 0!==r?r:[],o=0,a=t;a<e;a+=i)s[o++]=n.slice(a,a+i);return s.length=o,s}function LM(n,t,e,i,r){for(var s=void 0!==r?r:[],o=0,a=0,l=e.length;a<l;++a){var c=e[a];s[o++]=Am(n,t,c,i,s[o]),t=c}return s.length=o,s}function O6(n,t,e,i,r){for(var s=void 0!==r?r:[],o=0,a=0,l=e.length;a<l;++a){var c=e[a];s[o++]=LM(n,t,c,i,s[o]),t=c[c.length-1]}return s.length=o,s}function P6(n,t,e,i){for(var r=0,s=n[e-i],o=n[e-i+1];t<e;t+=i){var a=n[t],l=n[t+1];r+=o*a-s*l,s=a,o=l}return r/2}var oRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),aRe=function(n){function t(e,i){var r=n.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?r.setCoordinates(e,i):r.setFlatCoordinates(i,e),r}return oRe(t,n),t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(e,i,r,s){return s<I8(this.getExtent(),e,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(E6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),A6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,i,r,s))},t.prototype.getArea=function(){return P6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return Am(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(e){var i=[];return i.length=function kI(n,t,e,i,r,s,o){var a=(e-t)/i;if(a<3){for(;t<e;t+=i)s[o++]=n[t],s[o++]=n[t+1];return o}var l=new Array(a);l[0]=1,l[a-1]=1;for(var c=[t,e-i],u=0;c.length>0;){for(var d=c.pop(),h=c.pop(),f=0,p=n[h],m=n[h+1],g=n[d],_=n[d+1],v=h+i;v<d;v+=i){var x=SAe(n[v],n[v+1],p,m,g,_);x>f&&(u=v,f=x)}f>r&&(l[(u-t)/i]=1,h+i<u&&c.push(h,u),u+i<d&&c.push(u,d))}for(v=0;v<a;++v)l[v]&&(s[o++]=n[t+v*i],s[o++]=n[t+v*i+1]);return o}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new t(i,"XY")},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(e){return!1},t.prototype.setCoordinates=function(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=R6(this.flatCoordinates,0,e,this.stride),this.changed()},t}(II);const F6=aRe;var lRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),cRe=function(n){function t(e,i){var r=n.call(this)||this;return r.setCoordinates(e,i),r}return lRe(t,n),t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,i,r,s){var o=this.flatCoordinates,a=ym(e,i,o[0],o[1]);if(a<s){for(var l=this.stride,c=0;c<l;++c)r[c]=o[c];return r.length=l,a}return s},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(e){return function fAe(n,t){var e=n[0],i=n[1];return ul(e,i,e,i,t)}(this.flatCoordinates,e)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(e){return k8(e,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(e,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function nRe(n,t,e,i){for(var r=0,s=e.length;r<s;++r)n[t++]=e[r];return t}(this.flatCoordinates,0,e),this.changed()},t}(II);const N6=cRe;function uRe(n,t,e,i,r){var s=L8(r,function(o){return!Ih(n,t,e,i,o[0],o[1])});return!s}function Ih(n,t,e,i,r,s){for(var o=0,a=n[e-i],l=n[e-i+1];t<e;t+=i){var c=n[t],u=n[t+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return 0!==o}function OI(n,t,e,i,r,s){if(0===e.length||!Ih(n,t,e[0],i,r,s))return!1;for(var o=1,a=e.length;o<a;++o)if(Ih(n,e[o-1],e[o],i,r,s))return!1;return!0}function PI(n,t,e,i,r){var s=P8([1/0,1/0,-1/0,-1/0],n,t,e,i);return!!Ls(r,s)&&(!!(pm(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3])||function dRe(n,t,e,i,r){var s;for(t+=i;t<e;t+=i)if(s=r(n.slice(t-i,t),n.slice(t,t+i)))return s;return!1}(n,t,e,i,function(o,a){return function bAe(n,t,e){var i=!1,r=aI(n,t),s=aI(n,e);if(1===r||1===s)i=!0;else{var o=n[0],a=n[1],l=n[2],c=n[3],h=e[0],f=e[1],p=(f-t[1])/(h-t[0]),m=void 0,g=void 0;!!(2&s)&&!(2&r)&&(i=(m=h-(f-c)/p)>=o&&m<=l),i||!(4&s)||4&r||(i=(g=f-(h-l)*p)>=a&&g<=c),i||!(8&s)||8&r||(i=(m=h-(f-a)/p)>=o&&m<=l),!i&&16&s&&!(16&r)&&(i=(g=f-(h-o)*p)>=a&&g<=c)}return i}(r,o,a)}))}function V6(n,t,e,i,r){return!!(PI(n,t,e,i,r)||Ih(n,t,e,i,r[0],r[1])||Ih(n,t,e,i,r[0],r[3])||Ih(n,t,e,i,r[2],r[1])||Ih(n,t,e,i,r[2],r[3]))}function hRe(n,t,e,i){for(;t<e-i;){for(var r=0;r<i;++r){var s=n[t+r];n[t+r]=n[e-i+r],n[e-i+r]=s}t+=i,e-=i}}function LI(n,t,e,i){for(var r=0,s=n[e-i],o=n[e-i+1];t<e;t+=i){var a=n[t],l=n[t+1];r+=(a-s)*(l+o),s=a,o=l}return 0===r?void 0:r>0}function FI(n,t,e,i,r){for(var s=void 0!==r&&r,o=0,a=e.length;o<a;++o){var l=e[o],c=LI(n,t,l,i);(0===o?s&&c||!s&&!c:s&&!c||!s&&c)&&hRe(n,t,l,i),t=l}return t}var fRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),FM=function(n){function t(e,i,r){var s=n.call(this)||this;return s.ends_=[],s.flatInteriorPointRevision_=-1,s.flatInteriorPoint_=null,s.maxDelta_=-1,s.maxDeltaRevision_=-1,s.orientedRevision_=-1,s.orientedFlatCoordinates_=null,void 0!==i&&r?(s.setFlatCoordinates(i,e),s.ends_=r):s.setCoordinates(e,i),s}return fRe(t,n),t.prototype.appendLinearRing=function(e){this.flatCoordinates?b8(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,i,r,s){return s<I8(this.getExtent(),e,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function T6(n,t,e,i,r){for(var s=0,o=e.length;s<o;++s){var a=e[s];r=E6(n,t,a,i,r),t=a}return r}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function D6(n,t,e,i,r,s,o,a,l,c,u){for(var d=u||[NaN,NaN],h=0,f=e.length;h<f;++h){var p=e[h];c=A6(n,t,p,i,r,s,o,a,l,c,d),t=p}return c}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,i,r,s))},t.prototype.containsXY=function(e,i){return OI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,i)},t.prototype.getArea=function(){return function L6(n,t,e,i){for(var r=0,s=0,o=e.length;s<o;++s){var a=e[s];r+=P6(n,t,a,i),t=a}return r}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(e){var i;return void 0!==e?FI(i=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,e):i=this.flatCoordinates,LM(i,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=_m(this.getExtent());this.flatInteriorPoint_=function B6(n,t,e,i,r,s,o){for(var a,l,c,u,d,h,f,p=r[s+1],m=[],g=0,_=e.length;g<_;++g){var v=e[g];for(u=n[v-i],h=n[v-i+1],a=t;a<v;a+=i)d=n[a],f=n[a+1],(p<=h&&f<=p||h<=p&&p<=f)&&m.push(c=(p-h)/(f-h)*(d-u)+u),u=d,h=f}var y=NaN,b=-1/0;for(m.sort(xh),u=m[0],a=1,l=m.length;a<l;++a){d=m[a];var x=Math.abs(d-u);x>b&&OI(n,t,e,i,c=(u+d)/2,p)&&(y=c,b=x),u=d}return isNaN(y)&&(y=r[s]),o?(o.push(y,p,b),o):[y,p,b]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new N6(this.getFlatInteriorPoint(),"XYM")},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(e){return e<0||this.ends_.length<=e?null:new F6(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLinearRings=function(){for(var e=this.layout,i=this.flatCoordinates,r=this.ends_,s=[],o=0,a=0,l=r.length;a<l;++a){var c=r[a],u=new F6(i.slice(o,c),e);s.push(u),o=c}return s},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;!function U6(n,t,e,i,r){for(var s=void 0!==r&&r,o=0,a=e.length;o<a;++o){var l=e[o],c=LI(n,t,l,i);if(0===o){if(s&&c||!s&&!c)return!1}else if(s&&!c||!s&&c)return!1;t=l}return!0}(e,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=FI(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var i=[],r=[];return i.length=function k6(n,t,e,i,r,s,o,a){for(var l=0,c=e.length;l<c;++l){var u=e[l];o=sRe(n,t,u,i,r,s,o),a.push(o),t=u}return o}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),i,0,r),new t(i,"XY",r)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(e){return function H6(n,t,e,i,r){if(!V6(n,t,e[0],i,r))return!1;if(1===e.length)return!0;for(var s=1,o=e.length;s<o;++s)if(uRe(n,e[s-1],e[s],i,r)&&!PI(n,e[s-1],e[s],i,r))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,i){this.setLayout(i,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=function I6(n,t,e,i,r){for(var s=r||[],o=0,a=0,l=e.length;a<l;++a){var c=R6(n,t,e[a],i);s[o++]=c,t=c}return s.length=o,s}(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},t}(II);const pRe=FM;function z6(n){var t=n[0],e=n[1],i=n[2],r=n[3],s=[t,e,t,r,i,r,i,e,t,e];return new FM(s,"XY",[s.length])}var gRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_Re=function(n){function t(e){var i=n.call(this)||this,r=Br({},e);return i.hints_=[0,0],i.animations_=[],i.projection_=CI(r.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.nextCenter_=null,i.cancelAnchor_=void 0,r.projection&&function d6(n){wI=!(void 0===n||n)}(),r.center&&(r.center=yc(r.center)),r.extent&&(r.extent=Ah(r.extent)),i.applyOptions_(r),i}return gRe(t,n),t.prototype.applyOptions_=function(e){var i=Br({},e);for(var r in Aa)delete i[r];this.setProperties(i,!0);var s=function yRe(n){var t,e,i,o=void 0!==n.minZoom?n.minZoom:0,a=void 0!==n.maxZoom?n.maxZoom:28,l=void 0!==n.zoomFactor?n.zoomFactor:2,c=void 0!==n.multiWorld&&n.multiWorld,u=void 0===n.smoothResolutionConstraint||n.smoothResolutionConstraint,d=void 0!==n.showFullExtent&&n.showFullExtent,h=CI(n.projection,"EPSG:3857"),f=h.getExtent(),p=n.constrainOnlyCenter,m=n.extent;if(!c&&!m&&h.isGlobal()&&(p=!1,m=f),void 0!==n.resolutions){var g=n.resolutions;e=g[o],i=void 0!==g[a]?g[a]:g[g.length-1],t=n.constrainResolution?function zDe(n,t,e,i){return function(r,s,o,a){if(void 0!==r){var l=n[0],c=n[n.length-1],u=e?TI(l,e,o,i):l;if(a)return void 0===t||t?AI(r,u,c):ur(r,c,u);var h=Math.min(u,r),f=Math.floor(tI(n,h,s));return n[f]>u&&f<n.length-1?n[f+1]:n[f]}}}(g,u,!p&&m,d):y6(e,i,u,!p&&m,d)}else{var v=(f?Math.max(ai(f),ho(f)):360*jo[Ru.DEGREES]/h.getMetersPerUnit())/256/Math.pow(2,0),y=v/Math.pow(2,28);void 0!==(e=n.maxResolution)?o=0:e=v/Math.pow(l,o),void 0===(i=n.minResolution)&&(i=void 0!==n.maxZoom?void 0!==n.maxResolution?e/Math.pow(l,a):v/Math.pow(l,a):y),a=o+Math.floor(Math.log(e/i)/Math.log(l)),i=e/Math.pow(l,a-o),t=n.constrainResolution?function GDe(n,t,e,i,r,s){return function(o,a,l,c){if(void 0!==o){var u=r?TI(t,r,l,s):t,d=void 0!==e?e:0;if(c)return void 0===i||i?AI(o,u,d):ur(o,d,u);var p=Math.ceil(Math.log(t/u)/Math.log(n)-1e-9),m=-a*(.5-1e-9)+.5,g=Math.min(u,o),_=Math.floor(Math.log(t/g)/Math.log(n)+m),v=Math.max(p,_);return ur(t/Math.pow(n,v),d,u)}}}(l,e,i,u,!p&&m,d):y6(e,i,u,!p&&m,d)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:o,zoomFactor:l}}(e);this.maxResolution_=s.maxResolution,this.minResolution_=s.minResolution,this.zoomFactor_=s.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=s.minZoom;var o=function vRe(n){if(void 0!==n.extent)return v6(n.extent,n.constrainOnlyCenter,void 0===n.smoothExtentConstraint||n.smoothExtentConstraint);var e=CI(n.projection,"EPSG:3857");if(!0!==n.multiWorld&&e.isGlobal()){var i=e.getExtent().slice();return i[0]=-1/0,i[2]=1/0,v6(i,!1,!1)}return UDe}(e),a=s.constraint,l=function bRe(n){if(void 0===n.enableRotation||n.enableRotation){var e=n.constrainRotation;return void 0===e||!0===e?function jDe(n){var t=n||pM(5);return function(e,i){return i?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}():!1===e?b6:"number"==typeof e?function WDe(n){var t=2*Math.PI/n;return function(e,i){return i?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}}(e):b6}return DI}(e);this.constraints_={center:o,resolution:a,rotation:l},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(e){var i=this.padding_;this.padding_=e;var r=this.getCenter();if(r){var s=e||[0,0,0,0];i=i||[0,0,0,0];var o=this.getResolution();this.setCenterInternal([r[0]+o/2*(s[3]-i[3]+i[1]-s[1]),r[1]-o/2*(s[0]-i[0]+i[2]-s[2])])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(e){var i=this.getProperties();return void 0!==i.resolution?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Br({},i,e)},t.prototype.animate=function(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var i=new Array(arguments.length),r=0;r<i.length;++r){var s=arguments[r];s.center&&((s=Br({},s)).center=yc(s.center,this.getProjection())),s.anchor&&((s=Br({},s)).anchor=yc(s.anchor,this.getProjection())),i[r]=s}this.animateInternal.apply(this,i)},t.prototype.animateInternal=function(e){var r,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(r=arguments[i-1],--i);for(var s=0;s<i&&!this.isDef();++s){var o=arguments[s];o.center&&this.setCenterInternal(o.center),void 0!==o.zoom?this.setZoom(o.zoom):o.resolution&&this.setResolution(o.resolution),void 0!==o.rotation&&this.setRotation(o.rotation)}if(s!==i){for(var a=Date.now(),l=this.targetCenter_.slice(),c=this.targetResolution_,u=this.targetRotation_,d=[];s<i;++s){var h=arguments[s],f={start:a,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||RI,callback:r};if(h.center&&(f.sourceCenter=l,f.targetCenter=h.center.slice(),l=f.targetCenter),void 0!==h.zoom?(f.sourceResolution=c,f.targetResolution=this.getResolutionForZoom(h.zoom),c=f.targetResolution):h.resolution&&(f.sourceResolution=c,f.targetResolution=h.resolution,c=f.targetResolution),void 0!==h.rotation){f.sourceRotation=u;var p=bm(h.rotation-u+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=u+p,u=f.targetRotation}xRe(f)?f.complete=!0:a+=f.duration,d.push(f)}this.animations_.push(d),this.setHint(0,1),this.updateAnimations_()}else r&&NM(r,!0)},t.prototype.getAnimating=function(){return this.hints_[0]>0},t.prototype.getInteracting=function(){return this.hints_[1]>0},t.prototype.cancelAnimations=function(){this.setHint(0,-this.hints_[0]);for(var e,i=0,r=this.animations_.length;i<r;++i){var s=this.animations_[i];if(s[0].callback&&NM(s[0].callback,!1),!e)for(var o=0,a=s.length;o<a;++o){var l=s[o];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var e=Date.now(),i=!1,r=this.animations_.length-1;r>=0;--r){for(var s=this.animations_[r],o=!0,a=0,l=s.length;a<l;++a){var c=s[a];if(!c.complete){var d=c.duration>0?(e-c.start)/c.duration:1;d>=1?(c.complete=!0,d=1):o=!1;var h=c.easing(d);if(c.sourceCenter){var f=c.sourceCenter[0],p=c.sourceCenter[1],m=c.targetCenter[0],g=c.targetCenter[1];this.nextCenter_=c.targetCenter,this.targetCenter_=[f+h*(m-f),p+h*(g-p)]}if(c.sourceResolution&&c.targetResolution){var y=1===h?c.targetResolution:c.sourceResolution+h*(c.targetResolution-c.sourceResolution);if(c.anchor){var b=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(y,0,b,!0);this.targetCenter_=this.calculateCenterZoom(x,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){var w=1===h?bm(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+h*(c.targetRotation-c.sourceRotation);if(c.anchor){var E=this.constraints_.rotation(w,!0);this.targetCenter_=this.calculateCenterRotate(E,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=w}if(this.applyTargetState_(!0),i=!0,!c.complete)break}}if(o){this.animations_[r]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var R=s[0].callback;R&&NM(R,!0)}}this.animations_=this.animations_.filter(Boolean),i&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(e,i){var r,s=this.getCenterInternal();return void 0!==s&&(hI(r=[s[0]-i[0],s[1]-i[1]],e-this.getRotation()),function PAe(n,t){n[0]+=+t[0],n[1]+=+t[1]}(r,i)),r},t.prototype.calculateCenterZoom=function(e,i){var r,s=this.getCenterInternal(),o=this.getResolution();return void 0!==s&&void 0!==o&&(r=[i[0]-e*(i[0]-s[0])/o,i[1]-e*(i[1]-s[1])/o]),r},t.prototype.getViewportSize_=function(e){var i=this.viewportSize_;if(e){var r=i[0],s=i[1];return[Math.abs(r*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(s*Math.cos(e))]}return i},t.prototype.setViewportSize=function(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var e=this.getCenterInternal();return e&&SI(e,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(Aa.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()},t.prototype.calculateExtent=function(e){return EI(this.calculateExtentInternal(e),this.getProjection())},t.prototype.calculateExtentInternal=function(e){var i=e||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();hn(r,1);var s=this.getResolution();hn(void 0!==s,2);var o=this.getRotation();return hn(void 0!==o,3),lI(r,s,o,i)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))},t.prototype.setConstrainResolution=function(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(Aa.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(e,i){return this.getResolutionForExtentInternal(Ah(e,this.getProjection()),i)},t.prototype.getResolutionForExtentInternal=function(e,i){var r=i||this.getViewportSizeMinusPadding_(),s=ai(e)/r[0],o=ho(e)/r[1];return Math.max(s,o)},t.prototype.getResolutionForValueFunction=function(e){var i=e||2,r=this.getConstrainedResolution(this.maxResolution_),o=Math.log(r/this.minResolution_)/Math.log(i);return function(a){return r/Math.pow(i,a*o)}},t.prototype.getRotation=function(){return this.get(Aa.ROTATION)},t.prototype.getValueForResolutionFunction=function(e){var i=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),o=Math.log(r/this.minResolution_)/i;return function(a){return Math.log(r/a)/i/o}},t.prototype.getViewportSizeMinusPadding_=function(e){var i=this.getViewportSize_(e),r=this.padding_;return r&&(i=[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]),i},t.prototype.getState=function(){var e=this.getProjection(),i=this.getResolution(),r=this.getRotation(),s=this.getCenterInternal(),o=this.padding_;if(o){var a=this.getViewportSizeMinusPadding_();s=BI(s,this.getViewportSize_(),[a[0]/2+o[3],a[1]/2+o[0]],i,r)}return{center:s.slice(0),projection:void 0!==e?e:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}},t.prototype.getZoom=function(){var e,i=this.getResolution();return void 0!==i&&(e=this.getZoomForResolution(i)),e},t.prototype.getZoomForResolution=function(e){var r,s,i=this.minZoom_||0;if(this.resolutions_){var o=tI(this.resolutions_,e,1);i=o,r=this.resolutions_[o],s=o==this.resolutions_.length-1?2:r/this.resolutions_[o+1]}else r=this.maxResolution_,s=this.zoomFactor_;return i+Math.log(r/e)/Math.log(s)},t.prototype.getResolutionForZoom=function(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var i=ur(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[i]/Math.pow(this.resolutions_[i]/this.resolutions_[i+1],ur(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)},t.prototype.fit=function(e,i){var r;if(hn(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))hn(!uI(e),25),r=z6(s=Ah(e,this.getProjection()));else if("Circle"===e.getType()){var s;(r=z6(s=Ah(e.getExtent(),this.getProjection()))).rotate(this.getRotation(),_m(s))}else{var o=_6();r=o?e.clone().transform(o,this.getProjection()):e}this.fitInternal(r,i)},t.prototype.rotatedExtentForGeometry=function(e){for(var i=this.getRotation(),r=Math.cos(i),s=Math.sin(-i),o=e.getFlatCoordinates(),a=e.getStride(),l=1/0,c=1/0,u=-1/0,d=-1/0,h=0,f=o.length;h<f;h+=a){var p=o[h]*r-o[h+1]*s,m=o[h]*s+o[h+1]*r;l=Math.min(l,p),c=Math.min(c,m),u=Math.max(u,p),d=Math.max(d,m)}return[l,c,u,d]},t.prototype.fitInternal=function(e,i){var r=i||{},s=r.size;s||(s=this.getViewportSizeMinusPadding_());var l,o=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0!==r.nearest&&r.nearest;l=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;var c=this.rotatedExtentForGeometry(e),u=this.getResolutionForExtentInternal(c,[s[0]-o[1]-o[3],s[1]-o[0]-o[2]]);u=isNaN(u)?l:Math.max(u,l),u=this.getConstrainedResolution(u,a?0:1);var d=this.getRotation(),h=Math.sin(d),f=Math.cos(d),p=_m(c);p[0]+=(o[1]-o[3])/2*u,p[1]+=(o[0]-o[2])/2*u;var _=this.getConstrainedCenter([p[0]*f-p[1]*h,p[1]*f+p[0]*h],u),v=r.callback?r.callback:Mh;void 0!==r.duration?this.animateInternal({resolution:u,center:_,duration:r.duration,easing:r.easing},v):(this.targetResolution_=u,this.targetCenter_=_,this.applyTargetState_(!1,!0),NM(v,!0))},t.prototype.centerOn=function(e,i,r){this.centerOnInternal(yc(e,this.getProjection()),i,r)},t.prototype.centerOnInternal=function(e,i,r){this.setCenterInternal(BI(e,i,r,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(e,i,r,s){var o,a=this.padding_;if(a&&e){var l=this.getViewportSizeMinusPadding_(-r),c=BI(e,s,[l[0]/2+a[3],l[1]/2+a[0]],i,r);o=[e[0]-c[0],e[1]-c[1]]}return o},t.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},t.prototype.adjustCenter=function(e){var i=SI(this.targetCenter_,this.getProjection());this.setCenter([i[0]+e[0],i[1]+e[1]])},t.prototype.adjustCenterInternal=function(e){var i=this.targetCenter_;this.setCenterInternal([i[0]+e[0],i[1]+e[1]])},t.prototype.adjustResolution=function(e,i){var r=i&&yc(i,this.getProjection());this.adjustResolutionInternal(e,r)},t.prototype.adjustResolutionInternal=function(e,i){var r=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,s,r);i&&(this.targetCenter_=this.calculateCenterZoom(o,i)),this.targetResolution_*=e,this.applyTargetState_()},t.prototype.adjustZoom=function(e,i){this.adjustResolution(Math.pow(this.zoomFactor_,-e),i)},t.prototype.adjustRotation=function(e,i){i&&(i=yc(i,this.getProjection())),this.adjustRotationInternal(e,i)},t.prototype.adjustRotationInternal=function(e,i){var r=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,r);i&&(this.targetCenter_=this.calculateCenterRotate(s,i)),this.targetRotation_+=e,this.applyTargetState_()},t.prototype.setCenter=function(e){this.setCenterInternal(e&&yc(e,this.getProjection()))},t.prototype.setCenterInternal=function(e){this.targetCenter_=e,this.applyTargetState_()},t.prototype.setHint=function(e,i){return this.hints_[e]+=i,this.changed(),this.hints_[e]},t.prototype.setResolution=function(e){this.targetResolution_=e,this.applyTargetState_()},t.prototype.setRotation=function(e){this.targetRotation_=e,this.applyTargetState_()},t.prototype.setZoom=function(e){this.setResolution(this.getResolutionForZoom(e))},t.prototype.applyTargetState_=function(e,i){var r=this.getAnimating()||this.getInteracting()||i,s=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,0,o,r),l=this.constraints_.center(this.targetCenter_,a,o,r,this.calculateCenterShift(this.targetCenter_,a,s,o));this.get(Aa.ROTATION)!==s&&this.set(Aa.ROTATION,s),this.get(Aa.RESOLUTION)!==a&&(this.set(Aa.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(Aa.CENTER)||!xM(this.get(Aa.CENTER),l))&&this.set(Aa.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(e,i,r){var s=void 0!==e?e:200,o=i||0,a=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(a),c=this.constraints_.resolution(this.targetResolution_,o,l),u=this.constraints_.center(this.targetCenter_,c,l,!1,this.calculateCenterShift(this.targetCenter_,c,a,l));if(0===s&&!this.cancelAnchor_)return this.targetResolution_=c,this.targetRotation_=a,this.targetCenter_=u,void this.applyTargetState_();var d=r||(0===s?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==a||!this.getCenterInternal()||!xM(this.getCenterInternal(),u))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:u,resolution:c,duration:s,easing:Tm,anchor:d}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},t.prototype.endInteraction=function(e,i,r){var s=r&&yc(r,this.getProjection());this.endInteractionInternal(e,i,s)},t.prototype.endInteractionInternal=function(e,i,r){this.setHint(1,-1),this.resolveConstraints(e,i,r)},t.prototype.getConstrainedCenter=function(e,i){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,i||this.getResolution(),r)},t.prototype.getConstrainedZoom=function(e,i){var r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,i))},t.prototype.getConstrainedResolution=function(e,i){var r=i||0,s=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,r,s)},t}(ll);function NM(n,t){setTimeout(function(){n(t)},0)}function xRe(n){return!(n.sourceCenter&&n.targetCenter&&!xM(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function BI(n,t,e,i,r){var s=Math.cos(-r),o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;return[(a+=(t[0]/2-e[0])*i)*s-(l+=(e[1]-t[1]/2)*i)*(o=-o),l*s+a*o]}const Iu=_Re;function G6(n){return n[0]>0&&n[1]>0}function Ra(n,t){return Array.isArray(n)?n:(void 0===t?t=[n,n]:(t[0]=n,t[1]=n),t)}var MRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();function W6(n){n instanceof bM?n.setMapInternal(null):n instanceof AM&&n.getLayers().forEach(W6)}function j6(n,t){if(n instanceof bM)n.setMapInternal(t);else if(n instanceof AM)for(var e=n.getLayers().getArray(),i=0,r=e.length;i<r;++i)j6(e[i],t)}var CRe=function(n){function t(e){var i=n.call(this)||this,r=function SRe(n){var t=null;void 0!==n.keyboardEventTarget&&(t="string"==typeof n.keyboardEventTarget?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);var r,s,o,e={},i=n.layers&&"function"==typeof n.layers.getLayers?n.layers:new AM({layers:n.layers});return e.layergroup=i,e.target=n.target,e.view=n.view instanceof Iu?n.view:new Iu,void 0!==n.controls&&(Array.isArray(n.controls)?r=new Wo(n.controls.slice()):(hn("function"==typeof n.controls.getArray,47),r=n.controls)),void 0!==n.interactions&&(Array.isArray(n.interactions)?s=new Wo(n.interactions.slice()):(hn("function"==typeof n.interactions.getArray,48),s=n.interactions)),void 0!==n.overlays?Array.isArray(n.overlays)?o=new Wo(n.overlays.slice()):(hn("function"==typeof n.overlays.getArray,49),o=n.overlays):o=new Wo,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:e}}(e);i.loaded_=!0,i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,i.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:E8,i.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(i),i.coordinateToPixelTransform_=[1,0,0,1,0,0],i.pixelToCoordinateTransform_=[1,0,0,1,0,0],i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.style.pointerEvents="none",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.style.pointerEvents="none",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=null,i.moveTolerance_=e.moveTolerance,i.keyboardEventTarget_=r.keyboardEventTarget,i.targetChangeHandlerKeys_=null,i.controls=r.controls||new Wo,i.interactions=r.interactions||new Wo,i.overlays_=r.overlays,i.overlayIdIndex_={},i.renderer_=null,i.postRenderFunctions_=[],i.tileQueue_=new _De(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addChangeListener("layergroup",i.handleLayerGroupChanged_),i.addChangeListener("view",i.handleViewChanged_),i.addChangeListener("size",i.handleSizeChanged_),i.addChangeListener("target",i.handleTargetChanged_),i.setProperties(r.values);var s=i;return e.view&&!(e.view instanceof Iu)&&e.view.then(function(o){s.setView(new Iu(o))}),i.controls.addEventListener("add",function(o){o.element.setMap(this)}.bind(i)),i.controls.addEventListener("remove",function(o){o.element.setMap(null)}.bind(i)),i.interactions.addEventListener("add",function(o){o.element.setMap(this)}.bind(i)),i.interactions.addEventListener("remove",function(o){o.element.setMap(null)}.bind(i)),i.overlays_.addEventListener("add",function(o){this.addOverlayInternal_(o.element)}.bind(i)),i.overlays_.addEventListener("remove",function(o){var l=o.element.getId();void 0!==l&&delete this.overlayIdIndex_[l.toString()],o.element.setMap(null)}.bind(i)),i.controls.forEach(function(o){o.setMap(this)}.bind(i)),i.interactions.forEach(function(o){o.setMap(this)}.bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i}return MRe(t,n),t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(e){this.getControls().push(e)},t.prototype.addInteraction=function(e){this.getInteractions().push(e)},t.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},t.prototype.handleLayerAdd_=function(e){j6(e.layer,this)},t.prototype.addOverlay=function(e){this.getOverlays().push(e)},t.prototype.addOverlayInternal_=function(e){var i=e.getId();void 0!==i&&(this.overlayIdIndex_[i.toString()]=e),e.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),n.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(e,i,r){if(this.frameState_&&this.renderer_){var s=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,!1!==r.checkWrapped,i,null,void 0!==r.layerFilter?r.layerFilter:hm,null)}},t.prototype.getFeaturesAtPixel=function(e,i){var r=[];return this.forEachFeatureAtPixel(e,function(s){r.push(s)},i),r},t.prototype.getAllLayers=function(){var e=[];return function i(r){r.forEach(function(s){s instanceof AM?i(s.getLayers()):e.push(s)})}(this.getLayers()),e},t.prototype.forEachLayerAtPixel=function(e,i,r){if(this.frameState_&&this.renderer_){var s=r||{};return this.renderer_.forEachLayerAtPixel(e,this.frameState_,void 0!==s.hitTolerance?s.hitTolerance:0,i,s.layerFilter||hm)}},t.prototype.hasFeatureAtPixel=function(e,i){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,void 0!==i.layerFilter?i.layerFilter:hm,null)},t.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},t.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},t.prototype.getEventPixel=function(e){var i=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-i.left,r.clientY-i.top]},t.prototype.getTarget=function(){return this.get("target")},t.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},t.prototype.getCoordinateFromPixel=function(e){return SI(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(e){var i=this.frameState_;return i?cr(i.pixelToCoordinateTransform,e.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(e){var i=this.overlayIdIndex_[e.toString()];return void 0!==i?i:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get("layergroup")},t.prototype.setLayers=function(e){var i=this.getLayerGroup();if(e instanceof Wo)i.setLayers(e);else{var r=i.getLayers();r.clear(),r.extend(e)}},t.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},t.prototype.getLoadingOrNotReady=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),i=0,r=e.length;i<r;++i){var s=e[i];if(s.visible){var o=s.layer.getRenderer();if(o&&!o.ready)return!0;var a=s.layer.getSource();if(a&&a.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(e){var i=yc(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)},t.prototype.getPixelFromCoordinateInternal=function(e){var i=this.frameState_;return i?cr(i.coordinateToPixelTransform,e.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get("size")},t.prototype.getView=function(){return this.get("view")},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var e=this.getTargetElement();return e?e.ownerDocument:document},t.prototype.getTilePriority=function(e,i,r,s){return function vDe(n,t,e,i,r){if(!n||!(e in n.wantedTiles)||!n.wantedTiles[e][t.getKey()])return DM;var s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(this.frameState_,e,i,r,s)},t.prototype.handleBrowserEvent=function(e,i){var s=new Au(i||e.type,this,e);this.handleMapBrowserEvent(s)},t.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var i=e.originalEvent,r=i.type;if("pointerdown"===r||"wheel"===r||"keydown"===r){var s=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():s,a=i.target;if(this.overlayContainerStopEvent_.contains(a)||!(o===s?s.documentElement:o).contains(a))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var l=this.getInteractions().getArray().slice(),c=l.length-1;c>=0;c--){var u=l[c];if(u.getMap()===this&&u.getActive()&&this.getTargetElement()&&(!u.handleEvent(e)||e.propagationStopped))break}}},t.prototype.handlePostRender=function(){var e=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){var r=this.maxTilesLoading_,s=r;if(e){var o=e.viewHints;if(o[0]||o[1]){var a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}i.getTilesLoading()<r&&(i.reprioritize(),i.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Mm("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Mm("loadstart",this,e))));for(var l=this.postRenderFunctions_,c=0,u=l.length;c<u;++c)l[c](this,e);l.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var e=0,i=this.targetChangeHandlerKeys_.length;e<i;++e)bi(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,pI(this.viewport_)}var r=this.getTargetElement();if(r){for(var s in r.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new hDe(this,this.moveTolerance_),Bi)this.mapBrowserEventHandler_.addEventListener(Bi[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!T8&&{passive:!1});var o=this.getOwnerDocument().defaultView,a=this.keyboardEventTarget_?this.keyboardEventTarget_:r;this.targetChangeHandlerKeys_=[Cn(a,"keydown",this.handleBrowserEvent,this),Cn(a,"keypress",this.handleBrowserEvent,this),Cn(o,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(bi(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(bi(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Cn(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Cn(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(bi),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Tu("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Cn(e,"propertychange",this.render,this),Cn(e,"change",this.render,this),Cn(e,"addlayer",this.handleLayerAdd_,this),Cn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),i=0,r=e.length;i<r;++i){var s=e[i].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(e){return this.getControls().remove(e)},t.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},t.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},t.prototype.handleLayerRemove_=function(e){W6(e.layer)},t.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},t.prototype.renderFrame_=function(e){var i=this,r=this.getSize(),s=this.getView(),o=this.frameState_,a=null;if(void 0!==r&&G6(r)&&s&&s.isDef()){var l=s.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=s.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:lI(c.center,c.resolution,c.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:l,wantedTiles:{},mapId:Rn(this),renderTargets:{}},c.nextCenter&&c.nextResolution){var u=isNaN(c.nextRotation)?c.rotation:c.nextRotation;a.nextExtent=lI(c.nextCenter,c.nextResolution,u,r)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),o&&(!this.previousExtent_||!uI(this.previousExtent_)&&!Iv(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Mm("movestart",this,o)),this.previousExtent_=mm(this.previousExtent_)),this.previousExtent_&&!a.viewHints[0]&&!a.viewHints[1]&&!Iv(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Mm("moveend",this,a)),R8(a.extent,this.previousExtent_))),this.dispatchEvent(new Mm("postrender",this,a)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){i.postRenderTimeoutHandle_=void 0,i.handlePostRender()},0))},t.prototype.setLayerGroup=function(e){var i=this.getLayerGroup();i&&this.handleLayerRemove_(new Tu("removelayer",i)),this.set("layergroup",e)},t.prototype.setSize=function(e){this.set("size",e)},t.prototype.setTarget=function(e){this.set("target",e)},t.prototype.setView=function(e){if(!e||e instanceof Iu)this.set("view",e);else{this.set("view",new Iu);var i=this;e.then(function(r){i.setView(new Iu(r))})}},t.prototype.updateSize=function(){var e=this.getTargetElement(),i=void 0;if(e){var r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&!G6(i=[s,o])&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(i),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var i=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(i=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(i)}},t}(ll);const ERe=CRe;var TRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ARe=function(n){function t(e){var i=n.call(this)||this,r=e.element;return r&&!e.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),i.element=r||null,i.target_=null,i.map_=null,i.listenerKeys=[],e.render&&(i.render=e.render),e.target&&i.setTarget(e.target),i}return TRe(t,n),t.prototype.disposeInternal=function(){pI(this.element),n.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_&&pI(this.element);for(var i=0,r=this.listenerKeys.length;i<r;++i)bi(this.listenerKeys[i]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Mh&&this.listenerKeys.push(Cn(e,"postrender",this.render,this)),e.render())},t.prototype.render=function(e){},t.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},t}(ll);const VI=ARe;var DRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),RRe=function(n){function t(e){var i=this,r=e||{};(i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).ulElement_=document.createElement("ul"),i.collapsed_=void 0===r.collapsed||r.collapsed,i.userCollapsed_=i.collapsed_,i.overrideCollapsible_=void 0!==r.collapsible,i.collapsible_=void 0===r.collapsible||r.collapsible,i.collapsible_||(i.collapsed_=!1);var s=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",a=void 0!==r.expandClassName?r.expandClassName:s+"-expand",l=void 0!==r.collapseLabel?r.collapseLabel:"\u203a",c=void 0!==r.collapseClassName?r.collapseClassName:s+"-collapse";"string"==typeof l?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=l,i.collapseLabel_.className=c):i.collapseLabel_=l;var u=void 0!==r.label?r.label:"i";"string"==typeof u?(i.label_=document.createElement("span"),i.label_.textContent=u,i.label_.className=a):i.label_=u;var d=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_;i.toggleButton_=document.createElement("button"),i.toggleButton_.setAttribute("type","button"),i.toggleButton_.setAttribute("aria-expanded",String(!i.collapsed_)),i.toggleButton_.title=o,i.toggleButton_.appendChild(d),i.toggleButton_.addEventListener("click",i.handleClick_.bind(i),!1);var f=i.element;return f.className=s+" "+MM+" "+fI+(i.collapsed_&&i.collapsible_?" "+X8:"")+(i.collapsible_?"":" ol-uncollapsible"),f.appendChild(i.toggleButton_),f.appendChild(i.ulElement_),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return DRe(t,n),t.prototype.collectSourceAttributions_=function(e){for(var i={},r=[],s=!0,o=e.layerStatesArray,a=0,l=o.length;a<l;++a){var c=o[a];if(yM(c,e.viewState)){var u=c.layer.getSource();if(u){var d=u.getAttributions();if(d){var h=d(e);if(h)if(s=s&&!1!==u.getAttributionsCollapsible(),Array.isArray(h))for(var f=0,p=h.length;f<p;++f)h[f]in i||(r.push(h[f]),i[h[f]]=!0);else h in i||(r.push(h),i[h]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(s),r},t.prototype.updateElement_=function(e){if(e){var i=this.collectSourceAttributions_(e),r=i.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!wh(i,this.renderedAttributions_)){!function qAe(n){for(;n.lastChild;)n.removeChild(n.lastChild)}(this.ulElement_);for(var s=0,o=i.length;s<o;++s){var a=document.createElement("li");a.innerHTML=i[s],this.ulElement_.appendChild(a)}this.renderedAttributions_=i}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(X8),this.collapsed_?J8(this.collapseLabel_,this.label_):J8(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(e){this.updateElement_(e.frameState)},t}(VI);const IRe=RRe;var kRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ORe=function(n){function t(e){var i=this,r=e||{};i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var s=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"\u21e7",a=void 0!==r.compassClassName?r.compassClassName:"ol-compass";i.label_=null,"string"==typeof o?(i.label_=document.createElement("span"),i.label_.className=a,i.label_.textContent=o):(i.label_=o,i.label_.classList.add(a));var l=r.tipLabel?r.tipLabel:"Reset rotation",c=document.createElement("button");c.className=s+"-reset",c.setAttribute("type","button"),c.title=l,c.appendChild(i.label_),c.addEventListener("click",i.handleClick_.bind(i),!1);var d=i.element;return d.className=s+" "+MM+" "+fI,d.appendChild(c),i.callResetNorth_=r.resetNorth?r.resetNorth:void 0,i.duration_=void 0!==r.duration?r.duration:250,i.autoHide_=void 0===r.autoHide||r.autoHide,i.rotation_=void 0,i.autoHide_&&i.element.classList.add(wM),i}return kRe(t,n),t.prototype.handleClick_=function(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var i=this.getMap().getView();if(i){var r=i.getRotation();void 0!==r&&(this.duration_>0&&r%(2*Math.PI)!=0?i.animate({rotation:0,duration:this.duration_,easing:Tm}):i.setRotation(0))}},t.prototype.render=function(e){var i=e.frameState;if(i){var r=i.viewState.rotation;if(r!=this.rotation_){var s="rotate("+r+"rad)";if(this.autoHide_){var o=this.element.classList.contains(wM);o||0!==r?o&&0!==r&&this.element.classList.remove(wM):this.element.classList.add(wM)}this.label_.style.transform=s}this.rotation_=r}},t}(VI);const PRe=ORe;var LRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),FRe=function(n){function t(e){var i=this,r=e||{};i=n.call(this,{element:document.createElement("div"),target:r.target})||this;var s=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,a=void 0!==r.zoomInClassName?r.zoomInClassName:s+"-in",l=void 0!==r.zoomOutClassName?r.zoomOutClassName:s+"-out",c=void 0!==r.zoomInLabel?r.zoomInLabel:"+",u=void 0!==r.zoomOutLabel?r.zoomOutLabel:"\u2013",d=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",h=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=d,f.appendChild("string"==typeof c?document.createTextNode(c):c),f.addEventListener("click",i.handleClick_.bind(i,o),!1);var p=document.createElement("button");p.className=l,p.setAttribute("type","button"),p.title=h,p.appendChild("string"==typeof u?document.createTextNode(u):u),p.addEventListener("click",i.handleClick_.bind(i,-o),!1);var g=i.element;return g.className=s+" "+MM+" "+fI,g.appendChild(f),g.appendChild(p),i.duration_=void 0!==r.duration?r.duration:250,i}return LRe(t,n),t.prototype.handleClick_=function(e,i){i.preventDefault(),this.zoomByDelta_(e)},t.prototype.zoomByDelta_=function(e){var r=this.getMap().getView();if(r){var s=r.getZoom();if(void 0!==s){var o=r.getConstrainedZoom(s+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:Tm})):r.setZoom(o)}}},t}(VI);const NRe=FRe;var VRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),HRe=function(n){function t(e){var i=n.call(this)||this;return e&&e.handleEvent&&(i.handleEvent=e.handleEvent),i.map_=null,i.setActive(!0),i}return VRe(t,n),t.prototype.getActive=function(){return this.get("active")},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(e){return!0},t.prototype.setActive=function(e){this.set("active",e)},t.prototype.setMap=function(e){this.map_=e},t}(ll);function HI(n,t,e,i){var r=n.getZoom();if(void 0!==r){var s=n.getConstrainedZoom(r+t),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:e,duration:void 0!==i?i:250,easing:Tm})}}const zv=HRe;var zRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),GRe=function(n){function t(e){var i=n.call(this)||this,r=e||{};return i.delta_=r.delta?r.delta:1,i.duration_=void 0!==r.duration?r.duration:250,i}return zRe(t,n),t.prototype.handleEvent=function(e){var i=!1;if(e.type==Bi.DBLCLICK){var r=e.originalEvent,o=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_;HI(e.map.getView(),a,o,this.duration_),r.preventDefault(),i=!0}return!i},t}(zv);const WRe=GRe;var jRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$Re=function(n){function t(e){var i=this,r=e||{};return i=n.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.targetPointers=[],i}return jRe(t,n),t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(e){return!1},t.prototype.handleDragEvent=function(e){},t.prototype.handleEvent=function(e){if(!e.originalEvent)return!0;var i=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Bi.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Bi.POINTERUP){var r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Bi.POINTERDOWN){var s=this.handleDownEvent(e);this.handlingDownUpSequence=s,i=this.stopDown(s)}else e.type==Bi.POINTERMOVE&&this.handleMoveEvent(e);return!i},t.prototype.handleMoveEvent=function(e){},t.prototype.handleUpEvent=function(e){return!1},t.prototype.stopDown=function(e){return e},t.prototype.updateTrackedPointers_=function(e){e.activePointers&&(this.targetPointers=e.activePointers)},t}(zv);function UI(n){for(var t=n.length,e=0,i=0,r=0;r<t;r++)e+=n[r].clientX,i+=n[r].clientY;return[e/t,i/t]}const Gv=$Re;function zI(n){var t=arguments;return function(e){for(var i=!0,r=0,s=t.length;r<s&&(i=i&&t[r](e));++r);return i}}var qRe=function(n){var t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},q6=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(n){var t=n.map.getTargetElement(),e=n.map.getOwnerDocument().activeElement;return t.contains(e)}(n)},XRe=hm,Y6=function(n){var t=n.originalEvent;return 0==t.button&&!(oAe&&aAe&&t.ctrlKey)},X6=function(n){var t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},KRe=function(n){var t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},K6=function(n){var t=n.originalEvent,e=t.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e&&!t.target.isContentEditable},GI=function(n){var t=n.originalEvent;return hn(void 0!==t,56),"mouse"==t.pointerType},ZRe=function(n){var t=n.originalEvent;return hn(void 0!==t,56),t.isPrimary&&0===t.button},QRe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),JRe=function(n){function t(e){var i=n.call(this,{stopDown:sM})||this,r=e||{};i.kinetic_=r.kinetic,i.lastCentroid=null,i.panning_=!1;var s=r.condition?r.condition:zI(X6,ZRe);return i.condition_=r.onFocusOnly?zI(q6,s):s,i.noKinetic_=!1,i}return QRe(t,n),t.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var i=this.targetPointers,r=UI(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();(function NAe(n,t){n[0]*=t,n[1]*=t})(s,a.getResolution()),hI(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(e){var i=e.map,r=i.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var s=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=r.getCenterInternal(),l=i.getPixelFromCoordinateInternal(a),c=i.getCoordinateFromPixelInternal([l[0]-s*Math.cos(o),l[1]-s*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(c),duration:500,easing:Tm})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},t}(Gv);const eIe=JRe;var tIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nIe=function(n){function t(e){var i=this,r=e||{};return(i=n.call(this,{stopDown:sM})||this).condition_=r.condition?r.condition:qRe,i.lastAngle_=void 0,i.duration_=void 0!==r.duration?r.duration:250,i}return tIe(t,n),t.prototype.handleDragEvent=function(e){if(GI(e)){var i=e.map,r=i.getView();if(r.getConstraints().rotation!==DI){var s=i.getSize(),o=e.pixel,a=Math.atan2(s[1]/2-o[1],o[0]-s[0]/2);void 0!==this.lastAngle_&&r.adjustRotationInternal(-(a-this.lastAngle_)),this.lastAngle_=a}}},t.prototype.handleUpEvent=function(e){return!GI(e)||(e.map.getView().endInteraction(this.duration_),!1)},t.prototype.handleDownEvent=function(e){return!(!GI(e)||!Y6(e)||!this.condition_(e)||(e.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},t}(Gv);const iIe=nIe;var rIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),sIe=function(n){function t(e){var i=n.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+e,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return rIe(t,n),t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var e=this.startPixel_,i=this.endPixel_,r="px",s=this.element_.style;s.left=Math.min(e[0],i[0])+r,s.top=Math.min(e[1],i[1])+r,s.width=Math.abs(i[0]-e[0])+r,s.height=Math.abs(i[1]-e[1])+r},t.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(e,i){this.startPixel_=e,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_,i=this.endPixel_,s=[e,[e[0],i[1]],i,[i[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new pRe([s])},t.prototype.getGeometry=function(){return this.geometry_},t}(eI);const oIe=sIe;var Z6=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),WI=function(n){function t(e,i,r){var s=n.call(this,e)||this;return s.coordinate=i,s.mapBrowserEvent=r,s}return Z6(t,n),t}(gc),aIe=function(n){function t(e){var i=n.call(this)||this,r=e||{};return i.box_=new oIe(r.className||"ol-dragbox"),i.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.startPixel_=null,i.condition_=r.condition?r.condition:Y6,i.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return Z6(t,n),t.prototype.defaultBoxEndCondition=function(e,i,r){var s=r[0]-i[0],o=r[1]-i[1];return s*s+o*o>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new WI("boxdrag",e.coordinate,e))},t.prototype.handleUpEvent=function(e){this.box_.setMap(null);var i=this.boxEndCondition_(e,this.startPixel_,e.pixel);return i&&this.onBoxEnd(e),this.dispatchEvent(new WI(i?"boxend":"boxcancel",e.coordinate,e)),!1},t.prototype.handleDownEvent=function(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new WI("boxstart",e.coordinate,e)),!0)},t.prototype.onBoxEnd=function(e){},t}(Gv);const lIe=aIe;var cIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),uIe=function(n){function t(e){var i=this,r=e||{};return(i=n.call(this,{condition:r.condition?r.condition:KRe,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,i.out_=void 0!==r.out&&r.out,i}return cIe(t,n),t.prototype.onBoxEnd=function(e){var r=this.getMap().getView(),s=this.getGeometry();if(this.out_){var o=r.rotatedExtentForGeometry(s),a=r.getResolutionForExtentInternal(o),l=r.getResolution()/a;(s=s.clone()).scale(l*l)}r.fitInternal(s,{duration:this.duration_,easing:Tm})},t}(lIe);const dIe=uIe;var hIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fIe=function(n){function t(e){var i=n.call(this)||this,r=e||{};return i.defaultCondition_=function(s){return X6(s)&&K6(s)},i.condition_=void 0!==r.condition?r.condition:i.defaultCondition_,i.duration_=void 0!==r.duration?r.duration:100,i.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,i}return hIe(t,n),t.prototype.handleEvent=function(e){var i=!1;if("keydown"==e.type){var r=e.originalEvent,s=r.keyCode;if(this.condition_(e)&&(40==s||37==s||39==s||38==s)){var a=e.map.getView(),l=a.getResolution()*this.pixelDelta_,c=0,u=0;40==s?u=-l:37==s?c=-l:39==s?c=l:u=l;var d=[c,u];hI(d,a.getRotation()),function URe(n,t,e){var i=n.getCenterInternal();i&&n.animateInternal({duration:void 0!==e?e:250,easing:$De,center:n.getConstrainedCenter([i[0]+t[0],i[1]+t[1]])})}(a,d,this.duration_),r.preventDefault(),i=!0}}return!i},t}(zv);const pIe=fIe;var mIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),gIe=function(n){function t(e){var i=n.call(this)||this,r=e||{};return i.condition_=r.condition?r.condition:K6,i.delta_=r.delta?r.delta:1,i.duration_=void 0!==r.duration?r.duration:100,i}return mIe(t,n),t.prototype.handleEvent=function(e){var i=!1;if("keydown"==e.type||"keypress"==e.type){var r=e.originalEvent,s=r.charCode;if(this.condition_(e)&&(s=="+".charCodeAt(0)||s=="-".charCodeAt(0))){var o=e.map,a=s=="+".charCodeAt(0)?this.delta_:-this.delta_;HI(o.getView(),a,void 0,this.duration_),r.preventDefault(),i=!0}}return!i},t}(zv);const _Ie=gIe;var vIe=function(){function n(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return n.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},n.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},n.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var r=this.points_[e+2]-this.points_[i+2];if(r<1e3/60)return!1;var s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_},n.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},n.prototype.getAngle=function(){return this.angle_},n}();const yIe=vIe;var bIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xIe=function(n){function t(e){var i=this,r=e||{};(i=n.call(this,r)||this).totalDelta_=0,i.lastDelta_=0,i.maxDelta_=void 0!==r.maxDelta?r.maxDelta:1,i.duration_=void 0!==r.duration?r.duration:250,i.timeout_=void 0!==r.timeout?r.timeout:80,i.useAnchor_=void 0===r.useAnchor||r.useAnchor,i.constrainResolution_=void 0!==r.constrainResolution&&r.constrainResolution;var s=r.condition?r.condition:XRe;return i.condition_=r.onFocusOnly?zI(q6,s):s,i.lastAnchor_=null,i.startTime_=void 0,i.mode_=void 0,i.trackpadEventGap_=400,i.deltaPerZoom_=300,i}return bIe(t,n),t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},t.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;if("wheel"!==e.type)return!0;var o,r=e.map,s=e.originalEvent;if(s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(o=s.deltaY,rAe&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=E8),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),0===o)return!1;this.lastDelta_=o;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");var l=r.getView();if("trackpad"===this.mode_&&!l.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=o;var c=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),c),!1},t.prototype.handleWheelZoom_=function(e){var i=e.getView();i.getAnimating()&&i.cancelAnimations();var r=-ur(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),HI(i,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)},t}(zv);const wIe=xIe;var MIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),CIe=function(n){function t(e){var i=this,r=e||{},s=r;return s.stopDown||(s.stopDown=sM),(i=n.call(this,s)||this).anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=void 0!==r.threshold?r.threshold:.3,i.duration_=void 0!==r.duration?r.duration:250,i}return MIe(t,n),t.prototype.handleDragEvent=function(e){var i=0,r=this.targetPointers[0],s=this.targetPointers[1],o=Math.atan2(s.clientY-r.clientY,s.clientX-r.clientX);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;this.rotationDelta_+=a,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=a}this.lastAngle_=o;var l=e.map,c=l.getView();if(c.getConstraints().rotation!==DI){var u=l.getViewport().getBoundingClientRect(),d=UI(this.targetPointers);d[0]-=u.left,d[1]-=u.top,this.anchor_=l.getCoordinateFromPixelInternal(d),this.rotating_&&(l.render(),c.adjustRotationInternal(i,this.anchor_))}},t.prototype.handleUpEvent=function(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var i=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1},t}(Gv);const SIe=CIe;var EIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),TIe=function(n){function t(e){var i=this,r=e||{},s=r;return s.stopDown||(s.stopDown=sM),(i=n.call(this,s)||this).anchor_=null,i.duration_=void 0!==r.duration?r.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return EIe(t,n),t.prototype.handleDragEvent=function(e){var i=1,r=this.targetPointers[0],s=this.targetPointers[1],o=r.clientX-s.clientX,a=r.clientY-s.clientY,l=Math.sqrt(o*o+a*a);void 0!==this.lastDistance_&&(i=this.lastDistance_/l),this.lastDistance_=l;var c=e.map,u=c.getView();1!=i&&(this.lastScaleDelta_=i);var d=c.getViewport().getBoundingClientRect(),h=UI(this.targetPointers);h[0]-=d.left,h[1]-=d.top,this.anchor_=c.getCoordinateFromPixelInternal(h),c.render(),u.adjustResolutionInternal(i,this.anchor_)},t.prototype.handleUpEvent=function(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var i=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1},t}(Gv);const AIe=TIe;var RIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),IIe=function(n){function t(e){return(e=Br({},e)).controls||(e.controls=function BRe(n){var t=n||{},e=new Wo;return(void 0===t.zoom||t.zoom)&&e.push(new NRe(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new PRe(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new IRe(t.attributionOptions)),e}()),e.interactions||(e.interactions=function DIe(n){var t=n||{},e=new Wo,i=new yIe(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new iIe),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new WRe({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new eIe({onFocusOnly:t.onFocusOnly,kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new SIe),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new AIe({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new pIe),e.push(new _Ie({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new wIe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new dIe({duration:t.zoomDuration})),e}({onFocusOnly:!0})),n.call(this,e)||this}return RIe(t,n),t.prototype.createRenderer=function(){return new iDe(this)},t}(ERe);const kIe=IIe;var OIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),PIe=function(n){function t(e,i,r){var s=n.call(this)||this,o=r||{};return s.tileCoord=e,s.state=i,s.interimTile=null,s.key="",s.transition_=void 0===o.transition?250:o.transition,s.transitionStarts_={},s.interpolate=!!o.interpolate,s}return OIe(t,n),t.prototype.changed=function(){this.dispatchEvent("change")},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var e=this.interimTile,i=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?i=e:0==e.getState()?i.interimTile=e.interimTile:i=e,e=i.interimTile}while(e)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()},t.prototype.load=function(){dn()},t.prototype.getAlpha=function(e,i){if(!this.transition_)return 1;var r=this.transitionStarts_[e];if(r){if(-1===r)return 1}else this.transitionStarts_[e]=r=i;var s=i-r+1e3/60;return s>=this.transition_?1:x6(s/this.transition_)},t.prototype.inTransition=function(e){return!!this.transition_&&-1!==this.transitionStarts_[e]},t.prototype.endTransition=function(e){this.transition_&&(this.transitionStarts_[e]=-1)},t}(fm);const Q6=PIe;var LIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),FIe=function(n){function t(e,i,r,s){var o=n.call(this)||this;return o.extent=e,o.pixelRatio_=r,o.resolution=i,o.state=s,o}return LIe(t,n),t.prototype.changed=function(){this.dispatchEvent("change")},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return dn()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){dn()},t}(fm);const NIe=FIe;var BIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();function $I(n,t,e){var i=n,r=!0,s=!1,o=!1,a=[oM(i,"load",function(){o=!0,s||t()})];return i.src&&lAe?(s=!0,i.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():e())})):a.push(oM(i,"error",e)),function(){r=!1,a.forEach(bi)}}!function(n){function t(e,i,r,s,o,a){var l=n.call(this,e,i,r,0)||this;return l.src_=s,l.image_=new Image,null!==o&&(l.image_.crossOrigin=o),l.unlisten_=null,l.state=0,l.imageLoadFunction_=a,l}BIe(t,n),t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=ho(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=$I(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(e){this.image_=e,this.resolution=ho(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(NIe);var VIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),HIe=function(n){function t(e,i,r,s,o,a){var l=n.call(this,e,i,a)||this;return l.crossOrigin_=s,l.src_=r,l.key=r,l.image_=new Image,null!==s&&(l.image_.crossOrigin=s),l.unlisten_=null,l.tileLoadFunction_=o,l}return VIe(t,n),t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=function UIe(){var n=fo(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()},t.prototype.handleImageLoad_=function(){var e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()},t.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=$I(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(Q6);const J6=HIe;var WIe=function(){function n(t,e,i,r,s,o){this.sourceProj_=t,this.targetProj_=e;var a={},l=Hv(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){var b=y[0]+"/"+y[1];return a[b]||(a[b]=l(y)),a[b]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ai(r)==ai(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ai(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ai(this.targetProj_.getExtent()):null;var c=Ch(i),u=fM(i),d=hM(i),h=dM(i),f=this.transformInv_(c),p=this.transformInv_(u),m=this.transformInv_(d),g=this.transformInv_(h),_=10+(o?Math.max(0,Math.ceil(CAe(uM(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,d,h,f,p,m,g,_),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach(function(y,b,x){v=Math.min(v,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(function(y){if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-v>this.sourceWorldWidth_/2){var b=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];b[0][0]-v>this.sourceWorldWidth_/2&&(b[0][0]-=this.sourceWorldWidth_),b[1][0]-v>this.sourceWorldWidth_/2&&(b[1][0]-=this.sourceWorldWidth_),b[2][0]-v>this.sourceWorldWidth_/2&&(b[2][0]-=this.sourceWorldWidth_);var x=Math.min(b[0][0],b[1][0],b[2][0]);Math.max(b[0][0],b[1][0],b[2][0])-x<this.sourceWorldWidth_/2&&(y.source=b)}}.bind(this))}a={}}return n.prototype.addTriangle_=function(t,e,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,e,i]})},n.prototype.addQuad_=function(t,e,i,r,s,o,a,l,c){var u=D8([s,o,a,l]),d=this.sourceWorldWidth_?ai(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1,p=!1;if(c>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=ai(D8([t,e,i,r]))/this.targetWorldWidth_>.25||p),!f&&this.sourceProj_.isGlobal()&&d&&(p=d>.25||p)),!(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||Ls(u,this.maxSourceExtent_)){var _=0;if(!(p||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])))if(c>0)p=!0;else if(1!=(_=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1))&&2!=_&&4!=_&&8!=_)return;if(c>0){if(!p){var y=this.transformInv_([(t[0]+i[0])/2,(t[1]+i[1])/2]),b=void 0;b=f?(bm(s[0],h)+bm(a[0],h))/2-bm(y[0],h):(s[0]+a[0])/2-y[0];var w=(s[1]+a[1])/2-y[1];p=b*b+w*w>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var R=[(e[0]+i[0])/2,(e[1]+i[1])/2],F=this.transformInv_(R),N=[(r[0]+t[0])/2,(r[1]+t[1])/2],C=this.transformInv_(N);this.addQuad_(t,e,R,N,s,o,F,C,c-1),this.addQuad_(N,R,i,r,C,F,a,l,c-1)}else{var L=[(t[0]+e[0])/2,(t[1]+e[1])/2],Y=this.transformInv_(L),I=[(i[0]+r[0])/2,(i[1]+r[1])/2],z=this.transformInv_(I);this.addQuad_(t,L,I,r,s,Y,z,l,c-1),this.addQuad_(L,e,i,I,Y,o,a,z,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&_)&&this.addTriangle_(t,i,r,s,a,l),0==(14&_)&&this.addTriangle_(t,i,e,s,a,o),_&&(0==(13&_)&&this.addTriangle_(e,r,t,o,l,s),0==(7&_)&&this.addTriangle_(e,r,i,o,l,a))}},n.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,i,r){var s=e.source;gm(t,s[0]),gm(t,s[1]),gm(t,s[2])}),t},n.prototype.getTriangles=function(){return this.triangles_},n}();const jIe=WIe;var YI,qI={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},$Ie={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},t$=[];function n$(n,t,e,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(t,e),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(t,i)+1,Math.max(e,r)),n.restore()}function XI(n,t){return Math.abs(n[4*t]-210)>2||Math.abs(n[4*t+3]-191.25)>2}function i$(n,t,e,i){var r=Uv(e,t,n),s=f6(t,i,e),o=t.getMetersPerUnit();void 0!==o&&(s*=o);var a=n.getMetersPerUnit();void 0!==a&&(s/=a);var l=n.getExtent();if(!l||Rv(l,r)){var c=f6(n,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}var KIe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ZIe=function(n){function t(e,i,r,s,o,a,l,c,u,d,h,f){var p=n.call(this,o,0,{interpolate:!!f})||this;p.renderEdges_=void 0!==h&&h,p.pixelRatio_=l,p.gutter_=c,p.canvas_=null,p.sourceTileGrid_=i,p.targetTileGrid_=s,p.wrappedTileCoord_=a||o,p.sourceTiles_=[],p.sourcesListenerKeys_=null,p.sourceZ_=0;var m=s.getTileCoordExtent(p.wrappedTileCoord_),g=p.targetTileGrid_.getExtent(),_=p.sourceTileGrid_.getExtent(),v=g?vm(m,g):m;if(0===uM(v))return p.state=4,p;var y=e.getExtent();y&&(_=_?vm(_,y):y);var b=s.getResolution(p.wrappedTileCoord_[0]),x=function YIe(n,t,e,i){var r=_m(e),s=i$(n,t,r,i);return(!isFinite(s)||s<=0)&&L8(e,function(o){return s=i$(n,t,o,i),isFinite(s)&&s>0}),s}(e,r,v,b);if(!isFinite(x)||x<=0)return p.state=4,p;if(p.triangulation_=new jIe(e,r,v,_,x*(void 0!==d?d:.5),b),0===p.triangulation_.getTriangles().length)return p.state=4,p;p.sourceZ_=i.getZForResolution(x);var E=p.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(E[1]=ur(E[1],_[1],_[3]),E[3]=ur(E[3],_[1],_[3])):E=vm(E,_)),uM(E)){for(var R=i.getTileRangeForExtentAndZ(E,p.sourceZ_),F=R.minX;F<=R.maxX;F++)for(var N=R.minY;N<=R.maxY;N++){var C=u(p.sourceZ_,F,N,l);C&&p.sourceTiles_.push(C)}0===p.sourceTiles_.length&&(p.state=4)}else p.state=4;return p}return KIe(t,n),t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(u,d,h){u&&2==u.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(u.tileCoord),image:u.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{var i=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(i),s="number"==typeof r?r:r[0],o="number"==typeof r?r:r[1],a=this.targetTileGrid_.getResolution(i),l=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function XIe(n,t,e,i,r,s,o,a,l,c,u,d){var h=fo(Math.round(e*n),Math.round(e*t),t$);if(d||Br(h,qI),0===l.length)return h.canvas;function f(b){return Math.round(b*e)/e}h.scale(e,e),h.globalCompositeOperation="lighter";var p=[1/0,1/0,-1/0,-1/0];l.forEach(function(b,x,w){!function mAe(n,t){t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3])}(p,b.extent)});var m=ai(p),g=ho(p),_=fo(Math.round(e*m/i),Math.round(e*g/i));d||Br(_,qI);var v=e/i;l.forEach(function(b,x,w){var E=b.extent[0]-p[0],R=-(b.extent[3]-p[3]),F=ai(b.extent),N=ho(b.extent);b.image.width>0&&b.image.height>0&&_.drawImage(b.image,c,c,b.image.width-2*c,b.image.height-2*c,E*v,R*v,F*v,N*v)});var y=Ch(o);return a.getTriangles().forEach(function(b,x,w){var E=b.source,R=b.target,F=E[0][0],N=E[0][1],C=E[1][0],L=E[1][1],Y=E[2][0],I=E[2][1],z=f((R[0][0]-y[0])/s),D=f(-(R[0][1]-y[1])/s),P=f((R[1][0]-y[0])/s),O=f(-(R[1][1]-y[1])/s),q=f((R[2][0]-y[0])/s),K=f(-(R[2][1]-y[1])/s),J=F,j=N;F=0,N=0;var fe=function EAe(n){for(var t=n.length,e=0;e<t;e++){for(var i=e,r=Math.abs(n[e][e]),s=e+1;s<t;s++){var o=Math.abs(n[s][e]);o>r&&(r=o,i=s)}if(0===r)return null;var a=n[i];n[i]=n[e],n[e]=a;for(var l=e+1;l<t;l++)for(var c=-n[l][e]/n[e][e],u=e;u<t+1;u++)e==u?n[l][u]=0:n[l][u]+=c*n[e][u]}for(var d=new Array(t),h=t-1;h>=0;h--){d[h]=n[h][t]/n[h][h];for(var f=h-1;f>=0;f--)n[f][t]-=n[f][h]*d[h]}return d}([[C-=J,L-=j,0,0,P-z],[Y-=J,I-=j,0,0,q-z],[0,0,C,L,O-D],[0,0,Y,I,K-D]]);if(fe){if(h.save(),h.beginPath(),function qIe(){if(void 0===YI){var n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",n$(n,4,5,4,0),n$(n,4,5,0,5);var t=n.getImageData(0,0,3,3).data;YI=XI(t,0)||XI(t,4)||XI(t,8)}return YI}()||!d){h.moveTo(P,O);for(var ie=z-P,Re=D-O,Pe=0;Pe<4;Pe++)h.lineTo(P+f((Pe+1)*ie/4),O+f(Pe*Re/3)),3!=Pe&&h.lineTo(P+f((Pe+1)*ie/4),O+f((Pe+1)*Re/3));h.lineTo(q,K)}else h.moveTo(P,O),h.lineTo(z,D),h.lineTo(q,K);h.clip(),h.transform(fe[0],fe[2],fe[1],fe[3],z,D),h.translate(p[0]-J,p[3]-j),h.scale(i/e,-i/e),h.drawImage(_.canvas,0,0),h.restore()}}),u&&(h.save(),h.globalCompositeOperation="source-over",h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(b,x,w){var E=b.target,R=(E[0][0]-y[0])/s,F=-(E[0][1]-y[1])/s,N=(E[1][0]-y[0])/s,C=-(E[1][1]-y[1])/s,L=(E[2][0]-y[0])/s,Y=-(E[2][1]-y[1])/s;h.beginPath(),h.moveTo(N,C),h.lineTo(R,F),h.lineTo(L,Y),h.closePath(),h.stroke()}),h.restore()),h.canvas}(s,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),a,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()},t.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,r,s){var o=i.getState();if(0==o||1==o){e++;var a=Cn(i,"change",function(l){var c=i.getState();(2==c||3==c||4==c)&&(bi(a),0==--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(i,r,s){0==i.getState()&&i.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(bi),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(Q8(this.canvas_.getContext("2d")),t$.push(this.canvas_),this.canvas_=null),n.prototype.release.call(this)},t}(Q6);const r$=ZIe;var QIe=function(){function n(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return n.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},n.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},n.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},n.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},n.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},n.prototype.get=function(t,e){var i=this.entries_[t];return hn(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},n.prototype.remove=function(t){var e=this.entries_[t];return hn(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},n.prototype.getCount=function(){return this.count_},n.prototype.getKeys=function(){var i,t=new Array(this.count_),e=0;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t},n.prototype.getValues=function(){var i,t=new Array(this.count_),e=0;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t},n.prototype.peekLast=function(){return this.oldest_.value_},n.prototype.peekLastKey=function(){return this.oldest_.key_},n.prototype.peekFirstKey=function(){return this.newest_.key_},n.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},n.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},n.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},n.prototype.set=function(t,e){hn(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},n.prototype.setSize=function(t){this.highWaterMark=t},n}();const JIe=QIe;function s$(n,t,e,i){return void 0!==i?(i[0]=n,i[1]=t,i[2]=e,i):[n,t,e]}function Wv(n,t,e){return n+"/"+t+"/"+e}function o$(n){return Wv(n[0],n[1],n[2])}var ike=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),rke=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ike(t,n),t.prototype.expireCache=function(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()},t.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var i=function eke(n){return n.split("/").map(Number)}(this.peekFirstKey()),r=i[0];this.forEach(function(s){s.tileCoord[0]!==r&&(this.remove(o$(s.tileCoord)),s.release())}.bind(this))}},t}(JIe);const a$=rke;var ske=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),oke=function(n){function t(e){var i=n.call(this)||this;i.projection=as(e.projection),i.attributions_=l$(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:"ready",i.wrapX_=void 0!==e.wrapX&&e.wrapX,i.interpolate_=!!e.interpolate,i.viewResolver=null,i.viewRejector=null;var r=i;return i.viewPromise_=new Promise(function(s,o){r.viewResolver=s,r.viewRejector=o}),i}return ske(t,n),t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return dn()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(e){this.attributions_=l$(e),this.changed()},t.prototype.setState=function(e){this.state_=e,this.changed()},t}(ll);function l$(n){return n?Array.isArray(n)?function(t){return n}:"function"==typeof n?n:function(t){return[n]}:null}const c$=oke;var u$=function(){function n(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r}return n.prototype.contains=function(t){return this.containsXY(t[1],t[2])},n.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},n.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},n.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},n.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},n}();function Dm(n,t,e,i,r){return void 0!==r?(r.minX=n,r.maxX=t,r.minY=e,r.maxY=i,r):new u$(n,t,e,i)}const d$=u$;var ake=[0,0,0],lke=function(){function n(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,hn(function W1e(n,t,e){var i=t||xh;return n.every(function(r,s){if(0===s)return!0;var o=i(n[s-1],r);return!(o>0||e&&0===o)})}(this.resolutions_,function(o,a){return a-o},!0),17),!t.origins)for(var i=0,r=this.resolutions_.length-1;i<r;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,hn(this.origins_.length==this.resolutions_.length,20));var s=t.extent;void 0!==s&&!this.origin_&&!this.origins_&&(this.origin_=Ch(s)),hn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,hn(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,hn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==s?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(o,a){var l=new d$(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(s){var c=this.getTileRangeForExtentAndZ(s,a);l.minX=Math.max(c.minX,l.minX),l.maxX=Math.min(c.maxX,l.maxX),l.minY=Math.max(c.minY,l.minY),l.maxY=Math.min(c.maxY,l.maxY)}return l},this):s&&this.calculateTileRanges_(s)}return n.prototype.forEachTileCoord=function(t,e,i){for(var r=this.getTileRangeForExtentAndZ(t,e),s=r.minX,o=r.maxX;s<=o;++s)for(var a=r.minY,l=r.maxY;a<=l;++a)i([e,s,a])},n.prototype.forEachTileCoordParentTileRange=function(t,e,i,r){var o,a,l=null,c=t[0]-1;for(2===this.zoomFactor_?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(e(c,2===this.zoomFactor_?Dm(o=Math.floor(o/2),o,a=Math.floor(a/2),a,i):this.getTileRangeForExtentAndZ(l,c,i)))return!0;--c}return!1},n.prototype.getExtent=function(){return this.extent_},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.getMinZoom=function(){return this.minZoom},n.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},n.prototype.getResolution=function(t){return this.resolutions_[t]},n.prototype.getResolutions=function(){return this.resolutions_},n.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],s=2*t[2];return Dm(r,r+1,s,s+1,e)}var o=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},n.prototype.getTileRangeForTileCoordAndZ=function(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;var r=t[0],s=t[1],o=t[2];if(e===r)return Dm(s,o,s,o,i);if(this.zoomFactor_){var a=Math.pow(this.zoomFactor_,e-r),l=Math.floor(s*a),c=Math.floor(o*a);return e<r?Dm(l,l,c,c,i):Dm(l,Math.floor(a*(s+1))-1,c,Math.floor(a*(o+1))-1,i)}var h=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,e,i)},n.prototype.getTileRangeExtent=function(t,e,i){var r=this.getOrigin(t),s=this.getResolution(t),o=Ra(this.getTileSize(t),this.tmpSize_);return ul(r[0]+e.minX*o[0]*s,r[1]+e.minY*o[1]*s,r[0]+(e.maxX+1)*o[0]*s,r[1]+(e.maxY+1)*o[1]*s,i)},n.prototype.getTileRangeForExtentAndZ=function(t,e,i){var r=ake;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);var s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),Dm(s,r[1],o,r[2],i)},n.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Ra(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]-(t[2]+.5)*r[1]*i]},n.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Ra(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*r,a=i[1]-(t[2]+1)*s[1]*r;return ul(o,a,o+s[0]*r,a+s[1]*r,e)},n.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},n.prototype.getTileCoordForXYAndResolution_=function(t,e,i,r,s){var o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Ra(this.getTileSize(o),this.tmpSize_),u=a*(t-l[0])/i/c[0],d=a*(l[1]-e)/i/c[1];return r?(u=gM(u,5)-1,d=gM(d,5)-1):(u=mM(u,5),d=mM(d,5)),s$(o,u,d,s)},n.prototype.getTileCoordForXYAndZ_=function(t,e,i,r,s){var o=this.getOrigin(i),a=this.getResolution(i),l=Ra(this.getTileSize(i),this.tmpSize_),c=(t-o[0])/a/l[0],u=(o[1]-e)/a/l[1];return r?(c=gM(c,5)-1,u=gM(u,5)-1):(c=mM(c,5),u=mM(u,5)),s$(i,c,u,s)},n.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},n.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},n.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},n.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},n.prototype.getZForResolution=function(t,e){return ur(tI(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},n.prototype.tileCoordIntersectsViewport=function(t,e){return V6(e,0,e.length,2,this.getTileCoordExtent(t))},n.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i},n}();const h$=lke;function f$(n){var t=n.getDefaultTileGrid();return t||(t=function hke(n,t,e,i){return function uke(n,t,e,i){var r=void 0!==i?i:"top-left",s=p$(n,t,e);return new h$({extent:n,origin:vAe(n,r),resolutions:s,tileSize:e})}(ZI(n),t,e,i)}(n),n.setDefaultTileGrid(t)),t}function p$(n,t,e,i){for(var r=void 0!==t?t:42,s=ho(n),o=ai(n),a=Ra(void 0!==e?e:256),l=i>0?i:Math.max(o/a[0],s/a[1]),c=r+1,u=new Array(c),d=0;d<c;++d)u[d]=l/Math.pow(2,d);return u}function ZI(n){var t=(n=as(n)).getExtent();if(!t){var e=180*jo[Ru.DEGREES]/n.getMetersPerUnit();t=ul(-e,-e,e,e)}return t}var m$=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fke=function(n){function t(e){var i=n.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})||this;return i.opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,i.tileGrid&&Ra(i.tileGrid.getTileSize(i.tileGrid.getMinZoom()),[256,256]),i.tileCache=new a$(e.cacheSize||0),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition,interpolate:e.interpolate},i.zDirection=e.zDirection?e.zDirection:0,i}return m$(t,n),t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(e,i){var r=this.getTileCacheForProjection(e);r&&r.expireCache(i)},t.prototype.forEachLoadedTile=function(e,i,r,s){var o=this.getTileCacheForProjection(e);if(!o)return!1;for(var l,c,u,a=!0,d=r.minX;d<=r.maxX;++d)for(var h=r.minY;h<=r.maxY;++h)c=Wv(i,d,h),u=!1,o.containsKey(c)&&(u=2===(l=o.get(c)).getState())&&(u=!1!==s(l)),u||(a=!1);return a},t.prototype.getGutterForProjection=function(e){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(e){this.key_!==e&&(this.key_=e,this.changed())},t.prototype.getOpaque=function(e){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(e,i,r,s,o){return dn()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(e){return this.tileGrid?this.tileGrid:f$(e)},t.prototype.getTileCacheForProjection=function(e){var i=this.getProjection();return hn(null===i||Em(i,e),68),this.tileCache},t.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(e,i,r){var s=this.getTileGridForProjection(r),o=this.getTilePixelRatio(i),a=Ra(s.getTileSize(e),this.tmpSize);return 1==o?a:function wRe(n,t,e){return void 0===e&&(e=[0,0]),e[0]=n[0]*t+.5|0,e[1]=n[1]*t+.5|0,e}(a,o,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(e,i){var r=void 0!==i?i:this.getProjection(),s=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=function cke(n,t,e){var i=t[0],r=n.getTileCoordCenter(t),s=ZI(e);if(Rv(s,r))return t;var o=ai(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}(s,e,r)),function nke(n,t){var e=n[0],i=n[1],r=n[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;var s=t.getFullTileRange(e);return!s||s.containsXY(i,r)}(e,s)?e:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),n.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(e,i){var r=this.getTileCacheForProjection(i);e>r.highWaterMark&&(r.highWaterMark=e)},t.prototype.useTile=function(e,i,r,s){},t}(c$),pke=function(n){function t(e,i){var r=n.call(this,e)||this;return r.tile=i,r}return m$(t,n),t}(gc);const mke=fke;function gke(n,t){var e=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(e,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){var u=t.getFullTileRange(o[0]);return hn(u,55),(u.getHeight()-o[2]-1).toString()})}}var bke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xke=function(n){function t(e){var i=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.generateTileUrlFunction_=i.tileUrlFunction===t.prototype.tileUrlFunction,i.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(i.tileUrlFunction=e.tileUrlFunction),i.urls=null,e.urls?i.setUrls(e.urls):e.url&&i.setUrl(e.url),i.tileLoadingKeys_={},i}return bke(t,n),t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(e){var o,i=e.target,r=Rn(i),s=i.getState();1==s?(this.tileLoadingKeys_[r]=!0,o="tileloadstart"):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=3==s?"tileloaderror":2==s?"tileloadend":void 0),null!=o&&this.dispatchEvent(new pke(o,i))},t.prototype.setTileLoadFunction=function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()},t.prototype.setTileUrlFunction=function(e,i){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),void 0!==i?this.setKey(i):this.changed()},t.prototype.setUrl=function(e){var i=function yke(n){var t=[],e=/\{([a-z])-([a-z])\}/.exec(n);if(e){var i=e[1].charCodeAt(0),r=e[2].charCodeAt(0),s=void 0;for(s=i;s<=r;++s)t.push(n.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(n)){for(var o=parseInt(e[2],10),a=parseInt(e[1],10);a<=o;a++)t.push(n.replace(e[0],a.toString()));return t}return t.push(n),t}(e);this.urls=i,this.setUrls(i)},t.prototype.setUrls=function(e){this.urls=e;var i=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function _ke(n,t){for(var e=n.length,i=new Array(e),r=0;r<e;++r)i[r]=gke(n[r],t);return function vke(n){return 1===n.length?n[0]:function(t,e,i){if(t){var r=function tke(n){return(n[1]<<n[0])+n[2]}(t),s=bm(r,n.length);return n[s](t,e,i)}}}(i)}(e,this.tileGrid),i):this.setKey(i)},t.prototype.tileUrlFunction=function(e,i,r){},t.prototype.useTile=function(e,i,r){var s=Wv(e,i,r);this.tileCache.containsKey(s)&&this.tileCache.get(s)},t}(mke);const wke=xke;var Mke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Cke=function(n){function t(e){var i=this,r=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(r=e.interpolate),(i=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ske,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:r,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:J6,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return Mke(t,n),t.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},t.prototype.expireCache=function(e,i){var r=this.getTileCacheForProjection(e);for(var s in this.tileCache.expireCache(this.tileCache==r?i:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[s];o.expireCache(o==r?i:{})}},t.prototype.getGutterForProjection=function(e){return this.getProjection()&&e&&!Em(this.getProjection(),e)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var e=n.prototype.getKey.call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e},t.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Em(this.getProjection(),e))&&n.prototype.getOpaque.call(this,e)},t.prototype.getTileGridForProjection=function(e){var i=this.getProjection();if(this.tileGrid&&(!i||Em(i,e)))return this.tileGrid;var r=Rn(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=f$(e)),this.tileGridForProjection[r]},t.prototype.getTileCacheForProjection=function(e){var i=this.getProjection();if(!i||Em(i,e))return this.tileCache;var r=Rn(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new a$(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},t.prototype.createTile_=function(e,i,r,s,o,a){var l=[e,i,r],c=this.getTileCoordForTileUrlFunction(l,o),u=c?this.tileUrlFunction(c,s,o):void 0,d=new this.tileClass(l,void 0!==u?0:4,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=a,d.addEventListener("change",this.handleTileChange.bind(this)),d},t.prototype.getTile=function(e,i,r,s,o){var a=this.getProjection();if(!a||!o||Em(a,o))return this.getTileInternal(e,i,r,s,a||o);var l=this.getTileCacheForProjection(o),c=[e,i,r],u=void 0,d=o$(c);l.containsKey(d)&&(u=l.get(d));var h=this.getKey();if(u&&u.key==h)return u;var f=this.getTileGridForProjection(a),p=this.getTileGridForProjection(o),m=this.getTileCoordForTileUrlFunction(c,o),g=new r$(a,f,o,p,c,m,this.getTilePixelRatio(s),this.getGutter(),function(_,v,y,b){return this.getTileInternal(_,v,y,b,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return g.key=h,u?(g.interimTile=u,g.refreshInterimChain(),l.replace(d,g)):l.set(d,g),g},t.prototype.getTileInternal=function(e,i,r,s,o){var a=null,l=Wv(e,i,r),c=this.getKey();if(this.tileCache.containsKey(l)){if((a=this.tileCache.get(l)).key!=c){var u=a;(a=this.createTile_(e,i,r,s,o,c)).interimTile=0==u.getState()?u.interimTile:u,a.refreshInterimChain(),this.tileCache.replace(l,a)}}else a=this.createTile_(e,i,r,s,o,c),this.tileCache.set(l,a);return a},t.prototype.setRenderReprojectionEdges=function(e){if(this.renderReprojectionEdges_!=e){for(var i in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},t.prototype.setTileGridForProjection=function(e,i){var r=as(e);if(r){var s=Rn(r);s in this.tileGridForProjection||(this.tileGridForProjection[s]=i)}},t}(wke);function Ske(n,t){n.getImage().src=t}const Eke=Cke;var Tke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ake=function(n){function t(e){var i=this,r=e||{},s=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(s=r.interpolate);var o=void 0!==r.projection?r.projection:"EPSG:3857",a=void 0!==r.tileGrid?r.tileGrid:function dke(n){var t=n||{},e=t.extent||as("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:p$(e,t.maxZoom,t.tileSize,t.maxResolution)};return new h$(i)}({extent:ZI(o),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return(i=n.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:s,opaque:r.opaque,projection:o,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:a,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this).gutter_=void 0!==r.gutter?r.gutter:0,i}return Tke(t,n),t.prototype.getGutter=function(){return this.gutter_},t}(Eke);const Dke=Ake;var Rke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),kke=function(n){function t(e){var i=e||{},r=void 0===i.imageSmoothing||i.imageSmoothing;return void 0!==i.interpolate&&(r=i.interpolate),n.call(this,{attributions:void 0!==i.attributions?i.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],attributionsCollapsible:!1,cacheSize:i.cacheSize,crossOrigin:void 0!==i.crossOrigin?i.crossOrigin:"anonymous",interpolate:r,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,opaque:void 0===i.opaque||i.opaque,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,transition:i.transition,url:void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:i.wrapX,zDirection:i.zDirection})||this}return Rke(t,n),t}(Dke);const Oke=kke;var Pke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Lke=function(n){function t(e){var i=this,r=e||{},s=Br({},r);return delete s.preload,delete s.useInterimTilesOnError,(i=n.call(this,s)||this).setPreload(void 0!==r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i}return Pke(t,n),t.prototype.getPreload=function(){return this.get("preload")},t.prototype.setPreload=function(e){this.set("preload",e)},t.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},t.prototype.setUseInterimTilesOnError=function(e){this.set("useInterimTilesOnError",e)},t.prototype.getData=function(e){return n.prototype.getData.call(this,e)},t}(bM);const Fke=Lke;var Nke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bke=function(n){function t(e){var i=n.call(this)||this;return i.ready=!0,i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=e,i.declutterExecutorGroup=null,i}return Nke(t,n),t.prototype.getFeatures=function(e){return dn()},t.prototype.getData=function(e){return null},t.prototype.prepareFrame=function(e){return dn()},t.prototype.renderFrame=function(e,i){return dn()},t.prototype.loadedTileCallback=function(e,i,r){e[i]||(e[i]={}),e[i][r.tileCoord.toString()]=r},t.prototype.createLoadedTileFinder=function(e,i,r){return function(s,o){var a=this.loadedTileCallback.bind(this,r,s);return e.forEachLoadedTile(i,s,o,a)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(e,i,r,s,o){},t.prototype.getDataAtPixel=function(e,i,r){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(e){2===e.target.getState()&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(e){var i=e.getState();return 2!=i&&3!=i&&e.addEventListener("change",this.boundHandleImageChange_),0==i&&(e.load(),i=e.getState()),2==i},t.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()},t.prototype.disposeInternal=function(){delete this.layer_,n.prototype.disposeInternal.call(this)},t}(w8);const Vke=Bke;var Hke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),g$=[],Rm=null,zke=function(n){function t(e){var i=n.call(this,e)||this;return i.container=null,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i.pixelContext_=null,i.frameState=null,i}return Hke(t,n),t.prototype.getImageData=function(e,i,r){var s;Rm||function Uke(){var n=document.createElement("canvas");n.width=1,n.height=1,Rm=n.getContext("2d")}(),Rm.clearRect(0,0,1,1);try{Rm.drawImage(e,i,r,1,1,0,0,1,1),s=Rm.getImageData(0,0,1,1).data}catch(o){return Rm=null,null}return s},t.prototype.getBackground=function(e){var r=this.getLayer().getBackground();return"function"==typeof r&&(r=r(e.viewState.resolution)),r||void 0},t.prototype.useContainer=function(e,i,r){var o,a,s=this.getLayer().getClassName();if(e&&e.className===s&&(!r||e&&e.style.backgroundColor&&wh(_M(e.style.backgroundColor),_M(r)))&&(l=e.firstElementChild)instanceof HTMLCanvasElement&&(a=l.getContext("2d")),a&&a.canvas.style.transform===i?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(o=document.createElement("div")).className=s;var l,c=o.style;c.position="absolute",c.width="100%",c.height="100%",a=fo(),o.appendChild(l=a.canvas),(c=l.style).position="absolute",c.left="0",c.transformOrigin="top left",this.container=o,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)},t.prototype.clipUnrotated=function(e,i,r){var s=Ch(r),o=fM(r),a=hM(r),l=dM(r);cr(i.coordinateToPixelTransform,s),cr(i.coordinateToPixelTransform,o),cr(i.coordinateToPixelTransform,a),cr(i.coordinateToPixelTransform,l);var c=this.inversePixelTransform;cr(c,s),cr(c,o),cr(c,a),cr(c,l),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()},t.prototype.dispatchRenderEvent_=function(e,i,r){var s=this.getLayer();if(s.hasListener(e)){var o=new Y8(e,this.inversePixelTransform,r,i);s.dispatchEvent(o)}},t.prototype.preRender=function(e,i){this.frameState=i,this.dispatchRenderEvent_("prerender",e,i)},t.prototype.postRender=function(e,i){this.dispatchRenderEvent_("postrender",e,i)},t.prototype.getRenderTransform=function(e,i,r,s,o,a,l){var d=s/i;return cl(this.tempTransform,o/2,a/2,d,-d,-r,-e[0]+l,-e[1])},t.prototype.getDataAtPixel=function(e,i,r){var s=cr(this.inversePixelTransform,e.slice()),o=this.context,l=this.getLayer().getExtent();if(l&&!Rv(l,cr(i.pixelToCoordinateTransform,e.slice())))return null;var p,u=Math.round(s[0]),d=Math.round(s[1]),h=this.pixelContext_;if(!h){var f=document.createElement("canvas");f.width=1,f.height=1,h=f.getContext("2d"),this.pixelContext_=h}h.clearRect(0,0,1,1);try{h.drawImage(o.canvas,u,d,1,1,0,0,1,1),p=h.getImageData(0,0,1,1).data}catch(m){return"SecurityError"===m.name?(this.pixelContext_=null,new Uint8Array):p}return 0===p[3]?null:p},t.prototype.disposeInternal=function(){delete this.frameState,n.prototype.disposeInternal.call(this)},t}(Vke);const _$=zke;var Gke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wke=function(n){function t(e){var i=n.call(this,e)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedProjection=null,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.tmpTileRange_=new d$(0,0,0,0),i}return Gke(t,n),t.prototype.isDrawableTile=function(e){var i=this.getLayer(),r=e.getState(),s=i.getUseInterimTilesOnError();return 2==r||4==r||3==r&&!s},t.prototype.getTile=function(e,i,r,s){var o=s.pixelRatio,a=s.viewState.projection,l=this.getLayer(),u=l.getSource().getTile(e,i,r,o,a);return 3==u.getState()&&(l.getUseInterimTilesOnError()?l.getPreload()>0&&(this.newTiles_=!0):u.setState(2)),this.isDrawableTile(u)||(u=u.getInterimTile()),u},t.prototype.getData=function(e){var i=this.frameState;if(!i)return null;var r=this.getLayer(),s=cr(i.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!Rv(o,s))return null;for(var a=i.pixelRatio,l=i.viewState.projection,c=i.viewState,u=r.getRenderSource(),d=u.getTileGridForProjection(c.projection),h=u.getTilePixelRatio(i.pixelRatio),f=d.getZForResolution(c.resolution);f>=d.getMinZoom();--f){var p=d.getTileCoordForCoordAndZ(s,f),m=u.getTile(f,p[1],p[2],a,l);if(!(m instanceof J6||m instanceof r$))return null;if(2===m.getState()){var g=d.getOrigin(f),_=Ra(d.getTileSize(f)),v=d.getResolution(f),y=Math.floor(h*((s[0]-g[0])/v-p[1]*_[0])),b=Math.floor(h*((g[1]-s[1])/v-p[2]*_[1])),x=Math.round(h*u.getGutterForProjection(c.projection));return this.getImageData(m.getImage(),y+x,b+x)}}return null},t.prototype.loadedTileCallback=function(e,i,r){return!!this.isDrawableTile(r)&&n.prototype.loadedTileCallback.call(this,e,i,r)},t.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(e,i){var r=e.layerStatesArray[e.layerIndex],s=e.viewState,o=s.projection,a=s.resolution,l=s.center,c=s.rotation,u=e.pixelRatio,d=this.getLayer(),h=d.getSource(),f=h.getRevision(),p=h.getTileGridForProjection(o),m=p.getZForResolution(a,h.zDirection),g=p.getResolution(m),_=e.extent,v=e.viewState.resolution,y=h.getTilePixelRatio(u),b=Math.round(ai(_)/v*u),x=Math.round(ho(_)/v*u),w=r.extent&&Ah(r.extent);w&&(_=vm(_,Ah(r.extent)));var E=g*b/2/y,R=g*x/2/y,F=[l[0]-E,l[1]-R,l[0]+E,l[1]+R],N=p.getTileRangeForExtentAndZ(_,m),C={};C[m]={};var L=this.createLoadedTileFinder(h,o,C),Y=this.tmpExtent,I=this.tmpTileRange_;this.newTiles_=!1;for(var z=c?cI(s.center,v,c,e.size):void 0,D=N.minX;D<=N.maxX;++D)for(var P=N.minY;P<=N.maxY;++P)if(!c||p.tileCoordIntersectsViewport([m,D,P],z)){var O=this.getTile(m,D,P,e);if(this.isDrawableTile(O)){var q=Rn(this);if(2==O.getState()&&(C[m][O.tileCoord.toString()]=O,(K=O.inTransition(q))&&1!==r.opacity&&(O.endTransition(q),K=!1),!this.newTiles_&&(K||-1===this.renderedTiles.indexOf(O))&&(this.newTiles_=!0)),1===O.getAlpha(q,e.time))continue}var J=p.getTileCoordChildTileRange(O.tileCoord,I,Y),j=!1;J&&(j=L(m+1,J)),j||p.forEachTileCoordParentTileRange(O.tileCoord,L,I,Y)}var we=g/a*u/y;cl(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,c,-b/2,-x/2);var fe=sI(this.pixelTransform);this.useContainer(i,fe,this.getBackground(e));var _e=this.context,ie=_e.canvas;cM(this.inversePixelTransform,this.pixelTransform),cl(this.tempTransform,b/2,x/2,we,we,0,-b/2,-x/2),ie.width!=b||ie.height!=x?(ie.width=b,ie.height=x):this.containerReused||_e.clearRect(0,0,b,x),w&&this.clipUnrotated(_e,e,w),h.getInterpolate()||Br(_e,qI),this.preRender(_e,e),this.renderedTiles.length=0;var Pe,et,ye,Re=Object.keys(C).map(Number);Re.sort(xh),1!==r.opacity||this.containerReused&&!h.getOpaque(e.viewState.projection)?(Pe=[],et=[]):Re=Re.reverse();for(var vt=Re.length-1;vt>=0;--vt){var ue=Re[vt],pe=h.getTilePixelSize(ue,u,o),Ze=p.getResolution(ue)/g,Ne=pe[0]*Ze*we,Ae=pe[1]*Ze*we,$e=p.getTileCoordForCoordAndZ(Ch(F),ue),it=p.getTileCoordExtent($e),qt=cr(this.tempTransform,[y*(it[0]-F[0])/g,y*(F[3]-it[3])/g]),xn=y*h.getGutterForProjection(o),W=C[ue];for(var B in W){var K,le=(O=W[B]).tileCoord,Me=$e[1]-le[1],Ue=Math.round(qt[0]-(Me-1)*Ne),qe=$e[2]-le[2],dt=Math.round(qt[1]-(qe-1)*Ae),U=Ue-(D=Math.round(qt[0]-Me*Ne)),Ce=dt-(P=Math.round(qt[1]-qe*Ae)),nt=m===ue,Le=!1;if(!(K=nt&&1!==O.getAlpha(Rn(this),e.time)))if(Pe){ye=[D,P,D+U,P,D+U,P+Ce,D,P+Ce];for(var X=0,ke=Pe.length;X<ke;++X)if(m!==ue&&ue<et[X]){var Se=Pe[X];Ls([D,P,D+U,P+Ce],[Se[0],Se[3],Se[4],Se[7]])&&(Le||(_e.save(),Le=!0),_e.beginPath(),_e.moveTo(ye[0],ye[1]),_e.lineTo(ye[2],ye[3]),_e.lineTo(ye[4],ye[5]),_e.lineTo(ye[6],ye[7]),_e.moveTo(Se[6],Se[7]),_e.lineTo(Se[4],Se[5]),_e.lineTo(Se[2],Se[3]),_e.lineTo(Se[0],Se[1]),_e.clip())}Pe.push(ye),et.push(ue)}else _e.clearRect(D,P,U,Ce);this.drawTileImage(O,e,D,P,U,Ce,xn,nt),Pe&&!K?(Le&&_e.restore(),this.renderedTiles.unshift(O)):this.renderedTiles.push(O),this.updateUsedTiles(e.usedTiles,h,O)}}return this.renderedRevision=f,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Iv(this.renderedExtent_,F),this.renderedExtent_=F,this.renderedPixelRatio=u,this.renderedProjection=o,this.manageTilePyramid(e,h,p,u,o,_,m,d.getPreload()),this.scheduleExpireCache(e,h),this.postRender(_e,e),r.extent&&_e.restore(),Br(_e,$Ie),fe!==ie.style.transform&&(ie.style.transform=fe),this.container},t.prototype.drawTileImage=function(e,i,r,s,o,a,l,c){var u=this.getTileImage(e);if(u){var d=Rn(this),h=i.layerStatesArray[i.layerIndex],f=h.opacity*(c?e.getAlpha(d,i.time):1),p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(u,l,l,u.width-2*l,u.height-2*l,r,s,o,a),p&&this.context.restore(),f!==h.opacity?i.animate=!0:c&&e.endTransition(d)}},t.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},t.prototype.getTileImage=function(e){return e.getImage()},t.prototype.scheduleExpireCache=function(e,i){if(i.canExpireCache()){var r=function(s,o,a){var l=Rn(s);l in a.usedTiles&&s.expireCache(a.viewState.projection,a.usedTiles[l])}.bind(null,i);e.postRenderFunctions.push(r)}},t.prototype.updateUsedTiles=function(e,i,r){var s=Rn(i);s in e||(e[s]={}),e[s][r.getKey()]=!0},t.prototype.manageTilePyramid=function(e,i,r,s,o,a,l,c,u){var d=Rn(i);d in e.wantedTiles||(e.wantedTiles[d]={});var v,y,b,x,w,E,h=e.wantedTiles[d],f=e.tileQueue,p=r.getMinZoom(),m=e.viewState.rotation,g=m?cI(e.viewState.center,e.viewState.resolution,m,e.size):void 0,_=0;for(E=p;E<=l;++E)for(y=r.getTileRangeForExtentAndZ(a,E,y),b=r.getResolution(E),x=y.minX;x<=y.maxX;++x)for(w=y.minY;w<=y.maxY;++w)m&&!r.tileCoordIntersectsViewport([E,x,w],g)||(l-E<=c?(++_,0==(v=i.getTile(E,x,w,s,o)).getState()&&(h[v.getKey()]=!0,f.isKeyQueued(v.getKey())||f.enqueue([v,d,r.getTileCoordCenter(v.tileCoord),b])),void 0!==u&&u(v)):i.useTile(E,x,w,o));i.updateCacheSize(_,o)},t}(_$);const jke=Wke;var $ke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),qke=function(n){function t(e){return n.call(this,e)||this}return $ke(t,n),t.prototype.createRenderer=function(){return new jke(this)},t}(Fke);const Yke=qke;var v$=Oa(402),Xke=function(){function n(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ra(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}return n.prototype.clone=function(){var t=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getScaleArray=function(){return this.scaleArray_},n.prototype.getDisplacement=function(){return this.displacement_},n.prototype.getDeclutterMode=function(){return this.declutterMode_},n.prototype.getAnchor=function(){return dn()},n.prototype.getImage=function(t){return dn()},n.prototype.getHitDetectionImage=function(){return dn()},n.prototype.getPixelRatio=function(t){return 1},n.prototype.getImageState=function(){return dn()},n.prototype.getImageSize=function(){return dn()},n.prototype.getOrigin=function(){return dn()},n.prototype.getSize=function(){return dn()},n.prototype.setDisplacement=function(t){this.displacement_=t},n.prototype.setOpacity=function(t){this.opacity_=t},n.prototype.setRotateWithView=function(t){this.rotateWithView_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Ra(t)},n.prototype.listenImageChange=function(t){dn()},n.prototype.load=function(){dn()},n.prototype.unlistenImageChange=function(t){dn()},n}();const y$=Xke;function dl(n){return Array.isArray(n)?z8(n):n}var Kke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zke=function(n){function t(e){var i=this;return(i=n.call(this,{opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})||this).canvas_=void 0,i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.size_=null,i.renderOptions_=null,i.render(),i}return Kke(t,n),t.prototype.clone=function(){var e=this.getScale(),i=new t({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i},t.prototype.getAnchor=function(){var e=this.size_;if(!e)return null;var i=this.getDisplacement();return[e[0]/2-i[0],e[1]/2+i[1]]},t.prototype.getAngle=function(){return this.angle_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(e){this.fill_=e,this.render()},t.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},t.prototype.getImage=function(e){var i=this.canvas_[e];if(!i){var r=this.renderOptions_,s=fo(r.size*e,r.size*e);this.draw_(r,s,e),this.canvas_[e]=i=s.canvas}return i},t.prototype.getPixelRatio=function(e){return e},t.prototype.getImageSize=function(){return this.size_},t.prototype.getImageState=function(){return 2},t.prototype.getOrigin=function(){return this.origin_},t.prototype.getPoints=function(){return this.points_},t.prototype.getRadius=function(){return this.radius_},t.prototype.getRadius2=function(){return this.radius2_},t.prototype.getSize=function(){return this.size_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(e){this.stroke_=e,this.render()},t.prototype.listenImageChange=function(e){},t.prototype.load=function(){},t.prototype.unlistenImageChange=function(e){},t.prototype.calculateLineJoinSize_=function(e,i,r){if(0===i||this.points_===1/0||"bevel"!==e&&"miter"!==e)return i;var s=this.radius_,o=void 0===this.radius2_?s:this.radius2_;if(s<o){var a=s;s=o,o=a}var c=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),u=o*Math.sin(c),h=s-Math.sqrt(o*o-u*u),f=Math.sqrt(u*u+h*h),p=f/u;if("miter"===e&&p<=r)return p*i;var m=i/2/p,g=i/2*(h/f),v=Math.sqrt((s+m)*(s+m)+g*g)-s;if(void 0===this.radius2_||"bevel"===e)return 2*v;var y=s*Math.sin(c),x=o-Math.sqrt(s*s-y*y),E=Math.sqrt(y*y+x*x)/y;return E<=r?2*Math.max(v,E*i/2-o-s):2*v},t.prototype.createRenderOptions=function(){var o,e=xm,i=0,r=null,s=0,a=0;this.stroke_&&(null===(o=this.stroke_.getColor())&&(o=Lv),o=dl(o),void 0===(a=this.stroke_.getWidth())&&(a=1),r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=xm),void 0===(i=this.stroke_.getMiterLimit())&&(i=10));var l=this.calculateLineJoinSize_(e,a,i),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:o,strokeWidth:a,size:Math.ceil(2*c+l),lineDash:r,lineDashOffset:s,lineJoin:e,miterLimit:i}},t.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]},t.prototype.draw_=function(e,i,r){if(i.scale(r,r),i.translate(e.size/2,e.size/2),this.createPath_(i),this.fill_){var s=this.fill_.getColor();null===s&&(s=_c),i.fillStyle=dl(s),i.fill()}this.stroke_&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.strokeWidth,i.setLineDash&&e.lineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit,i.stroke())},t.prototype.createHitDetectionCanvas_=function(e){if(this.fill_){var i=this.fill_.getColor(),r=0;if("string"==typeof i&&(i=_M(i)),null===i?r=1:Array.isArray(i)&&(r=4===i.length?i[3]:1),0===r){var s=fo(e.size,e.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(e,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},t.prototype.createPath_=function(e){var i=this.points_,r=this.radius_;if(i===1/0)e.arc(0,0,r,0,2*Math.PI);else{var s=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(i*=2);for(var o=this.angle_-Math.PI/2,a=2*Math.PI/i,l=0;l<i;l++){var c=o+l*a,u=l%2==0?r:s;e.lineTo(u*Math.cos(c),u*Math.sin(c))}e.closePath()}},t.prototype.drawHitDetectionCanvas_=function(e,i){i.translate(e.size/2,e.size/2),this.createPath_(i),i.fillStyle=_c,i.fill(),this.stroke_&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.strokeWidth,e.lineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit,i.stroke())},t}(y$);const Qke=Zke;var Jke=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),eOe=function(n){function t(e){var i=e||{};return n.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0],declutterMode:i.declutterMode})||this}return Jke(t,n),t.prototype.clone=function(){var e=this.getScale(),i=new t({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i},t.prototype.setRadius=function(e){this.radius_=e,this.render()},t}(Qke);const tOe=eOe;var nOe=function(){function n(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return n.prototype.clone=function(){var t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0})},n.prototype.getColor=function(){return this.color_},n.prototype.setColor=function(t){this.color_=t},n}();const iOe=nOe;var rOe=function(){function n(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return n.prototype.clone=function(){var t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},n.prototype.getColor=function(){return this.color_},n.prototype.getLineCap=function(){return this.lineCap_},n.prototype.getLineDash=function(){return this.lineDash_},n.prototype.getLineDashOffset=function(){return this.lineDashOffset_},n.prototype.getLineJoin=function(){return this.lineJoin_},n.prototype.getMiterLimit=function(){return this.miterLimit_},n.prototype.getWidth=function(){return this.width_},n.prototype.setColor=function(t){this.color_=t},n.prototype.setLineCap=function(t){this.lineCap_=t},n.prototype.setLineDash=function(t){this.lineDash_=t},n.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},n.prototype.setLineJoin=function(t){this.lineJoin_=t},n.prototype.setMiterLimit=function(t){this.miterLimit_=t},n.prototype.setWidth=function(t){this.width_=t},n}();const sOe=rOe;var jv=function(){function n(t){var e=t||{};this.geometry_=null,this.geometryFunction_=b$,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return n.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new n({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},n.prototype.getRenderer=function(){return this.renderer_},n.prototype.setRenderer=function(t){this.renderer_=t},n.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},n.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},n.prototype.getGeometry=function(){return this.geometry_},n.prototype.getGeometryFunction=function(){return this.geometryFunction_},n.prototype.getFill=function(){return this.fill_},n.prototype.setFill=function(t){this.fill_=t},n.prototype.getImage=function(){return this.image_},n.prototype.setImage=function(t){this.image_=t},n.prototype.getStroke=function(){return this.stroke_},n.prototype.setStroke=function(t){this.stroke_=t},n.prototype.getText=function(){return this.text_},n.prototype.setText=function(t){this.text_=t},n.prototype.getZIndex=function(){return this.zIndex_},n.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=b$,this.geometry_=t},n.prototype.setZIndex=function(t){this.zIndex_=t},n}(),QI=null;function aOe(n,t){if(!QI){var e=new iOe({color:"rgba(255,255,255,0.4)"}),i=new sOe({color:"#3399CC",width:1.25});QI=[new jv({image:new tOe({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return QI}function b$(n){return n.getGeometry()}var lOe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),cOe=function(n){function t(e){var i=this,r=e||{},s=Br({},r);return delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,(i=n.call(this,s)||this).declutter_=void 0!==r.declutter&&r.declutter,i.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(r.style),i.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return lOe(t,n),t.prototype.getDeclutter=function(){return this.declutter_},t.prototype.getFeatures=function(e){return n.prototype.getFeatures.call(this,e)},t.prototype.getRenderBuffer=function(){return this.renderBuffer_},t.prototype.getRenderOrder=function(){return this.get("renderOrder")},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},t.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},t.prototype.renderDeclutter=function(e){e.declutterTree||(e.declutterTree=new v$(9)),this.getRenderer().renderDeclutter(e)},t.prototype.setRenderOrder=function(e){this.set("renderOrder",e)},t.prototype.setStyle=function(e){this.style_=void 0!==e?e:aOe,this.styleFunction_=null===e?void 0:function oOe(n){var t,e;"function"==typeof n?t=n:(Array.isArray(n)?e=n:(hn("function"==typeof n.getZIndex,41),e=[n]),t=function(){return e});return t}(this.style_),this.changed()},t}(bM);const uOe=cOe;var $v={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},HM=[$v.FILL],Ou=[$v.STROKE],Oh=[$v.BEGIN_PATH],w$=[$v.CLOSE_PATH];const Rt=$v;var dOe=function(){function n(){}return n.prototype.drawCustom=function(t,e,i,r){},n.prototype.drawGeometry=function(t){},n.prototype.setStyle=function(t){},n.prototype.drawCircle=function(t,e){},n.prototype.drawFeature=function(t,e){},n.prototype.drawGeometryCollection=function(t,e){},n.prototype.drawLineString=function(t,e){},n.prototype.drawMultiLineString=function(t,e){},n.prototype.drawMultiPoint=function(t,e){},n.prototype.drawMultiPolygon=function(t,e){},n.prototype.drawPoint=function(t,e){},n.prototype.drawPolygon=function(t,e){},n.prototype.drawText=function(t,e){},n.prototype.setFillStrokeStyle=function(t,e){},n.prototype.setImageStyle=function(t,e){},n.prototype.setTextStyle=function(t,e){},n}();const M$=dOe;var hOe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fOe=function(n){function t(e,i,r,s){var o=n.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=s,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return hOe(t,n),t.prototype.applyPixelRatio=function(e){var i=this.pixelRatio;return 1==i?e:e.map(function(r){return r*i})},t.prototype.appendFlatPointCoordinates=function(e,i){for(var r=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,o=this.coordinates,a=o.length,l=0,c=e.length;l<c;l+=i)s[0]=e[l],s[1]=e[l+1],Rv(r,s)&&(o[a++]=s[0],o[a++]=s[1]);return a},t.prototype.appendFlatLineCoordinates=function(e,i,r,s,o,a){var l=this.coordinates,c=l.length,u=this.getBufferedMaxExtent();a&&(i+=s);var m,g,_,d=e[i],h=e[i+1],f=this.tmpCoordinate_,p=!0;for(m=i+s;m<r;m+=s)f[0]=e[m],f[1]=e[m+1],(_=aI(u,f))!==g?(p&&(l[c++]=d,l[c++]=h,p=!1),l[c++]=f[0],l[c++]=f[1]):1===_?(l[c++]=f[0],l[c++]=f[1],p=!1):p=!0,d=f[0],h=f[1],g=_;return(o&&p||m===i+s)&&(l[c++]=d,l[c++]=h),c},t.prototype.drawCustomCoordinates_=function(e,i,r,s,o){for(var a=0,l=r.length;a<l;++a){var c=r[a],u=this.appendFlatLineCoordinates(e,i,c,s,!1,!1);o.push(u),i=c}return i},t.prototype.drawCustom=function(e,i,r,s){this.beginGeometry(e,i);var c,u,d,h,f,o=e.getType(),a=e.getStride(),l=this.coordinates.length;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),h=[];var p=e.getEndss();f=0;for(var m=0,g=p.length;m<g;++m){var _=[];f=this.drawCustomCoordinates_(c,f,p[m],a,_),h.push(_)}this.instructions.push([Rt.CUSTOM,l,h,e,r,O6]),this.hitDetectionInstructions.push([Rt.CUSTOM,l,h,e,s||r,O6]);break;case"Polygon":case"MultiLineString":d=[],c="Polygon"==o?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,e.getEnds(),a,d),this.instructions.push([Rt.CUSTOM,l,d,e,r,LM]),this.hitDetectionInstructions.push([Rt.CUSTOM,l,d,e,s||r,LM]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([Rt.CUSTOM,l,u,e,r,Am]),this.hitDetectionInstructions.push([Rt.CUSTOM,l,u,e,s||r,Am]);break;case"MultiPoint":c=e.getFlatCoordinates(),(u=this.appendFlatPointCoordinates(c,a))>l&&(this.instructions.push([Rt.CUSTOM,l,u,e,r,Am]),this.hitDetectionInstructions.push([Rt.CUSTOM,l,u,e,s||r,Am]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),this.instructions.push([Rt.CUSTOM,l,u=this.coordinates.length,e,r]),this.hitDetectionInstructions.push([Rt.CUSTOM,l,u,e,s||r])}this.endGeometry(i)},t.prototype.beginGeometry=function(e,i){this.beginGeometryInstruction1_=[Rt.BEGIN_GEOMETRY,i,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Rt.BEGIN_GEOMETRY,i,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},t.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},t.prototype.reverseHitDetectionInstructions=function(){var e=this.hitDetectionInstructions;e.reverse();var i,s,o,r=e.length,a=-1;for(i=0;i<r;++i)(o=(s=e[i])[0])==Rt.END_GEOMETRY?a=i:o==Rt.BEGIN_GEOMETRY&&(s[2]=i,G1e(this.hitDetectionInstructions,a,i),a=-1)},t.prototype.setFillStrokeStyle=function(e,i){var r=this.state;if(e){var s=e.getColor();r.fillStyle=dl(s||_c)}else r.fillStyle=void 0;if(i){var o=i.getColor();r.strokeStyle=dl(o||Lv);var a=i.getLineCap();r.lineCap=void 0!==a?a:CM;var l=i.getLineDash();r.lineDash=l?l.slice():kv;var c=i.getLineDashOffset();r.lineDashOffset=c||0;var u=i.getLineJoin();r.lineJoin=void 0!==u?u:xm;var d=i.getWidth();r.lineWidth=void 0!==d?d:1;var h=i.getMiterLimit();r.miterLimit=void 0!==h?h:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},t.prototype.createFill=function(e){var i=e.fillStyle,r=[Rt.SET_FILL_STYLE,i];return"string"!=typeof i&&r.push(!0),r},t.prototype.applyStroke=function(e){this.instructions.push(this.createStroke(e))},t.prototype.createStroke=function(e){return[Rt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]},t.prototype.updateFillStyle=function(e,i){var r=e.fillStyle;("string"!=typeof r||e.currentFillStyle!=r)&&(void 0!==r&&this.instructions.push(i.call(this,e)),e.currentFillStyle=r)},t.prototype.updateStrokeStyle=function(e,i){var r=e.strokeStyle,s=e.lineCap,o=e.lineDash,a=e.lineDashOffset,l=e.lineJoin,c=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=s||o!=e.currentLineDash&&!wh(e.currentLineDash,o)||e.currentLineDashOffset!=a||e.currentLineJoin!=l||e.currentLineWidth!=c||e.currentMiterLimit!=u)&&(void 0!==r&&i.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=s,e.currentLineDash=o,e.currentLineDashOffset=a,e.currentLineJoin=l,e.currentLineWidth=c,e.currentMiterLimit=u)},t.prototype.endGeometry=function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[Rt.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},t.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=R8(this.maxExtent),this.maxLineWidth>0)&&oI(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},t}(M$);const qv=fOe;var pOe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),mOe=function(n){function t(e,i,r,s){var o=n.call(this,e,i,r,s)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterMode_=void 0,o.declutterImageWithText_=void 0,o}return pOe(t,n),t.prototype.drawPoint=function(e,i){if(this.image_){this.beginGeometry(e,i);var r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([Rt.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Rt.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}},t.prototype.drawMultiPoint=function(e,i){if(this.image_){this.beginGeometry(e,i);var r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([Rt.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Rt.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}},t.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,n.prototype.finish.call(this)},t.prototype.setImageStyle=function(e,i){var r=e.getAnchor(),s=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=i},t}(qv);const gOe=mOe;var _Oe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vOe=function(n){function t(e,i,r,s){return n.call(this,e,i,r,s)||this}return _Oe(t,n),t.prototype.drawFlatCoordinates_=function(e,i,r,s){var o=this.coordinates.length,a=this.appendFlatLineCoordinates(e,i,r,s,!1,!1),l=[Rt.MOVE_TO_LINE_TO,o,a];return this.instructions.push(l),this.hitDetectionInstructions.push(l),r},t.prototype.drawLineString=function(e,i){var r=this.state;if(void 0!==r.strokeStyle&&void 0!==r.lineWidth){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,kv,0],Oh);var a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Ou),this.endGeometry(i)}},t.prototype.drawMultiLineString=function(e,i){var r=this.state;if(void 0!==r.strokeStyle&&void 0!==r.lineWidth){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],Oh);for(var a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride(),u=0,d=0,h=a.length;d<h;++d)u=this.drawFlatCoordinates_(l,u,a[d],c);this.hitDetectionInstructions.push(Ou),this.endGeometry(i)}},t.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ou),this.reverseHitDetectionInstructions(),this.state=null,n.prototype.finish.call(this)},t.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ou),e.lastStroke=this.coordinates.length),e.lastStroke=0,n.prototype.applyStroke.call(this,e),this.instructions.push(Oh)},t}(qv);const yOe=vOe;var bOe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xOe=function(n){function t(e,i,r,s){return n.call(this,e,i,r,s)||this}return bOe(t,n),t.prototype.drawFlatCoordinatess_=function(e,i,r,s){var o=this.state,a=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,c=r.length;this.instructions.push(Oh),this.hitDetectionInstructions.push(Oh);for(var u=0;u<c;++u){var d=r[u],h=this.coordinates.length,f=this.appendFlatLineCoordinates(e,i,d,s,!0,!l),p=[Rt.MOVE_TO_LINE_TO,h,f];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push(w$),this.hitDetectionInstructions.push(w$)),i=d}return a&&(this.instructions.push(HM),this.hitDetectionInstructions.push(HM)),l&&(this.instructions.push(Ou),this.hitDetectionInstructions.push(Ou)),i},t.prototype.drawCircle=function(e,i){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,i),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Rt.SET_FILL_STYLE,_c]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);var u=[Rt.CIRCLE,c];this.instructions.push(Oh,u),this.hitDetectionInstructions.push(Oh,u),void 0!==r.fillStyle&&(this.instructions.push(HM),this.hitDetectionInstructions.push(HM)),void 0!==r.strokeStyle&&(this.instructions.push(Ou),this.hitDetectionInstructions.push(Ou)),this.endGeometry(i)}},t.prototype.drawPolygon=function(e,i){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,i),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Rt.SET_FILL_STYLE,_c]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(i)}},t.prototype.drawMultiPolygon=function(e,i){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,i),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Rt.SET_FILL_STYLE,_c]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride(),u=0,d=0,h=a.length;d<h;++d)u=this.drawFlatCoordinatess_(l,u,a[d],c);this.endGeometry(i)}},t.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,r=0,s=i.length;r<s;++r)i[r]=Rh(i[r],e);return n.prototype.finish.call(this)},t.prototype.setFillStrokeStyles_=function(){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},t}(qv);const C$=xOe;function MOe(n,t,e,i,r){var d,h,f,p,m,g,_,v,y,s=e,o=e,a=0,l=0,c=e;for(d=e;d<i;d+=r){var b=t[d],x=t[d+1];void 0!==p&&(v=b-p,y=x-m,f=Math.sqrt(v*v+y*y),void 0!==g&&(l+=h,Math.acos((g*v+_*y)/(h*f))>n&&(l>a&&(a=l,s=c,o=d),l=0,c=d-r)),h=f,g=v,_=y),p=b,m=x}return(l+=f)>a?[c,d]:[s,o]}var COe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Yv={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},SOe=function(n){function t(e,i,r,s){var o=n.call(this,e,i,r,s)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return COe(t,n),t.prototype.finish=function(){var e=n.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},t.prototype.drawText=function(e,i){var o=this.textState_;if(""!==this.text_&&o&&(this.textFillState_||this.textStrokeState_)){var a=this.coordinates,l=a.length,c=e.getType(),u=null,d=e.getStride();if("line"!==o.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){var E=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),d=2;break;case"Polygon":u=e.getFlatInteriorPoint(),o.overflow||E.push(u[2]/this.resolution),d=3;break;case"MultiPolygon":var R=e.getFlatInteriorPoints();for(u=[],p=0,m=R.length;p<m;p+=3)o.overflow||E.push(R[p+2]/this.resolution),u.push(R[p],R[p+1]);if(0===u.length)return;d=2}if((w=this.appendFlatPointCoordinates(u,d))===l)return;if(E&&(w-l)/2!=u.length/d){var F=l/2;E=E.filter(function(O,q){var K=a[2*(F+q)]===u[q*d]&&a[2*(F+q)+1]===u[q*d+1];return K||--F,K})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,i);var N=o.padding;if(N!=Eh&&(o.scale[0]<0||o.scale[1]<0)){var C=o.padding[0],L=o.padding[1],Y=o.padding[2],I=o.padding[3];o.scale[0]<0&&(L=-L,I=-I),o.scale[1]<0&&(C=-C,Y=-Y),N=[C,L,Y,I]}var z=this.pixelRatio;this.instructions.push([Rt.DRAW_IMAGE,l,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,N==Eh?Eh:N.map(function(O){return O*z}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]);var D=1/z;this.hitDetectionInstructions.push([Rt.DRAW_IMAGE,l,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[D,D],NaN,void 0,this.declutterImageWithText_,N,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]),this.endGeometry(i)}else{if(!Ls(this.getBufferedMaxExtent(),e.getExtent()))return;var h=void 0;if(u=e.getFlatCoordinates(),"LineString"==c)h=[u.length];else if("MultiLineString"==c)h=e.getEnds();else if("Polygon"==c)h=e.getEnds().slice(0,1);else if("MultiPolygon"==c){var f=e.getEndss();h=[];for(var p=0,m=f.length;p<m;++p)h.push(f[p][0])}this.beginGeometry(e,i);for(var g=o.textAlign,_=0,v=void 0,y=0,b=h.length;y<b;++y){if(null==g){var x=MOe(o.maxAngle,u,_,h[y],d);_=x[0],v=x[1]}else v=h[y];for(p=_;p<v;p+=d)a.push(u[p],u[p+1]);var w;_=h[y],this.drawChars_(l,w=a.length),l=w}this.endGeometry(i)}}},t.prototype.saveTextStates_=function(){var e=this.textStrokeState_,i=this.textState_,r=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:i.font,textAlign:i.textAlign||Fv,justify:i.justify,textBaseline:i.textBaseline||SM,scale:i.scale});var a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))},t.prototype.drawChars_=function(e,i){var r=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,a=this.textKey_,l=this.fillKey_;this.saveTextStates_();var c=this.pixelRatio,u=Yv[s.textBaseline],d=this.textOffsetY_*c,h=this.text_,f=r?r.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([Rt.DRAW_CHARS,e,i,u,s.overflow,l,s.maxAngle,c,d,o,f*c,h,a,1]),this.hitDetectionInstructions.push([Rt.DRAW_CHARS,e,i,u,s.overflow,l,s.maxAngle,1,d,o,f,h,a,1/c])},t.prototype.setTextStyle=function(e,i){var r,s,o;if(e){var a=e.getFill();a?((s=this.textFillState_)||(this.textFillState_=s={}),s.fillStyle=dl(a.getColor()||_c)):this.textFillState_=s=null;var l=e.getStroke();if(l){(o=this.textStrokeState_)||(this.textStrokeState_=o={});var c=l.getLineDash(),u=l.getLineDashOffset(),d=l.getWidth(),h=l.getMiterLimit();o.lineCap=l.getLineCap()||CM,o.lineDash=c?c.slice():kv,o.lineDashOffset=void 0===u?0:u,o.lineJoin=l.getLineJoin()||xm,o.lineWidth=void 0===d?1:d,o.miterLimit=void 0===h?10:h,o.strokeStyle=dl(l.getColor()||Lv)}else this.textStrokeState_=o=null;r=this.textState_;var f=e.getFont()||e6;KAe(f);var p=e.getScaleArray();r.overflow=e.getOverflow(),r.font=f,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||SM,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Eh,r.scale=void 0===p?[1,1]:p;var m=e.getOffsetX(),g=e.getOffsetY(),_=e.getRotateWithView(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===m?0:m,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0===v?0:v,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Rn(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+Rn(s.fillStyle):""}else this.text_="";this.declutterImageWithText_=i},t}(qv),EOe={Circle:C$,Default:qv,Image:gOe,LineString:yOe,Polygon:C$,Text:SOe},TOe=function(){function n(t,e,i,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}return n.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var r in i){var s=i[r].finish();t[e][r]=s}}return t},n.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[i];void 0===r&&(this.buildersByZIndex_[i]=r={});var s=r[e];return void 0===s&&(s=new(0,EOe[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=s),s},n}();const S$=TOe;function AOe(n,t,e,i,r,s,o,a,l,c,u,d){var h=n[t],f=n[t+1],p=0,m=0,g=0,_=0;function v(){p=h,m=f,h=n[t+=i],f=n[t+1],_+=g,g=Math.sqrt((h-p)*(h-p)+(f-m)*(f-m))}do{v()}while(t<e-i&&_+g<s);for(var y=0===g?0:(s-_)/g,b=Sh(p,h,y),x=Sh(m,f,y),w=t-i,E=_,R=s+a*l(c,r,u);t<e-i&&_+g<R;)v();var C,F=Sh(p,h,y=0===g?0:(R-_)/g),N=Sh(m,f,y);if(d){var L=[b,x,F,N];w6(L,0,4,2,d,L,L),C=L[0]>L[2]}else C=b>F;var D,Y=Math.PI,I=[],z=w+i===t;if(g=0,_=E,h=n[t=w],f=n[t+1],z)return v(),D=Math.atan2(f-m,h-p),C&&(D+=D>0?-Y:Y),I[0]=[P=(F+b)/2,O=(N+x)/2,(R-s)/2,D,r],I;for(var q=0,K=(r=r.replace(/\n/g," ")).length;q<K;){v();var J=Math.atan2(f-m,h-p);if(C&&(J+=J>0?-Y:Y),void 0!==D){var j=J-D;if(j+=j>Y?-2*Y:j<-Y?2*Y:0,Math.abs(j)>o)return null}D=J;for(var we=q,fe=0;q<K;++q){var ie=a*l(c,r[C?K-q-1:q],u);if(t+i<e&&_+g<s+fe+ie/2)break;fe+=ie}if(q!==we){var Re=C?r.substring(K-we,K-q):r.substring(we,q),P=Sh(p,h,y=0===g?0:(s+fe/2-_)/g),O=Sh(m,f,y);I.push([P,O,fe/2,J,Re]),s+=fe}}return I}function E$(n,t,e,i){for(var r=n[t],s=n[t+1],o=0,a=t+i;a<e;a+=i){var l=n[a],c=n[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}var Im=[1/0,1/0,-1/0,-1/0],Pu=[],xc=[],wc=[],Lu=[];function T$(n){return n[3].declutterBox}var DOe=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function A$(n,t){return("start"===t||"end"===t)&&!DOe.test(n)&&(t="start"===t?"left":"right"),Yv[t]}function ROe(n,t,e){return e>0&&n.push("\n",""),n.push(t,""),n}var IOe=function(){function n(t,e,i,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return n.prototype.createLabel=function(t,e,i,r){var s=t+e+i+r;if(this.labels_[s])return this.labels_[s];var o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(t),h=l.justify?Yv[l.justify]:A$(Array.isArray(t)?t[0]:t,l.textAlign||Fv),f=r&&o.lineWidth?o.lineWidth:0,p=d?t:t.split("\n").reduce(ROe,[]),m=function QAe(n,t){for(var e=[],i=[],r=[],s=0,o=0,a=0,l=0,c=0,u=t.length;c<=u;c+=2){var d=t[c];if("\n"!==d&&c!==u){var h=t[c+1]||n.font,f=EM(h,d);e.push(f),o+=f;var p=ZAe(h);i.push(p),l=Math.max(l,p)}else s=Math.max(s,o),r.push(o),o=0,a+=l}return{width:s,height:a,widths:e,heights:i,lineWidths:r}}(l,p),v=m.widths,y=m.heights,b=m.lineWidths,x=m.width+f,w=[],E=(x+2)*u[0],R=(m.height+f)*u[1],F={width:E<0?Math.floor(E):Math.ceil(E),height:R<0?Math.floor(R):Math.ceil(R),contextInstructions:w};(1!=u[0]||1!=u[1])&&w.push("scale",u),r&&(w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",f),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit),(lM?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset))),i&&w.push("fillStyle",a.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");for(var q,C=.5-h,L=h*x+C*f,Y=[],I=[],z=0,D=0,P=0,O=0,K=0,J=p.length;K<J;K+=2){var j=p[K];if("\n"!==j){var we=p[K+1]||l.font;we!==q&&(r&&Y.push("font",we),i&&I.push("font",we),q=we),z=Math.max(z,y[P]);var fe=[j,L+C*v[P]+h*(v[P]-b[O]),.5*(f+z)+D];L+=v[P],r&&Y.push("strokeText",fe),i&&I.push("fillText",fe),++P}else D+=z,z=0,L=h*x+C*f,++O}return Array.prototype.push.apply(w,Y),Array.prototype.push.apply(w,I),this.labels_[s]=F,F},n.prototype.replayTextBackground_=function(t,e,i,r,s,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},n.prototype.calculateImageOrLabelDimensions_=function(t,e,i,r,s,o,a,l,c,u,d,h,f,p,m,g){var F,_=i-(a*=h[0]),v=r-(l*=h[1]),y=s+c>t?t-c:s,b=o+u>e?e-u:o,x=p[3]+y*h[0]+p[1],w=p[0]+b*h[1]+p[2],E=_-p[3],R=v-p[0];return(m||0!==d)&&(Pu[0]=E,Lu[0]=E,Pu[1]=R,xc[1]=R,xc[0]=E+x,wc[0]=xc[0],wc[1]=R+w,Lu[1]=wc[1]),0!==d?(cr(F=cl([1,0,0,1,0,0],i,r,1,1,d,-i,-r),Pu),cr(F,xc),cr(F,wc),cr(F,Lu),ul(Math.min(Pu[0],xc[0],wc[0],Lu[0]),Math.min(Pu[1],xc[1],wc[1],Lu[1]),Math.max(Pu[0],xc[0],wc[0],Lu[0]),Math.max(Pu[1],xc[1],wc[1],Lu[1]),Im)):ul(Math.min(E,E+x),Math.min(R,R+w),Math.max(E,E+x),Math.max(R,R+w),Im),f&&(_=Math.round(_),v=Math.round(v)),{drawImageX:_,drawImageY:v,drawImageW:y,drawImageH:b,originX:c,originY:u,declutterBox:{minX:Im[0],minY:Im[1],maxX:Im[2],maxY:Im[3],value:g},canvasTransform:F,scale:h}},n.prototype.replayImageOrLabel_=function(t,e,i,r,s,o,a){var c=r.declutterBox,u=t.canvas,d=a?a[2]*r.scale[0]/2:0;return c.minX-d<=u.width/e&&c.maxX+d>=0&&c.minY-d<=u.height/e&&c.maxY+d>=0&&(!(!o&&!a)&&this.replayTextBackground_(t,Pu,xc,wc,Lu,o,a),function JAe(n,t,e,i,r,s,o,a,l,c,u){n.save(),1!==e&&(n.globalAlpha*=e),t&&n.setTransform.apply(n,t),i.contextInstructions?(n.translate(l,c),n.scale(u[0],u[1]),function eDe(n,t){for(var e=n.contextInstructions,i=0,r=e.length;i<r;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}(i,n)):u[0]<0||u[1]<0?(n.translate(l,c),n.scale(u[0],u[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),n.restore()}(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},n.prototype.fill_=function(t){if(this.alignFill_){var e=cr(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},n.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},n.prototype.drawLabelWithPointPlacement_=function(t,e,i,r){var s=this.textStates[e],o=this.createLabel(t,e,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=A$(Array.isArray(t)?t[0]:t,s.textAlign||Fv),u=Yv[s.textBaseline||SM],d=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:c*(o.width/l-2*s.scale[0])+2*(.5-c)*d,anchorY:u*o.height/l+2*(.5-u)*d}},n.prototype.execute_=function(t,e,i,r,s,o,a,l){var c;this.pixelCoordinates_&&wh(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Dh(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),function cAe(n,t){n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5]}(this.renderedTransform_,i));for(var f,p,m,g,_,v,y,b,x,w,E,R,O,q,K,J,u=0,d=r.length,h=0,F=0,N=0,C=null,L=null,Y=this.coordinateCache_,I=this.viewRotation_,z=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},P=this.instructions!=r||this.overlaps?0:200;u<d;){var j=r[u];switch(j[0]){case Rt.BEGIN_GEOMETRY:J=j[3],(O=j[1]).getGeometry()?void 0===a||Ls(a,J.getExtent())?++u:u=j[2]+1:u=j[2];break;case Rt.BEGIN_PATH:F>P&&(this.fill_(t),F=0),N>P&&(t.stroke(),N=0),!F&&!N&&(t.beginPath(),g=NaN,_=NaN),++u;break;case Rt.CIRCLE:var fe=c[h=j[1]],_e=c[h+1],Pe=c[h+2]-fe,et=c[h+3]-_e,ye=Math.sqrt(Pe*Pe+et*et);t.moveTo(fe+ye,_e),t.arc(fe,_e,ye,0,2*Math.PI,!0),++u;break;case Rt.CLOSE_PATH:t.closePath(),++u;break;case Rt.CUSTOM:h=j[1],f=j[2];var ue=j[4],pe=6==j.length?j[5]:void 0;D.geometry=j[3],D.feature=O,u in Y||(Y[u]=[]);var Te=Y[u];pe?pe(c,h,f,2,Te):(Te[0]=c[h],Te[1]=c[h+1],Te.length=2),ue(Te,D),++u;break;case Rt.DRAW_IMAGE:h=j[1],f=j[2],p=j[4],m=j[5];var Ze=j[6],Ne=j[7],Ae=j[8],$e=j[9],it=j[10],qt=j[11],xn=j[12],W=j[13],B=j[14],le=j[15];if(!(b=j[3])&&j.length>=20){var Me=this.drawLabelWithPointPlacement_(x=j[19],w=j[20],E=j[21],R=j[22]);j[3]=b=Me.label,j[4]=p=(Me.anchorX-j[23])*this.pixelRatio,j[5]=m=(Me.anchorY-j[24])*this.pixelRatio,j[6]=Ze=b.height,j[13]=W=b.width}var dt=void 0;j.length>25&&(dt=j[25]);var U=void 0,Ce=void 0,nt=void 0;j.length>17?(U=j[16],Ce=j[17],nt=j[18]):(U=Eh,Ce=!1,nt=!1),it&&z?qt+=I:!it&&!z&&(qt-=I);for(var Le=0;h<f;h+=2)if(!(dt&&dt[Le++]<W/this.pixelRatio)){var ke=[t,e,b,X=this.calculateImageOrLabelDimensions_(b.width,b.height,c[h],c[h+1],W,Ze,p,m,Ae,$e,qt,xn,s,U,Ce||nt,O),Ne,Ce?C:null,nt?L:null];if(l){if("none"===B)continue;if("obstacle"===B){l.insert(X.declutterBox);continue}var Se=void 0,xt=void 0;if(le){var ze=f-h;if(!le[ze]){le[ze]=ke;continue}if(Se=le[ze],delete le[ze],xt=T$(Se),l.collides(xt))continue}if(l.collides(X.declutterBox))continue;Se&&(l.insert(xt),this.replayImageOrLabel_.apply(this,Se)),l.insert(X.declutterBox)}this.replayImageOrLabel_.apply(this,ke)}++u;break;case Rt.DRAW_CHARS:var ht=j[1],Be=j[2],Nt=j[3],Qn=j[4];R=j[5];var fn=j[6],mo=j[7],go=j[8];E=j[9];var Kv=j[10];x=j[11];var Ph=[j[13],j[13]],Zv=this.textStates[w=j[12]],Mc=Zv.font,Bu=[Zv.scale[0]*mo,Zv.scale[1]*mo],Lh=void 0;Mc in this.widths_?Lh=this.widths_[Mc]:this.widths_[Mc]=Lh={};var UM=E$(c,ht,Be,2),zM=Math.abs(Bu[0])*n6(Mc,x,Lh);if(Qn||zM<=UM){var ce=AOe(c,ht,Be,2,x,(UM-zM)*Yv[this.textStates[w].textAlign],fn,Math.abs(Bu[0]),n6,Mc,Lh,z?0:this.viewRotation_);e:if(ce){var se=[],ge=void 0,Et=void 0,yt=void 0,wt=void 0;if(E)for(ge=0,Et=ce.length;ge<Et;++ge){yt=this.createLabel((wt=ce[ge])[4],w,"",E);var X=this.calculateImageOrLabelDimensions_(yt.width,yt.height,wt[0],wt[1],yt.width,yt.height,p=wt[2]+(Bu[0]<0?-Kv:Kv),m=Nt*yt.height+2*(.5-Nt)*Kv*Bu[1]/Bu[0]-go,0,0,wt[3],Ph,!1,Eh,!1,O);if(l&&l.collides(X.declutterBox))break e;se.push([t,e,yt,X,1,null,null])}if(R)for(ge=0,Et=ce.length;ge<Et;++ge){if(yt=this.createLabel((wt=ce[ge])[4],w,R,""),X=this.calculateImageOrLabelDimensions_(yt.width,yt.height,wt[0],wt[1],yt.width,yt.height,p=wt[2],m=Nt*yt.height-go,0,0,wt[3],Ph,!1,Eh,!1,O),l&&l.collides(X.declutterBox))break e;se.push([t,e,yt,X,1,null,null])}l&&l.load(se.map(T$));for(var Sn=0,_n=se.length;Sn<_n;++Sn)this.replayImageOrLabel_.apply(this,se[Sn])}}++u;break;case Rt.END_GEOMETRY:if(void 0!==o){var vn=o(O=j[1],J);if(vn)return vn}++u;break;case Rt.FILL:P?F++:this.fill_(t),++u;break;case Rt.MOVE_TO_LINE_TO:for(f=j[2],y=(K=c[(h=j[1])+1])+.5|0,((v=(q=c[h])+.5|0)!==g||y!==_)&&(t.moveTo(q,K),g=v,_=y),h+=2;h<f;h+=2)v=(q=c[h])+.5|0,y=(K=c[h+1])+.5|0,(h==f-2||v!==g||y!==_)&&(t.lineTo(q,K),g=v,_=y);++u;break;case Rt.SET_FILL_STYLE:C=j,this.alignFill_=j[2],F&&(this.fill_(t),F=0,N&&(t.stroke(),N=0)),t.fillStyle=j[1],++u;break;case Rt.SET_STROKE_STYLE:L=j,N&&(t.stroke(),N=0),this.setStrokeStyle_(t,j),++u;break;case Rt.STROKE:P?N++:t.stroke(),++u;break;default:++u}}F&&this.fill_(t),N&&t.stroke()},n.prototype.execute=function(t,e,i,r,s,o){this.viewRotation_=r,this.execute_(t,e,i,this.instructions,s,void 0,void 0,o)},n.prototype.executeHitDetection=function(t,e,i,r,s){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,s)},n}();const kOe=IOe;var JI=["Polygon","Circle","LineString","Image","Text","Default"],OOe=function(){function n(t,e,i,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(s)}return n.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},n.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(this.executorsByZIndex_[e]=i={});var r=t[e];for(var s in r)i[s]=new kOe(this.resolution_,this.pixelRatio_,this.overlaps_,r[s])}},n.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],r=0,s=t.length;r<s;++r)if(t[r]in i)return!0;return!1},n.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,s,o){var a=2*(r=Math.round(r))+1,l=cl(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=fo(a,a));var d,u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(gm(d=[1/0,1/0,-1/0,-1/0],t),oI(d,e*(this.renderBuffer_+r),d));var f,h=function POe(n){if(void 0!==ek[n])return ek[n];for(var t=2*n+1,e=n*n,i=new Array(e+1),r=0;r<=n;++r)for(var s=0;s<=n;++s){var o=r*r+s*s;if(o>e)break;var a=i[o];a||(i[o]=a=[]),a.push(4*((n+r)*t+(n+s))+3),r>0&&a.push(4*((n-r)*t+(n+s))+3),s>0&&(a.push(4*((n+r)*t+(n-s))+3),r>0&&a.push(4*((n-r)*t+(n-s))+3))}for(var l=[],c=(r=0,i.length);r<c;++r)i[r]&&l.push.apply(l,i[r]);return ek[n]=l,l}(r);function p(w,E){for(var R=u.getImageData(0,0,a,a).data,F=0,N=h.length;F<N;F++)if(R[h[F]]>0){if(!o||"Image"!==f&&"Text"!==f||-1!==o.indexOf(w)){var C=(h[F]-3)/4,L=r-C%a,Y=r-(C/a|0),I=s(w,E,L*L+Y*Y);if(I)return I}u.clearRect(0,0,a,a);break}}var g,_,v,y,b,m=Object.keys(this.executorsByZIndex_).map(Number);for(m.sort(xh),g=m.length-1;g>=0;--g){var x=m[g].toString();for(v=this.executorsByZIndex_[x],_=JI.length-1;_>=0;--_)if(void 0!==(y=v[f=JI[_]])&&(b=y.executeHitDetection(u,l,i,p,d)))return b}},n.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],r=e[1],s=e[2],o=e[3],a=[i,r,i,o,s,o,s,r];return Dh(a,0,8,2,t,a),a},n.prototype.isEmpty=function(){return Av(this.executorsByZIndex_)},n.prototype.execute=function(t,e,i,r,s,o,a){var l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(xh),this.maxExtent_&&(t.save(),this.clip(t,i));var u,d,h,f,p,m,c=o||JI;for(a&&l.reverse(),u=0,d=l.length;u<d;++u){var g=l[u].toString();for(p=this.executorsByZIndex_[g],h=0,f=c.length;h<f;++h)void 0!==(m=p[c[h]])&&m.execute(t,e,i,r,s,a)}this.maxExtent_&&t.restore()},n}(),ek={};const D$=OOe;var LOe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),FOe=function(n){function t(e,i,r,s,o,a,l){var c=n.call(this)||this;return c.context_=e,c.pixelRatio_=i,c.extent_=r,c.transform_=s,c.viewRotation_=o,c.squaredTolerance_=a,c.userTransform_=l,c.contextFillState_=null,c.contextStrokeState_=null,c.contextTextState_=null,c.fillState_=null,c.strokeState_=null,c.image_=null,c.imageAnchorX_=0,c.imageAnchorY_=0,c.imageHeight_=0,c.imageOpacity_=0,c.imageOriginX_=0,c.imageOriginY_=0,c.imageRotateWithView_=!1,c.imageRotation_=0,c.imageScale_=[0,0],c.imageWidth_=0,c.text_="",c.textOffsetX_=0,c.textOffsetY_=0,c.textRotateWithView_=!1,c.textRotation_=0,c.textScale_=[0,0],c.textFillState_=null,c.textStrokeState_=null,c.textState_=null,c.pixelCoordinates_=[],c.tmpLocalTransform_=[1,0,0,1,0,0],c}return LOe(t,n),t.prototype.drawImages_=function(e,i,r,s){if(this.image_){var o=Dh(e,i,r,s,this.transform_,this.pixelCoordinates_),a=this.context_,l=this.tmpLocalTransform_,c=a.globalAlpha;1!=this.imageOpacity_&&(a.globalAlpha=c*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var d=0,h=o.length;d<h;d+=2){var f=o[d]-this.imageAnchorX_,p=o[d+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var m=f+this.imageAnchorX_,g=p+this.imageAnchorY_;cl(l,m,g,1,1,u,-m,-g),a.setTransform.apply(a,l),a.translate(m,g),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.setTransform(1,0,0,1,0,0)}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(a.globalAlpha=c)}},t.prototype.drawText_=function(e,i,r,s){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=Dh(e,i,r,s,this.transform_,this.pixelCoordinates_),a=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);i<r;i+=s){var c=o[i]+this.textOffsetX_,u=o[i+1]+this.textOffsetY_;if(0!==l||1!=this.textScale_[0]||1!=this.textScale_[1]){var d=cl(this.tmpLocalTransform_,c,u,1,1,l,-c,-u);a.setTransform.apply(a,d),a.translate(c,u),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&a.strokeText(this.text_,c,u),this.textFillState_&&a.fillText(this.text_,c,u)}}},t.prototype.moveToLineTo_=function(e,i,r,s,o){var a=this.context_,l=Dh(e,i,r,s,this.transform_,this.pixelCoordinates_);a.moveTo(l[0],l[1]);var c=l.length;o&&(c-=2);for(var u=2;u<c;u+=2)a.lineTo(l[u],l[u+1]);return o&&a.closePath(),r},t.prototype.drawRings_=function(e,i,r,s){for(var o=0,a=r.length;o<a;++o)i=this.moveToLineTo_(e,i,r[o],s,!0);return i},t.prototype.drawCircle=function(e){if(Ls(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=function tRe(n,t,e){var i=n.getFlatCoordinates();if(i){var r=n.getStride();return Dh(i,0,i.length,r,t,e)}return null}(e,this.transform_,this.pixelCoordinates_),r=i[2]-i[0],s=i[3]-i[1],o=Math.sqrt(r*r+s*s),a=this.context_;a.beginPath(),a.arc(i[0],i[1],o,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}},t.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())},t.prototype.setTransform=function(e){this.transform_=e},t.prototype.drawGeometry=function(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}},t.prototype.drawFeature=function(e,i){var r=i.getGeometryFunction()(e);!r||!Ls(this.extent_,r.getExtent())||(this.setStyle(i),this.drawGeometry(r))},t.prototype.drawGeometryCollection=function(e){for(var i=e.getGeometriesArray(),r=0,s=i.length;r<s;++r)this.drawGeometry(i[r])},t.prototype.drawPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(i,0,i.length,r),""!==this.text_&&this.drawText_(i,0,i.length,r)},t.prototype.drawMultiPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(i,0,i.length,r),""!==this.text_&&this.drawText_(i,0,i.length,r)},t.prototype.drawLineString=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ls(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=e.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),i.stroke()}if(""!==this.text_){var s=e.getFlatMidpoint();this.drawText_(s,0,2,2)}}},t.prototype.drawMultiLineString=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=e.getExtent();if(Ls(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,s=e.getFlatCoordinates(),o=0,a=e.getEnds(),l=e.getStride();r.beginPath();for(var c=0,u=a.length;c<u;++c)o=this.moveToLineTo_(s,o,a[c],l,!1);r.stroke()}if(""!==this.text_){var d=e.getFlatMidpoints();this.drawText_(d,0,d.length,2)}}},t.prototype.drawPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ls(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){var r=e.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},t.prototype.drawMultiPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ls(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=e.getOrientedFlatCoordinates(),s=0,o=e.getEndss(),a=e.getStride();i.beginPath();for(var l=0,c=o.length;l<c;++l)s=this.drawRings_(r,s,o[l],a);this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){var d=e.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}},t.prototype.setContextFillState_=function(e){var i=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,i.fillStyle=e.fillStyle):(i.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})},t.prototype.setContextStrokeState_=function(e){var i=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,i.lineCap=e.lineCap),i.setLineDash&&(wh(r.lineDash,e.lineDash)||i.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,i.lineDashOffset=e.lineDashOffset)),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,i.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,i.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,i.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,i.setLineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},t.prototype.setContextTextState_=function(e){var i=this.context_,r=this.contextTextState_,s=e.textAlign?e.textAlign:Fv;r?(r.font!=e.font&&(r.font=e.font,i.font=e.font),r.textAlign!=s&&(r.textAlign=s,i.textAlign=s),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,i.textBaseline=e.textBaseline)):(i.font=e.font,i.textAlign=s,i.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})},t.prototype.setFillStrokeStyle=function(e,i){var r=this;if(e){var s=e.getColor();this.fillState_={fillStyle:dl(s||_c)}}else this.fillState_=null;if(i){var o=i.getColor(),a=i.getLineCap(),l=i.getLineDash(),c=i.getLineDashOffset(),u=i.getLineJoin(),d=i.getWidth(),h=i.getMiterLimit(),f=l||kv;this.strokeState_={lineCap:void 0!==a?a:CM,lineDash:1===this.pixelRatio_?f:f.map(function(p){return p*r.pixelRatio_}),lineDashOffset:(c||0)*this.pixelRatio_,lineJoin:void 0!==u?u:xm,lineWidth:(void 0!==d?d:1)*this.pixelRatio_,miterLimit:void 0!==h?h:10,strokeStyle:dl(o||Lv)}}else this.strokeState_=null},t.prototype.setImageStyle=function(e){var i;if(e&&(i=e.getSize())){var r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=i[1]*this.pixelRatio_,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),this.imageScale_=e.getScaleArray(),this.imageWidth_=i[0]*this.pixelRatio_}else this.image_=null},t.prototype.setTextStyle=function(e){if(e){var i=e.getFill();if(i){var r=i.getColor();this.textFillState_={fillStyle:dl(r||_c)}}else this.textFillState_=null;var s=e.getStroke();if(s){var o=s.getColor(),a=s.getLineCap(),l=s.getLineDash(),c=s.getLineDashOffset(),u=s.getLineJoin(),d=s.getWidth(),h=s.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:CM,lineDash:l||kv,lineDashOffset:c||0,lineJoin:void 0!==u?u:xm,lineWidth:void 0!==d?d:1,miterLimit:void 0!==h?h:10,strokeStyle:dl(o||Lv)}}else this.textStrokeState_=null;var f=e.getFont(),p=e.getOffsetX(),m=e.getOffsetY(),g=e.getRotateWithView(),_=e.getRotation(),v=e.getScaleArray(),y=e.getText(),b=e.getTextAlign(),x=e.getTextBaseline();this.textState_={font:void 0!==f?f:e6,textAlign:void 0!==b?b:Fv,textBaseline:void 0!==x?x:SM},this.text_=void 0!==y?Array.isArray(y)?y.reduce(function(w,E,R){return w+(R%2?" ":E)},""):y:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==_?_:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}else this.text_=""},t}(M$);const NOe=FOe;var BOe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xv=null,VOe=function(n){function t(e,i,r,s,o,a){var l=n.call(this)||this;return l.hitDetectionImage_=null,l.image_=e||new Image,null!==s&&(l.image_.crossOrigin=s),l.canvas_={},l.color_=a,l.unlisten_=null,l.imageState_=o,l.size_=r,l.src_=i,l}return BOe(t,n),t.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){Xv||(Xv=fo(1,1)),Xv.drawImage(this.image_,0,0);try{Xv.getImageData(0,0,1,1),this.tainted_=!1}catch(e){Xv=null,this.tainted_=!0}}return!0===this.tainted_},t.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},t.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.getImage=function(e){return this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_},t.prototype.getPixelRatio=function(e){return this.replaceColor_(e),this.canvas_[e]?e:1},t.prototype.getImageState=function(){return this.imageState_},t.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],r=fo(e,i);r.fillRect(0,0,e,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},t.prototype.getSize=function(){return this.size_},t.prototype.getSrc=function(){return this.src_},t.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(e){this.handleImageError_()}this.unlisten_=$I(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},t.prototype.replaceColor_=function(e){if(this.color_&&!this.canvas_[e]&&2===this.imageState_){var i=document.createElement("canvas");this.canvas_[e]=i,i.width=Math.ceil(this.image_.width*e),i.height=Math.ceil(this.image_.height*e);var r=i.getContext("2d");if(r.scale(e,e),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply","multiply"===r.globalCompositeOperation||this.isTainted_())r.fillStyle=V8(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var s=r.getImageData(0,0,i.width,i.height),o=s.data,a=this.color_[0]/255,l=this.color_[1]/255,c=this.color_[2]/255,u=this.color_[3],d=0,h=o.length;d<h;d+=4)o[d]*=a,o[d+1]*=l,o[d+2]*=c,o[d+3]*=u;r.putImageData(s,0,0)}}},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(fm),UOe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zOe=function(n){function t(e){var i=this,r=e||{};(i=n.call(this,{opacity:void 0!==r.opacity?r.opacity:1,rotation:void 0!==r.rotation?r.rotation:0,scale:void 0!==r.scale?r.scale:1,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:void 0!==r.rotateWithView&&r.rotateWithView,declutterMode:r.declutterMode})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:"top-left",i.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:"fraction",i.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:"fraction",i.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var c=void 0!==r.img?r.img:null;i.imgSize_=r.imgSize;var u=r.src;hn(!(void 0!==u&&c),4),hn(!c||c&&i.imgSize_,5),(void 0===u||0===u.length)&&c&&(u=c.src||Rn(c)),hn(void 0!==u&&u.length>0,6);var d=void 0!==r.src?0:2;return i.color_=void 0!==r.color?_M(r.color):null,i.iconImage_=function HOe(n,t,e,i,r,s){var o=vM.get(t,i,s);return o||(o=new VOe(n,t,e,i,r,s),vM.set(t,i,s,o)),o}(c,u,void 0!==i.imgSize_?i.imgSize_:null,i.crossOrigin_,d,i.color_),i.offset_=void 0!==r.offset?r.offset:[0,0],i.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:"top-left",i.origin_=null,i.size_=void 0!==r.size?r.size:null,i}return UOe(t,n),t.prototype.clone=function(){var e=this.getScale();return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},t.prototype.getAnchor=function(){var e=this.normalizedAnchor_;if(!e){e=this.anchor_;var i=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!i)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=i[0]),"fraction"==this.anchorYUnits_&&(e[1]*=i[1])}if("top-left"!=this.anchorOrigin_){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+i[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}var r=this.getDisplacement();return[e[0]-r[0],e[1]+r[1]]},t.prototype.setAnchor=function(e){this.anchor_=e,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(e){return this.iconImage_.getImage(e)},t.prototype.getPixelRatio=function(e){return this.iconImage_.getPixelRatio(e)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var e=this.offset_;if("top-left"!=this.offsetOrigin_){var i=this.getSize(),r=this.iconImage_.getSize();if(!i||!r)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=r[0]-i[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=r[1]-i[1]-e[1])}return this.origin_=e,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(e){this.iconImage_.addEventListener("change",e)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(e){this.iconImage_.removeEventListener("change",e)},t}(y$);const GOe=zOe;var hl=.5,R$={Point:function tPe(n,t,e,i,r){var a,s=e.getImage(),o=e.getText();if(s){if(2!=s.getImageState())return;var l=n;if(r){var c=s.getDeclutterMode();if("none"!==c)if(l=r,"obstacle"===c){var u=n.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawPoint(t,i)}else o&&o.getText()&&(a={})}var d=l.getBuilder(e.getZIndex(),"Image");d.setImageStyle(s,a),d.drawPoint(t,i)}if(o&&o.getText()){var h=n;r&&(h=r);var f=h.getBuilder(e.getZIndex(),"Text");f.setTextStyle(o,a),f.drawText(t,i)}},LineString:function QOe(n,t,e,i,r){var s=e.getStroke();if(s){var o=n.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(t,i)}var a=e.getText();if(a&&a.getText()){var l=(r||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}},Polygon:function iPe(n,t,e,i,r){var s=e.getFill(),o=e.getStroke();if(s||o){var a=n.getBuilder(e.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawPolygon(t,i)}var l=e.getText();if(l&&l.getText()){var c=(r||n).getBuilder(e.getZIndex(),"Text");c.setTextStyle(l),c.drawText(t,i)}},MultiPoint:function nPe(n,t,e,i,r){var a,s=e.getImage(),o=e.getText();if(s){if(2!=s.getImageState())return;var l=n;if(r){var c=s.getDeclutterMode();if("none"!==c)if(l=r,"obstacle"===c){var u=n.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}var d=l.getBuilder(e.getZIndex(),"Image");d.setImageStyle(s,a),d.drawMultiPoint(t,i)}if(o&&o.getText()){var h=n;r&&(h=r);var f=h.getBuilder(e.getZIndex(),"Text");f.setTextStyle(o,a),f.drawText(t,i)}},MultiLineString:function JOe(n,t,e,i,r){var s=e.getStroke();if(s){var o=n.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(t,i)}var a=e.getText();if(a&&a.getText()){var l=(r||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}},MultiPolygon:function ePe(n,t,e,i,r){var s=e.getFill(),o=e.getStroke();if(o||s){var a=n.getBuilder(e.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawMultiPolygon(t,i)}var l=e.getText();if(l&&l.getText()){var c=(r||n).getBuilder(e.getZIndex(),"Text");c.setTextStyle(l),c.drawText(t,i)}},GeometryCollection:function ZOe(n,t,e,i,r){var o,a,s=t.getGeometriesArray();for(o=0,a=s.length;o<a;++o)(0,R$[s[o].getType()])(n,s[o],e,i,r)},Circle:function XOe(n,t,e,i,r){var s=e.getFill(),o=e.getStroke();if(s||o){var a=n.getBuilder(e.getZIndex(),"Circle");a.setFillStrokeStyle(s,o),a.drawCircle(t,i)}var l=e.getText();if(l&&l.getText()){var c=(r||n).getBuilder(e.getZIndex(),"Text");c.setTextStyle(l),c.drawText(t,i)}}};function qOe(n,t){return parseInt(Rn(n),10)-parseInt(Rn(t),10)}function tk(n,t){return.5*n/t}function I$(n,t,e,i,r,s,o){var a=!1,l=e.getImage();if(l){var c=l.getImageState();2==c||3==c?l.unlistenImageChange(r):(0==c&&l.load(),l.listenImageChange(r),a=!0)}return function KOe(n,t,e,i,r,s){var o=e.getGeometryFunction()(t);if(o){var a=o.simplifyTransformed(i,r);e.getRenderer()?k$(n,a,e,t):(0,R$[a.getType()])(n,a,e,t,s)}}(n,t,e,i,s,o),a}function k$(n,t,e,i){if("GeometryCollection"!=t.getType())n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer());else for(var r=t.getGeometries(),s=0,o=r.length;s<o;++s)k$(n,r[s],e,i)}var rPe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),sPe=function(n){function t(e){var i=n.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=[1/0,1/0,-1/0,-1/0],i.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i.compositionContext_=null,i.opacity_=1,i}return rPe(t,n),t.prototype.renderWorlds=function(e,i,r){var s=i.extent,o=i.viewState,a=o.center,l=o.resolution,c=o.projection,u=o.rotation,d=c.getExtent(),h=this.getLayer().getSource(),f=i.pixelRatio,p=i.viewHints,m=!(p[0]||p[1]),g=this.compositionContext_,_=Math.round(i.size[0]*f),v=Math.round(i.size[1]*f),y=h.getWrapX()&&c.canWrapX(),b=y?ai(d):null,x=y?Math.ceil((s[2]-d[2])/b)+1:1,w=y?Math.floor((s[0]-d[0])/b):0;do{var E=this.getRenderTransform(a,l,u,f,_,v,w*b);e.execute(g,1,E,u,m,void 0,r)}while(++w<x)},t.prototype.setupCompositionContext_=function(){if(1!==this.opacity_){var e=fo(this.context.canvas.width,this.context.canvas.height,g$);this.compositionContext_=e}else this.compositionContext_=this.context},t.prototype.releaseCompositionContext_=function(){if(1!==this.opacity_){var e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Q8(this.compositionContext_),g$.push(this.compositionContext_.canvas),this.compositionContext_=null}},t.prototype.renderDeclutter=function(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())},t.prototype.renderFrame=function(e,i){var r=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];(function uAe(n,t,e){(function Dv(n,t,e,i,r,s,o){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n})(n,t,0,0,e,0,0)})(this.pixelTransform,1/r,1/r),cM(this.inversePixelTransform,this.pixelTransform);var o=sI(this.pixelTransform);this.useContainer(i,o,this.getBackground(e));var a=this.context,l=a.canvas,c=this.replayGroup_,u=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!u||u.isEmpty()))return null;var d=Math.round(e.size[0]*r),h=Math.round(e.size[1]*r);l.width!=d||l.height!=h?(l.width=d,l.height=h,l.style.transform!==o&&(l.style.transform=o)):this.containerReused||a.clearRect(0,0,d,h),this.preRender(a,e);var f=e.viewState;this.opacity_=s.opacity,this.setupCompositionContext_();var m=!1,g=!0;if(s.extent&&this.clipping){var _=Ah(s.extent);(m=(g=Ls(_,e.extent))&&!pm(_,e.extent))&&this.clipUnrotated(this.compositionContext_,e,_)}return g&&this.renderWorlds(c,e),m&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(a,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container},t.prototype.getFeatures=function(e){return new Promise(function(i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];cr(this.pixelTransform,r);var s=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,l=this.renderedProjection_,c=this.wrappedRenderedExtent_,u=this.getLayer(),d=[],h=r[0]*hl,f=r[1]*hl;d.push(this.getRenderTransform(s,o,a,hl,h,f,0).slice());var p=u.getSource(),m=l.getExtent();if(p.getWrapX()&&l.canWrapX()&&!pm(m,c)){for(var g=c[0],_=ai(m),v=0;g<m[0];)--v,d.push(this.getRenderTransform(s,o,a,hl,h,f,_*v).slice()),g+=_;for(v=0,g=c[2];g>m[2];)++v,d.push(this.getRenderTransform(s,o,a,hl,h,f,_*v).slice()),g-=_}this.hitDetectionImageData_=function WOe(n,t,e,i,r,s,o){var c=fo(n[0]*hl,n[1]*hl);c.imageSmoothingEnabled=!1;for(var u=c.canvas,d=new NOe(c,hl,r,null,o),h=e.length,f=Math.floor(16777215/h),p={},m=1;m<=h;++m){var g=e[m-1],_=g.getStyleFunction()||i;if(i){var v=_(g,s);if(v){Array.isArray(v)||(v=[v]);for(var b="#"+("000000"+(m*f).toString(16)).slice(-6),x=0,w=v.length;x<w;++x){var E=v[x],R=E.getGeometryFunction()(g);if(R&&Ls(r,R.getExtent())){var F=E.clone(),N=F.getFill();N&&N.setColor(b);var C=F.getStroke();C&&(C.setColor(b),C.setLineDash(null)),F.setText(void 0);var L=E.getImage();if(L&&0!==L.getOpacity()){var Y=L.getImageSize();if(!Y)continue;var I=fo(Y[0],Y[1],void 0,{alpha:!1}),z=I.canvas;I.fillStyle=b,I.fillRect(0,0,z.width,z.height),F.setImage(new GOe({img:z,imgSize:Y,anchor:L.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:L.getOrigin(),opacity:1,size:L.getSize(),scale:L.getScale(),rotation:L.getRotation(),rotateWithView:L.getRotateWithView()}))}var D=F.getZIndex()||0;(P=p[D])||(p[D]=P={},P.Polygon=[],P.Circle=[],P.LineString=[],P.Point=[]),P[R.getType().replace("Multi","")].push(R,F)}}}}}for(var O=Object.keys(p).map(Number).sort(xh),q=(m=0,O.length);m<q;++m){var P=p[O[m]];for(var K in P){var J=P[K];for(x=0,w=J.length;x<w;x+=2){d.setStyle(J[x+1]);for(var j=0,we=t.length;j<we;++j)d.setTransform(t[j]),d.drawGeometry(J[x])}}}return c.getImageData(0,0,u.width,u.height)}(r,d,this.renderedFeatures_,u.getStyleFunction(),c,o,a)}i(function jOe(n,t,e){var i=[];if(e){var r=Math.floor(Math.round(n[0])*hl),s=Math.floor(Math.round(n[1])*hl),o=4*(ur(r,0,e.width-1)+ur(s,0,e.height-1)*e.width),u=e.data[o+2]+256*(e.data[o+1]+256*e.data[o]),d=Math.floor(16777215/t.length);u&&u%d==0&&i.push(t[u/d-1])}return i}(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,i,r,s,o){var a=this;if(this.replayGroup_){var f,l=i.viewState.resolution,c=i.viewState.rotation,u=this.getLayer(),d={},h=function(m,g,_){var v=Rn(m),y=d[v];if(y){if(!0!==y&&_<y.distanceSq){if(0===_)return d[v]=!0,o.splice(o.lastIndexOf(y),1),s(m,u,g);y.geometry=g,y.distanceSq=_}}else{if(0===_)return d[v]=!0,s(m,u,g);o.push(d[v]={feature:m,layer:u,geometry:g,distanceSq:_,callback:s})}},p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(function(m){return f=m.forEachFeatureAtCoordinate(e,l,c,r,h,m===a.declutterExecutorGroup&&i.declutterTree?i.declutterTree.all().map(function(g){return g.value}):null)}),f}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var i=this.getLayer(),r=i.getSource();if(!r)return!1;var s=e.viewHints[0],o=e.viewHints[1],a=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(this.ready&&!a&&s||!l&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var c=e.extent,u=e.viewState,d=u.projection,h=u.resolution,f=e.pixelRatio,p=i.getRevision(),m=i.getRenderBuffer(),g=i.getRenderOrder();void 0===g&&(g=qOe);var _=u.center.slice(),v=oI(c,m*h),y=v.slice(),b=[v.slice()],x=d.getExtent();if(r.getWrapX()&&d.canWrapX()&&!pm(x,e.extent)){var w=ai(x),E=Math.max(ai(v)/2,w);v[0]=x[0]-E,v[2]=x[2]+E,q8(_,d);var R=F8(b[0],d);R[0]<x[0]&&R[2]<x[2]?b.push([R[0]+w,R[1],R[2]+w,R[3]]):R[0]>x[0]&&R[2]>x[2]&&b.push([R[0]-w,R[1],R[2]-w,R[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&pm(this.wrappedRenderedExtent_,v))return wh(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var N,F=new S$(tk(h,f),v,h,f);this.getLayer().getDeclutter()&&(N=new S$(tk(h,f),v,h,f));var L,C=_6();if(C){for(var Y=0,I=b.length;Y<I;++Y){var D=EI(b[Y]);r.loadFeatures(D,VDe(h),C)}L=Vv(C,d)}else for(Y=0,I=b.length;Y<I;++Y)r.loadFeatures(b[Y],h,d);var P=function YOe(n,t){var e=tk(n,t);return e*e}(h,f),O=!0,q=function(fe){var _e,ie=fe.getStyleFunction()||i.getStyleFunction();if(ie&&(_e=ie(fe,h)),_e){var Re=this.renderFeature(fe,P,_e,F,L,N);O=O&&!Re}}.bind(this),K=EI(v),J=r.getFeaturesInExtent(K);for(g&&J.sort(g),Y=0,I=J.length;Y<I;++Y)q(J[Y]);this.renderedFeatures_=J,this.ready=O;var j=F.finish(),we=new D$(v,h,f,r.getOverlaps(),j,i.getRenderBuffer());return N&&(this.declutterExecutorGroup=new D$(v,h,f,r.getOverlaps(),N.finish(),i.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.wrappedRenderedExtent_=v,this.renderedCenter_=_,this.renderedProjection_=d,this.replayGroup_=we,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,i,r,s,o,a){if(!r)return!1;var l=!1;if(Array.isArray(r))for(var c=0,u=r.length;c<u;++c)l=I$(s,e,r[c],i,this.boundHandleStyleImageChange_,o,a)||l;else l=I$(s,e,r,i,this.boundHandleStyleImageChange_,o,a);return l},t}(_$);const oPe=sPe;var aPe=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),lPe=function(n){function t(e){return n.call(this,e)||this}return aPe(t,n),t.prototype.createRenderer=function(){return new oPe(this)},t}(uOe);const cPe=lPe;var uPe=function(){function n(t){this.rbush_=new v$(t),this.items_={}}return n.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Rn(e)]=i},n.prototype.load=function(t,e){for(var i=new Array(e.length),r=0,s=e.length;r<s;r++){var o=t[r],a=e[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[Rn(a)]=l}this.rbush_.load(i)},n.prototype.remove=function(t){var e=Rn(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},n.prototype.update=function(t,e){var i=this.items_[Rn(e)];Iv([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))},n.prototype.getAll=function(){return this.rbush_.all().map(function(e){return e.value})},n.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(r){return r.value})},n.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},n.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},n.prototype.forEach_=function(t,e){for(var i,r=0,s=t.length;r<s;r++)if(i=e(t[r]))return i;return i},n.prototype.isEmpty=function(){return Av(this.items_)},n.prototype.clear=function(){this.rbush_.clear(),this.items_={}},n.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return ul(e.minX,e.minY,e.maxX,e.maxY,t)},n.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},n}();const O$=uPe;function dPe(n,t){return[[-1/0,-1/0,1/0,1/0]]}function L$(n,t){return function(e,i,r,s,o){var a=this;!function hPe(n,t,e,i,r,s,o){var a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(e,i,r):n,!0),"arraybuffer"==t.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){var c=t.getType(),u=void 0;"json"==c||"text"==c?u=a.responseText:"xml"==c?(u=a.responseXML)||(u=(new DOMParser).parseFromString(a.responseText,"application/xml")):"arraybuffer"==c&&(u=a.response),u?s(t.readFeatures(u,{extent:e,featureProjection:r}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}(n,t,e,i,r,function(l,c){a.addFeatures(l),void 0!==s&&s(l)},o||Mh)}}var F$=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Nu=function(n){function t(e,i,r){var s=n.call(this,e)||this;return s.feature=i,s.features=r,s}return F$(t,n),t}(gc),fPe=function(n){function t(e){var i=this,r=e||{};(i=n.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===r.wrapX||r.wrapX})||this).loader_=Mh,i.format_=r.format,i.overlaps_=void 0===r.overlaps||r.overlaps,i.url_=r.url,void 0!==r.loader?i.loader_=r.loader:void 0!==i.url_&&(hn(i.format_,7),i.loader_=L$(i.url_,i.format_)),i.strategy_=void 0!==r.strategy?r.strategy:dPe;var o,a,s=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.featuresRtree_=s?new O$:null,i.loadedExtentsRtree_=new O$,i.loadingExtentsCount_=0,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(r.features)?a=r.features:r.features&&(a=(o=r.features).getArray()),!s&&void 0===o&&(o=new Wo(a)),void 0!==a&&i.addFeaturesInternal(a),void 0!==o&&i.bindFeaturesCollection_(o),i}return F$(t,n),t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var i=Rn(e);if(this.addToIndex_(i,e)){this.setupChangeEvents_(i,e);var r=e.getGeometry();if(r){var s=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[i]=e;this.dispatchEvent(new Nu("addfeature",e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},t.prototype.setupChangeEvents_=function(e,i){this.featureChangeKeys_[e]=[Cn(i,"change",this.handleFeatureChange_,this),Cn(i,"propertychange",this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,i){var r=!0,s=i.getId();return void 0!==s&&(s.toString()in this.idIndex_?r=!1:this.idIndex_[s.toString()]=i),r&&(hn(!(e in this.uidIndex_),30),this.uidIndex_[e]=i),r},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var i=[],r=[],s=[],o=0,a=e.length;o<a;o++){var c=Rn(l=e[o]);this.addToIndex_(c,l)&&r.push(l)}o=0;for(var u=r.length;o<u;o++){var l;c=Rn(l=r[o]),this.setupChangeEvents_(c,l);var d=l.getGeometry();if(d){var h=d.getExtent();i.push(h),s.push(l)}else this.nullGeometryFeatures_[c]=l}if(this.featuresRtree_&&this.featuresRtree_.load(i,s),this.hasListener("addfeature")){o=0;for(var f=r.length;o<f;o++)this.dispatchEvent(new Nu("addfeature",r[o]))}},t.prototype.bindFeaturesCollection_=function(e){var i=!1;this.addEventListener("addfeature",function(r){i||(i=!0,e.push(r.feature),i=!1)}),this.addEventListener("removefeature",function(r){i||(i=!0,e.remove(r.feature),i=!1)}),e.addEventListener("add",function(r){i||(i=!0,this.addFeature(r.element),i=!1)}.bind(this)),e.addEventListener("remove",function(r){i||(i=!0,this.removeFeature(r.element),i=!1)}.bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(bi);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var s=function(l){this.removeFeatureInternal(l)}.bind(this);for(var o in this.featuresRtree_.forEach(s),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var a=new Nu("clear");this.dispatchEvent(a),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,i){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(s){if(s.getGeometry().intersectsCoordinate(e))return i(s)})},t.prototype.forEachFeatureInExtent=function(e,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)},t.prototype.forEachFeatureIntersectingExtent=function(e,i){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var o=i(r);if(o)return o}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Av(this.nullGeometryFeatures_)||b8(e,x8(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var i=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){i.push(r)}),i},t.prototype.getFeaturesInExtent=function(e,i){var r=this;if(this.featuresRtree_){if(!(i&&i.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);var o=function wAe(n,t){if(t.canWrapX()){var e=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[e[0],n[1],e[2],n[3]]];F8(n,t);var i=ai(e);if(ai(n)>i)return[[e[0],n[1],e[2],n[3]]];if(n[0]<e[0])return[[n[0]+i,n[1],e[2],n[3]],[e[0],n[1],n[2],n[3]]];if(n[2]>e[2])return[[n[0],n[1],e[2],n[3]],[e[0],n[1],n[2]-i,n[3]]]}return[n]}(e,i);return[].concat.apply([],o.map(function(a){return r.featuresRtree_.getInExtent(a)}))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},t.prototype.getClosestFeatureToCoordinate=function(e,i){var r=e[0],s=e[1],o=null,a=[NaN,NaN],l=1/0,c=[-1/0,-1/0,1/0,1/0],u=i||hm;return this.featuresRtree_.forEachInExtent(c,function(d){if(u(d)){var h=d.getGeometry(),f=l;if((l=h.closestPointXY(r,s,a,l))<f){o=d;var p=Math.sqrt(l);c[0]=r-p,c[1]=s-p,c[2]=r+p,c[3]=s+p}}}),o},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var i=this.idIndex_[e.toString()];return void 0!==i?i:null},t.prototype.getFeatureByUid=function(e){var i=this.uidIndex_[e];return void 0!==i?i:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var i=e.target,r=Rn(i),s=i.getGeometry();if(s){var o=s.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,i)):this.featuresRtree_&&this.featuresRtree_.update(o,i)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[r]=i);var a=i.getId();if(void 0!==a){var l=a.toString();this.idIndex_[l]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[l]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[r]=i;this.changed(),this.dispatchEvent(new Nu("changefeature",i))},t.prototype.hasFeature=function(e){var i=e.getId();return void 0!==i?i in this.idIndex_:Rn(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Av(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()},t.prototype.loadFeatures=function(e,i,r){for(var s=this.loadedExtentsRtree_,o=this.strategy_(e,i,r),a=function(d,h){var f=o[d];s.forEachInExtent(f,function(m){return pm(m.extent,f)})||(++l.loadingExtentsCount_,l.dispatchEvent(new Nu("featuresloadstart")),l.loader_.call(l,f,i,r,function(m){--this.loadingExtentsCount_,this.dispatchEvent(new Nu("featuresloadend",void 0,m))}.bind(l),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Nu("featuresloaderror"))}.bind(l)),s.insert(f,{extent:f.slice()}))},l=this,c=0,u=o.length;c<u;++c)a(c);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),n.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var r,i=this.loadedExtentsRtree_;i.forEachInExtent(e,function(s){if(Iv(s.extent,e))return r=s,!0}),r&&i.remove(r)},t.prototype.removeFeature=function(e){if(e){var i=Rn(e);i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}},t.prototype.removeFeatureInternal=function(e){var i=Rn(e),r=this.featureChangeKeys_[i];if(r){r.forEach(bi),delete this.featureChangeKeys_[i];var s=e.getId();return void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[i],this.dispatchEvent(new Nu("removefeature",e)),e}},t.prototype.removeFromIdIndex_=function(e){var i=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],i=!0;break}return i},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){hn(this.format_,7),this.url_=e,this.setLoader(L$(e,this.format_))},t}(c$);const pPe=fPe,mPe=["map"];let gPe=(()=>{class n{constructor(e,i,r){this.zone=e,this.appService=i,this.houseService=r,this.houseFeature=new iAe({geometry:new N6([1511855.49950191,7539541.240669869])})}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){this.houseLayer=new cPe({source:new pPe({features:[this.houseFeature]})}),this.map=new kIe({view:new Iu({center:[1511855.49950191,7539541.240669869],zoom:19}),layers:[new Yke({source:new Oke}),this.houseLayer],target:this.mapEl.nativeElement}),window.map=this.map}}return n.\u0275fac=function(e){return new(e||n)(M(It),M(Wi),M(rr))},n.\u0275cmp=ft({type:n,selectors:[["app-page-map"]],viewQuery:function(e,i){if(1&e&&ni(mPe,5),2&e){let r;Ct(r=St())&&(i.mapEl=r.first)}},decls:4,vars:0,consts:[[1,"map"],["map",""]],template:function(e,i){1&e&&(S(0,"h1"),k(1,"Map"),T(),ae(2,"div",0,1))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),n})(),_Pe=(()=>{class n{constructor(e,i){this.httpClient=e,this.sanitizer=i,this.height="32px",this.width="32px"}set color(e){this.fillColor="primary"===e?"var(--primary-color)":"accent"===e?"var(--accent-color)":"first"===e?"var(--first-color)":"second"===e?"var(--second-color)":"third"===e?"var(--third-color)":`${e}`}set size(e){this.width=`${e[0]}px`,this.height=`${e[1]}px`}ngOnInit(){this.httpClient.get(this.url,{responseType:"text"}).subscribe({next:e=>{e=e.replace(/height=\"64px\"/gi,"").replace(/width=\"64px\"/gi,""),this.svgData=this.sanitizer.bypassSecurityTrustHtml(e)},error:e=>{this.background="#aaa"}})}}return n.\u0275fac=function(e){return new(e||n)(M(wd),M(kg))},n.\u0275cmp=ft({type:n,selectors:[["app-svg"]],hostVars:8,hostBindings:function(e,i){2&e&&Xr("background",i.background)("fill",i.fillColor)("height",i.height)("width",i.width)},inputs:{url:"url",color:"color",size:"size"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,i){1&e&&ae(0,"div",0),2&e&&Z("innerHTML",i.svgData,Ku)},styles:["[_nghost-%COMP%]{display:inline-block}  svg>g>g>path:first-child{fill:#747474}"]}),n})(),vPe=(()=>{class n{constructor(e){this.houseService=e,this.Tag=To,this.Section=tt,this.SensorType=Ee}ngAfterViewInit(){this.houseService.house$.value.partsFlatten.filter(e=>e instanceof De).forEach(e=>e.visible=!0)}getGroups(e){return[...new Set(Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof De).filter(r=>r.sensorType===e).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s).join(", ")}getOutlets(e){return jt(1,Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof De).filter(r=>r.sensorType===e).map(r=>r.amount).reduce((r,s)=>r+s,0))}getCable(e,i=1){return jt(i,Object.values(this.houseService.house$.value.partsFlatten).filter(s=>s instanceof De).filter(s=>s.sensorType===e).map(s=>s.cableLength).reduce((s,o)=>s+o,0))}}return n.\u0275fac=function(e){return new(e||n)(M(rr))},n.\u0275cmp=ft({type:n,selectors:[["app-page-wired"]],decls:158,vars:89,consts:[[3,"id"],[3,"url"],[1,"technical"],["href","https://community.home-assistant.io/t/circadian-lighting-custom-component/61246"]],template:function(e,i){1&e&&(S(0,"h1"),k(1,"Smart home"),T(),S(2,"section",0)(3,"h2"),k(4," Electricity "),T(),S(5,"h3"),ae(6,"app-svg",1),S(7,"span"),k(8,"Normal - 230v"),T()(),S(9,"p"),k(10," The standard in Sweden is 10amps per group (1.5mm2). In Netherlands that would be 16amps and 2.5mm2 "),T(),S(11,"label",2)(12,"span"),k(13,"Technical "),T(),k(14),ae(15,"br"),k(16),ae(17,"br"),k(18),ae(19,"br"),T(),S(20,"h3"),ae(21,"app-svg",1),S(22,"span"),k(23,"3Phase - 400v"),T()(),S(24,"p"),k(25," This weird symbol is a "),S(26,"tag"),k(27,"perilex"),T(),k(28," plug. It has 3-phase (or sometimes just two). The main goal is the devide the load over 3 wires instead of one. It requires more wires though. Think induction in the kitchen, or e-car (not this connector). "),T(),S(29,"label",2)(30,"span"),k(31,"Technical "),T(),k(32),ae(33,"br"),k(34),ae(35,"br"),k(36),ae(37,"br"),T()(),S(38,"section",0)(39,"h2"),k(40," lightning "),T(),S(41,"h3"),ae(42,"app-svg",1),S(43,"span"),k(44,"Lamps"),T()(),S(45,"p"),k(46," Lamps can come in 230v and 24v. Most lamps should be dimmable and wires run back to the PLC "),T(),S(47,"h3"),ae(48,"app-svg",1),S(49,"span"),k(50,"Double switch "),T()(),S(51,"p"),k(52," Double pulse switches. Allows for 6 options. Single, double and long press. They are 24v and wires run back to the PLC. "),T(),S(53,"h3"),ae(54,"app-svg",1),S(55,"span"),k(56,"Dimmer"),T()(),S(57,"p"),k(58," All dimmable lights have a dim level that became less bright during the evening. Following the "),S(59,"a",3),k(60,"circadian lightning."),T(),k(61,". This button is only to overrule and switch on or off "),T(),S(62,"h3"),ae(63,"app-svg",1),S(64,"span"),k(65,"DLC, or light plugs"),T()(),S(66,"p"),k(67," Completely strange for outstanders. but every fixed light has a seperate miniplug. In Sweden they had a old one, and since 2019 they follow the EU standard of DLC. "),T()(),S(68,"section",0)(69,"h2"),k(70," Network / Ethernet "),T(),S(71,"h3"),ae(72,"app-svg",1),S(73,"span"),k(74,"Ethernet (rj45)"),T()(),S(75,"p"),k(76," If you work home, you need reliable internet. A wall outlet for a normal internet cable works the best. Not limited to computers, many devices can have them as well. Like speakers, television etc. "),T(),S(77,"label",2)(78,"span"),k(79,"Technical "),T(),k(80),ae(81,"br"),k(82),ae(83,"br"),T(),S(84,"h3"),ae(85,"app-svg",1),S(86,"span"),k(87,"Power-over-Ethernet "),T()(),S(88,"p"),k(89,"Its a internet cable with (often) 48volts. So you can power up a device with only the internet cable. Perfect for a ring-doorbel, security camera or even wifi-access-points "),T(),S(90,"h3"),ae(91,"app-svg",1),S(92,"span"),k(93,"Wifi"),T()(),S(94,"p"),k(95,"Maybe most important for any mobile device, or guests "),T(),S(96,"label",2)(97,"span"),k(98,"Technical "),T(),k(99),ae(100,"br"),T()(),S(101,"section",0)(102,"h2"),k(103," Safety "),T(),S(104,"h3"),ae(105,"app-svg",1),S(106,"span"),k(107,"Smoke/heat detectors"),T()(),S(108,"p"),k(109,"We have a firefighter in the family. On a serious note, everyone should have multiple of smoke sensors. A heat sensor in the kitchen. "),T(),S(110,"label",2)(111,"span"),k(112,"Technical "),T(),k(113),ae(114,"br"),k(115),ae(116,"br"),T(),S(117,"h3"),ae(118,"app-svg",1),S(119,"span"),k(120,"Camera's"),T()(),S(121,"p"),k(122," The most optional step. Gives a bit of comfort, security wise. It does allow you to monitor your house, when you are away (via your own VPN of course) "),T(),S(123,"label",2)(124,"span"),k(125,"Technical "),T(),k(126),ae(127,"br"),T(),S(128,"h3"),ae(129,"app-svg",1)(130,"app-svg",1),S(131,"span"),k(132,"Window/Door sensors/Motion detection"),T()(),S(133,"p"),k(134," Extends the alarm functoin "),T()(),S(135,"section",0)(136,"h2"),k(137," Other smarts "),T(),S(138,"h3"),ae(139,"app-svg",1),S(140,"span"),k(141,"Sun blinds / screens"),T()(),S(142,"p"),k(143," Essential to a passive house, because the sun radiation is to much during the summer. "),T(),S(144,"h3"),ae(145,"app-svg",1),S(146,"span"),k(147,"Motion sensors"),T()(),S(148,"p"),k(149," Fun addon to help to automate the smart-home. Lights can be turned on/off automatically. "),T(),S(150,"h3"),ae(151,"app-svg",1),S(152,"span"),k(153,"Temperature"),T()(),S(154,"p"),k(155," Help to regulate the heat/cooling and ventilation in certain area's of the house "),T()(),ae(156,"app-svg",1)(157,"app-svg",1)),2&e&&($(2),Z("id",i.Section.wiredPower),$(4),mi("sensor-",i.SensorType.socket,""),zn("url","assets/svg/",i.SensorType.socket,".svg"),$(8),Ot(" Total cable length: ",i.getCable(i.SensorType.socket),"m"),$(2),Ot(" Groups: ",i.getGroups(i.SensorType.socket),""),$(2),Ot(" Amount: ",i.getOutlets(i.SensorType.socket),""),$(3),mi("sensor-",i.SensorType.perilex,""),zn("url","assets/svg/",i.SensorType.perilex,".svg"),$(11),Ot(" Total cable length: ",i.getCable(i.SensorType.perilex),"m"),$(2),Ot(" Groups: ",i.getGroups(i.SensorType.perilex),""),$(2),Ot(" Amount: ",i.getOutlets(i.SensorType.perilex),""),$(2),Z("id",i.Section.wiredLight),$(4),mi("sensor-",i.SensorType.light,""),zn("url","assets/svg/",i.SensorType.light,".svg"),$(6),mi("sensor-",i.SensorType.lightSwitch,""),zn("url","assets/svg/",i.SensorType.lightSwitch,".svg"),$(6),mi("sensor-",i.SensorType.dimmer,""),zn("url","assets/svg/",i.SensorType.dimmer,".svg"),$(9),mi("sensor-",i.SensorType.dlc,""),zn("url","assets/svg/",i.SensorType.dlc,".svg"),$(5),Z("id",i.Section.wiredEthernet),$(4),mi("sensor-",i.SensorType.ethernet,""),zn("url","assets/svg/",i.SensorType.ethernet,".svg"),$(8),Ot(" Amount: ",i.getOutlets(i.SensorType.ethernet),""),$(2),Ot(" Total cable length: ",i.getCable(i.SensorType.ethernet,0),"m"),$(3),mi("sensor-",i.SensorType.poe,""),zn("url","assets/svg/",i.SensorType.poe,".svg"),$(6),mi("sensor-",i.SensorType.wifi,""),zn("url","assets/svg/",i.SensorType.wifi,".svg"),$(8),Ot(" Amount: ",i.getOutlets(i.SensorType.wifi)," Access points"),$(2),Z("id",i.Section.wiredSafety),$(4),mi("sensor-",i.SensorType.smoke,""),zn("url","assets/svg/",i.SensorType.smoke,".svg"),$(8),Ot(" Amount: ",i.getOutlets(i.SensorType.smoke),""),$(2),Ot(" Total cable length: ",i.getCable(i.SensorType.smoke,0),"m"),$(3),mi("sensor-",i.SensorType.camera,""),zn("url","assets/svg/",i.SensorType.camera,".svg"),$(8),Ot(" Amount: ",i.getOutlets(i.SensorType.camera)," PoE"),$(3),mi("sensor-",i.SensorType.pir,""),zn("url","assets/svg/",i.SensorType.pir,".svg"),$(1),mi("sensor-",i.SensorType.alarm,""),zn("url","assets/svg/",i.SensorType.alarm,".svg"),$(5),Z("id",i.Section.wiredExtra),$(4),mi("sensor-",i.SensorType.blinds,""),zn("url","assets/svg/",i.SensorType.blinds,".svg"),$(6),mi("sensor-",i.SensorType.pir,""),zn("url","assets/svg/",i.SensorType.pir,".svg"),$(6),mi("sensor-",i.SensorType.temperature,""),zn("url","assets/svg/",i.SensorType.temperature,".svg"),$(5),mi("sensor-",i.SensorType.ventIn,""),zn("url","assets/svg/",i.SensorType.ventIn,".svg"),$(1),mi("sensor-",i.SensorType.ventOut,""),zn("url","assets/svg/",i.SensorType.ventOut,".svg"))},directives:[_Pe,rM],styles:["h3[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%]{margin-right:6px}"]}),n})();const yPe=["tableRows"];function bPe(n,t){if(1&n&&(S(0,"th",7),k(1),T()),2&n){const e=Qe().$implicit;$(1),Ot(" ",e.name," ")}}function xPe(n,t){if(1&n&&ae(0,"span",9),2&n){const e=Qe().$implicit,i=Qe().$implicit;Z("innerHTML",i.def(e[i.id],e.unit),Ku)}}function wPe(n,t){if(1&n&&(S(0,"td",8),ae(1,"span",9),Ge(2,xPe,1,1,"span",10),ae(3,"span",9),T()),2&n){const e=t.$implicit,i=Qe().$implicit;$(1),Z("innerHTML",i.prefix,Ku),$(1),Z("ngIf",e[i.id]),$(1),Z("innerHTML",i.postfix,Ku)}}function MPe(n,t){1&n&&(Tr(0,4),Ge(1,bPe,2,1,"th",5),Ge(2,wPe,4,3,"td",6),Ar()),2&n&&Z("matColumnDef",t.$implicit.id)}function CPe(n,t){1&n&&ae(0,"tr",11)}function SPe(n,t){if(1&n){const e=Co();Tr(0),S(1,"tr",12,13),Xe("click",function(){const s=pn(e).$implicit;return Qe().rowClick(s)}),T(),Ar()}if(2&n){const e=t.$implicit;$(1),function aF(n,t,e,i,r){oa(Gs,Ga,mf(xe(),n,t,e,i,r),!0)}("group-",e.uuid," row-",e.type,""),Zt("row-folded",e.uuid)}}let EPe=(()=>{class n{constructor(e){this.houseService=e,this.columns=[{id:"folded",name:"",def:i=>`${i}`},{id:ap.name,name:"Name",def:i=>`${i}`},{id:"calcAmount",name:"#",def:(i,r="x")=>`${i}${r}`},{id:"price",name:"Piece price",def:i=>`\u20ac${this.readableNumbers(i)}`},{id:"calcPrice",name:"Sum price",def:i=>`\u20ac${this.readableNumbers(i)}`},{id:ap.sizeOrVersion,name:"Size or Version",def:i=>`${i}`},{id:ap.remarks,name:"remarks",def:i=>`${i}`}],this.groupRow={},this.columnNames=this.columns.map(i=>i.id),this.parts=[]}set data(e){this.costTable=e;const i=e.costs.filter(r=>r);this.dataSource=[...i.flatMap(r=>r instanceof yx?[r,...r.costs]:r),new jye({name:`Total ${e.alias.toLocaleLowerCase()}`,costs:i})]}readableNumbers(e){return Number(e)>1e3?`${jt(-2,e).toLocaleString()}`:e}rowClick(e){e instanceof yx&&(e.toggleFold(),this.rowContainers.forEach(i=>{const r=i.nativeElement.classList;r.contains(`group-${e.uuid}`)&&r.toggle("row-folded")}))}}return n.\u0275fac=function(e){return new(e||n)(M(rr))},n.\u0275cmp=ft({type:n,selectors:[["app-table"]],viewQuery:function(e,i){if(1&e&&ni(yPe,5,Ve),2&e){let r;Ct(r=St())&&(i.rowContainers=r)}},inputs:{data:"data"},decls:4,vars:6,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",3,"dataSource","id"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["mat-row","",3,"click"],["tableRows",""]],template:function(e,i){1&e&&(S(0,"table",0),Ge(1,MPe,3,1,"ng-container",1),Ge(2,CPe,1,0,"tr",2),Ge(3,SPe,3,6,"ng-container",3),T()),2&e&&(zn("id","table-",i.costTable.name,""),Z("dataSource",i.dataSource),$(1),Z("ngForOf",i.columns),$(1),Z("matHeaderRowDef",i.columnNames)("matHeaderRowDefSticky",!0),$(1),Z("matRowDefColumns",i.columnNames))},directives:[pz,ad,hA,dA,fA,uA,pA,Ys,mz,_z,gz,vz],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-column-calcAmount[_ngcontent-%COMP%], .mat-column-price[_ngcontent-%COMP%], .mat-column-calcPrice[_ngcontent-%COMP%]{text-align:right;width:60px}.mat-column-calcPrice[_ngcontent-%COMP%]{padding-right:16px}.mat-column-sizeOrVersion[_ngcontent-%COMP%], .mat-column-other[_ngcontent-%COMP%]{min-width:60px}.mat-column-name[_ngcontent-%COMP%]{min-width:200px}"]}),n})();function TPe(n,t){1&n&&ra(0)}const APe=function(n){return{$implicit:n}};function DPe(n,t){if(1&n&&(Tr(0),Ge(1,TPe,1,0,"ng-container",3),Ar()),2&n){const e=t.$implicit;Qe();const i=ui(6);$(1),Z("ngTemplateOutlet",i)("ngTemplateOutletContext",Sl(2,APe,e))}}function RPe(n,t){1&n&&(S(0,"span"),k(1," Nice to discover alot of moldings: https://en.wikipedia.org/wiki/Molding_(decorative) "),T())}function IPe(n,t){if(1&n&&(ae(0,"h2",4),Ge(1,RPe,2,0,"span",5),ae(2,"app-table",2)),2&n){const e=t.$implicit;Z("innerHTML",e.alias,Ku),$(1),Z("ngIf","finish"===e.name),$(1),Z("data",e)}}const kPe=[{path:"map",component:gPe},{path:"costs",component:(()=>{class n{constructor(e){this.houseService=e,this.tables=[this.getConstruction(),this.getOpenings(),this.getElectra(),this.getFinish(),this.getPreps()],this.hiddenTables=[this.getKitchen(),this.getBathroom()],this.totals=this.getTotals()}getTable(e){return[...this.tables,...this.hiddenTables].find(i=>i.name===e)}getFinish(){const{innerLength:i}=this.houseService.getWallLength();return this.houseService.getWallArea(),{name:"finish",alias:"Finishes",costs:[new ir({amount:i,name:"Crown molding",price:3,unit:"m"}),new ir({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(vi,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Oi,[],a=>({name:"Window casing",price:60})),new ir({amount:i,name:"Gips boards",price:10,unit:"m2"})]}}getElectra(){return{name:"electra",alias:"Electra",costs:[new ir({amount:this.houseService.getGroups(Ee.socket).length,name:"Circuit breaker",sizeOrVersion:"10A - 240v",price:10}),new ir({amount:Math.ceil(this.houseService.getGroups(Ee.socket).length/4),name:"Group Circuit breaker",sizeOrVersion:"240v",price:80}),this.houseService.getT(De,["sensorType"],i=>({name:"Power socket",sizeOrVersion:"230v",price:20}),i=>i.sensorType===Ee.socket),this.houseService.getT(De,["sensorType"],i=>({name:"Electric wires",sizeOrVersion:"2.5mm2 230v",price:2,unit:"m"}),i=>[Ee.socket].includes(i.sensorType),!1),this.houseService.getT(De,[],i=>({name:"Ethernet cable",sizeOrVersion:"CAT6",price:.6,unit:"m"}),i=>[Ee.ethernet,Ee.poe].includes(i.sensorType),!1)]}}getPreps(){return{name:"preps",alias:"Preparations",costs:[new ir({name:"Ground prep",price:9e3}),new ir({name:"Constructions calculations",price:3e3}),new ir({name:"PassivHaus Certification",price:3e3}),new ir({name:"Utilities connections /fees",price:15e3}),new ir({name:"Tool rental",price:3e3})]}}getConstruction(){return{name:"construction",alias:"Construction",costs:[new ir({name:"foundation",price:9e3}),new ir({name:"footer",price:9e3}),new ir({name:"Concrete prefab floor",price:32e3}),new ir({name:"Studs",price:1e4}),new ir({name:"OSB",price:1e4})]}}getBathroom(){return{name:"bathroom",alias:"Bathroom",costs:[new ir({name:"Complete kitchen",price:9e3})]}}getKitchen(){return{name:"kitchen",alias:"Kitchen",costs:[new ir({name:"Complete kitchen",price:9e3})]}}getOpenings(){return{name:"openings",alias:"Openings",costs:[this.houseService.getT(vi,["outside"],i=>({name:"Door",sizeOrVersion:`230x${i.width}`,price:i.outside?600:200,unit:"#",other:i.outside?"Outer door":"Inner door"})),this.houseService.getT(Oi,["width","height","windowForm"],i=>({name:"Window",sizeOrVersion:`${i.height}x${i.width}`,price:800*i.width,other:`${i.windowForm}`}),i=>![Zc.windowWall].includes(i.windowForm)),this.houseService.getT(Oi,["width","height","windowForm"],i=>({name:"Window wall",sizeOrVersion:`${i.height}x${i.width}`,price:6e4,other:"main window wall"}),i=>[Zc.windowWall].includes(i.windowForm))]}}getTotals(){return{name:"total",alias:"Total",costs:[...this.tables,...this.hiddenTables].flatMap(e=>new ir({price:$l(e.costs.filter(i=>void 0!==i).map(i=>i.calcPrice)),name:e.alias}))}}}return n.\u0275fac=function(e){return new(e||n)(M(rr))},n.\u0275cmp=ft({type:n,selectors:[["app-page-costs"]],decls:10,vars:2,consts:[[4,"ngFor","ngForOf"],["simple",""],[3,"data"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"],[4,"ngIf"]],template:function(e,i){1&e&&(S(0,"h1"),k(1,"Smart home"),T(),S(2,"p"),k(3," something about totals\n"),T(),Ge(4,DPe,2,4,"ng-container",0),Ge(5,IPe,3,3,"ng-template",null,1,Wa),S(7,"h2"),k(8,"totals"),T(),ae(9,"app-table",2)),2&e&&($(4),Z("ngForOf",i.tables),$(5),Z("data",i.totals))},directives:[ad,mN,Ys,EPe],styles:["[_nghost-%COMP%]{max-width:900px;display:block;margin:0 auto;padding:0 32px}app-table[_ngcontent-%COMP%]{margin:32px 0 64px;display:block}  #table-total .mat-column-sizeOrVersion,   #table-total .mat-column-other,   #table-total .mat-column-calcAmount,   #table-total .mat-column-calcAmount,   #table-total .mat-column-price{color:#0000}"]}),n})()},{path:"",component:C1e,children:[{path:"",component:L1e},{path:"stairs",component:N1e},{path:"facade",component:V1e},{path:"installations",component:H1e},{path:"construction",component:B1e},{path:"wired",component:vPe}]},{path:"**",redirectTo:"",pathMatch:"full"}];let OPe=(()=>{class n{constructor(e){e.addSvgIconSet("material-icons-outlined")}}return n.\u0275fac=function(e){return new(e||n)(ee(i_))},n.\u0275mod=at({type:n,bootstrap:[ode]}),n.\u0275inj=st({providers:[zE],imports:[[IN,kre,wpe,Wme,lle,yue.forRoot(kPe)]]}),n})();(function tJ(){H2=!1})(),lte().bootstrapModule(OPe).catch(n=>console.error(n))},402:function(Lm){Lm.exports=function(){"use strict";function Fm(re,de,Ie,ot,ct){!function rt(mt,Jt,wn,rn,ei){for(;rn>wn;){if(rn-wn>600){var On=rn-wn+1,Ei=Jt-wn+1,Hu=Math.log(On),Xo=.5*Math.exp(2*Hu/3),cs=.5*Math.sqrt(Hu*Xo*(On-Xo)/On)*(Ei-On/2<0?-1:1);rt(mt,Jt,Math.max(wn,Math.floor(Jt-Ei*Xo/On+cs)),Math.min(rn,Math.floor(Jt+(On-Ei)*Xo/On+cs)),ei)}var Mn=mt[Jt],Tc=wn,Ns=rn;for(Oa(mt,wn,Jt),ei(mt[rn],Mn)>0&&Oa(mt,wn,rn);Tc<Ns;){for(Oa(mt,Tc,Ns),Tc++,Ns--;ei(mt[Tc],Mn)<0;)Tc++;for(;ei(mt[Ns],Mn)>0;)Ns--}0===ei(mt[wn],Mn)?Oa(mt,wn,Ns):Oa(mt,++Ns,rn),Ns<=Jt&&(wn=Ns+1),Jt<=Ns&&(rn=Ns-1)}}(re,de,Ie||0,ot||re.length-1,ct||ln)}function Oa(re,de,Ie){var ot=re[de];re[de]=re[Ie],re[Ie]=ot}function ln(re,de){return re<de?-1:re>de?1:0}var Hn=function(re){void 0===re&&(re=9),this._maxEntries=Math.max(4,re),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Nm(re,de,Ie){if(!Ie)return de.indexOf(re);for(var ot=0;ot<de.length;ot++)if(Ie(re,de[ot]))return ot;return-1}function qo(re,de){Jn(re,0,re.children.length,de,re)}function Jn(re,de,Ie,ot,ct){ct||(ct=Ec(null)),ct.minX=1/0,ct.minY=1/0,ct.maxX=-1/0,ct.maxY=-1/0;for(var rt=de;rt<Ie;rt++){var mt=re.children[rt];Cc(ct,re.leaf?ot(mt):mt)}return ct}function Cc(re,de){return re.minX=Math.min(re.minX,de.minX),re.minY=Math.min(re.minY,de.minY),re.maxX=Math.max(re.maxX,de.maxX),re.maxY=Math.max(re.maxY,de.maxY),re}function ey(re,de){return re.minX-de.minX}function ty(re,de){return re.minY-de.minY}function Yo(re){return(re.maxX-re.minX)*(re.maxY-re.minY)}function ml(re){return re.maxX-re.minX+(re.maxY-re.minY)}function Nh(re,de){return re.minX<=de.minX&&re.minY<=de.minY&&de.maxX<=re.maxX&&de.maxY<=re.maxY}function Sc(re,de){return de.minX<=re.maxX&&de.minY<=re.maxY&&de.maxX>=re.minX&&de.maxY>=re.minY}function Ec(re){return{children:re,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ny(re,de,Ie,ot,ct){for(var rt=[de,Ie];rt.length;)if(!((Ie=rt.pop())-(de=rt.pop())<=ot)){var mt=de+Math.ceil((Ie-de)/ot/2)*ot;Fm(re,mt,de,Ie,ct),rt.push(de,mt,mt,Ie)}}return Hn.prototype.all=function(){return this._all(this.data,[])},Hn.prototype.search=function(re){var de=this.data,Ie=[];if(!Sc(re,de))return Ie;for(var ot=this.toBBox,ct=[];de;){for(var rt=0;rt<de.children.length;rt++){var mt=de.children[rt],Jt=de.leaf?ot(mt):mt;Sc(re,Jt)&&(de.leaf?Ie.push(mt):Nh(re,Jt)?this._all(mt,Ie):ct.push(mt))}de=ct.pop()}return Ie},Hn.prototype.collides=function(re){var de=this.data;if(!Sc(re,de))return!1;for(var Ie=[];de;){for(var ot=0;ot<de.children.length;ot++){var ct=de.children[ot],rt=de.leaf?this.toBBox(ct):ct;if(Sc(re,rt)){if(de.leaf||Nh(re,rt))return!0;Ie.push(ct)}}de=Ie.pop()}return!1},Hn.prototype.load=function(re){if(!re||!re.length)return this;if(re.length<this._minEntries){for(var de=0;de<re.length;de++)this.insert(re[de]);return this}var Ie=this._build(re.slice(),0,re.length-1,0);if(this.data.children.length)if(this.data.height===Ie.height)this._splitRoot(this.data,Ie);else{if(this.data.height<Ie.height){var ot=this.data;this.data=Ie,Ie=ot}this._insert(Ie,this.data.height-Ie.height-1,!0)}else this.data=Ie;return this},Hn.prototype.insert=function(re){return re&&this._insert(re,this.data.height-1),this},Hn.prototype.clear=function(){return this.data=Ec([]),this},Hn.prototype.remove=function(re,de){if(!re)return this;for(var Ie,ot,ct,rt=this.data,mt=this.toBBox(re),Jt=[],wn=[];rt||Jt.length;){if(rt||(rt=Jt.pop(),ot=Jt[Jt.length-1],Ie=wn.pop(),ct=!0),rt.leaf){var rn=Nm(re,rt.children,de);if(-1!==rn)return rt.children.splice(rn,1),Jt.push(rt),this._condense(Jt),this}ct||rt.leaf||!Nh(rt,mt)?ot?(Ie++,rt=ot.children[Ie],ct=!1):rt=null:(Jt.push(rt),wn.push(Ie),Ie=0,ot=rt,rt=rt.children[0])}return this},Hn.prototype.toBBox=function(re){return re},Hn.prototype.compareMinX=function(re,de){return re.minX-de.minX},Hn.prototype.compareMinY=function(re,de){return re.minY-de.minY},Hn.prototype.toJSON=function(){return this.data},Hn.prototype.fromJSON=function(re){return this.data=re,this},Hn.prototype._all=function(re,de){for(var Ie=[];re;)re.leaf?de.push.apply(de,re.children):Ie.push.apply(Ie,re.children),re=Ie.pop();return de},Hn.prototype._build=function(re,de,Ie,ot){var ct,rt=Ie-de+1,mt=this._maxEntries;if(rt<=mt)return qo(ct=Ec(re.slice(de,Ie+1)),this.toBBox),ct;ot||(ot=Math.ceil(Math.log(rt)/Math.log(mt)),mt=Math.ceil(rt/Math.pow(mt,ot-1))),(ct=Ec([])).leaf=!1,ct.height=ot;var Jt=Math.ceil(rt/mt),wn=Jt*Math.ceil(Math.sqrt(mt));ny(re,de,Ie,wn,this.compareMinX);for(var rn=de;rn<=Ie;rn+=wn){var ei=Math.min(rn+wn-1,Ie);ny(re,rn,ei,Jt,this.compareMinY);for(var On=rn;On<=ei;On+=Jt){var Ei=Math.min(On+Jt-1,ei);ct.children.push(this._build(re,On,Ei,ot-1))}}return qo(ct,this.toBBox),ct},Hn.prototype._chooseSubtree=function(re,de,Ie,ot){for(;ot.push(de),!de.leaf&&ot.length-1!==Ie;){for(var ct=1/0,rt=1/0,mt=void 0,Jt=0;Jt<de.children.length;Jt++){var wn=de.children[Jt],rn=Yo(wn),ei=(On=re,Ei=wn,(Math.max(Ei.maxX,On.maxX)-Math.min(Ei.minX,On.minX))*(Math.max(Ei.maxY,On.maxY)-Math.min(Ei.minY,On.minY))-rn);ei<rt?(rt=ei,ct=rn<ct?rn:ct,mt=wn):ei===rt&&rn<ct&&(ct=rn,mt=wn)}de=mt||de.children[0]}var On,Ei;return de},Hn.prototype._insert=function(re,de,Ie){var ot=Ie?re:this.toBBox(re),ct=[],rt=this._chooseSubtree(ot,this.data,de,ct);for(rt.children.push(re),Cc(rt,ot);de>=0&&ct[de].children.length>this._maxEntries;)this._split(ct,de),de--;this._adjustParentBBoxes(ot,ct,de)},Hn.prototype._split=function(re,de){var Ie=re[de],ot=Ie.children.length,ct=this._minEntries;this._chooseSplitAxis(Ie,ct,ot);var rt=this._chooseSplitIndex(Ie,ct,ot),mt=Ec(Ie.children.splice(rt,Ie.children.length-rt));mt.height=Ie.height,mt.leaf=Ie.leaf,qo(Ie,this.toBBox),qo(mt,this.toBBox),de?re[de-1].children.push(mt):this._splitRoot(Ie,mt)},Hn.prototype._splitRoot=function(re,de){this.data=Ec([re,de]),this.data.height=re.height+1,this.data.leaf=!1,qo(this.data,this.toBBox)},Hn.prototype._chooseSplitIndex=function(re,de,Ie){for(var ot,ct,rt,mt,Jt,wn,rn,ei=1/0,On=1/0,Ei=de;Ei<=Ie-de;Ei++){var Hu=Jn(re,0,Ei,this.toBBox),Xo=Jn(re,Ei,Ie,this.toBBox),cs=(ct=Hu,rt=Xo,void 0,void 0,void 0,void 0,mt=Math.max(ct.minX,rt.minX),Jt=Math.max(ct.minY,rt.minY),wn=Math.min(ct.maxX,rt.maxX),rn=Math.min(ct.maxY,rt.maxY),Math.max(0,wn-mt)*Math.max(0,rn-Jt)),Uu=Yo(Hu)+Yo(Xo);cs<ei?(ei=cs,ot=Ei,On=Uu<On?Uu:On):cs===ei&&Uu<On&&(On=Uu,ot=Ei)}return ot||Ie-de},Hn.prototype._chooseSplitAxis=function(re,de,Ie){var ot=re.leaf?this.compareMinX:ey,ct=re.leaf?this.compareMinY:ty;this._allDistMargin(re,de,Ie,ot)<this._allDistMargin(re,de,Ie,ct)&&re.children.sort(ot)},Hn.prototype._allDistMargin=function(re,de,Ie,ot){re.children.sort(ot);for(var ct=this.toBBox,rt=Jn(re,0,de,ct),mt=Jn(re,Ie-de,Ie,ct),Jt=ml(rt)+ml(mt),wn=de;wn<Ie-de;wn++){var rn=re.children[wn];Cc(rt,re.leaf?ct(rn):rn),Jt+=ml(rt)}for(var ei=Ie-de-1;ei>=de;ei--){var On=re.children[ei];Cc(mt,re.leaf?ct(On):On),Jt+=ml(mt)}return Jt},Hn.prototype._adjustParentBBoxes=function(re,de,Ie){for(var ot=Ie;ot>=0;ot--)Cc(de[ot],re)},Hn.prototype._condense=function(re){for(var de=re.length-1,Ie=void 0;de>=0;de--)0===re[de].children.length?de>0?(Ie=re[de-1].children).splice(Ie.indexOf(re[de]),1):this.clear():qo(re[de],this.toBBox)},Hn}()}},Lm=>{Lm(Lm.s=359)}]);