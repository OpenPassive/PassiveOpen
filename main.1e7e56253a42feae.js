(self.webpackChunkpassiveopen=self.webpackChunkpassiveopen||[]).push([[179],{5040:(Ut,nt,Se)=>{"use strict";function ue(n){return"function"==typeof n}function Ee(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ne=Ee(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ze(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Re{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ue(i))try{i()}catch(s){e=s instanceof Ne?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{ct(s)}catch(o){e=e??[],o instanceof Ne?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ne(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ct(e);else{if(e instanceof Re){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ze(t,e)}remove(e){const{_finalizers:t}=this;t&&ze(t,e),e instanceof Re&&e._removeParent(this)}}Re.EMPTY=(()=>{const n=new Re;return n.closed=!0,n})();const Ie=Re.EMPTY;function We(n){return n instanceof Re||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function ct(n){ue(n)?n():n.unsubscribe()}const ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Gt={setTimeout(n,e,...t){const{delegate:i}=Gt;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Gt;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ct(n){Gt.setTimeout(()=>{const{onUnhandledError:e}=ft;if(!e)throw n;e(n)})}function st(){}const yt=Ye("C",void 0,void 0);function Ye(n,e,t){return{kind:n,value:e,error:t}}let j=null;function X(n){if(ft.useDeprecatedSynchronousErrorHandling){const e=!j;if(e&&(j={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=j;if(j=null,t)throw i}}else n()}class we extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,We(e)&&e.add(this)):this.destination=oe}static create(e,t,i){return new $(e,t,i)}next(e){this.isStopped?He(function Ve(n){return Ye("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?He(function Xt(n){return Ye("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?He(yt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const J=Function.prototype.bind;function se(n,e){return J.call(n,e)}class ce{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){je(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){je(i)}else je(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){je(t)}}}class $ extends we{constructor(e,t,i){let r;if(super(),ue(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&ft.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&se(e.next,s),error:e.error&&se(e.error,s),complete:e.complete&&se(e.complete,s)}):r=e}this.destination=new ce(r)}}function je(n){ft.useDeprecatedSynchronousErrorHandling?function Y(n){ft.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=n)}(n):Ct(n)}function He(n,e){const{onStoppedNotification:t}=ft;t&&Gt.setTimeout(()=>t(n,e))}const oe={closed:!0,next:st,error:function Be(n){throw n},complete:st},Pt="function"==typeof Symbol&&Symbol.observable||"@@observable";function At(n){return n}function Ke(n){return 0===n.length?At:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function _e(n){return n&&n instanceof we||function rt(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}(n)&&We(n)}(t)?t:new $(t,i,r);return X(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Qe(i))((r,s)=>{const o=new $({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Pt](){return this}pipe(...t){return Ke(t)(this)}toPromise(t){return new(t=Qe(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Qe(n){var e;return null!==(e=n??ft.Promise)&&void 0!==e?e:Promise}const St=Ee(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Je=(()=>{class n extends be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new nn(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new St}next(t){X(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){X(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){X(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Ie:(this.currentObservers=null,s.push(t),new Re(()=>{this.currentObservers=null,ze(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new be;return t.source=this,t}}return n.create=(e,t)=>new nn(e,t),n})();class nn extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Ie}}function vt(n){return ue(n?.lift)}function xn(n){return e=>{if(vt(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function _n(n,e,t,i,r){return new li(n,e,t,i,r)}class li extends we{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function qt(n,e){return xn((t,i)=>{let r=0;t.subscribe(_n(i,s=>{i.next(n.call(e,s,r++))}))})}function Mt(n){return this instanceof Mt?(this.v=n,this):new Mt(n)}function bi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){i[p]&&(r[p]=function(g){return new Promise(function(_,y){s.push([p,g,_,y])>1||a(p,g)})})}function a(p,g){try{!function c(p){p.value instanceof Mt?Promise.resolve(p.value.v).then(l,u):f(s[0][2],p)}(i[p](g))}catch(_){f(s[0][3],_)}}function l(p){a("next",p)}function u(p){a("throw",p)}function f(p,g){p(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function yn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Le(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}const Io=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Sa(n){return ue(n?.then)}function Cs(n){return ue(n[Pt])}function q1(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function $o(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const O2=function rn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function uc(n){return ue(n?.[O2])}function Fi(n){return bi(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Mt(t.read());if(r)return yield Mt(void 0);yield yield Mt(i)}}finally{t.releaseLock()}})}function Jc(n){return ue(n?.getReader)}function po(n){if(n instanceof be)return n;if(null!=n){if(Cs(n))return function gl(n){return new be(e=>{const t=n[Pt]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Io(n))return function ou(n){return new be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Sa(n))return function Om(n){return new be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ct)})}(n);if(q1(n))return Lr(n);if(uc(n))return function qf(n){return new be(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Jc(n))return function _2(n){return Lr(Fi(n))}(n)}throw $o(n)}function Lr(n){return new be(e=>{(function au(n,e){var t,i,r,s;return function it(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(f){o(f)}}function c(u){try{l(i.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=yn(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ka(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function xi(n,e,t=1/0){return ue(e)?xi((i,r)=>qt((s,o)=>e(i,s,r,o))(po(n(i,r))),t):("number"==typeof e&&(t=e),xn((i,r)=>function Yl(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,f=!1;const p=()=>{f&&!c.length&&!l&&e.complete()},g=y=>l<i?_(y):c.push(y),_=y=>{s&&e.next(y),l++;let w=!1;po(t(y,u++)).subscribe(_n(e,C=>{r?.(C),s?g(C):e.next(C)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<i;){const C=c.shift();o?ka(e,o,()=>_(C)):_(C)}p()}catch(C){e.error(C)}}))};return n.subscribe(_n(e,g,()=>{f=!0,p()})),()=>{a?.()}}(i,r,n,t)))}function n1(n=1/0){return xi(At,n)}const Pa=new be(n=>n.complete());function R3(n){return n&&ue(n.schedule)}function y1(n){return n[n.length-1]}function a0(n){return ue(y1(n))?n.pop():void 0}function w1(n){return R3(y1(n))?n.pop():void 0}function Co(n,e=0){return xn((t,i)=>{t.subscribe(_n(i,r=>ka(i,n,()=>i.next(r),e),()=>ka(i,n,()=>i.complete(),e),r=>ka(i,n,()=>i.error(r),e)))})}function go(n,e=0){return xn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Zl(n,e){if(!n)throw new Error("Iterable cannot be null");return new be(t=>{ka(t,e,()=>{const i=n[Symbol.asyncIterator]();ka(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function fs(n,e){return e?function kc(n,e){if(null!=n){if(Cs(n))return function gh(n,e){return po(n).pipe(go(e),Co(e))}(n,e);if(Io(n))return function w2(n,e){return new be(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Sa(n))return function hc(n,e){return po(n).pipe(go(e),Co(e))}(n,e);if(q1(n))return Zl(n,e);if(uc(n))return function qo(n,e){return new be(t=>{let i;return ka(t,e,()=>{i=n[O2](),ka(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>ue(i?.return)&&i.return()})}(n,e);if(Jc(n))return function N2(n,e){return Zl(Fi(n),e)}(n,e)}throw $o(n)}(n,e):po(n)}function e2(...n){const e=w1(n),t=function N6(n,e){return"number"==typeof y1(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?po(i[0]):n1(t)(fs(i,e)):Pa}function F3(n={}){const{connector:e=(()=>new Je),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),o=c=void 0,u=f=!1},_=()=>{const y=o;g(),y?.unsubscribe()};return xn((y,w)=>{l++,!f&&!u&&p();const C=c=c??e();w.add(()=>{l--,0===l&&!f&&!u&&(a=ml(_,r))}),C.subscribe(w),!o&&l>0&&(o=new $({next:x=>C.next(x),error:x=>{f=!0,p(),a=ml(g,t,x),C.error(x)},complete:()=>{u=!0,p(),a=ml(g,i),C.complete()}}),po(y).subscribe(o))})(s)}}function ml(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new $({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function ks(n){for(let e in n)if(n[e]===ks)return e;throw Error("Could not find renamed property on target object.")}function mo(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function lo(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(lo).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function fc(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const c0=ks({__forward_ref__:ks});function pr(n){return n.__forward_ref__=pr,n.toString=function(){return lo(this())},n}function Ln(n){return C1(n)?n():n}function C1(n){return"function"==typeof n&&n.hasOwnProperty(c0)&&n.__forward_ref__===pr}class Kt extends Error{constructor(e,t){super(function qi(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function nr(n){return"string"==typeof n?n:null==n?"":String(n)}function k3(n,e){throw new Kt(-201,!1)}function dc(n,e){null==n&&function hr(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Lt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}const cu=Lt;function wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function s1(n){return r2(n,bo)||r2(n,Js)}function r2(n,e){return n.hasOwnProperty(e)?n[e]:null}function P3(n){return n&&(n.hasOwnProperty(Jf)||n.hasOwnProperty(Xo))?n[Jf]:null}const bo=ks({\u0275prov:ks}),Jf=ks({\u0275inj:ks}),Js=ks({ngInjectableDef:ks}),Xo=ks({ngInjectorDef:ks});var zn=(()=>((zn=zn||{})[zn.Default=0]="Default",zn[zn.Host=1]="Host",zn[zn.Self=2]="Self",zn[zn.SkipSelf=4]="SkipSelf",zn[zn.Optional=8]="Optional",zn))();let u0;function K1(n){const e=u0;return u0=n,e}function V6(n,e,t){const i=s1(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&zn.Optional?null:void 0!==e?e:void k3(lo(n))}function vo(n){return{toString:n}.toString()}var Ha=(()=>((Ha=Ha||{})[Ha.OnPush=0]="OnPush",Ha[Ha.Default=1]="Default",Ha))(),Yo=(()=>{return(n=Yo||(Yo={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Yo;var n})();const bs=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),lu={},Hr=[],o1=ks({\u0275cmp:ks}),s2=ks({\u0275dir:ks}),t3=ks({\u0275pipe:ks}),h0=ks({\u0275mod:ks}),wl=ks({\u0275fac:ks}),f0=ks({__NG_ELEMENT_ID__:ks});let Dr=0;function Bn(n){return vo(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ha.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Hr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Yo.Emulated,id:"c"+Dr++,styles:n.styles||Hr,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return r.inputs=w4(n.inputs,i),r.outputs=w4(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(d0).filter(pc):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Y1).filter(pc):null,r})}function d0(n){return ir(n)||ia(n)}function pc(n){return null!==n}function oi(n){return vo(()=>({type:n.type,bootstrap:n.bootstrap||Hr,declarations:n.declarations||Hr,imports:n.imports||Hr,exports:n.exports||Hr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function w4(n,e){if(null==n)return lu;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const ht=Bn;function b1(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function ir(n){return n[o1]||null}function ia(n){return n[s2]||null}function Y1(n){return n[t3]||null}function Li(n,e){const t=n[h0]||null;if(!t&&!0===e)throw new Error(`Type ${lo(n)} does not have '\u0275mod' property.`);return t}function zs(n){return Array.isArray(n)&&"object"==typeof n[1]}function Bo(n){return Array.isArray(n)&&!0===n[1]}function S1(n){return 0!=(8&n.flags)}function p0(n){return 2==(2&n.flags)}function n3(n){return 1==(1&n.flags)}function ga(n){return null!==n.template}function bl(n){return 0!=(256&n[2])}function c1(n,e){return n.hasOwnProperty(wl)?n[wl]:null}class fu{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function wr(){return W2}function W2(n){return n.type.prototype.ngOnChanges&&(n.setInput=wp),Ro}function Ro(){const n=l1(this),e=n?.current;if(e){const t=n.previous;if(t===lu)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function wp(n,e,t,i){const r=l1(n)||function V3(n,e){return n[N3]=e}(n,{previous:lu,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],c=o[a];s[a]=new fu(c&&c.currentValue,e,o===lu),n[i]=e}wr.ngInherit=!0;const N3="__ngSimpleChanges__";function l1(n){return n[N3]||null}function oa(n){for(;Array.isArray(n);)n=n[0];return n}function c2(n,e){return oa(e[n])}function S2(n,e){return oa(e[n.index])}function W6(n,e){return n.data[e]}function U3(n,e){return n[e]}function aa(n,e){const t=e[n];return zs(t)?t:t[0]}function G3(n){return 64==(64&n[2])}function E2(n,e){return null==e?null:n[e]}function Q3(n){n[18]=0}function pu(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Ni={lFrame:Dy(null),bindingsEnabled:!0};function Z1(){return Ni.bindingsEnabled}function It(){return Ni.lFrame.lView}function Sr(){return Ni.lFrame.tView}function ai(n){return Ni.lFrame.contextLView=n,n[8]}function h(n){return Ni.lFrame.contextLView=null,n}function d(){let n=m();for(;null!==n&&64===n.type;)n=n.parent;return n}function m(){return Ni.lFrame.currentTNode}function b(n,e){const t=Ni.lFrame;t.currentTNode=n,t.isParent=e}function B(){return Ni.lFrame.isParent}function z(){Ni.lFrame.isParent=!1}function pt(){const n=Ni.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function fn(){return Ni.lFrame.bindingIndex}function Fn(){return Ni.lFrame.bindingIndex++}function Zn(n){const e=Ni.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function u1(n,e){const t=Ni.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ml(e)}function Ml(n){Ni.lFrame.currentDirectiveIndex=n}function vh(n){const e=Ni.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function _h(){return Ni.lFrame.currentQueryIndex}function Um(n){Ni.lFrame.currentQueryIndex=n}function qT(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Gm(n,e,t){if(t&zn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&zn.Host||(r=qT(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ni.lFrame=Ly();return i.currentTNode=e,i.lView=n,!0}function Qm(n){const e=Ly(),t=n[1];Ni.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ly(){const n=Ni.lFrame,e=null===n?null:n.child;return null===e?Dy(n):e}function Dy(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Iy(){const n=Ni.lFrame;return Ni.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const By=Iy;function Wm(){const n=Iy();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Os(){return Ni.lFrame.selectedIndex}function _0(n){Ni.lFrame.selectedIndex=n}function Wa(){const n=Ni.lFrame;return W6(n.tView,n.selectedIndex)}function ko(){Ni.lFrame.currentNamespace="svg"}function xp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Mp(n,e,t){$m(n,e,3,t)}function Sp(n,e,t,i){(3&n[2])===t&&$m(n,e,t,i)}function jm(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function $m(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(si(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function si(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class $6{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Lp(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];Dp(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function w0(n){return 3===n||4===n||6===n}function Dp(n){return 64===n.charCodeAt(0)}function nd(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||ky(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function ky(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function Km(n){return-1!==n}function id(n){return 32767&n}function rd(n,e){let t=function Xm(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Ym=!0;function Ip(n){const e=Ym;return Ym=n,e}let eL=0;const S4={};function X6(n,e){const t=Jm(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,Zm(i.data,n),Zm(e,null),Zm(i.blueprint,null));const r=Y6(n,e),s=n.injectorIndex;if(Km(r)){const o=id(r),a=rd(r,e),c=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Zm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Jm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Y6(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Uy(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Bp(n,e,t){!function zy(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(f0)&&(i=t[f0]),null==i&&(i=t[f0]=eL++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function Oy(n,e,t){if(t&zn.Optional||void 0!==n)return n;k3()}function Fp(n,e,t,i){if(t&zn.Optional&&void 0===i&&(i=null),0==(t&(zn.Self|zn.Host))){const r=n[9],s=K1(void 0);try{return r?r.get(e,i,t&zn.Optional):V6(e,i,t&zn.Optional)}finally{K1(s)}}return Oy(i,0,t)}function kp(n,e,t,i=zn.Default,r){if(null!==n){if(1024&e[2]){const o=function tL(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=eA(s,o,t,i|zn.Self,S4);if(a!==S4)return a;let c=s.parent;if(!c){const l=o[21];if(l){const u=l.get(t,S4,i);if(u!==S4)return u}c=Uy(o),o=o[15]}s=c}return r}(n,e,t,i,S4);if(o!==S4)return o}const s=eA(n,e,t,i,S4);if(s!==S4)return s}return Fp(e,t,i,r)}function eA(n,e,t,i,r){const s=function tA(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(f0)?n[f0]:void 0;return"number"==typeof e?e>=0?255&e:Vy:e}(t);if("function"==typeof s){if(!Gm(e,n,i))return i&zn.Host?Oy(r,0,i):Fp(e,t,i,r);try{const o=s(i);if(null!=o||i&zn.Optional)return o;k3()}finally{By()}}else if("number"==typeof s){let o=null,a=Jm(n,e),c=-1,l=i&zn.Host?e[16][6]:null;for((-1===a||i&zn.SkipSelf)&&(c=-1===a?Y6(n,e):e[a+8],-1!==c&&nA(i,!1)?(o=e[1],a=id(c),e=rd(c,e)):a=-1);-1!==a;){const u=e[1];if(Hp(s,a,u.data)){const f=Ny(a,e,t,o,i,l);if(f!==S4)return f}c=e[a+8],-1!==c&&nA(i,e[1].data[a+8]===l)&&Hp(s,a,e)?(o=u,a=id(c),e=rd(c,e)):a=-1}}return r}function Ny(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=Pp(a,o,t,null==i?p0(a)&&Ym:i!=o&&0!=(3&a.type),r&zn.Host&&s===a);return null!==u?sd(e,o,u,a):S4}function Pp(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,p=r?a+u:n.directiveEnd;for(let g=i?a:a+u;g<p;g++){const _=o[g];if(g<c&&t===_||g>=c&&_.type===t)return g}if(r){const g=o[c];if(g&&ga(g)&&g.type===t)return c}return null}function sd(n,e,t,i){let r=n[t];const s=e.data;if(function qm(n){return n instanceof $6}(r)){const o=r;o.resolving&&function Kf(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Kt(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Ps(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():nr(n)}(s[t]));const a=Ip(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?K1(o.injectImpl):null;Gm(n,i,zn.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function JT(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=W2(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&K1(c),Ip(a),o.resolving=!1,By()}}return r}function Hp(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function nA(n,e){return!(n&zn.Self||n&zn.Host&&e)}class yh{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return kp(this._tNode,this._lView,e,i,t)}}function Vy(){return new yh(d(),It())}function On(n){return vo(()=>{const e=n.prototype.constructor,t=e[wl]||Z6(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[wl]||Z6(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Z6(n){return C1(n)?()=>{const e=Z6(Ln(n));return e&&e()}:c1(n)}function Uy(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function s3(n){return function Rp(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(w0(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(d(),n)}const C0="__parameters__";function ad(n,e,t){return vo(()=>{const i=function iA(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const f=c.hasOwnProperty(C0)?c[C0]:Object.defineProperty(c,C0,{value:[]})[C0];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Rt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Lt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Sl(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Sl(i,e)):e!==n&&e.push(i)}return e}function mu(n,e){n.forEach(t=>Array.isArray(t)?mu(t,e):e(t))}function Wy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function zp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function t8(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function El(n,e,t){let i=cd(n,e);return i>=0?n[1|i]=t:(i=~i,function $y(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function sA(n,e){const t=cd(n,e);if(t>=0)return n[1|t]}function cd(n,e){return function n8(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const ld={},lA="__NG_DI_FLAG__",Op="ngTempTokenPath",ud=/\n/gm,r8="__source";let s8;function hd(n){const e=s8;return s8=n,e}function lL(n,e=zn.Default){if(void 0===s8)throw new Kt(-203,!1);return null===s8?V6(n,void 0,e):s8.get(n,e&zn.Optional?null:void 0,e)}function Xe(n,e=zn.Default){return(function Vm(){return u0}()||lL)(Ln(n),e)}function xs(n,e=zn.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),Xe(n,e)}function Np(n){const e=[];for(let t=0;t<n.length;t++){const i=Ln(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Kt(900,!1);let r,s=zn.Default;for(let o=0;o<i.length;o++){const a=i[o],c=fA(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(Xe(r,s))}else e.push(Xe(i))}return e}function fd(n,e){return n[lA]=e,n.prototype[lA]=e,n}function fA(n){return n[lA]}const o3=fd(ad("Optional"),8),b0=fd(ad("SkipSelf"),4);let gA,Gp,Qp;function gd(n){return function h8(){if(void 0===Gp&&(Gp=null,bs.trustedTypes))try{Gp=bs.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gp}()?.createHTML(n)||n}function Wp(n){return function f8(){if(void 0===Qp&&(Qp=null,bs.trustedTypes))try{Qp=bs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qp}()?.createHTML(n)||n}class Mh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class uw extends Mh{getTypeName(){return"HTML"}}class gL extends Mh{getTypeName(){return"Style"}}class mL extends Mh{getTypeName(){return"Script"}}class AL extends Mh{getTypeName(){return"URL"}}class vL extends Mh{getTypeName(){return"ResourceURL"}}function Tl(n){return n instanceof Mh?n.changingThisBreaksApplicationSecurity:n}function a3(n,e){const t=function _L(n){return n instanceof Mh&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class wL{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(gd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class to{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=gd(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=gd(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const $p=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function qp(n){return(n=String(n)).match($p)?n:"unsafe:"+n}function c3(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function d8(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const p8=c3("area,br,col,hr,img,wbr"),hw=c3("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fw=c3("rp,rt"),vA=d8(p8,d8(hw,c3("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),d8(fw,c3("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),d8(fw,hw)),Kp=c3("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_A=d8(Kp,c3("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),c3("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ML=c3("script,style,template");class pw{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!vA.hasOwnProperty(t))return this.sanitizedSomething=!0,!ML.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!_A.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Kp[a]&&(c=qp(c)),this.buf.push(" ",o,'="',gw(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();vA.hasOwnProperty(t)&&!p8.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(gw(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const SL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,EL=/([^\#-~ |!])/g;function gw(n){return n.replace(/&/g,"&amp;").replace(SL,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(EL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Sh;function Dl(n,e){let t=null;try{Sh=Sh||function Ll(n){const e=new to(n);return function Aa(){try{return!!(new window.DOMParser).parseFromString(gd(""),"text/html")}catch{return!1}}()?new wL(e):e}(n);let i=e?String(e):"";t=Sh.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Sh.getInertBodyElement(i)}while(i!==s);return gd((new pw).sanitizeChildren(Xp(t)||t))}finally{if(t){const i=Xp(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Xp(n){return"content"in n&&function Yp(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var qs=(()=>((qs=qs||{})[qs.NONE=0]="NONE",qs[qs.HTML=1]="HTML",qs[qs.STYLE=2]="STYLE",qs[qs.SCRIPT=3]="SCRIPT",qs[qs.URL=4]="URL",qs[qs.RESOURCE_URL=5]="RESOURCE_URL",qs))();function j3(n){const e=m8();return e?Wp(e.sanitize(qs.HTML,n)||""):a3(n,"HTML")?Wp(Tl(n)):Dl(function cw(){return void 0!==gA?gA:typeof document<"u"?document:void 0}(),nr(n))}function wc(n){const e=m8();return e?e.sanitize(qs.URL,n)||"":a3(n,"URL")?Tl(n):qp(nr(n))}function m8(){const n=It();return n&&n[12]}const wA=new Rt("ENVIRONMENT_INITIALIZER"),Aw=new Rt("INJECTOR",-1),vw=new Rt("INJECTOR_DEF_TYPES");class _w{get(e,t=ld){if(t===ld){const i=new Error(`NullInjectorError: No provider for ${lo(e)}!`);throw i.name="NullInjectorError",i}return t}}function BL(...n){return{\u0275providers:yw(0,n)}}function yw(n,...e){const t=[],i=new Set;let r;return mu(e,s=>{const o=s;CA(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&ww(r,t),t}function ww(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];mu(r,s=>{e.push(s)})}}function CA(n,e,t,i){if(!(n=Ln(n)))return!1;let r=null,s=P3(n);const o=!s&&ir(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=P3(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)CA(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{mu(s.imports,u=>{CA(u,e,t,i)&&(l||(l=[]),l.push(u))})}finally{}void 0!==l&&ww(l,e)}if(!a){const l=c1(r)||(()=>new r);e.push({provide:r,useFactory:l,deps:Hr},{provide:vw,useValue:r,multi:!0},{provide:wA,useValue:()=>Xe(r),multi:!0})}const c=s.providers;null==c||a||mu(c,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}const RL=ks({provide:String,useValue:ks});function bA(n){return null!==n&&"object"==typeof n&&RL in n}function E(n){return"function"==typeof n}const D=new Rt("Set Injector scope."),L={},O={};let G;function re(){return void 0===G&&(G=new _w),G}class ye{}class Me extends ye{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hi(e,o=>this.processProvider(o)),this.records.set(Aw,Gn(void 0,this)),r.has("environment")&&this.records.set(ye,Gn(void 0,this));const s=this.records.get(D);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(vw.multi,Hr,zn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=hd(this),i=K1(void 0);try{return e()}finally{hd(t),K1(i)}}get(e,t=ld,i=zn.Default){this.assertNotDestroyed();const r=hd(this),s=K1(void 0);try{if(!(i&zn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function Cr(n){return"function"==typeof n||"object"==typeof n&&n instanceof Rt}(e)&&s1(e);a=c&&this.injectableDefInScope(c)?Gn(Ze(e),L):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&zn.Self?re():this.parent).get(e,t=i&zn.Optional&&t===ld?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Op]=o[Op]||[]).unshift(lo(e)),r)throw o;return function tw(n,e,t,i){const r=n[Op];throw e[r8]&&r.unshift(e[r8]),n.message=function nw(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=lo(e);if(Array.isArray(e))r=e.map(lo).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):lo(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(ud,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Op]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{K1(s),hd(r)}}resolveInjectorInitializers(){const e=hd(this),t=K1(void 0);try{const i=this.get(wA.multi,Hr,zn.Self);for(const r of i)r()}finally{hd(e),K1(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(lo(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Kt(205,!1)}processProvider(e){let t=E(e=Ln(e))?e:Ln(e&&e.provide);const i=function dt(n){return bA(n)?Gn(void 0,n.useValue):Gn(kt(n),L)}(e);if(E(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Gn(void 0,L,!0),r.factory=()=>Np(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===L&&(t.value=O,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Qn(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ln(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Ze(n){const e=s1(n),t=null!==e?e.factory:c1(n);if(null!==t)return t;if(n instanceof Rt)throw new Kt(204,!1);if(n instanceof Function)return function lt(n){const e=n.length;if(e>0)throw t8(e,"?"),new Kt(204,!1);const t=function yl(n){const e=n&&(n[bo]||n[Js]);if(e){const t=function e3(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Kt(204,!1)}function kt(n,e,t){let i;if(E(n)){const r=Ln(n);return c1(r)||Ze(r)}if(bA(n))i=()=>Ln(n.useValue);else if(function bw(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Np(n.deps||[]));else if(function Cw(n){return!(!n||!n.useExisting)}(n))i=()=>Xe(Ln(n.useExisting));else{const r=Ln(n&&(n.useClass||n.provide));if(!function Tn(n){return!!n.deps}(n))return c1(r)||Ze(r);i=()=>new r(...Np(n.deps))}return i}function Gn(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _i(n){return!!n.\u0275providers}function hi(n,e){for(const t of n)Array.isArray(t)?hi(t,e):_i(t)?hi(t.\u0275providers,e):e(t)}class br{}class Bs{resolveComponentFactory(e){throw function rr(n){const e=Error(`No component factory found for ${lo(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ui=(()=>{class n{}return n.NULL=new Bs,n})();function D1(){return J1(d(),It())}function J1(n,e){return new dn(S2(n,e))}let dn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=D1,n})();function xo(n){return n instanceof dn?n.nativeElement:n}class l3{}let ea=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function j2(){const n=It(),t=aa(d().index,n);return(zs(t)?t:n)[11]}(),n})(),Eh=(()=>{class n{}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:()=>null}),n})();class Oc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const M0=new Oc("14.2.2"),_u={};function PL(n){return n.ngOriginalError}class Dh{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&PL(e);for(;t&&PL(t);)t=PL(t);return t||null}}const HL=new Map;let z6e=0;const OL="__ngContext__";function $2(n,e){zs(e)?(n[OL]=e[20],function N6e(n){HL.set(n[20],n)}(e)):n[OL]=e}function NL(n){return n.ownerDocument.defaultView}function VL(n){return n.ownerDocument}function Ih(n){return n instanceof Function?n():n}var u3=(()=>((u3=u3||{})[u3.Important=1]="Important",u3[u3.DashCase=2]="DashCase",u3))();function GL(n,e){return undefined(n,e)}function MA(n){const e=n[3];return Bo(e)?e[3]:e}function QL(n){return yU(n[13])}function WL(n){return yU(n[4])}function yU(n){for(;null!==n&&!Bo(n);)n=n[4];return n}function Jp(n,e,t,i,r){if(null!=i){let s,o=!1;Bo(i)?s=i:zs(i)&&(o=!0,i=i[0]);const a=oa(i);0===n&&null!==t?null==r?SU(e,t,a):v8(e,t,a,r||null,!0):1===n&&null!==t?v8(e,t,a,r||null,!0):2===n?function RU(n,e,t){const i=xw(n,e);i&&function h8e(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function p8e(n,e,t,i,r){const s=t[7];s!==oa(t)&&Jp(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];SA(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function $L(n,e,t){return n.createElement(e,t)}function CU(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,pu(r,-1)),t.splice(i,1)}function qL(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&CU(r,i),e>0&&(n[t-1][4]=i[4]);const s=zp(n,10+e);!function i8e(n,e){SA(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function bU(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&SA(n,e,t,3,null,null),function o8e(n){let e=n[13];if(!e)return KL(n[1],n);for(;e;){let t=null;if(zs(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)zs(e)&&KL(e[1],e),e=e[3];null===e&&(e=n),zs(e)&&KL(e[1],e),t=e&&e[4]}e=t}}(e)}}function KL(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function u8e(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof $6)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function l8e(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):oa(e[o]),c=i[r=t[s+2]],l=t[s+3];"boolean"==typeof l?a.removeEventListener(t[s],c,l):l>=0?i[r=l]():i[r=-l].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Bo(e[3])){t!==e[3]&&CU(t,e);const i=e[19];null!==i&&i.detachView(n)}!function V6e(n){HL.delete(n[20])}(e)}}function xU(n,e,t){return function MU(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Yo.None||r===Yo.Emulated)return null}return S2(i,t)}(n,e.parent,t)}function v8(n,e,t,i,r){n.insertBefore(e,t,i,r)}function SU(n,e,t){n.appendChild(e,t)}function EU(n,e,t,i,r){null!==i?v8(n,e,t,i,r):SU(n,e,t)}function xw(n,e){return n.parentNode(e)}function TU(n,e,t){return DU(n,e,t)}let DU=function LU(n,e,t){return 40&n.type?S2(n,t):null};function Mw(n,e,t,i){const r=xU(n,i,e),s=e[11],a=TU(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)EU(s,r,t[c],a,!1);else EU(s,r,t,a,!1)}function Sw(n,e){if(null!==e){const t=e.type;if(3&t)return S2(e,n);if(4&t)return YL(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Sw(n,i);{const r=n[e.index];return Bo(r)?YL(-1,r):oa(r)}}if(32&t)return GL(e,n)()||oa(n[e.index]);{const i=BU(n,e);return null!==i?Array.isArray(i)?i[0]:Sw(MA(n[16]),i):Sw(n,e.next)}}return null}function BU(n,e){return null!==e?n[16][6].projection[e.projection]:null}function YL(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Sw(i,r)}return e[7]}function ZL(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&$2(oa(a),i),t.flags|=4),64!=(64&t.flags))if(8&c)ZL(n,e,t.child,i,r,s,!1),Jp(e,n,r,a,s);else if(32&c){const l=GL(t,i);let u;for(;u=l();)Jp(e,n,r,u,s);Jp(e,n,r,a,s)}else 16&c?FU(n,e,i,t,r,s):Jp(e,n,r,a,s);t=o?t.projectionNext:t.next}}function SA(n,e,t,i,r,s){ZL(t,i,n.firstChild,e,r,s,!1)}function FU(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Jp(e,n,r,c[l],s);else ZL(n,e,c,o[3],r,s,!0)}function kU(n,e,t){n.setAttribute(e,"style",t)}function JL(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function PU(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const HU="ng-template";function m8e(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==PU(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function zU(n){return 4===n.type&&n.value!==HU}function A8e(n,e,t){return e===(4!==n.type||t?n.value:HU)}function v8e(n,e,t){let i=4;const r=n.attrs||[],s=function w8e(n){for(let e=0;e<n.length;e++)if(w0(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!A8e(n,c,t)||""===c&&1===e.length){if(Cu(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!m8e(n.attrs,l,t)){if(Cu(i))return!1;o=!0}continue}const f=_8e(8&i?"class":c,r,zU(n),t);if(-1===f){if(Cu(i))return!1;o=!0;continue}if(""!==l){let p;p=f>s?"":r[f+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==PU(g,l,0)||2&i&&l!==p){if(Cu(i))return!1;o=!0}}}}else{if(!o&&!Cu(i)&&!Cu(c))return!1;if(o&&Cu(c))continue;o=!1,i=c|1&i}}return Cu(i)||o}function Cu(n){return 0==(1&n)}function _8e(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function C8e(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function OU(n,e,t=!1){for(let i=0;i<e.length;i++)if(v8e(n,e[i],t))return!0;return!1}function b8e(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function NU(n,e){return n?":not("+e.trim()+")":e}function x8e(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Cu(o)&&(e+=NU(s,r),r=""),i=o,s=s||!Cu(i);t++}return""!==r&&(e+=NU(s,r)),e}const mr={};function Z(n){VU(Sr(),It(),Os()+n,!1)}function VU(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Mp(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Sp(e,s,0,t)}_0(t)}function WU(n,e=null,t=null,i){const r=jU(n,e,t,i);return r.resolveInjectorInitializers(),r}function jU(n,e=null,t=null,i,r=new Set){const s=[t||Hr,BL(n)];return i=i||("object"==typeof n?void 0:lo(n)),new Me(s,e||re(),i||null,r)}let Cc=(()=>{class n{static create(t,i){if(Array.isArray(t))return WU({name:""},i,t,"");{const r=t.name??"";return WU({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=ld,n.NULL=new _w,n.\u0275prov=Lt({token:n,providedIn:"any",factory:()=>Xe(Aw)}),n.__NG_ELEMENT_ID__=-1,n})();function U(n,e=zn.Default){const t=It();return null===t?Xe(n,e):kp(d(),t,Ln(n),e)}function _8(){throw new Error("invalid")}function Tw(n,e){return n<<17|e<<2}function bu(n){return n>>17&32767}function rD(n){return 2|n}function Bh(n){return(131068&n)>>2}function sD(n,e){return-131069&n|e<<2}function oD(n){return 1|n}function lG(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Um(r),o.contentQueries(2,e[s],s)}}}function Iw(n,e,t,i,r,s,o,a,c,l,u){const f=e.blueprint.slice();return f[0]=r,f[2]=76|i,(null!==u||n&&1024&n[2])&&(f[2]|=1024),Q3(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=c||n&&n[12]||null,f[9]=l||n&&n[9]||null,f[6]=s,f[20]=function O6e(){return z6e++}(),f[21]=u,f[16]=2==e.type?n[16]:f,f}function t7(n,e,t,i,r){let s=n.data[e];if(null===s)s=function pD(n,e,t,i,r){const s=m(),o=B(),c=n.data[e]=function o5e(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),function zr(){return Ni.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function v(){const n=Ni.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return b(s,!0),s}function n7(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function gD(n,e,t){Qm(e);try{const i=n.viewQuery;null!==i&&bD(1,i,t);const r=n.template;null!==r&&uG(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&lG(n,e),n.staticViewQueries&&bD(2,n.viewQuery,t);const s=n.components;null!==s&&function i5e(n,e){for(let t=0;t<e.length;t++)C5e(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,Wm()}}function Bw(n,e,t,i){const r=e[2];if(128!=(128&r)){Qm(e);try{Q3(e),function Mn(n){return Ni.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&uG(n,e,t,2,i);const o=3==(3&r);if(o){const l=n.preOrderCheckHooks;null!==l&&Mp(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Sp(e,l,0,null),jm(e,0)}if(function y5e(n){for(let e=QL(n);null!==e;e=WL(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&pu(s,1),r[2]|=512}}}(e),function _5e(n){for(let e=QL(n);null!==e;e=WL(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];G3(i)&&Bw(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&lG(n,e),o){const l=n.contentCheckHooks;null!==l&&Mp(e,l)}else{const l=n.contentHooks;null!==l&&Sp(e,l,1),jm(e,1)}!function t5e(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)_0(~r);else{const s=r,o=t[++i],a=t[++i];u1(o,s),a(2,e[s])}}}finally{_0(-1)}}(n,e);const a=n.components;null!==a&&function n5e(n,e){for(let t=0;t<e.length;t++)w5e(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&bD(2,c,i),o){const l=n.viewCheckHooks;null!==l&&Mp(e,l)}else{const l=n.viewHooks;null!==l&&Sp(e,l,2),jm(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,pu(e[3],-1))}finally{Wm()}}}function uG(n,e,t,i,r){const s=Os(),o=2&i;try{_0(-1),o&&e.length>22&&VU(n,e,22,!1),t(i,r)}finally{_0(s)}}function hG(n,e,t){if(S1(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function mD(n,e,t){!Z1()||(function h5e(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||X6(t,e),$2(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=ga(c);l&&m5e(e,t,c);const u=sd(e,n,a,t);$2(u,e),null!==o&&A5e(0,a-r,u,c,0,o),l&&(aa(t.index,e)[8]=u)}}(n,e,t,S2(t,e)),128==(128&t.flags)&&function f5e(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function xl(){return Ni.lFrame.currentDirectiveIndex}();try{_0(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];Ml(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&vG(c,l)}}finally{_0(-1),Ml(o)}}(n,e,t))}function AD(n,e,t=S2){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function fG(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=vD(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function vD(n,e,t,i,r,s,o,a,c,l){const u=22+i,f=u+r,p=function r5e(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:mr);return t}(u,f),g="function"==typeof l?l():l;return p[1]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1}}function dG(n,e,t,i){const r=bG(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&xG(n).push(i,r.length-1))}function pG(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function gG(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,c=null;for(let l=e.directiveStart;l<i;l++){const u=r[l],f=u.inputs,p=null===s||zU(e)?null:v5e(f,s);o.push(p),a=pG(f,l,a),c=pG(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}function $3(n,e,t,i,r,s,o,a){const c=S2(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(xD(n,t,u,i,r),p0(e)&&mG(t,e.index)):3&e.type&&(i=function a5e(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function mG(n,e){const t=aa(e,n);16&t[2]||(t[2]|=32)}function _D(n,e,t,i){let r=!1;if(Z1()){const s=function d5e(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];OU(t,o.selectors,!1)&&(r||(r=[]),Bp(X6(t,e),n,o.type),ga(o)?(_G(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,yG(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const f=s[u];f.providersResolver&&f.providersResolver(f)}let a=!1,c=!1,l=n7(n,e,s.length,null);for(let u=0;u<s.length;u++){const f=s[u];t.mergedAttrs=nd(t.mergedAttrs,f.hostAttrs),wG(n,t,e,l,f),g5e(l,f,o),null!==f.contentQueries&&(t.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=128);const p=f.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),l++}gG(n,t)}o&&function p5e(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Kt(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=nd(t.mergedAttrs,t.attrs),r}function AG(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function u5e(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(i,r,o)}}function vG(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function _G(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function g5e(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ga(e)&&(t[""]=n)}}function yG(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function wG(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=c1(r.type)),o=new $6(s,ga(r),U);n.blueprint[i]=o,t[i]=o,AG(n,e,0,i,n7(n,t,r.hostVars,mr),r)}function m5e(n,e,t){const i=S2(e,n),r=fG(t),s=n[10],o=Rw(n,Iw(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}function E0(n,e,t,i,r,s){const o=S2(n,e);!function yD(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?nr(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function A5e(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],f=o[c++];null!==a?i.setInput(t,f,l,u):t[u]=f}}}function v5e(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function CG(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function w5e(n,e){const t=aa(e,n);if(G3(t)){const i=t[1];48&t[2]?Bw(i,t,i.template,t[8]):t[5]>0&&wD(t)}}function wD(n){for(let i=QL(n);null!==i;i=WL(i))for(let r=10;r<i.length;r++){const s=i[r];if(G3(s))if(512&s[2]){const o=s[1];Bw(o,s,o.template,s[8])}else s[5]>0&&wD(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=aa(t[i],n);G3(r)&&r[5]>0&&wD(r)}}function C5e(n,e){const t=aa(e,n),i=t[1];(function b5e(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),gD(i,t,t[8])}function Rw(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function CD(n){for(;n;){n[2]|=32;const e=MA(n);if(bl(n)&&!e)return n;n=e}return null}function Fw(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{Bw(n,e,n.template,t)}catch(o){throw i&&SG(e,o),o}finally{r.end&&r.end()}}function bD(n,e,t){Um(0),e(n,t)}function bG(n){return n[7]||(n[7]=[])}function xG(n){return n.cleanup||(n.cleanup=[])}function MG(n,e,t){return(null===n||ga(n))&&(t=function Qa(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function SG(n,e){const t=n[9],i=t?t.get(Dh,null):null;i&&i.handleError(e)}function xD(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,r,i,a):c[a]=r}}function Rh(n,e,t){const i=c2(e,n);!function wU(n,e,t){n.setValue(e,t)}(n[11],i,t)}function kw(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=fc(r,a):2==s&&(i=fc(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Pw(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(oa(s)),Bo(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1].firstChild;null!==l&&Pw(c[1],c,l,i)}const o=t.type;if(8&o)Pw(n,e,t.child,i);else if(32&o){const a=GL(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=BU(e,t);if(Array.isArray(a))i.push(...a);else{const c=MA(e[16]);Pw(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class EA{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Pw(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Bo(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(qL(e,i),zp(t,i))}this._attachedToViewContainer=!1}bU(this._lView[1],this._lView)}onDestroy(e){dG(this._lView[1],this._lView,null,e)}markForCheck(){CD(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Fw(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Kt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function s8e(n,e){SA(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Kt(902,!1);this._appRef=e}}class x5e extends EA{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Fw(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class MD extends Ui{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ir(e);return new TA(t,this.ngModule)}}function EG(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class S5e{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){const r=this.injector.get(e,_u,i);return r!==_u||t===_u?r:this.parentInjector.get(e,t,i)}}class TA extends br{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function M8e(n){return n.map(x8e).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return EG(this.componentDef.inputs)}get outputs(){return EG(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof ye?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new S5e(e,s):e,a=o.get(l3,null);if(null===a)throw new Kt(407,!1);const c=o.get(Eh,null),l=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",f=i?function s5e(n,e,t){return n.selectRootElement(e,t===Yo.ShadowDom)}(l,i,this.componentDef.encapsulation):$L(a.createRenderer(null,this.componentDef),u,function M5e(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),p=this.componentDef.onPush?288:272,g=vD(0,null,null,1,0,null,null,null,null,null),_=Iw(null,g,null,p,null,null,a,l,c,o,null);let y,w;Qm(_);try{const C=function L5e(n,e,t,i,r,s){const o=t[1];t[22]=n;const c=t7(o,22,2,"#host",null),l=c.mergedAttrs=e.hostAttrs;null!==l&&(kw(c,l,!0),null!==n&&(Lp(r,n,l),null!==c.classes&&JL(r,n,c.classes),null!==c.styles&&kU(r,n,c.styles)));const u=i.createRenderer(n,e),f=Iw(t,fG(e),null,e.onPush?32:16,t[22],c,i,u,s||null,null,null);return o.firstCreatePass&&(Bp(X6(c,t),o,e.type),_G(o,c),yG(c,t.length,1)),Rw(t,f),t[22]=f}(f,this.componentDef,_,a,l);if(f)if(i)Lp(l,f,["ng-version",M0.full]);else{const{attrs:x,classes:M}=function S8e(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Cu(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);x&&Lp(l,f,x),M&&M.length>0&&JL(l,f,M.join(" "))}if(w=W6(g,22),void 0!==t){const x=w.projection=[];for(let M=0;M<this.ngContentSelectors.length;M++){const T=t[M];x.push(null!=T?Array.from(T):null)}}y=function D5e(n,e,t,i){const r=t[1],s=function l5e(n,e,t){const i=d();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),wG(n,i,e,n7(n,e,1,null),t),gG(n,i));const r=sd(e,n,i.directiveStart,i);$2(r,e);const s=S2(i,e);return s&&$2(s,e),r}(r,t,e);if(n[8]=t[8]=s,null!==i)for(const a of i)a(s,e);if(e.contentQueries){const a=d();e.contentQueries(1,s,a.directiveStart)}const o=d();return!r.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(_0(o.index),AG(t[1],o,0,o.directiveStart,o.directiveEnd,e),vG(e,s)),s}(C,this.componentDef,_,[I5e]),gD(g,_,null)}finally{Wm()}return new T5e(this.componentType,y,J1(w,_),_,w)}}class T5e extends class Ks{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new x5e(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;xD(s[1],s,r,e,t),mG(s,this._tNode.index)}}get injector(){return new yh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function I5e(){const n=d();xp(It()[1],n)}function Ot(n){let e=function TG(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(ga(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Kt(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=SD(n.inputs),o.declaredInputs=SD(n.declaredInputs),o.outputs=SD(n.outputs);const a=r.hostBindings;a&&k5e(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&R5e(n,c),l&&F5e(n,l),mo(n.inputs,r.inputs),mo(n.declaredInputs,r.declaredInputs),mo(n.outputs,r.outputs),ga(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Ot&&(t=!1)}}e=Object.getPrototypeOf(e)}!function B5e(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=nd(r.hostAttrs,t=nd(t,r.hostAttrs))}}(i)}function SD(n){return n===lu?{}:n===Hr?[]:n}function R5e(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function F5e(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function k5e(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let Hw=null;function y8(){if(!Hw){const n=bs.Symbol;if(n&&n.iterator)Hw=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Hw=i)}}}return Hw}function LA(n){return!!ED(n)&&(Array.isArray(n)||!(n instanceof Map)&&y8()in n)}function ED(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function T0(n,e,t){return n[e]=t}function q2(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function w8(n,e,t,i){const r=q2(n,e,t);return q2(n,e+1,i)||r}function E4(n,e,t,i,r,s){const o=w8(n,e,t,i);return w8(n,e+2,r,s)||o}function ps(n,e,t,i){const r=It();return q2(r,Fn(),e)&&(Sr(),E0(Wa(),r,n,e,t,i)),ps}function s7(n,e,t,i){return q2(n,Fn(),t)?e+nr(t)+i:mr}function o7(n,e,t,i,r,s){const a=w8(n,fn(),t,r);return Zn(2),a?e+nr(t)+i+nr(r)+s:mr}function Wt(n,e,t,i,r,s,o,a){const c=It(),l=Sr(),u=n+22,f=l.firstCreatePass?function G5e(n,e,t,i,r,s,o,a,c){const l=e.consts,u=t7(e,n,4,o||null,E2(l,a));_D(e,t,u,E2(l,c)),xp(e,u);const f=u.tViews=vD(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),f.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];b(f,!1);const p=c[11].createComment("");Mw(l,c,p,f),$2(p,c),Rw(c,c[u]=CG(p,c,p,f)),n3(f)&&mD(l,c,f),null!=o&&AD(c,f,a)}function Ar(n){return U3(function pe(){return Ni.lFrame.contextLView}(),22+n)}function Ce(n,e,t){const i=It();return q2(i,Fn(),e)&&$3(Sr(),Wa(),i,n,e,i[11],t,!1),Ce}function TD(n,e,t,i,r){const o=r?"class":"style";xD(n,t,e.inputs[o],o,i)}function H(n,e,t,i){const r=It(),s=Sr(),o=22+n,a=r[11],c=r[o]=$L(a,e,function ZT(){return Ni.lFrame.currentNamespace}()),l=s.firstCreatePass?function W5e(n,e,t,i,r,s,o){const a=e.consts,l=t7(e,n,2,r,E2(a,s));return _D(e,t,l,E2(a,o)),null!==l.attrs&&kw(l,l.attrs,!1),null!==l.mergedAttrs&&kw(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,0,e,t,i):s.data[o];b(l,!0);const u=l.mergedAttrs;null!==u&&Lp(a,c,u);const f=l.classes;null!==f&&JL(a,c,f);const p=l.styles;return null!==p&&kU(a,c,p),64!=(64&l.flags)&&Mw(s,r,c,l),0===function T2(){return Ni.lFrame.elementDepthCount}()&&$2(c,r),function v0(){Ni.lFrame.elementDepthCount++}(),n3(l)&&(mD(s,r,l),hG(s,l,r)),null!==i&&AD(r,l),H}function N(){let n=d();B()?z():(n=n.parent,b(n,!1));const e=n;!function x4(){Ni.lFrame.elementDepthCount--}();const t=Sr();return t.firstCreatePass&&(xp(t,n),S1(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function K6(n){return 0!=(16&n.flags)}(e)&&TD(t,e,It(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Tp(n){return 0!=(32&n.flags)}(e)&&TD(t,e,It(),e.stylesWithoutHost,!1),N}function $e(n,e,t,i){return H(n,e,t,i),N(),$e}function Vs(n,e,t){const i=It(),r=Sr(),s=n+22,o=r.firstCreatePass?function j5e(n,e,t,i,r){const s=e.consts,o=E2(s,i),a=t7(e,n,8,"ng-container",o);return null!==o&&kw(a,o,!0),_D(e,t,a,E2(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];b(o,!0);const a=i[s]=i[11].createComment("");return Mw(r,i,a,o),$2(a,i),n3(o)&&(mD(r,i,o),hG(r,o,i)),null!=t&&AD(i,o),Vs}function Us(){let n=d();const e=Sr();return B()?z():(n=n.parent,b(n,!1)),e.firstCreatePass&&(xp(e,n),S1(n)&&e.queries.elementEnd(n)),Us}function bc(n,e,t){return Vs(n,e,t),Us(),bc}function la(){return It()}function IA(n){return!!n&&"function"==typeof n.then}function zG(n){return!!n&&"function"==typeof n.subscribe}const LD=zG;function an(n,e,t,i){const r=It(),s=Sr(),o=d();return OG(s,r,r[11],o,n,e,0,i),an}function DD(n,e){const t=d(),i=It(),r=Sr();return OG(r,i,MG(vh(r.data),t,i),t,n,e),DD}function OG(n,e,t,i,r,s,o,a){const c=n3(i),u=n.firstCreatePass&&xG(n),f=e[8],p=bG(e);let g=!0;if(3&i.type||a){const w=S2(i,e),C=a?a(w):w,x=p.length,M=a?I=>a(oa(I[i.index])):i.index;let T=null;if(!a&&c&&(T=function $5e(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,g=!1;else{s=VG(i,e,f,s,!1);const I=t.listen(C,r,s);p.push(s,I),u&&u.push(r,M,x,x+1)}}else s=VG(i,e,f,s,!1);const _=i.outputs;let y;if(g&&null!==_&&(y=_[r])){const w=y.length;if(w)for(let C=0;C<w;C+=2){const F=e[y[C]][y[C+1]].subscribe(s),P=p.length;p.push(s,F),u&&u.push(r,i.index,P,-(P+1))}}}function NG(n,e,t,i){try{return!1!==t(i)}catch(r){return SG(n,r),!1}}function VG(n,e,t,i,r){return function s(o){if(o===Function)return i;CD(2&n.flags?aa(n.index,e):e);let c=NG(e,0,i,o),l=s.__ngNextListenerFn__;for(;l;)c=NG(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Nt(n=1){return function KT(n){return(Ni.lFrame.contextLView=function XT(n,e){for(;n>0;)e=e[15],n--;return e}(n,Ni.lFrame.contextLView))[8]}(n)}function q5e(n,e){let t=null;const i=function y8e(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?OU(n,s,!0):b8e(i,s))return r}else t=r}return t}function ec(n){const e=It()[16][6];if(!e.projection){const i=e.projection=t8(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?q5e(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Po(n,e=0,t){const i=It(),r=Sr(),s=t7(r,22+n,16,null,t||null);null===s.projection&&(s.projection=e),z(),64!=(64&s.flags)&&function d8e(n,e,t){FU(e[11],0,e,t,xU(n,t,e),TU(t.parent||e[6],t,e))}(r,i,s)}function Bl(n,e,t){return Ms(n,"",e,"",t),Bl}function Ms(n,e,t,i,r){const s=It(),o=s7(s,e,t,i);return o!==mr&&$3(Sr(),Wa(),s,n,o,s[11],r,!1),Ms}function XG(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?bu(s):Bh(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];Y5e(n[a],e)&&(c=!0,n[a+1]=i?oD(u):rD(u)),a=i?bu(u):Bh(u)}c&&(n[t+1]=i?rD(s):oD(s))}function Y5e(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&cd(n,e)>=0}const Nc={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function YG(n){return n.substring(Nc.key,Nc.keyEnd)}function Z5e(n){return n.substring(Nc.value,Nc.valueEnd)}function ZG(n,e){const t=Nc.textEnd;return t===e?-1:(e=Nc.keyEnd=function tpe(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Nc.key=e,t),d7(n,e,t))}function JG(n,e){const t=Nc.textEnd;let i=Nc.key=d7(n,e,t);return t===i?-1:(i=Nc.keyEnd=function npe(n,e,t){let i;for(;e<t&&(45===(i=n.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(n,i,t),i=tQ(n,i,t),i=Nc.value=d7(n,i,t),i=Nc.valueEnd=function ipe(n,e,t){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const c=n.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=nQ(n,c,o,t):e===o-4&&85===s&&82===r&&76===i&&40===c?a=o=nQ(n,41,o,t):c>32&&(a=o),s=r,r=i,i=-33&c}return a}(n,i,t),tQ(n,i,t))}function eQ(n){Nc.key=0,Nc.keyEnd=0,Nc.value=0,Nc.valueEnd=0,Nc.textEnd=n.length}function d7(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function tQ(n,e,t,i){return(e=d7(n,e,t))<t&&e++,e}function nQ(n,e,t,i){let r=-1,s=t;for(;s<i;){const o=n.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function h3(n,e,t){return Mu(n,e,t,!1),h3}function Rr(n,e){return Mu(n,e,null,!0),Rr}function rpe(n,e){for(let t=function epe(n){return eQ(n),JG(n,d7(n,0,Nc.textEnd))}(e);t>=0;t=JG(e,t))sQ(n,YG(e),Z5e(e))}function BA(n){Su(El,L0,n,!0)}function L0(n,e){for(let t=function J5e(n){return eQ(n),ZG(n,d7(n,0,Nc.textEnd))}(e);t>=0;t=ZG(e,t))El(n,YG(e),!0)}function Mu(n,e,t,i){const r=It(),s=Sr(),o=Zn(2);s.firstUpdatePass&&rQ(s,n,o,i),e!==mr&&q2(r,o,e)&&oQ(s,s.data[Os()],r,r[11],n,r[o+1]=function hpe(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=lo(Tl(n)))),n}(e,t),i,o)}function Su(n,e,t,i){const r=Sr(),s=Zn(2);r.firstUpdatePass&&rQ(r,null,s,i);const o=It();if(t!==mr&&q2(o,s,t)){const a=r.data[Os()];if(cQ(a,i)&&!iQ(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=fc(c,t||"")),TD(r,a,o,t,i)}else!function upe(n,e,t,i,r,s,o,a){r===mr&&(r=Hr);let c=0,l=0,u=0<r.length?r[0]:null,f=0<s.length?s[0]:null;for(;null!==u||null!==f;){const p=c<r.length?r[c+1]:void 0,g=l<s.length?s[l+1]:void 0;let y,_=null;u===f?(c+=2,l+=2,p!==g&&(_=f,y=g)):null===f||null!==u&&u<f?(c+=2,_=u):(l+=2,_=f,y=g),null!==_&&oQ(n,e,t,i,_,y,o,a),u=c<r.length?r[c]:null,f=l<s.length?s[l]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function lpe(n,e,t){if(null==t||""===t)return Hr;const i=[],r=Tl(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function iQ(n,e){return e>=n.expandoStartIndex}function rQ(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Os()],o=iQ(n,t);cQ(s,i)&&null===e&&!o&&(e=!1),e=function spe(n,e,t,i){const r=vh(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=RA(t=ID(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=ID(r,n,e,t,i),null===s){let c=function ope(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Bh(i))return n[bu(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=ID(null,n,e,c[1],i),c=RA(c,e.attrs,i),function ape(n,e,t,i){n[bu(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function cpe(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=RA(i,n[s].hostAttrs,t);return RA(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function K5e(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=bu(o),c=Bh(o);n[i]=t;let u,l=!1;if(Array.isArray(t)){const f=t;u=f[1],(null===u||cd(f,u)>0)&&(l=!0)}else u=t;if(r)if(0!==c){const p=bu(n[a+1]);n[i+1]=Tw(p,a),0!==p&&(n[p+1]=sD(n[p+1],i)),n[a+1]=function W8e(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Tw(a,0),0!==a&&(n[a+1]=sD(n[a+1],i)),a=i;else n[i+1]=Tw(c,0),0===a?a=i:n[c+1]=sD(n[c+1],i),c=i;l&&(n[i+1]=rD(n[i+1])),XG(n,u,i,!0),XG(n,u,i,!1),function X5e(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&cd(s,e)>=0&&(t[i+1]=oD(t[i+1]))}(e,u,n,i,s),o=Tw(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function ID(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=RA(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function RA(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),El(n,o,!!t||e[++s]))}return void 0===n?null:n}function sQ(n,e,t){El(n,e,Tl(t))}function oQ(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1];Ow(function tG(n){return 1==(1&n)}(l)?aQ(c,e,t,r,Bh(l),o):void 0)||(Ow(s)||function eG(n){return 2==(2&n)}(l)&&(s=aQ(c,null,t,r,a,o)),function g8e(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:u3.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=u3.Important),n.setStyle(t,i,r,s))}}(i,o,c2(Os(),t),r,s))}function aQ(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,f=null===u;let p=t[r+1];p===mr&&(p=f?Hr:void 0);let g=f?sA(p,i):u===i?p:void 0;if(l&&!Ow(g)&&(g=sA(c,i)),Ow(g)&&(a=g,o))return a;const _=n[r+1];r=o?bu(_):Bh(_)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=sA(c,i))}return a}function Ow(n){return void 0!==n}function cQ(n,e){return 0!=(n.flags&(e?16:32))}function V(n,e=""){const t=It(),i=Sr(),r=n+22,s=i.firstCreatePass?t7(i,r,1,e,null):i.data[r],o=t[r]=function jL(n,e){return n.createText(e)}(t[11],e);Mw(i,t,o,s),b(s,!1)}function D0(n){return Jn("",n,""),D0}function Jn(n,e,t){const i=It(),r=s7(i,n,e,t);return r!==mr&&Rh(i,Os(),r),Jn}function yd(n,e,t,i,r){const s=It(),o=o7(s,n,e,t,i,r);return o!==mr&&Rh(s,Os(),o),yd}function va(n,e,t){Su(El,L0,s7(It(),n,e,t),!0)}function FA(n,e,t,i,r){Su(El,L0,o7(It(),n,e,t,i,r),!0)}function mQ(n,e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w){Su(El,L0,function f7(n,e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w,C){const x=fn();let M=E4(n,x,t,r,o,c);return M=E4(n,x+4,u,p,_,w)||M,Zn(8),M?e+nr(t)+i+nr(r)+s+nr(o)+a+nr(c)+l+nr(u)+f+nr(p)+g+nr(_)+y+nr(w)+C:mr}(It(),n,e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w),!0)}function kA(n,e,t,i,r){return Mu(n,s7(It(),e,t,i),r,!1),kA}function C8(n,e,t){const i=It();return q2(i,Fn(),e)&&$3(Sr(),Wa(),i,n,e,i[11],t,!0),C8}function BD(n,e,t){const i=It();if(q2(i,Fn(),e)){const s=Sr(),o=Wa();$3(s,o,i,n,e,MG(vh(s.data),o,i),t,!0)}return BD}const b8=void 0;var Tpe=["en",[["a","p"],["AM","PM"],b8],[["AM","PM"],b8,b8],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],b8,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],b8,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",b8,"{1} 'at' {0}",b8],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Epe(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let p7={};function Rl(n){const e=function Lpe(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=SQ(e);if(t)return t;const i=e.split("-")[0];if(t=SQ(i),t)return t;if("en"===i)return Tpe;throw new Kt(701,!1)}function SQ(n){return n in p7||(p7[n]=bs.ng&&bs.ng.common&&bs.ng.common.locales&&bs.ng.common.locales[n]),p7[n]}var ti=(()=>((ti=ti||{})[ti.LocaleId=0]="LocaleId",ti[ti.DayPeriodsFormat=1]="DayPeriodsFormat",ti[ti.DayPeriodsStandalone=2]="DayPeriodsStandalone",ti[ti.DaysFormat=3]="DaysFormat",ti[ti.DaysStandalone=4]="DaysStandalone",ti[ti.MonthsFormat=5]="MonthsFormat",ti[ti.MonthsStandalone=6]="MonthsStandalone",ti[ti.Eras=7]="Eras",ti[ti.FirstDayOfWeek=8]="FirstDayOfWeek",ti[ti.WeekendRange=9]="WeekendRange",ti[ti.DateFormat=10]="DateFormat",ti[ti.TimeFormat=11]="TimeFormat",ti[ti.DateTimeFormat=12]="DateTimeFormat",ti[ti.NumberSymbols=13]="NumberSymbols",ti[ti.NumberFormats=14]="NumberFormats",ti[ti.CurrencyCode=15]="CurrencyCode",ti[ti.CurrencySymbol=16]="CurrencySymbol",ti[ti.CurrencyName=17]="CurrencyName",ti[ti.Currencies=18]="Currencies",ti[ti.Directionality=19]="Directionality",ti[ti.PluralCase=20]="PluralCase",ti[ti.ExtraData=21]="ExtraData",ti))();const g7="en-US";let EQ=g7;function kD(n,e,t,i,r){if(n=Ln(n),Array.isArray(n))for(let s=0;s<n.length;s++)kD(n[s],e,t,i,r);else{const s=Sr(),o=It();let a=E(n)?n:Ln(n.provide),c=kt(n);const l=d(),u=1048575&l.providerIndexes,f=l.directiveStart,p=l.providerIndexes>>20;if(E(n)||!n.multi){const g=new $6(c,r,U),_=HD(a,e,r?u:u+p,f);-1===_?(Bp(X6(l,o),s,a),PD(s,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(g),o.push(g)):(t[_]=g,o[_]=g)}else{const g=HD(a,e,u+p,f),_=HD(a,e,u,u+p),y=g>=0&&t[g],w=_>=0&&t[_];if(r&&!w||!r&&!y){Bp(X6(l,o),s,a);const C=function S7e(n,e,t,i,r){const s=new $6(n,t,U);return s.multi=[],s.index=e,s.componentProviders=0,ZQ(s,r,i&&!t),s}(r?M7e:x7e,t.length,r,i,c);!r&&w&&(t[_].providerFactory=C),PD(s,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(C),o.push(C)}else PD(s,n,g>-1?g:_,ZQ(t[r?_:g],c,!r&&i));!r&&i&&w&&t[_].componentProviders++}}}function PD(n,e,t,i){const r=E(e),s=function S(n){return!!n.useClass}(e);if(r||s){const c=(s?Ln(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function ZQ(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function HD(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function x7e(n,e,t,i){return zD(this.multi,[])}function M7e(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=sd(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),zD(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],zD(r,s);return s}function zD(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ki(n,e=[]){return t=>{t.providersResolver=(i,r)=>function b7e(n,e,t){const i=Sr();if(i.firstCreatePass){const r=ga(n);kD(t,i.data,i.blueprint,r,!0),kD(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class x8{}class JQ{}class eW extends x8{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new MD(this);const i=Li(e);this._bootstrapComponents=Ih(i.bootstrap),this._r3Injector=jU(e,t,[{provide:x8,useValue:this},{provide:Ui,useValue:this.componentFactoryResolver}],lo(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class OD extends JQ{constructor(e){super(),this.moduleType=e}create(e){return new eW(this.moduleType,e)}}class T7e extends x8{constructor(e,t,i){super(),this.componentFactoryResolver=new MD(this),this.instance=null;const r=new Me([...e,{provide:x8,useValue:this},{provide:Ui,useValue:this.componentFactoryResolver}],t||re(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Qw(n,e,t=null){return new T7e(n,e,t).injector}let L7e=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=yw(0,t.type),r=i.length>0?Qw([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Lt({token:n,providedIn:"environment",factory:()=>new n(Xe(ye))}),n})();function tW(n){n.getStandaloneInjector=e=>e.get(L7e).getOrCreateStandaloneInjector(n)}function Eu(n,e,t){const i=pt()+n,r=It();return r[i]===mr?T0(r,i,t?e.call(t):e()):function DA(n,e){return n[e]}(r,i)}function f3(n,e,t,i){return lW(It(),pt(),n,e,t,i)}function VA(n,e){const t=n[e];return t===mr?void 0:t}function lW(n,e,t,i,r,s){const o=e+t;return q2(n,o,r)?T0(n,o+1,s?i.call(s,r):i(r)):VA(n,o+1)}function uW(n,e,t,i,r,s,o){const a=e+t;return w8(n,a,r,s)?T0(n,a+2,o?i.call(o,r,s):i(r,s)):VA(n,a+2)}function _a(n,e){const t=Sr();let i;const r=n+22;t.firstCreatePass?(i=function W7e(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=c1(i.type)),o=K1(U);try{const a=Ip(!1),c=s();return Ip(a),function Q5e(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,It(),r,c),c}finally{K1(o)}}function B1(n,e,t){const i=n+22,r=It(),s=U3(r,i);return GA(r,i)?lW(r,pt(),e,s.transform,t,s):s.transform(t)}function UA(n,e,t,i){const r=n+22,s=It(),o=U3(s,r);return GA(s,r)?uW(s,pt(),e,o.transform,t,i,o):o.transform(t,i)}function GA(n,e){return n[1].data[e].pure}function VD(n){return e=>{setTimeout(n,void 0,e)}}const er=class K7e extends Je{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=VD(s),r&&(r=VD(r)),o&&(o=VD(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Re&&e.add(a),a}};function X7e(){return this._results[y8()]()}class m7{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=y8(),i=m7.prototype;i[t]||(i[t]=X7e)}get changes(){return this._changes||(this._changes=new er)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=Sl(e);(this._changesDetected=!function sL(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Vc=(()=>{class n{}return n.__NG_ELEMENT_ID__=J7e,n})();const Y7e=Vc,Z7e=class extends Y7e{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=Iw(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),gD(i,r,e),new EA(r)}};function J7e(){return Ww(d(),It())}function Ww(n,e){return 4&n.type?new Z7e(e,n,J1(n,e)):null}let Uc=(()=>{class n{}return n.__NG_ELEMENT_ID__=ege,n})();function ege(){return mW(d(),It())}const tge=Uc,pW=class extends tge{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return J1(this._hostTNode,this._hostLView)}get injector(){return new yh(this._hostTNode,this._hostLView)}get parentInjector(){const e=Y6(this._hostTNode,this._hostLView);if(Km(e)){const t=rd(e,this._hostLView),i=id(e);return new yh(t[1].data[i+8],t)}return new yh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=gW(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function e8(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const f=t||{};a=f.index,i=f.injector,r=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}const c=o?e:new TA(ir(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const p=(o?l:this.parentInjector).get(ye,null);p&&(s=p)}const u=c.create(l,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function j6(n){return Bo(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const f=i[3],p=new pW(f,f[6],f[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function a8e(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Wy(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function c8e(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=YL(s,o),c=i[11],l=xw(c,o[7]);return null!==l&&function r8e(n,e,t,i,r,s){i[0]=r,i[6]=e,SA(n,i,t,1,r,s)}(r,o[6],c,i,l,a),e.attachToViewContainerRef(),Wy(UD(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=gW(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=qL(this._lContainer,t);i&&(zp(UD(this._lContainer),t),bU(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=qL(this._lContainer,t);return i&&null!=zp(UD(this._lContainer),t)?new EA(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function gW(n){return n[8]}function UD(n){return n[8]||(n[8]=[])}function mW(n,e){let t;const i=e[n.index];if(Bo(i))t=i;else{let r;if(8&n.type)r=oa(i);else{const s=e[11];r=s.createComment("");const o=S2(n,e);v8(s,xw(s,o),r,function f8e(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=CG(i,e,r,n),Rw(e,t)}return new pW(t,n,e)}class GD{constructor(e){this.queryList=e,this.matches=null}clone(){return new GD(this.queryList)}setDirty(){this.queryList.setDirty()}}class QD{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new QD(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==wW(e,t).matches&&this.queries[t].setDirty()}}class AW{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class WD{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new WD(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class jD{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new jD(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,rge(t,s)),this.matchTNodeWithReadOption(e,t,Pp(t,e,s,!1,!1))}else i===Vc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Pp(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===dn||r===Uc||r===Vc&&4&t.type)this.addMatch(t.index,-2);else{const s=Pp(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function rge(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function oge(n,e,t,i){return-1===t?function sge(n,e){return 11&n.type?J1(n,e):4&n.type?Ww(n,e):null}(e,n):-2===t?function age(n,e,t){return t===dn?J1(e,n):t===Vc?Ww(e,n):t===Uc?mW(e,n):void 0}(n,e,i):sd(n,n[1],t,e)}function vW(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:oge(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function $D(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=vW(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let f=10;f<u.length;f++){const p=u[f];p[17]===p[3]&&$D(p[1],p,l,i)}if(null!==u[9]){const f=u[9];for(let p=0;p<f.length;p++){const g=f[p];$D(g[1],g,l,i)}}}}}return i}function Di(n){const e=It(),t=Sr(),i=_h();Um(i+1);const r=wW(t,i);if(n.dirty&&function A0(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?$D(t,e,i,[]):vW(t,e,r,i);n.reset(s,xo),n.notifyOnChanges()}return!0}return!1}function Xs(n,e,t){const i=Sr();i.firstCreatePass&&(yW(i,new AW(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),_W(i,It(),e)}function ja(n,e,t,i){const r=Sr();if(r.firstCreatePass){const s=d();yW(r,new AW(e,t,i),s.index),function lge(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}_W(r,It(),t)}function Ii(){return function cge(n,e){return n[19].queries[e].queryList}(It(),_h())}function _W(n,e,t){const i=new m7(4==(4&t));dG(n,e,i,i.destroy),null===e[19]&&(e[19]=new QD),e[19].queries.push(new GD(i))}function yW(n,e,t){null===n.queries&&(n.queries=new WD),n.queries.track(new jD(e,t))}function wW(n,e){return n.queries.getByIndex(e)}function K2(n,e){return Ww(n,e)}function $w(...n){}const WA=new Rt("Application Initializer");let qw=(()=>{class n{constructor(t){this.appInits=t,this.resolve=$w,this.reject=$w,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(IA(s))t.push(s);else if(LD(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Xe(WA,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jA=new Rt("AppId",{providedIn:"root",factory:function NW(){return`${ZD()}${ZD()}${ZD()}`}});function ZD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const VW=new Rt("Platform Initializer"),q3=new Rt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Kw=new Rt("appBootstrapListener"),T4=new Rt("AnimationModuleType");let Lge=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const I0=new Rt("LocaleId",{providedIn:"root",factory:()=>xs(I0,zn.Optional|zn.SkipSelf)||function Dge(){return typeof $localize<"u"&&$localize.locale||g7}()});class Bge{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let JD=(()=>{class n{compileModuleSync(t){return new OD(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Ih(Li(t).declarations).reduce((o,a)=>{const c=ir(a);return c&&o.push(new TA(c)),o},[]);return new Bge(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kge=(()=>Promise.resolve(0))();function eI(n){typeof Zone>"u"?kge.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Xi{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new er(!1),this.onMicrotaskEmpty=new er(!1),this.onStable=new er(!1),this.onError=new er(!1),typeof Zone>"u")throw new Kt(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Pge(){let n=bs.requestAnimationFrame,e=bs.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Oge(n){const e=()=>{!function zge(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(bs,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,nI(n),n.isCheckStableRunning=!0,tI(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),nI(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return QW(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),WW(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return QW(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),WW(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,nI(n),tI(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xi.isInAngularZone())throw new Kt(909,!1)}static assertNotInAngularZone(){if(Xi.isInAngularZone())throw new Kt(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Hge,$w,$w);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Hge={};function tI(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function nI(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function QW(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function WW(n){n._nesting--,tI(n)}class Nge{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new er,this.onMicrotaskEmpty=new er,this.onStable=new er,this.onError=new er}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const jW=new Rt(""),Xw=new Rt("");let sI,iI=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sI||(function Vge(n){sI=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xi.assertNotInAngularZone(),eI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())eI(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Xe(Xi),Xe(rI),Xe(Xw))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),rI=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return sI?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),wd=null;const $W=new Rt("AllowMultipleToken"),oI=new Rt("PlatformDestroyListeners");class qW{constructor(e,t){this.name=e,this.token=t}}function XW(n,e,t=[]){const i=`Platform: ${e}`,r=new Rt(i);return(s=[])=>{let o=aI();if(!o||o.injector.get($W,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function Qge(n){if(wd&&!wd.get($W,!1))throw new Kt(400,!1);wd=n;const e=n.get(ZW);(function KW(n){const e=n.get(VW,null);e&&e.forEach(t=>t())})(n)}(function YW(n=[],e){return Cc.create({name:e,providers:[{provide:D,useValue:"platform"},{provide:oI,useValue:new Set([()=>wd=null])},...n]})}(a,i))}return function jge(n){const e=aI();if(!e)throw new Kt(401,!1);return e}()}}function aI(){return wd?.get(ZW)??null}let ZW=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function ej(n,e){let t;return t="noop"===n?new Nge:("zone.js"===n?void 0:n)||new Xi(e),t}(i?.ngZone,function JW(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:Xi,useValue:r}];return r.run(()=>{const o=Cc.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(Dh,null);if(!c)throw new Kt(402,!1);return r.runOutsideAngular(()=>{const l=r.onError.subscribe({next:u=>{c.handleError(u)}});a.onDestroy(()=>{Yw(this._modules,a),l.unsubscribe()})}),function tj(n,e,t){try{const i=t();return IA(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const l=a.injector.get(qw);return l.runInitializers(),l.donePromise.then(()=>(function TQ(n){dc(n,"Expected localeId to be defined"),"string"==typeof n&&(EQ=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(I0,g7)||g7),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=nj({},i);return function Uge(n,e,t){const i=new OD(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(_7);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Kt(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Kt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(oI,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Xe(Cc))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function nj(n,e){return Array.isArray(e)?e.reduce(nj,n):{...n,...e}}let _7=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new be(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new be(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Xi.assertNotInAngularZone(),eI(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{Xi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=e2(s,o.pipe(F3()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof br;if(!this._injector.get(qw).done)throw!r&&function o2(n){const e=ir(n)||ia(n)||Y1(n);return null!==e&&e.standalone}(t),new Kt(405,false);let o;o=r?t:this._injector.get(Ui).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Gge(n){return n.isBoundToModule}(o)?void 0:this._injector.get(x8),l=o.create(Cc.NULL,[],i||o.selector,a),u=l.location.nativeElement,f=l.injector.get(jW,null);return f?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Yw(this.components,l),f?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Kt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Yw(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Kw,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Yw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Kt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Xe(Xi),Xe(ye),Xe(Dh))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let rj=!0,sj=!1;function Zw(){return sj=!0,rj}let xc=(()=>{class n{}return n.__NG_ELEMENT_ID__=Kge,n})();function Kge(n){return function Xge(n,e,t){if(p0(n)&&!t){const i=aa(n.index,e);return new EA(i,i)}return 47&n.type?new EA(e[16],e):null}(d(),It(),16==(16&n))}class lj{constructor(){}supports(e){return LA(e)}create(e){return new nme(e)}}const tme=(n,e)=>e;class nme{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||tme}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<hj(i,r,s)?t:i,a=hj(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let p=0;p<l;p++){const g=p<s.length?s[p]:s[p]=0,_=g+p;u<=_&&_<l&&(s[p]=g+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!LA(e))throw new Kt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function N5e(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[y8()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new ime(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new uj),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uj),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ime{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rme{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class uj{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new rme,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hj(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class fj{constructor(){}supports(e){return e instanceof Map||ED(e)}create(){return new sme}}class sme{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ED(e)))throw new Kt(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new ome(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class ome{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dj(){return new B0([new lj])}let B0=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||dj()),deps:[[n,new b0,new o3]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Kt(901,!1)}}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:dj}),n})();function pj(){return new S8([new fj])}let S8=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||pj()),deps:[[n,new b0,new o3]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Kt(901,!1)}}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:pj}),n})();const lme=XW(null,"core",[]);let ume=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Xe(_7))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function kh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let tC=null;function R0(){return tC}const Pi=new Rt("DocumentToken");let fI=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return function pme(){return Xe(gj)}()},providedIn:"platform"}),n})();const gme=new Rt("Location Initialized");let gj=(()=>{class n extends fI{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R0().getBaseHref(this._doc)}onPopState(t){const i=R0().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=R0().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){mj()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){mj()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:function(){return function mme(){return new gj(Xe(Pi))}()},providedIn:"platform"}),n})();function mj(){return!!window.history.pushState}function dI(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Aj(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ph(n){return n&&"?"!==n[0]?"?"+n:n}let E8=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return xs(_j)},providedIn:"root"}),n})();const vj=new Rt("appBaseHref");let _j=(()=>{class n extends E8{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??xs(Pi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dI(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ph(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Ph(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Ph(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(fI),Xe(vj,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ame=(()=>{class n extends E8{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=dI(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Ph(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Ph(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(fI),Xe(vj,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),$A=(()=>{class n{constructor(t){this._subject=new er,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=Aj(yj(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ph(i))}normalize(t){return n.stripTrailingSlash(function _me(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,yj(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ph(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ph(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Ph,n.joinWithSlash=dI,n.stripTrailingSlash=Aj,n.\u0275fac=function(t){return new(t||n)(Xe(E8))},n.\u0275prov=Lt({token:n,factory:function(){return function vme(){return new $A(Xe(E8))}()},providedIn:"root"}),n})();function yj(n){return n.replace(/\/index.html$/,"")}var tc=(()=>((tc=tc||{})[tc.Format=0]="Format",tc[tc.Standalone=1]="Standalone",tc))(),Ss=(()=>((Ss=Ss||{})[Ss.Narrow=0]="Narrow",Ss[Ss.Abbreviated=1]="Abbreviated",Ss[Ss.Wide=2]="Wide",Ss[Ss.Short=3]="Short",Ss))(),h1=(()=>((h1=h1||{})[h1.Short=0]="Short",h1[h1.Medium=1]="Medium",h1[h1.Long=2]="Long",h1[h1.Full=3]="Full",h1))(),Yi=(()=>((Yi=Yi||{})[Yi.Decimal=0]="Decimal",Yi[Yi.Group=1]="Group",Yi[Yi.List=2]="List",Yi[Yi.PercentSign=3]="PercentSign",Yi[Yi.PlusSign=4]="PlusSign",Yi[Yi.MinusSign=5]="MinusSign",Yi[Yi.Exponential=6]="Exponential",Yi[Yi.SuperscriptingExponent=7]="SuperscriptingExponent",Yi[Yi.PerMille=8]="PerMille",Yi[Yi.Infinity=9]="Infinity",Yi[Yi.NaN=10]="NaN",Yi[Yi.TimeSeparator=11]="TimeSeparator",Yi[Yi.CurrencyDecimal=12]="CurrencyDecimal",Yi[Yi.CurrencyGroup=13]="CurrencyGroup",Yi))();function nC(n,e){return D4(Rl(n)[ti.DateFormat],e)}function iC(n,e){return D4(Rl(n)[ti.TimeFormat],e)}function rC(n,e){return D4(Rl(n)[ti.DateTimeFormat],e)}function L4(n,e){const t=Rl(n),i=t[ti.NumberSymbols][e];if(typeof i>"u"){if(e===Yi.CurrencyDecimal)return t[ti.NumberSymbols][Yi.Decimal];if(e===Yi.CurrencyGroup)return t[ti.NumberSymbols][Yi.Group]}return i}function Cj(n){if(!n[ti.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ti.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function D4(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function gI(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Bme=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,qA={},Rme=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Gc=(()=>((Gc=Gc||{})[Gc.Short=0]="Short",Gc[Gc.ShortGMT=1]="ShortGMT",Gc[Gc.Long=2]="Long",Gc[Gc.Extended=3]="Extended",Gc))(),sr=(()=>((sr=sr||{})[sr.FullYear=0]="FullYear",sr[sr.Month=1]="Month",sr[sr.Date=2]="Date",sr[sr.Hours=3]="Hours",sr[sr.Minutes=4]="Minutes",sr[sr.Seconds=5]="Seconds",sr[sr.FractionalSeconds=6]="FractionalSeconds",sr[sr.Day=7]="Day",sr))(),Br=(()=>((Br=Br||{})[Br.DayPeriods=0]="DayPeriods",Br[Br.Days=1]="Days",Br[Br.Months=2]="Months",Br[Br.Eras=3]="Eras",Br))();function Fme(n,e,t,i){let r=function Gme(n){if(Mj(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return sC(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(Bme))return function Qme(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,l),e}(i)}const e=new Date(n);if(!Mj(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Hh(t,e)||e;let a,o=[];for(;e;){if(a=Rme.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=r.getTimezoneOffset();i&&(c=xj(i,c),r=function Ume(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function Vme(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(xj(e,r)-r))}(r,i,!0));let l="";return o.forEach(u=>{const f=function Nme(n){if(AI[n])return AI[n];let e;switch(n){case"G":case"GG":case"GGG":e=ya(Br.Eras,Ss.Abbreviated);break;case"GGGG":e=ya(Br.Eras,Ss.Wide);break;case"GGGGG":e=ya(Br.Eras,Ss.Narrow);break;case"y":e=Sc(sr.FullYear,1,0,!1,!0);break;case"yy":e=Sc(sr.FullYear,2,0,!0,!0);break;case"yyy":e=Sc(sr.FullYear,3,0,!1,!0);break;case"yyyy":e=Sc(sr.FullYear,4,0,!1,!0);break;case"Y":e=lC(1);break;case"YY":e=lC(2,!0);break;case"YYY":e=lC(3);break;case"YYYY":e=lC(4);break;case"M":case"L":e=Sc(sr.Month,1,1);break;case"MM":case"LL":e=Sc(sr.Month,2,1);break;case"MMM":e=ya(Br.Months,Ss.Abbreviated);break;case"MMMM":e=ya(Br.Months,Ss.Wide);break;case"MMMMM":e=ya(Br.Months,Ss.Narrow);break;case"LLL":e=ya(Br.Months,Ss.Abbreviated,tc.Standalone);break;case"LLLL":e=ya(Br.Months,Ss.Wide,tc.Standalone);break;case"LLLLL":e=ya(Br.Months,Ss.Narrow,tc.Standalone);break;case"w":e=mI(1);break;case"ww":e=mI(2);break;case"W":e=mI(1,!0);break;case"d":e=Sc(sr.Date,1);break;case"dd":e=Sc(sr.Date,2);break;case"c":case"cc":e=Sc(sr.Day,1);break;case"ccc":e=ya(Br.Days,Ss.Abbreviated,tc.Standalone);break;case"cccc":e=ya(Br.Days,Ss.Wide,tc.Standalone);break;case"ccccc":e=ya(Br.Days,Ss.Narrow,tc.Standalone);break;case"cccccc":e=ya(Br.Days,Ss.Short,tc.Standalone);break;case"E":case"EE":case"EEE":e=ya(Br.Days,Ss.Abbreviated);break;case"EEEE":e=ya(Br.Days,Ss.Wide);break;case"EEEEE":e=ya(Br.Days,Ss.Narrow);break;case"EEEEEE":e=ya(Br.Days,Ss.Short);break;case"a":case"aa":case"aaa":e=ya(Br.DayPeriods,Ss.Abbreviated);break;case"aaaa":e=ya(Br.DayPeriods,Ss.Wide);break;case"aaaaa":e=ya(Br.DayPeriods,Ss.Narrow);break;case"b":case"bb":case"bbb":e=ya(Br.DayPeriods,Ss.Abbreviated,tc.Standalone,!0);break;case"bbbb":e=ya(Br.DayPeriods,Ss.Wide,tc.Standalone,!0);break;case"bbbbb":e=ya(Br.DayPeriods,Ss.Narrow,tc.Standalone,!0);break;case"B":case"BB":case"BBB":e=ya(Br.DayPeriods,Ss.Abbreviated,tc.Format,!0);break;case"BBBB":e=ya(Br.DayPeriods,Ss.Wide,tc.Format,!0);break;case"BBBBB":e=ya(Br.DayPeriods,Ss.Narrow,tc.Format,!0);break;case"h":e=Sc(sr.Hours,1,-12);break;case"hh":e=Sc(sr.Hours,2,-12);break;case"H":e=Sc(sr.Hours,1);break;case"HH":e=Sc(sr.Hours,2);break;case"m":e=Sc(sr.Minutes,1);break;case"mm":e=Sc(sr.Minutes,2);break;case"s":e=Sc(sr.Seconds,1);break;case"ss":e=Sc(sr.Seconds,2);break;case"S":e=Sc(sr.FractionalSeconds,1);break;case"SS":e=Sc(sr.FractionalSeconds,2);break;case"SSS":e=Sc(sr.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=aC(Gc.Short);break;case"ZZZZZ":e=aC(Gc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=aC(Gc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=aC(Gc.Long);break;default:return null}return AI[n]=e,e}(u);l+=f?f(r,t,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function sC(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Hh(n,e){const t=function yme(n){return Rl(n)[ti.LocaleId]}(n);if(qA[t]=qA[t]||{},qA[t][e])return qA[t][e];let i="";switch(e){case"shortDate":i=nC(n,h1.Short);break;case"mediumDate":i=nC(n,h1.Medium);break;case"longDate":i=nC(n,h1.Long);break;case"fullDate":i=nC(n,h1.Full);break;case"shortTime":i=iC(n,h1.Short);break;case"mediumTime":i=iC(n,h1.Medium);break;case"longTime":i=iC(n,h1.Long);break;case"fullTime":i=iC(n,h1.Full);break;case"short":const r=Hh(n,"shortTime"),s=Hh(n,"shortDate");i=oC(rC(n,h1.Short),[r,s]);break;case"medium":const o=Hh(n,"mediumTime"),a=Hh(n,"mediumDate");i=oC(rC(n,h1.Medium),[o,a]);break;case"long":const c=Hh(n,"longTime"),l=Hh(n,"longDate");i=oC(rC(n,h1.Long),[c,l]);break;case"full":const u=Hh(n,"fullTime"),f=Hh(n,"fullDate");i=oC(rC(n,h1.Full),[u,f])}return i&&(qA[t][e]=i),i}function oC(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function Lu(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function Sc(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function Pme(n,e){switch(n){case sr.FullYear:return e.getFullYear();case sr.Month:return e.getMonth();case sr.Date:return e.getDate();case sr.Hours:return e.getHours();case sr.Minutes:return e.getMinutes();case sr.Seconds:return e.getSeconds();case sr.FractionalSeconds:return e.getMilliseconds();case sr.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===sr.Hours)0===a&&-12===t&&(a=12);else if(n===sr.FractionalSeconds)return function kme(n,e){return Lu(n,3).substring(0,e)}(a,e);const c=L4(o,Yi.MinusSign);return Lu(a,e,c,i,r)}}function ya(n,e,t=tc.Format,i=!1){return function(r,s){return function Hme(n,e,t,i,r,s){switch(t){case Br.Months:return function bme(n,e,t){const i=Rl(n),s=D4([i[ti.MonthsFormat],i[ti.MonthsStandalone]],e);return D4(s,t)}(e,r,i)[n.getMonth()];case Br.Days:return function Cme(n,e,t){const i=Rl(n),s=D4([i[ti.DaysFormat],i[ti.DaysStandalone]],e);return D4(s,t)}(e,r,i)[n.getDay()];case Br.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function Eme(n){const e=Rl(n);return Cj(e),(e[ti.ExtraData][2]||[]).map(i=>"string"==typeof i?gI(i):[gI(i[0]),gI(i[1])])}(e),u=function Tme(n,e,t){const i=Rl(n);Cj(i);const s=D4([i[ti.ExtraData][0],i[ti.ExtraData][1]],e)||[];return D4(s,t)||[]}(e,r,i),f=l.findIndex(p=>{if(Array.isArray(p)){const[g,_]=p,y=o>=g.hours&&a>=g.minutes,w=o<_.hours||o===_.hours&&a<_.minutes;if(g.hours<_.hours){if(y&&w)return!0}else if(y||w)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(-1!==f)return u[f]}return function wme(n,e,t){const i=Rl(n),s=D4([i[ti.DayPeriodsFormat],i[ti.DayPeriodsStandalone]],e);return D4(s,t)}(e,r,i)[o<12?0:1];case Br.Eras:return function xme(n,e){return D4(Rl(n)[ti.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function aC(n){return function(e,t,i){const r=-1*i,s=L4(t,Yi.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Gc.Short:return(r>=0?"+":"")+Lu(o,2,s)+Lu(Math.abs(r%60),2,s);case Gc.ShortGMT:return"GMT"+(r>=0?"+":"")+Lu(o,1,s);case Gc.Long:return"GMT"+(r>=0?"+":"")+Lu(o,2,s)+":"+Lu(Math.abs(r%60),2,s);case Gc.Extended:return 0===i?"Z":(r>=0?"+":"")+Lu(o,2,s)+":"+Lu(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function bj(n){return sC(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function mI(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=bj(t),o=function Ome(n){const e=sC(n,0,1).getDay();return sC(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Lu(r,n,L4(i,Yi.MinusSign))}}function lC(n,e=!1){return function(t,i){return Lu(bj(t).getFullYear(),n,L4(i,Yi.MinusSign),e)}}const AI={};function xj(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Mj(n){return n instanceof Date&&!isNaN(n.valueOf())}function Lj(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let XA=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(LA(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${lo(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(U(B0),U(S8),U(dn),U(ea))},n.\u0275dir=ht({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class iAe{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let p3=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new iAe(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),Bj(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Bj(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(U(Uc),U(Vc),U(B0))},n.\u0275dir=ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Bj(n,e){n.context.$implicit=e.item}let g3=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new sAe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Rj("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Rj("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(U(Uc),U(Vc))},n.\u0275dir=ht({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class sAe{constructor(){this.$implicit=null,this.ngIf=null}}function Rj(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${lo(e)}'.`)}class bI{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let hC=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Fj=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new bI(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(U(Uc),U(Vc),U(hC,9))},n.\u0275dir=ht({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),zh=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:u3.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(S8),U(ea))},n.\u0275dir=ht({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),xI=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(U(Uc))},n.\u0275dir=ht({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[wr]}),n})();function Du(n,e){return new Kt(2100,!1)}class cAe{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class lAe{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const uAe=new lAe,hAe=new cAe;let Cd=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(IA(t))return uAe;if(zG(t))return hAe;throw Du()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(U(xc,16))},n.\u0275pipe=b1({name:"async",type:n,pure:!1,standalone:!0}),n})();const mAe=new Rt("DATE_PIPE_DEFAULT_TIMEZONE");let fC=(()=>{class n{constructor(t,i){this.locale=t,this.defaultTimezone=i}transform(t,i="mediumDate",r,s){if(null==t||""===t||t!=t)return null;try{return Fme(t,i,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw Du()}}}return n.\u0275fac=function(t){return new(t||n)(U(I0,16),U(mAe,24))},n.\u0275pipe=b1({name:"date",type:n,pure:!0,standalone:!0}),n})(),kl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();const Hj="browser";function bd(n){return n===Hj}function y7(n){return"server"===n}let DAe=(()=>{class n{}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:()=>new IAe(Xe(Pi),window)}),n})();class IAe{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function BAe(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=zj(this.window.history)||zj(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function zj(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Oj{}class LI extends class XAe extends class dme{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fme(n){tC||(tC=n)}(new LI)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function YAe(){return ZA=ZA||document.querySelector("base"),ZA?ZA.getAttribute("href"):null}();return null==t?null:function ZAe(n){pC=pC||document.createElement("a"),pC.setAttribute("href",n);const e=pC.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ZA=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Lj(document.cookie,e)}}let pC,ZA=null;const Gj=new Rt("TRANSITION_ID"),e9e=[{provide:WA,useFactory:function JAe(n,e,t){return()=>{t.get(qw).donePromise.then(()=>{const i=R0(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Gj,Pi,Cc],multi:!0}];let n9e=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const gC=new Rt("EventManagerPlugins");let mC=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Xe(gC),Xe(Xi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class Qj{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=R0().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Wj=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),JA=(()=>{class n extends Wj{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(jj),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(jj))}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();function jj(n){R0().remove(n)}const DI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},II=/%COMP%/g;function AC(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?AC(n,r,t):(r=r.replace(II,n),t.push(r))}return t}function Kj(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vC=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new BI(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Yo.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new c9e(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Yo.ShadowDom:return new l9e(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=AC(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Xe(mC),Xe(JA),Xe(jA))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class BI{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(DI[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Yj(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Yj(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=DI[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=DI[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(u3.DashCase|u3.Important)?e.style.setProperty(t,i,r&u3.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&u3.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Kj(i)):this.eventManager.addEventListener(e,t,Kj(i))}}function Yj(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class c9e extends BI{constructor(e,t,i,r){super(e),this.component=i;const s=AC(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function s9e(n){return"_ngcontent-%COMP%".replace(II,n)}(r+"-"+i.id),this.hostAttr=function o9e(n){return"_nghost-%COMP%".replace(II,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class l9e extends BI{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=AC(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let u9e=(()=>{class n extends Qj{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const Zj=["alt","control","meta","shift"],h9e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},f9e={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let d9e=(()=>{class n extends Qj{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R0().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),Zj.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=h9e[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Zj.forEach(o=>{o!==r&&(0,f9e[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const e$=[{provide:q3,useValue:Hj},{provide:VW,useValue:function p9e(){LI.makeCurrent()},multi:!0},{provide:Pi,useFactory:function m9e(){return function fL(n){gA=n}(document),document},deps:[]}],A9e=XW(lme,"browser",e$),t$=new Rt(""),n$=[{provide:Xw,useClass:class t9e{addToWindow(e){bs.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},bs.getAllAngularTestabilities=()=>e.getAllTestabilities(),bs.getAllAngularRootElements=()=>e.getAllRootElements(),bs.frameworkStabilizers||(bs.frameworkStabilizers=[]),bs.frameworkStabilizers.push(i=>{const r=bs.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?R0().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:jW,useClass:iI,deps:[Xi,rI,Xw]},{provide:iI,useClass:iI,deps:[Xi,rI,Xw]}],i$=[{provide:D,useValue:"root"},{provide:Dh,useFactory:function g9e(){return new Dh},deps:[]},{provide:gC,useClass:u9e,multi:!0,deps:[Pi,Xi,q3]},{provide:gC,useClass:d9e,multi:!0,deps:[Pi]},{provide:vC,useClass:vC,deps:[mC,JA,jA]},{provide:l3,useExisting:vC},{provide:Wj,useExisting:JA},{provide:JA,useClass:JA,deps:[Pi]},{provide:mC,useClass:mC,deps:[gC,Xi]},{provide:Oj,useClass:n9e,deps:[]},[]];let r$=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:jA,useValue:t.appId},{provide:Gj,useExisting:jA},e9e]}}}return n.\u0275fac=function(t){return new(t||n)(Xe(t$,12))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[...i$,...n$],imports:[kl,ume]}),n})(),s$=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:function(t){let i=null;return i=t?new t:function _9e(){return new s$(Xe(Pi))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let T8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(t){let i=null;return i=t?new(t||n):Xe(c$),i},providedIn:"root"}),n})(),c$=(()=>{class n extends T8{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case qs.NONE:return i;case qs.HTML:return a3(i,"HTML")?Tl(i):Dl(this._doc,String(i)).toString();case qs.STYLE:return a3(i,"Style")?Tl(i):i;case qs.SCRIPT:if(a3(i,"Script"))return Tl(i);throw new Error("unsafe value used in a script context");case qs.URL:return a3(i,"URL")?Tl(i):qp(String(i));case qs.RESOURCE_URL:if(a3(i,"ResourceURL"))return Tl(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function AA(n){return new uw(n)}(t)}bypassSecurityTrustStyle(t){return function yL(n){return new gL(n)}(t)}bypassSecurityTrustScript(t){return function Kn(n){return new mL(n)}(t)}bypassSecurityTrustUrl(t){return function md(n){return new AL(n)}(t)}bypassSecurityTrustResourceUrl(t){return function jp(n){return new vL(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:function(t){let i=null;return i=t?new t:function S9e(n){return new c$(n.get(Pi))}(Xe(Cc)),i},providedIn:"root"}),n})();function Er(n){return null!=n&&"false"!=`${n}`}function Iu(n,e=0){return function E9e(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function _C(n){return Array.isArray(n)?n:[n]}function Ec(n){return null==n?"":"string"==typeof n?n:`${n}px`}function L8(n){return n instanceof dn?n.nativeElement:n}function mi(...n){return fs(n,w1(n))}const{isArray:T9e}=Array;function kI(n){return qt(e=>function L9e(n,e){return T9e(e)?n(...e):n(e)}(n,e))}const D9e=["addListener","removeListener"],I9e=["addEventListener","removeEventListener"],B9e=["on","off"];function Tc(n,e,t,i){if(ue(t)&&(i=t,t=void 0),i)return Tc(n,e,t).pipe(kI(i));const[r,s]=function k9e(n){return ue(n.addEventListener)&&ue(n.removeEventListener)}(n)?I9e.map(o=>a=>n[o](e,a,t)):function R9e(n){return ue(n.addListener)&&ue(n.removeListener)}(n)?D9e.map(l$(n,e)):function F9e(n){return ue(n.on)&&ue(n.off)}(n)?B9e.map(l$(n,e)):[];if(!r&&Io(n))return xi(o=>Tc(o,e,t))(po(n));if(!r)throw new TypeError("Invalid event target");return new be(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function l$(n,e){return t=>i=>n[t](e,i)}class P9e extends Re{constructor(e,t){super()}schedule(e,t=0){return this}}const yC={setInterval(n,e,...t){const{delegate:i}=yC;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=yC;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class PI extends P9e{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return yC.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;yC.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ze(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const e9={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=e9;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new Re(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=e9;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=e9;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},u$={now:()=>(u$.delegate||Date).now(),delegate:void 0};class t9{constructor(e,t=t9.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}t9.now=u$.now;class HI extends t9{constructor(e,t=t9.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}new class z9e extends HI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class H9e extends PI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=e9.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(e9.cancelAnimationFrame(t),e._scheduled=void 0)}});let zI,N9e=1;const wC={};function h$(n){return n in wC&&(delete wC[n],!0)}const V9e={setImmediate(n){const e=N9e++;return wC[e]=!0,zI||(zI=Promise.resolve()),zI.then(()=>h$(e)&&n()),e},clearImmediate(n){h$(n)}},{setImmediate:U9e,clearImmediate:G9e}=V9e,CC={setImmediate(...n){const{delegate:e}=CC;return(e?.setImmediate||U9e)(...n)},clearImmediate(n){const{delegate:e}=CC;return(e?.clearImmediate||G9e)(n)},delegate:void 0},OI=new class W9e extends HI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Q9e extends PI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=CC.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(CC.clearImmediate(t),e._scheduled=void 0)}}),n9=new HI(PI),j9e=n9;function NI(n=0,e,t=j9e){let i=-1;return null!=e&&(R3(e)?t=e:i=e),new be(r=>{let s=function q9e(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function f$(n,e=n9){return function $9e(n){return xn((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(_n(t,l=>{i=!0,r=l,s||po(n(l)).subscribe(s=_n(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>NI(n,e))}function _o(n,e){return xn((t,i)=>{let r=0;t.subscribe(_n(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Ta(n){return xn((e,t)=>{po(n).subscribe(_n(t,()=>t.complete(),st)),!t.closed&&e.subscribe(t)})}let VI;try{VI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{VI=!1}let i9,bC,D8,UI,m3=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?bd(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!VI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Xe(q3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Md(n){return function K9e(){if(null==i9&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>i9=!0}))}finally{i9=i9||!1}return i9}()?n:!!n.capture}function p$(){if(null==D8){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return D8=!1,D8;if("scrollBehavior"in document.documentElement.style)D8=!0;else{const n=Element.prototype.scrollTo;D8=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return D8}function r9(){if("object"!=typeof document||!document)return 0;if(null==bC){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),bC=0,0===n.scrollLeft&&(n.scrollLeft=1,bC=0===n.scrollLeft?1:2),n.remove()}return bC}function g$(n){if(function X9e(){if(null==UI){const n=typeof document<"u"?document.head:null;UI=!(!n||!n.createShadowRoot&&!n.attachShadow)}return UI}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function GI(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function I8(n){return n.composedPath?n.composedPath()[0]:n.target}function QI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Y9e=new Rt("cdk-dir-doc",{providedIn:"root",factory:function Z9e(){return xs(Pi)}}),J9e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Oh=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new er,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function eve(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?J9e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Y9e,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),B8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),m$=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Je,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new be(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(f$(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):mi()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(_o(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=L8(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Tc(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Xi),Xe(m3),Xe(Pi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nve=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Je,this._elementScrolled=new be(o=>this.ngZone.runOutsideAngular(()=>Tc(this.elementRef.nativeElement,"scroll").pipe(Ta(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=r9()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==r9()?t.left=t.right:1==r9()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;p$()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==r9()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==r9()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(m$),U(Xi),U(Oh,8))},n.\u0275dir=ht({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),xC=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Je,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(f$(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Xe(m3),Xe(Xi),Xe(Pi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),MC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[B8,R8,B8,R8]}),n})();class WI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class s9 extends WI{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class SC extends WI{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class A$ extends WI{constructor(e){super(),this.element=e instanceof dn?e.nativeElement:e}}class jI{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof s9?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof SC?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof A$?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class rve extends jI{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Cc.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let $I=(()=>{class n extends jI{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new er,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(U(Ui),U(Uc),U(Pi))},n.\u0275dir=ht({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ot]}),n})(),Sd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function Lc(n){return n<=0?()=>Pa:xn((e,t)=>{let i=0;e.subscribe(_n(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}const v$=p$();class sve{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ec(-this._previousScrollPosition.left),e.style.top=Ec(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),v$&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),v$&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class ove{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class _${enable(){}disable(){}attach(){}}function qI(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function y$(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class ave{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();qI(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let cve=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new _$,this.close=o=>new ove(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new sve(this._viewportRuler,this._document),this.reposition=o=>new ave(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(Xe(m$),Xe(xC),Xe(Xi),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class KI{constructor(e){if(this.scrollStrategy=new _$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class EC{constructor(e,t,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class lve{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let w$=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uve=(()=>{class n extends w${constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(Xi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hve=(()=>{class n extends w${constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=I8(s)},this._clickListener=s=>{const o=I8(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const f=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(m3),Xe(Xi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TC=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||QI()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),QI()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(m3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class o9{constructor(e,t,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Je,this._attachments=new Je,this._detachments=new Je,this._locationChanges=Re.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new Je,this._outsidePointerEvents=new Je,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Lc(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ec(this._config.width),e.height=Ec(this._config.height),e.minWidth=Ec(this._config.minWidth),e.minHeight=Ec(this._config.minHeight),e.maxWidth=Ec(this._config.maxWidth),e.maxHeight=Ec(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=_C(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ta(e2(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const C$="cdk-overlay-connected-position-bounding-box",fve=/([A-Za-z%]+)$/;class dve{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Je,this._resizeSubscription=Re.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(C$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&F8(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(C$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=x$(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let p=0-a,g=a+s.height-i.height,_=this._subtractOverflows(s.width,0-o,o+s.width-i.width),y=this._subtractOverflows(s.height,p,g),w=_*y;return{visibleArea:w,isCompletelyWithinViewport:s.width*s.height===w,fitsInViewportVertically:y===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=b$(this._overlayRef.getConfig().minHeight),a=b$(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&l}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=x$(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,f=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,f=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:f},{x:e.x+u,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new lve(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,f,p;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),_=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)f=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),_=this._lastBoundingBoxSize.width;u=2*g,f=e.x-g,u>_&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-_/2)}return{top:o,left:f,bottom:a,right:p,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Ec(i.height),r.top=Ec(i.top),r.bottom=Ec(i.bottom),r.width=Ec(i.width),r.left=Ec(i.left),r.right=Ec(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Ec(s)),o&&(r.maxWidth=Ec(o))}this._lastBoundingBoxSize=i,F8(this._boundingBox.style,r)}_resetBoundingBoxStyles(){F8(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){F8(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();F8(i,this._getExactOverlayY(t,e,u)),F8(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Ec(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Ec(o.maxWidth):s&&(i.maxWidth="")),F8(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Ec(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Ec(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:y$(e,i),isOriginOutsideView:qI(e,i),isOverlayClipped:y$(t,i),isOverlayOutsideView:qI(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&_C(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof dn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function F8(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function b$(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(fve);return t&&"px"!==t?null:parseFloat(e)}return n||null}function x$(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const M$="cdk-global-overlay-wrapper";class pve{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(M$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,f=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let g="",_="",y="";c?y="flex-start":"center"===u?(y="center",p?_=f:g=f):p?"left"===u||"end"===u?(y="flex-end",g=f):("right"===u||"start"===u)&&(y="flex-start",_=f):"left"===u||"start"===u?(y="flex-start",g=f):("right"===u||"end"===u)&&(y="flex-end",_=f),e.position=this._cssPosition,e.marginLeft=c?"0":g,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":_,t.justifyContent=y,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(M$),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let gve=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new pve}flexibleConnectedTo(t){return new dve(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Xe(xC),Xe(Pi),Xe(m3),Xe(TC))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mve=0,A3=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f,p,g){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=f,this._outsideClickDispatcher=p,this._animationsModuleType=g}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new KI(t);return o.direction=o.direction||this._directionality.value,new o9(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+mve++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(_7)),new rve(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Xe(cve),Xe(TC),Xe(Ui),Xe(gve),Xe(uve),Xe(Cc),Xe(Xi),Xe(Pi),Xe(Oh),Xe($A),Xe(hve),Xe(T4,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const Ave=new Rt("cdk-connected-overlay-scroll-strategy");let vve=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(U(dn))},n.\u0275dir=ht({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})();const yve={provide:Ave,deps:[A3],useFactory:function _ve(n){return()=>n.scrollStrategies.reposition()}};let Ed=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[A3,yve],imports:[B8,Sd,MC,MC]}),n})();class no extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const LC=Ee(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:wve}=Array,{getPrototypeOf:Cve,prototype:bve,keys:xve}=Object;function S$(n){if(1===n.length){const e=n[0];if(wve(e))return{args:e,keys:null};if(function Mve(n){return n&&"object"==typeof n&&Cve(n)===bve}(e)){const t=xve(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function E$(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function XI(...n){const e=w1(n),t=a0(n),{args:i,keys:r}=S$(n);if(0===i.length)return fs([],e);const s=new be(function Sve(n,e,t=At){return i=>{T$(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)T$(e,()=>{const l=fs(n[c],e);let u=!1;l.subscribe(_n(i,f=>{s[c]=f,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>E$(r,o):At));return t?s.pipe(kI(t)):s}function T$(n,e,t){n?ka(t,n,e):e()}function a9(...n){return function Eve(){return n1(1)}()(fs(n,w1(n)))}function DC(n){return new be(e=>{po(n()).subscribe(e)})}function C7(n,e){const t=ue(n)?n:()=>n,i=r=>r.error(t());return new be(e?r=>e.schedule(i,0,r):i)}function YI(){return xn((n,e)=>{let t=null;n._refCount++;const i=_n(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class ZI extends be{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,vt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;const t=this.getSubject();e.add(this.source.subscribe(_n(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return YI()(this)}}function I4(n,e){return xn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(_n(i,c=>{r?.unsubscribe();let l=0;const u=s++;po(n(c,u)).subscribe(r=_n(i,f=>i.next(e?e(c,f,u,l++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function F0(...n){const e=w1(n);return xn((t,i)=>{(e?a9(n,t,e):a9(n,t)).subscribe(i)})}function IC(n){return xn((e,t)=>{let i=!1;e.subscribe(_n(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function L$(n=Tve){return xn((e,t)=>{let i=!1;e.subscribe(_n(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Tve(){return new LC}function Nh(n,e){const t=arguments.length>=2;return i=>i.pipe(n?_o((r,s)=>n(r,s,i)):At,Lc(1),t?IC(e):L$(()=>new LC))}function Td(n,e){return ue(e)?xi(n,e,1):xi(n,1)}function wa(n,e,t){const i=ue(n)||e||t?{next:n,error:e,complete:t}:n;return i?xn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(_n(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):At}function k0(n){return xn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(_n(t,void 0,void 0,o=>{s=po(n(o,k0(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Lve(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(_n(o,u=>{const f=l++;c=a?n(c,u,f):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function D$(n,e){return xn(Lve(n,e,arguments.length>=2,!0))}function JI(n){return n<=0?()=>Pa:xn((e,t)=>{let i=[];e.subscribe(_n(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function I$(n,e){const t=arguments.length>=2;return i=>i.pipe(n?_o((r,s)=>n(r,s,i)):At,JI(1),t?IC(e):L$(()=>new LC))}function B$(n){return qt(()=>n)}function BC(n){return xn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Or="primary",c9=Symbol("RouteTitle");class Ive{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function b7(n){return new Ive(n)}function Bve(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function P0(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!R$(n[r],e[r]))return!1;return!0}function R$(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function F$(n){return Array.prototype.concat.apply([],n)}function k$(n){return n.length>0?n[n.length-1]:null}function L2(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ld(n){return LD(n)?n:IA(n)?fs(Promise.resolve(n)):mi(n)}const kve={exact:function z$(n,e,t){if(!P8(n.segments,e.segments)||!RC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!z$(n.children[i],e.children[i],t))return!1;return!0},subset:O$},P$={exact:function Pve(n,e){return P0(n,e)},subset:function Hve(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>R$(n[t],e[t]))},ignored:()=>!0};function H$(n,e,t){return kve[t.paths](n.root,e.root,t.matrixParams)&&P$[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function O$(n,e,t){return N$(n,e,e.segments,t)}function N$(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!P8(r,t)||e.hasChildren()||!RC(r,t,i))}if(n.segments.length===t.length){if(!P8(n.segments,t)||!RC(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!O$(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(P8(n.segments,r)&&RC(n.segments,r,i)&&n.children[Or])&&N$(n.children[Or],e,s,i)}}function RC(n,e,t){return e.every((i,r)=>P$[t](n[r].parameters,i.parameters))}class k8{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=b7(this.queryParams)),this._queryParamMap}toString(){return Nve.serialize(this)}}class gs{constructor(e,t){this.segments=e,this.children=t,this.parent=null,L2(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return FC(this)}}class l9{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=b7(this.parameters)),this._parameterMap}toString(){return Q$(this)}}function P8(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let V$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return new tB},providedIn:"root"}),n})();class tB{parse(e){const t=new Kve(e);return new k8(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${u9(e.root,!0)}`,i=function Gve(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${kC(t)}=${kC(r)}`).join("&"):`${kC(t)}=${kC(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Vve(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Nve=new tB;function FC(n){return n.segments.map(e=>Q$(e)).join("/")}function u9(n,e){if(!n.hasChildren())return FC(n);if(e){const t=n.children[Or]?u9(n.children[Or],!1):"",i=[];return L2(n.children,(r,s)=>{s!==Or&&i.push(`${s}:${u9(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Ove(n,e){let t=[];return L2(n.children,(i,r)=>{r===Or&&(t=t.concat(e(i,r)))}),L2(n.children,(i,r)=>{r!==Or&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Or?[u9(n.children[Or],!1)]:[`${r}:${u9(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Or]?`${FC(n)}/${t[0]}`:`${FC(n)}/(${t.join("//")})`}}function U$(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kC(n){return U$(n).replace(/%3B/gi,";")}function nB(n){return U$(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function PC(n){return decodeURIComponent(n)}function G$(n){return PC(n.replace(/\+/g,"%20"))}function Q$(n){return`${nB(n.path)}${function Uve(n){return Object.keys(n).map(e=>`;${nB(e)}=${nB(n[e])}`).join("")}(n.parameters)}`}const Qve=/^[^\/()?;=#]+/;function HC(n){const e=n.match(Qve);return e?e[0]:""}const Wve=/^[^=?&#]+/,$ve=/^[^&#]+/;class Kve{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gs([],{}):new gs([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Or]=new gs(e,t)),i}parseSegment(){const e=HC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Kt(4009,!1);return this.capture(e),new l9(PC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=HC(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=HC(this.remaining);r&&(i=r,this.capture(i))}e[PC(t)]=PC(i)}parseQueryParam(e){const t=function jve(n){const e=n.match(Wve);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function qve(n){const e=n.match($ve);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=G$(t),s=G$(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=HC(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Kt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Or);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Or]:new gs([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Kt(4011,!1)}}function iB(n){return n.segments.length>0?new gs([],{[Or]:n}):n}function zC(n){const e={};for(const i of Object.keys(n.children)){const s=zC(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Xve(n){if(1===n.numberOfChildren&&n.children[Or]){const e=n.children[Or];return new gs(n.segments.concat(e.segments),e.children)}return n}(new gs(n.segments,e))}function H8(n){return n instanceof k8}function Jve(n,e,t,i,r){if(0===t.length)return x7(e.root,e.root,e.root,i,r);const s=function $$(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new j$(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return L2(s.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new j$(t,e,i)}(t);return s.toRoot()?x7(e.root,e.root,new gs([],{}),i,r):function o(c){const l=function t_e(n,e,t,i){if(n.isAbsolute)return new M7(e.root,!0,0);if(-1===i)return new M7(t,t===e.root,0);return function q$(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Kt(4005,!1);r=i.segments.length}return new M7(i,!1,r-s)}(t,i+(h9(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),u=l.processChildren?d9(l.segmentGroup,l.index,s.commands):sB(l.segmentGroup,l.index,s.commands);return x7(e.root,l.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function h9(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function f9(n){return"object"==typeof n&&null!=n&&n.outlets}function x7(n,e,t,i,r){let o,s={};i&&L2(i,(c,l)=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:W$(n,e,t);const a=iB(zC(o));return new k8(a,s,r)}function W$(n,e,t){const i={};return L2(n.children,(r,s)=>{i[s]=r===e?t:W$(r,e,t)}),new gs(n.segments,i)}class j${constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&h9(i[0]))throw new Kt(4003,!1);const r=i.find(f9);if(r&&r!==k$(i))throw new Kt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class M7{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function sB(n,e,t){if(n||(n=new gs([],{})),0===n.segments.length&&n.hasChildren())return d9(n,e,t);const i=function i_e(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(f9(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!X$(c,l,o))return s;i+=2}else{if(!X$(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new gs(n.segments.slice(0,i.pathIndex),{});return s.children[Or]=new gs(n.segments.slice(i.pathIndex),n.children),d9(s,0,r)}return i.match&&0===r.length?new gs(n.segments,{}):i.match&&!n.hasChildren()?oB(n,e,t):i.match?d9(n,0,r):oB(n,e,t)}function d9(n,e,t){if(0===t.length)return new gs(n.segments,{});{const i=function n_e(n){return f9(n[0])?n[0].outlets:{[Or]:n}}(t),r={};return L2(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=sB(n.children[o],e,s))}),L2(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new gs(n.segments,r)}}function oB(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(f9(s)){const c=r_e(s.outlets);return new gs(i,c)}if(0===r&&h9(t[0])){i.push(new l9(n.segments[e].path,K$(t[0]))),r++;continue}const o=f9(s)?s.outlets[Or]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&h9(a)?(i.push(new l9(o,K$(a))),r+=2):(i.push(new l9(o,{})),r++)}return new gs(i,{})}function r_e(n){const e={};return L2(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=oB(new gs([],{}),0,t))}),e}function K$(n){const e={};return L2(n,(t,i)=>e[i]=`${t}`),e}function X$(n,e,t){return n==t.path&&P0(e,t.parameters)}class Vh{constructor(e,t){this.id=e,this.url=t}}class aB extends Vh{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bu extends Vh{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class OC extends Vh{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Y$ extends Vh{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class s_e extends Vh{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o_e extends Vh{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class a_e extends Vh{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class c_e extends Vh{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l_e extends Vh{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u_e{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class h_e{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class f_e{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class d_e{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p_e{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g_e{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z${constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class J${constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=cB(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=cB(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lB(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return lB(e,this._root).map(t=>t.value)}}function cB(n,e){if(n===e.value)return e;for(const t of e.children){const i=cB(n,t);if(i)return i}return null}function lB(n,e){if(n===e.value)return[e];for(const t of e.children){const i=lB(n,t);if(i.length)return i.unshift(e),i}return[]}class Uh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function S7(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class eq extends J${constructor(e,t){super(e),this.snapshot=t,uB(this,e)}toString(){return this.snapshot.toString()}}function tq(n,e){const t=function A_e(n,e){const o=new NC([],{},{},"",{},Or,e,null,n.root,-1,{});return new iq("",new Uh(o,[]))}(n,e),i=new no([new l9("",{})]),r=new no({}),s=new no({}),o=new no({}),a=new no(""),c=new Dd(i,r,o,a,s,Or,e,t.root);return c.snapshot=t.root,new eq(new Uh(c,[]),t)}class Dd{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(qt(l=>l[c9]))??mi(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(qt(e=>b7(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(qt(e=>b7(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nq(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function v_e(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class NC{constructor(e,t,i,r,s,o,a,c,l,u,f,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[c9],this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._correctedLastPathIndex=p??u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=b7(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=b7(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class iq extends J${constructor(e,t){super(t),this.url=e,uB(this,t)}toString(){return rq(this._root)}}function uB(n,e){e.value._routerState=n,e.children.forEach(t=>uB(n,t))}function rq(n){const e=n.children.length>0?` { ${n.children.map(rq).join(", ")} } `:"";return`${n.value}${e}`}function hB(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,P0(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),P0(e.params,t.params)||n.params.next(t.params),function Rve(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!P0(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),P0(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fB(n,e){const t=P0(n.params,e.params)&&function zve(n,e){return P8(n,e)&&n.every((t,i)=>P0(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fB(n.parent,e.parent))}function p9(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function y_e(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return p9(n,i,r);return p9(n,i)})}(n,e,t);return new Uh(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>p9(n,a)),o}}const i=function w_e(n){return new Dd(new no(n.url),new no(n.params),new no(n.queryParams),new no(n.fragment),new no(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>p9(n,s));return new Uh(i,r)}}const dB="ngNavigationCancelingError";function sq(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=H8(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=oq(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function oq(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[dB]=!0,i.cancellationCode=e,t&&(i.url=t),i}function aq(n){return cq(n)&&H8(n.url)}function cq(n){return n&&n[dB]}class C_e{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new g9,this.attachRef=null}}let g9=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new C_e,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VC=!1;let UC=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new er,this.deactivateEvents=new er,this.attachEvents=new er,this.detachEvents=new er,this.name=r||Or,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Kt(4012,VC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Kt(4012,VC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Kt(4012,VC);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Kt(4013,VC);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new b_e(t,a,r.injector);if(i&&function x_e(n){return!!n.resolveComponentFactory}(i)){const l=i.resolveComponentFactory(o);this.activated=r.createComponent(l,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(U(g9),U(Uc),s3("name"),U(xc),U(ye))},n.\u0275dir=ht({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class b_e{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Dd?this.route:e===g9?this.childContexts:this.parent.get(e,t)}}let pB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Bn({type:n,selectors:[["ng-component"]],standalone:!0,features:[tW],decls:1,vars:0,template:function(t,i){1&t&&$e(0,"router-outlet")},dependencies:[UC],encapsulation:2}),n})();function lq(n,e){return n.providers&&!n._injector&&(n._injector=Qw(n.providers,e,`Route: ${n.path}`)),n._injector??e}function mB(n){const e=n.children&&n.children.map(mB),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Or&&(t.component=pB),t}function B4(n){return n.outlet||Or}function uq(n,e){const t=n.filter(i=>B4(i)===e);return t.push(...n.filter(i=>B4(i)!==e)),t}function m9(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class L_e{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),hB(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=S7(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),L2(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=S7(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=S7(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=S7(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new g_e(s.value.snapshot))}),e.children.length&&this.forwardEvent(new d_e(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(hB(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),hB(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=m9(r.snapshot),c=a?.get(Ui)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class hq{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class GC{constructor(e,t){this.component=e,this.route=t}}function D_e(n,e,t){const i=n._root;return A9(i,e?e._root:null,t,[i.value])}function E7(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function l0(n){return null!==s1(n)}(n)?e.get(n):n:i}function A9(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=S7(e);return n.children.forEach(o=>{(function B_e(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function R_e(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!P8(n.url,e.url);case"pathParamsOrQueryParamsChange":return!P8(n.url,e.url)||!P0(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fB(n,e)||!P0(n.queryParams,e.queryParams);default:return!fB(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new hq(i)):(s.data=o.data,s._resolvedData=o._resolvedData),A9(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new GC(a.outlet.component,o))}else o&&v9(e,a,r),r.canActivateChecks.push(new hq(i)),A9(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),L2(s,(o,a)=>v9(o,t.getContext(a),r)),r}function v9(n,e,t){const i=S7(n),r=n.value;L2(i,(s,o)=>{v9(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new GC(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function _9(n){return"function"==typeof n}function AB(n){return n instanceof LC||"EmptyError"===n?.name}const QC=Symbol("INITIAL_VALUE");function T7(){return I4(n=>XI(n.map(e=>e.pipe(Lc(1),F0(QC)))).pipe(qt(e=>{for(const t of e)if(!0!==t){if(t===QC)return QC;if(!1===t||t instanceof k8)return t}return!0}),_o(e=>e!==QC),Lc(1)))}function fq(n){return function xe(...n){return Ke(n)}(wa(e=>{if(H8(e))throw sq(0,e)}),qt(e=>!0===e))}const vB={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dq(n,e,t,i,r){const s=_B(n,e,t);return s.matched?function X_e(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?mi(r.map(o=>{const a=E7(o,n);return Ld(function O_e(n){return n&&_9(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(T7(),fq()):mi(!0)}(i=lq(e,i),e,t).pipe(qt(o=>!0===o?s:{...vB})):mi(s)}function _B(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...vB}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Bve)(t,n,e);if(!r)return{...vB};const s={};L2(r.posParams,(a,c)=>{s[c]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function WC(n,e,t,i,r="corrected"){if(t.length>0&&function J_e(n,e,t){return t.some(i=>jC(n,e,i)&&B4(i)!==Or)}(n,t,i)){const o=new gs(e,function Z_e(n,e,t,i){const r={};r[Or]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&B4(s)!==Or){const o=new gs([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[B4(s)]=o}return r}(n,e,i,new gs(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function eye(n,e,t){return t.some(i=>jC(n,e,i))}(n,t,i)){const o=new gs(n.segments,function Y_e(n,e,t,i,r,s){const o={};for(const a of i)if(jC(n,t,a)&&!r[B4(a)]){const c=new gs([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[B4(a)]=c}return{...r,...o}}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new gs(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function jC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function pq(n,e,t,i){return!!(B4(n)===i||i!==Or&&jC(e,t,n))&&("**"===n.path||_B(e,n,t).matched)}function gq(n,e,t){return 0===e.length&&!n.children[t]}const $C=!1;class qC{constructor(e){this.segmentGroup=e||null}}class mq{constructor(e){this.urlTree=e}}function y9(n){return C7(new qC(n))}function Aq(n){return C7(new mq(n))}class rye{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=WC(this.urlTree.root,[],[],this.config).segmentGroup,t=new gs(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Or).pipe(qt(s=>this.createUrlTree(zC(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(k0(s=>{if(s instanceof mq)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof qC?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Or).pipe(qt(r=>this.createUrlTree(zC(r),e.queryParams,e.fragment))).pipe(k0(r=>{throw r instanceof qC?this.noMatchError(r):r}))}noMatchError(e){return new Kt(4002,$C)}createUrlTree(e,t,i){const r=iB(e);return new k8(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(qt(s=>new gs([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return fs(r).pipe(Td(s=>{const o=i.children[s],a=uq(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(qt(c=>({segment:c,outlet:s})))}),D$((s,o)=>(s[o.outlet]=o.segment,s),{}),I$())}expandSegment(e,t,i,r,s,o){return fs(i).pipe(Td(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(k0(l=>{if(l instanceof qC)return mi(null);throw l}))),Nh(a=>!!a),k0((a,c)=>{if(AB(a))return gq(t,r,s)?mi(new gs([],{})):y9(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return pq(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):y9(t):y9(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Aq(s):this.lineralizeSegments(i,s).pipe(xi(o=>{const a=new gs(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=_B(t,r,s);if(!a)return y9(t);const f=this.applyRedirectCommands(c,r.redirectTo,u);return r.redirectTo.startsWith("/")?Aq(f):this.lineralizeSegments(r,f).pipe(xi(p=>this.expandSegment(e,t,i,p.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=lq(i,e),i.loadChildren?(i._loadedRoutes?mi({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(qt(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new gs(r,{})))):mi(new gs(r,{}))):dq(t,i,r,e).pipe(I4(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(xi(u=>{const f=u.injector??e,p=u.routes,{segmentGroup:g,slicedSegments:_}=WC(t,a,c,p),y=new gs(g.segments,g.children);if(0===_.length&&y.hasChildren())return this.expandChildren(f,p,y).pipe(qt(M=>new gs(a,M)));if(0===p.length&&0===_.length)return mi(new gs(a,{}));const w=B4(i)===s;return this.expandSegment(f,y,p,_,w?Or:s,!0).pipe(qt(x=>new gs(a.concat(x.segments),x.children)))})):y9(t)))}getChildConfig(e,t,i){return t.children?mi({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mi({routes:t._loadedRoutes,injector:t._loadedInjector}):function K_e(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?mi(!0):mi(r.map(o=>{const a=E7(o,n);return Ld(function k_e(n){return n&&_9(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(T7(),fq())}(e,t,i).pipe(xi(r=>r?this.configLoader.loadChildren(e,t).pipe(wa(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function nye(n){return C7(oq($C,3))}())):mi({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return mi(i);if(r.numberOfChildren>1||!r.children[Or])return C7(new Kt(4e3,$C));r=r.children[Or]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new k8(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return L2(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return L2(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new gs(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Kt(4001,$C);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class oye{}class lye{constructor(e,t,i,r,s,o,a,c){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=c}recognize(){const e=WC(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Or).pipe(qt(t=>{if(null===t)return null;const i=new NC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Or,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Uh(i,t),s=new iq(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=nq(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return fs(Object.keys(i.children)).pipe(Td(r=>{const s=i.children[r],o=uq(t,r);return this.processSegmentGroup(e,o,s,r)}),D$((r,s)=>r&&s?(r.push(...s),r):null),function Dve(n,e=!1){return xn((t,i)=>{let r=0;t.subscribe(_n(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),IC(null),I$(),qt(r=>{if(null===r)return null;const s=vq(r);return function uye(n){n.sort((e,t)=>e.value.outlet===Or?-1:t.value.outlet===Or?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return fs(t).pipe(Td(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),Nh(o=>!!o),k0(o=>{if(AB(o))return gq(i,r,s)?mi([]):mi(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!pq(t,i,r,s))return mi(null);let o;if("**"===t.path){const a=r.length>0?k$(r).parameters:{},c=yq(i)+r.length;o=mi({snapshot:new NC(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Cq(t),B4(t),t.component??t._loadedComponent??null,t,_q(i),c,bq(t),c),consumedSegments:[],remainingSegments:[]})}else o=dq(i,t,r,e).pipe(qt(({matched:a,consumedSegments:c,remainingSegments:l,parameters:u})=>{if(!a)return null;const f=yq(i)+c.length;return{snapshot:new NC(c,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Cq(t),B4(t),t.component??t._loadedComponent??null,t,_q(i),f,bq(t),f),consumedSegments:c,remainingSegments:l}}));return o.pipe(I4(a=>{if(null===a)return mi(null);const{snapshot:c,consumedSegments:l,remainingSegments:u}=a;e=t._injector??e;const f=t._loadedInjector??e,p=function hye(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:g,slicedSegments:_}=WC(i,l,u,p.filter(w=>void 0===w.redirectTo),this.relativeLinkResolution);if(0===_.length&&g.hasChildren())return this.processChildren(f,p,g).pipe(qt(w=>null===w?null:[new Uh(c,w)]));if(0===p.length&&0===_.length)return mi([new Uh(c,[])]);const y=B4(t)===s;return this.processSegment(f,p,g,_,y?Or:s).pipe(qt(w=>null===w?null:[new Uh(c,w)]))}))}}function fye(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function vq(n){const e=[],t=new Set;for(const i of n){if(!fye(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=vq(i.children);e.push(new Uh(i.value,r))}return e.filter(i=>!t.has(i))}function _q(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function yq(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Cq(n){return n.data||{}}function bq(n){return n.resolve||{}}function xq(n){return"string"==typeof n.title||null===n.title}function yB(n){return I4(e=>{const t=n(e);return t?fs(t).pipe(qt(()=>e)):mi(e)})}let Mq=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Or);return i}getResolvedTitleForRoute(t){return t.data[c9]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return xs(Sq)},providedIn:"root"}),n})(),Sq=(()=>{class n extends Mq{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(Xe(s$))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class yye{}class Cye extends class wye{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const XC=new Rt("",{providedIn:"root",factory:()=>({})}),wB=new Rt("ROUTES");let CB=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mi(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Ld(t.loadComponent()).pipe(wa(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),BC(()=>{this.componentLoaders.delete(t)})),r=new ZI(i,()=>new Je).pipe(YI());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return mi({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(qt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,l,u=!1;Array.isArray(a)?l=a:(c=a.create(t).injector,l=F$(c.get(wB,[],zn.Self|zn.Optional)));return{routes:l.map(mB),injector:c}}),BC(()=>{this.childrenLoaders.delete(i)})),o=new ZI(s,()=>new Je).pipe(YI());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return Ld(t()).pipe(xi(i=>i instanceof JQ||Array.isArray(i)?mi(i):fs(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(Xe(Cc),Xe(JD))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class xye{}class Mye{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Sye(n){throw n}function Eye(n,e,t){return e.parse("/")}const Tye={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lye={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Tq(){const n=xs(V$),e=xs(g9),t=xs($A),i=xs(Cc),r=xs(JD),s=xs(wB,{optional:!0})??[],o=xs(XC,{optional:!0})??{},a=xs(Sq),c=xs(Mq,{optional:!0}),l=xs(xye,{optional:!0}),u=xs(yye,{optional:!0}),f=new R1(null,n,e,t,i,r,F$(s));return l&&(f.urlHandlingStrategy=l),u&&(f.routeReuseStrategy=u),f.titleStrategy=c??a,function Dye(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,f),f}let R1=(()=>{class n{constructor(t,i,r,s,o,a,c){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Je,this.errorHandler=Sye,this.malformedUriErrorHandler=Eye,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>mi(void 0),this.urlHandlingStrategy=new Mye,this.routeReuseStrategy=new Cye,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(CB),this.configLoader.onLoadEndListener=p=>this.triggerEvent(new h_e(p)),this.configLoader.onLoadStartListener=p=>this.triggerEvent(new u_e(p)),this.ngModule=o.get(x8),this.console=o.get(Lge);const f=o.get(Xi);this.isNgZoneEnabled=f instanceof Xi&&Xi.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function Fve(){return new k8(new gs([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=tq(this.currentUrlTree,this.rootComponentType),this.transitions=new no({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(_o(r=>0!==r.id),qt(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),I4(r=>{let s=!1,o=!1;return mi(r).pipe(wa(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),I4(a=>{const c=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Lq(a.source)&&(this.browserUrlTree=a.extractedUrl),mi(a).pipe(I4(f=>{const p=this.transitions.getValue();return i.next(new aB(f.id,this.serializeUrl(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions.getValue()?Pa:Promise.resolve(f)}),function sye(n,e,t,i){return I4(r=>function iye(n,e,t,i,r){return new rye(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(qt(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),wa(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},r.urlAfterRedirects=f.urlAfterRedirects}),function pye(n,e,t,i,r,s){return xi(o=>function cye(n,e,t,i,r,s,o="emptyOnly",a="legacy"){return new lye(n,e,t,i,r,o,a,s).recognize().pipe(I4(c=>null===c?function aye(n){return new be(e=>e.error(n))}(new oye):mi(c)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r,s).pipe(qt(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),wa(f=>{if(r.targetSnapshot=f.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!f.extras.skipLocationChange){const g=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);this.setBrowserUrl(g,f)}this.browserUrlTree=f.urlAfterRedirects}const p=new s_e(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);i.next(p)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:p,extractedUrl:g,source:_,restoredState:y,extras:w}=a,C=new aB(p,this.serializeUrl(g),_,y);i.next(C);const x=tq(g,this.rootComponentType).snapshot;return mi(r={...a,targetSnapshot:x,urlAfterRedirects:g,extras:{...w,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Pa}),wa(a=>{const c=new o_e(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),qt(a=>r={...a,guards:D_e(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function V_e(n,e){return xi(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?mi({...t,guardsResult:!0}):function U_e(n,e,t,i){return fs(n).pipe(xi(r=>function q_e(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?mi(s.map(a=>{const c=m9(e)??r,l=E7(a,c);return Ld(function z_e(n){return n&&_9(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(Nh())})).pipe(T7()):mi(!0)}(r.component,r.route,t,e,i)),Nh(r=>!0!==r,!0))}(o,i,r,n).pipe(xi(a=>a&&function F_e(n){return"boolean"==typeof n}(a)?function G_e(n,e,t,i){return fs(e).pipe(Td(r=>a9(function W_e(n,e){return null!==n&&e&&e(new f_e(n)),mi(!0)}(r.route.parent,i),function Q_e(n,e){return null!==n&&e&&e(new p_e(n)),mi(!0)}(r.route,i),function $_e(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function I_e(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>DC(()=>mi(o.guards.map(c=>{const l=m9(o.node)??t,u=E7(c,l);return Ld(function H_e(n){return n&&_9(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(Nh())})).pipe(T7())));return mi(s).pipe(T7())}(n,r.path,t),function j_e(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return mi(!0);const r=i.map(s=>DC(()=>{const o=m9(e)??t,a=E7(s,o);return Ld(function P_e(n){return n&&_9(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Nh())}));return mi(r).pipe(T7())}(n,r.route,t))),Nh(r=>!0!==r,!0))}(i,s,n,e):mi(a)),qt(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),wa(a=>{if(r.guardsResult=a.guardsResult,H8(a.guardsResult))throw sq(0,a.guardsResult);const c=new a_e(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),_o(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),yB(a=>{if(a.guards.canActivateChecks.length)return mi(a).pipe(wa(c=>{const l=new c_e(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),I4(c=>{let l=!1;return mi(c).pipe(function gye(n,e){return xi(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return mi(t);let s=0;return fs(r).pipe(Td(o=>function mye(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!xq(r)&&(s[c9]=r.title),function Aye(n,e,t,i){const r=function vye(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return mi({});const s={};return fs(r).pipe(xi(o=>function _ye(n,e,t,i){const r=m9(e)??i,s=E7(n,r);return Ld(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(Nh(),wa(a=>{s[o]=a}))),JI(1),B$(s),k0(o=>AB(o)?Pa:C7(o)))}(s,n,e,i).pipe(qt(o=>(n._resolvedData=o,n.data=nq(n,t).resolve,r&&xq(r)&&(n.data[c9]=r.title),null)))}(o.route,i,n,e)),wa(()=>s++),JI(1),xi(o=>s===r.length?mi(t):Pa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),wa({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),wa(c=>{const l=new l_e(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}))}),yB(a=>{const c=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(wa(f=>{l.component=f}),qt(()=>{})));for(const f of l.children)u.push(...c(f));return u};return XI(c(a.targetSnapshot.root)).pipe(IC(),Lc(1))}),yB(()=>this.afterPreactivation()),qt(a=>{const c=function __e(n,e,t){const i=p9(n,e._root,t?t._root:void 0);return new eq(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:c}}),wa(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>qt(i=>(new L_e(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),wa({next(){s=!0},complete(){s=!0}}),BC(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),k0(a=>{if(o=!0,cq(a)){aq(a)||(this.navigated=!0,this.restoreHistory(r,!0));const c=new OC(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(c),aq(a)){const l=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Lq(r.source)};this.scheduleNavigation(l,"imperative",null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const c=new Y$(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(c);try{r.resolve(this.errorHandler(a))}catch(l){r.reject(l)}}return Pa}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(mB),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=r||this.routerState.root,u=c?this.currentUrlTree.fragment:o;let f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}return null!==f&&(f=this.removeEmptyProps(f)),Jve(l,this.currentUrlTree,t,f,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=H8(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Iye(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new Kt(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...Tye}:!1===i?{...Lye}:i,H8(t))return H$(this.currentUrlTree,t,r);const s=this.parseUrl(t);return H$(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Bu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,g)=>{a=p,c=g});const u=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):f=0,this.setTransition({id:u,targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,r){const s=new OC(t.id,this.serializeUrl(t.extractedUrl),i,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){_8()},n.\u0275prov=Lt({token:n,factory:function(){return Tq()},providedIn:"root"}),n})();function Lq(n){return"imperative"!==n}let w9=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Je,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=kh(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=kh(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=kh(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(U(R1),U(Dd),s3("tabindex"),U(ea),U(dn))},n.\u0275dir=ht({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&an("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[wr]}),n})(),bB=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Je,this.subscription=t.events.subscribe(s=>{s instanceof Bu&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=kh(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=kh(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=kh(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,o){return!!(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(U(R1),U(Dd),U(E8))},n.\u0275dir=ht({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&an("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&ps("target",i.target)("href",i.href,wc)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[wr]}),n})(),Dq=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new er,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof Bu&&this.update()})}ngAfterContentInit(){mi(this.links.changes,this.linksWithHrefs.changes,mi(null)).pipe(n1()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=fs(t).pipe(n1()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function Bye(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(U(R1),U(dn),U(ea),U(xc),U(w9,8),U(bB,8))},n.\u0275dir=ht({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&(ja(r,w9,5),ja(r,bB,5)),2&t){let s;Di(s=Ii())&&(i.links=s),Di(s=Ii())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[wr]}),n})();class Iq{}let Rye=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_o(t=>t instanceof Bu),Td(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Qw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return fs(r).pipe(n1())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):mi(null);const s=r.pipe(xi(o=>null===o?mi(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?fs([s,this.loader.loadComponent(i)]).pipe(n1()):s})}}return n.\u0275fac=function(t){return new(t||n)(Xe(R1),Xe(JD),Xe(ye),Xe(Iq),Xe(CB))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xB=new Rt("");let Bq=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof aB?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Z$&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new Z$(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_8()},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();function L7(n,e){return{\u0275kind:n,\u0275providers:e}}function MB(n){return[{provide:wB,multi:!0,useValue:n}]}function Fq(){const n=xs(Cc);return e=>{const t=n.get(_7);if(e!==t.components[0])return;const i=n.get(R1),r=n.get(kq);1===n.get(SB)&&i.initialNavigation(),n.get(Pq,null,zn.Optional)?.setUpPreloading(),n.get(xB,null,zn.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const kq=new Rt("",{factory:()=>new Je}),SB=new Rt("",{providedIn:"root",factory:()=>1});const Pq=new Rt("");function Hye(n){return L7(0,[{provide:Pq,useExisting:Rye},{provide:Iq,useExisting:n}])}const Hq=new Rt("ROUTER_FORROOT_GUARD"),zye=[$A,{provide:V$,useClass:tB},{provide:R1,useFactory:Tq},g9,{provide:Dd,useFactory:function Rq(n){return n.routerState.root},deps:[R1]},CB];function Oye(){return new qW("Router",R1)}let Nye=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[zye,[],MB(t),{provide:Hq,useFactory:Qye,deps:[[R1,new o3,new b0]]},{provide:XC,useValue:i||{}},i?.useHash?{provide:E8,useClass:Ame}:{provide:E8,useClass:_j},{provide:xB,useFactory:()=>{const n=xs(R1),e=xs(DAe),t=xs(XC);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Bq(n,e,t)}},i?.preloadingStrategy?Hye(i.preloadingStrategy).\u0275providers:[],{provide:qW,multi:!0,useFactory:Oye},i?.initialNavigation?Wye(i):[],[{provide:zq,useFactory:Fq},{provide:Kw,multi:!0,useExisting:zq}]]}}static forChild(t){return{ngModule:n,providers:[MB(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Xe(Hq,8))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[pB]}),n})();function Qye(n){return"guarded"}function Wye(n){return["disabled"===n.initialNavigation?L7(3,[{provide:WA,multi:!0,useFactory:()=>{const e=xs(R1);return()=>{e.setUpLocationChangeListener()}}},{provide:SB,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?L7(2,[{provide:SB,useValue:0},{provide:WA,multi:!0,deps:[Cc],useFactory:e=>{const t=e.get(gme,Promise.resolve());let i=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(R1),a=e.get(kq);(function r(s){e.get(R1).events.pipe(_o(a=>a instanceof Bu||a instanceof OC||a instanceof Y$),qt(a=>a instanceof Bu||a instanceof OC&&(0===a.code||1===a.code)&&null),_o(a=>null!==a),Lc(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),o.afterPreactivation=()=>(s(!0),i||a.closed?mi(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const zq=new Rt("");var K3=(()=>{return(n=K3||(K3={})).insulated="insulated",n.orientation="orientation",n.baseDimension="base-dimension",n.extensionToNorth="extension-north",n.extensionToSouth="extension-south",n.extensionToWest="extension-west",n.extensionToEast="extension-east",n.halfCircle="half-circle",n.bendPoint="bend-point",n.roofBoth="roof-both",n.roofCircle="roof-circle",n.roof70="roof-70",n.roofWalls="roof-walls",n.efficiency="efficiency",n.simple="simple",n.greyOut="greyOut",n.amountSteps="amount-steps",n.viewlines="viewlines",n.warmWaterBuffer="warm-water-buffer",n.iJoists="i-joits",n.dampOpen="damp-open",n.airTight="air-tight",n.pipeLayer="pipe-layer",n.woodFiberPlate="wood-fiber-plate",K3;var n})(),_t=(()=>{return(n=_t||(_t={})).welcome="welcome",n.passiv="passiv",n.basics="basics",n.extensions="extensions",n.tower="tower",n.end="end",n.EndOfPageHouse="EndOfPageHouse",n.roofBasics="roof-basics",n.roofCircle="roof-circle",n.roofIntermezzo="roof-intermezzo",n.roof70="roof70",n.roofChoice="roof-choice",n.roofEdge="roof-edge",n.stairStart="stair-start",n.stairBasic="stair-basic",n.stairCheck="stair-check",n.stairPlan="stair-plan",n.facadeStart="facade-start",n.facadeWindow="facade-window",n.facadeBrick="facade-Brick",n.facadeDoor="facade-Door",n.constructionWelcome="construction-welcome",n.constructionFoundation="construction-foundation",n.constructionCrawlerSpace="construction-crawler-space",n.constructionGroundFloor="construction-ground-floor",n.constructionWallSole="construction-wall-sole",n.constructionWallJoists="construction-wall-joists",n.constructionWallOSB="construction-wall-osb",n.constructionWallTape="construction-wall-tape",n.constructionFloorLVL="construction-floor-lvl",n.constructionRoofRidge="construction-roof-ridge",n.constructionRoofJoist="construction-roof-joist",n.constructionRoofInside="construction-roof-inside",n.constructionRoofOuterSheet="construction-roof-outerSheet",n.constructionRoofSpace="construction-roof-space",n.constructionRoofTiles="construction-roof-tiles",n.constructionWallInsulation="construction-wall-insulation",n.constructionWallOuterSheet="construction-wall-outer-sheet",n.constructionWallSpace="construction-wall-space",n.constructionWallFacade="construction-wall-facade",n.constructionWallGips="construction-wall-gips",n.constructionWallService="construction-wall-service",n.constructionFloor="construction-floor",n.constructionFloorOSB="construction-floor-osb",n.constructionRoof="construction-roof",n.constructionWallFinish="construction-wall-finish",n.constructionParameters="construction-parameters",n.installationWelcome="installations-welcome",n.installationDrinkWater="installations-drink-water",n.installationGreyWater="installations-grey-water",n.installationHeating="installations-heating",n.installationElectricity="installations-electricity",n.installationVentilation="installations-ventilation",n.installationSmartHome="installations-smartHome",n.wiredWelcome="wired-welcome",n.wiredPower="wired-power",n.wiredEthernet="wired-ethernet",n.wiredSafety="wired-safety",n.wiredExtra="wired-extra",n.wiredLight="wired-light",n.wiredVent="wired-vent",n.wiredWater="wired-water",n.costsWelcome="costs-welcome",n.costsConstruction="costs-construction",n.costsPreparations="costs-preparations",n.costsOpenings="costs-openings",n.costsElectra="costs-electra",n.costsWater="costs-water",n.costsFinishes="costs-finishes",n.costsOuterFinishes="costs-outer-finishes",n.costsTotals="costs-totals",n.planningPreps="planning-preps",n.planningFoundation="planning-foundation",n.planningFraming="planning-framing",n.planningOutside="planning-outside",n.planningInstallations="planning-installations",n.planningFinishing="planning-finishing",n.House3D="House3D",_t;var n})(),tt=(()=>{return(n=tt||(tt={})).top="top",n.ground="ground",n.ceiling="ceiling",n.all="all",n.tower="tower",n.none="none",tt;var n})(),Id=(()=>{return(n=Id||(Id={})).left="left",n.right="right",n.none="none",Id;var n})(),yo=(()=>{return(n=yo||(yo={})).house2D="house2D",n.cross="cross",n.stairPlan="stairPlan",n.stairCross="stairCross",n.construction="construction",n.House3D="House3D",n.map="map",n.none="none",yo;var n})(),Ge=(()=>{return(n=Ge||(Ge={})).perilex="perilex",n.socket="socket",n.lightBulb="light-bulb",n.lightSwitch="light-switch",n.dlc="dlc",n.dimmer="dimmer",n.poe="poe",n.ethernet="ethernet",n.wifi="wifi",n.camera="camera",n.alarm="alarm",n.smoke="smoke",n.pir="pir",n.blinds="blinds",n.temperature="temperature",n.ventIn="vent-in",n.ventOut="vent-out",n.waterCold="water-cold",n.waterRain="water-rain",n.waterWarm="water-warm",n.drain="drain",n.shower="shower",n.toilet="toilet",Ge;var n})(),D2=(()=>{return(n=D2||(D2={})).doors="doors",n.stats="stats",n.examplePlan="examplePlan",n.theoreticalWalls="theoreticalWalls",n.silhouette="silhouette",n.measure="measure",n.decoration="decoration",n.stramien="stramien",n.towerFootprint="towerFootprint",n.grid="grid",n.walkLine="walkLine",n.minimumHeight="minimumHeight",D2;var n})(),Ru=(()=>{return(n=Ru||(Ru={})).OutsidePOE="OutsidePOE",n.SharedEthernet="SharedEthernet",Ru;var n})(),Bd=(()=>{return(n=Bd||(Bd={})).clipBoxEnabled="clipBoxEnabled",n.clipBoxShow="clipBoxShow",n.mirror="mirror",Bd;var n})(),Y2=(()=>{return(n=Y2||(Y2={})).foundation="house3d-foundation",n.groundFloor="house3d-groundFloor",n.topFloor="house3d-topFloor",n.roof="house3d-roof",n.innerWall="house3d-innerWall",n.outerWall="house3d-outerWall",n.studs="house3d-studs",n.lvl="house3d-lvl",n.debug="house3d-debug",n.tower="house3d-tower",Y2;var n})(),Bi=(()=>{return(n=Bi||(Bi={})).foundation="A1-construction-foundation",n.crawlerSpace="A2-construction-crawler-space",n.groundFloor="A3-construction-ground-floor",n.sole="A4-construction-sole",n.joists="A5-construction-joists",n.osbWall="A6-construction-osb-wall",n.tapes="A7-construction-tapes",n.floorLVL="B1-construction-floorLVL",n.topFloorJoists="B2-construction-top-floor-joists",n.topFloorOSB="B2-construction-top-floor-osb",n.roofRidge="B3-construction-roof-ridge",n.roofJoists="B4-construction-roof-joists",n.roofOSB="B5-construction-roof-osb",n.insulation="C1-construction-insulation",n.outerSheet="C2-construction-outerSheet",n.roofOuterSheets="C3-construction-roof-outerSheet",n.roofSpace="C4-construction-roof-space",n.roofTiles="C5-construction-roof-tiles",n.space="D1-construction-space",n.facade="D2-construction-facade",n.serviceBeams="E1-construction-serviceBeams",n.serviceInsulation="E2-construction-serviceInsulation",n.gips="E3-construction-gips",Bi;var n})(),Ho=(()=>{return(n=Ho||(Ho={})).red="red",n.green="green",n.blue="blue",n.x="x",n.y="y",n.z="z",Ho;var n})();let R4=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=bd(this.platformId)}static getCookieRegExp(t){const i=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const r=n.getCookieRegExp(t).exec(this.document.cookie);return r[1]?n.safeDecodeURIComponent(r[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(r=>{const[s,o]=r.split("=");t[n.safeDecodeURIComponent(s.replace(/^ /,""))]=n.safeDecodeURIComponent(o)}),t}set(t,i,r,s,o,a,c){if(!this.documentIsAccessible)return;if("number"==typeof r||r instanceof Date||s||o||a||c)return void this.set(t,i,{expires:r,path:s,domain:o,secure:a,sameSite:c||"Lax"});let l=encodeURIComponent(t)+"="+encodeURIComponent(i)+";";const u=r||{};u.expires&&(l+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(l+="path="+u.path+";"),u.domain&&(l+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(l+="secure;"),u.sameSite||(u.sameSite="Lax"),l+="sameSite="+u.sameSite+";",this.document.cookie=l}delete(t,i,r,s,o="Lax"){if(!this.documentIsAccessible)return;const a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:r,secure:s,sameSite:o})}deleteAll(t,i,r,s="Lax"){if(!this.documentIsAccessible)return;const o=this.getAll();for(const a in o)o.hasOwnProperty(a)&&this.delete(a,t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(q3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mo=(()=>{class n{constructor(t,i){this.cookieService=t,this.router=i,this.darkMode=!1,this.title="Lindelund",this.discord="https://discord.gg/hrjfzY3yTp",this.github="https://github.com/PassiveOpen/PassiveOpen.github.io",this.youtube="https://www.youtube.com/channel/UCtP_RM2k4-27u40nC0ncpdw",this.patreon="https://www.patreon.com/PassiveOpen",this.instagram="https://www.instagram.com/2_plings/",this.update$=new Je,this.tag$=new no(void 0),this.graphic$=new no(void 0),this.states$=new no({}),this.popupActive$=new no(!1),this.fullscreen$=new no(!0),this.svgTransform$=new no(void 0),this.page$=this.router.events.pipe(_o(r=>r instanceof Bu),F0(this.router),qt(r=>r.url.toLowerCase().split("/")[1])),this.floor$=new no(tt.ground),this.scroll$=new no({scroll:0,percentage:0,section:void 0,graphicSide:void 0,graphic:void 0}),this.getCookies()}setStatesSilent(t,i,r){t.flatMap(s=>this.setState(s,i,r,!1))}hardSetStates(t){const i=this.states$.value;Object.entries(t).forEach(([r,s])=>{i[r]=s}),this.commitState(i)}setState(t,i,r,s=!0){const o=this.states$.value;(t instanceof Array?t:[t]).flatMap(a=>{r&&(o[a]=Boolean(this.cookieService.get("states"))),o[a]=void 0!==i?i:void 0===o[a]||!o[a]}),s?this.commitState(o):this.silentStates=o}commitState(t){this.states$.next(t),this.cookieService.set("states",JSON.stringify(t))}setTransformCookie(t,i){this.svgTransform$.next({[i]:t}),this.cookieService.set("svgTransform",JSON.stringify(this.svgTransform$.value))}getCookies(){let t=this.cookieService.get("floor");""===t&&(t=tt.ground),this.floor$.next(t);let i=this.cookieService.get("fullscreen");i=""!==i&&"true"===i,this.fullscreen$.next(i);let r=this.cookieService.get("svgTransform");(""===r||!1===i)&&(r="{}"),this.svgTransform$.next(JSON.parse(r));let s=this.cookieService.get("darkMode");this.setDarkMode(""===s?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches:"true"===s);let o=this.cookieService.get("states");""===o&&(o="{}"),this.states$.next(JSON.parse(o))}setFloor(t){let i;void 0!==t?i=t:(this.floor$.value===tt.ground&&(i=tt.top),this.floor$.value===tt.top&&(i=tt.ground)),this.floor$.next(i),this.cookieService.set("floor",i),this.update$.next()}setTag(t){this.tag$.next(t),this.update$.next()}setDarkMode(t,i=!1){document.body.classList.remove("light"),document.body.classList.remove("dark"),this.darkMode=void 0!==t?t:!this.darkMode,this.darkMode?document.body.classList.add("dark"):document.body.classList.add("light"),i&&this.cookieService.set("darkMode",`${this.darkMode}`,.1)}}return n.\u0275fac=function(t){return new(t||n)(Xe(R4),Xe(R1))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Oq(n){for(let e in n){let t=n[e]??"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const EB="inline",eb=["row","column","row-reverse","column-reverse"];function Nq(n){let[e,t,i]=Vq(n);return function Kye(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}function Vq(n){n=n?.toLowerCase()??"";let[e,t,i]=n.split(" ");return eb.find(r=>r===e)||(e=eb[0]),t===EB&&(t=i!==EB?i:"",i=EB),[e,qye(t),!!i]}function C9(n){let[e]=Vq(n);return e.indexOf("row")>-1}function qye(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function Gh(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}const Yye={provide:Kw,useFactory:function Xye(n,e){return()=>{if(bd(e)){const t=Array.from(n.querySelectorAll(`[class*=${Uq}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(r=>{r.classList.contains(`${Uq}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[Pi,q3],multi:!0},Uq="flex-layout-";let TB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[Yye]}),n})();class z8{constructor(e=!1,t="all",i="",r="",s=0){this.matches=e,this.mediaQuery=t,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new z8(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let Zye=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,r){const s=this.stylesheet.get(t);s?s.set(i,r):this.stylesheet.set(t,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const r=this.stylesheet.get(t);let s="";if(r){const o=r.get(i);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LB={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Fu=new Rt("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>LB}),D7=new Rt("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),DB=new Rt("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Gq(n,e){return n=n?.clone()??new z8,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class F1{constructor(){this.shouldCache=!0}sideEffect(e,t,i){}}let La=(()=>{class n{constructor(t,i,r,s){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(t,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:Oq(i),this._applyMultiValueStyleToElement(s,t)}applyStyleToElements(t,i=[]){const r=this.layoutConfig.disableVendorPrefixes?t:Oq(t);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(t){const i="flex-direction";let r=this.lookupStyle(t,i);return[r||"row",this.lookupInlineStyle(t,i)||y7(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){return t.getAttribute(i)??""}lookupInlineStyle(t,i){return bd(this._platformId)?t.style.getPropertyValue(i):function Jye(n,e){return Qq(n)[e]??""}(t,i)}lookupStyle(t,i,r=!1){let s="";return t&&((s=this.lookupInlineStyle(t,i))||(bd(this._platformId)?r||(s=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(t,i)))),s?s.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(r=>{const s=t[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",bd(this._platformId)||!this._serverModuleLoaded?bd(this._platformId)?i.style.setProperty(r,a):ewe(i,r,a):this._serverStylesheet.addStyleToElement(i,r,a)})}}return n.\u0275fac=function(t){return new(t||n)(Xe(Zye),Xe(D7),Xe(q3),Xe(Fu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ewe(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=Qq(n);i[e]=t??"",function twe(n,e){let t="";for(const i in e)e[i]&&(t+=`${i}:${e[i]};`);n.setAttribute("style",t)}(n,i)}function Qq(n){const e={},t=n.getAttribute("style");if(t){const i=t.split(/;+/g);for(let r=0;r<i.length;r++){const s=i[r].trim();if(s.length>0){const o=s.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${s}`);e[s.substr(0,o).trim()]=s.substr(o+1).trim()}}}return e}function b9(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function nwe(n,e){return(n.priority||0)-(e.priority||0)}let IB=(()=>{class n{constructor(t,i,r){this._zone=t,this._platformId=i,this._document=r,this.source=new no(new z8(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,r)=>{i.matches&&t.push(r)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(r=>r.matches)}observe(t,i=!1){if(t&&t.length){const r=this._observable$.pipe(_o(o=>!i||t.indexOf(o.mediaQuery)>-1));return e2(new be(o=>{const a=this.registerQuery(t);if(a.length){const c=a.pop();a.forEach(l=>{o.next(l)}),this.source.next(c)}o.complete()}),r)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],r=[];return function iwe(n,e){const t=n.filter(i=>!Wq[i]);if(t.length>0){const i=t.join(", ");try{const r=e.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),e.head.appendChild(r),t.forEach(s=>Wq[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const o=c=>{this._zone.run(()=>this.source.next(new z8(c.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new z8(!0,s))}),r}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function rwe(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,bd(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(Xe(Xi),Xe(q3),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wq={},swe=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],jq="(orientation: portrait) and (max-width: 599.98px)",$q="(orientation: landscape) and (max-width: 959.98px)",qq="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",Kq="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",Xq="(orientation: portrait) and (min-width: 840px)",Yq="(orientation: landscape) and (min-width: 1280px)",Qh={HANDSET:`${jq}, ${$q}`,TABLET:`${qq} , ${Kq}`,WEB:`${Xq}, ${Yq} `,HANDSET_PORTRAIT:`${jq}`,TABLET_PORTRAIT:`${qq} `,WEB_PORTRAIT:`${Xq}`,HANDSET_LANDSCAPE:`${$q}`,TABLET_LANDSCAPE:`${Kq}`,WEB_LANDSCAPE:`${Yq}`},owe=[{alias:"handset",priority:2e3,mediaQuery:Qh.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Qh.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Qh.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Qh.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Qh.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Qh.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Qh.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Qh.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Qh.WEB_PORTRAIT,overlapping:!0}],awe=/(\.|-|_)/g;function cwe(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const fwe=new Rt("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=xs(DB),e=xs(Fu),t=[].concat.apply([],(n||[]).map(r=>Array.isArray(r)?r:[r]));return function hwe(n,e=[]){const t={};return n.forEach(i=>{t[i.alias]=i}),e.forEach(i=>{t[i.alias]?Gh(t[i.alias],i):t[i.alias]=i}),function uwe(n){return n.forEach(e=>{e.suffix||(e.suffix=function lwe(n){return n.replace(awe,"|").split("|").map(cwe).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(i=>t[i]))}((e.disableDefaultBps?[]:swe).concat(e.addOrientationBps?owe:[]),t)}});let BB=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(nwe)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias===t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,i){let r=this.findByMap.get(t);return r||(r=this.items.find(i)??null,this.findByMap.set(t,r)),r??null}}return n.\u0275fac=function(t){return new(t||n)(Xe(fwe))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const I7="print",dwe={alias:I7,mediaQuery:I7,priority:1e3};let pwe=(()=>{class n{constructor(t,i,r){this.breakpoints=t,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new gwe,this.deactivations=[]}withPrintQuery(t){return[...t,I7]}isPrintEvent(t){return t.mediaQuery.startsWith(I7)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(b9)}updateEvent(t){let i=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(i=this.getEventBreakpoints(t)[0],t.mediaQuery=i?.mediaQuery??""),Gq(t,i)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new z8(!0,I7))),t.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(t){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const r=this.breakpoints.findByQuery(i.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),o=!this.formerActivations&&t.activatedBreakpoints.includes(r);(s||o)&&(this.deactivations.push(r),this.deactivations.sort(b9))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(Xe(BB),Xe(Fu),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gwe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(dwe),e.sort(b9),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function mwe(n){return n?.mediaQuery.startsWith(I7)??!1}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let $a=(()=>{class n{constructor(t,i,r){this.matchMedia=t,this.breakpoints=i,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Je,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);if(i){t=Gq(t,i);const r=this.activatedBreakpoints.indexOf(i);t.matches&&-1===r?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(b9),this.updateStyles()):!t.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(b9),this.updateStyles())}}init(t,i,r,s,o=[]){Zq(this.updateMap,t,i,r),Zq(this.clearMap,t,i,s),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,r){const s=this.elementMap.get(t);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(o)return o.get(i)}}hasValue(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(t,i,r,s){let o=this.elementMap.get(t);if(o){const c=(o.get(s)??new Map).set(i,r);o.set(s,c),this.elementMap.set(t,o)}else o=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(t,o);const a=this.getValue(t,i);void 0!==a&&this.updateElement(t,i,a)}trackValue(t,i){return this.subject.asObservable().pipe(_o(r=>r.element===t&&r.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(t);s&&s.forEach((o,a)=>{this.updateElement(i,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(t,o),s){const a=s.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const r=this.clearMap.get(t);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,r){const s=this.updateMap.get(t);if(s){const o=s.get(i);o&&(o(r),this.subject.next({element:t,key:i,value:r}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(t));const r=this.elementMap.get(t);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(t,i,s.get(i)):s.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let r=this.elementKeyMap.get(t);r||(r=new Set,this.elementKeyMap.set(t,r)),r.add(i)}watchExtraTriggers(t,i,r){if(r&&r.length){let s=this.watcherMap.get(t);if(s||(s=new Map,this.watcherMap.set(t,s)),!s.get(i)){const a=e2(...r).subscribe(()=>{const c=this.getValue(t,i);this.updateElement(t,i,c)});s.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=t.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const r=t.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const t=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(wa(this.hook.interceptEvents(this)),_o(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(Xe(IB),Xe(BB),Xe(pwe))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zq(n,e,t,i){if(void 0!==i){const r=n.get(e)??new Map;r.set(t,i),n.set(e,r)}}let f1=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Je,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(t);(!o||!s)&&(o=r.buildStyles(t,i),s&&this.styleCache.set(t,o)),this.mru={...o},this.applyStyleToElement(o),r.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[r,s]=this.styler.getFlowDirection(t);if(!s&&i){const o=Nq(r);this.styler.applyStyleToElements(o,[t])}return r.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,r=this.nativeElement){this.styler.applyStyleToElement(r,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(F1),U(La),U($a))},n.\u0275dir=ht({type:n,features:[wr]}),n})();function Jq(n,e="1",t="1"){let i=[e,t,n],r=n.indexOf("calc");if(r>0){i[2]=eK(n.substring(r).trim());let s=n.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=eK(n.trim());else{let s=n.split(" ");i=3===s.length?s:[e,t,n]}return i}function eK(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function tb(n,e){if(void 0===e)return n;const t=i=>{const r=+i.slice(0,-"x".length);return n.endsWith("x")&&!isNaN(r)?`${r*e.value}${e.unit}`:n};return n.includes(" ")?n.split(" ").map(t).join(" "):t(n)}let _we=(()=>{class n extends F1{buildStyles(t,{display:i}){const r=Nq(t);return{...r,display:"none"===i?i:r.display}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ywe=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let wwe=(()=>{class n extends f1{constructor(t,i,r,s,o){super(t,r,i,s),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=nK.get(r)??new Map,nK.set(r,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:r}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(La),U(_we),U($a),U(Fu))},n.\u0275dir=ht({type:n,features:[Ot]}),n})(),x9=(()=>{class n extends wwe{constructor(){super(...arguments),this.inputs=ywe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[Ot]}),n})();const nK=new Map,iK={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let Cwe=(()=>{class n extends F1{constructor(t,i){super(),this._styler=t,this._config=i}buildStyles(t,i){return t.endsWith(nb)?function Dwe(n,e){const[t,i]=n.split(" "),s=l=>`-${l}`;let o="0px",a=s(i??t),c="0px";return"rtl"===e?c=s(t):o=s(t),{margin:`0px ${o} ${a} ${c}`}}(t=tb(t=t.slice(0,t.indexOf(nb)),this._config.multiplier),i.directionality):{}}sideEffect(t,i,r){const s=r.items;if(t.endsWith(nb)){const o=function Lwe(n,e){const[t,i]=n.split(" ");let s="0px",a="0px";return"rtl"===e?a=t:s=t,{padding:`0px ${s} ${i??t} ${a}`}}(t=tb(t=t.slice(0,t.indexOf(nb)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(o,r.items)}else{t=tb(t,this._config.multiplier),t=this.addFallbackUnit(t);const o=s.pop(),a=function Iwe(n,e){const t=rK(e.directionality,e.layout),i={...iK};return i[t]=n,i}(t,r);this._styler.applyStyleToElements(a,s),this._styler.applyStyleToElements(iK,[o])}}addFallbackUnit(t){return isNaN(+t)?t:`${t}${this._config.defaultUnit}`}}return n.\u0275fac=function(t){return new(t||n)(Xe(La),Xe(Fu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bwe=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let xwe=(()=>{class n extends f1{constructor(t,i,r,s,o,a){super(t,o,s,a),this.zone=i,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new Je;const c=[this.directionality.change,this.observerSubject.asObservable()];this.init(c),this.marshal.trackValue(this.nativeElement,"layout").pipe(Ta(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const t=this.nativeElement.children,i=[];for(let r=t.length;r--;)i[r]=t[r];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(t){const r=t.value.split(" ");this.layout=r[0],eb.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(t){const i=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const o=+this.styler.lookupStyle(r,"order"),a=+this.styler.lookupStyle(s,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(i.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=Mwe:"row"===s&&"rtl"!==r?this.styleCache=Ewe:"column"===s&&"rtl"===r?this.styleCache=Swe:"column"===s&&"rtl"!==r&&(this.styleCache=Twe),this.addStyles(t,{directionality:r,items:i,layout:s})}}clearStyles(){const t=Object.keys(this.mru).length>0,i=t?"padding":rK(this.directionality.value,this.layout);t&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(t){const i=this.marshal.getValue(t,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(t,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{typeof MutationObserver<"u"&&(this.observer=new MutationObserver(t=>{t.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(Xi),U(Oh),U(La),U(Cwe),U($a))},n.\u0275dir=ht({type:n,features:[Ot]}),n})(),M9=(()=>{class n extends xwe{constructor(){super(...arguments),this.inputs=bwe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[Ot]}),n})();const Mwe=new Map,Swe=new Map,Ewe=new Map,Twe=new Map,nb=" grid";function rK(n,e){switch(e){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===n?"margin-left":"margin-right";case"row-reverse":return"rtl"===n?"margin-right":"margin-left"}}let Bwe=(()=>{class n extends F1{constructor(t){super(),this.layoutConfig=t}buildStyles(t,i){let[r,s,...o]=t.split(" "),a=o.join(" ");const c=i.direction.indexOf("column")>-1?"column":"row",l=C9(c)?"max-width":"max-height",u=C9(c)?"min-width":"min-height",f=String(a).indexOf("calc")>-1,p=f||"auto"===a,g=String(a).indexOf("%")>-1&&!f,_=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let y=f||_;r="0"==r?0:r,s="0"==s?0:s;const w=!r&&!s;let C={};const x={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const M=!1!==this.layoutConfig.useColumnBasisZero;a="row"===c?"0%":M?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!y&&!g&&!isNaN(a)&&(a+="%"),"0%"===a&&(y=!0),"0px"===a&&(a="0%"),C=Gh(x,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":y?a:"100%"}:{flex:`${r} ${s} ${y?a:"100%"}`})}return C.flex||C["flex-grow"]||(C=Gh(x,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(C[u]=w||y&&r?a:null,C[l]=w||!p&&s?a:null),C[u]||C[l]?i.hasWrap&&(C[f?"flex-basis":"flex"]=C[l]?f?C[l]:`${r} ${s} ${C[l]}`:f?C[u]:`${r} ${s} ${C[u]}`):C=Gh(x,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),Gh(C,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)(Xe(Fu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rwe=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let Fwe=(()=>{class n extends f1{constructor(t,i,r,s,o){super(t,s,i,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Ta(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Ta(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const r=t.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=Hwe:s&&!o?this.styleCache=kwe:!s&&o?this.styleCache=zwe:!s&&!o&&(this.styleCache=Pwe);const c=Jq(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(c.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const i=Jq(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(La),U(Fu),U(Bwe),U($a))},n.\u0275dir=ht({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[Ot]}),n})(),RB=(()=>{class n extends Fwe{constructor(){super(...arguments),this.inputs=Rwe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[Ot]}),n})();const kwe=new Map,Pwe=new Map,Hwe=new Map,zwe=new Map;let aCe=(()=>{class n extends F1{buildStyles(t,i){const r={},[s,o]=t.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return Gh(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?C9(i.layout)?null:"100%":null,"max-height":"stretch"===o&&C9(i.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cCe=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let lCe=(()=>{class n extends f1{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Ta(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=pCe:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=mCe:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=gCe:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=ACe:"column-reverse"===i&&!r&&(this.styleCache=dCe):this.styleCache=hCe:this.styleCache=fCe:this.styleCache=uCe,this.addStyles(t,{layout:i,inline:r})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),eb.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(La),U(aCe),U($a))},n.\u0275dir=ht({type:n,features:[Ot]}),n})(),Wh=(()=>{class n extends lCe{constructor(){super(...arguments),this.inputs=cCe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[Ot]}),n})();const uCe=new Map,hCe=new Map,fCe=new Map,dCe=new Map,pCe=new Map,gCe=new Map,mCe=new Map,ACe=new Map;let sK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[TB,B8]}),n})();var H0=(()=>{return(n=H0||(H0={})).primary="primary",n.accent="accent",n.warn="warn",n.color0="color-0",n.color5="color-5",n.color10="color-10",n.color15="color-15",n.color20="color-20",n.color30="color-30",n.color40="color-40",n.color50="color-50",n.color60="color-60",n.color70="color-70",n.color80="color-80",n.color90="color-90",n.color100="color-100",H0;var n})();let oK=(()=>{class n{constructor(){this.colors={}}add(t,i){const r=i.replace("rgb(","").replace(")","");this.colors[t]=r.split(", ").map(s=>Number(s))}rgb(t){const[i,r,s]=this.colors[t];return`rgb(${i}, ${r}, ${s})`}rgba(t,i){const[r,s,o]=this.colors[t];return`rgba(${r}, ${s}, ${o}, ${i})`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vCe=["primary"];function _Ce(n,e){if(1&n&&(H(0,"div"),V(1),N()),2&n){const t=e.$implicit;(function xu(n){Su(sQ,rpe,n,!1)})("background:var(--"+t+")"),va("mat-button ",t,""),Z(1),Jn(" ",t,"")}}let yCe=(()=>{class n{constructor(t,i){this.colorService=t,this.host=i,this.keys=Object.values(H0)}ngAfterViewInit(){this.parseColors()}parseColors(){const t=this.host.nativeElement;this.keys.forEach(i=>{const r=t.querySelector(`.${i}`);if(!r)return;const s=getComputedStyle(r).backgroundColor;this.colorService.add(i,s)})}debug(t,i){console.log(`%c ${t}: ${i}`,`background: ${i}; color: ${this.invertColor(i)}`)}invertColor(t,i=!0){function r(c){return`${c}`.padStart(3,"0")}let[s,o,a]=t.replace(")","").replace("rgb(","").split(", ");return i?.299*s+.587*o+.114*a>186?"#000000":"#FFFFFF":(s=255-s,o=255-o,a=255-a,"#"+r(s)+r(o)+r(a))}}return n.\u0275fac=function(t){return new(t||n)(U(oK),U(dn))},n.\u0275cmp=Bn({type:n,selectors:[["color"]],viewQuery:function(t,i){if(1&t&&Xs(vCe,5),2&t){let r;Di(r=Ii())&&(i.primary=r.first)}},decls:1,vars:1,consts:[[3,"class","style",4,"ngFor","ngForOf"]],template:function(t,i){1&t&&Wt(0,_Ce,2,6,"div",0),2&t&&Ce("ngForOf",i.keys)},dependencies:[p3],styles:["[_nghost-%COMP%]{display:none}"]}),n})();function O8(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function ab(n,e=n9){return xn((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+n,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}t.subscribe(_n(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function kB(n){return _o((e,t)=>n<=t)}function FCe(n,e){return n===e}let fK=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kCe=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=L8(t);return new be(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new Je,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Xe(fK))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dK=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new er,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Er(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Iu(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(ab(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(U(kCe),U(dn),U(Xi))},n.\u0275dir=ht({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),S9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[fK]}),n})();const pK=new Set;let B7,PCe=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):zCe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function HCe(n){if(!pK.has(n))try{B7||(B7=document.createElement("style"),B7.setAttribute("type","text/css"),document.head.appendChild(B7)),B7.sheet&&(B7.sheet.insertRule(`@media ${n} {body{ }}`,0),pK.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(m3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zCe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let OCe=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Je}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return gK(_C(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=XI(gK(_C(t)).map(o=>this._registerQuery(o).observable));return s=a9(s.pipe(Lc(1)),s.pipe(kB(1),ab(0))),s.pipe(qt(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new be(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(F0(i),qt(({matches:o})=>({query:t,matches:o})),Ta(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(Xe(PCe),Xe(Xi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gK(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class vK extends class UCe{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Je,this._typeaheadSubscription=Re.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Je,this.change=new Je,e instanceof m7&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(wa(t=>this._pressedLetters.push(t)),ab(e),_o(()=>this._pressedLetters.length>0),qt(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||O8(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof m7?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let cb=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function QCe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function GCe(n){try{return n.frameElement}catch{return null}}(function ZCe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===yK(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=yK(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function XCe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function YCe(n){return!function jCe(n){return function qCe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function WCe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function $Ce(n){return function KCe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||_K(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(Xe(m3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _K(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function yK(n){if(!_K(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class JCe{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Lc(1)).subscribe(e)}}let PB=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new JCe(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(Xe(cb),Xe(Xi),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HB(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function zB(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const ebe=new Rt("cdk-input-modality-detector-options"),tbe={ignoreKeys:[18,17,224,91,16]},R7=Md({passive:!0,capture:!0});let nbe=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new no(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=I8(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(HB(o)?"keyboard":"mouse"),this._mostRecentTarget=I8(o))},this._onTouchstart=o=>{zB(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=I8(o))},this._options={...tbe,...s},this.modalityDetected=this._modality.pipe(kB(1)),this.modalityChanged=this.modalityDetected.pipe(function RCe(n,e=At){return n=n??FCe,xn((t,i)=>{let r,s=!0;t.subscribe(_n(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,R7),r.addEventListener("mousedown",this._onMousedown,R7),r.addEventListener("touchstart",this._onTouchstart,R7)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,R7),document.removeEventListener("mousedown",this._onMousedown,R7),document.removeEventListener("touchstart",this._onTouchstart,R7))}}return n.\u0275fac=function(t){return new(t||n)(Xe(m3),Xe(Xi),Xe(Pi),Xe(ebe,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rbe=new Rt("cdk-focus-monitor-default-options"),lb=Md({passive:!0,capture:!0});let F4=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Je,this._rootNodeFocusAndBlurListener=a=>{for(let l=I8(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=L8(t);if(!this._platform.isBrowser||1!==r.nodeType)return mi(null);const s=g$(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Je,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=L8(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=L8(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=I8(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,lb),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,lb)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ta(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,lb),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,lb),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(Xe(Xi),Xe(m3),Xe(nbe),Xe(Pi,8),Xe(rbe,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CK="cdk-high-contrast-black-on-white",bK="cdk-high-contrast-white-on-black",OB="cdk-high-contrast-active";let xK=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=xs(OCe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(OB,CK,bK),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(OB,CK):2===i&&t.add(OB,bK)}}}return n.\u0275fac=function(t){return new(t||n)(Xe(m3),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),NB=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(Xe(xK))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[S9]}),n})();const obe=new Rt("mat-sanity-checks",{providedIn:"root",factory:function sbe(){return!0}});let Gi=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!QI()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Xe(xK),Xe(obe,8),Xe(Pi))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[B8,B8]}),n})();function F7(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Er(e)}}}function N8(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function z0(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Er(e)}}}function ub(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Iu(t):this.defaultTabIndex}}}let EK=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function E9(n,e,t){n.nativeElement.classList.toggle(e,t)}let hb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Gi,Gi]}),n})();class cbe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const DK={enterDuration:225,exitDuration:150},VB=Md({passive:!0}),IK=["mousedown","touchstart"],BK=["mouseup","mouseleave","touchend","touchcancel"];class ube{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=L8(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...DK,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function hbe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const f=window.getComputedStyle(u),g=f.transitionDuration,_="none"===f.transitionProperty||"0s"===g||"0s, 0s"===g,y=new cbe(this,u,i,_);u.style.transform="scale3d(1, 1, 1)",y.state=0,i.persistent||(this._mostRecentTransientRipple=y);let w=null;return!_&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const C=()=>this._finishRippleTransition(y),x=()=>this._destroyRipple(y);u.addEventListener("transitionend",C),u.addEventListener("transitioncancel",x),w={onTransitionEnd:C,onTransitionCancel:x}}),this._activeRipples.set(y,w),(_||!l)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...DK,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=L8(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(IK))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(BK),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=HB(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!zB(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,VB)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(IK.forEach(e=>{this._triggerElement.removeEventListener(e,this,VB)}),this._pointerUpEventsRegistered&&BK.forEach(e=>{this._triggerElement.removeEventListener(e,this,VB)}))}}const fbe=new Rt("mat-ripple-global-options");let O0=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new ube(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(Xi),U(m3),U(fbe,8),U(T4,8))},n.\u0275dir=ht({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Rr("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),ku=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Gi,Gi]}),n})(),UB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Gi]}),n})(),RK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[ku,kl,Gi,UB]}),n})();function FK(...n){const e=a0(n),{args:t,keys:i}=S$(n),r=new be(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let f=!1;po(t[u]).subscribe(_n(s,p=>{f||(f=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(i?E$(i,a):a),s.complete())}))}});return e?r.pipe(kI(e)):r}class kK{}class PK{}class jh{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof jh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new jh;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof jh?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class pbe{encodeKey(e){return HK(e)}encodeValue(e){return HK(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const mbe=/%(\d[a-f0-9])/gi,Abe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function HK(n){return encodeURIComponent(n).replace(mbe,(e,t)=>Abe[t]??e)}function fb(n){return`${n}`}class Rd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new pbe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function gbe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(fb):[fb(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Rd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(fb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(fb(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class vbe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function zK(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function OK(n){return typeof Blob<"u"&&n instanceof Blob}function NK(n){return typeof FormData<"u"&&n instanceof FormData}class T9{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function _be(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new jh),this.context||(this.context=new vbe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Rd,this.urlWithParams=t}serializeBody(){return null===this.body?null:zK(this.body)||OK(this.body)||NK(this.body)||function ybe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Rd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||NK(this.body)?null:OK(this.body)?this.body.type||null:zK(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Rd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),l)),new T9(t,i,s,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Dc=(()=>((Dc=Dc||{})[Dc.Sent=0]="Sent",Dc[Dc.UploadProgress=1]="UploadProgress",Dc[Dc.ResponseHeader=2]="ResponseHeader",Dc[Dc.DownloadProgress=3]="DownloadProgress",Dc[Dc.Response=4]="Response",Dc[Dc.User=5]="User",Dc))();class GB{constructor(e,t=200,i="OK"){this.headers=e.headers||new jh,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class QB extends GB{constructor(e={}){super(e),this.type=Dc.ResponseHeader}clone(e={}){return new QB({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class db extends GB{constructor(e={}){super(e),this.type=Dc.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new db({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class VK extends GB{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function WB(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let $h=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof T9)s=t;else{let c,l;c=r.headers instanceof jh?r.headers:new jh(r.headers),r.params&&(l=r.params instanceof Rd?r.params:new Rd({fromObject:r.params})),s=new T9(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=mi(s).pipe(Td(c=>this.handler.handle(c)));if(t instanceof T9||"events"===r.observe)return o;const a=o.pipe(_o(c=>c instanceof db));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(qt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(qt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(qt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(qt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Rd).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,WB(r,i))}post(t,i,r={}){return this.request("POST",t,WB(r,i))}put(t,i,r={}){return this.request("PUT",t,WB(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Xe(kK))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class UK{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const GK=new Rt("HTTP_INTERCEPTORS");let wbe=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const Cbe=/^\)\]\}',?\n/;let QK=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new be(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((g,_)=>r.setRequestHeader(g,_.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=r.statusText||"OK",_=new jh(r.getAllResponseHeaders()),y=function bbe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new QB({headers:_,status:r.status,statusText:g,url:y}),o},c=()=>{let{headers:g,status:_,statusText:y,url:w}=a(),C=null;204!==_&&(C=typeof r.response>"u"?r.responseText:r.response),0===_&&(_=C?200:0);let x=_>=200&&_<300;if("json"===t.responseType&&"string"==typeof C){const M=C;C=C.replace(Cbe,"");try{C=""!==C?JSON.parse(C):null}catch(T){C=M,x&&(x=!1,C={error:T,text:C})}}x?(i.next(new db({body:C,headers:g,status:_,statusText:y,url:w||void 0})),i.complete()):i.error(new VK({error:C,headers:g,status:_,statusText:y,url:w||void 0}))},l=g=>{const{url:_}=a(),y=new VK({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:_||void 0});i.error(y)};let u=!1;const f=g=>{u||(i.next(a()),u=!0);let _={type:Dc.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),"text"===t.responseType&&!!r.responseText&&(_.partialText=r.responseText),i.next(_)},p=g=>{let _={type:Dc.UploadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),i.next(_)};return r.addEventListener("load",c),r.addEventListener("error",l),r.addEventListener("timeout",l),r.addEventListener("abort",l),t.reportProgress&&(r.addEventListener("progress",f),null!==s&&r.upload&&r.upload.addEventListener("progress",p)),r.send(s),i.next({type:Dc.Sent}),()=>{r.removeEventListener("error",l),r.removeEventListener("abort",l),r.removeEventListener("load",c),r.removeEventListener("timeout",l),t.reportProgress&&(r.removeEventListener("progress",f),null!==s&&r.upload&&r.upload.removeEventListener("progress",p)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Xe(Oj))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const jB=new Rt("XSRF_COOKIE_NAME"),$B=new Rt("XSRF_HEADER_NAME");class WK{}let xbe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Lj(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(q3),Xe(jB))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),qB=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(WK),Xe($B))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),Mbe=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(GK,[]);this.chain=i.reduceRight((r,s)=>new UK(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(PK),Xe(Cc))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),Sbe=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:qB,useClass:wbe}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:jB,useValue:t.cookieName}:[],t.headerName?{provide:$B,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[qB,{provide:GK,useExisting:qB,multi:!0},{provide:WK,useClass:xbe},{provide:jB,useValue:"XSRF-TOKEN"},{provide:$B,useValue:"X-XSRF-TOKEN"}]}),n})(),Ebe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[$h,{provide:kK,useClass:Mbe},QK,{provide:PK,useExisting:QK}],imports:[Sbe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const Tbe=["*"];let pb;function L9(n){return function Lbe(){if(void 0===pb&&(pb=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(pb=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return pb}()?.createHTML(n)||n}function jK(n){return Error(`Unable to find icon with the name "${n}"`)}function $K(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function qK(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class V8{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let D9=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new V8(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(qs.HTML,r);if(!o)throw qK(r);const a=L9(o);return this._addSvgIconConfig(t,i,new V8("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new V8(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(qs.HTML,i);if(!s)throw qK(i);const o=L9(s);return this._addSvgIconSetConfig(t,new V8("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(qs.RESOURCE_URL,t);if(!i)throw $K(t);const r=this._cachedIconsByUrl.get(i);return r?mi(gb(r)):this._loadSvgIconFromConfig(new V8(t,null)).pipe(wa(s=>this._cachedIconsByUrl.set(i,s)),qt(s=>gb(s)))}getNamedSvgIcon(t,i=""){const r=KK(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):C7(jK(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?mi(gb(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(qt(i=>gb(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?mi(r):FK(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(k0(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(qs.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),mi(null)})))).pipe(qt(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw jK(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(wa(i=>t.svgText=i),qt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?mi(null):this._fetchIcon(t).pipe(wa(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(L9("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(L9("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function Dbe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(qs.RESOURCE_URL,i);if(!o)throw $K(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(qt(l=>L9(l)),BC(()=>this._inProgressUrlFetches.delete(o)),F3());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(KK(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return Bbe(s)?new V8(s.url,null,s.options):new V8(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(Xe($h,8),Xe(T8),Xe(Pi,8),Xe(Dh))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gb(n){return n.cloneNode(!0)}function KK(n,e){return n+":"+e}function Bbe(n){return!(!n.url||!n.options)}const Rbe=N8(class{constructor(n){this._elementRef=n}}),Fbe=new Rt("MAT_ICON_DEFAULT_OPTIONS"),kbe=new Rt("mat-icon-location",{providedIn:"root",factory:function Pbe(){const n=xs(Pi),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),XK=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Hbe=XK.map(n=>`[${n}]`).join(", "),zbe=/^url\(['"]?#(.*?)['"]?\)$/;let k7=(()=>{class n extends Rbe{constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Re.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Er(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(Hbe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)XK.forEach(o=>{const a=i[s],c=a.getAttribute(o),l=c?c.match(zbe):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Lc(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(D9),s3("aria-hidden"),U(kbe),U(Dh),U(Fbe,8))},n.\u0275cmp=Bn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(ps("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Rr("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Ot],ngContentSelectors:Tbe,decls:1,vars:0,template:function(t,i){1&t&&(ec(),Po(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),YK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Gi,Gi]}),n})();const Obe=["mat-button",""],Nbe=["*"],Ube=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Gbe=N8(F7(z0(class{constructor(n){this._elementRef=n}})));let mb=(()=>{class n extends Gbe{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Ube)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(F4),U(T4,8))},n.\u0275cmp=Bn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&Xs(O0,5),2&t){let r;Di(r=Ii())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(ps("disabled",i.disabled||null),Rr("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ot],attrs:Obe,ngContentSelectors:Nbe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(ec(),H(0,"span",0),Po(1),N(),$e(2,"span",1)(3,"span",2)),2&t&&(Z(2),Rr("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Ce("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[O0],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),KB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[ku,Gi,Gi]}),n})();function ZK(n,e){return e?t=>a9(e.pipe(Lc(1),function Qbe(){return xn((n,e)=>{n.subscribe(_n(e,st))})}()),t.pipe(ZK(n))):xi((t,i)=>n(t,i).pipe(Lc(1),B$(t)))}function JK(n,e=n9){const t=NI(n,e);return ZK(()=>t)}class XB{}const qh="*";function I2(n,e){return{type:7,name:n,definitions:e,options:{}}}function So(n,e=null){return{type:4,styles:e,timings:n}}function eX(n,e=null){return{type:3,steps:n,options:e}}function tX(n,e=null){return{type:2,steps:n,options:e}}function Oi(n){return{type:6,styles:n,offset:null}}function zo(n,e,t){return{type:0,name:n,styles:e,options:t}}function Oo(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function YB(n=null){return{type:9,options:n}}function ZB(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function nX(n){Promise.resolve().then(n)}class I9{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){nX(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class iX{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?nX(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const $be=["mat-menu-item",""];function qbe(n,e){1&n&&(ko(),H(0,"svg",2),$e(1,"polygon",3),N())}const rX=["*"];function Kbe(n,e){if(1&n){const t=la();H(0,"div",0),an("keydown",function(r){return ai(t),h(Nt()._handleKeydown(r))})("click",function(){return ai(t),h(Nt().closed.emit("click"))})("@transformMenu.start",function(r){return ai(t),h(Nt()._onAnimationStart(r))})("@transformMenu.done",function(r){return ai(t),h(Nt()._onAnimationDone(r))}),H(1,"div",1),Po(2),N()()}if(2&n){const t=Nt();Ce("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),ps("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const Ab={transformMenu:I2("transformMenu",[zo("void",Oi({opacity:0,transform:"scale(0.8)"})),Oo("void => enter",So("120ms cubic-bezier(0, 0, 0.2, 1)",Oi({opacity:1,transform:"scale(1)"}))),Oo("* => void",So("100ms 25ms linear",Oi({opacity:0})))]),fadeInItems:I2("fadeInItems",[zo("showing",Oi({opacity:1})),Oo("void => *",[Oi({opacity:0}),So("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Xbe=new Rt("MatMenuContent"),eR=new Rt("MAT_MENU_PANEL"),Ybe=z0(F7(class{}));let B9=(()=>{class n extends Ybe{constructor(t,i,r,s,o){super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new Je,this._focused=new Je,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(Pi),U(F4),U(eR,8),U(xc))},n.\u0275cmp=Bn({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,i){1&t&&an("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&t&&(ps("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),Rr("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Ot],attrs:$be,ngContentSelectors:rX,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){1&t&&(ec(),Po(0),$e(1,"div",0),Wt(2,qbe,2,0,"svg",1)),2&t&&(Z(1),Ce("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),Z(1),Ce("ngIf",i._triggersSubmenu))},dependencies:[g3,O0],encapsulation:2,changeDetection:0}),n})();const sX=new Rt("mat-menu-default-options",{providedIn:"root",factory:function Zbe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Jbe=0,R9=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new m7,this._tabSubscription=Re.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Je,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new er,this.close=this.closed,this.panelId="mat-menu-panel-"+Jbe++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Er(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Er(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new vK(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(F0(this._directDescendantItems),I4(t=>e2(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(F0(this._directDescendantItems),I4(i=>e2(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:O8(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(Lc(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===i,r["mat-menu-below"]="below"===i,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(F0(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(Xi),U(sX),U(xc))},n.\u0275dir=ht({type:n,contentQueries:function(t,i,r){if(1&t&&(ja(r,Xbe,5),ja(r,B9,5),ja(r,B9,4)),2&t){let s;Di(s=Ii())&&(i.lazyContent=s.first),Di(s=Ii())&&(i._allItems=s),Di(s=Ii())&&(i.items=s)}},viewQuery:function(t,i){if(1&t&&Xs(Vc,5),2&t){let r;Di(r=Ii())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),exe=(()=>{class n extends R9{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(Xi),U(sX),U(xc))},n.\u0275cmp=Bn({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,i){2&t&&ps("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Ki([{provide:eR,useExisting:n}]),Ot],ngContentSelectors:rX,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,i){1&t&&(ec(),Wt(0,Kbe,3,6,"ng-template"))},dependencies:[XA],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Ab.transformMenu,Ab.fadeInItems]},changeDetection:0}),n})();const oX=new Rt("mat-menu-scroll-strategy"),nxe={provide:oX,deps:[A3],useFactory:function txe(n){return()=>n.scrollStrategies.reposition()}},aX=Md({passive:!0});let ixe=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=c,this._focusMonitor=l,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Re.EMPTY,this._hoverSubscription=Re.EMPTY,this._menuCloseSubscription=Re.EMPTY,this._handleTouchStart=f=>{zB(f)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new er,this.onMenuOpen=this.menuOpened,this.menuClosed=new er,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof R9?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,aX),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,aX),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const i=this._createOverlay(t),r=i.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=t.hasBackdrop??!this.triggersSubmenu(),i.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof R9&&(t._startAnimation(),t._directDescendantItems.changes.pipe(Ta(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof R9?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(_o(r=>"void"===r.toState),Lc(1),Ta(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let i=0,r=t.parentMenu;for(;r;)i++,r=r.parentMenu;t.setElevation(i)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_createOverlay(t){if(!this._overlayRef){const i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new KI({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,o)):t.setPositionClasses(s,o)})}_setPosition(t,i){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[c,l]=[o,a],[u,f]=[r,s],p=0;if(this.triggersSubmenu()){if(f=r="before"===t.xPosition?"start":"end",s=u="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const g=this._parentMaterialMenu.items.first;this._parentInnerPadding=g?g._getHostElement().offsetTop:0}p="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(c="top"===o?"bottom":"top",l="top"===a?"bottom":"top");i.withPositions([{originX:r,originY:c,overlayX:u,overlayY:o,offsetY:p},{originX:s,originY:c,overlayX:f,overlayY:o,offsetY:p},{originX:r,originY:l,overlayX:u,overlayY:a,offsetY:-p},{originX:s,originY:l,overlayX:f,overlayY:a,offsetY:-p}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments();return e2(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:mi(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(_o(o=>o!==this._menuItemInstance),_o(()=>this._menuOpen)):mi(),i)}_handleMousedown(t){HB(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(_o(t=>t===this._menuItemInstance&&!t.disabled),JK(0,OI)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof R9&&this.menu._isAnimating?this.menu._animationDone.pipe(Lc(1),JK(0,OI),Ta(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new SC(t.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(U(A3),U(dn),U(Uc),U(oX),U(eR,8),U(B9,10),U(Oh,8),U(F4),U(Xi))},n.\u0275dir=ht({type:n,hostVars:3,hostBindings:function(t,i){1&t&&an("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&t&&ps("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),rxe=(()=>{class n extends ixe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[Ot]}),n})(),sxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[nxe],imports:[kl,Gi,ku,Ed,R8,Gi]}),n})();const oxe=["menu"];function axe(n,e){1&n&&(H(0,"mat-icon"),V(1,"light_mode"),N())}function cxe(n,e){1&n&&(H(0,"mat-icon"),V(1,"dark_mode"),N())}let lxe=(()=>{class n{constructor(t){this.appService=t,this.version="2023.2.0",this.title=this.appService.title}ngAfterViewInit(){}click(){}get darkMode(){return this.appService.darkMode}set darkMode(t){this.appService.setDarkMode(t,!0)}}return n.\u0275fac=function(t){return new(t||n)(U(Mo))},n.\u0275cmp=Bn({type:n,selectors:[["app-sidemenu"]],viewQuery:function(t,i){if(1&t&&Xs(oxe,5,dn),2&t){let r;Di(r=Ii())&&(i.menu=r.first)}},decls:90,vars:18,consts:[["mat-button","",3,"matMenuTriggerFor"],["menu",""],[2,"color","var(--color-70)"],["mainMenu","matMenu"],["mat-menu-item","","routerLink","/house",3,"matMenuTriggerFor"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","","routerLink","/about","routerLinkActive","active",3,"disabled","click"],["about","routerLinkActive"],["mat-menu-item","",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","16px"],[4,"ngIf"],["house","matMenu"],["mat-menu-item","","routerLink","/house","routerLinkActive","active",3,"disabled","click"],["house2d","routerLinkActive"],[2,"font-family","Material Icons Outlined"],["mat-menu-item","","routerLink","/house3d","routerLinkActive","active",3,"disabled","click"],["house3d","routerLinkActive"],["constructions","matMenu"],["mat-menu-item","","routerLink","/construction","routerLinkActive","active",3,"disabled","click"],["construction","routerLinkActive"],["mat-menu-item","","routerLink","/stairs","routerLinkActive","active",3,"disabled","click"],["stairs","routerLinkActive"],["situation","matMenu"],["mat-menu-item","","routerLink","/map","routerLinkActive","active",3,"disabled","click"],["map","routerLinkActive"],["installations","matMenu"],["mat-menu-item","","routerLink","/wired","routerLinkActive","active",3,"disabled","click"],["wired","routerLinkActive"],["mat-menu-item","","routerLink","/installations","routerLinkActive","active",3,"disabled","click"],["installation","routerLinkActive"],["planningAndCosts","matMenu"],["mat-menu-item","","routerLink","/costs","routerLinkActive","active",3,"disabled","click"],["costs","routerLinkActive"],["mat-menu-item","","routerLink","/planning","routerLinkActive","active",3,"disabled","click"],["planning","routerLinkActive"]],template:function(t,i){if(1&t&&(H(0,"button",0,1)(2,"mat-icon",2),V(3,"menu"),N()(),H(4,"mat-menu",null,3)(6,"button",4),V(7,"The house"),N(),H(8,"button",5),V(9,"Construction"),N(),H(10,"button",5),V(11,"Situation"),N(),H(12,"button",5),V(13,"Installations"),N(),H(14,"button",6,7),an("click",function(){return i.click()}),H(16,"mat-icon"),V(17,"people_outline"),N(),H(18,"span"),V(19,"About us"),N()(),H(20,"button",8),an("click",function(){return i.darkMode=!i.darkMode}),H(21,"span",9),Wt(22,axe,2,0,"mat-icon",10),Wt(23,cxe,2,0,"mat-icon",10),H(24,"span"),V(25),N()()()(),H(26,"mat-menu",null,11)(28,"button",12,13),an("click",function(){return i.click()}),H(30,"mat-icon",14),V(31,"home"),N(),H(32,"span"),V(33,"The house 2D"),N()(),H(34,"button",15,16),an("click",function(){return i.click()}),H(36,"mat-icon",14),V(37,"gite"),N(),H(38,"span"),V(39,"The house 3D"),N()()(),H(40,"mat-menu",null,17)(42,"button",18,19),an("click",function(){return i.click()}),H(44,"mat-icon"),V(45,"handyman"),N(),H(46,"span"),V(47,"Construction"),N()(),H(48,"button",20,21),an("click",function(){return i.click()}),H(50,"mat-icon",14),V(51,"stairs"),N(),H(52,"span"),V(53,"Stairs"),N()()(),H(54,"mat-menu",null,22)(56,"button",23,24),an("click",function(){return i.click()}),H(58,"mat-icon"),V(59,"pin_drop"),N(),H(60,"span"),V(61,"Map"),N()()(),H(62,"mat-menu",null,25)(64,"button",26,27),an("click",function(){return i.click()}),H(66,"mat-icon"),V(67,"bolt"),N(),H(68,"span"),V(69,"Wired"),N()(),H(70,"button",28,29),an("click",function(){return i.click()}),H(72,"mat-icon"),V(73,"solar_power"),N(),H(74,"span"),V(75,"Installations"),N()()(),H(76,"mat-menu",null,30)(78,"button",31,32),an("click",function(){return i.click()}),H(80,"mat-icon",14),V(81,"savings"),N(),H(82,"span"),V(83,"Costs"),N()(),H(84,"button",33,34),an("click",function(){return i.click()}),H(86,"mat-icon"),V(87,"calendar_month"),N(),H(88,"span"),V(89,"Planning"),N()()()),2&t){const r=Ar(5),s=Ar(15),o=Ar(27),a=Ar(29),c=Ar(35),l=Ar(41),u=Ar(43),f=Ar(49),p=Ar(55),g=Ar(57),_=Ar(63),y=Ar(65),w=Ar(71),C=Ar(79),x=Ar(85);Ce("matMenuTriggerFor",r),Z(6),Ce("matMenuTriggerFor",o),Z(2),Ce("matMenuTriggerFor",l),Z(2),Ce("matMenuTriggerFor",p),Z(2),Ce("matMenuTriggerFor",_),Z(2),Ce("disabled",s.isActive),Z(8),Ce("ngIf",i.darkMode),Z(1),Ce("ngIf",!i.darkMode),Z(2),Jn("",i.darkMode?"Light":"Dark"," mode"),Z(3),Ce("disabled",a.isActive),Z(6),Ce("disabled",c.isActive),Z(8),Ce("disabled",u.isActive),Z(6),Ce("disabled",f.isActive),Z(8),Ce("disabled",g.isActive),Z(8),Ce("disabled",y.isActive),Z(6),Ce("disabled",w.isActive),Z(8),Ce("disabled",C.isActive),Z(6),Ce("disabled",x.isActive)}},dependencies:[g3,k7,mb,exe,B9,rxe,M9,Wh,w9,Dq],styles:["[_nghost-%COMP%]{z-index:300;position:fixed;border-right:1px solid var(--color-30);border-bottom:1px solid var(--color-30);background-color:var(--color-0)}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{height:48px;width:48px;min-width:0;padding:0}"]}),n})();function uxe(n,e){if(1&n){const t=la();H(0,"div",3),an("click",function(){return ai(t),h(Nt().readMobile=!0)}),H(1,"div",4),V(2," You are using a mobile device."),$e(3,"br")(4,"br"),V(5," We put a lot of effort in this side, but it near impossible to make it work on mobile devices. "),$e(6,"br")(7,"br"),V(8,"Please use a desktop or laptop to view this site."),$e(9,"br")(10,"br")(11,"br"),V(12,"X close "),N()()}}let hxe=(()=>{class n{constructor(t,i){this.appService=t,this.router=i,this.onStart=!0,this.isMobile=navigator.userAgentData.mobile,this.readMobile=!1}ngOnInit(){this.router.events.pipe(_o(t=>t instanceof Bu),qt(t=>t.urlAfterRedirects.split("?")[0]),function $ye(n,e){return xn((t,i)=>{const r=new Set;t.subscribe(_n(i,s=>{const o=n?n(s):s;r.has(o)||(r.add(o),i.next(s))})),e?.subscribe(_n(i,()=>r.clear(),st))})}()).subscribe(t=>{this.onStart?this.onStart=!1:window.scrollTo(0,0)})}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)(U(Mo),U(R1))},n.\u0275cmp=Bn({type:n,selectors:[["app-root"]],decls:7,vars:1,consts:[[1,"mat-button","mat-primary",2,"display","none"],["primary",""],["class","is-mobile",3,"click",4,"ngIf"],[1,"is-mobile",3,"click"],["fxLayoutAlign","center center"]],template:function(t,i){1&t&&($e(0,"app-sidemenu")(1,"color")(2,"div",0,1),Wt(4,uxe,13,0,"div",2),H(5,"main"),$e(6,"router-outlet"),N()),2&t&&(Z(4),Ce("ngIf",i.isMobile&&!i.readMobile))},dependencies:[g3,Wh,UC,yCe,lxe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}main[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}.mat-drawer-content[_ngcontent-%COMP%]{overflow-y:hidden}.is-mobile[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;cursor:pointer}.is-mobile[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--color-80);opacity:.5}.is-mobile[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;border-radius:8px;padding:16px 32px;margin:5vh 10vw;background:var(--color-0);box-sizing:border-box;font-size:18px;line-height:18px}']}),n})();function cX(n){return new Kt(3e3,!1)}function jxe(){return typeof window<"u"&&typeof window.document<"u"}function tR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Fd(n){switch(n.length){case 0:return new I9;case 1:return n[0];default:return new iX(n)}}function lX(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let c=-1,l=null;if(i.forEach(u=>{const f=u.get("offset"),p=f==c,g=p&&l||new Map;u.forEach((_,y)=>{let w=y,C=_;if("offset"!==y)switch(w=e.normalizePropertyName(w,o),C){case"!":C=r.get(y);break;case qh:C=s.get(y);break;default:C=e.normalizeStyleValue(y,w,C,o)}g.set(w,C)}),p||a.push(g),l=g,c=f}),o.length)throw function Fxe(n){return new Kt(3502,!1)}();return a}function nR(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&iR(t,"start",n)));break;case"done":n.onDone(()=>i(t&&iR(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&iR(t,"destroy",n)))}}function iR(n,e,t){const s=rR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function rR(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function X3(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function uX(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let sR=(n,e)=>!1,hX=(n,e,t)=>[],fX=null;function oR(n){const e=n.parentNode||n.host;return e===fX?null:e}(tR()||typeof Element<"u")&&(jxe()?(fX=(()=>document.documentElement)(),sR=(n,e)=>{for(;e;){if(e===n)return!0;e=oR(e)}return!1}):sR=(n,e)=>n.contains(e),hX=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let U8=null,dX=!1;const pX=sR,gX=hX;let mX=(()=>{class n{validateStyleProperty(t){return function qxe(n){U8||(U8=function Kxe(){return typeof document<"u"?document.body:null}()||{},dX=!!U8.style&&"WebkitAppearance"in U8.style);let e=!0;return U8.style&&!function $xe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in U8.style,!e&&dX&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in U8.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return pX(t,i)}getParentElement(t){return oR(t)}query(t,i,r){return gX(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],c){return new I9(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),aR=(()=>{class n{}return n.NOOP=new mX,n})();const cR="ng-enter",vb="ng-leave",_b="ng-trigger",yb=".ng-trigger",vX="ng-animating",lR=".ng-animating";function Kh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:uR(parseFloat(e[1]),e[2])}function uR(n,e){return"s"===e?1e3*n:n}function wb(n,e,t){return n.hasOwnProperty("duration")?n:function Zxe(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(cX()),{duration:0,delay:0,easing:""};r=uR(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=uR(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(function fxe(){return new Kt(3100,!1)}()),a=!0),s<0&&(e.push(function dxe(){return new Kt(3101,!1)}()),a=!0),a&&e.splice(c,0,cX())}return{duration:r,delay:s,easing:o}}(n,e,t)}function F9(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function _X(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function kd(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function wX(n,e,t){return t?e+":"+t+";":""}function CX(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=wX(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=wX(0,nMe(t),n.style[t]));n.setAttribute("style",e)}function N0(n,e,t){n.style&&(e.forEach((i,r)=>{const s=fR(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),tR()&&CX(n))}function G8(n,e){n.style&&(e.forEach((t,i)=>{const r=fR(i);n.style[r]=""}),tR()&&CX(n))}function k9(n){return Array.isArray(n)?1==n.length?n[0]:tX(n):n}const hR=new RegExp("{{\\s*(.+?)\\s*}}","g");function bX(n){let e=[];if("string"==typeof n){let t;for(;t=hR.exec(n);)e.push(t[1]);hR.lastIndex=0}return e}function P9(n,e,t){const i=n.toString(),r=i.replace(hR,(s,o)=>{let a=e[o];return null==a&&(t.push(function gxe(n){return new Kt(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function Cb(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const tMe=/-+([a-z0-9])/g;function fR(n){return n.replace(tMe,(...e)=>e[1].toUpperCase())}function nMe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Y3(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function mxe(n){return new Kt(3004,!1)}()}}function xX(n,e){return window.getComputedStyle(n)[e]}function cMe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function lMe(n,e,t){if(":"==n[0]){const c=function uMe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Dxe(n){return new Kt(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Lxe(n){return new Kt(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(MX(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(MX(o,r))}(i,t,e)):t.push(n),t}const Sb=new Set(["true","1"]),Eb=new Set(["false","0"]);function MX(n,e){const t=Sb.has(n)||Eb.has(n),i=Sb.has(e)||Eb.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?Sb.has(n):Eb.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?Sb.has(e):Eb.has(e)),o&&a}}const hMe=new RegExp("s*:selfs*,?","g");function dR(n,e,t,i){return new fMe(n).build(e,t,i)}class fMe{constructor(e){this._driver=e}build(e,t,i){const r=new gMe(t);return this._resetContextStyleTimingState(r),Y3(this,k9(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function vxe(){return new Kt(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(function _xe(){return new Kt(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{bX(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(Cb(s.values()),t.errors.push(function yxe(n,e){return new Kt(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Y3(this,k9(e.animation),t);return{type:1,matchers:cMe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Q8(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Y3(this,i,t)),options:Q8(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Y3(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Q8(e.options)}}visitAnimate(e,t){const i=function AMe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return pR(wb(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=pR(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=wb(t,e);return pR(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Oi({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};i.easing&&(l.easing=i.easing),o=Oi(l)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===qh?i.push(a):t.errors.push(new Kt(3002,!1)):i.push(_X(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c);let f=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function Cxe(n,e,t,i,r){return new Kt(3010,!1)}()),f=!1),s=u.startTime),f&&l.set(c,{startTime:s,endTime:r}),t.options&&function eMe(n,e,t){const i=e.params||{},r=bX(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function pxe(n){return new Kt(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function bxe(){return new Kt(3011,!1)}()),i;let s=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(C=>{const x=this._makeStyleAst(C,t);let M=null!=x.offset?x.offset:function mMe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(x.styles),T=0;return null!=M&&(s++,T=x.offset=M),c=c||T<0||T>1,a=a||T<l,l=T,o.push(T),x});c&&t.errors.push(function xxe(){return new Kt(3012,!1)}()),a&&t.errors.push(function Mxe(){return new Kt(3200,!1)}());const f=e.steps.length;let p=0;s>0&&s<f?t.errors.push(function Sxe(){return new Kt(3202,!1)}()):0==s&&(p=1/(f-1));const g=f-1,_=t.currentTime,y=t.currentAnimateTimings,w=y.duration;return u.forEach((C,x)=>{const M=p>0?x==g?1:p*x:o[x],T=M*w;t.currentTime=_+y.delay+T,y.duration=T,this._validateStyleAst(C,t),C.offset=M,i.styles.push(C)}),i}visitReference(e,t){return{type:8,animation:Y3(this,k9(e.animation),t),options:Q8(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Q8(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Q8(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function dMe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(hMe,"")),n=n.replace(/@\*/g,yb).replace(/@\w+/g,t=>yb+"-"+t.slice(1)).replace(/:animating/g,lR),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,X3(t.collectedStyles,t.currentQuerySelector,new Map);const a=Y3(this,k9(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Q8(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Exe(){return new Kt(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:wb(e.timings,t.errors,!0);return{type:12,animation:Y3(this,k9(e.animation),t),timings:i,options:null}}}class gMe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Q8(n){return n?(n=F9(n)).params&&(n.params=function pMe(n){return n?F9(n):null}(n.params)):n={},n}function pR(n,e,t){return{duration:n,delay:e,easing:t}}function gR(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class Tb{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const yMe=new RegExp(":enter","g"),CMe=new RegExp(":leave","g");function mR(n,e,t,i,r,s=new Map,o=new Map,a,c,l=[]){return(new bMe).buildKeyframes(n,e,t,i,r,s,o,a,c,l)}class bMe{buildKeyframes(e,t,i,r,s,o,a,c,l,u=[]){l=l||new Tb;const f=new AR(e,t,l,r,s,u,[]);f.options=c;const p=c.delay?Kh(c.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([o],null,f.errors,c),Y3(this,i,f);const g=f.timelines.filter(_=>_.containsAnimation());if(g.length&&a.size){let _;for(let y=g.length-1;y>=0;y--){const w=g[y];if(w.element===t){_=w;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,f.errors,c)}return g.length?g.map(_=>_.buildKeyframes()):[gR(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimateRefDelay(e.animation,t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimateRefDelay(e,t,i){const r=e.options?.delay;if(!r)return;let s;s="string"==typeof r?Kh(P9(r,e.options?.params??{},t.errors)):r,i.delayNextStep(s)}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Kh(i.duration):null,a=null!=i.delay?Kh(i.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Y3(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Lb);const o=Kh(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Y3(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Kh(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Y3(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return wb(t.params?P9(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Kh(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Lb);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;const f=t.createSubContext(e.options,l);s&&f.delayNextStep(s),l===t.element&&(c=f.currentTimeline),Y3(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const u=t.currentTimeline;c&&u.delayNextStep(c);const f=u.currentTime;Y3(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const Lb={};class AR{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Lb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Db(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Kh(i.duration)),null!=i.delay&&(r.delay=Kh(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=P9(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new AR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Lb,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new xMe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(yMe,"."+this._enterClassName)).replace(CMe,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=i);0!==i&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&0==a.length&&o.push(function Txe(n){return new Kt(3014,!1)}()),a}}class Db{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Db(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||qh),this._currentKeyframe.set(t,qh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function MMe(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,qh)}else kd(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const l=P9(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??qh),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const l=kd(a,new Map,this._backFill);l.forEach((u,f)=>{"!"===u?e.add(f):u===qh&&t.add(f)}),i||l.set("offset",c/this.duration),r.push(l)});const s=e.size?Cb(e.values()):[],o=t.size?Cb(t.values()):[];if(i){const a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return gR(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class xMe extends Db{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,c=kd(e[0]);c.set("offset",0),s.push(c);const l=kd(e[0]);l.set("offset",TX(a)),s.push(l);const u=e.length-1;for(let f=1;f<=u;f++){let p=kd(e[f]);const g=p.get("offset");p.set("offset",TX((t+g*i)/o)),s.push(p)}i=o,t=0,r="",e=s}return gR(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function TX(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class vR{}const SMe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class EMe extends vR{normalizePropertyName(e,t){return fR(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(SMe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Axe(n,e){return new Kt(3005,!1)}())}return o+s}}function LX(n,e,t,i,r,s,o,a,c,l,u,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:f,errors:p}}const _R={};class DX{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function TMe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,c,l,u){const f=[],p=this.ast.options&&this.ast.options.params||_R,_=this.buildStyles(i,a&&a.params||_R,f),y=c&&c.params||_R,w=this.buildStyles(r,y,f),C=new Set,x=new Map,M=new Map,T="void"===r,I={params:LMe(y,p),delay:this.ast.options?.delay},F=u?[]:mR(e,t,this.ast.animation,s,o,_,w,I,l,f);let P=0;if(F.forEach(k=>{P=Math.max(k.duration+k.delay,P)}),f.length)return LX(t,this._triggerName,i,r,T,_,w,[],[],x,M,P,f);F.forEach(k=>{const W=k.element,ie=X3(x,W,new Set);k.preStyleProps.forEach(me=>ie.add(me));const Te=X3(M,W,new Set);k.postStyleProps.forEach(me=>Te.add(me)),W!==t&&C.add(W)});const R=Cb(C.values());return LX(t,this._triggerName,i,r,T,_,w,F,R,x,M,P)}}function LMe(n,e){const t=F9(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class DMe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=F9(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=P9(o,r,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(c,o)})}),i}}class BMe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new DMe(r.style,r.options&&r.options.params||{},i))}),IX(this.states,"true","1"),IX(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new DX(e,r,this.states))}),this.fallbackTransition=function RMe(n,e,t){return new DX(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function IX(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const FMe=new Tb;class kMe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=dR(this._driver,t,i,[]);if(i.length)throw function kxe(n){return new Kt(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=lX(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=mR(this._driver,t,s,cR,vb,new Map,new Map,i,FMe,r),o.forEach(u=>{const f=X3(a,u.element,new Map);u.postStyleProps.forEach(p=>f.set(p,null))})):(r.push(function Pxe(){return new Kt(3300,!1)}()),o=[]),r.length)throw function Hxe(n){return new Kt(3504,!1)}();a.forEach((u,f)=>{u.forEach((p,g)=>{u.set(g,this._driver.computeStyle(f,g,qh))})});const l=Fd(o.map(u=>{const f=a.get(u.element);return this._buildPlayer(u,new Map,f)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function zxe(n){return new Kt(3301,!1)}();return t}listen(e,t,i,r){const s=rR(t,"","","");return nR(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const BX="ng-animate-queued",yR="ng-animate-disabled",NMe=[],RX={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},VMe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},k4="__ng_removed";class wR{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function WMe(n){return n??null}(i?e.value:e),i){const s=F9(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const H9="void",CR=new wR(H9);class UMe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,P4(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Oxe(n,e){return new Kt(3302,!1)}();if(null==i||0==i.length)throw function Nxe(n){return new Kt(3303,!1)}();if(!function jMe(n){return"start"==n||"done"==n}(i))throw function Vxe(n,e){return new Kt(3400,!1)}();const s=X3(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=X3(this._engine.statesByElement,e,new Map);return a.has(t)||(P4(e,_b),P4(e,_b+"-"+t),a.set(t,CR)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Uxe(n){return new Kt(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new bR(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(P4(e,_b),P4(e,_b+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new wR(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=CR),l.value!==H9&&c.value===l.value){if(!function KMe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,l.params)){const y=[],w=s.matchStyles(c.value,c.params,y),C=s.matchStyles(l.value,l.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{G8(e,w),N0(e,C)})}return}const p=X3(this._engine.playersByElement,e,[]);p.forEach(y=>{y.namespaceId==this.id&&y.triggerName==t&&y.queued&&y.destroy()});let g=s.matchTransition(c.value,l.value,e,l.params),_=!1;if(!g){if(!r)return;g=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:c,toState:l,player:o,isFallbackTransition:_}),_||(P4(e,BX),o.onStart(()=>{P7(e,BX)})),o.onDone(()=>{let y=this.players.indexOf(o);y>=0&&this.players.splice(y,1);const w=this._engine.playersByElement.get(e);if(w){let C=w.indexOf(o);C>=0&&w.splice(C,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,yb,!0);i.forEach(r=>{if(r[k4])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){const u=this.trigger(e,l,H9,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Fd(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const c=this._triggers.get(o).fallbackTransition,l=i.get(o)||CR,u=new wR(H9),f=new bR(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[k4];(!s||s===RX)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){P4(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const c=rR(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,nR(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class GMe{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new UMe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=r.get(a);if(c){const l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(Ib(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Ib(t))return;const s=t[k4];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),P4(e,yR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),P7(e,yR))}removeNode(e,t,i,r){if(Ib(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[k4]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return Ib(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,yb,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,lR,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Fd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[k4];if(t&&t.setForRemoval){if(e[k4]=RX,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(yR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)P4(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Fd(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Gxe(n){return new Kt(3402,!1)}()}_flushAnimations(e,t){const i=new Tb,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(K=>{u.add(K);const ae=this.driver.query(K,".ng-animate-queued",!0);for(let fe=0;fe<ae.length;fe++)u.add(ae[fe])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=PX(p,this.collectedEnterElements),_=new Map;let y=0;g.forEach((K,ae)=>{const fe=cR+y++;_.set(ae,fe),K.forEach(de=>P4(de,fe))});const w=[],C=new Set,x=new Set;for(let K=0;K<this.collectedLeaveElements.length;K++){const ae=this.collectedLeaveElements[K],fe=ae[k4];fe&&fe.setForRemoval&&(w.push(ae),C.add(ae),fe.hasAnimation?this.driver.query(ae,".ng-star-inserted",!0).forEach(de=>C.add(de)):x.add(ae))}const M=new Map,T=PX(p,Array.from(C));T.forEach((K,ae)=>{const fe=vb+y++;M.set(ae,fe),K.forEach(de=>P4(de,fe))}),e.push(()=>{g.forEach((K,ae)=>{const fe=_.get(ae);K.forEach(de=>P7(de,fe))}),T.forEach((K,ae)=>{const fe=M.get(ae);K.forEach(de=>P7(de,fe))}),w.forEach(K=>{this.processLeaveNode(K)})});const I=[],F=[];for(let K=this._namespaceList.length-1;K>=0;K--)this._namespaceList[K].drainQueuedTransitions(t).forEach(fe=>{const de=fe.player,ke=fe.element;if(I.push(de),this.collectedEnterElements.length){const Zt=ke[k4];if(Zt&&Zt.setForMove){if(Zt.previousTriggersValues&&Zt.previousTriggersValues.has(fe.triggerName)){const cn=Zt.previousTriggersValues.get(fe.triggerName),Sn=this.statesByElement.get(fe.element);if(Sn&&Sn.has(fe.triggerName)){const ln=Sn.get(fe.triggerName);ln.value=cn,Sn.set(fe.triggerName,ln)}}return void de.destroy()}}const et=!f||!this.driver.containsElement(f,ke),Fe=M.get(ke),wt=_.get(ke),ut=this._buildInstruction(fe,i,wt,Fe,et);if(ut.errors&&ut.errors.length)return void F.push(ut);if(et)return de.onStart(()=>G8(ke,ut.fromStyles)),de.onDestroy(()=>N0(ke,ut.toStyles)),void r.push(de);if(fe.isFallbackTransition)return de.onStart(()=>G8(ke,ut.fromStyles)),de.onDestroy(()=>N0(ke,ut.toStyles)),void r.push(de);const Bt=[];ut.timelines.forEach(Zt=>{Zt.stretchStartingKeyframe=!0,this.disabledNodes.has(Zt.element)||Bt.push(Zt)}),ut.timelines=Bt,i.append(ke,ut.timelines),o.push({instruction:ut,player:de,element:ke}),ut.queriedElements.forEach(Zt=>X3(a,Zt,[]).push(de)),ut.preStyleProps.forEach((Zt,cn)=>{if(Zt.size){let Sn=c.get(cn);Sn||c.set(cn,Sn=new Set),Zt.forEach((ln,Ti)=>Sn.add(Ti))}}),ut.postStyleProps.forEach((Zt,cn)=>{let Sn=l.get(cn);Sn||l.set(cn,Sn=new Set),Zt.forEach((ln,Ti)=>Sn.add(Ti))})});if(F.length){const K=[];F.forEach(ae=>{K.push(function Qxe(n,e){return new Kt(3505,!1)}())}),I.forEach(ae=>ae.destroy()),this.reportError(K)}const P=new Map,R=new Map;o.forEach(K=>{const ae=K.element;i.has(ae)&&(R.set(ae,ae),this._beforeAnimationBuild(K.player.namespaceId,K.instruction,P))}),r.forEach(K=>{const ae=K.element;this._getPreviousPlayers(ae,!1,K.namespaceId,K.triggerName,null).forEach(de=>{X3(P,ae,[]).push(de),de.destroy()})});const k=w.filter(K=>zX(K,c,l)),W=new Map;kX(W,this.driver,x,l,qh).forEach(K=>{zX(K,c,l)&&k.push(K)});const Te=new Map;g.forEach((K,ae)=>{kX(Te,this.driver,new Set(K),c,"!")}),k.forEach(K=>{const ae=W.get(K),fe=Te.get(K);W.set(K,new Map([...Array.from(ae?.entries()??[]),...Array.from(fe?.entries()??[])]))});const me=[],Q=[],he={};o.forEach(K=>{const{element:ae,player:fe,instruction:de}=K;if(i.has(ae)){if(u.has(ae))return fe.onDestroy(()=>N0(ae,de.toStyles)),fe.disabled=!0,fe.overrideTotalTime(de.totalTime),void r.push(fe);let ke=he;if(R.size>1){let Fe=ae;const wt=[];for(;Fe=Fe.parentNode;){const ut=R.get(Fe);if(ut){ke=ut;break}wt.push(Fe)}wt.forEach(ut=>R.set(ut,ke))}const et=this._buildAnimation(fe.namespaceId,de,P,s,Te,W);if(fe.setRealPlayer(et),ke===he)me.push(fe);else{const Fe=this.playersByElement.get(ke);Fe&&Fe.length&&(fe.parentPlayer=Fd(Fe)),r.push(fe)}}else G8(ae,de.fromStyles),fe.onDestroy(()=>N0(ae,de.toStyles)),Q.push(fe),u.has(ae)&&r.push(fe)}),Q.forEach(K=>{const ae=s.get(K.element);if(ae&&ae.length){const fe=Fd(ae);K.setRealPlayer(fe)}}),r.forEach(K=>{K.parentPlayer?K.syncPlayerEvents(K.parentPlayer):K.destroy()});for(let K=0;K<w.length;K++){const ae=w[K],fe=ae[k4];if(P7(ae,vb),fe&&fe.hasAnimation)continue;let de=[];if(a.size){let et=a.get(ae);et&&et.length&&de.push(...et);let Fe=this.driver.query(ae,lR,!0);for(let wt=0;wt<Fe.length;wt++){let ut=a.get(Fe[wt]);ut&&ut.length&&de.push(...ut)}}const ke=de.filter(et=>!et.destroyed);ke.length?$Me(this,ae,ke):this.processLeaveNode(ae)}return w.length=0,me.forEach(K=>{this.players.push(K),K.onDone(()=>{K.destroy();const ae=this.players.indexOf(K);this.players.splice(ae,1)}),K.play()}),me}elementContainsData(e,t){let i=!1;const r=t[k4];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==H9;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,u=l!==s,f=X3(i,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(g=>{const _=g.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),g.destroy(),f.push(g)})}G8(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,c=t.element,l=[],u=new Set,f=new Set,p=t.timelines.map(_=>{const y=_.element;u.add(y);const w=y[k4];if(w&&w.removedBeforeQueried)return new I9(_.duration,_.delay);const C=y!==c,x=function qMe(n){const e=[];return HX(n,e),e}((i.get(y)||NMe).map(P=>P.getRealPlayer())).filter(P=>!!P.element&&P.element===y),M=s.get(y),T=o.get(y),I=lX(0,this._normalizer,0,_.keyframes,M,T),F=this._buildPlayer(_,I,x);if(_.subTimeline&&r&&f.add(y),C){const P=new bR(e,a,y);P.setRealPlayer(F),l.push(P)}return F});l.forEach(_=>{X3(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>function QMe(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,_.element,_))}),u.forEach(_=>P4(_,vX));const g=Fd(p);return g.onDestroy(()=>{u.forEach(_=>P7(_,vX)),N0(c,t.toStyles)}),f.forEach(_=>{X3(r,_,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new I9(e.duration,e.delay)}}class bR{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new I9,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>nR(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){X3(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Ib(n){return n&&1===n.nodeType}function FX(n,e){const t=n.style.display;return n.style.display=e??"none",t}function kX(n,e,t,i,r){const s=[];t.forEach(c=>s.push(FX(c)));const o=[];i.forEach((c,l)=>{const u=new Map;c.forEach(f=>{const p=e.computeStyle(l,f,r);u.set(f,p),(!p||0==p.length)&&(l[k4]=VMe,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>FX(c,s[a++])),o}function PX(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:r.has(l)?1:o(l),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function P4(n,e){n.classList?.add(e)}function P7(n,e){n.classList?.remove(e)}function $Me(n,e,t){Fd(t).onDone(()=>n.processLeaveNode(e))}function HX(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof iX?HX(i.players,e):e.push(i)}}function zX(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Bb{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new GMe(e,t,i),this._timelineEngine=new kMe(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const c=[],u=dR(this._driver,s,c,[]);if(c.length)throw function Rxe(n,e){return new Kt(3404,!1)}();a=function IMe(n,e,t){return new BMe(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=uX(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=uX(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let YMe=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&N0(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(N0(this._element,this._initialStyles),this._endStyles&&(N0(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(G8(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(G8(this._element,this._endStyles),this._endStyles=null),N0(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function xR(n){let e=null;return n.forEach((t,i)=>{(function ZMe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class OX{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:xX(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class JMe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return pX(e,t)}getParentElement(e){return oR(e)}query(e,t,i){return gX(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const c={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(c.easing=s);const l=new Map,u=o.filter(g=>g instanceof OX);(function iMe(n,e){return 0===n||0===e})(i,r)&&u.forEach(g=>{g.currentSnapshot.forEach((_,y)=>l.set(y,_))});let f=function Jxe(n){return n.length?n[0]instanceof Map?n:n.map(e=>_X(e)):[]}(t).map(g=>kd(g));f=function rMe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,xX(n,a)))}}return e}(e,f,l);const p=function XMe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=xR(e[0]),e.length>1&&(i=xR(e[e.length-1]))):e instanceof Map&&(t=xR(e)),t||i?new YMe(n,t,i):null}(e,f);return new OX(e,f,c,p)}}let eSe=(()=>{class n extends XB{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Yo.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?tX(t):t;return NX(this._renderer,null,i,"register",[r]),new tSe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Xe(l3),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class tSe extends class Wbe{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new nSe(this._id,e,t||{},this._renderer)}}class nSe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return NX(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function NX(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const VX="@.disabled";let iSe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new UX("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=u=>{Array.isArray(u)?u.forEach(c):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(c),new rSe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Xe(l3),Xe(Bb),Xe(Xi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class UX{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==VX?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class rSe extends UX{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==VX?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function sSe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function oSe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let aSe=(()=>{class n extends Bb{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(aR),Xe(vR),Xe(_7))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const GX=[{provide:XB,useClass:eSe},{provide:vR,useFactory:function cSe(){return new EMe}},{provide:Bb,useClass:aSe},{provide:l3,useFactory:function lSe(n,e,t){return new iSe(n,e,t)},deps:[vC,Bb,Xi]}],MR=[{provide:aR,useFactory:()=>new JMe},{provide:T4,useValue:"BrowserAnimations"},...GX],QX=[{provide:aR,useClass:mX},{provide:T4,useValue:"NoopAnimations"},...GX];let uSe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?QX:MR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:MR,imports:[r$]}),n})();const hSe=["*",[["mat-toolbar-row"]]],fSe=["*","mat-toolbar-row"],dSe=N8(class{constructor(n){this._elementRef=n}});let pSe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),gSe=(()=>{class n extends dSe{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(m3),U(Pi))},n.\u0275cmp=Bn({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&ja(r,pSe,5),2&t){let s;Di(s=Ii())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&Rr("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Ot],ngContentSelectors:fSe,decls:2,vars:0,template:function(t,i){1&t&&(ec(hSe),Po(0),Po(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),mSe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Gi,Gi]}),n})(),vSe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[kl,Gi,R8,R8,Gi]}),n})();function SR(n){return n&&"function"==typeof n.connect&&!(n instanceof ZI)}class WX{applyChanges(e,t,i,r,s){e.forEachOperation((o,a,c)=>{let l,u;if(null==o.previousIndex){const f=i(o,a,c);l=t.createEmbeddedView(f.templateRef,f.context,f.index),u=1}else null==c?(t.remove(a),u=3):(l=t.get(a),t.move(l,c),u=2);s&&s({context:l?.context,operation:u,record:o})})}detach(){}}class ER{constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Je,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}const z9=new Rt("_ViewRepeater");let $X=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(U(ea),U(dn))},n.\u0275dir=ht({type:n}),n})(),W8=(()=>{class n extends $X{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,features:[Ot]}),n})();const Z2=new Rt("NgValueAccessor"),wSe={provide:Z2,useExisting:pr(()=>TR),multi:!0},bSe=new Rt("CompositionEventMode");let TR=(()=>{class n extends $X{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CSe(){const n=R0()?R0().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(U(ea),U(dn),U(bSe,8))},n.\u0275dir=ht({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&an("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Ki([wSe]),Ot]}),n})();const h2=new Rt("NgValidators"),Hd=new Rt("NgAsyncValidators");function rY(n){return null!=n}function sY(n){return IA(n)?fs(n):n}function oY(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function aY(n,e){return e.map(t=>t(n))}function cY(n){return n.map(e=>function SSe(n){return!n.validate}(e)?e:t=>e.validate(t))}function LR(n){return null!=n?function lY(n){if(!n)return null;const e=n.filter(rY);return 0==e.length?null:function(t){return oY(aY(t,e))}}(cY(n)):null}function DR(n){return null!=n?function uY(n){if(!n)return null;const e=n.filter(rY);return 0==e.length?null:function(t){return FK(aY(t,e).map(sY)).pipe(qt(oY))}}(cY(n)):null}function hY(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function IR(n){return n?Array.isArray(n)?n:[n]:[]}function kb(n,e){return Array.isArray(n)?n.includes(e):n===e}function pY(n,e){const t=IR(e);return IR(n).forEach(r=>{kb(t,r)||t.push(r)}),t}function gY(n,e){return IR(e).filter(t=>!kb(n,t))}class mY{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Pl extends mY{get formDirective(){return null}get path(){return null}}class zd extends mY{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Pb=(()=>{class n extends class AY{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(U(zd,2))},n.\u0275dir=ht({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Rr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ot]}),n})();const O9="VALID",zb="INVALID",H7="PENDING",N9="DISABLED";function _Y(n){return Array.isArray(n)?LR(n):n||null}function yY(n){return Array.isArray(n)?DR(n):n||null}function Ob(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function V9(n,e){(function zR(n,e){const t=function fY(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(hY(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function dY(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(hY(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Ub(e._rawValidators,r),Ub(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function PSe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xY(n,e)})}(n,e),function zSe(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function HSe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xY(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function kSe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ub(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function xY(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function TY(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function LY(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const jSe={provide:zd,useExisting:pr(()=>G9)},RY=(()=>Promise.resolve())();let G9=(()=>{class n extends zd{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class bY{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=_Y(this._rawValidators),this._composedAsyncValidatorFn=yY(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===O9}get invalid(){return this.status===zb}get pending(){return this.status==H7}get disabled(){return this.status===N9}get enabled(){return this.status!==N9}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=_Y(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=yY(e)}addValidators(e){this.setValidators(pY(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(pY(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gY(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gY(e,this._rawAsyncValidators))}hasValidator(e){return kb(this._rawValidators,e)}hasAsyncValidator(e){return kb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=H7,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=N9,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=O9,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===O9||this.status===H7)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?N9:O9}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=H7,this._hasOwnPendingAsyncValidator=!0;const t=sY(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new er,this.statusChanges=new er}_calculateStatus(){return this._allControlsDisabled()?N9:this.errors?zb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(H7)?H7:this._anyControlsHaveStatus(zb)?zb:O9}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ob(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,i){super(function kR(n){return(Ob(n)?n.validators:n)||null}(t),function PR(n,e){return(Ob(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ob(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=LY(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){TY(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){TY(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){LY(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new er,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function NR(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===TR?t=s:function VSe(n){return Object.getPrototypeOf(n.constructor)===W8}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function OR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){V9(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){RY.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&kh(i);RY.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Nb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(U(Pl,9),U(h2,10),U(Hd,10),U(Z2,10),U(xc,8))},n.\u0275dir=ht({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ki([jSe]),Ot,wr]}),n})(),kY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),AEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[kY]}),n})(),vEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[AEe]}),n})(),yEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Gi,Gi]}),n})();const ZY=["*"],wEe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],CEe=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],EEe=F7(z0(class{})),TEe=z0(class{}),eZ=new Rt("MatList"),LEe=new Rt("MatNavList");let DEe=(()=>{class n extends EEe{constructor(t){super(),this._elementRef=t,this._stateChanges=new Je,"action-list"===this._getListType()&&(t.nativeElement.classList.add("mat-action-list"),t.nativeElement.setAttribute("role","group"))}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(U(dn))},n.\u0275cmp=Bn({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[Ki([{provide:eZ,useExisting:n}]),Ot,wr],ngContentSelectors:ZY,decls:1,vars:0,template:function(t,i){1&t&&(ec(),Po(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),n})(),tZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),nZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),IEe=(()=>{class n extends TEe{constructor(t,i,r,s){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new Je,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Ta(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=Er(t)}ngAfterContentInit(){!function LK(n,e,t="mat"){n.changes.pipe(F0(n)).subscribe(({length:i})=>{E9(e,`${t}-2-line`,!1),E9(e,`${t}-3-line`,!1),E9(e,`${t}-multi-line`,!1),2===i||3===i?E9(e,`${t}-${i}-line`,!0):i>3&&E9(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(xc),U(LEe,8),U(eZ,8))},n.\u0275cmp=Bn({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,i,r){if(1&t&&(ja(r,tZ,5),ja(r,nZ,5),ja(r,TK,5)),2&t){let s;Di(s=Ii())&&(i._avatar=s.first),Di(s=Ii())&&(i._icon=s.first),Di(s=Ii())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(t,i){2&t&&Rr("mat-list-item-disabled",i.disabled)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[Ot],ngContentSelectors:CEe,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,i){1&t&&(ec(wEe),H(0,"span",0),$e(1,"span",1),Po(2),H(3,"span",2),Po(4,1),N(),Po(5,2),N()),2&t&&(Z(1),Ce("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},dependencies:[O0],encapsulation:2,changeDetection:0}),n})(),HEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[hb,ku,Gi,UB,kl,hb,Gi,UB,yEe]}),n})(),zEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),OEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[kl,Gi,zEe,Sd]}),n})();const NEe=["sliderWrapper"],H4=Md({passive:!1}),WEe={provide:Z2,useExisting:pr(()=>Wb),multi:!0};class jEe{}const $Ee=ub(N8(F7(class{constructor(n){this._elementRef=n}}),"accent"));let Wb=(()=>{class n extends $Ee{constructor(t,i,r,s,o,a,c,l){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=l,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new er,this.input=new er,this.valueChange=new er,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=Re.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!Q9(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=Q9(u)?function qEe(n,e){for(let t=0;t<n.touches.length;t++){const i=n.touches[t].target;if(e===i||e.contains(i))return n.touches[t].identifier}}(u,this._elementRef.nativeElement):void 0;const f=oZ(u,this._touchId);if(f){const p=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(f),this._valueOnSlideStart=p,u.cancelable&&u.preventDefault(),p!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const f=oZ(u,this._touchId);if(f){u.cancelable&&u.preventDefault();const p=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(f),p!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!Q9(u)||"number"!=typeof this._touchId||qR(u.changedTouches,this._touchId))&&(u.cancelable&&u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=c,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=t.nativeElement;u.addEventListener("mousedown",this._pointerDown,H4),u.addEventListener("touchstart",this._pointerDown,H4)})}get invert(){return this._invert}set invert(t){this._invert=Er(t)}get max(){return this._max}set max(t){this._max=Iu(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Iu(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Iu(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Er(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Iu(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let i=Iu(t,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Er(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const t=this.percent,r=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const c=this._shouldInvertAxis();let l;l=this.vertical?c?"Bottom":"Top":c?"Right":"Left",a[`padding${l}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,H4),t.removeEventListener("touchstart",this._pointerDown,H4),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||O8(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const i=this._document,r=Q9(t),o=r?"touchend":"mouseup";i.addEventListener(r?"touchmove":"mousemove",this._pointerMove,H4),i.addEventListener(o,this._pointerUp,H4),r&&i.addEventListener("touchcancel",this._pointerUp,H4);const a=this._getWindow();typeof a<"u"&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,H4),t.removeEventListener("mouseup",this._pointerUp,H4),t.removeEventListener("touchmove",this._pointerMove,H4),t.removeEventListener("touchend",this._pointerUp,H4),t.removeEventListener("touchcancel",this._pointerUp,H4);const i=this._getWindow();typeof i<"u"&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(t){const i=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(i+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),c=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(c,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let i=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(i*this.step/(this.max-this.min)))*this.step/i}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=sZ(t)?t:0}_createChangeEvent(t=this.value){let i=new jEe;return i.source=this,i.value=t,i}_calculatePercentage(t){const i=((t||0)-this.min)/(this.max-this.min);return sZ(i)?i:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,i=0,r=1){return Math.max(i,Math.min(t,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(F4),U(xc),U(Oh,8),s3("tabindex"),U(Xi),U(Pi),U(T4,8))},n.\u0275cmp=Bn({type:n,selectors:[["mat-slider"]],viewQuery:function(t,i){if(1&t&&Xs(NEe,5),2&t){let r;Di(r=Ii())&&(i._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,i){1&t&&an("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(C8("tabIndex",i.tabIndex),ps("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",i.valueText??i.displayValue)("aria-orientation",i.vertical?"vertical":"horizontal"),Rr("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[Ki([WEe]),Ot],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,i){1&t&&(H(0,"div",0,1)(2,"div",2),$e(3,"div",3)(4,"div",4),N(),H(5,"div",5),$e(6,"div",6),N(),H(7,"div",7),$e(8,"div",8)(9,"div",9),H(10,"div",10)(11,"span",11),V(12),N()()()()),2&t&&(Z(3),Ce("ngStyle",i._getTrackBackgroundStyles()),Z(1),Ce("ngStyle",i._getTrackFillStyles()),Z(1),Ce("ngStyle",i._getTicksContainerStyles()),Z(1),Ce("ngStyle",i._getTicksStyles()),Z(1),Ce("ngStyle",i._getThumbContainerStyles()),Z(5),D0(i.displayValue))},dependencies:[zh],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),n})();function sZ(n){return!isNaN(n)&&isFinite(n)}function Q9(n){return"t"===n.type[0]}function oZ(n,e){let t;return t=Q9(n)?"number"==typeof e?qR(n.touches,e)||qR(n.changedTouches,e):n.touches[0]||n.changedTouches[0]:n,t?{x:t.clientX,y:t.clientY}:void 0}function qR(n,e){for(let t=0;t<n.length;t++)if(n[t].identifier===e)return n[t]}let KEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[kl,Gi,Gi]}),n})(),lZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),lTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[ku,Gi,S9,lZ,Gi,lZ]}),n})();function uTe(n,e){}class jb{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let uZ=(()=>{class n extends jI{constructor(t,i,r,s,o,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),f},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=GI(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=GI();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=GI())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(PB),U(Pi,8),U(jb),U(cb),U(Xi),U(o9),U(F4))},n.\u0275cmp=Bn({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&Xs($I,7),2&t){let r;Di(r=Ii())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&ps("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Ot],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Wt(0,uTe,0,0,"ng-template",0)},dependencies:[$I],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class KR{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Je,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!O8(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const hZ=new Rt("DialogScrollStrategy"),hTe=new Rt("DialogData"),fTe=new Rt("DefaultDialogConfig"),pTe={provide:hZ,deps:[A3],useFactory:function dTe(n){return()=>n.scrollStrategies.block()}};let gTe=0,fZ=(()=>{class n{constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je,this._afterOpenedAtThisLevel=new Je,this._ariaHiddenElements=new Map,this.afterAllClosed=DC(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(F0(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new jb,...i}).id=i.id||"cdk-dialog-"+gTe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new KR(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){XR(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){XR(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),XR(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new KI({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:jb,useValue:r},{provide:KR,useValue:i},{provide:o9,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=uZ;const c=new s9(a,r.viewContainerRef,Cc.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,s){if(t instanceof Vc){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new SC(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new s9(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:hTe,useValue:t.data},{provide:KR,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(Oh,null,zn.Optional))&&a.push({provide:Oh,useValue:{value:t.direction,change:mi()}}),Cc.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(Xe(A3),Xe(Cc),Xe(fTe,8),Xe(n,12),Xe(TC),Xe(hZ))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();function XR(n,e){let t=n.length;for(;t--;)e(n[t])}let mTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[fZ,pTe],imports:[Ed,Sd,NB,Sd]}),n})();function ATe(n,e){}const z7={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},vTe={dialogContainer:I2("dialogContainer",[zo("void, exit",Oi({opacity:0,transform:"scale(0.7)"})),zo("enter",Oi({transform:"none"})),Oo("* => enter",eX([So("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",Oi({transform:"none",opacity:1})),ZB("@*",YB(),{optional:!0})]),z7),Oo("* => void, * => exit",eX([So("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",Oi({opacity:0})),ZB("@*",YB(),{optional:!0})]),z7)])};class $b{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=z7.params.enterAnimationDuration,this.exitAnimationDuration=z7.params.exitAnimationDuration}}let _Te=(()=>{class n extends uZ{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,o,a,c,l),this._animationStateChanged=new er}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(PB),U(Pi,8),U($b),U(cb),U(Xi),U(o9),U(F4))},n.\u0275cmp=Bn({type:n,selectors:[["ng-component"]],features:[Ot],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),yTe=(()=>{class n extends _Te{constructor(t,i,r,s,o,a,c,l,u){super(t,i,r,s,o,a,c,u),this._changeDetectorRef=l,this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?this._openAnimationDone(i):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||z7.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||z7.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(PB),U(Pi,8),U($b),U(cb),U(Xi),U(o9),U(xc),U(F4))},n.\u0275cmp=Bn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,i){1&t&&DD("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(C8("id",i._config.id),ps("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),BD("@dialogContainer",i._getAnimationState()))},features:[Ot],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Wt(0,ATe,0,0,"ng-template",0)},dependencies:[$I],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[vTe.dialogContainer]}}),n})();class wTe{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Je,this._beforeClosed=new Je,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(_o(r=>"opened"===r.state),Lc(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(_o(r=>"closed"===r.state),Lc(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),e2(this.backdropClick(),this.keydownEvents().pipe(_o(r=>27===r.keyCode&&!this.disableClose&&!O8(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function CTe(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(_o(t=>"closing"===t.state),Lc(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const bTe=new Rt("MatDialogData"),xTe=new Rt("mat-dialog-default-options"),dZ=new Rt("mat-dialog-scroll-strategy"),STe={provide:dZ,deps:[A3],useFactory:function MTe(n){return()=>n.scrollStrategies.block()}};let ETe=0,TTe=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=c,this._dialogContainerType=l,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je,this._afterOpenedAtThisLevel=new Je,this._idPrefix="mat-dialog-",this.afterAllClosed=DC(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(F0(void 0))),this._scrollStrategy=a,this._dialog=i.get(fZ)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let r;(i={...this._defaultOptions||new $b,...i}).id=i.id||`${this._idPrefix}${ETe++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:$b,useValue:i},{provide:jb,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){_8()},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),LTe=(()=>{class n extends TTe{constructor(t,i,r,s,o,a,c,l){super(t,i,s,a,c,o,wTe,yTe,bTe,l)}}return n.\u0275fac=function(t){return new(t||n)(Xe(A3),Xe(Cc),Xe($A,8),Xe(xTe,8),Xe(dZ),Xe(n,12),Xe(TC),Xe(T4,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),DTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[LTe,STe],imports:[mTe,Ed,Sd,Gi,Gi]}),n})(),GTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[ku,Gi,Gi]}),n})(),QTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Gi,Gi]}),n})();const WTe=["input"],jTe=function(n){return{enterDuration:n}},$Te=["*"],qTe=new Rt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let KTe=0;const XTe={provide:Z2,useExisting:pr(()=>qb),multi:!0};class YTe{constructor(e,t){this.source=e,this.checked=t}}const ZTe=ub(N8(z0(F7(class{constructor(n){this._elementRef=n}}))));let JTe=(()=>{class n extends ZTe{constructor(t,i,r,s,o,a,c){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new er,this.toggleChange=new er,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${c}${++KTe}`}get required(){return this._required}set required(t){this._required=Er(t)}get checked(){return this._checked}set checked(t){this._checked=Er(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(t){_8()},n.\u0275dir=ht({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[Ot]}),n})(),qb=(()=>{class n extends JTe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a,"mat-slide-toggle-")}_createChangeEvent(t){return new YTe(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(F4),U(xc),s3("tabindex"),U(qTe),U(T4,8))},n.\u0275cmp=Bn({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&Xs(WTe,5),2&t){let r;Di(r=Ii())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,i){2&t&&(C8("id",i.id),ps("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),Rr("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[Ki([XTe]),Ot],ngContentSelectors:$Te,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,i){if(1&t&&(ec(),H(0,"label",0,1)(2,"span",2)(3,"input",3,4),an("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),N(),H(5,"span",5),$e(6,"span",6),H(7,"span",7),$e(8,"span",8),N()()(),H(9,"span",9,10),an("cdkObserveContent",function(){return i._onLabelTextChange()}),H(11,"span",11),V(12,"\xa0"),N(),Po(13),N()()),2&t){const r=Ar(1),s=Ar(10);ps("for",i.inputId),Z(2),Rr("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),Z(1),Ce("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),ps("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),Z(4),Ce("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",f3(18,jTe,i._noopAnimations?0:150))}},dependencies:[O0,dK],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),n})(),AZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),nLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[AZ,ku,Gi,S9,AZ,Gi]}),n})(),vZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["mat-label"]]}),n})(),Kb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[kl,Gi,S9,Gi]}),n})(),aLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[B8]}),n})(),YR=(()=>{class n{constructor(){this.changes=new Je,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vLe={provide:YR,deps:[[new o3,new b0,YR]],useFactory:function ALe(n){return n||new YR}};let _Le=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[vLe,EK],imports:[Gi,kl,Sd,KB,aLe,YK,ku,Gi]}),n})(),CZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),yLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[EK],imports:[CZ,Kb,Gi,CZ,Kb]}),n})(),MLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[kl,Gi,Sd,ku,S9,NB,Gi]}),n})(),TLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[hb,Gi,hb,Gi]}),n})();const LLe=["button"],DLe=["*"],xZ=new Rt("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),MZ=new Rt("MatButtonToggleGroup"),ILe={provide:Z2,useExisting:pr(()=>TZ),multi:!0};let SZ=0;class EZ{constructor(e,t){this.source=e,this.value=t}}let TZ=(()=>{class n{constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+SZ++,this.valueChange=new er,this.change=new er,this.appearance=i&&i.appearance?i.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=Er(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=Er(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=Er(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new ER(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const i=new EZ(t,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,r=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(U(xc),U(xZ,8))},n.\u0275dir=ht({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,r){if(1&t&&ja(r,LZ,5),2&t){let s;Di(s=Ii())&&(i._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(ps("aria-disabled",i.disabled),Rr("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Ki([ILe,{provide:MZ,useExisting:n}])]}),n})();const BLe=z0(class{});let LZ=(()=>{class n extends BLe{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new er;const c=Number(o);this.tabIndex=c||0===c?c:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=Er(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=Er(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+SZ++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new EZ(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(t){return new(t||n)(U(MZ,8),U(xc),U(dn),U(F4),s3("tabindex"),U(xZ,8))},n.\u0275cmp=Bn({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&Xs(LLe,5),2&t){let r;Di(r=Ii())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&an("focus",function(){return i.focus()}),2&t&&(ps("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),Rr("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Ot],ngContentSelectors:DLe,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(ec(),H(0,"button",0,1),an("click",function(){return i._onButtonClick()}),H(2,"span",2),Po(3),N()(),$e(4,"span",3)(5,"span",4)),2&t){const r=Ar(1);Ce("id",i.buttonId)("disabled",i.disabled||null),ps("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),Z(5),Ce("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[O0],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),RLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Gi,ku,Gi]}),n})(),PLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ed,Sd,kl,KB,Gi,Gi]}),n})();const VLe={provide:new Rt("mat-tooltip-scroll-strategy"),deps:[A3],useFactory:function NLe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let GLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[VLe],imports:[NB,kl,Ed,Gi,Gi,R8]}),n})();const qLe={provide:new Rt("mat-select-scroll-strategy"),deps:[A3],useFactory:function $Le(n){return()=>n.scrollStrategies.reposition()}};let KLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[qLe],imports:[kl,Ed,RK,Gi,R8,Kb,RK,Gi]}),n})();function XLe(n,e){if(1&n&&(ko(),$e(0,"circle",4)),2&n){const t=Nt(),i=Ar(1);h3("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),ps("r",t._getCircleRadius())}}function YLe(n,e){if(1&n&&(ko(),$e(0,"circle",4)),2&n){const t=Nt(),i=Ar(1);h3("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),ps("r",t._getCircleRadius())}}const JLe=N8(class{constructor(n){this._elementRef=n}},"primary"),eDe=new Rt("mat-progress-spinner-default-options",{providedIn:"root",factory:function tDe(){return{diameter:100}}});class Od extends JLe{constructor(e,t,i,r,s,o,a,c){super(e),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Re.EMPTY,this.mode="determinate";const l=Od._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),l.has(i.head)||l.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&c&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&c.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=Iu(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Iu(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Iu(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=g$(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,i=Od._diameters;let r=i.get(e);if(!r||!r.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),r||(r=new Set,i.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Od._diameters=new WeakMap,Od.\u0275fac=function(e){return new(e||Od)(U(dn),U(m3),U(Pi,8),U(T4,8),U(eDe),U(xc),U(xC),U(Xi))},Od.\u0275cmp=Bn({type:Od,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(ps("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),h3("width",t.diameter,"px")("height",t.diameter,"px"),Rr("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[Ot],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(ko(),H(0,"svg",0,1),Wt(2,XLe,1,11,"circle",2),Wt(3,YLe,1,9,"circle",3),N()),2&e&&(h3("width",t.diameter,"px")("height",t.diameter,"px"),Ce("ngSwitch","indeterminate"===t.mode),ps("viewBox",t._getViewBox()),Z(2),Ce("ngSwitchCase",!0),Z(1),Ce("ngSwitchCase",!1))},dependencies:[hC,Fj],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let iDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Gi,kl,Gi]}),n})();const sDe=[[["caption"]],[["colgroup"],["col"]]],oDe=["caption","colgroup, col"];function JR(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=Er(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const O7=new Rt("CDK_TABLE");let N7=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(U(Vc))},n.\u0275dir=ht({type:n,selectors:[["","cdkCellDef",""]]}),n})(),V7=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(U(Vc))},n.\u0275dir=ht({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),Xb=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(U(Vc))},n.\u0275dir=ht({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class uDe{}const hDe=JR(uDe);let Xh=(()=>{class n extends hDe{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=Er(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(U(O7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(ja(r,N7,5),ja(r,V7,5),ja(r,Xb,5)),2&t){let s;Di(s=Ii())&&(i.cell=s.first),Di(s=Ii())&&(i.headerCell=s.first),Di(s=Ii())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[Ki([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),Ot]}),n})();class eF{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let tF=(()=>{class n extends eF{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(U(Xh),U(dn))},n.\u0275dir=ht({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[Ot]}),n})(),nF=(()=>{class n extends eF{constructor(t,i){if(super(t,i),1===t._table?._elementRef.nativeElement.nodeType){const r=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(U(Xh),U(dn))},n.\u0275dir=ht({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[Ot]}),n})();class BZ{constructor(){this.tasks=[],this.endTasks=[]}}const iF=new Rt("_COALESCED_STYLE_SCHEDULER");let RZ=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new Je}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new BZ,this._getScheduleObservable().pipe(Ta(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new BZ;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?fs(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Lc(1))}}return n.\u0275fac=function(t){return new(t||n)(Xe(Xi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),rF=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof W9?t.headerCell.template:this instanceof j9?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(U(Vc),U(B0))},n.\u0275dir=ht({type:n,features:[wr]}),n})();class fDe extends rF{}const dDe=JR(fDe);let W9=(()=>{class n extends dDe{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(U(Vc),U(B0),U(O7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[Ot,wr]}),n})();class pDe extends rF{}const gDe=JR(pDe);let j9=(()=>{class n extends gDe{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(U(Vc),U(B0),U(O7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[Ot,wr]}),n})(),Yb=(()=>{class n extends rF{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(U(Vc),U(B0),U(O7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[Ot]}),n})(),Yh=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(U(Uc))},n.\u0275dir=ht({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),sF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Bn({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&bc(0,0)},dependencies:[Yh],encapsulation:2}),n})(),aF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Bn({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&bc(0,0)},dependencies:[Yh],encapsulation:2}),n})(),Zb=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(U(Vc))},n.\u0275dir=ht({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const FZ=["top","bottom","left","right"];class mDe{constructor(e,t,i,r,s=!0,o=!0,a){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(p=>p)&&!i.some(p=>p))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],o=s.children.length,a=this._getCellWidths(s,r),c=this._getStickyStartColumnPositions(a,t),l=this._getStickyEndColumnPositions(a,i),u=t.lastIndexOf(!0),f=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const p="rtl"===this.direction,g=p?"right":"left",_=p?"left":"right";for(const y of e)for(let w=0;w<o;w++){const C=y.children[w];t[w]&&this._addStickyStyle(C,g,c[w],w===u),i[w]&&this._addStickyStyle(C,_,l[w],w===f)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:a.slice(0,u+1).map((y,w)=>t[w]?y:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===f?[]:a.slice(f).map((y,w)=>i[w+f]?y:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,o=[],a=[],c=[];for(let u=0,f=0;u<r.length;u++){if(!s[u])continue;o[u]=f;const p=r[u];c[u]=this._isNativeHtmlTable?Array.from(p.children):[p];const g=p.getBoundingClientRect().height;f+=g,a[u]=g}const l=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let u=0;u<r.length;u++){if(!s[u])continue;const f=o[u],p=u===l;for(const g of c[u])this._addStickyStyle(g,i,f,p)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:c}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:c})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);FZ.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of FZ)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const cF=new Rt("CDK_SPL");let Jb=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Uc),U(dn))},n.\u0275dir=ht({type:n,selectors:[["","rowOutlet",""]]}),n})(),ex=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Uc),U(dn))},n.\u0275dir=ht({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),tx=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Uc),U(dn))},n.\u0275dir=ht({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),nx=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Uc),U(dn))},n.\u0275dir=ht({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),ix=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f,p,g){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=o,this._platform=c,this._viewRepeater=l,this._coalescedStyleScheduler=u,this._viewportRuler=f,this._stickyPositioningListener=p,this._ngZone=g,this._onDestroy=new Je,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new er,this.viewChange=new no({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Er(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Er(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Ta(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),SR(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&Xi.isInAngularZone()?this._ngZone.onStable.pipe(Lc(1),Ta(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let a=0;a<i.length;a++)this._renderRows[a].rowDef===s&&o.push(i[a]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const o=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let c=o[a];const l=this._cachedRenderRowsMap.get(c.data);l.has(c.rowDef)?l.get(c.rowDef).push(c):l.set(c.rowDef,[c]),t.push(c)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(o=>{const a=r&&r.has(o)?r.get(o):[];if(a.length){const c=a.shift();return c.dataIndex=i,c}return{data:t,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),rx(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=rx(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=rx(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=rx(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(o,a)=>o||!!a.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],SR(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;SR(this.dataSource)?t=this.dataSource.connect(this):function rDe(n){return!!n&&(n instanceof be||ue(n.lift)&&ue(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=mi(this.dataSource)),this._renderChangeSubscription=t.pipe(Ta(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(a=>this._columnDefsByName.get(a)),s=r.map(a=>a.sticky),o=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(o=>o.when&&o.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const o=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),o}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))Yh.mostRecentCellOutlet&&Yh.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const o=t.get(i).context;o.count=r,o.first=0===i,o.last=i===r-1,o.even=i%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const o of r.outlets)s.appendChild(o.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new mDe(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:mi()).pipe(Ta(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(U(B0),U(xc),U(dn),s3("role"),U(Oh,8),U(Pi),U(m3),U(z9),U(iF),U(xC),U(cF,12),U(Xi,8))},n.\u0275cmp=Bn({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(ja(r,Zb,5),ja(r,Xh,5),ja(r,Yb,5),ja(r,W9,5),ja(r,j9,5)),2&t){let s;Di(s=Ii())&&(i._noDataRow=s.first),Di(s=Ii())&&(i._contentColumnDefs=s),Di(s=Ii())&&(i._contentRowDefs=s),Di(s=Ii())&&(i._contentHeaderRowDefs=s),Di(s=Ii())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(Xs(Jb,7),Xs(ex,7),Xs(tx,7),Xs(nx,7)),2&t){let r;Di(r=Ii())&&(i._rowOutlet=r.first),Di(r=Ii())&&(i._headerRowOutlet=r.first),Di(r=Ii())&&(i._footerRowOutlet=r.first),Di(r=Ii())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&Rr("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[Ki([{provide:O7,useExisting:n},{provide:z9,useClass:WX},{provide:iF,useClass:RZ},{provide:cF,useValue:null}])],ngContentSelectors:oDe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(ec(sDe),Po(0),Po(1,1),bc(2,0)(3,1)(4,2)(5,3))},dependencies:[Jb,ex,tx,nx],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function rx(n,e){return n.concat(Array.from(e))}let vDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[MC]}),n})();const _De=[[["caption"]],[["colgroup"],["col"]]],yDe=["caption","colgroup, col"];let sx=(()=>{class n extends ix{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275cmp=Bn({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&Rr("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[Ki([{provide:z9,useClass:WX},{provide:ix,useExisting:n},{provide:O7,useExisting:n},{provide:iF,useClass:RZ},{provide:cF,useValue:null}]),Ot],ngContentSelectors:yDe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(ec(_De),Po(0),Po(1,1),bc(2,0)(3,1)(4,2)(5,3))},dependencies:[Jb,ex,tx,nx],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})(),$9=(()=>{class n extends N7{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matCellDef",""]],features:[Ki([{provide:N7,useExisting:n}]),Ot]}),n})(),q9=(()=>{class n extends V7{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matHeaderCellDef",""]],features:[Ki([{provide:V7,useExisting:n}]),Ot]}),n})(),K9=(()=>{class n extends Xh{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[Ki([{provide:Xh,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),Ot]}),n})(),X9=(()=>{class n extends tF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[Ot]}),n})(),Y9=(()=>{class n extends nF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[Ot]}),n})(),ox=(()=>{class n extends W9{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[Ki([{provide:W9,useExisting:n}]),Ot]}),n})(),ax=(()=>{class n extends Yb{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[Ki([{provide:Yb,useExisting:n}]),Ot]}),n})(),cx=(()=>{class n extends sF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275cmp=Bn({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[Ki([{provide:sF,useExisting:n}]),Ot],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&bc(0,0)},dependencies:[Yh],encapsulation:2}),n})(),lx=(()=>{class n extends aF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275cmp=Bn({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[Ki([{provide:aF,useExisting:n}]),Ot],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&bc(0,0)},dependencies:[Yh],encapsulation:2}),n})(),DDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[vDe,Gi,Gi]}),n})(),BDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ed,yLe,mSe,YK,KB,vSe,HEe,OEe,KEe,lTe,sxe,DTe,GTe,_Le,QTe,nLe,Kb,DDe,vEe,MLe,TLe,ku,RLe,PLe,GLe,KLe,iDe,MC]}),n})(),zDe=(()=>{class n extends f1{constructor(t,i,r,s,o,a,c){super(t,null,i,r),this.ngClassInstance=c,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new XA(s,o,t,a)),this.init(),this.setValue("","")}set klass(t){this.ngClassInstance.klass=t,this.setValue(t,"")}updateWithValue(t){this.ngClassInstance.ngClass=t,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(La),U($a),U(B0),U(S8),U(ea),U(XA,10))},n.\u0275dir=ht({type:n,inputs:{klass:["class","klass"]},features:[Ot]}),n})();const ODe=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let PZ=(()=>{class n extends zDe{constructor(){super(...arguments),this.inputs=ODe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[Ot]}),n})();class QDe{constructor(e,t,i=!0){this.key=e,this.value=t,this.key=i?e.replace(/['"]/g,"").trim():e.trim(),this.value=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=this.value.replace(/;/,"")}}function HZ(n){let e=typeof n;return"object"===e?n.constructor===Array?"array":n.constructor===Set?"set":"object":e}function OZ(n){const[e,...t]=n.split(":");return new QDe(e,t.join(":"))}function NZ(n,e){return e.key&&(n[e.key]=e.value),n}let $De=(()=>{class n extends f1{constructor(t,i,r,s,o,a,c,l,u){super(t,null,i,r),this.sanitizer=s,this.ngStyleInstance=c,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new zh(t,o,a)),this.init();const f=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(f),this.isServer=l&&y7(u)}updateWithValue(t){const i=this.buildStyleMap(t);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...i},this.isServer&&this.applyStyleToElement(i),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(t){const i=r=>this.sanitizer.sanitize(qs.STYLE,r)??"";if(t)switch(HZ(t)){case"string":return VZ(function WDe(n,e=";"){return String(n).trim().split(e).map(t=>t.trim()).filter(t=>""!==t)}(t),i);case"array":return VZ(t,i);default:return function zZ(n,e){let t=[];return"set"===HZ(n)?n.forEach(i=>t.push(i)):Object.keys(n).forEach(i=>{t.push(`${i}:${n[i]}`)}),function jDe(n,e){return n.map(OZ).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(NZ,{})}(t,e)}(t,i)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(La),U($a),U(T8),U(S8),U(ea),U(zh,10),U(D7),U(q3))},n.\u0275dir=ht({type:n,features:[Ot]}),n})();const qDe=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let U7=(()=>{class n extends $De{constructor(){super(...arguments),this.inputs=qDe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[Ot]}),n})();function VZ(n,e){return n.map(OZ).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(NZ,{})}let UZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[TB]}),n})(),QIe=(()=>{class n extends F1{buildStyles(t,i){let r=!1;(t=t||"none").endsWith("!")&&(t=t.substring(0,t.indexOf("!")),r=!0);const s={display:i.inline?"inline-grid":"grid","grid-auto-columns":"","grid-template-columns":""};return s[r?"grid-auto-columns":"grid-template-columns"]=t,s}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WIe=(()=>{class n extends f1{constructor(t,i,r,s){super(t,i,r,s),this.DIRECTIVE_KEY="grid-columns",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=Er(t)}updateWithValue(t){this.styleCache=this.inline?$Ie:jIe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(QIe),U(La),U($a))},n.\u0275dir=ht({type:n,inputs:{inline:["gdInline","inline"]},features:[Ot]}),n})();const jIe=new Map,$Ie=new Map,qIe=["gdColumns","gdColumns.xs","gdColumns.sm","gdColumns.md","gdColumns.lg","gdColumns.xl","gdColumns.lt-sm","gdColumns.lt-md","gdColumns.lt-lg","gdColumns.lt-xl","gdColumns.gt-xs","gdColumns.gt-sm","gdColumns.gt-md","gdColumns.gt-lg"];let KZ=(()=>{class n extends WIe{constructor(){super(...arguments),this.inputs=qIe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","gdColumns",""],["","gdColumns.xs",""],["","gdColumns.sm",""],["","gdColumns.md",""],["","gdColumns.lg",""],["","gdColumns.xl",""],["","gdColumns.lt-sm",""],["","gdColumns.lt-md",""],["","gdColumns.lt-lg",""],["","gdColumns.lt-xl",""],["","gdColumns.gt-xs",""],["","gdColumns.gt-sm",""],["","gdColumns.gt-md",""],["","gdColumns.gt-lg",""]],inputs:{gdColumns:"gdColumns","gdColumns.xs":"gdColumns.xs","gdColumns.sm":"gdColumns.sm","gdColumns.md":"gdColumns.md","gdColumns.lg":"gdColumns.lg","gdColumns.xl":"gdColumns.xl","gdColumns.lt-sm":"gdColumns.lt-sm","gdColumns.lt-md":"gdColumns.lt-md","gdColumns.lt-lg":"gdColumns.lt-lg","gdColumns.lt-xl":"gdColumns.lt-xl","gdColumns.gt-xs":"gdColumns.gt-xs","gdColumns.gt-sm":"gdColumns.gt-sm","gdColumns.gt-md":"gdColumns.gt-md","gdColumns.gt-lg":"gdColumns.gt-lg"},features:[Ot]}),n})(),XIe=(()=>{class n extends F1{buildStyles(t,i){return{display:i.inline?"inline-grid":"grid","grid-gap":t||"0"}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YIe=(()=>{class n extends f1{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="grid-gap",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=Er(t)}updateWithValue(t){this.styleCache=this.inline?JIe:ZIe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(U(dn),U(La),U(XIe),U($a))},n.\u0275dir=ht({type:n,inputs:{inline:["gdInline","inline"]},features:[Ot]}),n})();const ZIe=new Map,JIe=new Map,eBe=["gdGap","gdGap.xs","gdGap.sm","gdGap.md","gdGap.lg","gdGap.xl","gdGap.lt-sm","gdGap.lt-md","gdGap.lt-lg","gdGap.lt-xl","gdGap.gt-xs","gdGap.gt-sm","gdGap.gt-md","gdGap.gt-lg"];let XZ=(()=>{class n extends YIe{constructor(){super(...arguments),this.inputs=eBe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","gdGap",""],["","gdGap.xs",""],["","gdGap.sm",""],["","gdGap.md",""],["","gdGap.lg",""],["","gdGap.xl",""],["","gdGap.lt-sm",""],["","gdGap.lt-md",""],["","gdGap.lt-lg",""],["","gdGap.lt-xl",""],["","gdGap.gt-xs",""],["","gdGap.gt-sm",""],["","gdGap.gt-md",""],["","gdGap.gt-lg",""]],inputs:{gdGap:"gdGap","gdGap.xs":"gdGap.xs","gdGap.sm":"gdGap.sm","gdGap.md":"gdGap.md","gdGap.lg":"gdGap.lg","gdGap.xl":"gdGap.xl","gdGap.lt-sm":"gdGap.lt-sm","gdGap.lt-md":"gdGap.lt-md","gdGap.lt-lg":"gdGap.lt-lg","gdGap.lt-xl":"gdGap.lt-xl","gdGap.gt-xs":"gdGap.gt-xs","gdGap.gt-sm":"gdGap.gt-sm","gdGap.gt-md":"gdGap.gt-md","gdGap.gt-lg":"gdGap.gt-lg"},features:[Ot]}),n})(),ZZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[TB]}),n})(),pBe=(()=>{class n{constructor(t,i){y7(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Fu,useValue:{...LB,...t}},{provide:DB,useValue:i,multi:!0},{provide:D7,useValue:!0}]:[{provide:Fu,useValue:{...LB,...t}},{provide:DB,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(Xe(D7),Xe(q3))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[sK,UZ,ZZ,sK,UZ,ZZ]}),n})();const uF=new Rt("DISQUS_SHORTNAME");class Zh{constructor(e,t){this.shortname=e,this._document=t}get DISQUS(){return this._document.defaultView.DISQUS}get disqus_config(){return this._document.defaultView.disqus_config}set disqus_config(e){this._document.defaultView.disqus_config=e}}Zh.\u0275fac=function(e){return new(e||Zh)(Xe(uF),Xe(Pi))},Zh.\u0275prov=Lt({token:Zh,factory:Zh.\u0275fac,providedIn:"root"}),Zh.ngInjectableDef=cu({factory:function(){return new Zh(xs(uF),xs(Pi))},token:Zh,providedIn:"root"});let Z9=(()=>{class n{constructor(t,i,r){this.renderer=t,this.el=i,this.dService=r,this.newComment=new er(!0),this.ready=new er(!0),this.paginate=new er(!0)}ngOnChanges(){this.dService.DISQUS?this.reset():this.addDisqusScript()}addDisqusScript(){this.dService.disqus_config=this.getConfig();const t=this.renderer.createElement("script");t.src=`//${this.dService.shortname}.disqus.com/embed.js`,t.async=!0,t.type="text/javascript",this.renderer.setAttribute(t,"data-timestamp",(new Date).getTime().toString()),this.renderer.appendChild(this.el.nativeElement,t)}reset(){this.dService.DISQUS.reset({reload:!0,config:this.getConfig()})}getConfig(){const t=this;return function(){this.page.identifier=t.identifier,this.page.url=t.validateUrl(t.url),this.page.title=t.title,this.category_id=t.category,this.language=t.language,this.callbacks.onNewComment=[i=>{t.newComment.emit(i)}],this.callbacks.onReady=[i=>{t.ready.emit(i)}],this.callbacks.onPaginate=[i=>{t.paginate.emit(i)}]}}validateUrl(t){if(t){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t))return t;console.warn("[Disqus]: Invalid URL")}}}return n.\u0275fac=function(t){return new(t||n)(U(ea),U(dn),U(Zh))},n.\u0275cmp=Bn({type:n,selectors:[["disqus"]],inputs:{url:"url",identifier:"identifier",title:"title",category:"category",language:"language"},outputs:{newComment:"newComment",ready:"ready",paginate:"paginate"},features:[wr],decls:1,vars:0,consts:[["id","disqus_thread"]],template:function(t,i){1&t&&$e(0,"div",0)},encapsulation:2,changeDetection:0}),n})(),gBe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:uF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function JZ(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Da(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){JZ(s,i,r,o,a,"next",c)}function a(c){JZ(s,i,r,o,a,"throw",c)}o(void 0)})}}const hF=new Rt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),eJ=new Rt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=xs(Pi);if(!n)throw new Error("Window is not available");return n}}),ABe=new Rt("ngx-data-layer",{providedIn:"root",factory:()=>function mBe(n){return n?n.dataLayer=n.dataLayer||[]:null}(xs(eJ))}),tJ=new Rt("ngx-gtag-fn",{providedIn:"root",factory:()=>function vBe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(xs(eJ),xs(ABe))}),yBe={provide:WA,multi:!0,useFactory:function wBe(n,e,t){return Da(function*(){if(!n.trackingCode)return void(Zw()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(Zw()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||Zw()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(s=>"config"===s.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(s=>"js"===s.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const s of n.initCommands)e(s.command,...s.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[hF,tJ,Pi]};new Rt("ngx-google-analytics-routing-settings",{factory:()=>({})});let xBe=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:hF,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},yBe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();const Nd=100,U0=1e3,Hl=1001,k1=1003,qa=1006,Vd=1008,Y8=1009,Z8=1014,O4=1015,G0=1016,J8=1020,Pu=1023,e5=1026,t5=1027,nv=2300,j7=2301,Jh=3e3,No=3001,ef="srgb",n5="srgb-linear";class r5{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const el=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let GJ=1234567;const s5=Math.PI/180,iv=180/Math.PI;function Z3(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(el[255&n]+el[n>>8&255]+el[n>>16&255]+el[n>>24&255]+"-"+el[255&e]+el[e>>8&255]+"-"+el[e>>16&15|64]+el[e>>24&255]+"-"+el[63&t|128]+el[t>>8&255]+"-"+el[t>>16&255]+el[t>>24&255]+el[255&i]+el[i>>8&255]+el[i>>16&255]+el[i>>24&255]).toLowerCase()}function nc(n,e,t){return Math.max(e,Math.min(t,n))}function MF(n,e){return(n%e+e)%e}function rv(n,e,t){return(1-t)*n+t*e}function SF(n){return 0==(n&n-1)&&0!==n}function QJ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ax(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function tf(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ua(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var vx=Object.freeze({__proto__:null,DEG2RAD:s5,RAD2DEG:iv,generateUUID:Z3,clamp:nc,euclideanModulo:MF,mapLinear:function mRe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},inverseLerp:function ARe(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:rv,damp:function vRe(n,e,t,i){return rv(n,e,1-Math.exp(-t*i))},pingpong:function _Re(n,e=1){return e-Math.abs(MF(n,2*e)-e)},smoothstep:function yRe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function wRe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function CRe(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function bRe(n,e){return n+Math.random()*(e-n)},randFloatSpread:function xRe(n){return n*(.5-Math.random())},seededRandom:function MRe(n){void 0!==n&&(GJ=n);let e=GJ+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function SRe(n){return n*s5},radToDeg:function ERe(n){return n*iv},isPowerOfTwo:SF,ceilPowerOfTwo:QJ,floorPowerOfTwo:Ax,setQuaternionFromProperEuler:function TRe(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),g=s((i-e)/2),_=o((i-e)/2);switch(r){case"XYX":n.set(a*u,c*f,c*p,a*l);break;case"YZY":n.set(c*p,a*u,c*f,a*l);break;case"ZXZ":n.set(c*f,c*p,a*u,a*l);break;case"XZX":n.set(a*u,c*_,c*g,a*l);break;case"YXY":n.set(c*g,a*u,c*_,a*l);break;case"ZYZ":n.set(c*_,c*g,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:ua,denormalize:tf});class jt{constructor(e=0,t=0){jt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _3{constructor(){_3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],f=i[7],p=i[2],g=i[5],_=i[8],y=r[0],w=r[3],C=r[6],x=r[1],M=r[4],T=r[7],I=r[2],F=r[5],P=r[8];return s[0]=o*y+a*x+c*I,s[3]=o*w+a*M+c*F,s[6]=o*C+a*T+c*P,s[1]=l*y+u*x+f*I,s[4]=l*w+u*M+f*F,s[7]=l*C+u*T+f*P,s[2]=p*y+g*x+_*I,s[5]=p*w+g*M+_*F,s[8]=p*C+g*T+_*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=u*o-a*l,p=a*c-u*s,g=l*s-o*c,_=t*f+i*p+r*g;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const y=1/_;return e[0]=f*y,e[1]=(r*l-u*i)*y,e[2]=(a*i-r*o)*y,e[3]=p*y,e[4]=(u*t-r*c)*y,e[5]=(r*s-a*t)*y,e[6]=g*y,e[7]=(i*c-l*t)*y,e[8]=(o*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],c=r[1],l=r[4],u=r[7];return r[0]=t*s+i*c,r[3]=t*o+i*l,r[6]=t*a+i*u,r[1]=-i*s+t*c,r[4]=-i*o+t*l,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function WJ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function sv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function o5(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function _x(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const EF={[ef]:{[n5]:o5},[n5]:{[ef]:_x}},Hu={legacyMode:!0,get workingColorSpace(){return n5},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(EF[e]&&void 0!==EF[e][t]){const i=EF[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},jJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qc={r:0,g:0,b:0},zu={h:0,s:0,l:0},yx={h:0,s:0,l:0};function TF(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function wx(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let X7,Dn=(()=>{class n{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=ef){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Hu.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=n5){return this.r=t,this.g=i,this.b=r,Hu.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=n5){if(t=MF(t,1),i=nc(i,0,1),r=nc(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=TF(a,o,t+1/3),this.g=TF(a,o,t),this.b=TF(a,o,t-1/3)}return Hu.toWorkingColorSpace(this,s),this}setStyle(t,i=ef){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const c=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,Hu.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,Hu.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const l=parseFloat(o[1])/360,u=parseFloat(o[2])/100,f=parseFloat(o[3])/100;return r(o[4]),this.setHSL(l,u,f,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,Hu.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,Hu.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=ef){const r=jJ[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=o5(t.r),this.g=o5(t.g),this.b=o5(t.b),this}copyLinearToSRGB(t){return this.r=_x(t.r),this.g=_x(t.g),this.b=_x(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ef){return Hu.fromWorkingColorSpace(wx(this,Qc),t),nc(255*Qc.r,0,255)<<16^nc(255*Qc.g,0,255)<<8^nc(255*Qc.b,0,255)<<0}getHexString(t=ef){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=n5){Hu.fromWorkingColorSpace(wx(this,Qc),i);const r=Qc.r,s=Qc.g,o=Qc.b,a=Math.max(r,s,o),c=Math.min(r,s,o);let l,u;const f=(c+a)/2;if(c===a)l=0,u=0;else{const p=a-c;switch(u=f<=.5?p/(a+c):p/(2-a-c),a){case r:l=(s-o)/p+(s<o?6:0);break;case s:l=(o-r)/p+2;break;case o:l=(r-s)/p+4}l/=6}return t.h=l,t.s=u,t.l=f,t}getRGB(t,i=n5){return Hu.fromWorkingColorSpace(wx(this,Qc),i),t.r=Qc.r,t.g=Qc.g,t.b=Qc.b,t}getStyle(t=ef){return Hu.fromWorkingColorSpace(wx(this,Qc),t),t!==ef?`color(${t} ${Qc.r} ${Qc.g} ${Qc.b})`:`rgb(${255*Qc.r|0},${255*Qc.g|0},${255*Qc.b|0})`}offsetHSL(t,i,r){return this.getHSL(zu),zu.h+=t,zu.s+=i,zu.l+=r,this.setHSL(zu.h,zu.s,zu.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(zu),t.getHSL(yx);const r=rv(zu.h,yx.h,i),s=rv(zu.s,yx.s,i),o=rv(zu.l,yx.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=jJ,n})();class $J{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===X7&&(X7=sv("canvas")),X7.width=e.width,X7.height=e.height;const i=X7.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=X7}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=sv("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*o5(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*o5(t[i]/255)):o5(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Y7{constructor(e=null){this.isSource=!0,this.uuid=Z3(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(LF(r[o].isDataTexture?r[o].image:r[o]))}else s=LF(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function LF(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?$J.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let DRe=0,N4=(()=>{class n extends r5{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Hl,s=Hl,o=qa,a=Vd,c=Pu,l=Y8,u=1,f=Jh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:DRe++}),this.uuid=Z3(),this.name="",this.source=new Y7(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new jt(0,0),this.repeat=new jt(1,1),this.center=new jt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case U0:t.x=t.x-Math.floor(t.x);break;case Hl:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case U0:t.y=t.y-Math.floor(t.y);break;case Hl:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class Eo{constructor(e=0,t=0,i=0,r=1){Eo.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],f=c[8],p=c[1],g=c[5],_=c[9],y=c[2],w=c[6],C=c[10];if(Math.abs(u-p)<.01&&Math.abs(f-y)<.01&&Math.abs(_-w)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+y)<.1&&Math.abs(_+w)<.1&&Math.abs(l+g+C-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(l+1)/2,T=(g+1)/2,I=(C+1)/2,F=(u+p)/4,P=(f+y)/4,R=(_+w)/4;return M>T&&M>I?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=F/i,s=P/i):T>I?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=F/r,s=R/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=P/s,r=R/s),this.set(i,r,s,t),this}let x=Math.sqrt((w-_)*(w-_)+(f-y)*(f-y)+(p-u)*(p-u));return Math.abs(x)<.001&&(x=1),this.x=(w-_)/x,this.y=(f-y)/x,this.z=(p-u)/x,this.w=Math.acos((l+g+C-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class V4 extends r5{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Eo(0,0,e,t),this.scissorTest=!1,this.viewport=new Eo(0,0,e,t),this.texture=new N4({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:qa,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Y7(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DF extends N4{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=k1,this.minFilter=k1,this.wrapR=Hl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qJ extends N4{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=k1,this.minFilter=k1,this.wrapR=Hl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class B2{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],f=i[r+3];const p=s[o+0],g=s[o+1],_=s[o+2],y=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=f);if(1===a)return e[t+0]=p,e[t+1]=g,e[t+2]=_,void(e[t+3]=y);if(f!==y||c!==p||l!==g||u!==_){let w=1-a;const C=c*p+l*g+u*_+f*y,x=C>=0?1:-1,M=1-C*C;if(M>Number.EPSILON){const I=Math.sqrt(M),F=Math.atan2(I,C*x);w=Math.sin(w*F)/I,a=Math.sin(a*F)/I}const T=a*x;if(c=c*w+p*T,l=l*w+g*T,u=u*w+_*T,f=f*w+y*T,w===1-a){const I=1/Math.sqrt(c*c+l*l+u*u+f*f);c*=I,l*=I,u*=I,f*=I}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],f=s[o],p=s[o+1],g=s[o+2],_=s[o+3];return e[t]=a*_+u*f+c*g-l*p,e[t+1]=c*_+u*p+l*f-a*g,e[t+2]=l*_+u*g+a*p-c*f,e[t+3]=u*_-a*f-c*p-l*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),f=a(s/2),p=c(i/2),g=c(r/2),_=c(s/2);switch(o){case"XYZ":this._x=p*u*f+l*g*_,this._y=l*g*f-p*u*_,this._z=l*u*_+p*g*f,this._w=l*u*f-p*g*_;break;case"YXZ":this._x=p*u*f+l*g*_,this._y=l*g*f-p*u*_,this._z=l*u*_-p*g*f,this._w=l*u*f+p*g*_;break;case"ZXY":this._x=p*u*f-l*g*_,this._y=l*g*f+p*u*_,this._z=l*u*_+p*g*f,this._w=l*u*f-p*g*_;break;case"ZYX":this._x=p*u*f-l*g*_,this._y=l*g*f+p*u*_,this._z=l*u*_-p*g*f,this._w=l*u*f+p*g*_;break;case"YZX":this._x=p*u*f+l*g*_,this._y=l*g*f+p*u*_,this._z=l*u*_-p*g*f,this._w=l*u*f-p*g*_;break;case"XZY":this._x=p*u*f-l*g*_,this._y=l*g*f-p*u*_,this._z=l*u*_+p*g*f,this._w=l*u*f+p*g*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],f=t[10],p=i+a+f;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(u-c)*g,this._y=(s-l)*g,this._z=(o-r)*g}else if(i>a&&i>f){const g=2*Math.sqrt(1+i-a-f);this._w=(u-c)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+l)/g}else if(a>f){const g=2*Math.sqrt(1+a-i-f);this._w=(s-l)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(c+u)/g}else{const g=2*Math.sqrt(1+f-i-a);this._w=(o-r)/g,this._x=(s+l)/g,this._y=(c+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(nc(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),f=Math.sin((1-t)*u)/l,p=Math.sin(t*u)/l;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ae{constructor(e=0,t=0,i=0){Ae.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(KJ.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(KJ.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*r-a*i,u=c*i+a*t-s*r,f=c*r+s*i-o*t,p=-s*t-o*i-a*r;return this.x=l*c+p*-s+u*-a-f*-o,this.y=u*c+p*-o+f*-s-l*-a,this.z=f*c+p*-a+l*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return IF.copy(this).projectOnVector(e),this.sub(IF)}reflect(e){return this.sub(IF.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(nc(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const IF=new Ae,KJ=new B2;class a5{constructor(e=new Ae(1/0,1/0,1/0),t=new Ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.length;c<l;c+=3){const u=e[c],f=e[c+1],p=e[c+2];u<t&&(t=u),f<i&&(i=f),p<r&&(r=p),u>s&&(s=u),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.count;c<l;c++){const u=e.getX(c),f=e.getY(c),p=e.getZ(c);u<t&&(t=u),f<i&&(i=f),p<r&&(r=p),u>s&&(s=u),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=c5.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)c5.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(c5)}else null===i.boundingBox&&i.computeBoundingBox(),BF.copy(i.boundingBox),BF.applyMatrix4(e.matrixWorld),this.union(BF);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,c5),c5.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ov),Cx.subVectors(this.max,ov),Z7.subVectors(e.a,ov),J7.subVectors(e.b,ov),eg.subVectors(e.c,ov),Gd.subVectors(J7,Z7),Qd.subVectors(eg,J7),l5.subVectors(Z7,eg);let t=[0,-Gd.z,Gd.y,0,-Qd.z,Qd.y,0,-l5.z,l5.y,Gd.z,0,-Gd.x,Qd.z,0,-Qd.x,l5.z,0,-l5.x,-Gd.y,Gd.x,0,-Qd.y,Qd.x,0,-l5.y,l5.x,0];return!(!RF(t,Z7,J7,eg,Cx)||(t=[1,0,0,0,1,0,0,0,1],!RF(t,Z7,J7,eg,Cx)))&&(bx.crossVectors(Gd,Qd),t=[bx.x,bx.y,bx.z],RF(t,Z7,J7,eg,Cx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return c5.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(c5).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(nf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),nf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),nf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),nf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),nf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),nf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),nf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),nf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(nf)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const nf=[new Ae,new Ae,new Ae,new Ae,new Ae,new Ae,new Ae,new Ae],c5=new Ae,BF=new a5,Z7=new Ae,J7=new Ae,eg=new Ae,Gd=new Ae,Qd=new Ae,l5=new Ae,ov=new Ae,Cx=new Ae,bx=new Ae,u5=new Ae;function RF(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){u5.fromArray(n,s);const a=r.x*Math.abs(u5.x)+r.y*Math.abs(u5.y)+r.z*Math.abs(u5.z),c=e.dot(u5),l=t.dot(u5),u=i.dot(u5);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const IRe=new a5,XJ=new Ae,xx=new Ae,FF=new Ae;class h5{constructor(e=new Ae,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):IRe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){FF.subVectors(e,this.center);const t=FF.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(FF.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?xx.set(0,0,1).multiplyScalar(e.radius):xx.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(XJ.copy(e.center).add(xx)),this.expandByPoint(XJ.copy(e.center).sub(xx)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const rf=new Ae,kF=new Ae,Mx=new Ae,Wd=new Ae,PF=new Ae,Sx=new Ae,HF=new Ae;class Ex{constructor(e=new Ae,t=new Ae(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=rf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rf.copy(this.direction).multiplyScalar(t).add(this.origin),rf.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){kF.copy(e).add(t).multiplyScalar(.5),Mx.copy(t).sub(e).normalize(),Wd.copy(this.origin).sub(kF);const s=.5*e.distanceTo(t),o=-this.direction.dot(Mx),a=Wd.dot(this.direction),c=-Wd.dot(Mx),l=Wd.lengthSq(),u=Math.abs(1-o*o);let f,p,g,_;if(u>0)if(f=o*c-a,p=o*a-c,_=s*u,f>=0)if(p>=-_)if(p<=_){const y=1/u;f*=y,p*=y,g=f*(f+o*p+2*a)+p*(o*f+p+2*c)+l}else p=s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;else p=-s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;else p<=-_?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-c),s),g=-f*f+p*(p+2*c)+l):p<=_?(f=0,p=Math.min(Math.max(-s,-c),s),g=p*(p+2*c)+l):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-c),s),g=-f*f+p*(p+2*c)+l);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(Mx).multiplyScalar(p).add(kF),g}intersectSphere(e,t){rf.subVectors(e.center,this.origin);const i=rf.dot(this.direction),r=rf.dot(rf)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return l>=0?(i=(e.min.x-p.x)*l,r=(e.max.x-p.x)*l):(i=(e.max.x-p.x)*l,r=(e.min.x-p.x)*l),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),f>=0?(a=(e.min.z-p.z)*f,c=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,c=(e.min.z-p.z)*f),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,rf)}intersectTriangle(e,t,i,r,s){PF.subVectors(t,e),Sx.subVectors(i,e),HF.crossVectors(PF,Sx);let a,o=this.direction.dot(HF);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Wd.subVectors(this.origin,e);const c=a*this.direction.dot(Sx.crossVectors(Wd,Sx));if(c<0)return null;const l=a*this.direction.dot(PF.cross(Wd));if(l<0||c+l>o)return null;const u=-a*Wd.dot(HF);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Qi{constructor(){Qi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w){const C=this.elements;return C[0]=e,C[4]=t,C[8]=i,C[12]=r,C[1]=s,C[5]=o,C[9]=a,C[13]=c,C[2]=l,C[6]=u,C[10]=f,C[14]=p,C[3]=g,C[7]=_,C[11]=y,C[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Qi).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/tg.setFromMatrixColumn(e,0).length(),s=1/tg.setFromMatrixColumn(e,1).length(),o=1/tg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if("XYZ"===e.order){const p=o*u,g=o*f,_=a*u,y=a*f;t[0]=c*u,t[4]=-c*f,t[8]=l,t[1]=g+_*l,t[5]=p-y*l,t[9]=-a*c,t[2]=y-p*l,t[6]=_+g*l,t[10]=o*c}else if("YXZ"===e.order){const p=c*u,g=c*f,_=l*u,y=l*f;t[0]=p+y*a,t[4]=_*a-g,t[8]=o*l,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=g*a-_,t[6]=y+p*a,t[10]=o*c}else if("ZXY"===e.order){const p=c*u,g=c*f,_=l*u,y=l*f;t[0]=p-y*a,t[4]=-o*f,t[8]=_+g*a,t[1]=g+_*a,t[5]=o*u,t[9]=y-p*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const p=o*u,g=o*f,_=a*u,y=a*f;t[0]=c*u,t[4]=_*l-g,t[8]=p*l+y,t[1]=c*f,t[5]=y*l+p,t[9]=g*l-_,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const p=o*c,g=o*l,_=a*c,y=a*l;t[0]=c*u,t[4]=y-p*f,t[8]=_*f+g,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=g*f+_,t[10]=p-y*f}else if("XZY"===e.order){const p=o*c,g=o*l,_=a*c,y=a*l;t[0]=c*u,t[4]=-f,t[8]=l*u,t[1]=p*f+y,t[5]=o*u,t[9]=g*f-_,t[2]=_*f-g,t[6]=a*u,t[10]=y*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(BRe,e,RRe)}lookAt(e,t,i){const r=this.elements;return J3.subVectors(e,t),0===J3.lengthSq()&&(J3.z=1),J3.normalize(),jd.crossVectors(i,J3),0===jd.lengthSq()&&(1===Math.abs(i.z)?J3.x+=1e-4:J3.z+=1e-4,J3.normalize(),jd.crossVectors(i,J3)),jd.normalize(),Tx.crossVectors(J3,jd),r[0]=jd.x,r[4]=Tx.x,r[8]=J3.x,r[1]=jd.y,r[5]=Tx.y,r[9]=J3.y,r[2]=jd.z,r[6]=Tx.z,r[10]=J3.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],f=i[5],p=i[9],g=i[13],_=i[2],y=i[6],w=i[10],C=i[14],x=i[3],M=i[7],T=i[11],I=i[15],F=r[0],P=r[4],R=r[8],k=r[12],W=r[1],ie=r[5],Te=r[9],me=r[13],Q=r[2],he=r[6],K=r[10],ae=r[14],fe=r[3],de=r[7],ke=r[11],et=r[15];return s[0]=o*F+a*W+c*Q+l*fe,s[4]=o*P+a*ie+c*he+l*de,s[8]=o*R+a*Te+c*K+l*ke,s[12]=o*k+a*me+c*ae+l*et,s[1]=u*F+f*W+p*Q+g*fe,s[5]=u*P+f*ie+p*he+g*de,s[9]=u*R+f*Te+p*K+g*ke,s[13]=u*k+f*me+p*ae+g*et,s[2]=_*F+y*W+w*Q+C*fe,s[6]=_*P+y*ie+w*he+C*de,s[10]=_*R+y*Te+w*K+C*ke,s[14]=_*k+y*me+w*ae+C*et,s[3]=x*F+M*W+T*Q+I*fe,s[7]=x*P+M*ie+T*he+I*de,s[11]=x*R+M*Te+T*K+I*ke,s[15]=x*k+M*me+T*ae+I*et,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],f=e[6],p=e[10],g=e[14];return e[3]*(+s*c*f-r*l*f-s*a*p+i*l*p+r*a*g-i*c*g)+e[7]*(+t*c*g-t*l*p+s*o*p-r*o*g+r*l*u-s*c*u)+e[11]*(+t*l*f-t*a*g-s*o*f+i*o*g+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*f+t*a*p+r*o*f-i*o*p+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],p=e[10],g=e[11],_=e[12],y=e[13],w=e[14],C=e[15],x=f*w*l-y*p*l+y*c*g-a*w*g-f*c*C+a*p*C,M=_*p*l-u*w*l-_*c*g+o*w*g+u*c*C-o*p*C,T=u*y*l-_*f*l+_*a*g-o*y*g-u*a*C+o*f*C,I=_*f*c-u*y*c-_*a*p+o*y*p+u*a*w-o*f*w,F=t*x+i*M+r*T+s*I;if(0===F)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/F;return e[0]=x*P,e[1]=(y*p*s-f*w*s-y*r*g+i*w*g+f*r*C-i*p*C)*P,e[2]=(a*w*s-y*c*s+y*r*l-i*w*l-a*r*C+i*c*C)*P,e[3]=(f*c*s-a*p*s-f*r*l+i*p*l+a*r*g-i*c*g)*P,e[4]=M*P,e[5]=(u*w*s-_*p*s+_*r*g-t*w*g-u*r*C+t*p*C)*P,e[6]=(_*c*s-o*w*s-_*r*l+t*w*l+o*r*C-t*c*C)*P,e[7]=(o*p*s-u*c*s+u*r*l-t*p*l-o*r*g+t*c*g)*P,e[8]=T*P,e[9]=(_*f*s-u*y*s-_*i*g+t*y*g+u*i*C-t*f*C)*P,e[10]=(o*y*s-_*a*s+_*i*l-t*y*l-o*i*C+t*a*C)*P,e[11]=(u*a*s-o*f*s-u*i*l+t*f*l+o*i*g-t*a*g)*P,e[12]=I*P,e[13]=(u*y*r-_*f*r+_*i*p-t*y*p-u*i*w+t*f*w)*P,e[14]=(_*a*r-o*y*r-_*i*c+t*y*c+o*i*w-t*a*w)*P,e[15]=(o*f*r-u*a*r+u*i*c-t*f*c-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,f=a+a,p=s*l,g=s*u,_=s*f,y=o*u,w=o*f,C=a*f,x=c*l,M=c*u,T=c*f,I=i.x,F=i.y,P=i.z;return r[0]=(1-(y+C))*I,r[1]=(g+T)*I,r[2]=(_-M)*I,r[3]=0,r[4]=(g-T)*F,r[5]=(1-(p+C))*F,r[6]=(w+x)*F,r[7]=0,r[8]=(_+M)*P,r[9]=(w-x)*P,r[10]=(1-(p+y))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=tg.set(r[0],r[1],r[2]).length();const o=tg.set(r[4],r[5],r[6]).length(),a=tg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ou.copy(this);const l=1/s,u=1/o,f=1/a;return Ou.elements[0]*=l,Ou.elements[1]*=l,Ou.elements[2]*=l,Ou.elements[4]*=u,Ou.elements[5]*=u,Ou.elements[6]*=u,Ou.elements[8]*=f,Ou.elements[9]*=f,Ou.elements[10]*=f,t.setFromRotationMatrix(Ou),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(i-r),u=(t+e)/(t-e),f=(i+r)/(i-r),p=-(o+s)/(o-s),g=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),l=1/(i-r),u=1/(o-s),f=(t+e)*c,p=(i+r)*l,g=(o+s)*u;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const tg=new Ae,Ou=new Qi,BRe=new Ae(0,0,0),RRe=new Ae(1,1,1),jd=new Ae,Tx=new Ae,J3=new Ae,YJ=new Qi,ZJ=new B2;let FRe=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],f=s[9],p=s[2],g=s[6],_=s[10];switch(i){case"XYZ":this._y=Math.asin(nc(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,_),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-nc(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(nc(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-nc(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,_),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(nc(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-nc(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return YJ.makeRotationFromQuaternion(t),this.setFromRotationMatrix(YJ,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return ZJ.setFromEuler(this),this.setFromQuaternion(ZJ,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class zF{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let kRe=0;const JJ=new Ae,ng=new B2,sf=new Qi,Lx=new Ae,av=new Ae,PRe=new Ae,HRe=new B2,eee=new Ae(1,0,0),tee=new Ae(0,1,0),nee=new Ae(0,0,1),zRe={type:"added"},iee={type:"removed"};let R2=(()=>{class n extends r5{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:kRe++}),this.uuid=Z3(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new Ae,i=new FRe,r=new B2,s=new Ae(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Qi},normalMatrix:{value:new _3}}),this.matrix=new Qi,this.matrixWorld=new Qi,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new zF,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return ng.setFromAxisAngle(t,i),this.quaternion.multiply(ng),this}rotateOnWorldAxis(t,i){return ng.setFromAxisAngle(t,i),this.quaternion.premultiply(ng),this}rotateX(t){return this.rotateOnAxis(eee,t)}rotateY(t){return this.rotateOnAxis(tee,t)}rotateZ(t){return this.rotateOnAxis(nee,t)}translateOnAxis(t,i){return JJ.copy(t).applyQuaternion(this.quaternion),this.position.add(JJ.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(eee,t)}translateY(t){return this.translateOnAxis(tee,t)}translateZ(t){return this.translateOnAxis(nee,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(sf.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Lx.copy(t):Lx.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),av.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sf.lookAt(av,Lx,this.up):sf.lookAt(Lx,av,this.up),this.quaternion.setFromRotationMatrix(sf),s&&(sf.extractRotation(s.matrixWorld),ng.setFromRotationMatrix(sf),this.quaternion.premultiply(ng.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(zRe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(iee)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(iee)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),sf.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),sf.multiply(t.parent.matrixWorld)),t.applyMatrix4(sf),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(av,t,PRe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(av,HRe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const c=s[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),f=a(t.images),p=a(t.shapes),g=a(t.skeletons),_=a(t.animations),y=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),_.length>0&&(r.animations=_),y.length>0&&(r.nodes=y)}return r.object=s,r;function a(c){const l=[];for(const u in c){const f=c[u];delete f.metadata,l.push(f)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DefaultUp=new Ae(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const Nu=new Ae,af=new Ae,OF=new Ae,cf=new Ae,ig=new Ae,rg=new Ae,ree=new Ae,NF=new Ae,VF=new Ae,UF=new Ae;class Vu{constructor(e=new Ae,t=new Ae,i=new Ae){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Nu.subVectors(e,t),r.cross(Nu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Nu.subVectors(r,t),af.subVectors(i,t),OF.subVectors(e,t);const o=Nu.dot(Nu),a=Nu.dot(af),c=Nu.dot(OF),l=af.dot(af),u=af.dot(OF),f=o*l-a*a;if(0===f)return s.set(-2,-1,-1);const p=1/f,g=(l*c-a*u)*p,_=(o*u-a*c)*p;return s.set(1-g-_,_,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,cf),cf.x>=0&&cf.y>=0&&cf.x+cf.y<=1}static getUV(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,cf),c.set(0,0),c.addScaledVector(s,cf.x),c.addScaledVector(o,cf.y),c.addScaledVector(a,cf.z),c}static isFrontFacing(e,t,i,r){return Nu.subVectors(i,t),af.subVectors(e,t),Nu.cross(af).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Nu.subVectors(this.c,this.b),af.subVectors(this.a,this.b),.5*Nu.cross(af).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Vu.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Vu.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Vu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;ig.subVectors(r,i),rg.subVectors(s,i),NF.subVectors(e,i);const c=ig.dot(NF),l=rg.dot(NF);if(c<=0&&l<=0)return t.copy(i);VF.subVectors(e,r);const u=ig.dot(VF),f=rg.dot(VF);if(u>=0&&f<=u)return t.copy(r);const p=c*f-u*l;if(p<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(ig,o);UF.subVectors(e,s);const g=ig.dot(UF),_=rg.dot(UF);if(_>=0&&g<=_)return t.copy(s);const y=g*l-c*_;if(y<=0&&l>=0&&_<=0)return a=l/(l-_),t.copy(i).addScaledVector(rg,a);const w=u*_-g*f;if(w<=0&&f-u>=0&&g-_>=0)return ree.subVectors(s,r),a=(f-u)/(f-u+(g-_)),t.copy(r).addScaledVector(ree,a);const C=1/(w+y+p);return o=y*C,a=p*C,t.copy(i).addScaledVector(ig,o).addScaledVector(rg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ORe=0;class tl extends r5{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ORe++}),this.uuid=Z3(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Nd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class zl extends tl{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ic=new Ae,Dx=new jt;class Ka{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Dx.fromBufferAttribute(this,t),Dx.applyMatrix3(e),this.setXY(t,Dx.x,Dx.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Ic.fromBufferAttribute(this,t),Ic.applyMatrix3(e),this.setXYZ(t,Ic.x,Ic.y,Ic.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ic.fromBufferAttribute(this,t),Ic.applyMatrix4(e),this.setXYZ(t,Ic.x,Ic.y,Ic.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ic.fromBufferAttribute(this,t),Ic.applyNormalMatrix(e),this.setXYZ(t,Ic.x,Ic.y,Ic.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ic.fromBufferAttribute(this,t),Ic.transformDirection(e),this.setXYZ(t,Ic.x,Ic.y,Ic.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=tf(t,this.array)),t}setX(e,t){return this.normalized&&(t=ua(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=tf(t,this.array)),t}setY(e,t){return this.normalized&&(t=ua(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=tf(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ua(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=tf(t,this.array)),t}setW(e,t){return this.normalized&&(t=ua(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ua(t,this.array),i=ua(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=ua(t,this.array),i=ua(i,this.array),r=ua(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=ua(t,this.array),i=ua(i,this.array),r=ua(r,this.array),s=ua(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class see extends Ka{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class oee extends Ka{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class ci extends Ka{constructor(e,t,i){super(new Float32Array(e),t,i)}}let NRe=0;const U4=new Qi,GF=new R2,sg=new Ae,e4=new a5,cv=new a5,f2=new Ae;class vr extends r5{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:NRe++}),this.uuid=Z3(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(WJ(e)?oee:see)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new _3).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return U4.makeRotationFromQuaternion(e),this.applyMatrix4(U4),this}rotateX(e){return U4.makeRotationX(e),this.applyMatrix4(U4),this}rotateY(e){return U4.makeRotationY(e),this.applyMatrix4(U4),this}rotateZ(e){return U4.makeRotationZ(e),this.applyMatrix4(U4),this}translate(e,t,i){return U4.makeTranslation(e,t,i),this.applyMatrix4(U4),this}scale(e,t,i){return U4.makeScale(e,t,i),this.applyMatrix4(U4),this}lookAt(e){return GF.lookAt(e),GF.updateMatrix(),this.applyMatrix4(GF.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sg).negate(),this.translate(sg.x,sg.y,sg.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ci(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new a5);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ae(-1/0,-1/0,-1/0),new Ae(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)e4.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(f2.addVectors(this.boundingBox.min,e4.min),this.boundingBox.expandByPoint(f2),f2.addVectors(this.boundingBox.max,e4.max),this.boundingBox.expandByPoint(f2)):(this.boundingBox.expandByPoint(e4.min),this.boundingBox.expandByPoint(e4.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new h5);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ae,1/0);if(e){const i=this.boundingSphere.center;if(e4.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)cv.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(f2.addVectors(e4.min,cv.min),e4.expandByPoint(f2),f2.addVectors(e4.max,cv.max),e4.expandByPoint(f2)):(e4.expandByPoint(cv.min),e4.expandByPoint(cv.max));e4.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)f2.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(f2));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)f2.fromBufferAttribute(a,l),c&&(sg.fromBufferAttribute(e,l),f2.add(sg)),r=Math.max(r,i.distanceToSquared(f2))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ka(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let W=0;W<a;W++)l[W]=new Ae,u[W]=new Ae;const f=new Ae,p=new Ae,g=new Ae,_=new jt,y=new jt,w=new jt,C=new Ae,x=new Ae;function M(W,ie,Te){f.fromArray(r,3*W),p.fromArray(r,3*ie),g.fromArray(r,3*Te),_.fromArray(o,2*W),y.fromArray(o,2*ie),w.fromArray(o,2*Te),p.sub(f),g.sub(f),y.sub(_),w.sub(_);const me=1/(y.x*w.y-w.x*y.y);!isFinite(me)||(C.copy(p).multiplyScalar(w.y).addScaledVector(g,-y.y).multiplyScalar(me),x.copy(g).multiplyScalar(y.x).addScaledVector(p,-w.x).multiplyScalar(me),l[W].add(C),l[ie].add(C),l[Te].add(C),u[W].add(x),u[ie].add(x),u[Te].add(x))}let T=this.groups;0===T.length&&(T=[{start:0,count:i.length}]);for(let W=0,ie=T.length;W<ie;++W){const Te=T[W],me=Te.start;for(let he=me,K=me+Te.count;he<K;he+=3)M(i[he+0],i[he+1],i[he+2])}const I=new Ae,F=new Ae,P=new Ae,R=new Ae;function k(W){P.fromArray(s,3*W),R.copy(P);const ie=l[W];I.copy(ie),I.sub(P.multiplyScalar(P.dot(ie))).normalize(),F.crossVectors(R,ie);const me=F.dot(u[W])<0?-1:1;c[4*W]=I.x,c[4*W+1]=I.y,c[4*W+2]=I.z,c[4*W+3]=me}for(let W=0,ie=T.length;W<ie;++W){const Te=T[W],me=Te.start;for(let he=me,K=me+Te.count;he<K;he+=3)k(i[he+0]),k(i[he+1]),k(i[he+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Ka(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const r=new Ae,s=new Ae,o=new Ae,a=new Ae,c=new Ae,l=new Ae,u=new Ae,f=new Ae;if(e)for(let p=0,g=e.count;p<g;p+=3){const _=e.getX(p+0),y=e.getX(p+1),w=e.getX(p+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,w),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,_),c.fromBufferAttribute(i,y),l.fromBufferAttribute(i,w),a.add(u),c.add(u),l.add(u),i.setXYZ(_,a.x,a.y,a.z),i.setXYZ(y,c.x,c.y,c.z),i.setXYZ(w,l.x,l.y,l.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)f2.fromBufferAttribute(e,t),f2.normalize(),e.setXYZ(t,f2.x,f2.y,f2.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,f=a.normalized,p=new l.constructor(c.length*u);let g=0,_=0;for(let y=0,w=c.length;y<w;y++){g=a.isInterleavedBufferAttribute?c[y]*a.data.stride+a.offset:c[y]*u;for(let C=0;C<u;C++)p[_++]=l[g++]}return new Ka(p,u,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new vr,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,f=l.length;u<f;u++){const g=e(l[u],i);c.push(g)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let f=0,p=l.length;f<p;f++)u.push(l[f].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],f=s[l];for(let p=0,g=f.length;p<g;p++)u.push(f[p].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const aee=new Qi,og=new Ex,QF=new h5,$d=new Ae,qd=new Ae,Kd=new Ae,WF=new Ae,jF=new Ae,$F=new Ae,Ix=new Ae,Bx=new Ae,Rx=new Ae,Fx=new jt,kx=new jt,Px=new jt,qF=new Ae,Hx=new Ae;class Ys extends R2{constructor(e=new vr,t=new zl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),QF.copy(i.boundingSphere),QF.applyMatrix4(s),!1===e.ray.intersectsSphere(QF))||(aee.copy(s).invert(),og.copy(e.ray).applyMatrix4(aee),null!==i.boundingBox&&!1===og.intersectsBox(i.boundingBox)))return;let o;const a=i.index,c=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,f=i.attributes.uv,p=i.attributes.uv2,g=i.groups,_=i.drawRange;if(null!==a)if(Array.isArray(r))for(let y=0,w=g.length;y<w;y++){const C=g[y],x=r[C.materialIndex];for(let I=Math.max(C.start,_.start),F=Math.min(a.count,Math.min(C.start+C.count,_.start+_.count));I<F;I+=3){const P=a.getX(I),R=a.getX(I+1),k=a.getX(I+2);o=zx(this,x,e,og,c,l,u,f,p,P,R,k),o&&(o.faceIndex=Math.floor(I/3),o.face.materialIndex=C.materialIndex,t.push(o))}}else for(let C=Math.max(0,_.start),x=Math.min(a.count,_.start+_.count);C<x;C+=3){const M=a.getX(C),T=a.getX(C+1),I=a.getX(C+2);o=zx(this,r,e,og,c,l,u,f,p,M,T,I),o&&(o.faceIndex=Math.floor(C/3),t.push(o))}else if(void 0!==c)if(Array.isArray(r))for(let y=0,w=g.length;y<w;y++){const C=g[y],x=r[C.materialIndex];for(let I=Math.max(C.start,_.start),F=Math.min(c.count,Math.min(C.start+C.count,_.start+_.count));I<F;I+=3)o=zx(this,x,e,og,c,l,u,f,p,I,I+1,I+2),o&&(o.faceIndex=Math.floor(I/3),o.face.materialIndex=C.materialIndex,t.push(o))}else for(let C=Math.max(0,_.start),x=Math.min(c.count,_.start+_.count);C<x;C+=3)o=zx(this,r,e,og,c,l,u,f,p,C,C+1,C+2),o&&(o.faceIndex=Math.floor(C/3),t.push(o))}}function zx(n,e,t,i,r,s,o,a,c,l,u,f){$d.fromBufferAttribute(r,l),qd.fromBufferAttribute(r,u),Kd.fromBufferAttribute(r,f);const p=n.morphTargetInfluences;if(s&&p){Ix.set(0,0,0),Bx.set(0,0,0),Rx.set(0,0,0);for(let _=0,y=s.length;_<y;_++){const w=p[_],C=s[_];0!==w&&(WF.fromBufferAttribute(C,l),jF.fromBufferAttribute(C,u),$F.fromBufferAttribute(C,f),o?(Ix.addScaledVector(WF,w),Bx.addScaledVector(jF,w),Rx.addScaledVector($F,w)):(Ix.addScaledVector(WF.sub($d),w),Bx.addScaledVector(jF.sub(qd),w),Rx.addScaledVector($F.sub(Kd),w)))}$d.add(Ix),qd.add(Bx),Kd.add(Rx)}n.isSkinnedMesh&&(n.boneTransform(l,$d),n.boneTransform(u,qd),n.boneTransform(f,Kd));const g=function VRe(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===c)return null;Hx.copy(a),Hx.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(Hx);return l<t.near||l>t.far?null:{distance:l,point:Hx.clone(),object:n}}(n,e,t,i,$d,qd,Kd,qF);if(g){a&&(Fx.fromBufferAttribute(a,l),kx.fromBufferAttribute(a,u),Px.fromBufferAttribute(a,f),g.uv=Vu.getUV(qF,$d,qd,Kd,Fx,kx,Px,new jt)),c&&(Fx.fromBufferAttribute(c,l),kx.fromBufferAttribute(c,u),Px.fromBufferAttribute(c,f),g.uv2=Vu.getUV(qF,$d,qd,Kd,Fx,kx,Px,new jt));const _={a:l,b:u,c:f,normal:new Ae,materialIndex:0};Vu.getNormal($d,qd,Kd,_.normal),g.face=_}return g}class Q0 extends vr{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],f=[];let p=0,g=0;function _(y,w,C,x,M,T,I,F,P,R,k){const W=T/P,ie=I/R,Te=T/2,me=I/2,Q=F/2,he=P+1,K=R+1;let ae=0,fe=0;const de=new Ae;for(let ke=0;ke<K;ke++){const et=ke*ie-me;for(let Fe=0;Fe<he;Fe++)de[y]=(Fe*W-Te)*x,de[w]=et*M,de[C]=Q,l.push(de.x,de.y,de.z),de[y]=0,de[w]=0,de[C]=F>0?1:-1,u.push(de.x,de.y,de.z),f.push(Fe/P),f.push(1-ke/R),ae+=1}for(let ke=0;ke<R;ke++)for(let et=0;et<P;et++){const wt=p+et+he*(ke+1),ut=p+(et+1)+he*(ke+1),Bt=p+(et+1)+he*ke;c.push(p+et+he*ke,wt,Bt),c.push(wt,ut,Bt),fe+=6}a.addGroup(g,fe,k),g+=fe,p+=ae}_("z","y","x",-1,-1,i,t,e,o,s,0),_("z","y","x",1,-1,i,t,-e,o,s,1),_("x","z","y",1,1,e,i,t,r,o,2),_("x","z","y",1,-1,e,i,-t,r,o,3),_("x","y","z",1,-1,e,t,i,r,s,4),_("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new ci(l,3)),this.setAttribute("normal",new ci(u,3)),this.setAttribute("uv",new ci(f,2))}static fromJSON(e){return new Q0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ag(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function nl(n){const e={};for(let t=0;t<n.length;t++){const i=ag(n[t]);for(const r in i)e[r]=i[r]}return e}const Xd={clone:ag,merge:nl};class F2 extends tl{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ag(e.uniforms),this.uniformsGroups=function URe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class KF extends R2{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qi,this.projectionMatrix=new Qi,this.projectionMatrixInverse=new Qi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Wc extends KF{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*iv*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*s5*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*iv*Math.atan(Math.tan(.5*s5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*s5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class WRe extends R2{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Wc(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Ae(1,0,0)),this.add(r);const s=new Wc(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Ae(-1,0,0)),this.add(s);const o=new Wc(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Ae(0,1,0)),this.add(o);const a=new Wc(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Ae(0,-1,0)),this.add(a);const c=new Wc(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Ae(0,0,1)),this.add(c);const l=new Wc(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Ae(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,l]=this.children,u=e.getRenderTarget(),f=e.toneMapping,p=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=g,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class Ox extends N4{constructor(e,t,i,r,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class jRe extends V4{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new Ox([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:qa}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Q0(5,5,5),s=new F2({name:"CubemapFromEquirect",uniforms:ag(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Ys(r,s),a=t.minFilter;return t.minFilter===Vd&&(t.minFilter=qa),new WRe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const XF=new Ae,$Re=new Ae,qRe=new _3;class Uu{constructor(e=new Ae(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=XF.subVectors(i,t).cross($Re.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(XF),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||qRe.getNormalMatrix(e),r=this.coplanarPoint(XF).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ug=new h5,Nx=new Ae;class YF{constructor(e=new Uu,t=new Uu,i=new Uu,r=new Uu,s=new Uu,o=new Uu){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],l=i[5],u=i[6],f=i[7],p=i[8],g=i[9],_=i[10],y=i[11],w=i[12],C=i[13],x=i[14],M=i[15];return t[0].setComponents(a-r,f-c,y-p,M-w).normalize(),t[1].setComponents(a+r,f+c,y+p,M+w).normalize(),t[2].setComponents(a+s,f+l,y+g,M+C).normalize(),t[3].setComponents(a-s,f-l,y-g,M-C).normalize(),t[4].setComponents(a-o,f-u,y-_,M-x).normalize(),t[5].setComponents(a+o,f+u,y+_,M+x).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),ug.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ug)}intersectsSprite(e){return ug.center.set(0,0,0),ug.radius=.7071067811865476,ug.applyMatrix4(e.matrixWorld),this.intersectsSphere(ug)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Nx.x=r.normal.x>0?e.max.x:e.min.x,Nx.y=r.normal.y>0?e.max.y:e.min.y,Nx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Nx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function cee(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function KRe(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const p=i.get(l);return void((!p||p.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const f=i.get(l);void 0===f?i.set(l,function r(l,u){const f=l.array,p=l.usage,g=n.createBuffer();let _;if(n.bindBuffer(u,g),n.bufferData(u,f,p),l.onUploadCallback(),f instanceof Float32Array)_=5126;else if(f instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");_=5131}else _=5123;else if(f instanceof Int16Array)_=5122;else if(f instanceof Uint32Array)_=5125;else if(f instanceof Int32Array)_=5124;else if(f instanceof Int8Array)_=5120;else if(f instanceof Uint8Array)_=5121;else{if(!(f instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);_=5121}return{buffer:g,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version}}(l,u)):f.version<l.version&&(function s(l,u,f){const p=u.array,g=u.updateRange;n.bindBuffer(f,l),-1===g.count?n.bufferSubData(f,0,p):(t?n.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):n.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1)}(f.buffer,l,u),f.version=l.version)}}}class y3 extends vr{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,f=e/a,p=t/c,g=[],_=[],y=[],w=[];for(let C=0;C<u;C++){const x=C*p-o;for(let M=0;M<l;M++)_.push(M*f-s,-x,0),y.push(0,0,1),w.push(M/a),w.push(1-C/c)}for(let C=0;C<c;C++)for(let x=0;x<a;x++){const T=x+l*(C+1),I=x+1+l*(C+1),F=x+1+l*C;g.push(x+l*C,T,F),g.push(T,I,F)}this.setIndex(g),this.setAttribute("position",new ci(_,3)),this.setAttribute("normal",new ci(y,3)),this.setAttribute("uv",new ci(w,2))}static fromJSON(e){return new y3(e.width,e.height,e.widthSegments,e.heightSegments)}}const Es={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Vn={common:{diffuse:{value:new Dn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new _3},uv2Transform:{value:new _3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new jt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _3}},sprite:{diffuse:{value:new Dn(16777215)},opacity:{value:1},center:{value:new jt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _3}}},W0={basic:{uniforms:nl([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.fog]),vertexShader:Es.meshbasic_vert,fragmentShader:Es.meshbasic_frag},lambert:{uniforms:nl([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)}}]),vertexShader:Es.meshlambert_vert,fragmentShader:Es.meshlambert_frag},phong:{uniforms:nl([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)},specular:{value:new Dn(1118481)},shininess:{value:30}}]),vertexShader:Es.meshphong_vert,fragmentShader:Es.meshphong_frag},standard:{uniforms:nl([Vn.common,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.roughnessmap,Vn.metalnessmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Es.meshphysical_vert,fragmentShader:Es.meshphysical_frag},toon:{uniforms:nl([Vn.common,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.gradientmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)}}]),vertexShader:Es.meshtoon_vert,fragmentShader:Es.meshtoon_frag},matcap:{uniforms:nl([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,{matcap:{value:null}}]),vertexShader:Es.meshmatcap_vert,fragmentShader:Es.meshmatcap_frag},points:{uniforms:nl([Vn.points,Vn.fog]),vertexShader:Es.points_vert,fragmentShader:Es.points_frag},dashed:{uniforms:nl([Vn.common,Vn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Es.linedashed_vert,fragmentShader:Es.linedashed_frag},depth:{uniforms:nl([Vn.common,Vn.displacementmap]),vertexShader:Es.depth_vert,fragmentShader:Es.depth_frag},normal:{uniforms:nl([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,{opacity:{value:1}}]),vertexShader:Es.meshnormal_vert,fragmentShader:Es.meshnormal_frag},sprite:{uniforms:nl([Vn.sprite,Vn.fog]),vertexShader:Es.sprite_vert,fragmentShader:Es.sprite_frag},background:{uniforms:{uvTransform:{value:new _3},t2D:{value:null}},vertexShader:Es.background_vert,fragmentShader:Es.background_frag},cube:{uniforms:nl([Vn.envmap,{opacity:{value:1}}]),vertexShader:Es.cube_vert,fragmentShader:Es.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Es.equirect_vert,fragmentShader:Es.equirect_frag},distanceRGBA:{uniforms:nl([Vn.common,Vn.displacementmap,{referencePosition:{value:new Ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Es.distanceRGBA_vert,fragmentShader:Es.distanceRGBA_frag},shadow:{uniforms:nl([Vn.lights,Vn.fog,{color:{value:new Dn(0)},opacity:{value:1}}]),vertexShader:Es.shadow_vert,fragmentShader:Es.shadow_frag}};function qke(n,e,t,i,r,s){const o=new Dn(0);let c,l,a=!0===r?0:1,u=null,f=0,p=null;function _(y,w){t.buffers.color.setClear(y.r,y.g,y.b,w,s)}return{getClearColor:function(){return o},setClearColor:function(y,w=1){o.set(y),a=w,_(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(y){a=y,_(o,a)},render:function g(y,w){let C=!1,x=!0===w.isScene?w.background:null;x&&x.isTexture&&(x=e.get(x));const M=n.xr,T=M.getSession&&M.getSession();T&&"additive"===T.environmentBlendMode&&(x=null),null===x?_(o,a):x&&x.isColor&&(_(x,1),C=!0),(n.autoClear||C)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),x&&(x.isCubeTexture||306===x.mapping)?(void 0===l&&(l=new Ys(new Q0(1,1,1),new F2({name:"BackgroundCubeMaterial",uniforms:ag(W0.cube.uniforms),vertexShader:W0.cube.vertexShader,fragmentShader:W0.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(I,F,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=x,l.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,(u!==x||f!==x.version||p!==n.toneMapping)&&(l.material.needsUpdate=!0,u=x,f=x.version,p=n.toneMapping),l.layers.enableAll(),y.unshift(l,l.geometry,l.material,0,0,null)):x&&x.isTexture&&(void 0===c&&(c=new Ys(new y3(2,2),new F2({name:"BackgroundMaterial",uniforms:ag(W0.background.uniforms),vertexShader:W0.background.vertexShader,fragmentShader:W0.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=x,!0===x.matrixAutoUpdate&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||f!==x.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,u=x,f=x.version,p=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}}}function Kke(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},c=w(null);let l=c,u=!1;function g(Q){return i.isWebGL2?n.bindVertexArray(Q):s.bindVertexArrayOES(Q)}function _(Q){return i.isWebGL2?n.deleteVertexArray(Q):s.deleteVertexArrayOES(Q)}function w(Q){const he=[],K=[],ae=[];for(let fe=0;fe<r;fe++)he[fe]=0,K[fe]=0,ae[fe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:he,enabledAttributes:K,attributeDivisors:ae,object:Q,attributes:{},index:null}}function M(){const Q=l.newAttributes;for(let he=0,K=Q.length;he<K;he++)Q[he]=0}function T(Q){I(Q,0)}function I(Q,he){const ae=l.enabledAttributes,fe=l.attributeDivisors;l.newAttributes[Q]=1,0===ae[Q]&&(n.enableVertexAttribArray(Q),ae[Q]=1),fe[Q]!==he&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Q,he),fe[Q]=he)}function F(){const Q=l.newAttributes,he=l.enabledAttributes;for(let K=0,ae=he.length;K<ae;K++)he[K]!==Q[K]&&(n.disableVertexAttribArray(K),he[K]=0)}function P(Q,he,K,ae,fe,de){!0!==i.isWebGL2||5124!==K&&5125!==K?n.vertexAttribPointer(Q,he,K,ae,fe,de):n.vertexAttribIPointer(Q,he,K,fe,de)}function Te(){me(),u=!0,l!==c&&(l=c,g(l.object))}function me(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function f(Q,he,K,ae,fe){let de=!1;if(o){const ke=function y(Q,he,K){const ae=!0===K.wireframe;let fe=a[Q.id];void 0===fe&&(fe={},a[Q.id]=fe);let de=fe[he.id];void 0===de&&(de={},fe[he.id]=de);let ke=de[ae];return void 0===ke&&(ke=w(function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),de[ae]=ke),ke}(ae,K,he);l!==ke&&(l=ke,g(l.object)),de=function C(Q,he,K,ae){const fe=l.attributes,de=he.attributes;let ke=0;const et=K.getAttributes();for(const Fe in et)if(et[Fe].location>=0){const ut=fe[Fe];let Bt=de[Fe];if(void 0===Bt&&("instanceMatrix"===Fe&&Q.instanceMatrix&&(Bt=Q.instanceMatrix),"instanceColor"===Fe&&Q.instanceColor&&(Bt=Q.instanceColor)),void 0===ut||ut.attribute!==Bt||Bt&&ut.data!==Bt.data)return!0;ke++}return l.attributesNum!==ke||l.index!==ae}(Q,ae,K,fe),de&&function x(Q,he,K,ae){const fe={},de=he.attributes;let ke=0;const et=K.getAttributes();for(const Fe in et)if(et[Fe].location>=0){let ut=de[Fe];void 0===ut&&("instanceMatrix"===Fe&&Q.instanceMatrix&&(ut=Q.instanceMatrix),"instanceColor"===Fe&&Q.instanceColor&&(ut=Q.instanceColor));const Bt={};Bt.attribute=ut,ut&&ut.data&&(Bt.data=ut.data),fe[Fe]=Bt,ke++}l.attributes=fe,l.attributesNum=ke,l.index=ae}(Q,ae,K,fe)}else{const ke=!0===he.wireframe;(l.geometry!==ae.id||l.program!==K.id||l.wireframe!==ke)&&(l.geometry=ae.id,l.program=K.id,l.wireframe=ke,de=!0)}null!==fe&&t.update(fe,34963),(de||u)&&(u=!1,function R(Q,he,K,ae){if(!1===i.isWebGL2&&(Q.isInstancedMesh||ae.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;M();const fe=ae.attributes,de=K.getAttributes(),ke=he.defaultAttributeValues;for(const et in de){const Fe=de[et];if(Fe.location>=0){let wt=fe[et];if(void 0===wt&&("instanceMatrix"===et&&Q.instanceMatrix&&(wt=Q.instanceMatrix),"instanceColor"===et&&Q.instanceColor&&(wt=Q.instanceColor)),void 0!==wt){const ut=wt.normalized,Bt=wt.itemSize,xt=t.get(wt);if(void 0===xt)continue;const Zt=xt.buffer,cn=xt.type,Sn=xt.bytesPerElement;if(wt.isInterleavedBufferAttribute){const ln=wt.data,Ti=ln.stride,Vt=wt.offset;if(ln.isInstancedInterleavedBuffer){for(let Ft=0;Ft<Fe.locationSize;Ft++)I(Fe.location+Ft,ln.meshPerAttribute);!0!==Q.isInstancedMesh&&void 0===ae._maxInstanceCount&&(ae._maxInstanceCount=ln.meshPerAttribute*ln.count)}else for(let Ft=0;Ft<Fe.locationSize;Ft++)T(Fe.location+Ft);n.bindBuffer(34962,Zt);for(let Ft=0;Ft<Fe.locationSize;Ft++)P(Fe.location+Ft,Bt/Fe.locationSize,cn,ut,Ti*Sn,(Vt+Bt/Fe.locationSize*Ft)*Sn)}else{if(wt.isInstancedBufferAttribute){for(let ln=0;ln<Fe.locationSize;ln++)I(Fe.location+ln,wt.meshPerAttribute);!0!==Q.isInstancedMesh&&void 0===ae._maxInstanceCount&&(ae._maxInstanceCount=wt.meshPerAttribute*wt.count)}else for(let ln=0;ln<Fe.locationSize;ln++)T(Fe.location+ln);n.bindBuffer(34962,Zt);for(let ln=0;ln<Fe.locationSize;ln++)P(Fe.location+ln,Bt/Fe.locationSize,cn,ut,Bt*Sn,Bt/Fe.locationSize*ln*Sn)}}else if(void 0!==ke){const ut=ke[et];if(void 0!==ut)switch(ut.length){case 2:n.vertexAttrib2fv(Fe.location,ut);break;case 3:n.vertexAttrib3fv(Fe.location,ut);break;case 4:n.vertexAttrib4fv(Fe.location,ut);break;default:n.vertexAttrib1fv(Fe.location,ut)}}}}F()}(Q,he,K,ae),null!==fe&&n.bindBuffer(34963,t.get(fe).buffer))},reset:Te,resetDefaultState:me,dispose:function k(){Te();for(const Q in a){const he=a[Q];for(const K in he){const ae=he[K];for(const fe in ae)_(ae[fe].object),delete ae[fe];delete he[K]}delete a[Q]}},releaseStatesOfGeometry:function W(Q){if(void 0===a[Q.id])return;const he=a[Q.id];for(const K in he){const ae=he[K];for(const fe in ae)_(ae[fe].object),delete ae[fe];delete he[K]}delete a[Q.id]},releaseStatesOfProgram:function ie(Q){for(const he in a){const K=a[he];if(void 0===K[Q.id])continue;const ae=K[Q.id];for(const fe in ae)_(ae[fe].object),delete ae[fe];delete K[Q.id]}},initAttributes:M,enableAttribute:T,disableUnusedAttributes:F}}function Xke(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(l){s=l},this.render=function a(l,u){n.drawArrays(s,l,u),t.update(u,s,1)},this.renderInstances=function c(l,u,f){if(0===f)return;let p,g;if(r)p=n,g="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[g](s,l,u,f),t.update(u,s,f)}}function Yke(n,e,t){let i;function s(P){if("highp"===P){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return"mediump"===P&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,f=n.getParameter(34930),p=n.getParameter(35660),g=n.getParameter(3379),_=n.getParameter(34076),y=n.getParameter(34921),w=n.getParameter(36347),C=n.getParameter(36348),x=n.getParameter(36349),M=p>0,T=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:_,maxAttributes:y,maxVertexUniforms:w,maxVaryings:C,maxFragmentUniforms:x,vertexTextures:M,floatFragmentTextures:T,floatVertexTextures:M&&T,maxSamples:o?n.getParameter(36183):0}}function Zke(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Uu,a=new _3,c={value:null,needsUpdate:!1};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,p,g,_){const y=null!==f?f.length:0;let w=null;if(0!==y){if(w=c.value,!0!==_||null===w){const C=g+4*y,x=p.matrixWorldInverse;a.getNormalMatrix(x),(null===w||w.length<C)&&(w=new Float32Array(C));for(let M=0,T=g;M!==y;++M,T+=4)o.copy(f[M]).applyMatrix4(x,a),o.normal.toArray(w,T),w[T+3]=o.constant}c.value=w,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,w}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p,g){const _=0!==f.length||p||0!==i||r;return r=p,t=u(f,g,0),i=f.length,_},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(f,p,g){const _=f.clippingPlanes,y=f.clipIntersection,w=f.clipShadows,C=n.get(f);if(!r||null===_||0===_.length||s&&!w)s?u(null):l();else{const x=s?0:i,M=4*x;let T=C.clippingState||null;c.value=T,T=u(_,p,M,g);for(let I=0;I!==M;++I)T[I]=t[I];C.clippingState=T,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}}}function Jke(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new jRe(c.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}W0.physical={uniforms:nl([W0.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new jt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Dn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new jt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Dn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Dn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Es.meshphysical_vert,fragmentShader:Es.meshphysical_frag};class f5 extends KF{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const lee=[.125,.215,.35,.446,.526,.582],ZF=new f5,uee=new Dn;let JF=null;const p5=(1+Math.sqrt(5))/2,fg=1/p5,hee=[new Ae(1,1,1),new Ae(-1,1,1),new Ae(1,1,-1),new Ae(-1,1,-1),new Ae(0,p5,fg),new Ae(0,p5,-fg),new Ae(fg,0,p5),new Ae(-fg,0,p5),new Ae(p5,fg,0),new Ae(-p5,fg,0)];class ek{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){JF=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=pee(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=dee(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(JF),e.scissorTest=!1,Vx(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),JF=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:qa,minFilter:qa,generateMipmaps:!1,type:G0,format:Pu,encoding:Jh,depthBuffer:!1},r=fee(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=fee(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function ePe(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+lee.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=lee[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,f=1+l,p=[u,u,f,u,f,f,u,u,f,f,u,f],g=6,_=6,y=3,w=2,C=1,x=new Float32Array(y*_*g),M=new Float32Array(w*_*g),T=new Float32Array(C*_*g);for(let F=0;F<g;F++){const P=F%3*2/3-1,R=F>2?0:-1;x.set([P,R,0,P+2/3,R,0,P+2/3,R+1,0,P,R,0,P+2/3,R+1,0,P,R+1,0],y*_*F),M.set(p,w*_*F),T.set([F,F,F,F,F,F],C*_*F)}const I=new vr;I.setAttribute("position",new Ka(x,y)),I.setAttribute("uv",new Ka(M,w)),I.setAttribute("faceIndex",new Ka(T,C)),e.push(I),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function tPe(n,e,t){const i=new Float32Array(20),r=new Ae(0,1,0);return new F2({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Ys(this._lodPlanes[0],e);this._renderer.compile(t,ZF)}_sceneToCubeUV(e,t,i,r){const a=new Wc(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(uee),u.toneMapping=0,u.autoClear=!1;const g=new zl({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),_=new Ys(new Q0,g);let y=!1;const w=e.background;w?w.isColor&&(g.color.copy(w),e.background=null,y=!0):(g.color.copy(uee),y=!0);for(let C=0;C<6;C++){const x=C%3;0===x?(a.up.set(0,c[C],0),a.lookAt(l[C],0,0)):1===x?(a.up.set(0,0,c[C]),a.lookAt(0,l[C],0)):(a.up.set(0,c[C],0),a.lookAt(0,0,l[C]));const M=this._cubeSize;Vx(r,x*M,C>2?M:0,M,M),u.setRenderTarget(r),y&&u.render(_,a),u.render(e,a)}_.geometry.dispose(),_.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=pee()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=dee());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ys(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;Vx(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,ZF)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,hee[(r-1)%hee.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new Ys(this._lodPlanes[r],l),p=l.uniforms,g=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*g):2*Math.PI/39,y=s/_,w=isFinite(s)?1+Math.floor(3*y):20;w>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to 20`);const C=[];let x=0;for(let P=0;P<20;++P){const R=P/y,k=Math.exp(-R*R/2);C.push(k),0===P?x+=k:P<w&&(x+=2*k)}for(let P=0;P<C.length;P++)C[P]=C[P]/x;p.envMap.value=e.texture,p.samples.value=w,p.weights.value=C,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=_,p.mipInt.value=M-i;const T=this._sizeLods[r];Vx(t,3*T*(r>M-4?r-M+4:0),4*(this._cubeSize-T),3*T,2*T),c.setRenderTarget(t),c.render(f,ZF)}}function fee(n,e,t){const i=new V4(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Vx(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function dee(){return new F2({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function pee(){return new F2({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function nPe(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=301===c||302===c;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let f=e.get(a);return null===t&&(t=new ek(n)),f=l?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}if(e.has(a))return e.get(a).texture;{const f=a.image;if(l&&f&&f.height>0||u&&f&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(f)){null===t&&(t=new ek(n));const p=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function iPe(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function rPe(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;null!==p.index&&e.remove(p.index);for(const _ in p.attributes)e.remove(p.attributes[_]);p.removeEventListener("dispose",o),delete r[p.id];const g=s.get(p);g&&(e.remove(g),s.delete(p)),i.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function l(f){const p=[],g=f.index,_=f.attributes.position;let y=0;if(null!==g){const x=g.array;y=g.version;for(let M=0,T=x.length;M<T;M+=3){const I=x[M+0],F=x[M+1],P=x[M+2];p.push(I,F,F,P,P,I)}}else{y=_.version;for(let M=0,T=_.array.length/3-1;M<T;M+=3){const I=M+0,F=M+1,P=M+2;p.push(I,F,F,P,P,I)}}const w=new(WJ(p)?oee:see)(p,1);w.version=y;const C=s.get(f);C&&e.remove(C),s.set(f,w)}return{get:function a(f,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p},update:function c(f){const p=f.attributes;for(const _ in p)e.update(p[_],34962);const g=f.morphAttributes;for(const _ in g){const y=g[_];for(let w=0,C=y.length;w<C;w++)e.update(y[w],34962)}},getWireframeAttribute:function u(f){const p=s.get(f);if(p){const g=f.index;null!==g&&p.version<g.version&&l(f)}else l(f);return s.get(f)}}}function sPe(n,e,t,i){const r=i.isWebGL2;let s,a,c;this.setMode=function o(p){s=p},this.setIndex=function l(p){a=p.type,c=p.bytesPerElement},this.render=function u(p,g){n.drawElements(s,g,a,p*c),t.update(g,s,1)},this.renderInstances=function f(p,g,_){if(0===_)return;let y,w;if(r)y=n,w="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",null===y)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");y[w](s,g,a,p*c,_),t.update(g,s,_)}}function oPe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function aPe(n,e){return n[0]-e[0]}function cPe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function lPe(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Eo,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,f,p){const g=l.morphTargetInfluences;if(!0===e.isWebGL2){const _=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=void 0!==_?_.length:0;let w=s.get(u);if(void 0===w||w.count!==y){let he=function(){me.dispose(),s.delete(u),u.removeEventListener("dispose",he)};void 0!==w&&w.texture.dispose();const M=void 0!==u.morphAttributes.position,T=void 0!==u.morphAttributes.normal,I=void 0!==u.morphAttributes.color,F=u.morphAttributes.position||[],P=u.morphAttributes.normal||[],R=u.morphAttributes.color||[];let k=0;!0===M&&(k=1),!0===T&&(k=2),!0===I&&(k=3);let W=u.attributes.position.count*k,ie=1;W>e.maxTextureSize&&(ie=Math.ceil(W/e.maxTextureSize),W=e.maxTextureSize);const Te=new Float32Array(W*ie*4*y),me=new DF(Te,W,ie,y);me.type=O4,me.needsUpdate=!0;const Q=4*k;for(let K=0;K<y;K++){const ae=F[K],fe=P[K],de=R[K],ke=W*ie*4*K;for(let et=0;et<ae.count;et++){const Fe=et*Q;!0===M&&(o.fromBufferAttribute(ae,et),Te[ke+Fe+0]=o.x,Te[ke+Fe+1]=o.y,Te[ke+Fe+2]=o.z,Te[ke+Fe+3]=0),!0===T&&(o.fromBufferAttribute(fe,et),Te[ke+Fe+4]=o.x,Te[ke+Fe+5]=o.y,Te[ke+Fe+6]=o.z,Te[ke+Fe+7]=0),!0===I&&(o.fromBufferAttribute(de,et),Te[ke+Fe+8]=o.x,Te[ke+Fe+9]=o.y,Te[ke+Fe+10]=o.z,Te[ke+Fe+11]=4===de.itemSize?o.w:1)}}w={count:y,texture:me,size:new jt(W,ie)},s.set(u,w),u.addEventListener("dispose",he)}let C=0;for(let M=0;M<g.length;M++)C+=g[M];const x=u.morphTargetsRelative?1:1-C;p.getUniforms().setValue(n,"morphTargetBaseInfluence",x),p.getUniforms().setValue(n,"morphTargetInfluences",g),p.getUniforms().setValue(n,"morphTargetsTexture",w.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",w.size)}else{const _=void 0===g?0:g.length;let y=i[u.id];if(void 0===y||y.length!==_){y=[];for(let T=0;T<_;T++)y[T]=[T,0];i[u.id]=y}for(let T=0;T<_;T++){const I=y[T];I[0]=T,I[1]=g[T]}y.sort(cPe);for(let T=0;T<8;T++)T<_&&y[T][1]?(a[T][0]=y[T][0],a[T][1]=y[T][1]):(a[T][0]=Number.MAX_SAFE_INTEGER,a[T][1]=0);a.sort(aPe);const w=u.morphAttributes.position,C=u.morphAttributes.normal;let x=0;for(let T=0;T<8;T++){const I=a[T],F=I[0],P=I[1];F!==Number.MAX_SAFE_INTEGER&&P?(w&&u.getAttribute("morphTarget"+T)!==w[F]&&u.setAttribute("morphTarget"+T,w[F]),C&&u.getAttribute("morphNormal"+T)!==C[F]&&u.setAttribute("morphNormal"+T,C[F]),r[T]=P,x+=P):(w&&!0===u.hasAttribute("morphTarget"+T)&&u.deleteAttribute("morphTarget"+T),C&&!0===u.hasAttribute("morphNormal"+T)&&u.deleteAttribute("morphNormal"+T),r[T]=0)}const M=u.morphTargetsRelative?1:1-x;p.getUniforms().setValue(n,"morphTargetBaseInfluence",M),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function uPe(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,f=e.get(c,c.geometry);return r.get(f)!==l&&(e.update(f),r.set(f,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),null!==c.instanceColor&&t.update(c.instanceColor,34962)),f},dispose:function o(){r=new WeakMap}}}const gee=new N4,mee=new DF,Aee=new qJ,vee=new Ox,_ee=[],yee=[],wee=new Float32Array(16),Cee=new Float32Array(9),bee=new Float32Array(4);function dg(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=_ee[r];if(void 0===s&&(s=new Float32Array(r),_ee[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ol(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Nl(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Ux(n,e){let t=yee[e];void 0===t&&(t=new Int32Array(e),yee[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function hPe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function fPe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ol(t,e))return;n.uniform2fv(this.addr,e),Nl(t,e)}}function dPe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ol(t,e))return;n.uniform3fv(this.addr,e),Nl(t,e)}}function pPe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ol(t,e))return;n.uniform4fv(this.addr,e),Nl(t,e)}}function gPe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Ol(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Nl(t,e)}else{if(Ol(t,i))return;bee.set(i),n.uniformMatrix2fv(this.addr,!1,bee),Nl(t,i)}}function mPe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Ol(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Nl(t,e)}else{if(Ol(t,i))return;Cee.set(i),n.uniformMatrix3fv(this.addr,!1,Cee),Nl(t,i)}}function APe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Ol(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Nl(t,e)}else{if(Ol(t,i))return;wee.set(i),n.uniformMatrix4fv(this.addr,!1,wee),Nl(t,i)}}function vPe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function _Pe(n,e){const t=this.cache;Ol(t,e)||(n.uniform2iv(this.addr,e),Nl(t,e))}function yPe(n,e){const t=this.cache;Ol(t,e)||(n.uniform3iv(this.addr,e),Nl(t,e))}function wPe(n,e){const t=this.cache;Ol(t,e)||(n.uniform4iv(this.addr,e),Nl(t,e))}function CPe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function bPe(n,e){const t=this.cache;Ol(t,e)||(n.uniform2uiv(this.addr,e),Nl(t,e))}function xPe(n,e){const t=this.cache;Ol(t,e)||(n.uniform3uiv(this.addr,e),Nl(t,e))}function MPe(n,e){const t=this.cache;Ol(t,e)||(n.uniform4uiv(this.addr,e),Nl(t,e))}function SPe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||gee,r)}function EPe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Aee,r)}function TPe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||vee,r)}function LPe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||mee,r)}function IPe(n,e){n.uniform1fv(this.addr,e)}function BPe(n,e){const t=dg(e,this.size,2);n.uniform2fv(this.addr,t)}function RPe(n,e){const t=dg(e,this.size,3);n.uniform3fv(this.addr,t)}function FPe(n,e){const t=dg(e,this.size,4);n.uniform4fv(this.addr,t)}function kPe(n,e){const t=dg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function PPe(n,e){const t=dg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function HPe(n,e){const t=dg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function zPe(n,e){n.uniform1iv(this.addr,e)}function OPe(n,e){n.uniform2iv(this.addr,e)}function NPe(n,e){n.uniform3iv(this.addr,e)}function VPe(n,e){n.uniform4iv(this.addr,e)}function UPe(n,e){n.uniform1uiv(this.addr,e)}function GPe(n,e){n.uniform2uiv(this.addr,e)}function QPe(n,e){n.uniform3uiv(this.addr,e)}function WPe(n,e){n.uniform4uiv(this.addr,e)}function jPe(n,e,t){const i=e.length,r=Ux(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||gee,r[s])}function $Pe(n,e,t){const i=e.length,r=Ux(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||Aee,r[s])}function qPe(n,e,t){const i=e.length,r=Ux(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||vee,r[s])}function KPe(n,e,t){const i=e.length,r=Ux(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||mee,r[s])}class YPe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function DPe(n){switch(n){case 5126:return hPe;case 35664:return fPe;case 35665:return dPe;case 35666:return pPe;case 35674:return gPe;case 35675:return mPe;case 35676:return APe;case 5124:case 35670:return vPe;case 35667:case 35671:return _Pe;case 35668:case 35672:return yPe;case 35669:case 35673:return wPe;case 5125:return CPe;case 36294:return bPe;case 36295:return xPe;case 36296:return MPe;case 35678:case 36198:case 36298:case 36306:case 35682:return SPe;case 35679:case 36299:case 36307:return EPe;case 35680:case 36300:case 36308:case 36293:return TPe;case 36289:case 36303:case 36311:case 36292:return LPe}}(t.type)}}class ZPe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function XPe(n){switch(n){case 5126:return IPe;case 35664:return BPe;case 35665:return RPe;case 35666:return FPe;case 35674:return kPe;case 35675:return PPe;case 35676:return HPe;case 5124:case 35670:return zPe;case 35667:case 35671:return OPe;case 35668:case 35672:return NPe;case 35669:case 35673:return VPe;case 5125:return UPe;case 36294:return GPe;case 36295:return QPe;case 36296:return WPe;case 35678:case 36198:case 36298:case 36306:case 35682:return jPe;case 35679:case 36299:case 36307:return $Pe;case 35680:case 36300:case 36308:case 36293:return qPe;case 36289:case 36303:case 36311:case 36292:return KPe}}(t.type)}}class JPe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const nk=/(\w+)(\])?(\[|\.)?/g;function xee(n,e){n.seq.push(e),n.map[e.id]=e}function eHe(n,e,t){const i=n.name,r=i.length;for(nk.lastIndex=0;;){const s=nk.exec(i),o=nk.lastIndex;let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&o+2===r){xee(t,void 0===l?new YPe(a,n,e):new ZPe(a,n,e));break}{let f=t.map[a];void 0===f&&(f=new JPe(a),xee(t,f)),t=f}}}class Gx{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);eHe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function Mee(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let tHe=0;function See(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function nHe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function rHe(n,e){const t=function iHe(n){switch(n){case Jh:return["Linear","( value )"];case No:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function sHe(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function lv(n){return""!==n}function Eee(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Tee(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const lHe=/^[ \t]*#include +<([\w\d./]+)>/gm;function ik(n){return n.replace(lHe,uHe)}function uHe(n,e){const t=Es[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return ik(t)}const hHe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Lee(n){return n.replace(hHe,fHe)}function fHe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Dee(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function vHe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function dHe(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function pHe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function gHe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function mHe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function AHe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),g=t.isWebGL2?"":function oHe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(lv).join("\n")}(t),_=function aHe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),y=r.createProgram();let w,C,x=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(w=[_].filter(lv).join("\n"),w.length>0&&(w+="\n"),C=[g,_].filter(lv).join("\n"),C.length>0&&(C+="\n")):(w=[Dee(t),"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(lv).join("\n"),C=[g,Dee(t),"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Es.tonemapping_pars_fragment:"",0!==t.toneMapping?sHe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Es.encodings_pars_fragment,rHe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(lv).join("\n")),o=ik(o),o=Eee(o,t),o=Tee(o,t),a=ik(a),a=Eee(a,t),a=Tee(a,t),o=Lee(o),a=Lee(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(x="#version 300 es\n",w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,C=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+C);const T=x+C+a,I=Mee(r,35633,x+w+o),F=Mee(r,35632,T);if(r.attachShader(y,I),r.attachShader(y,F),void 0!==t.index0AttributeName?r.bindAttribLocation(y,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const k=r.getProgramInfoLog(y).trim(),W=r.getShaderInfoLog(I).trim(),ie=r.getShaderInfoLog(F).trim();let Te=!0,me=!0;if(!1===r.getProgramParameter(y,35714)){Te=!1;const Q=See(r,I,"vertex"),he=See(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+k+"\n"+Q+"\n"+he)}else""!==k?console.warn("THREE.WebGLProgram: Program Info Log:",k):(""===W||""===ie)&&(me=!1);me&&(this.diagnostics={runnable:Te,programLog:k,vertexShader:{log:W,prefix:w},fragmentShader:{log:ie,prefix:C}})}let P,R;return r.deleteShader(I),r.deleteShader(F),this.getUniforms=function(){return void 0===P&&(P=new Gx(r,y)),P},this.getAttributes=function(){return void 0===R&&(R=function cHe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,y)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=tHe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=I,this.fragmentShader=F,this}let _He=0;class yHe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new wHe(e),t.set(e,i)),i}}class wHe{constructor(e){this.id=_He++,this.code=e,this.usedTimes=0}}function CHe(n,e,t,i,r,s,o){const a=new zF,c=new yHe,l=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,p=r.vertexTextures;let g=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function y(R,k,W,ie,Te){const me=ie.fog,Q=Te.geometry,K=(R.isMeshStandardMaterial?t:e).get(R.envMap||(R.isMeshStandardMaterial?ie.environment:null)),ae=K&&306===K.mapping?K.image.height:null,fe=_[R.type];null!==R.precision&&(g=r.getMaxPrecision(R.precision),g!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",g,"instead."));const de=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,ke=void 0!==de?de.length:0;let Fe,wt,ut,Bt,et=0;if(void 0!==Q.morphAttributes.position&&(et=1),void 0!==Q.morphAttributes.normal&&(et=2),void 0!==Q.morphAttributes.color&&(et=3),fe){const Ti=W0[fe];Fe=Ti.vertexShader,wt=Ti.fragmentShader}else Fe=R.vertexShader,wt=R.fragmentShader,c.update(R),ut=c.getVertexShaderID(R),Bt=c.getFragmentShaderID(R);const xt=n.getRenderTarget(),cn=R.clearcoat>0,Sn=R.iridescence>0;return{isWebGL2:u,shaderID:fe,shaderName:R.type,vertexShader:Fe,fragmentShader:wt,defines:R.defines,customVertexShaderID:ut,customFragmentShaderID:Bt,isRawShaderMaterial:!0===R.isRawShaderMaterial,glslVersion:R.glslVersion,precision:g,instancing:!0===Te.isInstancedMesh,instancingColor:!0===Te.isInstancedMesh&&null!==Te.instanceColor,supportsVertexTextures:p,outputEncoding:null===xt?n.outputEncoding:!0===xt.isXRRenderTarget?xt.texture.encoding:Jh,map:!!R.map,matcap:!!R.matcap,envMap:!!K,envMapMode:K&&K.mapping,envMapCubeUVHeight:ae,lightMap:!!R.lightMap,aoMap:!!R.aoMap,emissiveMap:!!R.emissiveMap,bumpMap:!!R.bumpMap,normalMap:!!R.normalMap,objectSpaceNormalMap:1===R.normalMapType,tangentSpaceNormalMap:0===R.normalMapType,decodeVideoTexture:!!R.map&&!0===R.map.isVideoTexture&&R.map.encoding===No,clearcoat:cn,clearcoatMap:cn&&!!R.clearcoatMap,clearcoatRoughnessMap:cn&&!!R.clearcoatRoughnessMap,clearcoatNormalMap:cn&&!!R.clearcoatNormalMap,iridescence:Sn,iridescenceMap:Sn&&!!R.iridescenceMap,iridescenceThicknessMap:Sn&&!!R.iridescenceThicknessMap,displacementMap:!!R.displacementMap,roughnessMap:!!R.roughnessMap,metalnessMap:!!R.metalnessMap,specularMap:!!R.specularMap,specularIntensityMap:!!R.specularIntensityMap,specularColorMap:!!R.specularColorMap,opaque:!1===R.transparent&&1===R.blending,alphaMap:!!R.alphaMap,alphaTest:R.alphaTest>0,gradientMap:!!R.gradientMap,sheen:R.sheen>0,sheenColorMap:!!R.sheenColorMap,sheenRoughnessMap:!!R.sheenRoughnessMap,transmission:R.transmission>0,transmissionMap:!!R.transmissionMap,thicknessMap:!!R.thicknessMap,combine:R.combine,vertexTangents:!!R.normalMap&&!!Q.attributes.tangent,vertexColors:R.vertexColors,vertexAlphas:!0===R.vertexColors&&!!Q.attributes.color&&4===Q.attributes.color.itemSize,vertexUvs:!!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatMap||R.clearcoatRoughnessMap||R.clearcoatNormalMap||R.iridescenceMap||R.iridescenceThicknessMap||R.displacementMap||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheenColorMap||R.sheenRoughnessMap),uvsVertexOnly:!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatNormalMap||R.iridescenceMap||R.iridescenceThicknessMap||R.transmission>0||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheen>0||R.sheenColorMap||R.sheenRoughnessMap||!R.displacementMap),fog:!!me,useFog:!0===R.fog,fogExp2:me&&me.isFogExp2,flatShading:!!R.flatShading,sizeAttenuation:R.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===Te.isSkinnedMesh,morphTargets:void 0!==Q.morphAttributes.position,morphNormals:void 0!==Q.morphAttributes.normal,morphColors:void 0!==Q.morphAttributes.color,morphTargetsCount:ke,morphTextureStride:et,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:R.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:2===R.side,flipSided:1===R.side,useDepthPacking:!!R.depthPacking,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:R.extensions&&R.extensions.derivatives,extensionFragDepth:R.extensions&&R.extensions.fragDepth,extensionDrawBuffers:R.extensions&&R.extensions.drawBuffers,extensionShaderTextureLOD:R.extensions&&R.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}},getProgramCacheKey:function w(R){const k=[];if(R.shaderID?k.push(R.shaderID):(k.push(R.customVertexShaderID),k.push(R.customFragmentShaderID)),void 0!==R.defines)for(const W in R.defines)k.push(W),k.push(R.defines[W]);return!1===R.isRawShaderMaterial&&(function C(R,k){R.push(k.precision),R.push(k.outputEncoding),R.push(k.envMapMode),R.push(k.envMapCubeUVHeight),R.push(k.combine),R.push(k.vertexUvs),R.push(k.fogExp2),R.push(k.sizeAttenuation),R.push(k.morphTargetsCount),R.push(k.morphAttributeCount),R.push(k.numDirLights),R.push(k.numPointLights),R.push(k.numSpotLights),R.push(k.numSpotLightMaps),R.push(k.numHemiLights),R.push(k.numRectAreaLights),R.push(k.numDirLightShadows),R.push(k.numPointLightShadows),R.push(k.numSpotLightShadows),R.push(k.numSpotLightShadowsWithMaps),R.push(k.shadowMapType),R.push(k.toneMapping),R.push(k.numClippingPlanes),R.push(k.numClipIntersection),R.push(k.depthPacking)}(k,R),function x(R,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.map&&a.enable(4),k.matcap&&a.enable(5),k.envMap&&a.enable(6),k.lightMap&&a.enable(7),k.aoMap&&a.enable(8),k.emissiveMap&&a.enable(9),k.bumpMap&&a.enable(10),k.normalMap&&a.enable(11),k.objectSpaceNormalMap&&a.enable(12),k.tangentSpaceNormalMap&&a.enable(13),k.clearcoat&&a.enable(14),k.clearcoatMap&&a.enable(15),k.clearcoatRoughnessMap&&a.enable(16),k.clearcoatNormalMap&&a.enable(17),k.iridescence&&a.enable(18),k.iridescenceMap&&a.enable(19),k.iridescenceThicknessMap&&a.enable(20),k.displacementMap&&a.enable(21),k.specularMap&&a.enable(22),k.roughnessMap&&a.enable(23),k.metalnessMap&&a.enable(24),k.gradientMap&&a.enable(25),k.alphaMap&&a.enable(26),k.alphaTest&&a.enable(27),k.vertexColors&&a.enable(28),k.vertexAlphas&&a.enable(29),k.vertexUvs&&a.enable(30),k.vertexTangents&&a.enable(31),k.uvsVertexOnly&&a.enable(32),R.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.physicallyCorrectLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.specularIntensityMap&&a.enable(15),k.specularColorMap&&a.enable(16),k.transmission&&a.enable(17),k.transmissionMap&&a.enable(18),k.thicknessMap&&a.enable(19),k.sheen&&a.enable(20),k.sheenColorMap&&a.enable(21),k.sheenRoughnessMap&&a.enable(22),k.decodeVideoTexture&&a.enable(23),k.opaque&&a.enable(24),R.push(a.mask)}(k,R),k.push(n.outputEncoding)),k.push(R.customProgramCacheKey),k.join()},getUniforms:function M(R){const k=_[R.type];let W;return W=k?Xd.clone(W0[k].uniforms):R.uniforms,W},acquireProgram:function T(R,k){let W;for(let ie=0,Te=l.length;ie<Te;ie++){const me=l[ie];if(me.cacheKey===k){W=me,++W.usedTimes;break}}return void 0===W&&(W=new vHe(n,k,R,s),l.push(W)),W},releaseProgram:function I(R){if(0==--R.usedTimes){const k=l.indexOf(R);l[k]=l[l.length-1],l.pop(),R.destroy()}},releaseShaderCache:function F(R){c.remove(R)},programs:l,dispose:function P(){c.dispose()}}}function bHe(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function xHe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Iee(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Bee(){const n=[];let e=0;const t=[],i=[],r=[];function o(f,p,g,_,y,w){let C=n[e];return void 0===C?(C={id:f.id,object:f,geometry:p,material:g,groupOrder:_,renderOrder:f.renderOrder,z:y,group:w},n[e]=C):(C.id=f.id,C.object=f,C.geometry=p,C.material=g,C.groupOrder=_,C.renderOrder=f.renderOrder,C.z=y,C.group=w),e++,C}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(f,p,g,_,y,w){const C=o(f,p,g,_,y,w);g.transmission>0?i.push(C):!0===g.transparent?r.push(C):t.push(C)},unshift:function c(f,p,g,_,y,w){const C=o(f,p,g,_,y,w);g.transmission>0?i.unshift(C):!0===g.transparent?r.unshift(C):t.unshift(C)},finish:function u(){for(let f=e,p=n.length;f<p;f++){const g=n[f];if(null===g.id)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}},sort:function l(f,p){t.length>1&&t.sort(f||xHe),i.length>1&&i.sort(p||Iee),r.length>1&&r.sort(p||Iee)}}}function MHe(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new Bee,n.set(i,[o])):r>=s.length?(o=new Bee,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function SHe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Ae,color:new Dn};break;case"SpotLight":t={position:new Ae,direction:new Ae,color:new Dn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Ae,color:new Dn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Ae,skyColor:new Dn,groundColor:new Dn};break;case"RectAreaLight":t={color:new Dn,position:new Ae,halfWidth:new Ae,halfHeight:new Ae}}return n[e.id]=t,t}}}let THe=0;function LHe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function DHe(n,e){const t=new SHe,i=function EHe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new Ae);const s=new Ae,o=new Qi,a=new Qi;return{setup:function c(u,f){let p=0,g=0,_=0;for(let ie=0;ie<9;ie++)r.probe[ie].set(0,0,0);let y=0,w=0,C=0,x=0,M=0,T=0,I=0,F=0,P=0,R=0;u.sort(LHe);const k=!0!==f?Math.PI:1;for(let ie=0,Te=u.length;ie<Te;ie++){const me=u[ie],Q=me.color,he=me.intensity,K=me.distance,ae=me.shadow&&me.shadow.map?me.shadow.map.texture:null;if(me.isAmbientLight)p+=Q.r*he*k,g+=Q.g*he*k,_+=Q.b*he*k;else if(me.isLightProbe)for(let fe=0;fe<9;fe++)r.probe[fe].addScaledVector(me.sh.coefficients[fe],he);else if(me.isDirectionalLight){const fe=t.get(me);if(fe.color.copy(me.color).multiplyScalar(me.intensity*k),me.castShadow){const de=me.shadow,ke=i.get(me);ke.shadowBias=de.bias,ke.shadowNormalBias=de.normalBias,ke.shadowRadius=de.radius,ke.shadowMapSize=de.mapSize,r.directionalShadow[y]=ke,r.directionalShadowMap[y]=ae,r.directionalShadowMatrix[y]=me.shadow.matrix,T++}r.directional[y]=fe,y++}else if(me.isSpotLight){const fe=t.get(me);fe.position.setFromMatrixPosition(me.matrixWorld),fe.color.copy(Q).multiplyScalar(he*k),fe.distance=K,fe.coneCos=Math.cos(me.angle),fe.penumbraCos=Math.cos(me.angle*(1-me.penumbra)),fe.decay=me.decay,r.spot[C]=fe;const de=me.shadow;if(me.map&&(r.spotLightMap[P]=me.map,P++,de.updateMatrices(me),me.castShadow&&R++),r.spotLightMatrix[C]=de.matrix,me.castShadow){const ke=i.get(me);ke.shadowBias=de.bias,ke.shadowNormalBias=de.normalBias,ke.shadowRadius=de.radius,ke.shadowMapSize=de.mapSize,r.spotShadow[C]=ke,r.spotShadowMap[C]=ae,F++}C++}else if(me.isRectAreaLight){const fe=t.get(me);fe.color.copy(Q).multiplyScalar(he),fe.halfWidth.set(.5*me.width,0,0),fe.halfHeight.set(0,.5*me.height,0),r.rectArea[x]=fe,x++}else if(me.isPointLight){const fe=t.get(me);if(fe.color.copy(me.color).multiplyScalar(me.intensity*k),fe.distance=me.distance,fe.decay=me.decay,me.castShadow){const de=me.shadow,ke=i.get(me);ke.shadowBias=de.bias,ke.shadowNormalBias=de.normalBias,ke.shadowRadius=de.radius,ke.shadowMapSize=de.mapSize,ke.shadowCameraNear=de.camera.near,ke.shadowCameraFar=de.camera.far,r.pointShadow[w]=ke,r.pointShadowMap[w]=ae,r.pointShadowMatrix[w]=me.shadow.matrix,I++}r.point[w]=fe,w++}else if(me.isHemisphereLight){const fe=t.get(me);fe.skyColor.copy(me.color).multiplyScalar(he*k),fe.groundColor.copy(me.groundColor).multiplyScalar(he*k),r.hemi[M]=fe,M++}}x>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Vn.LTC_FLOAT_1,r.rectAreaLTC2=Vn.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Vn.LTC_HALF_1,r.rectAreaLTC2=Vn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=g,r.ambient[2]=_;const W=r.hash;(W.directionalLength!==y||W.pointLength!==w||W.spotLength!==C||W.rectAreaLength!==x||W.hemiLength!==M||W.numDirectionalShadows!==T||W.numPointShadows!==I||W.numSpotShadows!==F||W.numSpotMaps!==P)&&(r.directional.length=y,r.spot.length=C,r.rectArea.length=x,r.point.length=w,r.hemi.length=M,r.directionalShadow.length=T,r.directionalShadowMap.length=T,r.pointShadow.length=I,r.pointShadowMap.length=I,r.spotShadow.length=F,r.spotShadowMap.length=F,r.directionalShadowMatrix.length=T,r.pointShadowMatrix.length=I,r.spotLightMatrix.length=F+P-R,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=R,W.directionalLength=y,W.pointLength=w,W.spotLength=C,W.rectAreaLength=x,W.hemiLength=M,W.numDirectionalShadows=T,W.numPointShadows=I,W.numSpotShadows=F,W.numSpotMaps=P,r.version=THe++)},setupView:function l(u,f){let p=0,g=0,_=0,y=0,w=0;const C=f.matrixWorldInverse;for(let x=0,M=u.length;x<M;x++){const T=u[x];if(T.isDirectionalLight){const I=r.directional[p];I.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(C),p++}else if(T.isSpotLight){const I=r.spot[_];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(C),I.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(C),_++}else if(T.isRectAreaLight){const I=r.rectArea[y];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(C),a.identity(),o.copy(T.matrixWorld),o.premultiply(C),a.extractRotation(o),I.halfWidth.set(.5*T.width,0,0),I.halfHeight.set(0,.5*T.height,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),y++}else if(T.isPointLight){const I=r.point[g];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(C),g++}else if(T.isHemisphereLight){const I=r.hemi[w];I.direction.setFromMatrixPosition(T.matrixWorld),I.direction.transformDirection(C),w++}}},state:r}}function Ree(n,e){const t=new DHe(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(f){t.setup(i,f)},setupLightsView:function l(f){t.setupView(i,f)},pushLight:function o(f){i.push(f)},pushShadow:function a(f){r.push(f)}}}function IHe(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let c;return void 0===a?(c=new Ree(n,e),t.set(s,[c])):o>=a.length?(c=new Ree(n,e),a.push(c)):c=a[o],c},dispose:function r(){t=new WeakMap}}}class Fee extends tl{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class kee extends tl{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Ae,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function FHe(n,e,t){let i=new YF;const r=new jt,s=new jt,o=new Eo,a=new Fee({depthPacking:3201}),c=new kee,l={},u=t.maxTextureSize,f={0:1,1:0,2:2},p=new F2({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new jt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const _=new vr;_.setAttribute("position",new Ka(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Ys(_,p),w=this;function C(T,I){const F=e.update(y);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,g.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),null===T.mapPass&&(T.mapPass=new V4(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(I,null,F,p,y,null),g.uniforms.shadow_pass.value=T.mapPass.texture,g.uniforms.resolution.value=T.mapSize,g.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(I,null,F,g,y,null)}function x(T,I,F,P,R,k){let W=null;const ie=!0===F.isPointLight?T.customDistanceMaterial:T.customDepthMaterial;if(W=void 0!==ie?ie:!0===F.isPointLight?c:a,n.localClippingEnabled&&!0===I.clipShadows&&Array.isArray(I.clippingPlanes)&&0!==I.clippingPlanes.length||I.displacementMap&&0!==I.displacementScale||I.alphaMap&&I.alphaTest>0){const Te=W.uuid,me=I.uuid;let Q=l[Te];void 0===Q&&(Q={},l[Te]=Q);let he=Q[me];void 0===he&&(he=W.clone(),Q[me]=he),W=he}return W.visible=I.visible,W.wireframe=I.wireframe,W.side=3===k?null!==I.shadowSide?I.shadowSide:I.side:null!==I.shadowSide?I.shadowSide:f[I.side],W.alphaMap=I.alphaMap,W.alphaTest=I.alphaTest,W.clipShadows=I.clipShadows,W.clippingPlanes=I.clippingPlanes,W.clipIntersection=I.clipIntersection,W.displacementMap=I.displacementMap,W.displacementScale=I.displacementScale,W.displacementBias=I.displacementBias,W.wireframeLinewidth=I.wireframeLinewidth,W.linewidth=I.linewidth,!0===F.isPointLight&&!0===W.isMeshDistanceMaterial&&(W.referencePosition.setFromMatrixPosition(F.matrixWorld),W.nearDistance=P,W.farDistance=R),W}function M(T,I,F,P,R){if(!1===T.visible)return;if(T.layers.test(I.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&3===R)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,T.matrixWorld);const ie=e.update(T),Te=T.material;if(Array.isArray(Te)){const me=ie.groups;for(let Q=0,he=me.length;Q<he;Q++){const K=me[Q],ae=Te[K.materialIndex];if(ae&&ae.visible){const fe=x(T,ae,P,F.near,F.far,R);n.renderBufferDirect(F,null,ie,fe,T,K)}}}else if(Te.visible){const me=x(T,Te,P,F.near,F.far,R);n.renderBufferDirect(F,null,ie,me,T,null)}}const W=T.children;for(let ie=0,Te=W.length;ie<Te;ie++)M(W[ie],I,F,P,R)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(T,I,F){if(!1===w.enabled||!1===w.autoUpdate&&!1===w.needsUpdate||0===T.length)return;const P=n.getRenderTarget(),R=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),W=n.state;W.setBlending(0),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);for(let ie=0,Te=T.length;ie<Te;ie++){const me=T[ie],Q=me.shadow;if(void 0===Q){console.warn("THREE.WebGLShadowMap:",me,"has no shadow.");continue}if(!1===Q.autoUpdate&&!1===Q.needsUpdate)continue;r.copy(Q.mapSize);const he=Q.getFrameExtents();r.multiply(he),s.copy(Q.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/he.x),r.x=s.x*he.x,Q.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/he.y),r.y=s.y*he.y,Q.mapSize.y=s.y)),null===Q.map&&(Q.map=new V4(r.x,r.y,3!==this.type?{minFilter:k1,magFilter:k1}:{}),Q.map.texture.name=me.name+".shadowMap",Q.camera.updateProjectionMatrix()),n.setRenderTarget(Q.map),n.clear();const K=Q.getViewportCount();for(let ae=0;ae<K;ae++){const fe=Q.getViewport(ae);o.set(s.x*fe.x,s.y*fe.y,s.x*fe.z,s.y*fe.w),W.viewport(o),Q.updateMatrices(me,ae),i=Q.getFrustum(),M(I,F,Q.camera,me,this.type)}!0!==Q.isPointLightShadow&&3===this.type&&C(Q,F),Q.needsUpdate=!1}w.needsUpdate=!1,n.setRenderTarget(P,R,k)}}function kHe(n,e,t){const i=t.isWebGL2,a=new function r(){let at=!1;const Rn=new Eo;let zt=null;const Nn=new Eo(0,0,0,0);return{setMask:function(Hn){zt!==Hn&&!at&&(n.colorMask(Hn,Hn,Hn,Hn),zt=Hn)},setLocked:function(Hn){at=Hn},setClear:function(Hn,_s,lc,t1,Q1){!0===Q1&&(Hn*=t1,_s*=t1,lc*=t1),Rn.set(Hn,_s,lc,t1),!1===Nn.equals(Rn)&&(n.clearColor(Hn,_s,lc,t1),Nn.copy(Rn))},reset:function(){at=!1,zt=null,Nn.set(-1,0,0,0)}}},c=new function s(){let at=!1,Rn=null,zt=null,Nn=null;return{setTest:function(Hn){Hn?Zt(2929):cn(2929)},setMask:function(Hn){Rn!==Hn&&!at&&(n.depthMask(Hn),Rn=Hn)},setFunc:function(Hn){if(zt!==Hn){if(Hn)switch(Hn){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);zt=Hn}},setLocked:function(Hn){at=Hn},setClear:function(Hn){Nn!==Hn&&(n.clearDepth(Hn),Nn=Hn)},reset:function(){at=!1,Rn=null,zt=null,Nn=null}}},l=new function o(){let at=!1,Rn=null,zt=null,Nn=null,Hn=null,_s=null,lc=null,t1=null,Q1=null;return{setTest:function(Qo){at||(Qo?Zt(2960):cn(2960))},setMask:function(Qo){Rn!==Qo&&!at&&(n.stencilMask(Qo),Rn=Qo)},setFunc:function(Qo,W1,j1){(zt!==Qo||Nn!==W1||Hn!==j1)&&(n.stencilFunc(Qo,W1,j1),zt=Qo,Nn=W1,Hn=j1)},setOp:function(Qo,W1,j1){(_s!==Qo||lc!==W1||t1!==j1)&&(n.stencilOp(Qo,W1,j1),_s=Qo,lc=W1,t1=j1)},setLocked:function(Qo){at=Qo},setClear:function(Qo){Q1!==Qo&&(n.clearStencil(Qo),Q1=Qo)},reset:function(){at=!1,Rn=null,zt=null,Nn=null,Hn=null,_s=null,lc=null,t1=null,Q1=null}}},u=new WeakMap,f=new WeakMap;let p={},g={},_=new WeakMap,y=[],w=null,C=!1,x=null,M=null,T=null,I=null,F=null,P=null,R=null,k=!1,W=null,ie=null,Te=null,me=null,Q=null;const he=n.getParameter(35661);let K=!1,ae=0;const fe=n.getParameter(7938);-1!==fe.indexOf("WebGL")?(ae=parseFloat(/^WebGL (\d)/.exec(fe)[1]),K=ae>=1):-1!==fe.indexOf("OpenGL ES")&&(ae=parseFloat(/^OpenGL ES (\d)/.exec(fe)[1]),K=ae>=2);let de=null,ke={};const et=n.getParameter(3088),Fe=n.getParameter(2978),wt=(new Eo).fromArray(et),ut=(new Eo).fromArray(Fe);function Bt(at,Rn,zt){const Nn=new Uint8Array(4),Hn=n.createTexture();n.bindTexture(at,Hn),n.texParameteri(at,10241,9728),n.texParameteri(at,10240,9728);for(let _s=0;_s<zt;_s++)n.texImage2D(Rn+_s,0,6408,1,1,0,6408,5121,Nn);return Hn}const xt={};function Zt(at){!0!==p[at]&&(n.enable(at),p[at]=!0)}function cn(at){!1!==p[at]&&(n.disable(at),p[at]=!1)}xt[3553]=Bt(3553,3553,1),xt[34067]=Bt(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),Zt(2929),c.setFunc(3),En(!1),Cn(1),Zt(2884),vn(0);const Vt={[Nd]:32774,101:32778,102:32779};if(i)Vt[103]=32775,Vt[104]=32776;else{const at=e.get("EXT_blend_minmax");null!==at&&(Vt[103]=at.MIN_EXT,Vt[104]=at.MAX_EXT)}const Ft={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function vn(at,Rn,zt,Nn,Hn,_s,lc,t1){if(0!==at){if(!1===C&&(Zt(3042),C=!0),5===at)Hn=Hn||Rn,_s=_s||zt,lc=lc||Nn,(Rn!==M||Hn!==F)&&(n.blendEquationSeparate(Vt[Rn],Vt[Hn]),M=Rn,F=Hn),(zt!==T||Nn!==I||_s!==P||lc!==R)&&(n.blendFuncSeparate(Ft[zt],Ft[Nn],Ft[_s],Ft[lc]),T=zt,I=Nn,P=_s,R=lc),x=at,k=null;else if(at!==x||t1!==k){if((M!==Nd||F!==Nd)&&(n.blendEquation(32774),M=Nd,F=Nd),t1)switch(at){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",at)}else switch(at){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",at)}T=null,I=null,P=null,R=null,x=at,k=t1}}else!0===C&&(cn(3042),C=!1)}function En(at){W!==at&&(n.frontFace(at?2304:2305),W=at)}function Cn(at){0!==at?(Zt(2884),at!==ie&&n.cullFace(1===at?1029:2===at?1028:1032)):cn(2884),ie=at}function di(at,Rn,zt){at?(Zt(32823),(me!==Rn||Q!==zt)&&(n.polygonOffset(Rn,zt),me=Rn,Q=zt)):cn(32823)}function hs(at){void 0===at&&(at=33984+he-1),de!==at&&(n.activeTexture(at),de=at)}return{buffers:{color:a,depth:c,stencil:l},enable:Zt,disable:cn,bindFramebuffer:function Sn(at,Rn){return g[at]!==Rn&&(n.bindFramebuffer(at,Rn),g[at]=Rn,i&&(36009===at&&(g[36160]=Rn),36160===at&&(g[36009]=Rn)),!0)},drawBuffers:function ln(at,Rn){let zt=y,Nn=!1;if(at)if(zt=_.get(Rn),void 0===zt&&(zt=[],_.set(Rn,zt)),at.isWebGLMultipleRenderTargets){const Hn=at.texture;if(zt.length!==Hn.length||36064!==zt[0]){for(let _s=0,lc=Hn.length;_s<lc;_s++)zt[_s]=36064+_s;zt.length=Hn.length,Nn=!0}}else 36064!==zt[0]&&(zt[0]=36064,Nn=!0);else 1029!==zt[0]&&(zt[0]=1029,Nn=!0);Nn&&(t.isWebGL2?n.drawBuffers(zt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(zt))},useProgram:function Ti(at){return w!==at&&(n.useProgram(at),w=at,!0)},setBlending:vn,setMaterial:function qn(at,Rn){2===at.side?cn(2884):Zt(2884);let zt=1===at.side;Rn&&(zt=!zt),En(zt),1===at.blending&&!1===at.transparent?vn(0):vn(at.blending,at.blendEquation,at.blendSrc,at.blendDst,at.blendEquationAlpha,at.blendSrcAlpha,at.blendDstAlpha,at.premultipliedAlpha),c.setFunc(at.depthFunc),c.setTest(at.depthTest),c.setMask(at.depthWrite),a.setMask(at.colorWrite);const Nn=at.stencilWrite;l.setTest(Nn),Nn&&(l.setMask(at.stencilWriteMask),l.setFunc(at.stencilFunc,at.stencilRef,at.stencilFuncMask),l.setOp(at.stencilFail,at.stencilZFail,at.stencilZPass)),di(at.polygonOffset,at.polygonOffsetFactor,at.polygonOffsetUnits),!0===at.alphaToCoverage?Zt(32926):cn(32926)},setFlipSided:En,setCullFace:Cn,setLineWidth:function Un(at){at!==Te&&(K&&n.lineWidth(at),Te=at)},setPolygonOffset:di,setScissorTest:function cr(at){at?Zt(3089):cn(3089)},activeTexture:hs,bindTexture:function Oe(at,Rn){null===de&&hs();let zt=ke[de];void 0===zt&&(zt={type:void 0,texture:void 0},ke[de]=zt),(zt.type!==at||zt.texture!==Rn)&&(n.bindTexture(at,Rn||xt[at]),zt.type=at,zt.texture=Rn)},unbindTexture:function ve(){const at=ke[de];void 0!==at&&void 0!==at.type&&(n.bindTexture(at.type,null),at.type=void 0,at.texture=void 0)},compressedTexImage2D:function Tt(){try{n.compressedTexImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texImage2D:function Jt(){try{n.texImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texImage3D:function un(){try{n.texImage3D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},updateUBOMapping:function tr(at,Rn){let zt=f.get(Rn);void 0===zt&&(zt=new WeakMap,f.set(Rn,zt));let Nn=zt.get(at);void 0===Nn&&(Nn=n.getUniformBlockIndex(Rn,at.name),zt.set(at,Nn))},uniformBlockBinding:function Pr(at,Rn){const Nn=f.get(Rn).get(at);u.get(at)!==Nn&&(n.uniformBlockBinding(Rn,Nn,at.__bindingPointIndex),u.set(at,Nn))},texStorage2D:function Ci(){try{n.texStorage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texStorage3D:function De(){try{n.texStorage3D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texSubImage2D:function mn(){try{n.texSubImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texSubImage3D:function bn(){try{n.texSubImage3D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},compressedTexSubImage2D:function In(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},scissor:function Wn(at){!1===wt.equals(at)&&(n.scissor(at.x,at.y,at.z,at.w),wt.copy(at))},viewport:function jn(at){!1===ut.equals(at)&&(n.viewport(at.x,at.y,at.z,at.w),ut.copy(at))},reset:function Go(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},de=null,ke={},g={},_=new WeakMap,y=[],w=null,C=!1,x=null,M=null,T=null,I=null,F=null,P=null,R=null,k=!1,W=null,ie=null,Te=null,me=null,Q=null,wt.set(0,0,n.canvas.width,n.canvas.height),ut.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function PHe(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let y;const w=new WeakMap;let C=!1;try{C=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function x(Oe,ve){return C?new OffscreenCanvas(Oe,ve):sv("canvas")}function M(Oe,ve,Tt,mn){let bn=1;if((Oe.width>mn||Oe.height>mn)&&(bn=mn/Math.max(Oe.width,Oe.height)),bn<1||!0===ve){if(typeof HTMLImageElement<"u"&&Oe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Oe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Oe instanceof ImageBitmap){const In=ve?Ax:Math.floor,Ci=In(bn*Oe.width),De=In(bn*Oe.height);void 0===y&&(y=x(Ci,De));const Jt=Tt?x(Ci,De):y;return Jt.width=Ci,Jt.height=De,Jt.getContext("2d").drawImage(Oe,0,0,Ci,De),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Oe.width+"x"+Oe.height+") to ("+Ci+"x"+De+")."),Jt}return"data"in Oe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Oe.width+"x"+Oe.height+")."),Oe}return Oe}function T(Oe){return SF(Oe.width)&&SF(Oe.height)}function F(Oe,ve){return Oe.generateMipmaps&&ve&&Oe.minFilter!==k1&&Oe.minFilter!==qa}function P(Oe){n.generateMipmap(Oe)}function R(Oe,ve,Tt,mn,bn=!1){if(!1===a)return ve;if(null!==Oe){if(void 0!==n[Oe])return n[Oe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Oe+"'")}let In=ve;return 6403===ve&&(5126===Tt&&(In=33326),5131===Tt&&(In=33325),5121===Tt&&(In=33321)),33319===ve&&(5126===Tt&&(In=33328),5131===Tt&&(In=33327),5121===Tt&&(In=33323)),6408===ve&&(5126===Tt&&(In=34836),5131===Tt&&(In=34842),5121===Tt&&(In=mn===No&&!1===bn?35907:32856),32819===Tt&&(In=32854),32820===Tt&&(In=32855)),(33325===In||33326===In||33327===In||33328===In||34842===In||34836===In)&&e.get("EXT_color_buffer_float"),In}function k(Oe,ve,Tt){return!0===F(Oe,Tt)||Oe.isFramebufferTexture&&Oe.minFilter!==k1&&Oe.minFilter!==qa?Math.log2(Math.max(ve.width,ve.height))+1:void 0!==Oe.mipmaps&&Oe.mipmaps.length>0?Oe.mipmaps.length:Oe.isCompressedTexture&&Array.isArray(Oe.image)?ve.mipmaps.length:1}function W(Oe){return Oe===k1||1004===Oe||1005===Oe?9728:9729}function ie(Oe){const ve=Oe.target;ve.removeEventListener("dispose",ie),function me(Oe){const ve=i.get(Oe);if(void 0===ve.__webglInit)return;const Tt=Oe.source,mn=w.get(Tt);if(mn){const bn=mn[ve.__cacheKey];bn.usedTimes--,0===bn.usedTimes&&Q(Oe),0===Object.keys(mn).length&&w.delete(Tt)}i.remove(Oe)}(ve),ve.isVideoTexture&&_.delete(ve)}function Te(Oe){const ve=Oe.target;ve.removeEventListener("dispose",Te),function he(Oe){const ve=Oe.texture,Tt=i.get(Oe),mn=i.get(ve);if(void 0!==mn.__webglTexture&&(n.deleteTexture(mn.__webglTexture),o.memory.textures--),Oe.depthTexture&&Oe.depthTexture.dispose(),Oe.isWebGLCubeRenderTarget)for(let bn=0;bn<6;bn++)n.deleteFramebuffer(Tt.__webglFramebuffer[bn]),Tt.__webglDepthbuffer&&n.deleteRenderbuffer(Tt.__webglDepthbuffer[bn]);else{if(n.deleteFramebuffer(Tt.__webglFramebuffer),Tt.__webglDepthbuffer&&n.deleteRenderbuffer(Tt.__webglDepthbuffer),Tt.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Tt.__webglMultisampledFramebuffer),Tt.__webglColorRenderbuffer)for(let bn=0;bn<Tt.__webglColorRenderbuffer.length;bn++)Tt.__webglColorRenderbuffer[bn]&&n.deleteRenderbuffer(Tt.__webglColorRenderbuffer[bn]);Tt.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Tt.__webglDepthRenderbuffer)}if(Oe.isWebGLMultipleRenderTargets)for(let bn=0,In=ve.length;bn<In;bn++){const Ci=i.get(ve[bn]);Ci.__webglTexture&&(n.deleteTexture(Ci.__webglTexture),o.memory.textures--),i.remove(ve[bn])}i.remove(ve),i.remove(Oe)}(ve)}function Q(Oe){const ve=i.get(Oe);n.deleteTexture(ve.__webglTexture),delete w.get(Oe.source)[ve.__cacheKey],o.memory.textures--}let K=0;function ke(Oe,ve){const Tt=i.get(Oe);if(Oe.isVideoTexture&&function cr(Oe){const ve=o.render.frame;_.get(Oe)!==ve&&(_.set(Oe,ve),Oe.update())}(Oe),!1===Oe.isRenderTargetTexture&&Oe.version>0&&Tt.__version!==Oe.version){const mn=Oe.image;if(null===mn)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==mn.complete)return void cn(Tt,Oe,ve);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+ve),t.bindTexture(3553,Tt.__webglTexture)}const ut={[U0]:10497,[Hl]:33071,1002:33648},Bt={[k1]:9728,1004:9984,1005:9986,[qa]:9729,1007:9985,[Vd]:9987};function xt(Oe,ve,Tt){if(Tt?(n.texParameteri(Oe,10242,ut[ve.wrapS]),n.texParameteri(Oe,10243,ut[ve.wrapT]),(32879===Oe||35866===Oe)&&n.texParameteri(Oe,32882,ut[ve.wrapR]),n.texParameteri(Oe,10240,Bt[ve.magFilter]),n.texParameteri(Oe,10241,Bt[ve.minFilter])):(n.texParameteri(Oe,10242,33071),n.texParameteri(Oe,10243,33071),(32879===Oe||35866===Oe)&&n.texParameteri(Oe,32882,33071),(ve.wrapS!==Hl||ve.wrapT!==Hl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Oe,10240,W(ve.magFilter)),n.texParameteri(Oe,10241,W(ve.minFilter)),ve.minFilter!==k1&&ve.minFilter!==qa&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const mn=e.get("EXT_texture_filter_anisotropic");if(ve.type===O4&&!1===e.has("OES_texture_float_linear")||!1===a&&ve.type===G0&&!1===e.has("OES_texture_half_float_linear"))return;(ve.anisotropy>1||i.get(ve).__currentAnisotropy)&&(n.texParameterf(Oe,mn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ve.anisotropy,r.getMaxAnisotropy())),i.get(ve).__currentAnisotropy=ve.anisotropy)}}function Zt(Oe,ve){let Tt=!1;void 0===Oe.__webglInit&&(Oe.__webglInit=!0,ve.addEventListener("dispose",ie));const mn=ve.source;let bn=w.get(mn);void 0===bn&&(bn={},w.set(mn,bn));const In=function de(Oe){const ve=[];return ve.push(Oe.wrapS),ve.push(Oe.wrapT),ve.push(Oe.magFilter),ve.push(Oe.minFilter),ve.push(Oe.anisotropy),ve.push(Oe.internalFormat),ve.push(Oe.format),ve.push(Oe.type),ve.push(Oe.generateMipmaps),ve.push(Oe.premultiplyAlpha),ve.push(Oe.flipY),ve.push(Oe.unpackAlignment),ve.push(Oe.encoding),ve.join()}(ve);if(In!==Oe.__cacheKey){void 0===bn[In]&&(bn[In]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Tt=!0),bn[In].usedTimes++;const Ci=bn[Oe.__cacheKey];void 0!==Ci&&(bn[Oe.__cacheKey].usedTimes--,0===Ci.usedTimes&&Q(ve)),Oe.__cacheKey=In,Oe.__webglTexture=bn[In].texture}return Tt}function cn(Oe,ve,Tt){let mn=3553;ve.isDataArrayTexture&&(mn=35866),ve.isData3DTexture&&(mn=32879);const bn=Zt(Oe,ve),In=ve.source;if(t.activeTexture(33984+Tt),t.bindTexture(mn,Oe.__webglTexture),In.version!==In.__currentVersion||!0===bn){n.pixelStorei(37440,ve.flipY),n.pixelStorei(37441,ve.premultiplyAlpha),n.pixelStorei(3317,ve.unpackAlignment),n.pixelStorei(37443,0);const Ci=function I(Oe){return!a&&(Oe.wrapS!==Hl||Oe.wrapT!==Hl||Oe.minFilter!==k1&&Oe.minFilter!==qa)}(ve)&&!1===T(ve.image);let De=M(ve.image,Ci,!1,u);De=hs(ve,De);const Jt=T(De)||a,un=s.convert(ve.format,ve.encoding);let tr,Wn=s.convert(ve.type),jn=R(ve.internalFormat,un,Wn,ve.encoding,ve.isVideoTexture);xt(mn,ve,Jt);const Pr=ve.mipmaps,Go=a&&!0!==ve.isVideoTexture,at=void 0===In.__currentVersion||!0===bn,Rn=k(ve,De,Jt);if(ve.isDepthTexture)jn=6402,a?jn=ve.type===O4?36012:ve.type===Z8?33190:ve.type===J8?35056:33189:ve.type===O4&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ve.format===e5&&6402===jn&&1012!==ve.type&&ve.type!==Z8&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ve.type=Z8,Wn=s.convert(ve.type)),ve.format===t5&&6402===jn&&(jn=34041,ve.type!==J8&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ve.type=J8,Wn=s.convert(ve.type))),at&&(Go?t.texStorage2D(3553,1,jn,De.width,De.height):t.texImage2D(3553,0,jn,De.width,De.height,0,un,Wn,null));else if(ve.isDataTexture)if(Pr.length>0&&Jt){Go&&at&&t.texStorage2D(3553,Rn,jn,Pr[0].width,Pr[0].height);for(let zt=0,Nn=Pr.length;zt<Nn;zt++)tr=Pr[zt],Go?t.texSubImage2D(3553,zt,0,0,tr.width,tr.height,un,Wn,tr.data):t.texImage2D(3553,zt,jn,tr.width,tr.height,0,un,Wn,tr.data);ve.generateMipmaps=!1}else Go?(at&&t.texStorage2D(3553,Rn,jn,De.width,De.height),t.texSubImage2D(3553,0,0,0,De.width,De.height,un,Wn,De.data)):t.texImage2D(3553,0,jn,De.width,De.height,0,un,Wn,De.data);else if(ve.isCompressedTexture){Go&&at&&t.texStorage2D(3553,Rn,jn,Pr[0].width,Pr[0].height);for(let zt=0,Nn=Pr.length;zt<Nn;zt++)tr=Pr[zt],ve.format!==Pu?null!==un?Go?t.compressedTexSubImage2D(3553,zt,0,0,tr.width,tr.height,un,tr.data):t.compressedTexImage2D(3553,zt,jn,tr.width,tr.height,0,tr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Go?t.texSubImage2D(3553,zt,0,0,tr.width,tr.height,un,Wn,tr.data):t.texImage2D(3553,zt,jn,tr.width,tr.height,0,un,Wn,tr.data)}else if(ve.isDataArrayTexture)Go?(at&&t.texStorage3D(35866,Rn,jn,De.width,De.height,De.depth),t.texSubImage3D(35866,0,0,0,0,De.width,De.height,De.depth,un,Wn,De.data)):t.texImage3D(35866,0,jn,De.width,De.height,De.depth,0,un,Wn,De.data);else if(ve.isData3DTexture)Go?(at&&t.texStorage3D(32879,Rn,jn,De.width,De.height,De.depth),t.texSubImage3D(32879,0,0,0,0,De.width,De.height,De.depth,un,Wn,De.data)):t.texImage3D(32879,0,jn,De.width,De.height,De.depth,0,un,Wn,De.data);else if(ve.isFramebufferTexture){if(at)if(Go)t.texStorage2D(3553,Rn,jn,De.width,De.height);else{let zt=De.width,Nn=De.height;for(let Hn=0;Hn<Rn;Hn++)t.texImage2D(3553,Hn,jn,zt,Nn,0,un,Wn,null),zt>>=1,Nn>>=1}}else if(Pr.length>0&&Jt){Go&&at&&t.texStorage2D(3553,Rn,jn,Pr[0].width,Pr[0].height);for(let zt=0,Nn=Pr.length;zt<Nn;zt++)tr=Pr[zt],Go?t.texSubImage2D(3553,zt,0,0,un,Wn,tr):t.texImage2D(3553,zt,jn,un,Wn,tr);ve.generateMipmaps=!1}else Go?(at&&t.texStorage2D(3553,Rn,jn,De.width,De.height),t.texSubImage2D(3553,0,0,0,un,Wn,De)):t.texImage2D(3553,0,jn,un,Wn,De);F(ve,Jt)&&P(mn),In.__currentVersion=In.version,ve.onUpdate&&ve.onUpdate(ve)}Oe.__version=ve.version}function ln(Oe,ve,Tt,mn,bn){const In=s.convert(Tt.format,Tt.encoding),Ci=s.convert(Tt.type),De=R(Tt.internalFormat,In,Ci,Tt.encoding);i.get(ve).__hasExternalTextures||(32879===bn||35866===bn?t.texImage3D(bn,0,De,ve.width,ve.height,ve.depth,0,In,Ci,null):t.texImage2D(bn,0,De,ve.width,ve.height,0,In,Ci,null)),t.bindFramebuffer(36160,Oe),di(ve)?p.framebufferTexture2DMultisampleEXT(36160,mn,bn,i.get(Tt).__webglTexture,0,Un(ve)):n.framebufferTexture2D(36160,mn,bn,i.get(Tt).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ti(Oe,ve,Tt){if(n.bindRenderbuffer(36161,Oe),ve.depthBuffer&&!ve.stencilBuffer){let mn=33189;if(Tt||di(ve)){const bn=ve.depthTexture;bn&&bn.isDepthTexture&&(bn.type===O4?mn=36012:bn.type===Z8&&(mn=33190));const In=Un(ve);di(ve)?p.renderbufferStorageMultisampleEXT(36161,In,mn,ve.width,ve.height):n.renderbufferStorageMultisample(36161,In,mn,ve.width,ve.height)}else n.renderbufferStorage(36161,mn,ve.width,ve.height);n.framebufferRenderbuffer(36160,36096,36161,Oe)}else if(ve.depthBuffer&&ve.stencilBuffer){const mn=Un(ve);Tt&&!1===di(ve)?n.renderbufferStorageMultisample(36161,mn,35056,ve.width,ve.height):di(ve)?p.renderbufferStorageMultisampleEXT(36161,mn,35056,ve.width,ve.height):n.renderbufferStorage(36161,34041,ve.width,ve.height),n.framebufferRenderbuffer(36160,33306,36161,Oe)}else{const mn=!0===ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture];for(let bn=0;bn<mn.length;bn++){const In=mn[bn],Ci=s.convert(In.format,In.encoding),De=s.convert(In.type),Jt=R(In.internalFormat,Ci,De,In.encoding),un=Un(ve);Tt&&!1===di(ve)?n.renderbufferStorageMultisample(36161,un,Jt,ve.width,ve.height):di(ve)?p.renderbufferStorageMultisampleEXT(36161,un,Jt,ve.width,ve.height):n.renderbufferStorage(36161,Jt,ve.width,ve.height)}}n.bindRenderbuffer(36161,null)}function Ft(Oe){const ve=i.get(Oe),Tt=!0===Oe.isWebGLCubeRenderTarget;if(Oe.depthTexture&&!ve.__autoAllocateDepthBuffer){if(Tt)throw new Error("target.depthTexture not supported in Cube render targets");!function Vt(Oe,ve){if(ve&&ve.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Oe),!ve.depthTexture||!ve.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ve.depthTexture).__webglTexture||ve.depthTexture.image.width!==ve.width||ve.depthTexture.image.height!==ve.height)&&(ve.depthTexture.image.width=ve.width,ve.depthTexture.image.height=ve.height,ve.depthTexture.needsUpdate=!0),ke(ve.depthTexture,0);const mn=i.get(ve.depthTexture).__webglTexture,bn=Un(ve);if(ve.depthTexture.format===e5)di(ve)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,mn,0,bn):n.framebufferTexture2D(36160,36096,3553,mn,0);else{if(ve.depthTexture.format!==t5)throw new Error("Unknown depthTexture format");di(ve)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,mn,0,bn):n.framebufferTexture2D(36160,33306,3553,mn,0)}}(ve.__webglFramebuffer,Oe)}else if(Tt){ve.__webglDepthbuffer=[];for(let mn=0;mn<6;mn++)t.bindFramebuffer(36160,ve.__webglFramebuffer[mn]),ve.__webglDepthbuffer[mn]=n.createRenderbuffer(),Ti(ve.__webglDepthbuffer[mn],Oe,!1)}else t.bindFramebuffer(36160,ve.__webglFramebuffer),ve.__webglDepthbuffer=n.createRenderbuffer(),Ti(ve.__webglDepthbuffer,Oe,!1);t.bindFramebuffer(36160,null)}function Un(Oe){return Math.min(f,Oe.samples)}function di(Oe){const ve=i.get(Oe);return a&&Oe.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==ve.__useRenderToTexture}function hs(Oe,ve){const Tt=Oe.encoding,mn=Oe.format,bn=Oe.type;return!0===Oe.isCompressedTexture||!0===Oe.isVideoTexture||1035===Oe.format||Tt!==Jh&&(Tt===No?!1===a?!0===e.has("EXT_sRGB")&&mn===Pu?(Oe.format=1035,Oe.minFilter=qa,Oe.generateMipmaps=!1):ve=$J.sRGBToLinear(ve):(mn!==Pu||bn!==Y8)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Tt)),ve}this.allocateTextureUnit=function fe(){const Oe=K;return Oe>=c&&console.warn("THREE.WebGLTextures: Trying to use "+Oe+" texture units while this GPU supports only "+c),K+=1,Oe},this.resetTextureUnits=function ae(){K=0},this.setTexture2D=ke,this.setTexture2DArray=function et(Oe,ve){const Tt=i.get(Oe);Oe.version>0&&Tt.__version!==Oe.version?cn(Tt,Oe,ve):(t.activeTexture(33984+ve),t.bindTexture(35866,Tt.__webglTexture))},this.setTexture3D=function Fe(Oe,ve){const Tt=i.get(Oe);Oe.version>0&&Tt.__version!==Oe.version?cn(Tt,Oe,ve):(t.activeTexture(33984+ve),t.bindTexture(32879,Tt.__webglTexture))},this.setTextureCube=function wt(Oe,ve){const Tt=i.get(Oe);Oe.version>0&&Tt.__version!==Oe.version?function Sn(Oe,ve,Tt){if(6!==ve.image.length)return;const mn=Zt(Oe,ve),bn=ve.source;if(t.activeTexture(33984+Tt),t.bindTexture(34067,Oe.__webglTexture),bn.version!==bn.__currentVersion||!0===mn){n.pixelStorei(37440,ve.flipY),n.pixelStorei(37441,ve.premultiplyAlpha),n.pixelStorei(3317,ve.unpackAlignment),n.pixelStorei(37443,0);const In=ve.isCompressedTexture||ve.image[0].isCompressedTexture,Ci=ve.image[0]&&ve.image[0].isDataTexture,De=[];for(let zt=0;zt<6;zt++)De[zt]=In||Ci?Ci?ve.image[zt].image:ve.image[zt]:M(ve.image[zt],!1,!0,l),De[zt]=hs(ve,De[zt]);const Jt=De[0],un=T(Jt)||a,Wn=s.convert(ve.format,ve.encoding),jn=s.convert(ve.type),tr=R(ve.internalFormat,Wn,jn,ve.encoding),Pr=a&&!0!==ve.isVideoTexture,Go=void 0===bn.__currentVersion||!0===mn;let Rn,at=k(ve,Jt,un);if(xt(34067,ve,un),In){Pr&&Go&&t.texStorage2D(34067,at,tr,Jt.width,Jt.height);for(let zt=0;zt<6;zt++){Rn=De[zt].mipmaps;for(let Nn=0;Nn<Rn.length;Nn++){const Hn=Rn[Nn];ve.format!==Pu?null!==Wn?Pr?t.compressedTexSubImage2D(34069+zt,Nn,0,0,Hn.width,Hn.height,Wn,Hn.data):t.compressedTexImage2D(34069+zt,Nn,tr,Hn.width,Hn.height,0,Hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pr?t.texSubImage2D(34069+zt,Nn,0,0,Hn.width,Hn.height,Wn,jn,Hn.data):t.texImage2D(34069+zt,Nn,tr,Hn.width,Hn.height,0,Wn,jn,Hn.data)}}}else{Rn=ve.mipmaps,Pr&&Go&&(Rn.length>0&&at++,t.texStorage2D(34067,at,tr,De[0].width,De[0].height));for(let zt=0;zt<6;zt++)if(Ci){Pr?t.texSubImage2D(34069+zt,0,0,0,De[zt].width,De[zt].height,Wn,jn,De[zt].data):t.texImage2D(34069+zt,0,tr,De[zt].width,De[zt].height,0,Wn,jn,De[zt].data);for(let Nn=0;Nn<Rn.length;Nn++){const _s=Rn[Nn].image[zt].image;Pr?t.texSubImage2D(34069+zt,Nn+1,0,0,_s.width,_s.height,Wn,jn,_s.data):t.texImage2D(34069+zt,Nn+1,tr,_s.width,_s.height,0,Wn,jn,_s.data)}}else{Pr?t.texSubImage2D(34069+zt,0,0,0,Wn,jn,De[zt]):t.texImage2D(34069+zt,0,tr,Wn,jn,De[zt]);for(let Nn=0;Nn<Rn.length;Nn++){const Hn=Rn[Nn];Pr?t.texSubImage2D(34069+zt,Nn+1,0,0,Wn,jn,Hn.image[zt]):t.texImage2D(34069+zt,Nn+1,tr,Wn,jn,Hn.image[zt])}}}F(ve,un)&&P(34067),bn.__currentVersion=bn.version,ve.onUpdate&&ve.onUpdate(ve)}Oe.__version=ve.version}(Tt,Oe,ve):(t.activeTexture(33984+ve),t.bindTexture(34067,Tt.__webglTexture))},this.rebindTextures=function vn(Oe,ve,Tt){const mn=i.get(Oe);void 0!==ve&&ln(mn.__webglFramebuffer,Oe,Oe.texture,36064,3553),void 0!==Tt&&Ft(Oe)},this.setupRenderTarget=function qn(Oe){const ve=Oe.texture,Tt=i.get(Oe),mn=i.get(ve);Oe.addEventListener("dispose",Te),!0!==Oe.isWebGLMultipleRenderTargets&&(void 0===mn.__webglTexture&&(mn.__webglTexture=n.createTexture()),mn.__version=ve.version,o.memory.textures++);const bn=!0===Oe.isWebGLCubeRenderTarget,In=!0===Oe.isWebGLMultipleRenderTargets,Ci=T(Oe)||a;if(bn){Tt.__webglFramebuffer=[];for(let De=0;De<6;De++)Tt.__webglFramebuffer[De]=n.createFramebuffer()}else{if(Tt.__webglFramebuffer=n.createFramebuffer(),In)if(r.drawBuffers){const De=Oe.texture;for(let Jt=0,un=De.length;Jt<un;Jt++){const Wn=i.get(De[Jt]);void 0===Wn.__webglTexture&&(Wn.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Oe.samples>0&&!1===di(Oe)){const De=In?ve:[ve];Tt.__webglMultisampledFramebuffer=n.createFramebuffer(),Tt.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Tt.__webglMultisampledFramebuffer);for(let Jt=0;Jt<De.length;Jt++){const un=De[Jt];Tt.__webglColorRenderbuffer[Jt]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Tt.__webglColorRenderbuffer[Jt]);const Wn=s.convert(un.format,un.encoding),jn=s.convert(un.type),tr=R(un.internalFormat,Wn,jn,un.encoding),Pr=Un(Oe);n.renderbufferStorageMultisample(36161,Pr,tr,Oe.width,Oe.height),n.framebufferRenderbuffer(36160,36064+Jt,36161,Tt.__webglColorRenderbuffer[Jt])}n.bindRenderbuffer(36161,null),Oe.depthBuffer&&(Tt.__webglDepthRenderbuffer=n.createRenderbuffer(),Ti(Tt.__webglDepthRenderbuffer,Oe,!0)),t.bindFramebuffer(36160,null)}}if(bn){t.bindTexture(34067,mn.__webglTexture),xt(34067,ve,Ci);for(let De=0;De<6;De++)ln(Tt.__webglFramebuffer[De],Oe,ve,36064,34069+De);F(ve,Ci)&&P(34067),t.unbindTexture()}else if(In){const De=Oe.texture;for(let Jt=0,un=De.length;Jt<un;Jt++){const Wn=De[Jt],jn=i.get(Wn);t.bindTexture(3553,jn.__webglTexture),xt(3553,Wn,Ci),ln(Tt.__webglFramebuffer,Oe,Wn,36064+Jt,3553),F(Wn,Ci)&&P(3553)}t.unbindTexture()}else{let De=3553;(Oe.isWebGL3DRenderTarget||Oe.isWebGLArrayRenderTarget)&&(a?De=Oe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(De,mn.__webglTexture),xt(De,ve,Ci),ln(Tt.__webglFramebuffer,Oe,ve,36064,De),F(ve,Ci)&&P(De),t.unbindTexture()}Oe.depthBuffer&&Ft(Oe)},this.updateRenderTargetMipmap=function En(Oe){const ve=T(Oe)||a,Tt=!0===Oe.isWebGLMultipleRenderTargets?Oe.texture:[Oe.texture];for(let mn=0,bn=Tt.length;mn<bn;mn++){const In=Tt[mn];if(F(In,ve)){const Ci=Oe.isWebGLCubeRenderTarget?34067:3553,De=i.get(In).__webglTexture;t.bindTexture(Ci,De),P(Ci),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Cn(Oe){if(a&&Oe.samples>0&&!1===di(Oe)){const ve=Oe.isWebGLMultipleRenderTargets?Oe.texture:[Oe.texture],Tt=Oe.width,mn=Oe.height;let bn=16384;const In=[],Ci=Oe.stencilBuffer?33306:36096,De=i.get(Oe),Jt=!0===Oe.isWebGLMultipleRenderTargets;if(Jt)for(let un=0;un<ve.length;un++)t.bindFramebuffer(36160,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+un,36161,null),t.bindFramebuffer(36160,De.__webglFramebuffer),n.framebufferTexture2D(36009,36064+un,3553,null,0);t.bindFramebuffer(36008,De.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,De.__webglFramebuffer);for(let un=0;un<ve.length;un++){In.push(36064+un),Oe.depthBuffer&&In.push(Ci);const Wn=void 0!==De.__ignoreDepthValues&&De.__ignoreDepthValues;if(!1===Wn&&(Oe.depthBuffer&&(bn|=256),Oe.stencilBuffer&&(bn|=1024)),Jt&&n.framebufferRenderbuffer(36008,36064,36161,De.__webglColorRenderbuffer[un]),!0===Wn&&(n.invalidateFramebuffer(36008,[Ci]),n.invalidateFramebuffer(36009,[Ci])),Jt){const jn=i.get(ve[un]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,jn,0)}n.blitFramebuffer(0,0,Tt,mn,0,0,Tt,mn,bn,9728),g&&n.invalidateFramebuffer(36008,In)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Jt)for(let un=0;un<ve.length;un++){t.bindFramebuffer(36160,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+un,36161,De.__webglColorRenderbuffer[un]);const Wn=i.get(ve[un]).__webglTexture;t.bindFramebuffer(36160,De.__webglFramebuffer),n.framebufferTexture2D(36009,36064+un,3553,Wn,0)}t.bindFramebuffer(36009,De.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Ft,this.setupFrameBufferTexture=ln,this.useMultisampledRTT=di}function HHe(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Y8)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===Z8)return 5125;if(s===O4)return 5126;if(s===G0)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Pu)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===e5)return 6402;if(s===t5)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===No){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===No?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===No?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===No?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===J8?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class zHe extends Wc{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class To extends R2{constructor(){super(),this.isGroup=!0,this.type="Group"}}const OHe={type:"move"};class rk{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new To,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new To,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ae),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new To,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ae),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const y of e.hand.values()){const w=t.getJointPose(y,i);if(void 0===l.joints[y.jointName]){const x=new To;x.matrixAutoUpdate=!1,x.visible=!1,l.joints[y.jointName]=x,l.add(x)}const C=l.joints[y.jointName];null!==w&&(C.matrix.fromArray(w.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.jointRadius=w.radius),C.visible=null!==w}const p=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),g=.02,_=.005;l.inputState.pinching&&p>g+_?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&p<=g-_&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(OHe)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}}class Pee extends N4{constructor(e,t,i,r,s,o,a,c,l,u){if((u=void 0!==u?u:e5)!==e5&&u!==t5)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===e5&&(i=Z8),void 0===i&&u===t5&&(i=J8),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:k1,this.minFilter=void 0!==c?c:k1,this.flipY=!1,this.generateMipmaps=!1}}class NHe extends r5{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=null,l=null,u=null,f=null,p=null,g=null;const _=t.getContextAttributes();let y=null,w=null;const C=[],x=[],M=new Wc;M.layers.enable(1),M.viewport=new Eo;const T=new Wc;T.layers.enable(2),T.viewport=new Eo;const I=[M,T],F=new zHe;F.layers.enable(1),F.layers.enable(2);let P=null,R=null;function k(de){const ke=x.indexOf(de.inputSource);if(-1===ke)return;const et=C[ke];void 0!==et&&et.dispatchEvent({type:de.type,data:de.inputSource})}function W(){r.removeEventListener("select",k),r.removeEventListener("selectstart",k),r.removeEventListener("selectend",k),r.removeEventListener("squeeze",k),r.removeEventListener("squeezestart",k),r.removeEventListener("squeezeend",k),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",ie);for(let de=0;de<C.length;de++){const ke=x[de];null!==ke&&(x[de]=null,C[de].disconnect(ke))}P=null,R=null,e.setRenderTarget(y),p=null,f=null,u=null,r=null,w=null,fe.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function ie(de){for(let ke=0;ke<de.removed.length;ke++){const et=de.removed[ke],Fe=x.indexOf(et);Fe>=0&&(x[Fe]=null,C[Fe].dispatchEvent({type:"disconnected",data:et}))}for(let ke=0;ke<de.added.length;ke++){const et=de.added[ke];let Fe=x.indexOf(et);if(-1===Fe){for(let ut=0;ut<C.length;ut++){if(ut>=x.length){x.push(et),Fe=ut;break}if(null===x[ut]){x[ut]=et,Fe=ut;break}}if(-1===Fe)break}const wt=C[Fe];wt&&wt.dispatchEvent({type:"connected",data:et})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let ke=C[de];return void 0===ke&&(ke=new rk,C[de]=ke),ke.getTargetRaySpace()},this.getControllerGrip=function(de){let ke=C[de];return void 0===ke&&(ke=new rk,C[de]=ke),ke.getGripSpace()},this.getHand=function(de){let ke=C[de];return void 0===ke&&(ke=new rk,C[de]=ke),ke.getHandSpace()},this.setFramebufferScaleFactor=function(de){s=de,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){a=de,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(de){c=de},this.getBaseLayer=function(){return null!==f?f:p},this.getBinding=function(){return u},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=function(){var de=Da(function*(ke){if(r=ke,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",k),r.addEventListener("selectstart",k),r.addEventListener("selectend",k),r.addEventListener("squeeze",k),r.addEventListener("squeezestart",k),r.addEventListener("squeezeend",k),r.addEventListener("end",W),r.addEventListener("inputsourceschange",ie),!0!==_.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)p=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||_.antialias,alpha:_.alpha,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:p}),w=new V4(p.framebufferWidth,p.framebufferHeight,{format:Pu,type:Y8,encoding:e.outputEncoding,stencilBuffer:_.stencil});else{let et=null,Fe=null,wt=null;_.depth&&(wt=_.stencil?35056:33190,et=_.stencil?t5:e5,Fe=_.stencil?J8:Z8);const ut={colorFormat:32856,depthFormat:wt,scaleFactor:s};u=new XRWebGLBinding(r,t),f=u.createProjectionLayer(ut),r.updateRenderState({layers:[f]}),w=new V4(f.textureWidth,f.textureHeight,{format:Pu,type:Y8,depthTexture:new Pee(f.textureWidth,f.textureHeight,Fe,void 0,void 0,void 0,void 0,void 0,void 0,et),stencilBuffer:_.stencil,encoding:e.outputEncoding,samples:_.antialias?4:0}),e.properties.get(w).__ignoreDepthValues=f.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),c=null,o=yield r.requestReferenceSpace(a),fe.setContext(r),fe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ke){return de.apply(this,arguments)}}();const Te=new Ae,me=new Ae;function he(de,ke){null===ke?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(ke.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(null===r)return;F.near=T.near=M.near=de.near,F.far=T.far=M.far=de.far,(P!==F.near||R!==F.far)&&(r.updateRenderState({depthNear:F.near,depthFar:F.far}),P=F.near,R=F.far);const ke=de.parent,et=F.cameras;he(F,ke);for(let wt=0;wt<et.length;wt++)he(et[wt],ke);F.matrixWorld.decompose(F.position,F.quaternion,F.scale),de.matrix.copy(F.matrix),de.matrix.decompose(de.position,de.quaternion,de.scale);const Fe=de.children;for(let wt=0,ut=Fe.length;wt<ut;wt++)Fe[wt].updateMatrixWorld(!0);2===et.length?function Q(de,ke,et){Te.setFromMatrixPosition(ke.matrixWorld),me.setFromMatrixPosition(et.matrixWorld);const Fe=Te.distanceTo(me),wt=ke.projectionMatrix.elements,ut=et.projectionMatrix.elements,Bt=wt[14]/(wt[10]-1),xt=wt[14]/(wt[10]+1),Zt=(wt[9]+1)/wt[5],cn=(wt[9]-1)/wt[5],Sn=(wt[8]-1)/wt[0],ln=(ut[8]+1)/ut[0],Ti=Bt*Sn,Vt=Bt*ln,Ft=Fe/(-Sn+ln),vn=Ft*-Sn;ke.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(vn),de.translateZ(Ft),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert();const qn=Bt+Ft,En=xt+Ft;de.projectionMatrix.makePerspective(Ti-vn,Vt+(Fe-vn),Zt*xt/En*qn,cn*xt/En*qn,qn,En)}(F,M,T):F.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return F},this.getFoveation=function(){return null!==f?f.fixedFoveation:null!==p?p.fixedFoveation:void 0},this.setFoveation=function(de){null!==f&&(f.fixedFoveation=de),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=de)};let K=null;const fe=new cee;fe.setAnimationLoop(function ae(de,ke){if(l=ke.getViewerPose(c||o),g=ke,null!==l){const et=l.views;null!==p&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let Fe=!1;et.length!==F.cameras.length&&(F.cameras.length=0,Fe=!0);for(let wt=0;wt<et.length;wt++){const ut=et[wt];let Bt=null;if(null!==p)Bt=p.getViewport(ut);else{const Zt=u.getViewSubImage(f,ut);Bt=Zt.viewport,0===wt&&(e.setRenderTargetTextures(w,Zt.colorTexture,f.ignoreDepthValues?void 0:Zt.depthStencilTexture),e.setRenderTarget(w))}let xt=I[wt];void 0===xt&&(xt=new Wc,xt.layers.enable(wt),xt.viewport=new Eo,I[wt]=xt),xt.matrix.fromArray(ut.transform.matrix),xt.projectionMatrix.fromArray(ut.projectionMatrix),xt.viewport.set(Bt.x,Bt.y,Bt.width,Bt.height),0===wt&&F.matrix.copy(xt.matrix),!0===Fe&&F.cameras.push(xt)}}for(let et=0;et<C.length;et++){const Fe=x[et],wt=C[et];null!==Fe&&void 0!==wt&&wt.update(Fe,ke,c||o)}K&&K(de,ke),g=null}),this.setAnimationLoop=function(de){K=de},this.dispose=function(){}}}function VHe(n,e){function r(y,w){y.opacity.value=w.opacity,w.color&&y.diffuse.value.copy(w.color),w.emissive&&y.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.bumpMap&&(y.bumpMap.value=w.bumpMap,y.bumpScale.value=w.bumpScale,1===w.side&&(y.bumpScale.value*=-1)),w.displacementMap&&(y.displacementMap.value=w.displacementMap,y.displacementScale.value=w.displacementScale,y.displacementBias.value=w.displacementBias),w.emissiveMap&&(y.emissiveMap.value=w.emissiveMap),w.normalMap&&(y.normalMap.value=w.normalMap,y.normalScale.value.copy(w.normalScale),1===w.side&&y.normalScale.value.negate()),w.specularMap&&(y.specularMap.value=w.specularMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);const C=e.get(w).envMap;if(C&&(y.envMap.value=C,y.flipEnvMap.value=C.isCubeTexture&&!1===C.isRenderTargetTexture?-1:1,y.reflectivity.value=w.reflectivity,y.ior.value=w.ior,y.refractionRatio.value=w.refractionRatio),w.lightMap){y.lightMap.value=w.lightMap;const T=!0!==n.physicallyCorrectLights?Math.PI:1;y.lightMapIntensity.value=w.lightMapIntensity*T}let x,M;w.aoMap&&(y.aoMap.value=w.aoMap,y.aoMapIntensity.value=w.aoMapIntensity),w.map?x=w.map:w.specularMap?x=w.specularMap:w.displacementMap?x=w.displacementMap:w.normalMap?x=w.normalMap:w.bumpMap?x=w.bumpMap:w.roughnessMap?x=w.roughnessMap:w.metalnessMap?x=w.metalnessMap:w.alphaMap?x=w.alphaMap:w.emissiveMap?x=w.emissiveMap:w.clearcoatMap?x=w.clearcoatMap:w.clearcoatNormalMap?x=w.clearcoatNormalMap:w.clearcoatRoughnessMap?x=w.clearcoatRoughnessMap:w.iridescenceMap?x=w.iridescenceMap:w.iridescenceThicknessMap?x=w.iridescenceThicknessMap:w.specularIntensityMap?x=w.specularIntensityMap:w.specularColorMap?x=w.specularColorMap:w.transmissionMap?x=w.transmissionMap:w.thicknessMap?x=w.thicknessMap:w.sheenColorMap?x=w.sheenColorMap:w.sheenRoughnessMap&&(x=w.sheenRoughnessMap),void 0!==x&&(x.isWebGLRenderTarget&&(x=x.texture),!0===x.matrixAutoUpdate&&x.updateMatrix(),y.uvTransform.value.copy(x.matrix)),w.aoMap?M=w.aoMap:w.lightMap&&(M=w.lightMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uv2Transform.value.copy(M.matrix))}return{refreshFogUniforms:function t(y,w){y.fogColor.value.copy(w.color),w.isFog?(y.fogNear.value=w.near,y.fogFar.value=w.far):w.isFogExp2&&(y.fogDensity.value=w.density)},refreshMaterialUniforms:function i(y,w,C,x,M){w.isMeshBasicMaterial||w.isMeshLambertMaterial?r(y,w):w.isMeshToonMaterial?(r(y,w),function u(y,w){w.gradientMap&&(y.gradientMap.value=w.gradientMap)}(y,w)):w.isMeshPhongMaterial?(r(y,w),function l(y,w){y.specular.value.copy(w.specular),y.shininess.value=Math.max(w.shininess,1e-4)}(y,w)):w.isMeshStandardMaterial?(r(y,w),function f(y,w){y.roughness.value=w.roughness,y.metalness.value=w.metalness,w.roughnessMap&&(y.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(y.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(y.envMapIntensity.value=w.envMapIntensity)}(y,w),w.isMeshPhysicalMaterial&&function p(y,w,C){y.ior.value=w.ior,w.sheen>0&&(y.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),y.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(y.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(y.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(y.clearcoat.value=w.clearcoat,y.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(y.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),y.clearcoatNormalMap.value=w.clearcoatNormalMap,1===w.side&&y.clearcoatNormalScale.value.negate())),w.iridescence>0&&(y.iridescence.value=w.iridescence,y.iridescenceIOR.value=w.iridescenceIOR,y.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(y.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(y.transmission.value=w.transmission,y.transmissionSamplerMap.value=C.texture,y.transmissionSamplerSize.value.set(C.width,C.height),w.transmissionMap&&(y.transmissionMap.value=w.transmissionMap),y.thickness.value=w.thickness,w.thicknessMap&&(y.thicknessMap.value=w.thicknessMap),y.attenuationDistance.value=w.attenuationDistance,y.attenuationColor.value.copy(w.attenuationColor)),y.specularIntensity.value=w.specularIntensity,y.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(y.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(y.specularColorMap.value=w.specularColorMap)}(y,w,M)):w.isMeshMatcapMaterial?(r(y,w),function g(y,w){w.matcap&&(y.matcap.value=w.matcap)}(y,w)):w.isMeshDepthMaterial?r(y,w):w.isMeshDistanceMaterial?(r(y,w),function _(y,w){y.referencePosition.value.copy(w.referencePosition),y.nearDistance.value=w.nearDistance,y.farDistance.value=w.farDistance}(y,w)):w.isMeshNormalMaterial?r(y,w):w.isLineBasicMaterial?(function s(y,w){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity}(y,w),w.isLineDashedMaterial&&function o(y,w){y.dashSize.value=w.dashSize,y.totalSize.value=w.dashSize+w.gapSize,y.scale.value=w.scale}(y,w)):w.isPointsMaterial?function a(y,w,C,x){let M;y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.size.value=w.size*C,y.scale.value=.5*x,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest),w.map?M=w.map:w.alphaMap&&(M=w.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uvTransform.value.copy(M.matrix))}(y,w,C,x):w.isSpriteMaterial?function c(y,w){let C;y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.rotation.value=w.rotation,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest),w.map?C=w.map:w.alphaMap&&(C=w.alphaMap),void 0!==C&&(!0===C.matrixAutoUpdate&&C.updateMatrix(),y.uvTransform.value.copy(C.matrix))}(y,w):w.isShadowMaterial?(y.color.value.copy(w.color),y.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}}}function UHe(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function g(x,M,T){const I=x.value;if(void 0===T[M])return T[M]="number"==typeof I?I:I.clone(),!0;if("number"==typeof I){if(T[M]!==I)return T[M]=I,!0}else{const F=T[M];if(!1===F.equals(I))return F.copy(I),!0}return!1}function y(x){const M=x.value,T={boundary:0,storage:0};return"number"==typeof M?(T.boundary=4,T.storage=4):M.isVector2?(T.boundary=8,T.storage=8):M.isVector3||M.isColor?(T.boundary=16,T.storage=12):M.isVector4?(T.boundary=16,T.storage=16):M.isMatrix3?(T.boundary=48,T.storage=48):M.isMatrix4?(T.boundary=64,T.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),T}function w(x){const M=x.target;M.removeEventListener("dispose",w);const T=o.indexOf(M.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}return{bind:function c(x,M){i.uniformBlockBinding(x,M.program)},update:function l(x,M){let T=r[x.id];void 0===T&&(function _(x){const M=x.uniforms;let T=0;let F=0;for(let P=0,R=M.length;P<R;P++){const k=M[P],W=y(k);if(k.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),k.__offset=T,P>0){F=T%16;const ie=16-F;0!==F&&ie-W.boundary<0&&(T+=16-F,k.__offset=T)}T+=W.storage}F=T%16,F>0&&(T+=16-F),x.__size=T,x.__cache={}}(x),T=function u(x){const M=function f(){for(let x=0;x<a;x++)if(-1===o.indexOf(x))return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();x.__bindingPointIndex=M;const T=n.createBuffer(),I=x.__size,F=x.usage;return n.bindBuffer(35345,T),n.bufferData(35345,I,F),n.bindBuffer(35345,null),n.bindBufferBase(35345,M,T),T}(x),r[x.id]=T,x.addEventListener("dispose",w)),i.updateUBOMapping(x,M.program);const F=e.render.frame;s[x.id]!==F&&(function p(x){const T=x.uniforms,I=x.__cache;n.bindBuffer(35345,r[x.id]);for(let F=0,P=T.length;F<P;F++){const R=T[F];if(!0===g(R,F,I)){const k=R.value,W=R.__offset;"number"==typeof k?(R.__data[0]=k,n.bufferSubData(35345,W,R.__data)):(R.value.isMatrix3?(R.__data[0]=R.value.elements[0],R.__data[1]=R.value.elements[1],R.__data[2]=R.value.elements[2],R.__data[3]=R.value.elements[0],R.__data[4]=R.value.elements[3],R.__data[5]=R.value.elements[4],R.__data[6]=R.value.elements[5],R.__data[7]=R.value.elements[0],R.__data[8]=R.value.elements[6],R.__data[9]=R.value.elements[7],R.__data[10]=R.value.elements[8],R.__data[11]=R.value.elements[0]):k.toArray(R.__data),n.bufferSubData(35345,W,R.__data))}}n.bindBuffer(35345,null)}(x),s[x.id]=F)},dispose:function C(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}}}function Hee(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function GHe(){const n=sv("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",l=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let f=null,p=null;const g=[],_=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Jh,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const y=this;let w=!1,C=0,x=0,M=null,T=-1,I=null;const F=new Eo,P=new Eo;let R=null,k=e.width,W=e.height,ie=1,Te=null,me=null;const Q=new Eo(0,0,k,W),he=new Eo(0,0,k,W);let K=!1;const ae=new YF;let fe=!1,de=!1,ke=null;const et=new Qi,Fe=new jt,wt=new Ae,ut={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Bt(){return null===M?ie:1}let cn,Sn,ln,Ti,Vt,Ft,vn,qn,En,Cn,Un,di,cr,hs,Oe,ve,Tt,mn,bn,In,Ci,De,Jt,un,xt=t;function Zt(Pe,Et){for(let $t=0;$t<Pe.length;$t++){const en=e.getContext(Pe[$t],Et);if(null!==en)return en}return null}try{const Pe={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:c,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r144"),e.addEventListener("webglcontextlost",tr,!1),e.addEventListener("webglcontextrestored",Pr,!1),e.addEventListener("webglcontextcreationerror",Go,!1),null===xt){const Et=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&Et.shift(),xt=Zt(Et,Pe),null===xt)throw Zt(Et)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===xt.getShaderPrecisionFormat&&(xt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Pe){throw console.error("THREE.WebGLRenderer: "+Pe.message),Pe}function Wn(){cn=new iPe(xt),Sn=new Yke(xt,cn,n),cn.init(Sn),De=new HHe(xt,cn,Sn),ln=new kHe(xt,cn,Sn),Ti=new oPe,Vt=new bHe,Ft=new PHe(xt,cn,ln,Vt,Sn,De,Ti),vn=new Jke(y),qn=new nPe(y),En=new KRe(xt,Sn),Jt=new Kke(xt,cn,En,Sn),Cn=new rPe(xt,En,Ti,Jt),Un=new uPe(xt,Cn,En,Ti),bn=new lPe(xt,Sn,Ft),ve=new Zke(Vt),di=new CHe(y,vn,qn,cn,Sn,Jt,ve),cr=new VHe(y,Vt),hs=new MHe,Oe=new IHe(cn,Sn),mn=new qke(y,vn,ln,Un,u,o),Tt=new FHe(y,Un,Sn),un=new UHe(xt,Ti,Sn,ln),In=new Xke(xt,cn,Ti,Sn),Ci=new sPe(xt,cn,Ti,Sn),Ti.programs=di.programs,y.capabilities=Sn,y.extensions=cn,y.properties=Vt,y.renderLists=hs,y.shadowMap=Tt,y.state=ln,y.info=Ti}Wn();const jn=new NHe(y,xt);function tr(Pe){Pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Pr(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const Pe=Ti.autoReset,Et=Tt.enabled,$t=Tt.autoUpdate,bt=Tt.needsUpdate,en=Tt.type;Wn(),Ti.autoReset=Pe,Tt.enabled=Et,Tt.autoUpdate=$t,Tt.needsUpdate=bt,Tt.type=en}function Go(Pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Pe.statusMessage)}function at(Pe){const Et=Pe.target;Et.removeEventListener("dispose",at),function Rn(Pe){(function zt(Pe){const Et=Vt.get(Pe).programs;void 0!==Et&&(Et.forEach(function($t){di.releaseProgram($t)}),Pe.isShaderMaterial&&di.releaseShaderCache(Pe))})(Pe),Vt.remove(Pe)}(Et)}this.xr=jn,this.getContext=function(){return xt},this.getContextAttributes=function(){return xt.getContextAttributes()},this.forceContextLoss=function(){const Pe=cn.get("WEBGL_lose_context");Pe&&Pe.loseContext()},this.forceContextRestore=function(){const Pe=cn.get("WEBGL_lose_context");Pe&&Pe.restoreContext()},this.getPixelRatio=function(){return ie},this.setPixelRatio=function(Pe){void 0!==Pe&&(ie=Pe,this.setSize(k,W,!1))},this.getSize=function(Pe){return Pe.set(k,W)},this.setSize=function(Pe,Et,$t){jn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=Pe,W=Et,e.width=Math.floor(Pe*ie),e.height=Math.floor(Et*ie),!1!==$t&&(e.style.width=Pe+"px",e.style.height=Et+"px"),this.setViewport(0,0,Pe,Et))},this.getDrawingBufferSize=function(Pe){return Pe.set(k*ie,W*ie).floor()},this.setDrawingBufferSize=function(Pe,Et,$t){k=Pe,W=Et,ie=$t,e.width=Math.floor(Pe*$t),e.height=Math.floor(Et*$t),this.setViewport(0,0,Pe,Et)},this.getCurrentViewport=function(Pe){return Pe.copy(F)},this.getViewport=function(Pe){return Pe.copy(Q)},this.setViewport=function(Pe,Et,$t,bt){Pe.isVector4?Q.set(Pe.x,Pe.y,Pe.z,Pe.w):Q.set(Pe,Et,$t,bt),ln.viewport(F.copy(Q).multiplyScalar(ie).floor())},this.getScissor=function(Pe){return Pe.copy(he)},this.setScissor=function(Pe,Et,$t,bt){Pe.isVector4?he.set(Pe.x,Pe.y,Pe.z,Pe.w):he.set(Pe,Et,$t,bt),ln.scissor(P.copy(he).multiplyScalar(ie).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(Pe){ln.setScissorTest(K=Pe)},this.setOpaqueSort=function(Pe){Te=Pe},this.setTransparentSort=function(Pe){me=Pe},this.getClearColor=function(Pe){return Pe.copy(mn.getClearColor())},this.setClearColor=function(){mn.setClearColor.apply(mn,arguments)},this.getClearAlpha=function(){return mn.getClearAlpha()},this.setClearAlpha=function(){mn.setClearAlpha.apply(mn,arguments)},this.clear=function(Pe=!0,Et=!0,$t=!0){let bt=0;Pe&&(bt|=16384),Et&&(bt|=256),$t&&(bt|=1024),xt.clear(bt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",tr,!1),e.removeEventListener("webglcontextrestored",Pr,!1),e.removeEventListener("webglcontextcreationerror",Go,!1),hs.dispose(),Oe.dispose(),Vt.dispose(),vn.dispose(),qn.dispose(),Un.dispose(),Jt.dispose(),un.dispose(),di.dispose(),jn.dispose(),jn.removeEventListener("sessionstart",_s),jn.removeEventListener("sessionend",lc),ke&&(ke.dispose(),ke=null),t1.stop()},this.renderBufferDirect=function(Pe,Et,$t,bt,en,Ji){null===Et&&(Et=ut);const Mr=en.isMesh&&en.matrixWorld.determinant()<0,ys=function pl(Pe,Et,$t,bt,en){!0!==Et.isScene&&(Et=ut),Ft.resetTextureUnits();const Ji=Et.fog,ys=null===M?y.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:Jh,Tr=(bt.isMeshStandardMaterial?qn:vn).get(bt.envMap||(bt.isMeshStandardMaterial?Et.environment:null)),Wo=!0===bt.vertexColors&&!!$t.attributes.color&&4===$t.attributes.color.itemSize,ao=!!bt.normalMap&&!!$t.attributes.tangent,co=!!$t.morphAttributes.position,$1=!!$t.morphAttributes.normal,Ap=!!$t.morphAttributes.color,Pm=bt.toneMapped?y.toneMapping:0,Hm=$t.morphAttributes.position||$t.morphAttributes.normal||$t.morphAttributes.color,ph=void 0!==Hm?Hm.length:0,Do=Vt.get(bt),zm=p.state.lights;!0!==fe||!0!==de&&Pe===I||ve.setState(bt,Pe,Pe===I&&bt.id===T);let Fc=!1;bt.version===Do.__version?(Do.needsLights&&Do.lightsStateVersion!==zm.state.version||Do.outputEncoding!==ys||en.isInstancedMesh&&!1===Do.instancing||!en.isInstancedMesh&&!0===Do.instancing||en.isSkinnedMesh&&!1===Do.skinning||!en.isSkinnedMesh&&!0===Do.skinning||Do.envMap!==Tr||!0===bt.fog&&Do.fog!==Ji||void 0!==Do.numClippingPlanes&&(Do.numClippingPlanes!==ve.numPlanes||Do.numIntersection!==ve.numIntersection)||Do.vertexAlphas!==Wo||Do.vertexTangents!==ao||Do.morphTargets!==co||Do.morphNormals!==$1||Do.morphColors!==Ap||Do.toneMapping!==Pm||!0===Sn.isWebGL2&&Do.morphTargetsCount!==ph)&&(Fc=!0):(Fc=!0,Do.__version=bt.version);let su=Do.currentProgram;!0===Fc&&(su=$f(bt,Et,en));let O6=!1,Ty=!1,GV=!1;const Xl=su.getUniforms(),vp=Do.uniforms;if(ln.useProgram(su.program)&&(O6=!0,Ty=!0,GV=!0),bt.id!==T&&(T=bt.id,Ty=!0),O6||I!==Pe){if(Xl.setValue(xt,"projectionMatrix",Pe.projectionMatrix),Sn.logarithmicDepthBuffer&&Xl.setValue(xt,"logDepthBufFC",2/(Math.log(Pe.far+1)/Math.LN2)),I!==Pe&&(I=Pe,Ty=!0,GV=!0),bt.isShaderMaterial||bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshStandardMaterial||bt.envMap){const y4=Xl.map.cameraPosition;void 0!==y4&&y4.setValue(xt,wt.setFromMatrixPosition(Pe.matrixWorld))}(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial)&&Xl.setValue(xt,"isOrthographic",!0===Pe.isOrthographicCamera),(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial||bt.isShadowMaterial||en.isSkinnedMesh)&&Xl.setValue(xt,"viewMatrix",Pe.matrixWorldInverse)}if(en.isSkinnedMesh){Xl.setOptional(xt,en,"bindMatrix"),Xl.setOptional(xt,en,"bindMatrixInverse");const y4=en.skeleton;y4&&(Sn.floatVertexTextures?(null===y4.boneTexture&&y4.computeBoneTexture(),Xl.setValue(xt,"boneTexture",y4.boneTexture,Ft),Xl.setValue(xt,"boneTextureSize",y4.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const QV=$t.morphAttributes;if((void 0!==QV.position||void 0!==QV.normal||void 0!==QV.color&&!0===Sn.isWebGL2)&&bn.update(en,$t,bt,su),(Ty||Do.receiveShadow!==en.receiveShadow)&&(Do.receiveShadow=en.receiveShadow,Xl.setValue(xt,"receiveShadow",en.receiveShadow)),bt.isMeshGouraudMaterial&&null!==bt.envMap&&(vp.envMap.value=Tr,vp.flipEnvMap.value=Tr.isCubeTexture&&!1===Tr.isRenderTargetTexture?-1:1),Ty&&(Xl.setValue(xt,"toneMappingExposure",y.toneMappingExposure),Do.needsLights&&function B3(Pe,Et){Pe.ambientLightColor.needsUpdate=Et,Pe.lightProbe.needsUpdate=Et,Pe.directionalLights.needsUpdate=Et,Pe.directionalLightShadows.needsUpdate=Et,Pe.pointLights.needsUpdate=Et,Pe.pointLightShadows.needsUpdate=Et,Pe.spotLights.needsUpdate=Et,Pe.spotLightShadows.needsUpdate=Et,Pe.rectAreaLights.needsUpdate=Et,Pe.hemisphereLights.needsUpdate=Et}(vp,GV),Ji&&!0===bt.fog&&cr.refreshFogUniforms(vp,Ji),cr.refreshMaterialUniforms(vp,bt,ie,W,ke),Gx.upload(xt,Do.uniformsList,vp,Ft)),bt.isShaderMaterial&&!0===bt.uniformsNeedUpdate&&(Gx.upload(xt,Do.uniformsList,vp,Ft),bt.uniformsNeedUpdate=!1),bt.isSpriteMaterial&&Xl.setValue(xt,"center",en.center),Xl.setValue(xt,"modelViewMatrix",en.modelViewMatrix),Xl.setValue(xt,"normalMatrix",en.normalMatrix),Xl.setValue(xt,"modelMatrix",en.matrixWorld),bt.isShaderMaterial||bt.isRawShaderMaterial){const y4=bt.uniformsGroups;for(let WV=0,eFt=y4.length;WV<eFt;WV++)if(Sn.isWebGL2){const T6e=y4[WV];un.update(T6e,su),un.bind(T6e,su)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return su}(Pe,Et,$t,bt,en);ln.setMaterial(bt,Mr);let Tr=$t.index;const Wo=$t.attributes.position;if(null===Tr){if(void 0===Wo||0===Wo.count)return}else if(0===Tr.count)return;let ao=1;!0===bt.wireframe&&(Tr=Cn.getWireframeAttribute($t),ao=2),Jt.setup(en,bt,ys,$t,Tr);let co,$1=In;null!==Tr&&(co=En.get(Tr),$1=Ci,$1.setIndex(co));const Ap=null!==Tr?Tr.count:Wo.count,Pm=$t.drawRange.start*ao,Hm=$t.drawRange.count*ao,ph=null!==Ji?Ji.start*ao:0,Do=null!==Ji?Ji.count*ao:1/0,zm=Math.max(Pm,ph),Fc=Math.min(Ap,Pm+Hm,ph+Do)-1,su=Math.max(0,Fc-zm+1);if(0!==su){if(en.isMesh)!0===bt.wireframe?(ln.setLineWidth(bt.wireframeLinewidth*Bt()),$1.setMode(1)):$1.setMode(4);else if(en.isLine){let O6=bt.linewidth;void 0===O6&&(O6=1),ln.setLineWidth(O6*Bt()),$1.setMode(en.isLineSegments?1:en.isLineLoop?2:3)}else en.isPoints?$1.setMode(0):en.isSprite&&$1.setMode(4);if(en.isInstancedMesh)$1.renderInstances(zm,su,en.count);else if($t.isInstancedBufferGeometry){const O6=Math.min($t.instanceCount,$t._maxInstanceCount);$1.renderInstances(zm,su,O6)}else $1.render(zm,su)}},this.compile=function(Pe,Et){function $t(bt,en,Ji){!0===bt.transparent&&2===bt.side?(bt.side=1,bt.needsUpdate=!0,$f(bt,en,Ji),bt.side=0,bt.needsUpdate=!0,$f(bt,en,Ji),bt.side=2):$f(bt,en,Ji)}p=Oe.get(Pe),p.init(),_.push(p),Pe.traverseVisible(function(bt){bt.isLight&&bt.layers.test(Et.layers)&&(p.pushLight(bt),bt.castShadow&&p.pushShadow(bt))}),p.setupLights(y.physicallyCorrectLights),Pe.traverse(function(bt){const en=bt.material;if(en)if(Array.isArray(en))for(let Ji=0;Ji<en.length;Ji++)$t(en[Ji],Pe,bt);else $t(en,Pe,bt)}),_.pop(),p=null};let Nn=null;function _s(){t1.stop()}function lc(){t1.start()}const t1=new cee;function Q1(Pe,Et,$t,bt){if(!1===Pe.visible)return;if(Pe.layers.test(Et.layers))if(Pe.isGroup)$t=Pe.renderOrder;else if(Pe.isLOD)!0===Pe.autoUpdate&&Pe.update(Et);else if(Pe.isLight)p.pushLight(Pe),Pe.castShadow&&p.pushShadow(Pe);else if(Pe.isSprite){if(!Pe.frustumCulled||ae.intersectsSprite(Pe)){bt&&wt.setFromMatrixPosition(Pe.matrixWorld).applyMatrix4(et);const Mr=Un.update(Pe),ys=Pe.material;ys.visible&&f.push(Pe,Mr,ys,$t,wt.z,null)}}else if((Pe.isMesh||Pe.isLine||Pe.isPoints)&&(Pe.isSkinnedMesh&&Pe.skeleton.frame!==Ti.render.frame&&(Pe.skeleton.update(),Pe.skeleton.frame=Ti.render.frame),!Pe.frustumCulled||ae.intersectsObject(Pe))){bt&&wt.setFromMatrixPosition(Pe.matrixWorld).applyMatrix4(et);const Mr=Un.update(Pe),ys=Pe.material;if(Array.isArray(ys)){const Tr=Mr.groups;for(let Wo=0,ao=Tr.length;Wo<ao;Wo++){const co=Tr[Wo],$1=ys[co.materialIndex];$1&&$1.visible&&f.push(Pe,Mr,$1,$t,wt.z,co)}}else ys.visible&&f.push(Pe,Mr,ys,$t,wt.z,null)}const Ji=Pe.children;for(let Mr=0,ys=Ji.length;Mr<ys;Mr++)Q1(Ji[Mr],Et,$t,bt)}function Qo(Pe,Et,$t,bt){const en=Pe.opaque,Ji=Pe.transmissive,Mr=Pe.transparent;p.setupLightsView($t),Ji.length>0&&function W1(Pe,Et,$t){const bt=Sn.isWebGL2;null===ke&&(ke=new V4(1,1,{generateMipmaps:!0,type:cn.has("EXT_color_buffer_half_float")?G0:Y8,minFilter:Vd,samples:bt&&!0===s?4:0})),y.getDrawingBufferSize(Fe),bt?ke.setSize(Fe.x,Fe.y):ke.setSize(Ax(Fe.x),Ax(Fe.y));const en=y.getRenderTarget();y.setRenderTarget(ke),y.clear();const Ji=y.toneMapping;y.toneMapping=0,j1(Pe,Et,$t),y.toneMapping=Ji,Ft.updateMultisampleRenderTarget(ke),Ft.updateRenderTargetMipmap(ke),y.setRenderTarget(en)}(en,Et,$t),bt&&ln.viewport(F.copy(bt)),en.length>0&&j1(en,Et,$t),Ji.length>0&&j1(Ji,Et,$t),Mr.length>0&&j1(Mr,Et,$t),ln.buffers.depth.setTest(!0),ln.buffers.depth.setMask(!0),ln.buffers.color.setMask(!0),ln.setPolygonOffset(!1)}function j1(Pe,Et,$t){const bt=!0===Et.isScene?Et.overrideMaterial:null;for(let en=0,Ji=Pe.length;en<Ji;en++){const Mr=Pe[en],ys=Mr.object,Tr=Mr.geometry,Wo=null===bt?Mr.material:bt,ao=Mr.group;ys.layers.test($t.layers)&&Kl(ys,Et,$t,Tr,Wo,ao)}}function Kl(Pe,Et,$t,bt,en,Ji){Pe.onBeforeRender(y,Et,$t,bt,en,Ji),Pe.modelViewMatrix.multiplyMatrices($t.matrixWorldInverse,Pe.matrixWorld),Pe.normalMatrix.getNormalMatrix(Pe.modelViewMatrix),en.onBeforeRender(y,Et,$t,bt,Pe,Ji),!0===en.transparent&&2===en.side?(en.side=1,en.needsUpdate=!0,y.renderBufferDirect($t,Et,bt,en,Pe,Ji),en.side=0,en.needsUpdate=!0,y.renderBufferDirect($t,Et,bt,en,Pe,Ji),en.side=2):y.renderBufferDirect($t,Et,bt,en,Pe,Ji),Pe.onAfterRender(y,Et,$t,bt,en,Ji)}function $f(Pe,Et,$t){!0!==Et.isScene&&(Et=ut);const bt=Vt.get(Pe),en=p.state.lights,Mr=en.state.version,ys=di.getParameters(Pe,en.state,p.state.shadowsArray,Et,$t),Tr=di.getProgramCacheKey(ys);let Wo=bt.programs;bt.environment=Pe.isMeshStandardMaterial?Et.environment:null,bt.fog=Et.fog,bt.envMap=(Pe.isMeshStandardMaterial?qn:vn).get(Pe.envMap||bt.environment),void 0===Wo&&(Pe.addEventListener("dispose",at),Wo=new Map,bt.programs=Wo);let ao=Wo.get(Tr);if(void 0!==ao){if(bt.currentProgram===ao&&bt.lightsStateVersion===Mr)return mp(Pe,ys),ao}else ys.uniforms=di.getUniforms(Pe),Pe.onBuild($t,ys,y),Pe.onBeforeCompile(ys,y),ao=di.acquireProgram(ys,Tr),Wo.set(Tr,ao),bt.uniforms=ys.uniforms;const co=bt.uniforms;(!Pe.isShaderMaterial&&!Pe.isRawShaderMaterial||!0===Pe.clipping)&&(co.clippingPlanes=ve.uniform),mp(Pe,ys),bt.needsLights=function o0(Pe){return Pe.isMeshLambertMaterial||Pe.isMeshToonMaterial||Pe.isMeshPhongMaterial||Pe.isMeshStandardMaterial||Pe.isShadowMaterial||Pe.isShaderMaterial&&!0===Pe.lights}(Pe),bt.lightsStateVersion=Mr,bt.needsLights&&(co.ambientLightColor.value=en.state.ambient,co.lightProbe.value=en.state.probe,co.directionalLights.value=en.state.directional,co.directionalLightShadows.value=en.state.directionalShadow,co.spotLights.value=en.state.spot,co.spotLightShadows.value=en.state.spotShadow,co.rectAreaLights.value=en.state.rectArea,co.ltc_1.value=en.state.rectAreaLTC1,co.ltc_2.value=en.state.rectAreaLTC2,co.pointLights.value=en.state.point,co.pointLightShadows.value=en.state.pointShadow,co.hemisphereLights.value=en.state.hemi,co.directionalShadowMap.value=en.state.directionalShadowMap,co.directionalShadowMatrix.value=en.state.directionalShadowMatrix,co.spotShadowMap.value=en.state.spotShadowMap,co.spotLightMatrix.value=en.state.spotLightMatrix,co.spotLightMap.value=en.state.spotLightMap,co.pointShadowMap.value=en.state.pointShadowMap,co.pointShadowMatrix.value=en.state.pointShadowMatrix);const $1=ao.getUniforms(),Ap=Gx.seqWithValue($1.seq,co);return bt.currentProgram=ao,bt.uniformsList=Ap,ao}function mp(Pe,Et){const $t=Vt.get(Pe);$t.outputEncoding=Et.outputEncoding,$t.instancing=Et.instancing,$t.skinning=Et.skinning,$t.morphTargets=Et.morphTargets,$t.morphNormals=Et.morphNormals,$t.morphColors=Et.morphColors,$t.morphTargetsCount=Et.morphTargetsCount,$t.numClippingPlanes=Et.numClippingPlanes,$t.numIntersection=Et.numClipIntersection,$t.vertexAlphas=Et.vertexAlphas,$t.vertexTangents=Et.vertexTangents,$t.toneMapping=Et.toneMapping}t1.setAnimationLoop(function Hn(Pe){Nn&&Nn(Pe)}),typeof self<"u"&&t1.setContext(self),this.setAnimationLoop=function(Pe){Nn=Pe,jn.setAnimationLoop(Pe),null===Pe?t1.stop():t1.start()},jn.addEventListener("sessionstart",_s),jn.addEventListener("sessionend",lc),this.render=function(Pe,Et){if(void 0===Et||!0===Et.isCamera){if(!0!==w){if(!0===Pe.matrixWorldAutoUpdate&&Pe.updateMatrixWorld(),null===Et.parent&&!0===Et.matrixWorldAutoUpdate&&Et.updateMatrixWorld(),!0===jn.enabled&&!0===jn.isPresenting&&(!0===jn.cameraAutoUpdate&&jn.updateCamera(Et),Et=jn.getCamera()),!0===Pe.isScene&&Pe.onBeforeRender(y,Pe,Et,M),p=Oe.get(Pe,_.length),p.init(),_.push(p),et.multiplyMatrices(Et.projectionMatrix,Et.matrixWorldInverse),ae.setFromProjectionMatrix(et),de=this.localClippingEnabled,fe=ve.init(this.clippingPlanes,de,Et),f=hs.get(Pe,g.length),f.init(),g.push(f),Q1(Pe,Et,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(Te,me),!0===fe&&ve.beginShadows(),Tt.render(p.state.shadowsArray,Pe,Et),!0===fe&&ve.endShadows(),!0===this.info.autoReset&&this.info.reset(),mn.render(f,Pe),p.setupLights(y.physicallyCorrectLights),Et.isArrayCamera){const bt=Et.cameras;for(let en=0,Ji=bt.length;en<Ji;en++){const Mr=bt[en];Qo(f,Pe,Mr,Mr.viewport)}}else Qo(f,Pe,Et);null!==M&&(Ft.updateMultisampleRenderTarget(M),Ft.updateRenderTargetMipmap(M)),!0===Pe.isScene&&Pe.onAfterRender(y,Pe,Et),Jt.resetDefaultState(),T=-1,I=null,_.pop(),p=_.length>0?_[_.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(Pe,Et,$t){Vt.get(Pe.texture).__webglTexture=Et,Vt.get(Pe.depthTexture).__webglTexture=$t;const bt=Vt.get(Pe);bt.__hasExternalTextures=!0,bt.__hasExternalTextures&&(bt.__autoAllocateDepthBuffer=void 0===$t,bt.__autoAllocateDepthBuffer||!0===cn.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),bt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Pe,Et){const $t=Vt.get(Pe);$t.__webglFramebuffer=Et,$t.__useDefaultFramebuffer=void 0===Et},this.setRenderTarget=function(Pe,Et=0,$t=0){M=Pe,C=Et,x=$t;let bt=!0;if(Pe){const Tr=Vt.get(Pe);void 0!==Tr.__useDefaultFramebuffer?(ln.bindFramebuffer(36160,null),bt=!1):void 0===Tr.__webglFramebuffer?Ft.setupRenderTarget(Pe):Tr.__hasExternalTextures&&Ft.rebindTextures(Pe,Vt.get(Pe.texture).__webglTexture,Vt.get(Pe.depthTexture).__webglTexture)}let en=null,Ji=!1,Mr=!1;if(Pe){const Tr=Pe.texture;(Tr.isData3DTexture||Tr.isDataArrayTexture)&&(Mr=!0);const Wo=Vt.get(Pe).__webglFramebuffer;Pe.isWebGLCubeRenderTarget?(en=Wo[Et],Ji=!0):en=Sn.isWebGL2&&Pe.samples>0&&!1===Ft.useMultisampledRTT(Pe)?Vt.get(Pe).__webglMultisampledFramebuffer:Wo,F.copy(Pe.viewport),P.copy(Pe.scissor),R=Pe.scissorTest}else F.copy(Q).multiplyScalar(ie).floor(),P.copy(he).multiplyScalar(ie).floor(),R=K;if(ln.bindFramebuffer(36160,en)&&Sn.drawBuffers&&bt&&ln.drawBuffers(Pe,en),ln.viewport(F),ln.scissor(P),ln.setScissorTest(R),Ji){const Tr=Vt.get(Pe.texture);xt.framebufferTexture2D(36160,36064,34069+Et,Tr.__webglTexture,$t)}else if(Mr){const Tr=Vt.get(Pe.texture);xt.framebufferTextureLayer(36160,36064,Tr.__webglTexture,$t||0,Et||0)}T=-1},this.readRenderTargetPixels=function(Pe,Et,$t,bt,en,Ji,Mr){if(!Pe||!Pe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ys=Vt.get(Pe).__webglFramebuffer;if(Pe.isWebGLCubeRenderTarget&&void 0!==Mr&&(ys=ys[Mr]),ys){ln.bindFramebuffer(36160,ys);try{const Tr=Pe.texture,Wo=Tr.format,ao=Tr.type;if(Wo!==Pu&&De.convert(Wo)!==xt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const co=ao===G0&&(cn.has("EXT_color_buffer_half_float")||Sn.isWebGL2&&cn.has("EXT_color_buffer_float"));if(!(ao===Y8||De.convert(ao)===xt.getParameter(35738)||ao===O4&&(Sn.isWebGL2||cn.has("OES_texture_float")||cn.has("WEBGL_color_buffer_float"))||co))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Et>=0&&Et<=Pe.width-bt&&$t>=0&&$t<=Pe.height-en&&xt.readPixels(Et,$t,bt,en,De.convert(Wo),De.convert(ao),Ji)}finally{const Tr=null!==M?Vt.get(M).__webglFramebuffer:null;ln.bindFramebuffer(36160,Tr)}}},this.copyFramebufferToTexture=function(Pe,Et,$t=0){const bt=Math.pow(2,-$t),en=Math.floor(Et.image.width*bt),Ji=Math.floor(Et.image.height*bt);Ft.setTexture2D(Et,0),xt.copyTexSubImage2D(3553,$t,0,0,Pe.x,Pe.y,en,Ji),ln.unbindTexture()},this.copyTextureToTexture=function(Pe,Et,$t,bt=0){const en=Et.image.width,Ji=Et.image.height,Mr=De.convert($t.format),ys=De.convert($t.type);Ft.setTexture2D($t,0),xt.pixelStorei(37440,$t.flipY),xt.pixelStorei(37441,$t.premultiplyAlpha),xt.pixelStorei(3317,$t.unpackAlignment),Et.isDataTexture?xt.texSubImage2D(3553,bt,Pe.x,Pe.y,en,Ji,Mr,ys,Et.image.data):Et.isCompressedTexture?xt.compressedTexSubImage2D(3553,bt,Pe.x,Pe.y,Et.mipmaps[0].width,Et.mipmaps[0].height,Mr,Et.mipmaps[0].data):xt.texSubImage2D(3553,bt,Pe.x,Pe.y,Mr,ys,Et.image),0===bt&&$t.generateMipmaps&&xt.generateMipmap(3553),ln.unbindTexture()},this.copyTextureToTexture3D=function(Pe,Et,$t,bt,en=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ji=Pe.max.x-Pe.min.x+1,Mr=Pe.max.y-Pe.min.y+1,ys=Pe.max.z-Pe.min.z+1,Tr=De.convert(bt.format),Wo=De.convert(bt.type);let ao;if(bt.isData3DTexture)Ft.setTexture3D(bt,0),ao=32879;else{if(!bt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ft.setTexture2DArray(bt,0),ao=35866}xt.pixelStorei(37440,bt.flipY),xt.pixelStorei(37441,bt.premultiplyAlpha),xt.pixelStorei(3317,bt.unpackAlignment);const co=xt.getParameter(3314),$1=xt.getParameter(32878),Ap=xt.getParameter(3316),Pm=xt.getParameter(3315),Hm=xt.getParameter(32877),ph=$t.isCompressedTexture?$t.mipmaps[0]:$t.image;xt.pixelStorei(3314,ph.width),xt.pixelStorei(32878,ph.height),xt.pixelStorei(3316,Pe.min.x),xt.pixelStorei(3315,Pe.min.y),xt.pixelStorei(32877,Pe.min.z),$t.isDataTexture||$t.isData3DTexture?xt.texSubImage3D(ao,en,Et.x,Et.y,Et.z,Ji,Mr,ys,Tr,Wo,ph.data):$t.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),xt.compressedTexSubImage3D(ao,en,Et.x,Et.y,Et.z,Ji,Mr,ys,Tr,ph.data)):xt.texSubImage3D(ao,en,Et.x,Et.y,Et.z,Ji,Mr,ys,Tr,Wo,ph),xt.pixelStorei(3314,co),xt.pixelStorei(32878,$1),xt.pixelStorei(3316,Ap),xt.pixelStorei(3315,Pm),xt.pixelStorei(32877,Hm),0===en&&bt.generateMipmaps&&xt.generateMipmap(ao),ln.unbindTexture()},this.initTexture=function(Pe){Pe.isCubeTexture?Ft.setTextureCube(Pe,0):Pe.isData3DTexture?Ft.setTexture3D(Pe,0):Pe.isDataArrayTexture?Ft.setTexture2DArray(Pe,0):Ft.setTexture2D(Pe,0),ln.unbindTexture()},this.resetState=function(){C=0,x=0,M=null,ln.reset(),Jt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class QHe extends Hee{}).prototype.isWebGL1Renderer=!0;class Qx{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Dn(e),this.near=t,this.far=i}clone(){return new Qx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class zee extends R2{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class ok{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Z3()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Z3()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Z3()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Vl=new Ae;class g5{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Vl.fromBufferAttribute(this,t),Vl.applyMatrix4(e),this.setXYZ(t,Vl.x,Vl.y,Vl.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Vl.fromBufferAttribute(this,t),Vl.applyNormalMatrix(e),this.setXYZ(t,Vl.x,Vl.y,Vl.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Vl.fromBufferAttribute(this,t),Vl.transformDirection(e),this.setXYZ(t,Vl.x,Vl.y,Vl.z);return this}setX(e,t){return this.normalized&&(t=ua(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ua(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ua(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ua(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=tf(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=tf(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=tf(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=tf(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ua(t,this.array),i=ua(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ua(t,this.array),i=ua(i,this.array),r=ua(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ua(t,this.array),i=ua(i,this.array),r=ua(r,this.array),s=ua(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ka(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new g5(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Qee=new Ae,Wee=new Eo,jee=new Eo,$He=new Ae,$ee=new Qi;class qee extends Ys{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qi,this.bindMatrixInverse=new Qi}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Eo,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;Wee.fromBufferAttribute(r.attributes.skinIndex,e),jee.fromBufferAttribute(r.attributes.skinWeight,e),Qee.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=jee.getComponent(s);if(0!==o){const a=Wee.getComponent(s);$ee.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector($He.copy(Qee).applyMatrix4($ee),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ck extends R2{constructor(){super(),this.isBone=!0,this.type="Bone"}}class vg extends N4{constructor(e=null,t=1,i=1,r,s,o,a,c,l=k1,u=k1,f,p){super(null,o,a,c,l,u,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Kee=new Qi,qHe=new Qi;class Kx{constructor(e=[],t=[]){this.uuid=Z3(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Qi)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Qi;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)Kee.multiplyMatrices(e[s]?e[s].matrixWorld:qHe,t[s]),Kee.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Kx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=QJ(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new vg(t,e,e,Pu,O4);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new ck),this.bones.push(o),this.boneInverses.push((new Qi).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class d2 extends tl{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Zee=new Ae,Jee=new Ae,ete=new Qi,lk=new Ex,Yx=new h5;class Yd extends R2{constructor(e=new vr,t=new d2){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Zee.fromBufferAttribute(t,r-1),Jee.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Zee.distanceTo(Jee);e.setAttribute("lineDistance",new ci(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Yx.copy(i.boundingSphere),Yx.applyMatrix4(r),Yx.radius+=s,!1===e.ray.intersectsSphere(Yx))return;ete.copy(r).invert(),lk.copy(e.ray).applyMatrix4(ete);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new Ae,u=new Ae,f=new Ae,p=new Ae,g=this.isLineSegments?2:1,_=i.index,w=i.attributes.position;if(null!==_)for(let M=Math.max(0,o.start),T=Math.min(_.count,o.start+o.count)-1;M<T;M+=g){const I=_.getX(M),F=_.getX(M+1);if(l.fromBufferAttribute(w,I),u.fromBufferAttribute(w,F),lk.distanceSqToSegment(l,u,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(p);R<e.near||R>e.far||t.push({distance:R,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}else for(let M=Math.max(0,o.start),T=Math.min(w.count,o.start+o.count)-1;M<T;M+=g){if(l.fromBufferAttribute(w,M),u.fromBufferAttribute(w,M+1),lk.distanceSqToSegment(l,u,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(p);F<e.near||F>e.far||t.push({distance:F,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const tte=new Ae,nte=new Ae;class _g extends Yd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)tte.fromBufferAttribute(t,r),nte.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+tte.distanceTo(nte);e.setAttribute("lineDistance",new ci(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ite extends Yd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class m5 extends tl{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const rte=new Qi,uk=new Ex,Zx=new h5,Jx=new Ae;class gv extends R2{constructor(e=new vr,t=new m5){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Zx.copy(i.boundingSphere),Zx.applyMatrix4(r),Zx.radius+=s,!1===e.ray.intersectsSphere(Zx))return;rte.copy(r).invert(),uk.copy(e.ray).applyMatrix4(rte);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,f=i.attributes.position;if(null!==l)for(let _=Math.max(0,o.start),y=Math.min(l.count,o.start+o.count);_<y;_++){const w=l.getX(_);Jx.fromBufferAttribute(f,w),ste(Jx,w,c,r,e,t,this)}else for(let _=Math.max(0,o.start),y=Math.min(f.count,o.start+o.count);_<y;_++)Jx.fromBufferAttribute(f,_),ste(Jx,_,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function ste(n,e,t,i,r,s,o){const a=uk.distanceSqToPoint(n);if(a<t){const c=new Ae;uk.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class j0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let l,a=0,c=s-1;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-o,l<0)a=r+1;else{if(!(l>0)){c=r;break}c=r-1}if(r=c,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new jt:new Ae);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Ae,r=[],s=[],o=[],a=new Ae,c=new Qi;for(let g=0;g<=e;g++)r[g]=this.getTangentAt(g/e,new Ae);s[0]=new Ae,o[0]=new Ae;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),f<=l&&(l=f,i.set(0,1,0)),p<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(nc(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(c.makeRotationAxis(a,_))}o[g].crossVectors(r[g],s[g])}if(!0===t){let g=Math.acos(nc(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(r[_],g*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class hk extends j0{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const i=t||new jt,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=c-this.aX,g=l-this.aY;c=p*u-g*f+this.aX,l=p*f+g*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function fk(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,f){let p=(o-s)/l-(a-s)/(l+u)+(a-o)/u,g=(a-o)/u-(c-o)/(u+f)+(c-a)/f;p*=u,g*=u,r(o,a,p,g)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}const eM=new Ae,dk=new fk,pk=new fk,gk=new fk;function ote(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function mv(n,e,t,i){return function JHe(n,e){const t=1-n;return t*t*e}(n,e)+function eze(n,e){return 2*(1-n)*n*e}(n,t)+function tze(n,e){return n*n*e}(n,i)}function Av(n,e,t,i,r){return function nze(n,e){const t=1-n;return t*t*t*e}(n,e)+function ize(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function rze(n,e){return 3*(1-n)*n*n*e}(n,i)+function sze(n,e){return n*n*n*e}(n,r)}class ate extends j0{constructor(e=new jt,t=new jt,i=new jt,r=new jt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new jt){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Av(e,r.x,s.x,o.x,a.x),Av(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class mk extends j0{constructor(e=new jt,t=new jt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new jt){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new jt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cte extends j0{constructor(e=new jt,t=new jt,i=new jt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new jt){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(mv(e,r.x,s.x,o.x),mv(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ute extends j0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new jt){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(ote(a,c.x,l.x,u.x,f.x),ote(a,c.y,l.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new jt).fromArray(r))}return this}}var Ak=Object.freeze({__proto__:null,ArcCurve:class YHe extends hk{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class ZHe extends j0{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new Ae){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l,u,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===c&&a===s-1&&(a=s-2,c=1),this.closed||a>0?l=r[(a-1)%s]:(eM.subVectors(r[0],r[1]).add(r[0]),l=eM);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(eM.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=eM),"centripetal"===this.curveType||"chordal"===this.curveType){const g="chordal"===this.curveType?.5:.25;let _=Math.pow(l.distanceToSquared(f),g),y=Math.pow(f.distanceToSquared(p),g),w=Math.pow(p.distanceToSquared(u),g);y<1e-4&&(y=1),_<1e-4&&(_=y),w<1e-4&&(w=y),dk.initNonuniformCatmullRom(l.x,f.x,p.x,u.x,_,y,w),pk.initNonuniformCatmullRom(l.y,f.y,p.y,u.y,_,y,w),gk.initNonuniformCatmullRom(l.z,f.z,p.z,u.z,_,y,w)}else"catmullrom"===this.curveType&&(dk.initCatmullRom(l.x,f.x,p.x,u.x,this.tension),pk.initCatmullRom(l.y,f.y,p.y,u.y,this.tension),gk.initCatmullRom(l.z,f.z,p.z,u.z,this.tension));return i.set(dk.calc(c),pk.calc(c),gk.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new Ae).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:ate,CubicBezierCurve3:class oze extends j0{constructor(e=new Ae,t=new Ae,i=new Ae,r=new Ae){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ae){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Av(e,r.x,s.x,o.x,a.x),Av(e,r.y,s.y,o.y,a.y),Av(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:hk,LineCurve:mk,LineCurve3:class aze extends j0{constructor(e=new Ae,t=new Ae){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Ae){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:cte,QuadraticBezierCurve3:class lte extends j0{constructor(e=new Ae,t=new Ae,i=new Ae){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ae){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(mv(e,r.x,s.x,o.x),mv(e,r.y,s.y,o.y),mv(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:ute});class cze extends j0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new mk(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],c=a.getLength();return a.getPointAt(0===c?0:1-o/c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],c=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let l=0;l<c.length;l++){const u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new Ak[r.type]).fromJSON(r))}return this}}class tM extends cze{constructor(e){super(),this.type="Path",this.currentPoint=new jt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new mk(this.currentPoint.clone(),new jt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new cte(this.currentPoint.clone(),new jt(e,t),new jt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new ate(this.currentPoint.clone(),new jt(e,t),new jt(i,r),new jt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new ute(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){const l=new hk(e,t,i,r,s,o,a,c);if(this.curves.length>0){const f=l.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class lf extends tM{constructor(e){super(e),this.uuid=Z3(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new tM).fromJSON(r))}return this}}function hte(n,e,t,i,r){let s,o;if(r===function Sze(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=pte(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=pte(s,n[s],n[s+1],o);return o&&oM(o,o.next)&&(wv(o),o=o.next),o}function Zd(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!oM(t,t.next)&&0!==d1(t.prev,t,t.next))t=t.next;else{if(wv(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function _v(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function yze(n,e,t,i){let r=n;do{null===r.z&&(r.z=bk(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function wze(n){let e,t,i,r,s,o,a,c,l=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<l&&(a++,i=i.nextZ,i);e++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,l*=2}while(o>1)}(r)}(n,i,r,s);let c,l,a=n;for(;n.prev!==n.next;)if(c=n.prev,l=n.next,s?fze(n,i,r,s):hze(n))e.push(c.i/t),e.push(n.i/t),e.push(l.i/t),wv(n),n=l.next,a=l.next;else if((n=l)===a){o?1===o?_v(n=dze(Zd(n),e,t),e,t,i,r,s,2):2===o&&pze(n,e,t,i,r,s):_v(Zd(n),e,t,i,r,s,1);break}}function hze(n){const e=n.prev,t=n,i=n.next;if(d1(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(yg(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&d1(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function fze(n,e,t,i){const r=n.prev,s=n,o=n.next;if(d1(r,s,o)>=0)return!1;const l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,f=bk(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,i),p=bk(l,u,e,t,i);let g=n.prevZ,_=n.nextZ;for(;g&&g.z>=f&&_&&_.z<=p;){if(g!==n.prev&&g!==n.next&&yg(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&d1(g.prev,g,g.next)>=0||(g=g.prevZ,_!==n.prev&&_!==n.next&&yg(r.x,r.y,s.x,s.y,o.x,o.y,_.x,_.y)&&d1(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;g&&g.z>=f;){if(g!==n.prev&&g!==n.next&&yg(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&d1(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;_&&_.z<=p;){if(_!==n.prev&&_!==n.next&&yg(r.x,r.y,s.x,s.y,o.x,o.y,_.x,_.y)&&d1(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function dze(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!oM(r,s)&&fte(r,i,i.next,s)&&yv(r,s)&&yv(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),wv(i),wv(i.next),i=n=s),i=i.next}while(i!==n);return Zd(i)}function pze(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&bze(o,a)){let c=dte(o,a);return o=Zd(o,o.next),c=Zd(c,c.next),_v(o,e,t,i,r,s),void _v(c,e,t,i,r,s)}a=a.next}o=o.next}while(o!==n)}function mze(n,e){return n.x-e.x}function Aze(n,e){if(e=function vze(n,e){let t=e;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=i&&p>s){if(s=p,p===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,c=o.x,l=o.y;let f,u=1/0;t=o;do{i>=t.x&&t.x>=c&&i!==t.x&&yg(r<l?i:s,r,c,l,r<l?s:i,r,t.x,t.y)&&(f=Math.abs(r-t.y)/(i-t.x),yv(t,n)&&(f<u||f===u&&(t.x>o.x||t.x===o.x&&_ze(o,t)))&&(o=t,u=f)),t=t.next}while(t!==a);return o}(n,e),e){const t=dte(e,n);Zd(e,e.next),Zd(t,t.next)}}function _ze(n,e){return d1(n.prev,n,e.prev)<0&&d1(e.next,n,n.next)<0}function bk(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Cze(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function yg(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function bze(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function xze(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&fte(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(yv(n,e)&&yv(e,n)&&function Mze(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(d1(n.prev,n,e.prev)||d1(n,e.prev,e))||oM(n,e)&&d1(n.prev,n,n.next)>0&&d1(e.prev,e,e.next)>0)}function d1(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function oM(n,e){return n.x===e.x&&n.y===e.y}function fte(n,e,t,i){const r=cM(d1(n,e,t)),s=cM(d1(n,e,i)),o=cM(d1(t,i,n)),a=cM(d1(t,i,e));return!!(r!==s&&o!==a||0===r&&aM(n,t,e)||0===s&&aM(n,i,e)||0===o&&aM(t,n,i)||0===a&&aM(t,e,i))}function aM(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function cM(n){return n>0?1:n<0?-1:0}function yv(n,e){return d1(n.prev,n,n.next)<0?d1(n,e,n.next)>=0&&d1(n,n.prev,e)>=0:d1(n,e,n.prev)<0||d1(n,n.next,e)<0}function dte(n,e){const t=new xk(n.i,n.x,n.y),i=new xk(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function pte(n,e,t,i){const r=new xk(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function wv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function xk(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class uf{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return uf.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];gte(e),mte(i,e);let o=e.length;t.forEach(gte);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,mte(i,t[c]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=hte(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l,u,f,p,g;if(i&&(s=function gze(n,e,t,i){const r=[];let s,o,a,c,l;for(s=0,o=e.length;s<o;s++)a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=hte(n,a,c,i,!1),l===l.next&&(l.steiner=!0),r.push(Cze(l));for(r.sort(mze),s=0;s<r.length;s++)Aze(r[s],t),t=Zd(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=l=n[0],c=u=n[1];for(let _=t;_<r;_+=t)f=n[_],p=n[_+1],f<a&&(a=f),p<c&&(c=p),f>l&&(l=f),p>u&&(u=p);g=Math.max(l-a,u-c),g=0!==g?1/g:0}return _v(s,o,t,a,c,g),o}(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function gte(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function mte(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Cv extends vr{constructor(e=new lf([new jt(.5,.5),new jt(-.5,.5),new jt(-.5,-.5),new jt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++)o(e[a]);function o(a){const c=[],l=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,f=void 0!==t.depth?t.depth:1;let p=void 0===t.bevelEnabled||t.bevelEnabled,g=void 0!==t.bevelThickness?t.bevelThickness:.2,_=void 0!==t.bevelSize?t.bevelSize:g-.1,y=void 0!==t.bevelOffset?t.bevelOffset:0,w=void 0!==t.bevelSegments?t.bevelSegments:3;const C=t.extrudePath,x=void 0!==t.UVGenerator?t.UVGenerator:Eze;let M,I,F,P,R,T=!1;C&&(M=C.getSpacedPoints(u),T=!0,p=!1,I=C.computeFrenetFrames(u,!1),F=new Ae,P=new Ae,R=new Ae),p||(w=0,g=0,_=0,y=0);const k=a.extractPoints(l);let W=k.shape;const ie=k.holes;if(!uf.isClockWise(W)){W=W.reverse();for(let Vt=0,Ft=ie.length;Vt<Ft;Vt++){const vn=ie[Vt];uf.isClockWise(vn)&&(ie[Vt]=vn.reverse())}}const me=uf.triangulateShape(W,ie),Q=W;for(let Vt=0,Ft=ie.length;Vt<Ft;Vt++)W=W.concat(ie[Vt]);function he(Vt,Ft,vn){return Ft||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ft.clone().multiplyScalar(vn).add(Vt)}const K=W.length,ae=me.length;function fe(Vt,Ft,vn){let qn,En,Cn;const Un=Vt.x-Ft.x,di=Vt.y-Ft.y,cr=vn.x-Vt.x,hs=vn.y-Vt.y,Oe=Un*Un+di*di;if(Math.abs(Un*hs-di*cr)>Number.EPSILON){const Tt=Math.sqrt(Oe),mn=Math.sqrt(cr*cr+hs*hs),bn=Ft.x-di/Tt,In=Ft.y+Un/Tt,Jt=((vn.x-hs/mn-bn)*hs-(vn.y+cr/mn-In)*cr)/(Un*hs-di*cr);qn=bn+Un*Jt-Vt.x,En=In+di*Jt-Vt.y;const un=qn*qn+En*En;if(un<=2)return new jt(qn,En);Cn=Math.sqrt(un/2)}else{let Tt=!1;Un>Number.EPSILON?cr>Number.EPSILON&&(Tt=!0):Un<-Number.EPSILON?cr<-Number.EPSILON&&(Tt=!0):Math.sign(di)===Math.sign(hs)&&(Tt=!0),Tt?(qn=-di,En=Un,Cn=Math.sqrt(Oe)):(qn=Un,En=di,Cn=Math.sqrt(Oe/2))}return new jt(qn/Cn,En/Cn)}const de=[];for(let Vt=0,Ft=Q.length,vn=Ft-1,qn=Vt+1;Vt<Ft;Vt++,vn++,qn++)vn===Ft&&(vn=0),qn===Ft&&(qn=0),de[Vt]=fe(Q[Vt],Q[vn],Q[qn]);const ke=[];let et,Fe=de.concat();for(let Vt=0,Ft=ie.length;Vt<Ft;Vt++){const vn=ie[Vt];et=[];for(let qn=0,En=vn.length,Cn=En-1,Un=qn+1;qn<En;qn++,Cn++,Un++)Cn===En&&(Cn=0),Un===En&&(Un=0),et[qn]=fe(vn[qn],vn[Cn],vn[Un]);ke.push(et),Fe=Fe.concat(et)}for(let Vt=0;Vt<w;Vt++){const Ft=Vt/w,vn=g*Math.cos(Ft*Math.PI/2),qn=_*Math.sin(Ft*Math.PI/2)+y;for(let En=0,Cn=Q.length;En<Cn;En++){const Un=he(Q[En],de[En],qn);Zt(Un.x,Un.y,-vn)}for(let En=0,Cn=ie.length;En<Cn;En++){const Un=ie[En];et=ke[En];for(let di=0,cr=Un.length;di<cr;di++){const hs=he(Un[di],et[di],qn);Zt(hs.x,hs.y,-vn)}}}const wt=_+y;for(let Vt=0;Vt<K;Vt++){const Ft=p?he(W[Vt],Fe[Vt],wt):W[Vt];T?(P.copy(I.normals[0]).multiplyScalar(Ft.x),F.copy(I.binormals[0]).multiplyScalar(Ft.y),R.copy(M[0]).add(P).add(F),Zt(R.x,R.y,R.z)):Zt(Ft.x,Ft.y,0)}for(let Vt=1;Vt<=u;Vt++)for(let Ft=0;Ft<K;Ft++){const vn=p?he(W[Ft],Fe[Ft],wt):W[Ft];T?(P.copy(I.normals[Vt]).multiplyScalar(vn.x),F.copy(I.binormals[Vt]).multiplyScalar(vn.y),R.copy(M[Vt]).add(P).add(F),Zt(R.x,R.y,R.z)):Zt(vn.x,vn.y,f/u*Vt)}for(let Vt=w-1;Vt>=0;Vt--){const Ft=Vt/w,vn=g*Math.cos(Ft*Math.PI/2),qn=_*Math.sin(Ft*Math.PI/2)+y;for(let En=0,Cn=Q.length;En<Cn;En++){const Un=he(Q[En],de[En],qn);Zt(Un.x,Un.y,f+vn)}for(let En=0,Cn=ie.length;En<Cn;En++){const Un=ie[En];et=ke[En];for(let di=0,cr=Un.length;di<cr;di++){const hs=he(Un[di],et[di],qn);T?Zt(hs.x,hs.y+M[u-1].y,M[u-1].x+vn):Zt(hs.x,hs.y,f+vn)}}}function xt(Vt,Ft){let vn=Vt.length;for(;--vn>=0;){const qn=vn;let En=vn-1;En<0&&(En=Vt.length-1);for(let Cn=0,Un=u+2*w;Cn<Un;Cn++){const di=K*Cn,cr=K*(Cn+1);Sn(Ft+qn+di,Ft+En+di,Ft+En+cr,Ft+qn+cr)}}}function Zt(Vt,Ft,vn){c.push(Vt),c.push(Ft),c.push(vn)}function cn(Vt,Ft,vn){ln(Vt),ln(Ft),ln(vn);const qn=r.length/3,En=x.generateTopUV(i,r,qn-3,qn-2,qn-1);Ti(En[0]),Ti(En[1]),Ti(En[2])}function Sn(Vt,Ft,vn,qn){ln(Vt),ln(Ft),ln(qn),ln(Ft),ln(vn),ln(qn);const En=r.length/3,Cn=x.generateSideWallUV(i,r,En-6,En-3,En-2,En-1);Ti(Cn[0]),Ti(Cn[1]),Ti(Cn[3]),Ti(Cn[1]),Ti(Cn[2]),Ti(Cn[3])}function ln(Vt){r.push(c[3*Vt+0]),r.push(c[3*Vt+1]),r.push(c[3*Vt+2])}function Ti(Vt){s.push(Vt.x),s.push(Vt.y)}(function ut(){const Vt=r.length/3;if(p){let Ft=0,vn=K*Ft;for(let qn=0;qn<ae;qn++){const En=me[qn];cn(En[2]+vn,En[1]+vn,En[0]+vn)}Ft=u+2*w,vn=K*Ft;for(let qn=0;qn<ae;qn++){const En=me[qn];cn(En[0]+vn,En[1]+vn,En[2]+vn)}}else{for(let Ft=0;Ft<ae;Ft++){const vn=me[Ft];cn(vn[2],vn[1],vn[0])}for(let Ft=0;Ft<ae;Ft++){const vn=me[Ft];cn(vn[0]+K*u,vn[1]+K*u,vn[2]+K*u)}}i.addGroup(Vt,r.length/3-Vt,0)})(),function Bt(){const Vt=r.length/3;let Ft=0;xt(Q,Ft),Ft+=Q.length;for(let vn=0,qn=ie.length;vn<qn;vn++){const En=ie[vn];xt(En,Ft),Ft+=En.length}i.addGroup(Vt,r.length/3-Vt,1)}()}this.setAttribute("position",new ci(r,3)),this.setAttribute("uv",new ci(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function Tze(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Ak[r.type]).fromJSON(r)),new Cv(i,e.options)}}const Eze={generateTopUV:function(n,e,t,i,r){const a=e[3*i],c=e[3*i+1],l=e[3*r],u=e[3*r+1];return[new jt(e[3*t],e[3*t+1]),new jt(a,c),new jt(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],c=e[3*t+2],l=e[3*i],u=e[3*i+1],f=e[3*i+2],p=e[3*r],g=e[3*r+1],_=e[3*r+2],y=e[3*s],w=e[3*s+1],C=e[3*s+2];return Math.abs(a-u)<Math.abs(o-l)?[new jt(o,1-c),new jt(l,1-f),new jt(p,1-_),new jt(y,1-C)]:[new jt(a,1-c),new jt(u,1-f),new jt(g,1-_),new jt(w,1-C)]}};class uM extends vr{constructor(e=new lf([new jt(0,.5),new jt(-.5,-.5),new jt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,c=0;if(!1===Array.isArray(e))l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,c,u),a+=c,c=0;function l(u){const f=r.length/3,p=u.extractPoints(t);let g=p.shape;const _=p.holes;!1===uf.isClockWise(g)&&(g=g.reverse());for(let w=0,C=_.length;w<C;w++){const x=_[w];!0===uf.isClockWise(x)&&(_[w]=x.reverse())}const y=uf.triangulateShape(g,_);for(let w=0,C=_.length;w<C;w++)g=g.concat(_[w]);for(let w=0,C=g.length;w<C;w++){const x=g[w];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let w=0,C=y.length;w<C;w++){const x=y[w];i.push(x[0]+f,x[1]+f,x[2]+f),c+=3}}this.setIndex(i),this.setAttribute("position",new ci(r,3)),this.setAttribute("normal",new ci(s,3)),this.setAttribute("uv",new ci(o,2))}toJSON(){const e=super.toJSON();return function Lze(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++)i.push(t[e.shapes[r]]);return new uM(i,e.curveSegments)}}class bv extends vr{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+a,Math.PI);let l=0;const u=[],f=new Ae,p=new Ae,g=[],_=[],y=[],w=[];for(let C=0;C<=i;C++){const x=[],M=C/i;let T=0;0==C&&0==o?T=.5/t:C==i&&c==Math.PI&&(T=-.5/t);for(let I=0;I<=t;I++){const F=I/t;f.x=-e*Math.cos(r+F*s)*Math.sin(o+M*a),f.y=e*Math.cos(o+M*a),f.z=e*Math.sin(r+F*s)*Math.sin(o+M*a),_.push(f.x,f.y,f.z),p.copy(f).normalize(),y.push(p.x,p.y,p.z),w.push(F+T,1-M),x.push(l++)}u.push(x)}for(let C=0;C<i;C++)for(let x=0;x<t;x++){const M=u[C][x+1],T=u[C][x],I=u[C+1][x],F=u[C+1][x+1];(0!==C||o>0)&&g.push(M,T,F),(C!==i-1||c<Math.PI)&&g.push(T,I,F)}this.setIndex(g),this.setAttribute("position",new ci(_,3)),this.setAttribute("normal",new ci(y,3)),this.setAttribute("uv",new ci(w,2))}static fromJSON(e){return new bv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class xv extends tl{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Dn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hf extends xv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new jt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nc(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Dn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _te extends tl{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dn(16777215),this.specular=new Dn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ik extends tl{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Ca extends tl{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function G4(n,e,t){return Bk(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function v5(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function Bk(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function yte(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function Rk(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function Fk(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class Mv{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zze extends Mv{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,g=this._weightNext,_=(i-t)/(r-t),y=_*_,w=y*_,C=-p*w+2*p*y-p*_,x=(1+p)*w+(-1.5-2*p)*y+(-.5+p)*_+1,M=(-1-g)*w+(1.5+g)*y+.5*_,T=g*w-g*y;for(let I=0;I!==a;++I)s[I]=C*o[u+I]+x*o[l+I]+M*o[c+I]+T*o[f+I];return s}}class wte extends Mv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),f=1-u;for(let p=0;p!==a;++p)s[p]=o[l+p]*f+o[c+p]*u;return s}}class Oze extends Mv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class $0{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=v5(t,this.TimeBufferType),this.values=v5(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:v5(e.times,Array),values:v5(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Oze(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new wte(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zze(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case nv:t=this.InterpolantFactoryMethodDiscrete;break;case j7:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return nv;case this.InterpolantFactoryMethodLinear:return j7;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=G4(i,s,o),this.values=G4(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&Bk(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=G4(this.times),t=G4(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const f=a*i,p=f-i,g=f+i;for(let _=0;_!==i;++_){const y=t[f+_];if(y!==t[p+_]||y!==t[g+_]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let g=0;g!==i;++g)t[p+g]=t[f+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=G4(e,0,o),this.values=G4(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=G4(this.times,0),t=G4(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}$0.prototype.TimeBufferType=Float32Array,$0.prototype.ValueBufferType=Float32Array,$0.prototype.DefaultInterpolation=j7;class wg extends $0{}wg.prototype.ValueTypeName="bool",wg.prototype.ValueBufferType=Array,wg.prototype.DefaultInterpolation=nv,wg.prototype.InterpolantFactoryMethodLinear=void 0,wg.prototype.InterpolantFactoryMethodSmooth=void 0;class Cte extends $0{}Cte.prototype.ValueTypeName="color";class Sv extends $0{}Sv.prototype.ValueTypeName="number";class Nze extends Mv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)B2.slerpFlat(s,0,o,l-a,o,l,c);return s}}class _5 extends $0{InterpolantFactoryMethodLinear(e){return new Nze(this.times,this.values,this.getValueSize(),e)}}_5.prototype.ValueTypeName="quaternion",_5.prototype.DefaultInterpolation=j7,_5.prototype.InterpolantFactoryMethodSmooth=void 0;class Cg extends $0{}Cg.prototype.ValueTypeName="string",Cg.prototype.ValueBufferType=Array,Cg.prototype.DefaultInterpolation=nv,Cg.prototype.InterpolantFactoryMethodLinear=void 0,Cg.prototype.InterpolantFactoryMethodSmooth=void 0;class Ev extends $0{}Ev.prototype.ValueTypeName="vector";class Tv{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Z3(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Uze(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push($0.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=yte(c);c=Rk(c,1,u),l=Rk(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),o.push(new Sv(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const f=u[1];let p=r[f];p||(r[f]=p=[]),p.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,g,_,y){if(0!==g.length){const w=[],C=[];Fk(g,w,C,_),0!==w.length&&y.push(new f(p,w,C))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let f=0;f<l.length;f++){const p=l[f].keys;if(p&&0!==p.length)if(p[0].morphTargets){const g={};let _;for(_=0;_<p.length;_++)if(p[_].morphTargets)for(let y=0;y<p[_].morphTargets.length;y++)g[p[_].morphTargets[y]]=-1;for(const y in g){const w=[],C=[];for(let x=0;x!==p[_].morphTargets.length;++x){const M=p[_];w.push(M.time),C.push(M.morphTarget===y?1:0)}r.push(new Sv(".morphTargetInfluence["+y+"]",w,C))}c=g.length*o}else{const g=".bones["+t[f].name+"]";i(Ev,g+".position",p,"pos",r),i(_5,g+".quaternion",p,"rot",r),i(Ev,g+".scale",p,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Uze(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Vze(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sv;case"vector":case"vector2":case"vector3":case"vector4":return Ev;case"color":return Cte;case"quaternion":return _5;case"bool":case"boolean":return wg;case"string":return Cg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];Fk(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const bg={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class bte{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,f){return l.push(u,f),this},this.removeHandler=function(u){const f=l.indexOf(u);return-1!==f&&l.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=l.length;f<p;f+=2){const g=l[f],_=l[f+1];if(g.global&&(g.lastIndex=0),g.test(u))return _}return null}}}const Lv=new bte;class y5{constructor(e){this.manager=void 0!==e?e:Lv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ff={};class Gze extends Error{constructor(e,t){super(e),this.response=t}}class Gu extends y5{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=bg.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==ff[e])return void ff[e].push({onLoad:t,onProgress:i,onError:r});ff[e]=[],ff[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=ff[e],f=l.body.getReader(),p=l.headers.get("Content-Length"),g=p?parseInt(p):0,_=0!==g;let y=0;const w=new ReadableStream({start(C){!function x(){f.read().then(({done:M,value:T})=>{if(M)C.close();else{y+=T.byteLength;const I=new ProgressEvent("progress",{lengthComputable:_,loaded:y,total:g});for(let F=0,P=u.length;F<P;F++){const R=u[F];R.onProgress&&R.onProgress(I)}C.enqueue(T),x()}})}()}});return new Response(w)}throw new Gze(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(p);return l.arrayBuffer().then(_=>g.decode(_))}}}).then(l=>{bg.add(e,l);const u=ff[e];delete ff[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onLoad&&g.onLoad(l)}}).catch(l=>{const u=ff[e];if(void 0===u)throw this.manager.itemError(e),l;delete ff[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onError&&g.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class hM extends y5{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=bg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=sv("img");function c(){u(),bg.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Qze extends y5{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new vg,a=new Gu(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){const l=s.parse(c);!l||(void 0!==l.image?o.image=l.image:void 0!==l.data&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=void 0!==l.wrapS?l.wrapS:Hl,o.wrapT=void 0!==l.wrapT?l.wrapT:Hl,o.magFilter=void 0!==l.magFilter?l.magFilter:qa,o.minFilter=void 0!==l.minFilter?l.minFilter:qa,o.anisotropy=void 0!==l.anisotropy?l.anisotropy:1,void 0!==l.encoding&&(o.encoding=l.encoding),void 0!==l.flipY&&(o.flipY=l.flipY),void 0!==l.format&&(o.format=l.format),void 0!==l.type&&(o.type=l.type),void 0!==l.mipmaps&&(o.mipmaps=l.mipmaps,o.minFilter=Vd),1===l.mipmapCount&&(o.minFilter=qa),void 0!==l.generateMipmaps&&(o.generateMipmaps=l.generateMipmaps),o.needsUpdate=!0,t&&t(o,l))},i,r),o}}class Wze extends y5{constructor(e){super(e)}load(e,t,i,r){const s=new N4,o=new hM(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class fM extends R2{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class xte extends fM{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(R2.DefaultUp),this.updateMatrix(),this.groundColor=new Dn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Mte=new Qi,Ste=new Ae,Ete=new Ae;class kk{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new jt(512,512),this.map=null,this.mapPass=null,this.matrix=new Qi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new YF,this._frameExtents=new jt(1,1),this._viewportCount=1,this._viewports=[new Eo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Ste.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ste),Ete.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ete),t.updateMatrixWorld(),Mte.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mte),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class jze extends kk{constructor(){super(new Wc(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*iv*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Tte extends fM{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(R2.DefaultUp),this.updateMatrix(),this.target=new R2,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new jze}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Lte=new Qi,Dv=new Ae,Pk=new Ae;class $ze extends kk{constructor(){super(new Wc(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new jt(4,2),this._viewportCount=6,this._viewports=[new Eo(2,1,1,1),new Eo(0,1,1,1),new Eo(3,1,1,1),new Eo(1,1,1,1),new Eo(3,0,1,1),new Eo(1,0,1,1)],this._cubeDirections=[new Ae(1,0,0),new Ae(-1,0,0),new Ae(0,0,1),new Ae(0,0,-1),new Ae(0,1,0),new Ae(0,-1,0)],this._cubeUps=[new Ae(0,1,0),new Ae(0,1,0),new Ae(0,1,0),new Ae(0,1,0),new Ae(0,0,1),new Ae(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Dv.setFromMatrixPosition(e.matrixWorld),i.position.copy(Dv),Pk.copy(i.position),Pk.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Pk),i.updateMatrixWorld(),r.makeTranslation(-Dv.x,-Dv.y,-Dv.z),Lte.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Lte)}}class Dte extends fM{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new $ze}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class qze extends kk{constructor(){super(new f5(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Hk extends fM{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(R2.DefaultUp),this.updateMatrix(),this.target=new R2,this.shadow=new qze}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class df{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class nOe extends y5{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=bg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){bg.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class Pte{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Hte(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Hte();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Hte(){return(typeof performance>"u"?Date:performance).now()}const Ok="\\[\\]\\.:\\/",oOe=new RegExp("["+Ok+"]","g"),Nk="[^"+Ok+"]",aOe="[^"+Ok.replace("\\.","")+"]",fOe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Nk)+/(WCOD+)?/.source.replace("WCOD",aOe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Nk)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Nk)+"$"),dOe=["material","materials","bones","map"];class pOe{constructor(e,t,i){const r=i||ba.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let ba=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(oOe,"")}static parseTrackName(t){const i=fOe.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==dOe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===u){u=f;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=pOe,n})();ba.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ba.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ba.prototype.GetterByBindingType=[ba.prototype._getValue_direct,ba.prototype._getValue_array,ba.prototype._getValue_arrayElement,ba.prototype._getValue_toArray],ba.prototype.SetterByBindingTypeAndVersioning=[[ba.prototype._setValue_direct,ba.prototype._setValue_direct_setNeedsUpdate,ba.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ba.prototype._setValue_array,ba.prototype._setValue_array_setNeedsUpdate,ba.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ba.prototype._setValue_arrayElement,ba.prototype._setValue_arrayElement_setNeedsUpdate,ba.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ba.prototype._setValue_fromArray,ba.prototype._setValue_fromArray_setNeedsUpdate,ba.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class vOe{constructor(e,t,i=0,r=1/0){this.ray=new Ex(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new zF,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Vk(e,this,i,t),i.sort(Vte),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Vk(e[r],this,i,t);return i.sort(Vte),i}}function Vte(n,e){return n.distance-e.distance}function Vk(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===i){const r=n.children;for(let s=0,o=r.length;s<o;s++)Vk(r[s],e,t,!0)}}class Ute{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(nc(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Qk extends _g{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new vr;r.setAttribute("position",new ci(t,3)),r.setAttribute("color",new ci([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new d2({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const r=new Dn,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}const pf=yOe();function yOe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const l=c-127;l<-27?(i[c]=0,i[256|c]=32768,r[c]=24,r[256|c]=24):l<-14?(i[c]=1024>>-l-14,i[256|c]=1024>>-l-14|32768,r[c]=-l-1,r[256|c]=-l-1):l<=15?(i[c]=l+15<<10,i[256|c]=l+15<<10|32768,r[c]=13,r[256|c]=13):l<128?(i[c]=31744,i[256|c]=64512,r[c]=24,r[256|c]=24):(i[c]=31744,i[256|c]=64512,r[c]=13,r[256|c]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,u=0;for(;0==(8388608&l);)l<<=1,u-=8388608;l&=-8388609,u+=947912704,s[c]=l|u}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)32!==c&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}var yM=Object.freeze({__proto__:null,toHalfFloat:function wOe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=nc(n,-65504,65504),pf.floatView[0]=n;const e=pf.uint32View[0],t=e>>23&511;return pf.baseTable[t]+((8388607&e)>>pf.shiftTable[t])},fromHalfFloat:function COe(n){const e=n>>10;return pf.uint32View[0]=pf.mantissaTable[pf.offsetTable[e]+(1023&n)]+pf.exponentTable[e],pf.floatView[0]}});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"144"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="144");const An=(n,e=4)=>Math.round(n*10**e)/10**e,S5=([n,e],[t,i],r=1)=>[(t-n)/(2/r)+n,(i-e)/(2/r)+e],t4=(n,e=4)=>An(n.reduce((t,i)=>t+i,0),e),io=(n,e,t=[0,0],i=4)=>{const r=n*Math.PI/180,s=e*Math.cos(r),o=e*Math.sin(r);return[An(s+t[0],i),An(o+t[1],i)]},p1=(n,e,t=3)=>An(180*Math.atan2(e[1]-n[1],e[0]-n[0])/Math.PI,t),Zte=(n,e,t,i=0,r=0)=>{const s=g=>g*g,o=g=>Math.sqrt(g);var a=1+s(e),c=2*-i+e*(t-r)*2,l=s(i)+s(t-r)-s(n);s(c);const p=(o(s(c)-4*a*l),(-c-o(s(c)-4*a*l))/(2*a));return[p,e*p+t]},xg=(n,e)=>{const[[t,i],[r,s]]=n,[[o,a],[c,l]]=e;var u,p=(l-a)*(r-t)-(c-o)*(s-i);return 0==p?null:[t+(u=((c-o)*(i-a)-(l-a)*(t-o))/p)*(r-t),i+u*(s-i)]},Jte=(n,e)=>{const t=[],i=n.length;for(let r=0;r<i-1;r++){const s=[n[r],n[r+1]];xg(s,e)&&t.push(xg(s,e))}return t},Xa=(n,e,t=4)=>n&&e?An(Math.hypot(e[0]-n[0],e[1]-n[1]),t):0,ge=(n,e)=>[n[0]+e[0],n[1]+e[1]],tn=(n,e,t=!0)=>t?[n[0],e[1]]:[e[0],n[1]],E5=(n,e,t=!1)=>{let i;return i=t?.3528*n/10:n*e,An(i,3)};function ene(n){return n*(Math.PI/180)}String.prototype.toTitleCase=function(){return this.replace(/\b\w/g,n=>n.toLocaleUpperCase())};const wM=I2("slideInOut",[Oo(":enter",[Oi({transform:"translateY(100%)"}),So("600ms 0ms ease-out",Oi({transform:"translateY(0%)"}))]),Oo(":leave",[So("300ms  ease-in",Oi({transform:"translateY(100%)"}))])]),Wk=I2("fallInOut",[Oo(":enter",[Oi({transform:"translateY(-100%)"}),So("600ms 0ms ease-out",Oi({transform:"translateY(0%)"}))]),Oo(":leave",[So("300ms ease-in",Oi({transform:"translateY(-100%)"}))])]),jk=I2("stateSlideIn",[zo("false",Oi({width:"0px",padding:0})),zo("true",Oi({width:"*",padding:"*"})),Oo("* => void",[So("200ms ease-in",Oi({width:"0px",padding:0}))]),Oo("false => true",So("200ms ease-in")),Oo("true => false",So("200ms ease-out"))]);function CM(n,e){let t=0;if(void 0===e)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let r of n)(r=+e(r,++i,n))&&(t+=r)}return t}function SOe(){}function $k(n){return null==n?SOe:function(){return this.querySelector(n)}}function TOe(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function LOe(){return[]}function rne(n){return null==n?LOe:function(){return this.querySelectorAll(n)}}function sne(n){return function(){return this.matches(n)}}function one(n){return function(e){return e.matches(n)}}var BOe=Array.prototype.find;function FOe(){return this.firstElementChild}var POe=Array.prototype.filter;function HOe(){return Array.from(this.children)}function ane(n){return new Array(n.length)}function bM(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}function UOe(n){return function(){return n}}function GOe(n,e,t,i,r,s){for(var a,o=0,c=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):t[o]=new bM(n,s[o]);for(;o<c;++o)(a=e[o])&&(r[o]=a)}function QOe(n,e,t,i,r,s,o){var a,c,g,l=new Map,u=e.length,f=s.length,p=new Array(u);for(a=0;a<u;++a)(c=e[a])&&(p[a]=g=o.call(c,c.__data__,a,e)+"",l.has(g)?r[a]=c:l.set(g,c));for(a=0;a<f;++a)g=o.call(n,s[a],a,s)+"",(c=l.get(g))?(i[a]=c,c.__data__=s[a],l.delete(g)):t[a]=new bM(n,s[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(p[a])===c&&(r[a]=c)}function WOe(n){return n.__data__}function $Oe(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function JOe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}bM.prototype={constructor:bM,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var qk="http://www.w3.org/1999/xhtml";const cne={svg:"http://www.w3.org/2000/svg",xhtml:qk,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xM(n){var e=n+="",t=e.indexOf(":");return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),cne.hasOwnProperty(e)?{space:cne[e],local:n}:n}function oNe(n){return function(){this.removeAttribute(n)}}function aNe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function cNe(n,e){return function(){this.setAttribute(n,e)}}function lNe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function uNe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function hNe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function lne(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function dNe(n){return function(){this.style.removeProperty(n)}}function pNe(n,e,t){return function(){this.style.setProperty(n,e,t)}}function gNe(n,e,t){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function Mg(n,e){return n.style.getPropertyValue(e)||lne(n).getComputedStyle(n,null).getPropertyValue(e)}function ANe(n){return function(){delete this[n]}}function vNe(n,e){return function(){this[n]=e}}function _Ne(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function une(n){return n.trim().split(/^|\s+/)}function Kk(n){return n.classList||new hne(n)}function hne(n){this._node=n,this._names=une(n.getAttribute("class")||"")}function fne(n,e){for(var t=Kk(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function dne(n,e){for(var t=Kk(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function wNe(n){return function(){fne(this,n)}}function CNe(n){return function(){dne(this,n)}}function bNe(n,e){return function(){(e.apply(this,arguments)?fne:dne)(this,n)}}function MNe(){this.textContent=""}function SNe(n){return function(){this.textContent=n}}function ENe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function LNe(){this.innerHTML=""}function DNe(n){return function(){this.innerHTML=n}}function INe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function RNe(){this.nextSibling&&this.parentNode.appendChild(this)}function kNe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function HNe(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===qk&&e.documentElement.namespaceURI===qk?e.createElement(n):e.createElementNS(t,n)}}function zNe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function pne(n){var e=xM(n);return(e.local?zNe:HNe)(e)}function NNe(){return null}function UNe(){var n=this.parentNode;n&&n.removeChild(this)}function QNe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function WNe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function KNe(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function XNe(n){return function(){var e=this.__on;if(e){for(var s,t=0,i=-1,r=e.length;t<r;++t)s=e[t],n.type&&s.type!==n.type||s.name!==n.name?e[++i]=s:this.removeEventListener(s.type,s.listener,s.options);++i?e.length=i:delete this.__on}}}function YNe(n,e,t){return function(){var r,i=this.__on,s=function qNe(n){return function(e){n.call(this,e,this.__data__)}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===n.type&&r.name===n.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),void(r.value=e);this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function gne(n,e,t){var i=lne(n),r=i.CustomEvent;"function"==typeof r?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function JNe(n,e){return function(){return gne(this,n,e)}}function eVe(n,e){return function(){return gne(this,n,e.apply(this,arguments))}}hne.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var mne=[null];function n4(n,e){this._groups=n,this._parents=e}function Ane(){return new n4([[document.documentElement]],mne)}n4.prototype=Ane.prototype={constructor:n4,select:function EOe(n){"function"!=typeof n&&(n=$k(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,l,s=e[r],o=s.length,a=i[r]=new Array(o),u=0;u<o;++u)(c=s[u])&&(l=n.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new n4(i,this._parents)},selectAll:function IOe(n){n="function"==typeof n?function DOe(n){return function(){return TOe(n.apply(this,arguments))}}(n):rne(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var c,o=e[s],a=o.length,l=0;l<a;++l)(c=o[l])&&(i.push(n.call(c,c.__data__,l,o)),r.push(c));return new n4(i,r)},selectChild:function kOe(n){return this.select(null==n?FOe:function ROe(n){return function(){return BOe.call(this.children,n)}}("function"==typeof n?n:one(n)))},selectChildren:function OOe(n){return this.selectAll(null==n?HOe:function zOe(n){return function(){return POe.call(this.children,n)}}("function"==typeof n?n:one(n)))},filter:function NOe(n){"function"!=typeof n&&(n=sne(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,s=e[r],o=s.length,a=i[r]=[],l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new n4(i,this._parents)},data:function jOe(n,e){if(!arguments.length)return Array.from(this,WOe);var t=e?QOe:GOe,i=this._parents,r=this._groups;"function"!=typeof n&&(n=UOe(n));for(var s=r.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=i[l],f=r[l],p=f.length,g=$Oe(n.call(u,u&&u.__data__,l,i)),_=g.length,y=a[l]=new Array(_),w=o[l]=new Array(_),C=c[l]=new Array(p);t(u,f,y,w,C,g,e);for(var T,I,x=0,M=0;x<_;++x)if(T=y[x]){for(x>=M&&(M=x+1);!(I=w[M])&&++M<_;);T._next=I||null}}return(o=new n4(o,i))._enter=a,o._exit=c,o},enter:function VOe(){return new n4(this._enter||this._groups.map(ane),this._parents)},exit:function qOe(){return new n4(this._exit||this._groups.map(ane),this._parents)},join:function KOe(n,e,t){var i=this.enter(),r=this,s=this.exit();return"function"==typeof n?(i=n(i))&&(i=i.selection()):i=i.append(n+""),null!=e&&(r=e(r))&&(r=r.selection()),null==t?s.remove():t(s),i&&r?i.merge(r).order():r},merge:function XOe(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,o=Math.min(r,i.length),a=new Array(r),c=0;c<o;++c)for(var g,l=t[c],u=i[c],f=l.length,p=a[c]=new Array(f),_=0;_<f;++_)(g=l[_]||u[_])&&(p[_]=g);for(;c<r;++c)a[c]=t[c];return new n4(a,this._parents)},selection:function iVe(){return this},order:function YOe(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var o,i=n[e],r=i.length-1,s=i[r];--r>=0;)(o=i[r])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function ZOe(n){function e(f,p){return f&&p?n(f.__data__,p.__data__):!f-!p}n||(n=JOe);for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var l,o=t[s],a=o.length,c=r[s]=new Array(a),u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(e)}return new n4(r,this._parents).order()},call:function eNe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function tNe(){return Array.from(this)},node:function nNe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function iNe(){let n=0;for(const e of this)++n;return n},empty:function rNe(){return!this.node()},each:function sNe(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var a,r=e[t],s=0,o=r.length;s<o;++s)(a=r[s])&&n.call(a,a.__data__,s,r);return this},attr:function fNe(n,e){var t=xM(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((null==e?t.local?aNe:oNe:"function"==typeof e?t.local?hNe:uNe:t.local?lNe:cNe)(t,e))},style:function mNe(n,e,t){return arguments.length>1?this.each((null==e?dNe:"function"==typeof e?gNe:pNe)(n,e,t??"")):Mg(this.node(),n)},property:function yNe(n,e){return arguments.length>1?this.each((null==e?ANe:"function"==typeof e?_Ne:vNe)(n,e)):this.node()[n]},classed:function xNe(n,e){var t=une(n+"");if(arguments.length<2){for(var i=Kk(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each(("function"==typeof e?bNe:e?wNe:CNe)(t,e))},text:function TNe(n){return arguments.length?this.each(null==n?MNe:("function"==typeof n?ENe:SNe)(n)):this.node().textContent},html:function BNe(n){return arguments.length?this.each(null==n?LNe:("function"==typeof n?INe:DNe)(n)):this.node().innerHTML},raise:function FNe(){return this.each(RNe)},lower:function PNe(){return this.each(kNe)},append:function ONe(n){var e="function"==typeof n?n:pne(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function VNe(n,e){var t="function"==typeof n?n:pne(n),i=null==e?NNe:"function"==typeof e?e:$k(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function GNe(){return this.each(UNe)},clone:function jNe(n){return this.select(n?WNe:QNe)},datum:function $Ne(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function ZNe(n,e,t){var r,o,i=KNe(n+""),s=i.length;if(!(arguments.length<2)){for(a=e?YNe:XNe,r=0;r<s;++r)this.each(a(i[r],e,t));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(r=0,u=a[c];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function tVe(n,e){return this.each(("function"==typeof e?eVe:JNe)(n,e))},[Symbol.iterator]:function*nVe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var o,i=n[e],r=0,s=i.length;r<s;++r)(o=i[r])&&(yield o)}};const Iv=Ane;var rVe={value:()=>{}};function vne(){for(var i,n=0,e=arguments.length,t={};n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new MM(t)}function MM(n){this._=n}function sVe(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}function oVe(n,e){for(var r,t=0,i=n.length;t<i;++t)if((r=n[t]).name===e)return r.value}function _ne(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=rVe,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=t&&n.push({name:e,value:t}),n}MM.prototype=vne.prototype={constructor:MM,on:function(n,e){var r,t=this._,i=sVe(n+"",t),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=_ne(t[r],n.name,e);else if(null==e)for(r in t)t[r]=_ne(t[r],n.name,null);return this}for(;++s<o;)if((r=(n=i[s]).type)&&(r=oVe(t[r],n.name)))return r},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new MM(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var r,s,t=new Array(r),i=0;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,r=(s=this._[n]).length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};const yne=vne;var SM,Fv,Sg=0,Bv=0,Rv=0,EM=0,T5=0,TM=0,kv="object"==typeof performance&&performance.now?performance:Date,Cne="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Xk(){return T5||(Cne(aVe),T5=kv.now()+TM)}function aVe(){T5=0}function LM(){this._call=this._time=this._next=null}function bne(n,e,t){var i=new LM;return i.restart(n,e,t),i}function xne(){T5=(EM=kv.now())+TM,Sg=Bv=0;try{!function cVe(){Xk(),++Sg;for(var e,n=SM;n;)(e=T5-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Sg}()}finally{Sg=0,function uVe(){for(var n,t,e=SM,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:SM=t);Fv=n,Yk(i)}(),T5=0}}function lVe(){var n=kv.now(),e=n-EM;e>1e3&&(TM-=e,EM=n)}function Yk(n){Sg||(Bv&&(Bv=clearTimeout(Bv)),n-T5>24?(n<1/0&&(Bv=setTimeout(xne,n-kv.now()-TM)),Rv&&(Rv=clearInterval(Rv))):(Rv||(EM=kv.now(),Rv=setInterval(lVe,1e3)),Sg=1,Cne(xne)))}function Mne(n,e,t){var i=new LM;return i.restart(r=>{i.stop(),n(r+e)},e=null==e?0:+e,t),i}LM.prototype=bne.prototype={constructor:LM,restart:function(n,e,t){if("function"!=typeof n)throw new TypeError("callback is not a function");t=(null==t?Xk():+t)+(null==e?0:+e),!this._next&&Fv!==this&&(Fv?Fv._next=this:SM=this,Fv=this),this._call=n,this._time=t,Yk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yk())}};var hVe=yne("start","end","cancel","interrupt"),fVe=[];function BM(n,e,t,i,r,s){var o=n.__transition;if(o){if(t in o)return}else n.__transition={};!function dVe(n,e,t){var r,i=n.__transition;function o(l){var u,f,p,g;if(1!==t.state)return c();for(u in i)if((g=i[u]).name===t.name){if(3===g.state)return Mne(o);4===g.state?(g.state=6,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete i[u]):+u<e&&(g.state=6,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete i[u])}if(Mne(function(){3===t.state&&(t.state=4,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=2,t.on.call("start",n,n.__data__,t.index,t.group),2===t.state){for(t.state=3,r=new Array(p=t.tween.length),u=0,f=-1;u<p;++u)(g=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(r[++f]=g);r.length=f+1}}function a(l){for(var u=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=5,1),f=-1,p=r.length;++f<p;)r[f].call(n,u);5===t.state&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){for(var l in t.state=6,t.timer.stop(),delete i[e],i)return;delete n.__transition}i[e]=t,t.timer=bne(function s(l){t.state=1,t.timer.restart(o,t.delay,t.time),t.delay<=l&&o(l-t.delay)},0,t.time)}(n,t,{name:e,index:i,group:r,on:hVe,tween:fVe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function eP(n,e){var t=Qu(n,e);if(t.state>0)throw new Error("too late; already scheduled");return t}function q0(n,e){var t=Qu(n,e);if(t.state>3)throw new Error("too late; already running");return t}function Qu(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function RM(n,e){var i,r,o,t=n.__transition,s=!0;if(t){for(o in e=null==e?null:e+"",t)(i=t[o]).name===e?(r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]):s=!1;s&&delete n.__transition}}function e6(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var FM,Lne=180/Math.PI,tP={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dne(n,e,t,i,r,s){var o,a,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*i)&&(t-=n*c,i-=e*c),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,c/=a),n*i<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*Lne,skewX:Math.atan(c)*Lne,scaleX:o,scaleY:a}}function Ine(n,e,t,i){function r(l){return l.length?l.pop()+" ":""}return function(l,u){var f=[],p=[];return l=n(l),u=n(u),function s(l,u,f,p,g,_){if(l!==f||u!==p){var y=g.push("translate(",null,e,null,t);_.push({i:y-4,x:e6(l,f)},{i:y-2,x:e6(u,p)})}else(f||p)&&g.push("translate("+f+e+p+t)}(l.translateX,l.translateY,u.translateX,u.translateY,f,p),function o(l,u,f,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:f.push(r(f)+"rotate(",null,i)-2,x:e6(l,u)})):u&&f.push(r(f)+"rotate("+u+i)}(l.rotate,u.rotate,f,p),function a(l,u,f,p){l!==u?p.push({i:f.push(r(f)+"skewX(",null,i)-2,x:e6(l,u)}):u&&f.push(r(f)+"skewX("+u+i)}(l.skewX,u.skewX,f,p),function c(l,u,f,p,g,_){if(l!==f||u!==p){var y=g.push(r(g)+"scale(",null,",",null,")");_.push({i:y-4,x:e6(l,f)},{i:y-2,x:e6(u,p)})}else(1!==f||1!==p)&&g.push(r(g)+"scale("+f+","+p+")")}(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,p),l=u=null,function(g){for(var w,_=-1,y=p.length;++_<y;)f[(w=p[_]).i]=w.x(g);return f.join("")}}}var AVe=Ine(function gVe(n){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?tP:Dne(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),vVe=Ine(function mVe(n){return null!=n&&(FM||(FM=document.createElementNS("http://www.w3.org/2000/svg","g")),FM.setAttribute("transform",n),n=FM.transform.baseVal.consolidate())?Dne((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):tP},", ",")",")");function _Ve(n,e){var t,i;return function(){var r=q0(this,n),s=r.tween;if(s!==t)for(var o=0,a=(i=t=s).length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function yVe(n,e,t){var i,r;if("function"!=typeof t)throw new Error;return function(){var s=q0(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:t},c=0,l=r.length;c<l;++c)if(r[c].name===e){r[c]=a;break}c===l&&r.push(a)}s.tween=r}}function nP(n,e,t){var i=n._id;return n.each(function(){var r=q0(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return Qu(r,i).value[e]}}function iP(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Bne(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Pv(){}var kM=1/.7,Eg="\\s*([+-]?\\d+)\\s*",zv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",K0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CVe=/^#([0-9a-f]{3,8})$/,bVe=new RegExp(`^rgb\\(${Eg},${Eg},${Eg}\\)$`),xVe=new RegExp(`^rgb\\(${K0},${K0},${K0}\\)$`),MVe=new RegExp(`^rgba\\(${Eg},${Eg},${Eg},${zv}\\)$`),SVe=new RegExp(`^rgba\\(${K0},${K0},${K0},${zv}\\)$`),EVe=new RegExp(`^hsl\\(${zv},${K0},${K0}\\)$`),TVe=new RegExp(`^hsla\\(${zv},${K0},${K0},${zv}\\)$`),Rne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Fne(){return this.rgb().formatHex()}function kne(){return this.rgb().formatRgb()}function Ov(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=CVe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),6===t?Pne(e):3===t?new w3(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===t?PM(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===t?PM(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=bVe.exec(n))?new w3(e[1],e[2],e[3],1):(e=xVe.exec(n))?new w3(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=MVe.exec(n))?PM(e[1],e[2],e[3],e[4]):(e=SVe.exec(n))?PM(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=EVe.exec(n))?One(e[1],e[2]/100,e[3]/100,1):(e=TVe.exec(n))?One(e[1],e[2]/100,e[3]/100,e[4]):Rne.hasOwnProperty(n)?Pne(Rne[n]):"transparent"===n?new w3(NaN,NaN,NaN,0):null}function Pne(n){return new w3(n>>16&255,n>>8&255,255&n,1)}function PM(n,e,t,i){return i<=0&&(n=e=t=NaN),new w3(n,e,t,i)}function IVe(n){return n instanceof Pv||(n=Ov(n)),n?new w3((n=n.rgb()).r,n.g,n.b,n.opacity):new w3}function HM(n,e,t,i){return 1===arguments.length?IVe(n):new w3(n,e,t,i??1)}function w3(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}function Hne(){return`#${D5(this.r)}${D5(this.g)}${D5(this.b)}`}function zne(){const n=zM(this.opacity);return`${1===n?"rgb(":"rgba("}${L5(this.r)}, ${L5(this.g)}, ${L5(this.b)}${1===n?")":`, ${n})`}`}function zM(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function L5(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function D5(n){return((n=L5(n))<16?"0":"")+n.toString(16)}function One(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Wu(n,e,t,i)}function Nne(n){if(n instanceof Wu)return new Wu(n.h,n.s,n.l,n.opacity);if(n instanceof Pv||(n=Ov(n)),!n)return new Wu;if(n instanceof Wu)return n;var e=(n=n.rgb()).r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,c=(s+r)/2;return a?(o=e===s?(t-i)/a+6*(t<i):t===s?(i-e)/a+2:(e-t)/a+4,a/=c<.5?s+r:2-s-r,o*=60):a=c>0&&c<1?0:o,new Wu(o,a,c,n.opacity)}function Wu(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}function Vne(n){return(n=(n||0)%360)<0?n+360:n}function OM(n){return Math.max(0,Math.min(1,n||0))}function rP(n,e,t){return 255*(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)}function Une(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}iP(Pv,Ov,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Fne,formatHex:Fne,formatHex8:function LVe(){return this.rgb().formatHex8()},formatHsl:function DVe(){return Nne(this).formatHsl()},formatRgb:kne,toString:kne}),iP(w3,HM,Bne(Pv,{brighter(n){return n=null==n?kM:Math.pow(kM,n),new w3(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new w3(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new w3(L5(this.r),L5(this.g),L5(this.b),zM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hne,formatHex:Hne,formatHex8:function BVe(){return`#${D5(this.r)}${D5(this.g)}${D5(this.b)}${D5(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:zne,toString:zne})),iP(Wu,function RVe(n,e,t,i){return 1===arguments.length?Nne(n):new Wu(n,e,t,i??1)},Bne(Pv,{brighter(n){return n=null==n?kM:Math.pow(kM,n),new Wu(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Wu(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new w3(rP(n>=240?n-240:n+120,r,i),rP(n,r,i),rP(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Wu(Vne(this.h),OM(this.s),OM(this.l),zM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=zM(this.opacity);return`${1===n?"hsl(":"hsla("}${Vne(this.h)}, ${100*OM(this.s)}%, ${100*OM(this.l)}%${1===n?")":`, ${n})`}`}}));const Gne=n=>()=>n;function Wne(n,e){var t=e-n;return t?function Qne(n,e){return function(t){return n+t*e}}(n,t):Gne(isNaN(n)?e:n)}const jne=function n(e){var t=function HVe(n){return 1==(n=+n)?Wne:function(e,t){return t-e?function PVe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}(e,t,n):Gne(isNaN(e)?t:e)}}(e);function i(r,s){var o=t((r=HM(r)).r,(s=HM(s)).r),a=t(r.g,s.g),c=t(r.b,s.b),l=Wne(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=c(u),r.opacity=l(u),r+""}}return i.gamma=n,i}(1);function $ne(n){return function(e){var o,a,t=e.length,i=new Array(t),r=new Array(t),s=new Array(t);for(o=0;o<t;++o)a=HM(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(c){return a.r=i(c),a.g=r(c),a.b=s(c),a+""}}}$ne(function FVe(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1];return Une((t-i/e)*e,i>0?n[i-1]:2*r-s,r,s,i<e-1?n[i+2]:2*s-r)}}),$ne(function kVe(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e);return Une((t-i/e)*e,n[(i+e-1)%e],n[i%e],n[(i+1)%e],n[(i+2)%e])}});var sP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oP=new RegExp(sP.source,"g");function NVe(n,e){var i,r,s,t=sP.lastIndex=oP.lastIndex=0,o=-1,a=[],c=[];for(n+="",e+="";(i=sP.exec(n))&&(r=oP.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:e6(i,r)})),t=oP.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?function OVe(n){return function(e){return n(e)+""}}(c[0].x):function zVe(n){return function(){return n}}(e):(e=c.length,function(l){for(var f,u=0;u<e;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function qne(n,e){var t;return("number"==typeof e?e6:e instanceof Ov?jne:(t=Ov(e))?(e=t,jne):NVe)(n,e)}function VVe(n){return function(){this.removeAttribute(n)}}function UVe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function GVe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function QVe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function WVe(n,e,t){var i,r,s;return function(){var o,c,a=t(this);return null==a?void this.removeAttribute(n):(o=this.getAttribute(n))===(c=a+"")?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}function jVe(n,e,t){var i,r,s;return function(){var o,c,a=t(this);return null==a?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local))===(c=a+"")?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}function qVe(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function KVe(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function XVe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&KVe(n,s)),t}return r._value=e,r}function YVe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&qVe(n,s)),t}return r._value=e,r}function JVe(n,e){return function(){eP(this,n).delay=+e.apply(this,arguments)}}function eUe(n,e){return e=+e,function(){eP(this,n).delay=e}}function nUe(n,e){return function(){q0(this,n).duration=+e.apply(this,arguments)}}function iUe(n,e){return e=+e,function(){q0(this,n).duration=e}}function sUe(n,e){if("function"!=typeof e)throw new Error;return function(){q0(this,n).ease=e}}function fUe(n,e,t){var i,r,s=function hUe(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(e)?eP:q0;return function(){var o=s(this,n),a=o.on;a!==i&&(r=(i=a).copy()).on(e,t),o.on=r}}var vUe=Iv.prototype.constructor;function Kne(n){return function(){this.style.removeProperty(n)}}function MUe(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function SUe(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&MUe(n,o,t)),i}return s._value=e,s}function IUe(n){return function(e){this.textContent=n.call(this,e)}}function BUe(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&IUe(r)),e}return i._value=n,i}var PUe=0;function gf(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function Xne(){return++PUe}var mf=Iv.prototype;gf.prototype=function HUe(n){return Iv().transition(n)}.prototype={constructor:gf,select:function mUe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=$k(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var u,f,a=i[o],c=a.length,l=s[o]=new Array(c),p=0;p<c;++p)(u=a[p])&&(f=n.call(u,u.__data__,p,a))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f,BM(l[p],e,t,p,l,Qu(u,t)));return new gf(s,this._parents,e,t)},selectAll:function AUe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=rne(n));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var u,c=i[a],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var g,p=n.call(u,u.__data__,f,c),_=Qu(u,t),y=0,w=p.length;y<w;++y)(g=p[y])&&BM(g,e,t,y,p,_);s.push(p),o.push(u)}return new gf(s,o,e,t)},selectChild:mf.selectChild,selectChildren:mf.selectChildren,filter:function lUe(n){"function"!=typeof n&&(n=sne(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,s=e[r],o=s.length,a=i[r]=[],l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new gf(i,this._parents,this._name,this._id)},merge:function uUe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,s=Math.min(i,t.length),o=new Array(i),a=0;a<s;++a)for(var p,c=e[a],l=t[a],u=c.length,f=o[a]=new Array(u),g=0;g<u;++g)(p=c[g]||l[g])&&(f[g]=p);for(;a<i;++a)o[a]=e[a];return new gf(o,this._parents,this._name,this._id)},selection:function _Ue(){return new vUe(this._groups,this._parents)},transition:function FUe(){for(var n=this._name,e=this._id,t=Xne(),i=this._groups,r=i.length,s=0;s<r;++s)for(var c,o=i[s],a=o.length,l=0;l<a;++l)if(c=o[l]){var u=Qu(c,e);BM(c,n,t,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new gf(i,this._parents,n,t)},call:mf.call,nodes:mf.nodes,node:mf.node,size:mf.size,empty:mf.empty,each:mf.each,on:function dUe(n,e){var t=this._id;return arguments.length<2?Qu(this.node(),t).on.on(n):this.each(fUe(t,n,e))},attr:function $Ve(n,e){var t=xM(n),i="transform"===t?vVe:qne;return this.attrTween(n,"function"==typeof e?(t.local?jVe:WVe)(t,i,nP(this,"attr."+n,e)):null==e?(t.local?UVe:VVe)(t):(t.local?QVe:GVe)(t,i,e))},attrTween:function ZVe(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;var i=xM(n);return this.tween(t,(i.local?XVe:YVe)(i,e))},style:function xUe(n,e,t){var i="transform"==(n+="")?AVe:qne;return null==e?this.styleTween(n,function yUe(n,e){var t,i,r;return function(){var s=Mg(this,n),o=(this.style.removeProperty(n),Mg(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}(n,i)).on("end.style."+n,Kne(n)):"function"==typeof e?this.styleTween(n,function CUe(n,e,t){var i,r,s;return function(){var o=Mg(this,n),a=t(this),c=a+"";return null==a&&(this.style.removeProperty(n),c=a=Mg(this,n)),o===c?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}(n,i,nP(this,"style."+n,e))).each(function bUe(n,e){var t,i,r,a,s="style."+e,o="end."+s;return function(){var c=q0(this,n),l=c.on,u=null==c.value[s]?a||(a=Kne(e)):void 0;(l!==t||r!==u)&&(i=(t=l).copy()).on(o,r=u),c.on=i}}(this._id,n)):this.styleTween(n,function wUe(n,e,t){var i,s,r=t+"";return function(){var o=Mg(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}(n,i,e),t).on("end.style."+n,null)},styleTween:function EUe(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,SUe(n,e,t??""))},text:function DUe(n){return this.tween("text","function"==typeof n?function LUe(n){return function(){var e=n(this);this.textContent=e??""}}(nP(this,"text",n)):function TUe(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function RUe(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;return this.tween(e,BUe(n))},remove:function gUe(){return this.on("end.remove",function pUe(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}(this._id))},tween:function wVe(n,e){var t=this._id;if(n+="",arguments.length<2){for(var o,i=Qu(this.node(),t).tween,r=0,s=i.length;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((null==e?_Ve:yVe)(t,n,e))},delay:function tUe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?JVe:eUe)(e,n)):Qu(this.node(),e).delay},duration:function rUe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?nUe:iUe)(e,n)):Qu(this.node(),e).duration},ease:function oUe(n){var e=this._id;return arguments.length?this.each(sUe(e,n)):Qu(this.node(),e).ease},easeVarying:function cUe(n){if("function"!=typeof n)throw new Error;return this.each(function aUe(n,e){return function(){var t=e.apply(this,arguments);if("function"!=typeof t)throw new Error;q0(this,n).ease=t}}(this._id,n))},end:function kUe(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var a={value:o},c={value:function(){0==--r&&s()}};t.each(function(){var l=q0(this,i),u=l.on;u!==n&&((e=(n=u).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),0===r&&s()})},[Symbol.iterator]:mf[Symbol.iterator]};var OUe={time:null,delay:0,duration:250,ease:function zUe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function NUe(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}Iv.prototype.interrupt=function pVe(n){return this.each(function(){RM(this,n)})},Iv.prototype.transition=function VUe(n){var e,t;n instanceof gf?(e=n._id,n=n._name):(e=Xne(),(t=OUe).time=Xk(),n=null==n?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var c,o=i[s],a=o.length,l=0;l<a;++l)(c=o[l])&&BM(c,n,e,l,o,t||NUe(c,e));return new gf(i,this._parents,n,e)};Math;function Nv(n){return{type:n}}function nie(n){for(var i,e=-1,t=n.length,r=n[t-1],s=0;++e<t;)s+=(i=r)[1]*(r=n[e])[0]-i[0]*r[1];return s/2}function t6(n,e){if(n=function KUe(n){let e;for(;e=n.sourceEvent;)n=e;return n}(n),void 0===e&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}function ro(n){return"string"==typeof n?new n4([[document.querySelector(n)]],[document.documentElement]):new n4([[n]],mne)}["w","e"].map(Nv),["n","s"].map(Nv),["n","w","e","s","nw","ne","sw","se"].map(Nv);const hP={capture:!0,passive:!1};function fP(n){n.preventDefault(),n.stopImmediatePropagation()}function XUe(n){var e=n.document.documentElement,t=ro(n).on("dragstart.drag",fP,hP);"onselectstart"in e?t.on("selectstart.drag",fP,hP):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function YUe(n,e){var t=n.document.documentElement,i=ro(n).on("dragstart.drag",null);e&&(i.on("click.drag",fP,hP),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function iie(n){return((n=Math.exp(n))+1/n)/2}const tGe=function n(e,t,i){function r(s,o){var w,C,a=s[0],c=s[1],l=s[2],p=o[2],g=o[0]-a,_=o[1]-c,y=g*g+_*_;if(y<1e-12)C=Math.log(p/l)/e,w=function(P){return[a+P*g,c+P*_,l*Math.exp(e*P*C)]};else{var x=Math.sqrt(y),M=(p*p-l*l+i*y)/(2*l*t*x),T=(p*p-l*l-i*y)/(2*p*t*x),I=Math.log(Math.sqrt(M*M+1)-M),F=Math.log(Math.sqrt(T*T+1)-T);C=(F-I)/e,w=function(P){var R=P*C,k=iie(I),W=l/(t*x)*(k*function eGe(n){return((n=Math.exp(2*n))-1)/(n+1)}(e*R+I)-function JUe(n){return((n=Math.exp(n))-1/n)/2}(I));return[a+W*g,c+W*_,l*k/iie(e*R+I)]}}return w.duration=1e3*C*e/Math.SQRT2,w}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o;return n(o,a,a*a)},r}(Math.SQRT2,2,4),UM=n=>()=>n;function nGe(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function X0(n,e,t){this.k=n,this.x=e,this.y=t}X0.prototype={constructor:X0,scale:function(n){return 1===n?this:new X0(this.k*n,this.x,this.y)},translate:function(n,e){return 0===n&0===e?this:new X0(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dP=new X0(1,0,0);function pP(n){n.stopImmediatePropagation()}function Vv(n){n.preventDefault(),n.stopImmediatePropagation()}function rGe(n){return!(n.ctrlKey&&"wheel"!==n.type||n.button)}function sGe(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n).hasAttribute("viewBox")?[[(n=n.viewBox.baseVal).x,n.y],[n.x+n.width,n.y+n.height]]:[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]:[[0,0],[n.clientWidth,n.clientHeight]]}function rie(){return this.__zoom||dP}function oGe(n){return-n.deltaY*(1===n.deltaMode?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function aGe(){return navigator.maxTouchPoints||"ontouchstart"in this}function cGe(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}let GM={};class sl{constructor(){this.classes=[],this.transform="",this.selector="",this.index=0,this.visible=!0,this.outOfDesign=!1,this.theoretic=!1,this.loaded=!1,this._lineThickness=1,this.tooltip=e=>`<b>${this.name?this.name:this.selector}</b>`}get lineThickness(){return this._lineThickness}set lineThickness(e){this._lineThickness=e}draw(e){return Da(function*(){})()}redraw(e){}init(e,t){}show(e){return(this.floor===this.svgUpdate.floor||this.floor===tt.all)&&!this.theoretic&&this.visible&&!this.outOfDesign}update(e){var t=this;return Da(function*(){t.svgUpdate=e,t.onUpdate(t.svgUpdate.theme);const i=t.svgUpdate.floor;t.meterPerPixel=t.svgUpdate.meterPerPixel,t.svgUpdate.redrawAll&&(void 0!==t.svgUpdate.theme.showTower?void 0===t.floor&&t.parent&&t.parent.floor&&(t.floor=t.parent.floor):t.floor=tt.all,t.init(i,t.svgUpdate.theme),yield t.draw(i)),t.show(i)&&(yield t.redraw(i))})()}createSelector(){if(!this.selector)if(this.parent&&(this.parent.selector?this.selector=this.parent.selector:(this.floor===tt.ground&&(this.selector="L0"),this.floor===tt.top&&(this.selector="L1"))),void 0!==this.name)this.selector+=`-${this.name.replace(/\s/g,"")}`;else{let e=this.constructor.name;"sensorType"in this&&(e=this.sensorType),e in GM||(GM[e]=0),GM[e]++,this.selector+=`-${e}-${GM[e]}`}}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),this.svg.node().classList.add("selected")}setClass(e){!e.node()||!this.classes||this.classes.forEach(t=>{e.node().classList.add(t)})}}class gP extends sl{constructor(e){super(),this.coords=[],this.floor=tt.ground,this.theoretic=!1,this.tooltip=()=>(console.log(this.selector),`Footprint\n    <br>${this.floor}-level\n    <br>${this.area()}m2`),this.area=()=>Math.abs(An(nie(this.coords),1)),Object.assign(this,e)}setup(){}draw(e){var t=this;return Da(function*(){void 0===t.svg&&(t.svg=ro(`#${t.selector}`),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.classes.push("bg-fill")),t.show(e)?(t.svg.attr("points",t.coords.join(" ")),t.setClass(t.svg)):t.svg.attr("points","")})()}}let Uv={};var kn=(()=>{return(n=kn||(kn={})).outer="outer",n.inner="inner",n.theoretic="theoretic",kn;var n})(),ot=(()=>{return(n=ot||(ot={})).in="in",n.out="out",n.left="left",n.right="right",ot;var n})(),ni=(()=>{return(n=ni||(ni={})).inside="inside",n.outside="outside",n.tower="tower",n.straight="straight",ni;var n})();class ei extends sl{constructor(e){super(),this.origin=[0,0],this.orientation="",this.ceiling=-1,this.gable=!1,this.tower=!1,this.tooltip=()=>`Wall <b>${this.orientation}</b> (${this.parent instanceof gP?"outer wall":"of "+this.parent+" room"} ) \n    <br>Inside ${this.getLength(ot.in,2)} m2\n    <br>Outside ${this.outerWallLength=this.getLength(ot.out,2)} m2`,Object.assign(this,e)}createSelector(){this.selector=this.parent.selector.replace("Footprint-1","outer");const e=p1(this.sides[ot.in][0],this.sides[ot.in][1]);this.orientation=0===e?"North":45===e?"NortEast":-45===e||315===e?"NorthWest":90===e?"East":180===e?"South":270===e||-90===e?"West":`${e}`.split(".")[0],this.selector+=`-${this.orientation}Wall`,this.selector in Uv||(Uv[this.selector]=0),Uv[this.selector]++,Uv[this.selector]>1&&(this.selector+=`-${Uv[this.selector]}`)}draw(e){var t=this;return Da(function*(){if(void 0===t.svg&&(t.svg=ro(`#${t.selector}`),t.svgOrigin=t.svg.select(".wall-origin"),t.svgLeft=t.svg.select(".wall-left"),t.svgRight=t.svg.select(".wall-right"),t.svgFill=t.svg.select(".wall-fill"),t.type===kn.outer&&(t.thickness=t.parent.parent.wallOuterThickness),t.type===kn.inner&&(t.thickness=t.parent.parent.wallInnerThickness),t.svg.node()&&t.svg.node().classList.add(`type-${t.type}`)),!t.show(e))return t.svgFill.attr("points",""),t.svgLeft.attr("points",""),t.svgRight.attr("points",""),void t.svgOrigin.attr("r","0");t.svgOrigin.attr("cx",t.origin[0]).attr("cy",t.origin[1]),t.sides.in&&t.sides.out&&t.svgFill.attr("points",[...t.sides.in,...[...t.sides.out].reverse()].join(" "));for(let i of Object.keys(ot)){const r=i;if(!(r in t.sides))return;let s;s=r===ot.in?t.svgLeft:t.svgRight,s.attr("points",t.sides[r].join(" ")),s.node()&&s.node().classList.add(`side-${r}`)}t.innerWallLength=t.getLength(ot.in),t.outerWallLength=t.getLength(ot.out)})()}redraw(e){this.svgOrigin&&this.svgOrigin.attr("r",this.meterPerPixel*this.lineThickness*3),this.svgLeft&&this.svgLeft.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===kn.theoretic?4:1)),this.svgRight&&this.svgRight.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===kn.theoretic?4:1))}getLength(e,t=2){const i=this.sides[e];return i&&i[0]&&i[1]?An(Xa(...i),t):0}getArea(e,t=2){const i=this.getLength(e);return 0===i?0:An(i*this.ceiling,t)}getPosition(e,t,i=0){const r=this.sides[e],s=this.getLength(e)*t,o=p1(r[0],r[1]);return io(o,s+i,r[0])}drawTheoretic(e,t,i){this.thickness=i,"n"===e&&this.drawByRoom(0,1,t,ni.straight,ni.straight),"e"===e&&this.drawByRoom(1,2,t,ni.straight,ni.straight),"s"===e&&this.drawByRoom(2,3,t,ni.straight,ni.straight),"w"===e&&this.drawByRoom(3,0,t,ni.straight,ni.straight)}drawByRoom(e,t,i,r,s){if(!1===this.visible)return void(this.sides={[ot.in]:[[0,0],[0,0]],[ot.out]:[[0,0],[0,0]]});this.type===kn.inner?(this.thickness=i.wallInnerThickness,this.ceiling=i.cross.ceilingHeight):this.type===kn.outer?(this.thickness=i.wallOuterThickness,this.ceiling=i.cross.outerWallHeight):this.type===kn.theoretic?this.ceiling=i.cross.ceilingHeight:console.error(this);const o=(f,p,g)=>p===ni.inside&&0===f?g+45:p===ni.inside&&1===f||p===ni.outside&&0===f?g-45:p===ni.outside&&1===f?g+45:p===ni.tower&&0===f?g+67.5:p===ni.tower&&1===f?g-67.5:p===ni.straight?g:void 0,a=f=>{const p=Math.sqrt(this.thickness**2*2),g=i.tower;return f===ni.inside||f===ni.outside?p:f===ni.tower?Xa(g.innerCoords[0],g.outerCoords[7]):f===ni.straight?this.thickness:void 0};let c=this.parent.coords[e],l=this.parent.coords[t];this.origin=c,this.innerWallLength=Xa(c,l);let u=p1(c,l)-90;this.sides={[ot.in]:[c,l]},this.type!==kn.theoretic&&(this.sides[ot.out]=[io(o(0,r,u),a(r),c),io(o(1,s,u),a(s),l)])}getFootPrint(){if(!this.sides)return[];const e=[];return this.sides[ot.in]&&e.push(...this.sides[ot.in]),this.sides[ot.out]&&e.push(...this.sides[ot.out].reverse()),e}}class Ht extends sl{constructor(e){super(),this.points=[],this.offset=[0,0],this.offsetWall=.3,this.elevation=.3,this.verticalCableLength=0,this.cableOnly=!1,this.sensorOnly=!1,this.wallSide=ot.in,this.cableLength=0,this.amount=1,this.fontSize=14,this.visible=!1,this.showBadge=!1,this.getSensorType=t=>Object.values(Ge).find(r=>t.includes(r)),this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Cable length ${An(this.cableLength,1)}m2`),this.group&&(t+=`<br>Group ${this.group}`),t},Object.assign(this,e)}draw(e){var t=this;return Da(function*(){if(void 0===t.svg){if(!t.show(e))return;(void 0===t.floor||e in t.parent)&&(t.floor=t.parent.floor),t.svg=ro(`#${t.selector}.sensor-cable`),t.sensorType===Ge.temperature&&(t.sensorOnly=!0),t.cableOnly?(t.lineThickness=2,t.classes.push("sensor-room-cable")):(t.svgG=ro(`#${t.selector}.sensor-g`),t.showBadge=t.amount>=2&&void 0!==t.svgG,t.svgIcon=ro(`#${t.selector}.sensor-icon`),t.showBadge&&(t.svgBadge=t.svgG.append("g"),t.svgBadgeCircle=t.svgBadge.append("circle"),t.svgBadgeText=t.svgBadge.append("text"))),t.group&&t.classes.push(`el-group-${t.group}`),t.cableType&&t.classes.push(`cable-${t.cableType}`),t.classes.push(`sensor-${t.sensorType}`)}if(!t.show(e))return t.svgIcon&&t.svgIcon.attr("xlink:href",""),t.svg&&t.svg.attr("points",""),t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.attr("font-size",0),void(t.showBadge=!1);t.svgIcon&&t.svgIcon.attr("xlink:href",`#icon-${t.getSensorType(t.selector)}`);const i=t.calcOffsetWall();t.cableOnly||(t.svgIcon.attr("x",`${i[0]}px`).attr("y",`${i[1]}px`),t.setClass(t.svgG),t.setClass(t.svg)),t.showBadge?t.badge(i):(t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.text("")),t.sensorOnly||(t.svg.attr("points",t.cablePoints(i,e).join(" ")).attr("transform",t.transform),t.setClass(t.svg),t.cableLength=t.getLength())})()}redraw(e){!this.show(e)||(this.svgBadge&&(this.svgBadge.attr("stroke-width",this.meterPerPixel*this.lineThickness*1).attr("transform",`translate(${10*this.meterPerPixel} ${-10*this.meterPerPixel})`),this.svgBadgeCircle.attr("r",8*this.meterPerPixel),this.svgBadgeText.attr("font-size",this.meterPerPixel*this.fontSize).text(`${this.amount}`)),this.svg&&(this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.cableType===Ru.OutsidePOE&&this.svg.attr("stroke-dasharray",`${this.meterPerPixel*this.lineThickness*10*.5} ${this.meterPerPixel*this.lineThickness*10}`)))}cablePoints(e,t){return this.show(t)?[e,...this.points]:[]}getLength(){let t=0;return this.points.forEach((i,r,s)=>{r+1!==this.points.length&&(t+=((i,r)=>Math.hypot(r[0]-i[0],r[1]-i[1]))(i,s[r+1]))}),An(t+this.verticalCableLength+.3*this.amount)}badge(e){this.svgBadge.attr("class","sensor-badge"),this.svgBadgeCircle.attr("fill",2===this.amount?"white":"#333").attr("cx",e[0]).attr("cy",e[1]).attr("stroke","black"),this.svgBadgeText.attr("fill",2===this.amount?"black":"white").attr("x",e[0]).attr("y",e[1]).attr("text-anchor","middle").attr("class","sensor-badge-text").attr("stroke","none").attr("dominant-baseline","middle").text(`${this.amount}`)}calcOffsetWall(){if(this.parent instanceof ei){const t=this.parent.sides[this.wallSide],i=p1(t[0],t[1]);return io(i+90,this.offsetWall,this.points[0])}return[this.points[0][0]+this.offset[0],this.points[0][1]+this.offset[1]]}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),[Ge.socket,Ge.perilex].includes(this.sensorType)?document.querySelectorAll(`.el-group-${this.group}`).forEach((e,t)=>{e.classList.add("selected")}):(this.svg.node().classList.add("selected"),this.svgIcon.node().classList.add("selected"))}}let uGe=(()=>{class n{constructor(){this.class="base",this.html="dummy"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Bn({type:n,selectors:[["tooltip"]],hostAttrs:[1,"popup"],hostVars:2,hostBindings:function(t,i){2&t&&BA(i.class)},decls:2,vars:1,consts:[[3,"innerHtml"],[1,"popup-arrow","popup-arrow-mid"]],template:function(t,i){1&t&&$e(0,"div",0)(1,"div",1),2&t&&Ce("innerHtml",i.html,j3)},styles:[".popup-arrow-mid{left:calc(50% - 10px)!important;background:inherit}[_nghost-%COMP%]{position:relative!important}"]}),n})();class Ya extends sl{constructor(e){super(),this.name="",this.coords=[],Object.assign(this,e)}draw(e){var t=this;return Da(function*(){void 0===t.svg&&(t.svg=ro(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){void 0!==this.svg?this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness):console.log("error! svg = undefined",`#${this.selector}`,this.svg)}square(e,t,i){this.coords=[[i[0],i[1]],[i[0]+e,i[1]],[i[0]+e,i[1]+t],[i[0],i[1]+t]]}}class C3 extends sl{constructor(e){super(),this.coords=[],this.dash=[],Object.assign(this,e)}draw(e){var t=this;return Da(function*(){void 0===t.svg&&(t.svg=ro(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){this.svg&&this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness).attr("stroke-dasharray",this.dash.map(t=>t*this.meterPerPixel*this.lineThickness).join(" "))}}class QM extends sl{constructor(e){super(),this.d="",Object.assign(this,e)}draw(e){var t=this;return Da(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=ro(`#${t.selector}`)}t.svg.attr("d",t.d).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}setClass(e){!e.node()||0===this.classes.length||e.node().classList.add(this.classes)}}class g1 extends sl{constructor(e){super(),this.textRotate=0,this.fontSize=12,this.a=[0,0],this.b=[4,4],this.offsetPixels=0,this.offsetMeters=0,this.direction=90,this._lineThickness=.6,this.decimals=1,this.classes=["measure"],Object.assign(this,e)}between(e,t){return[e[0]+(t[0]-e[0])/2,e[1]+(t[1]-e[1])/2]}draw(e){var t=this;return Da(function*(){if(void 0===t.svg&&(t.svg=ro(`#${t.selector}`),t.setClass(t.svg),t.svgLine=t.svg.append("polyline"),t.svgArrow1=t.svg.append("text"),t.svgArrow2=t.svg.append("text"),t.svgText=t.svg.append("text")),!t.show(e))return t.svgLine.attr("points",""),t.svgText.text(""),t.svgArrow1.text(""),void t.svgArrow2.text("");let i=[...t.a],r=[...t.b],s=[0,0];90===t.direction&&(i=[i[0],Math.max(i[1],r[1])],r=[r[0],Math.max(i[1],r[1])]),-90===t.direction&&(i=[i[0],Math.min(i[1],r[1])],r=[r[0],Math.min(i[1],r[1])]),0===t.direction&&(i=[Math.max(i[0],r[0]),i[1]],r=[Math.max(i[0],r[0]),r[1]]),180===t.direction&&(i=[Math.min(i[0],r[0]),i[1]],r=[Math.min(i[0],r[0]),r[1]]);const o=t.offsetPixels*t.meterPerPixel,a=io(t.direction,o+t.offsetMeters,i),c=io(t.direction,o+t.offsetMeters,r),u=t.between(a,c);var f=c[0]-a[0],p=c[1]-a[1],g=An(Math.sqrt(f*f+p*p),t.decimals);t.svg.style("visibility",0===g?"hidden":""),t.svgLine.attr("points",[t.a,i,a,c,r,t.b].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`\n        translate(${u[0]+s[0]} ${u[1]+s[1]}) \n        rotate(${t.textRotate})\n        `).text(g);let _=90;[90,0].includes(t.direction)&&(_=-90),t.svgArrow1.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n        translate(${a[0]} ${a[1]}) \n        rotate(${t.direction+_})\n        `).text("<"),t.svgArrow2.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n          translate(${c[0]} ${c[1]}) \n          rotate(${t.direction+_+180})\n          `).text("<")})()}redraw(e){this.svgArrow2&&(this.svgArrow2.attr("font-size",E5(16,this.meterPerPixel,this.svgUpdate.print)),this.svgArrow1.attr("font-size",E5(16,this.meterPerPixel,this.svgUpdate.print))),this.svgText&&this.svgText.attr("font-size",E5(this.fontSize,this.meterPerPixel,this.svgUpdate.print)).attr("stroke-width",6*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",this.meterPerPixel*this.lineThickness)}}const ol=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],hGe=Math.PI/180,fGe=180/Math.PI;function mP(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ol[255&n]+ol[n>>8&255]+ol[n>>16&255]+ol[n>>24&255]+"-"+ol[255&e]+ol[e>>8&255]+"-"+ol[e>>16&15|64]+ol[e>>24&255]+"-"+ol[63&t|128]+ol[t>>8&255]+"-"+ol[t>>16&255]+ol[t>>24&255]+ol[255&i]+ol[i>>8&255]+ol[i>>16&255]+ol[i>>24&255]).toLowerCase()}function yi(n){return n*hGe}function oie(n){return n*fGe}class WM extends sl{constructor(){super(),this.selector="g-distance",this.point1=[-999,-999],this.point2=void 0,this.onUpdate=()=>{},this.floor=tt.all}draw(e){var t=this;return Da(function*(){if(void 0===t.svg&&(t.svg=ro(`#${t.selector}`),t.svgCircle1=t.svg.append("circle").style("fill","var(--accent-color)").style("cursor","crosshair").attr("stroke-width",0),t.svgCircle2=t.svg.append("circle").style("cursor","crosshair").style("fill","var(--accent-color)").attr("stroke-width",0),t.svgLine=t.svg.append("polyline").style("stroke","var(--accent-color)"),t.svgText=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)"),t.svgTextAngle=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)")),!t.show(e))return void t.clear();if(t.svgCircle1.attr("cx",t.point1[0]).attr("cy",t.point1[1]),!t.point2)return void t.clearExceptFirst();t.svgCircle2.attr("cx",t.point2[0]).attr("cy",t.point2[1]),t.svgLine.attr("points",[t.point1,t.point2].join(" "));const i=Xa(t.point1,t.point2);var s;t.svgText.text((s=i)<1200?`${An(1e3*s,0)}mm`:`${An(s,3)}m`),t.svgTextAngle.text(`${Math.abs(p1(t.point1,t.point2,0))}\xb0`),t.setClass(t.svg)})()}clear(){this.clearExceptFirst(),this.svgCircle1.attr("cx",-999).attr("cy",-999)}clearExceptFirst(){this.svgCircle2.attr("cx",-999).attr("cy",-999),this.svgText.attr("transform","translate(-999, -999)"),this.svgTextAngle.attr("transform","translate(-999, -999)"),this.svgLine.attr("points",[])}redraw(e){if(this.svgCircle1&&this.svgCircle1.attr("r",4*this.meterPerPixel),this.svgCircle2&&this.svgCircle2.attr("r",4*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",2*this.meterPerPixel),this.svgText&&this.svgTextAngle&&this.point2){const[t,i]=ge(S5(this.point1,this.point2),[0,-20*this.meterPerPixel]);this.svgText.attr("transform",`translate(${t}, ${i})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel);const[r,s]=ge(this.point1,[-20*this.meterPerPixel,0]);this.svgTextAngle.attr("transform",`translate(${r}, ${s})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel)}}}var Dt=(()=>{return(n=Dt||(Dt={})).topFloor="topFloor",n.wallOutside="wallOutside",n.wallInside="wallInside",n.bendInside="bendInside",n.bendOutside="bendOutside",n.topInside="topInside",n.topOutside="topOutside",n.lowestInside="lowestInside",n.lowestOutside="lowestOutside",n.groundFloorInside="groundFloorInside",n.groundFloorOutside="groundFloorOutside",Dt;var n})(),Mi=(()=>{return(n=Mi||(Mi={})).ground="ground",n.crawlerFloor="crawlerFloor",n.crawlerCeiling="crawlerCeiling",n.groundFloor="groundFloor",n.ceiling="ceiling",n.topFloor="topFloor",n.towerTop="towerTop",Mi;var n})(),H1=(()=>{return(n=H1||(H1={})).outer="outer",n.inner="inner",n.sketch="sketch",n.shadow="shadow",H1;var n})(),Ul=(()=>{return(n=Ul||(Ul={})).roof70="roof70",n.roofCircle="roofCircle",n.roofCircleAnd70="roofCircleAnd70",Ul;var n})();class gGe{constructor(){this.innerWidth=-1,this.wallOuterThickness=-1,this.ceilingHeight=-1,this.floorAboveGround=-1,this.crawlerHeight=-1,this.crawlerSpace=!1,this.topFloorThickness=.4,this.groundFloorThickness=.48,this.roofCenter=[],this.roofThickness=.4,this.roofCirclePullDown=1,this.roofCircleExtra=-1,this.roofCircleWalls=1,this.roof70offset=.6,this.roof70Extension=1.3,this.roof70Walls=1.4,this.roofRidgeHight=.6,this.roofRidgeWidth=.04,this.bendPoint=[-1,-1],this.bendPointInner=[-1,-1],this.elevations={},this.roofPoints={},this.houseHeight=-1,this.outerWallHeight=-1,this.innerWallHeight=-1,this.gableWallArea=-1,this.minimumHeight=1.5,this.minimumHeightWidth=-1,this.minimumHeightRoom=2.3,this.minimumHeightRoomWidth=-1,this.roofStyle=Ul.roof70,this.viewedRoofStyle=Ul.roof70,this.parts=[],this.create()}create(){this.drawRoofCircle(),this.drawBuilding(),this.drawRoof70(),this.drawHelpers(),this.parts.push(new WM)}calculate(e){this.house=e,this.innerWidth=this.house.outerBase,this.wallOuterThickness=this.house.wallOuterThickness,this.roofCircleExtra=An(Math.cos(yi(65))*this.roofCirclePullDown,3),this.bendPoint=[this.roof70offset,-this.roof70offset*Math.tan(yi(70))-this.roof70Walls],this.bendPointInner=[this.roof70offset,-this.roof70offset*Math.tan(yi(70))];const i=0-this.groundFloorThickness,o=i+this.groundFloorThickness+this.ceilingHeight;if(this.elevations={[Mi.ground]:i-(this.crawlerSpace?this.floorAboveGround:0)+this.groundFloorThickness,[Mi.crawlerFloor]:i-(this.crawlerSpace?this.crawlerHeight:0),[Mi.crawlerCeiling]:i,[Mi.groundFloor]:0,[Mi.ceiling]:o,[Mi.topFloor]:o+this.topFloorThickness},this.roofCenter=[An(this.house.outerBase/2),An(this.elevations[Mi.topFloor])],this.roofPoints={[Dt.topFloor]:[this.wallOuterThickness,this.roofCenter[1]],[Dt.groundFloorOutside]:[0,0],[Dt.groundFloorInside]:[this.wallOuterThickness,0]},this.viewedRoofStyle===Ul.roof70){const c=this.pointOf70Roof();this.roofPoints={...this.roofPoints,[Dt.bendOutside]:c[2],[Dt.bendInside]:c[11],[Dt.topInside]:c[10],[Dt.topOutside]:c[3],[Dt.lowestInside]:c[13],[Dt.lowestOutside]:c[0]}}if(this.viewedRoofStyle===Ul.roofCircle){const c=(l,u)=>{const[f,p]=this.pointOnCircleRoof(Math.PI*(-(4-l)/4),u);return[f,p]};this.roofPoints={...this.roofPoints,[Dt.bendOutside]:c(1,H1.outer),[Dt.bendInside]:c(1,H1.inner),[Dt.topInside]:c(2,H1.inner),[Dt.topOutside]:c(2,H1.outer),[Dt.lowestInside]:c(0,H1.inner),[Dt.lowestOutside]:c(0,H1.outer)}}this.roofPoints[Dt.wallInside]=this.calcPointUnderInnerWall(),this.roofPoints[Dt.wallOutside]=this.calcPointUnderOuterWall(),Object.entries(this.roofPoints).forEach(([c,l],u)=>{this.elevations[c]=An(l[1])}),this.gableWallArea=this.calculateGable(),this.innerWallHeight=Math.abs(this.roofPoints[Dt.wallInside][1]),this.outerWallHeight=Math.abs(this.roofPoints[Dt.wallOutside][1]),this.elevations[Mi.towerTop]=this.elevations[Dt.topOutside]-.5,this.minimumHeightWidth=An(this.getIntersectionWithRoof(this.minimumHeight)[0]),this.minimumHeightRoomWidth=An(this.getIntersectionWithRoof(this.minimumHeightRoom)[0]),this.lowerAngle=An(p1(this.roofPoints[Dt.lowestOutside],this.roofPoints[Dt.bendOutside]),3),this.upperAngle=An(p1(this.roofPoints[Dt.bendOutside],this.roofPoints[Dt.topOutside]),3)}calculateGable(){const t=this.roofPoints[Dt.wallInside],i=this.roofPoints[Dt.bendInside],r=this.roofPoints[Dt.topInside];return 2*t4([t[1]*i[0]+(i[1]-t[1])*i[0]/2+(r[0]-i[0])*i[1]+(r[0]-i[0])*(r[1]-i[1])/2])}calcPointUnderInnerWall(){const e=this.roofPoints[Dt.lowestInside];let[t,i]=xg([[this.wallOuterThickness,-100],[this.wallOuterThickness,100]],[e,this.roofPoints[Dt.bendInside]]);return[t,i]}calcPointUnderOuterWall(){const e=this.roofPoints[Dt.lowestInside];let[t,i]=xg([[0,-100],[0,100]],[e,this.roofPoints[Dt.bendInside]]);return e[0]>0&&(i=e[1]),[t,i]}drawBuilding(){this.parts.push(new Ya({selector:"building-ground-fill",onUpdate:function(e){this.square(e.innerWidth+3,Math.abs(e.elevations[Mi.ground])+1.5,[-1.5,-e.elevations[Mi.ground]])}})),this.parts.push(new Ya({selector:"building-ground",onUpdate:function(e){const i=Math.abs(e.elevations[Mi.ground]);this.square(e.innerWidth+3,e.crawlerHeight-i+1.5,[-1.5,i])}})),this.parts.push(new C3({selector:"building-ground-line",onUpdate:function(e){const t=e.elevations[Mi.ground];this.coords=[[-2,-t],[e.innerWidth+2,-t]]}})),this.parts.push(new Ya({selector:"building-crawler",onUpdate:function(e){this.visible=e.crawlerSpace,this.square(e.innerWidth-2*e.wallOuterThickness,e.crawlerHeight,[e.wallOuterThickness,-e.elevations[Mi.crawlerCeiling]])}})),this.parts.push(new Ya({selector:"building-walls",onUpdate:function(e){const t=e.elevations[Mi.topFloor];this.square(e.innerWidth,t+-e.elevations[Mi.crawlerFloor],[0,-t])}})),this.parts.push(new Ya({selector:"building-room",onUpdate:function(e){this.square(e.innerWidth-2*e.wallOuterThickness,e.ceilingHeight,[e.wallOuterThickness,-e.elevations[Mi.ceiling]])}})),this.parts.push(new Ya({selector:"building-fill",onUpdate:function(e){const i=e.elevations[Mi.topFloor]+(e.viewedRoofStyle===Ul.roof70?e.roof70Walls:e.roofCircleWalls);this.square(e.innerWidth,i-e.elevations[Mi.ground],[0,-i])}})),this.parts.push(new Ya({selector:"building-roof-70-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[0,-e.elevations[Mi.topFloor]-e.roof70Walls])}})),this.parts.push(new Ya({selector:"building-roof-70-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Mi.topFloor]-e.roof70Walls])}})),this.parts.push(new Ya({selector:"building-roof-circle-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Mi.topFloor]-e.roofCircleWalls])}})),this.parts.push(new Ya({selector:"building-roof-circle-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[0,-e.elevations[Mi.topFloor]-e.roofCircleWalls])}}))}drawHelpers(){this.parts.push(new g1({selector:"minimum",floor:tt.all,direction:0,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Mi.topFloor];this.offsetPixels=-20;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=-1,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new g1({selector:"minimum-h",floor:tt.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Mi.topFloor];this.offsetPixels=0;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=1.5,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new g1({selector:"minimum-room",floor:tt.all,direction:0,textRotate:45,decimals:3,onUpdate:function(e){const t=e.elevations[Mi.topFloor];this.offsetPixels=20;const i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1;const r=e.innerWidth-i[0];this.a=[e.innerWidth,-t],this.b=[r,-i[1]]}})),this.parts.push(new g1({selector:"minimum-room-h",floor:tt.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){this.offsetPixels=0;const t=e.elevations[Mi.topFloor],i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1.5;const r=e.innerWidth-i[0];this.a=[r,-i[1]],this.b=[r+i[0]-e.wallOuterThickness,-t]}})),this.parts.push(new g1({selector:"lower-roof",floor:tt.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Dt.bendInside],i=e.roofPoints[Dt.wallInside];this.offsetPixels=0,this.offsetMeters=-1.5,this.a=[i[0],-i[1]],this.b=[t[0],-t[1]],this.direction=p1(this.a,this.b)-90}})),this.parts.push(new g1({selector:"higher-roof",floor:tt.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Dt.topInside],i=e.roofPoints[Dt.bendInside];this.offsetPixels=0,this.offsetMeters=1.5,this.a=[i[0],-i[1]],this.b=[t[0],-t[1]],this.direction=p1(this.a,this.b)-90}}))}getIntersectionWithRoof(e){const t=this.elevations[Mi.topFloor]+e,i=[];return[[this.roofPoints[Dt.topFloor],this.roofPoints[Dt.wallInside]],[this.roofPoints[Dt.wallInside],this.roofPoints[Dt.bendInside]],[this.roofPoints[Dt.bendInside],this.roofPoints[Dt.topInside]]].forEach((c,l,u)=>{const f=xg(c,[[-100,t],[100,t]]);i.push(f)}),i.sort((c,l)=>l[0]-c[0])[0]}drawRoofCircle(){this.parts.push(new Ya({selector:"roof-circle-fill",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),H1.outer))].map(t=>[t[0],-t[1]])}})),this.parts.push(new Ya({selector:"roof-circle-shadow",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),H1.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),H1.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new Ya({selector:"roof-circle",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),H1.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),H1.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new QM({selector:"roof-circle__h-circle",lineThickness:2,onUpdate:function(e){const[t,i]=e.pointOnCircleRoof(0,H1.outer),r=t-e.innerWidth,s=2*r+e.innerWidth;this.d=`M${s},0 a1,1 0 0,0 ${-s},0`,this.transform=`translate(${-r} ${-i})`}})),this.parts.push(new Ya({selector:"roof-circle__h-line",lineThickness:2,onUpdate:function(e){const t=e.pointOnCircleRoof(Math.PI,H1.outer);this.coords=[e.pointOnCircleRoof(Math.PI*(-3/4),H1.sketch),[e.roofCenter[0],t[1]],t,e.pointOnCircleRoof(0,H1.outer),[e.roofCenter[0],t[1]],e.pointOnCircleRoof(Math.PI*(-1/4),H1.sketch)].map(function(i){return[i[0],-i[1]]})}}))}drawRoof70(){this.parts.push(new Ya({selector:"roof-70-fill",onUpdate:function(e){this.coords=e.pointOf70Roof().slice(0,7).map(([t,i])=>[t,-i])}})),this.parts.push(new Ya({selector:"roof-70-shadow",onUpdate:function(e){this.coords=e.pointOf70Roof(!0).map(([t,i])=>[t,-i])}})),this.parts.push(new Ya({selector:"roof-70",onUpdate:function(e){this.coords=e.pointOf70Roof().map(([t,i])=>[t,-i])}}))}pointOf70Roof(e=!1){const t=this.roofThickness/Math.sin(yi(70)),i=this.roofThickness/Math.tan(yi(70)),r=Math.sqrt(i**2+this.roofThickness**2),o=(Math.sin(yi(30)),this.innerWidth/2),a=this.roof70offset,c=a*Math.tan(yi(70))+this.roof70Walls,l=io(-40,r),u=a+l[0],f=c+l[1],_=(o-a)*Math.tan(yi(30))+c;return[this.angle(yi(110),this.roof70Extension,[0,-this.roof70Walls]),[0,-this.roof70Walls],[a,-c],[o,-_],[this.innerWidth-a,-c],[this.innerWidth,-this.roof70Walls],this.angle(yi(70),this.roof70Extension,[this.innerWidth,-this.roof70Walls]),this.angle(yi(70),this.roof70Extension,[this.innerWidth-t,-this.roof70Walls]),[this.innerWidth-t,-this.roof70Walls],[this.innerWidth-u,-f],ge([o,-_],[0,this.roofThickness/Math.cos(yi(30))]),[u,-f],[t,-this.roof70Walls],this.angle(yi(110),this.roof70Extension,[t,-this.roof70Walls])].map(([y,w])=>[An(y,40),An(this.roofCenter[1]+-w,40)])}pointOnCircleRoof(e,t){let i;const r=this.roofThickness/Math.cos(yi(22.5));t===H1.outer&&(i=this.innerWidth/2+this.roofCircleExtra),t===H1.inner&&(i=this.innerWidth/2-r+this.roofCircleExtra),t===H1.sketch&&(i=this.innerWidth/2+1.5*r+this.roofCircleExtra);const[s,o]=io(oie(e),i);return[An(this.roofCenter[0]+s),An(this.roofCenter[1]+Math.abs(o)+this.roofCircleWalls-this.roofCirclePullDown)]}angle(e,t,i=[0,0]){const r=t*Math.cos(e),s=t*Math.sin(e);return[r+i[0],s+i[1]]}}class z1 extends sl{constructor(e){super(),this.coords=[],this.floor=tt.ground,this.hole=!1,this.centralElectricity=[0,0],this.theoretic=!1,this.width=0,this.height=0,this.fontSize=12,this.tooltip=()=>{console.log(this.selector);let t=`Room <b>${this.name}</b> \n    <br>${this.floor}-level\n    <br>${this.area()}m2`;return this.width&&(t+=`<br>width: ${this.width}m`),this.height&&(t+=`<br>height: ${this.height}m`),t},this.area=()=>0===this.coords.length||this.hole?0:Math.abs(An(nie(this.coords),1)),this.volume=()=>this.floor===tt.top||this.hole||this.floor===tt.ground||this.hole?this.area()*this.parent.cross.ceilingHeight:void 0,this.squaredRoom=(t,i)=>{this.width=An(t),this.height=An(i),this.coords=[this.northWestCorner,ge(this.northWestCorner,[t,0]),ge(this.northWestCorner,[t,i]),ge(this.northWestCorner,[0,i])],this.center=ge(this.northWestCorner,[t/2,i/2]),this.centralElectricity=this.center},Object.assign(this,e)}setup(){}draw(e){var t=this;return Da(function*(){if(void 0===t.svg&&(t.svg=ro(`#${t.selector}`),t.svgRoom=t.svg.append("polygon"),t.function&&(t.svgText=t.svg.append("text"),t.svgText1=t.svgText.append("tspan"),t.svgText2=t.svgText.append("tspan"),t.svgText.attr("class","room-function-text")),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.hole&&(t.classes.push("room-hole"),t.svg.attr("filter","url(#inset-shadow)")),t.classes.push("bg-fill")),!t.show(e))return t.svgRoom.attr("points",""),void(t.function&&(t.svgText1.text(""),t.svgText2.text("")));t.svgRoom.attr("points",t.coords.join(" "));const r=t.center?t.center:(()=>{const s=t.coords.map(f=>f[0]),o=t.coords.map(f=>f[1]);return[(Math.min(...s)+Math.max(...s))/2,(Math.min(...o)+Math.max(...o))/2]})();t.function&&(t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]} ${r[1]}) `),t.svgText1.attr("x",0).attr("dy","0em").text(`${t.function}`),t.area()>5&&t.svgText2.attr("x",0).attr("dy","1.2em").text(`${t.area()} m\xb2`)),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",E5(this.fontSize,this.meterPerPixel,this.svgUpdate.print)).attr("stroke-width",6*this.meterPerPixel)}}class mGe extends sl{constructor(e){super(),this.last=!1,this.visible=!0,this.fontSize=14,Object.assign(this,e)}draw(e){var t=this;return Da(function*(){void 0===t.svg&&(t.svg=ro(`#${t.selector}`),t.svgRun=t.svg.select(".step-run"),t.svgRise=t.svg.select(".step-rise"),t.svgText=t.svg.select(".step-text"),t.last&&t.classes.push("last")),t.show(e)?(t.svg.style("display",""),t.svg.attr("transform",`translate(${t.index*t.parent.run}, ${-t.index*t.parent.rise})`),t.setClass(t.svg),t.svgRun.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[0,0],[0,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,0]].join(" ")),t.svgRise.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[t.parent.nose,t.parent.runThickness],[t.parent.nose,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.runThickness]].join(" ")),t.svgText.attr("font-size",t.fontSize*t.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*t.meterPerPixel).attr("transform",`\n        translate(${t.parent.run/2} ${16*-t.meterPerPixel}) \n        `).text(t.index)):t.svg.style("display","none")})()}}class aie extends sl{constructor(e){super(),this.name="",this.cx=0,this.cy=0,this.r=1,this._lineThickness=.2,Object.assign(this,e)}draw(e){var t=this;return Da(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=ro(`#${t.selector}`)}t.svg.attr("cx",t.cx).attr("cy",t.cy).attr("r",t.r).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}}class AGe extends sl{constructor(e){super(),this.floor=tt.all,this.name="step",this.last=!1,this.visible=!0,this.fontSize=10,this.walkLineXY=[0,0],this.nextWalkLineXY=[0,0],this.stringerXY=[0,0],this.nextStingerXY=[0,0],Object.assign(this,e)}draw(e){var t=this;return Da(function*(){if(void 0===t.svg&&(t.svg=ro(`#${t.selector}`),t.svgText=t.svg.select(".step-plan-text"),t.svgRise=t.svg.select(".step-plan-rise"),t.svgStep=t.svg.select(".step-plan-lines"),t.last&&t.classes.push("last")),!t.show(e))return t.svgStep.attr("points",""),t.svgRise.attr("points",""),void t.svgText.text("");const i=p1(t.walkLineXY,t.nextWalkLineXY),r=io(i-45,.8*t.parent.run,t.walkLineXY),s=p1(t.stringerXY,t.walkLineXY),o=p1(t.nextStingerXY,t.nextWalkLineXY),a=io(s,10,t.walkLineXY),c=io(o,10,t.nextWalkLineXY),l=Jte(t.stringers.out.coords,[t.stringerXY,a]).map(y=>({xy:y,d:Xa(y,t.stringerXY)})).sort((y,w)=>y.d-w.d).map(y=>y.xy)[0],u=Jte(t.stringers.out.coords,[t.nextStingerXY,c]).map(y=>({xy:y,d:Xa(y,t.nextStingerXY)})).sort((y,w)=>y.d-w.d).map(y=>y.xy)[0],f=t.stringers.out.coords[1],p=t.stringers.out.coords[2];let g=null,_=null;f[1]!==l[1]&&f[1]===u[1]&&(_=t.stringers.in.coords[1],g=t.stringers.out.coords[1]),p[0]!==l[0]&&p[0]===u[0]&&(_=t.stringers.in.coords[2],g=t.stringers.out.coords[2]),t.svgStep.attr("points",[t.walkLineXY,t.stringerXY,_,t.nextStingerXY,t.nextWalkLineXY,u,g,l].join(" ")),t.svgRise.attr("points",[io(s+90,t.parent.nose,l),io(s+90,t.parent.nose,t.stringerXY)].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]}, ${r[1]})`).text(t.index),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",this.meterPerPixel*this.fontSize),this.svgRise&&this.svgRise.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.svgStep&&this.svgStep.attr("stroke-width",this.meterPerPixel*this.lineThickness*1)}}class vGe{constructor(){this.totalRun=4.6,this.steps=19,this.runThickness=.02,this.riseThickness=.02,this.nose=.02,this.walkWidth=.8,this.walkLineOffset=.3,this.totalWidth=2.7,this.stepsFlightRight=9,this.stepsFlightLeft=2,this.stepsFlightMid=10,this.groundFloorTop=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.ceilingHeight=-1,this.floorThickness=-1,this.totalRise=-1,this.run=-1,this.rise=-1,this.stairOrigin=[0,0],this.totalHeight=-1,this.lesserHeight=-1,this.intersections={},this.parts=[],this.create()}create(){this.createBuilding(),this.createStep(),this.createMeasures(),this.createPlan(),this.parts.push(new WM)}calculate(e){this.house=e,this.ceilingHeight=this.house.cross.ceilingHeight,this.floorThickness=this.house.cross.topFloorThickness,this.groundFloorTop=0,this.topFloorTop=this.house.cross.elevations[Mi.topFloor],this.totalRise=this.topFloorTop-this.groundFloorTop,this.stairOrigin=[this.house.stramien.in.we.b,this.house.stramien.in.ns.b-5],this.angle=An(Math.atan(this.totalRise/this.totalRun)*(180/Math.PI),1),this.run=An(this.totalRun/this.steps),this.rise=An(this.totalRise/this.steps),this.optimizedStep=An(2*this.run+this.run),this.maxSteps=Math.ceil(this.totalRise/.182),this.minSteps=Math.ceil(this.totalRise/.22),this.stepsFlightMid=Math.floor((this.totalWidth-2*this.walkWidth)/this.run),this.stepsFlightRight=this.steps-this.stepsFlightMid-this.stepsFlightLeft;const[t,i]=[this.alongWalkLine(1)[1]-this.stairOrigin[1],this.alongWalkLine(this.steps+1)[1]-this.stairOrigin[1]].map(s=>Math.max(this.walkWidth,s));this.totalHeight=Math.max(t,i),this.lesserHeight=Math.min(t,i),this.calculateCorrectionArray();const r={coords:[ge(this.stairOrigin,[0*this.totalWidth,t]),ge(this.stairOrigin,[0*this.totalWidth,0]),ge(this.stairOrigin,[1*this.totalWidth,0]),ge(this.stairOrigin,[1*this.totalWidth,i])]};this.stringers={in:{coords:[ge(r.coords[0],[1*this.walkWidth,0*this.walkWidth]),ge(r.coords[1],[1*this.walkWidth,1*this.walkWidth]),ge(r.coords[2],[-1*this.walkWidth,1*this.walkWidth]),ge(r.coords[3],[-1*this.walkWidth,0*this.walkWidth])]},out:r}}createBuilding(){this.parts.push(new Ya({selector:"floor-groundfloor",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[[-e.run,e.groundFloorTop],[10,e.groundFloorTop],[10,e.groundFloorTop+e.floorThickness],[-e.run,e.groundFloorTop+e.floorThickness]]}})),this.parts.push(new Ya({selector:"floor-topfloor-shadow",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[-e.run,-e.topFloorTop],[-e.run,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new Ya({selector:"floor-topfloor",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[10,-e.topFloorTop],[10,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new QM({selector:"nose-line",floor:tt.all,parent:this,onUpdate:function(e){this.d=`M0 0 L${e.totalRun} ${-e.totalRise} `}})),this.parts.push(new QM({selector:"back-line",floor:tt.all,parent:this,onUpdate:function(e){const t=1*e.run+.2;this.d=`M${t} 0 L${io(-e.angle,-e.run/Math.tan(e.angle*Math.PI/180),[e.totalRun+t,-e.totalRise])}`}}))}createStep(){for(let e=1;e<25;e++)this.parts.push(new mGe({selector:`step-${e}`,floor:tt.all,parent:this,index:e,onUpdate:function(t){this.outOfDesign=!(e<t.steps+1),this.last=e===t.steps}}))}createMeasures(){this.parts.push(new g1({selector:"run-size",floor:tt.all,direction:-90,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.rise,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new g1({selector:"rise-size",floor:tt.all,direction:180,offsetPixels:.5,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.run,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new g1({selector:"total-rise-size",floor:tt.all,direction:0,offsetPixels:0,onUpdate:function(e){const t=e.totalRun+2*e.run;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t,0],this.b=[t,-e.totalRise]}})),this.parts.push(new g1({selector:"total-run-size",floor:tt.all,direction:90,onUpdate:function(e){this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[0,0],this.b=[e.totalRun,0]}})),this.parts.push(new g1({selector:"plateau-width",floor:tt.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+0,t],this.b=[e.stairOrigin[0]+e.walkWidth,t]}})),this.parts.push(new g1({selector:"mid-width",floor:tt.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+e.walkWidth,t],this.b=[e.stairOrigin[0]+e.totalWidth-e.walkWidth,t]}})),this.parts.push(new g1({selector:"total-width",floor:tt.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0],t],this.b=[e.stairOrigin[0]+e.totalWidth,t]}})),this.parts.push(new g1({selector:"total-height",floor:tt.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.totalHeight]}})),this.parts.push(new g1({selector:"lesser-height",floor:tt.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.lesserHeight]}}))}createPlan(){for(let e=1;e<this.steps+1;e++)this.parts.push(new AGe({selector:`step-plan-${e}`,floor:tt.all,parent:this,index:e,onUpdate:function(t){this.stringers=t.stringers,this.walkLineXY=t.alongWalkLine(e),this.nextWalkLineXY=t.alongWalkLine(e+1),this.stringerXY=t.alongStinger(e),this.nextStingerXY=t.alongStinger(e+1)}})),this.parts.push(new aie({selector:"walk-line-"+e,floor:tt.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongWalkLine(e)}})),this.parts.push(new aie({selector:"step-stinger-"+e,floor:tt.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongStinger(e)}}));this.parts.push(new Ya({selector:"clip-ground-floor-ref",floor:tt.ground,onUpdate:function(e){const[t,i]=e.stairOrigin,r=t+e.walkWidth,s=t+e.totalWidth-e.walkWidth,o=Math.max(e.alongWalkLine(1)[1],i+e.walkWidth);Math.max(e.alongWalkLine(e.steps)[1],i+e.walkWidth),this.coords=[[t,i],[s,i],[s,i+e.walkWidth],[r,i+e.walkWidth],[r,o],[t,o]]}})),this.parts.push(new Ya({selector:"outline",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[e.stringers.out.coords[0],e.stringers.out.coords[1],e.stringers.out.coords[2],e.stringers.out.coords[3],e.stringers.in.coords[3],e.stringers.in.coords[2],e.stringers.in.coords[1],e.stringers.in.coords[0]]}})),this.parts.push(new QM({selector:"walk-line",floor:tt.all,parent:this,onUpdate:function(e){const t=e.walkWidth-e.walkLineOffset,i=e.alongWalkLine(e.steps),r=e.alongWalkLine(1);this.d=`\n        M${r[0]} ${r[1]}\n        L${r[0]} ${e.stairOrigin[1]+e.walkWidth}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${-e.walkLineOffset}\n        L${e.stairOrigin[0]+e.walkWidth} ${e.stairOrigin[1]+t}\n        L${e.stairOrigin[0]+e.totalWidth-e.walkWidth} ${e.stairOrigin[1]+t}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${e.walkLineOffset}\n        L${i[0]} ${i[1]}\n        `}}))}calculateCorrectionArray(){const e=this.walkLineOffset*Math.PI/2,t=(this.totalWidth-2*this.walkWidth)/2,i=(this.stepsFlightRight+1)*this.run,s=this.totalRun-i-e-t,o=i-e-t;this.intersections={};const a=this.getEGMethod(s+e/2,this.alongWalkLine(0)[1]-(this.stairOrigin[1]+this.walkWidth),0,0,!1),c=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,a,0,!0),l=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,a+c,0,!1);this.getEGMethod(o+e/2,this.alongWalkLine(this.steps)[1]-(this.stairOrigin[1]+this.walkWidth),a+0+c+l,0,!0)}getEGMethod(e,t,i,r,s){let o,a,c,l,u;const f=e-r,p=Math.ceil(f/this.run),g=t-r;s?(o=[0,0],a=[0,f],c=[-g,0],l=Zte(g,-a[1]/g,a[1]),l=[-l[0],l[1]]):(o=[0,0],a=[0,f],c=[g,0],l=Zte(g,-a[1]/g,a[1]));const _=[];for(let y=0;y<p+1;y++)u=s?[0,Math.min(this.run*(p-y),f)]:[0,Math.min(this.run*y,f)],_.push(xg([o,l],[u,c]));for(let y=0;y<p+1;y++)if(0!==y)try{let w;w=s?_[y+1]:_[y-1],this.intersections[i+y]=this.run-Xa(w,_[y])}catch{}return p}alongStinger(e){let t=An((e-1)*this.run);const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsFlightRight+1)*this.run,c=this.alongWalkLine(e),l=this.alongWalkLine(e+1),f=(p1(c,l),isNaN(this.intersections[e])?0:this.intersections[e]);return t<o-r-i/2?[this.stairOrigin[0]+this.walkWidth,c[1]+f]:t===o?[c[0],c[1]+f]:t<o?[c[0]+f,this.stairOrigin[1]+this.walkWidth]:t-o<r+i/2?[c[0]-f,this.stairOrigin[1]+this.walkWidth]:t===this.totalRun?[c[0]-f,c[1]]:[this.stairOrigin[0]+this.totalWidth-this.walkWidth,c[1]+f]}alongWalkLine(e){let t=(e-1)*this.run;const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsFlightRight+1)*this.run,a=o-i-r;if(t<a){const[c,l]=[this.stairOrigin[0]+this.walkWidth-this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+a-t]}if(t<a+i)return t-=a,io(180+t/i*90,this.walkLineOffset,[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth]);if(t<o){t-=a+i;const[c,l]=[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+r){t-=o;const[c,l]=[this.stairOrigin[0]+this.totalWidth/2,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+r+i)return t-=o+r,io(t/i*90-90,this.walkLineOffset,[this.stairOrigin[0]+this.totalWidth-this.walkWidth,this.stairOrigin[1]+this.walkWidth]);{t-=o+r+i;const[c,l]=[this.stairOrigin[0]+this.totalWidth-this.walkWidth+this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+t]}}}class _Ge extends sl{constructor(e){super(),this.origin=[0,0],this.scale=[1,1],this.rotate=0,Object.assign(this,e)}draw(e){var t=this;return Da(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=ro(`#${t.selector}`),t.svg1=t.svg.select(".house-wind-rose-1"),t.svg2=t.svg.select(".house-wind-rose-2"),t.svgText=t.svg.select(".house-wind-rose-text")}t.svg.style("transform",` \n      translate(${t.origin[0]}px, ${t.origin[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svg1.attr("points",[[0,0],[10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svg2.attr("points",[[0,0],[-10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svgText.attr("font-size",12).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6).attr("transform",`\n          translate(0 ${-8*t.meterPerPixel}) \n          rotate(${t.rotate})\n          `).text("North")})()}}var pn=(()=>{return(n=pn||(pn={})).gips="gips",n.serviceBeams="serviceBeams",n.osb="osb",n.joists="joist",n.outerSheet="outerSheet",n.space="space",n.facade="facade",n.groundFloorEdge="groundFloorEdge",n.roofJoists="roofJoists",pn;var n})();class ju{constructor(e){Object.assign(this,e)}updateR(e){void 0!==e&&("Outside"===e.name&&(this.r=.04),void 0===this.r&&(this.r=this.diameter/this.lambda))}updateT(e,t,i){isNaN(this.r)||(this.deltaT=this.r/t*i,this.temp=e.temp+this.deltaT)}}class yGe{constructor(){this.tempMin=-10,this.tempMax=24,this.Thicknesses=pn,this.thickness={[pn.gips]:.0125,[pn.serviceBeams]:.06,[pn.osb]:.015,[pn.joists]:.3,[pn.outerSheet]:.06,[pn.space]:.04,[pn.facade]:.04,[pn.roofJoists]:.4},this.crossDepth={},this.x=[]}get tempDiff(){return this.tempMax-this.tempMin}getRoofPoint(e){const[t,i]=ge(this.cross.roofPoints[e],[-this.cross.wallOuterThickness,0]);return[t,i]}calculate(e){this.cross=e.cross;const t=(r,s,o=!1)=>{this.crossDepth[r]=An(Math.abs(this.crossDepth[s])+Math.abs(this.thickness[s])),o&&(this.crossDepth[r]=-Math.abs(this.crossDepth[r]))};this.crossDepth[pn.joists]=0,this.crossDepth[pn.osb]=0,this.crossDepth[pn.groundFloorEdge]=.2,t(pn.outerSheet,pn.joists),t(pn.space,pn.outerSheet),t(pn.facade,pn.space),t(pn.serviceBeams,pn.osb,!0),t(pn.gips,pn.serviceBeams,!0);const i=[new ju({name:"Outside",temp:this.tempMin}),new ju({name:"r<sub>outside</sub>"}),new ju({name:"Wood",diameter:this.thickness[pn.facade],lambda:.13}),new ju({name:"space",diameter:this.thickness[pn.space],lambda:.001}),new ju({name:"Celit",diameter:this.thickness[pn.outerSheet],lambda:.048}),new ju({name:"CLS+Glass wol",diameter:this.thickness[pn.joists],lambda:.032}),new ju({name:"OBS",diameter:this.thickness[pn.osb],lambda:.13}),new ju({name:"Isolated Installations",diameter:this.thickness[pn.serviceBeams],lambda:.035}),new ju({name:"Dry wall / Gips ",diameter:this.thickness[pn.gips],lambda:1.3}),new ju({name:"r<sub>inside</sub>"}),new ju({name:"Inside",temp:this.tempMax})];i.forEach((r,s)=>{r.updateR(i[s-1])}),this.rConstruction=An(t4(i.map(r=>r.r).filter(r=>r)),1),this.U=An(1/this.rConstruction,3),this.outerWallThickness=An(t4(i.map(r=>r.diameter).filter(r=>r)),3),i.forEach((r,s)=>{r.updateT(i[s-1],this.rConstruction,this.tempDiff)}),this.heatCalcs=i}}var jM=(()=>{return(n=jM||(jM={})).a="a",n.b="b",n.c="c",n.d="d",n.toilet="toilet",n.hall="hall",n.walkway="walkway",jM;var n})();class CGe extends class wGe{}{constructor(e){super(),this.outerBase=void 0,this.innerBase=void 0,this.extensionToNorth=void 0,this.extensionToSouth=void 0,this.extensionToWest=void 0,this.extensionToEast=void 0,this.houseWidth=void 0,this.houseLength=void 0,this.gridSizeY=void 0,this.gridSizeX=void 0,this.centerHouse=[void 0,void 0],this.balconyEdge=-.3,this.balconyDepth=2.5,this.westRoomWidth=4,this.midRoomExtended=!0,this.eastRoomExtended=!0,this.serverRoom=[void 0,void 0],this.cross=new gGe,this.stair=new vGe,this.construction=new yGe,this.stats={wall:{},floor:{}},this.tower={show:void 0,innerCoords:void 0,outerCoords:void 0,outerWallOffset:void 0,width:void 0,houseIncrement:void 0,innerIncrement:void 0,outerIncrement:void 0,innerWallLength:void 0,outerWallLength:void 0,intersectionEast:void 0,intersectionWest:void 0,wallOuterThickness:void 0,footprintVisible:!1},Object.assign(this,e),window.house=this,this.cross.ceilingHeight=e.ceilingHeight,this.cross.floorAboveGround=e.floorAboveGround,this.cross.crawlerHeight=e.crawlerHeight,this.cross.crawlerSpace=e.crawlerSpace,this.calculateHouse(),this.linkParts(),this.calculateStats(),this.createStramien(),this.createGrid(),this.createMeasures(),this.createExtra()}createExtra(){this.parts.push(new WM);const e=new C3({selector:"balcony-edge",floor:tt.ground,lineThickness:1,dash:[1,8],onUpdate:function(s){const o=s.stramien.in,a=s.balconyWidth+s.balconyEdge;this.coords=[[o.we.b,o.ns.b+a],[o.we.c,o.ns.b+a]]}});this.parts.push(e);const t=new C3({selector:"hall-edge",floor:tt.ground,lineThickness:1,dash:[1,8],onUpdate:function(s){const o=s.stramien.in,c=3*s.wallInnerThickness+2;this.coords=[[o.we.b,o.ns.b-c],[o.we.b+(s.stair.totalWidth-s.stair.walkWidth),o.ns.b-c]]}});this.parts.push(t);const i=new C3({selector:"view-lines",floor:tt.ground,lineThickness:3,onUpdate:function(s){const o=s.stramien.in,a=3*s.studDistance,c=o.we.b+1,l=o.ns.b+(o.ns.c-o.ns.b)/2;this.coords=[[c,s.stair.stairOrigin[1]],[c,o.ns.d+a],[c,l],[o.we.a-a,l],[o.we.d+a,l]]}});this.parts.push(i);const r=new Ya({selector:"tower-walls",floor:tt.all,onUpdate:function(s){this.visible=s.tower.footprintVisible,this.coords=[...s.tower.innerCoords,s.tower.innerCoords[0],...[...s.tower.outerCoords].reverse(),s.tower.outerCoords[7]]}});this.parts.push(r),this.parts.push(new C3({selector:"roof-line-1",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.b,o.ns.b],l=[o.we.b,o.ns.a];this.coords=[ge([o.we.a,o.ns.b],[0,s.cross.minimumHeightWidth]),ge(c,[s.cross.minimumHeightWidth,s.cross.minimumHeightWidth]),ge(l,[s.cross.minimumHeightWidth,0])]}})),this.parts.push(new C3({selector:"roof-line-2",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=s.tower.show?[o.we.c,o.ns.b-s.tower.houseIncrement-s.cross.minimumHeightWidth]:[o.we.c,o.ns.b];this.coords=[ge([o.we.c,o.ns.a],[-s.cross.minimumHeightWidth,0]),ge(c,[-s.cross.minimumHeightWidth,s.cross.minimumHeightWidth])]}})),this.parts.push(new C3({selector:"roof-line-3",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.d,o.ns.b];this.coords=[ge(s.tower.show?[o.we.c+s.tower.houseIncrement+s.cross.minimumHeightWidth,o.ns.b]:[o.we.c,o.ns.b],[-s.cross.minimumHeightWidth,s.cross.minimumHeightWidth]),ge(c,[0,s.cross.minimumHeightWidth])]}})),this.parts.push(new C3({selector:"roof-line-4",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.c,o.ns.c];this.coords=[ge([o.we.d,o.ns.c],[0,-s.cross.minimumHeightWidth]),ge(c,[0,-s.cross.minimumHeightWidth])]}})),this.parts.push(new C3({selector:"roof-line-5",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.a,o.ns.c];this.coords=[ge([o.we.b,o.ns.c],[0,-s.cross.minimumHeightWidth]),ge(c,[0,-s.cross.minimumHeightWidth])]}}))}createMeasures(){this.parts.push(new g1({selector:"house-total-width",floor:tt.all,direction:90,textRotate:0,onUpdate:function(e){const t=e.houseLength+2*e.studDistance;this.offsetPixels=16,this.a=[e.stramien.out.we.a,t],this.b=[e.stramien.out.we.d,t]}}));for(let e=0;e<3;e++){const t=["a","b","c","d"];this.parts.push(new g1({selector:"house-width-"+(e+1),floor:tt.all,direction:90,textRotate:0,onUpdate:function(r){const s=r.houseLength+2*r.studDistance;this.offsetPixels=0,this.a=[r.stramien.out.we[t[e+0]],s],this.b=[r.stramien.out.we[t[e+1]],s]}}))}this.parts.push(new g1({selector:"house-height-1",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.b]}})),this.parts.push(new g1({selector:"house-height-inner",floor:tt.all,direction:180,textRotate:0,onUpdate:function(e){const t=1*-e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.in.ns.b],this.a=[t,e.stramien.in.ns.c]}})),this.parts.push(new g1({selector:"house-height-2",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.b],this.a=[t,e.stramien.out.ns.c]}})),this.parts.push(new g1({selector:"house-height-3",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.c],this.a=[t,e.stramien.out.ns.d]}})),this.parts.push(new g1({selector:"house-total-height",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=32,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.d]}}))}createStramien(){const e=3*this.studDistance,t=i=>"in"===i||"out"===i?tt.all:"ground"===i?tt.ground:"top"===i?tt.top:void 0;for(let i of["in","out","ground","top"])for(let r of["we","ns"])for(let s of Object.keys(jM)){const o=`house-stramien-${i}-${r}-${s}`;this.parts.push(new C3("ns"===r?{floor:t(i),selector:o,lineThickness:1.5,onUpdate:function(a){this.coords=[[-e,a.stramien[i][r][s]],[a.houseWidth+e,a.stramien[i][r][s]]]}}:{floor:t(i),selector:o,lineThickness:1.5,onUpdate:function(a){this.coords=[[a.stramien[i][r][s],-e],[a.stramien[i][r][s],a.houseLength+e]]}}))}}createGrid(){const e=3*this.studDistance;this.gridSizeY=Math.round(this.houseWidth/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountWest,this.studAmountWest+this.studAmount,this.studAmountWest+this.studAmount+this.studAmountEast].includes(i-1),o=new C3({selector:`grid-index-${i}.grid-vertical`,lineThickness:r?.8:.6,index:i,floor:tt.all,onUpdate:function(a){const c=(i-1)*a.studDistance;this.points=this.index<a.gridSizeY?[[c,-e],[c,a.houseLength+e]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}});o.createSelector(),this.parts.push(o)}this.gridSizeX=Math.round(this.houseLength/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountNorth,this.studAmountNorth+this.studAmount,this.studAmountNorth+this.studAmount+this.studAmountSouth].includes(i-1);this.parts.push(new C3({lineThickness:r?.8:.6,selector:`grid-index-${i}.grid-horizontal`,index:i,floor:tt.all,onUpdate:function(o){const a=(i-1)*o.studDistance;this.points=this.index<o.gridSizeX?[[-e,a],[o.houseWidth+e,a]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}}))}this.parts[".house-wind-rose"]=new _Ge({rotate:0,floor:tt.all,parent:this,onUpdate:function(i){this.origin=[2,0]}})}linkParts(){const e=(t,i)=>{void 0!==t&&(t.parent=i,t.onUpdate(this),t.createSelector(),t.parts&&t.parts.forEach(r=>e(r,t)),this.partsFlatten.push(t))};this.partsFlatten=[],this.parts.forEach(t=>e(t,this))}calculateTower(){this.tower.wallOuterThickness=this.wallOuterThickness,this.tower.outerWallOffset=An(this.tower.wallOuterThickness*Math.tan(22.5*Math.PI/180)),this.tower.innerWallLength=this.towerWidth,this.tower.outerWallLength=2*this.tower.outerWallOffset+this.tower.innerWallLength,this.tower.show=this.showTower,this.tower.width=this.towerWidth,this.tower.houseIncrement=An(this.tower.outerWallLength/Math.sqrt(2)+this.tower.outerWallLength)}calculateHouse(){this.outerBase=An(this.studAmount*this.studDistance),this.innerBase=An(this.outerBase-2*this.wallOuterThickness),this.extensionToSouth=this.studAmountSouth*this.studDistance,this.extensionToNorth=this.studAmountNorth*this.studDistance,this.extensionToEast=this.studAmountEast*this.studDistance,this.extensionToWest=this.studAmountWest*this.studDistance,this.calculateTower(),this.tower.show?this.extensionToNorth=Math.max(this.extensionToNorth,Math.ceil(this.tower.houseIncrement)):this.tower.houseIncrement=0;const e={we:{a:this.wallOuterThickness,b:this.extensionToWest+1*this.wallOuterThickness,c:this.extensionToWest+1*this.outerBase+-1*this.wallOuterThickness,d:this.extensionToEast+this.outerBase+this.extensionToWest+-1*this.wallOuterThickness},ns:{a:this.wallOuterThickness,b:this.extensionToNorth+1*this.wallOuterThickness,c:this.extensionToNorth+this.outerBase+-1*this.wallOuterThickness,d:this.extensionToNorth+this.outerBase+this.extensionToSouth+-1*this.wallOuterThickness}};this.stair.totalWidth=this.innerBase/2+this.stair.walkWidth/2;const t=e.we.b+this.stair.totalWidth-this.stair.walkWidth,i=e.ns.b-5;this.stramien={in:e,out:{we:{a:e.we.a-this.wallOuterThickness,b:e.we.b-this.wallOuterThickness,c:e.we.c+this.wallOuterThickness,d:e.we.d+this.wallOuterThickness},ns:{a:e.ns.a-this.wallOuterThickness,b:e.ns.b-this.wallOuterThickness,c:e.ns.c+this.wallOuterThickness,d:e.ns.d+this.wallOuterThickness}},top:{we:{toilet:e.we.b+this.stair.totalWidth-this.stair.walkWidth-.2,hall:e.we.b+this.stair.totalWidth+.2},ns:{hall:i+1.5,walkway:e.ns.b+1+.5}},ground:{we:{hall:t},ns:{hall:i}}},this.centerHouse=[e.we.c-(e.we.c-e.we.b)/2,e.ns.c-(e.ns.c-e.ns.b)/2],this.stair.stairOrigin=[i,t],this.serverRoom=[this.stramien.in.we.c-1,this.stramien.in.ns.b-this.wallInnerThickness],this.houseWidth=An(this.stramien.out.we.d-this.stramien.out.we.a),this.houseLength=An(this.stramien.out.ns.d-this.stramien.out.ns.a),this.calculateTowerCoords(),this.cross.calculate(this),this.stair.calculate(this),this.construction.calculate(this)}calculateStats(){this.getWallLength(),this.getWallArea(),this.getFloorArea()}getWallLength(){this.stats.wall.innerLength=Math.ceil(t4(Object.values(this.partsFlatten).filter(e=>e instanceof ei).map(e=>e.type===kn.outer?e.getLength(ot.in):e.type===kn.inner?e.getLength(ot.out)+e.getLength(ot.in):0))),this.stats.wall.outerLength=Math.ceil(t4(Object.values(this.partsFlatten).filter(e=>e instanceof ei).filter(e=>e.type===kn.outer).map(e=>e.getLength(ot.out)),1))}getWallArea(){this.stats.wall.innerArea=Math.ceil(t4(Object.values(this.partsFlatten).filter(e=>e instanceof ei).map(e=>{let t=0;return e.type===kn.inner&&(t+=e.getArea(ot.out)),t+=e.getArea(ot.in),t}))),this.stats.wall.outerArea=Math.ceil(t4(Object.values(this.partsFlatten).filter(e=>e instanceof ei).filter(e=>e.type===kn.outer).map(e=>e.getArea(ot.out)),1))}getFloorArea(){let e={};Object.keys(tt).map(t=>{e[t]={area:0,volume:0}}),this.partsFlatten.filter(t=>t instanceof z1).filter(t=>"innerFootprint"!==t.name).filter(t=>!t.hole).forEach(t=>{e[t.floor].area+=t.area(),e[t.floor].volume+=t.volume(),e[tt.all].area+=t.area(),e[tt.all].volume+=t.volume()}),Object.keys(tt).map(t=>{e[t]={area:An(e[t].area,0),volume:An(e[t].volume,0)}}),this.stats.floor=e}calculateTowerCoords(){!1===this.tower.show&&(this.tower.width=0,this.tower.outerWallOffset=0,this.tower.innerWallLength=0,this.tower.outerWallLength=0,this.tower.houseIncrement=0,this.tower.wallOuterThickness=0);let e=this.tower.wallOuterThickness/Math.cos(22.5*Math.PI/180);this.tower.innerIncrement=Math.sqrt(this.tower.innerWallLength**2/2),this.tower.outerIncrement=Math.sqrt(this.tower.outerWallLength**2/2);const t=[this.stramien.out.we.c+this.tower.outerWallOffset,this.stramien.out.ns.b-this.tower.innerIncrement-this.tower.innerWallLength-this.tower.outerWallOffset],i=t,r=ge(t,[this.tower.width,0]),s=io(45,this.tower.width,r),o=ge(s,[0,this.tower.width]),a=io(135,this.tower.width,o),c=ge(a,[-this.tower.width,0]),l=io(225,this.tower.width,c),u=ge(l,[0,-this.tower.width]);this.tower.innerCoords=[i,r,s,o,a,c,l,u],this.tower.outerCoords=[io(-112.5,e,i),io(-67.5,e,r),io(-22.5,e,s),io(22.5,e,o),io(67.5,e,a),io(112.5,e,c),io(157.5,e,l),io(202.5,e,u)],this.tower.intersectionWest=ge(this.tower.outerCoords[0],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),this.tower.intersectionEast=ge(this.tower.outerCoords[3],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),!1===this.tower.show&&(this.tower.intersectionWest=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.intersectionEast=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.innerCoords=[...Array(8).keys()].map(f=>[this.stramien.in.we.c,this.stramien.in.ns.b]),this.tower.outerCoords=[...Array(8).keys()].map(f=>[this.stramien.out.we.c,this.stramien.out.ns.b]))}redrawHouse(e){const t=(i,r)=>{r.parts.forEach(function(){var s=Da(function*(o){void 0!==o&&(yield o.update({...e,theme:i}),void 0!==o.parts&&t(i,o))});return function(o){return s.apply(this,arguments)}}())};e.graphic===yo.house2D&&(t(this,this),t(this.stair,this.stair)),e.graphic===yo.cross&&t(this.cross,this.cross),[yo.stairCross,yo.stairPlan].includes(e.graphic)&&t(this.stair,this.stair)}}class ta extends sl{constructor(e){super(),this.width=.8,this.height=2.3,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.outside=!1,Object.assign(this,e)}draw(e){var t=this;return Da(function*(){if(void 0===t.svg&&(t.svg=ro(`#${t.selector}`),t.svgOpening=t.svg.select(".door-wall-opening"),t.svgSwing=t.svg.select(".door-swing")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgSwing.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,-t.width],[t.parent.thickness,-t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgSwing.attr("d",`M${t.parent.thickness},0 \n        L0,0  \n        L${-t.width},0  \n        A${t.width},${t.width} 0 0,1  \n        0,${-t.width}\n        L${t.parent.thickness},${-t.width}`)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgSwing&&this.svgSwing.attr("stroke-width",1*this.meterPerPixel)}}var Y0=(()=>{return(n=Y0||(Y0={})).windowWall="windowWall",n.standard="standard",n.hexagon="hexagon",Y0;var n})();class Ia extends sl{constructor(e){super(),this.floor=tt.ground,this.windowForm=Y0.standard,this.width=2,this.height=2,this.elevation=.9,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.frameThickness=.1,this.frameDepth=.1,this.innerDepthFrame=.1,this.openable=!0,Object.assign(this,e)}get outerDepthFrame(){return this.innerDepthFrame+this.frameDepth}draw(e){var t=this;return Da(function*(){if(void 0===t.svg&&(t.svg=ro(`#${t.selector}`),t.svgOpening=t.svg.select(".window-wall-opening"),t.svgPane=t.svg.select(".window-pane")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgPane.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,t.width],[t.parent.thickness,t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgPane.attr("d",`M${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.outerDepthFrame},${t.frameThickness}  \n          L${t.outerDepthFrame},0  \n          \n          L${t.outerDepthFrame},${t.width}  \n          L${t.outerDepthFrame},${t.width-t.frameThickness}  \n          L${t.innerDepthFrame},${t.width-t.frameThickness} \n          L${t.innerDepthFrame},${t.width}  \n\n          L${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.innerDepthFrame+t.frameDepth/2},${t.frameThickness}  \n          L${t.innerDepthFrame+t.frameDepth/2},${t.width-t.frameThickness}  \n          `)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgPane&&this.svgPane.attr("stroke-width",1*this.meterPerPixel)}}class jc extends Ht{constructor(e){super(e),this.sensorType=Ge.lightBulb,Object.assign(this,e)}}class r4 extends Ht{constructor(e){super(e),this.sensorType=Ge.ventOut,this.offsetWall=0,this.size=200,Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}}class rc extends Ht{constructor(e){super(e),this.offsetWall=0,this.size=20,this.verticalCableLength=0,this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Pipe length ${An(this.cableLength,1)}m`),t+=`<br>vertical pipe: ${An(this.verticalCableLength,1)}m`,t},Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}init(e,t){const i=t.cross.ceilingHeight,r=t.cross.topFloorThickness;this.sensorType===Ge.toilet?(this.size=120,this.elevation=0,this.verticalCableLength+=e===tt.top?i+2*r:r):this.sensorType===Ge.waterWarm?(this.size=20,this.elevation=1.6,this.verticalCableLength+=e===tt.ground?i-this.elevation+1*r:r+this.elevation):this.sensorType===Ge.drain&&(this.size=40,this.elevation=0,this.verticalCableLength+=e===tt.top?i+2*r:r)}}const bGe=[new z1({name:"Toilet-upstairs",function:"WC",floor:tt.top,onUpdate:function(n){const t=n.stramien.top.we.toilet-n.stramien.in.we.b-n.wallInnerThickness;this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-n.wallInnerThickness],this.squaredRoom(t,1)},parts:[new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=ge(this.parent.northWestCorner,[0,0]),this.sides={[ot.out]:[ge(this.origin,[0,-n.wallInnerThickness]),ge(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[this.parent.width,0])]}},parts:[new rc({sensorType:Ge.drain,onUpdate:function(n){const e=ge(this.parent.getPosition(ot.in,.5,0),[0,0]),t=this.parent.parent;this.points=[e,[e[0],t.northWestCorner[1]+t.height/2]]}}),new rc({sensorType:Ge.waterWarm,onUpdate:function(n){const e=ge(this.parent.getPosition(ot.in,.5,0),[0,0]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}})]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=ge(e.northWestCorner,[e.width,0]),this.sides={[ot.out]:[ge(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),ge(this.origin,[+n.wallInnerThickness,e.height+n.wallInnerThickness])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[0,e.height])]}}}),new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=ge(e.northWestCorner,[e.width,e.height]),this.sides={[ot.out]:[ge(this.origin,[+n.wallInnerThickness,n.wallInnerThickness]),ge(this.origin,[-e.width,n.wallInnerThickness])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[-e.width,0])]}},parts:[new Ht({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,1);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}}),new Ht({offsetWall:-.3,sensorType:Ge.lightSwitch,onUpdate:function(n){const e=ge(this.parent.getPosition(ot.in,0,1),[0,n.wallInnerThickness]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}}),new ta({scale:[-1,1],rotate:-90,onUpdate:function(n){this.origin=ge(this.parent.getPosition(ot.in,0,0),[-n.wallInnerThickness,0])}})]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=ge(e.northWestCorner,[0*e.width,1*e.height]),this.innerWallLength=e.height,this.sides={[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[0,-this.innerWallLength])]}},parts:[new rc({sensorType:Ge.toilet,size:120,onUpdate:function(n){const e=ge(this.parent.getPosition(ot.in,.5,0),[n.cross.minimumHeightWidth+.1,0]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}})]}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"storage-upstairs",function:"KLK2",floor:tt.top,onUpdate:function(n){const t=n.stramien.top.we.toilet-n.stramien.in.we.b-n.wallInnerThickness;this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-2*n.wallInnerThickness-1],this.squaredRoom(t,1)},parts:[new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=ge(this.parent.northWestCorner,[0,0]),this.sides={[ot.out]:[ge(this.origin,[0,-n.wallInnerThickness]),ge(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[this.parent.width,0])]}}}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=ge(e.northWestCorner,[e.width,0]),this.sides={[ot.out]:[ge(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),ge(this.origin,[+n.wallInnerThickness,e.height])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[0,e.height])]}},parts:[new Ht({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,.8);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}}),new ta({scale:[-1,1],rotate:180,onUpdate:function(n){this.origin=ge(this.parent.getPosition(ot.in,0,0),[-n.wallInnerThickness,0])}})]}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"main-bedroom",function:"Sovrum 1",floor:tt.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.width=An(n.stramien.in.we.c-n.stramien.in.we.b),this.height=An(n.stramien.top.ns.hall-n.stramien.in.ns.a),this.center=ge(this.northWestCorner,[this.width/2,this.height/2]),this.centralElectricity=this.center;const e=n.stair.totalWidth+n.wallInnerThickness,t=n.stramien.ground.ns.hall-n.wallInnerThickness-this.northWestCorner[1];this.coords=[this.northWestCorner,ge(this.northWestCorner,[this.width,0]),ge(this.northWestCorner,[this.width,this.height]),ge(this.northWestCorner,[e,this.height]),ge(this.northWestCorner,[e,t]),ge(this.northWestCorner,[0,t])]},parts:[new ei({floor:tt.top,type:kn.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallOuterThickness,this.origin=ge(this.parent.northWestCorner,[0,0]),this.sides={[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[this.parent.width,0])]}},parts:[new Ht({offset:[0,.3],amount:2,sensorType:Ge.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,.5,-.4);this.points=[t,tn(e,t,!0),e]}})]}),new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[2],this.innerWallLength=Xa(e.coords[3],e.coords[2]),this.sides={[ot.out]:[ge(this.origin,[0,n.wallInnerThickness]),ge(this.origin,[-(this.innerWallLength+n.wallInnerThickness),n.wallInnerThickness])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[-this.innerWallLength,0])]}},parts:[new ta({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=ge(this.parent.getPosition(ot.in,1,0),[0,0])}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}}))]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=e.coords[3],this.innerWallLength=Xa(e.coords[4],e.coords[3]),this.sides={[ot.out]:[ge(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),ge(this.origin,[-n.wallInnerThickness,-this.innerWallLength+n.wallInnerThickness])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[0,-this.innerWallLength])]}}}),new ei({name:"SouthLeft",floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[4],this.innerWallLength=Xa(e.coords[5],e.coords[4]),this.sides={[ot.out]:[ge(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),ge(this.origin,[-this.innerWallLength,n.wallInnerThickness])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[-this.innerWallLength,0])]}},parts:[new Ht({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,0,.3);this.points=[t,tn(e,t,!0),e]}}),new Ht({offset:[0,.3],amount:2,sensorType:Ge.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,0,0);this.points=[t,tn(e,t,!0),e]}})]}),new Ht({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.centralElectricity;this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[1,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[e.width/2,2]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"bathroom",function:"Badrum",floor:tt.top,onUpdate:function(n){const i=n.stramien.top.ns.hall+n.wallInnerThickness,s=n.stramien.in.ns.b-.5,o=n.tower.innerCoords[3][0]-2;this.northWestCorner=[n.stramien.top.we.hall+n.wallInnerThickness,i],this.center=ge(this.northWestCorner,[2,2]),this.coords=[this.northWestCorner,[n.stramien.in.we.c,i],[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1],n.tower.innerCoords[2],[n.tower.innerCoords[3][0],s],[o,s],[o,n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]]},parts:[new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=Xa(e.coords[5],e.coords[6]),this.sides={[ot.out]:[ge(e.coords[5],[0,n.wallInnerThickness]),ge(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness])],[ot.in]:[ge(e.coords[5],[0,0]),ge(e.coords[6],[0,0])]}},parts:[new rc({sensorType:Ge.shower,onUpdate:function(n){const i=this.parent.getPosition(ot.in,0,n.tower.width);this.points=[ge(i,[0,-.3]),i,tn(n.serverRoom,i,!0),n.serverRoom]}}),new rc({sensorType:Ge.drain,size:50,onUpdate:function(n){const i=this.parent.getPosition(ot.in,0,n.tower.width);this.points=[ge(i,[0,-.3]),i,tn(n.serverRoom,i,!0),n.serverRoom]}})]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[6],this.innerWallLength=Xa(e.coords[6],e.coords[7]),this.sides={[ot.out]:[ge(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness]),ge(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness])],[ot.in]:[ge(e.coords[6],[0,0]),ge(e.coords[7],[0,0])]}}}),new ei({name:"SouthLeft",floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=Xa(e.coords[7],e.coords[8]),this.sides={[ot.out]:[ge(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness]),ge(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness])],[ot.in]:[ge(e.coords[7],[0,0]),ge(e.coords[8],[0,0])]}},parts:[new ta({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=ge(this.parent.getPosition(ot.in,1,0),[0,0])}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({amount:n===Ge.lightSwitch?2:1,sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e.serverRoom,t,!0),e.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=ge(this.parent.getPosition(ot.in,1,-1),[0,e.wallInnerThickness]);this.points=[t,tn(e.serverRoom,t,!0),e.serverRoom]}}))]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[8],this.innerWallLength=Xa(e.coords[8],e.coords[0]),this.sides={[ot.out]:[ge(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness]),ge(e.coords[0],[-n.wallInnerThickness,0])],[ot.in]:[ge(e.coords[8],[0,0]),ge(e.coords[0],[0,0])]}},parts:[new Ht({offsetWall:-.3,sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,1,-.5);this.points=[ge(t,[-n.wallInnerThickness,0]),tn(e,t,!0),e]}}),...[0,1,2].map(n=>new Ht({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:Ge.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(ot.in,(n+1)/4,0);this.points=[ge(i,[1===n?-e.wallInnerThickness:0,0]),ge(i,[0,0]),tn(t,i,!1),t]}})),new rc({sensorType:Ge.drain,onUpdate:function(n){const t=this.parent,i=ge(t.getPosition(ot.in,2/3,0),[.3,0]),r=ge(t.getPosition(ot.in,1/3,0),[.3,0]);this.points=[i,r]}}),new rc({sensorType:Ge.drain,onUpdate:function(n){const i=ge(this.parent.getPosition(ot.in,1/3,0),[.3,0]);this.points=[i,[i[0],n.stramien.in.ns.b-(.5+n.wallInnerThickness)]]}}),new rc({sensorType:Ge.waterWarm,onUpdate:function(n){const e=ge(this.parent.getPosition(ot.in,.6666666666666666,0),[.3,0]),t=ge(this.parent.getPosition(ot.in,1/3,0),[.3,0]);this.points=[e,t]}}),new rc({sensorType:Ge.waterWarm,onUpdate:function(n){const e=ge(this.parent.getPosition(ot.in,.3333333333333333,0),[.3,0]);this.points=[e]}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=ge(this.parent.getPosition(ot.in,1,-1),[-e.wallInnerThickness,0]);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}}))]}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({sensorType:Ge.ventIn,size:400,onUpdate:function(n){const t=ge(n.serverRoom,[0,-1]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({function:"Sovrum 2",name:"Upper-east",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=e.in.we.d-e.in.we.c-t,r=e.in.ns.c-e.top.ns.walkway-t;this.northWestCorner=[e.in.we.c+t,e.top.ns.walkway+t];const s=e.in.we.c-e.top.we.hall,o=e.in.ns.c+n.balconyEdge-n.balconyDepth-this.northWestCorner[1];this.coords=[this.northWestCorner,ge(this.northWestCorner,[i,0]),ge(this.northWestCorner,[i,r]),ge(this.northWestCorner,[0,r])],n.eastRoomExtended&&this.coords.push(ge(this.northWestCorner,[0,o]),ge(this.northWestCorner,[-s,o]),ge(this.northWestCorner,[-s,0])),this.center=ge(this.northWestCorner,[i/2,r/2]),this.centralElectricity=this.center},parts:[new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){let e=6,t=1;n.eastRoomExtended||(e=0,t=1),this.drawByRoom(e,t,n,ni.outside,ni.straight)},parts:[...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,1);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}})),new Ht({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,0,1);this.points=[t,tn(e,t,!1),e]}}),new ta({scale:[1,-1],rotate:-90,onUpdate:function(n){this.origin=ge(this.parent.getPosition(ot.in,0,0),[0,0])}})]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){let e=1,t=2;n.eastRoomExtended||(e=1,t=2),this.drawByRoom(e,t,n,ni.straight,ni.straight)}}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){let e=2,t=3;n.eastRoomExtended||(e=2,t=3),this.drawByRoom(e,t,n,ni.straight,ni.straight)}}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){let e=3,t=4,i=ni.inside;n.eastRoomExtended||(e=3,t=0,i=ni.outside),this.drawByRoom(e,t,n,ni.straight,i)}}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){n.eastRoomExtended||(this.visible=!1),this.drawByRoom(4,5,n,ni.inside,ni.outside)}}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){n.eastRoomExtended||(this.visible=!1),this.drawByRoom(5,6,n,ni.outside,ni.outside)}}),...[0,1,2,3].map(n=>new Ht({offset:[[0,3].includes(n)?.3:-.3,0],group:11,sensorType:Ge.socket,onUpdate:function(e){this.points=[ge(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Ht({group:11,sensorType:Ge.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=ge(t.coords[0],[1,0]);this.points=[i,t.coords[1],t.coords[2],t.coords[3],t.coords[0],tn(e,t.coords[0],!1),e]}}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,tn(n.serverRoom,i,!0),n.serverRoom]}})]}),new z1({function:"Sovrum 3",name:"upper-mid",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=e.in.ns.c-e.top.ns.walkway-t,r=e.in.we.b-e.in.we.a-n.westRoomWidth-2*t;this.northWestCorner=[e.in.we.a+n.westRoomWidth+t,e.top.ns.walkway+t];const s=e.in.ns.c+n.balconyEdge-n.balconyDepth-this.northWestCorner[1],o=e.top.we.toilet-this.northWestCorner[0]-t;this.coords=n.midRoomExtended?[this.northWestCorner,ge(this.northWestCorner,[o,0]),ge(this.northWestCorner,[o,s]),ge(this.northWestCorner,[r,s]),ge(this.northWestCorner,[r,i]),ge(this.northWestCorner,[0,i])]:[this.northWestCorner,ge(this.northWestCorner,[r,0]),ge(this.northWestCorner,[r,i]),ge(this.northWestCorner,[0,i])],this.center=ge(this.northWestCorner,[r/2,i/2]),this.centralElectricity=this.center},parts:[new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ni.straight,ni.outside)},parts:[...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}})),new Ht({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e,t,!1),e]}}),new ta({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=ge(this.parent.getPosition(ot.in,1,0),[0,0])}})]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.drawByRoom(1,2,n,ni.outside,ni.outside)},parts:[]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){n.midRoomExtended||(this.visible=!1),this.drawByRoom(2,3,n,ni.outside,ni.inside)},parts:[]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){n.midRoomExtended||(this.visible=!1),this.drawByRoom(3,4,n,ni.inside,ni.straight)},parts:[]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){let e=4,t=5;n.midRoomExtended||(e=2,t=3),this.drawByRoom(e,t,n,ni.straight,ni.straight)},parts:[]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){let e=5,t=0;n.midRoomExtended||(e=3,t=0),this.drawByRoom(e,t,n,ni.straight,ni.straight)},parts:[]}),...[0,1,2,3].map(n=>new Ht({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:Ge.socket,onUpdate:function(e){this.points=[ge(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Ht({group:10,sensorType:Ge.socket,cableOnly:!0,onUpdate:function(n){const t=this.parent,i=ge(t.coords[1],[-1,0]);this.points=[t.coords[1],t.coords[2],t.coords[3],t.coords[0],i]}}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,tn(n.serverRoom,i,!0),n.serverRoom]}})]}),new z1({function:"Sovrum 3",name:"upper-west",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.westRoomWidth;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(t,e.in.ns.c-this.northWestCorner[1])},parts:[new ei({floor:tt.top,type:kn.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=ge(this.parent.northWestCorner,[0,0]),this.sides={[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[this.parent.width,0])]}},parts:[new Ht({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e,t,!1),e]}})]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=ge(e.northWestCorner,[e.width,0]),this.sides={[ot.out]:[ge(this.origin,[+n.wallInnerThickness,0]),ge(this.origin,[+n.wallInnerThickness,e.height])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[0,e.height])]}},parts:[...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,1);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}})),new ta({scale:[1,-1],rotate:0,onUpdate:function(n){this.origin=ge(this.parent.getPosition(ot.in,0,0),[0,0])}})]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=ge(e.northWestCorner,[e.width,e.height]),this.sides={[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=ge(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new Ht({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:Ge.socket,onUpdate:function(e){this.points=[ge(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Ht({group:10,sensorType:Ge.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=ge(t.coords[1],[0,1]);this.points=[i,t.coords[2],t.coords[3],t.coords[0],t.coords[1],tn(e,t.coords[1],!0),e]}}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,tn(n.serverRoom,i,!0),n.serverRoom]}})]}),new z1({name:"hall-walkway",function:"Passage",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=[e.in.we.b+n.stair.totalWidth,e.ground.ns.hall+n.stair.totalHeight],r=e.in.ns.c+n.balconyEdge,s=r-n.balconyDepth+t;this.coords=[[e.in.we.a+n.westRoomWidth+t,e.in.ns.b],[e.top.we.toilet,e.in.ns.b],[e.top.we.toilet,i[1]],i,[i[0],e.top.ns.hall],[e.top.we.hall,e.top.ns.hall],[e.top.we.hall,e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.top.ns.walkway],[e.in.we.c,e.top.ns.walkway]],n.eastRoomExtended&&this.coords.push([e.top.we.hall,e.top.ns.walkway],[e.top.we.hall,s],[e.in.we.c,s]),this.coords.push([e.in.we.c,r],[e.in.we.b,r]),n.midRoomExtended&&this.coords.push([e.in.we.b,s],[e.top.we.toilet,s],[e.top.we.toilet,e.top.ns.walkway]),this.coords.push([e.in.we.b,e.top.ns.walkway],[e.in.we.a+n.westRoomWidth+t,e.top.ns.walkway])},parts:[new Ht({offset:[0,.3],sensorType:Ge.pir,onUpdate:function(n){const e=n.serverRoom,t=[n.stramien.in.we.b+(n.stramien.in.we.c-n.stramien.in.we.b)/2,n.stramien.in.ns.b];this.points=[ge(t,[-n.wallInnerThickness,0]),tn(e,t,!0),e]}}),...[Ge.smoke,Ge.poe,Ge.wifi].map((n,e)=>new Ht({offset:[0,n===Ge.smoke?-1:.3],sensorType:n,onUpdate:function(t){const i=t.serverRoom,r=[t.stramien.in.we.b+(t.stramien.in.we.c-t.stramien.in.we.b)/2,t.stramien.in.ns.b];this.points=[ge(r,[-t.wallInnerThickness,0]),tn(i,r,!0),i]}})),new Ht({offset:[0,.3],group:10,sensorType:Ge.socket,onUpdate:function(n){this.points=[ge([n.stramien.in.we.b,n.stramien.in.ns.b],[-1,0])]}}),new Ht({offset:[0,.3],group:10,sensorType:Ge.socket,onUpdate:function(n){this.points=[ge([n.stramien.in.we.c,n.stramien.in.ns.b],[0,0])]}}),new jc({onUpdate:function(n){const t=ge(this.parent.coords[0],[1,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"void",floor:tt.top,hole:!0,onUpdate:function(n){const e=[n.stramien.in.we.b,n.stramien.in.ns.c+n.balconyEdge],t=n.stramien.in.ns.d-e[1],i=n.stramien.in.we.c-n.stramien.in.we.b;this.coords=[e,ge(e,[1*i,0*t]),ge(e,[1*i,1*t]),ge(e,[0*i,1*t])]}}),new z1({name:"voidStairs",floor:tt.top,hole:!0,onUpdate:function(n){const e=n.stair;this.northWestCorner=e.stairOrigin;const t=n.stramien.in.ns.b-e.stairOrigin[1]-2-3*n.wallInnerThickness,i=e.totalWidth;this.coords=[this.northWestCorner,ge(this.northWestCorner,[i-e.walkWidth,0]),ge(this.northWestCorner,[i-e.walkWidth,t]),ge(this.northWestCorner,[0,t])]},parts:[new jc({onUpdate:function(n){const t=ge(this.parent.northWestCorner,[n.stair.totalWidth/2,1]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]})];class Dg extends sl{constructor(e){super(),this.url="assets/svg/",this.filename="dude.svg",this.anchor=[0,0],this.rotation=0,this.scaler=1,this.scale=[1,1],this.lineThickness=.1,Object.assign(this,e)}draw(e){var t=this;return Da(function*(){if(void 0===t.svg){if(!t.show(e))return;yield t.loader()}t.show(e)?(t.transform=`translate(${t.anchor[0]},${t.anchor[1]}) rotate(${t.rotation}) scale(${t.scale[0]},${t.scale[1]})`,t.svg.attr("transform",t.transform),t.svg.attr("visibility","visible"),t.setClass(t.svg)):t.svg.attr("visibility","hidden")})()}redraw(e){!this.show(e)||this.svg&&this.svg.node().querySelectorAll("path, rect, circle, ellipse, line, polyline, polygon").forEach(t=>{t.style.strokeWidth=this.scaler*this.meterPerPixel*this.lineThickness+"px"})}loader(){var e=this;return Da(function*(){const t=yield fetch(`${e.url}${e.filename}`).then(a=>a.text());e.svg=ro(`#${e.selector}`),e.classes.push(`svg-${e.filename.split(".")[0]}`);const i=/height="([0-9]+)[.]?\d*px"/gi,r=/width="([0-9]+)[.]?\d*px"/gi,s=Number(i.exec(t)[1]),o=Number(r.exec(t)[1]);e.svg.html(t.replace(i,`height="${s/1e3}px"`).replace(r,`width="${o/1e3}px"`)),e.scaler=s})()}}const b3=1.2,xGe={studAmount:12,studDistance:.6,towerWidth:1,wallInnerThickness:.07,wallOuterThickness:.5,roofOuterThickness:.5,studAmountNorth:12,studAmountSouth:4,studAmountWest:12,studAmountEast:8,showTower:!0,balconyWidth:6.2,ceilingHeight:3,floorAboveGround:.7,crawlerHeight:1,crawlerSpace:!0,name:"Lindelund",orientation:{lat:55.91821937,lng:13.654319808,rotation:10},parts:[new gP({floor:tt.ground,onUpdate:function(n){const e=n.stramien,t=n.tower;this.coords=[[e.in.we.b,e.in.ns.b],[e.in.we.b,e.in.ns.a],[e.in.we.c,e.in.ns.a],[e.in.we.c,t.innerCoords[0][1]],t.innerCoords[0],t.innerCoords[1],t.innerCoords[2],t.innerCoords[3],[t.innerCoords[3][0],e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.in.ns.c],[e.in.we.c,e.in.ns.c],[e.in.we.c,e.in.ns.d],[e.in.we.b,e.in.ns.d],[e.in.we.b,e.in.ns.c],[e.in.we.a,e.in.ns.c],[e.in.we.a,e.in.ns.b]]},parts:[...[...Array(17).keys()].map((n,e,t)=>{const i=[3,4,5,6,7];if([3,4,5,6,7].includes(n))return;const s=[0,11,14,17],o=t.length;return new ei({type:kn.outer,floor:tt.all,gable:[1,9,12,15].includes(n),tower:i.includes(n),onUpdate:function(a){const c=l=>l===i[0]||l===i[4]+1||s.includes(l)?ni.inside:s.includes(l)?void 0:ni.outside;this.drawByRoom(n,n+1!==o?n+1:0,a,c(n),c(n+1))},parts:[...16===n?[1].map(a=>new Ia({rotate:90,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/2,this.width/2)}})):[],...15===n?[new Ia({windowForm:Y0.hexagon,floor:tt.top,rotate:0,width:b3,elevation:.9,onUpdate:function(a){const c=this.parent;this.height=a.cross.ceilingHeight-.4-this.elevation,this.origin=c.getPosition(ot.out,.5,this.width/2)}}),...[1,2].map(a=>new Ia({rotate:0,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/3,this.width/2)}}))]:[],...14===n?[1,2].map(a=>new Ia({rotate:-90,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.width=l.innerWallLength<5?l.innerWallLength/3-.2:1.4,this.origin=l.getPosition(ot.out,a/3,this.width/2)}})):[],...13===n?[1].map(a=>new Ia({rotate:0,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=ge(l.getPosition(ot.in,1,-.9),[-l.thickness,0])}})):[],...12===n?[1].map(a=>new Ia({rotate:-90,floor:tt.all,elevation:0,windowForm:Y0.windowWall,onUpdate:function(c){this.height=c.cross.elevations[Dt.topInside];const l=this.parent;this.width=l.innerWallLength,this.origin=l.getPosition(ot.out,a/2,this.width/2)}})):[],...11===n?[1].map(a=>new Ia({rotate:180,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=ge(l.getPosition(ot.in,0,this.width+.9),[l.thickness,0])}})):[],...10===n?[1].map(a=>new Ia({rotate:-90,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/2,this.width/2)}})):[],...9===n?[new Ia({windowForm:Y0.hexagon,floor:tt.top,rotate:180,width:b3,elevation:.9,onUpdate:function(a){const c=this.parent;this.height=a.cross.ceilingHeight-.4-this.elevation,this.origin=c.getPosition(ot.out,.5,this.width/2)}}),...[0,1].map(a=>new Ia({rotate:180,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a,this.width/2+(this.width+.8)*(0===a?1:-1))}})),...[0,1].map(a=>new ta({floor:tt.ground,scale:[-1,0===a?-1:1],outside:!0,onUpdate:function(c){const u=this.parent,f=u.innerWallLength/2;this.origin=ge(u.origin,[0,0===a?f-this.width:f+this.width])}}))]:[],...8===n?[1].map(a=>new Ia({rotate:90,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,.5,this.width/2-c.wallOuterThickness/2)}})):[],...2===n?[1,2.5].map(a=>new Ia({rotate:180,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/3,this.width/2)}})):[],...1===n?[new Ia({windowForm:Y0.hexagon,floor:tt.top,rotate:90,width:b3,elevation:.9,onUpdate:function(a){const c=this.parent;this.height=a.cross.ceilingHeight-.4-this.elevation,this.origin=c.getPosition(ot.out,.5,this.width/2)}}),...[1,2].map(a=>new Ia({rotate:90,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/3,this.width/2)}}))]:[],...0===n?[new ta({outside:!0,width:1,height:2.7,floor:tt.ground,rotate:0,scale:[1,1],onUpdate:function(a){this.origin=ge(this.parent.getPosition(ot.in,0,1.2+a.wallInnerThickness),[-a.wallOuterThickness,0])}}),...[2,5].map(a=>new Ia({rotate:0,width:b3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,(a+1)/8,this.width/2)}}))]:[]]})}).filter(n=>n),...[...Array(8).keys()].map((n,e,t)=>new ei({type:kn.outer,tower:!0,onUpdate:function(i){if(this.ceiling=i.cross.ceilingHeight,this.outOfDesign=!i.showTower,this.floor=n<3?tt.all:tt.tower,this.outOfDesign)return;const r=i.wallOuterThickness-i.wallInnerThickness,s=JSON.parse(JSON.stringify(i.tower.innerCoords));this.origin=[i.stramien.in.we.c,s[0][1]],this.innerWallLength=i.towerWidth-r;const o=7===n?0:n+1;0===n&&(s[n][0]=i.stramien.in.we.c),2===n&&(s[o][1]=i.stramien.in.ns.b),this.sides={[ot.out]:[i.tower.outerCoords[n],i.tower.outerCoords[o]],[ot.in]:[s[n],s[o]]}},parts:[...0===n?[new Ht({sensorType:Ge.socket,amount:2,group:4,onUpdate:function(i){const r=this.parent,s=r.getPosition(ot.in,0,0);this.points=[r.getPosition(ot.in,1,-.2),s,tn(s,i.serverRoom,!0),i.serverRoom]}})]:[],...1===n?[new ta({outside:!0,rotate:135,scale:[1,1],floor:tt.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(ot.out,.5,-this.width/2))}}),new Ia({rotate:135,scale:[1,1],floor:tt.top,width:.8,elevation:1,height:2,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(ot.out,.5,this.width/2))}})]:[],...2===n?[new Ht({sensorType:Ge.socket,amount:2,group:4,onUpdate:function(i){const s=this.parent.getPosition(ot.in,0,.2);this.points=[s,tn(s,i.serverRoom,!0),i.serverRoom]}})]:[]]})).filter(n=>n)]}),new z1({name:"West",function:"Vardagsrum",floor:tt.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(e.in.we.b-e.in.we.a-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new Ht({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,3/4,0);this.points=[e,tn(n,e,!1),n]}}),new Ht({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,1/4,0);this.points=[e,tn(n,e,!1),n]}}),new Ht({group:1,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=ge(this.parent.sides[ot.in][1],[-1,0]);this.points=[e]}}),new Ht({group:1,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=ge(this.parent.sides[ot.in][1],[-this.parent.parent.width/2,0]);this.points=[t]}}),new Ht({group:1,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=ge(this.parent.sides[ot.in][0],[1,0]);this.points=[e]}})]}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(1,2,n,ni.straight,ni.straight)},parts:[new Ht({group:2,sensorType:Ge.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=ge(this.parent.sides[ot.in][1],[0,-1]);this.points=[e]}}),new Ht({group:1,sensorType:Ge.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=ge(this.parent.sides[ot.in][0],[0,1]);this.points=[e]}}),new ta({floor:tt.ground,scale:[1,-1],onUpdate:function(n){this.origin=ge(this.parent.sides[ot.in][0],[0,this.parent.parent.height/2-this.width])}}),new ta({floor:tt.ground,scale:[1,1],onUpdate:function(n){this.origin=ge(this.parent.sides[ot.in][0],[0,this.parent.parent.height/2+this.width])}}),...[Ge.dimmer,Ge.lightSwitch,Ge.temperature].map((n,e)=>new Ht({sensorType:n,offsetWall:Ge.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(ot.in,.3333333333333333,0);this.points=[i,tn(t.serverRoom,i,!1),t.serverRoom]}}))]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Ht({group:2,sensorType:Ge.socket,amount:2,offset:[0,-.3],onUpdate:function(n){const t=ge(this.parent.sides[ot.in][0],[-1,0]);this.points=[t]}}),new Ht({group:2,sensorType:Ge.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=ge(this.parent.sides[ot.in][0],[-this.parent.parent.width/2,0]);this.points=[e]}}),new Ht({group:2,sensorType:Ge.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=ge(this.parent.sides[ot.in][1],[1,0]);this.points=[e]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new Ht({group:1,sensorType:Ge.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=ge(this.parent.sides[ot.in][1],[0,1]);this.points=[e]}}),new Ht({group:2,sensorType:Ge.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=ge(this.parent.sides[ot.in][0],[0,-1]);this.points=[e]}})]}),new Ht({sensorType:Ge.smoke,onUpdate:function(n){const e=ge(this.parent.northWestCorner,[.8*this.parent.width,.5*this.parent.height]),t=ge(e,[0,.5*-this.parent.height]);this.points=[e,t,tn(t,n.serverRoom,!1),n.serverRoom]}}),new Ht({sensorType:Ge.socket,amount:2,cableOnly:!0,group:1,onUpdate:function(n){const e=this.parent;this.points=[ge(e.northWestCorner,[e.width,e.height/2-1]),ge(e.northWestCorner,[e.width,0]),ge(e.northWestCorner,[0,0]),ge(e.northWestCorner,[0,e.height/2-1])]}}),new Ht({sensorType:Ge.socket,amount:2,cableOnly:!0,group:2,onUpdate:function(n){const e=this.parent;this.points=[ge(e.northWestCorner,[0,e.height/2+1]),ge(e.northWestCorner,[0,e.height]),ge(e.northWestCorner,[e.width,e.height]),ge(e.northWestCorner,[e.width,e.height/2+1])]}}),new Ht({group:1,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[e.width-n.wallInnerThickness,0]);this.points=[t,tn(n.serverRoom,t,!0),n.serverRoom]}}),new Ht({group:2,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[e.width,e.height/2+1]);this.points=[ge(e.northWestCorner,[e.width-n.wallInnerThickness,e.height/2+1]),t,tn(n.serverRoom,t,!1),n.serverRoom]}}),...[Ge.camera,Ge.poe].map(n=>new Ht({sensorType:n,cableType:Ru.OutsidePOE,offset:[0,-1],onUpdate:function(e){const t=this.parent,i=ge(t.northWestCorner,[t.width/2,-e.wallOuterThickness]);this.points=[i,ge(i,[0,1]),e.serverRoom]}})),...[Ge.camera,Ge.poe].map(n=>new Ht({sensorType:n,cableType:Ru.OutsidePOE,offset:[0,1],onUpdate:function(e){const t=this.parent,i=ge(t.northWestCorner,[1,t.height+e.wallOuterThickness]);this.points=[i,ge(i,[0,-1]),e.serverRoom]}})),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({sensorType:Ge.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"East",function:"Matplats",floor:tt.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.c+n.wallInnerThickness,e.in.ns.b],this.squaredRoom(e.in.we.d-e.in.we.c-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new Ht({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,.3333333333333333,0);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}}),new Ht({group:3,sensorType:Ge.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,1/3,0)]}}),new Ht({group:3,sensorType:Ge.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,2/3,0)]}}),new Ht({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,3/4,0);this.points=[e,tn(n,e,!0),n]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[Ge.camera,Ge.poe].map(n=>new Ht({sensorType:n,cableType:Ru.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,0);this.points=[ge(t,[e.wallOuterThickness,0]),ge(t,[-1,1]),e.serverRoom]}})),new Ht({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,1.5);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Ht({group:3,amount:2,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,1/3,0)]}}),new Ht({group:3,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){this.points=[this.parent.getPosition(ot.in,2/3,0)]}}),new Ht({sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,1/4,0),t=this.parent.parent.northWestCorner;this.points=[e,tn(e,t,!0),t,tn(n,t,!0),n]}})]}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(3,0,n,ni.straight,ni.straight)},parts:[...[Ge.dimmer,Ge.lightSwitch,Ge.temperature].map((n,e)=>new Ht({sensorType:n,offsetWall:Ge.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(ot.in,1,-1.5);this.points=[i,tn(t.serverRoom,i,!1),t.serverRoom]}})),new ta({floor:tt.ground,scale:[1,1],rotate:180,onUpdate:function(n){this.origin=ge(this.parent.sides[ot.in][1],[0,this.parent.parent.height/2-this.width])}}),new ta({floor:tt.ground,scale:[1,-1],rotate:180,onUpdate:function(n){this.origin=ge(this.parent.sides[ot.in][1],[0,this.parent.parent.height/2+this.width])}})]}),new Ht({sensorType:Ge.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[ge(e.northWestCorner,[e.width,e.height/2-1]),ge(e.northWestCorner,[e.width,0]),ge(e.northWestCorner,[0,0]),ge(e.northWestCorner,[0,e.height/2-1])]}}),new Ht({sensorType:Ge.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[ge(e.northWestCorner,[0,e.height/2+1]),ge(e.northWestCorner,[0,e.height]),ge(e.northWestCorner,[e.width,e.height]),ge(e.northWestCorner,[e.width,e.height/2+1])]}}),new Ht({group:3,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const t=ge(this.parent.northWestCorner,[0,0]);this.points=[t,tn(n.serverRoom,t,!0),n.serverRoom]}}),new Ht({group:3,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[-n.wallInnerThickness,e.height/2+1]);this.points=[ge(e.northWestCorner,[0,e.height/2+1]),t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new jc({sensorType:Ge.lightBulb,onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({sensorType:Ge.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"Central",function:"k\xf6k",floor:tt.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.d-n.stramien.in.ns.b)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=ge(this.parent.northWestCorner,[this.parent.width,n.stramien.in.ns.c-n.stramien.in.ns.b]),this.sides={[ot.in]:[ge(this.origin,[n.wallOuterThickness,+n.wallOuterThickness]),ge(this.origin,[n.wallOuterThickness,this.innerWallLength+n.wallOuterThickness])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[0,this.innerWallLength])]}},parts:[new Ht({group:4,amount:3,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,.5,0)]}}),new Ht({group:4,amount:2,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,0,-1)]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[new Ht({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,1.5);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Dg({filename:"Table.svg",onUpdate:function(){this.rotation=0;const e=this.parent.getPosition(ot.in,0,2.6+.8);this.anchor=ge(e,[0,-.8-1.6])}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=ge(this.parent.northWestCorner,[0,n.stramien.in.ns.d-n.stramien.in.ns.b]),this.sides={[ot.in]:[ge(this.origin,[-n.wallOuterThickness,+n.wallOuterThickness]),ge(this.origin,[-n.wallOuterThickness,-this.innerWallLength+n.wallOuterThickness])],[ot.in]:[ge(this.origin,[0,0]),ge(this.origin,[0,-this.innerWallLength])]}},parts:[new Ht({group:5,amount:6,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,.5,0)]}}),new Ht({group:5,amount:6,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,1,1)]}}),...[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].map(n=>new Dg({filename:"kitchen.svg",onUpdate:function(){let e=.6*n;n>4&&(e=.6*(n-5)),n>8&&(e=.6*(n-8)),n>12&&(e=-1.5);let t=-.6;n>4&&(t=1.2+.6),n>8&&(t=1.8),n>12&&(t=.6*(n-13)),this.rotation=0,n>4&&(this.rotation=180),n>8&&(this.rotation=0),n>12&&(this.rotation=-90),4===n&&(this.scale=[1,.4/.6],e-=.6-.6*this.scale[1]);const r=this.parent.getPosition(ot.in,1,e);this.anchor=ge(r,[t,0])}})),new Dg({filename:"sink.svg",onUpdate:function(){this.rotation=-90;const e=this.parent.getPosition(ot.in,1,-1.5);this.anchor=ge(e,[.6,0])}}),new Dg({filename:"induction.svg",onUpdate:function(){this.rotation=180;const e=this.parent.getPosition(ot.in,1,.6);this.anchor=ge(e,[1.2+.6,0])}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[Ge.dimmer,Ge.lightSwitch,Ge.temperature].map((n,e)=>new Ht({sensorType:n,offsetWall:Ge.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(ot.in,1,-1.5);this.points=[i,tn(t.serverRoom,i,!1),t.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map((n,e)=>new Ht({sensorType:n,onUpdate:function(t){const i=this.parent.getPosition(ot.in,0,1.5);this.points=[i,tn(t.serverRoom,i,!1),t.serverRoom]}})),...[Ge.drain,Ge.waterWarm].map(n=>new rc({sensorType:n,onUpdate:function(e){const r=this.parent.getPosition(ot.in,0,1.5);this.points=[r,tn(e.serverRoom,r,!0),e.serverRoom]}}))]}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(0,1,n,ni.straight,ni.straight)},parts:[new ta({floor:tt.ground,rotate:90,scale:[-1,1],onUpdate:function(n){this.origin=this.parent.getPosition(ot.in,0,0)}})]}),new Ht({group:7,offset:[.6,0],sensorType:Ge.perilex,verticalCableLength:4,onUpdate:function(n){const e=ge(this.parent.northWestCorner,[0,this.parent.height-2]);this.points=[e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Ht({group:4,cableOnly:!0,sensorType:Ge.socket,amount:2,onUpdate:function(n){const e=ge(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[ge(this.parent.northWestCorner,[this.parent.width,this.parent.height]),ge(this.parent.northWestCorner,[this.parent.width,0]),e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Ht({group:5,cableOnly:!0,sensorType:Ge.socket,amount:2,onUpdate:function(n){const e=ge(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[ge(this.parent.northWestCorner,[0,this.parent.height]),ge(this.parent.northWestCorner,[0,0]),e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Ht({group:5,amount:6,sensorType:Ge.socket,onUpdate:function(n){const e=ge(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=ge(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,tn(e,t,!0),t]}}),new Ht({group:5,amount:2,offset:[.3,0],sensorType:Ge.socket,onUpdate:function(n){const e=ge(this.parent.northWestCorner,[0*this.parent.width,.15*this.parent.height]),t=ge(this.parent.northWestCorner,[0,.15*this.parent.height]);this.points=[e,tn(e,t,!0),t]}}),new Ht({group:4,amount:2,offset:[-.3,0],sensorType:Ge.socket,onUpdate:function(n){const e=ge(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]),t=ge(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]);this.points=[e,tn(e,t,!0),t]}}),new Ht({sensorType:Ge.smoke,verticalCableLength:6,onUpdate:function(n){const e=ge(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=ge(this.parent.northWestCorner,[0*this.parent.width,.8*this.parent.height]),i=this.parent.northWestCorner;this.points=[e,t,i,tn(i,n.serverRoom,!0),n.serverRoom]}}),new Ht({sensorType:Ge.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=ge(this.parent.northWestCorner,[0,.5*this.parent.height-2]);this.points=[e,tn(n,e,!1),n]}}),new Ht({sensorType:Ge.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=ge(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,tn(n,e,!1),n]}}),new Ht({offset:[-.3,0],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.serverRoom,e=ge(this.parent.northWestCorner,[this.parent.width,.5*this.parent.height-2]);this.points=[e,tn(n,e,!1),n]}}),new Ht({sensorType:Ge.pir,cableType:Ru.SharedEthernet,offset:[0,.3],onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[e.width/2,0]),i=tn(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"Hall",function:"Entr\xe9",floor:tt.ground,onUpdate:function(n){this.northWestCorner=n.stair.stairOrigin,this.squaredRoom(n.stramien.ground.we.hall-n.stramien.in.we.b,n.stramien.in.ns.b-n.stramien.ground.ns.hall-n.wallInnerThickness)},parts:[new Ht({sensorType:Ge.pir,cableType:Ru.SharedEthernet,offset:[-.3,0],onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[e.width,e.height-1]),i=ge(e.northWestCorner,[e.width,e.height]);this.points=[t,i,n.serverRoom]}}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(1,2,n,ni.straight,ni.straight)},parts:[new ta({scale:[1,1],rotate:0,floor:tt.ground,onUpdate:function(n){this.origin=ge(this.parent.getPosition(ot.in,1,-.2),[-n.wallInnerThickness,0])}}),new ta({scale:[-1,1],rotate:0,floor:tt.ground,onUpdate:function(n){this.origin=ge(this.parent.getPosition(ot.out,1,-(n.stramien.in.ns.b-n.tower.innerCoords[0][1]-1*n.wallInnerThickness-.9)),[-n.wallInnerThickness,0])}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({sensorType:n,offsetWall:.3,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-2.5);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({sensorType:n,offsetWall:-.3,onUpdate:function(e){const t=ge(this.parent.getPosition(ot.in,1,-2.5),[e.wallInnerThickness,0]);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}}))]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new Ht({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,2.5);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}})]}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"Office",function:"Office",floor:tt.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.ground.ns.hall-n.stramien.in.ns.a-n.wallInnerThickness)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[2/6,4/6].map(n=>new Ht({offsetWall:.3,sensorType:Ge.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(ot.in,n,0);this.points=[t,tn(e,t,!1),e]}}))]}),new ei({floor:tt.ground,type:kn.inner,onUpdate:function(n){this.drawByRoom(2,3,n,ni.straight,ni.straight)},parts:[new ta({rotate:90,floor:tt.ground,scale:[1,1],onUpdate:function(n){this.origin=this.parent.getPosition(ot.in,1,-(n.stair.totalWidth+n.wallInnerThickness-this.width))}}),...[0,1,2].map(n=>new Ht({amount:2,offsetWall:-.3,sensorType:Ge.socket,onUpdate:function(e){const i=this.parent.getPosition(ot.in,(n+1)/6,0);this.points=[i]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({sensorType:n,offsetWall:.3,onUpdate:function(e){const i=this.parent.getPosition(ot.in,.5,0);this.points=[i,tn(e.serverRoom,i,!1),e.serverRoom]}})),new Ht({sensorType:Ge.lightSwitch,offsetWall:-.3,onUpdate:function(n){const t=ge(this.parent.getPosition(ot.in,.5,0),[0,n.wallInnerThickness]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[Ge.camera,Ge.poe].map(n=>new Ht({sensorType:n,cableType:Ru.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,0);this.points=[ge(t,[e.wallOuterThickness,0]),ge(t,[-1,1]),e.serverRoom]}})),...[2/6,4/6].map(n=>new Ht({offsetWall:-.3,sensorType:Ge.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(ot.in,n,0);this.points=[t,tn(e,t,!1),e]}}))]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[...[1/6,5/6].map(n=>new Ht({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(ot.in,n,0);this.points=[t,tn(e,t,!1),e]}}))]}),new Ht({sensorType:Ge.smoke,onUpdate:function(n){const e=ge(this.parent.northWestCorner,[.5*this.parent.width,.5*this.parent.height]);this.points=[e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Ht({sensorType:Ge.socket,amount:2,via:tt.ceiling,group:6,offset:[0,.3],onUpdate:function(n){const i=ge(this.parent.northWestCorner,[1,0]);this.points=[i]}}),new Ht({sensorType:Ge.socket,amount:2,group:6,offset:[0,.3],onUpdate:function(n){const e=this.parent,i=ge(e.northWestCorner,[e.width-1,0]);this.points=[i]}}),new Ht({sensorType:Ge.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const e=this.parent,i=ge(e.northWestCorner,[0,e.height-1]);this.points=[i]}}),new Ht({sensorType:Ge.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const i=ge(this.parent.northWestCorner,[0,1]);this.points=[i]}}),new Ht({sensorType:Ge.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=ge(e.northWestCorner,[e.width,1]);this.points=[i]}}),new Ht({sensorType:Ge.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=ge(e.northWestCorner,[e.width,e.height-1]);this.points=[i]}}),new Ht({sensorType:Ge.socket,amount:2,cableOnly:!0,group:6,onUpdate:function(n){const e=this.parent;this.points=[ge(e.northWestCorner,[0,e.height-1]),ge(e.northWestCorner,[0,0]),ge(e.northWestCorner,[e.width,0]),ge(e.northWestCorner,[e.width,e.height]),ge(e.northWestCorner,[.5*e.width,e.height]),tn(n.serverRoom,ge(e.northWestCorner,[.5*e.width,e.height]),!1),n.serverRoom]}}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({sensorType:Ge.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"Toilet",floor:tt.ground,function:"WC",onUpdate:function(n){const e=n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9;this.northWestCorner=[n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness,n.stramien.in.ns.b-e-n.wallInnerThickness],this.squaredRoom(.8,e)},parts:[new ei({floor:tt.ground,type:kn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ni.straight,ni.outside)},parts:[new rc({sensorType:Ge.toilet,size:120,onUpdate:function(n){const e=ge(this.parent.getPosition(ot.in,.5,0),[0,.2]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}})]}),new ei({floor:tt.ground,type:kn.inner,onUpdate:function(n){this.drawByRoom(1,2,n,ni.outside,ni.straight)},parts:[new rc({sensorType:Ge.drain,onUpdate:function(n){const e=ge(this.parent.getPosition(ot.in,.6666666666666666,0),[0,0]);this.points=[e,[e[0],this.parent.parent.northWestCorner[1]+.2]]}}),new rc({sensorType:Ge.waterWarm,onUpdate:function(n){const e=ge(this.parent.getPosition(ot.in,.6666666666666666,0),[0,0]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawByRoom(3,0,n,ni.straight,ni.straight)},parts:[new Ht({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,.8);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}})]}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"Server",function:"KLK",floor:tt.ground,onUpdate:function(n){const e=n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9,t=n.stramien.ground.we.hall+.8+2*n.wallInnerThickness;this.northWestCorner=[t,n.stramien.in.ns.b-e-n.wallInnerThickness],this.squaredRoom(n.stramien.in.we.c-t,e)},parts:[new ei({floor:tt.ground,type:kn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ni.straight,ni.straight)},parts:[...[0,1,2].map(n=>new Ht({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:Ge.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(ot.in,(n+1)/4,0);this.points=[ge(i,[0,1===n?-e.wallInnerThickness:0]),ge(i,[0,0]),tn(t,i,!1),t]}}))]}),new Ht({sensorType:Ge.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,tn(e,n.serverRoom,!0),n.serverRoom]}}),...[Ge.poe,Ge.wifi].map(n=>new Ht({offset:[0,.3],sensorType:n,onUpdate:function(e){const t=this.parent.center;this.points=[t,tn(t,e.serverRoom,!0),e.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Ht({sensorType:n,offset:[0,.3],onUpdate:function(e){const t=this.parent,i=ge(t.northWestCorner,[.2*t.width,0*t.height]),r=ge(t.northWestCorner,[0*t.width,0*t.height]);this.points=[i,r,tn(e.serverRoom,r,!1),e.serverRoom]}})),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({sensorType:Ge.ventIn,size:100,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"Tower",floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,this.outOfDesign||(this.northWestCorner=[n.stramien.out.we.c-(n.wallOuterThickness-n.wallInnerThickness),n.tower.innerCoords[0][1]],this.center=ge(this.northWestCorner,[1,1]),this.centralElectricity=this.center,this.coords=[this.northWestCorner,n.tower.innerCoords[0],n.tower.innerCoords[1],n.tower.innerCoords[2],n.tower.innerCoords[3],[n.tower.innerCoords[3][0],n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]])},parts:[new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(6,0,n,ni.outside,ni.straight)},parts:[new ta({scale:[1,1],rotate:180,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=tt.ground,this.origin=this.parent.getPosition(ot.in,1,0))}})]}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(5,6,n,ni.straight,ni.outside)},parts:[new ta({scale:[-1,1],rotate:-90,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=tt.ground,this.origin=this.parent.getPosition(ot.in,0,n.wallInnerThickness))}})]}),new Ht({sensorType:Ge.pir,cableType:Ru.SharedEthernet,offset:[.3,0],onUpdate:function(n){const e=this.parent,t=ge(e.northWestCorner,[0,e.height-1]),i=tn(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new z1({name:"Laundry",function:"Kl\xe4dv\xe5rd",floor:tt.ground,onUpdate:function(n){const t=n.stramien.in.we.c-n.stramien.ground.we.hall-n.wallInnerThickness,i=n.stramien.in.ns.b-n.stramien.ground.ns.hall-(n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9)-2*n.wallInnerThickness;this.northWestCorner=[n.stramien.ground.we.hall+n.wallInnerThickness,n.stramien.ground.ns.hall],this.squaredRoom(t,i)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new rc({sensorType:Ge.drain,onUpdate:function(n){const t=this.parent.parent.center;this.points=[t,tn(n.serverRoom,t,!0),n.serverRoom]}}),...[Ge.waterCold,Ge.waterRain].map(n=>new rc({sensorType:n,offsetWall:n===Ge.waterRain?0:.3,onUpdate:function(e){const i=this.parent.getPosition(ot.in,n===Ge.waterRain?2/3:3/4,0);this.points=[i,tn(e.serverRoom,i,!1),e.serverRoom]}})),...[Ge.waterCold,Ge.waterRain].map(n=>new rc({sensorType:n,offsetWall:n===Ge.waterRain?0:.3,onUpdate:function(e){const t=this.parent,i=t.getPosition(ot.in,n===Ge.waterRain?1/3:1/4,0),r=t.getPosition(ot.in,n===Ge.waterRain?2/3:3/4,0);this.points=[i,r]}})),new rc({sensorType:Ge.drain,onUpdate:function(n){const e=this.parent,t=e.parent,i=e.getPosition(ot.in,.5,0);this.points=[i,t.center]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallInnerThickness)},parts:[]}),new Ht({sensorType:Ge.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Ht({sensorType:Ge.ethernet,offset:[.3,0],onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=ge(t.northWestCorner,[0*t.width,.5*t.height]);this.points=[i,tn(e,i,!1),e]}}),new jc({onUpdate:function(n){const t=ge(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new r4({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),...bGe]};var Ig=(()=>{return(n=Ig||(Ig={})).amount="amount",n.name="name",n.sizeOrVersion="sizeOrVersion",n.price="price",n.priceAvg="priceAvg",n.priceMax="priceMax",n.priceTotal="priceTotal",n.remarks="other",n.unit="unit",Ig;var n})();class Z0{constructor(e){this.sectionFold=!1,Object.assign(this,e)}}class ha{constructor(e){this.amount=1,this.type="single",Object.assign(this,e)}get calcPrice(){return An(this.amount*this.price,2)}get calcAmount(){return this.amount}}class $M extends ha{constructor(e){super(e),this.costs=[],this.type="group",this.collapsed=!1,Object.assign(this,e)}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}get calcPrice(){return CM(this.costs.map(e=>e.calcPrice))}get calcAmount(){return CM(this.costs.map(e=>e.amount))}}class MGe extends $M{constructor(e){super(e),this.costs=[],this.type="total",Object.assign(this,e)}get calcPrice(){return CM(this.costs.map(e=>e.calcPrice))}get calcAmount(){return 0}get folded(){return'<span class="material-icons">remove</span>'}}let Lo=(()=>{class n{constructor(t){this.appService=t,this.house$=new no(new CGe(xGe)),this.roomKeys=this.house$.value.partsFlatten.filter(i=>i instanceof z1).map(i=>i.selector),this.wallKeys=this.house$.value.partsFlatten.filter(i=>i instanceof ei).map(i=>i.selector),this.doorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof ta).map(i=>i.selector),this.windowKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Ia).map(i=>i.selector),this.sensorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Ht).map(i=>i.selector).sort((i,r)=>i.localeCompare(r)),this.exampleKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Dg).map(i=>i.selector).sort((i,r)=>i.localeCompare(r))}update(t="house",i,r,s){const o=this.house$.value;"house"===t&&(o[i]=r),"stair"===t&&(o.stair[i]=r),"cross"===t&&(o.cross[i]=r),"construction"===t&&(o.construction[i]=r),o.calculateHouse(),o.calculateStats(),this.house$.next(o),void 0!==s&&(this.appService.tag$.next(s),clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.appService.tag$.next(void 0)},600))}destroyParts(){const t=r=>{r.parts.forEach(function(){var s=Da(function*(o){o.svg=void 0,void 0!==o.parts&&t(o)});return function(o){return s.apply(this,arguments)}}())},i=this.house$.value;t(i),t(i.cross),t(i.stair)}getGroups(t){return[...new Set(Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Ht).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s)}getOutlets(t){return Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Ht).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return An(Object.values(this.house$.value.partsFlatten).filter(s=>s instanceof Ht).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}getWallLength(){const t=this.house$.value;return{innerLength:Math.ceil(t4(Object.values(t.partsFlatten).filter(s=>s instanceof ei).map(s=>{let o=0;return s.type===kn.inner&&(o+=s.getLength(ot.out)),o+=s.getLength(ot.in),o}))),outerLength:Math.ceil(t4(Object.values(t.partsFlatten).filter(s=>s instanceof ei).filter(s=>s.type===kn.outer).map(s=>s.getLength(ot.out)),1))}}getWallArea(){const t=this.house$.value;return{innerArea:Math.ceil(t4(Object.values(t.partsFlatten).filter(s=>s instanceof ei).map(s=>{let o=0;return s.type===kn.inner&&(o+=s.getArea(ot.out)),o+=s.getArea(ot.in),o}))),outerArea:Math.ceil(t4(Object.values(t.partsFlatten).filter(s=>s instanceof ei).filter(s=>s.type===kn.outer).map(s=>s.getArea(ot.out)),1))}}getT(t,i,r,s=(()=>!0),o=!0){const a=mP(),c=Object.values(this.house$.value.partsFlatten.filter(l=>l instanceof t).filter(l=>s(l)).reduce((l,u)=>{const f=i.map(p=>`${u[p]}`).join(",");return f in l||(l[f]={count:0,part:u}),l[f].count+=t!==Ht||o?1:u.getLength(),l},{})).map(l=>{const u=new ha(r(l.part));return u.amount=An(l.count,1),u.uuid=a,u});if(c.length>1){const l=new $M({uuid:a,name:`${c[0].name}`,costs:c});return l[c[0].name]=!1,l}{if(!c[0])return;const l=c[0];return l.uuid=void 0,l}}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bg=(()=>{class n{constructor(t,i){this.overlay=t,this.houseService=i,this.tooltipHTML$=new no(void 0),this.unsubscribe=new Je}attachPopup([t,i],r){this.detachOverlay(),this.origin=r instanceof Ht?r.svgIcon.node():r.svg.node(),this.overlayRef=this.overlay.create({positionStrategy:this.getPositionStrategy([t,i]),scrollStrategy:this.overlay.scrollStrategies.reposition(),hasBackdrop:!1}),this.overlayRef.backdropClick().pipe(Ta(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.attachOverlay(r)}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach()}updateOverlay(){}attachOverlay(t){if(this.overlayRef&&!this.overlayRef.hasAttached()){const i=new s9(uGe);this.componentRef=this.overlayRef.attach(i),this.componentRef.instance.html=t.tooltip(this.houseService.house$.value)}}getPositionStrategy([t,i]){return this.overlay.position().flexibleConnectedTo(this.origin).withPositions([new EC({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"},0,-20),new EC({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"},0,20,"flipped")]).withPush(!0)}}return n.\u0275fac=function(t){return new(t||n)(Xe(A3),Xe(Lo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SGe=(()=>{class n{constructor(t,i){this.appService=t,this.houseService=i,this.appService.states$.subscribe(r=>{this.states=r,this.house=this.houseService.house$.value,this.cross=this.house.cross,this.filterOut(),this.appService.update$.next()})}updateStateBasedOnSection(t,i){if(this.section===t)return;this.section=t;const r=this.appService.states$.value;this.buildState(r,[D2.grid],[_t.basics].includes(t)),this.buildState(r,[D2.silhouette],[_t.roofEdge].includes(t)),this.buildState(r,[D2.measure,D2.minimumHeight],[_t.stairBasic,_t.stairCheck,_t.stairPlan,_t.basics,_t.roof70,_t.roofCircle].includes(t)),this.buildState(r,[D2.doors],![_t.passiv,_t.welcome].includes(t)),this.buildState(r,[Ge.socket,Ge.perilex],[_t.wiredPower].includes(t)),this.buildState(r,[Ge.poe,Ge.ethernet,Ge.wifi],[_t.wiredEthernet].includes(t)),this.buildState(r,[Ge.ventIn,Ge.ventOut],[_t.wiredVent].includes(t)),this.buildState(r,[Ge.dimmer,Ge.dlc,Ge.lightBulb,Ge.lightSwitch],[_t.wiredLight].includes(t)),this.buildState(r,[Ge.toilet,Ge.shower,Ge.drain,Ge.waterCold,Ge.waterRain,Ge.waterWarm],[_t.wiredWater].includes(t)),this.buildState(r,[Ge.camera,Ge.alarm,Ge.smoke],[_t.wiredSafety].includes(t)),this.buildState(r,[Ge.pir],[_t.wiredExtra,_t.wiredSafety].includes(t)),this.buildState(r,[Ge.blinds,Ge.temperature],[_t.wiredExtra].includes(t)),this.statesForConstruction(r,t),this.appService.commitState(r)}statesForConstruction(t,i){const r=[];r.push(_t.constructionWallGips),this.buildState(t,[Bi.gips],[...r].includes(i)),r.push(_t.constructionWallService),this.buildState(t,[Bi.serviceBeams,Bi.serviceInsulation],[...r].includes(i)),r.push(_t.constructionWallFacade),this.buildState(t,[Bi.facade],[...r].includes(i)),r.push(_t.constructionWallSpace),this.buildState(t,[Bi.space],[...r].includes(i)),r.push(_t.constructionRoofTiles),this.buildState(t,[Bi.roofTiles],[...r].includes(i)),r.push(_t.constructionRoofSpace),this.buildState(t,[Bi.roofSpace],[...r].includes(i)),r.push(_t.constructionRoofOuterSheet),r.push(_t.constructionWallOuterSheet),this.buildState(t,[Bi.outerSheet,Bi.roofOuterSheets],[...r].includes(i)),r.push(_t.constructionWallInsulation),this.buildState(t,[Bi.insulation],[...r].includes(i)),r.push(_t.constructionRoofInside),this.buildState(t,[Bi.roofOSB],[...r].includes(i)),r.push(_t.constructionRoofJoist),this.buildState(t,[Bi.roofJoists],[...r].includes(i)),r.push(_t.constructionRoofRidge),this.buildState(t,[Bi.roofRidge],[...r].includes(i)),r.push(_t.constructionFloor),this.buildState(t,[Bi.topFloorJoists,Bi.topFloorOSB],[...r].includes(i)),r.push(_t.constructionFloorLVL),this.buildState(t,[Bi.floorLVL],[...r].includes(i)),r.push(_t.constructionWallTape),this.buildState(t,[Bi.tapes],[...r].includes(i)),r.push(_t.constructionWallOSB),this.buildState(t,[Bi.osbWall],[...r].includes(i)),r.push(_t.constructionWallJoists),this.buildState(t,[Bi.joists],[...r].includes(i)),r.push(_t.constructionWallSole),this.buildState(t,[Bi.sole],[...r].includes(i)),r.push(_t.constructionGroundFloor),this.buildState(t,[Bi.groundFloor],[...r].includes(i)),r.push(_t.constructionCrawlerSpace),this.buildState(t,[Bi.crawlerSpace],[...r].includes(i)),r.push(_t.constructionFoundation),this.buildState(t,[Bi.foundation],[...r].includes(i))}filterOut(){this.house.tower.footprintVisible=this.states[D2.towerFootprint],this.house.partsFlatten.filter(t=>t instanceof ta).forEach(t=>t.visible=this.states[D2.doors]),this.house.partsFlatten.filter(t=>t instanceof ei).filter(t=>t.type===kn.theoretic).forEach(t=>t.outOfDesign=!this.states[D2.theoreticalWalls]),[...this.house.parts,...this.cross.parts,...this.house.stair.parts].filter(t=>t instanceof g1).forEach(t=>t.visible=this.states[D2.measure]),this.house.parts.filter(t=>t.selector.includes("house-stramien-")).forEach(t=>{t.visible=this.states[D2.stramien]}),this.house.parts.filter(t=>t.selector.includes("grid-index")).forEach(t=>{t.visible=this.states[D2.grid]}),this.house.partsFlatten.filter(t=>t instanceof Ht).forEach(t=>{t.visible=this.states[t.sensorType]}),this.house.partsFlatten.filter(t=>t instanceof Dg).forEach(t=>{t.visible=this.states[D2.examplePlan]})}buildState(t,i,r){i.forEach(s=>{t[s]=r})}getSide(t){return[yo.cross].includes(t)?Id.left:[yo.none].includes(t)?Id.none:Id.right}setGraphic(t){if([_t.welcome,_t.passiv,_t.basics,_t.extensions,_t.tower,_t.wiredWelcome,_t.wiredPower,_t.wiredEthernet,_t.wiredExtra,_t.wiredLight,_t.wiredSafety,_t.wiredVent,_t.wiredWater].includes(t))return yo.house2D;if([_t.roof70,_t.roofBasics,_t.roofChoice,_t.roofCircle,_t.roofEdge,_t.roofIntermezzo,_t.EndOfPageHouse].includes(t))return yo.cross;if([_t.roof70].includes(t))this.houseService.update("cross","viewedRoofStyle",Ul.roof70);else if([_t.roofBasics,_t.roofCircle].includes(t))this.houseService.update("cross","viewedRoofStyle",Ul.roofCircle);else{if([_t.stairStart,_t.stairBasic,_t.stairCheck].includes(t))return yo.stairCross;if([_t.stairPlan].includes(t))return yo.stairPlan;if([_t.constructionParameters,_t.facadeStart,_t.facadeWindow,_t.facadeDoor].includes(t))return yo.none;if([_t.constructionWelcome,_t.constructionFoundation,_t.constructionCrawlerSpace,_t.constructionFloor,_t.constructionRoof,_t.constructionWallFinish,_t.constructionWallSole,_t.constructionWallJoists,_t.constructionWallOSB,_t.constructionWallTape,_t.constructionWallOuterSheet,_t.constructionWallSpace,_t.constructionWallFacade,_t.constructionWallInsulation,_t.constructionWallService,_t.constructionWallGips,_t.constructionFloor,_t.constructionFloorLVL,_t.constructionGroundFloor,_t.constructionRoofRidge,_t.constructionRoofJoist,_t.constructionRoofInside,_t.constructionRoofOuterSheet,_t.constructionRoofSpace,_t.constructionRoofTiles].includes(t))return yo.construction;if([_t.House3D].includes(t))return yo.House3D;if([_t.installationDrinkWater,_t.installationElectricity,_t.installationGreyWater,_t.installationHeating,_t.installationSmartHome,_t.installationVentilation].includes(t))return yo.none}return yo.none}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mo),Xe(Lo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var qM={prefix:"fab",iconName:"discord",icon:[640,512,[],"f392","M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"]},vP={prefix:"fab",iconName:"patreon",icon:[512,512,[],"f3d9","M512 194.8c0 101.3-82.4 183.8-183.8 183.8-101.7 0-184.4-82.4-184.4-183.8 0-101.6 82.7-184.3 184.4-184.3C429.6 10.5 512 93.2 512 194.8zM0 501.5h90v-491H0v491z"]},_P={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]},yP={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},wP={prefix:"fab",iconName:"youtube",icon:[576,512,[61802],"f167","M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"]};function Vie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function fi(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Vie(Object(t),!0).forEach(function(i){$c(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vie(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function KM(n){return(KM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Uie(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function $c(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CP(n,e){return function oZe(n){if(Array.isArray(n))return n}(n)||function cZe(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(c){s=!0,a=c}finally{try{!r&&null!=t.return&&t.return()}finally{if(s)throw a}}return i}}(n,e)||Gie(n,e)||function uZe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qv(n){return function sZe(n){if(Array.isArray(n))return bP(n)}(n)||function aZe(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Gie(n)||function lZe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gie(n,e){if(n){if("string"==typeof n)return bP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bP(n,e)}}function bP(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var Qie=function(){},xP={},Wie={},jie=null,$ie={mark:Qie,measure:Qie};try{typeof window<"u"&&(xP=window),typeof document<"u"&&(Wie=document),typeof MutationObserver<"u"&&(jie=MutationObserver),typeof performance<"u"&&($ie=performance)}catch{}var ZM,JM,eS,tS,nS,qie=(xP.navigator||{}).userAgent,Kie=void 0===qie?"":qie,n6=xP,Ba=Wie,Xie=jie,YM=$ie,vf=!!Ba.documentElement&&!!Ba.head&&"function"==typeof Ba.addEventListener&&"function"==typeof Ba.createElement,Yie=~Kie.indexOf("MSIE")||~Kie.indexOf("Trident/"),_f="___FONT_AWESOME___",Jie="svg-inline--fa",I5="data-fa-i2svg",SP="data-fa-pseudo-element",EP="data-prefix",TP="data-icon",ere="fontawesome-i2svg",pZe=["HTML","HEAD","STYLE","SCRIPT"],tre=function(){try{return!0}catch{return!1}}(),Ra="classic",O1="sharp",LP=[Ra,O1];function Wv(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[Ra]}})}var jv=Wv(($c(ZM={},Ra,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),$c(ZM,O1,{fa:"solid",fass:"solid","fa-solid":"solid"}),ZM)),$v=Wv(($c(JM={},Ra,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),$c(JM,O1,{solid:"fass"}),JM)),qv=Wv(($c(eS={},Ra,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),$c(eS,O1,{fass:"fa-solid"}),eS)),gZe=Wv(($c(tS={},Ra,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),$c(tS,O1,{"fa-solid":"fass"}),tS)),mZe=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,nre="fa-layers-text",AZe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,vZe=Wv(($c(nS={},Ra,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),$c(nS,O1,{900:"fass"}),nS)),ire=[1,2,3,4,5,6,7,8,9,10],_Ze=ire.concat([11,12,13,14,15,16,17,18,19,20]),yZe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Kv=new Set;Object.keys($v[Ra]).map(Kv.add.bind(Kv)),Object.keys($v[O1]).map(Kv.add.bind(Kv));var wZe=[].concat(LP,Qv(Kv),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(ire.map(function(n){return"".concat(n,"x")})).concat(_Ze.map(function(n){return"w-".concat(n)})),Xv=n6.FontAwesomeConfig||{};Ba&&"function"==typeof Ba.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=CP(n,2),i=e[1],r=function bZe(n){return""===n||"false"!==n&&("true"===n||n)}(function CZe(n){var e=Ba.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(Xv[i]=r)});var rre={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:Jie,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Xv.familyPrefix&&(Xv.cssPrefix=Xv.familyPrefix);var Rg=fi(fi({},rre),Xv);Rg.autoReplaceSvg||(Rg.observeMutations=!1);var Si={};Object.keys(rre).forEach(function(n){Object.defineProperty(Si,n,{enumerable:!0,set:function(t){Rg[n]=t,Yv.forEach(function(i){return i(Si)})},get:function(){return Rg[n]}})}),Object.defineProperty(Si,"familyPrefix",{enumerable:!0,set:function(e){Rg.cssPrefix=e,Yv.forEach(function(t){return t(Si)})},get:function(){return Rg.cssPrefix}}),n6.FontAwesomeConfig=Si;var Yv=[],J0={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Zv(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function Fg(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function DP(n){return n.classList?Fg(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function sre(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function iS(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function IP(n){return n.size!==J0.size||n.x!==J0.x||n.y!==J0.y||n.rotate!==J0.rotate||n.flipX||n.flipY}function ore(){var n="fa",e=Jie,t=Si.cssPrefix,i=Si.replacementClass,r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return r}var are=!1;function BP(){Si.autoAddCss&&!are&&(function SZe(n){if(n&&vf){var e=Ba.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=Ba.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}Ba.head.insertBefore(e,i)}}(ore()),are=!0)}var BZe={mixout:function(){return{dom:{css:ore,insertCss:BP}}},hooks:function(){return{beforeDOMElementCreation:function(){BP()},beforeI2svg:function(){BP()}}}},yf=n6||{};yf[_f]||(yf[_f]={}),yf[_f].styles||(yf[_f].styles={}),yf[_f].hooks||(yf[_f].hooks={}),yf[_f].shims||(yf[_f].shims=[]);var $u=yf[_f],cre=[],rS=!1;function FZe(n){!vf||(rS?setTimeout(n,0):cre.push(n))}function Jv(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,s=void 0===r?[]:r;return"string"==typeof n?sre(n):"<".concat(e," ").concat(function TZe(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(sre(n[t]),'" ')},"").trim()}(i),">").concat(s.map(Jv).join(""),"</").concat(e,">")}function lre(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}vf&&((rS=(Ba.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ba.readyState))||Ba.addEventListener("DOMContentLoaded",function n(){Ba.removeEventListener("DOMContentLoaded",n),rS=1,cre.map(function(e){return e()})}));var RP=function(e,t,i,r){var c,l,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(c=1,u=e[s[0]]):(c=0,u=i);c<o;c++)u=a(u,e[l=s[c]],l,e);return u};function FP(n){var e=function PZe(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function ure(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function kP(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,s=ure(e);"function"!=typeof $u.hooks.addPack||r?$u.styles[n]=fi(fi({},$u.styles[n]||{}),s):$u.hooks.addPack(n,ure(e)),"fas"===n&&kP("fa",e)}var sS,oS,aS,kg=$u.styles,zZe=$u.shims,OZe=($c(sS={},Ra,Object.values(qv[Ra])),$c(sS,O1,Object.values(qv[O1])),sS),PP=null,hre={},fre={},dre={},pre={},gre={},NZe=($c(oS={},Ra,Object.keys(jv[Ra])),$c(oS,O1,Object.keys(jv[O1])),oS);function UZe(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function VZe(n){return~wZe.indexOf(n)}(r)?null:r}var mre=function(){var e=function(s){return RP(kg,function(o,a,c){return o[c]=RP(a,s,{}),o},{})};hre=e(function(r,s,o){return s[3]&&(r[s[3]]=o),s[2]&&s[2].filter(function(c){return"number"==typeof c}).forEach(function(c){r[c.toString(16)]=o}),r}),fre=e(function(r,s,o){return r[o]=o,s[2]&&s[2].filter(function(c){return"string"==typeof c}).forEach(function(c){r[c]=o}),r}),gre=e(function(r,s,o){var a=s[2];return r[o]=o,a.forEach(function(c){r[c]=o}),r});var t="far"in kg||Si.autoFetchSvg,i=RP(zZe,function(r,s){var o=s[0],a=s[1],c=s[2];return"far"===a&&!t&&(a="fas"),"string"==typeof o&&(r.names[o]={prefix:a,iconName:c}),"number"==typeof o&&(r.unicodes[o.toString(16)]={prefix:a,iconName:c}),r},{names:{},unicodes:{}});dre=i.names,pre=i.unicodes,PP=cS(Si.styleDefault,{family:Si.familyDefault})};function HP(n,e){return(hre[n]||{})[e]}function R5(n,e){return(gre[n]||{})[e]}function Are(n){return dre[n]||{prefix:null,iconName:null}}function s6(){return PP}function cS(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.family,i=void 0===t?Ra:t,r=jv[i][n],s=$v[i][n]||$v[i][r],o=n in $u.styles?n:null;return s||o||null}(function MZe(n){Yv.push(n)})(function(n){PP=cS(n.styleDefault,{family:Si.familyDefault})}),mre();var vre=($c(aS={},Ra,Object.keys(qv[Ra])),$c(aS,O1,Object.keys(qv[O1])),aS);function lS(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.skipLookups,r=void 0!==i&&i,s=($c(e={},Ra,"".concat(Si.cssPrefix,"-").concat(Ra)),$c(e,O1,"".concat(Si.cssPrefix,"-").concat(O1)),e),o=null,a=Ra;(n.includes(s[Ra])||n.some(function(l){return vre[Ra].includes(l)}))&&(a=Ra),(n.includes(s[O1])||n.some(function(l){return vre[O1].includes(l)}))&&(a=O1);var c=n.reduce(function(l,u){var f=UZe(Si.cssPrefix,u);if(kg[u]?(u=OZe[a].includes(u)?gZe[a][u]:u,o=u,l.prefix=u):NZe[a].indexOf(u)>-1?(o=u,l.prefix=cS(u,{family:a})):f?l.iconName=f:u!==Si.replacementClass&&u!==s[Ra]&&u!==s[O1]&&l.rest.push(u),!r&&l.prefix&&l.iconName){var p="fa"===o?Are(l.iconName):{},g=R5(l.prefix,l.iconName);p.prefix&&(o=null),l.iconName=p.iconName||g||l.iconName,l.prefix=p.prefix||l.prefix,"far"===l.prefix&&!kg.far&&kg.fas&&!Si.autoFetchSvg&&(l.prefix="fas")}return l},{prefix:null,iconName:null,rest:[]});return(n.includes("fa-brands")||n.includes("fab"))&&(c.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(c.prefix="fad"),!c.prefix&&a===O1&&(kg.fass||Si.autoFetchSvg)&&(c.prefix="fass",c.iconName=R5(c.prefix,c.iconName)||c.iconName),("fa"===c.prefix||"fa"===o)&&(c.prefix=s6()||"fas"),c}var WZe=function(){function n(){(function nZe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function iZe(n,e,t){e&&Uie(n.prototype,e),t&&Uie(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=fi(fi({},t.definitions[a]||{}),o[a]),kP(a,o[a]);var c=qv[Ra][a];c&&kP(c,o[a]),mre()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,c=o.iconName,l=o.icon,u=l[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(f){"string"==typeof f&&(t[a][f]=l)}),t[a][c]=l}),t}}]),n}(),_re=[],Pg={},Hg={},jZe=Object.keys(Hg);function OP(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=Pg[n]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function F5(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=Pg[n]||[];r.forEach(function(s){s.apply(null,t)})}function wf(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Hg[n]?Hg[n].apply(null,e):void 0}function NP(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||s6();if(e)return e=R5(t,e)||e,lre(yre.definitions,t,e)||lre($u.styles,t,e)}var yre=new WZe,KZe={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return vf?(F5("beforeI2svg",e),wf("pseudoElements2svg",e),wf("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===Si.autoReplaceSvg&&(Si.autoReplaceSvg=!0),Si.observeMutations=!0,FZe(function(){YZe({autoReplaceSvgRoot:t}),F5("watch",e)})}},XZe={icon:function(e){if(null===e)return null;if("object"===KM(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:R5(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=cS(e[0]);return{prefix:i,iconName:R5(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(Si.cssPrefix,"-"))>-1||e.match(mZe))){var r=lS(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||s6(),iconName:R5(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var s=s6();return{prefix:s,iconName:R5(s,e)||e}}}},s4={noAuto:function(){Si.autoReplaceSvg=!1,Si.observeMutations=!1,F5("noAuto")},config:Si,dom:KZe,parse:XZe,library:yre,findIconDefinition:NP,toHtml:Jv},YZe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,i=void 0===t?Ba:t;(Object.keys($u.styles).length>0||Si.autoFetchSvg)&&vf&&Si.autoReplaceSvg&&s4.dom.i2svg({node:i})};function uS(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return Jv(i)})}}),Object.defineProperty(n,"node",{get:function(){if(vf){var i=Ba.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function VP(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,o=n.transform,a=n.symbol,c=n.title,l=n.maskId,u=n.titleId,f=n.extra,p=n.watchable,g=void 0!==p&&p,_=i.found?i:t,y=_.width,w=_.height,C="fak"===r,x=[Si.replacementClass,s?"".concat(Si.cssPrefix,"-").concat(s):""].filter(function(k){return-1===f.classes.indexOf(k)}).filter(function(k){return""!==k||!!k}).concat(f.classes).join(" "),M={children:[],attributes:fi(fi({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:x,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(y," ").concat(w)})},T=C&&!~f.classes.indexOf("fa-fw")?{width:"".concat(y/w*16*.0625,"em")}:{};g&&(M.attributes[I5]=""),c&&(M.children.push({tag:"title",attributes:{id:M.attributes["aria-labelledby"]||"title-".concat(u||Zv())},children:[c]}),delete M.attributes.title);var I=fi(fi({},M),{},{prefix:r,iconName:s,main:t,mask:i,maskId:l,transform:o,symbol:a,styles:fi(fi({},T),f.styles)}),F=i.found&&t.found?wf("generateAbstractMask",I)||{children:[],attributes:{}}:wf("generateAbstractIcon",I)||{children:[],attributes:{}},R=F.attributes;return I.children=F.children,I.attributes=R,a?function JZe(n){var t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,o=!0===s?"".concat(n.prefix,"-").concat(Si.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:fi(fi({},r),{},{id:o}),children:i}]}]}(I):function ZZe(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,o=n.transform;if(IP(o)&&t.found&&!i.found){var l={x:t.width/t.height/2,y:.5};r.style=iS(fi(fi({},s),{},{"transform-origin":"".concat(l.x+o.x/16,"em ").concat(l.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(I)}function wre(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,o=n.extra,a=n.watchable,c=void 0!==a&&a,l=fi(fi(fi({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});c&&(l[I5]="");var u=fi({},o.styles);IP(r)&&(u.transform=function DZe(n){var e=n.transform,t=n.width,r=n.height,s=void 0===r?16:r,o=n.startCentered,a=void 0!==o&&o,c="";return c+=a&&Yie?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-s/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(c+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var f=iS(u);f.length>0&&(l.style=f);var p=[];return p.push({tag:"span",attributes:l,children:[e]}),s&&p.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),p}function eJe(n){var e=n.content,t=n.title,i=n.extra,r=fi(fi(fi({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=iS(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var UP=$u.styles;function GP(n){var e=n[0],t=n[1],s=CP(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(Si.cssPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(Si.cssPrefix,"-").concat("secondary"),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Si.cssPrefix,"-").concat("primary"),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var tJe={found:!1,width:512,height:512};function QP(n,e){var t=e;return"fa"===e&&null!==Si.styleDefault&&(e=s6()),new Promise(function(i,r){if(wf("missingIconAbstract"),"fa"===t){var o=Are(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&UP[e]&&UP[e][n])return i(GP(UP[e][n]));(function nJe(n,e){!tre&&!Si.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(fi(fi({},tJe),{},{icon:Si.showMissingIcons&&n&&wf("missingIconAbstract")||{}}))})}var Cre=function(){},WP=Si.measurePerformance&&YM&&YM.mark&&YM.measure?YM:{mark:Cre,measure:Cre},e_='FA "6.2.0"',jP_begin=function(e){return WP.mark("".concat(e_," ").concat(e," begins")),function(){return function(e){WP.mark("".concat(e_," ").concat(e," ends")),WP.measure("".concat(e_," ").concat(e),"".concat(e_," ").concat(e," begins"),"".concat(e_," ").concat(e," ends"))}(e)}},hS=function(){};function xre(n){return"string"==typeof(n.getAttribute?n.getAttribute(I5):null)}function aJe(n){return Ba.createElementNS("http://www.w3.org/2000/svg",n)}function cJe(n){return Ba.createElement(n)}function Mre(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,i=void 0===t?"svg"===n.tag?aJe:cJe:t;if("string"==typeof n)return Ba.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){r.setAttribute(o,n.attributes[o])});var s=n.children||[];return s.forEach(function(o){r.appendChild(Mre(o,{ceFn:i}))}),r}var fS={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(Mre(r),t)}),null===t.getAttribute(I5)&&Si.keepOriginalSource){var i=Ba.createComment(function lJe(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~DP(t).indexOf(Si.replacementClass))return fS.replace(e);var r=new RegExp("".concat(Si.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,c){return c===Si.replacementClass||c.match(r)?a.toSvg.push(c):a.toNode.push(c),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return Jv(a)}).join("\n");t.setAttribute(I5,""),t.innerHTML=o}};function Sre(n){n()}function Ere(n,e){var t="function"==typeof e?e:hS;if(0===n.length)t();else{var i=Sre;"async"===Si.mutateApproach&&(i=n6.requestAnimationFrame||Sre),i(function(){var r=function oJe(){return!0===Si.autoReplaceSvg?fS.replace:fS[Si.autoReplaceSvg]||fS.replace}(),s=jP_begin("mutate");n.map(r),s(),t()})}}var $P=!1;function Tre(){$P=!0}function qP(){$P=!1}var dS=null;function Lre(n){if(Xie&&Si.observeMutations){var e=n.treeCallback,t=void 0===e?hS:e,i=n.nodeCallback,r=void 0===i?hS:i,s=n.pseudoElementsCallback,o=void 0===s?hS:s,a=n.observeMutationsRoot,c=void 0===a?Ba:a;dS=new Xie(function(l){if(!$P){var u=s6();Fg(l).forEach(function(f){if("childList"===f.type&&f.addedNodes.length>0&&!xre(f.addedNodes[0])&&(Si.searchPseudoElements&&o(f.target),t(f.target)),"attributes"===f.type&&f.target.parentNode&&Si.searchPseudoElements&&o(f.target.parentNode),"attributes"===f.type&&xre(f.target)&&~yZe.indexOf(f.attributeName))if("class"===f.attributeName&&function rJe(n){var e=n.getAttribute?n.getAttribute(EP):null,t=n.getAttribute?n.getAttribute(TP):null;return e&&t}(f.target)){var p=lS(DP(f.target)),_=p.iconName;f.target.setAttribute(EP,p.prefix||u),_&&f.target.setAttribute(TP,_)}else(function sJe(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(Si.replacementClass)})(f.target)&&r(f.target)})}}),vf&&dS.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function hJe(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function fJe(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=lS(DP(n));return r.prefix||(r.prefix=s6()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function GZe(n,e){return(fre[n]||{})[e]}(r.prefix,n.innerText)||HP(r.prefix,FP(n.innerText))),!r.iconName&&Si.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function dJe(n){var e=Fg(n.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return Si.autoA11y&&(t?e["aria-labelledby"]="".concat(Si.replacementClass,"-title-").concat(i||Zv()):(e["aria-hidden"]="true",e.focusable="false")),e}function Dre(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=fJe(n),i=t.iconName,r=t.prefix,s=t.rest,o=dJe(n),a=OP("parseNodeAttributes",{},n),c=e.styleParser?hJe(n):[];return fi({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:J0,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:c,attributes:o}},a)}var gJe=$u.styles;function Ire(n){var e="nest"===Si.autoReplaceSvg?Dre(n,{styleParser:!1}):Dre(n);return~e.extra.classes.indexOf(nre)?wf("generateLayersText",n,e):wf("generateSvgReplacementMutation",n,e)}var o6=new Set;function Bre(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!vf)return Promise.resolve();var t=Ba.documentElement.classList,i=function(f){return t.add("".concat(ere,"-").concat(f))},r=function(f){return t.remove("".concat(ere,"-").concat(f))},s=Si.autoFetchSvg?o6:LP.map(function(u){return"fa-".concat(u)}).concat(Object.keys(gJe));s.includes("fa")||s.push("fa");var o=[".".concat(nre,":not([").concat(I5,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(I5,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=Fg(n.querySelectorAll(o))}catch{}if(!(a.length>0))return Promise.resolve();i("pending"),r("complete");var c=jP_begin("onTree"),l=a.reduce(function(u,f){try{var p=Ire(f);p&&u.push(p)}catch(g){tre||"MissingIcon"===g.name&&console.error(g)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(p){Ere(p,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),c(),u()})}).catch(function(p){c(),f(p)})})}function mJe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ire(n).then(function(t){t&&Ere([t],e)})}LP.map(function(n){o6.add("fa-".concat(n))}),Object.keys(jv[Ra]).map(o6.add.bind(o6)),Object.keys(jv[O1]).map(o6.add.bind(o6)),o6=Qv(o6);var vJe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?J0:i,s=t.symbol,o=void 0!==s&&s,a=t.mask,c=void 0===a?null:a,l=t.maskId,u=void 0===l?null:l,f=t.title,p=void 0===f?null:f,g=t.titleId,_=void 0===g?null:g,y=t.classes,w=void 0===y?[]:y,C=t.attributes,x=void 0===C?{}:C,M=t.styles,T=void 0===M?{}:M;if(e){var I=e.prefix,F=e.iconName,P=e.icon;return uS(fi({type:"icon"},e),function(){return F5("beforeDOMElementCreation",{iconDefinition:e,params:t}),Si.autoA11y&&(p?x["aria-labelledby"]="".concat(Si.replacementClass,"-title-").concat(_||Zv()):(x["aria-hidden"]="true",x.focusable="false")),VP({icons:{main:GP(P),mask:c?GP(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:I,iconName:F,transform:fi(fi({},J0),r),symbol:o,title:p,maskId:u,titleId:_,extra:{attributes:x,styles:T,classes:w}})})}},_Je={mixout:function(){return{icon:(n=vJe,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:NP(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:NP(r||{})),n(i,fi(fi({},t),{},{mask:r}))})};var n},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=Bre,t.nodeCallback=mJe,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=t.callback;return Bre(void 0===i?Ba:i,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,o=i.titleId,a=i.prefix,c=i.transform,l=i.symbol,u=i.mask,f=i.maskId,p=i.extra;return new Promise(function(g,_){Promise.all([QP(r,a),u.iconName?QP(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(y){var w=CP(y,2);g([t,VP({icons:{main:w[0],mask:w[1]},prefix:a,iconName:r,transform:c,symbol:l,maskId:f,title:s,titleId:o,extra:p,watchable:!0})])}).catch(_)})},e.generateAbstractIcon=function(t){var l,i=t.children,r=t.attributes,s=t.main,o=t.transform,c=iS(t.styles);return c.length>0&&(r.style=c),IP(o)&&(l=wf("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(l||s.icon),{children:i,attributes:r}}}},yJe={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return uS({type:"layer"},function(){F5("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(c){o=o.concat(c.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Si.cssPrefix,"-layers")].concat(Qv(s)).join(" ")},children:o}]})}}}},wJe={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,o=i.classes,a=void 0===o?[]:o,c=i.attributes,l=void 0===c?{}:c,u=i.styles,f=void 0===u?{}:u;return uS({type:"counter",content:t},function(){return F5("beforeDOMElementCreation",{content:t,params:i}),eJe({content:t.toString(),title:s,extra:{attributes:l,styles:f,classes:["".concat(Si.cssPrefix,"-layers-counter")].concat(Qv(a))}})})}}}},CJe={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?J0:r,o=i.title,a=void 0===o?null:o,c=i.classes,l=void 0===c?[]:c,u=i.attributes,f=void 0===u?{}:u,p=i.styles,g=void 0===p?{}:p;return uS({type:"text",content:t},function(){return F5("beforeDOMElementCreation",{content:t,params:i}),wre({content:t,transform:fi(fi({},J0),s),title:a,extra:{attributes:f,styles:g,classes:["".concat(Si.cssPrefix,"-layers-text")].concat(Qv(l))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,o=i.extra,a=null,c=null;if(Yie){var l=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/l,c=u.height/l}return Si.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,wre({content:t.innerHTML,width:a,height:c,transform:s,title:r,extra:o,watchable:!0})])}}},bJe=new RegExp('"',"ug"),Rre=[1105920,1112319];function Fre(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var o=Fg(n.children).filter(function(P){return P.getAttribute(SP)===e})[0],a=n6.getComputedStyle(n,e),c=a.getPropertyValue("font-family").match(AZe),l=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!c)return n.removeChild(o),i();if(c&&"none"!==u&&""!==u){var f=a.getPropertyValue("content"),p=~["Sharp"].indexOf(c[2])?O1:Ra,g=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?$v[p][c[2].toLowerCase()]:vZe[p][l],_=function xJe(n){var e=n.replace(bJe,""),t=function HZe(n,e){var r,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e,0),i=t>=Rre[0]&&t<=Rre[1],r=2===e.length&&e[0]===e[1];return{value:FP(r?e[0]:e),isSecondary:i||r}}(f),y=_.value,w=_.isSecondary,C=c[0].startsWith("FontAwesome"),x=HP(g,y),M=x;if(C){var T=function QZe(n){var e=pre[n],t=HP("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(y);T.iconName&&T.prefix&&(x=T.iconName,g=T.prefix)}if(!x||w||o&&o.getAttribute(EP)===g&&o.getAttribute(TP)===M)i();else{n.setAttribute(t,M),o&&n.removeChild(o);var I=function pJe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:J0,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),F=I.extra;F.attributes[SP]=e,QP(x,g).then(function(P){var R=VP(fi(fi({},I),{},{icons:{main:P,mask:{prefix:null,iconName:null,rest:[]}},prefix:g,iconName:M,extra:F,watchable:!0})),k=Ba.createElement("svg");"::before"===e?n.insertBefore(k,n.firstChild):n.appendChild(k),k.outerHTML=R.map(function(W){return Jv(W)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function MJe(n){return Promise.all([Fre(n,"::before"),Fre(n,"::after")])}function SJe(n){return!(n.parentNode===document.head||~pZe.indexOf(n.tagName.toUpperCase())||n.getAttribute(SP)||n.parentNode&&"svg"===n.parentNode.tagName)}function kre(n){if(vf)return new Promise(function(e,t){var i=Fg(n.querySelectorAll("*")).filter(SJe).map(MJe),r=jP_begin("searchPseudoElements");Tre(),Promise.all(i).then(function(){r(),qP(),e()}).catch(function(){r(),qP(),t()})})}var EJe={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=kre,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;Si.searchPseudoElements&&kre(void 0===i?Ba:i)}}},Pre=!1,TJe={mixout:function(){return{dom:{unwatch:function(){Tre(),Pre=!0}}}},hooks:function(){return{bootstrap:function(){Lre(OP("mutationObserverCallbacks",{}))},noAuto:function(){!function uJe(){!dS||dS.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;Pre?qP():Lre(OP("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},Hre=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&"h"===a)return i.flipX=!0,i;if(o&&"v"===a)return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},LJe={mixout:function(){return{parse:{transform:function(t){return Hre(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=Hre(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,o=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},c="translate(".concat(32*r.x,", ").concat(32*r.y,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),g={outer:a,inner:{transform:"".concat(c," ").concat(l," ").concat(u)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:fi({},g.outer),children:[{tag:"g",attributes:fi({},g.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:fi(fi({},i.icon.attributes),g.path)}]}]}}}},KP={x:0,y:0,width:"100%",height:"100%"};function zre(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}var IJe={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?lS(r.split(" ").map(function(o){return o.trim()})):{prefix:null,iconName:null,rest:[]};return s.prefix||(s.prefix=s6()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n,i=t.children,r=t.attributes,s=t.main,o=t.mask,a=t.maskId,u=s.icon,p=o.icon,g=function LZe(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:s.width}),_={tag:"rect",attributes:fi(fi({},KP),{},{fill:"white"})},y=u.children?{children:u.children.map(zre)}:{},w={tag:"g",attributes:fi({},g.inner),children:[zre(fi({tag:u.tag,attributes:fi(fi({},u.attributes),g.path)},y))]},C={tag:"g",attributes:fi({},g.outer),children:[w]},x="mask-".concat(a||Zv()),M="clip-".concat(a||Zv()),T={tag:"mask",attributes:fi(fi({},KP),{},{id:x,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[_,C]},I={tag:"defs",children:[{tag:"clipPath",attributes:{id:M},children:(n=p,"g"===n.tag?n.children:[n])},T]};return i.push(I,{tag:"rect",attributes:fi({fill:"currentColor","clip-path":"url(#".concat(M,")"),mask:"url(#".concat(x,")")},KP)}),{children:i,attributes:r}}}},BJe={provides:function(e){var t=!1;n6.matchMedia&&(t=n6.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:fi(fi({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=fi(fi({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:fi(fi({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:fi(fi({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:fi(fi({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:fi(fi({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:fi(fi({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:fi(fi({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:fi(fi({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},FJe=[BZe,_Je,yJe,wJe,CJe,EJe,TJe,LJe,IJe,BJe,{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}];!function $Ze(n,e){var t=e.mixoutsTo;_re=n,Pg={},Object.keys(Hg).forEach(function(i){-1===jZe.indexOf(i)&&delete Hg[i]}),_re.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(o){"function"==typeof r[o]&&(t[o]=r[o]),"object"===KM(r[o])&&Object.keys(r[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=r[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){Pg[o]||(Pg[o]=[]),Pg[o].push(s[o])})}i.provides&&i.provides(Hg)})}(FJe,{mixoutsTo:s4});var kJe=s4.parse,PJe=s4.icon;const HJe=["*"],NJe=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let GJe=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QJe=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const i of t){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...t){for(const i of t){const r=Object.keys(i).map(s=>i[s]);this.addIcons(...r)}}getIconDefinition(t,i){return t in this.definitions&&i in this.definitions[t]?this.definitions[t][i]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WJe=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[wr]}),n})(),jJe=(()=>{class n{constructor(t,i){this.renderer=t,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(U(ea),U(dn))},n.\u0275cmp=Bn({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[wr],ngContentSelectors:HJe,decls:1,vars:0,template:function(t,i){1&t&&(ec(),Po(0))},encapsulation:2}),n})(),XP=(()=>{class n{constructor(t,i,r,s,o){this.sanitizer=t,this.config=i,this.iconLibrary=r,this.stackItem=s,this.classes=[],null!=o&&null==s&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let i=null;if(i=this.icon??this.config.fallbackIcon,t){const r=this.findIconDefinition(i);if(null!=r){const s=this.buildParams();this.renderIcon(r,s)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const i=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(i),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?kJe.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...NJe(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,i){const r=PJe(t,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(U(T8),U(GJe),U(QJe),U(WJe,8),U(jJe,8))},n.\u0275cmp=Bn({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,i){2&t&&(C8("innerHTML",i.renderedIconHTML,j3),ps("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[wr],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),$Je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),Ore=(()=>{class n{constructor(t,i){this.appService=t,this.router=i,this.year=(new Date).getFullYear(),this.discord=this.appService.discord,this.github=this.appService.github,this.youtube=this.appService.youtube,this.patreon=this.appService.patreon,this.instagram=this.appService.instagram,this.faDiscord=qM,this.faGithub=yP,this.faYoutube=wP,this.faPatreon=vP,this.faInstagram=_P,this.onStart=!0}}return n.\u0275fac=function(t){return new(t||n)(U(Mo),U(R1))},n.\u0275cmp=Bn({type:n,selectors:[["app-footer"]],decls:24,vars:9,consts:[["fxLayout","column","fxLayoutAlign","center center"],[2,"font-size","1.3em","margin-bottom","24px"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],[3,"icon"],[2,"font-size","1em","margin-bottom","24px"],["target","_blank",1,"larger-link",2,"background","#FF0000",3,"href"],["target","_blank",1,"larger-link",2,"background","rgb(240 0 117)",3,"href"],["target","_blank",1,"larger-link",3,"href"]],template:function(t,i){1&t&&(H(0,"footer")(1,"mat-toolbar",0)(2,"div",1),V(3,"Join us on our "),H(4,"a",2),$e(5,"fa-icon",3),V(6," Discord "),N()(),H(7,"div",4),V(8," In cooperation with 2_plings "),H(9,"a",5),$e(10,"fa-icon",3),V(11," Youtube "),N(),V(12," or "),H(13,"a",6),$e(14,"fa-icon",3),V(15," Instagram "),N()(),H(16,"div"),V(17," Everything is free and open source. See "),H(18,"a",7),$e(19,"fa-icon",3),V(20," GitHub "),N()(),H(21,"div"),V(22),$e(23,"br"),N()()()),2&t&&(Z(4),Bl("href",i.discord,wc),Z(1),Ce("icon",i.faDiscord),Z(4),Bl("href",i.youtube,wc),Z(1),Ce("icon",i.faYoutube),Z(3),Bl("href",i.instagram,wc),Z(1),Ce("icon",i.faInstagram),Z(4),Bl("href",i.github,wc),Z(1),Ce("icon",i.faGithub),Z(3),Jn(" PassiveOpen.com 2019 - ",i.year,""))},dependencies:[gSe,x9,Wh,XP],styles:["footer[_ngcontent-%COMP%]{z-index:1000;position:relative}footer[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{padding:26px 0 80px;font-size:.8rem;opacity:.8;font-weight:400;height:initial}"]}),n})();function Cf(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Nre(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var YP,Q4,Bc,m1,j4,nH,iH,$re,Xre,Gg,l_,c,l,u,f,p,g,n,e,t,i,r,s,o,a,_,o4={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},zg={duration:.5,overwrite:!1,delay:0},W4=1e8,fa=1e-8,ZP=2*Math.PI,qJe=ZP/4,KJe=0,Vre=Math.sqrt,XJe=Math.cos,YJe=Math.sin,p2=function(e){return"string"==typeof e},N1=function(e){return"function"==typeof e},bf=function(e){return"number"==typeof e},JP=function(e){return typeof e>"u"},eh=function(e){return"object"==typeof e},x3=function(e){return!1!==e},Ure=function(){return typeof window<"u"},pS=function(e){return N1(e)||p2(e)},Gre="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},al=Array.isArray,eH=/(?:-?\.?\d|\.)+/gi,Qre=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Og=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tH=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Wre=/[+-]=-?[.\d]+/,jre=/[^,'"\[\]\s]+/gi,ZJe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,a4={},gS={},qre=function(e){return(gS=P5(e,a4))&&u4},rH=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},mS=function(e,t){return!t&&console.warn(e)},Kre=function(e,t){return e&&(a4[e]=t)&&gS&&(gS[e]=t)||a4},t_=function(){return 0},JJe={suppressEvents:!0,isStart:!0},n_={suppressEvents:!0},sH={},a6=[],oH={},c4={},aH={},Yre=30,AS=[],cH="",lH=function(e){var i,r,t=e[0];if(eh(t)||N1(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=AS.length;r--&&!AS[r].targetTest(t););i=AS[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new xse(e[r],i)))||e.splice(r,1);return e},k5=function(e){return e._gsap||lH(K4(e))[0]._gsap},Zre=function(e,t,i){return(i=e[t])&&N1(i)?e[t]():JP(i)&&e.getAttribute&&e.getAttribute(t)||i},M3=function(e,t){return(e=e.split(",")).forEach(t)||e},sc=function(e){return Math.round(1e5*e)/1e5||0},k2=function(e){return Math.round(1e7*e)/1e7||0},Ng=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+r:"-"===i?e-r:"*"===i?e*r:e/r},eet=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},vS=function(){var i,r,e=a6.length,t=a6.slice(0);for(oH={},a6.length=0,i=0;i<e;i++)(r=t[i])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Jre=function(e,t,i,r){a6.length&&vS(),e.render(t,i,r||Q4),a6.length&&vS()},ese=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(jre).length<2?t:p2(e)?e.trim():e},tse=function(e){return e},$4=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},P5=function(e,t){for(var i in t)e[i]=t[i];return e},nse=function n(e,t){for(var i in t)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=eh(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},_S=function(e,t){var r,i={};for(r in e)r in t||(i[r]=e[r]);return i},i_=function(e){var t=e.parent||m1,i=e.keyframes?function(e){return function(t,i){for(var r in i)r in t||"duration"===r&&e||"ease"===r||(t[r]=i[r])}}(al(e.keyframes)):$4;if(x3(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},ise=function(e,t,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var a,o=e[r];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},yS=function(e,t,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},xf=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},H5=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},iet=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},uH=function(e,t,i,r){return e._startAt&&(Q4?e._startAt.revert(n_):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},ret=function n(e){return!e||e._ts&&n(e.parent)},rse=function(e){return e._repeat?Vg(e._tTime,e=e.duration()+e._rDelay)*e:0},Vg=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},wS=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},CS=function(e){return e._end=k2(e._start+(e._tDur/Math.abs(e._ts||e._rts||fa)||0))},bS=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=k2(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),CS(e),i._dirty||H5(i,e)),e},sse=function(e,t){var i;if((t._time||t._initted&&!t._dur)&&(i=wS(e.rawTime(),t),(!t._dur||s_(0,t.totalDuration(),i)-t._tTime>fa)&&t.render(i,!0)),H5(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-fa}},th=function(e,t,i,r){return t.parent&&xf(t),t._start=k2((bf(i)?i:i||e!==m1?q4(e,i,t):e._time)+t._delay),t._end=k2(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),ise(e,t,"_first","_last",e._sort?"_start":0),hH(t)||(e._recent=t),r||sse(e,t),e._ts<0&&bS(e,e._tTime),e},ose=function(e,t){return(a4.ScrollTrigger||rH("scrollTrigger",t))&&a4.ScrollTrigger.create(t,e)},ase=function(e,t,i,r){return yH(e,t),e._initted?!i&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Xre!==l4.frame?(a6.push(e),e._lazy=[t,r],1):void 0:1},set=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},hH=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Ug=function(e,t,i,r){var s=e._repeat,o=k2(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:k2(o*(s+1)+e._rDelay*s):o,a>0&&!r?bS(e,e._tTime=e._tDur*a):e.parent&&CS(e),i||H5(e.parent,e),e},cse=function(e){return e instanceof S3?H5(e):Ug(e,e._dur)},cet={_start:0,endTime:t_,totalDuration:t_},q4=function n(e,t,i){var a,c,l,r=e.labels,s=e._recent||cet,o=e.duration()>=W4?s.endTime(!1):e._dur;return p2(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),l="%"===t.substr(-1),a=t.indexOf("="),"<"===c||">"===c?(a>=0&&(t=t.replace(/=/,"")),("<"===c?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&i&&(c=c/100*(al(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+c:o+c)):null==t?o:+t},r_=function(e,t,i){var a,c,r=bf(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s];if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,c=i;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=x3(c.vars.inherit)&&c.parent;o.immediateRender=x3(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new qc(t[0],o,t[s+1])},c6=function(e,t){return e||0===e?t(e):t},s_=function(e,t,i){return i<e?e:i>t?t:i},cl=function(e,t){return p2(e)&&(t=ZJe.exec(e))?t[1]:""},fH=[].slice,lse=function(e,t){return e&&eh(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&eh(e[0]))&&!e.nodeType&&e!==j4},K4=function(e,t,i){return Bc&&!t&&Bc.selector?Bc.selector(e):!p2(e)||i||!nH&&Qg()?al(e)?function(e,t,i){return void 0===i&&(i=[]),e.forEach(function(r){var s;return p2(r)&&!t||lse(r,1)?(s=i).push.apply(s,K4(r)):i.push(r)})||i}(e,i):lse(e)?fH.call(e,0):e?[e]:[]:fH.call((t||iH).querySelectorAll(e),0)},dH=function(e){return e=K4(e)[0]||mS("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return K4(t,i.querySelectorAll?i:i===e?mS("Invalid scope")||iH.createElement("div"):e)}},use=function(e){return e.sort(function(){return.5-Math.random()})},hse=function(e){if(N1(e))return e;var t=eh(e)?e:{each:e},i=z5(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,c=isNaN(r)||a,l=t.axis,u=r,f=r;return p2(r)?u=f={center:.5,edges:.5,end:1}[r]||0:!a&&c&&(u=r[0],f=r[1]),function(p,g,_){var C,x,M,T,I,F,P,R,k,y=(_||t).length,w=o[y];if(!w){if(!(k="auto"===t.grid?0:(t.grid||[1,W4])[1])){for(P=-W4;P<(P=_[k++].getBoundingClientRect().left)&&k<y;);k--}for(w=o[y]=[],C=c?Math.min(k,y)*u-.5:r%k,x=k===W4?0:c?y*f/k-.5:r/k|0,P=0,R=W4,F=0;F<y;F++)M=F%k-C,T=x-(F/k|0),w[F]=I=l?Math.abs("y"===l?T:M):Vre(M*M+T*T),I>P&&(P=I),I<R&&(R=I);"random"===r&&use(w),w.max=P-R,w.min=R,w.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(k>y?y-1:l?"y"===l?y/k:k:Math.max(k,y/k))||0)*("edges"===r?-1:1),w.b=y<0?s-y:s,w.u=cl(t.amount||t.each)||0,i=i&&y<0?wse(i):i}return y=(w[p]-w.min)/w.max||0,k2(w.b+(i?i(y):y)*w.v)+w.u}},pH=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=k2(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(bf(i)?0:cl(i))}},fse=function(e,t){var r,s,i=al(e);return!i&&eh(e)&&(r=i=e.radius||W4,e.values?(e=K4(e.values),(s=!bf(e[0]))&&(r*=r)):e=pH(e.increment)),c6(t,i?N1(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var p,g,a=parseFloat(s?o.x:o),c=parseFloat(s?o.y:0),l=W4,u=0,f=e.length;f--;)(p=s?(p=e[f].x-a)*p+(g=e[f].y-c)*g:Math.abs(e[f]-a))<l&&(l=p,u=f);return u=!r||l<=r?e[u]:o,s||u===o||bf(o)?u:u+cl(o)}:pH(e))},dse=function(e,t,i,r){return c6(al(e)?!t:!0===i?!!(i=0):!r,function(){return al(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*r)/r})},pse=function(e,t,i){return c6(i,function(r){return e[~~t(r)]})},o_=function(e){for(var r,s,o,a,t=0,i="";~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a="["===e.charAt(r+7),s=e.substr(r+7,o-r-7).match(a?jre:eH),i+=e.substr(t,r-t)+dse(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},gse=function(e,t,i,r,s){var o=t-e,a=r-i;return c6(s,function(c){return i+((c-e)/o*a||0)})},mse=function(e,t,i){var o,a,c,r=e.labels,s=W4;for(o in r)(a=r[o]-t)<0==!!i&&a&&s>(a=Math.abs(a))&&(c=o,s=a);return c},X4=function(e,t,i){var c,l,u,r=e.vars,s=r[t],o=Bc,a=e._ctx;if(s)return c=r[t+"Params"],l=r.callbackScope||e,i&&a6.length&&vS(),a&&(Bc=a),u=c?s.apply(l,c):s.call(l),Bc=o,u},a_=function(e){return xf(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&X4(e,"onInterrupt"),e},vet=function(e){var t=(e=!e.name&&e.default||e).name,i=N1(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:t_,render:bH,add:vH,kill:ket,modifier:Fet,rawVars:0},o={targetTest:0,get:0,getSetter:CH,aliases:{},register:0};if(Qg(),e!==r){if(c4[t])return;$4(r,$4(_S(e,s),o)),P5(r.prototype,P5(s,_S(e,o))),c4[r.prop=t]=r,e.targetTest&&(AS.push(r),sH[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Kre(t,r),e.register&&e.register(u4,r,E3)},da=255,c_={aqua:[0,da,da],lime:[0,da,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,da],navy:[0,0,128],white:[da,da,da],olive:[128,128,0],yellow:[da,da,0],orange:[da,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[da,0,0],pink:[da,192,203],cyan:[0,da,da],transparent:[da,da,da,0]},gH=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*da+.5|0},Ase=function(e,t,i){var s,o,a,c,l,u,f,p,g,_,r=e?bf(e)?[e>>16,e>>8&da,e&da]:0:c_.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),c_[e])r=c_[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&da,r&da,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&da,e&da]}else if("hsl"===e.substr(0,3))if(r=_=e.match(eH),t){if(~e.indexOf("="))return r=e.match(Qre),i&&r.length<4&&(r[3]=1),r}else c=+r[0]%360/360,l=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(l+1):u+l-u*l),r.length>3&&(r[3]*=1),r[0]=gH(c+1/3,s,o),r[1]=gH(c,s,o),r[2]=gH(c-1/3,s,o);else r=e.match(eH)||c_.transparent;r=r.map(Number)}return t&&!_&&(s=r[0]/da,o=r[1]/da,a=r[2]/da,u=((f=Math.max(s,o,a))+(p=Math.min(s,o,a)))/2,f===p?c=l=0:(g=f-p,l=u>.5?g/(2-f-p):g/(f+p),c=f===s?(o-a)/g+(o<a?6:0):f===o?(a-s)/g+2:(s-o)/g+4,c*=60),r[0]=~~(c+.5),r[1]=~~(100*l+.5),r[2]=~~(100*u+.5)),i&&r.length<4&&(r[3]=1),r},vse=function(e){var t=[],i=[],r=-1;return e.split(l6).forEach(function(s){var o=s.match(Og)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},_se=function(e,t,i){var c,l,u,f,r="",s=(e+r).match(l6),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(p){return(p=Ase(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(u=vse(e),(c=i.c).join(r)!==u.c.join(r)))for(f=(l=e.replace(l6,"1").split(Og)).length-1;a<f;a++)r+=l[a]+(~c.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!l)for(f=(l=e.split(l6)).length-1;a<f;a++)r+=l[a]+s[a];return r+l[f]},l6=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in c_)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),_et=/hsl[a]?\(/,yse=function(e){var i,t=e.join(" ");if(l6.lastIndex=0,l6.test(t))return i=_et.test(t),e[1]=_se(e[1],i),e[0]=_se(e[0],i,vse(e[1])),!0},l4=(n=Date.now,e=500,t=33,i=n(),r=i,o=s=1e3/240,_=function y(w){var M,T,I,F,C=n()-r,x=!0===w;if(C>e&&(i+=C-t),((M=(I=(r+=C)-i)-o)>0||x)&&(F=++f.frame,p=I-1e3*f.time,f.time=I/=1e3,o+=M+(M>=s?4:s-M),T=1),x||(c=l(y)),T)for(g=0;g<a.length;g++)a[g](I,p,F,w)},f={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(w){return p/(1e3/(w||60))},wake:function(){$re&&(!nH&&Ure()&&(j4=nH=window,iH=j4.document||{},a4.gsap=u4,(j4.gsapVersions||(j4.gsapVersions=[])).push(u4.version),qre(gS||j4.GreenSockGlobals||!j4.gsap&&j4||{}),u=j4.requestAnimationFrame),c&&f.sleep(),l=u||function(w){return setTimeout(w,o-1e3*f.time+1|0)},l_=1,_(2))},sleep:function(){(u?j4.cancelAnimationFrame:clearTimeout)(c),l_=0,l=t_},lagSmoothing:function(w,C){e=w||1/fa,t=Math.min(C,e,0)},fps:function(w){o=1e3*f.time+(s=1e3/(w||240))},add:function(w,C,x){var M=C?function(T,I,F,P){w(T,I,F,P),f.remove(M)}:w;return f.remove(w),a[x?"unshift":"push"](M),Qg(),M},remove:function(w,C){~(C=a.indexOf(w))&&a.splice(C,1)&&g>=C&&g--},_listeners:a=[]}),Qg=function(){return!l_&&l4.wake()},Gs={},yet=/^[\d.\-M][\d.\-,\s]/,wet=/["']/g,Cet=function(e){for(var a,c,l,t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length;s<o;s++)c=i[s],a=s!==o-1?c.lastIndexOf(","):c.length,l=c.substr(0,a),t[r]=isNaN(l)?l.replace(wet,"").trim():+l,r=c.substr(a+1).trim();return t},wse=function(e){return function(t){return 1-e(1-t)}},Cse=function n(e,t){for(var r,i=e._first;i;)i instanceof S3?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},z5=function(e,t){return e&&(N1(e)?e:Gs[e]||function(e){var t=(e+"").split("("),i=Gs[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Cet(t[1])]:function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)}(e).split(",").map(ese)):Gs._CE&&yet.test(e)?Gs._CE("",e):i}(e))||t},O5=function(e,t,i,r){void 0===i&&(i=function(c){return 1-t(1-c)}),void 0===r&&(r=function(c){return c<.5?t(2*c)/2:1-t(2*(1-c))/2});var o,s={easeIn:t,easeOut:i,easeInOut:r};return M3(e,function(a){for(var c in Gs[a]=a4[a]=s,Gs[o=a.toLowerCase()]=i,s)Gs[o+("easeIn"===c?".in":"easeOut"===c?".out":".inOut")]=Gs[a+"."+c]=s[c]}),s},bse=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},mH=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/ZP*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*YJe((u-o)*s)+1},c="out"===e?a:"in"===e?function(l){return 1-a(1-l)}:bse(a);return s=ZP/s,c.config=function(l,u){return n(e,l,u)},c},AH=function n(e,t){void 0===t&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r="out"===e?i:"in"===e?function(s){return 1-i(1-s)}:bse(i);return r.config=function(s){return n(e,s)},r};M3("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;O5(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(2*i,t)/2:1-Math.pow(2*(1-i),t)/2})}),Gs.Linear.easeNone=Gs.none=Gs.Linear.easeIn,O5("Elastic",mH("in"),mH("out"),mH()),function(n,e){var s=function(a){return a<.36363636363636365?n*a*a:a<.7272727272727273?n*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};O5("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),O5("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),O5("Circ",function(n){return-(Vre(1-n*n)-1)}),O5("Sine",function(n){return 1===n?1:1-XJe(n*qJe)}),O5("Back",AH("in"),AH("out"),AH()),Gs.SteppedEase=Gs.steps=a4.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0;return function(a){return((r*s_(0,.99999999,a)|0)+s)*i}}},zg.ease=Gs["quad.out"],M3("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return cH+=n+","+n+"Params,"});var xse=function(e,t){this.id=KJe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Zre,this.set=t?t.getSetter:CH},Wg=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ug(this,+t.duration,1,1),this.data=t.data,Bc&&(this._ctx=Bc,Bc.data.push(this)),l_||l4.wake()}var e=n.prototype;return e.delay=function(i){return i||0===i?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Ug(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Qg(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(bS(this,i),!s._dp||s.parent||sse(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&th(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===fa||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Jre(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+rse(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?i:1-i)+rse(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Vg(this._tTime,s)+1:1},e.timeScale=function(i){if(!arguments.length)return this._rts===-fa?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?wS(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-fa?0:this._rts,this.totalTime(s_(-this._delay,this._tDur,r),!0),CS(this),iet(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Qg(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==fa&&(this._tTime-=fa)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&th(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(x3(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?wS(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){void 0===i&&(i=n_);var r=Q4;return Q4=i,this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents),"nested"!==this.data&&xf(this),Q4=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this.vars.immediateRender?-1:s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,cse(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,cse(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(q4(this,i),x3(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,x3(r))},e.play=function(i,r){return null!=i&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return null!=i&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return null!=i&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-fa:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-fa,this},e.isActive=function(){var s,i=this.parent||this._dp,r=this._start;return!(i&&!(this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-fa))},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),"onUpdate"===i&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=N1(i)?i:tse,a=function(){var l=r.then;r.then=null,N1(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=l),s(o),r.then=l};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){a_(this)},n}();$4(Wg.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-fa,_prom:0,_ps:!1,_rts:1});var S3=function(n){function e(i,r){var s;return void 0===i&&(i={}),(s=n.call(this,i)||this).labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=x3(i.sortChildren),m1&&th(i.parent||m1,Cf(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&ose(Cf(s),i.scrollTrigger),s}Nre(e,n);var t=e.prototype;return t.to=function(r,s,o){return r_(0,arguments,this),this},t.from=function(r,s,o){return r_(1,arguments,this),this},t.fromTo=function(r,s,o,a){return r_(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,i_(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new qc(r,s,q4(this,o),1),this},t.call=function(r,s,o){return th(this,qc.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,c,l,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=u,o.parent=this,new qc(r,o,q4(this,c)),this},t.staggerFrom=function(r,s,o,a,c,l,u){return o.runBackwards=1,i_(o).immediateRender=x3(o.immediateRender),this.staggerTo(r,s,o,a,c,l,u)},t.staggerFromTo=function(r,s,o,a,c,l,u,f){return a.startAt=o,i_(a).immediateRender=x3(a.immediateRender),this.staggerTo(r,s,a,c,l,u,f)},t.render=function(r,s,o){var p,g,_,y,w,C,x,M,T,I,F,P,a=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=r<=0?0:k2(r),f=this._zTime<0!=r<0&&(this._initted||!l);if(this!==m1&&u>c&&r>=0&&(u=c),u!==this._tTime||o||f){if(a!==this._time&&l&&(u+=this._time-a,r+=this._time-a),p=u,T=this._start,C=!(M=this._ts),f&&(l||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(F=this._yoyo,w=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*w+r,s,o);if(p=k2(u%w),u===c?(y=this._repeat,p=l):((y=~~(u/w))&&y===u/w&&(p=l,y--),p>l&&(p=l)),I=Vg(this._tTime,w),!a&&this._tTime&&I!==y&&(I=y),F&&1&y&&(p=l-p,P=1),y!==I&&!this._lock){var R=F&&1&I,k=R===(F&&1&y);if(y<I&&(R=!R),a=R?0:l,this._lock=1,this.render(a||(P?0:k2(y*w)),s,!l)._lock=0,this._tTime=u,!s&&this.parent&&X4(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),a&&a!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,k&&(this._lock=2,this.render(a=R?l:-1e-4,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;Cse(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,k2(a),k2(p)),x&&(u-=p-(p=x._start))),this._tTime=u,this._time=p,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&p&&!s&&(X4(this,"onStart"),this._tTime!==u))return this;if(p>=a&&r>=0)for(g=this._first;g;){if(_=g._next,(g._act||p>=g._start)&&g._ts&&x!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,s,o),p!==this._time||!this._ts&&!C){x=0,_&&(u+=this._zTime=-fa);break}}g=_}else{o=o||Q4,g=this._last;for(var W=r<0?r:p;g;){if(_=g._prev,(g._act||W<=g._end)&&g._ts&&x!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(W-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(W-g._start)*g._ts,s,o),p!==this._time||!this._ts&&!C){x=0,_&&(u+=this._zTime=W?-fa:fa);break}}g=_}}if(x&&!s&&(this.pause(),x.render(p>=a?0:-fa)._zTime=p>=a?1:-1,this._ts))return this._start=T,CS(this),this.render(r,s,o);this._onUpdate&&!s&&X4(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&a)&&(T===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&xf(this,1),!s&&(!(r<0)||a)&&(u||a||!c)&&(X4(this,u===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(bf(s)||(s=q4(this,s,r)),!(r instanceof Wg)){if(al(r))return r.forEach(function(a){return o.add(a,s)}),this;if(p2(r))return this.addLabel(r,s);if(!N1(r))return this;r=qc.delayedCall(0,r)}return this!==r?th(this,r,s):this},t.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-W4);for(var c=[],l=this._first;l;)l._start>=a&&(l instanceof qc?s&&c.push(l):(o&&c.push(l),r&&c.push.apply(c,l.getChildren(!0,s,o)))),l=l._next;return c},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return p2(r)?this.removeLabel(r):N1(r)?this.killTweensOf(r):(yS(this,r),r===this._recent&&(this._recent=this._last),H5(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=k2(l4.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=q4(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=qc.delayedCall(0,s||t_,o);return a.data="isPause",this._hasPause=1,th(this,a,q4(this,r))},t.removePause=function(r){var s=this._first;for(r=q4(this,r);s;)s._start===r&&"isPause"===s.data&&xf(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),c=a.length;c--;)u6!==a[c]&&a[c].kill(r,s);return this},t.getTweensOf=function(r,s){for(var u,o=[],a=K4(r),c=this._first,l=bf(s);c;)c instanceof qc?eet(c._targets,a)&&(l?(!u6||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&o.push(c):(u=c.getTweensOf(a,s)).length&&o.push.apply(o,u),c=c._next;return o},t.tweenTo=function(r,s){s=s||{};var g,o=this,a=q4(o,r),l=s.startAt,u=s.onStart,f=s.onStartParams,p=s.immediateRender,_=qc.to(o,$4({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||fa,onStart:function(){if(o.pause(),!g){var w=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());_._dur!==w&&Ug(_,w,0,1).render(_._time,!0,!0),g=1}u&&u.apply(_,f||[])}},s));return p?_.render(0):_},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,$4({startAt:{time:q4(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),mse(this,q4(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),mse(this,q4(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+fa)},t.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var l,a=this._first,c=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(l in c)c[l]>=o&&(c[l]+=r);return H5(this)},t.invalidate=function(){var r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return n.prototype.invalidate.call(this)},t.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),H5(this)},t.totalDuration=function(r){var l,u,f,s=0,o=this,a=o._last,c=W4;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(f=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,th(o,a,u-a._delay,1)._lock=0):c=u,u<0&&a._ts&&(s-=u,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),c=0),a._end>s&&a._ts&&(s=a._end),a=l;Ug(o,o===m1&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(m1._ts&&(Jre(m1,wS(r,m1)),Xre=l4.frame),l4.frame>=Yre){Yre+=o4.autoSleep||120;var s=m1._first;if((!s||!s._ts)&&o4.autoSleep&&l4._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||l4.sleep()}}},e}(Wg);$4(S3.prototype,{_lock:0,_hasPause:0,_forcing:0});var u6,_H,Met=function(e,t,i,r,s,o,a){var f,p,g,_,y,w,C,x,c=new E3(this._pt,e,t,0,1,Dse,null,s),l=0,u=0;for(c.b=i,c.e=r,i+="",(C=~(r+="").indexOf("random("))&&(r=o_(r)),o&&(o(x=[i,r],e,t),i=x[0],r=x[1]),p=i.match(tH)||[];f=tH.exec(r);)_=f[0],y=r.substring(l,f.index),g?g=(g+1)%5:"rgba("===y.substr(-5)&&(g=1),_!==p[u++]&&(w=parseFloat(p[u-1])||0,c._pt={_next:c._pt,p:y||1===u?y:",",s:w,c:"="===_.charAt(1)?Ng(w,_)-w:parseFloat(_)-w,m:g&&g<4?Math.round:0},l=tH.lastIndex);return c.c=l<r.length?r.substring(l,r.length):"",c.fp=a,(Wre.test(r)||C)&&(c.e=0),this._pt=c,c},vH=function(e,t,i,r,s,o,a,c,l,u){N1(r)&&(r=r(s||0,e,o));var _,f=e[t],p="get"!==i?i:N1(f)?l?e[t.indexOf("set")||!N1(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():f,g=N1(f)?l?Iet:Tse:wH;if(p2(r)&&(~r.indexOf("random(")&&(r=o_(r)),"="===r.charAt(1)&&((_=Ng(p,r)+(cl(p)||0))||0===_)&&(r=_)),!u||p!==r||_H)return isNaN(p*r)||""===r?(!f&&!(t in e)&&rH(t,r),Met.call(this,e,t,p,r,g,c||o4.stringFilter,l)):(_=new E3(this._pt,e,t,+p||0,r-(p||0),"boolean"==typeof f?Ret:Lse,0,g),l&&(_.fp=l),a&&_.modifier(a,this,e),this._pt=_)},Mse=function(e,t,i,r,s,o){var a,c,l,u;if(c4[e]&&!1!==(a=new c4[e]).init(s,a.rawVars?t[e]:function(e,t,i,r,s){if(N1(e)&&(e=u_(e,s,t,i,r)),!eh(e)||e.style&&e.nodeType||al(e)||Gre(e))return p2(e)?u_(e,s,t,i,r):e;var a,o={};for(a in e)o[a]=u_(e[a],s,t,i,r);return o}(t[e],r,s,o,i),i,r,o)&&(i._pt=c=new E3(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==Gg))for(l=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)l[a._props[u]]=c;return a},yH=function n(e,t){var F,P,R,k,W,ie,Te,me,Q,he,K,ae,fe,i=e.vars,r=i.ease,s=i.startAt,o=i.immediateRender,a=i.lazy,c=i.onUpdate,l=i.onUpdateParams,u=i.callbackScope,f=i.runBackwards,p=i.yoyoEase,g=i.keyframes,_=i.autoRevert,y=e._dur,w=e._startAt,C=e._targets,x=e.parent,M=x&&"nested"===x.data?x.vars.targets:C,T="auto"===e._overwrite&&!YP,I=e.timeline;if(I&&(!g||!r)&&(r="none"),e._ease=z5(r,zg.ease),e._yEase=p?wse(z5(!0===p?r:p,zg.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!I&&!!i.runBackwards,!I||g&&!i.stagger){if(ae=(me=C[0]?k5(C[0]).harness:0)&&i[me.prop],F=_S(i,sH),w&&(t<0&&f&&o&&!_?w.render(-1,!0):w.revert(f&&y?n_:JJe),w._lazy=0),s){if(xf(e._startAt=qc.set(C,$4({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:x3(a),startAt:null,delay:0,onUpdate:c,onUpdateParams:l,callbackScope:u,stagger:0},s))),t<0&&(Q4||!o&&!_)&&e._startAt.revert(n_),o&&y&&t<=0)return void(t&&(e._zTime=t))}else if(f&&y&&!w)if(t&&(o=!1),R=$4({overwrite:!1,data:"isFromStart",lazy:o&&x3(a),immediateRender:o,stagger:0,parent:x},F),ae&&(R[me.prop]=ae),xf(e._startAt=qc.set(C,R)),t<0&&(Q4?e._startAt.revert(n_):e._startAt.render(-1,!0)),e._zTime=t,o){if(!t)return}else n(e._startAt,fa);for(e._pt=e._ptCache=0,a=y&&x3(a)||a&&!y,P=0;P<C.length;P++){if(Te=(W=C[P])._gsap||lH(C)[P]._gsap,e._ptLookup[P]=he={},oH[Te.id]&&a6.length&&vS(),K=M===C?P:M.indexOf(W),me&&!1!==(Q=new me).init(W,ae||F,e,K,M)&&(e._pt=k=new E3(e._pt,W,Q.name,0,1,Q.render,Q,0,Q.priority),Q._props.forEach(function(de){he[de]=k}),Q.priority&&(ie=1)),!me||ae)for(R in F)c4[R]&&(Q=Mse(R,F,e,K,W,M))?Q.priority&&(ie=1):he[R]=k=vH.call(e,W,R,"get",F[R],K,M,0,i.stringFilter);e._op&&e._op[P]&&e.kill(W,e._op[P]),T&&e._pt&&(u6=e,m1.killTweensOf(W,he,e.globalTime(t)),fe=!e.parent,u6=0),e._pt&&a&&(oH[Te.id]=1)}ie&&Ise(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!fe,g&&t<=0&&I.render(W4,!0,!0)},Det=function(e,t,i,r){var o,a,s=t.ease||r||"power1.inOut";if(al(t))a=i[e]||(i[e]=[]),t.forEach(function(c,l){return a.push({t:l/(t.length-1)*100,v:c,e:s})});else for(o in t)a=i[o]||(i[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},u_=function(e,t,i,r,s){return N1(e)?e.call(t,i,r,s):p2(e)&&~e.indexOf("random(")?o_(e):e},Sse=cH+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Ese={};M3(Sse+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Ese[n]=1});var qc=function(n){function e(i,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var T,I,F,P,R,k,W,ie,c=(a=n.call(this,o?r:i_(r))||this).vars,l=c.duration,u=c.delay,f=c.immediateRender,p=c.stagger,g=c.overwrite,_=c.keyframes,y=c.defaults,w=c.scrollTrigger,C=c.yoyoEase,x=r.parent||m1,M=(al(i)||Gre(i)?bf(i[0]):"length"in r)?[i]:K4(i);if(a._targets=M.length?lH(M):mS("GSAP target "+i+" not found. https://greensock.com",!o4.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=g,_||p||pS(l)||pS(u)){if(r=a.vars,(T=a.timeline=new S3({data:"nested",defaults:y||{},targets:x&&"nested"===x.data?x.vars.targets:M})).kill(),T.parent=T._dp=Cf(a),T._start=0,p||pS(l)||pS(u)){if(P=M.length,W=p&&hse(p),eh(p))for(R in p)~Sse.indexOf(R)&&(ie||(ie={}),ie[R]=p[R]);for(I=0;I<P;I++)(F=_S(r,Ese)).stagger=0,C&&(F.yoyoEase=C),ie&&P5(F,ie),k=M[I],F.duration=+u_(l,Cf(a),I,k,M),F.delay=(+u_(u,Cf(a),I,k,M)||0)-a._delay,!p&&1===P&&F.delay&&(a._delay=u=F.delay,a._start+=u,F.delay=0),T.to(k,F,W?W(I,k,M):0),T._ease=Gs.none;T.duration()?l=u=0:a.timeline=0}else if(_){i_($4(T.vars.defaults,{ease:"none"})),T._ease=z5(_.ease||r.ease||"none");var me,Q,he,Te=0;if(al(_))_.forEach(function(K){return T.to(M,K,">")}),T.duration();else{for(R in F={},_)"ease"===R||"easeEach"===R||Det(R,_[R],F,_.easeEach);for(R in F)for(me=F[R].sort(function(K,ae){return K.t-ae.t}),Te=0,I=0;I<me.length;I++)(he={ease:(Q=me[I]).e,duration:(Q.t-(I?me[I-1].t:0))/100*l})[R]=Q.v,T.to(M,he,Te),Te+=he.duration;T.duration()<l&&T.to({},{duration:l-T.duration()})}}l||a.duration(l=T.duration())}else a.timeline=0;return!0===g&&!YP&&(u6=Cf(a),m1.killTweensOf(M),u6=0),th(x,Cf(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(f||!l&&!_&&a._start===k2(x._time)&&x3(f)&&ret(Cf(a))&&"nested"!==x.data)&&(a._tTime=-fa,a.render(Math.max(0,-u))),w&&ose(Cf(a),w),a}Nre(e,n);var t=e.prototype;return t.render=function(r,s,o){var p,g,_,y,w,C,x,M,T,a=this._time,c=this._tDur,l=this._dur,u=r<0,f=r>c-fa&&!u?c:r<fa?0:r;if(l){if(f!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(p=f,M=this.timeline,this._repeat){if(y=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*y+r,s,o);if(p=k2(f%y),f===c?(_=this._repeat,p=l):((_=~~(f/y))&&_===f/y&&(p=l,_--),p>l&&(p=l)),(C=this._yoyo&&1&_)&&(T=this._yEase,p=l-p),w=Vg(this._tTime,y),p===a&&!o&&this._initted)return this._tTime=f,this;_!==w&&(M&&this._yEase&&Cse(M,C),this.vars.repeatRefresh&&!C&&!this._lock&&(this._lock=o=1,this.render(k2(y*_),!0).invalidate()._lock=0))}if(!this._initted){if(ase(this,u?r:p,o,s))return this._tTime=0,this;if(a!==this._time)return this;if(l!==this._dur)return this.render(r,s,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(T||this._ease)(p/l),this._from&&(this.ratio=x=1-x),p&&!a&&!s&&(X4(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(x,g.d),g=g._next;M&&M.render(r<0?r:!p&&C?-fa:M._dur*M._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&uH(this,r,0,o),X4(this,"onUpdate")),this._repeat&&_!==w&&this.vars.onRepeat&&!s&&this.parent&&X4(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&uH(this,r,0,!0),(r||!l)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&xf(this,1),!s&&(!u||a)&&(f||a)&&(X4(this,f===c?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,r){var l,u,f,s=e.ratio,o=t<0||!t&&(!e._start&&set(e)&&(e._initted||!hH(e))||(e._ts<0||e._dp._ts<0)&&!hH(e))?0:1,a=e._rDelay,c=0;if(a&&e._repeat&&(c=s_(0,e._tDur,t),u=Vg(c,a),e._yoyo&&1&u&&(o=1-o),u!==Vg(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Q4||r||e._zTime===fa||!t&&e._zTime){if(!e._initted&&ase(e,t,r,i))return;for(f=e._zTime,e._zTime=t||(i?fa:0),i||(i=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&uH(e,t,0,!0),e._onUpdate&&!i&&X4(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&X4(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&xf(e,1),!i&&!Q4&&(X4(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),n.prototype.invalidate.call(this)},t.resetTo=function(r,s,o,a){l_||l4.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||yH(this,c),function(e,t,i,r,s,o,a){var l,u,f,p,c=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,p=e._targets.length;p--;){if((l=f[p][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return _H=1,e.vars[t]="+=0",yH(e,a),_H=0,1;c.push(l)}for(p=c.length;p--;)(l=(u=c[p])._pt||u).s=!r&&0!==r||s?l.s+(r||0)+o*l.c:r,l.c=i-l.s,u.e&&(u.e=sc(i)+cl(u.e)),u.b&&(u.b=l.s+cl(u.b))}(this,r,s,o,a,this._ease(c/this._dur),c)?this.resetTo(r,s,o,a):(bS(this,0),this.parent||ise(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?a_(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,u6&&!0!==u6.vars.overwrite)._first||a_(this),this.parent&&o!==this.timeline.totalDuration()&&Ug(this,this._dur*this.timeline._tDur/o,0,1),this}var f,p,g,_,y,w,C,a=this._targets,c=r?K4(r):a,l=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0}(a,c))return"all"===s&&(this._pt=0),a_(this);for(f=this._op=this._op||[],"all"!==s&&(p2(s)&&(y={},M3(s,function(x){return y[x]=1}),s=y),s=function(e,t){var s,o,a,c,i=e[0]?k5(e[0]).harness:0,r=i&&i.aliases;if(!r)return t;for(o in s=P5({},t),r)if(o in s)for(a=(c=r[o].split(",")).length;a--;)s[c[a]]=s[o];return s}(a,s)),C=a.length;C--;)if(~c.indexOf(a[C]))for(y in p=l[C],"all"===s?(f[C]=s,_=p,g={}):(g=f[C]=f[C]||{},_=s),_)(w=p&&p[y])&&((!("kill"in w.d)||!0===w.d.kill(y))&&yS(this,w,"_pt"),delete p[y]),"all"!==g&&(g[y]=1);return this._initted&&!this._pt&&u&&a_(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return r_(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return r_(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return m1.killTweensOf(r,s,o)},e}(Wg);$4(qc.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),M3("staggerTo,staggerFrom,staggerFromTo",function(n){qc[n]=function(){var e=new S3,t=fH.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var wH=function(e,t,i){return e[t]=i},Tse=function(e,t,i){return e[t](i)},Iet=function(e,t,i,r){return e[t](r.fp,i)},Bet=function(e,t,i){return e.setAttribute(t,i)},CH=function(e,t){return N1(e[t])?Tse:JP(e[t])&&e.setAttribute?Bet:wH},Lse=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},Ret=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Dse=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},bH=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Fet=function(e,t,i,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},ket=function(e){for(var i,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?yS(this,t,"_pt"):t.dep||(i=1),t=r;return!i},Pet=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},Ise=function(e){for(var i,r,s,o,t=e._pt;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},E3=function(){function n(t,i,r,s,o,a,c,l,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||Lse,this.d=c||this,this.set=l||wH,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=Pet,this.m=i,this.mt=s,this.tween=r},n}();M3(cH+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return sH[n]=1}),a4.TweenMax=a4.TweenLite=qc,a4.TimelineLite=a4.TimelineMax=S3,m1=new S3({sortChildren:!1,defaults:zg,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),o4.stringFilter=yse;var jg=[],xS={},Het=[],Bse=0,xH=function(e){return(xS[e]||Het).map(function(t){return t()})},MH=function(){var e=Date.now(),t=[];e-Bse>2&&(xH("matchMediaInit"),jg.forEach(function(i){var o,a,c,l,r=i.queries,s=i.conditions;for(a in r)(o=j4.matchMedia(r[a]).matches)&&(c=1),o!==s[a]&&(s[a]=o,l=1);l&&(i.revert(),c&&t.push(i))}),xH("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i)}),Bse=e,xH("matchMedia"))},Rse=function(){function n(t,i){this.selector=i&&dH(i),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){N1(i)&&(s=r,r=i,i=N1);var o=this,a=function(){var f,l=Bc,u=o.selector;return l&&l!==o&&l.data.push(o),s&&(o.selector=dH(s)),Bc=o,f=r.apply(o,arguments),N1(f)&&o._r.push(f),Bc=l,o.selector=u,o.isReverted=!1,f};return o.last=a,i===N1?a(o):i?o[i]=a:a},e.ignore=function(i){var r=Bc;Bc=null,i(this),Bc=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof qc&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,c){return c.g-a.g||-1}).forEach(function(a){return a.t.revert(i)}),this.data.forEach(function(a){return!(a instanceof Wg)&&a.revert&&a.revert(i)}),this._r.forEach(function(a){return a(i,s)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r){var o=jg.indexOf(this);~o&&jg.splice(o,1)}},e.revert=function(i){this.kill(i||{})},n}(),zet=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(i,r,s){eh(i)||(i={matches:i});var c,l,u,o=new Rse(0,s||this.scope),a=o.conditions={};for(l in this.contexts.push(o),r=o.add("onMatch",r),o.queries=i,i)"all"===l?u=1:(c=j4.matchMedia(i[l]))&&(jg.indexOf(o)<0&&jg.push(o),(a[l]=c.matches)&&(u=1),c.addListener?c.addListener(MH):c.addEventListener("change",MH));return u&&r(o),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),MS={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return vet(r)})},timeline:function(e){return new S3(e)},getTweensOf:function(e,t){return m1.getTweensOf(e,t)},getProperty:function(e,t,i,r){p2(e)&&(e=K4(e)[0]);var s=k5(e||{}).get,o=i?tse:ese;return"native"===i&&(i=""),e&&(t?o((c4[t]&&c4[t].get||s)(e,t,i,r)):function(a,c,l){return o((c4[a]&&c4[a].get||s)(e,a,c,l))})},quickSetter:function(e,t,i){if((e=K4(e)).length>1){var r=e.map(function(u){return u4.quickSetter(u,t,i)}),s=r.length;return function(u){for(var f=s;f--;)r[f](u)}}var o=c4[t],a=k5(e=e[0]||{}),c=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(u){var f=new o;Gg._pt=0,f.init(e,i?u+i:u,Gg,0,[e]),f.render(1,f),Gg._pt&&bH(1,Gg)}:a.set(e,c);return o?l:function(u){return l(e,c,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=u4.to(e,P5(((r={})[t]="+=0.1",r.paused=!0,r),i||{})),o=function(c,l,u){return s.resetTo(t,c,l,u)};return o.tween=s,o},isTweening:function(e){return m1.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=z5(e.ease,zg.ease)),nse(zg,e||{})},config:function(e){return nse(o4,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!c4[a]&&!a4[a]&&mS(t+" effect requires "+a+" plugin.")}),aH[t]=function(a,c,l){return i(K4(a),$4(c||{},s),l)},o&&(S3.prototype[t]=function(a,c,l){return this.add(aH[t](a,eh(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){Gs[e]=z5(t)},parseEase:function(e,t){return arguments.length?z5(e,t):Gs},getById:function(e){return m1.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,i=new S3(e);for(i.smoothChildTiming=x3(e.smoothChildTiming),m1.remove(i),i._dp=0,i._time=i._tTime=m1._time,r=m1._first;r;)s=r._next,(t||!(!r._dur&&r instanceof qc&&r.vars.onComplete===r._targets[0]))&&th(i,r,r._start-r._delay),r=s;return th(m1,i,0),i},context:function(e,t){return e?new Rse(e,t):Bc},matchMedia:function(e){return new zet(e)},matchMediaRefresh:function(){return jg.forEach(function(e){var i,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||MH()},addEventListener:function(e,t){var i=xS[e]||(xS[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=xS[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:function n(e,t,i){var r=t-e;return al(e)?pse(e,n(0,e.length),t):c6(i,function(s){return(r+(s-e)%r)%r+e})},wrapYoyo:function n(e,t,i){var r=t-e,s=2*r;return al(e)?pse(e,n(0,e.length-1),t):c6(i,function(o){return e+((o=(s+(o-e)%s)%s||0)>r?s-o:o)})},distribute:hse,random:dse,snap:fse,normalize:function(e,t,i){return gse(e,t,0,1,i)},getUnit:cl,clamp:function(e,t,i){return c6(i,function(r){return s_(e,t,r)})},splitColor:Ase,toArray:K4,selector:dH,mapRange:gse,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||cl(i))}},interpolate:function n(e,t,i,r){var s=isNaN(e+t)?0:function(g){return(1-g)*e+g*t};if(!s){var c,l,u,f,p,o=p2(e),a={};if(!0===i&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(al(e)&&!al(t)){for(u=[],p=(f=e.length)-2,l=1;l<f;l++)u.push(n(e[l-1],e[l]));f--,s=function(_){_*=f;var y=Math.min(p,~~_);return u[y](_-y)},i=t}else r||(e=P5(al(e)?[]:{},e));if(!u){for(c in t)vH.call(a,e,c,"get",t[c]);s=function(_){return bH(_,a)||(o?e.p:e)}}}return c6(i,s)},shuffle:use},install:qre,effects:aH,ticker:l4,updateRoot:S3.updateRoot,plugins:c4,globalTimeline:m1,core:{PropTween:E3,globals:Kre,Tween:qc,Timeline:S3,Animation:Wg,getCache:k5,_removeLinkedListItem:yS,reverting:function(){return Q4},context:function(e){return e&&Bc&&(Bc.data.push(e),e._ctx=Bc),Bc},suppressOverwrites:function(e){return YP=e}}};M3("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return MS[n]=qc[n]}),l4.add(S3.updateRoot),Gg=MS.to({},{duration:0});var Oet=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},SH=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var c,l;if(p2(s)&&(c={},M3(s,function(u){return c[u]=1}),s=c),t){for(l in c={},s)c[l]=t(s[l]);s=c}!function(e,t){var r,s,o,i=e._targets;for(r in t)for(s=i.length;s--;)(o=e._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=Oet(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))}(a,s)}}}},u4=MS.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,c;for(o in this.tween=i,t)c=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(c||0)+"",t[o],r,s,0,0,o)).op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Q4?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},SH("roundProps",pH),SH("modifiers"),SH("snap",fse))||MS;qc.version=S3.version=u4.version="3.11.1",$re=1,Ure()&&Qg();var Fse,h6,$g,EH,N5,kse,TH,Vse,Mf={},V5=180/Math.PI,qg=Math.PI/180,Kg=Math.atan2,LH=/([A-Z])/g,Get=/(left|right|width|margin|padding|x)/i,Qet=/[\s,\(]\S/,Sf={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},DH=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Wet=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},jet=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},$et=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},Hse=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},zse=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},qet=function(e,t,i){return e.style[t]=i},Ket=function(e,t,i){return e.style.setProperty(t,i)},Xet=function(e,t,i){return e._gsap[t]=i},Yet=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Zet=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},Jet=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},V1="transform",qu=V1+"Origin",ett=function(e){var t=this,i=this.target,r=i.style;if(e in Mf){if(this.tfm=this.tfm||{},"transform"!==e&&(~(e=Sf[e]||e).indexOf(",")?e.split(",").forEach(function(s){return t.tfm[s]=Ef(i,s)}):this.tfm[e]=i._gsap.x?i._gsap[e]:Ef(i,e)),this.props.indexOf(V1)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(qu,"")),e=V1}r&&this.props.push(e,r[e])},Ose=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},ttt=function(){var s,o,e=this.props,t=this.target,i=t.style,r=t._gsap;for(s=0;s<e.length;s+=2)e[s+1]?i[e[s]]=e[s+1]:i.removeProperty(e[s].replace(LH,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(s=TH())&&!s.isStart&&!i[V1]&&(Ose(i),r.uncache=1)}},Nse=function(e,t){var i={target:e,props:[],revert:ttt,save:ett};return t&&t.split(",").forEach(function(r){return i.save(r)}),i},IH=function(e,t){var i=h6.createElementNS?h6.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):h6.createElement(e);return i.style?i:h6.createElement(e)},nh=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(LH,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Xg(t)||t,1)||""},Use="O,Moz,ms,Ms,Webkit".split(","),Xg=function(e,t,i){var s=(t||N5).style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Use[o]+e in s););return o<0?null:(3===o?"ms":o>=0?Use[o]:"")+e},BH=function(){typeof window<"u"&&window.document&&(Fse=window,$g=(h6=Fse.document).documentElement,N5=IH("div")||{style:{}},IH("div"),V1=Xg(V1),qu=V1+"Origin",N5.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Vse=!!Xg("perspective"),TH=u4.core.reverting,EH=1)},RH=function n(e){var o,t=IH("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if($g.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),$g.removeChild(t),this.style.cssText=s,o},Gse=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},Qse=function(e){var t;try{t=e.getBBox()}catch{t=RH.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===RH||(t=RH.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+Gse(e,["x","cx","x1"])||0,y:+Gse(e,["y","cy","y1"])||0,width:0,height:0}},Wse=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Qse(e))},h_=function(e,t){if(t){var i=e.style;t in Mf&&t!==qu&&(t=V1),i.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),i.removeProperty(t.replace(LH,"-$1").toLowerCase())):i.removeAttribute(t)}},f6=function(e,t,i,r,s,o){var a=new E3(e._pt,t,i,0,1,o?zse:Hse);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},jse={deg:1,rad:1,turn:1},ntt={grid:1,flex:1},d6=function n(e,t,i,r){var _,y,w,C,s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=N5.style,c=Get.test(t),l="svg"===e.tagName.toLowerCase(),u=(l?"client":"offset")+(c?"Width":"Height"),f=100,p="px"===r,g="%"===r;return r===o||!s||jse[r]||jse[o]?s:("px"!==o&&!p&&(s=n(e,t,i,"px")),C=e.getCTM&&Wse(e),!g&&"%"!==o||!Mf[t]&&!~t.indexOf("adius")?(a[c?"width":"height"]=f+(p?o:r),y=~t.indexOf("adius")||"em"===r&&e.appendChild&&!l?e:e.parentNode,C&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===h6||!y.appendChild)&&(y=h6.body),(w=y._gsap)&&g&&w.width&&c&&w.time===l4.time&&!w.uncache?sc(s/w.width*f):((g||"%"===o)&&!ntt[nh(y,"display")]&&(a.position=nh(e,"position")),y===e&&(a.position="static"),y.appendChild(N5),_=N5[u],y.removeChild(N5),a.position="absolute",c&&g&&((w=k5(y)).time=l4.time,w.width=y[u]),sc(p?_*s/f:_&&s?f/_*s:0))):(_=C?e.getBBox()[c?"width":"height"]:e[u],sc(g?s/_*f:s/100*_)))},Ef=function(e,t,i,r){var s;return EH||BH(),t in Sf&&"transform"!==t&&~(t=Sf[t]).indexOf(",")&&(t=t.split(",")[0]),Mf[t]&&"transform"!==t?(s=d_(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:ES(nh(e,qu))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=SS[t]&&SS[t](e,t,i)||nh(e,t)||Zre(e,t)||("opacity"===t?1:0)),i&&!~(s+"").trim().indexOf(" ")?d6(e,t,s,i)+i:s},itt=function(e,t,i,r){if(!i||"none"===i){var s=Xg(t,e,1),o=s&&nh(e,s,1);o&&o!==i?(t=s,i=o):"borderColor"===t&&(i=nh(e,"borderTopColor"))}var u,f,p,g,_,y,w,C,x,M,T,a=new E3(this._pt,e.style,t,0,1,Dse),c=0,l=0;if(a.b=i,a.e=r,i+="","auto"==(r+="")&&(e.style[t]=r,r=nh(e,t)||r,e.style[t]=i),yse(u=[i,r]),r=u[1],p=(i=u[0]).match(Og)||[],(r.match(Og)||[]).length){for(;f=Og.exec(r);)w=f[0],x=r.substring(c,f.index),_?_=(_+1)%5:("rgba("===x.substr(-5)||"hsla("===x.substr(-5))&&(_=1),w!==(y=p[l++]||"")&&(g=parseFloat(y)||0,T=y.substr((g+"").length),"="===w.charAt(1)&&(w=Ng(g,w)+T),C=parseFloat(w),M=w.substr((C+"").length),c=Og.lastIndex-M.length,M||(M=M||o4.units[t]||T,c===r.length&&(r+=M,a.e+=M)),T!==M&&(g=d6(e,t,y,M)||0),a._pt={_next:a._pt,p:x||1===l?x:",",s:g,c:C-g,m:_&&_<4||"zIndex"===t?Math.round:0});a.c=c<r.length?r.substring(c,r.length):""}else a.r="display"===t&&"none"===r?zse:Hse;return Wre.test(r)&&(a.e=0),this._pt=a,a},$se={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},rtt=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return("top"===i||"bottom"===i||"left"===r||"right"===r)&&(e=i,i=r,r=e),t[0]=$se[i]||i,t[1]=$se[r]||r,t.join(" ")},stt=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,c,l,i=t.t,r=i.style,s=t.u,o=i._gsap;if("all"===s||!0===s)r.cssText="",c=1;else for(l=(s=s.split(",")).length;--l>-1;)Mf[a=s[l]]&&(c=1,a="transformOrigin"===a?qu:V1),h_(i,a);c&&(h_(i,V1),o&&(o.svg&&i.removeAttribute("transform"),d_(i,1),o.uncache=1,Ose(r)))}},SS={clearProps:function(e,t,i,r,s){if("isFromStart"!==s.data){var o=e._pt=new E3(e._pt,t,i,0,0,stt);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},f_=[1,0,0,1,0,0],qse={},Kse=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},Xse=function(e){var t=nh(e,V1);return Kse(t)?f_:t.substr(7).match(Qre).map(sc)},FH=function(e,t){var o,a,c,l,i=e._gsap||k5(e),r=e.style,s=Xse(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(c=e.transform.baseVal.consolidate().matrix).a,c.b,c.c,c.d,c.e,c.f]).join(",")?f_:s:(s===f_&&!e.offsetParent&&e!==$g&&!i.svg&&(c=r.display,r.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(l=1,a=e.nextElementSibling,$g.appendChild(e)),s=Xse(e),c?r.display=c:h_(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):$g.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},kH=function(e,t,i,r,s,o){var F,P,k,a=e._gsap,c=s||FH(e,!0),l=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,p=a.yOffset||0,g=c[0],_=c[1],y=c[2],w=c[3],C=c[4],x=c[5],M=t.split(" "),T=parseFloat(M[0])||0,I=parseFloat(M[1])||0;i?c!==f_&&(P=g*w-_*y)&&(k=T*(-_/P)+I*(g/P)-(g*x-_*C)/P,T=T*(w/P)+I*(-y/P)+(y*x-w*C)/P,I=k):(T=(F=Qse(e)).x+(~M[0].indexOf("%")?T/100*F.width:T),I=F.y+(~(M[1]||M[0]).indexOf("%")?I/100*F.height:I)),r||!1!==r&&a.smooth?(a.xOffset=f+((C=T-l)*g+(x=I-u)*y)-C,a.yOffset=p+(C*_+x*w)-x):a.xOffset=a.yOffset=0,a.xOrigin=T,a.yOrigin=I,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[qu]="0px 0px",o&&(f6(o,a,"xOrigin",l,T),f6(o,a,"yOrigin",u,I),f6(o,a,"xOffset",f,a.xOffset),f6(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",T+" "+I)},d_=function(e,t){var i=e._gsap||new xse(e);if("x"in i&&!t&&!i.uncache)return i;var u,f,p,g,_,y,w,C,x,M,T,I,F,P,R,k,W,ie,Te,me,Q,he,K,ae,fe,de,ke,et,Fe,wt,ut,Bt,r=e.style,s=i.scaleX<0,o="px",a="deg",c=getComputedStyle(e),l=nh(e,qu)||"0";return u=f=p=y=w=C=x=M=T=0,g=_=1,i.svg=!(!e.getCTM||!Wse(e)),c.translate&&(("none"!==c.translate||"none"!==c.scale||"none"!==c.rotate)&&(r[V1]=("none"!==c.translate?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==c.rotate?"rotate("+c.rotate+") ":"")+("none"!==c.scale?"scale("+c.scale.split(" ").join(",")+") ":"")+c[V1]),r.scale=r.rotate=r.translate="none"),P=FH(e,i.svg),i.svg&&(i.uncache?(fe=e.getBBox(),l=i.xOrigin-fe.x+"px "+(i.yOrigin-fe.y)+"px",ae=""):ae=!t&&e.getAttribute("data-svg-origin"),kH(e,ae||l,!!ae||i.originIsAbsolute,!1!==i.smooth,P)),I=i.xOrigin||0,F=i.yOrigin||0,P!==f_&&(ie=P[0],Te=P[1],me=P[2],Q=P[3],u=he=P[4],f=K=P[5],6===P.length?(g=Math.sqrt(ie*ie+Te*Te),_=Math.sqrt(Q*Q+me*me),y=ie||Te?Kg(Te,ie)*V5:0,(x=me||Q?Kg(me,Q)*V5+y:0)&&(_*=Math.abs(Math.cos(x*qg))),i.svg&&(u-=I-(I*ie+F*me),f-=F-(I*Te+F*Q))):(wt=P[7],ke=P[8],et=P[9],ut=P[11],u=P[12],f=P[13],p=P[14],w=(R=Kg(Bt=P[6],Fe=P[10]))*V5,R&&(ae=he*(k=Math.cos(-R))+ke*(W=Math.sin(-R)),fe=K*k+et*W,de=Bt*k+Fe*W,ke=he*-W+ke*k,et=K*-W+et*k,Fe=Bt*-W+Fe*k,ut=wt*-W+ut*k,he=ae,K=fe,Bt=de),C=(R=Kg(-me,Fe))*V5,R&&(k=Math.cos(-R),ut=Q*(W=Math.sin(-R))+ut*k,ie=ae=ie*k-ke*W,Te=fe=Te*k-et*W,me=de=me*k-Fe*W),y=(R=Kg(Te,ie))*V5,R&&(ae=ie*(k=Math.cos(R))+Te*(W=Math.sin(R)),fe=he*k+K*W,Te=Te*k-ie*W,K=K*k-he*W,ie=ae,he=fe),w&&Math.abs(w)+Math.abs(y)>359.9&&(w=y=0,C=180-C),g=sc(Math.sqrt(ie*ie+Te*Te+me*me)),_=sc(Math.sqrt(K*K+Bt*Bt)),R=Kg(he,K),x=Math.abs(R)>2e-4?R*V5:0,T=ut?1/(ut<0?-ut:ut):0),i.svg&&(ae=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Kse(nh(e,V1)),ae&&e.setAttribute("transform",ae))),Math.abs(x)>90&&Math.abs(x)<270&&(s?(g*=-1,x+=y<=0?180:-180,y+=y<=0?180:-180):(_*=-1,x+=x<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=f-((i.yPercent=f&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=sc(g),i.scaleY=sc(_),i.rotation=sc(y)+a,i.rotationX=sc(w)+a,i.rotationY=sc(C)+a,i.skewX=x+a,i.skewY=M+a,i.transformPerspective=T+o,(i.zOrigin=parseFloat(l.split(" ")[2])||0)&&(r[qu]=ES(l)),i.xOffset=i.yOffset=0,i.force3D=o4.force3D,i.renderTransform=i.svg?att:Vse?Yse:ott,i.uncache=0,i},ES=function(e){return(e=e.split(" "))[0]+" "+e[1]},PH=function(e,t,i){var r=cl(t);return sc(parseFloat(t)+parseFloat(d6(e,"x",i+"px",r)))+r},ott=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Yse(e,t)},U5="0deg",p_="0px",G5=") ",Yse=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.z,l=i.rotation,u=i.rotationY,f=i.rotationX,p=i.skewX,g=i.skewY,_=i.scaleX,y=i.scaleY,w=i.transformPerspective,C=i.force3D,x=i.target,M=i.zOrigin,T="",I="auto"===C&&e&&1!==e||!0===C;if(M&&(f!==U5||u!==U5)){var k,F=parseFloat(u)*qg,P=Math.sin(F),R=Math.cos(F);F=parseFloat(f)*qg,k=Math.cos(F),o=PH(x,o,P*k*-M),a=PH(x,a,-Math.sin(F)*-M),c=PH(x,c,R*k*-M+M)}w!==p_&&(T+="perspective("+w+G5),(r||s)&&(T+="translate("+r+"%, "+s+"%) "),(I||o!==p_||a!==p_||c!==p_)&&(T+=c!==p_||I?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+G5),l!==U5&&(T+="rotate("+l+G5),u!==U5&&(T+="rotateY("+u+G5),f!==U5&&(T+="rotateX("+f+G5),(p!==U5||g!==U5)&&(T+="skew("+p+", "+g+G5),(1!==_||1!==y)&&(T+="scale("+_+", "+y+G5),x.style[V1]=T||"translate(0, 0)"},att=function(e,t){var I,F,P,R,k,i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.rotation,l=i.skewX,u=i.skewY,f=i.scaleX,p=i.scaleY,g=i.target,_=i.xOrigin,y=i.yOrigin,w=i.xOffset,C=i.yOffset,x=i.forceCSS,M=parseFloat(o),T=parseFloat(a);c=parseFloat(c),l=parseFloat(l),(u=parseFloat(u))&&(l+=u=parseFloat(u),c+=u),c||l?(c*=qg,l*=qg,I=Math.cos(c)*f,F=Math.sin(c)*f,P=Math.sin(c-l)*-p,R=Math.cos(c-l)*p,l&&(u*=qg,k=Math.tan(l-u),P*=k=Math.sqrt(1+k*k),R*=k,u&&(k=Math.tan(u),I*=k=Math.sqrt(1+k*k),F*=k)),I=sc(I),F=sc(F),P=sc(P),R=sc(R)):(I=f,R=p,F=P=0),(M&&!~(o+"").indexOf("px")||T&&!~(a+"").indexOf("px"))&&(M=d6(g,"x",o,"px"),T=d6(g,"y",a,"px")),(_||y||w||C)&&(M=sc(M+_-(_*I+y*P)+w),T=sc(T+y-(_*F+y*R)+C)),(r||s)&&(k=g.getBBox(),M=sc(M+r/100*k.width),T=sc(T+s/100*k.height)),g.setAttribute("transform",k="matrix("+I+","+F+","+P+","+R+","+M+","+T+")"),x&&(g.style[V1]=k)},ctt=function(e,t,i,r,s){var f,p,o=360,a=p2(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?V5:1)-r,u=r+l+"deg";return a&&("short"===(f=s.split("_")[1])&&(l%=o)!=l%180&&(l+=l<0?o:-o),"cw"===f&&l<0?l=(l+36e9)%o-~~(l/o)*o:"ccw"===f&&l>0&&(l=(l-36e9)%o-~~(l/o)*o)),e._pt=p=new E3(e._pt,t,i,r,l,Wet),p.e=u,p.u="deg",e._props.push(i),p},Zse=function(e,t){for(var i in t)e[i]=t[i];return e},ltt=function(e,t,i){var a,c,l,u,f,p,_,r=Zse({},i._gsap),o=i.style;for(c in r.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),o[V1]=t,a=d_(i,1),h_(i,V1),i.setAttribute("transform",l)):(l=getComputedStyle(i)[V1],o[V1]=t,a=d_(i,1),o[V1]=l),Mf)(l=r[c])!==(u=a[c])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(c)<0&&(f=cl(l)!==(_=cl(u))?d6(i,c,l,_):parseFloat(l),p=parseFloat(u),e._pt=new E3(e._pt,a,c,f,p-f,DH),e._pt.u=_||0,e._props.push(c));Zse(a,r)};M3("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});SS[e>1?"border"+n:n]=function(a,c,l,u,f){var p,g;if(arguments.length<4)return p=o.map(function(_){return Ef(a,_,l)}),5===(g=p.join(" ")).split(p[0]).length?p[0]:g;p=(u+"").split(" "),g={},o.forEach(function(_,y){return g[_]=p[y]=p[y]||p[(y-1)/2|0]}),a.init(c,g,f)}});var Jse={name:"css",register:BH,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var l,u,f,p,g,_,y,w,C,x,M,T,I,F,P,R,o=this._props,a=e.style,c=i.vars.startAt;for(y in EH||BH(),this.styles=this.styles||Nse(e),R=this.styles.props,this.tween=i,t)if("autoRound"!==y&&(u=t[y],!c4[y]||!Mse(y,t,i,r,e,s)))if(_=SS[y],"function"==(g=typeof u)&&(g=typeof(u=u.call(i,r,e,s))),"string"===g&&~u.indexOf("random(")&&(u=o_(u)),_)_(this,e,y,u,i)&&(P=1);else if("--"===y.substr(0,2))l=(getComputedStyle(e).getPropertyValue(y)+"").trim(),u+="",l6.lastIndex=0,l6.test(l)||(w=cl(l),C=cl(u)),C?w!==C&&(l=d6(e,y,l,C)+C):w&&(u+=w),this.add(a,"setProperty",l,u,r,s,0,0,y),o.push(y),R.push(y,a[y]);else if("undefined"!==g){if(c&&y in c?(l="function"==typeof c[y]?c[y].call(i,r,e,s):c[y],p2(l)&&~l.indexOf("random(")&&(l=o_(l)),cl(l+"")||(l+=o4.units[y]||cl(Ef(e,y))||""),"="===(l+"").charAt(1)&&(l=Ef(e,y))):l=Ef(e,y),p=parseFloat(l),(x="string"===g&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),f=parseFloat(u),y in Sf&&("autoAlpha"===y&&(1===p&&"hidden"===Ef(e,"visibility")&&f&&(p=0),R.push("visibility",a.visibility),f6(this,a,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),"scale"!==y&&"transform"!==y&&~(y=Sf[y]).indexOf(",")&&(y=y.split(",")[0])),M=y in Mf)if(this.styles.save(y),T||((I=e._gsap).renderTransform&&!t.parseTransform||d_(e,t.parseTransform),F=!1!==t.smoothOrigin&&I.smooth,(T=this._pt=new E3(this._pt,a,V1,0,1,I.renderTransform,I,0,-1)).dep=1),"scale"===y)this._pt=new E3(this._pt,I,"scaleY",I.scaleY,(x?Ng(I.scaleY,x+f):f)-I.scaleY||0,DH),this._pt.u=0,o.push("scaleY",y),y+="X";else{if("transformOrigin"===y){R.push(qu,a[qu]),u=rtt(u),I.svg?kH(e,u,0,F,0,this):((C=parseFloat(u.split(" ")[2])||0)!==I.zOrigin&&f6(this,I,"zOrigin",I.zOrigin,C),f6(this,a,y,ES(l),ES(u)));continue}if("svgOrigin"===y){kH(e,u,1,F,0,this);continue}if(y in qse){ctt(this,I,y,p,x?Ng(p,x+u):u);continue}if("smoothOrigin"===y){f6(this,I,"smooth",I.smooth,u);continue}if("force3D"===y){I[y]=u;continue}if("transform"===y){ltt(this,u,e);continue}}else y in a||(y=Xg(y)||y);if(M||(f||0===f)&&(p||0===p)&&!Qet.test(u)&&y in a)f||(f=0),(w=(l+"").substr((p+"").length))!==(C=cl(u)||(y in o4.units?o4.units[y]:w))&&(p=d6(e,y,l,C)),this._pt=new E3(this._pt,M?I:a,y,p,(x?Ng(p,x+f):f)-p,M||"px"!==C&&"zIndex"!==y||!1===t.autoRound?DH:$et),this._pt.u=C||0,w!==C&&"%"!==C&&(this._pt.b=l,this._pt.r=jet);else if(y in a)itt.call(this,e,y,l,x?x+u:u);else{if(!(y in e)){rH(y,u);continue}this.add(e,y,l||e[y],x?x+u:u,r,s)}M||R.push(y,a[y]),o.push(y)}P&&Ise(this)},render:function(e,t){if(t.tween._time||!TH())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Ef,aliases:Sf,getSetter:function(e,t,i){var r=Sf[t];return r&&r.indexOf(",")<0&&(t=r),t in Mf&&t!==qu&&(e._gsap.x||Ef(e,"x"))?i&&kse===i?"scale"===t?Yet:Xet:(kse=i||{})&&("scale"===t?Zet:Jet):e.style&&!JP(e.style[t])?qet:~t.indexOf("-")?Ket:CH(e,t)},core:{_removeProperty:h_,_getMatrix:FH}};u4.utils.checkPrefix=Xg,u4.core.getStyleSaver=Nse,function(n,e,t,i){var r=M3(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){Mf[s]=1});M3(e,function(s){o4.units[s]="deg",qse[s]=1}),Sf[r[13]]=n+","+e,M3("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");Sf[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),M3("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){o4.units[n]="px"}),u4.registerPlugin(Jse);var Ku=u4.registerPlugin(Jse)||u4;let utt=(()=>{class n extends Ys{constructor(t,i={}){super(t),this.isReflector=!0,this.type="Reflector",this.camera=new Wc;const r=this,s=new Dn(void 0!==i.color?i.color:8355711),o=i.textureWidth||512,a=i.textureHeight||512,c=i.clipBias||0,l=i.shader||n.ReflectorShader,u=void 0!==i.multisample?i.multisample:4,f=new Uu,p=new Ae,g=new Ae,_=new Ae,y=new Qi,w=new Ae(0,0,-1),C=new Eo,x=new Ae,M=new Ae,T=new Eo,I=new Qi,F=this.camera,P=new V4(o,a,{samples:u,type:G0}),R=new F2({uniforms:Xd.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});R.uniforms.tDiffuse.value=P.texture,R.uniforms.color.value=s,R.uniforms.textureMatrix.value=I,this.material=R,this.onBeforeRender=function(k,W,ie){if(g.setFromMatrixPosition(r.matrixWorld),_.setFromMatrixPosition(ie.matrixWorld),y.extractRotation(r.matrixWorld),p.set(0,0,1),p.applyMatrix4(y),x.subVectors(g,_),x.dot(p)>0)return;x.reflect(p).negate(),x.add(g),y.extractRotation(ie.matrixWorld),w.set(0,0,-1),w.applyMatrix4(y),w.add(_),M.subVectors(g,w),M.reflect(p).negate(),M.add(g),F.position.copy(x),F.up.set(0,1,0),F.up.applyMatrix4(y),F.up.reflect(p),F.lookAt(M),F.far=ie.far,F.updateMatrixWorld(),F.projectionMatrix.copy(ie.projectionMatrix),I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),I.multiply(F.projectionMatrix),I.multiply(F.matrixWorldInverse),I.multiply(r.matrixWorld),f.setFromNormalAndCoplanarPoint(p,g),f.applyMatrix4(F.matrixWorldInverse),C.set(f.normal.x,f.normal.y,f.normal.z,f.constant);const Te=F.projectionMatrix;T.x=(Math.sign(C.x)+Te.elements[8])/Te.elements[0],T.y=(Math.sign(C.y)+Te.elements[9])/Te.elements[5],T.z=-1,T.w=(1+Te.elements[10])/Te.elements[14],C.multiplyScalar(2/C.dot(T)),Te.elements[2]=C.x,Te.elements[6]=C.y,Te.elements[10]=C.z+1-c,Te.elements[14]=C.w,r.visible=!1;const me=k.getRenderTarget(),Q=k.xr.enabled,he=k.shadowMap.autoUpdate,K=k.outputEncoding,ae=k.toneMapping;k.xr.enabled=!1,k.shadowMap.autoUpdate=!1,k.outputEncoding=Jh,k.toneMapping=0,k.setRenderTarget(P),k.state.buffers.depth.setMask(!0),!1===k.autoClear&&k.clear(),k.render(W,F),k.xr.enabled=Q,k.shadowMap.autoUpdate=he,k.outputEncoding=K,k.toneMapping=ae,k.setRenderTarget(me);const fe=ie.viewport;void 0!==fe&&k.state.viewport(fe),r.visible=!0},this.getRenderTarget=function(){return P},this.dispose=function(){P.dispose(),r.material.dispose()}}}return n.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"},n})();class htt{constructor(e){this.height=1.2,this.width=.8,this.bottom=1.2,this.thicknessOSB=.015,this.gap=.1,Object.assign(this,e),this.top=this.bottom+this.height,this.roughHeight=this.height+2*this.gap,this.roughHeightOSB=this.roughHeight+2*this.thicknessOSB,this.roughWidth=this.width+2*this.gap,this.roughWidthOSB=this.roughWidth+2*this.thicknessOSB,this.roughBottom=this.bottom-this.gap,this.roughBottomOSB=this.roughBottom-this.thicknessOSB,this.roughTop=this.top+this.gap,this.roughTopOSB=this.roughTop+this.thicknessOSB}}var gn=(()=>(function(n){n.ground="ground",n.pine="pine",n.osb="osb",n.gips="gips",n.insulation="insulation",n.outerSheet="outerSheet",n.facade="facade",n.tape="tape",n.foam="foam",n.hollowCoreSlap="hollowCoreSlap",n.concrete="concrete",n.white="white",n.whiteWood="whiteWood",n.ral9016="ral9016",n.normals="normals",n.unknown="unknown",n.window="window",n.floor="floor",n.roof="roof",n.wireFrame="wireFrame",n.windowDarkFrame="windowDarkFrame"}(gn||(gn={})),gn))(),so=(()=>(function(n){n.hollowCoreSlap="hollowCoreSlap",n.hollowCoreSlapSide="hollowCoreSlapSide",n.foam="foam",n.gips="gips",n.pine="pine",n.concrete="concrete",n.osb="osb",n.whiteWood="whiteWood",n.insulation="insulation",n.roof="roof",n.fishbone="fishbone"}(so||(so={})),so))();const ftt=[{key:so.hollowCoreSlap,url:"assets/textures/hollowCoreSlap.jpg",offset:[0,0],scale:[.7,1]},{key:so.hollowCoreSlapSide,url:"assets/textures/hollowCoreSlapSide.jpg"},{key:so.foam,url:"assets/textures/foam.jpg"},{key:so.gips,url:"assets/textures/gips.jpg"},{key:so.pine,url:"assets/textures/western-yellow-pine.jpg"},{key:so.concrete,url:"assets/textures/hollowCoreSlapPlain.jpg"},{key:so.whiteWood,url:"assets/textures/whiteWood.jpg"},{key:so.osb,url:"assets/textures/osb.jpg"},{key:so.fishbone,url:"assets/textures/fishbone.jpg",rotation:90,scale:[.6,.6]},{key:so.insulation,url:"assets/textures/insulation.png"},{key:so.roof,url:"assets/textures/roof.png",rotation:90,scale:[.4,.4]}];let TS=(()=>{class n{constructor(t,i){this.cookieService=t,this.httpClient=i,this.colors={},this.textures={},[0,5,10,15,20,30,40,50,60,70,80,90,100].forEach(r=>{this.colors[r]=getComputedStyle(document.body).getPropertyValue(`--color-${r}`).trim()}),this.generateTextures()}generateTextures(){ftt.forEach(t=>{var i=new Image,r=new N4;r.image=i,i.onload=function(){t.scale||(t.scale=[1,1]),t.offset||(t.offset=[0,0]),r.wrapS=r.wrapT=U0,r.offset.set(t.offset[0],t.offset[1]),r.repeat.set(t.scale[0],t.scale[1]),t.rotation&&(r.rotation=yi(t.rotation)),r.needsUpdate=!0},this.textures[t.key]=r,this.httpClient.get(t.url,{responseType:"arraybuffer",headers:{"cache-control":"private, max-age=3600"}}).subscribe(s=>{const o=new Uint8Array(s);this.cookieService.set(`texture-${t.key}`,`${JSON.stringify(o).slice(0,100)}`);var a=new Blob([o.buffer],{type:"image/png"}),c=URL.createObjectURL(a);this.textures[t.key].image.src=c})})}getMaterial(t,i=!1){let r=[new Ca({color:65280})];if(t===gn.pine&&(r=[new Ca({map:this.textures[so.pine]})]),t===gn.floor&&(r=[new Ca({map:this.textures[so.fishbone]})]),t===gn.ral9016&&(r=[new Ca({color:15855850,bumpMap:this.textures[so.pine],bumpScale:.05})]),t===gn.white&&(r=[new Ca({color:16777215,bumpMap:this.textures[so.pine],bumpScale:.05})]),t===gn.windowDarkFrame&&(r=[new Ca({color:3355443})]),t===gn.normals&&(r=[new Ik({})]),t===gn.roof&&(r=[new Ca({color:15592934,map:this.textures[so.roof],bumpMap:this.textures[so.roof]})]),t===gn.wireFrame&&(r=[new Ca({wireframe:!0})]),t===gn.whiteWood&&(r=[new Ca({map:this.textures[so.whiteWood]})]),t===gn.osb&&(r=[new Ca({map:this.textures[so.osb]})]),t===gn.hollowCoreSlap){const s=this.textures[so.hollowCoreSlapSide],o=this.textures[so.concrete],a=this.textures[so.hollowCoreSlap],c=this.textures[so.foam];r=[new Ca({map:s}),new Ca({map:s}),new Ca({map:o}),new Ca({map:c}),new Ca({map:a}),new Ca({map:a})]}if(t===gn.gips&&(r=[new Ca({map:this.textures[so.gips]})]),t===gn.ground&&(r=[new Ca({color:this.colors[10]})]),t===gn.concrete&&(r=[new Ca({map:this.textures[so.concrete]})]),t===gn.tape&&(r=[new Ca({color:7829367})]),t===gn.foam&&(r=[new Ca({map:this.textures[so.foam]})]),t===gn.insulation&&(r=[new Ca({map:this.textures[so.insulation]})]),t===gn.window&&(r=[new hf({depthWrite:!1,color:16777215,transmission:.9,opacity:.5,metalness:0,roughness:0,ior:1.5,transparent:!0,specularIntensity:1,specularColor:new Dn(16777215)})]),t===gn.outerSheet){const s=new Ca({map:this.textures[so.insulation]});r=[s],s.color=new Dn(6372634)}if(t===gn.facade){const s=this.textures[so.pine];s.rotation=yi(90),s.repeat.set(4,.3);const o=new Ca({map:s});r=[o],o.color=new Dn(8394776)}return 1===r.length&&(r=[r[0],r[0],r[0],r[0],r[0],r[0]]),r.forEach(s=>{s.transparent=!0,s.needsUpdate=!0}),i?r[0]:r}}return n.\u0275fac=function(t){return new(t||n)(Xe(R4),Xe($h))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class HH{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}class dtt{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}}class ih{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygons=[],e&&this.build(e)}clone(){const e=new ih;return e.plane=this.plane&&this.plane.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.polygons=this.polygons.map(t=>t.clone()),e}invert(){for(let t=0;t<this.polygons.length;t++)this.polygons[t].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();const e=this.front;this.front=this.back,this.back=e}clipPolygons(e){if(!this.plane)return e.slice();let t=new Array,i=new Array;for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],t,i,t,i);return this.front&&(t=this.front.clipPolygons(t)),i=this.back?this.back.clipPolygons(i):[],t.concat(i)}clipTo(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}allPolygons(){let e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}build(e){if(!e.length)return;this.plane||(this.plane=e[0].plane.clone());const t=[],i=[];for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],this.polygons,this.polygons,t,i);t.length&&(this.front||(this.front=new ih),this.front.build(t)),i.length&&(this.back||(this.back=new ih),this.back.build(i))}}class T3{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clone(){return new T3(this.x,this.y,this.z)}negate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}times(e){return this.x*=e,this.y*=e,this.z*=e,this}dividedBy(e){return this.x/=e,this.y/=e,this.z/=e,this}lerp(e,t){return this.add((new T3).copy(e).sub(this).times(t))}unit(){return this.dividedBy(this.length())}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}normalize(){return this.unit()}cross(e){const t=this.clone(),i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,c=e.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}toVector3(){return new Ae(this.x,this.y,this.z)}}let ptt=(()=>{class n{constructor(t,i){this.normal=t,this.w=i,this.normal=t,this.w=i}clone(){return new n(this.normal.clone(),this.w)}flip(){this.normal.negate(),this.w=-this.w}splitPolygon(t,i,r,s,o){let f=0;const p=[];for(let g=0;g<t.vertices.length;g++){const _=this.normal.dot(t.vertices[g].pos)-this.w,y=_<-n.EPSILON?2:_>n.EPSILON?1:0;f|=y,p.push(y)}switch(f){case 0:(this.normal.dot(t.plane.normal)>0?i:r).push(t);break;case 1:s.push(t);break;case 2:o.push(t);break;case 3:{const g=[],_=[];for(let y=0;y<t.vertices.length;y++){const w=(y+1)%t.vertices.length,C=p[y],x=p[w],M=t.vertices[y],T=t.vertices[w];if(2!=C&&g.push(M),1!=C&&_.push(2!=C?M.clone():M),3==(C|x)){const I=(this.w-this.normal.dot(M.pos))/this.normal.dot((new T3).copy(T.pos).sub(M.pos)),F=M.interpolate(T,I);g.push(F),_.push(F.clone())}}g.length>=3&&s.push(new Yg(g,t.shared)),_.length>=3&&o.push(new Yg(_,t.shared));break}}}static fromPoints(t,i,r){const s=(new T3).copy(i).sub(t).cross((new T3).copy(r).sub(t)).normalize();return new n(s.clone(),s.dot(t))}}return n.EPSILON=1e-5,n})();class Yg{constructor(e,t){this.vertices=e,this.shared=t,this.plane=ptt.fromPoints(e[0].pos,e[1].pos,e[2].pos)}clone(){return new Yg(this.vertices.map(e=>e.clone()),this.shared)}flip(){this.vertices.reverse().map(e=>e.flip()),this.plane.flip()}}class LS{constructor(e,t,i,r){this.pos=(new T3).copy(e),this.normal=(new T3).copy(t),this.uv=(new T3).copy(i),this.uv.z=0,r&&(this.color=(new T3).copy(r))}clone(){return new LS(this.pos,this.normal,this.uv,this.color)}flip(){this.normal.negate()}interpolate(e,t){return new LS(this.pos.clone().lerp(e.pos,t),this.normal.clone().lerp(e.normal,t),this.uv.clone().lerp(e.uv,t),this.color&&e.color&&this.color.clone().lerp(e.color,t))}}class Za{constructor(){this.polygons=new Array}static fromPolygons(e){const t=new Za;return t.polygons=e,t}static fromGeometry(e,t){let i=[];const r=e.attributes.position,s=e.attributes.normal,o=e.attributes.uv,a=e.attributes.color,c=e.groups;let l;if(e.index)l=e.index.array;else{l=new Array(r.array.length/r.itemSize|0);for(let f=0;f<l.length;f++)l[f]=f}i=new Array(l.length/3|0);for(let f=0,p=0,g=l.length;f<g;f+=3,p++){const _=new Array(3);for(let y=0;y<3;y++){const w=l[f+y],C=3*w,x=2*w,F=s.array[C],P=s.array[C+1],R=s.array[C+2],k=o?.array[x],W=o?.array[x+1];_[y]=new LS(new T3(r.array[C],r.array[C+1],r.array[C+2]),new T3(F,P,R),new T3(k,W,0),a&&new T3(a.array[x],a.array[x+1],a.array[x+2]))}if(void 0===t&&c&&c.length>0)for(const y of c)f>=y.start&&f<y.start+y.count&&(i[p]=new Yg(_,y.materialIndex));else i[p]=new Yg(_,t)}return Za.fromPolygons(i.filter(f=>!isNaN(f.plane.normal.x)))}static toGeometry(e,t){let i=0;const r=e.polygons;for(const g of r)i+=g.vertices.length-2;const s=new vr,o=new HH(3*i*3),a=new HH(3*i*3),c=new dtt(2*i*3);let l;const u=[],f=[];for(const g of r){const _=g.vertices,y=_.length;void 0!==g.shared&&(u[g.shared]||(u[g.shared]=[])),y&&void 0!==_[0].color&&(l||(l=new HH(3*i*3)));for(let w=3;w<=y;w++)(void 0===g.shared?f:u[g.shared]).push(o.top/3,o.top/3+1,o.top/3+2),o.write(_[0].pos),o.write(_[w-2].pos),o.write(_[w-1].pos),a.write(_[0].normal),a.write(_[w-2].normal),a.write(_[w-1].normal),c&&(c.write(_[0].uv),c.write(_[w-2].uv),c.write(_[w-1].uv)),l&&(l.write(_[0].color),l.write(_[w-2].color),l.write(_[w-1].color))}s.setAttribute("position",new Ka(o.array,3)),s.setAttribute("normal",new Ka(a.array,3)),c&&s.setAttribute("uv",new Ka(c.array,2)),l&&s.setAttribute("color",new Ka(l.array,3));for(let g=0;g<u.length;g++)void 0===u[g]&&(u[g]=[]);if(u.length){let g=[],_=0;for(let y=0;y<u.length;y++)s.addGroup(_,u[y].length,y),_+=u[y].length,g=g.concat(u[y]);s.addGroup(_,f.length,u.length),g=g.concat(f),s.setIndex(g)}const p=(new Qi).copy(t).invert();return s.applyMatrix4(p),s.computeBoundingSphere(),s.computeBoundingBox(),s}static fromMesh(e,t){const i=Za.fromGeometry(e.geometry,t),r=new Ae,s=new _3;s.getNormalMatrix(e.matrix);for(let o=0;o<i.polygons.length;o++){const a=i.polygons[o];for(let c=0;c<a.vertices.length;c++){const l=a.vertices[c];l.pos.copy(r.copy(l.pos.toVector3()).applyMatrix4(e.matrix)),l.normal.copy(r.copy(l.normal.toVector3()).applyMatrix3(s))}}return i}static toMesh(e,t,i){const r=Za.toGeometry(e,t),s=new Ys(r,i);return s.matrix.copy(t),s.matrix.decompose(s.position,s.quaternion,s.scale),s.rotation.setFromQuaternion(s.quaternion),s.updateMatrixWorld(),s.castShadow=s.receiveShadow=!0,s}static union(e,t){const i=Za.fromMesh(e),r=Za.fromMesh(t);return Za.toMesh(i.union(r),e.matrix,e.material)}static subtract(e,t){const i=Za.fromMesh(e),r=Za.fromMesh(t);return Za.toMesh(i.subtract(r),e.matrix,e.material)}static intersect(e,t){const i=Za.fromMesh(e),r=Za.fromMesh(t);return Za.toMesh(i.intersect(r),e.matrix,e.material)}clone(){const e=new Za;return e.polygons=this.polygons.map(t=>t.clone()).filter(t=>Number.isFinite(t.plane.w)),e}toPolygons(){return this.polygons}union(e){const t=new ih(this.clone().polygons),i=new ih(e.clone().polygons);return t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),Za.fromPolygons(t.allPolygons())}subtract(e){const t=new ih(this.clone().polygons),i=new ih(e.clone().polygons);return t.invert(),t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),t.invert(),Za.fromPolygons(t.allPolygons())}intersect(e){const t=new ih(this.clone().polygons),i=new ih(e.clone().polygons);return t.invert(),i.clipTo(t),i.invert(),t.clipTo(i),i.clipTo(t),t.build(i.allPolygons()),t.invert(),Za.fromPolygons(t.allPolygons())}inverse(){const e=this.clone();for(const t of e.polygons)t.flip();return e}toMesh(e,t){return Za.toMesh(this,e,t)}toGeometry(e){return Za.toGeometry(this,e)}}const eoe={type:"change"},zH={type:"start"},toe={type:"end"};class gtt extends r5{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Ae,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(De){De.addEventListener("keydown",hs),this._domElementKeyEvents=De},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(eoe),i.update(),s=r.NONE},this.update=function(){const De=new Ae,Jt=(new B2).setFromUnitVectors(e.up,new Ae(0,1,0)),un=Jt.clone().invert(),Wn=new Ae,jn=new B2,tr=2*Math.PI;return function(){const Go=i.object.position;De.copy(Go).sub(i.target),De.applyQuaternion(Jt),a.setFromVector3(De),i.autoRotate&&s===r.NONE&&k(function P(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let at=i.minAzimuthAngle,Rn=i.maxAzimuthAngle;return isFinite(at)&&isFinite(Rn)&&(at<-Math.PI?at+=tr:at>Math.PI&&(at-=tr),Rn<-Math.PI?Rn+=tr:Rn>Math.PI&&(Rn-=tr),a.theta=at<=Rn?Math.max(at,Math.min(Rn,a.theta)):a.theta>(at+Rn)/2?Math.max(at,a.theta):Math.min(Rn,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),De.setFromSpherical(a),De.applyQuaternion(un),Go.copy(i.target).add(De),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),u.set(0,0,0)),l=1,!!(f||Wn.distanceToSquared(i.object.position)>o||8*(1-jn.dot(i.object.quaternion))>o)&&(i.dispatchEvent(eoe),Wn.copy(i.object.position),jn.copy(i.object.quaternion),f=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Tt),i.domElement.removeEventListener("pointerdown",vn),i.domElement.removeEventListener("pointercancel",Cn),i.domElement.removeEventListener("wheel",cr),i.domElement.removeEventListener("pointermove",qn),i.domElement.removeEventListener("pointerup",En),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",hs)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new Ute,c=new Ute;let l=1;const u=new Ae;let f=!1;const p=new jt,g=new jt,_=new jt,y=new jt,w=new jt,C=new jt,x=new jt,M=new jt,T=new jt,I=[],F={};function R(){return Math.pow(.95,i.zoomSpeed)}function k(De){c.theta-=De}function W(De){c.phi-=De}const ie=function(){const De=new Ae;return function(un,Wn){De.setFromMatrixColumn(Wn,0),De.multiplyScalar(-un),u.add(De)}}(),Te=function(){const De=new Ae;return function(un,Wn){!0===i.screenSpacePanning?De.setFromMatrixColumn(Wn,1):(De.setFromMatrixColumn(Wn,0),De.crossVectors(i.object.up,De)),De.multiplyScalar(un),u.add(De)}}(),me=function(){const De=new Ae;return function(un,Wn){const jn=i.domElement;if(i.object.isPerspectiveCamera){De.copy(i.object.position).sub(i.target);let Pr=De.length();Pr*=Math.tan(i.object.fov/2*Math.PI/180),ie(2*un*Pr/jn.clientHeight,i.object.matrix),Te(2*Wn*Pr/jn.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(ie(un*(i.object.right-i.object.left)/i.object.zoom/jn.clientWidth,i.object.matrix),Te(Wn*(i.object.top-i.object.bottom)/i.object.zoom/jn.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function Q(De){i.object.isPerspectiveCamera?l/=De:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*De)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function he(De){i.object.isPerspectiveCamera?l*=De:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/De)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function K(De){p.set(De.clientX,De.clientY)}function fe(De){y.set(De.clientX,De.clientY)}function ut(){1===I.length?p.set(I[0].pageX,I[0].pageY):p.set(.5*(I[0].pageX+I[1].pageX),.5*(I[0].pageY+I[1].pageY))}function Bt(){1===I.length?y.set(I[0].pageX,I[0].pageY):y.set(.5*(I[0].pageX+I[1].pageX),.5*(I[0].pageY+I[1].pageY))}function xt(){const De=I[0].pageX-I[1].pageX,Jt=I[0].pageY-I[1].pageY,un=Math.sqrt(De*De+Jt*Jt);x.set(0,un)}function Sn(De){if(1==I.length)g.set(De.pageX,De.pageY);else{const un=Ci(De);g.set(.5*(De.pageX+un.x),.5*(De.pageY+un.y))}_.subVectors(g,p).multiplyScalar(i.rotateSpeed);const Jt=i.domElement;k(2*Math.PI*_.x/Jt.clientHeight),W(2*Math.PI*_.y/Jt.clientHeight),p.copy(g)}function ln(De){if(1===I.length)w.set(De.pageX,De.pageY);else{const Jt=Ci(De);w.set(.5*(De.pageX+Jt.x),.5*(De.pageY+Jt.y))}C.subVectors(w,y).multiplyScalar(i.panSpeed),me(C.x,C.y),y.copy(w)}function Ti(De){const Jt=Ci(De),un=De.pageX-Jt.x,Wn=De.pageY-Jt.y,jn=Math.sqrt(un*un+Wn*Wn);M.set(0,jn),T.set(0,Math.pow(M.y/x.y,i.zoomSpeed)),Q(T.y),x.copy(M)}function vn(De){!1!==i.enabled&&(0===I.length&&(i.domElement.setPointerCapture(De.pointerId),i.domElement.addEventListener("pointermove",qn),i.domElement.addEventListener("pointerup",En)),function mn(De){I.push(De)}(De),"touch"===De.pointerType?function Oe(De){switch(In(De),I.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;ut(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;Bt(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Zt(){i.enableZoom&&xt(),i.enablePan&&Bt()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function cn(){i.enableZoom&&xt(),i.enableRotate&&ut()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(zH)}(De):function Un(De){let Jt;switch(De.button){case 0:Jt=i.mouseButtons.LEFT;break;case 1:Jt=i.mouseButtons.MIDDLE;break;case 2:Jt=i.mouseButtons.RIGHT;break;default:Jt=-1}switch(Jt){case 1:if(!1===i.enableZoom)return;(function ae(De){x.set(De.clientX,De.clientY)})(De),s=r.DOLLY;break;case 0:if(De.ctrlKey||De.metaKey||De.shiftKey){if(!1===i.enablePan)return;fe(De),s=r.PAN}else{if(!1===i.enableRotate)return;K(De),s=r.ROTATE}break;case 2:if(De.ctrlKey||De.metaKey||De.shiftKey){if(!1===i.enableRotate)return;K(De),s=r.ROTATE}else{if(!1===i.enablePan)return;fe(De),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(zH)}(De))}function qn(De){!1!==i.enabled&&("touch"===De.pointerType?function ve(De){switch(In(De),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;Sn(De),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;ln(De),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Vt(De){i.enableZoom&&Ti(De),i.enablePan&&ln(De)})(De),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Ft(De){i.enableZoom&&Ti(De),i.enableRotate&&Sn(De)})(De),i.update();break;default:s=r.NONE}}(De):function di(De){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function de(De){g.set(De.clientX,De.clientY),_.subVectors(g,p).multiplyScalar(i.rotateSpeed);const Jt=i.domElement;k(2*Math.PI*_.x/Jt.clientHeight),W(2*Math.PI*_.y/Jt.clientHeight),p.copy(g),i.update()}(De);break;case r.DOLLY:if(!1===i.enableZoom)return;!function ke(De){M.set(De.clientX,De.clientY),T.subVectors(M,x),T.y>0?Q(R()):T.y<0&&he(R()),x.copy(M),i.update()}(De);break;case r.PAN:if(!1===i.enablePan)return;!function et(De){w.set(De.clientX,De.clientY),C.subVectors(w,y).multiplyScalar(i.panSpeed),me(C.x,C.y),y.copy(w),i.update()}(De)}}(De))}function En(De){bn(De),0===I.length&&(i.domElement.releasePointerCapture(De.pointerId),i.domElement.removeEventListener("pointermove",qn),i.domElement.removeEventListener("pointerup",En)),i.dispatchEvent(toe),s=r.NONE}function Cn(De){bn(De)}function cr(De){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(De.preventDefault(),i.dispatchEvent(zH),function Fe(De){De.deltaY<0?he(R()):De.deltaY>0&&Q(R()),i.update()}(De),i.dispatchEvent(toe))}function hs(De){!1===i.enabled||!1===i.enablePan||function wt(De){let Jt=!1;switch(De.code){case i.keys.UP:me(0,i.keyPanSpeed),Jt=!0;break;case i.keys.BOTTOM:me(0,-i.keyPanSpeed),Jt=!0;break;case i.keys.LEFT:me(i.keyPanSpeed,0),Jt=!0;break;case i.keys.RIGHT:me(-i.keyPanSpeed,0),Jt=!0}Jt&&(De.preventDefault(),i.update())}(De)}function Tt(De){!1!==i.enabled&&De.preventDefault()}function bn(De){delete F[De.pointerId];for(let Jt=0;Jt<I.length;Jt++)if(I[Jt].pointerId==De.pointerId)return void I.splice(Jt,1)}function In(De){let Jt=F[De.pointerId];void 0===Jt&&(Jt=new jt,F[De.pointerId]=Jt),Jt.set(De.pageX,De.pageY)}function Ci(De){return F[(De.pointerId===I[0].pointerId?I[1]:I[0]).pointerId]}i.domElement.addEventListener("contextmenu",Tt),i.domElement.addEventListener("pointerdown",vn),i.domElement.addEventListener("pointercancel",Cn),i.domElement.addEventListener("wheel",cr,{passive:!1}),this.update()}}class mtt extends Qze{constructor(e){super(e),this.type=G0}parse(e){const a=function(M,T){switch(M){case 1:console.error("THREE.RGBELoader Read Error: "+(T||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(T||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(T||""));break;default:console.error("THREE.RGBELoader: Error: "+(T||""))}return-1},p=function(M,T,I){T=T||1024;let P=M.pos,R=-1,k=0,W="",ie=String.fromCharCode.apply(null,new Uint16Array(M.subarray(P,P+128)));for(;0>(R=ie.indexOf("\n"))&&k<T&&P<M.byteLength;)W+=ie,k+=ie.length,P+=128,ie+=String.fromCharCode.apply(null,new Uint16Array(M.subarray(P,P+128)));return-1<R&&(!1!==I&&(M.pos+=k+R+1),W+ie.slice(0,R))},y=function(M,T,I,F){const R=Math.pow(2,M[T+3]-128)/255;I[F+0]=M[T+0]*R,I[F+1]=M[T+1]*R,I[F+2]=M[T+2]*R,I[F+3]=1},w=function(M,T,I,F){const R=Math.pow(2,M[T+3]-128)/255;I[F+0]=yM.toHalfFloat(Math.min(M[T+0]*R,65504)),I[F+1]=yM.toHalfFloat(Math.min(M[T+1]*R,65504)),I[F+2]=yM.toHalfFloat(Math.min(M[T+2]*R,65504)),I[F+3]=yM.toHalfFloat(1)},C=new Uint8Array(e);C.pos=0;const x=function(M){const I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,R=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,k={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let W,ie;if(M.pos>=M.byteLength||!(W=p(M)))return a(1,"no header found");if(!(ie=W.match(/^#\?(\S+)/)))return a(3,"bad initial token");for(k.valid|=1,k.programtype=ie[1],k.string+=W+"\n";W=p(M),!1!==W;)if(k.string+=W+"\n","#"!==W.charAt(0)){if((ie=W.match(I))&&(k.gamma=parseFloat(ie[1])),(ie=W.match(F))&&(k.exposure=parseFloat(ie[1])),(ie=W.match(P))&&(k.valid|=2,k.format=ie[1]),(ie=W.match(R))&&(k.valid|=4,k.height=parseInt(ie[1],10),k.width=parseInt(ie[2],10)),2&k.valid&&4&k.valid)break}else k.comments+=W+"\n";return 2&k.valid?4&k.valid?k:a(3,"missing image size specifier"):a(3,"missing format specifier")}(C);if(-1!==x){const M=x.width,T=x.height,I=function(M,T,I){const F=T;if(F<8||F>32767||2!==M[0]||2!==M[1]||128&M[2])return new Uint8Array(M);if(F!==(M[2]<<8|M[3]))return a(3,"wrong scanline width");const P=new Uint8Array(4*T*I);if(!P.length)return a(4,"unable to allocate buffer space");let R=0,k=0;const W=4*F,ie=new Uint8Array(4),Te=new Uint8Array(W);let me=I;for(;me>0&&k<M.byteLength;){if(k+4>M.byteLength)return a(1);if(ie[0]=M[k++],ie[1]=M[k++],ie[2]=M[k++],ie[3]=M[k++],2!=ie[0]||2!=ie[1]||(ie[2]<<8|ie[3])!=F)return a(3,"bad rgbe scanline format");let he,Q=0;for(;Q<W&&k<M.byteLength;){he=M[k++];const ae=he>128;if(ae&&(he-=128),0===he||Q+he>W)return a(3,"bad scanline data");if(ae){const fe=M[k++];for(let de=0;de<he;de++)Te[Q++]=fe}else Te.set(M.subarray(k,k+he),Q),Q+=he,k+=he}const K=F;for(let ae=0;ae<K;ae++){let fe=0;P[R]=Te[ae+fe],fe+=F,P[R+1]=Te[ae+fe],fe+=F,P[R+2]=Te[ae+fe],fe+=F,P[R+3]=Te[ae+fe],R+=4}me--}return P}(C.subarray(C.pos),M,T);if(-1!==I){let F,P,R;switch(this.type){case O4:R=I.length/4;const k=new Float32Array(4*R);for(let ie=0;ie<R;ie++)y(I,4*ie,k,4*ie);F=k,P=O4;break;case G0:R=I.length/4;const W=new Uint16Array(4*R);for(let ie=0;ie<R;ie++)w(I,4*ie,W,4*ie);F=W,P=G0;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:M,height:T,data:F,header:x.string,gamma:x.gamma,exposure:x.exposure,type:P}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,r){return super.load(e,function s(o,a){switch(o.type){case O4:case G0:o.encoding=Jh,o.minFilter=qa,o.magFilter=qa,o.generateMipmaps=!1,o.flipY=!0}t&&t(o,a)},i,r)}}class rh{constructor(e,t,i,r,s="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),rh.nextNameID=rh.nextNameID||0,this.$name.id="lil-gui-name-"+ ++rh.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback),this.updateDisplay()}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Att extends rh{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function OH(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!t&&"#"+t}const vtt={isPrimitive:!0,match:n=>"string"==typeof n,fromHexString:OH,toHexString:OH},g_={isPrimitive:!0,match:n=>"number"==typeof n,fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},_tt={isPrimitive:!1,match:Array.isArray,fromHexString(n,e,t=1){const i=g_.fromHexString(n);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(255&i)/255*t},toHexString:([n,e,t],i=1)=>g_.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},ytt={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const i=g_.fromHexString(n);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(255&i)/255*t},toHexString:({r:n,g:e,b:t},i=1)=>g_.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},wtt=[vtt,g_,_tt,ytt];class Ctt extends rh{constructor(e,t,i,r){var s;super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(s=this.initialValue,wtt.find(o=>o.match(s))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const o=OH(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class NH extends rh{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{}),this.$disable=this.$button}}class btt extends rh{constructor(e,t,i,r,s,o){super(e,t,i,"number"),this._initInput(),this.min(r),this.max(s);const a=void 0!==o;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=e),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=u=>{const f=parseFloat(this.$input.value);isNaN(f)||(this._snapClampSetValue(f+u),this.$input.value=this.getValue())};let t,i,r,s,o,a=!1;const c=u=>{if(a){const f=u.clientX-t;Math.abs(u.clientY-i)>5?(u.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(f)>5&&l()}a||(o-=(u.clientY-r)*this._step*this._arrowKeyMultiplier(u),s+o>this._max?o=this._max-s:s+o<this._min&&(o=this._min-s),this._snapClampSetValue(s+o)),r=u.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",()=>{const u=parseFloat(this.$input.value);isNaN(u)||this.setValue(this._clamp(u))}),this.$input.addEventListener("keydown",u=>{"Enter"===u.code&&this.$input.blur(),"ArrowUp"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u))),"ArrowDown"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u)*-1))}),this.$input.addEventListener("wheel",u=>{this._inputFocused&&(u.preventDefault(),e(this._step*this._normalizeMouseWheel(u)))}),this.$input.addEventListener("mousedown",u=>{t=u.clientX,i=r=u.clientY,a=!0,s=this.getValue(),o=0,window.addEventListener("mousemove",c),window.addEventListener("mouseup",l)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=p=>{const g=this.$slider.getBoundingClientRect();let _=(p-(w=g.left))/(g.right-w)*(this._max-(x=this._min))+x;var w,x;this._snapClampSetValue(_)},t=p=>{e(p.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)};let r,s,o=!1;const a=p=>{p.preventDefault(),this._setDraggingStyle(!0),e(p.touches[0].clientX),o=!1},c=p=>{if(o){const _=p.touches[0].clientY-s;Math.abs(p.touches[0].clientX-r)>Math.abs(_)?a(p):(window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l))}else p.preventDefault(),e(p.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l)},u=this._callOnFinishChange.bind(this);let f;this.$slider.addEventListener("mousedown",p=>{this._setDraggingStyle(!0),e(p.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",p=>{p.touches.length>1||(this._hasScrollBar?(r=p.touches[0].clientX,s=p.touches[0].clientY,o=!0):a(p),window.addEventListener("touchmove",c),window.addEventListener("touchend",l))}),this.$slider.addEventListener("wheel",p=>{if(Math.abs(p.deltaX)<Math.abs(p.deltaY)&&this._hasScrollBar)return;p.preventDefault();const g=this._normalizeMouseWheel(p)*this._step;this._snapClampSetValue(this.getValue()+g),this.$input.value=this.getValue(),clearTimeout(f),f=setTimeout(u,400)})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class xtt extends rh{constructor(e,t,i,r){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(s=>{const o=document.createElement("option");o.innerHTML=s,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class Mtt extends rh{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{"Enter"===r.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let noe=!1;class VH{constructor({parent:e,autoPlace:t=void 0===e,container:i,width:r,title:s="Controls",injectStyles:o=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{"Enter"!==c.code&&"Space"!==c.code||(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!noe&&o&&(function(c){const l=document.createElement("style");l.innerHTML='.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25be";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25b8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}';const u=document.querySelector("head link[rel=stylesheet], head style");u?document.head.insertBefore(l,u):document.head.appendChild(l)}(),noe=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",c=>c.stopPropagation()),this.domElement.addEventListener("keyup",c=>c.stopPropagation())}add(e,t,i,r,s){if(Object(i)===i)return new xtt(this,e,t,i);const o=e[t];switch(typeof o){case"number":return new btt(this,e,t,i,r,s);case"boolean":return new Att(this,e,t);case"string":return new Mtt(this,e,t);case"function":return new NH(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",o)}addColor(e,t,i=1){return new Ctt(this,e,t,i)}addFolder(e){return new VH({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof NH||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof NH)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.$children.style.height=this.$children.clientHeight+"px",this.domElement.classList.add("transition");const i=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(t=>t.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const m_={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class DS{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const Stt=new f5(-1,1,1,-1,0,1),UH=new vr;UH.setAttribute("position",new ci([-1,3,0,-1,-1,0,3,-1,0],3)),UH.setAttribute("uv",new ci([0,2,0,0,2,0],2));class ioe{constructor(e){this._mesh=new Ys(UH,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Stt)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class roe extends DS{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof F2?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Xd.clone(e.uniforms),this.material=new F2({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new ioe(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class soe extends DS{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),s=e.state;let o,a;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class Ett extends DS{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Ttt{constructor(e,t){if(this.renderer=e,void 0===t){const i=e.getSize(new jt);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new V4(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===m_&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===roe&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new roe(m_),this.clock=new Pte}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==soe&&(o instanceof soe?i=!0:o instanceof Ett&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new jt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new f5(-1,1,1,-1,0,1);const GH=new vr;GH.setAttribute("position",new ci([-1,3,0,-1,-1,0,3,-1,0],3)),GH.setAttribute("uv",new ci([0,2,0,0,2,0],2));class ooe{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,i){return e[0]*t+e[1]*i}dot3(e,t,i,r){return e[0]*t+e[1]*i+e[2]*r}dot4(e,t,i,r,s){return e[0]*t+e[1]*i+e[2]*r+e[3]*s}noise(e,t){let i,r,s;const a=(e+t)*(.5*(Math.sqrt(3)-1)),c=Math.floor(e+a),l=Math.floor(t+a),u=(3-Math.sqrt(3))/6,f=(c+l)*u,_=e-(c-f),y=t-(l-f);let w,C;_>y?(w=1,C=0):(w=0,C=1);const x=_-w+u,M=y-C+u,T=_-1+2*u,I=y-1+2*u,F=255&c,P=255&l,k=this.perm[F+w+this.perm[P+C]]%12,W=this.perm[F+1+this.perm[P+1]]%12;let ie=.5-_*_-y*y;ie<0?i=0:(ie*=ie,i=ie*ie*this.dot(this.grad3[this.perm[F+this.perm[P]]%12],_,y));let Te=.5-x*x-M*M;Te<0?r=0:(Te*=Te,r=Te*Te*this.dot(this.grad3[k],x,M));let me=.5-T*T-I*I;return me<0?s=0:(me*=me,s=me*me*this.dot(this.grad3[W],T,I)),70*(i+r+s)}noise3d(e,t,i){let r,s,o,a;const l=.3333333333333333*(e+t+i),u=Math.floor(e+l),f=Math.floor(t+l),p=Math.floor(i+l),g=1/6,_=(u+f+p)*g,x=e-(u-_),M=t-(f-_),T=i-(p-_);let I,F,P,R,k,W;x>=M?M>=T?(I=1,F=0,P=0,R=1,k=1,W=0):x>=T?(I=1,F=0,P=0,R=1,k=0,W=1):(I=0,F=0,P=1,R=1,k=0,W=1):M<T?(I=0,F=0,P=1,R=0,k=1,W=1):x<T?(I=0,F=1,P=0,R=0,k=1,W=1):(I=0,F=1,P=0,R=1,k=1,W=0);const ie=x-I+g,Te=M-F+g,me=T-P+g,Q=x-R+2*g,he=M-k+2*g,K=T-W+2*g,ae=x-1+.5,fe=M-1+.5,de=T-1+.5,ke=255&u,et=255&f,Fe=255&p,ut=this.perm[ke+I+this.perm[et+F+this.perm[Fe+P]]]%12,Bt=this.perm[ke+R+this.perm[et+k+this.perm[Fe+W]]]%12,xt=this.perm[ke+1+this.perm[et+1+this.perm[Fe+1]]]%12;let Zt=.6-x*x-M*M-T*T;Zt<0?r=0:(Zt*=Zt,r=Zt*Zt*this.dot3(this.grad3[this.perm[ke+this.perm[et+this.perm[Fe]]]%12],x,M,T));let cn=.6-ie*ie-Te*Te-me*me;cn<0?s=0:(cn*=cn,s=cn*cn*this.dot3(this.grad3[ut],ie,Te,me));let Sn=.6-Q*Q-he*he-K*K;Sn<0?o=0:(Sn*=Sn,o=Sn*Sn*this.dot3(this.grad3[Bt],Q,he,K));let ln=.6-ae*ae-fe*fe-de*de;return ln<0?a=0:(ln*=ln,a=ln*ln*this.dot3(this.grad3[xt],ae,fe,de)),32*(r+s+o+a)}noise4d(e,t,i,r){const s=this.grad4,o=this.simplex,a=this.perm,c=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20;let u,f,p,g,_;const y=(e+t+i+r)*c,w=Math.floor(e+y),C=Math.floor(t+y),x=Math.floor(i+y),M=Math.floor(r+y),T=(w+C+x+M)*l,k=e-(w-T),W=t-(C-T),ie=i-(x-T),Te=r-(M-T),de=(k>W?32:0)+(k>ie?16:0)+(W>ie?8:0)+(k>Te?4:0)+(W>Te?2:0)+(ie>Te?1:0),ke=o[de][0]>=3?1:0,et=o[de][1]>=3?1:0,Fe=o[de][2]>=3?1:0,wt=o[de][3]>=3?1:0,ut=o[de][0]>=2?1:0,Bt=o[de][1]>=2?1:0,xt=o[de][2]>=2?1:0,Zt=o[de][3]>=2?1:0,cn=o[de][0]>=1?1:0,Sn=o[de][1]>=1?1:0,ln=o[de][2]>=1?1:0,Ti=o[de][3]>=1?1:0,Vt=k-ke+l,Ft=W-et+l,vn=ie-Fe+l,qn=Te-wt+l,En=k-ut+2*l,Cn=W-Bt+2*l,Un=ie-xt+2*l,di=Te-Zt+2*l,cr=k-cn+3*l,hs=W-Sn+3*l,Oe=ie-ln+3*l,ve=Te-Ti+3*l,Tt=k-1+4*l,mn=W-1+4*l,bn=ie-1+4*l,In=Te-1+4*l,Ci=255&w,De=255&C,Jt=255&x,un=255&M,jn=a[Ci+ke+a[De+et+a[Jt+Fe+a[un+wt]]]]%32,tr=a[Ci+ut+a[De+Bt+a[Jt+xt+a[un+Zt]]]]%32,Pr=a[Ci+cn+a[De+Sn+a[Jt+ln+a[un+Ti]]]]%32,Go=a[Ci+1+a[De+1+a[Jt+1+a[un+1]]]]%32;let at=.6-k*k-W*W-ie*ie-Te*Te;at<0?u=0:(at*=at,u=at*at*this.dot4(s[a[Ci+a[De+a[Jt+a[un]]]]%32],k,W,ie,Te));let Rn=.6-Vt*Vt-Ft*Ft-vn*vn-qn*qn;Rn<0?f=0:(Rn*=Rn,f=Rn*Rn*this.dot4(s[jn],Vt,Ft,vn,qn));let zt=.6-En*En-Cn*Cn-Un*Un-di*di;zt<0?p=0:(zt*=zt,p=zt*zt*this.dot4(s[tr],En,Cn,Un,di));let Nn=.6-cr*cr-hs*hs-Oe*Oe-ve*ve;Nn<0?g=0:(Nn*=Nn,g=Nn*Nn*this.dot4(s[Pr],cr,hs,Oe,ve));let Hn=.6-Tt*Tt-mn*mn-bn*bn-In*In;return Hn<0?_=0:(Hn*=Hn,_=Hn*Hn*this.dot4(s[Go],Tt,mn,bn,In)),27*(u+f+p+g+_)}}const A_={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new jt},cameraProjectionMatrix:{value:new Qi},cameraInverseProjectionMatrix:{value:new Qi},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNoise;\n\n\t\tuniform vec3 kernel[ KERNEL_SIZE ];\n\n\t\tuniform vec2 resolution;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float kernelRadius;\n\t\tuniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference\n\t\tuniform float maxDistance; // avoid the influence of fragments which are too far away\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t}\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec2 screenPosition ) {\n\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\n\t\t\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );\n\t\t\tvec3 viewNormal = getViewNormal( vUv );\n\n\t\t\tvec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );\n\t\t\tvec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );\n\n\t\t\t// compute matrix used to reorient a kernel vector\n\n\t\t\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );\n\t\t\tvec3 bitangent = cross( viewNormal, tangent );\n\t\t\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );\n\n\t\t float occlusion = 0.0;\n\n\t\t for ( int i = 0; i < KERNEL_SIZE; i ++ ) {\n\n\t\t\t\tvec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space\n\t\t\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point\n\n\t\t\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC\n\t\t\t\tsamplePointNDC /= samplePointNDC.w;\n\n\t\t\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates\n\n\t\t\t\tfloat realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture\n\t\t\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value\n\t\t\t\tfloat delta = sampleDepth - realDepth;\n\n\t\t\t\tif ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion\n\n\t\t\t\t\tocclusion += 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );\n\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );\n\n\t\t}"},IS_defines={PERSPECTIVE_CAMERA:1},IS_uniforms={tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},IS_vertexShader="varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",IS_fragmentShader="uniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );\n\n\t\t}",BS={uniforms:{tDiffuse:{value:null},resolution:{value:new jt}},vertexShader:"varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"uniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\t\t\tfloat result = 0.0;\n\n\t\t\tfor ( int i = - 2; i <= 2; i ++ ) {\n\n\t\t\t\tfor ( int j = - 2; j <= 2; j ++ ) {\n\n\t\t\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;\n\t\t\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );\n\n\t\t}"};let Dtt=(()=>{class n extends DS{constructor(t,i,r,s){super(),this.width=void 0!==r?r:512,this.height=void 0!==s?s:512,this.clear=!0,this.camera=i,this.scene=t,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const o=new Pee;o.format=t5,o.type=J8,this.beautyRenderTarget=new V4(this.width,this.height),this.normalRenderTarget=new V4(this.width,this.height,{minFilter:k1,magFilter:k1,depthTexture:o}),this.ssaoRenderTarget=new V4(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),void 0===A_&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new F2({defines:Object.assign({},A_.defines),uniforms:Xd.clone(A_.uniforms),vertexShader:A_.vertexShader,fragmentShader:A_.fragmentShader,blending:0}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Ik,this.normalMaterial.blending=0,this.blurMaterial=new F2({defines:Object.assign({},BS.defines),uniforms:Xd.clone(BS.uniforms),vertexShader:BS.vertexShader,fragmentShader:BS.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new F2({defines:Object.assign({},IS_defines),uniforms:Xd.clone(IS_uniforms),vertexShader:IS_vertexShader,fragmentShader:IS_fragmentShader,blending:0}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new F2({uniforms:Xd.clone(m_.uniforms),vertexShader:m_.vertexShader,fragmentShader:m_.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:208,blendDst:200,blendEquation:Nd,blendSrcAlpha:206,blendDstAlpha:200,blendEquationAlpha:Nd}),this.fsQuad=new ioe(null),this.originalClearColor=new Dn}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,i){switch(!1===t.capabilities.isWebGL2&&(this.noiseTexture.format=1024),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(t,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.output){case n.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=5,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(t,i,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),c=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,null!=s&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.fsQuad.material=i,this.fsQuad.render(t),t.autoClear=c,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,i,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),c=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=i.clearAlpha||o,null!=(s=i.clearColor||s)&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.scene.overrideMaterial=i,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=c,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}setSize(t,i){this.width=t,this.height=i,this.beautyRenderTarget.setSize(t,i),this.ssaoRenderTarget.setSize(t,i),this.normalRenderTarget.setSize(t,i),this.blurRenderTarget.setSize(t,i),this.ssaoMaterial.uniforms.resolution.value.set(t,i),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,i)}generateSampleKernel(){const t=this.kernelSize,i=this.kernel;for(let r=0;r<t;r++){const s=new Ae;s.x=2*Math.random()-1,s.y=2*Math.random()-1,s.z=Math.random(),s.normalize();let o=r/t;o=vx.lerp(.1,1,o*o),s.multiplyScalar(o),i.push(s)}}generateRandomKernelRotations(){void 0===ooe&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const r=new ooe,o=new Float32Array(16);for(let a=0;a<16;a++){const c=2*Math.random()-1,l=2*Math.random()-1;o[a]=r.noise3d(c,l,0)}this.noiseTexture=new vg(o,4,4,1028,O4),this.noiseTexture.wrapS=U0,this.noiseTexture.wrapT=U0,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const i=this._visibilityCache;this.scene.traverse(function(r){i.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){const i=this._visibilityCache;this.scene.traverse(function(r){const s=i.get(r);r.visible=s}),i.clear()}}return n.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5},n})();var v_=function(){var n=0,e=document.createElement("div");function t(u){return e.appendChild(u.dom),u}function i(u){for(var f=0;f<e.children.length;f++)e.children[f].style.display=f===u?"block":"none";n=u}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++n%e.children.length)},!1);var r=(performance||Date).now(),s=r,o=0,a=t(new v_.Panel("FPS","#0ff","#002")),c=t(new v_.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new v_.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(c.update(u-r,200),u>=s+1e3&&(a.update(1e3*o/(u-s),100),s=u,o=0,l)){var f=performance.memory;l.update(f.usedJSHeapSize/1048576,f.jsHeapSizeLimit/1048576)}return u},update:function(){r=this.end()},domElement:e,setMode:i}};v_.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,c=48*o,l=3*o,u=2*o,f=3*o,p=15*o,g=74*o,_=30*o,y=document.createElement("canvas");y.width=a,y.height=c,y.style.cssText="width:80px;height:48px";var w=y.getContext("2d");return w.font="bold "+9*o+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=t,w.fillRect(0,0,a,c),w.fillStyle=e,w.fillText(n,l,u),w.fillRect(f,p,g,_),w.fillStyle=t,w.globalAlpha=.9,w.fillRect(f,p,g,_),{dom:y,update:function(C,x){i=Math.min(i,C),r=Math.max(r,C),w.fillStyle=t,w.globalAlpha=1,w.fillRect(0,0,a,p),w.fillStyle=e,w.fillText(s(C)+" "+n+" ("+s(i)+"-"+s(r)+")",l,u),w.drawImage(y,f+o,p,g-o,_,f,p,g-o,_),w.fillRect(f+g-o,p,o,_),w.fillStyle=t,w.globalAlpha=.9,w.fillRect(f+g-o,p,o,s((1-C/x)*_))}}};class RS extends Ys{constructor(){const e=RS.SkyShader,t=new F2({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:Xd.clone(e.uniforms),side:1,depthWrite:!1});super(new Q0(1,1,1),t),this.isSky=!0}}RS.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Ae},up:{value:new Ae(0,1,0)}},vertexShader:"\n\t\tuniform vec3 sunPosition;\n\t\tuniform float rayleigh;\n\t\tuniform float turbidity;\n\t\tuniform float mieCoefficient;\n\t\tuniform vec3 up;\n\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float e = 2.71828182845904523536028747135266249775724709369995957;\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\t// wavelength of used primaries, according to preetham\n\t\tconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\tconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\tconst float v = 4.0;\n\t\tconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\tconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\tconst float cutoffAngle = 1.6110731556870734;\n\t\tconst float steepness = 1.5;\n\t\tconst float EE = 1000.0;\n\n\t\tfloat sunIntensity( float zenithAngleCos ) {\n\t\t\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n\t\t\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n\t\t}\n\n\t\tvec3 totalMie( float T ) {\n\t\t\tfloat c = ( 0.2 * T ) * 10E-18;\n\t\t\treturn 0.434 * c * MieConst;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n\t\t\tvSunDirection = normalize( sunPosition );\n\n\t\t\tvSunE = sunIntensity( dot( vSunDirection, up ) );\n\n\t\t\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n\t\t\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n\t\t\t// extinction (absorbtion + out scattering)\n\t\t\t// rayleigh coefficients\n\t\t\tvBetaR = totalRayleigh * rayleighCoefficient;\n\n\t\t\t// mie coefficients\n\t\t\tvBetaM = totalMie( turbidity ) * mieCoefficient;\n\n\t\t}",fragmentShader:"\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\tuniform float mieDirectionalG;\n\t\tuniform vec3 up;\n\n\t\tconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n\t\t// constants for atmospheric scattering\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\tconst float n = 1.0003; // refractive index of air\n\t\tconst float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\tconst float rayleighZenithLength = 8.4E3;\n\t\tconst float mieZenithLength = 1.25E3;\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\tconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\tconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n\t\t// 1.0 / ( 4.0 * pi )\n\t\tconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\n\t\tfloat rayleighPhase( float cosTheta ) {\n\t\t\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n\t\t}\n\n\t\tfloat hgPhase( float cosTheta, float g ) {\n\t\t\tfloat g2 = pow( g, 2.0 );\n\t\t\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n\t\t\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec3 direction = normalize( vWorldPosition - cameraPos );\n\n\t\t\t// optical length\n\t\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n\t\t\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n\t\t\tfloat sR = rayleighZenithLength * inverse;\n\t\t\tfloat sM = mieZenithLength * inverse;\n\n\t\t\t// combined extinction factor\n\t\t\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n\t\t\t// in scattering\n\t\t\tfloat cosTheta = dot( direction, vSunDirection );\n\n\t\t\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n\t\t\tvec3 betaRTheta = vBetaR * rPhase;\n\n\t\t\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\n\t\t\tvec3 betaMTheta = vBetaM * mPhase;\n\n\t\t\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n\t\t\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n\t\t\t// nightsky\n\t\t\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n\t\t\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n\t\t\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n\t\t\tvec3 L0 = vec3( 0.1 ) * Fex;\n\n\t\t\t// composition + solar disc\n\t\t\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n\t\t\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n\t\t\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n\t\t\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\t\t\tgl_FragColor = vec4( retColor, 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"};var xa=(()=>(function(n){n.left="left",n.right="right",n.top="top",n.bottom="bottom",n.back="back",n.front="front"}(xa||(xa={})),xa))();const aoe=new d2({color:3355443}),Btt=new zl({side:2,visible:!1}),Rtt=new zl({visible:!1}),Ftt=new zl({visible:!1});class ktt extends To{constructor(){super(),this.width=20,this.height=8,this.depth=5,this.onChange$=new Je,this.drag=!1,this.controlEnabled=!1,this.xyz=[1,1,1],this.rayCaster=new vOe,this.activeSide=void 0,this.mouse=new jt(0,0),this.edges={},this.planes={},this.dragPlane=new Ys(new y3(1e3,1e3,1,1),Ftt),this.startPoint=new Ae(0,0,0),this.setToNormalizedDeviceCoordinates=function(e,t,i){return i.x=void 0!==e.clientX?e.clientX:e.touches&&e.touches[0].clientX,i.y=void 0!==e.clientY?e.clientY:e.touches&&e.touches[0].clientY,i.x=i.x/t.innerWidth*2-1,i.y=-i.y/t.innerHeight*2+1,i},this.init(),this.startDrag=this.startDrag.bind(this),this.onDrag=this.onDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(){this.box=new Ys(new Q0(this.width,this.height,this.depth),Rtt),this.box.userData.side="box",this.setPosition(),this.add(this.box),this.add(this.dragPlane),this.dragPlane.castShadow=!1,this.dragPlane.receiveShadow=!1,Object.keys(xa).forEach(e=>{this.edges[e]=new Yd(new vr,aoe.clone()),this.edges[e].userData.side=e,this.add(this.edges[e]),e!==xa.top&&(this.planes[e]=new Ys(new y3(this.width,this.height,this.depth),Btt.clone()),this.planes[e].userData.side=e,this.add(this.planes[e]))}),this.drawBox(),window.addEventListener("pointermove",e=>{this.mouse=this.setToNormalizedDeviceCoordinates(e,window,this.mouse)})}states(e){this.enabled=e.clipBoxEnabled,this.show=e.clipBoxShow,this.drawBox()}drawBox(){this.box.geometry.dispose(),this.box.geometry=new Q0(this.width,this.height,this.depth),this.box.position.set(this.width/2,this.height/2,this.depth/2),this.drawPlanesAroundBox(),this.drawLinesAroundBox()}drawPlanesAroundBox(){Object.keys(xa).forEach(i=>{let r;i===xa.front?(r=new y3(this.width,this.height),r.rotateY(0),r.translate(0,0,this.depth/2)):i===xa.back&&(r=new y3(this.width,this.height),r.rotateY(Math.PI),r.translate(0,0,-this.depth/2)),i===xa.left?(r=new y3(this.depth,this.height),r.rotateY(-Math.PI/2),r.translate(-this.width/2,0,0)):i===xa.right&&(r=new y3(this.depth,this.height),r.rotateY(Math.PI/2),r.translate(this.width/2,0,0)),i!==xa.top&&(i===xa.bottom&&(r=new y3(this.width,this.depth),r.rotateX(Math.PI/2),r.translate(0,-this.height/2,0)),this.planes[i].geometry.dispose(),this.show&&(this.planes[i].geometry=r,this.planes[i].position.set(this.width/2,this.height/2,this.depth/2)))})}drawLinesAroundBox(){Object.keys(xa).forEach(e=>{if(void 0===this.planes[e])return;let t=Array.from(this.planes[e].geometry.attributes.position.array).reduce((i,r,s)=>(s%3?i[i.length-1].push(r):i.push([r]))&&i,[]).map(i=>new Ae(i[0],i[1],i[2]));this.show?(this.edges[e].geometry.setFromPoints([...t.slice(0,2),...t.slice(2).reverse(),t[0]]),this.edges[e].position.set(this.width/2,this.height/2,this.depth/2)):this.edges[e].geometry.setFromPoints([])})}onMouseOver(e,t,i,r,s){if(!this.enabled)return void s();if(!0===this.drag||!1===this.show)return;this.camera=e,this.callbackUpdate=i,this.rayCaster.setFromCamera(this.mouse,this.camera);const o=this.rayCaster.intersectObjects(Object.values(this.planes));if(this.activeSide=o.length>0?o[0].object.userData.side:void 0,this.previousSide===this.activeSide)return;this.previousSide=this.activeSide,Object.keys(xa).forEach(c=>{c===this.activeSide?(this.edges[c].material.color.set(3065014),this.edges[c].renderOrder=1):(this.edges[c].material.color.set(aoe.color),this.edges[c].renderOrder=0)});const a=t.domElement;void 0!==this.activeSide?(a.addEventListener("mousedown",this.startDrag),a.addEventListener("mousemove",this.onDrag),a.addEventListener("mouseup",this.endDrag),r()):(a.removeEventListener("mousedown",this.startDrag),a.removeEventListener("mousemove",this.onDrag),a.removeEventListener("mouseup",this.endDrag),s())}startDrag(e){if(1===e.buttons){this.drag=!0,this.rayCaster.setFromCamera(this.mouse,this.camera);var t=this.rayCaster.intersectObjects(Object.values(this.planes));if(t.length>0){const r=t[0].point;this.widthStart=this.width,this.heightStart=this.height,this.depthStart=this.depth,this.startPoint=t[0].point;let s=new Ae;this.dragPlane.parent.getWorldPosition(s),this.dragPlane.position.set(r.x-s.x,r.y-s.y,r.z-s.z),this.dragPlane.geometry.center();let o=new Ae(0,0,1);(this.activeSide===xa.front||this.activeSide===xa.back)&&(o=new Ae(0,0,1)),(this.activeSide===xa.left||this.activeSide===xa.right)&&(o=new Ae(1,0,0)),(this.activeSide===xa.top||this.activeSide===xa.bottom)&&(o=new Ae(0,1,0));var i=this.camera.position.clone().sub(this.camera.position.clone().projectOnVector(o));this.dragPlane.lookAt(i.add(r))}}}onDrag(e){if(!1!==this.drag){this.rayCaster.setFromCamera(this.mouse,this.camera);var t=this.rayCaster.intersectObject(this.dragPlane);t.length>0&&this.change(t[0].point)}}endDrag(e){this.drag=!1,0===e.buttons&&this.onChange$.next()}change(e){if(void 0===this.activeSide)return;const t=e.x-this.startPoint.x,i=e.y-this.startPoint.y,r=e.z-this.startPoint.z;this.activeSide===xa.right&&(this.width=this.widthStart+t),this.activeSide===xa.top&&(this.height=this.heightStart+i),this.activeSide===xa.front&&(this.depth=this.depthStart+r),this.activeSide===xa.left&&(this.width=this.widthStart-t,this.xyz[0]=e.x),this.activeSide===xa.bottom&&(this.height=this.heightStart-i,this.xyz[1]=e.y),this.activeSide===xa.back&&(this.depth=this.depthStart-r,this.xyz[2]=e.z),this.width=Math.max(this.width,2),this.height=Math.max(this.height,2),this.depth=Math.max(this.depth,2),this.drawBox(),this.setPosition(),this.callbackUpdate()}setPosition(){this.position.set(this.xyz[0],this.xyz[1],this.xyz[2])}setCookie(e){this.height=e.height,this.width=e.width,this.depth=e.depth,this.xyz=e.xyz,this.setPosition()}}class Ptt extends y5{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Vtt(t)}),this.register(function(t){return new qtt(t)}),this.register(function(t){return new Ktt(t)}),this.register(function(t){return new Gtt(t)}),this.register(function(t){return new Qtt(t)}),this.register(function(t){return new Wtt(t)}),this.register(function(t){return new jtt(t)}),this.register(function(t){return new Ntt(t)}),this.register(function(t){return new $tt(t)}),this.register(function(t){return new Utt(t)}),this.register(function(t){return new ztt(t)}),this.register(function(t){return new Xtt(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:df.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Gu(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if("string"==typeof e)s=e;else if(df.decodeText(new Uint8Array(e,0,4))===coe){try{o[Ts.KHR_BINARY_GLTF]=new Ytt(e)}catch(f){return void(r&&r(f))}s=o[Ts.KHR_BINARY_GLTF].content}else s=df.decodeText(new Uint8Array(e));const c=JSON.parse(s);if(void 0===c.asset||c.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new unt(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](l);a[f.name]=f,o[f.name]=!0}if(c.extensionsUsed)for(let u=0;u<c.extensionsUsed.length;++u){const f=c.extensionsUsed[u],p=c.extensionsRequired||[];switch(f){case Ts.KHR_MATERIALS_UNLIT:o[f]=new Ott;break;case Ts.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[f]=new ent;break;case Ts.KHR_DRACO_MESH_COMPRESSION:o[f]=new Ztt(c,this.dracoLoader);break;case Ts.KHR_TEXTURE_TRANSFORM:o[f]=new Jtt;break;case Ts.KHR_MESH_QUANTIZATION:o[f]=new tnt;break;default:p.indexOf(f)>=0&&void 0===a[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Htt(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ts={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class ztt{constructor(e){this.parser=e,this.name=Ts.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new Dn(16777215);void 0!==c.color&&u.fromArray(c.color);const f=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new Hk(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Dte(u),l.distance=f;break;case"spot":l=new Tte(u),l.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class Ott{constructor(){this.name=Ts.KHR_MATERIALS_UNLIT}getMaterialType(){return zl}extendParams(e,t,i){const r=[];e.color=new Dn(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,No))}return Promise.all(r)}}class Ntt{constructor(e){this.parser=e,this.name=Ts.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class Vtt{constructor(e){this.parser=e,this.name=Ts.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?hf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new jt(a,a)}return Promise.all(s)}}class Utt{constructor(e){this.parser=e,this.name=Ts.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?hf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Gtt{constructor(e){this.parser=e,this.name=Ts.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?hf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Dn(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,No)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Qtt{constructor(e){this.parser=e,this.name=Ts.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?hf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Wtt{constructor(e){this.parser=e,this.name=Ts.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?hf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Dn(a[0],a[1],a[2]),Promise.all(s)}}class jtt{constructor(e){this.parser=e,this.name=Ts.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?hf:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class $tt{constructor(e){this.parser=e,this.name=Ts.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?hf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Dn(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,No)),Promise.all(s)}}class qtt{constructor(e){this.parser=e,this.name=Ts.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Ktt{constructor(e){this.parser=e,this.name=Ts.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Xtt{constructor(e){this.name=Ts.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,f=r.byteStride,p=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,p,r.mode,r.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(g),u,f,p,r.mode,r.filter),g})})}return null}}const coe="glTF";class Ytt{constructor(e){this.name=Ts.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:df.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==coe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const c=new Uint8Array(e,12+s,o);this.content=df.decodeText(c)}else if(5130562===a){const c=12+s;this.body=e.slice(c,c+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ztt{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ts.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const f=WH[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=WH[u]||u.toLowerCase();if(void 0!==o[u]){const p=i.accessors[e.attributes[u]];l[f]=y_[p.componentType].name,c[f]=!0===p.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(p){for(const g in p.attributes){const _=p.attributes[g],y=c[g];void 0!==y&&(_.normalized=y)}f(p)},a,l)})})}}class Jtt{constructor(){this.name=Ts.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class QH extends xv{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Dn).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(c){for(const l in a)c.uniforms[l]=a[l];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(c){a.specular.value=c}},specularMap:{get:function(){return a.specularMap.value},set:function(c){a.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(c){a.glossiness.value=c}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(c){a.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class ent{constructor(){this.name=Ts.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return QH}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new Dn(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(i.assignTexture(e,"map",r.diffuseTexture,No)),e.emissive=new Dn(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Dn(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,No))}return Promise.all(s)}createMaterial(e){const t=new QH(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class tnt{constructor(){this.name=Ts.KHR_MESH_QUANTIZATION}}class uoe extends Mv{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,f=(i-t)/u,p=f*f,g=p*f,_=e*l,y=_-l,w=-2*g+3*p,C=g-p,x=1-w,M=C-p+f;for(let T=0;T!==a;T++)s[T]=x*o[y+T+a]+M*(o[y+T+c]*u)+w*o[_+T+a]+C*(o[_+T]*u);return s}}const nnt=new B2;class int extends uoe{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return nnt.fromArray(s).normalize().toArray(s),s}}const y_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},hoe={9728:k1,9729:qa,9984:1004,9985:1007,9986:1005,9987:Vd},foe={33071:Hl,33648:1002,10497:U0},doe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},WH={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},g6={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rnt={CUBICSPLINE:void 0,LINEAR:j7,STEP:nv};function snt(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new xv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function w_(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Q5(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ant(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function cnt(n){const e=n.extensions&&n.extensions[Ts.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+poe(e.attributes):n.indices+":"+poe(n.attributes)+":"+n.mode,t}function poe(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function $H(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class unt{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Htt,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new Wze(this.options.manager):new nOe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gu(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};w_(s,a,r),Q5(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Ts.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(df.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=doe[r.type],l=y_[r.componentType],u=l.BYTES_PER_ELEMENT,p=r.byteOffset||0,g=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,_=!0===r.normalized;let y,w;if(g&&g!==u*c){const C=Math.floor(p/g),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+C+":"+r.count;let M=t.cache.get(x);M||(y=new l(a,C*g,r.count*g/u),M=new ok(y,g/u),t.cache.add(x,M)),w=new g5(M,c,p%g/u,_)}else y=null===a?new l(r.count*c):new l(a,p,r.count*c),w=new Ka(y,c,_);if(void 0!==r.sparse){const T=r.sparse.values.byteOffset||0,I=new(0,y_[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*doe.SCALAR),F=new l(o[2],T,r.sparse.count*c);null!==a&&(w=new Ka(w.array.slice(),w.itemSize,w.normalized));for(let P=0,R=I.length;P<R;P++){const k=I[P];if(w.setX(k,F[P*c]),c>=2&&w.setY(k,F[P*c+1]),c>=3&&w.setZ(k,F[P*c+2]),c>=4&&w.setW(k,F[P*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=hoe[p.magFilter]||qa,u.minFilter=hoe[p.minFilter]||Vd,u.wrapS=foe[p.wrapS]||U0,u.wrapT=foe[p.wrapT]||U0,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(f){l=!0;const p=new Blob([f],{type:o.mimeType});return c=a.createObjectURL(p),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(f){return new Promise(function(p,g){let _=p;!0===t.isImageBitmapLoader&&(_=function(y){const w=new N4(y);w.needsUpdate=!0,p(w)}),t.load(df.resolveURL(f,s.path),_,void 0,g)})}).then(function(f){return!0===l&&a.revokeObjectURL(c),f.userData.mimeType=o.mimeType||function lnt(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===t&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[Ts.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Ts.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[Ts.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new m5,tl.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new d2,tl.prototype.copy.call(c,i),c.color.copy(i.color),this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return xv}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=s.extensions||{},l=[];if(c[Ts.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const f=r[Ts.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else if(c[Ts.KHR_MATERIALS_UNLIT]){const f=r[Ts.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Dn(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}void 0!==f.baseColorTexture&&l.push(t.assignTexture(a,"map",f.baseColorTexture,No)),a.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,a.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==zl&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new jt(1,1),void 0!==s.normalTexture.scale)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return void 0!==s.occlusionTexture&&o!==zl&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==zl&&(a.emissive=(new Dn).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==zl&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,No)),Promise.all(l).then(function(){let f;return f=o===QH?r[Ts.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(f.name=s.name),Q5(f,s),t.associations.set(f,{materials:e}),s.extensions&&w_(r,f,s),f})}createUniqueName(e){const t=ba.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Ts.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return moe(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=cnt(l),f=r[u];if(f)o.push(f.promise);else{let p;p=l.extensions&&l.extensions[Ts.KHR_DRACO_MESH_COMPRESSION]?s(l):moe(new vr,l,t),r[u]={primitive:l,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?snt(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],f=[];for(let g=0,_=u.length;g<_;g++){const y=u[g],w=o[g];let C;const x=l[g];if(4===w.mode||5===w.mode||6===w.mode||void 0===w.mode)C=!0===s.isSkinnedMesh?new qee(y,x):new Ys(y,x),!0===C.isSkinnedMesh&&!C.geometry.attributes.skinWeight.normalized&&C.normalizeSkinWeights(),5===w.mode?C.geometry=Aoe(C.geometry,1):6===w.mode&&(C.geometry=Aoe(C.geometry,2));else if(1===w.mode)C=new _g(y,x);else if(3===w.mode)C=new Yd(y,x);else if(2===w.mode)C=new ite(y,x);else{if(0!==w.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);C=new gv(y,x)}Object.keys(C.geometry.morphAttributes).length>0&&ant(C,s),C.name=t.createUniqueName(s.name||"mesh_"+e),Q5(C,s),w.extensions&&w_(r,C,w),t.assignFinalMaterial(C),f.push(C)}for(let g=0,_=f.length;g<_;g++)t.associations.set(f[g],{meshes:e,primitives:g});if(1===f.length)return f[0];const p=new To;t.associations.set(p,{meshes:e});for(let g=0,_=f.length;g<_;g++)p.add(f[g]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new Wc(vx.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new f5(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Q5(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],c=[];for(let l=0,u=i.channels.length;l<u;l++){const f=i.channels[l],p=i.samplers[f.sampler],g=f.target,y=void 0!==i.parameters?i.parameters[p.input]:p.input,w=void 0!==i.parameters?i.parameters[p.output]:p.output;r.push(this.getDependency("node",g.node)),s.push(this.getDependency("accessor",y)),o.push(this.getDependency("accessor",w)),a.push(p),c.push(g)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const u=l[0],f=l[1],p=l[2],g=l[3],_=l[4],y=[];for(let C=0,x=u.length;C<x;C++){const M=u[C],T=f[C],I=p[C],F=g[C],P=_[C];if(void 0===M)continue;let R;switch(M.updateMatrix(),g6[P.path]){case g6.weights:R=Sv;break;case g6.rotation:R=_5;break;default:R=Ev}const k=M.name?M.name:M.uuid,W=void 0!==F.interpolation?rnt[F.interpolation]:j7,ie=[];g6[P.path]===g6.weights?M.traverse(function(me){me.morphTargetInfluences&&ie.push(me.name?me.name:me.uuid)}):ie.push(k);let Te=I.array;if(I.normalized){const me=$H(Te.constructor),Q=new Float32Array(Te.length);for(let he=0,K=Te.length;he<K;he++)Q[he]=Te[he]*me;Te=Q}for(let me=0,Q=ie.length;me<Q;me++){const he=new R(ie[me]+"."+g6[P.path],T.array,Te,W);"CUBICSPLINE"===F.interpolation&&(he.createInterpolant=function(ae){return new(this instanceof _5?int:uoe)(this.times,this.values,this.getValueSize()/3,ae)},he.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(he)}}return new Tv(i.name?i.name:"animation_"+e,void 0,y)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),Promise.all(a)}().then(function(a){let c;if(c=!0===s.isBone?new ck:a.length>1?new To:1===a.length?a[0]:new R2,c!==a[0])for(let l=0,u=a.length;l<u;l++)c.add(a[l]);if(s.name&&(c.userData.name=s.name,c.name=o),Q5(c,s),s.extensions&&w_(i,c,s),void 0!==s.matrix){const l=new Qi;l.fromArray(s.matrix),c.applyMatrix4(l)}else void 0!==s.translation&&c.position.fromArray(s.translation),void 0!==s.rotation&&c.quaternion.fromArray(s.rotation),void 0!==s.scale&&c.scale.fromArray(s.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=e,c})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new To;r.name&&(o.name=s.createUniqueName(r.name)),Q5(o,r),r.extensions&&w_(i,o,r);const a=r.nodes||[],c=[];for(let l=0,u=a.length;l<u;l++)c.push(goe(a[l],o,t,s));return Promise.all(c).then(function(){return s.associations=(u=>{const f=new Map;for(const[p,g]of s.associations)(p instanceof tl||p instanceof N4)&&f.set(p,g);return u.traverse(p=>{const g=s.associations.get(p);null!=g&&f.set(p,g)}),f})(o),o})}}function goe(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(void 0===r.skin)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const c=[];for(let l=0,u=o.joints.length;l<u;l++)c.push(i.getDependency("node",o.joints[l]));return Promise.all(c)}).then(function(a){return s.traverse(function(c){if(!c.isMesh)return;const l=[],u=[];for(let f=0,p=a.length;f<p;f++){const g=a[f];if(g){l.push(g);const _=new Qi;void 0!==o.inverseBindMatrices&&_.fromArray(o.inverseBindMatrices.array,16*f),u.push(_)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[f])}c.bind(new Kx(l,u),c.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let c=0,l=a.length;c<l;c++)o.push(goe(a[c],s,t,i))}return Promise.all(o)})}function moe(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=WH[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Q5(n,e),function hnt(n,e,t){const i=e.attributes,r=new a5;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new Ae(c[0],c[1],c[2]),new Ae(l[0],l[1],l[2])),a.normalized){const u=$H(y_[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new Ae,c=new Ae;for(let l=0,u=s.length;l<u;l++){const f=s[l];if(void 0!==f.POSITION){const p=t.json.accessors[f.POSITION],g=p.min,_=p.max;if(void 0!==g&&void 0!==_){if(c.setX(Math.max(Math.abs(g[0]),Math.abs(_[0]))),c.setY(Math.max(Math.abs(g[1]),Math.abs(_[1]))),c.setZ(Math.max(Math.abs(g[2]),Math.abs(_[2]))),p.normalized){const y=$H(y_[p.componentType]);c.multiplyScalar(y)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new h5;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function ont(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const f=e[l];if(void 0!==f.POSITION&&(i=!0),void 0!==f.NORMAL&&(r=!0),void 0!==f.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];if(i){const p=void 0!==f.POSITION?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=void 0!==f.NORMAL?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=void 0!==f.COLOR_0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;c.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const f=l[1],p=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}function Aoe(n,e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const fnt=/^[og]\s*(.+)?/,dnt=/^mtllib /,pnt=/^usemtl /,gnt=/^usemap /,voe=/\s+/,_oe=new Ae,qH=new Ae,yoe=new Ae,woe=new Ae,Y4=new Ae,FS=new Dn;function mnt(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(c){const l={index:"number"==typeof c?c:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return l.clone=this.clone.bind(l),l}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&"function"==typeof i.clone){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;_oe.fromArray(r,e),qH.fromArray(r,t),yoe.fromArray(r,i),Y4.subVectors(yoe,qH),woe.subVectors(_oe,qH),Y4.cross(woe),Y4.normalize(),s.push(Y4.x,Y4.y,Y4.z),s.push(Y4.x,Y4.y,Y4.z),s.push(Y4.x,Y4.y,Y4.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[i]&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,o,a,c,l){const u=this.vertices.length;let f=this.parseVertexIndex(e,u),p=this.parseVertexIndex(t,u),g=this.parseVertexIndex(i,u);if(this.addVertex(f,p,g),this.addColor(f,p,g),void 0!==a&&""!==a){const _=this.normals.length;f=this.parseNormalIndex(a,_),p=this.parseNormalIndex(c,_),g=this.parseNormalIndex(l,_),this.addNormal(f,p,g)}else this.addFaceNormal(f,p,g);if(void 0!==r&&""!==r){const _=this.uvs.length;f=this.parseUVIndex(r,_),p=this.parseUVIndex(s,_),g=this.parseUVIndex(o,_),this.addUV(f,p,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class Ant extends y5{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,o=new Gu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new mnt;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let r=[];for(let a=0,c=i.length;a<c;a++){const l=i[a].trimStart();if(0===l.length)continue;const u=l.charAt(0);if("#"!==u)if("v"===u){const f=l.split(voe);switch(f[0]){case"v":t.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?(FS.setRGB(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6])).convertSRGBToLinear(),t.colors.push(FS.r,FS.g,FS.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":t.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if("f"===u){const p=l.slice(1).trim().split(voe),g=[];for(let y=0,w=p.length;y<w;y++){const C=p[y];if(C.length>0){const x=C.split("/");g.push(x)}}const _=g[0];for(let y=1,w=g.length-1;y<w;y++){const C=g[y],x=g[y+1];t.addFace(_[0],C[0],x[0],_[1],C[1],x[1],_[2],C[2],x[2])}}else if("l"===u){const f=l.substring(1).trim().split(" ");let p=[];const g=[];if(-1===l.indexOf("/"))p=f;else for(let _=0,y=f.length;_<y;_++){const w=f[_].split("/");""!==w[0]&&p.push(w[0]),""!==w[1]&&g.push(w[1])}t.addLineGeometry(p,g)}else if("p"===u){const p=l.slice(1).trim().split(" ");t.addPointGeometry(p)}else if(null!==(r=fnt.exec(l))){const f=(" "+r[0].slice(1).trim()).slice(1);t.startObject(f)}else if(pnt.test(l))t.object.startMaterial(l.substring(7).trim(),t.materialLibraries);else if(dnt.test(l))t.materialLibraries.push(l.substring(7).trim());else if(gnt.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(r=l.split(" "),r.length>1){const p=r[1].trim().toLowerCase();t.object.smooth="0"!==p&&"off"!==p}else t.object.smooth=!0;const f=t.object.currentMaterial();f&&(f.smooth=t.object.smooth)}else{if("\0"===l)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+l+'"')}}t.finalize();const s=new To;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,c=t.objects.length;a<c;a++){const l=t.objects[a],u=l.geometry,f=l.materials,p="Line"===u.type,g="Points"===u.type;let _=!1;if(0===u.vertices.length)continue;const y=new vr;y.setAttribute("position",new ci(u.vertices,3)),u.normals.length>0&&y.setAttribute("normal",new ci(u.normals,3)),u.colors.length>0&&(_=!0,y.setAttribute("color",new ci(u.colors,3))),!0===u.hasUVIndices&&y.setAttribute("uv",new ci(u.uvs,2));const w=[];for(let x=0,M=f.length;x<M;x++){const T=f[x],I=T.name+"_"+T.smooth+"_"+_;let F=t.materials[I];if(null!==this.materials)if(F=this.materials.create(T.name),!p||!F||F instanceof d2){if(g&&F&&!(F instanceof m5)){const P=new m5({size:10,sizeAttenuation:!1});tl.prototype.copy.call(P,F),P.color.copy(F.color),P.map=F.map,F=P}}else{const P=new d2;tl.prototype.copy.call(P,F),P.color.copy(F.color),F=P}void 0===F&&(F=p?new d2:g?new m5({size:1,sizeAttenuation:!1}):new _te,F.name=T.name,F.flatShading=!T.smooth,F.vertexColors=_,t.materials[I]=F),w.push(F)}let C;if(w.length>1){for(let x=0,M=f.length;x<M;x++){const T=f[x];y.addGroup(T.groupStart,T.groupCount,x)}C=p?new _g(y,w):g?new gv(y,w):new Ys(y,w)}else C=p?new _g(y,w[0]):g?new gv(y,w[0]):new Ys(y,w[0]);C.name=l.name,s.add(C)}else if(t.vertices.length>0){const a=new m5({size:1,sizeAttenuation:!1}),c=new vr;c.setAttribute("position",new ci(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(c.setAttribute("color",new ci(t.colors,3)),a.vertexColors=!0);const l=new gv(c,a);s.add(l)}return s}}let C_=(()=>{class n{constructor(t,i,r,s){this.threeMaterialService=t,this.cookieService=i,this.httpClient=r,this.appService=s,this.textures={},this.cameraPerspective=!0,this.update$=new Je}swapCamera(){this.cameraPerspective=!this.cameraPerspective,this.update$.next(void 0)}filter(t,i){t.children.forEach(r=>{console.log(r.name,i),r.visible=!!r.name.includes(i)})}unionAll(t){let i=t[0];return t.forEach(r=>{void 0!==r&&(r.updateMatrix(),r!==i&&(i=Za.union(i,r)))}),i}flatShapeCross(t,i,r){const s=this.flatShape(t,i,r,i);return this.rotateAroundAxis(s,yi(-90),Ho.blue),this.rotateAroundAxis(s,yi(-90),Ho.red),s}flatShape(t,i=0,r=[gn.insulation],s){if(t.length<3)return;const o=new lf,a=t[0];o.moveTo(0,0),t.forEach(p=>{o.lineTo(p[0]-a[0],p[1]-a[1])}),o.lineTo(0,0);const c={steps:2,depth:s,bevelEnabled:!1},l=r.flatMap(p=>this.threeMaterialService.getMaterial(p,r.length>1)),u=new Cv(o,c),f=new Ys(u,l);return f.rotateX(Math.PI/2),f.receiveShadow=!0,f.castShadow=!0,this.translate(f,a[0],i,a[1]),f}extrudedShape(t){const{material:i,coords:r,xyz:s,depth:o}=t;if(r.length<3)return;const a=new lf,c=r[0];a.moveTo(0,0),r.forEach(p=>{a.lineTo(p[0]-c[0],p[1]-c[1])}),a.lineTo(0,0);const u=new Cv(a,{steps:1,depth:o,bevelEnabled:!1}),f=new Ys(u,this.threeMaterialService.getMaterial(i));return f.receiveShadow=!0,f.castShadow=!0,this.translate(f,s[0],s[1],s[2]-o),f}translate(t,i,r,s){t.applyMatrix4((new Qi).makeTranslation(i,r,s))}createPane(t){const{material:i,coords:r,xyz:s}=t,o=new lf,a=r[0];o.moveTo(0,0),r.forEach(u=>{o.lineTo(u[0]-a[0],u[1]-a[1])}),o.lineTo(0,0);const c=new uM(o),l=new Ys(c,this.threeMaterialService.getMaterial(i)[0]);return this.translate(l,s[0],s[1],s[2]),l}createBox(t){const{material:i,whd:r,xyz:s}=t,[o,a,c]=r,[l,u,f]=s||[0,0,0],p=new Q0(o,a,c),g=new Ys(p,this.threeMaterialService.getMaterial(i));return g.position.set(o/2+l,a/2+u,c/2+f),g.castShadow=!0,g.receiveShadow=!0,g}createCube(t){const{material:i,whd:r,xyz:s}=t,[o,a,c]=r,[l,u,f]=s||[0,0,0],g=this.flatShape([[0,0],[o,0],[o,c],[0,c]],0,[i],a);return g.position.set(l,u+a,f),g.castShadow=!0,g.receiveShadow=!0,g}importGLTF(t,i){(new Ptt).load(`/assets/models/${t}`,s=>{const o=s.scene;o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=t,i(o)})}importOBJ(t,i,r){(new Ant).load(`/assets/models/${i}`,o=>{o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=i,r(o)})}basicGround(t,i){const s=new y3(100,100,1,1),o=this.threeMaterialService.getMaterial(gn.whiteWood),a=new Ys(s,o[0]);a.position.set(0,i,0),a.rotateX(-Math.PI/2),a.receiveShadow=!0,t.add(a)}rotateAroundAxis(t,i,r=Ho.green,s=new Ae(0,0,0)){var o=new B2;o.setFromAxisAngle((n=>{switch(n){case Ho.x:return new Ae(1,0,0);case Ho.y:return new Ae(0,1,0);case Ho.z:return new Ae(0,0,1);case Ho.red:return new Ae(1,0,0);case Ho.green:return new Ae(0,1,0);case Ho.blue:return new Ae(0,0,1)}})(r),i),t.applyQuaternion(o),t.position.sub(s),t.position.applyQuaternion(o),t.position.add(s)}}return n.\u0275fac=function(t){return new(t||n)(Xe(TS),Xe(R4),Xe($h),Xe(Mo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vnt=["rendererContainer"];var Fr=(()=>(function(n){n.East="East",n.West="West",n.North="North",n.South="South",n.Top="Top",n.Bottom="Bottom"}(Fr||(Fr={})),Fr))();const Coe={[Fr.North]:0,[Fr.West]:90,[Fr.South]:180,[Fr.East]:270};let boe=(()=>{class n{constructor(t,i,r,s,o,a){this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.subscriptions=[],this.modelName="base",this.resize$=new no(void 0),this.renderer=new Hee({antialias:!0,alpha:!0}),this.scene=new zee,this.subModels={},this.animations={},this.house$=this.houseService.house$,this.animationDuration=1.5,this.clipBox=new ktt,this.cameraMargin=2}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer.unobserve(this.host.nativeElement),this.gui.destroy()}AfterViewInitCallback(){}OnSectionChangeCallback(){}defaultCamera(){this.camera.position.set(10,10,10),this.controls.target.set(1,1,1)}loadManager(){}ngAfterViewInit(){this.house=this.house$.value,this.cross=this.house.cross,this.construction=this.house.construction,this.keys.forEach(t=>{this.subModels[t]=[],this.animations[t]=Ku.timeline()}),this.createScene(),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.subscriptions.push(this.appService.floor$.subscribe(t=>{this.floor=t,this.filterOnFloor()}),this.clipBox.onChange$.subscribe(()=>{this.drawAndClip()}),this.threeService.update$.subscribe(()=>{this.onUpdate()}),this.appService.states$.subscribe(t=>{this.clipBox.states(t),this.setVisibility(t,this.animationDuration),this.drawAndClip()}),this.resize$.subscribe(()=>{this.onResize()}),this.appService.fullscreen$.subscribe(t=>{this.onResize(),this.controls.enableZoom=t}),this.appService.tag$.subscribe(()=>{this.tag=this.appService.tag$.value}),this.appService.scroll$.subscribe(()=>{const t=this.appService.scroll$.value;this.section!==t.section&&(this.section=t.section,this.OnSectionChangeCallback())})),this.initDraw(),Lv.onError=function(t){console.log("There was an error loading "+t)}}filterOnFloor(){const t=r=>{r.children.forEach(s=>{i(s),s instanceof To&&t(s)})},i=r=>{const s=r.userData.floor;s&&(r.visible=s===tt.all||this.floor===tt.top||s===this.floor)};t(this.scene)}clearScene(){console.log("clearScene");try{this.scene.children.forEach(t=>{!0===t.userData.clipped&&this.scene.remove(t)})}catch(t){console.log(t)}}env(){(new mtt).setPath("assets/").load("scythian_tombs_2_4k.hdr",(t,i)=>{const r=new ek(this.renderer),s=r.fromEquirectangular(t);r.compileCubemapShader(),this.threeMaterialService.envTexture=s.texture,this.scene.background=this.threeMaterialService.envTexture})}onUpdate(){this.setCamera()}initDraw(){this.scene.add(this.clipBox);const t=Object.values(this.cross.elevations),i=this.cookieService.get(`${this.modelName}_clip-box`);if(""!==i){const r=JSON.parse(i);this.clipBox.setCookie(r)}else this.clipBox.height=Math.max(...t)-Math.min(...t),this.clipBox.xyz[1]=Math.min(...t);this.clipBox.enabled&&this.clipBox.drawBox(),this.AfterViewInitCallback(),this.scene.traverse(r=>{r.isMesh&&(r.castShadow=!0)}),this.drawAndClip(),this.filterOnFloor()}drawAndClip(){const t=this.appService.states$.value,i=this.clipBox.box.clone();this.clipBox.enabled&&(this.clearScene(),this.clipBox.box.getWorldPosition(i.position)),Object.values(this.keys).forEach(r=>{this.subModels[r].forEach(s=>{if(this.clipBox.enabled){try{this.clipBox.box.updateMatrixWorld(!0),s instanceof Ys?s=this.clip(s,i):s instanceof To?s=this.clipGroup(s,i):console.log(s)}catch(o){console.log(o)}this.scaleFromSomewhere(r,s),s.userData.clipped=!0}this.scene.add(s)}),this.animations[r].progress(!0===t[r]?0:1)})}onResize(){const t=this.host.nativeElement.getBoundingClientRect(),i=t.height,r=t.width;this.camera&&this.setCamera(),this.renderer.setSize(r,i),this.composer.setSize(r,i)}debug(t){const i=Y2.debug;(t=t.clone()).material=new Ca({color:65280,opacity:.5,transparent:!0,side:2,wireframe:!0}),this.add(i,[t]),this.scaleFromSomewhere(i,t,.5)}animate(){window.requestAnimationFrame(()=>this.animate()),this.clipBox&&!this.controlsAreActive&&this.clipBox.onMouseOver(this.camera,this.renderer,()=>{this.cookieService.set(`${this.modelName}_clip-box`,JSON.stringify({xyz:this.clipBox.xyz,height:this.clipBox.height,width:this.clipBox.width,depth:this.clipBox.depth}))},()=>{this.controls.enableRotate=!1,this.renderer.domElement.style.cursor="move"},()=>{this.controls.enableRotate=!0,this.renderer.domElement.style.cursor="auto"}),this.renderer.render(this.scene,this.camera)}setCamera(){const t=this.host.nativeElement.getBoundingClientRect(),s=t.width/t.height;if(this.threeService.cameraPerspective)this.camera=new Wc(50,s,.1,1e3);else{const o=Math.max(this.house.houseWidth,this.house.houseLength)+2*this.cameraMargin,a=o/s;this.camera=new f5(-o/2,o/2,a/2,-a/2,-1e3,1e3)}if(this.setControls(),window.camera=this.camera,this.threeService.cameraPerspective){this.orbitControlsCookie=this.cookieService.get(`${this.modelName}_orbitControls`);try{if(""!==this.orbitControlsCookie){const o=JSON.parse(this.orbitControlsCookie)[0];this.camera.matrix.fromArray(o.camera),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.controls.target.fromArray(o.target)}else this.defaultCamera()}catch(o){console.error(o),this.defaultCamera()}}else this.orthographicCameraSnap(Fr.North,!1);this.controls.update()}setControls(){this.controls=new gtt(this.camera,this.renderer.domElement),window.control=this.controls,this.subscriptions.push(Tc(this.controls,"change").pipe(ab(1e3)).subscribe(t=>{if(!this.threeService.cameraPerspective)return;const i=JSON.stringify([{camera:this.camera.matrix.toArray(),target:this.controls.target.toArray()}]);this.cookieService.set(`${this.modelName}_orbitControls`,i)})),this.controls.addEventListener("start",t=>{this.controlsAreActive=!0,this.cameraAnimation&&this.cameraAnimation.kill(),this.cameraZoomAnimation&&this.cameraZoomAnimation.kill(),this.cameraTargetAnimation&&this.cameraTargetAnimation.kill()}),this.controls.addEventListener("end",t=>{this.controlsAreActive=!1,this.orthographicCameraSnap()})}orthographicCameraSnap(t,i=!1){const r=this.camera;if(this.threeService.cameraPerspective)return;const s=this.house.houseWidth,o=this.house.houseLength,a=this.cross.elevations[Dt.topOutside];if(void 0===t){i=!0;const[p,g]=function xOe(n,e,t=3){const r=Math.atan2(e.y-n.y,Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.z-n.z,2)))*(180/Math.PI);let o=Math.atan2(e.x-n.x,e.z-n.z)*(180/Math.PI);return o<0&&(o=360+o),[An(-r,t),An(o,t)]}(r.position,this.controls.target),_=(w,C)=>{const x=Coe[C];return w>315&&(w-=360),w<x+45&&w>x-45},y=(w,C,x,M)=>{const T=Coe[C];return w>315&&(w-=360),Math.abs(w-T)<=10?C:w-T>0?M:x};p>45?t=Fr.Top:_(g,Fr.North)?t=Fr.North:_(g,Fr.West)?t=Fr.West:_(g,Fr.South)?t=Fr.South:_(g,Fr.East)&&(t=Fr.East),this.cameraViewSide===t&&(t===Fr.East?t=y(g,Fr.East,Fr.South,Fr.North):t===Fr.South?t=y(g,Fr.South,Fr.West,Fr.East):t===Fr.West?t=y(g,Fr.West,Fr.North,Fr.South):t===Fr.North&&(t=y(g,Fr.North,Fr.East,Fr.West))),this.cameraViewSide=t}let c={x:0,y:0,z:0};t==Fr.North?c={x:s/2,y:a/2,z:0*o}:t==Fr.West?c={x:0*s,y:a/2,z:o/2}:t==Fr.East?c={x:s/1,y:a/2,z:o/2}:t==Fr.South?c={x:s/2,y:a/2,z:o/1}:t==Fr.Top&&(c={x:s/2,y:a/1,z:o/2+.01});const l=([Fr.North,Fr.South].includes(t)?s:o)+2*this.cameraMargin,u=(r.right-r.left)/l,f={x:s/2,y:a/2,z:o/2};i?(this.cameraAnimation=Ku.to(r.position,{duration:1,...c,onUpdate:()=>this.controls.update()}),this.cameraZoomAnimation=Ku.to(r,{duration:1,zoom:(r.right-r.left)/l,onUpdate:()=>r.updateProjectionMatrix()}),this.cameraTargetAnimation=Ku.to(this.controls.target,{duration:1,...f,onUpdate:()=>this.controls.update()}),this.cameraAnimation.play(),this.cameraZoomAnimation.play(),this.cameraTargetAnimation.play()):(r.position.set(c.x,c.y,c.z),r.zoom=u,this.controls.target.set(f.x,f.y,f.z),r.updateProjectionMatrix(),this.controls.update())}initSky(){const t=new RS;t.scale.setScalar(45e4),this.scene.add(t);const i=new Ae,r={turbidity:10,rayleigh:1,mieCoefficient:.008,mieDirectionalG:.68,elevation:20,azimuth:13,exposure:this.renderer.toneMappingExposure},s=()=>{const a=t.material.uniforms;a.turbidity.value=r.turbidity,a.rayleigh.value=r.rayleigh,a.mieCoefficient.value=r.mieCoefficient,a.mieDirectionalG.value=r.mieDirectionalG;const c=vx.degToRad(90-r.elevation),l=vx.degToRad(r.azimuth);i.setFromSphericalCoords(1,c,l),a.sunPosition.value.copy(i),this.renderer.toneMappingExposure=r.exposure,this.renderer.render(this.scene,this.camera)},o=this.gui.addFolder("Sky");o.add(r,"turbidity",0,20,.1).onChange(s),o.add(r,"rayleigh",0,4,.001).onChange(s),o.add(r,"mieCoefficient",0,.1,.001).onChange(s),o.add(r,"mieDirectionalG",0,1,.001).onChange(s),o.add(r,"elevation",0,90,.1).onChange(s),o.add(r,"azimuth",-180,180,.1).onChange(s),o.add(r,"exposure",0,1,1e-4).onChange(s),s(),o.close()}lights(t=1){const i=new xte(16777215,7829367,1.1*t);i.position.set(0,50,35),this.scene.add(i);const r=this.gui.addFolder("Lighting");r.close(),r.add(i,"intensity",0,3,.01);const s=new Hk(16777215,.4*t);s.position.set(15,30,45),s.target.position.set(0,0,0),s.castShadow=!0,s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.near=.5,s.shadow.camera.far=5e3,s.shadow.bias=-1e-4,s.shadow.camera.top=30,s.shadow.camera.bottom=-30,s.shadow.camera.left=30,s.shadow.camera.right=-30,this.initSky(),this.scene.add(s)}sky(){scene.fog=new Qx(scene.background,10,100);const t=document.getElementById("vertexShader").textContent,i=document.getElementById("fragmentShader").textContent,r={topColor:{value:new Dn(30532)},bottomColor:{value:new Dn(16729167)},offset:{value:33},exponent:{value:.6}},s=new bv(400,32,15),o=new F2({uniforms:r,vertexShader:t,fragmentShader:i,side:1}),a=new Ys(s,o);this.scene.add(a)}createScene(){this.setCamera(),this.renderer.shadowMap.enabled=!0,this.renderer.toneMapping=4,this.renderer.toneMappingExposure=.8,this.renderer.localClippingEnabled=!0,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),window.camera=this.camera,window.renderer=this.renderer,window.scene=this.scene,this.composer=new Ttt(this.renderer);const t=window.innerWidth,i=window.innerHeight,r=new Dtt(this.scene,this.camera,t,i);r.kernelRadius=.6,r.minDistance=1e-4,r.maxDistance=.001,this.composer.addPass(r),this.gui=new VH,this.gui.close(),this.animate(),this.rendererContainer.nativeElement.querySelector(".loader").remove(),this.gui.hide()}yoyo(t){setTimeout(()=>{this.animations[t].yoyo(!0).repeat(-1).repeatDelay(.3).play()},1e3)}add(t,i,r=!1){i.forEach(s=>{s.userData.key=t,this.forEachMeshOrGroup(s,o=>{o.geometry&&(o.geometry.userData.key=t)})}),this.subModels[t].push(...i.filter(s=>s)),r&&i.forEach(s=>this.scene.add(s))}forEachMeshOrGroup(t,i){t instanceof Ys&&i(t),t instanceof To&&t.children.forEach(r=>this.forEachMeshOrGroup(r,i))}clip(t,i){return t.updateMatrix(),t.updateWorldMatrix(!0,!0),i.updateMatrix(),i.updateWorldMatrix(!0,!0),Za.subtract(t,i)}intersect(t,i){return t.updateMatrix(),i.updateMatrix(),Za.intersect(t,i)}intersectGroup(t,i){const r=t.clone();return r.children=t.children.map(o=>o instanceof Ys?this.intersect(o,i):o instanceof To?this.intersectGroup(o,i):void 0),r}clipGroup(t,i){const r=t.clone();return r.children=t.children.map(o=>o instanceof Ys?this.clip(o,i):o instanceof To?this.clipGroup(o,i):void 0),r}mergeAll(t){let i=t[0];return t.forEach((r,s)=>{0!==s&&(i=this.merge(i,r))}),i}merge(t,i){return t.updateMatrix(),i.updateMatrix(),Za.union(t,i)}translate(t,i,r,s){t.applyMatrix4((new Qi).makeTranslation(i,r,s))}scale(t,i,r,s){t.applyMatrix4((new Qi).scale(new Ae(i,r,s)))}pauseAll(){this.keys.forEach(t=>{this.animations[t].pause()})}debugMeasureBlock(t=1,i=1,r=1,s=1){const o=this.threeService.createCube({material:gn.floor,whd:[s,s,s],xyz:[t,i,r]});this.scene.add(o)}setVisibility(t,i=1.2){this.pauseAll(),this.keys.forEach(r=>{const s=this.animations[r],o=!0===t[r],a=1!==s.progress(),c=1===s.progress();o?c||0===i?s.timeScale(1).reverse():Ku.to(s,{progress:0,duration:i}):a||0===i?s.timeScale(2).play():Ku.to(s,{progress:1,duration:i})})}group(t){const i=new To;return t.forEach(r=>{r&&i.add(r)}),i}scaleZInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{z:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleYInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{y:0,duration:r,ease:s}),this.animations[t].to(i.scale,{y:0,z:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleXInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{x:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleFromSomewhere(t,i,r=.3,s="linear",o=!1){this.animations[t].to(i.position,{y:o?10:-10,duration:r,ease:s}),this.animations[t].to(i,{visible:!1,duration:0})}}return n.\u0275fac=function(t){return new(t||n)(U(C_),U(Lo),U(dn),U(Mo),U(R4),U(TS))},n.\u0275cmp=Bn({type:n,selectors:[["app-three-house-base"]],viewQuery:function(t,i){if(1&t&&Xs(vnt,5),2&t){let r;Di(r=Ii())&&(i.rendererContainer=r.first)}},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),_nt=(()=>{class n extends boe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.modelName="Construction3D",this.keys=Object.values(Bi),this.demoDepth=3,this.joistFlangeHeight=.04,this.window=new htt({}),this.windowRoughOSBClip=this.threeService.createCube({material:gn.unknown,whd:[this.window.roughWidthOSB-(this.window.gap+this.window.thicknessOSB),this.window.roughHeightOSB,2],xyz:[0,this.window.roughBottomOSB,-1]}),this.windowRoughClip=this.threeService.createCube({material:gn.unknown,whd:[this.window.roughWidth-this.window.gap,this.window.roughHeight,2],xyz:[0,this.window.roughBottom,-1]}),this.offsetDistanceBend=(c,l,u=!1)=>{const f=this.construction.getRoofPoint(l);let p=0,g=0;[Dt.bendInside,Dt.bendOutside].includes(l)&&(p=(this.lowerAngle-this.upperAngle)/2,g=this.edgeAngle+90),[Dt.topInside,Dt.topOutside].includes(l)&&(p=0,g=90),[Dt.lowestInside,Dt.lowestOutside].includes(l)&&(p=0,g=this.lowerAngle+180),[Dt.groundFloorInside,Dt.groundFloorOutside,Dt.wallInside,Dt.wallOutside].includes(l)&&(p=0,g=180);let _=c/Math.cos(yi(p));return u&&(_=c),io(g,_,f)},this.appService.setState([Bd.clipBoxShow,Bd.clipBoxEnabled],!1,!1,!0)}handleKeyboardEvent(t){"F4"===t.key&&(console.log("reset camera"),this.camera.position.set(10,10,10),this.camera.lookAt(0,0,0)),"1"===t.key&&this.focusCamera("in"),"2"===t.key&&this.focusCamera("out")}AfterViewInitCallback(){this.threeService.basicGround(this.scene,-3),this.thickness=this.construction.thickness,this.crossDepth=this.construction.crossDepth,this.amountOfStuds=6,this.outerWallHeight=this.cross.outerWallHeight,this.innerWallHeight=this.cross.innerWallHeight,this.solePlateThickness=.03,this.demoWith=this.amountOfStuds*this.house.studDistance,this.studDistance=this.house.studDistance,this.ceilingHeight=this.cross.ceilingHeight,this.floorThickness=this.cross.topFloorThickness,this.floorLVLThickness=.07,this.joistFlangeWidth=.06,this.center=new Ae(this.demoWith/2,this.outerWallHeight/3,this.crossDepth[pn.facade]/2),this.lowerAngle=An(p1(this.construction.getRoofPoint(Dt.lowestOutside),this.construction.getRoofPoint(Dt.bendOutside))-90,3),this.upperAngle=An(p1(this.construction.getRoofPoint(Dt.bendOutside),this.construction.getRoofPoint(Dt.topOutside))-90,3),this.edgeAngle=180-((180-this.lowerAngle+this.upperAngle)/2-this.upperAngle),this.lights(1),this.demoDepth=this.construction.getRoofPoint(Dt.topOutside)[0],this.buildFoundation(),this.buildICF(),this.buildGroundFloor(),this.buildTapes(),this.buildWindowOSB(),this.buildOSB(),this.buildOSBRoof(),this.buildTopFloor(),this.buildFloorLVL(),this.buildTopFloorOSB(),this.buildSole(),this.buildJoist(),this.buildRoofJoists(),this.buildInsulation(),this.buildServiceInsulation(),this.buildServiceBeams(),this.buildOuterSheet(),this.buildSpace(),this.buildRoofSpace(),this.buildFacade(),this.buildGips(),this.buildRoofTiles(),this.createMirror(),this.importDude();const t=new Qk(.5);t.position.set(0,0,0),this.scene.add(t)}OnSectionChangeCallback(){[_t.constructionFoundation,_t.constructionCrawlerSpace].includes(this.section)?this.focusCamera("subGround"):[_t.constructionFloorLVL,_t.constructionRoof,_t.constructionWallOSB,_t.constructionWallTape,_t.constructionWallService,_t.constructionWallGips,_t.constructionFloor].includes(this.section)?this.focusCamera("in"):[_t.constructionWallSole,_t.constructionWallJoists,_t.constructionGroundFloor,_t.constructionWallInsulation,_t.constructionWallOuterSheet,_t.constructionWallSpace,_t.constructionWallFacade].includes(this.section)&&this.focusCamera("out")}focusCamera(t){var i=Ku.timeline();let s=this.center.z;["in"].includes(t)&&(s+=-10),["subGround"].includes(t)&&(s+=1),["out"].includes(t)&&(s+=10),this.pauseAll(),i.to(this.camera.position,{duration:.4,x:this.center.x-10,y:["subGround"].includes(t)?0:1.8,z:s,onUpdate:()=>{this.camera.lookAt(this.center.x,this.center.y,this.center.z)},onComplete:()=>{Ku.globalTimeline.play()}})}getRoofAndOffsetPoints(t){let i={};return Object.keys(Dt).forEach(r=>{i[r]=this.construction.getRoofPoint(r),i[`${r}Offset`]=this.offsetDistanceBend(t,r)}),i}getAngledProperties(t,i,r){const s=this.getRoofAndOffsetPoints(r),o=Xa(s[`${t}Offset`],s[`${i}Offset`]),a=p1(s[t],s[i]);return{totalWidth:o,angle:a,origin:this.useOppositeCorner(s[`${t}Offset`],r,a),rotation:[a-90,0,0]}}useOppositeCorner(t,i,r){const[s,o]=io(r-90,i,t);return[0,o,-s]}plotRoofPoints(){const t=-this.cross.roofPoints[Dt.wallInside][0];Object.entries(this.cross.roofPoints).map(([i,r])=>{if(!i.includes("Inside"))return;console.log(i);const s=new Qk(1);s.position.set(0,r[1],-r[0]-t),this.scene.add(s)})}scaleZInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{z:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleYInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{y:0,duration:r,ease:s}),this.animations[t].to(i.scale,{y:0,z:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleXInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{x:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}importDude(){this.threeService.importGLTF("Male_Standing.glb",t=>{this.scene.add(t),t.scale.set(.5,.5,.5),t.rotateY(yi(-110)),t.position.set(this.demoWith/2,this.cross.elevations[Mi.topFloor],-2)})}createMirror(){this.mirror=new utt(new y3(30,30),{color:new Dn(8355711),textureWidth:window.innerWidth*window.devicePixelRatio,textureHeight:window.innerHeight*window.devicePixelRatio}),this.mirror.visible=this.appService.states$.value[Bd.mirror],this.mirror.position.set(-2,0,-this.construction.getRoofPoint(Dt.topOutside)[0]),this.scene.add(this.mirror)}createJoist(t,i,r=.04,s=.005){const o=this.joistFlangeWidth,a=[{material:gn.pine,whd:[o,t,r],xyz:[0,0,0]},{material:gn.pine,whd:[o,t,r],xyz:[0,0,i-r]},{material:gn.osb,whd:[s,t,i-2*r],xyz:[o/2-s/2,0,r]}],c=new To;return a.forEach((l,u)=>{const f=this.threeService.createCube(l);c.add(f),2===u&&(f.material[0].color=new Dn(14277081))}),c}createCornerTape(t,i,r,s){const o=new To,a=this.threeService.createCube({material:gn.tape,whd:[s,t,r]});a.rotateX(yi(0)),this.translate(a,0,-t,0),o.add(a);const c=this.threeService.createCube({material:gn.tape,whd:[s,i,r]});return c.rotateX(yi(90)),this.translate(c,0,-i/2-r/2,-i/2+r/2),o.add(c),o}createIFCblock(t,i,r,s){const o=new To,a=this.threeService.createCube({material:gn.foam,whd:[i,r,s]}),c=this.threeService.createCube({material:gn.foam,whd:[i,r,s]});return this.translate(a,0,0,0),this.translate(c,0,0,t+s),o.add(a),o.add(c),this.scene.add(o),o}buildFoundation(){const t=Bi.foundation,c=this.threeService.createCube({material:gn.concrete,whd:[this.demoWith,.3,.4],xyz:[0,this.cross.elevations[Mi.crawlerFloor]-.3,this.crossDepth[pn.groundFloorEdge]-.4*.8]});this.add(t,[c]),this.animations[t].to(c.scale,{z:0,y:0,duration:.6,ease:"power3"}),this.animations[t].to(c,{visible:!1,duration:0})}buildRoofJoists(){const t=Bi.roofJoists;this.buildRoofHigherJoists(),this.buildRoofLowerJoists(),this.subModels[t].flatMap(r=>r.children).sort((r,s)=>r.position.x-s.position.x).forEach((r,s)=>{this.scaleZInOut(t,r,.1)}),this.buildRoofLVL()}buildRoofLowerJoists(){const t=Bi.roofJoists,s=(this.construction.getRoofPoint(Dt.wallInside),this.construction.getRoofPoint(Dt.wallInside),this.construction.getRoofPoint(Dt.wallOutside)),o=this.construction.getRoofPoint(Dt.bendInside),a=this.construction.getRoofPoint(Dt.bendOutside),c=this.thickness[pn.roofJoists],l=new To;this.add(t,[l]),l.rotateX(yi(this.lowerAngle)),this.translate(l,0,s[1],-s[0]);const u=Xa(s,a),f=[],p=-(90-p1(o,a)),g=new Uu(new Ae(0,0,1),0);f.push(g);let _=(new Qi).makeRotationX(yi(p));g.applyMatrix4(_.setPosition(new Ae(0,o[1],-o[0]))),this.threeService.createCube({whd:[this.demoDepth,this.cross.elevations[Dt.wallInside],this.thickness[pn.joists]],material:gn.unknown});const T=c-2*this.joistFlangeHeight-.1;for(let I of[...Array(this.amountOfStuds+1).keys()]){let F=I*this.studDistance-this.joistFlangeWidth/2;0===I&&(F=0);let P=this.createJoist(u+0,c);P.position.set(0,-0,0);const R=this.threeService.createCube({material:gn.pine,whd:[this.joistFlangeWidth,.5,T],xyz:[0,0,this.joistFlangeHeight+.05]});P.add(R);const k=this.threeService.createCube({material:gn.pine,whd:[this.joistFlangeWidth,.5,T],xyz:[0,u+0-.5,this.joistFlangeHeight+.05]});P.add(k),P.children.flatMap(W=>W.material).forEach(W=>{W.side=2,W.clippingPlanes=f,W.clipIntersection=!1,W.clipShadows=!0}),this.translate(P,F,0,0),l.add(P)}}buildRoofHigherJoists(){const t=Bi.roofJoists,i=this.construction.getRoofPoint(Dt.bendInside),r=this.construction.getRoofPoint(Dt.bendOutside),o=(this.construction.getRoofPoint(Dt.topInside),this.construction.getRoofPoint(Dt.topOutside)),a=new To;this.add(t,[a]);const c=p1(r,o)-90;a.rotateX(yi(c)),this.translate(a,0,r[1],-r[0]);const l=this.thickness[pn.roofJoists],u=Xa(r,o),f=[],p=new Uu(new Ae(0,0,1),o[0]-this.cross.roofRidgeWidth/2);f.push(p);const g=p1(i,r)-90,_=new Uu(new Ae(0,0,-1),0);f.push(_);let y=(new Qi).makeRotationX(yi(g));_.applyMatrix4(y.setPosition(new Ae(0,i[1],-i[0])));const T=l-2*this.joistFlangeHeight-.1;for(let I of[...Array(this.amountOfStuds+1).keys()]){let F=I*this.studDistance-this.joistFlangeWidth/2;0===I&&(F=0);const P=this.createJoist(u+2,l);P.position.set(0,-1,-l);const R=this.threeService.createCube({material:gn.pine,whd:[this.joistFlangeWidth,1.5,T],xyz:[0,0,this.joistFlangeHeight+.05]});P.add(R);const k=this.threeService.createCube({material:gn.pine,whd:[this.joistFlangeWidth,1.5,T],xyz:[0,u+1-.5,this.joistFlangeHeight+.05]});P.add(k),P.children.flatMap(W=>W.material).forEach(W=>{W.side=2,W.clippingPlanes=f,W.clipIntersection=!1,W.clipShadows=!0}),this.translate(P,F,0,0),a.add(P)}}buildICF(){const t=Bi.crawlerSpace,i=.2,c=this.cross.crawlerHeight,l=this.demoWith,p=Math.ceil(c/.3),g=Math.ceil(l/.6),_=this.cross.elevations[Mi.crawlerCeiling],y=_-c,w=this.crossDepth[pn.groundFloorEdge]-i,C=Number(`${p}${g+1}`),x=this.threeService.createCube({material:gn.concrete,whd:[this.demoWith,c,i]});this.translate(x,0,_-c,w),this.scene.add(x),this.animations[t].to(x.scale,{y:0,duration:1,ease:"Back.easeIn"}),this.animations[t].to(x.position,{y,ease:"Back.easeIn",duration:1},"<"),this.animations[t].to(x.scale,{z:0}),this.animations[t].to(x,{visible:!1,duration:0});for(let M of[...Array(p).keys()]){M=p-1-M;for(let T of[...Array(g+1).keys()]){T=g-T;const I=Number(`${M}${T}`);let P=.6*T+(M%2?-.3:0),R=y+.3*M,k=.6,W=.3;if(P<0&&(k=.3,P+=.3),P+k>l&&(k=l-P),R+W>_&&(W=_-R),0===k||0===W)continue;const ie=this.createIFCblock(i,k,W,.067);this.translate(ie,P,R,w-.067),this.add(t,[ie]);const Te=(C-I)/C,me=An(.02+.2*Math.pow(Te,4)+.4*Math.pow(Te,16));this.animations[t].to(ie.position,{y:0,x:0,duration:me,ease:"power3"}),this.animations[t].to(ie.children[0].position,{x:.5,z:i,duration:me,ease:"power3"}),this.animations[t].to(ie.scale,{z:0,x:0,duration:me})}}}buildTapes(){const t=Bi.tapes,i=.07,r=.01,s=1.2,a=.05,c=this.crossDepth[pn.serviceBeams]-r,l=Math.ceil(this.cross.innerWallHeight/s),u=Math.ceil(this.demoWith/2.4),f=this.createCornerTape(i,1*i,r,this.window.roughWidth-this.window.gap+i);f.scale.set(1,1,-1),this.translate(f,0,this.window.roughBottom+r,this.crossDepth[pn.serviceBeams]),this.add(t,[f]),this.scaleXInOut(t,f,a);const p=this.createCornerTape(i,1*i,r,this.window.roughWidth-this.window.gap+i);p.scale.set(1,-1,-1),this.translate(p,0,this.window.roughTop-r,this.crossDepth[pn.serviceBeams]),this.add(t,[p]),this.scaleXInOut(t,p,a);const g=this.createCornerTape(i,1*i,r,this.window.roughTop-this.window.roughBottom+2*i-2*r);g.rotateZ(yi(90)),g.scale.set(1,1,-1),this.translate(g,this.window.roughWidth-this.window.gap-r,this.window.roughBottom-i+r,this.crossDepth[pn.serviceBeams]),this.add(t,[g]),this.scaleXInOut(t,g,a);const _=this.createCornerTape(i,1*i,r,this.thickness[pn.joists]+this.thickness[pn.osb]);_.rotateY(yi(-90)),_.scale.set(1,-1,-1),this.translate(_,this.window.roughWidth-this.window.gap-r,this.window.roughBottom,this.crossDepth[pn.serviceBeams]),this.add(t,[_]),this.scaleXInOut(t,_,a);const y=this.createCornerTape(i,1*i,r,this.thickness[pn.joists]+this.thickness[pn.osb]);y.rotateY(yi(-90)),y.scale.set(1,1,-1),this.translate(y,this.window.roughWidth-this.window.gap-r,this.window.roughTop,this.crossDepth[pn.serviceBeams]),this.add(t,[y]),this.scaleXInOut(t,y,a);for(let w of[...Array(l).keys()]){const C=s*w,x=this.clip(this.threeService.createCube({material:gn.tape,whd:[this.demoWith,i,r],xyz:[0,C,c]}),this.windowRoughOSBClip);this.add(t,[x]),this.scaleXInOut(t,x,a);for(let M of[...Array(u).keys()]){const T=w%2?2.4*M:1.2+2.4*M;if(T+i>this.demoWith)continue;let I=s;C+s>this.cross.innerWallHeight&&(I=this.cross.innerWallHeight-C);const F=this.clip(this.threeService.createCube({material:gn.tape,whd:[i,I,r],xyz:[T,C,c]}),this.windowRoughOSBClip);this.add(t,[F]),this.scaleYInOut(t,F,a)}}}buildRoofTapes(){}buildInsulation(){const t=Bi.insulation,i=this.cross.elevations;let o=this.studDistance-this.joistFlangeWidth/2;const a=gn.insulation,c=.95*this.thickness[pn.joists],u=.95*this.thickness[pn.roofJoists];console.log(this.cross.roofPoints[Dt.bendInside],[0,i[Dt.wallInside]]),[{desc:"wall",t:this.thickness[pn.joists],w:o,coords:[[0,2*this.solePlateThickness],[0,i[Dt.wallInside]],[c,i[Dt.wallInside]],[c,2*this.solePlateThickness]]},{desc:"roofLower",t:this.thickness[pn.roofJoists],w:o,coords:[this.offsetDistanceBend(0,Dt.wallInside,!0),this.offsetDistanceBend(0,Dt.bendInside,!0),this.offsetDistanceBend(u,Dt.bendInside,!0),this.offsetDistanceBend(u,Dt.wallInside,!0)].map(f=>[-f[0],f[1]])},{desc:"roofHigher",t:this.thickness[pn.roofJoists],w:o,coords:[this.offsetDistanceBend(0,Dt.bendInside,!0),this.offsetDistanceBend(0,Dt.topInside,!0),this.offsetDistanceBend(u,Dt.topInside,!0),this.offsetDistanceBend(u,Dt.bendInside,!0)].map(f=>[-f[0],f[1]])}].forEach(f=>{for(let p of[...Array(this.amountOfStuds).keys()]){let g=p*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===p&&(g=this.joistFlangeWidth,f.w-=this.joistFlangeWidth/2);let _=this.threeService.flatShapeCross(f.coords,f.w,[a]);this.translate(_,g,0,0),"wall"===f.desc&&(_=this.clip(_,this.windowRoughOSBClip)),this.add(t,[_])}}),this.animations[t].to(this.subModels[t].map(f=>f.position),{z:2,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(f=>f.scale),{x:0,z:0,ease:"power3",stagger:{each:.4},delay:.5},"<"),this.animations[t].to(this.subModels[t].map(f=>f),{visible:!1,duration:0})}buildJoist(){const t=Bi.joists,r=this.thickness[pn.joists],s=this.cross.elevations[Mi.groundFloor]+this.solePlateThickness,o=this.construction.getRoofPoint(Dt.wallInside)[1],a=new To;this.translate(a,0,s,this.crossDepth[pn.joists]),this.add(t,[a]),this.animations[t].to(a.rotation,{x:yi(-90),duration:.8});const c=this.thickness[pn.osb],l=this.construction.thickness[pn.joists],u=this.amountOfStuds+2;for(let f of[...Array(u).keys()]){let p=o-s-2*this.solePlateThickness,g=this.solePlateThickness,_=f*this.studDistance-this.joistFlangeWidth/2;if(f===u-1&&(_=this.window.roughWidth-this.window.gap+this.window.thicknessOSB),0===f&&(_=0),_<this.window.roughWidth-this.window.gap){g=l+this.window.roughTopOSB-this.solePlateThickness,p=p+this.solePlateThickness-g;const w=this.createJoist(p,this.construction.thickness[pn.joists]);this.translate(w,_,g,0),a.add(w),this.scaleZInOut(t,w,.2),g=this.solePlateThickness,p=this.window.roughBottom-2*this.solePlateThickness-c}const y=this.createJoist(p,l);this.translate(y,_,g,0),a.add(y),this.scaleZInOut(t,y,.2)}for(let f of[...Array(2).keys()]){let g=l+this.window.roughTopOSB-this.solePlateThickness,_=this.joistFlangeWidth;0===f&&(_=l);const y=this.createJoist(this.window.roughWidth-this.window.gap+this.window.thicknessOSB,l);y.rotation.set(yi(90),0,yi(-90)),this.translate(y,0,g,_),a.add(y),this.scaleZInOut(t,y,.2)}for(let f of[0,1]){const p=this.threeService.createCube({material:gn.pine,whd:[this.demoWith,this.solePlateThickness,r]});this.translate(p,0,0===f?0:o-2*this.solePlateThickness,0),a.add(p),this.scaleZInOut(t,p,.2)}}buildTopFloor(){const t=Bi.topFloorJoists,i=new To,r=this.floorThickness,s=this.crossDepth[pn.serviceBeams]-this.floorLVLThickness,o=this.demoDepth+s,a=o+s;for(let c of[...Array(this.amountOfStuds+1).keys()]){let l=c*this.studDistance-this.joistFlangeWidth/2;0===c&&(l=0);const u=this.createJoist(o,r);u.rotateX(yi(-90)),this.translate(u,l,this.ceilingHeight,s),i.add(u),this.animations[t].to(u.position,{z:-a,duration:.2,ease:"power3"},">"),this.animations[t].to(u.scale,{z:0,x:0,duration:.2},"<"),this.animations[t].to(u,{visible:!1,duration:0})}this.add(t,[i])}buildTopFloorOSB(){this.buildRoofTapes();const t=Bi.topFloorOSB;this.brickPattern(t,[0,this.cross.elevations[Mi.topFloor],this.crossDepth[pn.serviceBeams]],2.4,1.2,this.thickness[pn.osb],this.demoDepth,this.demoWith,[-90,0,0],gn.osb,(u,f,p,g,_,y)=>{this.scaleZInOut(t,u,.3+(f+p)/y*.2)})}brickPattern(t,i,r,s,o,a,c,l,u,f,p){const g=new To,_=Math.ceil(c/r),y=Math.ceil(a/s),w=r/2;for(let C of[...Array(y+1).keys()])for(let x of[...Array(_+1).keys()]){let T=(_-x)*r+(C%2?-w:0),I=(y-C)*s,F=0,P=s,R=r,k=!1;const W=Number(`${C+1}${x+1}`);if(T<0&&(R=w,T=0),I+s>a&&(P=a-I,k=!0),T+r>=c&&(R=c-T,k=!0),I>=a||T>=c)continue;let ie=this.threeService.createCube({material:u,whd:[R,P,o]});this.translate(ie,T,I,F),p&&(ie=this.clip(ie,p)),g.add(ie),f(ie,C,x,R,P,W,k)}g.rotation.set(yi(l[0]),yi(l[1]),yi(l[2])),this.translate(g,i[0],i[1],i[2]),this.add(t,[g])}buildRoofTiles(){const t=Bi.roofTiles,l=this.thickness[pn.outerSheet]+this.thickness[pn.space]+.02,u=this.getRoofAndOffsetPoints(l);this.threeService.importGLTF("rooftile.glb",f=>{f.scale.set(1,1,1),[[Dt.lowestOutside,Dt.bendOutside],[Dt.bendOutside,Dt.topOutside]].map((g,_)=>{const{totalWidth:y,rotation:C,angle:x}=this.getAngledProperties(g[0],g[1],l),M=Math.ceil(y/.308);for(let T of[...Array(M).keys()]){const I=Math.ceil(this.demoWith/.204);for(let F of[...Array(I).keys()]){const P=.204*F,R=.308*T,k=f.clone();k.rotateX(yi(C[0]+90+-4)),this.add(t,[k]);const[W,ie]=io(x,R,u[`${g[0]}Offset`]);k.position.set(P,ie+.01,-W)}}}),this.animations[t].to(this.subModels[t].map(g=>g.position),{z:2,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(g=>g.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3"),this.subModels[t].forEach(g=>this.scene.add(g)),this.animations[t].progress(!0===this.appService.states$.value[t]?0:1)})}buildOSBRoof(){const t=Bi.roofOSB,s=this.demoWith,o=this.thickness[pn.osb],a=(x,M,T,I,F,P)=>{this.animations[t].to(x.scale,{x:0,y:0,z:0,duration:.3}),this.animations[t].to(x,{visible:!1,duration:0})},c=this.construction.getRoofPoint(Dt.bendInside),l=this.construction.getRoofPoint(Dt.topInside),u=[0,c[1],-c[0]-this.crossDepth[pn.osb]-o],f=Xa(c,l),p=[p1(c,l)-90,0,0];this.brickPattern(t,u,2.4,1.2,o,f,s,p,gn.osb,a);const g=this.construction.getRoofPoint(Dt.wallInside),_=this.construction.getRoofPoint(Dt.bendInside),y=[0,g[1],-g[0]-this.crossDepth[pn.osb]-o],w=Xa(g,_),C=[p1(g,_)-90,0,0];this.brickPattern(t,y,2.4,1.2,o,w,s,C,gn.osb,a)}buildOSB(){const t=Bi.osbWall,s=this.construction.getRoofPoint(Dt.wallInside)[1],a=this.thickness[pn.osb];let f=0,p=0,g=0;this.brickPattern(t,[0,this.cross.elevations[Mi.groundFloor],this.crossDepth[pn.osb]-a],2.4,1.2,a,s,this.demoWith,[0,0,0],gn.osb,(_,y,w,C,x,M)=>{const T=.3+(y+w)/M*.2;this.animations[t].to(_.rotation,{x:yi(90),duration:T});const I=1.05*C<2.4,F=1.05*x<1.2;this.animations[t].to(_.position,{x:(I?2.4:0)+C/2,y:a*f,z:-(.6+(F?1.2:0)+x/2),duration:T},"<"),I?g+=1:F?p+=1:f+=1},this.windowRoughOSBClip),this.animations[t].to(this.subModels[t].flatMap(_=>_.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}buildWindowOSB(){const t=Bi.osbWall,i=this.thickness[pn.osb],r=this.crossDepth[pn.serviceBeams],s=this.crossDepth[pn.outerSheet]-r,o=this.threeService.createCube({material:gn.osb,whd:[this.window.roughWidth-this.window.gap+i,i,s],xyz:[0,this.window.roughBottomOSB,r]});this.add(t,[o]);const a=this.threeService.createCube({material:gn.osb,whd:[this.window.roughWidth-this.window.gap+i,i,s],xyz:[0,this.window.roughTop,r]});this.add(t,[a]);const c=this.threeService.createCube({material:gn.osb,whd:[i,this.window.roughHeight,s],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom,r]});this.add(t,[c]),[o,a,c].forEach(l=>{this.animations[t].to(l.position,{z:-1,duration:.6}),this.animations[t].to(l.scale,{x:0,z:0,duration:.6}),this.animations[t].to(l,{visible:!1,duration:0})})}buildServiceBeams(){const t=Bi.serviceBeams,i=this.thickness[pn.serviceBeams];for(let r of[...Array(this.amountOfStuds+1).keys()]){let s=r*this.studDistance-this.joistFlangeWidth/2;0===r&&(s=0);let o=this.threeService.createCube({material:gn.osb,whd:[this.joistFlangeWidth,this.ceilingHeight,i]});this.translate(o,s,0,this.crossDepth[pn.serviceBeams]-i),o=this.clip(o,this.windowRoughClip),this.add(t,[o])}this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(r=>r.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}buildServiceInsulation(){const t=Bi.serviceInsulation,i=this.thickness[pn.serviceBeams];for(let r of[...Array(this.amountOfStuds).keys()]){let s=this.studDistance-this.joistFlangeWidth,o=r*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===r&&(o=this.joistFlangeWidth,s-=this.joistFlangeWidth/2);let a=this.threeService.createCube({material:gn.insulation,whd:[s,this.ceilingHeight,i]});this.translate(a,o,0,this.crossDepth[pn.serviceBeams]-i),a=this.clip(a,this.windowRoughClip),this.add(t,[a])}this.animations[Bi.serviceBeams].to(this.subModels[t].map(r=>r.position),{y:0,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[Bi.serviceBeams].to(this.subModels[t].map(r=>r.scale),{z:0,y:0,duration:.7,ease:"power3",stagger:{each:.4}},"<"),this.animations[Bi.serviceBeams].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildGroundFloor(){const t=Bi.groundFloor,i=this.cross.groundFloorThickness,s=this.cross.elevations[Mi.groundFloor]-i,a=this.demoDepth+this.crossDepth[pn.groundFloorEdge],c=Math.ceil(this.demoWith/1.2);for(let l of[...Array(c).keys()]){l=c-1-l;const u=this.threeService.createBox({material:gn.hollowCoreSlap,whd:[1.2,i,a]});this.translate(u,1.2*l,s,this.crossDepth[pn.groundFloorEdge]-a),this.add(t,[u]),this.animations[t].to(u.position,{y:.5,duration:.3}),this.animations[t].to(u.scale,{z:0,duration:.3}),this.animations[t].to(u.position,{z:this.demoDepth,duration:.3},"<"),this.animations[t].to(u.scale,{y:0,duration:.1}),this.animations[t].to(u,{visible:!1,duration:0})}}buildSole(){const t=Bi.sole,i=this.cross.elevations[Mi.groundFloor],r=this.threeService.createCube({material:gn.pine,whd:[this.demoWith,this.solePlateThickness,this.thickness[pn.joists]]});this.translate(r,0,i,this.crossDepth[pn.joists]),r.material[0].color=new Dn(9083745),this.add(t,[r]),this.animations[t].to(this.subModels[t].map(s=>s.position),{y:.5,duration:.6,ease:"power3"}),this.animations[t].to(this.subModels[t].map(s=>s.material),{opacity:0,duration:.4,ease:"power3"},"-=0.6"),this.animations[t].to(this.subModels[t].map(s=>s),{visible:!1,duration:0})}buildRoofLVL(){const t=Bi.roofRidge,i=this.cross.roofRidgeHight,r=this.cross.roofRidgeWidth,s=this.construction.getRoofPoint(Dt.topOutside),o=this.threeService.createCube({material:gn.pine,whd:[this.demoWith,i,r],xyz:[0,s[1]-i,-s[0]-r/2]});this.add(t,[o]),this.animations[t].to(this.subModels[t].map(a=>a.position),{y:0,duration:.6}),this.animations[t].to(this.subModels[t].map(a=>a.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(a=>a),{visible:!1,duration:0})}buildFloorLVL(){const t=Bi.floorLVL,i=this.threeService.createCube({material:gn.pine,whd:[this.demoWith,this.floorThickness,this.floorLVLThickness]});this.translate(i,0,this.ceilingHeight,this.crossDepth[pn.serviceBeams]-this.floorLVLThickness),this.add(t,[i]),this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-1,duration:.6}),this.animations[t].to(this.subModels[t].map(r=>r.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildGips(){const t=Bi.gips,i=this.thickness[pn.gips];for(let r of[...Array(this.amountOfStuds/2).keys()]){let s=this.threeService.createCube({material:gn.gips,whd:[1.2,this.ceilingHeight,i]});this.translate(s,r*this.studDistance*2,0,this.crossDepth[pn.gips]-i),s=this.clip(s,this.windowRoughClip),this.add(t,[s])}this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-2,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(r=>r.material),{opacity:0,duration:.4,ease:"power3",stagger:{each:.4}},"-=0.8"),this.animations[t].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildOuterSheet(){const t=Bi.outerSheet,i=this.demoWith,r=this.thickness[pn.outerSheet];let s=0,o=0,a=0;const p=(g,_,y,w,C,x)=>{const M=.3+(_+y)/x*.2;this.animations[t].to(g.rotation,{x:yi(90),duration:M});const T=1.05*w<2.4,I=1.05*C<1.2;this.animations[t].to(g.position,{x:(T?2.4:0)+w/2,y:r*s,z:.6+(I?1.2:0)+C/2,duration:M},"<"),T?a+=1:I?o+=1:s+=1};[[Dt.groundFloorInside,Dt.wallInside],[Dt.lowestOutside,Dt.bendOutside],[Dt.bendOutside,Dt.topOutside]].map((g,_)=>{let{totalWidth:y,origin:w,rotation:C}=this.getAngledProperties(g[0],g[1],r);g[0]===Dt.groundFloorInside&&(w[2]=this.crossDepth[pn.outerSheet]),this.brickPattern(t,w,2.4,1.2,r,y,i,C,gn.outerSheet,0===_?p:(x,M,T,I,F,P)=>{this.scaleZInOut(t,x,.1)},0===_?this.windowRoughOSBClip:void 0)}),this.animations[t].to(this.subModels[t].flatMap(g=>g.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}buildSpace(){const t=Bi.space,i=this.joistFlangeWidth,r=this.thickness[pn.space]/2;for(let s of[...Array(4).keys()]){const a=this.clip(this.threeService.createCube({material:gn.osb,whd:[this.demoWith,i,r],xyz:[0,s/3*(this.outerWallHeight-i),this.crossDepth[pn.space]+r]}),this.windowRoughOSBClip);this.add(t,[a])}for(let s of[...Array(this.amountOfStuds+1).keys()]){let o=s*this.studDistance-i/2;0===s&&(o=0);const a=this.clip(this.threeService.createCube({material:gn.pine,whd:[i,this.outerWallHeight,r],xyz:[o,0,this.crossDepth[pn.space]]}),this.windowRoughOSBClip);this.add(t,[a])}this.add(t,[this.threeService.createCube({material:gn.osb,whd:[this.window.roughWidth+i,i,r],xyz:[0,this.window.roughBottom-i,this.crossDepth[pn.space]+r]})]),this.add(t,[this.threeService.createCube({material:gn.osb,whd:[this.window.roughWidth+i,i,r],xyz:[0,this.window.roughTop+i/2,this.crossDepth[pn.space]+r]})]),this.add(t,[this.threeService.createCube({material:gn.osb,whd:[i,this.window.roughHeight+2*i,r],xyz:[this.window.roughWidth,this.window.roughBottom-i,this.crossDepth[pn.space]]})]),this.animations[t].to(this.subModels[t].map(s=>s.position),{z:1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(s=>s.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}buildRoofSpace(){const t=Bi.roofSpace,i=this.thickness[pn.space]/2,s=this.getRoofAndOffsetPoints(this.thickness[pn.outerSheet]+i);[[Dt.lowestOutside,Dt.bendOutside],[Dt.bendOutside,Dt.topOutside]].map(([o,a])=>{const c=Xa(s[`${o}Offset`],s[`${a}Offset`]),l=p1(s[o],s[a]),u=this.useOppositeCorner(s[`${o}Offset`],i,l),p=Math.ceil(c/.204);for(let g of[...Array(p).keys()]){const y=this.threeService.createCube({material:gn.osb,whd:[this.demoWith,this.joistFlangeWidth/2,i],xyz:[0,.204*g-this.joistFlangeWidth/2,i]});let w=(new Qi).makeRotationX(yi(l-90));y.applyMatrix4(w.setPosition(new Ae(...u))),this.add(t,[y])}for(let g of[...Array(this.amountOfStuds+1).keys()]){let _=g*this.studDistance-this.joistFlangeWidth/2;0===g&&(_=0);const y=this.threeService.createCube({material:gn.pine,whd:[this.joistFlangeWidth,c,i],xyz:[_,0,0]});let w=(new Qi).makeRotationX(yi(l-90));y.applyMatrix4(w.setPosition(new Ae(...u))),this.add(t,[y])}}),this.animations[t].to(this.subModels[t].map(o=>o.position),{z:1,duration:.7,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(o=>o.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3")}buildFacade(){const t=Bi.facade,i=.3,r=.02,o=.15,a=this.threeService.createCube({material:gn.unknown,whd:[this.window.roughWidth-this.window.gap+o,this.window.roughHeight+.3,2],xyz:[0,this.window.roughBottom-o,-1]}),c=this.thickness[pn.facade];let l=Math.ceil(this.demoWith/(i+r));for(let u of[...Array(l).keys()]){if(0===u)continue;const p=this.clip(this.threeService.createCube({material:gn.facade,whd:[.05,this.outerWallHeight,c],xyz:[u*(i+r)-.025-r/2,0,this.crossDepth[pn.facade]+c]}),a);this.add(t,[p])}for(let u of[...Array(l).keys()]){let f=u*i+u*r;0===u&&(f=0);const p=this.clip(this.threeService.createCube({material:gn.facade,whd:[i,this.outerWallHeight,c],xyz:[f,0,this.crossDepth[pn.facade]]}),this.windowRoughClip);this.add(t,[p])}this.add(t,[this.threeService.createCube({material:gn.whiteWood,whd:[this.window.roughWidth-this.window.gap,o,1.1*c],xyz:[0,this.window.roughBottom-o,this.crossDepth[pn.facade]+c]})]),this.add(t,[this.threeService.createCube({material:gn.whiteWood,whd:[this.window.roughWidth-this.window.gap+.18,o,1.1*c],xyz:[0,this.window.roughTop,this.crossDepth[pn.facade]+c]})]),this.add(t,[this.threeService.createCube({material:gn.whiteWood,whd:[o,this.window.roughHeight+.18,1.1*c],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom-.18,this.crossDepth[pn.facade]+c]})]),this.animations[t].to(this.subModels[t].map(u=>u.position),{z:this.crossDepth[pn.facade]+i/2,ease:"power3",stagger:{amount:1.2}}),this.animations[t].to(this.subModels[t].map(u=>u.rotation),{y:yi(90),stagger:{amount:1.2}},"<+=0.3"),this.animations[t].to(this.subModels[t].map(u=>u.scale),{z:0,x:0,stagger:{amount:1.2}},"<+=0.3")}}return n.\u0275fac=function(t){return new(t||n)(U(C_),U(Lo),U(dn),U(Mo),U(R4),U(TS))},n.\u0275cmp=Bn({type:n,selectors:[["app-three-construction"]],hostBindings:function(t,i){1&t&&an("keydown",function(s){return i.handleKeyboardEvent(s)},0,VL)},features:[Ot],decls:4,vars:0,consts:[["rendererContainer",""],[1,"loader"]],template:function(t,i){1&t&&(H(0,"div",null,0)(2,"div",1),V(3,"Loading"),N()())},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();var Ls=(()=>(function(n){n.below="below",n.above="above",n.inner="inner",n.outer="outer",n.roof="roof",n.roofAndBelow="roofAndBelow",n.inBetweenAndBelow="inBetweenAndBelow",n.roofAndAbove="roofAndAbove"}(Ls||(Ls={})),Ls))(),Z4=(()=>(function(n){n.northSouth="northSouth",n.westEast="westEast"}(Z4||(Z4={})),Z4))();let ynt=(()=>{class n extends boe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.modelName="House3D",this.keys=Object.values(Y2),this.roofMeshes={},this.animationDuration=.1,this.windowParts={},this.windows=[],this.appService.fullscreen$.next(!0),this.preLoadWindow(),this.importDude()}handleKeyboardEvent(t){"F4"===t.key&&(console.log("reset camera"),this.camera.position.set(10,10,10),this.camera.lookAt(0,0,0)),"1"===t.key&&this.focusCamera("in"),"2"===t.key&&this.focusCamera("out")}importDude(){this.threeService.importGLTF("Male_Standing.glb",t=>{this.scene.add(t),t.scale.set(.5,.5,.5),t.position.set(0,.02,0),t.updateMatrix(),t.rotateY(yi(0)),this.threeService.translate(t,this.house.centerHouse[0],this.house.cross.elevations[Mi.topFloor],this.house.houseLength-4)})}defaultCamera(){const t=this.house.houseWidth/2,r=this.house.houseLength/2;this.camera.position.set(-10,10,-10),this.controls.target.set(t,2,r)}AfterViewInitCallback(){this.threeService.basicGround(this.scene,this.house.cross.elevations[Mi.ground]),this.lights(1),this.createTowerClip(),this.createRoofShape(),this.createFloors(),this.createWalls();const t=new Qk(1);t.position.set(0,0,0),this.scene.add(t)}hexagonWindows(){const r=.6*Math.tan(yi(30)),o=this.threeService.flatShape([[0,0],[.6,-r],[1.2,0],[1.2,1],[.6,1+r],[0,1]],1.1,[gn.osb],1.1);return this.threeService.rotateAroundAxis(o,yi(90),Ho.red),this.threeService.rotateAroundAxis(o,yi(90),Ho.green),this.threeService.translate(o,0,1+r,1.2),o}focusCamera(t){console.log("camera to",t);var i=Ku.timeline();let s=this.center.z;["in"].includes(t)&&(s+=-10),["subGround"].includes(t)&&(s+=1),["out"].includes(t)&&(s+=10),this.pauseAll(),i.to(this.camera.position,{duration:.4,x:this.center.x-10,y:["subGround"].includes(t)?0:1.8,z:s,onUpdate:()=>{this.camera.lookAt(this.center.x,this.center.y,this.center.z)},onComplete:()=>{Ku.globalTimeline.play()}})}OnSectionChangeCallback(){console.log("OnSectionChangeCallback"),[_t.constructionFoundation,_t.constructionCrawlerSpace].includes(this.section)&&this.focusCamera("subGround")}getWindow(t){const i=new To,r=t.height-1,s=t.width-1,a=1.4/3;return Object.keys(this.windowParts).forEach(c=>{const l=this.windowParts[c].clone();["leftMid","rightMid"].includes(c)&&(l.scale.set(1,t.height/a,1),l.translateY(-t.height/2-.2)),["topMid","bottomMid"].includes(c)&&(l.scale.set(t.width/a,1,1),l.translateX(-t.width/2)),["topLeft","topMid","topRight"].includes(c)&&this.threeService.translate(l,0,r,0),["topRight","rightMid","bottomRight"].includes(c)&&this.threeService.translate(l,0,0,s),i.add(l)}),this.threeService.rotateAroundAxis(i,-yi(t.rotate),Ho.green),this.threeService.translate(i,t.x,t.y,t.z),i.userData.key="WindowFrame",i.name=t.selector,i}preLoadWindow(){const t=this.threeMaterialService.getMaterial(gn.white);this.threeService.importGLTF("window.glb",i=>{this.windowParts={},i.children.forEach(s=>{s.material=t}),[...Array(3).keys()].forEach(s=>{[...Array(3).keys()].forEach(o=>{const a=i.clone();let c;0===s&&0===o&&(c="bottomLeft"),1===s&&0===o&&(c="bottomMid"),2===s&&0===o&&(c="bottomRight"),0===s&&1===o&&(c="leftMid"),1===s&&1===o&&(c="center"),2===s&&1===o&&(c="rightMid"),0===s&&2===o&&(c="topLeft"),1===s&&2===o&&(c="topMid"),2===s&&2===o&&(c="topRight");const l=1.4/3,u=this.threeService.createCube({material:gn.unknown,whd:[l,l,l],xyz:[l*s-.2,l*o-.2,-l/3]}),f=this.intersectGroup(a,u);this.threeService.rotateAroundAxis(f,yi(-90),Ho.green),this.windowParts[c]=f})}),this.windows.map(s=>{})})}createTowerClip(){const t=Y2.tower,r=this.cross.elevations[Mi.towerTop],s=this.threeService.flatShape(this.house.tower.outerCoords,r,[gn.concrete],r);this.add(t,[s]),this.scaleFromSomewhere(t,s,.1),this.towerClip=s}createRoofShape(){const t=Y2.roof,i=this.cross.roofPoints,r=this.house.stramien.out.we,s=this.house.stramien.out.ns,a={},c=[i.topOutside,i.bendOutside,i.lowestOutside],l=[i.topInside,i.bendInside,i.lowestInside],u=[S5(i.topOutside,i.topInside,.8),S5(i.bendOutside,i.bendInside,.8),S5(i.lowestOutside,i.lowestInside,.8)],f=[ge(i.topOutside,[0,3]),ge(i.bendOutside,[-1,3]),ge(i.lowestOutside,[0,0])],p=Xa(u[0],i.topOutside),g=P=>{const R=P[0];return[...P,...P.map(k=>[2*R[0]-k[0],k[1]]).slice().reverse()].map(k=>[R[0]-k[0],R[1]-k[1]])},_={[Ls.below]:g([...l,ge(i.lowestInside,[0,-1])]),[Ls.above]:g([...c,...f.slice().reverse()]),[Ls.outer]:g([...c,...u.slice().reverse()]),[Ls.inner]:g([...l,...u.slice().reverse()]),[Ls.roof]:g([...l,...c.slice().reverse()]),[Ls.roofAndAbove]:g([...l,...f.slice().reverse()]),[Ls.roofAndBelow]:g([...c,ge(i.lowestOutside,[0,-1])]),[Ls.inBetweenAndBelow]:g([...u,ge(i.lowestOutside,[0,-1])])},y=this.threeService.flatShape([ge(this.house.centerHouse,[10,10]),ge(this.house.centerHouse,[-10,10]),this.house.centerHouse,ge(this.house.centerHouse,[-10,-10]),ge(this.house.centerHouse,[10,-10]),this.house.centerHouse],10,[gn.concrete],10),w=this.threeService.flatShape([ge(this.house.centerHouse,[10,10]),ge(this.house.centerHouse,[10,-10]),this.house.centerHouse,ge(this.house.centerHouse,[-10,-10]),ge(this.house.centerHouse,[-10,10]),this.house.centerHouse],10,[gn.concrete],10);Object.values(Z4).map(P=>{a[P]={},Object.values(Ls).map((R,k)=>{let W;const ie=_[R],Te=P===Z4.northSouth?s.d-s.a:r.d-r.a,me=P===Z4.northSouth?r.b+(r.c-r.b)/2:s.b+(s.c-s.b)/2;W=[Ls.below,Ls.inner,Ls.roof,Ls.roofAndAbove].includes(R)?this.cross.elevations[Dt.topInside]:R===Ls.inBetweenAndBelow?this.cross.elevations[Dt.topOutside]-p:this.cross.elevations[Dt.topOutside];const Q=this.threeService.flatShape(ie,0,R===Ls.outer?[gn.roof]:[gn.white],Te+1.6);this.threeService.rotateAroundAxis(Q,yi(90),Ho.red),P===Z4.westEast&&this.threeService.rotateAroundAxis(Q,yi(90),Ho.green),this.threeService.translate(Q,P===Z4.northSouth?me:Te+.8,W,P===Z4.northSouth?Te+.8:me),a[P][R]=this.clip(Q,P===Z4.westEast?y:w)})}),Object.values(Ls).map((P,R)=>{this.roofMeshes[P]=this.merge(a[Z4.northSouth][P],a[Z4.westEast][P])});let[C,x]=this.towerRoofInlay();const M=x.clone();this.threeService.translate(M,0,-.3,0);const T=this.towerRoof(),I=(P,R)=>{this.roofMeshes[P]=this.clip(this.roofMeshes[P].clone(),R.clone())};I(Ls.outer,x),I(Ls.inner,x),I(Ls.above,x),I(Ls.roofAndAbove,M),I(Ls.roofAndAbove,this.towerClip),I(Ls.above,this.towerClip),I(Ls.outer,this.towerClip),I(Ls.inner,this.towerClip),this.roofMeshes[Ls.roofAndBelow]=this.merge(this.roofMeshes[Ls.roofAndBelow],x);const F=new To;F.add(this.roofMeshes[Ls.inner]),F.add(this.roofMeshes[Ls.outer]),F.add(C),F.add(T),this.scaleFromSomewhere(t,F,1,void 0,!0),this.add(t,[F])}towerRoof(){return this.threeService.flatShape(this.house.tower.outerCoords,this.cross.elevations[Mi.towerTop]+.2,[gn.roof],.2)}splitTowerRoofInlay(t){const i=t.clone();this.threeService.translate(i,0,-.1,0);const r=this.clip(t,i);return this.threeService.translate(i,0,-.4,0),[this.clip(this.clip(t,i),r),r].map(o=>this.clip(o,this.roofMeshes[Ls.inBetweenAndBelow]))}towerRoofInlay(){const r=this.house.stramien.out,s=S5(this.house.tower.outerCoords[4],this.house.tower.outerCoords[7]),o=[r.we.c-(r.we.c-r.we.b)/2,r.ns.c-(r.ns.c-r.ns.b)/2],a=Xa(s,o),c=Xa(this.house.tower.outerCoords[0],this.house.tower.outerCoords[3]);let u=this.threeService.flatShape([[-c/2,-2],[-c/2,0],[0,1],[c/2,0],[c/2,-2]],0,[gn.unknown],a);this.threeService.rotateAroundAxis(u,yi(90),Ho.blue),this.threeService.rotateAroundAxis(u,yi(-90),Ho.red),this.threeService.rotateAroundAxis(u,yi(45),Ho.green),this.translate(u,o[0],this.cross.elevations[Dt.topInside]-1,o[1]);const f=new To,[p,g]=this.splitTowerRoofInlay(this.clip(u.clone(),this.towerClip));return p.material=this.threeMaterialService.getMaterial(gn.white),g.material=this.threeMaterialService.getMaterial(gn.roof),f.add(p),f.add(g),[f,u]}createAllStuds(){const t=new To,i=this.house.stramien.in,r=this.house.construction.thickness[pn.joists],s=i.ns.c-i.ns.b,o=Math.max(this.house.studAmountWest,this.house.studAmountEast,this.house.studAmountNorth,this.house.studAmountSouth);["North","South","East","West"].forEach(a=>{for(let c=0;c<o;c++){const l=this.house.studDistance*(c+1);let u=[0,0],f=[0,0],p=0;if("West"===a){if(c>this.house.studAmountWest)return;u=[i.we.b-l,i.ns.b-r],f=[u[0],u[1]+s]}if("East"===a){if(c>this.house.studAmountEast)return;u=[i.we.c+l,i.ns.b],f=[u[0],u[1]+s]}if("North"===a){if(c>this.house.studAmountNorth)return;u=[i.we.b,i.ns.b-l],f=[u[0]+s,u[1]],p=yi(90)}if("South"===a){if(c>this.house.studAmountSouth)return;u=[i.we.b,i.ns.c+l],f=[u[0]+s,u[1]],p=yi(90)}const g=this.createStud(),_=this.createStud();this.threeService.rotateAroundAxis(g,p,Ho.green),this.threeService.rotateAroundAxis(_,p,Ho.green),this.threeService.translate(g,u[0],0,u[1]),this.threeService.translate(_,f[0],0,f[1]),t.add(g),t.add(_)}})}createStud(t=1,i=.3,r=.012,s=.04,o=.03){const a=new To,c=this.threeService.createCube({material:gn.pine,whd:[s,t,o],xyz:[0,0,0]});a.add(c);const l=this.threeService.createCube({material:gn.osb,whd:[r,t,i-2*o],xyz:[s/2-r/2,0,o]});a.add(l);const u=this.threeService.createCube({material:gn.pine,whd:[s,t,o],xyz:[0,0,i-o]});return a.add(u),a}createFloors(){[{floor:tt.ground,key:Y2.groundFloor,z:Mi.groundFloor,t:this.cross.groundFloorThickness},{floor:tt.top,key:Y2.topFloor,z:Mi.topFloor,t:this.cross.topFloorThickness}].forEach(i=>{const r=new To;[!0,!1].forEach(s=>{const o=i.t*(s?.19999999999999996:.8),a=this.cross.elevations[i.z],c=s?a:a-i.t*(1-.8),l=this.house.partsFlatten.find(p=>p instanceof gP);let u=this.threeService.flatShape(l.coords,c,s?[gn.floor]:[gn.ral9016],o);this.house.partsFlatten.filter(p=>p instanceof z1&&!0===p.hole&&[i.floor].includes(p.floor)).forEach(p=>{const g=this.threeService.flatShape(p.coords,c+1,[gn.unknown],o+2);if(u=this.clip(u,g),i.floor===tt.top&&"L1-void"===p.selector&&!s){const _=p.coords[1][0]-p.coords[0][0],y=this.threeService.flatShape([[0,0],[0,-o],[Math.tan(yi(56))*o,0]],_,[gn.unknown],_);this.threeService.rotateAroundAxis(y,yi(90),Ho.red),this.threeService.rotateAroundAxis(y,yi(90),Ho.green),this.translate(y,p.coords[0][0],c-o,p.coords[0][1]),u=this.clip(u,y)}}),r.add(u)}),this.scaleFromSomewhere(i.key,r,1,void 0,i.floor===tt.top),this.add(i.key,[r])})}curtainWall(t){const i=t.parts.find(T=>T instanceof Ia),r=this.house,o=.1,a=i.width,c=this.threeService.createBox({material:gn.windowDarkFrame,whd:[a,.3,o],xyz:[i.origin[0],r.cross.ceilingHeight,i.origin[1]-o-.1]}),u=(this.threeService.createBox({material:gn.windowDarkFrame,whd:[a,.2,o],xyz:[i.origin[0],r.cross.elevations[Dt.bendInside]-.2,i.origin[1]-o-.1]}),this.cross.roofPoints),p=u[Dt.wallInside][0],g=i.elevation,_=u[Dt.bendInside];let y=[[0,0],ge(u[Dt.wallInside],[-p,-g]),ge(u[Dt.bendInside],[-p,-g]),ge(u[Dt.topInside],[-p,-g]),[this.house.outerBase-_[0]-p,_[1]+-g],[i.width,u[Dt.wallInside][1]+-g],[i.width,0],[0,0],[0,-1],[i.width+2,-1],[i.width+2,u[Dt.wallInside][1]+-g],[this.house.outerBase-_[0]-p+2,_[1]+-g+2],ge(u[Dt.topInside],[-p,2-g]),ge(u[Dt.bendInside],[-p-2,2-g]),ge(u[Dt.wallInside],[-p-2,-g]),[-2,0],[-2,-1],[0,-1]];const w=this.threeService.extrudedShape({material:gn.unknown,coords:y,xyz:[i.origin[0],0,i.origin[1]],depth:1});return this.debug(w),[c,...Array.from(Array(6).keys()).map((T,I)=>{let P=this.threeService.createBox({material:gn.windowDarkFrame,whd:[.1,this.house.cross.elevations[Dt.topInside],o],xyz:[i.origin[0]+(a-.1)/5*I,0,i.origin[1]-o-.1]});return P=this.clip(P,w),P})]}createWalls(){const t=this.house.partsFlatten.filter(p=>p instanceof ei),i=this.cross.elevations[Mi.groundFloor],r=this.cross.elevations[Mi.topFloor],s=[],o=[],a=[],c=this.threeService.flatShape([this.house.tower.outerCoords[0],...this.house.tower.outerCoords.slice(3)],this.cross.elevations[Mi.towerTop],[gn.concrete],this.cross.elevations[Mi.towerTop]-this.cross.elevations[Dt.wallInside]);t.forEach(p=>{let g=p.getFootPrint();if(g.length<4)return;const _=p.type===kn.outer,y=!0===p.tower,w=p.floor===tt.tower&&y;let C=this.cross.elevations[Mi.groundFloor];_&&(C=this.cross.elevations[Mi.ground]),[tt.top].includes(p.floor)&&(C=this.cross.elevations[Mi.topFloor]),[tt.tower].includes(p.floor)&&(C=this.cross.elevations[Mi.topFloor]),w&&(C=this.cross.elevations[Dt.wallInside]);let x=p.ceiling-C;(p.gable||[tt.top,tt.all].includes(p.floor))&&(x=this.cross.elevations[Dt.topInside]-C),(w||y)&&(x=this.cross.elevations[Mi.towerTop]-C),x=Math.max(x,0);const M=([R,k,W,ie],Te,me)=>{const Q=S5(R,ie,me),he=S5(k,W,me);return Te?[R,k,he,Q]:[Q,he,W,ie]};let F,I=this.threeService.flatShape(M(g,!0,1.8),x+C,[gn.ral9016],x);if(I=this.clip(I,w?this.roofMeshes[Ls.roofAndBelow]:y?c:this.roofMeshes[Ls.roofAndAbove]),_&&(F=this.threeService.flatShape(M(g,!1,1.8),x+C,[gn.facade],x),F=this.clip(F,w?this.roofMeshes[Ls.roofAndBelow]:y?c:this.roofMeshes[Ls.roofAndAbove])),(p.parts?p.parts.filter(R=>R instanceof Ia||R instanceof ta):[]).forEach(R=>{let k,W;const ie=R.height,Te=R.width,me=R.origin[0],Q=R.origin[1],he=[tt.ground,tt.all].includes(R.floor)?i:r;R instanceof Ia&&(k=he+R.elevation,W=0),R instanceof ta&&(k=he,W=1===R.scale[1]?-R.width:0,R.floor===tt.ground&&.1===R.width&&console.log(R.width));let ae=this.threeService.createCube({material:gn.white,whd:[2,ie,Te],xyz:[-1,0,W]});const fe=p.gable&&R.floor===tt.top;fe&&(ae=this.hexagonWindows()),this.threeService.rotateAroundAxis(ae,yi(-R.rotate),Ho.green),this.threeService.translate(ae,me,k,Q),I=this.clip(I,ae),F&&(F=this.clip(F,ae)),R instanceof ta&&a.push(this.createDoor(R,me,k,Q,W)),R instanceof Ia&&this.windows.push({height:R.height,width:R.width,x:me,y:k,z:Q,rotate:R.rotate,selector:R.selector,noFraming:"L0-outer-SouthWall-2-Window-14"===R.selector||fe})}),I.userData={floor:p.floor},_||w){const R=this.group([I,F]);R.name=p.selector,o.push(R)}else{const R=this.group([I,F]);R.name=p.selector,s.push(R)}});const l=this.createPilasters(),u=this.group([...o,...l,...a,...this.curtainWall(t.find(p=>"L0-outer-SouthWall-2"===p.selector))]);this.scaleFromSomewhere(Y2.outerWall,u),this.add(Y2.outerWall,[u]);const f=this.group(s);this.scaleFromSomewhere(Y2.innerWall,f),this.add(Y2.innerWall,[f])}createDoor(t,i,r,s,o){if(!t.outside)return;const a=this.threeService.createCube({material:gn.ral9016,whd:[t.width,t.height,.1],xyz:[-1===t.scale[1]?-t.width:0,0,0]});return this.threeService.rotateAroundAxis(a,yi(90-t.rotate),Ho.green),this.translate(a,i,r,s),a}createWindowPlane(t,i,r,s){let o=[];if("L0-outer-SouthWall-2-Window-14"===t.selector){const c=this.cross.roofPoints,u=c[Dt.wallInside][0],f=t.elevation,p=c[Dt.bendInside];o=[[0,0],ge(c[Dt.wallInside],[-u,-f]),ge(p,[-u,-f]),ge(c[Dt.topInside],[-u,-f]),[this.house.outerBase-p[0]-u,p[1]+-f],[t.width,c[Dt.wallInside][1]+-f],[t.width,0]]}else o=[[0,0],[0,t.height],[t.width,t.height],[t.width,0]];const a=this.threeService.createPane({material:gn.window,coords:o,xyz:[0,0,-.2]});return this.threeService.rotateAroundAxis(a,yi(-(t.rotate+90)),Ho.green),this.translate(a,i,r,s),a}createPilasters(){const t=this.house.stramien.out,s=.04,o=[];return[[t.we.b,t.ns.a,0],[t.we.c,t.ns.a,-90],[t.we.d,t.ns.b,-90],[t.we.d,t.ns.c,180],[t.we.c,t.ns.d,180],[t.we.b,t.ns.d,90],[t.we.a,t.ns.c,90],[t.we.a,t.ns.b,0]].forEach(([a,c,l])=>{let u=this.threeService.createCube({material:gn.white,whd:[s,7,.2+s],xyz:[-s,this.cross.elevations[Mi.ground],-s]}),f=this.threeService.createCube({material:gn.unknown,whd:[.2,7,s],xyz:[0,this.cross.elevations[Mi.ground],-s]}),p=this.merge(u,f);this.threeService.rotateAroundAxis(p,yi(l),Ho.green),this.translate(p,a,0,c),p=this.clip(p,this.roofMeshes[Ls.roofAndAbove]),o.push(p)}),o}}return n.\u0275fac=function(t){return new(t||n)(U(C_),U(Lo),U(dn),U(Mo),U(R4),U(TS))},n.\u0275cmp=Bn({type:n,selectors:[["app-three-house"]],hostBindings:function(t,i){1&t&&an("keydown",function(s){return i.handleKeyboardEvent(s)},0,VL)},features:[Ot],decls:4,vars:0,consts:[["rendererContainer",""],[1,"loader"]],template:function(t,i){1&t&&(H(0,"div",null,0)(2,"div",1),V(3,"Loading"),N()())},styles:["[_nghost-%COMP%]{height:100%;width:100%}.loader[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;top:0;left:0;z-index:1;background:var(--color-0);display:flex;justify-content:center;align-items:center;font-size:1.3rem}"]}),n})();const xoe={leading:!0,trailing:!1};let b_=(()=>{class n{constructor(t,i,r,s){this.houseService=t,this.appService=i,this.cookieService=r,this.httpClient=s}loadSVG(t,i,r){const s=new bnt(i,r);return s.get(this.httpClient,t),s}}return n.\u0275fac=function(t){return new(t||n)(Xe(Lo),Xe(Mo),Xe(R4),Xe($h))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class bnt{constructor(e,t){this.selector=e,this.callback=t}get(e,t){e.get(t,{responseType:"text"}).pipe(Lc(1)).subscribe(i=>{ro(this.selector).html(i.replace(/height="\d+px"/gi,'height="0px"').replace(/width="\d+px"/gi,'width="0px"')),this.update()})}update(){this.callback(this.selector)}}let W5=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.distanceSubscriptions=[],this.isDistance=!1,this.distanceMouseFirst="first",this.coords=[]}stop(){this.distanceSubscriptions.forEach(t=>t.unsubscribe()),this.distanceSVG.visible=!1,this.isDistance=!1,this.distanceSubscriptions=[],this.appService.update$.next()}click(t){"first"===this.distanceMouseFirst?this.distanceMouseFirst="second":"second"===this.distanceMouseFirst?this.distanceMouseFirst="fixed":"fixed"===this.distanceMouseFirst&&(this.distanceMouseFirst="first"),this.appService.update$.next()}mousemove(t){const[i,r]=t6(t);let s=[An(i),An(r)],o=.2;try{const c=t.composedPath().find(u=>"svg"===u.tagName);o=10*Number(c.getAttribute("meterPerPixel"))}catch(c){console.log(c)}const a=this.coords.filter(c=>c).map(c=>({coords:c,d:Xa(s,c)})).filter(c=>c.d<=o).sort((c,l)=>c.d-l.d).map(c=>c.coords);a.length>0&&(s=a[0]),["first"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point1=s,this.distanceSVG.point2=void 0),["second"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point2=s),this.appService.update$.next()}getParts(t){this.distanceSVG=t.find(i=>i instanceof WM),this.distanceSVG?(this.coords=[],t.forEach(i=>{i instanceof C3&&this.coords.push(...i.coords),i instanceof Ya&&this.coords.push(...i.coords)})):console.error("distanceSVG not found",t)}start(){if(this.distanceSubscriptions.length>0)return void this.stop();const t=this.appService.scroll$.value.graphic,i=document.querySelector(`svg.${t}`);if(!i)return void console.error("svg not found",`svg.${t}`);const r=i.querySelector("g");t===yo.cross&&this.getParts(this.houseService.house$.value.cross.parts),t===yo.house2D&&this.getParts(this.houseService.house$.value.parts),t===yo.stairCross&&this.getParts(this.houseService.house$.value.stair.cross.parts),t===yo.stairPlan&&this.getParts(this.houseService.house$.value.stair.parts),this.distanceSVG.clear(),this.distanceMouseFirst="first",this.isDistance=!0,this.distanceSVG.visible=!0,this.distanceSubscriptions.push(Tc(r,"mousemove").subscribe(s=>{this.mousemove(s)}),Tc(r,"click").subscribe(s=>{this.click(s)}),Tc(document,"keydown").subscribe(s=>{this.stop()}))}}return n.\u0275fac=function(t){return new(t||n)(Xe(Lo),Xe(Mo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xnt=(()=>{class n{constructor(t,i,r){this.appService=t,this.d3Service=i,this.contextMenuService=r}ngOnInit(){}measure(){this.d3Service.start(),this.contextMenuService.closeMenu()}whatIsHere(){this.contextMenuService.closeMenu();const[t,i]=this.xy,r=new MouseEvent("click",{clientX:t,clientY:i,bubbles:!0});document.elementFromPoint(t,i).dispatchEvent(r)}}return n.\u0275fac=function(t){return new(t||n)(U(Mo),U(W5),U(Zg))},n.\u0275cmp=Bn({type:n,selectors:[["context-menu"]],decls:13,vars:0,consts:[["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","8px"]],template:function(t,i){1&t&&(H(0,"mat-action-list",0)(1,"button",1),an("click",function(){return i.whatIsHere()}),H(2,"span",2)(3,"mat-icon"),V(4,"question_mark"),N(),H(5,"div"),V(6,"What is here?"),N()()(),H(7,"button",1),an("click",function(){return i.measure()}),H(8,"span",2)(9,"mat-icon"),V(10,"square_foot"),N(),H(11,"div"),V(12,"Start measure"),N()()()())},dependencies:[k7,DEe,IEe,x9,M9,Wh,RB],styles:["[_nghost-%COMP%]{background:var(--color-0);padding:4px;border:1px solid;border-color:var(--color-80);border-radius:4px;box-shadow:2px 2px 0 2px #0006}.mat-list-base[_ngcontent-%COMP%]{padding:0}"]}),n})(),Zg=(()=>{class n{constructor(t,i){this.overlay=t,this.d3Service=i,this.isOpen=!1}click(t){this.clientXY=[t.clientX,t.clientY],this.closeMenu(),this.d3Service.isDistance?this.d3Service.stop():this.createMenu()}createMenu(){this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy()});const t=new s9(xnt);this.overlayRef.addPanelClass("example-overlay"),this.overlayRef.attach(t).instance.xy=this.clientXY,this.isOpen=!0}closeMenu(){!this.overlayRef||(this.overlayRef.detach(),this.isOpen=!1)}positionStrategy(){return this.overlay.position().global().left(this.clientXY[0]+"px").top(this.clientXY[1]+"px")}}return n.\u0275fac=function(t){return new(t||n)(Xe(A3),Xe(W5))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mnt=["svg"];let kS=(()=>{class n{constructor(t,i,r,s,o,a,c){this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.stringCache="",this.showingImage=!1,this.printPreview=!1,this.isChild=!1,this.marginInMeters=[0,0,0,0],this.marginInPixels=[0,0,0,0],this.house$=this.houseService.house$,this.sections=Object.values(_t),this.tags=Object.values(K3),this.resize$=new no(void 0),this.subscriptions=[],this.svgHouseSize=[[0,0],[200,100]],this.loaded=!1}onClick(t){if(this.contextMenuService.closeMenu(),this.d3DistanceService.isDistance)return;const i=a=>{if(a&&a!==this.svgEl.nativeElement)return"id"in a&&`${a.id}`.length>0?a.id:i(a.parentNode)},r=i(t.target),s=()=>{this.tooltipService.detachOverlay(),document.body.classList.remove("selection-active"),document.querySelectorAll("svg .selected").forEach((a,c)=>{a.classList.remove("selected")})};if(!r)return s();const o=this.house.partsFlatten.find(a=>a.selector===r);if(!o)return console.log(`Couldnt find [${r}] in `,t.target,"probably its only a part of its full ID"),s();document.body.classList.add("selection-active"),o.select(),this.tooltipService.attachPopup([t.pageX,t.pageY],o),console.log(o)}preventContextMenu(t){return this.contextMenuService.click(t),!1}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer&&this.observer.unobserve(this.host.nativeElement)}svgUpdateMarginAndSize(){}setUp(){this.houseService.destroyParts(),this.svg=ro(this.svgEl.nativeElement),this.g=this.svg.select("g"),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.resize$.pipe(k0(t=>mi(void 0))),this.subscriptions.push(e2(this.appService.fullscreen$.pipe(wa(t=>{t?this.svg.call(function lGe(){var u,f,p,n=rGe,e=sGe,t=cGe,i=oGe,r=aGe,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=tGe,l=yne("start","zoom","end"),g=500,y=0,w=10;function C(Q){Q.property("__zoom",rie).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",W).filter(r).on("touchstart.zoom",ie).on("touchmove.zoom",Te).on("touchend.zoom touchcancel.zoom",me).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(Q,he){return(he=Math.max(s[0],Math.min(s[1],he)))===Q.k?Q:new X0(he,Q.x,Q.y)}function M(Q,he,K){var ae=he[0]-K[0]*Q.k,fe=he[1]-K[1]*Q.k;return ae===Q.x&&fe===Q.y?Q:new X0(Q.k,ae,fe)}function T(Q){return[(+Q[0][0]+ +Q[1][0])/2,(+Q[0][1]+ +Q[1][1])/2]}function I(Q,he,K,ae){Q.on("start.zoom",function(){F(this,arguments).event(ae).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(ae).end()}).tween("zoom",function(){var fe=this,de=arguments,ke=F(fe,de).event(ae),et=e.apply(fe,de),Fe=null==K?T(et):"function"==typeof K?K.apply(fe,de):K,wt=Math.max(et[1][0]-et[0][0],et[1][1]-et[0][1]),ut=fe.__zoom,Bt="function"==typeof he?he.apply(fe,de):he,xt=c(ut.invert(Fe).concat(wt/ut.k),Bt.invert(Fe).concat(wt/Bt.k));return function(Zt){if(1===Zt)Zt=Bt;else{var cn=xt(Zt),Sn=wt/cn[2];Zt=new X0(Sn,Fe[0]-cn[0]*Sn,Fe[1]-cn[1]*Sn)}ke.zoom(null,Zt)}})}function F(Q,he,K){return!K&&Q.__zooming||new P(Q,he)}function P(Q,he){this.that=Q,this.args=he,this.active=0,this.sourceEvent=null,this.extent=e.apply(Q,he),this.taps=0}function R(Q,...he){if(n.apply(this,arguments)){var K=F(this,he).event(Q),ae=this.__zoom,fe=Math.max(s[0],Math.min(s[1],ae.k*Math.pow(2,i.apply(this,arguments)))),de=t6(Q);if(K.wheel)(K.mouse[0][0]!==de[0]||K.mouse[0][1]!==de[1])&&(K.mouse[1]=ae.invert(K.mouse[0]=de)),clearTimeout(K.wheel);else{if(ae.k===fe)return;K.mouse=[de,ae.invert(de)],RM(this),K.start()}Vv(Q),K.wheel=setTimeout(ke,150),K.zoom("mouse",t(M(x(ae,fe),K.mouse[0],K.mouse[1]),K.extent,o))}function ke(){K.wheel=null,K.end()}}function k(Q,...he){if(!p&&n.apply(this,arguments)){var K=Q.currentTarget,ae=F(this,he,!0).event(Q),fe=ro(Q.view).on("mousemove.zoom",Fe,!0).on("mouseup.zoom",wt,!0),de=t6(Q,K),ke=Q.clientX,et=Q.clientY;XUe(Q.view),pP(Q),ae.mouse=[de,this.__zoom.invert(de)],RM(this),ae.start()}function Fe(ut){if(Vv(ut),!ae.moved){var Bt=ut.clientX-ke,xt=ut.clientY-et;ae.moved=Bt*Bt+xt*xt>y}ae.event(ut).zoom("mouse",t(M(ae.that.__zoom,ae.mouse[0]=t6(ut,K),ae.mouse[1]),ae.extent,o))}function wt(ut){fe.on("mousemove.zoom mouseup.zoom",null),YUe(ut.view,ae.moved),Vv(ut),ae.event(ut).end()}}function W(Q,...he){if(n.apply(this,arguments)){var K=this.__zoom,ae=t6(Q.changedTouches?Q.changedTouches[0]:Q,this),fe=K.invert(ae),ke=t(M(x(K,K.k*(Q.shiftKey?.5:2)),ae,fe),e.apply(this,he),o);Vv(Q),a>0?ro(this).transition().duration(a).call(I,ke,ae,Q):ro(this).call(C.transform,ke,ae,Q)}}function ie(Q,...he){if(n.apply(this,arguments)){var de,ke,et,Fe,K=Q.touches,ae=K.length,fe=F(this,he,Q.changedTouches.length===ae).event(Q);for(pP(Q),ke=0;ke<ae;++ke)Fe=[Fe=t6(et=K[ke],this),this.__zoom.invert(Fe),et.identifier],fe.touch0?!fe.touch1&&fe.touch0[2]!==Fe[2]&&(fe.touch1=Fe,fe.taps=0):(fe.touch0=Fe,de=!0,fe.taps=1+!!u);u&&(u=clearTimeout(u)),de&&(fe.taps<2&&(f=Fe[0],u=setTimeout(function(){u=null},g)),RM(this),fe.start())}}function Te(Q,...he){if(this.__zooming){var de,ke,et,Fe,K=F(this,he).event(Q),ae=Q.changedTouches,fe=ae.length;for(Vv(Q),de=0;de<fe;++de)et=t6(ke=ae[de],this),K.touch0&&K.touch0[2]===ke.identifier?K.touch0[0]=et:K.touch1&&K.touch1[2]===ke.identifier&&(K.touch1[0]=et);if(ke=K.that.__zoom,K.touch1){var wt=K.touch0[0],ut=K.touch0[1],Bt=K.touch1[0],xt=K.touch1[1],Zt=(Zt=Bt[0]-wt[0])*Zt+(Zt=Bt[1]-wt[1])*Zt,cn=(cn=xt[0]-ut[0])*cn+(cn=xt[1]-ut[1])*cn;ke=x(ke,Math.sqrt(Zt/cn)),et=[(wt[0]+Bt[0])/2,(wt[1]+Bt[1])/2],Fe=[(ut[0]+xt[0])/2,(ut[1]+xt[1])/2]}else{if(!K.touch0)return;et=K.touch0[0],Fe=K.touch0[1]}K.zoom("touch",t(M(ke,et,Fe),K.extent,o))}}function me(Q,...he){if(this.__zooming){var de,ke,K=F(this,he).event(Q),ae=Q.changedTouches,fe=ae.length;for(pP(Q),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),de=0;de<fe;++de)ke=ae[de],K.touch0&&K.touch0[2]===ke.identifier?delete K.touch0:K.touch1&&K.touch1[2]===ke.identifier&&delete K.touch1;if(K.touch1&&!K.touch0&&(K.touch0=K.touch1,delete K.touch1),K.touch0)K.touch0[1]=this.__zoom.invert(K.touch0[0]);else if(K.end(),2===K.taps&&(ke=t6(ke,this),Math.hypot(f[0]-ke[0],f[1]-ke[1])<w)){var et=ro(this).on("dblclick.zoom");et&&et.apply(this,arguments)}}}return C.transform=function(Q,he,K,ae){var fe=Q.selection?Q.selection():Q;fe.property("__zoom",rie),Q!==fe?I(Q,he,K,ae):fe.interrupt().each(function(){F(this,arguments).event(ae).start().zoom(null,"function"==typeof he?he.apply(this,arguments):he).end()})},C.scaleBy=function(Q,he,K,ae){C.scaleTo(Q,function(){return this.__zoom.k*("function"==typeof he?he.apply(this,arguments):he)},K,ae)},C.scaleTo=function(Q,he,K,ae){C.transform(Q,function(){var fe=e.apply(this,arguments),de=this.__zoom,ke=null==K?T(fe):"function"==typeof K?K.apply(this,arguments):K,et=de.invert(ke),Fe="function"==typeof he?he.apply(this,arguments):he;return t(M(x(de,Fe),ke,et),fe,o)},K,ae)},C.translateBy=function(Q,he,K,ae){C.transform(Q,function(){return t(this.__zoom.translate("function"==typeof he?he.apply(this,arguments):he,"function"==typeof K?K.apply(this,arguments):K),e.apply(this,arguments),o)},null,ae)},C.translateTo=function(Q,he,K,ae,fe){C.transform(Q,function(){var de=e.apply(this,arguments),ke=this.__zoom,et=null==ae?T(de):"function"==typeof ae?ae.apply(this,arguments):ae;return t(dP.translate(et[0],et[1]).scale(ke.k).translate("function"==typeof he?-he.apply(this,arguments):-he,"function"==typeof K?-K.apply(this,arguments):-K),de,o)},ae,fe)},P.prototype={event:function(Q){return Q&&(this.sourceEvent=Q),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Q,he){return this.mouse&&"mouse"!==Q&&(this.mouse[1]=he.invert(this.mouse[0])),this.touch0&&"touch"!==Q&&(this.touch0[1]=he.invert(this.touch0[0])),this.touch1&&"touch"!==Q&&(this.touch1[1]=he.invert(this.touch1[0])),this.that.__zoom=he,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Q){var he=ro(this.that).datum();l.call(Q,this.that,new nGe(Q,{sourceEvent:this.sourceEvent,target:C,type:Q,transform:this.that.__zoom,dispatch:l}),he)}},C.wheelDelta=function(Q){return arguments.length?(i="function"==typeof Q?Q:UM(+Q),C):i},C.filter=function(Q){return arguments.length?(n="function"==typeof Q?Q:UM(!!Q),C):n},C.touchable=function(Q){return arguments.length?(r="function"==typeof Q?Q:UM(!!Q),C):r},C.extent=function(Q){return arguments.length?(e="function"==typeof Q?Q:UM([[+Q[0][0],+Q[0][1]],[+Q[1][0],+Q[1][1]]]),C):e},C.scaleExtent=function(Q){return arguments.length?(s[0]=+Q[0],s[1]=+Q[1],C):[s[0],s[1]]},C.translateExtent=function(Q){return arguments.length?(o[0][0]=+Q[0][0],o[1][0]=+Q[1][0],o[0][1]=+Q[0][1],o[1][1]=+Q[1][1],C):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},C.constrain=function(Q){return arguments.length?(t=Q,C):t},C.duration=function(Q){return arguments.length?(a=+Q,C):a},C.interpolate=function(Q){return arguments.length?(c=Q,C):c},C.on=function(){var Q=l.on.apply(l,arguments);return Q===l?C:Q},C.clickDistance=function(Q){return arguments.length?(y=(Q=+Q)*Q,C):Math.sqrt(y)},C.tapDistance=function(Q){return arguments.length?(w=+Q,C):w},C}().on("zoom",i=>{this.setTransform(i.transform,0)})):(this.svg.on(".zoom",null),this.setTransform())})),this.appService.scroll$.pipe(wa(t=>{this.section=this.appService.scroll$.value.section}))).subscribe(t=>{}),e2(this.appService.update$,this.house$).pipe(wa(t=>{const i=this.house$.value;this.house=i,this.cross=i.cross,this.stair=i.stair})).subscribe(t=>{this.updateSVG(!0)}),e2(this.appService.states$,this.appService.svgTransform$.pipe(wa(t=>{if(!this.loaded&&this.graphic in t){const i=t[this.graphic];this.setTransform(new X0(i.k,i.x,i.y))}})),this.resize$.pipe(_o(t=>!this.showingImage),function Cnt(n,e=n9,t=xoe){const i=NI(n,e);return function wnt(n,e=xoe){return xn((t,i)=>{const{leading:r,trailing:s}=e;let o=!1,a=null,c=null,l=!1;const u=()=>{c?.unsubscribe(),c=null,s&&(g(),l&&i.complete())},f=()=>{c=null,l&&i.complete()},p=_=>c=po(n(_)).subscribe(_n(i,u,f)),g=()=>{if(o){o=!1;const _=a;a=null,i.next(_),!l&&p(_)}};t.subscribe(_n(i,_=>{o=!0,a=_,(!c||c.closed)&&(r?g():p(_))},()=>{l=!0,(!(s&&o&&c)||c.closed)&&i.complete()}))})}(()=>i,t)}(10))).pipe(_o(t=>void 0!==this.house),Nh()).subscribe(t=>{this.updateSVG()})),this.loaded=!0}setTransform(t="translate(0,0) scale(1)",i=1e4){this.printPreview||(this.loaded&&this.appService.setTransformCookie(t,this.graphic),this.g.transition().duration(i).attr("transform",t))}updateSVG(t=!1){this.tooltipService.updateOverlay(),this.svgUpdateMarginAndSize(),this.svgSpecificUpdate();const[[i,r],[s,o]]=this.svgHouseSize,a=-this.marginInMeters[3]+i,c=-this.marginInMeters[0]+r,l=s+this.marginInMeters[3]+this.marginInMeters[1],u=o+this.marginInMeters[0]+this.marginInMeters[2],f="translate(0,0) scale(1)"===this.g.attr("transform"),p=this.showingImage||f?window.outerWidth/2:this.svgEl.nativeElement.clientWidth,g=this.showingImage||f?window.outerHeight/2:this.svgEl.nativeElement.clientHeight,_=Math.abs(An(p,0)-this.marginInPixels[1]-this.marginInPixels[3]),y=Math.abs(An(g,0)-this.marginInPixels[0]-this.marginInPixels[2]),w=An(l/_),C=An(u/y),x=Math.max(w,C)/this.getScale(),M=this.meterPerPixel!==x;this.meterPerPixel=x,this.svgEl.nativeElement.setAttribute("meterPerPixel",`${x}`);const T=this.marginInPixels.map(P=>An(P*this.meterPerPixel));if(!this.isChild)if(this.printPreview){const P=[21,29.7];this.svg.attr("viewBox",`-2 -2 ${P[1]} ${P[0]}`)}else this.svg.transition().duration(1e3).attr("viewBox",`\n          ${-T[3]+a} \n          ${-T[0]+c} \n          ${Math.abs(l+(T[3]+T[1]))} \n          ${Math.abs(u+(T[0]+T[2]))}`);const I=[this.appService.floor$.value,this.appService.scroll$.value.section,Object.entries(this.appService.states$.value).filter(([P,R])=>!0===R).map(([P,R])=>P),this.graphic].join("-"),F=this.stringCache!==I||""===this.stringCache;this.stringCache=I,(!1!==t||F||M)&&this.house.redrawHouse({floor:this.appService.floor$.value,graphic:this.graphic,redrawAll:F||t,meterPerPixel:this.meterPerPixel,theme:void 0,print:this.printPreview})}svgSpecificUpdate(){}getScale(){const t=/scale\(\d+\.?\d*/g.exec(this.g.attr("transform"));return t?Number(t[0].replace("scale(","").replace(")","")):1}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(Mo),U(Bg),U(dn),U(b_),U(W5),U(Zg))},n.\u0275cmp=Bn({type:n,selectors:[["app-svg-base"]],viewQuery:function(t,i){if(1&t&&Xs(Mnt,5),2&t){let r;Di(r=Ii())&&(i.svgEl=r.first)}},hostVars:4,hostBindings:function(t,i){1&t&&an("click",function(s){return i.onClick(s)})("contextmenu",function(s){return i.preventContextMenu(s)}),2&t&&Rr("imaged",i.showingImage)("print-preview",i.printPreview)},inputs:{isChild:"isChild"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();var Snt=Se(4159),Ent=Se.n(Snt);let Tnt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i}print(t){console.log("Printing the SVG"),this.prepareToPrint(t)}prepareToPrint(t){t.printPreview=!0,this.appService.floor$.next(tt.ground),this.appService.states$.next({...this.appService.states$.value,measure:!0,doors:!0,towerFootprint:!1,stramien:!1,examplePlan:!0,theoreticalWalls:!1,grid:!1}),this.appService.setDarkMode(!1,!1),t.updateSVG(!0),t.setTransform("translate(0,0) scale(1)")}saveToCavnas(t,i){const r=t.getBoundingClientRect().width,s=t.getBoundingClientRect().height;Ent()(t.parentElement,{width:r,height:s}).then(function(o){o.style.position="absolute",o.style.top="30px",o.style.left="30px",o.style.zIndex="9999",o.style.border="12px solid darkcyan",console.log(o),console.log(r,s),i(o)})}openNewTap(t){var i=new Image;i.src=t.toDataURL("image/png",1),window.open("").document.write(i.outerHTML)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Lo),Xe(Mo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lnt=["render"];function Dnt(n,e){1&n&&(ko(),$e(0,"g",88)),2&n&&Ms("id","icon-",e.$implicit,"")}function Int(n,e){1&n&&(ko(),$e(0,"polyline",89)),2&n&&Ms("id","grid-index-",e.index,"")}function Bnt(n,e){1&n&&(ko(),$e(0,"polyline",90)),2&n&&Ms("id","grid-index-",e.index,"")}function Rnt(n,e){1&n&&(ko(),$e(0,"g",88)),2&n&&Ce("id",e.$implicit)}function Fnt(n,e){1&n&&(ko(),H(0,"g",88),$e(1,"polyline",91)(2,"polyline",92)(3,"polygon",93)(4,"circle",94),N()),2&n&&Ce("id",e.$implicit)}function knt(n,e){1&n&&(ko(),H(0,"g",88),$e(1,"polygon",95)(2,"path",96),N()),2&n&&Ce("id",e.$implicit)}function Pnt(n,e){1&n&&(ko(),H(0,"g",88),$e(1,"polygon",97)(2,"path",98),N()),2&n&&Ce("id",e.$implicit)}function Hnt(n,e){1&n&&(ko(),$e(0,"polyline",99)),2&n&&Bl("id",e.$implicit)}function znt(n,e){if(1&n&&(ko(),H(0,"g",100),$e(1,"use",101),N()),2&n){const t=e.$implicit;Bl("id",t),Z(1),Bl("id",t)}}function Ont(n,e){1&n&&(ko(),$e(0,"g",102)),2&n&&Bl("id",e.$implicit)}const Moe=function(){return[]};let Nnt=(()=>{class n extends kS{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.printService=l,this.marginInMeters=[0,0,0,0],this.marginInPixels=[72,64,64,8],this.gridSizeX$=new no(100),this.gridSizeY$=new no(100),this.roomKeys=this.houseService.roomKeys,this.doorKeys=this.houseService.doorKeys,this.wallKeys=this.houseService.wallKeys,this.windowKeys=this.houseService.windowKeys,this.sensorKeys=this.houseService.sensorKeys,this.exampleKeys=this.houseService.exampleKeys,this.SensorTypes=Object.values(Ge),this.graphic=yo.house2D,this.transformOrigin=[0,0],this.svgLoaders=[]}handleKeyboardEvent(t){var i=this;return Da(function*(){t.ctrlKey&&"z"===t.key&&(console.clear(),t.preventDefault(),i.printService.print(i))})()}svgSpecificUpdate(){!0!==this.appService.fullscreen$.value&&(this.appService.scroll$.value.section===_t.welcome?(this.setTransform("translate(-1, -4) scale(0.8)",1e3),this.showingImage=!0):(this.setTransform(void 0,1e3),this.showingImage=!1))}addLayout(t="2023-01-01"){const r=this.g.append("g").attr("class","print-layout");r.attr("transform","translate(-2,-2) scale(1)");const s=[21,29.7],o=s[1]-2,a=s[0]-2,u=E5(10,0,!0),f=E5(12,0,!0),p=E5(18,0,!0),g="black";r.append("rect").attr("x",0).attr("y",0).attr("width",s[1]).attr("height",s[0]).attr("fill","none").attr("stroke",g).attr("stroke-width",1*this.meterPerPixel),r.append("rect").attr("x",1).attr("y",1).attr("width",o).attr("height",a).attr("fill","none").attr("stroke",g).attr("stroke-width",2*this.meterPerPixel);const y=2.8;(()=>{const M=r.append("g").attr("transform",`translate(${1+o-1}, ${1+a-y-1.2})`);[...Array(5).keys()].forEach((I,F)=>{M.append("line").attr("x1",-F).attr("y1",0).attr("x2",-F).attr("y2",-.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("text").attr("fill",g).attr("font-size",.7*u).attr("x",-F).attr("y",.3).attr("text-anchor","middle").attr("font-family","sans-serif").text(4-F)}),M.append("line").attr("x1",0).attr("y1",0).attr("x2",-4).attr("y2",0).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("text").attr("fill",g).attr("font-size",.8*u).attr("x",-4).attr("y",-.3).attr("text-anchor","left").attr("font-family","sans-serif").text("Meter")})(),(()=>{const I=1+o-9,F=1+a-y;r.append("rect").attr("fill","white").attr("stroke",g).attr("stroke-width",2*this.meterPerPixel).attr("x",I).attr("y",F).attr("width",9).attr("height",y),r.append("line").attr("x1",I+.2).attr("y1",1+a-.4-.2).attr("x2",1+o-.2).attr("y2",1+a-.4-.2).attr("stroke",g).attr("stroke-width",1*this.meterPerPixel);const P=r.append("text").attr("fill",g).attr("font-size",u).attr("font-family","sans-serif");P.clone().attr("x",1+o-.2).attr("y",F-.1).attr("font-size",f).attr("text-anchor","end").text("F\xf6rhandsbesked"),P.clone().attr("x",1+o-.2).attr("y",F+.2*3).attr("font-size",p).attr("text-anchor","end").attr("font-weight","bold").text(`Passive House ${this.house.name}`),P.clone().attr("x",I+9-.2).attr("y",F+.2*6).attr("font-size",f).attr("text-anchor","end").text("Floor plan Top floor"),P.clone().attr("x",I+9-.2).attr("y",1+a-.4-.4).attr("text-anchor","end").text("Scale 1:100"),P.clone().attr("x",I+4.5+.2).attr("y",1+a-.4-.4).attr("text-anchor","middle").text(`REV: ${(new Date).toISOString().slice(0,10)}`),P.clone().attr("x",I+.2).attr("y",1+a-.4-.4).attr("font-size",f).attr("text-anchor","start").text("Drawing A1"),P.clone().attr("x",I+.2).attr("y",1+a-.2).attr("text-anchor","start").text(t),P.clone().attr("x",1+o-.2).attr("y",1+a-.2).attr("text-anchor","end").text("Drawn by: GeoDev AB")})(),(()=>{const M=r.append("g").attr("transform",`translate(${1+o-.5}, ${1+a-y-1.2})`);M.append("text").attr("fill",g).attr("font-size",u).attr("x",0).attr("y",0).attr("text-anchor","middle").attr("font-family","sans-serif").text("N"),M.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",.5).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("line").attr("x1",0).attr("y1",0).attr("x2",.1).attr("y2",.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("line").attr("x1",0).attr("y1",0).attr("x2",-.1).attr("y2",.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel)})()}ngAfterViewInit(){this.svgLoaders.push(this.d3Service.loadSVG("assets/models/sun.svg",".g-sun",t=>{const i=this.house$.value,r=40*this.meterPerPixel;ro(t).selectChild("svg").attr("height",r+"px").attr("width",r+"px").attr("x",i.houseWidth/2+"px").attr("y",i.houseLength+1*i.studDistance+"px")}));for(let t of Object.values(Ge))this.svgLoaders.push(this.d3Service.loadSVG(`assets/svg/${t}.svg`,`#icon-${t}`,i=>{const s=20*this.meterPerPixel;ro(i).selectChild("svg").attr("x",-s/2+"px").attr("y",-s/2+"px").attr("height",s+"px").attr("width",s+"px")}));this.setUp(),this.setStairs(),this.renderImg=this.svg.select(".render-img").attr("xlink:href","/assets/img/top_render.jpg"),this.scaleRenderImage()}svgUpdateMarginAndSize(){this.gridSizeX$.next(this.house.gridSizeX),this.gridSizeY$.next(this.house.gridSizeY);const t=3*this.house.studDistance;this.marginInMeters=[t,t,t,t],this.svgHouseSize=[[0,0],[this.house.houseWidth,this.house.houseLength]],this.scaleRenderImage(),this.scaleStairs(),this.svgLoaders.forEach(i=>i.update())}setStairs(){const t=document.querySelector(".svg-plan-stair-plan").firstChild;this.svg.select(".plan-stair-plan").select(".plan-stair-plan").node().replaceWith(t),t.classList.add("plan-stair-plan")}scaleStairs(){this.svg.select(".plan-stair-plan").attr("transform-origin",`${this.stair.stairOrigin[0]+this.stair.totalWidth/2} ${this.house.stair.stairOrigin[1]+this.stair.totalHeight/2}`)}scaleRenderImage(){const t=this.house.stramien.out,i=[582,240],c=An(this.house.houseWidth/this.meterPerPixel),l=An(this.house.houseLength/this.meterPerPixel),u=[0,0],f=An(549/c,5),p=An(481/l,5),g=Math.max(p,f);if(!this.renderImg)return;const y=M=>[An(M[0]/this.meterPerPixel,4),An(M[1]/this.meterPerPixel,4)],C=[io(45,100,[t.we.d,t.ns.c]),[t.we.d,t.ns.c],[t.we.b+(t.we.c-t.we.b)/2,t.ns.b+(t.ns.c-t.ns.b)/2],[t.we.b,t.ns.b],io(200,100,[t.we.b,t.ns.b])],x=(M=>[u[0]-An(M[0]*this.meterPerPixel/g),u[1]-An(M[1]*this.meterPerPixel/g)])(i);this.renderImg.attr("x",x[0]).attr("y",x[1]).attr("width",1920*this.meterPerPixel/g).attr("height",1080*this.meterPerPixel/g).attr("clip-path",`polygon(\n0% 0%,\n100% 0%,\n100% 100%,\n${C.map(M=>(M=>{const T=y(M);return[(T[0]*g+i[0])/1920*100,(T[1]*g+i[1])/1080*100].map(I=>`${An(I,0)}%`).join(" ")})(M)).join(", \n")}\n      )`)}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(Mo),U(Bg),U(dn),U(b_),U(W5),U(Zg),U(Tnt))},n.\u0275cmp=Bn({type:n,selectors:[["app-svg-plan"]],viewQuery:function(t,i){if(1&t&&Xs(Lnt,5),2&t){let r;Di(r=Ii())&&(i.renderEl=r.first)}},hostBindings:function(t,i){1&t&&an("keydown",function(s){return i.handleKeyboardEvent(s)},0,NL)},features:[Ot],decls:93,vars:15,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet"],["svg",""],["id","MyGradient","gradientTransform","rotate(90)"],["offset","-10%",1,"alt-stop"],["offset","30%",1,"alt-stop"],["offset","100%",1,"main-stop"],["id","inset-shadow"],["stdDeviation","0.5","result","offset-blur"],["operator","out","in","SourceGraphic","in2","offset-blur","result","inverse"],["flood-color","black","flood-opacity","1","result","color"],["operator","in","in","color","in2","inverse","result","shadow"],["in","shadow","result","shadow"],["type","linear","slope",".175"],["transform","rotate(0)",1,"all"],[1,"icons",2,"display","none"],[3,"id",4,"ngFor","ngForOf"],[1,"house-stramien"],["clas","house-stramien",1,"house-stramien-in"],["clas","house-stramien","id","house-stramien-in-we-a"],["clas","house-stramien","id","house-stramien-in-we-b"],["clas","house-stramien","id","house-stramien-in-we-c"],["clas","house-stramien","id","house-stramien-in-we-d"],["clas","house-stramien","id","house-stramien-in-ns-a"],["clas","house-stramien","id","house-stramien-in-ns-b"],["clas","house-stramien","id","house-stramien-in-ns-c"],["clas","house-stramien","id","house-stramien-in-ns-d"],["clas","house-stramien",1,"house-stramien-ground"],["clas","house-stramien","id","house-stramien-ground-we-hall"],["clas","house-stramien","id","house-stramien-ground-ns-hall"],["clas","house-stramien","id","house-stramien-ground-we-toilet"],["clas","house-stramien","id","house-stramien-ground-ns-toilet"],["clas","house-stramien","id","house-stramien-top-we-hall"],["clas","house-stramien","id","house-stramien-top-ns-hall"],["clas","house-stramien","id","house-stramien-top-we-toilet"],["clas","house-stramien","id","house-stramien-top-ns-toilet"],["clas","house-stramien","id","house-stramien-top-we-walkway"],["clas","house-stramien","id","house-stramien-top-ns-walkway"],["clas","house-stramien",1,"house-stramien-out"],["clas","house-stramien","id","house-stramien-out-we-a"],["clas","house-stramien","id","house-stramien-out-we-b"],["clas","house-stramien","id","house-stramien-out-we-c"],["clas","house-stramien","id","house-stramien-out-we-d"],["clas","house-stramien","id","house-stramien-out-ns-a"],["clas","house-stramien","id","house-stramien-out-ns-b"],["clas","house-stramien","id","house-stramien-out-ns-c"],["clas","house-stramien","id","house-stramien-out-ns-d"],[1,"g-grid"],["class","grid-vertical",3,"id",4,"ngFor","ngForOf"],["class","grid-horizontal",3,"id",4,"ngFor","ngForOf"],[1,"house-wind-rose"],[1,"house-wind-rose-1"],[1,"house-wind-rose-2"],[1,"house-wind-rose-text"],[1,"g-room"],[1,"plan-stair-plan","included-stairs-plan"],[1,"plan-stair-plan"],[1,"g-wall"],[1,"g-door"],[1,"g-window"],[1,"extra"],["id","balcony-edge"],["id","hall-edge"],["id","view-lines"],["id","central-void","filter","url(#inset-shadow)"],["id","tower-walls"],["id","roof-line-1"],["id","roof-line-2"],["id","roof-line-3"],["id","roof-line-4"],["id","roof-line-5"],[1,"house-measure"],["id","house-total-height"],["id","house-total-width"],["id","house-width-1"],["id","house-width-2"],["id","house-width-3"],["id","house-height-1"],["id","house-height-2"],["id","house-height-inner"],["id","house-height-3"],[1,"g-sensor"],["class","sensor-cable",3,"id",4,"ngFor","ngForOf"],["class","sensor-g",3,"id",4,"ngFor","ngForOf"],[1,"g-example"],["class","example-g",3,"id",4,"ngFor","ngForOf"],[1,"render-img"],[1,"g-sun"],["id","g-distance"],[3,"id"],[1,"grid-vertical",3,"id"],[1,"grid-horizontal",3,"id"],[1,"wall-left"],[1,"wall-right"],[1,"wall-fill"],[1,"wall-origin"],[1,"door-wall-opening"],[1,"door-swing"],[1,"window-wall-opening"],[1,"window-pane"],[1,"sensor-cable",3,"id"],[1,"sensor-g",3,"id"],[1,"sensor-icon",3,"id"],[1,"example-g",3,"id"]],template:function(t,i){1&t&&(ko(),H(0,"svg",0,1)(2,"defs")(3,"linearGradient",2),$e(4,"stop",3)(5,"stop",4)(6,"stop",5),N(),H(7,"filter",6),$e(8,"feGaussianBlur",7)(9,"feComposite",8)(10,"feFlood",9)(11,"feComposite",10),H(12,"feComponentTransfer",11),$e(13,"feFuncA",12),N()()(),H(14,"g",13)(15,"g",14),Wt(16,Dnt,1,1,"g",15),N(),H(17,"g",16)(18,"g",17),$e(19,"polyline",18)(20,"polyline",19)(21,"polyline",20)(22,"polyline",21)(23,"polyline",22)(24,"polyline",23)(25,"polyline",24)(26,"polyline",25),N(),H(27,"g",26),$e(28,"polyline",27)(29,"polyline",28)(30,"polyline",29)(31,"polyline",30)(32,"polyline",31)(33,"polyline",32)(34,"polyline",33)(35,"polyline",34)(36,"polyline",35)(37,"polyline",36),N(),H(38,"g",37),$e(39,"polyline",38)(40,"polyline",39)(41,"polyline",40)(42,"polyline",41)(43,"polyline",42)(44,"polyline",43)(45,"polyline",44)(46,"polyline",45),N()(),H(47,"g",46),Wt(48,Int,1,1,"polyline",47),Wt(49,Bnt,1,1,"polyline",48),N(),H(50,"g",49),$e(51,"polygon",50)(52,"polygon",51)(53,"text",52),N(),H(54,"g",53),Wt(55,Rnt,1,1,"g",15),N(),H(56,"g",54),$e(57,"svg",55),N(),H(58,"g",56),Wt(59,Fnt,5,1,"g",15),N(),H(60,"g",57),Wt(61,knt,3,1,"g",15),N(),H(62,"g",58),Wt(63,Pnt,3,1,"g",15),N(),H(64,"g",59),$e(65,"polyline",60)(66,"polyline",61)(67,"polyline",62)(68,"polygon",63)(69,"polygon",64)(70,"polyline",65)(71,"polyline",66)(72,"polyline",67)(73,"polyline",68)(74,"polyline",69),N(),H(75,"g",70),$e(76,"g",71)(77,"g",72)(78,"g",73)(79,"g",74)(80,"g",75)(81,"g",76)(82,"g",77)(83,"g",78)(84,"g",79),N(),H(85,"g",80),Wt(86,Hnt,1,1,"polyline",81),Wt(87,znt,2,2,"g",82),N(),H(88,"g",83),Wt(89,Ont,1,1,"g",84),N(),$e(90,"image",85)(91,"g",86)(92,"g",87),N()()),2&t&&(BA(i.graphic),Z(16),Ce("ngForOf",i.SensorTypes),Z(32),Ce("ngForOf",Eu(13,Moe).constructor(55)),Z(1),Ce("ngForOf",Eu(14,Moe).constructor(55)),Z(6),Ce("ngForOf",i.roomKeys),Z(4),Ce("ngForOf",i.wallKeys),Z(2),Ce("ngForOf",i.doorKeys),Z(2),Ce("ngForOf",i.windowKeys),Z(23),Ce("ngForOf",i.sensorKeys),Z(1),Ce("ngForOf",i.sensorKeys),Z(2),Ce("ngForOf",i.exampleKeys))},dependencies:[p3],styles:[".print-preview{position:absolute!important;top:0;height:auto!important}  .floor-top .included-stairs-plan .floor-clip{clip-path:inherit}  .included-stairs-plan{pointer-events:none}  .sensor-water-cold,   .sensor-dimmer,   .sensor-pir,   .sensor-vent-out,   .sensor-ethernet,   .sensor-perilex,   .sensor-light-switch{fill:var(--primary-color)}  .sensor-water-cold.sensor-cable,   .sensor-dimmer.sensor-cable,   .sensor-pir.sensor-cable,   .sensor-vent-out.sensor-cable,   .sensor-ethernet.sensor-cable,   .sensor-perilex.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--primary-color)!important}  .sensor-water-warm,   .sensor-vent-in,   .sensor-camera,   .sensor-poe,   .sensor-socket,   .sensor-light-bulb{fill:var(--accent-color)}  .sensor-water-warm.sensor-cable,   .sensor-vent-in.sensor-cable,   .sensor-camera.sensor-cable,   .sensor-poe.sensor-cable,   .sensor-socket.sensor-cable,   .sensor-light-bulb.sensor-cable{stroke:var(--accent-color)!important}  .sensor-drain,   .sensor-alarm,   .sensor-light-switch{fill:var(--first-color)}  .sensor-drain.sensor-cable,   .sensor-alarm.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--first-color)!important}  .sensor-shower,   .sensor-dlc,   .sensor-wifi,   .sensor-blinds{fill:var(--second-color)}  .sensor-shower.sensor-cable,   .sensor-dlc.sensor-cable,   .sensor-wifi.sensor-cable,   .sensor-blinds.sensor-cable{stroke:var(--second-color)!important}  .sensor-water-rain,   .sensor-temperature{fill:var(--third-color)}  .sensor-water-rain.sensor-cable,   .sensor-temperature.sensor-cable{stroke:var(--third-color)!important}  .sensor-smoke{fill:#a80000}  .sensor-smoke.sensor-cable{stroke:#a80000!important}  .selection-active .g-sensor>*:not(.selected){opacity:0!important}  svg.house2D{height:100%;width:100%;position:relative}  svg.house2D polyline[id^=roof-line-]{fill:none;stroke:var(--primary-color)}  svg.house2D #hall-edge,   svg.house2D #balcony-edge{stroke:var(--color-60)}  svg.house2D .g-sun{transition:.4s;opacity:0}  svg.house2D .g-sun g{transform-origin:center;fill:#fdc865}  svg.house2D #view-lines{fill:none;stroke:var(--primary-color);opacity:0}  svg.house2D .render-img{pointer-events:none;transition:.4s;opacity:0}  svg.house2D .house-wind-rose{fill:none;transition:.4s,stroke-width 1ms;stroke:#000;stroke-linecap:square}  svg.house2D #tower-walls{fill:var(--accent-color);stroke:none;pointer-events:none;opacity:.6}  svg.house2D .house-stramien{transition:.4s,stroke-width 1ms;stroke:var(--first-color);stroke-linecap:square}  svg.house2D .house-stramien .house-stramien-out{stroke:var(--second-color)}  svg.house2D .house-stramien .house-stramien-top,   svg.house2D .house-stramien .house-stramien-ground{stroke:var(--accent-color)}  svg.house2D .house-wind-rose{opacity:0}  svg.house2D .house-wind-rose .house-wind-rose-text{stroke:none;fill:currentColor}  svg.house2D .house-wind-rose .house-wind-rose-1{fill:currentColor}  svg.house2D .g-grid .grid-main{stroke:var(--color-50)}  svg.house2D .g-grid .grid-sub{stroke:var(--color-10)}  svg.house2D .g-grid .grid-subsub{stroke:var(--color-30)}  svg.house2D .g-sensor polyline{transition:.5s;fill:none;stroke:#00f}  svg.house2D .g-sensor polyline.cable-connection{stroke:#079372}  svg.house2D .g-example svg *{stroke:var(--color-70)!important}  svg.house2D .g-example .svg-Table *{stroke:var(--color-10)}  svg.house2D .g-example .svg-Table path{fill:var(--color-20)!important;stroke:var(--color-10)}  svg.house2D .g-example .svg-Table ellipse{fill:var(--color-30)!important}  svg.house2D .g-room .room-hole polygon{fill:var(--color-20)}  svg.house2D .g-room polygon{stroke:none!important;transition:.4s;fill:var(--color-0)}  svg.house2D .g-room polygon:hover{fill:var(--primary-lighter-color)}  svg.house2D .g-room polygon.selected{fill:var(--primary-color)}  svg.house2D .g-room text{fill:var(--color-80)}  svg.house2D .g-wall{transition:.4s;opacity:1}  svg.house2D .g-wall .selected polygon{fill:var(--primary-color)}  svg.house2D .g-wall .selected circle{opacity:1}  svg.house2D .g-wall polygon{transition:.5s;fill-rule:nonzero}  svg.house2D .g-wall polygon:hover{fill:var(--primary-lighter-color)}  svg.house2D .g-wall circle{stroke:none;fill:var(--color-50);opacity:0}  svg.house2D .g-wall .type-outer{fill:var(--color-30);stroke:var(--color-60)}  svg.house2D .g-wall .type-outer .side-out{stroke:var(--color-60)}  svg.house2D .g-wall .side-out{transition:.6s}  svg.house2D .g-wall .type-inner{fill:var(--color-20);stroke:#565656}  svg.house2D .g-wall .type-theoretic{opacity:1;stroke:#0091b6;stroke-width:3px}  svg.house2D .g-wall .wall-fill{stroke:none}  svg.house2D .g-door g{transition:opacity .4s}  svg.house2D .g-door polygon{transition:.5s;fill:var(--color-0);stroke:none}  svg.house2D .g-door path{fill:none;stroke:var(--color-70);stroke-linecap:square}  svg.house2D .g-window polygon{transition:.5s;fill:var(--color-20);stroke:var(--color-60)}  svg.house2D .g-window path{fill:none;stroke:var(--color-60);stroke-linecap:square}  svg.house2D .plan-stair-plan #walk-line,   svg.house2D .plan-stair-plan .measure-stair{display:none}  .section-welcome:not(.fullscreen) .render-img{opacity:1!important}  .section-welcome:not(.fullscreen) .room-function-text{opacity:0!important}  .section-basics .house-wind-rose,   .section-basics .g-grid{transition:2s;opacity:.7!important}  .section-tower .room-f{transition:2s;fill:var(--primary-color)!important}  .tag-base-dimension #L0-outer-WestWall-3 .side-out,   .tag-base-dimension #L0-outer-NorthWall .side-out,   .tag-base-dimension #L0-outer-SouthWall-2 .side-out,   .tag-base-dimension #L0-outer-EastWall-2 .side-out{transition:.4s;stroke-width:1!important;stroke:var(--primary-color)!important;stroke-linecap:round}  .tag-orientation .main-stop{stop-color:#fdc865}  .tag-orientation .alt-stop{stop-color:var(--color-0)}  .tag-orientation .house-wind-rose{opacity:.7!important}  .tag-orientation #L0-Central{fill:#fdc865!important}  .tag-orientation #L0-West,   .tag-orientation #L0-Central,   .tag-orientation #L0-East{shape-rendering:crispEdges;fill:url(#MyGradient)!important}  .tag-orientation .g-sun{opacity:.7!important}  .tag-orientation .g-sun g{animation:spin-animation 12s infinite}  .tag-insulated .g-wall *:not(.type-inner) polygon{fill:var(--primary-color);stroke:none!important}  .tag-viewlines #view-lines{opacity:.7!important}@keyframes spin-animation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),n})();function Vnt(n,e){1&n&&(ko(),$e(0,"circle",42)),2&n&&Ms("id","roof-point-",e.$implicit,"")}function Unt(n,e){1&n&&(ko(),$e(0,"circle",42)),2&n&&Ms("id","debug-point-",e.$implicit,"")}const Soe=function(n){return{opacity:n}},Gnt=function(){return[0,1,2,3,4,5,6,7,8,9,10]},Qnt=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]};let Wnt=(()=>{class n extends kS{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.marginInMeters=[3,3,3,3],this.graphic=yo.cross,this.RoofStyle=Ul}ngAfterViewInit(){this.loadFigure(),this.setUp()}loadFigure(){this.figure=this.d3Service.loadSVG("assets/models/dude.svg",".g-figure",t=>{let s,o,a;const c=.3913732394366197;[_t.roofBasics].includes(this.section)?(s=this.house$.value.cross.elevations[Mi.groundFloor],o=3*this.house$.value.cross.topFloorThickness,a=!0):(s=this.house$.value.cross.elevations[Mi.topFloor],o=this.house$.value.cross.innerWidth/2-c/2+.5,a=!1),ro(t).selectChild("svg").attr("height","1.9px").attr("y",-s-1.9+"px").attr("x",o+"px").attr("width",c+"px").selectChild("g").attr("transform",a?"translate(117,0) scale(-1 1)":"")})}svgUpdateMarginAndSize(){this.svgHouseSize=[[0,-this.cross.elevations[Dt.topOutside]],[this.house.outerBase,-this.cross.elevations[Mi.crawlerFloor]+this.cross.elevations[Dt.topOutside]]],this.marginInMeters=[3,3,3,3],this.drawBendPoint(),this.figure.update()}debugDrawPoints(){this.house.cross.pointOf70Roof().forEach((t,i)=>{ro(`#debug-point-${i}`).attr("cx",t[0]).attr("cy",-t[1]).attr("r",.051).style("fill","var(--primary-color)").attr("stroke-width",0)})}drawBendPoint(){const i=this.cross.elevations[Mi.topFloor];ro("#bend-point__h-line").attr("points",[[0,-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i+this.cross.bendPoint[1]+.1]].join(" ")).attr("stroke-width",2*this.meterPerPixel),ro("#bend-point__h-point").attr("cx",this.cross.bendPoint[0]).attr("cy",-i+this.cross.bendPoint[1]).attr("r",.1).attr("stroke-width",2*this.meterPerPixel)}roofCheck(t){return this.section===_t.roof70?t===Ul.roof70?1:0:this.section===_t.roofCircle?t===Ul.roofCircle?1:0:[Ul.roofCircleAnd70,t].includes(this.house$.value.cross.roofStyle)?1:0}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(Mo),U(Bg),U(dn),U(b_),U(W5),U(Zg))},n.\u0275cmp=Bn({type:n,selectors:[["app-svg-cross"]],features:[Ot],decls:44,vars:10,consts:[["preserveAspectRatio","xMidYMid meet",1,"cross"],["svg",""],["id","diagonalHatch","patternUnits","userSpaceOnUse","width","4","height","4","patternTransform","scale(0.1)"],["d","M-1,1 l2,-2\n               M0,4 l4,-4\n               M3,5 l2,-2",2,"stroke","black","stroke-width","0.1"],["transform","rotate(0)",1,"all"],[1,"g-figure"],[1,"g-building"],["id","building-walls"],["id","building-room"],["id","building-crawler"],["id","building-ground-line"],["id","building-fill"],["id","building-ground-fill"],["id","building-ground","fill","url(#diagonalHatch)"],[1,"g-roof-circle",3,"ngStyle"],["id","building-roof-circle-wall1"],["id","building-roof-circle-wall2"],["id","roof-circle","clip-path","url(#clip-roof2)"],["id","roof-circle-shadow"],["id","roof-circle-fill"],[1,"g-roof-70",3,"ngStyle"],["id","building-roof-70-wall1"],["id","building-roof-70-wall2"],["id","roof-70","clip-path","url(#clip-roof2)"],["id","roof-70-fill"],["id","roof-70-shadow"],[1,"g-helper"],[3,"id",4,"ngFor","ngForOf"],[1,"g-h-circle-roof"],["id","roof-circle__h-line"],["id","roof-circle__h-circle"],[1,"g-h-bend-point"],["id","bend-point__h-line"],["id","bend-point__h-point"],[1,"cross-measure"],["id","lower-roof"],["id","higher-roof"],["id","minimum"],["id","minimum-h"],["id","minimum-room"],["id","minimum-room-h"],["id","g-distance"],[3,"id"]],template:function(t,i){1&t&&(ko(),H(0,"svg",0,1)(2,"defs")(3,"pattern",2),$e(4,"path",3),N()(),H(5,"g",4),$e(6,"g",5),H(7,"g",6),$e(8,"polygon",7)(9,"polygon",8)(10,"polygon",9)(11,"polyline",10)(12,"polygon",11)(13,"polygon",12)(14,"polygon",13),N(),H(15,"g",14),$e(16,"polygon",15)(17,"polygon",16)(18,"polygon",17)(19,"polygon",18)(20,"polygon",19),N(),H(21,"g",20),$e(22,"polygon",21)(23,"polygon",22)(24,"polygon",23)(25,"polygon",24)(26,"polygon",25),N(),H(27,"g",26),Wt(28,Vnt,1,1,"circle",27),H(29,"g",28),$e(30,"polyline",29)(31,"path",30),N(),H(32,"g",31),$e(33,"polyline",32)(34,"circle",33),N()(),H(35,"g",34),$e(36,"g",35)(37,"g",36)(38,"g",37)(39,"g",38)(40,"g",39)(41,"g",40),N(),Wt(42,Unt,1,1,"circle",27),$e(43,"g",41),N()()),2&t&&(Z(15),Ce("ngStyle",f3(4,Soe,i.roofCheck(i.RoofStyle.roofCircle))),Z(6),Ce("ngStyle",f3(6,Soe,i.roofCheck(i.RoofStyle.roof70))),Z(7),Ce("ngForOf",Eu(8,Gnt)),Z(14),Ce("ngForOf",Eu(9,Qnt)))},dependencies:[p3,zh,U7],styles:["svg.cross{width:100%;height:100%;position:relative}  svg.cross *[id*=-fill]{stroke:none;opacity:0}  svg.cross *[id*=-fill]#building-ground-fill{opacity:1;fill:var(--color-0)}  svg.cross *{transition:fill .4s}  svg.cross .g-roof-circle,   svg.cross .g-roof-70,   svg.cross .g-building{stroke:var(--color-70);fill:var(--color-30)}  svg.cross .g-roof-circle #building-crawler,   svg.cross .g-roof-circle #building-room,   svg.cross .g-roof-70 #building-crawler,   svg.cross .g-roof-70 #building-room,   svg.cross .g-building #building-crawler,   svg.cross .g-building #building-room{fill:var(--color-0)}  svg.cross .g-helper>*{stroke:var(--primary-color)!important;opacity:0;fill:none}  svg.cross .g-helper>*[id^=roof-point-]{opacity:1!important}  .section-roof-basics #building-ground-fill{fill:transparent!important}  .tag-roof-both #roof-70-shadow,   .section-roof-choice #roof-70-shadow{opacity:.6;fill:var(--primary-color)!important}  .tag-roof-both #roof-circle-shadow,   .section-roof-choice #roof-circle-shadow{opacity:1;fill:var(--accent-color)!important}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-silhouette #building-roof-circle-wall1,   .state-silhouette #building-roof-circle-wall2,   .state-silhouette #building-roof-70-wall1,   .state-silhouette #building-roof-70-wall2,   .state-silhouette *[id*=-fill]:not(#building-ground-fill){fill:var(--color-90)!important;opacity:1!important;stroke:var(--color-90)!important}  .state-silhouette *[id*=-shadow]{stroke:var(--color-90)!important;fill:var(--color-90)!important}"]}),n})();function jnt(n,e){1&n&&(ko(),H(0,"g",16),$e(1,"polygon",17)(2,"polygon",18)(3,"text",19),N()),2&n&&Ms("id","step-",e.index,"")}const $nt=function(){return[]};let qnt=(()=>{class n extends kS{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,a,c,l),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.httpClient=o,this.d3Service=a,this.d3DistanceService=c,this.contextMenuService=l,this.graphic=yo.stairCross,this.floor=tt.all,this.steps=new no(1)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){const t=this.stair.totalRise/Math.tan(Math.PI/180*30);[_t.stairCheck,_t.stairPlan].includes(this.section)?this.svgHouseSize=[[5*this.stair.run,9*-this.stair.rise],[4*this.stair.run,4*this.stair.rise]]:(this.svgHouseSize=[[-this.stair.run,-this.stair.totalRise],[t,this.stair.totalRise+this.stair.floorThickness]],this.marginInPixels=[40,40,80,40]),this.marginInMeters=[0,2*this.stair.run,0,0],[_t.stairPlan].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(Mo),U(Bg),U(dn),U($h),U(b_),U(W5),U(Zg))},n.\u0275cmp=Bn({type:n,selectors:[["app-svg-stair-steps"]],features:[Ot],decls:17,vars:5,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-step"],["svg",""],[1,"g-building"],["id","floor-groundfloor"],["id","floor-topfloor-shadow"],["id","floor-topfloor"],[1,"g-step"],[3,"id",4,"ngFor","ngForOf"],[1,"g-helper"],["id","nose-line"],["id","back-line"],["id","run-size",1,"measure"],["id","rise-size",1,"measure"],["id","total-run-size",1,"measure"],["id","total-rise-size",1,"measure"],["id","g-distance"],[3,"id"],[1,"step-run"],[1,"step-rise"],[1,"step-text"]],template:function(t,i){1&t&&(ko(),H(0,"svg",0,1)(2,"g")(3,"g",2),$e(4,"polygon",3)(5,"polygon",4)(6,"polygon",5),N(),H(7,"g",6),Wt(8,jnt,4,1,"g",7),N(),H(9,"g",8),$e(10,"path",9)(11,"path",10)(12,"g",11)(13,"g",12)(14,"g",13)(15,"g",14),N(),$e(16,"g",15),N()()),2&t&&(BA(i.graphic),Z(8),Ce("ngForOf",Eu(4,$nt).constructor(25)))},dependencies:[p3],styles:["svg.stairs-step{width:100%;height:100%;position:relative;transition:.2s}  svg.stairs-step .g-helper,   svg.stairs-step .g-building,   svg.stairs-step .g-step{fill:var(--color-80);transition:.4s,stroke-width 1ms;stroke:var(--color-100)}  svg.stairs-step .g-step{fill:var(--color-100);stroke:none}  svg.stairs-step .g-step text{transition:.4s;opacity:0}  svg.stairs-step #back-line,   svg.stairs-step #nose-line{stroke:var(--color-30)}  svg.stairs-step .g-building{stroke:none;fill:var(--color-20)}  svg.stairs-step .g-building #floor-topfloor-shadow{fill:var(--color-5)}  svg.stairs-step .measure text{stroke:var(--color-0);paint-order:stroke}  svg.stairs-step .measure#rise-size,   svg.stairs-step .measure#run-size{transition:.4s 0s;opacity:0}  .section-stair-check #rise-size,   .section-stair-check #run-size{transition:.4s .6s!important;opacity:1!important}  .section-stair-check #step-8 polygon:nth-of-type(2),   .section-stair-check #step-7 polygon{fill:var(--accent)}  .tag-amount-steps text{opacity:1!important}  .tag-amount-steps .measure{opacity:0}"]}),n})();function Knt(n,e){if(1&n&&(ko(),H(0,"g",18),$e(1,"polygon",19)(2,"polyline",20)(3,"text",21)(4,"circle",22),N()),2&n){const t=e.index;Ms("id","step-plan-",t,""),Z(4),Ms("id","step-stinger-",t,"")}}function Xnt(n,e){1&n&&(ko(),$e(0,"circle",23)),2&n&&Ms("id","walk-line-",e.index,"")}function Ynt(n,e){1&n&&(ko(),H(0,"g",24),$e(1,"g",25)(2,"g",26)(3,"g",27)(4,"g",28)(5,"g",29),N())}const Eoe=function(){return[]};function Znt(n,e){if(1&n&&(ko(),H(0,"g",9)(1,"g",10),Wt(2,Knt,5,2,"g",11),N(),H(3,"g",12),$e(4,"path",13),Wt(5,Xnt,1,1,"circle",14),N(),$e(6,"polygon",15),Wt(7,Ynt,6,0,"g",16),$e(8,"g",17),N()),2&n){const t=Nt();Z(2),Ce("ngForOf",Eu(3,Eoe).constructor(25)),Z(3),Ce("ngForOf",Eu(4,Eoe).constructor(25)),Z(2),Ce("ngIf",!t.isChild)}}let Jnt=(()=>{class n extends kS{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.graphic=yo.stairPlan,this.floor=tt.all,this.marginInMeters=[0,0,0,0],this.marginInPixels=[64,64,0,0],this.steps=new no(25)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){this.svgHouseSize=[this.stair.stairOrigin,[this.stair.totalWidth,this.stair.totalHeight]],this.marginInMeters=[2*this.stair.run,2*this.stair.run,2*this.stair.run,2*this.stair.run],[_t.stairStart,_t.stairBasic,_t.stairCheck].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(Mo),U(Bg),U(dn),U(b_),U(W5),U(Zg))},n.\u0275cmp=Bn({type:n,selectors:[["app-svg-stair-plan"]],features:[Ot],decls:11,vars:6,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-plan"],["svg",""],["id","clip-roof-ref"],["id","clip-ground-floor-ref"],["id","clip-roof"],[0,"xlink","href","#clip-roof-ref","overflow","visible"],["id","clip-ground-floor"],[0,"xlink","href","#clip-ground-floor-ref","overflow","visible"],["class","floor-clip","clip-path","url(#clip-ground-floor)",4,"ngIf"],["clip-path","url(#clip-ground-floor)",1,"floor-clip"],[1,"g-step-plan"],[3,"id",4,"ngFor","ngForOf"],[1,"g-walk-line"],["id","walk-line"],["class","walk-line-dot",3,"id",4,"ngFor","ngForOf"],["id","outline",1,"outline"],["class","measure-stair",4,"ngIf"],["id","g-distance"],[3,"id"],[1,"step-plan-lines"],[1,"step-plan-rise"],[1,"step-plan-text"],[1,"step-stinger",3,"id"],[1,"walk-line-dot",3,"id"],[1,"measure-stair"],["id","plateau-width"],["id","mid-width"],["id","total-width"],["id","total-height"],["id","lesser-height"]],template:function(t,i){1&t&&(ko(),H(0,"svg",0,1)(2,"defs"),$e(3,"polygon",2)(4,"polygon",3),N(),H(5,"clipPath",4),$e(6,"use",5),N(),H(7,"clipPath",6),$e(8,"use",7),N(),Wt(9,Znt,9,5,"g",8),_a(10,"async"),N()),2&t&&(BA(i.graphic),Z(9),Ce("ngIf",B1(10,4,i.house$)))},dependencies:[p3,g3,Cd],styles:["[_nghost-%COMP%]     .floor-clip{clip-path:inherit}  svg.stairs-plan{width:100%;height:100%;position:relative;transition:.4s}  svg.stairs-plan .left-corner-line,   svg.stairs-plan .right-corner-line,   svg.stairs-plan .middleLine{stroke:var(--primary-color)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .outline,   svg.stairs-plan .step-plan-lines{fill:none;stroke:var(--color-50)}  svg.stairs-plan .step-plan-lines{fill:var(--color-5);stroke:var(--color-50)}  svg.stairs-plan .outline{stroke:var(--color-10)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .step-stinger,   svg.stairs-plan .walk-line-dot,   svg.stairs-plan .walk-line,   svg.stairs-plan .step-plan-text{display:none}  .section-stair-plan .step-plan-rise,   .section-stair-plan .step-stinger,   .section-stair-plan .walk-line-dot,   .section-stair-plan .walk-line,   .section-stair-plan .step-plan-text{display:initial!important}  .section-stair-plan .walk-line-dot{opacity:0;fill:var(--first-color)}  .section-stair-plan #walk-line{fill:none;transition:0s;opacity:0;stroke:var(--first-color)}  .section-stair-plan .step-stinger{opacity:0;fill:var(--third-color)}  .section-stair-plan .step-plan-text{display:initial}  .section-stair-plan .step-plan-rise{stroke-dasharray:1%}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-walkLine .walk-line-dot,   .state-walkLine .step-stinger,   .state-walkLine #walk-line{opacity:1}"]}),n})();var b1e={prefix:"fas",iconName:"temperature-high",icon:[512,512,[],"f769","M416 128c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm0 64c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96s43 96 96 96zM96 112c0-26.5 21.5-48 48-48s48 21.5 48 48V276.5c0 17.3 7.1 31.9 15.3 42.5C217.8 332.6 224 349.5 224 368c0 44.2-35.8 80-80 80s-80-35.8-80-80c0-18.5 6.2-35.4 16.7-48.9C88.9 308.4 96 293.8 96 276.5V112zM144 0C82.1 0 32 50.2 32 112V276.5c0 .1-.1 .3-.2 .6c-.2 .6-.8 1.6-1.7 2.8C11.2 304.2 0 334.8 0 368c0 79.5 64.5 144 144 144s144-64.5 144-144c0-33.2-11.3-63.8-30.1-88.1c-.9-1.2-1.5-2.2-1.7-2.8c-.1-.3-.2-.5-.2-.6V112C256 50.2 205.9 0 144 0zm0 416c26.5 0 48-21.5 48-48c0-20.9-13.4-38.7-32-45.3V112c0-8.8-7.2-16-16-16s-16 7.2-16 16V322.7c-18.6 6.6-32 24.4-32 45.3c0 26.5 21.5 48 48 48z"]},Gle={prefix:"fas",iconName:"mound",icon:[576,512,[],"e52d","M144.1 179.2C173.8 127.7 228.6 96 288 96s114.2 31.7 143.9 83.2L540.4 368c12.3 21.3-3.1 48-27.7 48H63.3c-24.6 0-40-26.6-27.7-48L144.1 179.2z"]};function Zi(){throw new Error("Unimplemented abstract method.")}let Cyt=0;function xr(n){return n.ol_uid||(n.ol_uid=String(++Cyt))}function tue(n){return n[0]>0&&n[1]>0}function h4(n,e){return Array.isArray(n)?n:(void 0===e?e=[n,n]:(e[0]=n,e[1]=n),e)}class Vz{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=h4(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Vz({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Zi()}getImage(e){return Zi()}getHitDetectionImage(){return Zi()}getPixelRatio(e){return 1}getImageState(){return Zi()}getImageSize(){return Zi()}getOrigin(){return Zi()}getSize(){return Zi()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=h4(e)}listenImageChange(e){Zi()}load(){Zi()}unlistenImageChange(e){Zi()}}const nue=Vz,xyt={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class Myt extends Error{constructor(e){const t=xyt[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const iue=Myt;function ms(n,e){if(!n)throw new iue(e)}function oc(n,e,t){return Math.min(Math.max(n,e),t)}function Syt(n,e,t,i,r,s){const o=r-t,a=s-i;if(0!==o||0!==a){const c=((n-t)*o+(e-i)*a)/(o*o+a*a);c>1?(t=r,i=s):c>0&&(t+=o*c,i+=a*c)}return Lf(n,e,t,i)}function Lf(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function j5(n){return n*Math.PI/180}function m6(n,e){const t=n%e;return t*e<0?t+e:t}function Df(n,e,t){return n+t*(e-n)}function ZS(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function JS(n,e){return Math.floor(ZS(n,e))}function eE(n,e){return Math.ceil(ZS(n,e))}const rue=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,sue=/^([a-z]*)$|^hsla?\(.*\)$/i;function oue(n){return"string"==typeof n?n:lue(n)}const Tyt=function(){const e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=1024){let s=0;for(const o in e)0==(3&s++)&&(delete e[o],--t)}r=function Lyt(n){let e,t,i,r,s;if(sue.exec(n)&&(n=function aue(n){const e=document.createElement("div");if(e.style.color=n,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(n)),rue.exec(n)){const o=n.length-1;let a;a=o<=4?1:2;const c=4===o||8===o;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),r=c?parseInt(n.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,c&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),cue(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),cue(s)):ms(!1,14);return s}(i),e[i]=r,++t}return r}}();function tE(n){return Array.isArray(n)?n:Tyt(n)}function cue(n){return n[0]=oc(n[0]+.5|0,0,255),n[1]=oc(n[1]+.5|0,0,255),n[2]=oc(n[2]+.5|0,0,255),n[3]=oc(n[3],0,1),n}function lue(n){let e=n[0];e!=(0|e)&&(e=e+.5|0);let t=n[1];t!=(0|t)&&(t=t+.5|0);let i=n[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+t+","+i+","+(void 0===n[3]?1:Math.round(100*n[3])/100)+")"}function sh(n){return Array.isArray(n)?lue(n):n}const A6=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Dyt=A6.includes("firefox"),Iyt=(A6.includes("safari")&&!A6.includes("chrom")&&(A6.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(A6)),A6.includes("webkit")&&!A6.includes("edge")),Byt=A6.includes("macintosh"),uue=typeof devicePixelRatio<"u"?devicePixelRatio:1,Uz=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Ryt=typeof Image<"u"&&Image.prototype.decode,hue=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function f4(n,e,t,i){let r;return r=t&&t.length?t.shift():Uz?new OffscreenCanvas(n||300,e||300):document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function fue(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Fyt(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function kyt(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function due(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function nE(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function pue(n){for(;n.lastChild;)n.removeChild(n.lastChild)}const L3=class Hyt{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},Gz=class zyt{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function $5(n,e){return n>e?1:n<e?-1:0}function iE(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;{let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return"function"==typeof t?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}}function Nyt(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Xu(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function v6(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function oh(){return!0}function em(){return!1}function q5(){}function tm(n){for(const e in n)delete n[e]}function nm(n){let e;for(e in n)return!1;return!e}const L_=class Gyt extends Gz{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t="string"==typeof e,i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new L3(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let c;i in o||(o[i]=0,a[i]=0),++o[i];for(let l=0,u=r.length;l<u;++l)if(c="handleEvent"in r[l]?r[l].handleEvent(s):r[l].call(this,s),!1===c||s.propagationStopped){c=!1;break}if(0==--o[i]){let l=a[i];for(delete a[i];l--;)this.removeEventListener(i,q5);delete o[i]}return c}disposeInternal(){this.listeners_&&tm(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);-1!==r&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=q5,++this.pendingRemovals_[e]):(i.splice(r,1),0===i.length&&delete this.listeners_[e]))}}};function Rs(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function rE(n,e,t,i){return Rs(n,e,t,i,!0)}function pa(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),tm(n))}const gue=class sE extends L_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Rs(this,e[s],t);return r}return Rs(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=rE(this,e[s],t)}else i=rE(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)!function Qyt(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)pa(n[e]);else pa(n)}(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}};class mue extends L3{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}const Yu=class Wyt extends gue{constructor(e){super(),xr(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new mue(i,e,t)),i="propertychange",this.hasListener(i)&&this.dispatchEvent(new mue(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],nm(this.values_)&&(this.values_=null),t||this.notify(e,i)}}},oE="ol-hidden",aE="ol-unselectable",Qz="ol-control",Aue="ol-collapsed",$yt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),vue=["style","variant","weight","size","lineHeight","family"],_ue=function(n){const e=n.match($yt);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=vue.length;i<r;++i){const s=e[i+1];void 0!==s&&(t[vue[i]]=s)}return t.families=t.family.split(/,\s?/),t},yue="10px sans-serif",If="#000",cE="round",D_=[],im="round",R_="#000",F_="center",lE="middle",K5=[0,0,0,0],Bf=new Yu;let Wz,rm=null;const jz={},qyt=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";let s,o;function a(l,u,f){let p=!0;for(let g=0;g<i;++g){const _=t[g];if(o=uE(l+" "+u+" "+e+_,r),f!=_){const y=uE(l+" "+u+" "+e+f+","+_,r);p=p&&y!=o}}return!!p}function c(){let l=!0;const u=Bf.getKeys();for(let f=0,p=u.length;f<p;++f){const g=u[f];Bf.get(g)<100&&(a.apply(this,g.split("\n"))?(tm(jz),rm=null,Wz=void 0,Bf.set(g,100)):(Bf.set(g,Bf.get(g)+1,!0),l=!1))}l&&(clearInterval(s),s=void 0)}return function(l){const u=_ue(l);if(!u)return;const f=u.families;for(let p=0,g=f.length;p<g;++p){const _=f[p],y=u.style+"\n"+u.weight+"\n"+_;void 0===Bf.get(y)&&(Bf.set(y,100,!0),a(u.style,u.weight,_)||(Bf.set(y,0,!0),void 0===s&&(s=setInterval(c,32))))}}}(),Kyt=function(){let n;return function(e){let t=jz[e];if(null==t){if(Uz){const i=_ue(e),r=wue(e,"\u017dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);jz[e]=t}return t}}();function wue(n,e){return rm||(rm=f4(1,1)),n!=Wz&&(rm.font=n,Wz=rm.font),rm.measureText(e)}function uE(n,e){return wue(n,e).width}function Cue(n,e,t){if(e in t)return t[e];const i=e.split("\n").reduce((r,s)=>Math.max(r,uE(n,s)),0);return t[e]=i,i}class $z extends nue{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new $z({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=f4(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let r=this.radius_,s=void 0===this.radius2_?r:this.radius2_;if(r<s){const F=r;r=s,s=F}const a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),c=s*Math.sin(a),u=r-Math.sqrt(s*s-c*c),f=Math.sqrt(c*c+u*u),p=f/c;if("miter"===e&&p<=i)return p*t;const g=t/2/p,_=t/2*(u/f),w=Math.sqrt((r+g)*(r+g)+_*_)-r;if(void 0===this.radius2_||"bevel"===e)return 2*w;const C=r*Math.sin(a),M=s-Math.sqrt(r*r-C*C),I=Math.sqrt(C*C+M*M)/C;return I<=i?2*Math.max(w,I*t/2-s-r):2*w}createRenderOptions(){let s,e=im,t=0,i=null,r=0,o=0;this.stroke_&&(s=this.stroke_.getColor(),null===s&&(s=R_),s=sh(s),o=this.stroke_.getWidth(),void 0===o&&(o=1),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=im),t=this.stroke_.getMiterLimit(),void 0===t&&(t=10));const a=this.calculateLineJoinSize_(e,o,t),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:s,strokeWidth:o,size:Math.ceil(2*c+a),lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();null===r&&(r=If),t.fillStyle=sh(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if("string"==typeof t&&(t=tE(t)),null===t?i=1:Array.isArray(t)&&(i=4===t.length?t[3]:1),0===i){const r=f4(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const c=s+a*o,l=a%2==0?i:r;e.lineTo(l*Math.cos(c),l*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=If,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const P_=$z;class qz extends P_{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new qz({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const _6=qz;class Kz{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null}clone(){const e=this.getColor();return new Kz({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const Vo=Kz;class Xz{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Xz({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const Kc=Xz;class y6{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=bue,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new y6({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=bue,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let Yz=null;function ewt(n,e){if(!Yz){const t=new Vo({color:"rgba(255,255,255,0.4)"}),i=new Kc({color:"#3399CC",width:1.25});Yz=[new y6({image:new _6({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Yz}function Zz(){const n={},e=[255,255,255,1],t=[0,153,255,1];return n.Polygon=[new y6({fill:new Vo({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new y6({stroke:new Kc({color:e,width:5})}),new y6({stroke:new Kc({color:t,width:3})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new y6({image:new _6({radius:6,fill:new Vo({color:t}),stroke:new Kc({color:e,width:1.5})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function bue(n){return n.getGeometry()}const P2=y6;class Jz{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=h4(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Vo({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new Jz({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=h4(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Rf=Jz;class hE extends L3{constructor(e,t,i){super(e),this.element=t,this.index=i}}const U1=class nwt extends Yu{constructor(e,t){if(super(),this.unique_=!!(t=t||{}).unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get("length")}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new hE("add",t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new hE("remove",t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new hE("remove",r,e)),this.dispatchEvent(new hE("add",t,e))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new iue(58)}};class eO extends Yu{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new eO(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(pa(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Rs(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function iwt(n){if("function"==typeof n)return n;{let e;return Array.isArray(n)?e=n:(ms("function"==typeof n.getZIndex,41),e=[n]),function(){return e}}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const J4=eO,Qs={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};function Xc(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function Ju(n,e,t,i,r,s,o,a){const c=Math.sin(s),l=Math.cos(s);return n[0]=i*l,n[1]=r*c,n[2]=-i*c,n[3]=r*l,n[4]=o*i*l-a*i*c+e,n[5]=o*r*c+a*r*l+t,n}function z_(n,e){const t=function owt(n){return n[0]*n[3]-n[1]*n[2]}(e);ms(0!==t,32);const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*c-o*a)/t,n[5]=-(i*c-r*a)/t,n}let Mue;function fE(n){const e="matrix("+n.join(", ")+")";if(Uz)return e;const t=Mue||(Mue=document.createElement("div"));return t.style.transform=e,t.style.transform}new Array(6);function eu(n){const e=[1/0,1/0,-1/0,-1/0];for(let t=0,i=n.length;t<i;++t)om(e,n[t]);return e}function dE(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function Sue(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function X5(n,e,t){let i,r;return i=e<n[0]?n[0]-e:n[2]<e?e-n[2]:0,r=t<n[1]?n[1]-t:n[3]<t?t-n[3]:0,i*i+r*r}function O_(n,e){return iO(n,e[0],e[1])}function Ff(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function iO(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function rO(n,e){const o=e[0],a=e[1];let c=0;return o<n[0]?c|=16:o>n[2]&&(c|=4),a<n[1]?c|=8:a>n[3]&&(c|=2),0===c&&(c=1),c}function e0(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Y5(n){return e0(1/0,1/0,-1/0,-1/0,n)}function pE(n,e){const t=n[0],i=n[1];return e0(t,i,t,i,e)}function Eue(n,e,t,i,r){return Due(Y5(r),n,e,t,i)}function sm(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function Tue(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function om(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function Due(n,e,t,i,r){for(;t<i;t+=r)lwt(n,e[t],e[t+1]);return n}function lwt(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function sO(n,e){let t;return t=e(mE(n)),!!(t||(t=e(AE(n)),t)||(t=e(vE(n)),t)||(t=e(Z5(n)),t))&&t}function gE(n){let e=0;return _E(n)||(e=wo(n)*m2(n)),e}function mE(n){return[n[0],n[1]]}function AE(n){return[n[2],n[1]]}function kf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function uwt(n,e){let t;return"bottom-left"===e?t=mE(n):"bottom-right"===e?t=AE(n):"top-left"===e?t=Z5(n):"top-right"===e?t=vE(n):ms(!1,13),t}function oO(n,e,t,i,r){const[s,o,a,c,l,u,f,p]=aO(n,e,t,i);return e0(Math.min(s,a,l,f),Math.min(o,c,u,p),Math.max(s,a,l,f),Math.max(o,c,u,p),r)}function aO(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),c=r*o,l=r*a,u=s*o,f=s*a,p=n[0],g=n[1];return[p-c+f,g-l-u,p-c-f,g-l+u,p+c-f,g+l+u,p+c+f,g+l-u,p-c+f,g-l-u]}function m2(n){return n[3]-n[1]}function w6(n,e,t){const i=t||[1/0,1/0,-1/0,-1/0];return ll(n,e)?(i[0]=n[0]>e[0]?n[0]:e[0],i[1]=n[1]>e[1]?n[1]:e[1],i[2]=n[2]<e[2]?n[2]:e[2],i[3]=n[3]<e[3]?n[3]:e[3]):Y5(i),i}function Z5(n){return[n[0],n[3]]}function vE(n){return[n[2],n[3]]}function wo(n){return n[2]-n[0]}function ll(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function _E(n){return n[2]<n[0]||n[3]<n[1]}function Iue(n,e){const t=e.getExtent(),i=kf(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=wo(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}const J5={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Bue=class mwt{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||J5[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},N_=6378137,am=Math.PI*N_,Awt=[-am,-am,am,am],vwt=[-180,-85,180,85],yE=N_*Math.log(Math.tan(Math.PI/2));class cm extends Bue{constructor(e){super({code:e,units:"m",extent:Awt,global:!0,worldExtent:vwt,getPointResolution:function(t,i){return t/Math.cosh(i[1]/N_)}})}}const Rue=[new cm("EPSG:3857"),new cm("EPSG:102100"),new cm("EPSG:102113"),new cm("EPSG:900913"),new cm("http://www.opengis.net/def/crs/EPSG/0/3857"),new cm("http://www.opengis.net/gml/srs/epsg.xml#3857")];function _wt(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t){e[r]=am*n[r]/180;let s=N_*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>yE?s=yE:s<-yE&&(s=-yE),e[r+1]=s}return e}function ywt(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/am,e[r+1]=360*Math.atan(Math.exp(n[r+1]/N_))/Math.PI-90;return e}const Fue=[-180,-90,180,90],Cwt=6378137*Math.PI/180;class ep extends Bue{constructor(e,t){super({code:e,units:"degrees",extent:Fue,axisOrientation:t,global:!0,metersPerUnit:Cwt,worldExtent:Fue})}}const kue=[new ep("CRS:84"),new ep("EPSG:4326","neu"),new ep("urn:ogc:def:crs:OGC:1.3:CRS84"),new ep("urn:ogc:def:crs:OGC:2:84"),new ep("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ep("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ep("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let wE={},t0={};function CE(n,e,t){const i=n.getCode(),r=e.getCode();i in t0||(t0[i]={}),t0[i][r]=t}function Pue(n,e){const r=e[0],s=e[1],o=r[0],a=r[1],c=s[0],l=s[1],u=c-o,f=l-a,p=0===u&&0===f?0:(u*(n[0]-o)+f*(n[1]-a))/(u*u+f*f||0);let g,_;return p<=0?(g=o,_=a):p>=1?(g=c,_=l):(g=o+p*u,_=a+p*f),[g,_]}function n0(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function cO(n,e){const t=Math.cos(e),i=Math.sin(e),s=n[1]*t+n[0]*i;return n[0]=n[0]*t-n[1]*i,n[1]=s,n}function lm(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function bE(n,e){return Math.sqrt(lm(n,e))}function zue(n,e){if(e.canWrapX()){const t=wo(e.getExtent()),i=function Iwt(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||wo(i),r=Math.floor((n[0]-i[0])/t)),r}(n,e,t);i&&(n[0]-=i*t)}return n}const xE=6371008.8;function lO(n,e,t){t=t||xE;const i=j5(n[1]),r=j5(e[1]),s=(r-i)/2,o=j5(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function uO(n,e){let t=0;for(let i=0,r=n.length;i<r-1;++i)t+=lO(n[i],n[i+1],e);return t}function Oue(n,e){const t=(e=e||{}).radius||xE,i=e.projection||"EPSG:3857",r=n.getType();"GeometryCollection"!==r&&(n=n.clone().transform(i,"EPSG:4326"));let o,a,c,l,u,f,s=0;switch(r){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":o=n.getCoordinates(),s=uO(o,t);break;case"MultiLineString":case"Polygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)s+=uO(o[c],t);break;case"MultiPolygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)for(a=o[c],u=0,f=a.length;u<f;++u)s+=uO(a[u],t);break;case"GeometryCollection":{const p=n.getGeometries();for(c=0,l=p.length;c<l;++c)s+=Oue(p[c],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function ME(n,e){let t=0;const i=n.length;let r=n[i-1][0],s=n[i-1][1];for(let o=0;o<i;o++){const a=n[o][0],c=n[o][1];t+=j5(a-r)*(2+Math.sin(j5(s))+Math.sin(j5(c))),r=a,s=c}return t*e*e/2}function Nue(n,e){const t=(e=e||{}).radius||xE,i=e.projection||"EPSG:3857",r=n.getType();"GeometryCollection"!==r&&(n=n.clone().transform(i,"EPSG:4326"));let o,a,c,l,u,f,s=0;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=n.getCoordinates(),s=Math.abs(ME(o[0],t)),c=1,l=o.length;c<l;++c)s-=Math.abs(ME(o[c],t));break;case"MultiPolygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)for(a=o[c],s+=Math.abs(ME(a[0],t)),u=1,f=a.length;u<f;++u)s-=Math.abs(ME(a[u],t));break;case"GeometryCollection":{const p=n.getGeometries();for(c=0,l=p.length;c<l;++c)s+=Nue(p[c],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}let hO=!0;function Vue(n){hO=!(void 0===n||n)}function fO(n,e,t){if(void 0!==e)for(let i=0,r=n.length;i<r;++i)e[i]=n[i];else e=n.slice();return e}function Uue(n,e,t){if(void 0!==e&&n!==e){for(let i=0,r=n.length;i<r;++i)e[i]=n[i];n=e}return n}function Bwt(n){(function xwt(n,e){wE[n]=e})(n.getCode(),n),CE(n,n,fO)}function Ja(n){return"string"==typeof n?function bwt(n){return wE[n]||wE[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(n):n||null}function Gue(n,e,t,i){let r;const s=(n=Ja(n)).getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/J5[i])}}else{const o=n.getUnits();if("degrees"==o&&!i||"degrees"==i)r=e;else{const a=V_(n,Ja("EPSG:4326"));if(a===Uue&&"degrees"!==o)r=e*n.getMetersPerUnit();else{let l=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];l=a(l,l,2),r=(lO(l.slice(0,2),l.slice(2,4))+lO(l.slice(4,6),l.slice(6,8)))/2}const c=i?J5[i]:n.getMetersPerUnit();void 0!==c&&(r/=c)}}return r}function Que(n){(function Rwt(n){n.forEach(Bwt)})(n),n.forEach(function(e){n.forEach(function(t){e!==t&&CE(e,t,fO)})})}function dO(n,e){return n?"string"==typeof n?Ja(n):n:Ja(e)}function pO(n,e){return Vue(),G_(n,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function Pf(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||V_(n,e)===fO)&&t}function V_(n,e){let r=function Mwt(n,e){let t;return n in t0&&e in t0[n]&&(t=t0[n][e]),t}(n.getCode(),e.getCode());return r||(r=Uue),r}function U_(n,e){return V_(Ja(n),Ja(e))}function G_(n,e,t){return U_(e,t)(n,void 0,n.length)}let Gl=null;function C6(){return Gl}function Q_(n,e){return n}function ac(n,e){return hO&&!n0(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(hO=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function SE(n,e){return n}function ah(n,e){return n}function Hwt(n,e){return n}function tp(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const c=n[a],l=n[a+1];s[o++]=r[0]*c+r[2]*l+r[4],s[o++]=r[1]*c+r[3]*l+r[5]}return s&&s.length!=o&&(s.length=o),s}function gO(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),c=Math.sin(r),l=s[0],u=s[1];let f=0;for(let p=e;p<t;p+=i){const g=n[p]-l,_=n[p+1]-u;o[f++]=l+g*a-_*c,o[f++]=u+g*c+_*a;for(let y=p+2;y<p+i;++y)o[f++]=n[y]}return o&&o.length!=f&&(o.length=f),o}function $ue(n,e,t,i,r,s,o){o=o||[];let a=0;for(let c=e;c<t;c+=i){o[a++]=n[c]+r,o[a++]=n[c+1]+s;for(let l=c+2;l<c+i;++l)o[a++]=n[l]}return o&&o.length!=a&&(o.length=a),o}!function zwt(){Que(Rue),Que(kue),function Fwt(n,e,t,i){n.forEach(function(r){e.forEach(function(s){CE(r,s,t),CE(s,r,i)})})}(kue,Rue,_wt,ywt)}();const que=[1,0,0,1,0,0],Kue=class Nwt extends Yu{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function Uyt(n){let t,i,r,e=!1;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!v6(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Zi()}closestPointXY(e,t,i,r){return Zi()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return this.closestPointXY(e[0],e[1],t=t||[NaN,NaN],1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Zi()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Y5(t),this.extentRevision_=this.getRevision()}return function hwt(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}(this.extent_,e)}rotate(e,t){Zi()}scale(e,t,i){Zi()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Zi()}getType(){return Zi()}applyTransform(e){Zi()}intersectsExtent(e){return Zi()}translate(e,t){Zi()}transform(e,t){const i=Ja(e),r="tile-pixels"==i.getUnits()?function(s,o,a){const c=i.getExtent(),l=i.getWorldExtent(),u=m2(l)/m2(c);return Ju(que,l[0],l[3],u,-u,0,0,0),tp(s,0,s.length,a,que,o),U_(i,t)(s,o,a)}:U_(i,t);return this.applyTransform(r),this}};function EE(n){let e;return"XY"==n?e=2:"XYZ"==n||"XYM"==n?e=3:"XYZM"==n&&(e=4),e}const b6=class Vwt extends Kue{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return Eue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Zi()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=EE(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Zi()}setLayout(e,t,i){let r;if(e)r=EE(e);else{for(let s=0;s<i;++s){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}r=t.length,e=function Uwt(n){let e;return 2==n?e="XY":3==n?e="XYZ":4==n&&(e="XYZM"),e}(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();gO(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){void 0===t&&(t=e),i||(i=kf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();(function Owt(n,e,t,i,r,s,o,a){a=a||[];const c=o[0],l=o[1];let u=0;for(let f=e;f<t;f+=i){const g=n[f+1]-l;a[u++]=c+r*(n[f]-c),a[u++]=l+s*g;for(let _=f+2;_<f+i;++_)a[u++]=n[_]}a&&a.length!=u&&(a.length=u)})(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();$ue(i,0,i.length,r,e,t,i),this.changed()}}};function Xue(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function TE(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function mO(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=TE(n,e,t[o],i);r[s++]=c,e=c}return r.length=s,r}class AO extends b6{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new AO(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=Lf(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=s[c];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return pE(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return iO(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Xue(this.flatCoordinates,0,e),this.changed()}}const d4=AO;function Yue(n){return Math.pow(n,3)}function um(n){return 1-Yue(1-n)}function vO(n){return 3*n*n-2*n*n*n}function Wwt(n){return n}function _O(n,e,t,i){const r=n.getZoom();if(void 0===r)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:void 0!==i?i:250,easing:um})}const hm=class jwt extends Yu{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}};function yO(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return[t/e,i/e]}const Hf=class qwt extends hm{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Qs.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Qs.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Qs.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Qs.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};var Zue=Se(2402);const wO=class Kwt{constructor(e){this.rbush_=new Zue(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[xr(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],c={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=c,this.items_[xr(a)]=c}this.rbush_.load(i)}remove(e){const t=xr(e),i=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(i)}update(e,t){const i=this.items_[xr(t)];sm([i.minX,i.minY,i.maxX,i.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){return this.rbush_.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return nm(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return e0(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}},Jue=class Xwt extends Yu{constructor(e){super(),this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t.opacity=void 0!==e.opacity?e.opacity:1,ms("number"==typeof t.opacity,64),t.visible=void 0===e.visible||e.visible,t.zIndex=e.zIndex,t.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,t.minResolution=void 0!==e.minResolution?e.minResolution:0,t.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,t.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return t.opacity=oc(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==i||t.managed?i:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Zi()}getLayerStatesArray(e){return Zi()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return Zi()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set("extent",e)}setMaxResolution(e){this.set("maxResolution",e)}setMinResolution(e){this.set("minResolution",e)}setMaxZoom(e){this.set("maxZoom",e)}setMinZoom(e){this.set("minZoom",e)}setOpacity(e){ms("number"==typeof e,64),this.set("opacity",e)}setVisible(e){this.set("visible",e)}setZIndex(e){this.set("zIndex",e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};function CO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const W_=class Ywt extends Jue{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(e.source?e.source:null)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(pa(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=Rs(e,"change",this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(t=>t([]))}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(pa(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(pa(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Rs(e,"precompose",function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);ms(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=Rs(this,"change",e.render,e),this.changed())}setSource(e){this.set("source",e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function e0e(n,e,t){return e+":"+n+":"+(t?oue(t):"null")}const DE=new class Zwt{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];0==(3&e++)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=e0e(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=e0e(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function bO(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[rE(i,"load",function(){o=!0,s||e()})];return i.src&&Ryt?(s=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(o?e():t())})):a.push(rE(i,"error",t)),function(){r=!1,a.forEach(pa)}}let j_=null;class nCt extends L_{constructor(e,t,i,r,s,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){j_||(j_=f4(1,1)),j_.drawImage(this.image_,0,0);try{j_.getImageData(0,0,1,1),this.tainted_=!1}catch{j_=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=f4(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=bO(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=oue(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class xO extends nue{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const o=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let a=e.src;ms(!(void 0!==a&&o),4),ms(!o||o&&this.imgSize_,5),(void 0===a||0===a.length)&&o&&(a=o.src||xr(o)),ms(void 0!==a&&a.length>0,6);const c=void 0!==e.src?0:2;this.color_=void 0!==e.color?tE(e.color):null,this.iconImage_=function iCt(n,e,t,i,r,s){let o=DE.get(e,i,s);return o||(o=new nCt(n,e,t,i,r,s),DE.set(e,i,s,o)),o}(o,a,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,c,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null}clone(){const e=this.getScale();return new xO({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!r)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=r[0]),"fraction"==this.anchorYUnits_&&(e[1]*=r[1])}if("top-left"!=this.anchorOrigin_){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+r[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=i[0]-t[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener("change",e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener("change",e)}}const n0e=xO;function i0e(n){return new P2({fill:$_(n,""),stroke:q_(n,""),text:rCt(n),image:sCt(n)})}function $_(n,e){const t=n[e+"fill-color"];if(t)return new Vo({color:t})}function q_(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(t||i)return new Kc({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function rCt(n){const e=n["text-value"];return e?new Rf({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:$_(n,"text-"),backgroundFill:$_(n,"text-background-"),stroke:q_(n,"text-"),backgroundStroke:q_(n,"text-background-")}):void 0}function sCt(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new n0e({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new P_({points:i,fill:$_(n,s),stroke:q_(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new _6({radius:r,fill:$_(n,s),stroke:q_(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const aCt=class oCt extends W_{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new Zue(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){let t;if(void 0===e)t=ewt;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof P2)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const o=e[s];r[s]=o instanceof P2?o:i0e(o)}t=r}else t=i0e(e);this.style_=t,this.styleFunction_=null===e?void 0:function Jyt(n){let e;if("function"==typeof n)e=n;else{let t;Array.isArray(n)?t=n:(ms("function"==typeof n.getZIndex,41),t=[n]),e=function(){return t}}return e}(this.style_),this.changed()}},K_={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},IE=[K_.FILL],M6=[K_.STROKE],np=[K_.BEGIN_PATH],s0e=[K_.CLOSE_PATH],or=K_,o0e=class cCt{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}};function S6(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function X_(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];r[s++]=S6(n,e,c,i,r[s]),e=c}return r.length=s,r}function MO(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];r[s++]=1===c.length&&c[0]===e?[]:X_(n,e,c,i,r[s]),e=c[c.length-1]}return r.length=s,r}const Y_=class lCt extends o0e{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],O_(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let c=a.length;const l=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],f=e[t+1];const p=this.tmpCoordinate_;let _,y,w,g=!0;for(_=t+r;_<i;_+=r)p[0]=e[_],p[1]=e[_+1],w=rO(l,p),w!==y?(g&&(a[c++]=u,a[c++]=f,g=!1),a[c++]=p[0],a[c++]=p[1]):1===w?(a[c++]=p[0],a[c++]=p[1],g=!1):g=!0,u=p[0],f=p[1],y=w;return(s&&g||_===t+r)&&(a[c++]=u,a[c++]=f),c}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const c=i[o],l=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);s.push(l),t=c}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let c,l,u,f,p;switch(s){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),f=[];const g=e.getEndss();p=0;for(let _=0,y=g.length;_<y;++_){const w=[];p=this.drawCustomCoordinates_(c,p,g[_],o,w),f.push(w)}this.instructions.push([or.CUSTOM,a,f,e,i,MO]),this.hitDetectionInstructions.push([or.CUSTOM,a,f,e,r||i,MO]);break;case"Polygon":case"MultiLineString":u=[],c="Polygon"==s?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,e.getEnds(),o,u),this.instructions.push([or.CUSTOM,a,u,e,i,X_]),this.hitDetectionInstructions.push([or.CUSTOM,a,u,e,r||i,X_]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),l=this.appendFlatLineCoordinates(c,0,c.length,o,!1,!1),this.instructions.push([or.CUSTOM,a,l,e,i,S6]),this.hitDetectionInstructions.push([or.CUSTOM,a,l,e,r||i,S6]);break;case"MultiPoint":c=e.getFlatCoordinates(),l=this.appendFlatPointCoordinates(c,o),l>a&&(this.instructions.push([or.CUSTOM,a,l,e,i,S6]),this.hitDetectionInstructions.push([or.CUSTOM,a,l,e,r||i,S6]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),l=this.coordinates.length,this.instructions.push([or.CUSTOM,a,l,e,i]),this.hitDetectionInstructions.push([or.CUSTOM,a,l,e,r||i])}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[or.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[or.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==or.END_GEOMETRY?o=t:s==or.BEGIN_GEOMETRY&&(r[2]=t,Nyt(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=sh(r||If)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=sh(r||R_);const s=t.getLineCap();i.lineCap=void 0!==s?s:cE;const o=t.getLineDash();i.lineDash=o?o.slice():D_;const a=t.getLineDashOffset();i.lineDashOffset=a||0;const c=t.getLineJoin();i.lineJoin=void 0!==c?c:im;const l=t.getWidth();i.lineWidth=void 0!==l?l:1;const u=t.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[or.SET_FILL_STYLE,t];return"string"!=typeof t&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[or.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!v6(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=l)&&(void 0!==i&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=l)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[or.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Sue(this.maxExtent),this.maxLineWidth>0)&&dE(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}};function BE(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const c=new Array(a);c[0]=1,c[a-1]=1;const l=[e,t-i];let u=0;for(;l.length>0;){const f=l.pop(),p=l.pop();let g=0;const _=n[p],y=n[p+1],w=n[f],C=n[f+1];for(let x=p+i;x<f;x+=i){const I=Syt(n[x],n[x+1],_,y,w,C);I>g&&(u=x,g=I)}g>r&&(c[(u-e)/i]=1,p+i<u&&l.push(p,u),u+i<f&&l.push(u,f))}for(let f=0;f<a;++f)c[f]&&(s[o++]=n[e+f*i],s[o++]=n[e+f*i+1]);return o}function ip(n,e){return e*Math.round(n/e)}function gCt(n,e,t,i,r,s,o){if(e==t)return o;let l,u,a=ip(n[e],r),c=ip(n[e+1],r);e+=i,s[o++]=a,s[o++]=c;do{if(l=ip(n[e],r),u=ip(n[e+1],r),(e+=i)==t)return s[o++]=l,s[o++]=u,o}while(l==a&&u==c);for(;e<t;){const f=ip(n[e],r),p=ip(n[e+1],r);if(e+=i,f==l&&p==u)continue;const g=l-a,_=u-c,y=f-a,w=p-c;g*w==_*y&&(g<0&&y<g||g==y||g>0&&y>g)&&(_<0&&w<_||_==w||_>0&&w>_)?(l=f,u=p):(s[o++]=l,s[o++]=u,a=l,c=u,l=f,u=p)}return s[o++]=l,s[o++]=u,o}function c0e(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c];o=gCt(n,e,u,i,r,s,o),a.push(o),e=u}return o}const l0e=class ACt extends Y_{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=void 0!==s.fillStyle,a=void 0!==s.strokeStyle,c=i.length;this.instructions.push(np),this.hitDetectionInstructions.push(np);for(let l=0;l<c;++l){const u=i[l],f=this.coordinates.length,p=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),g=[or.MOVE_TO_LINE_TO,f,p];this.instructions.push(g),this.hitDetectionInstructions.push(g),a&&(this.instructions.push(s0e),this.hitDetectionInstructions.push(s0e)),t=u}return o&&(this.instructions.push(IE),this.hitDetectionInstructions.push(IE)),a&&(this.instructions.push(M6),this.hitDetectionInstructions.push(M6)),t}drawCircle(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([or.SET_FILL_STYLE,If]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([or.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const l=[or.CIRCLE,c];this.instructions.push(np,l),this.hitDetectionInstructions.push(np,l),void 0!==i.fillStyle&&(this.instructions.push(IE),this.hitDetectionInstructions.push(IE)),void 0!==i.strokeStyle&&(this.instructions.push(M6),this.hitDetectionInstructions.push(M6)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([or.SET_FILL_STYLE,If]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([or.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(a,0,o,c),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([or.SET_FILL_STYLE,If]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([or.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,f=o.length;u<f;++u)l=this.drawFlatCoordinatess_(a,l,o[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=ip(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};function vCt(n,e,t,i,r){let u,f,p,g,_,y,w,C,x,M,s=t,o=t,a=0,c=0,l=t;for(f=t;f<i;f+=r){const T=e[f],I=e[f+1];void 0!==_&&(x=T-_,M=I-y,g=Math.sqrt(x*x+M*M),void 0!==w&&(c+=p,u=Math.acos((w*x+C*M)/(p*g)),u>n&&(c>a&&(a=c,s=l,o=f),c=0,l=f-r)),p=g,w=x,C=M),_=T,y=I}return c+=g,c>a?[l,f]:[s,o]}const Z_={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},yCt={Circle:l0e,Default:Y_,Image:class uCt extends Y_{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([or.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([or.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([or.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([or.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class fCt extends Y_{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[or.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([or.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,D_,0],np);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(M6),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([or.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],np);const o=e.getEnds(),a=e.getFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,f=o.length;u<f;++u)l=this.drawFlatCoordinates_(a,l,o[u],c);this.hitDetectionInstructions.push(M6),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(M6),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(M6),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(np)}},Polygon:l0e,Text:class _Ct extends Y_{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const s=this.textState_;if(""===this.text_||!s||!this.textFillState_&&!this.textStrokeState_)return;const o=this.coordinates;let a=o.length;const c=e.getType();let l=null,u=e.getStride();if("line"!==s.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){let f=s.overflow?null:[];switch(c){case"Point":case"MultiPoint":l=e.getFlatCoordinates();break;case"LineString":l=e.getFlatMidpoint();break;case"Circle":l=e.getCenter();break;case"MultiLineString":l=e.getFlatMidpoints(),u=2;break;case"Polygon":l=e.getFlatInteriorPoint(),s.overflow||f.push(l[2]/this.resolution),u=3;break;case"MultiPolygon":const w=e.getFlatInteriorPoints();l=[];for(let C=0,x=w.length;C<x;C+=3)s.overflow||f.push(w[C+2]/this.resolution),l.push(w[C],w[C+1]);if(0===l.length)return;u=2}const p=this.appendFlatPointCoordinates(l,u);if(p===a)return;if(f&&(p-a)/2!=l.length/u){let w=a/2;f=f.filter((C,x)=>{const M=o[2*(w+x)]===l[x*u]&&o[2*(w+x)+1]===l[x*u+1];return M||--w,M})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let g=s.padding;if(g!=K5&&(s.scale[0]<0||s.scale[1]<0)){let w=s.padding[0],C=s.padding[1],x=s.padding[2],M=s.padding[3];s.scale[0]<0&&(C=-C,M=-M),s.scale[1]<0&&(w=-w,x=-x),g=[w,C,x,M]}const _=this.pixelRatio;this.instructions.push([or.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,g==K5?K5:g.map(function(w){return w*_}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const y=1/_;this.hitDetectionInstructions.push([or.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,void 0,this.declutterImageWithText_,g,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(t)}else{if(!ll(this.getBufferedMaxExtent(),e.getExtent()))return;let f;if(l=e.getFlatCoordinates(),"LineString"==c)f=[l.length];else if("MultiLineString"==c)f=e.getEnds();else if("Polygon"==c)f=e.getEnds().slice(0,1);else if("MultiPolygon"==c){const y=e.getEndss();f=[];for(let w=0,C=y.length;w<C;++w)f.push(y[w][0])}this.beginGeometry(e,t);const p=s.textAlign;let _,g=0;for(let y=0,w=f.length;y<w;++y){if(null==p){const x=vCt(s.maxAngle,l,g,f[y],u);g=x[0],_=x[1]}else _=f[y];for(let x=g;x<_;x+=u)o.push(l[x],l[x+1]);const C=o.length;g=f[y],this.drawChars_(a,C),a=C}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||F_,justify:t.justify,textBaseline:t.textBaseline||lE,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,l=Z_[r.textBaseline],u=this.textOffsetY_*c,f=this.text_,p=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([or.DRAW_CHARS,e,t,l,r.overflow,a,r.maxAngle,c,u,s,p*c,f,o,1]),this.hitDetectionInstructions.push([or.DRAW_CHARS,e,t,l,r.overflow,a,r.maxAngle,1,u,s,p,f,o,1/c])}setTextStyle(e,t){let i,r,s;if(e){const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=sh(o.getColor()||If)):(r=null,this.textFillState_=r);const a=e.getStroke();if(a){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const _=a.getLineDash(),y=a.getLineDashOffset(),w=a.getWidth(),C=a.getMiterLimit();s.lineCap=a.getLineCap()||cE,s.lineDash=_?_.slice():D_,s.lineDashOffset=void 0===y?0:y,s.lineJoin=a.getLineJoin()||im,s.lineWidth=void 0===w?1:w,s.miterLimit=void 0===C?10:C,s.strokeStyle=sh(a.getColor()||R_)}else s=null,this.textStrokeState_=s;i=this.textState_;const c=e.getFont()||yue;qyt(c);const l=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||lE,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||K5,i.scale=void 0===l?[1,1]:l;const u=e.getOffsetX(),f=e.getOffsetY(),p=e.getRotateWithView(),g=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===g?0:g,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:xr(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+xr(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=t}}},u0e=class wCt{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];return void 0===s&&(s=new(0,yCt[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s),s}},bCt=class CCt extends gue{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return Zi()}getData(e){return null}prepareFrame(e){return Zi()}renderFrame(e,t){return Zi()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return function(r,s){const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}.bind(this)}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){2===e.target.getState()&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return 2!=t&&3!=t&&e.addEventListener("change",this.boundHandleImageChange_),0==t&&(e.load(),t=e.getState()),2==t}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},h0e=class xCt extends L3{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}},f0e=[];let fm=null;const SO=class SCt extends bCt{constructor(e){super(e),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){let r;fm||function MCt(){const n=document.createElement("canvas");n.width=1,n.height=1,fm=n.getContext("2d")}(),fm.clearRect(0,0,1,1);try{fm.drawImage(e,t,i,1,1,0,0,1,1),r=fm.getImageData(0,0,1,1).data}catch{return fm=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return"function"==typeof i&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&v6(tE(e.style.backgroundColor),tE(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=f4();const c=o.canvas;s.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=Z5(i),s=vE(i),o=AE(i),a=mE(i);Xc(t.coordinateToPixelTransform,r),Xc(t.coordinateToPixelTransform,s),Xc(t.coordinateToPixelTransform,o),Xc(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Xc(c,r),Xc(c,s),Xc(c,o),Xc(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new h0e(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_("prerender",e,t)}postRender(e,t){this.dispatchRenderEvent_("postrender",e,t)}getRenderTransform(e,t,i,r,s,o,a){const u=r/t;return Ju(this.tempTransform,s/2,o/2,u,-u,-i,-e[0]+a,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}};function ECt(n,e,t,i,r,s,o,a,c,l,u,f){let p=n[e],g=n[e+1],_=0,y=0,w=0,C=0;function x(){_=p,y=g,p=n[e+=i],g=n[e+1],C+=w,w=Math.sqrt((p-_)*(p-_)+(g-y)*(g-y))}do{x()}while(e<t-i&&C+w<s);let M=0===w?0:(s-C)/w;const T=Df(_,p,M),I=Df(y,g,M),F=e-i,P=C,R=s+a*c(l,r,u);for(;e<t-i&&C+w<R;)x();M=0===w?0:(R-C)/w;const k=Df(_,p,M),W=Df(y,g,M);let ie;if(f){const K=[T,I,k,W];gO(K,0,4,2,f,K,K),ie=K[0]>K[2]}else ie=T>k;const Te=Math.PI,me=[],Q=F+i===e;let he;if(w=0,C=P,p=n[e=F],g=n[e+1],Q)return x(),he=Math.atan2(g-y,p-_),ie&&(he+=he>0?-Te:Te),me[0]=[(k+T)/2,(W+I)/2,(R-s)/2,he,r],me;for(let K=0,ae=(r=r.replace(/\n/g," ")).length;K<ae;){x();let fe=Math.atan2(g-y,p-_);if(ie&&(fe+=fe>0?-Te:Te),void 0!==he){let ut=fe-he;if(ut+=ut>Te?-2*Te:ut<-Te?2*Te:0,Math.abs(ut)>o)return null}he=fe;const de=K;let ke=0;for(;K<ae;++K){const Bt=a*c(l,r[ie?ae-K-1:K],u);if(e+i<t&&C+w<s+ke+Bt/2)break;ke+=Bt}if(K===de)continue;const et=ie?r.substring(ae-de,ae-K):r.substring(de,K);M=0===w?0:(s+ke/2-C)/w;const Fe=Df(_,p,M),wt=Df(y,g,M);me.push([Fe,wt,ke/2,fe,et]),s+=ke}return me}function EO(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const c=n[a],l=n[a+1];o+=Math.sqrt((c-r)*(c-r)+(l-s)*(l-s)),r=c,s=l}return o}const dm=[1/0,1/0,-1/0,-1/0],E6=[],zf=[],Of=[],T6=[];function d0e(n){return n[3].declutterBox}const TCt=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function p0e(n,e){return("start"===e||"end"===e)&&!TCt.test(n)&&(e="start"===e?"left":"right"),Z_[e]}function LCt(n,e,t){return t>0&&n.push("\n",""),n.push(e,""),n}const ICt=class DCt{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],l=this.pixelRatio,u=[c.scale[0]*l,c.scale[1]*l],f=Array.isArray(e),p=c.justify?Z_[c.justify]:p0e(Array.isArray(e)?e[0]:e,c.textAlign||F_),g=r&&o.lineWidth?o.lineWidth:0,_=f?e:e.split("\n").reduce(LCt,[]),{width:y,height:w,widths:C,heights:x,lineWidths:M}=function Xyt(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,c=0;for(let l=0,u=e.length;l<=u;l+=2){const f=e[l];if("\n"===f||l===u){s=Math.max(s,o),r.push(o),o=0,a+=c;continue}const p=e[l+1]||n.font,g=uE(p,f);t.push(g),o+=g;const _=Kyt(p);i.push(_),c=Math.max(c,_)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}(c,_),T=y+g,I=[],F=(T+2)*u[0],P=(w+g)*u[1],R={width:F<0?Math.floor(F):Math.ceil(F),height:P<0?Math.floor(P):Math.ceil(P),contextInstructions:I};(1!=u[0]||1!=u[1])&&I.push("scale",u),r&&(I.push("strokeStyle",o.strokeStyle),I.push("lineWidth",g),I.push("lineCap",o.lineCap),I.push("lineJoin",o.lineJoin),I.push("miterLimit",o.miterLimit),I.push("setLineDash",[o.lineDash]),I.push("lineDashOffset",o.lineDashOffset)),i&&I.push("fillStyle",a.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");const k=.5-p;let W=p*T+k*g;const ie=[],Te=[];let ae,me=0,Q=0,he=0,K=0;for(let fe=0,de=_.length;fe<de;fe+=2){const ke=_[fe];if("\n"===ke){Q+=me,me=0,W=p*T+k*g,++K;continue}const et=_[fe+1]||c.font;et!==ae&&(r&&ie.push("font",et),i&&Te.push("font",et),ae=et),me=Math.max(me,x[he]);const Fe=[ke,W+k*C[he]+p*(C[he]-M[K]),.5*(g+me)+Q];W+=C[he],r&&ie.push("strokeText",Fe),i&&Te.push("fillText",Fe),++he}return Array.prototype.push.apply(I,ie),Array.prototype.push.apply(I,Te),this.labels_[s]=R,R}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w){let C=i-(a*=p[0]),x=r-(c*=p[1]);const M=s+l>e?e-l:s,T=o+u>t?t-u:o,I=_[3]+M*p[0]+_[1],F=_[0]+T*p[1]+_[2],P=C-_[3],R=x-_[0];let k;return(y||0!==f)&&(E6[0]=P,T6[0]=P,E6[1]=R,zf[1]=R,zf[0]=P+I,Of[0]=zf[0],Of[1]=R+F,T6[1]=Of[1]),0!==f?(k=Ju([1,0,0,1,0,0],i,r,1,1,f,-i,-r),Xc(k,E6),Xc(k,zf),Xc(k,Of),Xc(k,T6),e0(Math.min(E6[0],zf[0],Of[0],T6[0]),Math.min(E6[1],zf[1],Of[1],T6[1]),Math.max(E6[0],zf[0],Of[0],T6[0]),Math.max(E6[1],zf[1],Of[1],T6[1]),dm)):e0(Math.min(P,P+I),Math.min(R,R+F),Math.max(P,P+I),Math.max(R,R+F),dm),g&&(C=Math.round(C),x=Math.round(x)),{drawImageX:C,drawImageY:x,drawImageW:M,drawImageH:T,originX:l,originY:u,declutterBox:{minX:dm[0],minY:dm[1],maxX:dm[2],maxY:dm[3],value:w},canvasTransform:k,scale:p}}replayImageOrLabel_(e,t,i,r,s,o,a){const l=r.declutterBox,u=e.canvas,f=a?a[2]*r.scale[0]/2:0;return l.minX-f<=u.width/t&&l.maxX+f>=0&&l.minY-f<=u.height/t&&l.maxY+f>=0&&(!(!o&&!a)&&this.replayTextBackground_(e,E6,zf,Of,T6,o,a),function Yyt(n,e,t,i,r,s,o,a,c,l,u){n.save(),1!==t&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(c,l),n.scale(u[0],u[1]),function Zyt(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}(i,n)):u[0]<0||u[1]<0?(n.translate(c,l),n.scale(u[0],u[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,c,l,o*u[0],a*u[1]),n.restore()}(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=Xc(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,l=p0e(Array.isArray(e)?e[0]:e,s.textAlign||F_),u=Z_[s.textBaseline||lE],f=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/c-2*s.scale[0])+2*(.5-l)*f,anchorY:u*o.height/c+2*(.5-u)*f}}execute_(e,t,i,r,s,o,a,c){let l;this.pixelCoordinates_&&v6(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=tp(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),function rwt(n,e){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5]}(this.renderedTransform_,i));let u=0;const f=r.length;let g,_,y,w,C,x,M,T,I,F,P,R,p=0,k=0,W=0,ie=null,Te=null;const me=this.coordinateCache_,Q=this.viewRotation_,he=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,K={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Q},ae=this.instructions!=r||this.overlaps?0:200;let fe,de,ke,et;for(;u<f;){const Fe=r[u];switch(Fe[0]){case or.BEGIN_GEOMETRY:fe=Fe[1],et=Fe[3],fe.getGeometry()?void 0===a||ll(a,et.getExtent())?++u:u=Fe[2]+1:u=Fe[2];break;case or.BEGIN_PATH:k>ae&&(this.fill_(e),k=0),W>ae&&(e.stroke(),W=0),!k&&!W&&(e.beginPath(),w=NaN,C=NaN),++u;break;case or.CIRCLE:p=Fe[1];const ut=l[p],Bt=l[p+1],cn=l[p+2]-ut,Sn=l[p+3]-Bt,ln=Math.sqrt(cn*cn+Sn*Sn);e.moveTo(ut+ln,Bt),e.arc(ut,Bt,ln,0,2*Math.PI,!0),++u;break;case or.CLOSE_PATH:e.closePath(),++u;break;case or.CUSTOM:p=Fe[1],g=Fe[2];const Vt=Fe[4],Ft=6==Fe.length?Fe[5]:void 0;K.geometry=Fe[3],K.feature=fe,u in me||(me[u]=[]);const vn=me[u];Ft?Ft(l,p,g,2,vn):(vn[0]=l[p],vn[1]=l[p+1],vn.length=2),Vt(vn,K),++u;break;case or.DRAW_IMAGE:p=Fe[1],g=Fe[2],T=Fe[3],_=Fe[4],y=Fe[5];let qn=Fe[6];const En=Fe[7],Cn=Fe[8],Un=Fe[9],di=Fe[10];let cr=Fe[11];const hs=Fe[12];let Oe=Fe[13];const ve=Fe[14],Tt=Fe[15];if(!T&&Fe.length>=20){I=Fe[19],F=Fe[20],P=Fe[21],R=Fe[22];const Q1=this.drawLabelWithPointPlacement_(I,F,P,R);T=Q1.label,Fe[3]=T,_=(Q1.anchorX-Fe[23])*this.pixelRatio,Fe[4]=_,y=(Q1.anchorY-Fe[24])*this.pixelRatio,Fe[5]=y,qn=T.height,Fe[6]=qn,Oe=T.width,Fe[13]=Oe}let mn,bn,In,Ci;Fe.length>25&&(mn=Fe[25]),Fe.length>17?(bn=Fe[16],In=Fe[17],Ci=Fe[18]):(bn=K5,In=!1,Ci=!1),di&&he?cr+=Q:!di&&!he&&(cr-=Q);let De=0;for(;p<g;p+=2){if(mn&&mn[De++]<Oe/this.pixelRatio)continue;const Q1=this.calculateImageOrLabelDimensions_(T.width,T.height,l[p],l[p+1],Oe,qn,_,y,Cn,Un,cr,hs,s,bn,In||Ci,fe),Qo=[e,t,T,Q1,En,In?ie:null,Ci?Te:null];if(c){if("none"===ve)continue;if("obstacle"===ve){c.insert(Q1.declutterBox);continue}{let W1,j1;if(Tt){const Kl=g-p;if(!Tt[Kl]){Tt[Kl]=Qo;continue}if(W1=Tt[Kl],delete Tt[Kl],j1=d0e(W1),c.collides(j1))continue}if(c.collides(Q1.declutterBox))continue;W1&&(c.insert(j1),this.replayImageOrLabel_.apply(this,W1)),c.insert(Q1.declutterBox)}}this.replayImageOrLabel_.apply(this,Qo)}++u;break;case or.DRAW_CHARS:const Jt=Fe[1],un=Fe[2],Wn=Fe[3],jn=Fe[4];R=Fe[5];const tr=Fe[6],Pr=Fe[7],Go=Fe[8];P=Fe[9];const at=Fe[10];I=Fe[11],F=Fe[12];const Rn=[Fe[13],Fe[13]],zt=this.textStates[F],Nn=zt.font,Hn=[zt.scale[0]*Pr,zt.scale[1]*Pr];let _s;Nn in this.widths_?_s=this.widths_[Nn]:(_s={},this.widths_[Nn]=_s);const lc=EO(l,Jt,un,2),t1=Math.abs(Hn[0])*Cue(Nn,I,_s);if(jn||t1<=lc){const W1=ECt(l,Jt,un,2,I,(lc-t1)*Z_[this.textStates[F].textAlign],tr,Math.abs(Hn[0]),Cue,Nn,_s,he?0:this.viewRotation_);e:if(W1){const j1=[];let Kl,$f,mp,pl,B3;if(P)for(Kl=0,$f=W1.length;Kl<$f;++Kl){B3=W1[Kl],mp=B3[4],pl=this.createLabel(mp,F,"",P),_=B3[2]+(Hn[0]<0?-at:at),y=Wn*pl.height+2*(.5-Wn)*at*Hn[1]/Hn[0]-Go;const o0=this.calculateImageOrLabelDimensions_(pl.width,pl.height,B3[0],B3[1],pl.width,pl.height,_,y,0,0,B3[3],Rn,!1,K5,!1,fe);if(c&&c.collides(o0.declutterBox))break e;j1.push([e,t,pl,o0,1,null,null])}if(R)for(Kl=0,$f=W1.length;Kl<$f;++Kl){B3=W1[Kl],mp=B3[4],pl=this.createLabel(mp,F,R,""),_=B3[2],y=Wn*pl.height-Go;const o0=this.calculateImageOrLabelDimensions_(pl.width,pl.height,B3[0],B3[1],pl.width,pl.height,_,y,0,0,B3[3],Rn,!1,K5,!1,fe);if(c&&c.collides(o0.declutterBox))break e;j1.push([e,t,pl,o0,1,null,null])}c&&c.load(j1.map(d0e));for(let o0=0,Pe=j1.length;o0<Pe;++o0)this.replayImageOrLabel_.apply(this,j1[o0])}}++u;break;case or.END_GEOMETRY:if(void 0!==o){fe=Fe[1];const Q1=o(fe,et);if(Q1)return Q1}++u;break;case or.FILL:ae?k++:this.fill_(e),++u;break;case or.MOVE_TO_LINE_TO:for(p=Fe[1],g=Fe[2],de=l[p],ke=l[p+1],x=de+.5|0,M=ke+.5|0,(x!==w||M!==C)&&(e.moveTo(de,ke),w=x,C=M),p+=2;p<g;p+=2)de=l[p],ke=l[p+1],x=de+.5|0,M=ke+.5|0,(p==g-2||x!==w||M!==C)&&(e.lineTo(de,ke),w=x,C=M);++u;break;case or.SET_FILL_STYLE:ie=Fe,this.alignFill_=Fe[2],k&&(this.fill_(e),k=0,W&&(e.stroke(),W=0)),e.fillStyle=Fe[1],++u;break;case or.SET_STROKE_STYLE:Te=Fe,W&&(e.stroke(),W=0),this.setStrokeStyle_(e,Fe),++u;break;case or.STROKE:ae?W++:e.stroke(),++u;break;default:++u}}k&&this.fill_(e),W&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}},TO=["Polygon","Circle","LineString","Image","Text","Default"],LO={},g0e=class BCt{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];void 0===i&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r)i[s]=new ICt(this.resolution_,this.pixelRatio_,this.overlaps_,r[s])}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){const a=2*(r=Math.round(r))+1,c=Ju(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=f4(a,a));const u=this.hitDetectionContext_;let f;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):l||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(f=[1/0,1/0,-1/0,-1/0],om(f,e),dE(f,t*(this.renderBuffer_+r),f));const p=function RCt(n){if(void 0!==LO[n])return LO[n];const e=2*n+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(4*((n+s)*e+(n+o))+3),s>0&&c.push(4*((n-s)*e+(n+o))+3),o>0&&(c.push(4*((n+s)*e+(n-o))+3),s>0&&c.push(4*((n-s)*e+(n-o))+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return LO[n]=r,r}(r);let g;function _(I,F){const P=u.getImageData(0,0,a,a).data;for(let R=0,k=p.length;R<k;R++)if(P[p[R]]>0){if(!o||"Image"!==g&&"Text"!==g||o.includes(I)){const W=(p[R]-3)/4,ie=r-W%a,Te=r-(W/a|0),me=s(I,F,ie*ie+Te*Te);if(me)return me}u.clearRect(0,0,a,a);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);let w,C,x,M,T;for(y.sort($5),w=y.length-1;w>=0;--w){const I=y[w].toString();for(x=this.executorsByZIndex_[I],C=TO.length-1;C>=0;--C)if(g=TO[C],M=x[g],void 0!==M&&(T=M.executeHitDetection(u,c,i,_,f),T))return T}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return tp(a,0,8,2,e,a),a}isEmpty(){return nm(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const c=Object.keys(this.executorsByZIndex_).map(Number);let l,u,f,p,g,_;for(c.sort($5),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||TO,a&&c.reverse(),l=0,u=c.length;l<u;++l){const y=c[l].toString();for(g=this.executorsByZIndex_[y],f=0,p=o.length;f<p;++f)_=g[o[f]],void 0!==_&&_.execute(e,t,i,r,s,a)}this.maxExtent_&&e.restore()}},kCt=class FCt extends o0e{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,i,r){if(!this.image_)return;const s=tp(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,c=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=c*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let u=0,f=s.length;u<f;u+=2){const p=s[u]-this.imageAnchorX_,g=s[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const _=p+this.imageAnchorX_,y=g+this.imageAnchorY_;Ju(a,_,y,1,1,l,-_,-y),o.setTransform.apply(o,a),o.translate(_,y),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,g,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=tp(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=s[t]+this.textOffsetX_,l=s[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(c-this.textOffsetX_,l-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,c,l),this.textFillState_&&o.fillText(this.text_,c,l))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=tp(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let c=a.length;s&&(c-=2);for(let l=2;l<c;l+=2)o.lineTo(a[l],a[l+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(ll(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function Gwt(n,e,t){const i=n.getFlatCoordinates();if(i){const r=n.getStride();return tp(i,0,i.length,r,e,t)}return null}(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!ll(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ll(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(ll(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,l=o.length;c<l;++c)s=this.moveToLineTo_(r,s,o[c],a,!1);i.stroke()}if(""!==this.text_){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ll(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ll(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,c=s.length;a<c;++a)r=this.drawRings_(i,r,s[a],o);this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),v6(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:F_;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const i=e.getColor();this.fillState_={fillStyle:sh(i||If)}}else this.fillState_=null;if(t){const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),l=t.getMiterLimit(),u=s||D_;this.strokeState_={lineCap:void 0!==r?r:cE,lineDash:1===this.pixelRatio_?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==a?a:im,lineWidth:(void 0!==c?c:1)*this.pixelRatio_,miterLimit:void 0!==l?l:10,strokeStyle:sh(i||R_)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(e){const t=e.getFill();if(t){const g=t.getColor();this.textFillState_={fillStyle:sh(g||If)}}else this.textFillState_=null;const i=e.getStroke();if(i){const g=i.getColor(),_=i.getLineCap(),y=i.getLineDash(),w=i.getLineDashOffset(),C=i.getLineJoin(),x=i.getWidth(),M=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==_?_:cE,lineDash:y||D_,lineDashOffset:w||0,lineJoin:void 0!==C?C:im,lineWidth:void 0!==x?x:1,miterLimit:void 0!==M?M:10,strokeStyle:sh(g||R_)}}else this.textStrokeState_=null;const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),l=e.getScaleArray(),u=e.getText(),f=e.getTextAlign(),p=e.getTextBaseline();this.textState_={font:void 0!==r?r:yue,textAlign:void 0!==f?f:F_,textBaseline:void 0!==p?p:lE},this.text_=void 0!==u?Array.isArray(u)?u.reduce((g,_,y)=>g+(y%2?" ":_),""):u:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==c?c:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}},ch=.5,m0e={Point:function $Ct(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let c=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(c=r,"obstacle"===u){const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(s,a),l.drawPoint(e,i)}if(o&&o.getText()){let c=n;r&&(c=r);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},LineString:function QCt(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},Polygon:function KCt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,o),c.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},MultiPoint:function qCt(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let c=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(c=r,"obstacle"===u){const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(s,a),l.drawMultiPoint(e,i)}if(o&&o.getText()){let c=n;r&&(c=r);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},MultiLineString:function WCt(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},MultiPolygon:function jCt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,o),c.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},GeometryCollection:function GCt(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o)(0,m0e[s[o].getType()])(n,s[o],t,i,r)},Circle:function VCt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(s,o),c.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}};function OCt(n,e){return parseInt(xr(n),10)-parseInt(xr(e),10)}function DO(n,e){return.5*n/e}function A0e(n,e,t,i,r,s,o){let a=!1;const c=t.getImage();if(c){const l=c.getImageState();2==l||3==l?c.unlistenImageChange(r):(0==l&&c.load(),c.listenImageChange(r),a=!0)}return function UCt(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);t.getRenderer()?v0e(n,a,t,e):(0,m0e[a.getType()])(n,a,t,e,s)}(n,e,t,i,s,o),a}function v0e(n,e,t,i){if("GeometryCollection"!=e.getType())n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer());else{const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)v0e(n,s[o],t,i)}}const YCt=class XCt extends SO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,c=s.projection,l=s.rotation,u=c.getExtent(),f=this.getLayer().getSource(),p=t.pixelRatio,g=t.viewHints,_=!(g[0]||g[1]),y=this.compositionContext_,w=Math.round(t.size[0]*p),C=Math.round(t.size[1]*p),x=f.getWrapX()&&c.canWrapX(),M=x?wo(u):null,T=x?Math.ceil((r[2]-u[2])/M)+1:1;let I=x?Math.floor((r[0]-u[0])/M):0;do{const F=this.getRenderTransform(o,a,l,p,w,C,I*M);e.execute(y,1,F,l,_,void 0,i)}while(++I<T)}setupCompositionContext_(){if(1!==this.opacity_){const e=f4(this.context.canvas.width,this.context.canvas.height,f0e);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,fue(this.compositionContext_),f0e.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];(function swt(n,e,t){(function H_(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n})(n,e,0,0,t,0,0)})(this.pixelTransform,1/i,1/i),z_(this.inversePixelTransform,this.pixelTransform);const s=fE(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,c=this.replayGroup_,l=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!l||l.isEmpty()))return null;const u=Math.round(e.size[0]*i),f=Math.round(e.size[1]*i);a.width!=u||a.height!=f?(a.width=u,a.height=f,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,u,f),this.preRender(o,e);const p=e.viewState;this.opacity_=r.opacity,this.setupCompositionContext_();let _=!1,y=!0;if(r.extent&&this.clipping){const w=ah(r.extent);y=ll(w,e.extent),_=y&&!Ff(w,e.extent),_&&this.clipUnrotated(this.compositionContext_,e,w)}return y&&this.renderWorlds(c,e),_&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Xc(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,l=this.getLayer(),u=[],f=i[0]*ch,p=i[1]*ch;u.push(this.getRenderTransform(r,s,o,ch,f,p,0).slice());const g=l.getSource(),_=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!Ff(_,c)){let y=c[0];const w=wo(_);let x,C=0;for(;y<_[0];)--C,x=w*C,u.push(this.getRenderTransform(r,s,o,ch,f,p,x).slice()),y+=w;for(C=0,y=c[2];y>_[2];)++C,x=w*C,u.push(this.getRenderTransform(r,s,o,ch,f,p,x).slice()),y-=w}this.hitDetectionImageData_=function PCt(n,e,t,i,r,s,o){const l=f4(n[0]*ch,n[1]*ch);l.imageSmoothingEnabled=!1;const u=l.canvas,f=new kCt(l,ch,r,null,o),p=t.length,g=Math.floor(16777215/p),_={};for(let w=1;w<=p;++w){const C=t[w-1],x=C.getStyleFunction()||i;if(!i)continue;let M=x(C,s);if(!M)continue;Array.isArray(M)||(M=[M]);const I="#"+("000000"+(w*g).toString(16)).slice(-6);for(let F=0,P=M.length;F<P;++F){const R=M[F],k=R.getGeometryFunction()(C);if(!k||!ll(r,k.getExtent()))continue;const W=R.clone(),ie=W.getFill();ie&&ie.setColor(I);const Te=W.getStroke();Te&&(Te.setColor(I),Te.setLineDash(null)),W.setText(void 0);const me=R.getImage();if(me&&0!==me.getOpacity()){const K=me.getImageSize();if(!K)continue;const ae=f4(K[0],K[1],void 0,{alpha:!1}),fe=ae.canvas;ae.fillStyle=I,ae.fillRect(0,0,fe.width,fe.height),W.setImage(new n0e({img:fe,imgSize:K,anchor:me.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:me.getOrigin(),opacity:1,size:me.getSize(),scale:me.getScale(),rotation:me.getRotation(),rotateWithView:me.getRotateWithView()}))}const Q=W.getZIndex()||0;let he=_[Q];he||(he={},_[Q]=he,he.Polygon=[],he.Circle=[],he.LineString=[],he.Point=[]),he[k.getType().replace("Multi","")].push(k,W)}}const y=Object.keys(_).map(Number).sort($5);for(let w=0,C=y.length;w<C;++w){const x=_[y[w]];for(const M in x){const T=x[M];for(let I=0,F=T.length;I<F;I+=2){f.setStyle(T[I+1]);for(let P=0,R=e.length;P<R;++P)f.setTransform(e[P]),f.drawGeometry(T[I])}}}return l.getImageData(0,0,u.width,u.height)}(i,u,this.renderedFeatures_,l.getStyleFunction(),c,s,o)}t(function HCt(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*ch),s=Math.floor(Math.round(n[1])*ch),o=4*(oc(r,0,t.width-1)+oc(s,0,t.height-1)*t.width),u=t.data[o+2]+256*(t.data[o+1]+256*t.data[o]),f=Math.floor(16777215/e.length);u&&u%f==0&&i.push(e[u/f-1])}return i}(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),l={},u=function(g,_,y){const w=xr(g),C=l[w];if(C){if(!0!==C&&y<C.distanceSq){if(0===y)return l[w]=!0,s.splice(s.lastIndexOf(C),1),r(g,c,_);C.geometry=_,C.distanceSq=y}}else{if(0===y)return l[w]=!0,r(g,c,_);s.push(l[w]={feature:g,layer:c,geometry:_,distanceSq:y,callback:r})}};let f;const p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(g=>f=g.forEachFeatureAtCoordinate(e,o,a,i,u,g===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(_=>_.value):null)),f}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[0],s=e.viewHints[1],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,l=e.viewState,u=l.projection,f=l.resolution,p=e.pixelRatio,g=t.getRevision(),_=t.getRenderBuffer();let y=t.getRenderOrder();void 0===y&&(y=OCt);const w=l.center.slice(),C=dE(c,_*f),x=C.slice(),M=[C.slice()],T=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Ff(T,e.extent)){const K=wo(T),ae=Math.max(wo(C)/2,K);C[0]=T[0]-ae,C[2]=T[2]+ae,zue(w,u);const fe=Iue(M[0],u);fe[0]<T[0]&&fe[2]<T[2]?M.push([fe[0]+K,fe[1],fe[2]+K,fe[3]]):fe[0]>T[0]&&fe[2]>T[2]&&M.push([fe[0]-K,fe[1],fe[2]-K,fe[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==g&&this.renderedRenderOrder_==y&&Ff(this.wrappedRenderedExtent_,C))return v6(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const I=new u0e(DO(f,p),C,f,p);let F;this.getLayer().getDeclutter()&&(F=new u0e(DO(f,p),C,f,p));const P=C6();let R;if(P){for(let K=0,ae=M.length;K<ae;++K){const de=SE(M[K]);i.loadFeatures(de,Hwt(f),P)}R=V_(P,u)}else for(let K=0,ae=M.length;K<ae;++K)i.loadFeatures(M[K],f,u);const k=function NCt(n,e){const t=DO(n,e);return t*t}(f,p);let W=!0;const ie=function(K){let ae;const fe=K.getStyleFunction()||t.getStyleFunction();if(fe&&(ae=fe(K,f)),ae){const de=this.renderFeature(K,k,ae,I,R,F);W=W&&!de}}.bind(this),Te=SE(C),me=i.getFeaturesInExtent(Te);y&&me.sort(y);for(let K=0,ae=me.length;K<ae;++K)ie(me[K]);this.renderedFeatures_=me,this.ready=W;const Q=I.finish(),he=new g0e(C,f,p,i.getOverlaps(),Q,t.getRenderBuffer());return F&&(this.declutterExecutorGroup=new g0e(C,f,p,i.getOverlaps(),F.finish(),t.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=g,this.renderedRenderOrder_=y,this.renderedExtent_=x,this.wrappedRenderedExtent_=C,this.renderedCenter_=w,this.renderedProjection_=u,this.replayGroup_=he,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,l=i.length;c<l;++c)a=A0e(r,e,i[c],t,this.boundHandleStyleImageChange_,s,o)||a;else a=A0e(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}},pm=class ZCt extends aCt{constructor(e){super(e)}createRenderer(){return new YCt(this)}};function _0e(n){return n?Array.isArray(n)?function(e){return n}:"function"==typeof n?n:function(e){return[n]}:null}const IO=class JCt extends Yu{constructor(e){super(),this.projection=Ja(e.projection),this.attributions_=_0e(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return Zi()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=_0e(e),this.changed()}setState(e){this.state_=e,this.changed()}};function ebt(n,e){return[[-1/0,-1/0,1/0,1/0]]}function w0e(n,e){return function(t,i,r,s,o){const a=this;!function tbt(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(t,i,r):n,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const l=e.getType();let u;"json"==l||"text"==l?u=a.responseText:"xml"==l?(u=a.responseXML,u||(u=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==l&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}(n,e,t,i,r,function(c,l){a.addFeatures(c),void 0!==s&&s(c)},o||q5)}}class L6 extends L3{constructor(e,t,i){super(e),this.feature=t,this.features=i}}const J_=class nbt extends IO{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=q5,this.format_=e.format,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(ms(this.format_,7),this.loader_=w0e(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:ebt;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,r;this.featuresRtree_=t?new wO:null,this.loadedExtentsRtree_=new wO,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&void 0===i&&(i=new U1(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=xr(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new L6("addfeature",e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[Rs(t,"change",this.handleFeatureChange_,this),Rs(t,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return void 0!==r&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(ms(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],c=xr(a);this.addToIndex_(c,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],c=xr(a);this.setupChangeEvents_(c,a);const l=a.getGeometry();if(l){const u=l.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener("addfeature"))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new L6("addfeature",i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener("addfeature",function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener("removefeature",function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener("add",function(i){t||(t=!0,this.addFeature(i.element),t=!1)}.bind(this)),e.addEventListener("remove",function(i){t||(t=!0,this.removeFeature(i.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(pa);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=function(r){this.removeFeatureInternal(r)}.bind(this);this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new L6("clear");this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),nm(this.nullGeometryFeatures_)||Xu(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=function pwt(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];Iue(n,e);const i=wo(t);if(wo(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||oh,this.featuresRtree_.forEachInExtent(c,function(l){if(t(l)){const u=l.getGeometry(),f=a;if(a=u.closestPointXY(i,r,o,a),a<f){s=l;const p=Math.sqrt(a);c[0]=i-p,c[1]=r-p,c[2]=i+p,c[3]=r+p}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=xr(t),r=t.getGeometry();if(r){const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);const s=t.getId();if(void 0!==s){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new L6("changefeature",t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:xr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&nm(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const c=s[o];r.forEachInExtent(c,function(u){return Ff(u.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new L6("featuresloadstart")),this.loader_.call(this,c,t,i,function(u){--this.loadingExtentsCount_,this.dispatchEvent(new L6("featuresloadend",void 0,u))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new L6("featuresloaderror"))}.bind(this)),r.insert(c,{extent:c.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(sm(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=xr(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=xr(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(pa),delete this.featureChangeKeys_[t];const r=e.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new L6("removefeature",e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){ms(this.format_,7),this.url_=e,this.setLoader(w0e(e,this.format_))}};function BO(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),i);++r);return i}}const rbt=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},C0e=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)}(n)},gm=oh,b0e=function(n){const e=n.originalEvent;return 0==e.button&&!(Iyt&&Byt&&e.ctrlKey)},RO=em,x0e=function(n){return n.type==Qs.SINGLECLICK},FO=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},kO=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},M0e=function(n){const e=n.originalEvent,t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!e.target.isContentEditable},RE=function(n){const e=n.originalEvent;return ms(void 0!==e,56),"mouse"==e.pointerType},S0e=function(n){const e=n.originalEvent;return ms(void 0!==e,56),e.isPrimary&&0===e.button};function E0e(n,e,t,i,r,s,o){const a=n[e],c=n[e+1],l=n[t]-a,u=n[t+1]-c;let f;if(0===l&&0===u)f=e;else{const p=((r-a)*l+(s-c)*u)/(l*l+u*u);if(p>1)f=t;else{if(p>0){for(let g=0;g<i;++g)o[g]=Df(n[e+g],n[t+g],p);return void(o.length=i)}f=e}}for(let p=0;p<i;++p)o[p]=n[f+p];o.length=i}function PO(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],l=Lf(s,o,a,c);l>r&&(r=l),s=a,o=c}return r}function HO(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=PO(n,e,a,i,r),e=a}return r}function zO(n,e,t,i,r,s,o,a,c,l,u){if(e==t)return l;let f,p;if(0===r){if(p=Lf(o,a,n[e],n[e+1]),p<l){for(f=0;f<i;++f)c[f]=n[e+f];return c.length=i,p}return l}u=u||[NaN,NaN];let g=e+i;for(;g<t;)if(E0e(n,g-i,g,i,o,a,u),p=Lf(o,a,u[0],u[1]),p<l){for(l=p,f=0;f<i;++f)c[f]=u[f];c.length=i,g+=i}else g+=i*Math.max((Math.sqrt(p)-Math.sqrt(l))/r|0,1);if(s&&(E0e(n,t-i,e,i,o,a,u),p=Lf(o,a,u[0],u[1]),p<l)){for(l=p,f=0;f<i;++f)c[f]=u[f];c.length=i}return l}function OO(n,e,t,i,r,s,o,a,c,l,u){u=u||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const g=t[f];l=zO(n,e,g,i,r,s,o,a,c,l,u),e=g}return l}function T0e(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=o*a-s*c,s=a,o=c}return r/2}function L0e(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=T0e(n,e,a,i),e=a}return r}class FE extends b6{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new FE(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<X5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(PO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return T0e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return S6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=BE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new FE(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=TE(this.flatCoordinates,0,e,this.stride),this.changed()}}const D0e=FE;function lbt(n,e,t,i,r){return!sO(r,function(o){return!rp(n,e,t,i,o[0],o[1])})}function rp(n,e,t,i,r,s){let o=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const l=n[e],u=n[e+1];c<=s?u>s&&(l-a)*(s-c)-(r-a)*(u-c)>0&&o++:u<=s&&(l-a)*(s-c)-(r-a)*(u-c)<0&&o--,a=l,c=u}return 0!==o}function NO(n,e,t,i,r,s){if(0===t.length||!rp(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(rp(n,t[o-1],t[o],i,r,s))return!1;return!0}function I0e(n,e,t,i,r,s,o){let a,c,l,u,f,p,g;const _=r[s+1],y=[];for(let x=0,M=t.length;x<M;++x){const T=t[x];for(u=n[T-i],p=n[T-i+1],a=e;a<T;a+=i)f=n[a],g=n[a+1],(_<=p&&g<=_||p<=_&&_<=g)&&(l=(_-p)/(g-p)*(f-u)+u,y.push(l)),u=f,p=g}let w=NaN,C=-1/0;for(y.sort($5),u=y[0],a=1,c=y.length;a<c;++a){f=y[a];const x=Math.abs(f-u);x>C&&(l=(u+f)/2,NO(n,e,t,i,l,_)&&(w=l,C=x)),u=f}return isNaN(w)&&(w=r[s]),o?(o.push(w,_,C),o):[w,_,C]}function B0e(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function kE(n,e,t,i,r){const s=Due([1/0,1/0,-1/0,-1/0],n,e,t,i);return!!ll(r,s)&&(!!(Ff(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3])||B0e(n,e,t,i,function(o,a){return function fwt(n,e,t){let i=!1;const r=rO(n,e),s=rO(n,t);if(1===r||1===s)i=!0;else{const o=n[0],a=n[1],c=n[2],l=n[3],p=t[0],g=t[1],_=(g-e[1])/(p-e[0]);let y,w;!!(2&s)&&!(2&r)&&(y=p-(g-l)/_,i=y>=o&&y<=c),!i&&!!(4&s)&&!(4&r)&&(w=g-(p-c)*_,i=w>=a&&w<=l),!i&&!!(8&s)&&!(8&r)&&(y=p-(g-a)/_,i=y>=o&&y<=c),!i&&16&s&&!(16&r)&&(w=g-(p-o)*_,i=w>=a&&w<=l)}return i}(r,o,a)}))}function R0e(n,e,t,i,r){return!!(kE(n,e,t,i,r)||rp(n,e,t,i,r[0],r[1])||rp(n,e,t,i,r[0],r[3])||rp(n,e,t,i,r[2],r[1])||rp(n,e,t,i,r[2],r[3]))}function F0e(n,e,t,i,r){if(!R0e(n,e,t[0],i,r))return!1;if(1===t.length)return!0;for(let s=1,o=t.length;s<o;++s)if(lbt(n,t[s-1],t[s],i,r)&&!kE(n,t[s-1],t[s],i,r))return!1;return!0}function pbt(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function VO(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-s)*(c+o),s=a,o=c}return 0===r?void 0:r>0}function k0e(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=VO(n,e,a,i);if(0===s){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function UO(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=VO(n,e,a,i);(0===s?r&&c||!r&&!c:r&&!c||!r&&c)&&pbt(n,e,a,i),e=a}return e}function P0e(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=UO(n,e,t[s],i,r);return e}class sp extends b6{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Xu(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new sp(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<X5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(HO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),OO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return NO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return L0e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),UO(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,X_(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=kf(this.getExtent());this.flatInteriorPoint_=I0e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new d4(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new D0e(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const c=i[o],l=new D0e(t.slice(s,c),e);r.push(l),s=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;k0e(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=UO(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=c0e(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new sp(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return F0e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=mO(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const op=sp;function H0e(n){const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new sp(s,"XY",[s.length])}function z0e(n,e,t){e=e||32;const i=n.getStride(),r=n.getLayout(),s=n.getCenter(),o=i*(e+1),a=new Array(o);for(let u=0;u<o;u+=i){a[u]=0,a[u+1]=0;for(let f=2;f<i;f++)a[u+f]=s[f]}const l=new sp(a,r,[a.length]);return function mbt(n,e,t,i){const r=n.getFlatCoordinates(),s=n.getStride(),o=r.length/s-1,a=i||0;for(let c=0;c<=o;++c){const l=c*s,u=a+2*m6(c,o)*Math.PI/o;r[l]=e[0]+t*Math.cos(u),r[l+1]=e[1]+t*Math.sin(u)}n.changed()}(l,s,n.getRadius(),t),l}const N0e=[0,0,0,0],mm=[];class QO extends L3{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}function vbt(n,e){return n.index-e.index}function V0e(n,e,t){const i=e.geometry;if("Circle"===i.getType()){let s=i;if(1===e.index){const o=C6();o&&(s=s.clone().transform(o,t));const a=lm(s.getCenter(),ac(n)),c=Math.sqrt(a)-s.getRadius();return c*c}}const r=ac(n);return mm[0]=ac(e.segment[0]),mm[1]=ac(e.segment[1]),function Lwt(n,e){return lm(n,Pue(n,e))}(r,mm)}function U0e(n,e,t){const i=e.geometry;if("Circle"===i.getType()&&1===e.index){let s=i;const o=C6();return o&&(s=s.clone().transform(o,t)),Q_(s.getClosestPoint(ac(n)))}const r=ac(n);return mm[0]=ac(e.segment[0]),mm[1]=ac(e.segment[1]),Q_(Pue(r,mm))}function _bt(){const n=Zz();return function(e,t){return n.Point}}const G0e=class Abt extends Hf{constructor(e){let t;if(super(e),this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:S0e,this.defaultDeleteCondition_=function(i){return function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(i)&&x0e(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:gm,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new wO,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new pm({source:new J_({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:_bt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,e.features?t=e.features:e.source&&(this.source_=e.source,t=new U1(this.source_.getFeatures()),this.source_.addEventListener("addfeature",this.handleSourceAdd_.bind(this)),this.source_.addEventListener("removefeature",this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener("add",this.handleFeatureAdd_.bind(this)),this.features_.addEventListener("remove",this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===e.snapToPointer?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),e.addEventListener("change",this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new U1;const i=this.featuresBeingModified_.getArray();for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0,c=o.length;a<c;++a){const l=o[a].feature;l&&!i.includes(l)&&this.featuresBeingModified_.push(l)}}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new QO("modifystart",this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener("change",this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(r){e===r.feature&&i.push(r)});for(let r=i.length-1;r>=0;--r){const s=i[r];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),r={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),r)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r],a={feature:e,geometry:t,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length-1;r<s;++r){const o=i.slice(r,r+2),a={feature:e,geometry:t,index:r,segment:o};this.rBush_.insert(eu(o),a)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length-1;a<c;++a){const l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:l};this.rBush_.insert(eu(l),u)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length-1;a<c;++a){const l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:l};this.rBush_.insert(eu(l),u)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length;a<c;++a){const l=o[a];for(let u=0,f=l.length-1;u<f;++u){const p=l.slice(u,u+2),g={feature:e,geometry:t,depth:[a,r],index:u,segment:p};this.rBush_.insert(eu(p),g)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),r={feature:e,geometry:t,index:0,segment:[i,i]},s={feature:e,geometry:t,index:1,segment:[i,i]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.rBush_.insert(pE(i),r);let a=t;const c=C6();if(c&&this.getMap()){const l=this.getMap().getView().getProjection();a=a.clone().transform(c,l),a=z0e(a).transform(l,c)}this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let r=0;r<i.length;++r){const s=i[r];(0,this.SEGMENT_WRITERS_[s.getType()])(e,s)}}createOrUpdateVertexFeature_(e,t,i){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new J4(new d4(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",i),r}handleEvent(e){if(!e.originalEvent)return!0;let t;return this.lastPointerEvent_=e,!e.map.getView().getInteracting()&&e.type==Qs.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=Qs.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==Qs.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],r=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],c=a[0],l=c.feature;i.includes(l)||i.push(l);const u=c.geometry;r.includes(u)||r.push(u);const f=c.depth;let p;const g=c.segment,_=a[1];for(;t.length<u.getStride();)t.push(g[_][t.length]);switch(u.getType()){case"Point":p=t,g[0]=t,g[1]=t;break;case"MultiPoint":p=u.getCoordinates(),p[c.index]=t,g[0]=t,g[1]=t;break;case"LineString":p=u.getCoordinates(),p[c.index+_]=t,g[_]=t;break;case"MultiLineString":case"Polygon":p=u.getCoordinates(),p[f[0]][c.index+_]=t,g[_]=t;break;case"MultiPolygon":p=u.getCoordinates(),p[f[1]][f[0]][c.index+_]=t,g[_]=t;break;case"Circle":if(g[0]=t,g[1]=t,0===c.index)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;const y=e.map.getView().getProjection();let w=bE(ac(u.getCenter()),ac(t));const C=C6();if(C){const x=u.clone().transform(C,y);x.setRadius(w),w=x.transform(y,C).getRadius()}u.setRadius(w),this.changingFeature_=!1}}p&&this.setGeometryCoordinates_(u,p)}this.createOrUpdateVertexFeature_(t,i,r)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){const r=e.map.getView().getProjection(),s=[],o=i.getGeometry().getCoordinates(),a=eu([o]),c=this.rBush_.getInExtent(a),l={};c.sort(vbt);for(let u=0,f=c.length;u<f;++u){const p=c[u],g=p.segment;let _=xr(p.geometry);const y=p.depth;if(y&&(_+="-"+y.join("-")),l[_]||(l[_]=new Array(2)),"Circle"!==p.geometry.getType()||1!==p.index)if(!n0(g[0],o)||l[_][0])if(!n0(g[1],o)||l[_][1])xr(g)in this.vertexSegments_&&!l[_][0]&&!l[_][1]&&this.insertVertexCondition_(e)&&s.push(p);else{if(l[_][0]&&0===l[_][0].index){let w=p.geometry.getCoordinates();switch(p.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":w=w[y[1]];case"Polygon":if(p.index!==w[y[0]].length-2)continue}}this.dragSegments_.push([p,1]),l[_][1]=p}else this.dragSegments_.push([p,0]),l[_][0]=p;else n0(U0e(t,p,r),o)&&!l[_][0]&&(this.dragSegments_.push([p,0]),l[_][0]=p)}s.length&&this.willModifyFeatures_(e,[s]);for(let u=s.length-1;u>=0;--u)this.insertVertex_(s[u],o)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],r=i.geometry;if("Circle"===r.getType()){const s=r.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update(pE(s),o);let c=r;const l=C6();if(l){const u=e.map.getView().getProjection();c=c.clone().transform(l,u),c=z0e(c).transform(u,l)}this.rBush_.update(c.getExtent(),a)}else this.rBush_.update(eu(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new QO("modifyend",this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,i){const r=i||t.getCoordinateFromPixel(e),s=t.getView().getProjection(),o=function(l,u){return V0e(r,l,s)-V0e(r,u,s)};let a,c;if(this.hitDetection_){const l="object"==typeof this.hitDetection_?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(u,f,p)=>{if("Point"===(p=p||u.getGeometry()).getType()&&this.features_.getArray().includes(u)){c=p;const g=p.getFlatCoordinates().slice(0,2);a=[{feature:u,geometry:p,segment:[g,g]}]}return!0},{layerFilter:l})}if(!a){const f=SE(dE(ah(pE(r,N0e)),t.getView().getResolution()*this.pixelTolerance_,N0e));a=this.rBush_.getInExtent(f)}if(a&&a.length>0){const l=a.sort(o)[0],u=l.segment;let f=U0e(r,l,s);const p=t.getPixelFromCoordinate(f);let g=bE(e,p);if(c||g<=this.pixelTolerance_){const _={};if(_[xr(u)]=!0,this.snapToPointer_||(this.delta_[0]=f[0]-r[0],this.delta_[1]=f[1]-r[1]),"Circle"===l.geometry.getType()&&1===l.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry]);else{const y=t.getPixelFromCoordinate(u[0]),w=t.getPixelFromCoordinate(u[1]),C=lm(p,y),x=lm(p,w);g=Math.sqrt(Math.min(C,x)),this.snappedToVertex_=g<=this.pixelTolerance_,this.snappedToVertex_&&(f=C>x?u[1]:u[0]),this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry]);const M={};M[xr(l.geometry)]=!0;for(let T=1,I=a.length;T<I;++T){const F=a[T].segment;if(!(n0(u[0],F[0])&&n0(u[1],F[1])||n0(u[0],F[1])&&n0(u[1],F[0])))break;{const P=xr(a[T].geometry);P in M||(M[P]=!0,_[xr(F)]=!0)}}}return void(this.vertexSegments_=_)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,r=e.feature,s=e.geometry,o=e.depth,a=e.index;let c;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":case"Polygon":c=s.getCoordinates(),c[o[0]].splice(a+1,0,t);break;case"MultiPolygon":c=s.getCoordinates(),c[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":c=s.getCoordinates(),c.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,c);const l=this.rBush_;l.remove(e),this.updateSegmentIndices_(s,a,o,1);const u={segment:[i[0],t],feature:r,geometry:s,depth:o,index:a};l.insert(eu(u.segment),u),this.dragSegments_.push([u,1]);const f={segment:[t,i[1]],feature:r,geometry:s,depth:o,index:a+1};l.insert(eu(f.segment),f),this.dragSegments_.push([f,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Qs.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new QO("modifyend",this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let r,s,o,a,c,l,u,f,p,g,_,i=!1;for(c=e.length-1;c>=0;--c)o=e[c],g=o[0],_=xr(g.feature),g.depth&&(_+="-"+g.depth.join("-")),_ in t||(t[_]={}),0===o[1]?(t[_].right=g,t[_].index=g.index):1==o[1]&&(t[_].left=g,t[_].index=g.index+1);for(_ in t){switch(p=t[_].right,u=t[_].left,l=t[_].index,f=l-1,g=void 0!==u?u:p,f<0&&(f=0),a=g.geometry,s=a.getCoordinates(),r=s,i=!1,a.getType()){case"MultiLineString":s[g.depth[0]].length>2&&(s[g.depth[0]].splice(l,1),i=!0);break;case"LineString":s.length>2&&(s.splice(l,1),i=!0);break;case"MultiPolygon":r=r[g.depth[1]];case"Polygon":r=r[g.depth[0]],r.length>4&&(l==r.length-1&&(l=0),r.splice(l,1),i=!0,0===l&&(r.pop(),r.push(r[0]),f=r.length-1))}if(i){this.setGeometryCoordinates_(a,s);const y=[];if(void 0!==u&&(this.rBush_.remove(u),y.push(u.segment[0])),void 0!==p&&(this.rBush_.remove(p),y.push(p.segment[1])),void 0!==u&&void 0!==p){const w={depth:g.depth,feature:g.feature,geometry:g.geometry,index:f,segment:y};this.rBush_.insert(eu(w.segment),w)}this.updateSegmentIndices_(a,l,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,r){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(void 0===i||void 0===s.depth||v6(s.depth,i))&&s.index>t&&(s.index+=r)})}};class PE extends b6{constructor(e,t,i){super(),void 0!==i&&void 0===t?this.setFlatCoordinates(i,e):this.setCenterAndRadius(e,t=t||0,i)}clone(){const e=new PE(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],c=o*o+a*a;if(c<r){if(0===c)for(let l=0;l<this.stride;++l)i[l]=s[l];else{const l=this.getRadius()/Math.sqrt(c);i[0]=s[0]+l*o,i[1]=s[1]+l*a;for(let u=2;u<this.stride;++u)i[u]=s[u]}return i.length=this.stride,c}return r}containsXY(e,t){const i=this.flatCoordinates,r=e-i[0],s=t-i[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return e0(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){if(ll(e,this.getExtent())){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]||sO(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+i;for(let s=1;s<t;++s)r[t+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=Xue(r,0,e);r[s++]=r[0]+t;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(gO(i,0,i.length,r,e,t,i)),this.changed()}translate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter($ue(i,0,i.length,r,e,t,i)),this.changed()}}const ybt=PE;class HE extends Kue{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(pa),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(Rs(this.geometries_[e],"change",this.changed,this))}clone(){const e=new HE(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<X5(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Y5(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)Tue(e,t[i].getExtent());return e}getGeometries(){return Q0e(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}if(r){const s=new HE(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=kf(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(Q0e(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Q0e(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}const WO=HE;function W0e(n,e,t,i,r,s,o){let a,c;const l=(t-e)/i;if(1===l)a=e;else if(2===l)a=e,c=r;else if(0!==l){let u=n[e],f=n[e+1],p=0;const g=[0];for(let w=e+i;w<t;w+=i){const C=n[w],x=n[w+1];p+=Math.sqrt((C-u)*(C-u)+(x-f)*(x-f)),g.push(p),u=C,f=x}const _=r*p,y=function Oyt(n,e,t){let i,r;t=t||$5;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}(g,_);y<0?(c=(_-g[-y-2])/(g[-y-1]-g[-y-2]),a=e+(-y-2)*i):a=e+y*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=void 0===a?NaN:void 0===c?n[a+u]:Df(n[a+u],n[a+i+u],c);return s}function jO(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const p=a+c>>1;r<n[(p+1)*i-1]?c=p:a=p+1}const l=n[a*i-1];if(r==l)return n.slice((a-1)*i,(a-1)*i+i);const f=(r-l)/(n[(a+1)*i-1]-l);o=[];for(let p=0;p<i-1;++p)o.push(Df(n[(a-1)*i+p],n[a*i+p],f));return o.push(r),o}class zE extends b6{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}appendCoordinate(e){this.flatCoordinates?Xu(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new zE(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<X5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(PO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return B0e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:jO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t=void 0!==t&&t)}getCoordinates(){return S6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return W0e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return EO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=BE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new zE(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return kE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=TE(this.flatCoordinates,0,e,this.stride),this.changed()}}const Nf=zE,Am=class Cbt extends L3{constructor(e,t,i){super(e),this.map=t,this.frameState=void 0!==i?i:null}},Vf=class bbt extends Am{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==r&&r,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};class OE extends b6{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(void 0!==t&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let r=this.getLayout();const s=e,o=[],a=[];for(let c=0,l=s.length;c<l;++c){const u=s[c];0===c&&(r=u.getLayout()),Xu(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?Xu(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new OE(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<X5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(HO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),OO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function wbt(n,e,t,i,r,s,o){if(o)return jO(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,l=t.length;c<l;++c){const u=t[c];if(e!=u){if(r<n[e+i-1])return null;if(r<=n[u-1])return jO(n,e,u,i,r,!1);e=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,t=void 0!==t&&t,i=void 0!==i&&i)}getCoordinates(){return X_(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Nf(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o],l=new Nf(e.slice(s,c),i);r.push(l),s=c}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const c=r[o];Xu(e,W0e(t,i,c,s,.5)),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function a0e(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c];o=BE(n,e,u,i,r,s,o),a.push(o),e=u}return o}(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new OE(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return function fbt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(kE(n,e,t[s],i,r))return!0;e=t[s]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=mO(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const $O=OE;class qO extends b6{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?Xu(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new qO(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<X5(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,c=s.length;a<c;a+=o){const l=Lf(e,t,s[a],s[a+1]);if(l<r){r=l;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return S6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){return e<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=e?null:new d4(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new d4(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i)if(iO(e,t[r],t[r+1]))return!0;return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=TE(this.flatCoordinates,0,e,this.stride),this.changed()}}const KO=qO;class NE extends b6{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let r=this.getLayout();const s=e,o=[],a=[];for(let c=0,l=s.length;c<l;++c){const u=s[c];0===c&&(r=u.getLayout());const f=o.length,p=u.getEnds();for(let g=0,_=p.length;g<_;++g)p[g]+=f;Xu(o,u.getFlatCoordinates()),a.push(p)}t=r,e=o,i=a}void 0!==t&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(this.flatCoordinates){const i=this.flatCoordinates.length;Xu(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new NE(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<X5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function obt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=HO(n,e,a,i,r),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function abt(n,e,t,i,r,s,o,a,c,l,u){u=u||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const g=t[f];l=OO(n,e,g,i,r,s,o,a,c,l,u),e=g[g.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return function ubt(n,e,t,i,r,s){if(0===t.length)return!1;for(let o=0,a=t.length;o<a;++o){const c=t[o];if(NO(n,e,c,i,r,s))return!0;e=c[c.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return function cbt(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=L0e(n,e,a,i),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),P0e(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,MO(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=function xbt(n,e,t,i){const r=[];let s=[1/0,1/0,-1/0,-1/0];for(let o=0,a=t.length;o<a;++o){const c=t[o];s=Eue(n,e,c[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=c[c.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function hbt(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const c=t[o];s=I0e(n,e,c,i,r,2*o,s),e=c[c.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new KO(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function gbt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!k0e(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}(e,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=P0e(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function mCt(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c],f=[];o=c0e(n,e,u,i,r,s,o,f),a.push(f),e=u[u.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new NE(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(0===e)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(0!==t)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new op(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const c=i[o].slice(),l=c[c.length-1];if(0!==s)for(let f=0,p=c.length;f<p;++f)c[f]-=s;const u=new op(t.slice(s,l),e,c);r.push(u),s=l}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return function dbt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(F0e(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=function Qwt(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=mO(n,e,t[o],i,r[s]);0===c.length&&(c[0]=e),r[s++]=c,e=c[c.length-1]}return r.length=s,r}(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()}}const XO=NE;class UE extends L3{constructor(e,t){super(e),this.feature=t}}function GE(n,e){return Lf(n[0],n[1],e[0],e[1])}function vm(n,e){const t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function QE(n,e,t){let i,r;e<t?(i=e,r=t):(i=t,r=e);const s=Math.ceil(i),o=Math.floor(r);if(s>o)return GE(_m(n,i),_m(n,r));let a=0;i<s&&(a+=GE(_m(n,i),vm(n,s))),o<r&&(a+=GE(vm(n,o),_m(n,r)));for(let c=s;c<o-1;++c)a+=GE(vm(n,c),vm(n,c+1));return a}function j0e(n,e,t){if(e instanceof Nf)WE(n,e.getCoordinates(),!1,t);else if(e instanceof $O){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)WE(n,i[r],!1,t)}else if(e instanceof op){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)WE(n,i[r],!0,t)}else if(e instanceof XO){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length;a<c;++a)WE(n,o[a],!0,t)}}else if(e instanceof WO){const i=e.getGeometries();for(let r=0;r<i.length;++r)j0e(n,i[r],t)}}const YO={index:-1,endIndex:NaN};function WE(n,e,t,i){const r=n[0],s=n[1];for(let o=0,a=e.length-1;o<a;++o){const u=$0e(r,s,e[o],e[o+1]);if(0===u.squaredDistance){const f=o+u.along;return void i.push({coordinates:e,ring:t,startIndex:f,endIndex:f})}}}const ZO={along:0,squaredDistance:0};function $0e(n,e,t,i){const r=t[0],s=t[1],c=i[0]-r,l=i[1]-s;let u=0,f=r,p=s;return(0!==c||0!==l)&&(u=oc(((n-r)*c+(e-s)*l)/(c*c+l*l),0,1),f+=c*u,p+=l*u),ZO.along=u,ZO.squaredDistance=ZS(Lf(n,e,f,p),10),ZO}function _m(n,e){const t=n.length;let i=Math.floor(e);const r=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const o=n[i],a=o[0],c=o[1],l=n[s];return[a+(l[0]-a)*r,c+(l[1]-c)*r]}function Tbt(){const n=Zz();return function(e,t){return n[e.getGeometry().getType()]}}const q0e=class Ebt extends Hf{constructor(e){const t=e;t.stopDown||(t.stopDown=em),super(t),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function Lbt(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:oh,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const r=this.mode_;if("Circle"===r)i=function(s,o,a){const c=o||new ybt([NaN,NaN]),l=ac(s[0]),u=lm(l,ac(s[s.length-1]));c.setCenterAndRadius(l,Math.sqrt(u),this.geometryLayout_);const f=C6();return f&&c.transform(a,f),c};else{let s;"Point"===r?s=d4:"LineString"===r?s=Nf:"Polygon"===r&&(s=op),i=function(o,a,c){return a?a.setCoordinates("Polygon"===r?o[0].length?[o[0].concat([o[0][0]])]:[]:o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new pm({source:new J_({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:Tbt(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:FO,this.freehandCondition_=e.freehand?gm:e.freehandCondition?e.freehandCondition:kO,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener("active",this.updateState_)}setTrace(e){let t;t=e?!0===e?gm:e:RO,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){"contextmenu"===e.originalEvent.type&&e.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);let t=e.type===Qs.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Qs.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Qs.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Qs.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===Qs.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===Qs.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===Qs.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Vf(Qs.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active)return void this.deactivateTrace_();const t=this.getMap(),s=eu([t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_])]),o=this.traceSource_.getFeaturesInExtent(s);if(0===o.length)return;const a=function Mbt(n,e){const t=[];for(let i=0;i<e.length;++i)j0e(n,e[i].getGeometry(),t);return t}(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex;i===e.startIndex<=t?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const r=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-r+1}else{const r=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=r-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const r=[];if(t<i){const s=Math.ceil(t);let o=Math.floor(i);o===i&&(o-=1);for(let a=s;a<=o;++a)r.push(vm(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(i);o===i&&(o+=1);for(let a=s;a>=o;--a)r.push(vm(e.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const t=this.traceState_;if(!t.active||-1===t.targetIndex&&bE(t.startPx,e.pixel)<this.snapTolerance_)return;const i=function Sbt(n,e,t,i){const r=n[0],s=n[1];let o=1/0,a=-1,c=NaN;for(let f=0;f<e.targets.length;++f){const p=e.targets[f],g=p.coordinates;let y,_=1/0;for(let w=0;w<g.length-1;++w){const M=$0e(r,s,g[w],g[w+1]);M.squaredDistance<_&&(_=M.squaredDistance,y=w+M.along)}_<o&&(o=_,p.ring&&e.targetIndex===f&&(p.endIndex>p.startIndex?y<p.startIndex&&(y+=g.length):p.endIndex<p.startIndex&&y>p.startIndex&&(y-=g.length)),c=y,a=f)}const l=e.targets[a];let u=l.ring;if(e.targetIndex===a&&u){const f=_m(l.coordinates,c);bE(t.getPixelFromCoordinate(f),e.startPx)>i&&(u=!1)}if(u){const f=l.coordinates,p=f.length,g=l.startIndex,_=c;if(g<_){const y=QE(f,g,_);QE(f,g,_-p)<y&&(c-=p)}else{const y=QE(f,g,_);QE(f,g,_+p)<y&&(c+=p)}}return YO.index=a,YO.endIndex=c,YO}(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(-1!==t.targetIndex){const c=t.targets[t.targetIndex];this.removeTracedCoordinates_(c.startIndex,c.endIndex)}const a=t.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else this.addOrRemoveTracedCoordinates_(t.targets[t.targetIndex],i.endIndex);t.targetIndex=i.index;const r=t.targets[t.targetIndex];r.endIndex=i.endIndex;const s=_m(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||"Point"===this.mode_)&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,r=t[0]-i[0],s=t[1]-i[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(e),this.modifyDrawing_(e.coordinate)):this.createOrUpdateSketchPoint_(e.coordinate.slice())}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_];const o=this.mode_;if("Point"===o)i=!0;else if("Circle"===o)i=2===this.sketchCoords_.length;else if("LineString"===o)r=!t&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],s=t?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let c=0,l=s.length;c<l;c++){const u=s[c],f=a.getPixelFromCoordinate(u),p=e[0]-f[0],g=e[1]-f[1],_=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(p*p+g*g)<=_,i){this.finishCoordinate_=u;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new J4(new d4(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new J4);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new Nf(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=EE(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,"Point"===this.mode_?this.sketchCoords_=e.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new J4(new Nf(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new J4,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new UE("drawstart",this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),r=t.getView().getProjection(),s=EE(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);"Point"===this.mode_?a=this.sketchCoords_:"Polygon"===this.mode_?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),"Polygon"===i.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let r,s;const o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):"Polygon"===o&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),r&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<e;++s){let o;if("LineString"===r||"Circle"===r){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,i),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if("Polygon"===r){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const c=o[o.length-2].slice();o[o.length-1]=c,this.createOrUpdateSketchPoint_(c)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,i)}if(1===o.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const i=e.getGeometry(),r=this.getMap().getView().getProjection();"LineString"===this.mode_?(t.pop(),this.geometryFunction_(t,i,r)):"Polygon"===this.mode_&&(t[0].pop(),this.geometryFunction_(t,i,r),t=i.getCoordinates()),"MultiPoint"===this.type_?e.setGeometry(new KO([t])):"MultiLineString"===this.type_?e.setGeometry(new $O([t])):"MultiPolygon"===this.type_&&e.setGeometry(new XO([t])),this.dispatchEvent(new UE("drawend",e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new UE("drawabort",e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;let r;if(i&&this.startDrawing_(e[0]),"LineString"===t||"Circle"===t)r=this.sketchCoords_;else{if("Polygon"!==t)return;r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&r.shift(),r.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new J4(new d4(r)),this.updateSketchFeatures_(),this.dispatchEvent(new UE("drawstart",this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}};class Ibt extends L3{constructor(e,t,i,r){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=r}}const jE={};class JO extends hm{constructor(e){let t;if(super(),e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:x0e,this.addCondition_=e.addCondition?e.addCondition:RO,this.removeCondition_=e.removeCondition?e.removeCondition:RO,this.toggleCondition_=e.toggleCondition?e.toggleCondition:kO,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:oh,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=void 0!==e.style?e.style:function Bbt(){const n=Zz();return Xu(n.Polygon,n.LineString),Xu(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}(),this.features_=e.features||new U1,e.layers)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=oh;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[xr(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[xr(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener("add",this.boundAddFeature_),this.features_.addEventListener("remove",this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener("add",this.boundAddFeature_),this.features_.removeEventListener("remove",this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const i=this.getMap().getAllLayers().find(function(r){if(r instanceof pm&&r.getSource()&&r.getSource().hasFeature(t))return r});i&&this.addFeatureLayerAssociation_(t,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=xr(e);t in jE||(jE[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof JO&&s.getStyle()&&-1!==s.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(s.getStyle())}const i=xr(e);e.setStyle(jE[i]),delete jE[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[xr(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!i&&!r,o=e.map,a=this.getFeatures(),c=[],l=[];if(s){tm(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,function(u,f){if(u instanceof J4&&this.filter_(u,f))return this.addFeatureLayerAssociation_(u,f),l.push(u),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=a.getLength()-1;u>=0;--u){const f=a.item(u),p=l.indexOf(f);p>-1?l.splice(p,1):(a.remove(f),c.push(f))}0!==l.length&&a.extend(l)}else{o.forEachFeatureAtPixel(e.pixel,function(u,f){if(u instanceof J4&&this.filter_(u,f))return!t&&!r||a.getArray().includes(u)?(i||r)&&a.getArray().includes(u)&&(c.push(u),this.removeFeatureLayerAssociation_(u)):(this.addFeatureLayerAssociation_(u,f),l.push(u)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=c.length-1;u>=0;--u)a.remove(c[u]);a.extend(l)}return(l.length>0||c.length>0)&&this.dispatchEvent(new Ibt("select",l,c,e)),!0}}const K0e=JO;var nu=(()=>(function(n){n.Length="LineString",n.Area="Polygon",n.Point="Point"}(nu||(nu={})),nu))();let X0e=(()=>{class n{constructor(){this.DrawType=nu,this.active=!1,this.showSegments=!0,this.clearPrevious=!0,this.idle=!0,this.drawType=nu.Length,this.segmentStyles=[],this.source=new J_,this.tip="",this.halfAreaTip="Click to start",this.subscriptions=[],this.style=new P2({fill:new Vo({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Kc({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new _6({radius:5,stroke:new Kc({color:"rgba(0, 0, 0, 0.7)"}),fill:new Vo({color:"rgba(255, 255, 255, 0.2)"})})}),this.labelStyle=new P2({text:new Rf({font:"14px Calibri,sans-serif",fill:new Vo({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Vo({color:"rgba(0, 0, 0, 0.7)"}),padding:[3,3,3,3],textBaseline:"bottom",offsetY:-15}),image:new P_({radius:8,points:3,angle:Math.PI,displacement:[0,8],fill:new Vo({color:"rgba(0, 0, 0, 0.7)"})})}),this.tipStyle=new P2({text:new Rf({font:"12px Calibri,sans-serif",fill:new Vo({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Vo({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),this.modifyStyle=new P2({image:new _6({radius:5,stroke:new Kc({color:"rgba(0, 0, 0, 0.7)"}),fill:new Vo({color:"rgba(0, 0, 0, 0.4)"})}),text:new Rf({text:"Drag to modify",font:"12px Calibri,sans-serif",fill:new Vo({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Vo({color:"rgba(0, 0, 0, 0.7)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),this.segmentStyle=new P2({text:new Rf({font:"12px Calibri,sans-serif",fill:new Vo({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Vo({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textBaseline:"bottom",offsetY:-12}),image:new P_({radius:6,points:3,angle:Math.PI,displacement:[0,7],fill:new Vo({color:"rgba(0, 0, 0, 0.4)"})})}),this.modify=new G0e({source:this.source,style:this.modifyStyle})}get type(){return this.drawType===nu.Area?"area":"distance"}get idleTip(){return`Start measurement of ${this.type}`}get activeTip(){return`Double click to close ${this.type}`}init(t){this.map=t,this.addVectorLayers()}nextType(){this.drawType=this.drawType===nu.Area?nu.Length:nu.Area,this.source.clear(),this.activate(!1)}addVectorLayers(){this.vectorLayer=new pm({source:this.source,style:t=>this.styleFunction(t),zIndex:9990,className:"measureTool",properties:{key:"measureTool"}}),this.map.addLayer(this.vectorLayer)}activate(t){void 0===t&&(t=!this.active),t?(this.stopMeasure(),this.active=!0,this.segmentStyles=[this.segmentStyle],this.draw=new q0e({geometryName:"measure",source:this.source,type:this.drawType,style:i=>this.styleFunction(i),condition:i=>1===i.activePointers[0].buttons}),this.subscriptions.push(Tc(this.map.getViewport(),"contextmenu").subscribe(i=>{this.idle||this.segmentStyles.length-1==0?(this.activate(!1),i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()):this.draw.finishDrawing()}),Tc(this.draw,"drawstart").subscribe(()=>{this.modify.setActive(!1),this.idle=!1,console.log(this.clearPrevious),this.clearPrevious&&(this.source.clear(),this.segmentStyles=[this.segmentStyle])}),Tc(this.draw,"drawend").subscribe(()=>{console.log("12 ",this.segmentStyles.length),this.idle=!0,this.modify.setActive(!0),this.modifyStyle.setGeometry(this.tipPoint),this.map.once("pointermove",()=>{this.modifyStyle.setGeometry(void 0)}),this.tip=this.idleTip})),this.map.addInteraction(this.modify),this.map.addInteraction(this.draw),this.tip=this.idleTip):(this.stopMeasure(),this.active=!1),this.modify.setActive(this.active),this.activateOtherInteractions()}stopMeasure(){this.map.removeInteraction(this.modify),this.map.removeInteraction(this.draw),this.source.clear(),this.subscriptions.forEach(t=>t.unsubscribe())}activateOtherInteractions(){this.map.getInteractions().getArray().filter(t=>t instanceof K0e||t instanceof G0e||t instanceof q0e).filter(t=>t!==this.draw&&t!==this.modify).forEach(t=>{t.setActive(!this.active)})}formatLength(t){const i=Oue(t);return i>100?Math.round(i/1e3*100)/100+" km":Math.round(100*i)/100+" m"}formatArea(t){const i=Nue(t);return i>1e4?Math.round(i/1e6*100)/100+" km\xb2":Math.round(100*i)/100+" m\xb2"}styleFunction(t){const i=[this.style],r=t.getGeometry(),s=r.getType();let o,a,c;if(s===nu.Area?(o=r.getInteriorPoint(),a=this.formatArea(r),c=new Nf(r.getCoordinates()[0]),this.tip=c.getCoordinates().length<4?this.halfAreaTip:this.activeTip):s===nu.Length&&(o=new d4(r.getLastCoordinate()),a=this.formatLength(r),c=r,this.tip=this.idle?this.idleTip:this.activeTip),this.showSegments&&c){let l=0;c.forEachSegment((u,f)=>{const p=new Nf([u,f]),g=`${this.formatLength(p)}`;this.segmentStyles.length-1<l&&this.segmentStyles.push(this.segmentStyle.clone());const _=new d4(p.getCoordinateAt(.5));this.segmentStyles[l].setGeometry(_),this.segmentStyles[l].getText().setText(g),i.push(this.segmentStyles[l]),l++})}return a&&(this.labelStyle.setGeometry(o),this.labelStyle.getText().setText(a),i.push(this.labelStyle)),this.tip&&s===nu.Point&&!this.modify.getOverlay().getSource().getFeatures().length&&(this.tipPoint=r,this.tipStyle.getText().setText(this.tip),i.push(this.tipStyle)),i}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Obt=class zbt extends W_{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(e){this.set("preload",e)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(e){this.set("useInterimTilesOnError",e)}getData(e){return super.getData(e)}},Y0e=class Nbt extends L_{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?t=e:0==e.getState()?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Zi()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else i=t,this.transitionStarts_[e]=i;const r=t-i+1e3/60;return r>=this.transition_?1:Yue(r/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}},Z0e=class Vbt extends Y0e{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function Ubt(){const n=f4(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=bO(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},the=class Qbt{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const c=U_(this.targetProj_,this.sourceProj_);this.transformInv_=function(x){const M=x[0]+"/"+x[1];return a[M]||(a[M]=c(x)),a[M]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&wo(r)==wo(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?wo(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?wo(this.targetProj_.getExtent()):null;const l=Z5(i),u=vE(i),f=AE(i),p=mE(i),g=this.transformInv_(l),_=this.transformInv_(u),y=this.transformInv_(f),w=this.transformInv_(p),C=10+(o?Math.max(0,Math.ceil(Math.log2(gE(i)/(o*o*256*256)))):0);if(this.addQuad_(l,u,f,p,g,_,y,w,C),this.wrapsXInSource_){let x=1/0;this.triangles_.forEach(function(M,T,I){x=Math.min(x,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(function(M){if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-x>this.sourceWorldWidth_/2){const T=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];T[0][0]-x>this.sourceWorldWidth_/2&&(T[0][0]-=this.sourceWorldWidth_),T[1][0]-x>this.sourceWorldWidth_/2&&(T[1][0]-=this.sourceWorldWidth_),T[2][0]-x>this.sourceWorldWidth_/2&&(T[2][0]-=this.sourceWorldWidth_);const I=Math.min(T[0][0],T[1][0],T[2][0]);Math.max(T[0][0],T[1][0],T[2][0])-I<this.sourceWorldWidth_/2&&(M.source=T)}}.bind(this))}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,c,l){const u=eu([s,o,a,c]),f=this.sourceWorldWidth_?wo(u)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&f>.5&&f<1;let _=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(_=wo(eu([e,t,i,r]))/this.targetWorldWidth_>.25||_),!g&&this.sourceProj_.isGlobal()&&f&&(_=f>.25||_)),!_&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!ll(u,this.maxSourceExtent_))return;let y=0;if(!(_||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(c[0])&&isFinite(c[1])))if(l>0)_=!0;else if(y=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(c[0])&&isFinite(c[1])?0:1),1!=y&&2!=y&&4!=y&&8!=y)return;if(l>0){if(!_){const C=this.transformInv_([(e[0]+i[0])/2,(e[1]+i[1])/2]);let x;x=g?(m6(s[0],p)+m6(a[0],p))/2-m6(C[0],p):(s[0]+a[0])/2-C[0];const M=(s[1]+a[1])/2-C[1];_=x*x+M*M>this.errorThresholdSquared_}if(_){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const w=[(t[0]+i[0])/2,(t[1]+i[1])/2],C=this.transformInv_(w),x=[(r[0]+e[0])/2,(r[1]+e[1])/2],M=this.transformInv_(x);this.addQuad_(e,t,w,x,s,o,C,M,l-1),this.addQuad_(x,w,i,r,M,C,a,c,l-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],C=this.transformInv_(w),x=[(i[0]+r[0])/2,(i[1]+r[1])/2],M=this.transformInv_(x);this.addQuad_(e,w,x,r,s,C,M,c,l-1),this.addQuad_(w,t,i,x,C,o,a,M,l-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&y)&&this.addTriangle_(e,i,r,s,a,c),0==(14&y)&&this.addTriangle_(e,i,t,s,a,o),y&&(0==(13&y)&&this.addTriangle_(t,r,e,o,c,s),0==(7&y)&&this.addTriangle_(t,r,i,o,c,a))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,i,r){const s=t.source;om(e,s[0]),om(e,s[1]),om(e,s[2])}),e}getTriangles(){return this.triangles_}};let eN;const nhe=[];function ihe(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function tN(n,e){return Math.abs(n[4*e]-210)>2||Math.abs(n[4*e+3]-191.25)>2}function nN(n,e,t,i){const r=G_(t,e,n);let s=Gue(e,i,t);const o=e.getMetersPerUnit();void 0!==o&&(s*=o);const a=n.getMetersPerUnit();void 0!==a&&(s/=a);const c=n.getExtent();if(!c||O_(c,r)){const l=Gue(n,s,r)/s;isFinite(l)&&l>0&&(s/=l)}return s}function rhe(n,e,t,i,r,s,o,a,c,l,u,f){const p=f4(Math.round(t*n),Math.round(t*e),nhe);if(f||(p.imageSmoothingEnabled=!1),0===c.length)return p.canvas;function g(T){return Math.round(T*t)/t}p.scale(t,t),p.globalCompositeOperation="lighter";const _=[1/0,1/0,-1/0,-1/0];c.forEach(function(T,I,F){Tue(_,T.extent)});const y=wo(_),w=m2(_),C=f4(Math.round(t*y/i),Math.round(t*w/i));f||(C.imageSmoothingEnabled=!1);const x=t/i;c.forEach(function(T,I,F){const P=T.extent[0]-_[0],R=-(T.extent[3]-_[3]),k=wo(T.extent),W=m2(T.extent);T.image.width>0&&T.image.height>0&&C.drawImage(T.image,l,l,T.image.width-2*l,T.image.height-2*l,P*x,R*x,k*x,W*x)});const M=Z5(o);return a.getTriangles().forEach(function(T,I,F){const P=T.source,R=T.target;let k=P[0][0],W=P[0][1],ie=P[1][0],Te=P[1][1],me=P[2][0],Q=P[2][1];const he=g((R[0][0]-M[0])/s),K=g(-(R[0][1]-M[1])/s),ae=g((R[1][0]-M[0])/s),fe=g(-(R[1][1]-M[1])/s),de=g((R[2][0]-M[0])/s),ke=g(-(R[2][1]-M[1])/s),et=k,Fe=W;k=0,W=0,ie-=et,Te-=Fe,me-=et,Q-=Fe;const ut=function Eyt(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>s&&(s=c,r=a)}if(0===s)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let l=i;l<e+1;l++)i==l?n[a][l]=0:n[a][l]+=c*n[i][l]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}([[ie,Te,0,0,ae-he],[me,Q,0,0,de-he],[0,0,ie,Te,fe-K],[0,0,me,Q,ke-K]]);if(ut){if(p.save(),p.beginPath(),function Wbt(){if(void 0===eN){const n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",ihe(n,4,5,4,0),ihe(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;eN=tN(e,0)||tN(e,4)||tN(e,8)}return eN}()||!f){p.moveTo(ae,fe);const Bt=4,xt=he-ae,Zt=K-fe;for(let cn=0;cn<Bt;cn++)p.lineTo(ae+g((cn+1)*xt/Bt),fe+g(cn*Zt/(Bt-1))),cn!=Bt-1&&p.lineTo(ae+g((cn+1)*xt/Bt),fe+g((cn+1)*Zt/(Bt-1)));p.lineTo(de,ke)}else p.moveTo(ae,fe),p.lineTo(he,K),p.lineTo(de,ke);p.clip(),p.transform(ut[0],ut[2],ut[1],ut[3],he,K),p.translate(_[0]-et,_[3]-Fe),p.scale(i/t,-i/t),p.drawImage(C.canvas,0,0),p.restore()}}),u&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(T,I,F){const P=T.target,R=(P[0][0]-M[0])/s,k=-(P[0][1]-M[1])/s,W=(P[1][0]-M[0])/s,ie=-(P[1][1]-M[1])/s,Te=(P[2][0]-M[0])/s,me=-(P[2][1]-M[1])/s;p.beginPath(),p.moveTo(W,ie),p.lineTo(R,k),p.lineTo(Te,me),p.closePath(),p.stroke()}),p.restore()),p.canvas}const iN=class $bt extends Y0e{constructor(e,t,i,r,s,o,a,c,l,u,f,p){super(s,0,{interpolate:!!p}),this.renderEdges_=void 0!==f&&f,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const g=r.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const w=_?w6(g,_):g;if(0===gE(w))return void(this.state=4);const C=e.getExtent();C&&(y=y?w6(y,C):C);const x=r.getResolution(this.wrappedTileCoord_[0]),M=function jbt(n,e,t,i){const r=kf(t);let s=nN(n,e,r,i);return(!isFinite(s)||s<=0)&&sO(t,function(o){return s=nN(n,e,o,i),isFinite(s)&&s>0}),s}(e,i,w,x);if(!isFinite(M)||M<=0)return void(this.state=4);if(this.triangulation_=new the(e,i,w,y,M*(void 0!==u?u:.5),x),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(M);let I=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(I[1]=oc(I[1],y[1],y[3]),I[3]=oc(I[3],y[1],y[3])):I=w6(I,y)),gE(I)){const F=t.getTileRangeForExtentAndZ(I,this.sourceZ_);for(let P=F.minX;P<=F.maxX;P++)for(let R=F.minY;R<=F.maxY;R++){const k=l(this.sourceZ_,P,R,a);k&&this.sourceTiles_.push(k)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(function(t,i,r){t&&2==t.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=rhe(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,i,r){const s=t.getState();if(0==s||1==s){e++;const o=Rs(t,"change",function(a){const c=t.getState();(2==c||3==c||4==c)&&(pa(o),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){0==t.getState()&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(pa),this.sourcesListenerKeys_=null}release(){this.canvas_&&(fue(this.canvas_.getContext("2d")),nhe.push(this.canvas_),this.canvas_=null),super.release()}};class she{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ym(n,e,t,i,r){return void 0!==r?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new she(n,e,t,i)}const ohe=she,Kbt=class qbt extends SO{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new ohe(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let l=a.getSource().getTile(e,t,i,s,o);return 3==l.getState()&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Xc(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!O_(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,c=t.viewState,l=i.getRenderSource(),u=l.getTileGridForProjection(c.projection),f=l.getTilePixelRatio(t.pixelRatio);for(let p=u.getZForResolution(c.resolution);p>=u.getMinZoom();--p){const g=u.getTileCoordForCoordAndZ(r,p),_=l.getTile(p,g[1],g[2],o,a);if(!(_ instanceof Z0e||_ instanceof iN)||_ instanceof iN&&4===_.getState())return null;if(2!==_.getState())continue;const y=u.getOrigin(p),w=h4(u.getTileSize(p)),C=u.getResolution(p),x=Math.floor(f*((r[0]-y[0])/C-g[1]*w[0])),M=Math.floor(f*((y[1]-r[1])/C-g[2]*w[1])),T=Math.round(f*l.getGutterForProjection(c.projection));return this.getImageData(_.getImage(),x+T,M+T)}return null}loadedTileCallback(e,t,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(e,t,i)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,c=r.rotation,l=e.pixelRatio,u=this.getLayer(),f=u.getSource(),p=f.getRevision(),g=f.getTileGridForProjection(s),_=g.getZForResolution(o,f.zDirection),y=g.getResolution(_);let w=e.extent;const C=e.viewState.resolution,x=f.getTilePixelRatio(l),M=Math.round(wo(w)/C*l),T=Math.round(m2(w)/C*l),I=i.extent&&ah(i.extent);I&&(w=w6(w,ah(i.extent)));const F=y*M/2/x,P=y*T/2/x,R=[a[0]-F,a[1]-P,a[0]+F,a[1]+P],k=g.getTileRangeForExtentAndZ(w,_),W={};W[_]={};const ie=this.createLoadedTileFinder(f,s,W),Te=this.tmpExtent,me=this.tmpTileRange_;this.newTiles_=!1;const Q=c?aO(r.center,C,c,e.size):void 0;for(let wt=k.minX;wt<=k.maxX;++wt)for(let ut=k.minY;ut<=k.maxY;++ut){if(c&&!g.tileCoordIntersectsViewport([_,wt,ut],Q))continue;const Bt=this.getTile(_,wt,ut,e);if(this.isDrawableTile(Bt)){const cn=xr(this);if(2==Bt.getState()){W[_][Bt.tileCoord.toString()]=Bt;let Sn=Bt.inTransition(cn);Sn&&1!==i.opacity&&(Bt.endTransition(cn),Sn=!1),!this.newTiles_&&(Sn||!this.renderedTiles.includes(Bt))&&(this.newTiles_=!0)}if(1===Bt.getAlpha(cn,e.time))continue}const xt=g.getTileCoordChildTileRange(Bt.tileCoord,me,Te);let Zt=!1;xt&&(Zt=ie(_+1,xt)),Zt||g.forEachTileCoordParentTileRange(Bt.tileCoord,ie,me,Te)}const he=y/o*l/x;Ju(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,c,-M/2,-T/2);const K=fE(this.pixelTransform);this.useContainer(t,K,this.getBackground(e));const ae=this.context,fe=ae.canvas;z_(this.inversePixelTransform,this.pixelTransform),Ju(this.tempTransform,M/2,T/2,he,he,0,-M/2,-T/2),fe.width!=M||fe.height!=T?(fe.width=M,fe.height=T):this.containerReused||ae.clearRect(0,0,M,T),I&&this.clipUnrotated(ae,e,I),f.getInterpolate()||(ae.imageSmoothingEnabled=!1),this.preRender(ae,e),this.renderedTiles.length=0;let ke,et,Fe,de=Object.keys(W).map(Number);de.sort($5),1!==i.opacity||this.containerReused&&!f.getOpaque(e.viewState.projection)?(ke=[],et=[]):de=de.reverse();for(let wt=de.length-1;wt>=0;--wt){const ut=de[wt],Bt=f.getTilePixelSize(ut,l,s),Zt=g.getResolution(ut)/y,cn=Bt[0]*Zt*he,Sn=Bt[1]*Zt*he,ln=g.getTileCoordForCoordAndZ(Z5(R),ut),Ti=g.getTileCoordExtent(ln),Vt=Xc(this.tempTransform,[x*(Ti[0]-R[0])/y,x*(R[3]-Ti[3])/y]),Ft=x*f.getGutterForProjection(s),vn=W[ut];for(const qn in vn){const En=vn[qn],Cn=En.tileCoord,Un=ln[1]-Cn[1],di=Math.round(Vt[0]-(Un-1)*cn),cr=ln[2]-Cn[2],hs=Math.round(Vt[1]-(cr-1)*Sn),Oe=Math.round(Vt[0]-Un*cn),ve=Math.round(Vt[1]-cr*Sn),Tt=di-Oe,mn=hs-ve,bn=_===ut,In=bn&&1!==En.getAlpha(xr(this),e.time);let Ci=!1;if(!In)if(ke){Fe=[Oe,ve,Oe+Tt,ve,Oe+Tt,ve+mn,Oe,ve+mn];for(let De=0,Jt=ke.length;De<Jt;++De)if(_!==ut&&ut<et[De]){const un=ke[De];ll([Oe,ve,Oe+Tt,ve+mn],[un[0],un[3],un[4],un[7]])&&(Ci||(ae.save(),Ci=!0),ae.beginPath(),ae.moveTo(Fe[0],Fe[1]),ae.lineTo(Fe[2],Fe[3]),ae.lineTo(Fe[4],Fe[5]),ae.lineTo(Fe[6],Fe[7]),ae.moveTo(un[6],un[7]),ae.lineTo(un[4],un[5]),ae.lineTo(un[2],un[3]),ae.lineTo(un[0],un[1]),ae.clip())}ke.push(Fe),et.push(ut)}else ae.clearRect(Oe,ve,Tt,mn);this.drawTileImage(En,e,Oe,ve,Tt,mn,Ft,bn),ke&&!In?(Ci&&ae.restore(),this.renderedTiles.unshift(En)):this.renderedTiles.push(En),this.updateUsedTiles(e.usedTiles,f,En)}}return this.renderedRevision=p,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!sm(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=l,this.renderedProjection=s,this.manageTilePyramid(e,f,g,l,s,w,_,u.getPreload()),this.scheduleExpireCache(e,f),this.postRender(ae,e),i.extent&&ae.restore(),ae.imageSmoothingEnabled=!0,K!==fe.style.transform&&(fe.style.transform=K),this.container}drawTileImage(e,t,i,r,s,o,a,c){const l=this.getTileImage(e);if(!l)return;const u=xr(this),f=t.layerStatesArray[t.layerIndex],p=f.opacity*(c?e.getAlpha(u,t.time):1),g=p!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,i,r,s,o),g&&this.context.restore(),p!==f.opacity?t.animate=!0:c&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(r,s,o){const a=xr(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=xr(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,c,l){const u=xr(t);u in e.wantedTiles||(e.wantedTiles[u]={});const f=e.wantedTiles[u],p=e.tileQueue,g=i.getMinZoom(),_=e.viewState.rotation,y=_?aO(e.viewState.center,e.viewState.resolution,_,e.size):void 0;let C,x,M,T,I,F,w=0;for(F=g;F<=a;++F)for(x=i.getTileRangeForExtentAndZ(o,F,x),M=i.getResolution(F),T=x.minX;T<=x.maxX;++T)for(I=x.minY;I<=x.maxY;++I)_&&!i.tileCoordIntersectsViewport([F,T,I],y)||(a-F<=c?(++w,C=t.getTile(F,T,I,r,s),0==C.getState()&&(f[C.getKey()]=!0,p.isKeyQueued(C.getKey())||p.enqueue([C,u,i.getTileCoordCenter(C.tileCoord),M])),void 0!==l&&l(C)):t.useTile(F,T,I,s));t.updateCacheSize(w,s)}},qE=class Xbt extends Obt{constructor(e){super(e)}createRenderer(){return new Kbt(this)}};function ahe(n,e,t,i){return void 0!==i?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function iy(n,e,t){return n+"/"+e+"/"+t}function che(n){return iy(n[0],n[1],n[2])}const lhe=class uxt extends class sxt{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return ms(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return ms(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ms(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const i=function axt(n){return n.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(r){r.tileCoord[0]!==i&&(this.remove(che(r.tileCoord)),r.release())}.bind(this))}},fxt=[0,0,0],uhe=class dxt{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,ms(function Vyt(n,e,t){const i=e||$5;return n.every(function(r,s){if(0===s)return!0;const o=i(n[s-1],r);return!(o>0||t&&0===o)})}(this.resolutions_,function(r,s){return s-r},!0),17),!e.origins)for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(t){if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}else t=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,ms(this.origins_.length==this.resolutions_.length,20));const i=e.extent;void 0!==i&&!this.origin_&&!this.origins_&&(this.origin_=Z5(i)),ms(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,ms(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:256,ms(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(r,s){const o=new ohe(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,c=null,l=e[0]-1;for(2===this.zoomFactor_?(o=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);l>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),s=ym(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(c,l,i),t(l,s))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const s=2*e[1],o=2*e[2];return ym(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return ym(s,o,s,o,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),l=Math.floor(s*c),u=Math.floor(o*c);return t<r?ym(l,l,u,u,i):ym(l,Math.floor(c*(s+1))-1,u,Math.floor(c*(o+1))-1,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),o=h4(this.getTileSize(e),this.tmpSize_);return e0(r[0]+t.minX*o[0]*s,r[1]+t.minY*o[1]*s,r[0]+(t.maxX+1)*o[0]*s,r[1]+(t.maxY+1)*o[1]*s,i)}getTileRangeForExtentAndZ(e,t,i){const r=fxt;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);const s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),ym(s,r[1],o,r[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=h4(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=h4(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r;return e0(o,a,o+s[0]*r,a+s[1]*r,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),c=this.getOrigin(o),l=h4(this.getTileSize(o),this.tmpSize_);let u=a*(e-c[0])/i/l[0],f=a*(c[1]-t)/i/l[1];return r?(u=eE(u,5)-1,f=eE(f,5)-1):(u=JS(u,5),f=JS(f,5)),ahe(o,u,f,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),c=h4(this.getTileSize(i),this.tmpSize_);let l=(e-o[0])/a/c[0],u=(o[1]-t)/a/c[1];return r?(l=eE(l,5)-1,u=eE(u,5)-1):(l=JS(l,5),u=JS(u,5)),ahe(i,l,u,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){return oc(iE(this.resolutions_,e,t||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return R0e(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}};function hhe(n){let e=n.getDefaultTileGrid();return e||(e=function Axt(n,e,t,i){return function gxt(n,e,t,i){i=void 0!==i?i:"top-left";const r=fhe(n,e,t);return new uhe({extent:n,origin:uwt(n,i),resolutions:r,tileSize:t})}(aN(n),e,t,i)}(n),n.setDefaultTileGrid(e)),e}function fhe(n,e,t,i){e=void 0!==e?e:42,t=h4(void 0!==t?t:256);const r=m2(n),s=wo(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let c=0;c<o;++c)a[c]=i/Math.pow(2,c);return a}function aN(n){let e=(n=Ja(n)).getExtent();if(!e){const t=180*J5.degrees/n.getMetersPerUnit();e=e0(-t,-t,t,t)}return e}class _xt extends L3{constructor(e,t){super(e),this.tile=t}}const yxt=class vxt extends IO{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&h4(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new lhe(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let a,c,l,o=!0;for(let u=i.minX;u<=i.maxX;++u)for(let f=i.minY;f<=i.maxY;++f)c=iy(t,u,f),l=!1,s.containsKey(c)&&(a=s.get(c),l=2===a.getState(),l&&(l=!1!==r(a))),l||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(e,t,i,r,s){return Zi()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:hhe(e)}getTileCacheForProjection(e){const t=this.getProjection();return ms(null===t||Pf(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=h4(r.getTileSize(e),this.tmpSize);return 1==s?o:function byt(n,e,t){return void 0===t&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=void 0!==t?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=function pxt(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=aN(t);if(O_(s,r))return e;{const o=wo(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}}(i,e,t)),function lxt(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return!s||s.containsXY(i,r)}(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}};function wxt(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,c){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=e.getFullTileRange(o[0]);return ms(u,55),(u.getHeight()-o[2]-1).toString()})}}class cN extends yxt{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===cN.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=xr(t),r=t.getState();let s;1==r?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=3==r?"tileloaderror":2==r?"tileloadend":void 0),null!=s&&this.dispatchEvent(new _xt(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=function xxt(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function Cxt(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=wxt(n[r],e);return function bxt(n){return 1===n.length?n[0]:function(e,t,i){if(e){const r=function cxt(n){return(n[1]<<n[0])+n[2]}(e),s=m6(r,n.length);return n[s](e,t,i)}}}(i)}(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=iy(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const Mxt=cN;function Ext(n,e){n.getImage().src=e}const Txt=class Sxt extends Mxt{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ext,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:Z0e,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Pf(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!Pf(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Pf(t,e)))return this.tileGrid;{const i=xr(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=hhe(e)),this.tileGridForProjection[i]}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Pf(t,e))return this.tileCache;{const i=xr(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new lhe(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(e,t,i,r,s,o){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,s),l=c?this.tileUrlFunction(c,r,s):void 0,u=new this.tileClass(a,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener("change",this.handleTileChange.bind(this)),u}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||Pf(o,s))return this.getTileInternal(e,t,i,r,o||s);{const a=this.getTileCacheForProjection(s),c=[e,t,i];let l;const u=che(c);a.containsKey(u)&&(l=a.get(u));const f=this.getKey();if(l&&l.key==f)return l;{const p=this.getTileGridForProjection(o),g=this.getTileGridForProjection(s),_=this.getTileCoordForTileUrlFunction(c,s),y=new iN(o,p,s,g,c,_,this.getTilePixelRatio(r),this.getGutter(),function(w,C,x,M){return this.getTileInternal(w,C,x,M,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return y.key=f,l?(y.interimTile=l,y.refreshInterimChain(),a.replace(u,y)):a.set(u,y),y}}}getTileInternal(e,t,i,r,s){let o=null;const a=iy(e,t,i),c=this.getKey();if(this.tileCache.containsKey(a)){if(o=this.tileCache.get(a),o.key!=c){const l=o;o=this.createTile_(e,t,i,r,s,c),o.interimTile=0==l.getState()?l.interimTile:l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(e,t,i,r,s,c),this.tileCache.set(a,o);return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=Ja(e);if(i){const r=xr(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}},KE=class Lxt extends Txt{constructor(e){const t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:function mxt(n){const e=n||{},t=e.extent||Ja("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:fhe(t,e.maxZoom,e.tileSize,e.maxResolution)};return new uhe(i)}({extent:aN(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}},Bxt=class Ixt extends KE{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX,zDirection:e.zDirection})}};var ul=(()=>(function(n){n.OSM="OSM",n.Google="Google",n.OSMSatellite="OSMSatellite",n.GoogleSatellite="GoogleSatellite",n.Horby1960="Horby1960",n.Horby1975="Horby1975"}(ul||(ul={})),ul))(),I6=(()=>(function(n){n.House="House",n.parcel="parcel",n.test="Riksintressen",n.dem="dem"}(I6||(I6={})),I6))();class lh{constructor(e){this.basemap=!1,Object.assign(this,e),this.name||(this.name=`${this.key}`)}}let dhe=(()=>{class n{constructor(t){this.cookieService=t,this.cookieKey="ol-basemap",this.basemap$=new no(ul.OSM)}getStore(){const t=this.cookieService.get(this.cookieKey);if(""===t)return;const i=JSON.parse(t);i in ul&&this.basemap$.next(i)}setStore(){this.cookieService.set(this.cookieKey,JSON.stringify(this.basemap$.value))}nextBasemap(){const t=Object.values(ul),i=t.indexOf(this.basemap$.value);this.basemap$.next(t[(i+1)%t.length]),this.map.getLayers().getArray().filter(r=>!0===r.getProperties().basemap).forEach(r=>r.setVisible(r.getProperties().key===this.basemap$.value)),this.setStore()}getBaseLayers(){this.getStore();const t=[new qE({visible:this.basemap$.value===ul.OSM,properties:new lh({basemap:!0,key:ul.OSM}),source:new Bxt}),new qE({visible:this.basemap$.value===ul.OSMSatellite,properties:new lh({basemap:!0,key:ul.OSMSatellite}),source:new KE({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19})}),new qE({visible:this.basemap$.value===ul.Google,properties:new lh({basemap:!0,key:ul.Google}),source:new KE({url:"http://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}"})}),new qE({visible:this.basemap$.value===ul.GoogleSatellite,properties:new lh({basemap:!0,key:ul.GoogleSatellite}),source:new KE({url:"http://mt0.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}"})})];return t}}return n.\u0275fac=function(t){return new(t||n)(Xe(R4))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const r0={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function phe(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const c=e?0:s[0]*r,l=e?0:s[1]*r,u=a?a[0]:0,f=a?a[1]:0;let p=n[0]+c/2+u,g=n[2]-c/2+u,_=n[1]+l/2+f,y=n[3]-l/2+f;p>g&&(p=(g+p)/2,g=p),_>y&&(_=(y+_)/2,y=_);let w=oc(i[0],p,g),C=oc(i[1],_,y);if(o&&t&&r){const x=30*r;w+=-x*Math.log(1+Math.max(0,p-i[0])/x)+x*Math.log(1+Math.max(0,i[0]-g)/x),C+=-x*Math.log(1+Math.max(0,_-i[1])/x)+x*Math.log(1+Math.max(0,i[1]-y)/x)}return[w,C]}}function Rxt(n){return n}function lN(n,e,t,i){const r=wo(e)/t[0],s=m2(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function uN(n,e,t){let i=Math.min(n,e);return i*=Math.log(1+50*Math.max(0,n/e-1))/50+1,t&&(i=Math.max(i,t),i/=Math.log(1+50*Math.max(0,t/n-1))/50+1),oc(i,t/2,2*e)}function ghe(n,e,t,i,r){return t=void 0===t||t,function(s,o,a,c){if(void 0!==s){const l=i?lN(n,i,a,r):n;return t&&c?uN(s,l,e):oc(s,e,l)}}}function hN(n){if(void 0!==n)return 0}function mhe(n){if(void 0!==n)return n}function XE(n,e){setTimeout(function(){n(e)},0)}function Uxt(n){return!(n.sourceCenter&&n.targetCenter&&!n0(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function dN(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,c=n[1]*s+n[0]*o;return a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,o=-o,[a*s-c*o,c*s+a*o]}const B6=class zxt extends Yu{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=dO(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&Vue(),e.center&&(e.center=ac(e.center)),e.extent&&(e.extent=ah(e.extent)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in r0)delete t[a];this.setProperties(t,!0);const i=function Nxt(n){let e,t,i,o=void 0!==n.minZoom?n.minZoom:0,a=void 0!==n.maxZoom?n.maxZoom:28;const c=void 0!==n.zoomFactor?n.zoomFactor:2,l=void 0!==n.multiWorld&&n.multiWorld,u=void 0===n.smoothResolutionConstraint||n.smoothResolutionConstraint,f=void 0!==n.showFullExtent&&n.showFullExtent,p=dO(n.projection,"EPSG:3857"),g=p.getExtent();let _=n.constrainOnlyCenter,y=n.extent;if(!l&&!y&&p.isGlobal()&&(_=!1,y=g),void 0!==n.resolutions){const w=n.resolutions;t=w[o],i=void 0!==w[a]?w[a]:w[w.length-1],e=n.constrainResolution?function Fxt(n,e,t,i){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const c=n[0],l=n[n.length-1],u=t?lN(c,t,o,i):c;if(a)return e?uN(r,u,l):oc(r,l,u);const f=Math.min(u,r),p=Math.floor(iE(n,f,s));return n[p]>u&&p<n.length-1?n[p+1]:n[p]}}}(w,u,!_&&y,f):ghe(t,i,u,!_&&y,f)}else{const C=(g?Math.max(wo(g),m2(g)):360*J5.degrees/p.getMetersPerUnit())/256/Math.pow(2,0),x=C/Math.pow(2,28);t=n.maxResolution,void 0!==t?o=0:t=C/Math.pow(c,o),i=n.minResolution,void 0===i&&(i=void 0!==n.maxZoom?void 0!==n.maxResolution?t/Math.pow(c,a):C/Math.pow(c,a):x),a=o+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-o),e=n.constrainResolution?function kxt(n,e,t,i,r,s){return i=void 0===i||i,t=void 0!==t?t:0,function(o,a,c,l){if(void 0!==o){const u=r?lN(e,r,c,s):e;if(l)return i?uN(o,u,t):oc(o,t,u);const f=1e-9,p=Math.ceil(Math.log(e/u)/Math.log(n)-f),g=-a*(.5-f)+.5,_=Math.min(u,o),y=Math.floor(Math.log(e/_)/Math.log(n)+g),w=Math.max(p,y);return oc(e/Math.pow(n,w),t,u)}}}(c,t,i,u,!_&&y,f):ghe(t,i,u,!_&&y,f)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:c}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=function Oxt(n){if(void 0!==n.extent)return phe(n.extent,n.constrainOnlyCenter,void 0===n.smoothExtentConstraint||n.smoothExtentConstraint);const e=dO(n.projection,"EPSG:3857");if(!0!==n.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,phe(t,!1,!1)}return Rxt}(e),s=i.constraint,o=function Vxt(n){if(void 0===n.enableRotation||n.enableRotation){const t=n.constrainRotation;return void 0===t||!0===t?function Hxt(n){return n=n||j5(5),function(e,t){return t?e:void 0!==e?Math.abs(e)<=n?0:e:void 0}}():!1===t?mhe:"number"==typeof t?function Pxt(n){const e=2*Math.PI/n;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(t):mhe}return hN}(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenter();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution();this.setCenterInternal([i[0]+s/2*(r[3]-t[3]+t[1]-r[1]),i[1]-s/2*(r[0]-t[0]+t[2]-r[2])])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=ac(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=ac(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let i,t=arguments.length;t>1&&"function"==typeof arguments[t-1]&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),void 0!==u.zoom?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),void 0!==u.rotation&&this.setRotation(u.rotation)}if(r===t)return void(i&&XE(i,!0));let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const l=[];for(;r<t;++r){const u=arguments[r],f={start:s,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||vO,callback:i};if(u.center&&(f.sourceCenter=o,f.targetCenter=u.center.slice(),o=f.targetCenter),void 0!==u.zoom?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(u.zoom),a=f.targetResolution):u.resolution&&(f.sourceResolution=a,f.targetResolution=u.resolution,a=f.targetResolution),void 0!==u.rotation){f.sourceRotation=c;const p=m6(u.rotation-c+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=c+p,c=f.targetRotation}Uxt(f)?f.complete=!0:s+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&XE(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const c=r[o];if(c.complete)continue;const l=e-c.start;let u=c.duration>0?l/c.duration:1;u>=1?(c.complete=!0,u=1):s=!1;const f=c.easing(u);if(c.sourceCenter){const p=c.sourceCenter[0],g=c.sourceCenter[1],_=c.targetCenter[0],y=c.targetCenter[1];this.nextCenter_=c.targetCenter,this.targetCenter_=[p+f*(_-p),g+f*(y-g)]}if(c.sourceResolution&&c.targetResolution){const p=1===f?c.targetResolution:c.sourceResolution+f*(c.targetResolution-c.sourceResolution);if(c.anchor){const g=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(p,0,g,!0);this.targetCenter_=this.calculateCenterZoom(_,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){const p=1===f?m6(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+f*(c.targetRotation-c.sourceRotation);if(c.anchor){const g=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(g,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(s){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&XE(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return void 0!==r&&(i=[r[0]-t[0],r[1]-t[1]],cO(i,e-this.getRotation()),function Swt(n,e){n[0]+=+e[0],n[1]+=+e[1]}(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();return void 0!==r&&void 0!==s&&(i=[t[0]-e*(t[0]-r[0])/s,t[1]-e*(t[1]-r[1])/s]),i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Q_(e,this.getProjection())}getCenterInternal(){return this.get(r0.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return SE(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ms(t,1);const i=this.getResolution();ms(void 0!==i,2);const r=this.getRotation();return ms(void 0!==r,3),oO(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(r0.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(ah(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=wo(e)/t[0],r=m2(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=Math.log(t/this.minResolution_)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(r0.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=Math.log(i/this.minResolution_)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=dN(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let i,r,t=this.minZoom_||0;if(this.resolutions_){const s=iE(this.resolutions_,e,1);t=s,i=this.resolutions_[s],r=s==this.resolutions_.length-1?2:i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=oc(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[t]/Math.pow(this.resolutions_[t]/this.resolutions_[t+1],oc(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(ms(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))ms(!_E(e),25),i=H0e(ah(e,this.getProjection()));else if("Circle"===e.getType()){const r=ah(e.getExtent(),this.getProjection());i=H0e(r),i.rotate(this.getRotation(),kf(r))}else{const r=C6();i=r?e.clone().transform(r,this.getProjection()):e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,c=1/0,l=-1/0,u=-1/0;for(let f=0,p=s.length;f<p;f+=o){const g=s[f]*i-s[f+1]*r,_=s[f]*r+s[f+1]*i;a=Math.min(a,g),c=Math.min(c,_),l=Math.max(l,g),u=Math.max(u,_)}return[a,c,l,u]}fitInternal(e,t){let i=(t=t||{}).size;i||(i=this.getViewportSizeMinusPadding_());const r=void 0!==t.padding?t.padding:[0,0,0,0],s=void 0!==t.nearest&&t.nearest;let o;o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?o:Math.max(c,o),c=this.getConstrainedResolution(c,s?0:1);const l=this.getRotation(),u=Math.sin(l),f=Math.cos(l),p=kf(a);p[0]+=(r[1]-r[3])/2*c,p[1]+=(r[0]-r[2])/2*c;const y=this.getConstrainedCenter([p[0]*f-p[1]*u,p[1]*f+p[0]*u],c),w=t.callback?t.callback:q5;void 0!==t.duration?this.animateInternal({resolution:c,center:y,duration:t.duration,easing:t.easing},w):(this.targetResolution_=c,this.targetCenter_=y,this.applyTargetState_(!1,!0),XE(w,!0))}centerOn(e,t,i){this.centerOnInternal(ac(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(dN(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),c=dN(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-c[0],e[1]-c[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=Q_(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&ac(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=ac(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ac(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(r0.ROTATION)!==r&&this.set(r0.ROTATION,r),this.get(r0.RESOLUTION)!==o&&(this.set(r0.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(r0.CENTER)||!n0(this.get(r0.CENTER),a))&&this.set(r0.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=void 0!==e?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),c=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=c,void this.applyTargetState_();i=i||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!n0(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:c,resolution:a,duration:e,easing:um,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,i){i=i&&ac(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.setHint(1,-1),this.resolveConstraints(e,t,i)}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}};let Ahe=(()=>{class n{constructor(t){this.cookieService=t,this.cookieKey="ol-view",this.subscriptions=[],this.center=[0,0]}init(t=[0,0],i=15){this.center=t,this.view=new B6({center:this.center,zoom:i}),this.centerAndZoom=this.getStore(),this.subscriptions.push(Tc(this.view,"change").subscribe(()=>this.setStore()))}set centerAndZoom(t){t.center&&this.view.setCenter(t.center),t.zoom&&this.view.setZoom(t.zoom)}get centerAndZoom(){return{center:this.view.getCenter(),zoom:this.view.getZoom()}}onDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getStore(){const t=this.cookieService.get(this.cookieKey);return""===t?{center:this.center,zoom:15}:JSON.parse(t)}setStore(){this.cookieService.set(this.cookieKey,JSON.stringify(this.centerAndZoom))}animate(t,i=500){const r={duration:i};void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.center&&(r.center=t.center),this.view.animate(r)}}return n.\u0275fac=function(t){return new(t||n)(Xe(R4))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gxt=(()=>{class n{constructor(t,i){this.houseService=t,this.olViewService=i}zoomToHouse(){const{lat:t,lng:i}=this.houseService.house$.value.orientation,r=pO([i,t]);this.olViewService.animate({center:r,zoom:17.5})}}return n.\u0275fac=function(t){return new(t||n)(Xe(Lo),Xe(Ahe))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vhe=(()=>{class n{constructor(t,i){this.httpClient=t,this.sanitizer=i,this.height="32px",this.width="32px"}set color(t){this.fillColor="primary"===t?"var(--primary-color)":"accent"===t?"var(--accent-color)":"first"===t?"var(--first-color)":"second"===t?"var(--second-color)":"third"===t?"var(--third-color)":`${t}`}set size(t){this.width=`${t[0]}px`,this.height=`${t[1]}px`}ngOnInit(){this.httpClient.get(this.url,{responseType:"text"}).subscribe({next:t=>{t=t.replace(/height=\"64px\"/gi,"").replace(/width=\"64px\"/gi,""),this.svgData=this.sanitizer.bypassSecurityTrustHtml(t)},error:t=>{this.background="#aaa"}})}}return n.\u0275fac=function(t){return new(t||n)(U($h),U(T8))},n.\u0275cmp=Bn({type:n,selectors:[["app-svg"]],hostVars:8,hostBindings:function(t,i){2&t&&h3("background",i.background)("fill",i.fillColor)("height",i.height)("width",i.width)},inputs:{background:"background",fillColor:"fillColor",height:"height",width:"width",url:"url",color:"color",size:"size"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,i){1&t&&$e(0,"div",0),2&t&&Ce("innerHTML",i.svgData,j3)},styles:["[_nghost-%COMP%]{display:inline-block}  svg>g>g>path:first-child{fill:#747474}"]}),n})(),_he=(()=>{class n{constructor(t){this.cookieService=t,this.cookieKey="ol-layer",this.subscriptions=[],this.layers$=new no([])}getLayers(t){const i=[new pm({source:new J_({features:[t]}),properties:new lh({key:I6.House,name:"Passive house"}),zIndex:100,style:[new P2({stroke:new Kc({color:"rgba(0, 0, 0, 0)",width:2}),fill:new Vo({color:"rgba(30, 30, 30, 0.9)"}),zIndex:1})]})];return this.layers$.next(i),i}}return n.\u0275fac=function(t){return new(t||n)(Xe(R4))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qxt=[[["","label",""]]],Wxt=["[label]"];let yhe=(()=>{class n{constructor(){this.floatLeft=!1,this.stateChange=new er,this.hover=!1}ngOnInit(){}mouseleave(){this.hover=!1}mouseenter(){this.hover=!0}change(){this.stateChange.emit(!this.state)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Bn({type:n,selectors:[["checkbox-toc"]],hostVars:2,hostBindings:function(t,i){2&t&&Rr("hover",i.hover)},inputs:{floatLeft:"floatLeft",state:"state"},outputs:{stateChange:"stateChange"},ngContentSelectors:Wxt,decls:3,vars:1,consts:[[1,"container",3,"mouseenter","mouseleave"],[3,"checked","change"]],template:function(t,i){1&t&&(ec(Qxt),H(0,"label",0),an("mouseenter",function(){return i.mouseenter()})("mouseleave",function(){return i.mouseleave()}),Po(1,0,["class","label","[class.float-left]","floatLeft","[class.float-right]","!floatLeft"]),H(2,"mat-slide-toggle",1),an("change",function(){return i.change()}),N()()),2&t&&(Z(2),Ce("checked",i.state))},dependencies:[qb],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:16px;height:16px;transition:background-color .2s ease-in-out}[_nghost-%COMP%]:hover{background-color:var(--color-5)}mat-slide-toggle[_ngcontent-%COMP%]{transform:scale(.75)}label.container[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative;font-size:.8rem;line-height:1em;white-space:nowrap}"],data:{animation:[jk]}}),n})();function jxt(n,e){if(1&n){const t=la();Vs(0),bc(1),H(2,"checkbox-toc",1),an("stateChange",function(){const s=ai(t).$implicit;return h(Nt().setState(s))}),H(3,"span",2),V(4),N(),H(5,"span",3),V(6),N()(),Us()}if(2&n){const t=e.$implicit;Z(2),Ce("floatLeft",!1)("state",t.getVisible()),Z(2),Jn(" ",t.getProperties().name," "),Z(2),Jn(" ",t.getProperties().name," ")}}let $xt=(()=>{class n{constructor(t,i){this.oLLayerService=t,this.houseService=i,this.layers$=this.oLLayerService.layers$}ngAfterViewInit(){this.layers$.subscribe(t=>console.log(t.map(i=>i.getProperties())))}setState(t){t.setVisible(!t.getVisible())}}return n.\u0275fac=function(t){return new(t||n)(U(_he),U(Lo))},n.\u0275cmp=Bn({type:n,selectors:[["app-map-layer"]],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"floatLeft","state","stateChange"],["label",""],["icon",""]],template:function(t,i){1&t&&(Wt(0,jxt,7,4,"ng-container",0),_a(1,"async")),2&t&&Ce("ngForOf",B1(1,1,i.layers$))},dependencies:[p3,yhe,Cd],data:{animation:[wM,Wk]}}),n})();const qxt=[[["","label",""]],[["","icon",""]]],Kxt=["[label]","[icon]"];let Xxt=(()=>{class n{constructor(){this.floatLeft=!1,this.stateChange=new er,this.hover=!1}ngOnInit(){}mouseleave(){this.hover=!1}mouseenter(){this.hover=!0}change(){this.stateChange.emit(!this.state)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Bn({type:n,selectors:[["checkbox-state"]],hostVars:2,hostBindings:function(t,i){2&t&&Rr("hover",i.hover)},inputs:{floatLeft:"floatLeft",state:"state"},outputs:{stateChange:"stateChange"},ngContentSelectors:Kxt,decls:5,vars:6,consts:[[1,"container",3,"mouseenter","mouseleave"],[3,"checked","change"]],template:function(t,i){1&t&&(ec(qxt),H(0,"mat-label"),Po(1),N(),H(2,"label",0),an("mouseenter",function(){return i.mouseenter()})("mouseleave",function(){return i.mouseleave()}),Po(3,1),H(4,"mat-slide-toggle",1),an("change",function(){return i.change()}),N()()),2&t&&(Rr("float-left",i.floatLeft)("float-right",!i.floatLeft),Ce("@stateSlideIn",i.hover&&!i.floatLeft),Z(4),Ce("checked",i.state))},dependencies:[vZ,qb],styles:['mat-label[_ngcontent-%COMP%]{display:block;position:absolute;float:right;background:var(--accent);border-radius:9px;margin:6px 0;line-height:28px;padding:0 8px;white-space:nowrap;font-size:.8rem;overflow:hidden;width:initial}mat-label.float-left[_ngcontent-%COMP%]{left:80px}mat-label.float-right[_ngcontent-%COMP%]{right:80px}[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px}label.container[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative;padding:8px 0}label.container[_ngcontent-%COMP%]:before{content:"";display:inline-block;position:absolute;width:68px;border-top:1px solid var(--color-20);top:0;left:-4px}label.container[_ngcontent-%COMP%]    >span{height:24px;width:24px;overflow:hidden}'],data:{animation:[jk]}}),n})();const Yxt=[[["","label",""]],[["","icon",""]]],Zxt=["[label]","[icon]"];let Jxt=(()=>{class n{constructor(){this.floatLeft=!1,this.click=new er,this.hover=!1,this.disabled=!1}ngOnInit(){}mouseleave(){this.hover=!1}mouseenter(){this.hover=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Bn({type:n,selectors:[["button-state"]],hostVars:2,hostBindings:function(t,i){2&t&&Rr("hover",i.disabled)},inputs:{floatLeft:"floatLeft",disabled:"disabled"},outputs:{click:"click"},ngContentSelectors:Zxt,decls:4,vars:5,consts:[["mat-mini-fab","","color","accent",3,"click","mouseenter","mouseleave"]],template:function(t,i){1&t&&(ec(Yxt),H(0,"mat-label"),Po(1),N(),H(2,"button",0),an("click",function(){return i.click})("mouseenter",function(){return i.mouseenter()})("mouseleave",function(){return i.mouseleave()}),Po(3,1),N()),2&t&&(Rr("float-left",i.floatLeft)("float-right",!i.floatLeft),Ce("@stateSlideIn",i.hover))},dependencies:[vZ,mb],styles:['mat-label[_ngcontent-%COMP%]{display:block;position:absolute;float:right;background:var(--accent);color:"black";border-radius:9px;margin:6px 0;line-height:28px;padding:0 8px;white-space:nowrap;font-size:.8rem;overflow:hidden;width:initial}mat-label.float-left[_ngcontent-%COMP%]{left:60px}mat-label.float-right[_ngcontent-%COMP%]{right:60px}'],data:{animation:[jk]}}),n})();function eMt(n,e){if(1&n){const t=la();Vs(0),H(1,"div",11)(2,"checkbox-state",12),an("stateChange",function(){ai(t);const r=Nt(5);return h(r.appService.setState(r.States.doors))}),H(3,"span",13),V(4," Doors "),N(),H(5,"span",14)(6,"mat-icon",15),V(7," door_front"),N()()(),H(8,"checkbox-state",12),an("stateChange",function(){ai(t);const r=Nt(5);return h(r.appService.setState(r.States.theoreticalWalls))}),H(9,"span",13),V(10," Theoretic walls "),N(),H(11,"span",14)(12,"mat-icon",15),V(13," density_large"),N()()(),H(14,"checkbox-state",12),an("stateChange",function(){ai(t);const r=Nt(5);return h(r.appService.setState(r.States.examplePlan))}),H(15,"span",13),V(16," Example Plan "),N(),H(17,"span",14)(18,"mat-icon",15),V(19,"table_bar"),N()()(),H(20,"checkbox-state",12),an("stateChange",function(){ai(t);const r=Nt(5);return h(r.appService.setState(r.States.grid))}),H(21,"span",13),V(22," Grid "),N(),H(23,"span",14)(24,"mat-icon",15),V(25,"grid_on"),N()()(),H(26,"checkbox-state",12),an("stateChange",function(){ai(t);const r=Nt(5);return h(r.appService.setState(r.States.stramien))}),H(27,"span",13),V(28," Stramien "),N(),H(29,"span",14)(30,"mat-icon",15),V(31,"grid_3x3"),N()()(),H(32,"checkbox-state",12),an("stateChange",function(){ai(t);const r=Nt(5);return h(r.appService.setState(r.States.towerFootprint))}),H(33,"span",13),V(34," Tower footprint "),N(),H(35,"span",14)(36,"mat-icon",15),V(37,"hexagon"),N()()(),H(38,"checkbox-state",12),an("stateChange",function(){ai(t);const r=Nt(5);return h(r.appService.setState(r.States.measure))}),H(39,"span",13),V(40," Measurements "),N(),H(41,"span",14)(42,"mat-icon",15),V(43,"square_foot"),N()()()(),Us()}if(2&n){const t=Nt(5);Z(2),Ce("floatLeft",t.floatLeft)("state",t.getState(t.States.doors)),Z(6),Ce("floatLeft",t.floatLeft)("state",t.getState(t.States.theoreticalWalls)),Z(6),Ce("floatLeft",t.floatLeft)("state",t.getState(t.States.examplePlan)),Z(6),Ce("floatLeft",t.floatLeft)("state",t.getState(t.States.grid)),Z(6),Ce("floatLeft",t.floatLeft)("state",t.getState(t.States.stramien)),Z(6),Ce("floatLeft",t.floatLeft)("state",t.getState(t.States.towerFootprint)),Z(6),Ce("floatLeft",t.floatLeft)("state",t.getState(t.States.measure))}}function tMt(n,e){if(1&n){const t=la();H(0,"checkbox-state",12),an("stateChange",function(){const s=ai(t).$implicit;return h(Nt(6).appService.setState(s.state))}),H(1,"span",13),V(2),N(),H(3,"span",18),$e(4,"app-svg",19),N()()}if(2&n){const t=e.$implicit,i=Nt(6);Ce("floatLeft",i.floatLeft)("state",i.getState(t.state)),Z(2),Jn(" ",t.title," "),Z(2),va("sensor-",t.state,""),Ms("url","assets/svg/",t.state,".svg")}}function nMt(n,e){if(1&n&&(Vs(0),H(1,"div",16),Wt(2,tMt,5,7,"checkbox-state",17),N(),Us()),2&n){const t=Nt(5);Z(2),Ce("ngForOf",t.sensors)}}function iMt(n,e){if(1&n&&(H(0,"div",10),Wt(1,eMt,44,14,"ng-container",0),_a(2,"async"),_a(3,"async"),Wt(4,nMt,3,1,"ng-container",0),_a(5,"async"),N()),2&n){const t=Nt(4);Z(1),Ce("ngIf",B1(2,2,t.page$).startsWith("house")||B1(3,4,t.page$).startsWith("?")),Z(3),Ce("ngIf",B1(5,6,t.page$).startsWith("wired"))}}function rMt(n,e){1&n&&bc(0)}function sMt(n,e){1&n&&bc(0)}function oMt(n,e){if(1&n){const t=la();Vs(0),Wt(1,iMt,6,8,"div",7),H(2,"button",8),an("click",function(){ai(t);const r=Nt(3);return h(r.toc=!r.toc)}),H(3,"mat-icon"),V(4,"keyboard_double_arrow_down "),N()(),Wt(5,rMt,1,0,"ng-container",9),Wt(6,sMt,1,0,"ng-container",9),Us()}if(2&n){const t=Nt(3),i=Ar(5),r=Ar(3);Z(1),Ce("ngIf",t.toc),Z(1),Rr("active",t.toc),Z(1),kA("transform","rotate(",t.toc?20:180,"deg)"),h3("transition","0.4s"),Z(2),Ce("ngTemplateOutlet",i),Z(1),Ce("ngTemplateOutlet",r)}}function aMt(n,e){1&n&&(H(0,"mat-icon"),V(1,"home"),N())}function cMt(n,e){1&n&&(H(0,"mat-icon",15),V(1,"home_outline"),N())}function lMt(n,e){1&n&&bc(0)}function uMt(n,e){if(1&n){const t=la();Vs(0),H(1,"button-state",20),an("click",function(){ai(t);const r=Nt(3);return h(r.appService.setState(r.States.measure))}),H(2,"span",13),V(3),N(),H(4,"span",14)(5,"mat-icon"),V(6,"square_foot"),N()()(),H(7,"button-state",20),an("click",function(){ai(t);const r=Nt(3);return h(r.appService.setState(r.States.silhouette))}),H(8,"span",13),V(9),N(),H(10,"span",14),Wt(11,aMt,2,0,"mat-icon",21),Wt(12,cMt,2,0,"ng-template",null,22,K2),N()(),Wt(14,lMt,1,0,"ng-container",9),Us()}if(2&n){const t=Ar(13),i=Nt(3),r=Ar(3);Z(1),Ce("floatLeft",i.floatLeft),Z(2),D0(i.getState(i.States.measure)?"Remove measurements":"Add measurements"),Z(4),Ce("floatLeft",i.floatLeft),Z(2),D0(i.getState(i.States.silhouette)?"Remove Silhouette":"Silhouette"),Z(2),Ce("ngIf",!i.getState(i.States.silhouette))("ngIfElse",t),Z(3),Ce("ngTemplateOutlet",r)}}function hMt(n,e){if(1&n){const t=la();H(0,"button-state",20),an("click",function(){ai(t);const r=Nt(4);return h(r.appService.setState(r.States.walkLine))}),H(1,"span",13),V(2),N(),H(3,"span",14)(4,"mat-icon"),V(5,"directions_walk"),N()()()}if(2&n){const t=Nt(4);Ce("floatLeft",t.floatLeft),Z(2),D0(t.getState(t.States.walkLine)?"Remove walkline":"Add walkline")}}function fMt(n,e){1&n&&bc(0)}const dMt=function(n){return[n]};function pMt(n,e){if(1&n&&(Vs(0),Wt(1,hMt,6,2,"button-state",23),Wt(2,fMt,1,0,"ng-container",9),Us()),2&n){const t=Nt(2).ngIf,i=Nt(),r=Ar(7);Z(1),Ce("ngIf",f3(2,dMt,i.Graphic.stairPlan).includes(t.graphic)),Z(1),Ce("ngTemplateOutlet",r)}}function gMt(n,e){if(1&n){const t=la();Vs(0),H(1,"checkbox-toc",12),an("stateChange",function(){const s=ai(t).$implicit;return h(Nt(5).appService.setState(s))}),H(2,"span",13),V(3),N()(),Us()}if(2&n){const t=e.$implicit,i=Nt(5);Z(1),Ce("floatLeft",i.floatLeft)("state",i.getState(t)),Z(2),Jn(" ",t.replace("construction-","")," ")}}function mMt(n,e){if(1&n&&(H(0,"div",10)(1,"div",16),Wt(2,gMt,4,3,"ng-container",24),N()()),2&n){const t=Nt(4);Z(2),Ce("ngForOf",t.constructionParts)}}function AMt(n,e){1&n&&bc(0)}function vMt(n,e){if(1&n){const t=la();Vs(0),Wt(1,mMt,3,1,"div",7),H(2,"button",8),an("click",function(){ai(t);const r=Nt(3);return h(r.toc=!r.toc)}),H(3,"mat-icon"),V(4,"keyboard_double_arrow_down "),N()(),H(5,"button-state",20),an("click",function(){ai(t);const r=Nt(3);return h(r.appService.setState(r.Helpers3D.mirror))}),H(6,"span",13),V(7),N(),H(8,"span",14)(9,"mat-icon"),V(10,"foundation"),N()()(),Wt(11,AMt,1,0,"ng-container",9),Us()}if(2&n){const t=Nt(3),i=Ar(3);Z(1),Ce("ngIf",t.toc),Z(1),Rr("active",t.toc),Z(1),kA("transform","rotate(",t.toc?20:180,"deg)"),h3("transition","0.4s"),Z(2),Ce("floatLeft",t.floatLeft),Z(2),D0(t.getState(t.Helpers3D.mirror)?"Remove mirror":"mirror"),Z(4),Ce("ngTemplateOutlet",i)}}function _Mt(n,e){if(1&n){const t=la();Vs(0),H(1,"checkbox-toc",12),an("stateChange",function(){const s=ai(t).$implicit;return h(Nt(5).appService.setState(s))}),H(2,"span",13),V(3),N(),H(4,"span",14),V(5),N()(),Us()}if(2&n){const t=e.$implicit,i=Nt(5);Z(1),Ce("floatLeft",i.floatLeft)("state",i.getState(t)),Z(2),Jn(" ",t.replace("house3d-","")," "),Z(2),Jn(" ",t.replace("house3d-","")," ")}}function yMt(n,e){if(1&n&&(H(0,"div",10)(1,"div",16),Wt(2,_Mt,6,4,"ng-container",24),N()()),2&n){const t=Nt(4);Z(2),Ce("ngForOf",t.house3DParts)}}function wMt(n,e){1&n&&bc(0)}function CMt(n,e){1&n&&bc(0)}const bMt=function(n){return{transform:n,"font-family":"Material Icons Outlined"}};function xMt(n,e){if(1&n){const t=la();Vs(0),Wt(1,yMt,3,1,"div",7),Wt(2,wMt,1,0,"ng-container",9),H(3,"button-state",8),an("click",function(){ai(t);const r=Nt(3);return h(r.appService.setState(r.Helpers3D.clipBoxEnabled))}),H(4,"span",13),V(5," Clipped "),N(),H(6,"span",14)(7,"mat-icon"),V(8,"crop"),N()()(),H(9,"button-state",8),an("click",function(){ai(t);const r=Nt(3);return h(r.appService.setState(r.Helpers3D.clipBoxShow))}),H(10,"span",13),V(11," Show clipbox outlines "),N(),H(12,"span",14)(13,"mat-icon"),V(14,"view_in_ar_new"),N()()(),Wt(15,CMt,1,0,"ng-container",9),H(16,"button-state",20),an("click",function(){return ai(t),h(Nt(3).swapCamera())}),H(17,"span",13),V(18),N(),H(19,"span",14)(20,"mat-icon",25),V(21," rectangle"),N()()(),Us()}if(2&n){const t=Nt(3),i=Ar(9),r=Ar(5);Z(1),Ce("ngIf",t.toc),Z(1),Ce("ngTemplateOutlet",i),Z(1),Rr("active",t.getState(t.Helpers3D.clipBoxEnabled)),Z(6),Rr("active",t.getState(t.Helpers3D.clipBoxShow)),Z(6),Ce("ngTemplateOutlet",r),Z(1),Ce("floatLeft",t.floatLeft),Z(2),Jn("Change to ",t.camera?"Ortho":"Perspective",""),Z(2),Ce("ngStyle",f3(10,bMt,t.camera?"":"perspective(10px) rotateX(9deg)  translate(0px, -2px)"))}}function MMt(n,e){1&n&&(H(0,"div",10)(1,"div",16),$e(2,"app-map-layer"),N()())}function SMt(n,e){1&n&&bc(0)}function EMt(n,e){if(1&n){const t=la();Vs(0),Wt(1,MMt,3,0,"div",7),Wt(2,SMt,1,0,"ng-container",9),H(3,"button-state",26),an("click",function(){return ai(t),h(Nt(3).mapService.zoomToHouse())}),H(4,"span",13),V(5," Zoom to house"),N(),H(6,"span",14)(7,"mat-icon"),V(8,"house"),N()()(),H(9,"button-state",27),an("click",function(){return ai(t),h(Nt(3).olMeasureService.activate())}),H(10,"span",13),V(11),N(),H(12,"span",14)(13,"mat-icon",15),V(14,"square_foot"),N()()(),H(15,"button-state",26),an("click",function(){return ai(t),h(Nt(3).olBaseMapService.nextBasemap())}),H(16,"span",13),V(17),_a(18,"async"),N(),H(19,"span",14)(20,"mat-icon",15),V(21,"map"),N()()(),Us()}if(2&n){const t=Nt(3),i=Ar(9);Z(1),Ce("ngIf",t.toc),Z(1),Ce("ngTemplateOutlet",i),Z(7),Ce("disabled",t.olMeasureService.active),Z(2),Jn(" ",t.olMeasureService.active?"Stop":"Start"," measuring"),Z(6),Jn(" ",B1(18,5,t.olBaseMapService.basemap$),"")}}const TMt=function(n,e){return[n,e]};function LMt(n,e){if(1&n&&(H(0,"div",6),Wt(1,oMt,7,10,"ng-container",0),Wt(2,uMt,15,7,"ng-container",0),Wt(3,pMt,3,4,"ng-container",0),Wt(4,vMt,12,11,"ng-container",0),Wt(5,xMt,22,12,"ng-container",0),Wt(6,EMt,22,7,"ng-container",0),N()),2&n){const t=Nt().ngIf,i=Nt();FA("container\n  graphic-",t.graphic,"\nsection-",t.section,""),Z(1),Ce("ngIf",t.graphic===i.Graphic.house2D),Z(1),Ce("ngIf",t.graphic===i.Graphic.cross),Z(1),Ce("ngIf",function cW(n,e,t,i,r){return uW(It(),pt(),n,e,t,i,r)}(10,TMt,i.Graphic.stairCross,i.Graphic.stairPlan).includes(t.graphic)),Z(1),Ce("ngIf",t.graphic===i.Graphic.construction),Z(1),Ce("ngIf",t.graphic===i.Graphic.House3D),Z(1),Ce("ngIf",t.graphic===i.Graphic.map)}}function DMt(n,e){if(1&n&&(Vs(0),Wt(1,LMt,7,13,"div",5),_a(2,"async"),Us()),2&n){const t=Nt();Z(1),Ce("ngIf",B1(2,1,t.states$))}}function IMt(n,e){1&n&&(H(0,"mat-icon"),V(1,"fullscreen"),N())}function BMt(n,e){1&n&&(H(0,"mat-icon"),V(1,"fullscreen_exit"),N())}function RMt(n,e){if(1&n){const t=la();H(0,"button-state",20),an("click",function(){ai(t);const r=Nt();return h(r.fullscreen=!r.fullscreen)}),H(1,"span",13),V(2),N(),H(3,"span",14),Wt(4,IMt,2,0,"mat-icon",0),Wt(5,BMt,2,0,"mat-icon",0),N()()}if(2&n){const t=Nt();Ce("floatLeft",t.floatLeft),Z(2),Jn("",t.fullscreen?"Close":"Open"," fullscreen"),Z(2),Ce("ngIf",!t.fullscreen),Z(1),Ce("ngIf",t.fullscreen)}}function FMt(n,e){1&n&&(H(0,"span"),V(1,"Switch to ground floor"),N())}function kMt(n,e){1&n&&(H(0,"span"),V(1,"Switch to top floor"),N())}function PMt(n,e){1&n&&(H(0,"mat-icon"),V(1,"exposure_plus_1"),N())}function HMt(n,e){1&n&&(H(0,"mat-icon"),V(1,"exposure_zero"),N())}function zMt(n,e){if(1&n){const t=la();H(0,"button-state",20),an("click",function(){return ai(t),h(Nt(2).setFloor())}),H(1,"span",13),Wt(2,FMt,2,0,"span",0),Wt(3,kMt,2,0,"span",0),N(),H(4,"span",14),Wt(5,PMt,2,0,"mat-icon",0),Wt(6,HMt,2,0,"mat-icon",0),N()()}if(2&n){const t=e.ngIf,i=Nt(2);Ce("floatLeft",i.floatLeft),Z(2),Ce("ngIf",t===i.Floor.top),Z(1),Ce("ngIf",t===i.Floor.ground),Z(2),Ce("ngIf",t===i.Floor.top),Z(1),Ce("ngIf",t===i.Floor.ground)}}function OMt(n,e){1&n&&(Wt(0,zMt,7,5,"button-state",23),_a(1,"async")),2&n&&Ce("ngIf",B1(1,1,Nt().floor$))}function NMt(n,e){if(1&n){const t=la();H(0,"button-state",20),an("click",function(){ai(t);const r=Nt();return h(r.appService.setState(r.States.measure))}),H(1,"span",13),V(2),N(),H(3,"span",14)(4,"mat-icon"),V(5,"square_foot"),N()()()}if(2&n){const t=Nt();Ce("floatLeft",t.floatLeft),Z(2),D0(t.getState(t.States.measure)?"Remove measurements":"Add measurements")}}function VMt(n,e){if(1&n){const t=la();H(0,"button-state",20),an("click",function(){ai(t);const r=Nt();return h(r.toc=!r.toc)}),H(1,"span",13),V(2),N(),H(3,"span",14)(4,"mat-icon"),V(5,"keyboard_double_arrow_down "),N()()()}if(2&n){const t=Nt();Ce("floatLeft",t.floatLeft),Z(2),Jn("",t.toc?"Close ":"Open "," layers"),Z(2),kA("transform","rotate(",t.toc?0:180,"deg)"),h3("transition","0.4s")}}let whe=(()=>{class n{constructor(t,i,r,s,o,a,c,l){this.appService=t,this.elementRef=i,this.houseService=r,this.cookieService=s,this.olMeasureService=o,this.olBaseMapService=a,this.threeService=c,this.mapService=l,this.floatLeft=!1,this.house$=this.houseService.house$,this.Floor=tt,this.floor$=this.appService.floor$,this.scroll$=this.appService.scroll$,this.states$=this.appService.states$,this.setFloor=()=>this.appService.setFloor(),this.Graphic=yo,this.States=D2,this.page$=this.appService.page$,this.sensors=Object.values(Ge).map(u=>({state:u,title:u})),this.constructionParts=Object.values(Bi),this.ConstructionParts=Bi,this.house3DParts=Object.values(Y2),this.House3DParts=Y2,this.Helpers3D=Bd,this.helpers3D=Object.values(Bd),this.faTemperatureHigh=b1e,this.faMound=Gle}get toc(){return"true"===this.cookieService.get("toc")}set toc(t){this.cookieService.set("toc",`${t}`)}get fullscreen(){return this.appService.fullscreen$.value}set fullscreen(t){this.cookieService.set("fullscreen",`${t}`),this.appService.fullscreen$.next(t)}get camera(){return this.threeService.cameraPerspective}ngOnInit(){}getState(t){return!0===this.states$.value[t]}swapCamera(){this.threeService.swapCamera()}}return n.\u0275fac=function(t){return new(t||n)(U(Mo),U(dn),U(Lo),U(R4),U(X0e),U(dhe),U(C_),U(Gxt))},n.\u0275cmp=Bn({type:n,selectors:[["controls"]],inputs:{floatLeft:"floatLeft"},decls:10,vars:3,consts:[[4,"ngIf"],["buttonFullscreen",""],["floor",""],["measure",""],["layers",""],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",3,"class",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",4,"ngIf"],["mat-mini-fab","","color","accent",3,"click"],[4,"ngTemplateOutlet"],["fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",1,"sub-controls"],[1,"toc"],[3,"floatLeft","state","stateChange"],["label",""],["icon",""],[2,"font-family","Material Icons Outlined"],[1,"toc-text"],[3,"floatLeft","state","stateChange",4,"ngFor","ngForOf"],["icon","","fxLayoutAlign","center center"],["height","18px","width","18px",3,"url"],[3,"floatLeft","click"],[4,"ngIf","ngIfElse"],["elseGrey",""],[3,"floatLeft","click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngStyle"],[3,"click"],[3,"disabled","click"]],template:function(t,i){1&t&&(Wt(0,DMt,3,3,"ng-container",0),_a(1,"async"),Wt(2,RMt,6,4,"ng-template",null,1,K2),Wt(4,OMt,2,3,"ng-template",null,2,K2),Wt(6,NMt,6,2,"ng-template",null,3,K2),Wt(8,VMt,6,7,"ng-template",null,4,K2)),2&t&&Ce("ngIf",B1(1,1,i.scroll$))},dependencies:[p3,g3,xI,zh,k7,mb,x9,M9,Wh,U7,vhe,$xt,Xxt,yhe,Jxt,Cd],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:0;z-index:9999}.controls-left[_nghost-%COMP%]{left:50px}.controls-left[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{left:-24px;bottom:8px;position:relative}.controls-left[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:left;left:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);cursor:pointer}.controls-right[_nghost-%COMP%]{right:50px}.controls-right[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}.controls-right[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);opacity:1}[_nghost-%COMP%]     .sensor-button{right:0}[_nghost-%COMP%]     .sensor-button svg{position:absolute;top:0;right:0}[_nghost-%COMP%]     .sensor-label{right:15px!important;top:6px;line-height:0}.active[_ngcontent-%COMP%]     button{box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important;background-color:var(--accent-50)!important;color:#1b1b1b!important}.active[_ngcontent-%COMP%]     button label{opacity:.4}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}.construction[_ngcontent-%COMP%]{height:16px;width:16px}.construction[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{right:18px!important;top:6px;line-height:0}.dev[_ngcontent-%COMP%]{color:#613d1a}.toc[_ngcontent-%COMP%]{background-color:var(--color-0);padding:8px;position:absolute;width:60px;border:2px solid var(--color-50);opacity:.6;transition:opacity .2s ease-in-out}.toc[_ngcontent-%COMP%]:hover{opacity:.9}.toc[_ngcontent-%COMP%]     checkbox-state:first-of-type>label:before{display:none}.toc-text[_ngcontent-%COMP%]{background-color:var(--color-0);padding:8px;position:absolute;border:2px solid var(--color-50);opacity:.6;transition:opacity .2s ease-in-out}.toc-text[_ngcontent-%COMP%]:hover{opacity:.9}.toc-text[_ngcontent-%COMP%]     checkbox-state:first-of-type>label:before{display:none}.toc-text[_ngcontent-%COMP%]     label.container{padding:0!important}.toc-text[_ngcontent-%COMP%]     mat-slide-toggle{transform:scale(.75)}"],data:{animation:[wM]}}),n})();function UMt(n,e){1&n&&$e(0,"controls",10),2&n&&Ce("@slideInOut",void 0)("floatLeft",!0)}function GMt(n,e){1&n&&$e(0,"controls",11),2&n&&Ce("@slideInOut",void 0)("floatLeft",!1)}function QMt(n,e){1&n&&$e(0,"app-svg-cross",16)}function WMt(n,e){if(1&n&&(H(0,"div",14),Wt(1,QMt,1,0,"app-svg-cross",15),N()),2&n){const t=Nt().ngIf,i=Nt();Z(1),Ce("ngIf",t===i.Graphic.cross)}}function jMt(n,e){1&n&&(Vs(0),$e(1,"app-svg-stair-plan",18)(2,"app-svg-plan",19),Us()),2&n&&(Z(1),Ce("isChild",!0))}function $Mt(n,e){1&n&&(Vs(0),$e(1,"app-three-construction"),Us())}function qMt(n,e){1&n&&(Vs(0),$e(1,"app-three-house"),Us())}function KMt(n,e){1&n&&(Vs(0),$e(1,"app-svg-stair-plan",20),Us())}function XMt(n,e){1&n&&(Vs(0),$e(1,"app-svg-stair-steps",21),Us())}function YMt(n,e){if(1&n&&(H(0,"div",17),Wt(1,jMt,3,1,"ng-container",8),Wt(2,$Mt,2,0,"ng-container",8),Wt(3,qMt,2,0,"ng-container",8),Wt(4,KMt,2,0,"ng-container",8),Wt(5,XMt,2,0,"ng-container",8),N()),2&n){const t=Nt().ngIf,i=Nt();Z(1),Ce("ngIf",t===i.Graphic.house2D),Z(1),Ce("ngIf",t===i.Graphic.construction),Z(1),Ce("ngIf",t===i.Graphic.House3D),Z(1),Ce("ngIf",t===i.Graphic.stairPlan),Z(1),Ce("ngIf",t===i.Graphic.stairCross)}}function ZMt(n,e){if(1&n&&(Vs(0),Wt(1,WMt,2,1,"div",12),Wt(2,YMt,6,5,"div",13),Us()),2&n){const t=e.ngIf,i=Nt();Z(1),Ce("ngIf",t!==i.Graphic.none),Z(1),Ce("ngIf",t!==i.Graphic.none)}}function JMt(n,e){1&n&&$e(0,"app-footer")}const eSt=function(n){return{top:n}};let tSt=(()=>{class n{constructor(t,i,r,s,o,a){this.appService=t,this.tooltipService=i,this.houseService=r,this.router=s,this.activatedRoute=o,this.stateService=a,this.sections=Object.keys(_t),this.Tag=K3,this.GraphicSide=Id,this.Graphic=yo,this.showFooter=!0,this.sectionScroll={},this.goalLine=.4,this.popupActive$=this.appService.popupActive$,this.fullscreen$=this.appService.fullscreen$,this.scroll$=this.appService.scroll$,this.floor$=this.appService.floor$,this.tag$=this.appService.tag$,this.states$=this.appService.states$,this.page$=this.appService.page$,this.cssStates$=this.states$.pipe(qt(c=>Object.entries(c).filter(([l,u])=>!0===u).map(([l,u])=>`state-${l}`).join(" "))),this.loaded=!1,Tc(window,"scroll").subscribe(c=>{this.calcSection()})}ngAfterViewInit(){this.router.events.pipe(_o(t=>t instanceof Bu)).subscribe(t=>{setTimeout(()=>{this.setup()},0)}),this.setup()}setup(){this.sectionEls=document.querySelectorAll("section"),this.sectionScroll={},this.sectionEls.forEach(r=>{const s=r.id;this.sectionScroll[s]={id:s,top:r.offsetTop}}),this.calcSection();const i=this.activatedRoute.snapshot.params.tag;i&&this.tag$.next(i),this.loaded=!0}checkFooter(){let t=!0;[yo.House3D].includes(this.graphic)&&(t=!1),this.showFooter=t}calcSection(){if(this.section=this.getSection(),void 0===this.section)this.graphic=yo.none,this.graphicSide=Id.none;else{const i=this.stateService.setGraphic(this.section);this.graphic!==i&&(console.log("Swap side!"),this.tooltipService.detachOverlay()),this.graphic=i,this.graphicSide=this.stateService.getSide(this.graphic),document.querySelector(`section#${this.section}`).classList.add("section-active")}this.checkFooter(),this.appService.scroll$.next({scroll:An(window.pageYOffset,0),percentage:this.getVerticalScrollPercentage(document.body),section:this.section,graphicSide:this.graphicSide,graphic:this.graphic}),this.stateService.updateStateBasedOnSection(this.section,this.loaded),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:this.section},replaceUrl:!0,queryParamsHandling:"merge"})}getVerticalScrollPercentage(t){var i=t.parentNode;return An((t.scrollTop||i.scrollTop)/(i.scrollHeight-i.clientHeight))}getSection(){var t=An(window.innerHeight*this.goalLine,0),r=An(window.pageYOffset,0)+t;this.sectionEls.forEach(o=>{const a=o.id;this.sectionScroll[a].past=this.sectionScroll[a].top<r,o.classList.remove("section-active")});const s=Object.values(this.sectionScroll).filter(o=>o.past).sort((o,a)=>a.top-o.top);return s&&s[0]?s[0].id:void 0}}return n.\u0275fac=function(t){return new(t||n)(U(Mo),U(Bg),U(Lo),U(R1),U(Dd),U(SGe))},n.\u0275cmp=Bn({type:n,selectors:[["app-main-page"]],decls:23,vars:35,consts:[[1,"page"],[1,"left-blinder","bg"],[1,"left-flex"],[1,"center"],[1,"right-flex"],[1,"right-blinder","bg"],["class","controls controls-left",3,"floatLeft",4,"ngIf"],["class","controls controls-right",3,"floatLeft",4,"ngIf"],[4,"ngIf"],[1,"goal-marker",3,"ngStyle"],[1,"controls","controls-left",3,"floatLeft"],[1,"controls","controls-right",3,"floatLeft"],["class","floating floating-left",4,"ngIf"],["class","floating floating-right",4,"ngIf"],[1,"floating","floating-left"],["class","svg-cross",4,"ngIf"],[1,"svg-cross"],[1,"floating","floating-right"],["fxFlex","0 0 0",1,"svg-plan-stair-plan",3,"isChild"],[1,"svg-plan"],[1,"svg-stair-plan"],[1,"svg-stair-steps"]],template:function(t,i){1&t&&(H(0,"div",0)(1,"div"),_a(2,"async"),_a(3,"async"),_a(4,"async"),_a(5,"async"),_a(6,"async"),_a(7,"async"),_a(8,"async"),_a(9,"async"),$e(10,"div",1),H(11,"main"),$e(12,"div",2),H(13,"div",3),$e(14,"router-outlet"),N(),$e(15,"div",4),N(),$e(16,"div",5),Wt(17,UMt,1,2,"controls",6),Wt(18,GMt,1,2,"controls",7),Wt(19,ZMt,3,2,"ng-container",8),_a(20,"async"),N()(),$e(21,"div",9),Wt(22,JMt,1,0,"app-footer",8)),2&t&&(Z(1),mQ("container \n  tag-",B1(2,15,i.tag$)," \n  floor-",B1(3,17,i.floor$)," \n  section-",B1(4,19,i.scroll$).section," \n  show-",B1(5,21,i.scroll$).graphicSide," \n  graphic-",B1(6,23,i.scroll$).graphic," \n  ",B1(7,25,i.popupActive$)?"popup-active":""," \n  ",B1(8,27,i.fullscreen$)?"fullscreen":"","\n  ",B1(9,29,i.cssStates$)," \n  "),Z(16),Ce("ngIf",i.graphicSide===i.GraphicSide.left),Z(1),Ce("ngIf",i.graphicSide===i.GraphicSide.right),Z(1),Ce("ngIf",B1(20,31,i.scroll$).graphic),Z(2),Ce("ngStyle",f3(33,eSt,100*i.goalLine+"vh")),Z(1),Ce("ngIf",i.showFooter))},dependencies:[g3,zh,RB,U7,UC,Ore,_nt,ynt,Nnt,Wnt,qnt,Jnt,whe,Cd],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.page[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:row;flex:1 1 100vw}.container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{max-width:800px;justify-content:center;display:flex;flex-direction:row;flex:10 1 800px}.container[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{transition:.6s}.container.show-left[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container.show-left[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container.show-right[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 0vw}.container.show-right[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 100vw;border-left:0vw solid transparent;border-right:0vw solid transparent;max-width:450px;z-index:2;margin:0 46px}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{display:block;height:100%;width:0vw;position:absolute;z-index:5;transition:.8s ease-in;opacity:.8}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%]{left:0}.container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{right:0}.container.fullscreen.show-left[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container.fullscreen.show-right[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{transition:.6s ease-out;width:100vw;opacity:1}.container.fullscreen[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{max-width:100vw!important}.container.fullscreen[_ngcontent-%COMP%]     g.all{transition:none!important}.floating[_ngcontent-%COMP%]{top:0;height:100vh;position:fixed;max-width:100vh;display:flex;flex-direction:column;justify-content:center;z-index:50;transition:1s}.floating.floating-right[_ngcontent-%COMP%]{left:50%;width:50%}.floating.floating-left[_ngcontent-%COMP%]{right:50%;width:50%}.floating[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 100%;position:relative}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{transition:.6s;max-width:70vh;width:100vw;height:100vh;left:0vw}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]     svg{transition:.6s;left:0vw;top:0vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]{transition:.6s;max-width:100vw;left:-50vw;top:-10vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]     svg{transition:.6s;left:25vw}.show-right[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:50vw;right:100vw}.show-left[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:50vw;left:100vw}.fullscreen.show-left[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:100vw;right:0vw;max-width:100vw}.fullscreen.show-right[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:100vw;left:0vw;max-width:100vw}.goal-marker[_ngcontent-%COMP%]{position:fixed;border:1px solid var(--color-30);height:13px;width:13px;transform:rotate(45deg);left:-10px}"],data:{animation:[wM,Wk]}}),n})();const nSt=["*"];let YE=(()=>{class n{constructor(t,i){this.appService=t,this.elementRef=i}mouseover(){this.appService.setTag(this.tag)}mouseout(){this.appService.setTag(void 0)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(U(Mo),U(dn))},n.\u0275cmp=Bn({type:n,selectors:[["tag"]],hostBindings:function(t,i){1&t&&an("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})},inputs:{tag:"tag"},ngContentSelectors:nSt,decls:2,vars:0,consts:[["mat-flat-button","",1,"mat-button-tag"]],template:function(t,i){1&t&&(ec(),H(0,"button",0),Po(1),N())},dependencies:[mb],styles:[".mat-button-tag[_ngcontent-%COMP%]{padding:3px 0 5px;border:1px solid var(--color-30);line-height:1em}.mat-button-tag[_ngcontent-%COMP%]     .mat-button-wrapper{padding:8px;font-weight:initial}"]}),n})(),Che=(()=>{class n{constructor(t,i,r,s){this.builder=t,this.overlay=i,this.appService=r,this.viewContainerRef=s,this.open=!1,this.animate=!0,this.byClick=!1,this.unsubscribe=new Je}mouseover(){this.attachOverlay()}mouseout(){this.appService.popupActive$.next(!1),this.detachOverlay()}onResize(t){this.updateOnChange()}getPositionStrategy(){let t;return t=this.overlay.position().flexibleConnectedTo(this.viewContainerRef.element.nativeElement).withPositions([new EC({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,-20),new EC({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,20,"flipped")]).withPush(!0),t}getScrollStrategy(){return this.overlay.scrollStrategies.reposition()}ngOnInit(){this.pageEl=document.querySelector(".center"),this.btn=this.viewContainerRef.element.nativeElement;const t=this.getPositionStrategy(),i=this.getScrollStrategy();this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:i,hasBackdrop:this.byClick}),this.overlayRef.backdropClick().pipe(Ta(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.open&&this.attachOverlay()}ngOnDestroy(){this.detachOverlay(),this.unsubscribe.next(),this.unsubscribe.complete(),this.overlayRef.dispose()}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.arrowEl.remove(),this.overlayRef.detach())}attachOverlay(){const t=new SC(this.overlayTemplate,this.viewContainerRef);this.overlayRef&&!this.overlayRef.hasAttached()&&(this.componentRef=this.overlayRef.attach(t),this.updateOnChange(),this.createMakeMeAPopup(),this.appService.popupActive$.next(!0))}createMakeMeAPopup(){this.overlayRef.overlayElement.classList.add("popup","base"),this.arrowEl=document.createElement("div"),this.arrowEl.classList.add("popup-arrow","base"),this.setArrow(),this.overlayRef.overlayElement.append(this.arrowEl)}setArrow(){const{left:t,width:i}=this.btn.getBoundingClientRect(),{x:r}=this.pageEl.getBoundingClientRect();this.arrowEl.style.left=t-r-20+i/2+"px"}updateOnChange(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.updatePosition(),this.overlayRef.updateSize({width:this.pageEl.clientWidth}),this.arrowEl&&this.setArrow())}playAnimation(t,i){const s=this.builder.build(t).create(i);return s.play(),s}enterAnimation(t){return t.style.maxWidth="100%",[Oi({"max-width":"0%"}),So("150ms ease-out",Oi({"max-width":"100%"}))]}leaveAnimation(){return[So("200ms ease-in",Oi({"max-width":"0%"}))]}}return n.\u0275fac=function(t){return new(t||n)(U(XB),U(A3),U(Mo),U(Uc))},n.\u0275dir=ht({type:n,selectors:[["","overlayTemplate",""]],hostBindings:function(t,i){1&t&&an("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})("resize",function(s){return i.onResize(s)},!1,NL)},inputs:{overlayTemplate:"overlayTemplate",open:"open"}}),n})();function iSt(n,e){1&n&&V(0),2&n&&Jn(" Insulation keeps you warm. Passiv houses have almost no heatloss so therefore (almost) no heating is needed! The walls are thicker than you are used to: ",.5," meter ")}function rSt(n,e){1&n&&V(0," In the winter, we need the sun to warmup the house. In the summer the house needs to be shaded on the outside to prevent overheating. ")}function sSt(n,e){1&n&&(V(0," It is even a hashtag "),H(1,"b"),V(2,"#EfficiencyFirst"),N(),V(3,". Why look at green energy if we wast still alot of energy. ( Ofcourse we still need green energy! ). First insulation to the max, before thinking of solarpanels. "))}function oSt(n,e){1&n&&V(0," Keeping the design simple, so we skip complex solutions. Therefore the costs will be lower. ")}function aSt(n,e){1&n&&V(0," It is not really a thing, more a concept. It helps the already complex roof to look good. And also, very helpful with calculations. ")}function cSt(n,e){1&n&&V(0," The south wing is a design element that effectively breaks up the lengthy facade of the house's south side. If desired, the design can be simplified by removing this feature. ")}function lSt(n,e){1&n&&V(0," To maintain the compact design of the house, avoid making the north wing too long. If you need more space, consider increasing the base dimension. ")}function uSt(n,e){1&n&&V(0," A concept, how far is the bend-point of the roof, away from the outside wall. ")}function hSt(n,e){if(1&n){const t=la();Vs(0),H(1,"section",1)(2,"h1"),V(3),N(),H(4,"p",11),V(5," A Passive House, but in a classical style, and all open-source. We love to share our plans with the community. Consider it as free building plans for your own house, or give them to your contractor. It's truly free. "),N()(),H(6,"section",1)(7,"h2"),V(8,"Passiv? "),H(9,"span",12),V(10,"(Its German)"),N()(),H(11,"p"),V(12,"Passive houses are the future. Feel free to "),H(13,"a",13),V(14,"search online for 'Passiv Haus'"),N(),V(15,". We thought it is not really inspiring and that is a shame. Therefore, let us try to explain it briefly:"),N(),H(16,"ul")(17,"li")(18,"tag",14),V(19,"Great insulated"),N(),Wt(20,iSt,1,1,"ng-template",null,15,K2),N(),H(22,"li"),V(23,"Well & compact desinged"),N(),H(24,"li")(25,"tag",14),V(26,"Orientation"),N(),V(27," to the sun "),Wt(28,rSt,1,0,"ng-template",null,16,K2),N(),H(30,"li"),V(31,"No thermal bridges"),N(),H(32,"li"),V(33,"Can be houses, but also offices etc"),N(),H(34,"li"),V(35,"Sustainable (well in our opinion)"),N()(),H(36,"p"),V(37,"Passiv Haus has one punchline:"),N(),H(38,"div",17)(39,"tag",14),V(40,"Efficiency first"),N(),Wt(41,sSt,4,0,"ng-template",null,18,K2),N(),H(43,"p"),V(44,"We dare to add one :"),N(),H(45,"div",17)(46,"tag",14),V(47," Simplicity is key"),N(),Wt(48,oSt,1,0,"ng-template",null,19,K2),N(),H(50,"p"),V(51," While Passive Houses tend to prioritize function over form, we believe that style should also be a consideration. For this reason, we are working on combining classic design elements with this innovative concept. "),N()(),H(52,"section",1)(53,"h2"),V(54,"The basics"),N(),H(55,"p"),V(56," Using parametric design, we've created an interactive platform for designing this house. Play around with the sliders to see how you can customize the design to your liking. Let's start with the basics. "),N(),H(57,"h3"),V(58,"Two axis"),N(),H(59,"p"),V(60," The squared shape is the most efficient design for a Passive House, but a mansard roof can provide a classic aesthetic. Unfortunately, it's not easy to incorporate a mansard roof into a squared house. To achieve a mansard roof, this design follows two axes with a specific "),H(61,"tag",14),V(62,"base dimension"),N(),V(63,". One of the advantages of this design is the stunning "),H(64,"tag",20),V(65,"view lines"),N(),V(66," it provides. "),N(),Wt(67,aSt,1,0,"ng-template",null,21,K2),H(69,"label")(70,"span"),V(71,"Base dimension "),N(),H(72,"mat-slider",22),an("input",function(r){ai(t);const s=Nt();return h(s.update("house","studAmount",r.value,s.tags.baseDimension))}),N()(),H(73,"label",23)(74,"span"),V(75,"Technical "),N(),V(76),$e(77,"br")(78,"br"),H(79,"table")(80,"tr")(81,"td"),V(82,"Total area"),N(),H(83,"td"),V(84),H(85,"sup"),V(86,"2"),N()()(),H(87,"tr")(88,"td"),V(89,"Total volume"),N(),H(90,"td"),V(91),H(92,"sup"),V(93,"3"),N()()()()()(),H(94,"section",1)(95,"h2"),V(96,"Extensions"),N(),H(97,"p"),V(98," The south-facing side of the house is designed with a "),H(99,"tag",14),V(100,"south wing"),N(),V(101," that breaks up the otherwise monotonous lines and creates more interesting view points. The "),H(102,"tag",14),V(103,"north wing"),N(),V(104,", located for convenience, has fewer windows due to its colder and darker nature. "),N(),H(105,"h3"),V(106,"Body parts "),N(),Wt(107,cSt,1,0,"ng-template",null,24,K2),Wt(109,lSt,1,0,"ng-template",null,25,K2),H(111,"label")(112,"span"),V(113,"South wing "),N(),H(114,"mat-slider",26),an("input",function(r){ai(t);const s=Nt();return h(s.update("house","studAmountSouth",r.value,s.tags.extensionToSouth))}),N()(),H(115,"label")(116,"span"),V(117," North wing "),N(),H(118,"mat-slider",27),an("input",function(r){ai(t);const s=Nt();return h(s.update("house","studAmountNorth",r.value,s.tags.extensionToNorth))}),N()(),H(119,"label")(120,"span"),V(121," West wing "),N(),H(122,"mat-slider",27),an("input",function(r){ai(t);const s=Nt();return h(s.update("house","studAmountWest",r.value,s.tags.extensionToWest))}),N()(),H(123,"label")(124,"span"),V(125," East wing "),N(),H(126,"mat-slider",27),an("input",function(r){ai(t);const s=Nt();return h(s.update("house","studAmountEast",r.value,s.tags.extensionToEast))}),N()(),H(127,"label",23)(128,"span"),V(129,"Technical "),N(),H(130,"table")(131,"tr")(132,"td"),V(133,"Floor"),N(),H(134,"td"),V(135,"area"),N(),H(136,"td"),V(137,"ground"),N(),H(138,"td"),V(139),N()(),H(140,"tr"),$e(141,"td")(142,"td"),H(143,"td"),V(144,"top"),N(),H(145,"td"),V(146),N()(),H(147,"tr"),$e(148,"td")(149,"td"),H(150,"td"),V(151,"total"),N(),H(152,"td"),V(153),N()()()()(),H(154,"section",28)(155,"h3"),V(156,"Tower"),N(),H(157,"p"),V(158,"Not only does the tower provide a functional backdoor, but it also adds an intriguing feature to the house's exterior. Additionally, the shower location within the tower is impressive and the tower itself could potentially offer a rooftop viewpoint. "),N(),H(159,"mat-slide-toggle",29),an("ngModelChange",function(r){return ai(t),h(Nt().update("house","showTower",r))}),V(160,"With a practical tower "),N()(),H(161,"section",1)(162,"h1"),V(163,"Cross section"),N(),H(164,"h2"),V(165,"Slicing it, the basics"),N(),H(166,"p"),V(167,"Although high ceilings can be more expensive, they add a lot of value by making a house feel more open and airy. "),N(),H(168,"label")(169,"span"),V(170),N(),H(171,"mat-slider",30),an("input",function(r){return ai(t),h(Nt().update("cross","ceilingHeight",r.value))}),N()(),H(172,"h3"),V(173),N(),H(174,"p"),V(175,"It's important to consider a crawl space during the design phase, as it can have a significant impact on the overall building experience. A crawl space can raise the building, offering more protection against climate change, such as flooding or heavy rains. However, it is important to note that a crawl space can also be more expensive and take more time to build."),N(),H(176,"mat-slide-toggle",29),an("ngModelChange",function(r){return ai(t),h(Nt().update("cross","crawlerSpace",r))}),V(177),N(),H(178,"label")(179,"span"),V(180),N(),H(181,"mat-slider",31),an("input",function(r){return ai(t),h(Nt().update("cross","floorAboveGround",r.value))}),N()()(),H(182,"section",1)(183,"h2"),V(184,"Roof style"),N(),H(185,"p")(186,"a",32),V(187,"Mansard or Gambrel roof"),N(),V(188," gives a nice classic countryside style. There are three methods to create it. We will check both the \"circle\" and '70\xb0/30\xb0'"),N(),H(189,"h2"),V(190,"Circle-based"),N(),H(191,"p"),V(192,"Draw a "),H(193,"tag",20),V(194,"half circle"),N(),V(195," and two lines extending from the center at a 45\xb0 angle. Be aware that adjusting the overhang using the slider will cause the circle to move to maintain proportions. The angles used in this technique are 67.5\xb0 and 22.5\xb0. "),N(),H(196,"label")(197,"span"),V(198,"(Fictive) 'Wider roof'"),N(),H(199,"mat-slider",33),an("input",function(r){ai(t);const s=Nt();return h(s.update("cross","roofCirclePullDown",r.value,s.tags.halfCircle))}),N()(),H(200,"label")(201,"span"),V(202),N(),H(203,"mat-slider",33),an("input",function(r){return ai(t),h(Nt().update("cross","roofCircleWalls",r.value))}),N()()(),H(204,"section",1)(205,"h2"),V(206,"The 70\xb0/30\xb0 roof"),N(),H(207,"p"),V(208,"With this technique, draw a line 70\xb0 until a "),H(209,"tag",14),V(210,"bend point"),N(),V(211,". then follow up with a 30\xb0 angle. The upper roof has great solor potential. It is possible to extending the roof downwards. Nevertheless, it's crucial to keep proportion in mind to prevent an unappealing appearance. "),N(),Wt(212,uSt,1,0,"ng-template",null,34,K2),H(214,"label")(215,"span"),V(216,"Move "),H(217,"tag",14),V(218,"bend point"),N()(),H(219,"mat-slider",33),an("input",function(r){ai(t);const s=Nt();return h(s.update("cross","roof70offset",r.value,s.tags.bendPoint))}),N()(),H(220,"label")(221,"span"),V(222),N(),H(223,"mat-slider",33),an("input",function(r){ai(t);const s=Nt();return h(s.update("cross","roof70Walls",r.value,s.tags.roofWalls))}),N()(),H(224,"label")(225,"span"),V(226),N(),H(227,"mat-slider",33),an("input",function(r){return ai(t),h(Nt().update("cross","roof70Extension",r.value))}),N()()(),H(228,"section",1)(229,"h3"),V(230,"Roof, 70\xb0 or Circle"),N(),H(231,"p"),V(232,"In the end, the 70\xb0 based mansard roof is easier to design with. Click on the buttons to compare them. "),N(),H(233,"mat-button-toggle-group",35),an("ngModelChange",function(r){return h(ai(t).ngIf.cross.roofStyle=r)})("ngModelChange",function(r){return ai(t),h(Nt().choosenRoofstyle(r))}),H(234,"mat-button-toggle",36),V(235,"Circle based"),N(),H(236,"mat-button-toggle",36),V(237,"Both"),N(),H(238,"mat-button-toggle",36),V(239,"70\xb0 based"),N()()(),H(240,"section",1)(241,"h3"),V(242,"The roof edge"),N(),H(243,"p"),V(244,"We can look at the silhouette to image it a bit better. We can also add or remove a gutter, and more decorative "),N()(),Us()}if(2&n){const t=e.ngIf,i=Ar(21),r=Ar(29),s=Ar(42),o=Ar(49),a=Ar(68),c=Ar(108),l=Ar(110),u=Ar(213),f=Nt();Z(1),Ce("id",f.Section.welcome),Z(2),Jn("Welcome to ",t.name,""),Z(3),Ce("id",f.Section.passiv),Z(12),Ce("tag",f.tags.insulated)("overlayTemplate",i),Z(7),Ce("tag",f.tags.orientation)("overlayTemplate",r),Z(14),Ce("tag",f.tags.efficiency)("overlayTemplate",s),Z(7),Ce("tag",f.tags.simple)("overlayTemplate",o),Z(6),Ce("id",f.Section.basics),Z(9),Ce("tag",f.tags.baseDimension)("overlayTemplate",a),Z(3),Ce("tag",f.tags.viewlines),Z(8),Ce("ngModel",t.studAmount),Z(4),yd(' When describing our house\'s construction, we use the term "studs" to refer to the wooden columns that make up the walls. These studs are arranged in a grid pattern with a spacing of ',100*t.studDistance," cm. At present, the wall consists of ",t.studAmount," studs. "),Z(8),Jn("",null==t.stats.floor.all?null:t.stats.floor.all.area," m"),Z(7),Jn("",null==t.stats.floor.all?null:t.stats.floor.all.volume," m"),Z(3),Ce("id",f.Section.extensions),Z(5),Ce("tag",f.tags.extensionToSouth)("overlayTemplate",c),Z(3),Ce("tag",f.tags.extensionToNorth)("overlayTemplate",l),Z(12),Ce("ngModel",t.studAmountSouth)("displayWith",f.studLabel),Z(4),Ce("min",9)("max",18)("ngModel",t.studAmountNorth)("displayWith",f.studLabel),Z(4),Ce("min",5)("max",15)("ngModel",t.studAmountWest)("displayWith",f.studLabel),Z(4),Ce("min",5)("max",9)("ngModel",t.studAmountEast)("displayWith",f.studLabel),Z(13),Jn("",t.stats.floor.ground.area," m2"),Z(7),Jn("",t.stats.floor.top.area," m2"),Z(7),Jn("",null==t.stats.floor.all?null:t.stats.floor.all.area," m2"),Z(1),Ce("id",f.Section.tower),Z(5),Ce("ngModel",t.showTower),Z(2),Ce("id",f.Section.roofBasics),Z(9),Jn("Ceiling height: ",t.cross.ceilingHeight," m"),Z(1),Ce("ngModel",t.cross.ceilingHeight),Z(2),Jn("Foundation: ",t.cross.crawlerSpace?"crawler space":"flat foundation",""),Z(3),Ce("ngModel",t.cross.crawlerSpace),Z(1),Jn("With a ",t.cross.crawlerSpace?"crawler space":"flat foundation"," "),Z(3),Jn("Ground floor above ground: ",t.cross.crawlerSpace?t.cross.floorAboveGround:0," m"),Z(1),Ce("max",t.cross.crawlerHeight+t.cross.groundFloorThickness)("ngModel",t.cross.floorAboveGround)("disabled",!t.cross.crawlerSpace),Z(1),Ce("id",f.Section.roofCircle),Z(11),Ce("tag",f.tags.halfCircle),Z(6),Ce("ngModel",t.cross.roofCirclePullDown),Z(3),Jn("Walls under the roof ",t.cross.roofCircleWalls,"m"),Z(1),Ce("ngModel",t.cross.roofCircleWalls),Z(1),Ce("id",f.Section.roof70),Z(5),Ce("tag",f.tags.bendPoint)("overlayTemplate",u),Z(8),Ce("tag",f.tags.bendPoint)("overlayTemplate",u),Z(2),Ce("ngModel",t.cross.roof70offset),Z(3),Jn("Walls under the roof: ",t.cross.roof70Walls,"m"),Z(1),Ce("ngModel",t.cross.roof70Walls),Z(3),Jn("Roof extension: ",t.cross.roof70Extension,"m"),Z(1),Ce("ngModel",t.cross.roof70Extension),Z(1),Ce("id",f.Section.roofChoice),Z(5),Ce("ngModel",t.cross.roofStyle),Z(1),Ce("value",f.RoofStyle.roofCircle),Z(2),Ce("value",f.RoofStyle.roofCircleAnd70),Z(2),Ce("value",f.RoofStyle.roof70),Z(2),Ce("id",f.Section.roofEdge)}}let fSt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=_t,this.tags=K3,this.RoofStyle=Ul,this.discord=this.appService.discord,this.faDiscord=qM,this.round=An,this.update=this.houseService.update}ngAfterViewInit(){}studLabel(t){return`#${t} `}sizeLabel(t){return`${t} m`}choosenRoofstyle(t){this.houseService.update("cross","roofStyle",t)}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(Mo))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-house"]],decls:44,vars:6,consts:[[4,"ngIf"],[3,"id"],["target","_blank",2,"background","var(--primary-color)","padding","0 6px","color","white",3,"href"],[3,"icon"],[1,"on-page-menu"],["mat-menu-item","","routerLink","/construction"],["mat-menu-item","","routerLink","/wired"],["mat-menu-item","","routerLink","/installations"],["mat-menu-item","","routerLink","/map"],["mat-menu-item","","routerLink","/stairs"],[2,"font-family","Material Icons Outlined"],[1,"mat-caption"],[2,"font-size","0.7em"],["href","https://passivehouse.com/","target","_blank"],["cdkOverlayOrigin","",3,"tag","overlayTemplate"],["insulated",""],["orientation",""],["fxLayoutAlign","center",2,"margin","8px 0 32px"],["efficiency",""],["simple",""],[3,"tag"],["baseDimension",""],["min","6","max","15","tickInterval","1",3,"ngModel","input"],[1,"technical"],["extensionToSouth",""],["extensionToNorth",""],["min","0","max","6","thumbLabel","","tickInterval","1",3,"ngModel","displayWith","input"],["thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],[2,"padding-bottom","80px",3,"id"],[3,"ngModel","ngModelChange"],["min","2.6","max","3.6","step","0.1","tickInterval","1",3,"ngModel","input"],["min","0","step","0.1","tickInterval","1",3,"max","ngModel","disabled","input"],["href","https://en.wikipedia.org/wiki/Mansard_roof","target","_blank"],["min","0","max","2","step","0.1","tickInterval","1",3,"ngModel","input"],["bendPoint",""],["name","roofstyle",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,i){1&t&&(Wt(0,hSt,245,75,"ng-container",0),_a(1,"async"),H(2,"section",1)(3,"h3"),V(4,"This was the main design"),N(),H(5,"p"),V(6,"This site has a lot of info, if you are up for more. Feel free to join us at this "),$e(7,"br"),H(8,"a",2),$e(9,"fa-icon",3),V(10," discord channel "),N()(),$e(11,"br"),H(12,"p"),V(13,"An other interesting page could be the layers of a wall/construction "),N(),H(14,"div",4)(15,"button",5)(16,"mat-icon"),V(17,"handyman"),N(),H(18,"span"),V(19,"Construction"),N()()(),H(20,"p"),V(21,"There is a menu on the top-left with a lot more items. Some are listed here"),N(),$e(22,"br"),H(23,"div",4)(24,"button",6)(25,"mat-icon"),V(26,"bolt"),N(),H(27,"span"),V(28,"Wired"),N()(),H(29,"button",7)(30,"mat-icon"),V(31,"solar_power"),N(),H(32,"span"),V(33,"Installations"),N()(),H(34,"button",8)(35,"mat-icon"),V(36,"pin_drop"),N(),H(37,"span"),V(38,"Map"),N()(),H(39,"button",9)(40,"mat-icon",10),V(41,"stairs"),N(),H(42,"span"),V(43,"Stairs"),N()()()()),2&t&&(Ce("ngIf",B1(1,4,i.house$)),Z(2),Ce("id",i.Section.EndOfPageHouse),Z(6),Bl("href",i.discord,wc),Z(1),Ce("icon",i.faDiscord))},dependencies:[g3,vve,k7,Wb,B9,qb,Pb,G9,TZ,LZ,Wh,XP,w9,YE,Che,Cd],styles:[".on-page-menu[_ngcontent-%COMP%]{border-radius:4px;display:flex;flex-direction:column;gap:8px;justify-content:center;padding:8px 0;margin:16px 0;max-width:200px}.on-page-menu[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f}"]}),n})();const dSt=function(n){return{height:n}};let bhe=(()=>{class n{ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Bn({type:n,selectors:[["app-img-page"]],inputs:{src:"src",height:"height"},decls:2,vars:4,consts:[["fxLayoutAlign","center center",1,"container",3,"ngStyle"],[3,"src"]],template:function(t,i){1&t&&(H(0,"div",0),$e(1,"img",1),N()),2&t&&(Ce("ngStyle",f3(2,dSt,i.height)),Z(1),Ce("src",i.src,wc))},dependencies:[zh,Wh,U7],styles:[".container[_ngcontent-%COMP%]{margin:32px 0 0}img[_ngcontent-%COMP%]{height:100%}"]}),n})();const xhe=function(n){return{active:n}};function pSt(n,e){if(1&n&&(H(0,"th",22),V(1),N()),2&n){const t=e.index,i=Nt().ngIf;Ce("ngClass",f3(2,xhe,i.stair.minSteps+t===i.stair.steps)),Z(1),Jn(" #",i.stair.minSteps+t," ")}}const gSt=function(n){return{"background-color":n}};function mSt(n,e){if(1&n){const t=la();Vs(0),H(1,"td",24),an("click",function(){ai(t);const r=Nt().index,s=Nt().index,o=Nt().ngIf,a=Nt();return h(a.select(o.stair.minSteps+r,a.totalRunByIndex(s)))}),V(2),N(),Us()}if(2&n){const t=e.ngIf,i=Nt().index,r=Nt().index,s=Nt(2);Z(1),FA("matrix-cell matrix-",i,"--",r,""),Ce("ngClass",s.score(t,s.getRise(i)))("ngStyle",f3(7,gSt,s.scoreColor(t,s.getRise(i)))),Z(1),Jn(" ",t," mm ")}}function ASt(n,e){if(1&n&&(Vs(0),Wt(1,mSt,3,9,"ng-container",0),Us()),2&n){const t=e.index,i=Nt().index,r=Nt(2);Z(1),Ce("ngIf",r.getRun(t,i))}}const pN=function(){return[]};function vSt(n,e){if(1&n&&(H(0,"tr")(1,"td",23)(2,"b"),V(3),N()(),Wt(4,ASt,2,1,"ng-container",12),N()),2&n){const t=e.index,i=Nt().ngIf,r=Nt();Z(1),Ce("ngClass",f3(3,xhe,r.totalRunByIndex(t)===i.stair.totalRun)),Z(2),Jn("",r.totalRunByIndex(t),"m"),Z(1),Ce("ngForOf",Eu(5,pN).constructor(r.rangeSteps))}}function _St(n,e){if(1&n){const t=la();Vs(0),H(1,"section",2,3)(3,"h1"),V(4,"Stairs"),N(),H(5,"p"),V(6," Stair design is a complex and important aspect of architecture, with entire Pinterest collections dedicated to it. "),N()(),H(7,"section",2)(8,"h2"),V(9,"Stair 101"),N(),H(10,"p"),V(11," Calculating stairs can be approached in various ways. "),N(),H(12,"ol")(13,"li"),V(14,"The "),H(15,"b"),V(16,"vertical"),N(),V(17),N(),H(18,"li"),V(19,"The building code allows for the rise of each step to be between 182mm and 220mm. Therefore we can only have steps between "),H(20,"b"),V(21),N()()(),H(22,"label")(23,"span"),V(24),N(),H(25,"mat-slider",4),an("input",function(r){ai(t);const s=Nt();return h(s.update("stair","steps",r.value,s.Tag.amountSteps))}),N()(),H(26,"ol",5)(27,"li"),V(28),N(),H(29,"li"),V(30,"The min and max "),H(31,"b"),V(32,"horizontal distance"),N(),V(33),N()(),H(34,"label")(35,"span"),V(36),N(),H(37,"mat-slider",6),an("input",function(r){return ai(t),h(Nt().update("stair","totalRun",r.value))}),N()(),H(38,"ol",7)(39,"li"),V(40),N(),H(41,"li"),V(42,"A matrix is formed from the combination of the two parameters to calculate "),H(43,"b"),V(44,"the run"),N(),V(45,". "),N()(),H(46,"table",8)(47,"tr"),$e(48,"th")(49,"th"),Wt(50,pSt,2,4,"th",9),N(),H(51,"tr"),$e(52,"td"),H(53,"td",10),V(54,"\u2193 Too high rise \u2193"),N(),H(55,"td",11),V(56," \u2191 Too steep angle \u2191 "),N(),H(57,"td",10),V(58,"\u2191 Too low rise \u2191"),N()(),Wt(59,vSt,5,6,"tr",12),H(60,"tr"),$e(61,"td"),H(62,"td",11),V(63," \u2193 Too shallow angle \u2193 "),N()()(),H(64,"p"),V(65," Where "),H(66,"span",13),V(67,"Red"),N(),V(68," is not allowed due to code."),$e(69,"br"),H(70,"span",14),V(71,"Orange"),N(),V(72," is not comfortable to walk on."),$e(73,"br"),H(74,"span",15),V(75,"Green"),N(),V(76," should be the most comfortable."),$e(77,"br"),V(78," Which step, is a tradeoff between the total length of the stairs and the angle. A lower angle takes less energy to walk up the stairs, but the stairs will be longer. "),N()(),H(79,"section",2,16)(81,"h2"),V(82,"The good, bad and perfect stairs"),N(),V(83," A good, comfortable stairs should follow a specific rule:"),$e(84,"br"),V(85," One run and two rises "),H(86,"div",17),$e(87,"b"),N(),V(88," should be around 60cm (+/- 3cm) "),H(89,"label")(90,"span"),V(91,"Checks"),N(),H(92,"table")(93,"tr")(94,"td"),V(95,"Angle"),N(),H(96,"td"),V(97),N()(),H(98,"tr")(99,"td"),V(100,"Steps"),N(),H(101,"td"),V(102),N()(),H(103,"tr")(104,"td"),V(105,"Rise"),N(),H(106,"td"),V(107),N()(),H(108,"tr")(109,"td"),V(110,"Run"),N(),H(111,"td"),V(112),N()(),H(113,"tr")(114,"td"),V(115,"Rise+Run+Rise"),N(),H(116,"td"),V(117),N()()()()(),H(118,"section",2,18)(120,"h2"),V(121,"Stair layout"),N(),H(122,"p"),V(123," Stairs can be straight, but we like to have two bends. This makes the stairs relative more compact. It prevents to falldown the complete stairs in accidents. Sideplus, it comes with a nice open hall effect. "),N(),H(124,"label")(125,"span"),V(126),N(),H(127,"mat-slider",19),an("input",function(r){return ai(t),h(Nt().update("stair","walkWidth",r.value))}),N()(),H(128,"label")(129,"span"),V(130),N(),H(131,"mat-slider",20),an("input",function(r){return ai(t),h(Nt().update("stair","stepsFlightLeft",r.value))}),N()(),H(132,"p"),V(133," For now we keep the model as simple as possible. Stairs are quite complex. Steps can change direction slowly to make it a piece of art by it self. Take a look at this drawing by Tieleman (1739 !) for inspiration. "),N(),$e(134,"app-img-page",21),N(),Us()}if(2&n){const t=e.ngIf,i=Nt();Z(1),Ce("id",i.Section.stairStart),Z(6),Ce("id",i.Section.stairBasic),Z(10),Jn(" distance is already determined by the house: ",t.stair.totalRise,"m"),Z(4),yd("",t.stair.minSteps," and ",t.stair.maxSteps," steps"),Z(3),Jn("Total steps: horizontal ",t.stair.steps,""),Z(1),Ce("min",t.stair.minSteps)("max",t.stair.maxSteps)("ngModel",t.stair.steps)("displayWith",i.sizeLabel),Z(3),Jn("The rise is: ",i.round(1e3*t.stair.rise,0),"mm"),Z(5),yd(" is easy, the stairs should be between ",i.minAngle,"\xb0 and ",i.maxAngle,"\xb0"),Z(3),Jn("Total length stairs: horizontal ",t.stair.totalRun,"m"),Z(1),Ce("min",i.totalRunMin)("max",i.totalRunMax)("ngModel",t.stair.totalRun)("displayWith",i.sizeLabel),Z(3),Jn("The angle is: ",t.stair.angle,"\xb0"),Z(10),Ce("ngForOf",Eu(37,pN).constructor(i.rangeSteps)),Z(9),Ce("ngForOf",Eu(38,pN).constructor(i.deltas)),Z(20),Ce("id",i.Section.stairCheck),Z(18),Jn("",t.stair.angle,"\xb0"),Z(5),D0(t.stair.steps),Z(5),Jn("",i.round(1e3*t.stair.rise,0)," mm"),Z(5),Jn("",i.round(1e3*t.stair.run,0)," mm"),Z(5),Jn("",i.round(1e3*(t.stair.run+2*t.stair.rise),0)," mm"),Z(1),Ce("id",i.Section.stairPlan),Z(8),Jn("Width ",t.stair.walkWidth,"m"),Z(1),Ce("min",.7)("max",1.2)("ngModel",t.stair.walkWidth),Z(3),yd("Steps on the rightside: ",t.stair.stepsFlightLeft," of ",t.stair.steps,""),Z(1),Ce("min",0)("max",t.stair.steps-t.stair.stepsFlightMid)("ngModel",t.stair.stepsFlightLeft)}}let ySt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=_t,this.Tag=K3,this.tagsKeys=Object.keys(K3),this.minAngle=30,this.maxAngle=42,this.update=this.houseService.update,this.round=An}ngAfterViewInit(){}sizeLabel(t){return`${t}m`}get totalRunMax(){return An(this.house$.value.stair.totalRise/Math.tan(ene(this.minAngle)),1)}get totalRunMin(){return An(this.house$.value.stair.totalRise/Math.tan(ene(this.maxAngle)),1)}get deltas(){return Math.ceil(this.rangeRun/.1)-1|1}get rangeRun(){return this.totalRunMax-this.totalRunMin}get rangeSteps(){const t=this.house$.value.stair;return t.maxSteps-t.minSteps+1}totalRunByIndex(t){return An(t/(this.deltas-1)*this.rangeRun+this.totalRunMin,1)}getRun(t,i){const r=this.house$.value.stair,s=this.totalRunByIndex(i);return An(s/(r.minSteps+t)*1e3,0)}getRise(t){const i=this.house$.value.stair;return An(i.totalRise/(i.minSteps+t)*1e3,0)}scoreComfort(t,i){return Math.abs(t+2*i-600)}scoreColor(t,i){const r=this.scoreComfort(t,i);return r>30?void 0:`rgba(0, 115, 0, ${.6-.8/30*r})`}score(t,i){const r=this.house$.value.stair,s=Math.abs(1e3*r.run-t)<1&&Math.abs(1e3*r.rise-i)<1?" active":"";return t<220?"too-little"+s:t>300?"too-much"+s:this.scoreComfort(t,i)>30?"not-comfortable"+s:"comfortable"+s}select(t,i){this.update("stair","steps",t),this.update("stair","totalRun",i)}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(Mo))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-stairs"]],decls:3,vars:3,consts:[[4,"ngIf"],["identifier","PassiveOpen-Stairs"],[3,"id"],["Section.stairStart",""],["step","1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","3"],["step","0.1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","5"],[1,"matrix"],[3,"ngClass",4,"ngFor","ngForOf"],["rowspan","50",1,"vertical"],["colspan","50",2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"too-much",2,"padding","0 8px"],[1,"not-comfortable",2,"padding","0 8px"],[2,"background-color","rgba(0, 115, 0,0.6)","padding","0 8px"],["Section.stairCheck",""],[2,"display","inline-block","background","var(--accent)","color","black","height","10px","width","18px"],["Section.stairPlan",""],["step","0.1","tickInterval","1",3,"min","max","ngModel","input"],["step","1","tickInterval","1",3,"min","max","ngModel","input"],["height","800px","src","assets/img/1739_Tieleman.jpg"],[3,"ngClass"],[1,"step",3,"ngClass"],[3,"ngClass","ngStyle","click"]],template:function(t,i){1&t&&(Wt(0,_St,135,39,"ng-container",0),_a(1,"async"),$e(2,"disqus",1)),2&t&&Ce("ngIf",B1(1,1,i.house$))},dependencies:[XA,p3,g3,zh,Wb,Pb,G9,PZ,U7,Z9,bhe,Cd],styles:['.matrix[_ngcontent-%COMP%]{border-collapse:collapse}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{line-height:1em;white-space:pre-wrap;cursor:pointer;transition:.2s}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]:hover{background-color:var(--color-30)}.matrix[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .matrix[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:relative}.matrix[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%]{writing-mode:vertical-lr;text-align:center;padding:4px}.too-much[_ngcontent-%COMP%], .too-little[_ngcontent-%COMP%]{background-color:#ff00004d;opacity:.6}.not-comfortable[_ngcontent-%COMP%]{background-color:#ff73004d;opacity:.6}.active[_ngcontent-%COMP%]:after{content:" ";position:absolute;top:-2px;left:-2px;width:100%;height:100%;border:2px solid var(--color-60)}']}),n})();function wSt(n,e){if(1&n&&(H(0,"th",16),V(1),N()),2&n){const t=Nt().$implicit;Z(1),Jn(" ",t.name," ")}}function CSt(n,e){if(1&n&&$e(0,"span",19),2&n){const t=Nt().$implicit,i=Nt().$implicit;Ce("innerHTML",i.def(t[i.id],t.unit),j3)}}function bSt(n,e){if(1&n&&(H(0,"td",17),Wt(1,CSt,1,1,"span",18),N()),2&n){const t=e.$implicit,i=Nt().$implicit;Z(1),Ce("ngIf",t[i.id])}}function xSt(n,e){1&n&&(Vs(0,13),Wt(1,wSt,2,1,"th",14),Wt(2,bSt,2,1,"td",15),Us()),2&n&&Ce("matColumnDef",e.$implicit.id)}function MSt(n,e){1&n&&$e(0,"tr",20)}function SSt(n,e){1&n&&$e(0,"tr",21)}function ESt(n,e){if(1&n){const t=la();Vs(0),H(1,"table",6),Wt(2,xSt,3,1,"ng-container",7),Wt(3,MSt,1,0,"tr",8),Wt(4,SSt,1,0,"tr",9),N(),H(5,"h3"),V(6,"The numbers that matter:"),N(),H(7,"p",10)(8,"span"),V(9,"r"),H(10,"sub"),V(11,"construction"),N()(),H(12,"span"),V(13),N(),H(14,"span"),V(15,"U "),N(),H(16,"span"),V(17),N(),H(18,"span"),V(19,"Wall thickness "),N(),H(20,"span"),V(21),N()(),H(22,"label")(23,"span"),V(24),N(),H(25,"mat-slider",11),an("input",function(r){return ai(t),h(Nt().updateJoist(r.value))}),N()(),H(26,"label")(27,"span"),V(28),N(),H(29,"mat-slider",12),an("input",function(r){ai(t);const s=Nt();return h(s.updateOuterSheet(s.round(r.value,4)))}),N()(),Us()}if(2&n){const t=e.ngIf,i=Nt();Z(1),Ce("dataSource",t.construction.heatCalcs),Z(1),Ce("ngForOf",i.columns),Z(1),Ce("matHeaderRowDef",i.columnNames),Z(1),Ce("matRowDefColumns",i.columnNames),Z(9),Jn(" ",t.construction.rConstruction,""),Z(4),Jn(" ",t.construction.U,""),Z(4),Jn(" ",t.construction.outerWallThickness,"m"),Z(3),Jn("I joist thickness (and main insulation) ",t.construction.thickness[i.Thicknesses.joists]," mm "),Z(1),Ce("max",i.joists.length-1)("ngModel",i.currentJoist()),Z(3),Jn("Celit thickness (",t.construction.thickness[i.Thicknesses.outerSheet],"mm ) "),Z(1),Ce("ngModel",t.construction.thickness[i.Thicknesses.outerSheet])}}let TSt=(()=>{class n{constructor(t){this.houseService=t,this.house$=this.houseService.house$,this.Tag=K3,this.Section=_t,this.update=this.houseService.update,this.round=An,this.Thicknesses=pn,this.joists=[200,300,350,400],this.columns=[{id:"name",name:"Name",def:i=>`${i}`},{id:"diameter",name:"Diameter",def:i=>`${An(i,3)}`},{id:"lambda",name:"Lambda",def:i=>`${An(i,3)}`},{id:"r",name:"R",def:i=>`${An(i,2)}`},{id:"deltaT",name:"Delta T",def:i=>`${An(i,1)}\xb0C`},{id:"temp",name:"Temp",def:i=>`${An(i,1)}\xb0C`}],this.columnNames=this.columns.map(i=>i.id),this.currentJoist=()=>this.joists.findIndex(i=>i===this.house$.value.construction.Thicknesses[pn.joists])}ngAfterViewInit(){}updateJoist(t){this.update("construction","thicknessJoist",this.joists[t])}updateOuterSheet(t){this.update("construction","thicknessJoist",this.joists[t])}}return n.\u0275fac=function(t){return new(t||n)(U(Lo))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-construction"]],decls:192,vars:29,consts:[[3,"id"],[1,"counter"],["href","https://en.wikipedia.org/wiki/Panelling"],[3,"tag"],[4,"ngIf"],["identifier","PassiveOpen-Construction"],["mat-table","",1,"mat-elevation-z0",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["gdColumns"," 1fr 1fr","gdGap","8px"],["min","0","step","1","tickInterval","1",3,"max","ngModel","input"],["min","0","max","150","step","10","tickInterval","1",3,"ngModel","input"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(H(0,"section",0)(1,"h1"),V(2," Construction "),N(),H(3,"h3"),V(4," This page is still under construction. "),N()(),H(5,"section",0)(6,"h2",1),V(7,"Foundation"),N(),H(8,"p"),V(9," Depends a lot on the region. In this case we use a 'mono-pour' together with the crawler space walls. "),N()(),H(10,"section",0)(11,"h2",1),V(12,"Crawler space walls"),N(),H(13,"p"),V(14," Here we use "),H(15,"tag"),V(16,"Insulated Concrete Forms (ICFs)"),N(),V(17,". These walls are connected to the floor and should be insulated. ICFs allows you to build these walls yourself. "),N()(),H(18,"section",0)(19,"h2",1),V(20,"Ground floor"),N(),H(21,"p"),V(22," Mass (heavy things) can keep heat. Like a stone wall after sunset would emit heat. It works also the opposite. Like churches are nice cool in the summer. Mass balance out the heat in a nice way. A complete wooden house, would not have that effect. Therefore some mass is a good thing to have. "),$e(23,"br")(24,"br"),V(25," Hollow-concrete-plate are relatively light and have the mass we look for. They can come with insulation, altho this would not be damp-open. "),N()(),H(26,"section",0)(27,"h2",1),V(28,"Sole beams"),N(),H(29,"p"),V(30," Its never a good idea to build wood straight on concrete."),$e(31,"br"),V(32," Therefore we use: "),N(),H(33,"ul")(34,"li"),V(35," a weather-resistent filt "),N(),H(36,"li"),V(37," pressured-treated plate (more water resistent), "),N(),H(38,"li"),V(39," the base plate. "),N()()(),H(40,"section",0)(41,"h2",1),V(42,"I-Joists"),N(),H(43,"p"),V(44," This is the actual structure. These i-joist are engineered. So they are straight, and cost less wood to produce. The "),H(45,"tag"),V(46,"on-center"),N(),V(47," distance (EU is often 60cm, US 16inch) is important. Only the first and last stud should not follow this grid, because otherwise the product on the finish end exactly on center of the stud. This is wrong because it the edge of the house, so the material should continue to the end. Wood is the material for construction. It is a storage of CO"),H(48,"sub"),V(49,"2"),N(),V(50,", natural, light and easy to work with. Modern products like, "),H(51,"tag"),V(52,"I Joists"),N(),V(53,", are even stronger than their natual twins. And you don't need to have a 30cm tree to produce a 30cm beam, so trees can be used more effective. (A disadvantage can be the glue used tho). Wood can last forever, think of all the old houses in old cities. "),N()(),H(54,"section",0)(55,"h2",1),V(56,"OSB (on the inside)"),N(),H(57,"p"),V(58," Traditional seen, OSB is used for a airtight outside layer. It also helps the whole building to be more solid, it can deal with sheer stresses. In this build, we will build "),H(59,"tag"),V(60,"damp open"),N(),V(61," and OSB is a perfect airtight product, but will also block moisture. Therefore it is actually great on the inside of the house "),N()(),H(62,"section",0)(63,"h2",1),V(64,"Tape"),N(),H(65,"p"),V(66," OSB and all the other seams are of course not air-tight. Therefore should we tape every seam. This step is harder than it sounds, especially around windows. You might not pass your passiv-haus certification due to this step."),$e(67,"br")(68,"br"),V(69," This steps includes also windows/doors and close all openings for a door-blower test. "),N()(),H(70,"section",0)(71,"h2",1),V(72,"Wall-Floor beam"),N(),H(73,"p"),V(74," The top-floor will hang on the inside of the wall. This prevents a "),H(75,"tag"),V(76,"thermal bridge"),N(),V(77,", in other words, this makes it more easy to "),H(78,"tag"),V(79,"air tighten"),N(),V(80," the house and the insulation continues "),N()(),H(81,"section",0)(82,"h2",1),V(83,"Wooden floor"),N(),H(84,"p"),V(85," Joists and osb "),N()(),H(86,"section",0)(87,"h2",1),V(88,"Roof ridge"),N(),$e(89,"p"),N(),H(90,"section",0)(91,"h2",1),V(92,"Roof joists"),N(),$e(93,"p"),N(),H(94,"section",0)(95,"h2",1),V(96,"Roof Inside"),N(),H(97,"p"),V(98," The roof need sturdiness. So we use OSB here as well as the inner layer. All seams can be taped directly "),N()(),H(99,"section",0)(100,"h2",1),V(101,"Insulation"),N(),H(102,"p"),V(103," Very important step. Keep it all dry. It feels like glass-insulation is best best of both worlds. It's often recycled glass and has a relative small footprint to the more eco-friendly alternatives. Stay away from wool for example. It is also very affordable, so we can focus our money on more expensive windows "),N()(),H(104,"section",0)(105,"h2",1),V(106,"Damp open outer sheets"),N(),H(107,"p"),V(108," Here are multiple options. We don't like to use plastics here. A great option is "),H(109,"tag"),V(110,"fiberboard's"),N(),V(111,", they are damp open, some what water resistant. This is an environment friendly product. It can be out in the rain for 4 weeks, while building. "),N()(),H(112,"section",0)(113,"h2",1),V(114,"Roof Woodwork"),N(),H(115,"p"),V(116," grid of wood "),N()(),H(117,"section",0)(118,"h2",1),V(119,"Roof tiles"),N(),H(120,"p"),V(121," Tiles. "),N()(),H(122,"section",0)(123,"h2",1),V(124,"Cavity (vent space)"),N(),H(125,"p"),V(126," This step depends a lot on the outer finish. In this example we use vertical wooden planks. Therfore we need first vertical strips (the construction is vertical, and water needs to run down). On top of these strips are horizontal strips so we can add vertical facade planks "),N()(),H(127,"section",0)(128,"h2",1),V(129,"Outer wall"),N(),H(130,"p"),V(131," In this example we use wooden planks. Traditionally seen, it was impossible to make big planks. So in the early days the alternate with big planks and smaller strips. "),N()(),H(132,"section",0)(133,"h2",1),V(134,"Service wall"),N(),H(135,"p"),V(136," To prevent puncture in our air-tight OSB layer. There will be a service layer that contains all electric, water and such. It comes with extra insulation. This makes (small) renovations possible in the future. "),N()(),H(137,"section",0)(138,"h2",1),V(139,"Gips / Drywall / wood-finish"),N(),H(140,"p"),V(141," The inside wall will be either covered by gypsum/drywall. We also very like the idea of lower "),H(142,"a",2),V(143,"paneling"),N()()(),H(144,"h2"),V(145,"The water problem"),N(),H(146,"p"),V(147," Warm air can contain more water, so the inside air normally would go through the wall and cools down. To a point that it cannot hold longer that amount of water, so it condense in the middle of the wall. "),$e(148,"br")(149,"br"),V(150," Traditional building takes that problem with plastic wraps. One on the outside to keep weather out. And a even more water-closed layer in the inside. Water moves out the construction. It is important during the building fase, to keep everything relatively dry. "),$e(151,"br")(152,"br"),V(153," The alternative is: "),H(154,"tag"),V(155,"damp Open"),N(),V(156,". where no wraps are needed. The inner layer of the house has a water-closed natural layer (OSB sheets). The outside layer is 'damp-open' so it would not absorb rainwater, but the moist air from inside can escape. It is more like a Dutch slogan: not fighting the water, but living with (some) water. "),$e(157,"br")(158,"br"),V(159," We try to look what is the best insulation out there. We think wood-fiber is the best most sustainable in therms of production/insulation values. Stone/glass fibers are a little bit less on the production level, but a bit more durable over time. "),$e(160,"br")(161,"br"),H(162,"tag",3),V(163,"Wood fiber panels"),N(),V(164," are treated with bitumen, there are light, water-resistant and still insulating. They are a perfect layer for the outside layer of the construction (not final outer layer). "),$e(165,"br")(166,"br"),V(167," On the inside of the OSB is an extra 2cm layer and finises of with wood or drywall(gips plates). This layer is practical, because all the switches and wall socket cannot interfere with the air-tight-layer. With a "),H(168,"tag",3),V(169," pipeLayer"),N(),V(170," is it:\n"),N(),H(171,"ol")(172,"li"),V(173,"Easier to build keep it "),H(174,"tag",3),V(175,"air tight"),N()(),H(176,"li"),V(177,"Deal with sockets in a later stage"),N(),H(178,"li"),V(179,"Modifications"),N()(),H(180,"section",0)(181,"h2"),V(182," Walls outer finish "),N(),H(183,"p"),V(184," Wooden house, has wood on the outside. Not completely tru. Wood is a sustainable choice (altho we wonder, painting it every 10 years...), but in theory can we have anything on the outside. Keep in mind if you build"),H(185,"tag"),V(186,"damp-open "),N(),V(187," that the finish-layer should also be damp-open. Bricks are for example. The cement is definitely not sustainable, but there is no maintenance in the coming 100-ish years. "),N()(),H(188,"section",0),Wt(189,ESt,30,12,"ng-container",4),_a(190,"async"),N(),$e(191,"disqus",5)),2&t&&(Ce("id",i.Section.constructionWelcome),Z(5),Ce("id",i.Section.constructionFoundation),Z(5),Ce("id",i.Section.constructionCrawlerSpace),Z(8),Ce("id",i.Section.constructionGroundFloor),Z(8),Ce("id",i.Section.constructionWallSole),Z(14),Ce("id",i.Section.constructionWallJoists),Z(14),Ce("id",i.Section.constructionWallOSB),Z(8),Ce("id",i.Section.constructionWallTape),Z(8),Ce("id",i.Section.constructionFloorLVL),Z(11),Ce("id",i.Section.constructionFloor),Z(5),Ce("id",i.Section.constructionRoofRidge),Z(4),Ce("id",i.Section.constructionRoofJoist),Z(4),Ce("id",i.Section.constructionRoofInside),Z(5),Ce("id",i.Section.constructionWallInsulation),Z(5),Ce("id",i.Section.constructionWallOuterSheet),Z(8),Ce("id",i.Section.constructionRoofSpace),Z(5),Ce("id",i.Section.constructionRoofTiles),Z(5),Ce("id",i.Section.constructionWallSpace),Z(5),Ce("id",i.Section.constructionWallFacade),Z(5),Ce("id",i.Section.constructionWallService),Z(5),Ce("id",i.Section.constructionWallGips),Z(25),Ce("tag",i.Tag.woodFiberPlate),Z(6),Ce("tag",i.Tag.pipeLayer),Z(6),Ce("tag",i.Tag.airTight),Z(6),Ce("id",i.Section.constructionWallFinish),Z(8),Ce("id",i.Section.constructionParameters),Z(1),Ce("ngIf",B1(190,27,i.house$)))},dependencies:[p3,g3,Wb,sx,q9,ox,K9,$9,ax,X9,Y9,cx,lx,Pb,G9,KZ,XZ,Z9,YE,Cd],styles:['[_nghost-%COMP%]{counter-reset:heading}h2.counter[_ngcontent-%COMP%]{position:relative;counter-reset:subheading}h2.counter[_ngcontent-%COMP%]:after{content:"Step";position:absolute;top:-1.2em;left:-.6em;font-size:.8em;opacity:.6}h2.counter[_ngcontent-%COMP%]:before{content:counter(heading) "";counter-increment:heading;width:32px;display:inline-block;opacity:.6}']}),n})(),LSt=(()=>{class n{constructor(t,i,r){this.houseService=t,this.threeService=i,this.appService=r,this.house$=this.houseService.house$,this.Section=_t,this.Tag=K3,this.wallDetail="wallDetail",this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.subscriptions.push()}showPerSection(){}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(C_),U(Mo))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-facade"]],decls:42,vars:3,consts:[[3,"id"],[1,"mat-caption"],[1,"technical",2,"max-width","640px"],["fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","center center",2,"padding","16px 0 24px"],["src","/assets/img/window_1.jpg",2,"max-height","360px"],["src","/assets/img/window_2.jpg",2,"max-height","360px"],["src","https://ars.els-cdn.com/content/image/1-s2.0-S0378778816316383-gr9.jpg"],["src","/assets/img/door_step_1.jpg",2,"max-height","360px"],["identifier","PassiveOpen-Facade"]],template:function(t,i){1&t&&(H(0,"section",0)(1,"h1"),V(2,"Facade"),N(),H(3,"p",1),V(4," We cover here all the basics about the outside of the house. Windows, doors, domers and bricks. "),N()(),H(5,"section",0)(6,"h1"),V(7,"Window"),N(),H(8,"p"),V(9," Windows are a tradeoff between a nice open light house and: heat loss, heat gain, complexer builds and more expensive. In a passiv house, belongs high end windows, triple glass and high-end framing. That makes it one of the most costly investments. "),N(),H(10,"label",2)(11,"span"),V(12,"Design"),N(),H(13,"span"),V(14," Dutch traditional windows have some variations. "),$e(15,"br")(16,"br"),V(17," The right one is is nicely detailed. Look how the windowframe ends in a little stone, to keep it dry and prevent rotting. However the windowframe is missing at the bottom, the window rest on the stone. Not our modern standards. "),$e(18,"br")(19,"br"),V(20," The major difference between them is that the left one has a frame at the bottom. That is better insulated, and we do need to use less precious stone. "),N(),H(21,"div",3),$e(22,"img",4)(23,"img",5),N(),H(24,"span"),V(25," Furthermore both window-bottom-stones go into the brickwork. If you don't do this, you would create a channel for rainwater (wind blows it in the corner). And the dirt will collect on your walls. Now it would drip off. "),N()(),H(26,"p"),V(27," Place the window in the middle of insulation "),$e(28,"img",6),N()(),H(29,"section",0)(30,"h1"),V(31,"Doors"),N(),H(32,"p"),V(33," For guests the first warm welcome "),N(),H(34,"label",2)(35,"span"),V(36,"Design"),N(),H(37,"span"),V(38,"They kinda look like windows. Ofcourse the bottomframe is missing here. The bottom frame should be wheelchair friendly, altho its a bit contradictive with a eleveated ground floor (due to crawler space). The door and frame should be extreme insulated. "),N(),H(39,"div",3),$e(40,"img",7),N()()(),$e(41,"disqus",8)),2&t&&(Ce("id",i.Section.facadeStart),Z(5),Ce("id",i.Section.facadeWindow),Z(24),Ce("id",i.Section.facadeDoor))},dependencies:[x9,M9,Wh,Z9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:48px;align-items:center}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();function DSt(n,e){1&n&&V(0," A x00L tank for warm water. It is heated up externally by e.g. the sun or a heat-pump. The output is floor-heating or domestic hot water for showers. ")}let ISt=(()=>{class n{constructor(t,i,r){this.zone=t,this.appService=i,this.houseService=r,this.Tag=K3,this.Section=_t}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return n.\u0275fac=function(t){return new(t||n)(U(Xi),U(Mo),U(Lo))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-installation"]],decls:140,vars:15,consts:[[3,"id"],["warmWaterBuffer",""],[3,"tag","overlayTemplate"],["height","360px","src","assets/img/heat_water.png"],["height","360px","src","assets/img/rainwater_flow.png"],["identifier","PassiveOpen-installations"]],template:function(t,i){if(1&t&&(H(0,"section",0)(1,"h1"),V(2,"Installations"),N()(),Wt(3,DSt,1,0,"ng-template",null,1,K2),H(5,"section",0)(6,"h2"),V(7,"Heating"),N(),V(8," When it comes to heat, we need to think about how to produce, store, and use it effectively. In colder climates, some heating may be required in extreme winters. Besides heat is required for daily activities such as taking warm showers. These solutions are planned around a central "),H(9,"tag",2),V(10," warm water buffer"),N(),V(11," tank. An alternative would be warming up the air via the ventilation system. "),H(12,"h3"),V(13,"Production"),N(),V(14," There are some options to produce heat. Don't forget humans, the sun, a computer also generates quite a bit of heat. "),H(15,"ul")(16,"li"),V(17,"Heat pump"),N(),H(18,"li"),V(19,"City / block heating"),N(),H(20,"li"),V(21,"Wood / pallet stove"),N(),H(22,"li"),V(23,"Bio gass / Biomeiler"),N(),H(24,"li"),V(25,"Some levels - solar"),N()(),H(26,"h3"),V(27,"Storage"),N(),V(28," Unlike energy, storage for heat is a bit more easy. Heat can be stored in a "),H(29,"tag",2),V(30," warm water buffer"),N(),V(31," tank. A big well insulated tank can store heat for a long time. There are even solutions to store heat in an super insulated tank underground or even in aquifers far underground. "),H(32,"h3"),V(33,"Use"),N(),V(34," One of the passive house criteria is that the heat loss should be less than 15\u2008kWh/(m\xb2a). This is typically low as 10-20% what a normal house needs. Floor heating is the most suitable heating option for a passive house, because it uses low temperatures. The warm water needs to be warmed up to 60\xb0 to kill bacteria and can be used in showers and sinks. "),H(35,"h3"),V(36,"Preservation"),N(),V(37," A passive house has great insulation, but also heat exchangers in the ventilation system and in the showers. "),$e(38,"app-img-page",3),N(),H(39,"section",0)(40,"h2"),V(41,"Electricity"),N(),V(42," The primary focus of a PassiveHouse should be efficiency rather than electricity. However, electricity is still necessary for daily activities. "),$e(43,"br")(44,"br"),V(45," Production and usages of 'renewable primary energy' can higher your passive house certification level to "),H(46,"tag"),V(47,"plus "),N(),V(48," or "),H(49,"tag"),V(50,"premium"),N(),V(51,". "),H(52,"h3"),V(53,"Production"),N(),V(54," While achieving complete off-grid living may be difficult, we can greatly reduce our electricity usage by utilizing solar panels. "),$e(55,"br")(56,"br"),V(57," This Mansard roof is a (near) perfect angle for solar panels. However the to make it look nice is harder. We are still looking for the right panel types with old, classical roof tiles. If space allows it, you can put the panels on the ground away from the house "),$e(58,"br")(59,"br"),V(60," There is a balance between the time you need electricity (evening, electricity-car & cooking) and when they produce the most (around noon). If you can return-to-net, an orientation to noon is the best. Otherwise some panels may be more beneficial facing westward. "),H(61,"h3"),V(62,"Storage"),N(),V(63," Home batteries are not there yet. They are expensive and have a short life span. If you live rural or in areas with long power-outage it might be interesting to have backup power. "),$e(64,"br")(65,"br"),V(66," A way to store some of the energy we can use electricity to storing excesses in the "),H(67,"tag",2),V(68," warm water buffer "),N(),V(69,". "),H(70,"h3"),V(71,"Preserve"),N(),V(72," Some machines in a house that use quite a bit of electricity are the washing machine, dishwasher, and dryer. Some machines work with heat-pumps like a dryer. Other machines have hot-fill. This way e.g. the washing machine uses the hot water ( which is way better storable) instead of electricity. Make sure the lines are short though.\n"),N(),H(73,"section",0)(74,"h2"),V(75,"Ventilation"),N(),H(76,"p"),V(77," In passive houses, the air-tight construction plays a crucial role in conserving heat. By using advanced blow-in and suck-out ventilation systems, up to 94% of heat energy can be recovered and redistributed throughout the house, resulting in significant energy savings. "),$e(78,"br")(79,"br"),V(80," Air-tight?! than I can't open my windows.. There is a common misconception that passive houses don't allow for opening windows. However, if the outside temperature is not super warm or cold, it is perfectly fine to do so. Nevertheless, a well-designed climate system can provide clean, filtered air and eliminate the need for open windows. This is especially useful for people with allergies or in areas with high levels of smog. "),$e(81,"br")(82,"br"),V(83," To achieve a healthy indoor air quality, the ventilation system is designed to provide fresh air to some rooms, like the living room and sleeping rooms, while extracting air from wet rooms and the kitchen. The system is balanced to ensure efficient airflow throughout the house. Some rooms get fresh air, living room, sleeping rooms. And some rooms the air is pumped out, the wet rooms and kitchen. "),N()(),H(84,"h1"),V(85,"Not passive house but climate-friendly"),N(),H(86,"section",0)(87,"h2"),V(88,"Rain water"),N(),H(89,"p"),V(90," Climate adaptation requires the conservation of water, which can be achieved by collecting rainwater and using it as a buffer during droughts. Rainwater, which has low calcium levels, is perfect for watering plants, flushing toilets, and washing clothes. A large water tank (10m"),H(91,"sub"),V(92,"3"),N(),V(93,"), pump, and three-filter system are needed to store and filter the rainwater. "),$e(94,"br")(95,"br"),V(96," To ensure continuous water supply, a machine can automatically switch to normal drinking water backup if the rainwater tank runs out. "),$e(97,"br")(98,"br"),V(99,"In theory showering with rainwater seems perfect, but most laws forbids to bend cold-rainwater with warm-drinkwater. If you do, you need less soap and your hair will be smooth. It might be different at your location "),N(),$e(100,"app-img-page",4),N(),H(101,"section",0)(102,"h2"),V(103,"Drink water"),N(),H(104,"p"),V(105," Cold water supply doesn't require any special considerations, but if you live in the countryside, you may have a local source available. On the other hand, for hot or warm water supply in sinks and showers, a central heating system is necessary. It involves a central "),H(106,"tag",2),V(107," warm water buffer"),N(),V(108," tank that utilizes various heat sources, enabling hot water and even heating throughout the house. "),N()(),H(109,"section",0)(110,"h2"),V(111,"Domotica / Smart home"),N(),H(112,"p"),V(113," As homes become more complex, they should also become more intelligent. Automated air and heating systems that operate seamlessly in the background can enhance your comfort without you even noticing. For instance, on hot days, smart sunscreens can come down automatically to keep the interior cool, while they retract when it rains. "),$e(114,"br")(115,"br"),V(116,' While a basic level of intelligence is necessary, there\'s room to enhance automation with features like automatic lighting. However, "smart homes" can cause some frustration, as not all situations require voice commands or smartphone operation; sometimes a simple button will do the trick. '),$e(117,"br"),V(118," Despite this, a smart home with advanced capabilities should be able to determine when you need to turn on the lights. "),$e(119,"br")(120,"br"),V(121,"Think of (all if over rulable) "),N(),H(122,"ul")(123,"li"),V(124,"The lights dim more in the evening"),N(),H(125,"li"),V(126,"Red nightlight in the toilet after 23:00"),N(),H(127,"li"),V(128,"Block the sunlight with screens"),N(),H(129,"li"),V(130,"Randomly turning on lights when you're away can create the illusion that someone is at home"),N(),H(131,"li"),V(132,"Remote controllable (local VPN not via cloud)"),N(),H(133,"li"),V(134,"More secure, camera's and alarms"),N()(),$e(135,"br")(136,"br"),H(137,"p"),V(138," Wi-Fi is great, but cables offer better performance. If you are building a new home, consider installing more internet cables than you think you'll need. A smart home can use internet cables for sensors, cameras, computers, and more. Cat 6 cables are a good choice because they are easy to work with and provide fine speeds for most applications, as long as the distance is not too long (over 30 meters or so). For work or gaming stations, you may want to consider using a higher quality cable. Shielded cables are not necessary for home use, as they are more expensive and harder to work with "),N()(),$e(139,"disqus",5)),2&t){const r=Ar(4);Ce("id",i.Section.installationWelcome),Z(5),Ce("id",i.Section.installationHeating),Z(4),Ce("tag",i.Tag.warmWaterBuffer)("overlayTemplate",r),Z(20),Ce("tag",i.Tag.warmWaterBuffer)("overlayTemplate",r),Z(10),Ce("id",i.Section.installationElectricity),Z(28),Ce("tag",i.Tag.warmWaterBuffer)("overlayTemplate",r),Z(6),Ce("id",i.Section.installationVentilation),Z(13),Ce("id",i.Section.installationGreyWater),Z(15),Ce("id",i.Section.installationDrinkWater),Z(5),Ce("tag",i.Tag.warmWaterBuffer)("overlayTemplate",r),Z(3),Ce("id",i.Section.installationSmartHome)}},dependencies:[Z9,YE,Che,bhe],styles:["h3[_ngcontent-%COMP%]{font-weight:500}"]}),n})();function RSt(n,e){DE.expire()}const FSt=class BSt extends Gz{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Zi()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Ju(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),z_(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,c){let l;const u=t.viewState;function f(T,I,F,P){return s.call(o,I,T?F:null,P)}const p=u.projection,g=zue(e.slice(),p),_=[[0,0]];if(p.canWrapX()&&r){const I=wo(p.getExtent());_.push([-I,0],[I,0])}const y=t.layerStatesArray,w=y.length,C=[],x=[];for(let T=0;T<_.length;T++)for(let I=w-1;I>=0;--I){const F=y[I],P=F.layer;if(P.hasRenderer()&&CO(F,u)&&a.call(c,P)){const R=P.getRenderer(),k=P.getSource();if(R&&k){const W=k.getWrapX()?g:e,ie=f.bind(null,F.managed);x[0]=W[0]+_[T][0],x[1]=W[1]+_[T][1],l=R.forEachFeatureAtCoordinate(x,t,i,ie,C)}if(l)return l}}if(0===C.length)return;const M=1/C.length;return C.forEach((T,I)=>T.distanceSq+=I*M),C.sort((T,I)=>T.distanceSq-I.distanceSq),C.some(T=>l=T.callback(T.feature,T.layer,T.geometry)),l}hasFeatureAtCoordinate(e,t,i,r,s,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,i,r,oh,this,s,o)}getMap(){return this.map_}renderFrame(e){Zi()}scheduleExpireIconCache(e){DE.canExpireCache()&&e.postRenderFunctions.push(RSt)}},PSt=class kSt extends FSt{constructor(e){super(e),this.fontChangeListenerKey_=Rs(Bf,"propertychange",e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=aE+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new h0e(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){pa(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=t.length;o<a;++o){const c=t[o];e.layerIndex=o;const l=c.layer,u=l.getSourceState();if(!CO(c,i)||"ready"!=u&&"undefined"!=u){l.unrender();continue}const f=l.render(e,s);!f||(f!==s&&(this.children_.push(f),s=f),"getDeclutter"in l&&r.push(l))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(e);(function Pyt(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}};class R6 extends L3{constructor(e,t){super(e),this.layer=t}}class mN extends Jue{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),i?Array.isArray(i)?i=new U1(i.slice(),{unique:!0}):ms("function"==typeof i.getArray,43):i=new U1(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(pa),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Rs(e,"add",this.handleLayersAdd_,this),Rs(e,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(pa);tm(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new R6("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Rs(e,"propertychange",this.handleLayerChange_,this),Rs(e,"change",this.handleLayerChange_,this)];e instanceof mN&&t.push(Rs(e,"addlayer",this.handleLayerGroupAdd_,this),Rs(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[xr(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new R6("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new R6("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new R6("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=xr(t);this.listenerKeys_[i].forEach(pa),delete this.listenerKeys_[i],this.dispatchEvent(new R6("removelayer",t)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new R6("removelayer",i[r]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=void 0!==e?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&void 0===r.zIndex&&(s=0);for(let o=i,a=t.length;o<a;o++){const c=t[o];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),void 0!==r.extent&&(c.extent=void 0!==c.extent?w6(c.extent,r.extent):r.extent),void 0===c.zIndex&&(c.zIndex=s)}return t}getSourceState(){return"ready"}}const ZE=mN,zSt=class HSt extends L_{constructor(e,t){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Rs(i,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=Rs(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!hue&&{passive:!1})}emulateClick_(e){let t=new Vf(Qs.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Vf(Qs.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const i=new Vf(Qs.SINGLECLICK,this.map_,e);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Qs.POINTERUP||t.type==Qs.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Qs.POINTERDOWN||t.type==Qs.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Vf(Qs.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(pa),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new Vf(Qs.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.down_={};for(const i in e){const r=e[i];this.down_[i]="function"==typeof r?q5:r}if(0===this.dragListenerKeys_.length){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Rs(i,Qs.POINTERMOVE,this.handlePointerMove_,this),Rs(i,Qs.POINTERUP,this.handlePointerUp_,this),Rs(this.element_,Qs.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Rs(this.element_.getRootNode(),Qs.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Vf(Qs.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Vf(Qs.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(pa(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(pa(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(pa),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},JE=1/0,vN=class QSt extends Yu{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){nE(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&nE(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)pa(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==q5&&this.listenerKeys.push(Rs(e,"postrender",this.render,this)),e.render())}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},jSt=class WSt extends vN{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const t=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",r=void 0!==e.expandClassName?e.expandClassName:t+"-expand",s=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",o=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=void 0!==e.label?e.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const u=this.element;u.className=t+" "+aE+" "+Qz+(this.collapsed_&&this.collapsible_?" "+Aue:"")+(this.collapsible_?"":" ol-uncollapsible"),u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t={},i=[];let r=!0;const s=e.layerStatesArray;for(let o=0,a=s.length;o<a;++o){const c=s[o];if(!CO(c,e.viewState))continue;const l=c.layer.getSource();if(!l)continue;const u=l.getAttributions();if(!u)continue;const f=u(e);if(f)if(r=r&&!1!==l.getAttributionsCollapsible(),Array.isArray(f))for(let p=0,g=f.length;p<g;++p)f[p]in t||(i.push(f[p]),t[f[p]]=!0);else f in t||(i.push(f),t[f]=!0)}return this.overrideCollapsible_||this.setCollapsible(r),i}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!v6(t,this.renderedAttributions_)){pue(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Aue),this.collapsed_?due(this.collapseLabel_,this.label_):due(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},qSt=class $St extends vN{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"\u21e7",r=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener("click",this.handleClick_.bind(this),!1);const c=this.element;c.className=t+" "+aE+" "+Qz,c.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(oE)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:um}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(oE);s||0!==i?s&&0!==i&&this.element.classList.remove(oE):this.element.classList.add(oE)}this.label_.style.transform=r}this.rotation_=i}},XSt=class KSt extends vN{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,r=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",s=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",a=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",c=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",l=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener("click",this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=l,f.appendChild("string"==typeof a?document.createTextNode(a):a),f.addEventListener("click",this.handleClick_.bind(this,-i),!1);const g=this.element;g.className=t+" "+aE+" "+Qz,g.appendChild(u),g.appendChild(f),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(void 0!==r){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:um})):i.setZoom(s)}}},JSt=class ZSt extends hm{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==Qs.DBLCLICK){const i=e.originalEvent,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_;_O(e.map.getView(),o,s,this.duration_),i.preventDefault(),t=!0}return!t}},tEt=class eEt extends Hf{constructor(e){super({stopDown:em}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const t=e.condition?e.condition:BO(FO,S0e);this.condition_=e.onFocusOnly?BO(C0e,t):t,this.noKinetic_=!1}handleDragEvent(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const t=this.targetPointers,i=yO(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();(function Twt(n,e){n[0]*=e,n[1]*=e})(r,o.getResolution()),cO(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:um})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},iEt=class nEt extends Hf{constructor(e){e=e||{},super({stopDown:em}),this.condition_=e.condition?e.condition:rbt,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!RE(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===hN)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}handleUpEvent(e){return!RE(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(RE(e)&&b0e(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},sEt=class rEt extends Gz{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new op([r])}getGeometry(){return this.geometry_}};class _N extends L3{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}const aEt=class oEt extends Hf{constructor(e){super(),this.box_=new sEt((e=e||{}).className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:b0e,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new _N("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new _N(t?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new _N("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},lEt=class cEt extends aEt{constructor(e){super({condition:(e=e||{}).condition?e.condition:kO,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:um})}},hEt=class uEt extends hm{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return FO(t)&&M0e(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if("keydown"==e.type){const i=e.originalEvent,r=i.keyCode;if(this.condition_(e)&&(40==r||37==r||39==r||38==r)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let c=0,l=0;40==r?l=-a:37==r?c=-a:39==r?c=a:l=a;const u=[c,l];cO(u,o.getRotation()),function $wt(n,e,t){const i=n.getCenterInternal();i&&n.animateInternal({duration:void 0!==t?t:250,easing:Wwt,center:n.getConstrainedCenter([i[0]+e[0],i[1]+e[1]])})}(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}},dEt=class fEt extends hm{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:M0e,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if("keydown"==e.type||"keypress"==e.type){const i=e.originalEvent,r=i.charCode;if(this.condition_(e)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){const s=e.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_;_O(s.getView(),o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}},AEt=class mEt extends hm{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:gm;this.condition_=e.onFocusOnly?BO(C0e,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||"wheel"!==e.type)return!0;const i=e.map,r=e.originalEvent;let s;if(r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(s=r.deltaY,Dyt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=uue),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),0===s)return!1;this.lastDelta_=s;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const c=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-oc(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),_O(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},_Et=class vEt extends Hf{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=em),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){const u=s-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=u}this.lastAngle_=s;const o=e.map,a=o.getView();if(a.getConstraints().rotation===hN)return;const c=o.getViewport().getBoundingClientRect(),l=yO(this.targetPointers);l[0]-=c.left,l[1]-=c.top,this.anchor_=o.getCoordinateFromPixelInternal(l),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},wEt=class yEt extends Hf{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=em),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,l=c.getView();1!=t&&(this.lastScaleDelta_=t);const u=c.getViewport().getBoundingClientRect(),f=yO(this.targetPointers);f[0]-=u.left,f[1]-=u.top,this.anchor_=c.getCoordinateFromPixelInternal(f),c.render(),l.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function Mhe(n){n instanceof W_?n.setMapInternal(null):n instanceof ZE&&n.getLayers().forEach(Mhe)}function She(n,e){if(n instanceof W_)n.setMapInternal(e);else if(n instanceof ZE){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)She(t[i],e)}}const MEt=class bEt extends Yu{constructor(e){super();const t=function xEt(n){let e=null;void 0!==n.keyboardEventTarget&&(e="string"==typeof n.keyboardEventTarget?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&"function"==typeof n.layers.getLayers?n.layers:new ZE({layers:n.layers});let r,s,o;return t.layergroup=i,t.target=n.target,t.view=n.view instanceof B6?n.view:new B6,void 0!==n.controls&&(Array.isArray(n.controls)?r=new U1(n.controls.slice()):(ms("function"==typeof n.controls.getArray,47),r=n.controls)),void 0!==n.interactions&&(Array.isArray(n.interactions)?s=new U1(n.interactions.slice()):(ms("function"==typeof n.interactions.getArray,48),s=n.interactions)),void 0!==n.overlays?Array.isArray(n.overlays)?o=new U1(n.overlays.slice()):(ms("function"==typeof n.overlays.getArray,49),o=n.overlays):o=new U1,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}(e=e||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:uue,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=t.controls||function YSt(n){n=n||{};const e=new U1;return(void 0===n.zoom||n.zoom)&&e.push(new XSt(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&e.push(new qSt(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&e.push(new jSt(n.attributionOptions)),e}(),this.interactions=t.interactions||function CEt(n){n=n||{};const e=new U1,t=new class pEt{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&e.push(new iEt),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&e.push(new JSt({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&e.push(new tEt({onFocusOnly:n.onFocusOnly,kinetic:t})),(void 0===n.pinchRotate||n.pinchRotate)&&e.push(new _Et),(void 0===n.pinchZoom||n.pinchZoom)&&e.push(new wEt({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(e.push(new hEt),e.push(new dEt({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&e.push(new AEt({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&e.push(new lEt({duration:n.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class VSt extends class OSt{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,tm(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){ms(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=JE&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),u=l<r&&i[l]<i[c]?l:c;t[e]=t[u],i[e]=i[u],e=u}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(!(r[a]>o))break;i[t]=i[a],r[t]=r[a],t=a}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,c;for(a=0;a<s;++a)o=t[a],c=e(o),c==JE?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=c,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener("change",this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(2===i||3===i||4===i){3!==i&&t.removeEventListener("change",this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r,s,o,i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),0===r&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof B6)&&e.view.then(function(r){i.setView(new B6(r))}),this.controls.addEventListener("add",function(r){r.element.setMap(this)}.bind(this)),this.controls.addEventListener("remove",function(r){r.element.setMap(null)}.bind(this)),this.interactions.addEventListener("add",function(r){r.element.setMap(this)}.bind(this)),this.interactions.addEventListener("remove",function(r){r.element.setMap(null)}.bind(this)),this.overlays_.addEventListener("add",function(r){this.addOverlayInternal_(r.element)}.bind(this)),this.overlays_.addEventListener("remove",function(r){const s=r.element.getId();void 0!==s&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}.bind(this)),this.controls.forEach(function(r){r.setMap(this)}.bind(this)),this.interactions.forEach(function(r){r.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){She(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,t,null,void 0!==i.layerFilter?i.layerFilter:oh,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];return function t(i){i.forEach(function(r){r instanceof ZE?t(r.getLayers()):e.push(r)})}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(t=void 0!==t?t:{}).hitTolerance?t.hitTolerance:0,!1!==t.checkWrapped,void 0!==t.layerFilter?t.layerFilter:oh,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),i="changedTouches"in e?e.changedTouches[0]:e;return[i.clientX-t.left,i.clientY-t.top]}getTarget(){return this.get("target")}getTargetElement(){const e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}getCoordinateFromPixel(e){return Q_(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Xc(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const t=this.getLayerGroup();if(e instanceof U1)return void t.setLayers(e);const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=ac(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Xc(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return function GSt(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return JE;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){const i=new Vf(t=t||e.type,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()===this&&o.getActive()&&this.getTargetElement()&&(!o.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[0]||o[1]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Am("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Am("loadstart",this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,i=this.targetChangeHandlerKeys_.length;t<i;++t)pa(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,nE(this.viewport_)}const e=this.getTargetElement();if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new PSt(this)),this.mapBrowserEventHandler_=new zSt(this,this.moveTolerance_);for(const r in Qs)this.mapBrowserEventHandler_.addEventListener(Qs[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!hue&&{passive:!1});const t=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[Rs(i,"keydown",this.handleBrowserEvent,this),Rs(i,"keypress",this.handleBrowserEvent,this),Rs(t,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(pa(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(pa(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Rs(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Rs(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(pa),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new R6("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Rs(e,"propertychange",this.render,this),Rs(e,"change",this.render,this),Rs(e,"addlayer",this.handleLayerAdd_,this),Rs(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Mhe(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(void 0!==t&&tue(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:oO(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:xr(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=oO(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!_E(this.previousExtent_)&&!sm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Am("movestart",this,r)),this.previousExtent_=Y5(this.previousExtent_)),this.previousExtent_&&!s.viewHints[0]&&!s.viewHints[1]&&!sm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Am("moveend",this,s)),Sue(s.extent,this.previousExtent_))),this.dispatchEvent(new Am("postrender",this,s)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new R6("removelayer",t)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof B6)return void this.set("view",e);this.set("view",new B6);const t=this;e.then(function(i){t.setView(new B6(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),r=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(r)&&!isNaN(s)&&(t=[r,s],!tue(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}};class wN extends L3{constructor(e,t,i,r,s){super(e),this.features=t,this.coordinate=i,this.startCoordinate=r,this.mapBrowserEvent=s}}const EEt=class SEt extends Hf{constructor(e){let t;if(super(e=e||{}),this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==e.features?e.features:null,e.layers&&!this.features_)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=oh;this.layerFilter_=t,this.filter_=e.filter&&!this.features_?e.filter:oh,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.condition_=e.condition?e.condition:gm,this.lastFeature_=null,this.addChangeListener("active",this.handleActiveChanged_)}handleDownEvent(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const t=this.features_||new U1([this.lastFeature_]);return this.dispatchEvent(new wN("translatestart",t,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const t=this.features_||new U1([this.lastFeature_]);return this.dispatchEvent(new wN("translateend",t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const t=e.coordinate,i=t[0]-this.lastCoordinate_[0],r=t[1]-this.lastCoordinate_[1],s=this.features_||new U1([this.lastFeature_]);s.forEach(function(o){const a=o.getGeometry();a.translate(i,r),o.setGeometry(a)}),this.lastCoordinate_=t,this.dispatchEvent(new wN("translating",s,t,this.startCoordinate_,e))}}handleMoveEvent(e){const t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,t){return t.forEachFeatureAtPixel(e,function(i,r){if(this.filter_(i,r)&&(!this.features_||this.features_.getArray().includes(i)))return i}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){const t=this.getMap();super.setMap(e),this.updateState_(t)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let t=this.getMap();const i=this.getActive();(!t||!i)&&(t=t||e,t&&t.getViewport().classList.remove("ol-grab","ol-grabbing"))}};function wm(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tT(n){return tT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tT(n)}function Ehe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function The(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Lhe(n,e,t){return e&&The(n.prototype,e),t&&The(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function cp(n){return cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cp(n)}function TEt(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=cp(n)););return n}function ry(){return ry=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=TEt(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(arguments.length<3?e:i):s.value}},ry.apply(this,arguments)}function CN(n,e){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},CN(n,e)}function IEt(n,e){if(e&&("object"===tT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function DEt(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function Dhe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e=["Assertion failed",e].join(": "),!n)throw new Error(e)}function Ihe(n){return n}function nT(n,e){return-1!==n.indexOf(e)}function Bhe(n){return"[object Array]"===Object.prototype.toString.call(n)}var xN=function(){function n(e,t,i,r){Ehe(this,n),this.propagationStopped_=!1,this.type_=e,this.features_=t,this.angle_=i,this.anchor_=r}return Lhe(n,[{key:"preventDefault",value:function(){this.propagationStopped_=!0}},{key:"stopPropagation",value:function(){this.propagationStopped_=!0}},{key:"propagationStopped",get:function(){return this.propagationStopped_}},{key:"type",get:function(){return this.type_}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.angle_}},{key:"anchor",get:function(){return this.anchor_}}]),n}(),MN=typeof navigator<"u"?navigator.userAgent.toLowerCase():"",BEt=-1!==MN.indexOf("macintosh"),REt=-1!==MN.indexOf("webkit")&&-1==MN.indexOf("edge");var iT="rotate-anchor",rT="rotate-arrow",g4="angle",sT="anchor",Rhe=function(n){!function LEt(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&CN(n,e)}(t,n);var e=function kEt(n){var e=function PEt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var r,i=cp(n);if(e){var s=cp(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return IEt(this,r)}}(t);function t(){var i,r,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ehe(this,t),(r=e.call(this,{handleDownEvent:HEt,handleUpEvent:zEt,handleDragEvent:OEt,handleMoveEvent:sy})).previousCursor_=void 0,r.anchorFeature_=void 0,r.arrowFeature_=void 0,r.lastCoordinate_=void 0,r.anchorMoving_=!1,r.overlay_=new pm({style:s.style||NEt(),source:new J_({features:new U1})}),r.condition_=s.condition?s.condition:gm,r.features_=void 0,s.features)if(Bhe(s.features))r.features_=new U1(s.features);else{if(!(s.features instanceof U1))throw new Error("Features option should be an array or collection of features, got "+tT(s.features));r.features_=s.features}else r.features_=new U1;return r.allowAnchorMovement=void 0===s.allowAnchorMovement||s.allowAnchorMovement,r.setAnchor(s.anchor||SN(r.features_)),r.setAngle(s.angle||0),r.features_.on("add",(i=r).onFeatureAdd_.bind(i)),r.features_.on("remove",(i=r).onFeatureRemove_.bind(i)),r.on("change:"+g4,(i=r).onAngleChange_.bind(i)),r.on("change:"+sT,(i=r).onAnchorChange_.bind(i)),r.createOrUpdateAnchorFeature_(),r.createOrUpdateArrowFeature_(),r}return Lhe(t,[{key:"setMap",value:function(r){this.overlay_.setMap(r),ry(cp(t.prototype),"setMap",this).call(this,r)}},{key:"setActive",value:function(r){this.overlay_&&this.overlay_.setMap(r?this.map:void 0),ry(cp(t.prototype),"setActive",this).call(this,r)}},{key:"setAngle",value:function(r){Dhe(!isNaN(parseFloat(r)),"Numeric value passed"),this.set(g4,parseFloat(r))}},{key:"getAngle",value:function(){return this.get(g4)}},{key:"setAnchor",value:function(r){Dhe(null==r||Bhe(r)&&2===r.length,"Array of two elements passed"),this.set(sT,null!=r?r.map(parseFloat):SN(this.features_))}},{key:"getAnchor",value:function(){return this.get(sT)}},{key:"createOrUpdateAnchorFeature_",value:function(){var r=this.getAngle(),s=this.getAnchor();if(s)if(this.anchorFeature_)this.anchorFeature_.getGeometry().setCoordinates(s),this.anchorFeature_.set(g4,r);else{var o;this.anchorFeature_=new J4((wm(o={geometry:new d4(s)},g4,r),wm(o,iT,!0),o)),this.overlay_.getSource().addFeature(this.anchorFeature_)}}},{key:"createOrUpdateArrowFeature_",value:function(){var r=this.getAngle(),s=this.getAnchor();if(s)if(this.arrowFeature_)this.arrowFeature_.getGeometry().setCoordinates(s),this.arrowFeature_.set(g4,r);else{var o;this.arrowFeature_=new J4((wm(o={geometry:new d4(s)},g4,r),wm(o,rT,!0),o)),this.overlay_.getSource().addFeature(this.arrowFeature_)}}},{key:"resetAngleAndAnchor_",value:function(){this.resetAngle_(),this.resetAnchor_()}},{key:"resetAngle_",value:function(){this.set(g4,0,!0),this.arrowFeature_&&this.arrowFeature_.set(g4,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(g4,this.getAngle())}},{key:"resetAnchor_",value:function(){this.set(sT,SN(this.features_),!0),this.getAnchor()&&(this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor()),this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor()))}},{key:"onFeatureAdd_",value:function(){this.resetAngleAndAnchor_(),this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()}},{key:"onFeatureRemove_",value:function(){this.resetAngleAndAnchor_(),this.features_.getLength()?(this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()):(this.overlay_.getSource().clear(),this.anchorFeature_=this.arrowFeature_=void 0)}},{key:"onAngleChange_",value:function(r){var s=this,o=r.oldValue;this.features_.forEach(function(a){return a.getGeometry().rotate(s.getAngle()-o,s.getAnchor())}),this.arrowFeature_&&this.arrowFeature_.set(g4,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(g4,this.getAngle())}},{key:"onAnchorChange_",value:function(){var r=this.getAnchor();r&&(this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(r),this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(r))}},{key:"dispatchRotateStartEvent_",value:function(r){this.dispatchEvent(new xN("rotatestart",r,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotatingEvent_",value:function(r){this.dispatchEvent(new xN("rotating",r,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotateEndEvent_",value:function(r){this.dispatchEvent(new xN("rotateend",r,this.getAngle(),this.getAnchor()))}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.getAngle()},set:function(r){this.setAngle(r)}},{key:"anchor",get:function(){return this.getAnchor()},set:function(r){this.setAnchor(r)}},{key:"map",set:function(r){this.setMap(r)},get:function(){return this.getMap()}},{key:"active",set:function(r){this.setActive(r)},get:function(){return this.getActive()}}]),t}(Hf);function HEt(n){if(!RE(n))return!1;if(function(e){var t=e.originalEvent;return 0==t.button&&!(REt&&BEt&&t.ctrlKey)}(n)&&this.condition_(n)){var e=n.map.forEachFeatureAtPixel(n.pixel,Ihe);if(nT(["click","singleclick","dblclick"],n.type)&&nT([this.anchorFeature_,this.arrowFeature_],e))return!1;if(e&&!this.lastCoordinate_&&(nT(this.features_.getArray(),e)||e===this.arrowFeature_))return this.lastCoordinate_=n.coordinate,sy.call(this,n),this.dispatchRotateStartEvent_(this.features_),!0;if(e&&e===this.anchorFeature_&&this.allowAnchorMovement)return this.anchorMoving_=!0,sy.call(this,n),!0}return!1}function zEt(n){return this.lastCoordinate_?(this.lastCoordinate_=void 0,sy.call(this,n),this.dispatchRotateEndEvent_(this.features_),!0):!!this.anchorMoving_&&(this.anchorMoving_=!1,sy.call(this,n),!0)}function OEt(n){var e=n.coordinate,t=this.anchorFeature_.getGeometry().getCoordinates();if(this.lastCoordinate_){var i=[this.lastCoordinate_[0]-t[0],this.lastCoordinate_[1]-t[1]],r=[e[0]-t[0],e[1]-t[1]],s=Math.atan2(i[0]*r[1]-r[0]*i[1],i[0]*r[0]+i[1]*r[1]);this.setAngle(this.getAngle()+s),this.dispatchRotatingEvent_(this.features_),this.lastCoordinate_=e}else this.anchorMoving_&&this.setAnchor(e)}function sy(n){var e=n.map,t=n.pixel,i=e.getTargetElement(),r=e.forEachFeatureAtPixel(t,Ihe),s=function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c&&(i.style.cursor="-webkit-"+a,i.style.cursor="-moz-"+a),i.style.cursor=a};this.lastCoordinate_?(this.previousCursor_=i.style.cursor,s("grabbing",!0)):r&&(nT(this.features_.getArray(),r)||r===this.arrowFeature_)?(this.previousCursor_=i.style.cursor,s("grab",!0)):r&&r===this.anchorFeature_&&this.allowAnchorMovement||this.anchorMoving_?(this.previousCursor_=i.style.cursor,s("crosshair")):(s(this.previousCursor_||""),this.previousCursor_=void 0)}function NEt(){var n,e=[255,255,255,.8],t=[0,153,255,.8],i=[255,255,255,.01],s=(wm(n={},iT,[new P2({image:new P_({fill:new Vo({color:[0,153,255,.8]}),stroke:new Kc({color:t,width:1}),radius:4,points:6}),zIndex:1/0})]),wm(n,rT,[new P2({fill:new Vo({color:i}),stroke:new Kc({color:e,width:4}),text:new Rf({font:"12px sans-serif",offsetX:20,offsetY:-20,fill:new Vo({color:"blue"}),stroke:new Kc({color:e,width:3})}),zIndex:1/0}),new P2({fill:new Vo({color:i}),stroke:new Kc({color:t,width:2}),zIndex:1/0})]),n);return function(o,a){var c,l=o.get(g4)||0;switch(!0){case o.get(iT):return(c=s[iT])[0].getImage().setRotation(-l),c;case o.get(rT):c=s[rT];var u=o.getGeometry().getCoordinates(),f=new op([[[u[0],u[1]-6*a],[u[0]+8*a,u[1]-12*a],[u[0],u[1]+30*a],[u[0]-8*a,u[1]-12*a],[u[0],u[1]-6*a]]]);return f.rotate(l,u),c[0].setGeometry(f),c[1].setGeometry(f),c[0].getText().setText(Math.round(180*-l/Math.PI)+"\xb0"),c}}}function SN(n){if((n=n instanceof U1?n.getArray():n).length)return kf(function VEt(n){if((n=n instanceof U1?n.getArray():n).length)return new WO(n.map(function(e){return e.getGeometry()})).getExtent()}(n))}typeof window<"u"&&window.ol&&window.ol.interaction&&(window.ol.interaction.RotateFeature=Rhe);const UEt=Rhe;function Fhe(n,e,t){const i=t?Ja(t.featureProjection):null,r=t?Ja(t.dataProjection):null;let s;if(s=i&&r&&!Pf(i,r)?(e?n.clone():n).transform(e?i:r,e?r:i):n,e&&t&&void 0!==t.decimals){const o=Math.pow(10,t.decimals),a=function(c){for(let l=0,u=c.length;l<u;++l)c[l]=Math.round(c[l]*o)/o;return c};s===n&&(s=n.clone()),s.applyTransform(a)}return s}function oT(n){return"string"==typeof n?JSON.parse(n)||null:null!==n?n:null}function EN(n,e){if(!n)return null;let t;switch(n.type){case"Point":t=function KEt(n){return new d4(n.coordinates)}(n);break;case"LineString":t=function XEt(n){return new Nf(n.coordinates)}(n);break;case"Polygon":t=function eTt(n){return new op(n.coordinates)}(n);break;case"MultiPoint":t=function ZEt(n){return new KO(n.coordinates)}(n);break;case"MultiLineString":t=function YEt(n){return new $O(n.coordinates)}(n);break;case"MultiPolygon":t=function JEt(n){return new XO(n.coordinates)}(n);break;case"GeometryCollection":t=function qEt(n,e){const t=n.geometries.map(function(i){return EN(i,e)});return new WO(t)}(n);break;default:throw new Error("Unsupported GeoJSON type: "+n.type)}return Fhe(t,!1,e)}function TN(n,e){const t=(n=Fhe(n,!0,e)).getType();let i;switch(t){case"Point":i=function oTt(n,e){return{type:"Point",coordinates:n.getCoordinates()}}(n);break;case"LineString":i=function nTt(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}(n);break;case"Polygon":i=function aTt(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}(n,e);break;case"MultiPoint":i=function rTt(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}(n);break;case"MultiLineString":i=function iTt(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}(n);break;case"MultiPolygon":i=function sTt(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}(n,e);break;case"GeometryCollection":i=function tTt(n,e){delete(e=Object.assign({},e)).featureProjection;const t=n.getGeometriesArray().map(function(i){return TN(i,e)});return{type:"GeometryCollection",geometries:t}}(n,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+t)}return i}const khe=class $Et extends class WEt extends class GEt{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Ja(t.dataProjection):this.readProjection(e);t.extent&&i&&"tile-pixels"===i.getUnits()&&(i=Ja(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return Zi()}readFeature(e,t){return Zi()}readFeatures(e,t){return Zi()}readGeometry(e,t){return Zi()}readProjection(e){return Zi()}writeFeature(e,t){return Zi()}writeFeatures(e,t){return Zi()}writeGeometry(e,t){return Zi()}}{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(oT(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(oT(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Zi()}readFeaturesFromObject(e,t){return Zi()}readGeometry(e,t){return this.readGeometryFromObject(oT(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Zi()}readProjection(e){return this.readProjectionFromObject(oT(e))}readProjectionFromObject(e){return Zi()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Zi()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Zi()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Zi()}}{constructor(e){e=e||{},super(),this.dataProjection=Ja(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ja(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;i="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const r=EN(i.geometry,t),s=new J4;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){let r=null;if("FeatureCollection"===e.type){r=[];const o=e.features;for(let a=0,c=o.length;a<c;++a)r.push(this.readFeatureFromObject(o[a],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return EN(e,t)}readProjectionFromObject(e){const t=e.crs;let i;return t?"name"==t.type?i=Ja(t.properties.name):"EPSG"===t.type?i=Ja("EPSG:"+t.properties.code):ms(!1,36):i=this.dataProjection,i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(void 0!==r&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=TN(o,t),delete s[e.getGeometryName()]),nm(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return TN(e,this.adaptOptions(t))}};function Gf(n,e,t){void 0===t&&(t={});var i={type:"Feature"};return(0===t.id||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function lp(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!IN(n[0])||!IN(n[1]))throw new Error("coordinates must contain numbers");return Gf({type:"Point",coordinates:n},e,t)}function up(n,e,t){void 0===t&&(t={});for(var i=0,r=n;i<r.length;i++){var s=r[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}return Gf({type:"Polygon",coordinates:n},e,t)}function Cm(n,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function DN(n,e,t){return void 0===t&&(t={}),Gf({type:"MultiPolygon",coordinates:n},e,t)}function IN(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function F6(n,e,t){if(null!==n)for(var i,r,s,o,a,c,l,p,u=0,f=0,g=n.type,_="FeatureCollection"===g,y="Feature"===g,w=_?n.features.length:1,C=0;C<w;C++){a=(p=!!(l=_?n.features[C].geometry:y?n.geometry:n)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var x=0;x<a;x++){var M=0,T=0;if(null!==(o=p?l.geometries[x]:l)){c=o.coordinates;var I=o.type;switch(u=!t||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":if(!1===e(c,f,C,M,T))return!1;f++,M++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],f,C,M,T))return!1;f++,"MultiPoint"===I&&M++}"LineString"===I&&M++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(r=0;r<c[i].length-u;r++){if(!1===e(c[i][r],f,C,M,T))return!1;f++}"MultiLineString"===I&&M++,"Polygon"===I&&T++}"Polygon"===I&&M++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(T=0,r=0;r<c[i].length;r++){for(s=0;s<c[i][r].length-u;s++){if(!1===e(c[i][r][s],f,C,M,T))return!1;f++}T++}M++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===F6(o.geometries[i],e,t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function oy(n,e){!function Vhe(n,e){var t,i,r,s,o,a,c,l,u,f,p=0,g="FeatureCollection"===n.type,_="Feature"===n.type,y=g?n.features.length:1;for(t=0;t<y;t++){for(l=g?n.features[t].properties:_?n.properties:{},u=g?n.features[t].bbox:_?n.bbox:void 0,f=g?n.features[t].id:_?n.id:void 0,o=(c=!!(a=g?n.features[t].geometry:_?n.geometry:n)&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(s=c?a.geometries[r]:a))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(s,p,l,u,f))return!1;break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===e(s.geometries[i],p,l,u,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,u,f))return!1;p++}}(n,function(t,i,r,s,o){var c,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Gf(t,r,{bbox:s,id:o}),i,0)&&void 0}switch(a){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var l=0;l<t.coordinates.length;l++)if(!1===e(Gf({type:c,coordinates:t.coordinates[l]},r),i,l))return!1})}function BN(n){var e=[1/0,1/0,-1/0,-1/0];return F6(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}BN.default=BN;const mTt=BN;function Uhe(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}Se(5943);var ITt=Se(1335);function jhe(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=Uhe(n),r=function yTt(n){return"Feature"===n.type?n.geometry:n}(e),s=r.type,o=e.bbox,a=r.coordinates;if(o&&!1===function RTt(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}(i,o))return!1;"Polygon"===s&&(a=[a]);for(var c=!1,l=0;l<a.length&&!c;l++)if($he(i,a[l][0],t.ignoreBoundary)){for(var u=!1,f=1;f<a[l].length&&!u;)$he(i,a[l][f],!t.ignoreBoundary)&&(u=!0),f++;u||(c=!0)}return c}function $he(n,e,t){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,s=e.length-1;r<e.length;s=r++){var o=e[r][0],a=e[r][1],c=e[s][0],l=e[s][1];if(n[1]*(o-c)+a*(c-n[0])+l*(n[0]-o)==0&&(o-n[0])*(c-n[0])<=0&&(a-n[1])*(l-n[1])<=0)return!t;a>n[1]!=l>n[1]&&n[0]<(c-o)*(n[1]-a)/(l-a)+o&&(i=!i)}return i}var Khe=new ArrayBuffer(16);new Float64Array(Khe),new Uint32Array(Khe),Se(915),function(){function n(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++){var i=this.points[t],r=this.points[t+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){var s=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,o=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,a=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+s),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+a)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+s),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}n.prototype.cacheSteps=function(e){var t=[],i=this.pos(0);t.push(0);for(var r=0;r<this.duration;r+=10){var s=this.pos(r);Math.sqrt((s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y)+(s.z-i.z)*(s.z-i.z))>e&&(t.push(r),i=s)}return t},n.prototype.vector=function(e){var t=this.pos(e+10),i=this.pos(e-10);return{angle:180*Math.atan2(t.y-i.y,t.x-i.x)/3.14,speed:Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y)+(i.z-t.z)*(i.z-t.z))}},n.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var i=t/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i);return function KTt(n,e,t,i,r){var s=function XTt(n){var e=n*n;return[e*n,3*e*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:r.x*s[0]+i.x*s[1]+t.x*s[2]+e.x*s[3],y:r.y*s[0]+i.y*s[1]+t.y*s[2]+e.y*s[3],z:r.z*s[0]+i.z*s[1]+t.z*s[2]+e.z*s[3]}}((this.length-1)*i-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();const tfe=function iLt(n,e){void 0===e&&(e={});var t=0,i=0,r=0;return F6(n,function(s){t+=s[0],i+=s[1],r++},!0),lp([t/r,i/r],e.properties)},rLt=function nfe(n,e){switch(void 0===e&&(e={}),function wTt(n,e){return"FeatureCollection"===n.type?"FeatureCollection":"GeometryCollection"===n.type?"GeometryCollection":"Feature"===n.type&&null!==n.geometry?n.geometry.type:n.type}(n)){case"Point":return lp(Uhe(n),e.properties);case"Polygon":var t=[];F6(n,function(T){t.push(T)});var c,l,u,f,p,g,_,y,i=tfe(n,{properties:e.properties}),r=i.geometry.coordinates,s=0,o=0,a=0,w=t.map(function(T){return[T[0]-r[0],T[1]-r[1]]});for(c=0;c<t.length-1;c++)a+=y=(f=(l=w[c])[0])*(_=(u=w[c+1])[1])-(p=u[0])*(g=l[1]),s+=(f+p)*y,o+=(g+_)*y;if(0===a)return i;var x=1/(.5*a*6);return lp([r[0]+x*s,r[1]+x*o],e.properties);default:var M=function BTt(n,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var t=[];if(F6(n,function(r){t.push([r[0],r[1]])}),!t.length)return null;var i=ITt(t,e.concavity);return i.length>3?up([i]):null}(n);return M?nfe(M,{properties:e.properties}):tfe(n,{properties:e.properties})}};Se(5469),Se(5406);const ffe=function MLt(n){if(!n)throw new Error("geojson is required");var e=[];return oy(n,function(t){e.push(t)}),Cm(e)};Se(3237);var gfe=Math.PI/180,mfe=180/Math.PI,ly=function(n,e){this.lon=n,this.lat=e,this.x=gfe*n,this.y=gfe*e};ly.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ly.prototype.antipode=function(){return new ly(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var Afe=function(){this.coords=[],this.length=0};Afe.prototype.move_to=function(n){this.length++,this.coords.push(n)};var NN=function(n){this.properties=n||{},this.geometries=[]};NN.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],e=0;e<this.geometries.length;e++)n.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}},NN.prototype.wkt=function(){for(var n="",e="LINESTRING(",t=function(s){e+=s[0]+" "+s[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(t),n+=e.substring(0,e.length-1)+")"}return n};var VN=function(n,e,t){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ly(n.x,n.y),this.end=new ly(e.x,e.y),this.properties=t||{};var i=this.start.x-this.end.x,s=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(s)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+e)};VN.prototype.interpolate=function(n){var e=Math.sin((1-n)*this.g)/Math.sin(this.g),t=Math.sin(n*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),s=e*Math.sin(this.start.y)+t*Math.sin(this.end.y),o=mfe*Math.atan2(s,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[mfe*Math.atan2(r,i),o]},VN.prototype.Arc=function(n,e){var t=[];if(!n||n<=2)t.push([this.start.lon,this.start.lat]),t.push([this.end.lon,this.end.lat]);else for(var i=1/(n-1),r=0;r<n;++r){var o=this.interpolate(i*r);t.push(o)}for(var a=!1,c=0,l=e&&e.offset?e.offset:10,u=180-l,f=-180+l,p=360-l,g=1;g<t.length;++g){var _=t[g-1][0],y=t[g][0],w=Math.abs(y-_);w>p&&(y>u&&_<f||_>u&&y<f)?a=!0:w>c&&(c=w)}var C=[];if(a&&c<l){var x=[];C.push(x);for(var M=0;M<t.length;++M){var T=parseFloat(t[M][0]);if(M>0&&Math.abs(T-t[M-1][0])>p){var I=parseFloat(t[M-1][0]),F=parseFloat(t[M-1][1]),P=parseFloat(t[M][0]),R=parseFloat(t[M][1]);if(I>-180&&I<f&&180===P&&M+1<t.length&&t[M-1][0]>-180&&t[M-1][0]<f){x.push([-180,t[M][1]]),M++,x.push([t[M][0],t[M][1]]);continue}if(I>u&&I<180&&-180===P&&M+1<t.length&&t[M-1][0]>u&&t[M-1][0]<180){x.push([180,t[M][1]]),M++,x.push([t[M][0],t[M][1]]);continue}if(I<f&&P>u){var k=I;I=P,P=k;var W=F;F=R,R=W}if(I>u&&P<f&&(P+=360),I<=180&&P>=180&&I<P){var ie=(180-I)/(P-I),Te=ie*R+(1-ie)*F;x.push([t[M-1][0]>u?180:-180,Te]),(x=[]).push([t[M-1][0]>u?-180:180,Te]),C.push(x)}else C.push(x=[]);x.push([T,t[M][1]])}else x.push([t[M][0],t[M][1]])}}else{var me=[];C.push(me);for(var Q=0;Q<t.length;++Q)me.push([t[Q][0],t[Q][1]])}for(var he=new NN(this.properties),K=0;K<C.length;++K){var ae=new Afe;he.geometries.push(ae);for(var fe=C[K],de=0;de<fe.length;++de)ae.move_to(fe[de])}return he},Se(6952);var Nr=[],Vr=[],Ur=[],Gr=[],Qr=[],Wr=[],jr=[],$r=[],qr=[],Kr=[],Xr=[],Yr=[],Zr=[],Jr=[],es=[],ts=[],ns=[],is=[],rs=[],ss=[],os=[],as=[],cs=[],ls=[];jr[85]=Kr[85]=-1,$r[85]=Xr[85]=0,qr[85]=Yr[85]=1,rs[85]=as[85]=1,ss[85]=cs[85]=0,os[85]=ls[85]=1,Nr[85]=Gr[85]=0,Vr[85]=Qr[85]=-1,Ur[85]=es[85]=0,ts[85]=Zr[85]=0,ns[85]=Jr[85]=1,Wr[85]=is[85]=1,as[1]=as[169]=0,cs[1]=cs[169]=-1,ls[1]=ls[169]=0,Zr[1]=Zr[169]=-1,Jr[1]=Jr[169]=0,es[1]=es[169]=0,Kr[4]=Kr[166]=0,Xr[4]=Xr[166]=-1,Yr[4]=Yr[166]=1,ts[4]=ts[166]=1,ns[4]=ns[166]=0,is[4]=is[166]=0,jr[16]=jr[154]=0,$r[16]=$r[154]=1,qr[16]=qr[154]=1,Gr[16]=Gr[154]=1,Qr[16]=Qr[154]=0,Wr[16]=Wr[154]=1,rs[64]=rs[106]=0,ss[64]=ss[106]=1,os[64]=os[106]=0,Nr[64]=Nr[106]=-1,Vr[64]=Vr[106]=0,Ur[64]=Ur[106]=1,rs[2]=rs[168]=0,ss[2]=ss[168]=-1,os[2]=os[168]=1,as[2]=as[168]=0,cs[2]=cs[168]=-1,ls[2]=ls[168]=0,Zr[2]=Zr[168]=-1,Jr[2]=Jr[168]=0,es[2]=es[168]=0,ts[2]=ts[168]=-1,ns[2]=ns[168]=0,is[2]=is[168]=1,jr[8]=jr[162]=0,$r[8]=$r[162]=-1,qr[8]=qr[162]=0,Kr[8]=Kr[162]=0,Xr[8]=Xr[162]=-1,Yr[8]=Yr[162]=1,Zr[8]=Zr[162]=1,Jr[8]=Jr[162]=0,es[8]=es[162]=1,ts[8]=ts[162]=1,ns[8]=ns[162]=0,is[8]=is[162]=0,jr[32]=jr[138]=0,$r[32]=$r[138]=1,qr[32]=qr[138]=1,Kr[32]=Kr[138]=0,Xr[32]=Xr[138]=1,Yr[32]=Yr[138]=0,Nr[32]=Nr[138]=1,Vr[32]=Vr[138]=0,Ur[32]=Ur[138]=0,Gr[32]=Gr[138]=1,Qr[32]=Qr[138]=0,Wr[32]=Wr[138]=1,as[128]=as[42]=0,cs[128]=cs[42]=1,ls[128]=ls[42]=1,rs[128]=rs[42]=0,ss[128]=ss[42]=1,os[128]=os[42]=0,Nr[128]=Nr[42]=-1,Vr[128]=Vr[42]=0,Ur[128]=Ur[42]=1,Gr[128]=Gr[42]=-1,Qr[128]=Qr[42]=0,Wr[128]=Wr[42]=0,Kr[5]=Kr[165]=-1,Xr[5]=Xr[165]=0,Yr[5]=Yr[165]=0,as[5]=as[165]=1,cs[5]=cs[165]=0,ls[5]=ls[165]=0,ts[20]=ts[150]=0,ns[20]=ns[150]=1,is[20]=is[150]=1,Gr[20]=Gr[150]=0,Qr[20]=Qr[150]=-1,Wr[20]=Wr[150]=1,jr[80]=jr[90]=-1,$r[80]=$r[90]=0,qr[80]=qr[90]=1,rs[80]=rs[90]=1,ss[80]=ss[90]=0,os[80]=os[90]=1,Zr[65]=Zr[105]=0,Jr[65]=Jr[105]=1,es[65]=es[105]=0,Nr[65]=Nr[105]=0,Vr[65]=Vr[105]=-1,Ur[65]=Ur[105]=0,jr[160]=jr[10]=-1,$r[160]=$r[10]=0,qr[160]=qr[10]=1,Kr[160]=Kr[10]=-1,Xr[160]=Xr[10]=0,Yr[160]=Yr[10]=0,as[160]=as[10]=1,cs[160]=cs[10]=0,ls[160]=ls[10]=0,rs[160]=rs[10]=1,ss[160]=ss[10]=0,os[160]=os[10]=1,ts[130]=ts[40]=0,ns[130]=ns[40]=1,is[130]=is[40]=1,Zr[130]=Zr[40]=0,Jr[130]=Jr[40]=1,es[130]=es[40]=0,Nr[130]=Nr[40]=0,Vr[130]=Vr[40]=-1,Ur[130]=Ur[40]=0,Gr[130]=Gr[40]=0,Qr[130]=Qr[40]=-1,Wr[130]=Wr[40]=1,Kr[37]=Kr[133]=0,Xr[37]=Xr[133]=1,Yr[37]=Yr[133]=1,as[37]=as[133]=0,cs[37]=cs[133]=1,ls[37]=ls[133]=0,Nr[37]=Nr[133]=-1,Vr[37]=Vr[133]=0,Ur[37]=Ur[133]=0,Gr[37]=Gr[133]=1,Qr[37]=Qr[133]=0,Wr[37]=Wr[133]=0,ts[148]=ts[22]=-1,ns[148]=ns[22]=0,is[148]=is[22]=0,as[148]=as[22]=0,cs[148]=cs[22]=-1,ls[148]=ls[22]=1,rs[148]=rs[22]=0,ss[148]=ss[22]=1,os[148]=os[22]=1,Gr[148]=Gr[22]=-1,Qr[148]=Qr[22]=0,Wr[148]=Wr[22]=1,jr[82]=jr[88]=0,$r[82]=$r[88]=-1,qr[82]=qr[88]=1,ts[82]=ts[88]=1,ns[82]=ns[88]=0,is[82]=is[88]=1,Zr[82]=Zr[88]=-1,Jr[82]=Jr[88]=0,es[82]=es[88]=1,rs[82]=rs[88]=0,ss[82]=ss[88]=-1,os[82]=os[88]=0,jr[73]=jr[97]=0,$r[73]=$r[97]=1,qr[73]=qr[97]=0,Kr[73]=Kr[97]=0,Xr[73]=Xr[97]=-1,Yr[73]=Yr[97]=0,Zr[73]=Zr[97]=1,Jr[73]=Jr[97]=0,es[73]=es[97]=0,Nr[73]=Nr[97]=1,Vr[73]=Vr[97]=0,Ur[73]=Ur[97]=1,jr[145]=jr[25]=0,$r[145]=$r[25]=-1,qr[145]=qr[25]=0,Zr[145]=Zr[25]=1,Jr[145]=Jr[25]=0,es[145]=es[25]=1,as[145]=as[25]=0,cs[145]=cs[25]=1,ls[145]=ls[25]=1,Gr[145]=Gr[25]=-1,Qr[145]=Qr[25]=0,Wr[145]=Wr[25]=0,Kr[70]=Kr[100]=0,Xr[70]=Xr[100]=1,Yr[70]=Yr[100]=0,ts[70]=ts[100]=-1,ns[70]=ns[100]=0,is[70]=is[100]=1,rs[70]=rs[100]=0,ss[70]=ss[100]=-1,os[70]=os[100]=1,Nr[70]=Nr[100]=1,Vr[70]=Vr[100]=0,Ur[70]=Ur[100]=0,Kr[101]=Kr[69]=0,Xr[101]=Xr[69]=1,Yr[101]=Yr[69]=0,Nr[101]=Nr[69]=1,Vr[101]=Vr[69]=0,Ur[101]=Ur[69]=0,as[149]=as[21]=0,cs[149]=cs[21]=1,ls[149]=ls[21]=1,Gr[149]=Gr[21]=-1,Qr[149]=Qr[21]=0,Wr[149]=Wr[21]=0,ts[86]=ts[84]=-1,ns[86]=ns[84]=0,is[86]=is[84]=1,rs[86]=rs[84]=0,ss[86]=ss[84]=-1,os[86]=os[84]=1,jr[89]=jr[81]=0,$r[89]=$r[81]=-1,qr[89]=qr[81]=0,Zr[89]=Zr[81]=1,Jr[89]=Jr[81]=0,es[89]=es[81]=1,jr[96]=jr[74]=0,$r[96]=$r[74]=1,qr[96]=qr[74]=0,Kr[96]=Kr[74]=-1,Xr[96]=Xr[74]=0,Yr[96]=Yr[74]=1,rs[96]=rs[74]=1,ss[96]=ss[74]=0,os[96]=os[74]=0,Nr[96]=Nr[74]=1,Vr[96]=Vr[74]=0,Ur[96]=Ur[74]=1,jr[24]=jr[146]=0,$r[24]=$r[146]=-1,qr[24]=qr[146]=1,ts[24]=ts[146]=1,ns[24]=ns[146]=0,is[24]=is[146]=1,Zr[24]=Zr[146]=0,Jr[24]=Jr[146]=1,es[24]=es[146]=1,Gr[24]=Gr[146]=0,Qr[24]=Qr[146]=-1,Wr[24]=Wr[146]=0,Kr[6]=Kr[164]=-1,Xr[6]=Xr[164]=0,Yr[6]=Yr[164]=1,ts[6]=ts[164]=-1,ns[6]=ns[164]=0,is[6]=is[164]=0,as[6]=as[164]=0,cs[6]=cs[164]=-1,ls[6]=ls[164]=1,rs[6]=rs[164]=1,ss[6]=ss[164]=0,os[6]=os[164]=0,Zr[129]=Zr[41]=0,Jr[129]=Jr[41]=1,es[129]=es[41]=1,as[129]=as[41]=0,cs[129]=cs[41]=1,ls[129]=ls[41]=0,Nr[129]=Nr[41]=-1,Vr[129]=Vr[41]=0,Ur[129]=Ur[41]=0,Gr[129]=Gr[41]=0,Qr[129]=Qr[41]=-1,Wr[129]=Wr[41]=0,ts[66]=ts[104]=0,ns[66]=ns[104]=1,is[66]=is[104]=0,Zr[66]=Zr[104]=-1,Jr[66]=Jr[104]=0,es[66]=es[104]=1,rs[66]=rs[104]=0,ss[66]=ss[104]=-1,os[66]=os[104]=0,Nr[66]=Nr[104]=0,Vr[66]=Vr[104]=-1,Ur[66]=Ur[104]=1,jr[144]=jr[26]=-1,$r[144]=$r[26]=0,qr[144]=qr[26]=0,as[144]=as[26]=1,cs[144]=cs[26]=0,ls[144]=ls[26]=1,rs[144]=rs[26]=0,ss[144]=ss[26]=1,os[144]=os[26]=1,Gr[144]=Gr[26]=-1,Qr[144]=Qr[26]=0,Wr[144]=Wr[26]=1,Kr[36]=Kr[134]=0,Xr[36]=Xr[134]=1,Yr[36]=Yr[134]=1,ts[36]=ts[134]=0,ns[36]=ns[134]=1,is[36]=is[134]=0,Nr[36]=Nr[134]=0,Vr[36]=Vr[134]=-1,Ur[36]=Ur[134]=1,Gr[36]=Gr[134]=1,Qr[36]=Qr[134]=0,Wr[36]=Wr[134]=0,jr[9]=jr[161]=-1,$r[9]=$r[161]=0,qr[9]=qr[161]=0,Kr[9]=Kr[161]=0,Xr[9]=Xr[161]=-1,Yr[9]=Yr[161]=0,Zr[9]=Zr[161]=1,Jr[9]=Jr[161]=0,es[9]=es[161]=0,as[9]=as[161]=1,cs[9]=cs[161]=0,ls[9]=ls[161]=1,jr[136]=0,$r[136]=1,qr[136]=1,Kr[136]=0,Xr[136]=1,Yr[136]=0,ts[136]=-1,ns[136]=0,is[136]=1,Zr[136]=-1,Jr[136]=0,es[136]=0,as[136]=0,cs[136]=-1,ls[136]=0,rs[136]=0,ss[136]=-1,os[136]=1,Nr[136]=1,Vr[136]=0,Ur[136]=0,Gr[136]=1,Qr[136]=0,Wr[136]=1,jr[34]=0,$r[34]=-1,qr[34]=0,Kr[34]=0,Xr[34]=-1,Yr[34]=1,ts[34]=1,ns[34]=0,is[34]=0,Zr[34]=1,Jr[34]=0,es[34]=1,as[34]=0,cs[34]=1,ls[34]=1,rs[34]=0,ss[34]=1,os[34]=0,Nr[34]=-1,Vr[34]=0,Ur[34]=1,Gr[34]=-1,Qr[34]=0,Wr[34]=0,jr[35]=0,$r[35]=1,qr[35]=1,Kr[35]=0,Xr[35]=-1,Yr[35]=1,ts[35]=1,ns[35]=0,is[35]=0,Zr[35]=-1,Jr[35]=0,es[35]=0,as[35]=0,cs[35]=-1,ls[35]=0,rs[35]=0,ss[35]=1,os[35]=0,Nr[35]=-1,Vr[35]=0,Ur[35]=1,Gr[35]=1,Qr[35]=0,Wr[35]=1,jr[153]=0,$r[153]=1,qr[153]=1,Zr[153]=-1,Jr[153]=0,es[153]=0,as[153]=0,cs[153]=-1,ls[153]=0,Gr[153]=1,Qr[153]=0,Wr[153]=1,Kr[102]=0,Xr[102]=-1,Yr[102]=1,ts[102]=1,ns[102]=0,is[102]=0,rs[102]=0,ss[102]=1,os[102]=0,Nr[102]=-1,Vr[102]=0,Ur[102]=1,jr[155]=0,$r[155]=-1,qr[155]=0,Zr[155]=1,Jr[155]=0,es[155]=1,as[155]=0,cs[155]=1,ls[155]=1,Gr[155]=-1,Qr[155]=0,Wr[155]=0,Kr[103]=0,Xr[103]=1,Yr[103]=0,ts[103]=-1,ns[103]=0,is[103]=1,rs[103]=0,ss[103]=-1,os[103]=1,Nr[103]=1,Vr[103]=0,Ur[103]=0,jr[152]=0,$r[152]=1,qr[152]=1,ts[152]=-1,ns[152]=0,is[152]=1,Zr[152]=-1,Jr[152]=0,es[152]=0,as[152]=0,cs[152]=-1,ls[152]=0,rs[152]=0,ss[152]=-1,os[152]=1,Gr[152]=1,Qr[152]=0,Wr[152]=1,jr[156]=0,$r[156]=-1,qr[156]=1,ts[156]=1,ns[156]=0,is[156]=1,Zr[156]=-1,Jr[156]=0,es[156]=0,as[156]=0,cs[156]=-1,ls[156]=0,rs[156]=0,ss[156]=1,os[156]=1,Gr[156]=-1,Qr[156]=0,Wr[156]=1,jr[137]=0,$r[137]=1,qr[137]=1,Kr[137]=0,Xr[137]=1,Yr[137]=0,Zr[137]=-1,Jr[137]=0,es[137]=0,as[137]=0,cs[137]=-1,ls[137]=0,Nr[137]=1,Vr[137]=0,Ur[137]=0,Gr[137]=1,Qr[137]=0,Wr[137]=1,jr[139]=0,$r[139]=1,qr[139]=1,Kr[139]=0,Xr[139]=-1,Yr[139]=0,Zr[139]=1,Jr[139]=0,es[139]=0,as[139]=0,cs[139]=1,ls[139]=0,Nr[139]=-1,Vr[139]=0,Ur[139]=0,Gr[139]=1,Qr[139]=0,Wr[139]=1,jr[98]=0,$r[98]=-1,qr[98]=0,Kr[98]=0,Xr[98]=-1,Yr[98]=1,ts[98]=1,ns[98]=0,is[98]=0,Zr[98]=1,Jr[98]=0,es[98]=1,rs[98]=0,ss[98]=1,os[98]=0,Nr[98]=-1,Vr[98]=0,Ur[98]=1,jr[99]=0,$r[99]=1,qr[99]=0,Kr[99]=0,Xr[99]=-1,Yr[99]=1,ts[99]=1,ns[99]=0,is[99]=0,Zr[99]=-1,Jr[99]=0,es[99]=1,rs[99]=0,ss[99]=-1,os[99]=0,Nr[99]=1,Vr[99]=0,Ur[99]=1,Kr[38]=0,Xr[38]=-1,Yr[38]=1,ts[38]=1,ns[38]=0,is[38]=0,as[38]=0,cs[38]=1,ls[38]=1,rs[38]=0,ss[38]=1,os[38]=0,Nr[38]=-1,Vr[38]=0,Ur[38]=1,Gr[38]=-1,Qr[38]=0,Wr[38]=0,Kr[39]=0,Xr[39]=1,Yr[39]=1,ts[39]=-1,ns[39]=0,is[39]=0,as[39]=0,cs[39]=-1,ls[39]=1,rs[39]=0,ss[39]=1,os[39]=0,Nr[39]=-1,Vr[39]=0,Ur[39]=1,Gr[39]=1,Qr[39]=0,Wr[39]=0;var WN=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},jN=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},$N=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},qN=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},KN=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},XN=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},YN=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},ZN=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},ii=[],Yn=[],Ei=[],wi=[],ji=[],Wi=[],us=[],As=[];wi[1]=ji[1]=18,wi[169]=ji[169]=18,Ei[4]=Yn[4]=12,Ei[166]=Yn[166]=12,ii[16]=As[16]=4,ii[154]=As[154]=4,Wi[64]=us[64]=22,Wi[106]=us[106]=22,Ei[2]=Wi[2]=17,wi[2]=ji[2]=18,Ei[168]=Wi[168]=17,wi[168]=ji[168]=18,ii[8]=wi[8]=9,Yn[8]=Ei[8]=12,ii[162]=wi[162]=9,Yn[162]=Ei[162]=12,ii[32]=As[32]=4,Yn[32]=us[32]=1,ii[138]=As[138]=4,Yn[138]=us[138]=1,ji[128]=As[128]=21,Wi[128]=us[128]=22,ji[42]=As[42]=21,Wi[42]=us[42]=22,Yn[5]=ji[5]=14,Yn[165]=ji[165]=14,Ei[20]=As[20]=6,Ei[150]=As[150]=6,ii[80]=Wi[80]=11,ii[90]=Wi[90]=11,wi[65]=us[65]=3,wi[105]=us[105]=3,ii[160]=Wi[160]=11,Yn[160]=ji[160]=14,ii[10]=Wi[10]=11,Yn[10]=ji[10]=14,Ei[130]=As[130]=6,wi[130]=us[130]=3,Ei[40]=As[40]=6,wi[40]=us[40]=3,Yn[101]=us[101]=1,Yn[69]=us[69]=1,ji[149]=As[149]=21,ji[21]=As[21]=21,Ei[86]=Wi[86]=17,Ei[84]=Wi[84]=17,ii[89]=wi[89]=9,ii[81]=wi[81]=9,ii[96]=us[96]=0,Yn[96]=Wi[96]=15,ii[74]=us[74]=0,Yn[74]=Wi[74]=15,ii[24]=Ei[24]=8,wi[24]=As[24]=7,ii[146]=Ei[146]=8,wi[146]=As[146]=7,Yn[6]=Wi[6]=15,Ei[6]=ji[6]=16,Yn[164]=Wi[164]=15,Ei[164]=ji[164]=16,wi[129]=As[129]=7,ji[129]=us[129]=20,wi[41]=As[41]=7,ji[41]=us[41]=20,Ei[66]=us[66]=2,wi[66]=Wi[66]=19,Ei[104]=us[104]=2,wi[104]=Wi[104]=19,ii[144]=ji[144]=10,Wi[144]=As[144]=23,ii[26]=ji[26]=10,Wi[26]=As[26]=23,Yn[36]=As[36]=5,Ei[36]=us[36]=2,Yn[134]=As[134]=5,Ei[134]=us[134]=2,ii[9]=ji[9]=10,Yn[9]=wi[9]=13,ii[161]=ji[161]=10,Yn[161]=wi[161]=13,Yn[37]=As[37]=5,ji[37]=us[37]=20,Yn[133]=As[133]=5,ji[133]=us[133]=20,Ei[148]=ji[148]=16,Wi[148]=As[148]=23,Ei[22]=ji[22]=16,Wi[22]=As[22]=23,ii[82]=Ei[82]=8,wi[82]=Wi[82]=19,ii[88]=Ei[88]=8,wi[88]=Wi[88]=19,ii[73]=us[73]=0,Yn[73]=wi[73]=13,ii[97]=us[97]=0,Yn[97]=wi[97]=13,ii[145]=wi[145]=9,ji[145]=As[145]=21,ii[25]=wi[25]=9,ji[25]=As[25]=21,Yn[70]=us[70]=1,Ei[70]=Wi[70]=17,Yn[100]=us[100]=1,Ei[100]=Wi[100]=17,ii[34]=wi[34]=9,Yn[34]=Ei[34]=12,ji[34]=As[34]=21,Wi[34]=us[34]=22,ii[136]=As[136]=4,Yn[136]=us[136]=1,Ei[136]=Wi[136]=17,wi[136]=ji[136]=18,ii[35]=As[35]=4,Yn[35]=Ei[35]=12,wi[35]=ji[35]=18,Wi[35]=us[35]=22,ii[153]=As[153]=4,wi[153]=ji[153]=18,Yn[102]=Ei[102]=12,Wi[102]=us[102]=22,ii[155]=wi[155]=9,ji[155]=As[155]=23,Yn[103]=us[103]=1,Ei[103]=Wi[103]=17,ii[152]=As[152]=4,Ei[152]=Wi[152]=17,wi[152]=ji[152]=18,ii[156]=Ei[156]=8,wi[156]=ji[156]=18,Wi[156]=As[156]=23,ii[137]=As[137]=4,Yn[137]=us[137]=1,wi[137]=ji[137]=18,ii[139]=As[139]=4,Yn[139]=wi[139]=13,ji[139]=us[139]=20,ii[98]=wi[98]=9,Yn[98]=Ei[98]=12,Wi[98]=us[98]=22,ii[99]=us[99]=0,Yn[99]=Ei[99]=12,wi[99]=Wi[99]=19,Yn[38]=Ei[38]=12,ji[38]=As[38]=21,Wi[38]=us[38]=22,Yn[39]=As[39]=5,Ei[39]=ji[39]=16,Wi[39]=us[39]=22;var Pn=[];function tV(n,e,t){return function NDt(n){return(n>0)-(n<0)||+n}((e[0]-n[0])*(t[1]-e[1])-(t[0]-e[0])*(e[1]-n[1]))}function Rfe(n,e){return e.geometry.coordinates[0].every(function(t){return jhe(lp(t),n)})}Pn[1]=Pn[169]=WN,Pn[4]=Pn[166]=jN,Pn[16]=Pn[154]=$N,Pn[64]=Pn[106]=qN,Pn[168]=Pn[2]=KN,Pn[162]=Pn[8]=XN,Pn[138]=Pn[32]=YN,Pn[42]=Pn[128]=ZN,Pn[5]=Pn[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},Pn[20]=Pn[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},Pn[80]=Pn[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},Pn[65]=Pn[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Pn[160]=Pn[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},Pn[130]=Pn[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},Pn[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Pn[101]=Pn[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},Pn[149]=Pn[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},Pn[86]=Pn[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},Pn[89]=Pn[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},Pn[96]=Pn[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[24]=Pn[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},Pn[6]=Pn[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},Pn[129]=Pn[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},Pn[66]=Pn[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[144]=Pn[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Pn[36]=Pn[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},Pn[9]=Pn[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},Pn[37]=Pn[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Pn[148]=Pn[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Pn[82]=Pn[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},Pn[73]=Pn[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Pn[145]=Pn[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Pn[70]=Pn[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[34]=function(n){return[ZN(n),XN(n)]},Pn[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Pn[136]=function(n){return[YN(n),KN(n)]},Pn[153]=function(n){return[$N(n),WN(n)]},Pn[102]=function(n){return[jN(n),qN(n)]},Pn[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Pn[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[152]=function(n){return[$N(n),KN(n)]},Pn[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Pn[137]=function(n){return[YN(n),WN(n)]},Pn[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Pn[98]=function(n){return[XN(n),qN(n)]},Pn[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[38]=function(n){return[jN(n),ZN(n)]},Pn[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};var GDt=function(){function n(e){this.id=n.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(e){return e.join(",")},n.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},n.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},n.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,i){var r=t.to,s=i.to;if(r.coordinates[0]-e.coordinates[0]>=0&&s.coordinates[0]-e.coordinates[0]<0)return 1;if(r.coordinates[0]-e.coordinates[0]<0&&s.coordinates[0]-e.coordinates[0]>=0)return-1;if(r.coordinates[0]-e.coordinates[0]==0&&s.coordinates[0]-e.coordinates[0]==0)return r.coordinates[1]-e.coordinates[1]>=0||s.coordinates[1]-e.coordinates[1]>=0?r.coordinates[1]-s.coordinates[1]:s.coordinates[1]-r.coordinates[1];var o=tV(e.coordinates,r.coordinates,s.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-e.coordinates[0],2)+Math.pow(r.coordinates[1]-e.coordinates[1],2)-(Math.pow(s.coordinates[0]-e.coordinates[0],2)+Math.pow(s.coordinates[1]-e.coordinates[1],2))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},n.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},n}();const Ffe=GDt;var QDt=function(){function n(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return function LN(n,e,t){if(void 0===t&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return Gf({type:"LineString",coordinates:n},e,t)}([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(e){return tV(e.from.coordinates,e.to.coordinates,this.to.coordinates)},n}();const WDt=QDt;var jDt=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},n.prototype.get=function(e){return this.edges[e]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(e){this.edges.forEach(e)},n.prototype.map=function(e){return this.edges.map(e)},n.prototype.some=function(e){return this.edges.some(e)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var e=this,t=this.edges.reduce(function(o,a,c){return a.from.coordinates[1]>e.edges[o].from.coordinates[1]&&(o=c),o},0),i=(0===t?this.length:t)-1,r=(t+1)%this.length,s=tV(this.edges[i].from.coordinates,this.edges[t].from.coordinates,this.edges[r].from.coordinates);return 0===s?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:s>0},n.prototype.toMultiPoint=function(){return function zhe(n,e,t){return void 0===t&&(t={}),Gf({type:"MultiPoint",coordinates:n},e,t)}(this.edges.map(function(e){return e.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(t){return t.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=up([e])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function JTt(n){return function ZTt(n,e){void 0===e&&(e={});var t=Number(n[0]),i=Number(n[1]),r=Number(n[2]),s=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[t,i];return up([[o,[r,i],[r,s],[t,s],o]],e.properties,{bbox:n,id:e.id})}(mTt(n))}(this.toPolygon())},n.findEdgeRingContaining=function(e,t){var r,s,i=e.getEnvelope();return t.forEach(function(o){var a=o.getEnvelope();if(s&&(r=s.getEnvelope()),!function VDt(n,e){var t=n.geometry.coordinates[0].map(function(o){return o[0]}),i=n.geometry.coordinates[0].map(function(o){return o[1]}),r=e.geometry.coordinates[0].map(function(o){return o[0]}),s=e.geometry.coordinates[0].map(function(o){return o[1]});return Math.max.apply(null,t)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,s)&&Math.min.apply(null,t)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,s)}(a,i)&&Rfe(a,i)){for(var c=e.map(function(_){return _.from.coordinates}),l=void 0,u=function(_){o.some(function(y){return function UDt(n,e){return n[0]===e[0]&&n[1]===e[1]}(_,y.from.coordinates)})||(l=_)},f=0,p=c;f<p.length;f++)u(p[f]);l&&o.inside(lp(l))&&(!s||Rfe(r,a))&&(s=o)}}),s},n.prototype.inside=function(e){return jhe(e,this.toPolygon())},n}();const $Dt=jDt;function Gfe(n){for(var e=n,t=[];e.parent;)t.unshift(e),e=e.parent;return t}!function(){function n(){this.edges=[],this.nodes={}}n.fromGeoJson=function(e){!function qDt(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var t=new n;return oy(e,function(i){(function vTt(n,e,t){if(!n)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)})(i,"LineString","Graph::fromGeoJson"),function fTt(n,e,t,i){var r=t;F6(n,function(s,o,a,c,l){r=0===o&&void 0===t?s:e(r,s,o,a,c,l)},i)}(i,function(r,s){if(r){var o=t.getNode(r),a=t.getNode(s);t.addEdge(o,a)}return s})}),t},n.prototype.getNode=function(e){var t=Ffe.buildId(e),i=this.nodes[t];return i||(i=this.nodes[t]=new Ffe(e)),i},n.prototype.addEdge=function(e,t){var i=new WDt(e,t),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},n.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},n.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var i=e.getOuterEdges().map(function(r){return r.to});this.removeNode(e),i.forEach(function(r){return t._removeIfDangle(r)})}},n.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},n.prototype._computeNextCWEdges=function(e){var t=this;typeof e>"u"?Object.keys(this.nodes).forEach(function(i){return t._computeNextCWEdges(t.nodes[i])}):e.getOuterEdges().forEach(function(i,r){e.getOuterEdge((0===r?e.getOuterEdges().length:r)-1).symetric.next=i})},n.prototype._computeNextCCWEdges=function(e,t){for(var r,s,i=e.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],c=a.symetric,l=void 0,u=void 0;a.label===t&&(l=a),c.label===t&&(u=c),l&&u&&(u&&(s=u),l&&(s&&(s.next=l,s=void 0),r||(r=l)))}s&&(s.next=r)},n.prototype._findLabeledEdgeRings=function(){var e=[],t=0;return this.edges.forEach(function(i){if(!(i.label>=0)){e.push(i);var r=i;do{r.label=t,r=r.next}while(!i.isEqual(r));t++}}),e},n.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){e._findIntersectionNodes(i).forEach(function(r){e._computeNextCCWEdges(r,i.label)})});var t=[];return this.edges.forEach(function(i){i.ring||t.push(e._findEdgeRing(i))}),t},n.prototype._findIntersectionNodes=function(e){var t=[],i=e,r=function(){var s=0;i.from.getOuterEdges().forEach(function(o){o.label===e.label&&++s}),s>1&&t.push(i.from),i=i.next};do{r()}while(!e.isEqual(i));return t},n.prototype._findEdgeRing=function(e){var t=e,i=new $Dt;do{i.push(t),t.ring=i,t=t.next}while(!e.isEqual(t));return i},n.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach(function(i){return t.removeEdge(i)}),e.innerEdges.forEach(function(i){return t.removeEdge(i)}),delete this.nodes[e.id]},n.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()}}(),Se(5013),Se(7470),Se(9475);var dT={search:function(n,e,t,i){n.cleanDirty();var r=(i=i||{}).heuristic||dT.heuristics.manhattan,s=i.closest||!1,o=function uIt(){return new Qfe(function(n){return n.f})}(),a=e;for(e.h=r(e,t),o.push(e);o.size()>0;){var c=o.pop();if(c===t)return Gfe(c);c.closed=!0;for(var l=n.neighbors(c),u=0,f=l.length;u<f;++u){var p=l[u];if(!p.closed&&!p.isWall()){var g=c.g+p.getCost(c),_=p.visited;(!_||g<p.g)&&(p.visited=!0,p.parent=c,p.h=p.h||r(p,t),p.g=g,p.f=p.g+p.h,n.markDirty(p),s&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),_?o.rescoreElement(p):o.push(p))}}}return s?Gfe(a):[]},heuristics:{manhattan:function(n,e){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)},diagonal:function(n,e){var i=Math.sqrt(2),r=Math.abs(e.x-n.x),s=Math.abs(e.y-n.y);return 1*(r+s)+(i-2)*Math.min(r,s)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function xm(n,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var t=0;t<n.length;t++){this.grid[t]=[];for(var i=0,r=n[t];i<r.length;i++){var s=new pT(t,i,r[i]);this.grid[t][i]=s,this.nodes.push(s)}}this.init()}function pT(n,e,t){this.x=n,this.y=e,this.weight=t}function Qfe(n){this.content=[],this.scoreFunction=n}function iV(){this._=null}function gT(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function hy(n,e){var t=e,i=e.R,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.R=i.L,t.R&&(t.R.U=t),i.L=t}function fy(n,e){var t=e,i=e.L,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.L=i.R,t.L&&(t.L.U=t),i.R=t}function Wfe(n){for(;n.L;)n=n.L;return n}xm.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)dT.cleanNode(this.nodes[n])},xm.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)dT.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]},xm.prototype.markDirty=function(n){this.dirtyNodes.push(n)},xm.prototype.neighbors=function(n){var e=[],t=n.x,i=n.y,r=this.grid;return r[t-1]&&r[t-1][i]&&e.push(r[t-1][i]),r[t+1]&&r[t+1][i]&&e.push(r[t+1][i]),r[t]&&r[t][i-1]&&e.push(r[t][i-1]),r[t]&&r[t][i+1]&&e.push(r[t][i+1]),this.diagonal&&(r[t-1]&&r[t-1][i-1]&&e.push(r[t-1][i-1]),r[t+1]&&r[t+1][i-1]&&e.push(r[t+1][i-1]),r[t-1]&&r[t-1][i+1]&&e.push(r[t-1][i+1]),r[t+1]&&r[t+1][i+1]&&e.push(r[t+1][i+1])),e},xm.prototype.toString=function(){for(var t,i,r,s,n=[],e=this.grid,o=0,a=e.length;o<a;o++){for(t=[],r=0,s=(i=e[o]).length;r<s;r++)t.push(i[r].weight);n.push(t.join(" "))}return n.join("\n")},pT.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},pT.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight},pT.prototype.isWall=function(){return 0===this.weight},Qfe.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),n},remove:function(n){var e=this.content.indexOf(n),t=this.content.pop();e!==this.content.length-1&&(this.content[e]=t,this.scoreFunction(t)<this.scoreFunction(n)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var e=this.content[n];n>0;){var t=(n+1>>1)-1,i=this.content[t];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[t]=e,this.content[n]=i,n=t}},bubbleUp:function(n){for(var e=this.content.length,t=this.content[n],i=this.scoreFunction(t);;){var a,r=n+1<<1,s=r-1,o=null;if(s<e&&(a=this.scoreFunction(this.content[s]))<i&&(o=s),r<e&&this.scoreFunction(this.content[r])<(null===o?i:a)&&(o=r),null===o)break;this.content[n]=this.content[o],this.content[o]=t,n=o}}},iV.prototype={constructor:iV,insert:function(n,e){var t,i,r;if(n){if(e.P=n,e.N=n.N,n.N&&(n.N.P=e),n.N=e,n.R){for(n=n.R;n.L;)n=n.L;n.L=e}else n.R=e;t=n}else this._?(n=Wfe(this._),e.P=null,e.N=n,n.P=n.L=e,t=n):(e.P=e.N=null,this._=e,t=null);for(e.L=e.R=null,e.U=t,e.C=!0,n=e;t&&t.C;)t===(i=t.U).L?(r=i.R)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.R&&(hy(this,t),t=(n=t).U),t.C=!1,i.C=!0,fy(this,i)):(r=i.L)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.L&&(fy(this,t),t=(n=t).U),t.C=!1,i.C=!0,hy(this,i)),t=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,s,o,e=n.U,i=n.L,r=n.R;if(s=i?r?Wfe(r):i:r,e?e.L===n?e.L=s:e.R=s:this._=s,i&&r?(o=s.C,s.C=n.C,s.L=i,i.U=s,s!==r?(e=s.U,s.U=n.U,e.L=n=s.R,s.R=r,r.U=s):(s.U=e,e=s,n=s.R)):(o=n.C,n=s),n&&(n.U=e),!o){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===e.L){if((t=e.R).C&&(t.C=!1,e.C=!0,hy(this,e),t=e.R),t.L&&t.L.C||t.R&&t.R.C){(!t.R||!t.R.C)&&(t.L.C=!1,t.C=!0,fy(this,t),t=e.R),t.C=e.C,e.C=t.R.C=!1,hy(this,e),n=this._;break}}else if((t=e.L).C&&(t.C=!1,e.C=!0,fy(this,e),t=e.L),t.L&&t.L.C||t.R&&t.R.C){(!t.L||!t.L.C)&&(t.R.C=!1,t.C=!0,hy(this,t),t=e.L),t.C=e.C,e.C=t.L.C=!1,fy(this,e),n=this._;break}t.C=!0,n=e,e=e.U}while(!n.C);n&&(n.C=!1)}}};const jfe=iV;function dy(n,e,t,i){var r=[null,null],s=fl.push(r)-1;return r.left=n,r.right=e,t&&mT(r,n,e,t),i&&mT(r,e,n,i),m4[n.index].halfedges.push(s),m4[e.index].halfedges.push(s),r}function py(n,e,t){var i=[e,t];return i.left=n,i}function mT(n,e,t,i){n[0]||n[1]?n.left===t?n[1]=i:n[0]=i:(n[0]=i,n.left=e,n.right=t)}function fIt(n,e,t,i,r){var y,s=n[0],o=n[1],a=s[0],c=s[1],f=0,p=1,g=o[0]-a,_=o[1]-c;if(y=e-a,g||!(y>0)){if(y/=g,g<0){if(y<f)return;y<p&&(p=y)}else if(g>0){if(y>p)return;y>f&&(f=y)}if(y=i-a,g||!(y<0)){if(y/=g,g<0){if(y>p)return;y>f&&(f=y)}else if(g>0){if(y<f)return;y<p&&(p=y)}if(y=t-c,_||!(y>0)){if(y/=_,_<0){if(y<f)return;y<p&&(p=y)}else if(_>0){if(y>p)return;y>f&&(f=y)}if(y=r-c,_||!(y<0)){if(y/=_,_<0){if(y>p)return;y>f&&(f=y)}else if(_>0){if(y<f)return;y<p&&(p=y)}return!(f>0)&&!(p<1)||(f>0&&(n[0]=[a+f*g,c+f*_]),p<1&&(n[1]=[a+p*g,c+p*_])),!0}}}}}function dIt(n,e,t,i,r){var s=n[1];if(s)return!0;var y,w,o=n[0],a=n.left,c=n.right,l=a[0],u=a[1],f=c[0],p=c[1],g=(l+f)/2;if(p===u){if(g<e||g>=i)return;if(l>f){if(o){if(o[1]>=r)return}else o=[g,t];s=[g,r]}else{if(o){if(o[1]<t)return}else o=[g,r];s=[g,t]}}else if(w=(u+p)/2-(y=(l-f)/(p-u))*g,y<-1||y>1)if(l>f){if(o){if(o[1]>=r)return}else o=[(t-w)/y,t];s=[(r-w)/y,r]}else{if(o){if(o[1]<t)return}else o=[(r-w)/y,r];s=[(t-w)/y,t]}else if(u<p){if(o){if(o[0]>=i)return}else o=[e,y*e+w];s=[i,y*i+w]}else{if(o){if(o[0]<e)return}else o=[i,y*i+w];s=[e,y*e+w]}return n[0]=o,n[1]=s,!0}function mIt(n,e){var t=n.site,i=e.left,r=e.right;return t===r&&(r=i,i=t),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(t===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function $fe(n,e){return e[+(e.left!==n.site)]}function AIt(n,e){return e[+(e.left===n.site)]}var rV,qfe=[];function yIt(){gT(this),this.x=this.y=this.arc=this.site=this.cy=null}function Mm(n){var e=n.P,t=n.N;if(e&&t){var i=e.site,r=n.site,s=t.site;if(i!==s){var o=r[0],a=r[1],c=i[0]-o,l=i[1]-a,u=s[0]-o,f=s[1]-a,p=2*(c*f-l*u);if(!(p>=-MIt)){var g=c*c+l*l,_=u*u+f*f,y=(f*g-l*_)/p,w=(c*_-u*g)/p,C=qfe.pop()||new yIt;C.arc=n,C.site=r,C.x=y+o,C.y=(C.cy=w+a)+Math.sqrt(y*y+w*w),n.circle=C;for(var x=null,M=gy._;M;)if(C.y<M.y||C.y===M.y&&C.x<=M.x){if(!M.L){x=M.P;break}M=M.L}else{if(!M.R){x=M;break}M=M.R}gy.insert(x,C),x||(rV=C)}}}}function Sm(n){var e=n.circle;e&&(e.P||(rV=e.N),gy.remove(e),qfe.push(e),gT(e),n.circle=null)}var Kfe=[];function wIt(){gT(this),this.edge=this.site=this.circle=null}function Xfe(n){var e=Kfe.pop()||new wIt;return e.site=n,e}function sV(n){Sm(n),Em.remove(n),Kfe.push(n),gT(n)}function CIt(n){var e=n.circle,t=e.x,i=e.cy,r=[t,i],s=n.P,o=n.N,a=[n];sV(n);for(var c=s;c.circle&&Math.abs(t-c.circle.x)<e1&&Math.abs(i-c.circle.cy)<e1;)s=c.P,a.unshift(c),sV(c),c=s;a.unshift(c),Sm(c);for(var l=o;l.circle&&Math.abs(t-l.circle.x)<e1&&Math.abs(i-l.circle.cy)<e1;)o=l.N,a.push(l),sV(l),l=o;a.push(l),Sm(l);var f,u=a.length;for(f=1;f<u;++f)mT((l=a[f]).edge,(c=a[f-1]).site,l.site,r);(l=a[u-1]).edge=dy((c=a[0]).site,l.site,null,r),Mm(c),Mm(l)}function bIt(n){for(var i,r,s,o,e=n[0],t=n[1],a=Em._;a;)if((s=Yfe(a,t)-e)>e1)a=a.L;else{if(!((o=e-xIt(a,t))>e1)){s>-e1?(i=a.P,r=a):o>-e1?(i=a,r=a.N):i=r=a;break}if(!a.R){i=a;break}a=a.R}!function gIt(n){m4[n.index]={site:n,halfedges:[]}}(n);var c=Xfe(n);if(Em.insert(i,c),i||r){if(i===r)return Sm(i),r=Xfe(i.site),Em.insert(c,r),c.edge=r.edge=dy(i.site,c.site),Mm(i),void Mm(r);if(!r)return void(c.edge=dy(i.site,c.site));Sm(i),Sm(r);var l=i.site,u=l[0],f=l[1],p=n[0]-u,g=n[1]-f,_=r.site,y=_[0]-u,w=_[1]-f,C=2*(p*w-g*y),x=p*p+g*g,M=y*y+w*w,T=[(w*x-g*M)/C+u,(p*M-y*x)/C+f];mT(r.edge,l,_,T),c.edge=dy(l,n,null,T),r.edge=dy(n,_,null,T),Mm(i),Mm(r)}}function Yfe(n,e){var t=n.site,i=t[0],r=t[1],s=r-e;if(!s)return i;var o=n.P;if(!o)return-1/0;var a=(t=o.site)[0],c=t[1],l=c-e;if(!l)return a;var u=a-i,f=1/s-1/l,p=u/l;return f?(-p+Math.sqrt(p*p-2*f*(u*u/(-2*l)-c+l/2+r-s/2)))/f+i:(i+a)/2}function xIt(n,e){var t=n.N;if(t)return Yfe(t,e);var i=n.site;return i[1]===e?i[0]:1/0}var Em,m4,gy,fl,e1=1e-6,MIt=1e-12;function SIt(n,e,t){return(n[0]-t[0])*(e[1]-n[1])-(n[0]-e[0])*(t[1]-n[1])}function EIt(n,e){return e[1]-n[1]||e[0]-n[0]}function Zfe(n,e){var i,r,s,t=n.sort(EIt).pop();for(fl=[],m4=new Array(n.length),Em=new jfe,gy=new jfe;;)if(s=rV,t&&(!s||t[1]<s.y||t[1]===s.y&&t[0]<s.x))(t[0]!==i||t[1]!==r)&&(bIt(t),i=t[0],r=t[1]),t=n.pop();else{if(!s)break;CIt(s.arc)}if(function vIt(){for(var t,i,r,s,n=0,e=m4.length;n<e;++n)if((t=m4[n])&&(s=(i=t.halfedges).length)){var o=new Array(s),a=new Array(s);for(r=0;r<s;++r)o[r]=r,a[r]=mIt(t,fl[i[r]]);for(o.sort(function(c,l){return a[l]-a[c]}),r=0;r<s;++r)a[r]=i[o[r]];for(r=0;r<s;++r)i[r]=a[r]}}(),e){var o=+e[0][0],a=+e[0][1],c=+e[1][0],l=+e[1][1];(function pIt(n,e,t,i){for(var s,r=fl.length;r--;)dIt(s=fl[r],n,e,t,i)&&fIt(s,n,e,t,i)&&(Math.abs(s[0][0]-s[1][0])>e1||Math.abs(s[0][1]-s[1][1])>e1)||delete fl[r]})(o,a,c,l),function _It(n,e,t,i){var s,o,a,c,l,u,f,p,g,_,y,w,r=m4.length,C=!0;for(s=0;s<r;++s)if(o=m4[s]){for(a=o.site,c=(l=o.halfedges).length;c--;)fl[l[c]]||l.splice(c,1);for(c=0,u=l.length;c<u;)y=(_=AIt(o,fl[l[c]]))[0],w=_[1],p=(f=$fe(o,fl[l[++c%u]]))[0],g=f[1],(Math.abs(y-p)>e1||Math.abs(w-g)>e1)&&(l.splice(c,0,fl.push(py(a,_,Math.abs(y-n)<e1&&i-w>e1?[n,Math.abs(p-n)<e1?g:i]:Math.abs(w-i)<e1&&t-y>e1?[Math.abs(g-i)<e1?p:t,i]:Math.abs(y-t)<e1&&w-e>e1?[t,Math.abs(p-t)<e1?g:e]:Math.abs(w-e)<e1&&y-n>e1?[Math.abs(g-e)<e1?p:n,e]:null))-1),++u);u&&(C=!1)}if(C){var x,M,T,I=1/0;for(s=0,C=null;s<r;++s)(o=m4[s])&&(T=(x=(a=o.site)[0]-n)*x+(M=a[1]-e)*M)<I&&(I=T,C=o);if(C){var F=[n,e],P=[n,i],R=[t,i],k=[t,e];C.halfedges.push(fl.push(py(a=C.site,F,P))-1,fl.push(py(a,P,R))-1,fl.push(py(a,R,k))-1,fl.push(py(a,k,F))-1)}}for(s=0;s<r;++s)(o=m4[s])&&(o.halfedges.length||delete m4[s])}(o,a,c,l)}this.edges=fl,this.cells=m4,Em=gy=fl=m4=null}Zfe.prototype={constructor:Zfe,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(i){return $fe(e,n[i])});return t.data=e.site.data,t})},triangles:function(){var n=[],e=this.edges;return this.cells.forEach(function(t,i){if(a=(s=t.halfedges).length)for(var s,a,c,r=t.site,o=-1,l=e[s[a-1]],u=l.left===r?l.right:l.left;++o<a;)c=u,u=(l=e[s[o]]).left===r?l.right:l.left,c&&u&&i<c.index&&i<u.index&&SIt(r,c,u)<0&&n.push([r.data,c.data,u.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,e,t){for(var r,a,i=this,s=i._found||0,o=i.cells.length;!(a=i.cells[s]);)if(++s>=o)return null;var c=n-a.site[0],l=e-a.site[1],u=c*c+l*l;do{a=i.cells[r=s],s=null,a.halfedges.forEach(function(f){var p=i.edges[f],g=p.left;if(g!==a.site&&g||(g=p.right)){var _=n-g[0],y=e-g[1],w=_*_+y*y;w<u&&(u=w,s=g.index)}})}while(null!==s);return i._found=r,null==t||u<=t*t?a.site:null}};var lde=Se(9855);function k6(){return new AT}function AT(){this.reset()}Se(770),AT.prototype={constructor:AT,reset:function(){this.s=this.t=0},add:function(n){ude(vT,n,this.t),ude(this,vT.s,this.s),this.s?this.t+=vT.t:this.s=vT.t},valueOf:function(){return this.s}};var vT=new AT;function ude(n,e,t){var i=n.s=e+t,r=i-e;n.t=e-(i-r)+(t-r)}var A1=Math.PI,D3=A1/2,Tm=2*A1,Fa=A1/180,my=(Math,Math.atan),Lm=Math.atan2,oo=Math.cos,vs=(Math,Math,Math,Math,Math,Math.sin),Qf=(Math,Math.sqrt);Math;function Dm(n){return n>1?D3:n<-1?-D3:Math.asin(n)}function _V(n,e){return[n>A1?n-Tm:n<-A1?n+Tm:n,e]}function Hde(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}k6(),k6(),k6(),_V.invert=_V,function sBt(n){1===n.length&&(n=function oBt(n){return function(e,t){return Hde(n(e),t)}}(n))}(Hde),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);k6();function zV(){}function l6e(n){return function(e,t){var i=oo(e),r=oo(t),s=n(i*r);return[s*r*vs(e),s*vs(t)]}}function Sy(n){return function(e,t){var i=Qf(e*e+t*t),r=n(i),s=vs(r),o=oo(r);return[Lm(e*s,i*o),Dm(i&&t*s/i)]}}k6(),k6(),k6(),k6(),function o6e(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}(4.5),zV.prototype={constructor:zV,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},oo(30*Fa),function a6e(n){return function(e){var t=new zV;for(var i in n)t[i]=n[i];return t.stream=e,t}}({point:function(n,e){this.stream.point(n*Fa,e*Fa)}});var u6e=l6e(function(n){return Qf(2/(1+n))});u6e.invert=Sy(function(n){return 2*Dm(n/2)});var h6e=l6e(function(n){return(n=function VIt(n){return n>1?0:n<-1?A1:Math.acos(n)}(n))&&n/vs(n)});function NV(n,e){return[n,e]}h6e.invert=Sy(function(n){return n}),NV.invert=NV,Sy(my),Sy(Dm),Sy(function(n){return 2*my(n)});let tRt=(()=>{class n{getCenterOfMass(t){const i=new khe,r=rLt(up([t]));return i.readFeatures(r)[0].getGeometry()}coordsDissolveToPolygon(t){const i=new khe;var s=function KBt(n,e){if(!function hTt(n){return!!n&&n.constructor===Object}(e=e||{}))throw new Error("options is invalid");var t=e.propertyName;!function _Tt(n,e,t){if(!n)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!n||"FeatureCollection"!==n.type)throw new Error("Invalid input to "+t+", FeatureCollection required");for(var i=0,r=n.features;i<r.length;i++){var s=r[i];if(!s||"Feature"!==s.type||!s.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!s.geometry||s.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+s.geometry.type)}}(n,"Polygon","dissolve");var i=[];if(!e.propertyName)return ffe(DN(lde.union.apply(null,n.features.map(function(c){return c.geometry.coordinates}))));var r={};!function Nhe(n,e){if("Feature"===n.type)e(n,0);else if("FeatureCollection"===n.type)for(var t=0;t<n.features.length&&!1!==e(n.features[t],t);t++);}(n,function(c){Object.prototype.hasOwnProperty.call(r,c.properties[t])||(r[c.properties[t]]=[]),r[c.properties[t]].push(c)});for(var s=Object.keys(r),o=0;o<s.length;o++){var a=DN(lde.union.apply(null,r[s[o]].map(function(c){return c.geometry.coordinates})));a.properties[t]=s[o],i.push(a)}return ffe(Cm(i))}(Cm([up([t])]));return i.readFeatures(s)[0].getGeometry()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iRt=class nRt extends Yu{constructor(e){super(),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){pue(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(nE(this.element),pa(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Rs(e,"postrender",this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set("element",e)}setMap(e){this.set("map",e)}setOffset(e){this.set("offset",e)}setPosition(e){this.set("position",e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get("position"))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),s=this.getRect(r,[Fyt(r),kyt(r)]),o=void 0===(e=e||{}).margin?20:e.margin;if(!Ff(i,s)){const a=s[0]-i[0],c=i[2]-s[2],l=s[1]-i[1],u=i[3]-s[3],f=[0,0];if(a<0?f[0]=a-o:c<0&&(f[0]=Math.abs(c)+o),l<0?f[1]=l-o:u<0&&(f[1]=Math.abs(u)+o),0!==f[0]||0!==f[1]){const p=t.getView().getCenterInternal(),g=t.getPixelFromCoordinateInternal(p);if(!g)return;const _=[g[0]+f[0],g[1]+f[1]],y=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(_),duration:y.duration,easing:y.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+t[0],s+t[1]]}setPositioning(e){this.set("positioning",e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);let c="0%",l="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?c="-100%":("bottom-center"==s||"center-center"==s||"top-center"==s)&&(c="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?l="-100%":("center-left"==s||"center-center"==s||"center-right"==s)&&(l="-50%");const u=`translate(${c}, ${l}) translate(${Math.round(e[0]+r[0])+"px"}, ${Math.round(e[1]+r[1])+"px"})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}},rRt=["popup"],sRt=["content"],oRt=["closer"];let aRt=(()=>{class n{constructor(t){this.houseService=t,this.features$=new no([]),this.enabled=!0}ngAfterViewInit(){this.overlay=new iRt({element:this.container.nativeElement,autoPan:{animation:{duration:250}}})}setPopup(t,i){i().subscribe(r=>{""===r||void 0===r||!1===this.enabled||(this.content.nativeElement.innerHTML=r,this.overlay.setPosition(t))})}close(){return this.overlay.setPosition(void 0),this.closer.nativeElement.blur(),!1}}return n.\u0275fac=function(t){return new(t||n)(U(Lo))},n.\u0275cmp=Bn({type:n,selectors:[["app-map-overlay"]],viewQuery:function(t,i){if(1&t&&(Xs(rRt,7),Xs(sRt,7),Xs(oRt,7)),2&t){let r;Di(r=Ii())&&(i.container=r.first),Di(r=Ii())&&(i.content=r.first),Di(r=Ii())&&(i.closer=r.first)}},decls:6,vars:0,consts:[["id","popup",1,"ol-popup"],["popup",""],["href","#","id","popup-closer",1,"ol-popup-closer",3,"click"],["closer",""],["id","popup-content"],["content",""]],template:function(t,i){1&t&&(H(0,"div",0,1)(2,"a",2,3),an("click",function(){return i.close()}),N(),$e(4,"div",4,5),N())},styles:['@charset "UTF-8";.ol-popup[_ngcontent-%COMP%]{position:absolute;background-color:var(--color-0);box-shadow:0 1px 4px #0003;padding:15px;border-radius:10px;border:1px solid var(--color-20);bottom:12px;left:-50px;min-width:280px}.ol-popup[_ngcontent-%COMP%]:after, .ol-popup[_ngcontent-%COMP%]:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup[_ngcontent-%COMP%]:after{border-top-color:var(--color-0);border-width:10px;left:48px;margin-left:-10px}.ol-popup[_ngcontent-%COMP%]:before{border-top-color:var(--color-20);border-width:11px;left:48px;margin-left:-11px}.ol-popup-closer[_ngcontent-%COMP%]{text-decoration:none;position:absolute;top:2px;right:8px;padding:0 4px}.ol-popup-closer[_ngcontent-%COMP%]:after{content:"\\2716"}']}),n})();const cRt=["mapEl"],lRt=["overlay"];let uRt=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f){this.zone=t,this.houseService=i,this.olBaseMapService=r,this.olMeasureService=s,this.olViewService=o,this.olLayerService=a,this.colorService=c,this.turfService=l,this.appService=u,this.httpClient=f,this.house=this.houseService.house$.value,this.subscriptions=[],this.origin=[1519995,7542140],this.rotation=0,this.roofCenter=new d4(this.origin),this.houseFeature=new J4({roofCenter:this.roofCenter,roofCenterShow:!1})}ngOnDestroy(){[this.olViewService].forEach(t=>t.onDestroy()),this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.appService.scroll$.next({...this.appService.scroll$.value,graphic:yo.map}),this.getHousePolygon(),this.layers=[...this.olBaseMapService.getBaseLayers(),...this.olLayerService.getLayers(this.houseFeature)],this.zone.runOutsideAngular(()=>this.initMap())}fromLocalToLonLat(t){var i=6378.137,r=Math.PI;const{lat:s,lng:o}=this.house.orientation,a=s+t[1]/i*(180/r)/1e3;return pO([o+t[0]/i*(180/r)/Math.cos(s*r/180)/1e3,a])}getHousePolygon(){this.house=this.houseService.house$.value;const{lat:t,lng:i}=this.house.orientation;this.origin=pO([i,t]),this.rotation=this.house.orientation.rotation;const o=this.house.partsFlatten.filter(c=>c instanceof ei&&c.type===kn.outer).filter(c=>c.floor===tt.all).flatMap(c=>c.sides[ot.out]).map(c=>((n,e,t)=>{const[i,r]=n,[s,o]=e;var a=Math.PI/180*t,c=Math.cos(a),l=Math.sin(a);return[c*(i-s)+l*(r-o)+s,c*(r-o)-l*(i-s)+o]})(c,this.house.centerHouse,180-this.rotation)).map(c=>this.fromLocalToLonLat(c));o.push(o[0]);const a=this.turfService.coordsDissolveToPolygon(o);this.houseFeature.setGeometry(a)}initMap(){this.olViewService.init(this.origin,15),this.map=new MEt({view:this.olViewService.view,layers:this.layers,target:this.mapEl.nativeElement,overlays:[this.overlay.overlay]}),this.addInteractions(),this.olMeasureService.init(this.map),this.olBaseMapService.map=this.map,window.map=this.map}zoom(t){return Math.log2(156543.03390625)-Math.log2(t)}addInteractions(){const i=(u,f)=>{var p=this.zoom(f);const g=new P2({image:new _6({radius:14,stroke:new Kc({width:1,color:this.colorService.rgba(H0.accent,.9)}),fill:new Vo({color:"rgba(100, 100, 100, 1)"})}),stroke:new Kc({color:"rgba(0, 0, 0, 0.5)",width:3}),zIndex:1/0,text:new Rf({offsetX:0,offsetY:0,text:"refresh",font:"normal 20px Material Icons",fill:new Vo({color:"white"}),rotation:-yi(this.rotation||0)})});return p<16?[new P2({})]:u&&u.get("rotate-arrow")?g:void 0},r=()=>io(oie(c.getAngle())-90,-30,this.roofCenter.getCoordinates()),s=()=>{const u=this.houseFeature.getGeometry().getCoordinates()[0];this.origin=u[0];const f=this.turfService.getCenterOfMass(u);this.roofCenter.setCoordinates(f.getCoordinates());const p=An(p1(u[2],u[1],1)+180,1);this.rotation=p},o=new K0e({style:(u,f)=>{var p=this.zoom(f);const g=!0===this.houseFeature.getProperties().roofCenterShow,_=[new P2({stroke:new Kc({color:this.colorService.rgba(H0.accent,.9),width:2}),fill:new Vo({color:g?this.colorService.rgba(H0.accent,.1):this.colorService.rgba(H0.primary,.7)}),zIndex:2})];if(p<16)return[..._,new P2({geometry:"roofCenter",image:new _6({radius:14,stroke:new Kc({width:1,color:this.colorService.rgba(H0.accent,.9)}),fill:new Vo({color:"rgba(100, 100, 100, 1)"})}),stroke:new Kc({color:"rgba(0, 0, 0, 0.5)",width:3}),zIndex:1/0,text:new Rf({offsetX:0,offsetY:0,text:"open_with",font:"normal 20px Material Icons",fill:new Vo({color:"white"})})})];if(g){let y=[-25,25];(this.rotation>90||this.rotation<-90)&&(y=[25,-25]),_.push(new P2({image:new _6({radius:30/f,stroke:new Kc({color:"rgba(10, 10,10, 0.3)",width:2})}),geometry:"roofCenter",text:new Rf({font:"14px sans-serif",overflow:!0,fill:new Vo({color:this.colorService.rgb(H0.primary)}),text:`${this.rotation}\xb0`})}))}return _}}),a=new EEt({features:o.getFeatures()}),c=new UEt({features:o.getFeatures(),style:i}),l=()=>{c.setAnchor(this.roofCenter.getCoordinates()),c.setAngle(0*Math.PI/180),c.arrowFeature_.getGeometry().setCoordinates(r())};this.map.addInteraction(o),this.subscriptions.push(Tc(a,"translateend").subscribe(u=>{l()}),Tc(a,"translating").subscribe(u=>{l()}),Tc(this.houseFeature,"change").subscribe(u=>{s();const f=c.getAnchor();if(!f)return;const[p,g]=function kwt(n,e){const t=G_(n,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=m6(i+180,360)-180),t}(f).map(_=>_.toFixed(8));console.log(`${this.rotation}\xb0,  ${g},${p}`)}),Tc(c,"rotatestart").subscribe(u=>{this.houseFeature.setProperties({roofCenterShow:!0})}),Tc(c,"rotateend").subscribe(u=>{this.houseFeature.setProperties({roofCenterShow:!1}),c.features_.pop(),c.features_.push(this.houseFeature),s(),l()}),Tc(o,"select").subscribe(u=>{u.selected[0]?(this.overlay.enabled=!1,this.overlay.close(),this.map.addInteraction(c),this.map.addInteraction(a),s(),l(),c.arrowFeature_.setStyle(i)):(this.overlay.enabled=!0,this.map.removeInteraction(c),this.map.removeInteraction(a))}),Tc(this.map,"singleclick").subscribe(u=>this.overlay.setPopup(u.coordinate,()=>this.identify(u.coordinate))))}identify(t){const r=this.olLayerService.layers$.value.find(o=>o.getProperties().key===I6.test).getSource().getUrl().trim("/")+"/identify";return this.httpClient.get(r,{params:{geometry:`${t[0]}, ${t[1]}`,geometryType:"esriGeometryPoint",sr:3857,layers:"all",tolerance:"2",mapExtent:`${t[0]}, ${t[1]},${t[0]}, ${t[1]}`,imageDisplay:"2,2,2",returnGeometry:!1,f:"pjson"}}).pipe(wa(o=>{if(o.error)throw console.error("ESRI error",o.error),new Error(o.error.message)}),qt(o=>o.results.map(a=>(console.log(a),`${a.layerName} - ${a.attributes.layerName}`)).join("<br/>")))}}return n.\u0275fac=function(t){return new(t||n)(U(Xi),U(Lo),U(dhe),U(X0e),U(Ahe),U(_he),U(oK),U(tRt),U(Mo),U($h))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-map"]],viewQuery:function(t,i){if(1&t&&(Xs(cRt,5),Xs(lRt,5)),2&t){let r;Di(r=Ii())&&(i.mapEl=r.first),Di(r=Ii())&&(i.overlay=r.first)}},decls:5,vars:2,consts:[[1,"map"],["mapEl",""],["overlay",""],[1,"controls","controls-right",3,"floatLeft"]],template:function(t,i){1&t&&$e(0,"div",0,1)(2,"app-map-overlay",null,2)(4,"controls",3),2&t&&(Z(4),Ce("@slideInOut",void 0)("floatLeft",!1))},dependencies:[whe,aRt],styles:['[_ngcontent-%COMP%]:root, [_nghost-%COMP%]{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position[_ngcontent-%COMP%]{top:8px;right:8px;position:absolute}.ol-scale-line[_ngcontent-%COMP%]{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner[_ngcontent-%COMP%]{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar[_ngcontent-%COMP%]{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner[_ngcontent-%COMP%]{display:flex}.ol-scale-step-marker[_ngcontent-%COMP%]{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text[_ngcontent-%COMP%]{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text[_ngcontent-%COMP%]{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar[_ngcontent-%COMP%]{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even[_ngcontent-%COMP%]{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd[_ngcontent-%COMP%]{background-color:var(--ol-background-color)}.ol-unsupported[_ngcontent-%COMP%]{display:none}.ol-viewport[_ngcontent-%COMP%], .ol-unselectable[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{all:unset}.ol-selectable[_ngcontent-%COMP%]{-webkit-touch-callout:default;-webkit-user-select:text;user-select:text}.ol-grabbing[_ngcontent-%COMP%]{cursor:grabbing}.ol-grab[_ngcontent-%COMP%]{cursor:move;cursor:grab}.ol-control[_ngcontent-%COMP%]{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom[_ngcontent-%COMP%]{top:.5em;left:.5em}.ol-rotate[_ngcontent-%COMP%]{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent[_ngcontent-%COMP%]{top:4.643em;left:.5em}.ol-full-screen[_ngcontent-%COMP%]{right:.5em;top:.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:1.4em}.ol-compass[_ngcontent-%COMP%]{display:block;font-weight:400;will-change:transform}.ol-touch[_ngcontent-%COMP%]   .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5em}.ol-touch[_ngcontent-%COMP%]   .ol-zoom-extent[_ngcontent-%COMP%]{top:5.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-in[_ngcontent-%COMP%]{border-radius:2px 2px 0 0}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-out[_ngcontent-%COMP%]{border-radius:0 0 2px 2px}.ol-attribution[_ngcontent-%COMP%]{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline;list-style:none}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:" "}.ol-attribution[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0}.ol-attribution.ol-collapsed[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}.ol-attribution[_ngcontent-%COMP%]:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-zoomslider[_ngcontent-%COMP%]{top:4.5em;left:.5em;height:200px}.ol-zoomslider[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;height:10px}.ol-touch[_ngcontent-%COMP%]   .ol-zoomslider[_ngcontent-%COMP%]{top:5.5em}.ol-overviewmap[_ngcontent-%COMP%]{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%]{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed)   button[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box[_ngcontent-%COMP%]{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-box[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}[_nghost-%COMP%]     .ol-attribution{display:none}.map[_ngcontent-%COMP%]{height:100%;width:100%}'],data:{animation:[wM,Wk]},changeDetection:0}),n})(),hRt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.Tag=K3,this.Section=_t,this.SensorType=Ge}ngAfterViewInit(){this.appService.hardSetStates({[D2.theoreticalWalls]:!1})}getGroups(t){return[...new Set(Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Ht).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s).join(", ")}getOutlets(t){return Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Ht).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return An(Object.values(this.houseService.house$.value.partsFlatten).filter(s=>s instanceof Ht).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(Mo))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-wired"]],decls:214,vars:112,consts:[[3,"id"],[3,"url"],[1,"technical"],["href","https://community.home-assistant.io/t/circadian-lighting-custom-component/61246"],["identifier","PassiveOpen-Wired"]],template:function(t,i){1&t&&(H(0,"section",0)(1,"h1"),V(2,"Smart home"),N(),H(3,"p"),V(4," In addition to being a regular home, this house is also a smart home that employs a lot of domotics. This involves the use of many sensors and lights that can be controlled remotely. Wired -cloudless- connections are typically more reliable and affordable than wireless options such as Wi-Fi, which means that the setup may differ from what you're familiar with. "),N()(),H(5,"section",0)(6,"h2"),V(7," Electricity "),N(),H(8,"h3"),$e(9,"app-svg",1),H(10,"span"),V(11,"Normal - 230v"),N()(),H(12,"p"),V(13," In Europe (230v), sockets usually share a breaker or a group that is rated at either 16 or 10 amperes. The rating depends on the load and wire thickness, which is 2.5mm2 and 1.5mm2, respectively. "),N(),H(14,"label",2)(15,"span"),V(16,"Technical "),N(),V(17),$e(18,"br"),V(19),$e(20,"br"),V(21),$e(22,"br"),N(),H(23,"h3"),$e(24,"app-svg",1),H(25,"span"),V(26,"3Phase - 400v"),N()(),H(27,"p"),V(28," The unusual symbol you're seeing is a "),H(29,"tag"),V(30,"perilex"),N(),V(31," plug, which typically contains three phases, though some models may only have two. The main objective of this plug is to distribute the load over three wires, rather than one, which requires the use of more wires. This type of plug is commonly used for high-power appliances such as induction cookers in the kitchen. Electric cars do not utilize this plug, but they do require three-phase power in most cases. "),N(),H(32,"label",2)(33,"span"),V(34,"Technical "),N(),V(35),$e(36,"br"),V(37),$e(38,"br"),V(39),$e(40,"br"),N()(),H(41,"section",0)(42,"h2"),V(43," lightning "),N(),H(44,"h3"),$e(45,"app-svg",1),H(46,"span"),V(47,"Lamps"),N()(),H(48,"p"),V(49," Lamp outlets are available in both 230V and 24V variants. Typically, most lamps can be dimmed, and their wiring runs back to the server room. They are controlled by a "),H(50,"tag"),V(51,"hub"),N(),V(52," that is connected to the home automation system. "),N(),H(53,"h3"),$e(54,"app-svg",1),H(55,"span"),V(56,"Double switch "),N()(),H(57,"p"),V(58," The double pulse switches have six different options available. You can program actions for two single presses, two double presses, and two long presses. The switches operate at 24V, and their wiring runs back to the "),H(59,"tag"),V(60,"hub"),N(),V(61," . "),N(),H(62,"h3"),$e(63,"app-svg",1),H(64,"span"),V(65,"Dimmer"),N()(),H(66,"p"),V(67," The dimmer switch enables you to adjust the brightness of the room's lighting. However, the smart-home system should automatically select the appropriate dimming level based on the time of day, see "),H(68,"a",3),V(69,"circadian lightning."),N(),V(70,". You can override this automation by using the dimmer switch. "),N(),H(71,"h3"),$e(72,"app-svg",1),H(73,"span"),V(74,"DLC, or light-socket"),N()(),H(75,"p"),V(76," To outsiders, it may seem strange, but each fixed light in the house has its own separate mini-socket. In Sweden, an old standard was in use, but since 2019, they have followed the EU standard of DLC. "),N()(),H(77,"section",0)(78,"h2"),V(79," Network / Ethernet "),N(),H(80,"h3"),$e(81,"app-svg",1),H(82,"span"),V(83,"Ethernet (rj45)"),N()(),H(84,"p"),V(85," Reliable internet is essential when working from home, and the best option is to have a wall outlet for a regular internet cable. These outlets are not limited to computers and can be used for other devices like speakers, televisions, and more. "),N(),H(86,"label",2)(87,"span"),V(88,"Technical "),N(),V(89),$e(90,"br"),V(91),$e(92,"br"),N(),H(93,"h3"),$e(94,"app-svg",1),H(95,"span"),V(96,"Power-over-Ethernet "),N()(),H(97,"p"),V(98,"With a voltage of 48 volts, internet cables can be used to power certain devices without requiring additional wiring. This capability makes them a convenient option for devices like ring doorbells, security cameras, and Wi-Fi access points. "),N(),H(99,"h3"),$e(100,"app-svg",1),H(101,"span"),V(102,"Wifi"),N()(),H(103,"p"),V(104,"Needs no introduction. Know that you can have more complex wifi solutions than your internet provider can provide. "),N(),H(105,"label",2)(106,"span"),V(107,"Technical "),N(),V(108),$e(109,"br"),N()(),H(110,"section",0)(111,"h2"),V(112," Safety "),N(),H(113,"h3"),$e(114,"app-svg",1),H(115,"span"),V(116,"Smoke/heat detectors"),N()(),H(117,"p"),V(118,"For safety purposes, it is advisable to install several smoke sensors throughout the house, along with a heat sensor specifically in the kitchen. "),N(),H(119,"label",2)(120,"span"),V(121,"Technical "),N(),V(122),$e(123,"br"),V(124),$e(125,"br"),N(),H(126,"h3"),$e(127,"app-svg",1),H(128,"span"),V(129,"Camera's"),N()(),H(130,"p"),V(131," While not necessary, installing a security monitoring system in your home can offer added convenience and security. With your own VPN, you can remotely monitor your house from anywhere. "),N(),H(132,"label",2)(133,"span"),V(134,"Technical "),N(),V(135),$e(136,"br"),N(),H(137,"h3"),$e(138,"app-svg",1)(139,"app-svg",1),H(140,"span"),V(141,"Window/Door sensors/Motion detection"),N()(),H(142,"p"),V(143," The alarm function is expanded and fortified with window/door sensors and motion detection to provide added security. "),N()(),H(144,"section",0)(145,"h2"),V(146," Other smarts "),N(),H(147,"h3"),$e(148,"app-svg",1),H(149,"span"),V(150,"Sun blinds / screens"),N()(),H(151,"p"),V(152," To protect against high sun radiation in summer, a passive house must be equipped with sun blinds/screens. The screens can be passive or automatically controlled by the smart-home system. External screens are more effective than internal screens. "),N(),H(153,"h3"),$e(154,"app-svg",1),H(155,"span"),V(156,"Motion sensors"),N()(),H(157,"p"),V(158," Motion sensors can be a fun addition to your smart-home setup, allowing for automated control of lights turning on and off. They can also enhance home security by supporting the alarm system. "),N(),H(159,"h3"),$e(160,"app-svg",1),H(161,"span"),V(162,"Temperature"),N()(),H(163,"p"),V(164,"Temperature sensors play a important role in regulating the heating, cooling, and ventilation in specific areas of the house. "),N()(),H(165,"section",0)(166,"h2"),V(167," Ventilation "),N(),H(168,"h3"),$e(169,"app-svg",1),H(170,"span"),V(171,"Ventilation in"),N()(),H(172,"p"),V(173," Due to the airtightness of the house, fresh air is necessary in the bedrooms and main living rooms to ensure proper ventilation. The airflow will then circulate to other areas of the house. "),N(),H(174,"h3"),$e(175,"app-svg",1),H(176,"span"),V(177,"Ventilation out"),N()(),H(178,"p"),V(179,' Air exhausts are installed in the bathroom, kitchen, and toilets to remove moisture and unpleasant smells, as they are the rooms with "dirty" air. '),N()(),H(180,"section",0)(181,"h2"),V(182," Water "),N(),H(183,"h3"),$e(184,"app-svg",1),H(185,"span"),V(186,"Rainwater non-drinkable & cold"),N()(),H(187,"p"),V(188," This water has low calcium levels, making it ideal for watering plants and gardens. It can also be used for flushing toilets and washing machines, reducing the amount of soap required. While it doesn't need to be drinkable, it's still a valuable resource that shouldn't be wasted. "),N(),H(189,"h3"),$e(190,"app-svg",1),H(191,"span"),V(192,"Water, Drinkable Both warm and cold"),N()(),H(193,"p"),V(194," Used for daily water use. "),N(),H(195,"h3"),$e(196,"app-svg",1),H(197,"span"),V(198,"Shower, Drinkable Both warm and cold"),N()(),H(199,"p"),V(200," The mixing of warm-drink water and cold rainwater is not permitted when using water from a supply company, due to the high risk of flow back. However, the use of rainwater has benefits such as reducing the amount of water used, requiring less soap, and resulting in softer hair. "),N(),H(201,"h3"),$e(202,"app-svg",1),H(203,"span"),V(204,"Drainage"),N()(),H(205,"p"),V(206," Every water tap has of course a drain. But sometimes they come separate , like in the laundry room. "),N(),H(207,"h3"),$e(208,"app-svg",1),H(209,"span"),V(210,"Toilets"),N()(),H(211,"p"),V(212," You know what they do. Should be flushed with (filtered, non-stinky) rainwater. "),N()(),$e(213,"disqus",4)),2&t&&(Ce("id",i.Section.wiredWelcome),Z(5),Ce("id",i.Section.wiredPower),Z(4),va("sensor-",i.SensorType.socket,""),Ms("url","assets/svg/",i.SensorType.socket,".svg"),Z(8),Jn(" Amount: ",i.getOutlets(i.SensorType.socket)," sockets"),Z(2),Jn(" Group numbers: [ ",i.getGroups(i.SensorType.socket)," ]"),Z(2),Jn(" Total cable length: ",i.getCable(i.SensorType.socket),"m"),Z(3),va("sensor-",i.SensorType.perilex,""),Ms("url","assets/svg/",i.SensorType.perilex,".svg"),Z(11),Jn(" Amount: ",i.getOutlets(i.SensorType.perilex)," socket"),Z(2),Jn(" Total cable length: ",i.getCable(i.SensorType.perilex),"m"),Z(2),Jn(" Group numbers: [ ",i.getGroups(i.SensorType.perilex)," ]"),Z(2),Ce("id",i.Section.wiredLight),Z(4),va("sensor-",i.SensorType.lightBulb,""),Ms("url","assets/svg/",i.SensorType.lightBulb,".svg"),Z(9),va("sensor-",i.SensorType.lightSwitch,""),Ms("url","assets/svg/",i.SensorType.lightSwitch,".svg"),Z(9),va("sensor-",i.SensorType.dimmer,""),Ms("url","assets/svg/",i.SensorType.dimmer,".svg"),Z(9),va("sensor-",i.SensorType.dlc,""),Ms("url","assets/svg/",i.SensorType.dlc,".svg"),Z(5),Ce("id",i.Section.wiredEthernet),Z(4),va("sensor-",i.SensorType.ethernet,""),Ms("url","assets/svg/",i.SensorType.ethernet,".svg"),Z(8),Jn(" Amount: ",i.getOutlets(i.SensorType.ethernet),""),Z(2),Jn(" Total cable length: ",i.getCable(i.SensorType.ethernet,0),"m"),Z(3),va("sensor-",i.SensorType.poe,""),Ms("url","assets/svg/",i.SensorType.poe,".svg"),Z(6),va("sensor-",i.SensorType.wifi,""),Ms("url","assets/svg/",i.SensorType.wifi,".svg"),Z(8),Jn(" Amount: ",i.getOutlets(i.SensorType.wifi)," Access points"),Z(2),Ce("id",i.Section.wiredSafety),Z(4),va("sensor-",i.SensorType.smoke,""),Ms("url","assets/svg/",i.SensorType.smoke,".svg"),Z(8),Jn(" Amount: ",i.getOutlets(i.SensorType.smoke),""),Z(2),Jn(" Total cable length: ",i.getCable(i.SensorType.smoke,0),"m"),Z(3),va("sensor-",i.SensorType.camera,""),Ms("url","assets/svg/",i.SensorType.camera,".svg"),Z(8),Jn(" Amount: ",i.getOutlets(i.SensorType.camera)," PoE"),Z(3),va("sensor-",i.SensorType.pir,""),Ms("url","assets/svg/",i.SensorType.pir,".svg"),Z(1),va("sensor-",i.SensorType.alarm,""),Ms("url","assets/svg/",i.SensorType.alarm,".svg"),Z(5),Ce("id",i.Section.wiredExtra),Z(4),va("sensor-",i.SensorType.blinds,""),Ms("url","assets/svg/",i.SensorType.blinds,".svg"),Z(6),va("sensor-",i.SensorType.pir,""),Ms("url","assets/svg/",i.SensorType.pir,".svg"),Z(6),va("sensor-",i.SensorType.temperature,""),Ms("url","assets/svg/",i.SensorType.temperature,".svg"),Z(5),Ce("id",i.Section.wiredVent),Z(4),va("sensor-",i.SensorType.ventIn,""),Ms("url","assets/svg/",i.SensorType.ventIn,".svg"),Z(6),va("sensor-",i.SensorType.ventOut,""),Ms("url","assets/svg/",i.SensorType.ventOut,".svg"),Z(5),Ce("id",i.Section.wiredWater),Z(4),va("sensor-",i.SensorType.waterRain,""),Ms("url","assets/svg/",i.SensorType.waterRain,".svg"),Z(6),va("sensor-",i.SensorType.waterWarm,""),Ms("url","assets/svg/",i.SensorType.waterWarm,".svg"),Z(6),va("sensor-",i.SensorType.shower,""),Ms("url","assets/svg/",i.SensorType.shower,".svg"),Z(6),va("sensor-",i.SensorType.drain,""),Ms("url","assets/svg/",i.SensorType.drain,".svg"),Z(6),va("sensor-",i.SensorType.toilet,""),Ms("url","assets/svg/",i.SensorType.toilet,".svg"))},dependencies:[Z9,vhe,YE],styles:["h3[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%]{margin-right:6px}"]}),n})();const fRt=["tableRows"];function dRt(n,e){if(1&n&&(H(0,"th",7),V(1),N()),2&n){const t=Nt().$implicit;Z(1),Jn(" ",t.name," ")}}function pRt(n,e){if(1&n&&$e(0,"span",9),2&n){const t=Nt().$implicit,i=Nt().$implicit;Ce("innerHTML",i.def(t[i.id],t.unit),j3)}}function gRt(n,e){if(1&n&&(H(0,"td",8),$e(1,"span",9),Wt(2,pRt,1,1,"span",10),$e(3,"span",9),N()),2&n){const t=e.$implicit,i=Nt().$implicit;Z(1),Ce("innerHTML",i.prefix,j3),Z(1),Ce("ngIf",t[i.id]),Z(1),Ce("innerHTML",i.postfix,j3)}}function mRt(n,e){1&n&&(Vs(0,4),Wt(1,dRt,2,1,"th",5),Wt(2,gRt,4,3,"td",6),Us()),2&n&&Ce("matColumnDef",e.$implicit.id)}function ARt(n,e){1&n&&$e(0,"tr",11)}function vRt(n,e){if(1&n){const t=la();Vs(0),H(1,"tr",12,13),an("click",function(){const s=ai(t).$implicit;return h(Nt().rowClick(s))}),N(),Us()}if(2&n){const t=e.$implicit;Z(1),FA("group-",t.uuid," row-",t.type,""),Rr("row-folded",t.uuid)}}let _Rt=(()=>{class n{constructor(t){this.houseService=t,this.columns=[{id:"folded",name:"",def:i=>`${i}`},{id:Ig.name,name:"Name",def:i=>`${i}`},{id:"calcAmount",name:"#",def:(i,r="x")=>`${i}${r}`},{id:"price",name:"Piece price",def:i=>`${this.readableNumbers(Number(i))}`},{id:"calcPrice",name:"Sum price",def:i=>`${this.readableNumbers(Number(i),-2)}`},{id:Ig.sizeOrVersion,name:"Size or Version",def:i=>`${i}`},{id:Ig.remarks,name:"remarks",def:i=>`${i}`}],this.groupRow={},this.columnNames=this.columns.map(i=>i.id),this.parts=[]}set data(t){this.costTable=t;const i=t.costs.filter(r=>r);this.dataSource=[...i.flatMap(r=>r instanceof $M?[r,...r.costs]:r),new MGe({name:`Total ${t.alias.toLocaleLowerCase()}`,costs:i})]}readableNumbers(t,i){return void 0!==i?`\u20ac${An(t,0).toLocaleString()}`:t>1e3?`\u20ac${An(t).toLocaleString()}`:`\u20ac${t}`}rowClick(t){t instanceof $M&&(t.toggleFold(),this.rowContainers.forEach(i=>{const r=i.nativeElement.classList;r.contains(`group-${t.uuid}`)&&r.toggle("row-folded")}))}}return n.\u0275fac=function(t){return new(t||n)(U(Lo))},n.\u0275cmp=Bn({type:n,selectors:[["app-table"]],viewQuery:function(t,i){if(1&t&&Xs(fRt,5,dn),2&t){let r;Di(r=Ii())&&(i.rowContainers=r)}},inputs:{data:"data"},decls:4,vars:6,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",3,"dataSource","id"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["mat-row","",3,"click"],["tableRows",""]],template:function(t,i){1&t&&(H(0,"table",0),Wt(1,mRt,3,1,"ng-container",1),Wt(2,ARt,1,0,"tr",2),Wt(3,vRt,3,6,"ng-container",3),N()),2&t&&(Ms("id","table-",i.costTable.section,""),Ce("dataSource",i.dataSource),Z(1),Ce("ngForOf",i.columns),Z(1),Ce("matHeaderRowDef",i.columnNames)("matHeaderRowDefSticky",!0),Z(1),Ce("matRowDefColumns",i.columnNames))},dependencies:[p3,g3,sx,q9,ox,K9,$9,ax,X9,Y9,cx,lx],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-column-calcAmount[_ngcontent-%COMP%], .mat-column-price[_ngcontent-%COMP%], .mat-column-calcPrice[_ngcontent-%COMP%]{text-align:right;width:60px}.mat-column-calcPrice[_ngcontent-%COMP%]{padding-right:16px}.mat-column-sizeOrVersion[_ngcontent-%COMP%], .mat-column-other[_ngcontent-%COMP%]{min-width:60px}.mat-column-name[_ngcontent-%COMP%]{min-width:200px}"]}),n})();function yRt(n,e){1&n&&bc(0)}const wRt=function(n){return{$implicit:n}};function CRt(n,e){if(1&n&&(Vs(0),Wt(1,yRt,1,0,"ng-container",4),Us()),2&n){const t=e.$implicit;Nt();const i=Ar(8);Z(1),Ce("ngTemplateOutlet",i)("ngTemplateOutletContext",f3(2,wRt,t))}}function bRt(n,e){1&n&&(H(0,"span"),V(1," Nice to discover a lot of moldings: "),H(2,"a",8),V(3,"Wikipedia Moldings"),N()())}function xRt(n,e){if(1&n){const t=la();H(0,"section",5)(1,"h2",6),an("click",function(){const s=ai(t).$implicit;return h(s.sectionFold=!s.sectionFold)}),H(2,"mat-icon"),V(3),N(),V(4),N(),H(5,"div"),Wt(6,bRt,4,0,"span",7),$e(7,"app-table",3),N()()}if(2&n){const t=e.$implicit,i=Nt();Ce("id",t.section),Z(3),Jn("",t.sectionFold?"expand_more":"expand_less"," "),Z(1),Jn(" ",t.alias," "),Z(1),Rr("folded",t.sectionFold),Z(1),Ce("ngIf",t.section===i.Section.costsFinishes),Z(1),Ce("data",t)}}let MRt=(()=>{class n{constructor(t){this.houseService=t,this.Section=_t,this.tables=[this.getPreps(),this.getConstruction(),this.getOpenings(),this.getElectra(),this.getFinish(),this.getWater(),this.getOutsideFinish()],this.hiddenTables=[this.getKitchen(),this.getBathroom()],this.totals=this.getTotals()}getFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new Z0({section:_t.costsFinishes,alias:"Finishes",costs:[new ha({amount:i,name:"Crown molding",price:3,unit:"m"}),new ha({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(ta,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Ia,[],a=>({name:"Window casing",price:60})),new ha({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getWater(){return this.houseService.getWallLength(),this.houseService.getWallArea(),new Z0({section:_t.costsWater,alias:"Water ",costs:[this.houseService.getT(rc,["sensorType"],a=>({name:"Cold water",price:20,unit:"m"}),a=>a.sensorType===Ge.waterCold,!1),this.houseService.getT(rc,["sensorType"],a=>({name:"Warm water",price:20,unit:"m"}),a=>a.sensorType===Ge.waterWarm,!1),this.houseService.getT(rc,["sensorType"],a=>({name:"Rain water",price:20,unit:"m"}),a=>a.sensorType===Ge.waterWarm,!1),this.houseService.getT(rc,["sensorType"],a=>({name:"Drains",price:20,unit:"m"}),a=>[Ge.drain,Ge.toilet].includes(a.sensorType),!1)]})}getOutsideFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new Z0({section:_t.costsOuterFinishes,alias:"Outer finishes",costs:[new ha({amount:i,name:"Crown molding",price:3,unit:"m"}),new ha({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(ta,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Ia,[],a=>({name:"Window casing",price:60})),new ha({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getElectra(){return new Z0({section:_t.costsElectra,alias:"Electra",costs:[new ha({amount:this.houseService.getGroups(Ge.socket).length,name:"Circuit breaker",sizeOrVersion:"10A - 240v",price:10}),new ha({amount:Math.ceil(this.houseService.getGroups(Ge.socket).length/4),name:"Circuit breaker Earth Group",sizeOrVersion:"240v",price:80}),this.houseService.getT(Ht,["sensorType"],i=>({name:"Electric power socket",sizeOrVersion:"230v",price:20}),i=>i.sensorType===Ge.socket),this.houseService.getT(Ht,["sensorType"],i=>({name:"Electric wires",sizeOrVersion:"2.5mm2 230v",price:2,unit:"m"}),i=>[Ge.socket].includes(i.sensorType),!1),this.houseService.getT(Ht,["sensorType"],i=>({name:"Perilex socket",price:60}),i=>i.sensorType===Ge.perilex),this.houseService.getT(Ht,["sensorType"],i=>({name:"Perilex wire",sizeOrVersion:"5 sub wires",price:2,unit:"m"}),i=>[Ge.perilex].includes(i.sensorType),!1),this.houseService.getT(jc,["sensorType"],i=>({name:"Light socket",price:20}),i=>!0),this.houseService.getT(Ht,["sensorType"],i=>({name:"Switch (light)",sizeOrVersion:"Double pulse",price:20}),i=>i.sensorType===Ge.lightSwitch),this.houseService.getT(Ht,["sensorType"],i=>({name:"Dimmer",price:20}),i=>i.sensorType===Ge.dimmer),this.houseService.getT(Ht,["sensorType"],i=>({name:"Wifi AP",price:100}),i=>i.sensorType===Ge.wifi),this.houseService.getT(Ht,[],i=>({name:"Ethernet cable",sizeOrVersion:"CAT6",price:.6,unit:"m"}),i=>[Ge.ethernet,Ge.poe].includes(i.sensorType),!1)]})}getPreps(){return new Z0({section:_t.costsPreparations,alias:"Preparations",costs:[new ha({name:"F\xf6rhandsbesked",price:2e3}),new ha({name:"Bygglov",price:3e3}),new ha({name:"Dirt work",price:1e3}),new ha({name:"Ground prep",price:9e3}),new ha({name:"Constructions calculations",price:3e3}),new ha({name:"PassivHaus Certification",price:3e3}),new ha({name:"Utilities connections /fees",price:15e3}),new ha({name:"Tool rental",price:3e3})]})}getConstruction(){return new Z0({section:_t.costsConstruction,alias:"Construction",costs:[new ha({name:"foundation",price:9e3}),new ha({name:"footer",price:9e3}),new ha({name:"Concrete prefab floor",price:32e3}),new ha({name:"Studs",price:1e4}),new ha({name:"OSB",price:1e4})]})}getBathroom(){return new Z0({section:_t.costsConstruction,alias:"Bathroom",costs:[new ha({name:"Complete kitchen",price:9e3})]})}getKitchen(){return new Z0({section:_t.costsConstruction,alias:"Kitchen",costs:[new ha({name:"Complete kitchen",price:9e3})]})}getOpenings(){return new Z0({section:_t.costsOpenings,alias:"Openings",costs:[this.houseService.getT(ta,["outside"],i=>({name:"Door",sizeOrVersion:`230x${i.width}`,price:i.outside?600:200,unit:"#",other:i.outside?"Outer door":"Inner door"})),this.houseService.getT(Ia,["width","height","windowForm"],i=>({name:"Window",sizeOrVersion:`${1e3*i.height}mm x ${1e3*i.width}mm`,price:i.width*i.height*800,other:`${i.windowForm}`}),i=>![Y0.windowWall].includes(i.windowForm)),this.houseService.getT(Ia,["width","height","windowForm"],i=>({name:"Window wall",sizeOrVersion:"Custom",price:6e4,other:"main window wall"}),i=>[Y0.windowWall].includes(i.windowForm))]})}getTotals(){const t=[...this.tables,...this.hiddenTables].flatMap(i=>new ha({price:t4(i.costs.filter(r=>void 0!==r).map(r=>r.calcPrice)),name:i.alias}));return console.log(),new Z0({section:_t.costsTotals,alias:"Total",costs:[...t,new ha({price:t4(t.map(i=>i.price)),amount:.12,name:"Unexpected costs (12%)"})]})}}return n.\u0275fac=function(t){return new(t||n)(U(Lo))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-costs"]],decls:13,vars:3,consts:[[4,"ngFor","ngForOf"],["simple",""],[2,"margin-bottom","40px",3,"id"],[3,"data"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"id"],[3,"click"],[4,"ngIf"],["href","https://en.wikipedia.org/wiki/Molding_(decorative)"]],template:function(t,i){1&t&&(H(0,"h1"),V(1,"What does it costs"),N(),H(2,"p"),V(3," This is a overview of all the prices. Some are fixed but most are dynamic calculated of the other inputs on this website. All these prices are estimations based on on certain area, with a certain deal with a construction store.\n"),N(),H(4,"h3"),V(5," This page is still under construction. Not complete!!! Prices are not accurate\n"),N(),Wt(6,CRt,2,4,"ng-container",0),Wt(7,xRt,8,7,"ng-template",null,1,K2),H(9,"section",2)(10,"h1"),V(11,"Totals"),N(),$e(12,"app-table",3),N()),2&t&&(Z(6),Ce("ngForOf",i.tables),Z(3),Ce("id",i.Section.costsTotals),Z(3),Ce("data",i.totals))},dependencies:[p3,g3,xI,k7,_Rt],styles:["[_nghost-%COMP%]{max-width:900px;display:block;margin:0 auto;padding:0 32px}section[_ngcontent-%COMP%]{margin:0;padding:0 0 0 24px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:100vh;transition:.4s ease-in;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}app-table[_ngcontent-%COMP%]{display:block}  td.mat-column-price span{opacity:0}  td.mat-column-calcPrice span{opacity:0}  #table-costs-totals .mat-column-sizeOrVersion,   #table-costs-totals .mat-column-other,   #table-costs-totals .mat-column-calcAmount,   #table-costs-totals .mat-column-price{color:transparent}"]}),n})(),SRt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.discord=this.appService.discord,this.github=this.appService.github,this.youtube=this.appService.youtube,this.patreon=this.appService.patreon,this.instagram=this.appService.instagram,this.faDiscord=qM,this.faGithub=yP,this.faYoutube=wP,this.faPatreon=vP,this.faInstagram=_P}}return n.\u0275fac=function(t){return new(t||n)(U(Lo),U(Mo))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-about"]],decls:111,vars:8,consts:[["src","/assets/svg/logo.svg",1,"po-logo"],["target","_blank",1,"larger-link",2,"background","#FF0000",3,"href"],[3,"icon"],["target","_blank",1,"larger-link",2,"background","rgb(240 0 117)",3,"href"],["src","/assets/img/plings.jpg",1,"plings-logo"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],["target","_blank",1,"larger-link",3,"href"],["rel","license","href","http://creativecommons.org/licenses/by-nc/4.0/"],["alt","Creative Commons Licence","src","https://i.creativecommons.org/l/by-nc/4.0/88x31.png",2,"border-width","0"],["target","_blank","href","https://GeoDev.nl",1,"larger-link"],["target","_blank","href","https://www.joostdevree.nl"],["target","_blank","href","https://berkela.home.xs4all.nl"],["target","_blank","href","https://gathering.tweakers.net/forum/list_messages/2147286"],["target","_blank","href","https://www.byggahus.se/"],["target","_blank","href","https://www.passivehouse.com"],["target","_blank","href","https://passiefbouwen.nl/"],["target","_blank","href","https://www.igpassivhus.se/"],["target","_blank","href","https://passipedia.org/"]],template:function(t,i){1&t&&(H(0,"main")(1,"h1"),V(2," About PassiveOpen "),$e(3,"img",0),N(),H(4,"P"),V(5," The PassiveOpen initiative is dedicated to promoting the use of passive houses as a sustainable building solution. We are passionate about the potential of passive house design to transform the way we live and work, and we are eager to share our knowledge and experience with others who are interested in creating a more sustainable future. "),N(),H(6,"section")(7,"h2"),V(8," 2_Plings "),N(),H(9,"p"),V(10," This website is focused on a house that is being built by 2_plings, a couple living in Sweden who are constructing their home without a main contractor. They are doing most of the building work themselves. "),$e(11,"br")(12,"br"),V(13," They share their story on "),H(14,"a",1),$e(15,"fa-icon",2),V(16," Youtube "),N(),V(17," and "),H(18,"a",3),$e(19,"fa-icon",2),V(20," Instagram "),N(),$e(21,"img",4),N()(),H(22,"section")(23,"h2"),V(24," We have an online community. "),N(),H(25,"p"),V(26," Looking for a place to connect with like-minded people? Join our online community on "),H(27,"a",5),$e(28,"fa-icon",2),V(29," Discord "),N(),V(30," and become part of the conversation! We know that Discord is just another tool, but it helps us stay connected and respond quickly to new ideas. All are welcome! "),N()(),H(31,"section")(32,"h2"),V(33," Open source "),N(),H(34,"p"),V(35," Our plan is to share every aspect of this project with you: the costs, calculations, plans, drawings, and even our thoughts. We want to help you build an optimized and charming home, whether you choose to do it yourself or with a contractor. "),$e(36,"br"),V(37,"Best of all, we're offering it all for free (except the cost of materials nor contractor, of course). "),N(),$e(38,"br")(39,"br"),H(40,"div"),V(41," Everything is free and open source. See "),H(42,"a",6),$e(43,"fa-icon",2),V(44," GitHub "),N()(),V(45," This project has a Creative Commons license. You can read about it "),H(46,"a",7),V(47," here"),N(),V(48,", but has 2 main points: "),H(49,"ul")(50,"li"),V(51," Attribution: We would like to be credited somehow."),N(),H(52,"li"),V(53," NonCommercial: You cannot use this project for commercial purposes."),N()(),H(54,"a",7),$e(55,"img",8),N(),$e(56,"br"),V(57," We don't force you to 'share-alike' but we would appreciate it if you do. "),$e(58,"br")(59,"br"),N(),H(60,"section")(61,"h2"),V(62," Ungoing credits: "),N(),H(63,"div")(64,"ul")(65,"li"),V(66," Build by "),H(67,"a",9),V(68,"GeoDev"),N()(),H(69,"li"),V(70," All the discord users of course "),N()(),V(71," Site and credits in Dutch: "),H(72,"ul")(73,"li")(74,"a",10),V(75,"https://www.joostdevree.nl"),N()(),H(76,"li")(77,"a",11),V(78,"https://berkela.home.xs4all.nl"),N()(),H(79,"li")(80,"a",12),V(81,"Tweakers forum"),N()()(),V(82," Site and credits in Swedish: "),H(83,"ul")(84,"li")(85,"a",13),V(86,"https://www.byggahus.se/"),N()()()()(),H(87,"section")(88,"h2"),V(89," Readings "),N(),H(90,"div")(91,"ul")(92,"li")(93,"a",14),V(94,"Passive House Institute"),N(),$e(95,"br"),V(96," Passive House Institute "),N(),H(97,"li")(98,"a",15),V(99,"Passief Bouwen"),N(),$e(100,"br"),V(101," Dutch Passive House Association "),N(),H(102,"li")(103,"a",16),V(104,"IG Passivhus"),N(),$e(105,"br"),V(106," Swedish Passive House Association "),N(),H(107,"li")(108,"a",17),V(109,"Passipedia"),N()()()()()(),$e(110,"app-footer")),2&t&&(Z(14),Bl("href",i.youtube,wc),Z(1),Ce("icon",i.faYoutube),Z(3),Bl("href",i.instagram,wc),Z(1),Ce("icon",i.faInstagram),Z(8),Bl("href",i.discord,wc),Z(1),Ce("icon",i.faDiscord),Z(14),Bl("href",i.github,wc),Z(1),Ce("icon",i.faGithub))},dependencies:[XP,Ore],styles:[".dark .po-logo{filter:invert(1)}main[_ngcontent-%COMP%]{max-width:600px;display:block;margin:0 auto 124px;padding:0 32px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px;width:100%}li[_ngcontent-%COMP%]{margin:8px 0}a[_ngcontent-%COMP%]:not(.larger-link){text-decoration:underline}.plings-logo[_ngcontent-%COMP%]{margin-top:24px;display:block;border-radius:100%;height:64px;position:absolute}"]}),n})(),ERt=(()=>{class n{constructor(t){this.houseService=t,this.house$=this.houseService.house$,this.Tag=K3,this.Section=_t,this.update=this.houseService.update,this.round=An,this.Thicknesses=pn,this.joists=[200,300,350,400],this.columns=[{id:"name",name:"Name",def:i=>`${i}`},{id:"diameter",name:"Diameter",def:i=>`${An(i,3)}`},{id:"lambda",name:"Lambda",def:i=>`${An(i,3)}`},{id:"r",name:"R",def:i=>`${An(i,2)}`},{id:"deltaT",name:"Delta T",def:i=>`${An(i,1)}\xb0C`},{id:"temp",name:"Temp",def:i=>`${An(i,1)}\xb0C`}],this.columnNames=this.columns.map(i=>i.id),this.currentJoist=()=>this.joists.findIndex(i=>i===this.house$.value.construction.Thicknesses[pn.joists])}ngAfterViewInit(){}updateJoist(t){this.update("construction","thicknessJoist",this.joists[t])}updateOuterSheet(t){this.update("construction","thicknessJoist",this.joists[t])}}return n.\u0275fac=function(t){return new(t||n)(U(Lo))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-3d-house"]],decls:3,vars:1,consts:[[3,"id"]],template:function(t,i){1&t&&(H(0,"section",0)(1,"h1"),V(2," Loading "),N()()),2&t&&Ce("id",i.Section.House3D)}}),n})();function z2(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function QT(n){return QT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QT(n)}function ql(n){z2(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||"object"===QT(n)&&"[object Date]"===e?new Date(n.getTime()):"number"==typeof n||"[object Number]"===e?new Date(n):(("string"==typeof n||"[object String]"===e)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function WT(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function w6e(n){z2(1,arguments);var e=ql(n);return e.setHours(0,0,0,0),e}function LRt(n,e){z2(2,arguments);var t=w6e(n),i=w6e(e),r=t.getTime()-WT(t),s=i.getTime()-WT(i);return Math.round((r-s)/864e5)}function C6e(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function _4(n){if(null===n||!0===n||!1===n)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var b6e={};function VV(){return b6e}function H6(n,e){var t,i,r,s,o,a,c,l;z2(1,arguments);var u=VV(),f=_4(null!==(t=null!==(i=null!==(r=null!==(s=e?.weekStartsOn)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==r?r:u.weekStartsOn)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==t?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ql(n),g=p.getDay(),_=(g<f?7:0)+g-f;return p.setDate(p.getDate()-_),p.setHours(0,0,0,0),p}function x6e(n,e){z2(2,arguments);var t=ql(n),i=_4(e);return isNaN(i)?new Date(NaN):(i&&t.setDate(t.getDate()+i),t)}function RRt(n,e){z2(2,arguments);var t=_4(e),i=7*t;return x6e(n,i)}function M6e(n,e){z2(1,arguments);var t=n||{},i=ql(t.start),r=ql(t.end),s=r.getTime();if(!(i.getTime()<=s))throw new RangeError("Invalid interval");var o=H6(i,e),a=H6(r,e);o.setHours(15),a.setHours(15),s=a.getTime();for(var c=[],l=o;l.getTime()<=s;)l.setHours(0),c.push(ql(l)),(l=RRt(l,1)).setHours(15);return c}function z6(n,e){for(var t=n<0?"-":"",i=Math.abs(n).toString();i.length<e;)i="0"+i;return t+i}function S6e(n,e){var t,i;z2(1,arguments);var r=ql(n);if(isNaN(r.getTime()))throw new RangeError("Invalid time value");var s=String(null!==(t=e?.format)&&void 0!==t?t:"extended"),o=String(null!==(i=e?.representation)&&void 0!==i?i:"complete");if("extended"!==s&&"basic"!==s)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==o&&"time"!==o&&"complete"!==o)throw new RangeError("representation must be 'date', 'time', or 'complete'");var a="",c="",l="extended"===s?"-":"",u="extended"===s?":":"";if("time"!==o){var f=z6(r.getDate(),2),p=z6(r.getMonth()+1,2),g=z6(r.getFullYear(),4);a="".concat(g).concat(l).concat(p).concat(l).concat(f)}if("date"!==o){var _=r.getTimezoneOffset();if(0!==_){var y=Math.abs(_),w=z6(Math.floor(y/60),2),C=z6(y%60,2),x=_<0?"+":"-";c="".concat(x).concat(w,":").concat(C)}else c="Z";var M=z6(r.getHours(),2),T=z6(r.getMinutes(),2),I=z6(r.getSeconds(),2),F=""===a?"":"T",P=[M,T,I].join(u);a="".concat(a).concat(F).concat(P).concat(c)}return a}function FRt(n,e){var t,i,r,s,o,a,c,l;z2(1,arguments);var u=ql(n),f=u.getFullYear(),p=VV(),g=_4(null!==(t=null!==(i=null!==(r=null!==(s=e?.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:p.firstWeekContainsDate)&&void 0!==i?i:null===(c=p.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=new Date(0);_.setFullYear(f+1,0,g),_.setHours(0,0,0,0);var y=H6(_,e),w=new Date(0);w.setFullYear(f,0,g),w.setHours(0,0,0,0);var C=H6(w,e);return u.getTime()>=y.getTime()?f+1:u.getTime()>=C.getTime()?f:f-1}function kRt(n,e){var t,i,r,s,o,a,c,l;z2(1,arguments);var u=VV(),f=_4(null!==(t=null!==(i=null!==(r=null!==(s=e?.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:u.firstWeekContainsDate)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1),p=FRt(n,e),g=new Date(0);g.setFullYear(p,0,f),g.setHours(0,0,0,0);var _=H6(g,e);return _}function E6e(n,e){z2(1,arguments);var t=ql(n),i=H6(t,e).getTime()-kRt(t,e).getTime();return Math.round(i/6048e5)+1}function HRt(n){return z2(1,arguments),ql(n).getFullYear()}function jT(n){z2(1,arguments);var e=ql(n),t=e.getDay();return t}function zRt(n,e){z2(2,arguments);var t=ql(n),i=_4(e);if(isNaN(i))return new Date(NaN);if(!i)return t;var r=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+i+1,0);var o=s.getDate();return r>=o?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}function $T(n){return $T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$T(n)}function UV(n,e){if(z2(2,arguments),!e||"object"!==$T(e))return new Date(NaN);var t=e.years?_4(e.years):0,i=e.months?_4(e.months):0,r=e.weeks?_4(e.weeks):0,s=e.days?_4(e.days):0,o=e.hours?_4(e.hours):0,a=e.minutes?_4(e.minutes):0,c=e.seconds?_4(e.seconds):0,l=ql(n),u=i||t?zRt(l,i+12*t):l,f=s||r?x6e(u,s+7*r):u,p=a+60*o,g=c+60*p,_=1e3*g,y=new Date(f.getTime()+_);return y}var gp=(()=>(function(n){n.name="name",n.days="days",n.what="what",n.more="more",n.deadline="deadline",n.firstDate="firstDate",n.lastDate="lastDate"}(gp||(gp={})),gp))();class km{constructor(e){this.sectionFold=!1,this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e)}}class Ai{constructor(e){this.type="single",this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e),void 0!==this.deadline&&(this.lastDate=this.deadline)}}class Ey extends Ai{constructor(e){super(e),this.steps=[],this.type="group",this.collapsed=!1,this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e),this.uuid=e.uuid,this.steps.forEach(t=>{t.uuid=e.uuid}),this.lastDate=new Date(Math.max(...this.steps.flatMap(t=>t.lastDate.getTime()))),this.firstDate=new Date(Math.max(...this.steps.flatMap(t=>t.firstDate.getTime()))),this.days=CM(this.steps.flatMap(t=>t.days))}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}}class ORt extends Ey{constructor(e){super(e),this.steps=[],this.type="total",Object.assign(this,e)}get folded(){return'<span class="material-icons">remove</span>'}}const NRt=["tableHeader"],VRt=["table"],URt=["tableRows"],GRt=[".table-row"];function QRt(n,e){if(1&n&&(H(0,"th",8)(1,"span"),V(2),N()()),2&n){const t=Nt().$implicit;Z(2),D0(t.name)}}function WRt(n,e){if(1&n&&$e(0,"div",10),2&n){const t=Nt().$implicit,i=Nt().$implicit;Ce("innerHTML",i.def(t[i.id],t[i.id+"-extra"]),j3)}}function jRt(n,e){if(1&n){const t=la();H(0,"td",9),an("mouseenter",function(r){return ai(t),h(Nt(2).mouseenter(r))})("mouseleave",function(r){return ai(t),h(Nt(2).mouseleave(r))}),$e(1,"span",10),Wt(2,WRt,1,1,"div",11),$e(3,"span",10),N()}if(2&n){const t=e.$implicit,i=Nt().$implicit;Z(1),Ce("innerHTML",i.prefix,j3),Z(1),Ce("ngIf",t[i.id]),Z(1),Ce("innerHTML",i.postfix,j3)}}function $Rt(n,e){1&n&&(Vs(0,5),Wt(1,QRt,3,1,"th",6),Wt(2,jRt,4,3,"td",7),Us()),2&n&&Ce("matColumnDef",e.$implicit.id)}function qRt(n,e){1&n&&$e(0,"tr",12,13)}function KRt(n,e){if(1&n){const t=la();Vs(0),H(1,"tr",14,15),an("click",function(){const s=ai(t).$implicit;return h(Nt().rowClick(s))}),N(),Us()}if(2&n){const t=e.$implicit;Z(1),FA("table-row group-",t.uuid," row-",t.type,""),Rr("row-folded",t.uuid)}}let XRt=(()=>{class n{constructor(t){this.overlay=t,this.Prop=gp,this.groupRow={},this.parts=[],this.highlightedColumn=0}set data(t){this.planning=t;const i=t.steps.filter(r=>r);this.dataSource=[...i.flatMap(r=>r instanceof Ey?[r,...r.steps]:r),new ORt({name:`Total ${t.alias.toLocaleLowerCase()}`,steps:i})]}ngOnInit(){this.columnNames=this.columns.map(t=>t.id)}ngAfterViewInit(){}observer(){console.log(this);const i=new window.IntersectionObserver(r=>{console.log(1,r),r.forEach(s=>{s.isIntersecting&&i.disconnect()})},{threshold:.2});console.log(this.tableHeader.nativeElement),i.observe(this.tableHeader.nativeElement)}mouseenter(t){}mouseleave(t){}readableNumbers(t,i){return void 0!==i?`\u20ac${An(t,0).toLocaleString()}`:t>1e3?`\u20ac${An(t).toLocaleString()}`:`\u20ac${t}`}rowClick(t){console.log(t),t instanceof Ey&&(t.toggleFold(),this.tableContainers.forEach(i=>{const r=i.nativeElement.classList;console.log(r,r.contains(`group-${t.uuid}`),`group-${t.uuid}`),r.contains(`group-${t.uuid}`)&&r.toggle("row-folded")}))}double(){this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy(),scrollStrategy:this.overlay.scrollStrategies.reposition()});const t=new A$(this.tableHeader);this.overlayRef.addPanelClass("example-overlay"),this.overlayRef.attach(t)}positionStrategy(){return this.overlay.position().flexibleConnectedTo(this.tableContainers.first).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}]).withFlexibleDimensions(!1).withPush(!1)}}return n.\u0275fac=function(t){return new(t||n)(U(A3))},n.\u0275cmp=Bn({type:n,selectors:[["app-table-planning"]],viewQuery:function(t,i){if(1&t&&(Xs(NRt,5,dn),Xs(VRt,5,dn),Xs(URt,5,dn),Xs(GRt,5,dn)),2&t){let r;Di(r=Ii())&&(i.tableHeader=r.first),Di(r=Ii())&&(i.table=r.first),Di(r=Ii())&&(i.tableContainers=r),Di(r=Ii())&&(i.tableFirstCol=r)}},inputs:{columns:"columns",scrollContainer:"scrollContainer",data:"data"},decls:5,vars:4,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",2,"width","fit-content !important",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"mouseenter","mouseleave",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",3,"mouseenter","mouseleave"],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["tableHeader",""],["mat-row","",3,"click"],["tableRows",""]],template:function(t,i){1&t&&(H(0,"table",0,1),Wt(2,$Rt,3,1,"ng-container",2),Wt(3,qRt,2,0,"tr",3),Wt(4,KRt,3,6,"ng-container",4),N()),2&t&&(Ce("dataSource",i.dataSource),Z(2),Ce("ngForOf",i.columns),Z(1),Ce("matHeaderRowDef",i.columnNames),Z(1),Ce("matRowDefColumns",i.columnNames))},dependencies:[p3,g3,sx,q9,ox,K9,$9,ax,X9,Y9,cx,lx],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]   td.highlighted[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block}.mat-column-what[_ngcontent-%COMP%], .mat-column-name[_ngcontent-%COMP%]{min-width:200px}th[class*=mat-column-week-][_ngcontent-%COMP%], td[class*=mat-column-week-][_ngcontent-%COMP%]{min-width:20px;width:20px}th[class*=mat-column-week-][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(198deg);text-orientation:sideways;writing-mode:vertical-lr}td[class*=mat-column-week-][_ngcontent-%COMP%]{border-left:1px solid var(--color-5)}  .week-block{position:relative}  .week-block .week-block-fill{position:absolute;background:var(--accent-50);right:0;height:100%}  .week-block .week-block-fill.week-block-last{left:0;right:initial}  .week-block span{position:relative;display:block;width:100%;text-align:center}"]}),n})();function YRt(n,e){if(1&n){const t=la();Vs(0),H(1,"section",4)(2,"h2",5),an("click",function(){const s=ai(t).$implicit;return h(s.sectionFold=!s.sectionFold)}),H(3,"mat-icon"),V(4),N(),V(5),H(6,"span",6),V(7),_a(8,"date"),_a(9,"date"),N()(),H(10,"div",7),$e(11,"app-table-planning",8),N()(),Us()}if(2&n){const t=e.$implicit,i=Nt(),r=Ar(16);Z(1),Ce("id",t.section),Z(3),Jn("",t.sectionFold?"expand_more":"expand_less"," "),Z(1),Jn(" ",t.alias," "),Z(2),yd("( ",UA(8,10,t.firstDate,"dd-LL-YYYY")," - ",UA(9,13,t.lastDate,"dd-LL-YYYY"),")"),Z(3),Rr("folded",t.sectionFold),Z(1),Ce("columns",i.columns)("data",t)("scrollContainer",r)}}const ZRt=[{path:"map",component:uRt},{path:"costs",component:MRt},{path:"about",component:SRt},{path:"planning",component:(()=>{class n{constructor(t,i,r,s){this.datePipe=t,this.houseService=i,this.appService=r,this.sanitizer=s,this.columns=[{id:"folded",name:"",def:o=>`${o}`},{id:gp.name,name:"Name",def:o=>`${o}`},{id:gp.what,name:"What",def:o=>`${o}`},{id:gp.days,name:"Days",def:o=>` ${o} `}],this.starDate=new Date(2024,2,1),console.log()}ngOnInit(){this.tables=this.calc([this.getPreps(),this.getFoundation(),this.getFraming(),this.getFinishing(),this.getInstallations(),this.getOutside()]),this.minFirstDate=new Date(Math.min(...this.tables.flatMap(t=>t.steps).map(t=>t.firstDate.getTime()))),this.maxLastDate=new Date(Math.max(...this.tables.flatMap(t=>t.steps).map(t=>t.lastDate.getTime()))),this.totalDays=function DRt(n,e){z2(2,arguments);var t=ql(n),i=ql(e),r=C6e(t,i),s=Math.abs(LRt(t,i));t.setDate(t.getDate()-r*s);var o=Number(C6e(t,i)===-r),a=r*(s-o);return 0===a?0:a}(this.maxLastDate,this.minFirstDate),this.totalWeeks=function BRt(n,e,t){z2(2,arguments);var i=H6(n,t),r=H6(e,t),s=i.getTime()-WT(i),o=r.getTime()-WT(r);return Math.round((s-o)/6048e5)}(this.maxLastDate,this.minFirstDate),this.weeks=M6e({start:this.minFirstDate,end:this.maxLastDate}),this.columns.push(...this.weeks.map(t=>({id:`week-${S6e(t,{representation:"date"})}`,name:` ${E6e(t)} ${[1,52,53].includes(E6e(t))?"'"+HRt(t).toString().substring(2):""} `,def:(i,r)=>this.sanitizer.bypassSecurityTrustHtml(`<div class="week-block">\n              <div class="week-block-fill" style="\n                width:${Math.round(Math.abs(i/7*100))}%;\n                left: ${Math.round(Math.abs(r/7*100))}%;\n              "></div>\n              <span>${Math.abs(i)}</span>\n            </div>`)}))),this.tables.forEach(t=>{t.steps.forEach(i=>{try{M6e({start:i.firstDate,end:i.lastDate}).forEach((r,s,o)=>{const a=o.length,c=S6e(r,{representation:"date"});let l=0;1===a?(l=i.days,i[`week-${c}-extra`]=jT(i.firstDate)):0===s?(l=7-jT(i.firstDate),i[`week-${c}-extra`]=jT(i.firstDate)):s===a-1?(l=jT(i.lastDate)+1,i[`week-${c}-extra`]=0):(l=7,i[`week-${c}-extra`]=0),i[`week-${c}`]=l})}catch{console.error(i)}})}),console.log(this.tables),console.log(this.tables[1].steps[0].uuid,this.tables[1].steps[0].steps[0].uuid)}calc(t){return t.forEach((r,s)=>{r.firstDate=0===s?this.starDate:UV(t[s-1].lastDate,{days:1}),r.steps.forEach((o,a)=>{const c=r.steps[a-1];o.firstDate=c?UV(c.lastDate,{days:1}):r.firstDate,o.lastDate=UV(o.firstDate,{days:Math.max(1,o.days-1)})}),r.lastDate=r.steps[r.steps.length-1].lastDate}),t}getPreps(){return new km({section:_t.planningPreps,alias:"Preparations",steps:[new Ai({name:"Paper work",days:3,more:"BigTODO"}),new Ai({name:"Redesign",days:2,deadline:new Date("2024","04","21")})]})}getFoundation(){const t=[new Ai({name:"Dirt work",what:"Ground preps",days:2}),new Ai({name:"Dirt work",what:"Flatten surface / compacting",days:9}),new Ai({name:"Dirt work",what:"Snapping lines",days:11}),new Ai({name:"Dirt work",what:"Digging hole",days:2})],i=[new Ai({name:"Footings",what:"Snapping lines",days:1}),new Ai({name:"Footings",what:"IFC blocks",days:2}),new Ai({name:"Footings",what:"Drainage",days:2}),new Ai({name:"Footings",what:"Pouring Concrete",days:7})];return new km({section:_t.planningFoundation,alias:"Foundation",steps:[new Ey({uuid:mP(),name:`${t[0].name}`,steps:t}),new Ey({uuid:`${mP()}`,name:`${i[0].name}`,steps:i}),new Ai({name:"Walls",what:"Snapping lines",days:2}),new Ai({name:"Walls",what:"IFC blocks",days:2}),new Ai({name:"Walls",what:"Pouring Concrete",days:7}),new Ai({name:"First Floor",what:"Prep wall",days:2}),new Ai({name:"First Floor",what:"Install prefab",days:6}),new Ai({name:"Deadline",what:"Foundation finished",days:8})]})}getFraming(){return new km({section:_t.planningFraming,alias:"Framing",steps:[new Ai({name:"Ground Floor\tMeasure for Square",days:1}),new Ai({name:"Ground Floor\tSnapping the lines",days:1}),new Ai({name:"Walls\tFrame the outside",days:10}),new Ai({name:"Walls\tFrame walls",days:5}),new Ai({name:"Stairs\tBuild temp stairs",days:2}),new Ai({name:"Top Floor\tMounting Rim LVL",days:2}),new Ai({name:"Top Floor\tRolling Joists",days:4}),new Ai({name:"Top Floor\tSheeting",days:3}),new Ai({name:"Roof\tRolling rafters",days:4}),new Ai({name:"Roof\tChimenys and cutouts",days:4}),new Ai({name:"Roof\tLower Sheeting",days:2}),new Ai({name:"Roof\tinsulation",days:2}),new Ai({name:"Roof\tOuter sheet",days:2}),new Ai({name:"Roof\tTiles",days:5}),new Ai({name:"Windows\tNormal openings",days:5}),new Ai({name:"Windows\tDoors",days:3}),new Ai({name:"Windows\tGlass facade",days:3}),new Ai({name:"Windows\tTaping",days:1}),new Ai({name:"Pirsing pipes (installationroom + chimneys)",days:2}),new Ai({name:"DoorBlowertest",days:1}),new Ai({name:"Deadline\tCorrections",days:3})]})}getFinishing(){return new km({section:_t.planningFinishing,alias:"Finishing",steps:[new Ai({name:"Kitchen",days:2}),new Ai({name:"Kitchen Countertop",days:5}),new Ai({name:"Floors",days:4}),new Ai({name:"Bathroom tiling",days:4})]})}getInstallations(){return new km({section:_t.planningInstallations,alias:"Installations",steps:[new Ai({name:"Water\tPlumming / Sewer",days:3}),new Ai({name:"Water\tWarm Cold water",days:3}),new Ai({name:"Water\tRainwater  + installation",days:3}),new Ai({name:"Water\tInstallation + Tank",days:3}),new Ai({name:"Floor heating\tTubeing",days:3}),new Ai({name:"Floor heating\tConcrete pressure layer",days:3}),new Ai({name:"Floor heating\tMechanic installation",days:3}),new Ai({name:"Electrics\tBuilding Power Connection",days:5}),new Ai({name:"Electrics\tTubes + Wiring",days:1}),new Ai({name:"Electrics\tInstallation",days:2}),new Ai({name:"Electrics\tFixes/ lamps",days:4}),new Ai({name:"Electrics\t3Phases",days:1}),new Ai({name:"Electrics\tEternet Cables",days:2}),new Ai({name:"Electrics\tAlarm",days:2}),new Ai({name:"HVAC\tPipes",days:3}),new Ai({name:"HVAC\tMechanic installation",days:2})]})}getOutside(){return new km({section:_t.planningOutside,alias:"Outerside",steps:[new Ai({name:"Walls\tPrep El/Cables etc",days:2}),new Ai({name:"Walls\tCorners",days:2}),new Ai({name:"Walls\tTrimming windows/ Doors",days:5}),new Ai({name:"Walls\tWindow blinds",days:2}),new Ai({name:"Walls\tFarstu preps",days:2}),new Ai({name:"Walls\tInsulation",days:4}),new Ai({name:"Walls\tOuter planks",days:8})]})}}return n.\u0275fac=function(t){return new(t||n)(U(fC),U(Lo),U(Mo),U(T8))},n.\u0275cmp=Bn({type:n,selectors:[["app-page-planning"]],features:[Ki([fC])],decls:18,vars:11,consts:[["src","/assets/svg/logo.svg"],["cdkScrollable","",2,"width","100%","overflow-x","scroll"],["scrollContainer",""],[4,"ngFor","ngForOf"],[3,"id"],[3,"click"],[2,"font-size","1rem"],[2,"width","fit-content"],[3,"columns","data","scrollContainer"]],template:function(t,i){1&t&&(H(0,"h1"),V(1,"Planning "),$e(2,"img",0),N(),H(3,"p"),V(4," todo "),$e(5,"br"),V(6),_a(7,"date"),$e(8,"br"),V(9),_a(10,"date"),$e(11,"br"),V(12),N(),H(13,"h3"),V(14," This page is still under construction.\n"),N(),H(15,"div",1,2),Wt(17,YRt,12,16,"ng-container",3),N()),2&t&&(Z(6),Jn(" ",UA(7,5,i.minFirstDate,"dd-LL-YYYY")," "),Z(3),Jn(" ",UA(10,8,i.maxLastDate,"dd-LL-YYYY")," "),Z(3),yd(" ",i.totalWeeks," weeks || ",i.totalDays," days\n"),Z(5),Ce("ngForOf",i.tables))},dependencies:[p3,nve,k7,XRt,fC],styles:["section[_ngcontent-%COMP%]{margin:0;padding:8px 4px 8px 16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{transition:.4s ease-in;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}"]}),n})()},{path:"",component:tSt,children:[{path:"house",component:fSt},{path:"stairs",component:ySt},{path:"facade",component:LSt},{path:"installations",component:ISt},{path:"construction",component:TSt},{path:"house3d",component:ERt},{path:"wired",component:hRt},{path:"**",redirectTo:"house",pathMatch:"full"}]},{path:"**",redirectTo:"/house",pathMatch:"full"}];let JRt=(()=>{class n{constructor(t){t.addSvgIconSet("material-icons-outlined")}}return n.\u0275fac=function(t){return new(t||n)(Xe(D9))},n.\u0275mod=oi({type:n,bootstrap:[hxe]}),n.\u0275inj=wn({providers:[R4],imports:[r$,kl,uSe,BDe,pBe,Ebe,Ed,$Je,gBe.forRoot("passiv"),xBe.forRoot("G-W580DX5P7G"),Nye.forRoot(ZRt,{anchorScrolling:"enabled",scrollPositionRestoration:"disabled"})]}),n})();(function qge(){if(sj)throw new Error("Cannot enable prod mode after platform setup.");rj=!1})(),A9e().bootstrapModule(JRt).catch(n=>console.error(n))},1503:(Ut,nt,Se)=>{"use strict";var Ee=Se(3269);function Ne(ze){var Re=[1/0,1/0,-1/0,-1/0];return Ee.coordEach(ze,function(Ie){Re[0]>Ie[0]&&(Re[0]=Ie[0]),Re[1]>Ie[1]&&(Re[1]=Ie[1]),Re[2]<Ie[0]&&(Re[2]=Ie[0]),Re[3]<Ie[1]&&(Re[3]=Ie[1])}),Re}Ne.default=Ne,nt.Z=Ne},2972:function(Ut){Ut.exports=function(){"use strict";function Se(Ne,ze,Re,Ie,We){for(;Ie>Re;){if(Ie-Re>600){var ct=Ie-Re+1,ft=ze-Re+1,Gt=Math.log(ct),Ct=.5*Math.exp(2*Gt/3),st=.5*Math.sqrt(Gt*Ct*(ct-Ct)/ct)*(ft-ct/2<0?-1:1);Se(Ne,ze,Math.max(Re,Math.floor(ze-ft*Ct/ct+st)),Math.min(Ie,Math.floor(ze+(ct-ft)*Ct/ct+st)),We)}var Ve=Ne[ze],Ye=Re,j=Ie;for(ue(Ne,Re,ze),We(Ne[Ie],Ve)>0&&ue(Ne,Re,Ie);Ye<j;){for(ue(Ne,Ye,j),Ye++,j--;We(Ne[Ye],Ve)<0;)Ye++;for(;We(Ne[j],Ve)>0;)j--}0===We(Ne[Re],Ve)?ue(Ne,Re,j):ue(Ne,++j,Ie),j<=ze&&(Re=j+1),ze<=j&&(Ie=j-1)}}function ue(Ne,ze,Re){var Ie=Ne[ze];Ne[ze]=Ne[Re],Ne[Re]=Ie}function Ee(Ne,ze){return Ne<ze?-1:Ne>ze?1:0}return function nt(Ne,ze,Re,Ie,We){Se(Ne,ze,Re||0,Ie||Ne.length-1,We||Ee)}}()},915:(Ut,nt,Se)=>{"use strict";Ut.exports=Ee,Ut.exports.default=Ee;var ue=Se(2972);function Ee(j,X){if(!(this instanceof Ee))return new Ee(j,X);this._maxEntries=Math.max(4,j||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),X&&this._initFormat(X),this.clear()}function Ne(j,X,Y){if(!Y)return X.indexOf(j);for(var we=0;we<X.length;we++)if(Y(j,X[we]))return we;return-1}function ze(j,X){Re(j,0,j.children.length,X,j)}function Re(j,X,Y,we,J){J||(J=Ve(null)),J.minX=1/0,J.minY=1/0,J.maxX=-1/0,J.maxY=-1/0;for(var ce,se=X;se<Y;se++)ce=j.children[se],Ie(J,j.leaf?we(ce):ce);return J}function Ie(j,X){return j.minX=Math.min(j.minX,X.minX),j.minY=Math.min(j.minY,X.minY),j.maxX=Math.max(j.maxX,X.maxX),j.maxY=Math.max(j.maxY,X.maxY),j}function We(j,X){return j.minX-X.minX}function ct(j,X){return j.minY-X.minY}function ft(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function Gt(j){return j.maxX-j.minX+(j.maxY-j.minY)}function Ct(j,X){return(Math.max(X.maxX,j.maxX)-Math.min(X.minX,j.minX))*(Math.max(X.maxY,j.maxY)-Math.min(X.minY,j.minY))}function st(j,X){var Y=Math.max(j.minX,X.minX),we=Math.max(j.minY,X.minY),J=Math.min(j.maxX,X.maxX),se=Math.min(j.maxY,X.maxY);return Math.max(0,J-Y)*Math.max(0,se-we)}function yt(j,X){return j.minX<=X.minX&&j.minY<=X.minY&&X.maxX<=j.maxX&&X.maxY<=j.maxY}function Xt(j,X){return X.minX<=j.maxX&&X.minY<=j.maxY&&X.maxX>=j.minX&&X.maxY>=j.minY}function Ve(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ye(j,X,Y,we,J){for(var ce,se=[X,Y];se.length;)!((Y=se.pop())-(X=se.pop())<=we)&&(ce=X+Math.ceil((Y-X)/we/2)*we,ue(j,ce,X,Y,J),se.push(X,ce,ce,Y))}Ee.prototype={all:function(){return this._all(this.data,[])},search:function(j){var X=this.data,Y=[],we=this.toBBox;if(!Xt(j,X))return Y;for(var se,ce,$,je,J=[];X;){for(se=0,ce=X.children.length;se<ce;se++)$=X.children[se],Xt(j,je=X.leaf?we($):$)&&(X.leaf?Y.push($):yt(j,je)?this._all($,Y):J.push($));X=J.pop()}return Y},collides:function(j){var X=this.data,Y=this.toBBox;if(!Xt(j,X))return!1;for(var J,se,ce,$,we=[];X;){for(J=0,se=X.children.length;J<se;J++)if(ce=X.children[J],Xt(j,$=X.leaf?Y(ce):ce)){if(X.leaf||yt(j,$))return!0;we.push(ce)}X=we.pop()}return!1},load:function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var X=0,Y=j.length;X<Y;X++)this.insert(j[X]);return this}var we=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===we.height)this._splitRoot(this.data,we);else{if(this.data.height<we.height){var J=this.data;this.data=we,we=J}this._insert(we,this.data.height-we.height-1,!0)}else this.data=we;return this},insert:function(j){return j&&this._insert(j,this.data.height-1),this},clear:function(){return this.data=Ve([]),this},remove:function(j,X){if(!j)return this;for(var ce,$,je,Be,Y=this.data,we=this.toBBox(j),J=[],se=[];Y||J.length;){if(Y||(Y=J.pop(),$=J[J.length-1],ce=se.pop(),Be=!0),Y.leaf&&-1!==(je=Ne(j,Y.children,X)))return Y.children.splice(je,1),J.push(Y),this._condense(J),this;Be||Y.leaf||!yt(Y,we)?$?(ce++,Y=$.children[ce],Be=!1):Y=null:(J.push(Y),se.push(ce),ce=0,$=Y,Y=Y.children[0])}return this},toBBox:function(j){return j},compareMinX:We,compareMinY:ct,toJSON:function(){return this.data},fromJSON:function(j){return this.data=j,this},_all:function(j,X){for(var Y=[];j;)j.leaf?X.push.apply(X,j.children):Y.push.apply(Y,j.children),j=Y.pop();return X},_build:function(j,X,Y,we){var ce,J=Y-X+1,se=this._maxEntries;if(J<=se)return ze(ce=Ve(j.slice(X,Y+1)),this.toBBox),ce;we||(we=Math.ceil(Math.log(J)/Math.log(se)),se=Math.ceil(J/Math.pow(se,we-1))),(ce=Ve([])).leaf=!1,ce.height=we;var Be,He,oe,Pt,$=Math.ceil(J/se),je=$*Math.ceil(Math.sqrt(se));for(Ye(j,X,Y,je,this.compareMinX),Be=X;Be<=Y;Be+=je)for(Ye(j,Be,oe=Math.min(Be+je-1,Y),$,this.compareMinY),He=Be;He<=oe;He+=$)Pt=Math.min(He+$-1,oe),ce.children.push(this._build(j,He,Pt,we-1));return ze(ce,this.toBBox),ce},_chooseSubtree:function(j,X,Y,we){for(var J,se,ce,$,je,Be,He,oe;we.push(X),!X.leaf&&we.length-1!==Y;){for(He=oe=1/0,J=0,se=X.children.length;J<se;J++)je=ft(ce=X.children[J]),(Be=Ct(j,ce)-je)<oe?(oe=Be,He=je<He?je:He,$=ce):Be===oe&&je<He&&(He=je,$=ce);X=$||X.children[0]}return X},_insert:function(j,X,Y){var J=Y?j:(0,this.toBBox)(j),se=[],ce=this._chooseSubtree(J,this.data,X,se);for(ce.children.push(j),Ie(ce,J);X>=0&&se[X].children.length>this._maxEntries;)this._split(se,X),X--;this._adjustParentBBoxes(J,se,X)},_split:function(j,X){var Y=j[X],we=Y.children.length,J=this._minEntries;this._chooseSplitAxis(Y,J,we);var se=this._chooseSplitIndex(Y,J,we),ce=Ve(Y.children.splice(se,Y.children.length-se));ce.height=Y.height,ce.leaf=Y.leaf,ze(Y,this.toBBox),ze(ce,this.toBBox),X?j[X-1].children.push(ce):this._splitRoot(Y,ce)},_splitRoot:function(j,X){this.data=Ve([j,X]),this.data.height=j.height+1,this.data.leaf=!1,ze(this.data,this.toBBox)},_chooseSplitIndex:function(j,X,Y){var we,J,se,ce,$,je,Be,He;for(je=Be=1/0,we=X;we<=Y-X;we++)ce=st(J=Re(j,0,we,this.toBBox),se=Re(j,we,Y,this.toBBox)),$=ft(J)+ft(se),ce<je?(je=ce,He=we,Be=$<Be?$:Be):ce===je&&$<Be&&(Be=$,He=we);return He},_chooseSplitAxis:function(j,X,Y){var we=j.leaf?this.compareMinX:We,J=j.leaf?this.compareMinY:ct;this._allDistMargin(j,X,Y,we)<this._allDistMargin(j,X,Y,J)&&j.children.sort(we)},_allDistMargin:function(j,X,Y,we){j.children.sort(we);var je,Be,J=this.toBBox,se=Re(j,0,X,J),ce=Re(j,Y-X,Y,J),$=Gt(se)+Gt(ce);for(je=X;je<Y-X;je++)Be=j.children[je],Ie(se,j.leaf?J(Be):Be),$+=Gt(se);for(je=Y-X-1;je>=X;je--)Be=j.children[je],Ie(ce,j.leaf?J(Be):Be),$+=Gt(ce);return $},_adjustParentBBoxes:function(j,X,Y){for(var we=Y;we>=0;we--)Ie(X[we],j)},_condense:function(j){for(var Y,X=j.length-1;X>=0;X--)0===j[X].children.length?X>0?(Y=j[X-1].children).splice(Y.indexOf(j[X]),1):this.clear():ze(j[X],this.toBBox)},_initFormat:function(j){var X=["return a"," - b",";"];this.compareMinX=new Function("a","b",X.join(j[0])),this.compareMinY=new Function("a","b",X.join(j[1])),this.toBBox=new Function("a","return {minX: a"+j[0]+", minY: a"+j[1]+", maxX: a"+j[2]+", maxY: a"+j[3]+"};")}}},8275:(Ut,nt)=>{"use strict";function Se(Be,He,oe){void 0===oe&&(oe={});var Pt={type:"Feature"};return(0===oe.id||oe.id)&&(Pt.id=oe.id),oe.bbox&&(Pt.bbox=oe.bbox),Pt.properties=He||{},Pt.geometry=Be,Pt}function Ee(Be,He,oe){if(void 0===oe&&(oe={}),!Be)throw new Error("coordinates is required");if(!Array.isArray(Be))throw new Error("coordinates must be an Array");if(Be.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!se(Be[0])||!se(Be[1]))throw new Error("coordinates must contain numbers");return Se({type:"Point",coordinates:Be},He,oe)}function ze(Be,He,oe){void 0===oe&&(oe={});for(var Pt=0,At=Be;Pt<At.length;Pt++){var xe=At[Pt];if(xe.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ke=0;Ke<xe[xe.length-1].length;Ke++)if(xe[xe.length-1][Ke]!==xe[0][Ke])throw new Error("First and last Position are not equivalent.")}return Se({type:"Polygon",coordinates:Be},He,oe)}function Ie(Be,He,oe){if(void 0===oe&&(oe={}),Be.length<2)throw new Error("coordinates must be an array of two or more positions");return Se({type:"LineString",coordinates:Be},He,oe)}function ct(Be,He){void 0===He&&(He={});var oe={type:"FeatureCollection"};return He.id&&(oe.id=He.id),He.bbox&&(oe.bbox=He.bbox),oe.features=Be,oe}function ft(Be,He,oe){return void 0===oe&&(oe={}),Se({type:"MultiLineString",coordinates:Be},He,oe)}function Gt(Be,He,oe){return void 0===oe&&(oe={}),Se({type:"MultiPoint",coordinates:Be},He,oe)}function Ct(Be,He,oe){return void 0===oe&&(oe={}),Se({type:"MultiPolygon",coordinates:Be},He,oe)}function Xt(Be,He){void 0===He&&(He="kilometers");var oe=nt.factors[He];if(!oe)throw new Error(He+" units is invalid");return Be*oe}function Ve(Be,He){void 0===He&&(He="kilometers");var oe=nt.factors[He];if(!oe)throw new Error(He+" units is invalid");return Be/oe}function X(Be){return Be%(2*Math.PI)*180/Math.PI}function se(Be){return!isNaN(Be)&&null!==Be&&!Array.isArray(Be)}Object.defineProperty(nt,"__esModule",{value:!0}),nt.earthRadius=6371008.8,nt.factors={centimeters:100*nt.earthRadius,centimetres:100*nt.earthRadius,degrees:nt.earthRadius/111325,feet:3.28084*nt.earthRadius,inches:39.37*nt.earthRadius,kilometers:nt.earthRadius/1e3,kilometres:nt.earthRadius/1e3,meters:nt.earthRadius,metres:nt.earthRadius,miles:nt.earthRadius/1609.344,millimeters:1e3*nt.earthRadius,millimetres:1e3*nt.earthRadius,nauticalmiles:nt.earthRadius/1852,radians:1,yards:1.0936*nt.earthRadius},nt.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/nt.earthRadius,yards:1.0936133},nt.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},nt.feature=Se,nt.geometry=function ue(Be,He,oe){switch(void 0===oe&&(oe={}),Be){case"Point":return Ee(He).geometry;case"LineString":return Ie(He).geometry;case"Polygon":return ze(He).geometry;case"MultiPoint":return Gt(He).geometry;case"MultiLineString":return ft(He).geometry;case"MultiPolygon":return Ct(He).geometry;default:throw new Error(Be+" is invalid")}},nt.point=Ee,nt.points=function Ne(Be,He,oe){return void 0===oe&&(oe={}),ct(Be.map(function(Pt){return Ee(Pt,He)}),oe)},nt.polygon=ze,nt.polygons=function Re(Be,He,oe){return void 0===oe&&(oe={}),ct(Be.map(function(Pt){return ze(Pt,He)}),oe)},nt.lineString=Ie,nt.lineStrings=function We(Be,He,oe){return void 0===oe&&(oe={}),ct(Be.map(function(Pt){return Ie(Pt,He)}),oe)},nt.featureCollection=ct,nt.multiLineString=ft,nt.multiPoint=Gt,nt.multiPolygon=Ct,nt.geometryCollection=function st(Be,He,oe){return void 0===oe&&(oe={}),Se({type:"GeometryCollection",geometries:Be},He,oe)},nt.round=function yt(Be,He){if(void 0===He&&(He=0),He&&!(He>=0))throw new Error("precision must be a positive number");var oe=Math.pow(10,He||0);return Math.round(Be*oe)/oe},nt.radiansToLength=Xt,nt.lengthToRadians=Ve,nt.lengthToDegrees=function Ye(Be,He){return X(Ve(Be,He))},nt.bearingToAzimuth=function j(Be){var He=Be%360;return He<0&&(He+=360),He},nt.radiansToDegrees=X,nt.degreesToRadians=function Y(Be){return Be%360*Math.PI/180},nt.convertLength=function we(Be,He,oe){if(void 0===He&&(He="kilometers"),void 0===oe&&(oe="kilometers"),!(Be>=0))throw new Error("length must be a positive number");return Xt(Ve(Be,He),oe)},nt.convertArea=function J(Be,He,oe){if(void 0===He&&(He="meters"),void 0===oe&&(oe="kilometers"),!(Be>=0))throw new Error("area must be a positive number");var Pt=nt.areaFactors[He];if(!Pt)throw new Error("invalid original units");var At=nt.areaFactors[oe];if(!At)throw new Error("invalid final units");return Be/Pt*At},nt.isNumber=se,nt.isObject=function ce(Be){return!!Be&&Be.constructor===Object},nt.validateBBox=function $(Be){if(!Be)throw new Error("bbox is required");if(!Array.isArray(Be))throw new Error("bbox must be an Array");if(4!==Be.length&&6!==Be.length)throw new Error("bbox must be an Array of 4 or 6 numbers");Be.forEach(function(He){if(!se(He))throw new Error("bbox must only contain numbers")})},nt.validateId=function je(Be){if(!Be)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof Be))throw new Error("id must be a number or a string")}},3269:(Ut,nt,Se)=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});var ue=Se(8275);function Ee(Y,we,J){if(null!==Y)for(var se,ce,$,je,Be,He,oe,xe,Pt=0,At=0,Ke=Y.type,be="FeatureCollection"===Ke,Qe="Feature"===Ke,rt=be?Y.features.length:1,_e=0;_e<rt;_e++){Be=(xe=!!(oe=be?Y.features[_e].geometry:Qe?Y.geometry:Y)&&"GeometryCollection"===oe.type)?oe.geometries.length:1;for(var St=0;St<Be;St++){var Je=0,nn=0;if(null!==(je=xe?oe.geometries[St]:oe)){He=je.coordinates;var vt=je.type;switch(Pt=!J||"Polygon"!==vt&&"MultiPolygon"!==vt?0:1,vt){case null:break;case"Point":if(!1===we(He,At,_e,Je,nn))return!1;At++,Je++;break;case"LineString":case"MultiPoint":for(se=0;se<He.length;se++){if(!1===we(He[se],At,_e,Je,nn))return!1;At++,"MultiPoint"===vt&&Je++}"LineString"===vt&&Je++;break;case"Polygon":case"MultiLineString":for(se=0;se<He.length;se++){for(ce=0;ce<He[se].length-Pt;ce++){if(!1===we(He[se][ce],At,_e,Je,nn))return!1;At++}"MultiLineString"===vt&&Je++,"Polygon"===vt&&nn++}"Polygon"===vt&&Je++;break;case"MultiPolygon":for(se=0;se<He.length;se++){for(nn=0,ce=0;ce<He[se].length;ce++){for($=0;$<He[se][ce].length-Pt;$++){if(!1===we(He[se][ce][$],At,_e,Je,nn))return!1;At++}nn++}Je++}break;case"GeometryCollection":for(se=0;se<je.geometries.length;se++)if(!1===Ee(je.geometries[se],we,J))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ze(Y,we){var J;switch(Y.type){case"FeatureCollection":for(J=0;J<Y.features.length&&!1!==we(Y.features[J].properties,J);J++);break;case"Feature":we(Y.properties,0)}}function Ie(Y,we){if("Feature"===Y.type)we(Y,0);else if("FeatureCollection"===Y.type)for(var J=0;J<Y.features.length&&!1!==we(Y.features[J],J);J++);}function ft(Y,we){var J,se,ce,$,je,Be,He,oe,Pt,At,xe=0,Ke="FeatureCollection"===Y.type,be="Feature"===Y.type,Qe=Ke?Y.features.length:1;for(J=0;J<Qe;J++){for(oe=Ke?Y.features[J].properties:be?Y.properties:{},Pt=Ke?Y.features[J].bbox:be?Y.bbox:void 0,At=Ke?Y.features[J].id:be?Y.id:void 0,je=(He=!!(Be=Ke?Y.features[J].geometry:be?Y.geometry:Y)&&"GeometryCollection"===Be.type)?Be.geometries.length:1,ce=0;ce<je;ce++)if(null!==($=He?Be.geometries[ce]:Be))switch($.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===we($,xe,oe,Pt,At))return!1;break;case"GeometryCollection":for(se=0;se<$.geometries.length;se++)if(!1===we($.geometries[se],xe,oe,Pt,At))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===we(null,xe,oe,Pt,At))return!1;xe++}}function Ct(Y,we){ft(Y,function(J,se,ce,$,je){var He,Be=null===J?null:J.type;switch(Be){case null:case"Point":case"LineString":case"Polygon":return!1!==we(ue.feature(J,ce,{bbox:$,id:je}),se,0)&&void 0}switch(Be){case"MultiPoint":He="Point";break;case"MultiLineString":He="LineString";break;case"MultiPolygon":He="Polygon"}for(var oe=0;oe<J.coordinates.length;oe++)if(!1===we(ue.feature({type:He,coordinates:J.coordinates[oe]},ce),se,oe))return!1})}function yt(Y,we){Ct(Y,function(J,se,ce){var $=0;if(J.geometry){var je=J.geometry.type;if("Point"!==je&&"MultiPoint"!==je){var Be,He=0,oe=0,Pt=0;if(!1===Ee(J,function(At,xe,Ke,be,Qe){if(void 0===Be||se>He||be>oe||Qe>Pt)return Be=At,He=se,oe=be,Pt=Qe,void($=0);var rt=ue.lineString([Be,At],J.properties);if(!1===we(rt,se,ce,Qe,$))return!1;$++,Be=At}))return!1}}})}function Ve(Y,we){if(!Y)throw new Error("geojson is required");Ct(Y,function(J,se,ce){if(null!==J.geometry){var je=J.geometry.coordinates;switch(J.geometry.type){case"LineString":if(!1===we(J,se,ce,0,0))return!1;break;case"Polygon":for(var Be=0;Be<je.length;Be++)if(!1===we(ue.lineString(je[Be],J.properties),se,ce,Be))return!1}}})}nt.coordAll=function ct(Y){var we=[];return Ee(Y,function(J){we.push(J)}),we},nt.coordEach=Ee,nt.coordReduce=function Ne(Y,we,J,se){var ce=J;return Ee(Y,function($,je,Be,He,oe){ce=0===je&&void 0===J?$:we(ce,$,je,Be,He,oe)},se),ce},nt.featureEach=Ie,nt.featureReduce=function We(Y,we,J){var se=J;return Ie(Y,function(ce,$){se=0===$&&void 0===J?ce:we(se,ce,$)}),se},nt.findPoint=function X(Y,we){if(!ue.isObject(we=we||{}))throw new Error("options is invalid");var Be,J=we.featureIndex||0,se=we.multiFeatureIndex||0,ce=we.geometryIndex||0,$=we.coordIndex||0,je=we.properties;switch(Y.type){case"FeatureCollection":J<0&&(J=Y.features.length+J),je=je||Y.features[J].properties,Be=Y.features[J].geometry;break;case"Feature":je=je||Y.properties,Be=Y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Be=Y;break;default:throw new Error("geojson is invalid")}if(null===Be)return null;var He=Be.coordinates;switch(Be.type){case"Point":return ue.point(He,je,we);case"MultiPoint":return se<0&&(se=He.length+se),ue.point(He[se],je,we);case"LineString":return $<0&&($=He.length+$),ue.point(He[$],je,we);case"Polygon":return ce<0&&(ce=He.length+ce),$<0&&($=He[ce].length+$),ue.point(He[ce][$],je,we);case"MultiLineString":return se<0&&(se=He.length+se),$<0&&($=He[se].length+$),ue.point(He[se][$],je,we);case"MultiPolygon":return se<0&&(se=He.length+se),ce<0&&(ce=He[se].length+ce),$<0&&($=He[se][ce].length-$),ue.point(He[se][ce][$],je,we)}throw new Error("geojson is invalid")},nt.findSegment=function j(Y,we){if(!ue.isObject(we=we||{}))throw new Error("options is invalid");var Be,J=we.featureIndex||0,se=we.multiFeatureIndex||0,ce=we.geometryIndex||0,$=we.segmentIndex||0,je=we.properties;switch(Y.type){case"FeatureCollection":J<0&&(J=Y.features.length+J),je=je||Y.features[J].properties,Be=Y.features[J].geometry;break;case"Feature":je=je||Y.properties,Be=Y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Be=Y;break;default:throw new Error("geojson is invalid")}if(null===Be)return null;var He=Be.coordinates;switch(Be.type){case"Point":case"MultiPoint":return null;case"LineString":return $<0&&($=He.length+$-1),ue.lineString([He[$],He[$+1]],je,we);case"Polygon":return ce<0&&(ce=He.length+ce),$<0&&($=He[ce].length+$-1),ue.lineString([He[ce][$],He[ce][$+1]],je,we);case"MultiLineString":return se<0&&(se=He.length+se),$<0&&($=He[se].length+$-1),ue.lineString([He[se][$],He[se][$+1]],je,we);case"MultiPolygon":return se<0&&(se=He.length+se),ce<0&&(ce=He[se].length+ce),$<0&&($=He[se][ce].length-$-1),ue.lineString([He[se][ce][$],He[se][ce][$+1]],je,we)}throw new Error("geojson is invalid")},nt.flattenEach=Ct,nt.flattenReduce=function st(Y,we,J){var se=J;return Ct(Y,function(ce,$,je){se=0===$&&0===je&&void 0===J?ce:we(se,ce,$,je)}),se},nt.geomEach=ft,nt.geomReduce=function Gt(Y,we,J){var se=J;return ft(Y,function(ce,$,je,Be,He){se=0===$&&void 0===J?ce:we(se,ce,$,je,Be,He)}),se},nt.lineEach=Ve,nt.lineReduce=function Ye(Y,we,J){var se=J;return Ve(Y,function(ce,$,je,Be){se=0===$&&void 0===J?ce:we(se,ce,$,je,Be)}),se},nt.propEach=ze,nt.propReduce=function Re(Y,we,J){var se=J;return ze(Y,function(ce,$){se=0===$&&void 0===J?ce:we(se,ce,$)}),se},nt.segmentEach=yt,nt.segmentReduce=function Xt(Y,we,J){var se=J,ce=!1;return yt(Y,function($,je,Be,He,oe){se=!1===ce&&void 0===J?$:we(se,$,je,Be,He,oe),ce=!0}),se}},545:function(Ut){Ut.exports=function(){"use strict";function Se(Ne,ze,Re,Ie,We){for(;Ie>Re;){if(Ie-Re>600){var ct=Ie-Re+1,ft=ze-Re+1,Gt=Math.log(ct),Ct=.5*Math.exp(2*Gt/3),st=.5*Math.sqrt(Gt*Ct*(ct-Ct)/ct)*(ft-ct/2<0?-1:1);Se(Ne,ze,Math.max(Re,Math.floor(ze-ft*Ct/ct+st)),Math.min(Ie,Math.floor(ze+(ct-ft)*Ct/ct+st)),We)}var Ve=Ne[ze],Ye=Re,j=Ie;for(ue(Ne,Re,ze),We(Ne[Ie],Ve)>0&&ue(Ne,Re,Ie);Ye<j;){for(ue(Ne,Ye,j),Ye++,j--;We(Ne[Ye],Ve)<0;)Ye++;for(;We(Ne[j],Ve)>0;)j--}0===We(Ne[Re],Ve)?ue(Ne,Re,j):ue(Ne,++j,Ie),j<=ze&&(Re=j+1),ze<=j&&(Ie=j-1)}}function ue(Ne,ze,Re){var Ie=Ne[ze];Ne[ze]=Ne[Re],Ne[Re]=Ie}function Ee(Ne,ze){return Ne<ze?-1:Ne>ze?1:0}return function nt(Ne,ze,Re,Ie,We){Se(Ne,ze,Re||0,Ie||Ne.length-1,We||Ee)}}()},3237:(Ut,nt,Se)=>{"use strict";Ut.exports=Ee,Ut.exports.default=Ee;var ue=Se(545);function Ee(j,X){if(!(this instanceof Ee))return new Ee(j,X);this._maxEntries=Math.max(4,j||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),X&&this._initFormat(X),this.clear()}function Ne(j,X,Y){if(!Y)return X.indexOf(j);for(var we=0;we<X.length;we++)if(Y(j,X[we]))return we;return-1}function ze(j,X){Re(j,0,j.children.length,X,j)}function Re(j,X,Y,we,J){J||(J=Ve(null)),J.minX=1/0,J.minY=1/0,J.maxX=-1/0,J.maxY=-1/0;for(var ce,se=X;se<Y;se++)ce=j.children[se],Ie(J,j.leaf?we(ce):ce);return J}function Ie(j,X){return j.minX=Math.min(j.minX,X.minX),j.minY=Math.min(j.minY,X.minY),j.maxX=Math.max(j.maxX,X.maxX),j.maxY=Math.max(j.maxY,X.maxY),j}function We(j,X){return j.minX-X.minX}function ct(j,X){return j.minY-X.minY}function ft(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function Gt(j){return j.maxX-j.minX+(j.maxY-j.minY)}function Ct(j,X){return(Math.max(X.maxX,j.maxX)-Math.min(X.minX,j.minX))*(Math.max(X.maxY,j.maxY)-Math.min(X.minY,j.minY))}function st(j,X){var Y=Math.max(j.minX,X.minX),we=Math.max(j.minY,X.minY),J=Math.min(j.maxX,X.maxX),se=Math.min(j.maxY,X.maxY);return Math.max(0,J-Y)*Math.max(0,se-we)}function yt(j,X){return j.minX<=X.minX&&j.minY<=X.minY&&X.maxX<=j.maxX&&X.maxY<=j.maxY}function Xt(j,X){return X.minX<=j.maxX&&X.minY<=j.maxY&&X.maxX>=j.minX&&X.maxY>=j.minY}function Ve(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ye(j,X,Y,we,J){for(var ce,se=[X,Y];se.length;)!((Y=se.pop())-(X=se.pop())<=we)&&(ce=X+Math.ceil((Y-X)/we/2)*we,ue(j,ce,X,Y,J),se.push(X,ce,ce,Y))}Ee.prototype={all:function(){return this._all(this.data,[])},search:function(j){var X=this.data,Y=[],we=this.toBBox;if(!Xt(j,X))return Y;for(var se,ce,$,je,J=[];X;){for(se=0,ce=X.children.length;se<ce;se++)$=X.children[se],Xt(j,je=X.leaf?we($):$)&&(X.leaf?Y.push($):yt(j,je)?this._all($,Y):J.push($));X=J.pop()}return Y},collides:function(j){var X=this.data,Y=this.toBBox;if(!Xt(j,X))return!1;for(var J,se,ce,$,we=[];X;){for(J=0,se=X.children.length;J<se;J++)if(ce=X.children[J],Xt(j,$=X.leaf?Y(ce):ce)){if(X.leaf||yt(j,$))return!0;we.push(ce)}X=we.pop()}return!1},load:function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var X=0,Y=j.length;X<Y;X++)this.insert(j[X]);return this}var we=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===we.height)this._splitRoot(this.data,we);else{if(this.data.height<we.height){var J=this.data;this.data=we,we=J}this._insert(we,this.data.height-we.height-1,!0)}else this.data=we;return this},insert:function(j){return j&&this._insert(j,this.data.height-1),this},clear:function(){return this.data=Ve([]),this},remove:function(j,X){if(!j)return this;for(var ce,$,je,Be,Y=this.data,we=this.toBBox(j),J=[],se=[];Y||J.length;){if(Y||(Y=J.pop(),$=J[J.length-1],ce=se.pop(),Be=!0),Y.leaf&&-1!==(je=Ne(j,Y.children,X)))return Y.children.splice(je,1),J.push(Y),this._condense(J),this;Be||Y.leaf||!yt(Y,we)?$?(ce++,Y=$.children[ce],Be=!1):Y=null:(J.push(Y),se.push(ce),ce=0,$=Y,Y=Y.children[0])}return this},toBBox:function(j){return j},compareMinX:We,compareMinY:ct,toJSON:function(){return this.data},fromJSON:function(j){return this.data=j,this},_all:function(j,X){for(var Y=[];j;)j.leaf?X.push.apply(X,j.children):Y.push.apply(Y,j.children),j=Y.pop();return X},_build:function(j,X,Y,we){var ce,J=Y-X+1,se=this._maxEntries;if(J<=se)return ze(ce=Ve(j.slice(X,Y+1)),this.toBBox),ce;we||(we=Math.ceil(Math.log(J)/Math.log(se)),se=Math.ceil(J/Math.pow(se,we-1))),(ce=Ve([])).leaf=!1,ce.height=we;var Be,He,oe,Pt,$=Math.ceil(J/se),je=$*Math.ceil(Math.sqrt(se));for(Ye(j,X,Y,je,this.compareMinX),Be=X;Be<=Y;Be+=je)for(Ye(j,Be,oe=Math.min(Be+je-1,Y),$,this.compareMinY),He=Be;He<=oe;He+=$)Pt=Math.min(He+$-1,oe),ce.children.push(this._build(j,He,Pt,we-1));return ze(ce,this.toBBox),ce},_chooseSubtree:function(j,X,Y,we){for(var J,se,ce,$,je,Be,He,oe;we.push(X),!X.leaf&&we.length-1!==Y;){for(He=oe=1/0,J=0,se=X.children.length;J<se;J++)je=ft(ce=X.children[J]),(Be=Ct(j,ce)-je)<oe?(oe=Be,He=je<He?je:He,$=ce):Be===oe&&je<He&&(He=je,$=ce);X=$||X.children[0]}return X},_insert:function(j,X,Y){var J=Y?j:(0,this.toBBox)(j),se=[],ce=this._chooseSubtree(J,this.data,X,se);for(ce.children.push(j),Ie(ce,J);X>=0&&se[X].children.length>this._maxEntries;)this._split(se,X),X--;this._adjustParentBBoxes(J,se,X)},_split:function(j,X){var Y=j[X],we=Y.children.length,J=this._minEntries;this._chooseSplitAxis(Y,J,we);var se=this._chooseSplitIndex(Y,J,we),ce=Ve(Y.children.splice(se,Y.children.length-se));ce.height=Y.height,ce.leaf=Y.leaf,ze(Y,this.toBBox),ze(ce,this.toBBox),X?j[X-1].children.push(ce):this._splitRoot(Y,ce)},_splitRoot:function(j,X){this.data=Ve([j,X]),this.data.height=j.height+1,this.data.leaf=!1,ze(this.data,this.toBBox)},_chooseSplitIndex:function(j,X,Y){var we,J,se,ce,$,je,Be,He;for(je=Be=1/0,we=X;we<=Y-X;we++)ce=st(J=Re(j,0,we,this.toBBox),se=Re(j,we,Y,this.toBBox)),$=ft(J)+ft(se),ce<je?(je=ce,He=we,Be=$<Be?$:Be):ce===je&&$<Be&&(Be=$,He=we);return He},_chooseSplitAxis:function(j,X,Y){var we=j.leaf?this.compareMinX:We,J=j.leaf?this.compareMinY:ct;this._allDistMargin(j,X,Y,we)<this._allDistMargin(j,X,Y,J)&&j.children.sort(we)},_allDistMargin:function(j,X,Y,we){j.children.sort(we);var je,Be,J=this.toBBox,se=Re(j,0,X,J),ce=Re(j,Y-X,Y,J),$=Gt(se)+Gt(ce);for(je=X;je<Y-X;je++)Be=j.children[je],Ie(se,j.leaf?J(Be):Be),$+=Gt(se);for(je=Y-X-1;je>=X;je--)Be=j.children[je],Ie(ce,j.leaf?J(Be):Be),$+=Gt(ce);return $},_adjustParentBBoxes:function(j,X,Y){for(var we=Y;we>=0;we--)Ie(X[we],j)},_condense:function(j){for(var Y,X=j.length-1;X>=0;X--)0===j[X].children.length?X>0?(Y=j[X-1].children).splice(Y.indexOf(j[X]),1):this.clear():ze(j[X],this.toBBox)},_initFormat:function(j){var X=["return a"," - b",";"];this.compareMinX=new Function("a","b",X.join(j[0])),this.compareMinY=new Function("a","b",X.join(j[1])),this.toBBox=new Function("a","return {minX: a"+j[0]+", minY: a"+j[1]+", maxX: a"+j[2]+", maxY: a"+j[3]+"};")}}},5834:(Ut,nt,Se)=>{"use strict";var ue=Se(5203),Ee=Se(5685),Ne=Ee(ue("String.prototype.indexOf"));Ut.exports=function(Re,Ie){var We=ue(Re,!!Ie);return"function"==typeof We&&Ne(Re,".prototype.")>-1?Ee(We):We}},5685:(Ut,nt,Se)=>{"use strict";var ue=Se(4444),Ee=Se(5203),Ne=Ee("%Function.prototype.apply%"),ze=Ee("%Function.prototype.call%"),Re=Ee("%Reflect.apply%",!0)||ue.call(ze,Ne),Ie=Ee("%Object.getOwnPropertyDescriptor%",!0),We=Ee("%Object.defineProperty%",!0),ct=Ee("%Math.max%");if(We)try{We({},"a",{value:1})}catch{We=null}Ut.exports=function(Ct){var st=Re(ue,ze,arguments);if(Ie&&We){var yt=Ie(st,"length");yt.configurable&&We(st,"length",{value:1+ct(0,Ct.length-(arguments.length-1))})}return st};var ft=function(){return Re(ue,Ne,arguments)};We?We(Ut.exports,"apply",{value:ft}):Ut.exports.apply=ft},1335:(Ut,nt,Se)=>{"use strict";var ue=Se(2402),Ee=Se(7253),Ne=Se(3870),ze=Se(5485).orient2d;function Re(J,se,ce){se=Math.max(0,void 0===se?2:se),ce=ce||0;var $=function Xt(J){for(var se=J[0],ce=J[0],$=J[0],je=J[0],Be=0;Be<J.length;Be++){var He=J[Be];He[0]<se[0]&&(se=He),He[0]>$[0]&&($=He),He[1]<ce[1]&&(ce=He),He[1]>je[1]&&(je=He)}var oe=[se,ce,$,je],Pt=oe.slice();for(Be=0;Be<J.length;Be++)Ne(J[Be],oe)||Pt.push(J[Be]);return function we(J){J.sort(Y);for(var se=[],ce=0;ce<J.length;ce++){for(;se.length>=2&&Ct(se[se.length-2],se[se.length-1],J[ce])<=0;)se.pop();se.push(J[ce])}for(var $=[],je=J.length-1;je>=0;je--){for(;$.length>=2&&Ct($[$.length-2],$[$.length-1],J[je])<=0;)$.pop();$.push(J[je])}return $.pop(),se.pop(),se.concat($)}(Pt)}(J),je=new ue(16);je.toBBox=function(nn){return{minX:nn[0],minY:nn[1],maxX:nn[0],maxY:nn[1]}},je.compareMinX=function(nn,vt){return nn[0]-vt[0]},je.compareMinY=function(nn,vt){return nn[1]-vt[1]},je.load(J);for(var oe,Be=[],He=0;He<$.length;He++){var Pt=$[He];je.remove(Pt),oe=Ve(Pt,oe),Be.push(oe)}var At=new ue(16);for(He=0;He<Be.length;He++)At.insert(yt(Be[He]));for(var xe=se*se,Ke=ce*ce;Be.length;){var be=Be.shift(),Qe=be.p,rt=be.next.p,_e=Ye(Qe,rt);if(!(_e<Ke)){var St=_e/xe;(Pt=Ie(je,be.prev.p,Qe,rt,be.next.next.p,St,At))&&Math.min(Ye(Pt,Qe),Ye(Pt,rt))<=St&&(Be.push(be),Be.push(Ve(Pt,be)),je.remove(Pt),At.remove(be),At.insert(yt(be)),At.insert(yt(be.next)))}}be=oe;var Je=[];do{Je.push(be.p),be=be.next}while(be!==oe);return Je.push(be.p),Je}function Ie(J,se,ce,$,je,Be,He){for(var oe=new Ee([],We),Pt=J.data;Pt;){for(var At=0;At<Pt.children.length;At++){var xe=Pt.children[At],Ke=Pt.leaf?j(xe,ce,$):ct(ce,$,xe);Ke>Be||oe.push({node:xe,dist:Ke})}for(;oe.length&&!oe.peek().node.children;){var be=oe.pop(),Qe=be.node,rt=j(Qe,se,ce),_e=j(Qe,$,je);if(be.dist<rt&&be.dist<_e&&Gt(ce,Qe,He)&&Gt($,Qe,He))return Qe}(Pt=oe.pop())&&(Pt=Pt.node)}return null}function We(J,se){return J.dist-se.dist}function ct(J,se,ce){if(ft(J,ce)||ft(se,ce))return 0;var $=X(J[0],J[1],se[0],se[1],ce.minX,ce.minY,ce.maxX,ce.minY);if(0===$)return 0;var je=X(J[0],J[1],se[0],se[1],ce.minX,ce.minY,ce.minX,ce.maxY);if(0===je)return 0;var Be=X(J[0],J[1],se[0],se[1],ce.maxX,ce.minY,ce.maxX,ce.maxY);if(0===Be)return 0;var He=X(J[0],J[1],se[0],se[1],ce.minX,ce.maxY,ce.maxX,ce.maxY);return 0===He?0:Math.min($,je,Be,He)}function ft(J,se){return J[0]>=se.minX&&J[0]<=se.maxX&&J[1]>=se.minY&&J[1]<=se.maxY}function Gt(J,se,ce){for(var $=Math.min(J[0],se[0]),je=Math.min(J[1],se[1]),Be=Math.max(J[0],se[0]),He=Math.max(J[1],se[1]),oe=ce.search({minX:$,minY:je,maxX:Be,maxY:He}),Pt=0;Pt<oe.length;Pt++)if(st(oe[Pt].p,oe[Pt].next.p,J,se))return!1;return!0}function Ct(J,se,ce){return ze(J[0],J[1],se[0],se[1],ce[0],ce[1])}function st(J,se,ce,$){return J!==$&&se!==ce&&Ct(J,se,ce)>0!=Ct(J,se,$)>0&&Ct(ce,$,J)>0!=Ct(ce,$,se)>0}function yt(J){var se=J.p,ce=J.next.p;return J.minX=Math.min(se[0],ce[0]),J.minY=Math.min(se[1],ce[1]),J.maxX=Math.max(se[0],ce[0]),J.maxY=Math.max(se[1],ce[1]),J}function Ve(J,se){var ce={p:J,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return se?(ce.next=se.next,ce.prev=se,se.next.prev=ce,se.next=ce):(ce.prev=ce,ce.next=ce),ce}function Ye(J,se){var ce=J[0]-se[0],$=J[1]-se[1];return ce*ce+$*$}function j(J,se,ce){var $=se[0],je=se[1],Be=ce[0]-$,He=ce[1]-je;if(0!==Be||0!==He){var oe=((J[0]-$)*Be+(J[1]-je)*He)/(Be*Be+He*He);oe>1?($=ce[0],je=ce[1]):oe>0&&($+=Be*oe,je+=He*oe)}return(Be=J[0]-$)*Be+(He=J[1]-je)*He}function X(J,se,ce,$,je,Be,He,oe){var xn,_n,li,qt,Pt=ce-J,At=$-se,xe=He-je,Ke=oe-Be,be=J-je,Qe=se-Be,rt=Pt*Pt+At*At,_e=Pt*xe+At*Ke,St=xe*xe+Ke*Ke,Je=Pt*be+At*Qe,nn=xe*be+Ke*Qe,vt=rt*St-_e*_e,$n=vt,on=vt;0===vt?(_n=0,$n=1,qt=nn,on=St):(qt=rt*nn-_e*Je,(_n=_e*nn-St*Je)<0?(_n=0,qt=nn,on=St):_n>$n&&(_n=$n,qt=nn+_e,on=St)),qt<0?(qt=0,-Je<0?_n=0:-Je>rt?_n=$n:(_n=-Je,$n=rt)):qt>on&&(qt=on,-Je+_e<0?_n=0:-Je+_e>rt?_n=$n:(_n=-Je+_e,$n=rt));var vi=(1-(li=0===qt?0:qt/on))*je+li*He-((1-(xn=0===_n?0:_n/$n))*J+xn*ce),it=(1-li)*Be+li*oe-((1-xn)*se+xn*$);return vi*vi+it*it}function Y(J,se){return J[0]===se[0]?J[1]-se[1]:J[0]-se[0]}Ee.default&&(Ee=Ee.default),Ut.exports=Re,Ut.exports.default=Re},5485:function(Ut,nt){!function(Se){"use strict";function Ne(yt,Xt,Ve,Ye,j){let X,Y,we,J,se=Xt[0],ce=Ye[0],$=0,je=0;ce>se==ce>-se?(X=se,se=Xt[++$]):(X=ce,ce=Ye[++je]);let Be=0;if($<yt&&je<Ve)for(ce>se==ce>-se?(we=X-((Y=se+X)-se),se=Xt[++$]):(we=X-((Y=ce+X)-ce),ce=Ye[++je]),X=Y,0!==we&&(j[Be++]=we);$<yt&&je<Ve;)ce>se==ce>-se?(we=X-((Y=X+se)-(J=Y-X))+(se-J),se=Xt[++$]):(we=X-((Y=X+ce)-(J=Y-X))+(ce-J),ce=Ye[++je]),X=Y,0!==we&&(j[Be++]=we);for(;$<yt;)we=X-((Y=X+se)-(J=Y-X))+(se-J),se=Xt[++$],X=Y,0!==we&&(j[Be++]=we);for(;je<Ve;)we=X-((Y=X+ce)-(J=Y-X))+(ce-J),ce=Ye[++je],X=Y,0!==we&&(j[Be++]=we);return 0===X&&0!==Be||(j[Be++]=X),Be}function ze(yt){return new Float64Array(yt)}const ct=ze(4),ft=ze(8),Gt=ze(12),Ct=ze(16),st=ze(4);Se.orient2d=function(yt,Xt,Ve,Ye,j,X){const Y=(Xt-X)*(Ve-j),we=(yt-j)*(Ye-X),J=Y-we;if(0===Y||0===we||Y>0!=we>0)return J;const se=Math.abs(Y+we);return Math.abs(J)>=33306690738754716e-32*se?J:-function(ce,$,je,Be,He,oe,Pt){let At,xe,Ke,be,Qe,rt,_e,St,Je,nn,vt,xn,_n,li,qt,$n,on,Fs;const ws=ce-He,Zs=je-He,gi=$-oe,vi=Be-oe;Qe=(qt=(St=ws-(_e=(rt=134217729*ws)-(rt-ws)))*(nn=vi-(Je=(rt=134217729*vi)-(rt-vi)))-((li=ws*vi)-_e*Je-St*Je-_e*nn))-(vt=qt-(on=(St=gi-(_e=(rt=134217729*gi)-(rt-gi)))*(nn=Zs-(Je=(rt=134217729*Zs)-(rt-Zs)))-(($n=gi*Zs)-_e*Je-St*Je-_e*nn))),ct[0]=qt-(vt+Qe)+(Qe-on),Qe=(_n=li-((xn=li+vt)-(Qe=xn-li))+(vt-Qe))-(vt=_n-$n),ct[1]=_n-(vt+Qe)+(Qe-$n),Qe=(Fs=xn+vt)-xn,ct[2]=xn-(Fs-Qe)+(vt-Qe),ct[3]=Fs;let it=function(qe,mt){let Qt=mt[0];for(let Yt=1;Yt<4;Yt++)Qt+=mt[Yt];return Qt}(0,ct),le=22204460492503146e-32*Pt;if(it>=le||-it>=le||(At=ce-(ws+(Qe=ce-ws))+(Qe-He),Ke=je-(Zs+(Qe=je-Zs))+(Qe-He),xe=$-(gi+(Qe=$-gi))+(Qe-oe),be=Be-(vi+(Qe=Be-vi))+(Qe-oe),0===At&&0===xe&&0===Ke&&0===be)||(le=11093356479670487e-47*Pt+33306690738754706e-32*Math.abs(it),(it+=ws*be+vi*At-(gi*Ke+Zs*xe))>=le||-it>=le))return it;Qe=(qt=(St=At-(_e=(rt=134217729*At)-(rt-At)))*(nn=vi-(Je=(rt=134217729*vi)-(rt-vi)))-((li=At*vi)-_e*Je-St*Je-_e*nn))-(vt=qt-(on=(St=xe-(_e=(rt=134217729*xe)-(rt-xe)))*(nn=Zs-(Je=(rt=134217729*Zs)-(rt-Zs)))-(($n=xe*Zs)-_e*Je-St*Je-_e*nn))),st[0]=qt-(vt+Qe)+(Qe-on),Qe=(_n=li-((xn=li+vt)-(Qe=xn-li))+(vt-Qe))-(vt=_n-$n),st[1]=_n-(vt+Qe)+(Qe-$n),Qe=(Fs=xn+vt)-xn,st[2]=xn-(Fs-Qe)+(vt-Qe),st[3]=Fs;const te=Ne(4,ct,4,st,ft);Qe=(qt=(St=ws-(_e=(rt=134217729*ws)-(rt-ws)))*(nn=be-(Je=(rt=134217729*be)-(rt-be)))-((li=ws*be)-_e*Je-St*Je-_e*nn))-(vt=qt-(on=(St=gi-(_e=(rt=134217729*gi)-(rt-gi)))*(nn=Ke-(Je=(rt=134217729*Ke)-(rt-Ke)))-(($n=gi*Ke)-_e*Je-St*Je-_e*nn))),st[0]=qt-(vt+Qe)+(Qe-on),Qe=(_n=li-((xn=li+vt)-(Qe=xn-li))+(vt-Qe))-(vt=_n-$n),st[1]=_n-(vt+Qe)+(Qe-$n),Qe=(Fs=xn+vt)-xn,st[2]=xn-(Fs-Qe)+(vt-Qe),st[3]=Fs;const ee=Ne(te,ft,4,st,Gt);Qe=(qt=(St=At-(_e=(rt=134217729*At)-(rt-At)))*(nn=be-(Je=(rt=134217729*be)-(rt-be)))-((li=At*be)-_e*Je-St*Je-_e*nn))-(vt=qt-(on=(St=xe-(_e=(rt=134217729*xe)-(rt-xe)))*(nn=Ke-(Je=(rt=134217729*Ke)-(rt-Ke)))-(($n=xe*Ke)-_e*Je-St*Je-_e*nn))),st[0]=qt-(vt+Qe)+(Qe-on),Qe=(_n=li-((xn=li+vt)-(Qe=xn-li))+(vt-Qe))-(vt=_n-$n),st[1]=_n-(vt+Qe)+(Qe-$n),Qe=(Fs=xn+vt)-xn,st[2]=xn-(Fs-Qe)+(vt-Qe),st[3]=Fs;const Le=Ne(ee,Gt,4,st,Ct);return Ct[Le-1]}(yt,Xt,Ve,Ye,j,X,se)},Se.orient2dfast=function(yt,Xt,Ve,Ye,j,X){return(Xt-X)*(Ve-j)-(yt-j)*(Ye-X)},Object.defineProperty(Se,"__esModule",{value:!0})}(nt)},6952:(Ut,nt,Se)=>{var ue=Se(1356),Ee=Se(3407),Ne=Se(2e3),ze=Se(2342),Re=Se(9235),Ie=Se(2374),We=Date.prototype.getTime;function ft(st){return null==st}function Gt(st){return!(!st||"object"!=typeof st||"number"!=typeof st.length||"function"!=typeof st.copy||"function"!=typeof st.slice||st.length>0&&"number"!=typeof st[0])}Ut.exports=function ct(st,yt,Xt){var Ve=Xt||{};return!!(Ve.strict?Ne(st,yt):st===yt)||(!st||!yt||"object"!=typeof st&&"object"!=typeof yt?Ve.strict?Ne(st,yt):st==yt:function Ct(st,yt,Xt){var Ve,Ye;if(typeof st!=typeof yt||ft(st)||ft(yt)||st.prototype!==yt.prototype||Ee(st)!==Ee(yt))return!1;var j=ze(st),X=ze(yt);if(j!==X)return!1;if(j||X)return st.source===yt.source&&Re(st)===Re(yt);if(Ie(st)&&Ie(yt))return We.call(st)===We.call(yt);var Y=Gt(st),we=Gt(yt);if(Y!==we)return!1;if(Y||we){if(st.length!==yt.length)return!1;for(Ve=0;Ve<st.length;Ve++)if(st[Ve]!==yt[Ve])return!1;return!0}if(typeof st!=typeof yt)return!1;try{var J=ue(st),se=ue(yt)}catch{return!1}if(J.length!==se.length)return!1;for(J.sort(),se.sort(),Ve=J.length-1;Ve>=0;Ve--)if(J[Ve]!=se[Ve])return!1;for(Ve=J.length-1;Ve>=0;Ve--)if(!ct(st[Ye=J[Ve]],yt[Ye],Xt))return!1;return!0}(st,yt,Ve))}},2358:(Ut,nt,Se)=>{"use strict";var ue=Se(1356),Ee="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Ne=Object.prototype.toString,ze=Array.prototype.concat,Re=Object.defineProperty,We=Se(7027)(),ct=Re&&We,ft=function(Ct,st,yt,Xt){st in Ct&&(!function(Ct){return"function"==typeof Ct&&"[object Function]"===Ne.call(Ct)}(Xt)||!Xt())||(ct?Re(Ct,st,{configurable:!0,enumerable:!1,value:yt,writable:!0}):Ct[st]=yt)},Gt=function(Ct,st){var yt=arguments.length>2?arguments[2]:{},Xt=ue(st);Ee&&(Xt=ze.call(Xt,Object.getOwnPropertySymbols(st)));for(var Ve=0;Ve<Xt.length;Ve+=1)ft(Ct,Xt[Ve],st[Xt[Ve]],yt[Xt[Ve]])};Gt.supportsDescriptors=!!ct,Ut.exports=Gt},1817:Ut=>{function nt(Se,ue,Ee,Ne){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(Se,ue,Ee,Ne)}nt.prototype.run=function(Se,ue,Ee,Ne){this._init(Se,ue,Ee,Ne);for(var ze=0;ze<this._datasetLength;ze++)if(1!==this._visited[ze]){this._visited[ze]=1;var Re=this._regionQuery(ze);if(Re.length<this.minPts)this.noise.push(ze);else{var Ie=this.clusters.length;this.clusters.push([]),this._addToCluster(ze,Ie),this._expandCluster(Ie,Re)}}return this.clusters},nt.prototype._init=function(Se,ue,Ee,Ne){if(Se){if(!(Se instanceof Array))throw Error("Dataset must be of type array, "+typeof Se+" given");this.dataset=Se,this.clusters=[],this.noise=[],this._datasetLength=Se.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}ue&&(this.epsilon=ue),Ee&&(this.minPts=Ee),Ne&&(this.distance=Ne)},nt.prototype._expandCluster=function(Se,ue){for(var Ee=0;Ee<ue.length;Ee++){var Ne=ue[Ee];if(1!==this._visited[Ne]){this._visited[Ne]=1;var ze=this._regionQuery(Ne);ze.length>=this.minPts&&(ue=this._mergeArrays(ue,ze))}1!==this._assigned[Ne]&&this._addToCluster(Ne,Se)}},nt.prototype._addToCluster=function(Se,ue){this.clusters[ue].push(Se),this._assigned[Se]=1},nt.prototype._regionQuery=function(Se){for(var ue=[],Ee=0;Ee<this._datasetLength;Ee++)this.distance(this.dataset[Se],this.dataset[Ee])<this.epsilon&&ue.push(Ee);return ue},nt.prototype._mergeArrays=function(Se,ue){for(var Ee=ue.length,Ne=0;Ne<Ee;Ne++){var ze=ue[Ne];Se.indexOf(ze)<0&&Se.push(ze)}return Se},nt.prototype._euclideanDistance=function(Se,ue){for(var Ee=0,Ne=Math.min(Se.length,ue.length);Ne--;)Ee+=(Se[Ne]-ue[Ne])*(Se[Ne]-ue[Ne]);return Math.sqrt(Ee)},Ut.exports&&(Ut.exports=nt)},4273:Ut=>{function nt(Se,ue,Ee){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(Se,ue,Ee)}nt.prototype.init=function(Se,ue,Ee){this.assignments=[],this.centroids=[],typeof Se<"u"&&(this.dataset=Se),typeof ue<"u"&&(this.k=ue),typeof Ee<"u"&&(this.distance=Ee)},nt.prototype.run=function(Se,ue){this.init(Se,ue);for(var Ee=this.dataset.length,Ne=0;Ne<this.k;Ne++)this.centroids[Ne]=this.randomCentroid();for(var ze=!0;ze;){ze=this.assign();for(var Re=0;Re<this.k;Re++){for(var Ie=new Array(Gt),We=0,ct=0;ct<Gt;ct++)Ie[ct]=0;for(var ft=0;ft<Ee;ft++){var Gt=this.dataset[ft].length;if(Re===this.assignments[ft]){for(ct=0;ct<Gt;ct++)Ie[ct]+=this.dataset[ft][ct];We++}}if(We>0){for(ct=0;ct<Gt;ct++)Ie[ct]/=We;this.centroids[Re]=Ie}else this.centroids[Re]=this.randomCentroid(),ze=!0}}return this.getClusters()},nt.prototype.randomCentroid=function(){var ue,Ee,Se=this.dataset.length-1;do{Ee=Math.round(Math.random()*Se),ue=this.dataset[Ee]}while(this.centroids.indexOf(ue)>=0);return ue},nt.prototype.assign=function(){for(var Ee,Se=!1,ue=this.dataset.length,Ne=0;Ne<ue;Ne++)(Ee=this.argmin(this.dataset[Ne],this.centroids,this.distance))!=this.assignments[Ne]&&(this.assignments[Ne]=Ee,Se=!0);return Se},nt.prototype.getClusters=function(){for(var ue,Se=new Array(this.k),Ee=0;Ee<this.assignments.length;Ee++)typeof Se[ue=this.assignments[Ee]]>"u"&&(Se[ue]=[]),Se[ue].push(Ee);return Se},nt.prototype.argmin=function(Se,ue,Ee){for(var Ie,Ne=Number.MAX_VALUE,ze=0,Re=ue.length,We=0;We<Re;We++)(Ie=Ee(Se,ue[We]))<Ne&&(Ne=Ie,ze=We);return ze},nt.prototype.distance=function(Se,ue){for(var Ee=0,Ne=Math.min(Se.length,ue.length);Ne--;){var ze=Se[Ne]-ue[Ne];Ee+=ze*ze}return Math.sqrt(Ee)},Ut.exports&&(Ut.exports=nt)},8680:(Ut,nt,Se)=>{if(Ut.exports)var ue=Se(8759);function Ee(Ne,ze,Re,Ie){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Ne,ze,Re,Ie)}Ee.prototype.run=function(Ne,ze,Re,Ie){this._init(Ne,ze,Re,Ie);for(var We=0,ct=this.dataset.length;We<ct;We++)if(1!==this._processed[We]){this._processed[We]=1,this.clusters.push([We]);var ft=this.clusters.length-1;this._orderedList.push(We);var Gt=new ue(null,null,"asc"),Ct=this._regionQuery(We);void 0!==this._distanceToCore(We)&&(this._updateQueue(We,Ct,Gt),this._expandCluster(ft,Gt))}return this.clusters},Ee.prototype.getReachabilityPlot=function(){for(var Ne=[],ze=0,Re=this._orderedList.length;ze<Re;ze++){var Ie=this._orderedList[ze];Ne.push([Ie,this._reachability[Ie]])}return Ne},Ee.prototype._init=function(Ne,ze,Re,Ie){if(Ne){if(!(Ne instanceof Array))throw Error("Dataset must be of type array, "+typeof Ne+" given");this.dataset=Ne,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}ze&&(this.epsilon=ze),Re&&(this.minPts=Re),Ie&&(this.distance=Ie)},Ee.prototype._updateQueue=function(Ne,ze,Re){var Ie=this;this._coreDistance=this._distanceToCore(Ne),ze.forEach(function(We){if(void 0===Ie._processed[We]){var ct=Ie.distance(Ie.dataset[Ne],Ie.dataset[We]),ft=Math.max(Ie._coreDistance,ct);void 0===Ie._reachability[We]?(Ie._reachability[We]=ft,Re.insert(We,ft)):ft<Ie._reachability[We]&&(Ie._reachability[We]=ft,Re.remove(We),Re.insert(We,ft))}})},Ee.prototype._expandCluster=function(Ne,ze){for(var Re=ze.getElements(),Ie=0,We=Re.length;Ie<We;Ie++){var ct=Re[Ie];if(void 0===this._processed[ct]){var ft=this._regionQuery(ct);this._processed[ct]=1,this.clusters[Ne].push(ct),this._orderedList.push(ct),void 0!==this._distanceToCore(ct)&&(this._updateQueue(ct,ft,ze),this._expandCluster(Ne,ze))}}},Ee.prototype._distanceToCore=function(Ne){for(var ze=this.epsilon,Re=0;Re<ze;Re++)if(this._regionQuery(Ne,Re).length>=this.minPts)return Re},Ee.prototype._regionQuery=function(Ne,ze){ze=ze||this.epsilon;for(var Re=[],Ie=0,We=this.dataset.length;Ie<We;Ie++)this.distance(this.dataset[Ne],this.dataset[Ie])<ze&&Re.push(Ie);return Re},Ee.prototype._euclideanDistance=function(Ne,ze){for(var Re=0,Ie=Math.min(Ne.length,ze.length);Ie--;)Re+=(Ne[Ie]-ze[Ie])*(Ne[Ie]-ze[Ie]);return Math.sqrt(Re)},Ut.exports&&(Ut.exports=Ee)},8759:Ut=>{function nt(Se,ue,Ee){this._queue=[],this._priorities=[],this._sorting="desc",this._init(Se,ue,Ee)}nt.prototype.insert=function(Se,ue){for(var Ee=this._queue.length,Ne=Ee;Ne--;){var ze=this._priorities[Ne];"desc"===this._sorting?ue>ze&&(Ee=Ne):ue<ze&&(Ee=Ne)}this._insertAt(Se,ue,Ee)},nt.prototype.remove=function(Se){for(var ue=this._queue.length;ue--;)if(Se===this._queue[ue]){this._queue.splice(ue,1),this._priorities.splice(ue,1);break}},nt.prototype.forEach=function(Se){this._queue.forEach(Se)},nt.prototype.getElements=function(){return this._queue},nt.prototype.getElementPriority=function(Se){return this._priorities[Se]},nt.prototype.getPriorities=function(){return this._priorities},nt.prototype.getElementsWithPriorities=function(){for(var Se=[],ue=0,Ee=this._queue.length;ue<Ee;ue++)Se.push([this._queue[ue],this._priorities[ue]]);return Se},nt.prototype._init=function(Se,ue,Ee){if(Se&&ue){if(this._queue=[],this._priorities=[],Se.length!==ue.length)throw new Error("Arrays must have the same length");for(var Ne=0;Ne<Se.length;Ne++)this.insert(Se[Ne],ue[Ne])}Ee&&(this._sorting=Ee)},nt.prototype._insertAt=function(Se,ue,Ee){this._queue.length===Ee?(this._queue.push(Se),this._priorities.push(ue)):(this._queue.splice(Ee,0,Se),this._priorities.splice(Ee,0,ue))},Ut.exports&&(Ut.exports=nt)},7470:(Ut,nt,Se)=>{Ut.exports&&(Ut.exports={DBSCAN:Se(1817),KMEANS:Se(4273),OPTICS:Se(8680),PriorityQueue:Se(8759)})},5469:Ut=>{"use strict";function nt(xe,Ke,be){be=be||2;var Je,nn,vt,xn,_n,li,qt,Qe=Ke&&Ke.length,rt=Qe?Ke[0]*be:xe.length,_e=Se(xe,0,rt,be,!0),St=[];if(!_e||_e.next===_e.prev)return St;if(Qe&&(_e=function We(xe,Ke,be,Qe){var _e,St,vt,rt=[];for(_e=0,St=Ke.length;_e<St;_e++)(vt=Se(xe,Ke[_e]*Qe,_e<St-1?Ke[_e+1]*Qe:xe.length,Qe,!1))===vt.next&&(vt.steiner=!0),rt.push(Ve(vt));for(rt.sort(ct),_e=0;_e<rt.length;_e++)be=ft(rt[_e],be);return be}(xe,Ke,_e,be)),xe.length>80*be){Je=vt=xe[0],nn=xn=xe[1];for(var $n=be;$n<rt;$n+=be)(_n=xe[$n])<Je&&(Je=_n),(li=xe[$n+1])<nn&&(nn=li),_n>vt&&(vt=_n),li>xn&&(xn=li);qt=0!==(qt=Math.max(vt-Je,xn-nn))?32767/qt:0}return Ee(_e,St,be,Je,nn,qt,0),St}function Se(xe,Ke,be,Qe,rt){var _e,St;if(rt===At(xe,Ke,be,Qe)>0)for(_e=Ke;_e<be;_e+=Qe)St=He(_e,xe[_e],xe[_e+1],St);else for(_e=be-Qe;_e>=Ke;_e-=Qe)St=He(_e,xe[_e],xe[_e+1],St);return St&&Y(St,St.next)&&(oe(St),St=St.next),St}function ue(xe,Ke){if(!xe)return xe;Ke||(Ke=xe);var Qe,be=xe;do{if(Qe=!1,be.steiner||!Y(be,be.next)&&0!==X(be.prev,be,be.next))be=be.next;else{if(oe(be),(be=Ke=be.prev)===be.next)break;Qe=!0}}while(Qe||be!==Ke);return Ke}function Ee(xe,Ke,be,Qe,rt,_e,St){if(xe){!St&&_e&&function st(xe,Ke,be,Qe){var rt=xe;do{0===rt.z&&(rt.z=Xt(rt.x,rt.y,Ke,be,Qe)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next}while(rt!==xe);rt.prevZ.nextZ=null,rt.prevZ=null,function yt(xe){var Ke,be,Qe,rt,_e,St,Je,nn,vt=1;do{for(be=xe,xe=null,_e=null,St=0;be;){for(St++,Qe=be,Je=0,Ke=0;Ke<vt&&(Je++,Qe=Qe.nextZ);Ke++);for(nn=vt;Je>0||nn>0&&Qe;)0!==Je&&(0===nn||!Qe||be.z<=Qe.z)?(rt=be,be=be.nextZ,Je--):(rt=Qe,Qe=Qe.nextZ,nn--),_e?_e.nextZ=rt:xe=rt,rt.prevZ=_e,_e=rt;be=Qe}_e.nextZ=null,vt*=2}while(St>1)}(rt)}(xe,Qe,rt,_e);for(var nn,vt,Je=xe;xe.prev!==xe.next;)if(nn=xe.prev,vt=xe.next,_e?ze(xe,Qe,rt,_e):Ne(xe))Ke.push(nn.i/be|0),Ke.push(xe.i/be|0),Ke.push(vt.i/be|0),oe(xe),xe=vt.next,Je=vt.next;else if((xe=vt)===Je){St?1===St?Ee(xe=Re(ue(xe),Ke,be),Ke,be,Qe,rt,_e,2):2===St&&Ie(xe,Ke,be,Qe,rt,_e):Ee(ue(xe),Ke,be,Qe,rt,_e,1);break}}}function Ne(xe){var Ke=xe.prev,be=xe,Qe=xe.next;if(X(Ke,be,Qe)>=0)return!1;for(var rt=Ke.x,_e=be.x,St=Qe.x,Je=Ke.y,nn=be.y,vt=Qe.y,xn=rt<_e?rt<St?rt:St:_e<St?_e:St,_n=Je<nn?Je<vt?Je:vt:nn<vt?nn:vt,li=rt>_e?rt>St?rt:St:_e>St?_e:St,qt=Je>nn?Je>vt?Je:vt:nn>vt?nn:vt,$n=Qe.next;$n!==Ke;){if($n.x>=xn&&$n.x<=li&&$n.y>=_n&&$n.y<=qt&&Ye(rt,Je,_e,nn,St,vt,$n.x,$n.y)&&X($n.prev,$n,$n.next)>=0)return!1;$n=$n.next}return!0}function ze(xe,Ke,be,Qe){var rt=xe.prev,_e=xe,St=xe.next;if(X(rt,_e,St)>=0)return!1;for(var Je=rt.x,nn=_e.x,vt=St.x,xn=rt.y,_n=_e.y,li=St.y,qt=Je<nn?Je<vt?Je:vt:nn<vt?nn:vt,$n=xn<_n?xn<li?xn:li:_n<li?_n:li,on=Je>nn?Je>vt?Je:vt:nn>vt?nn:vt,Fs=xn>_n?xn>li?xn:li:_n>li?_n:li,ws=Xt(qt,$n,Ke,be,Qe),Zs=Xt(on,Fs,Ke,be,Qe),gi=xe.prevZ,vi=xe.nextZ;gi&&gi.z>=ws&&vi&&vi.z<=Zs;){if(gi.x>=qt&&gi.x<=on&&gi.y>=$n&&gi.y<=Fs&&gi!==rt&&gi!==St&&Ye(Je,xn,nn,_n,vt,li,gi.x,gi.y)&&X(gi.prev,gi,gi.next)>=0||(gi=gi.prevZ,vi.x>=qt&&vi.x<=on&&vi.y>=$n&&vi.y<=Fs&&vi!==rt&&vi!==St&&Ye(Je,xn,nn,_n,vt,li,vi.x,vi.y)&&X(vi.prev,vi,vi.next)>=0))return!1;vi=vi.nextZ}for(;gi&&gi.z>=ws;){if(gi.x>=qt&&gi.x<=on&&gi.y>=$n&&gi.y<=Fs&&gi!==rt&&gi!==St&&Ye(Je,xn,nn,_n,vt,li,gi.x,gi.y)&&X(gi.prev,gi,gi.next)>=0)return!1;gi=gi.prevZ}for(;vi&&vi.z<=Zs;){if(vi.x>=qt&&vi.x<=on&&vi.y>=$n&&vi.y<=Fs&&vi!==rt&&vi!==St&&Ye(Je,xn,nn,_n,vt,li,vi.x,vi.y)&&X(vi.prev,vi,vi.next)>=0)return!1;vi=vi.nextZ}return!0}function Re(xe,Ke,be){var Qe=xe;do{var rt=Qe.prev,_e=Qe.next.next;!Y(rt,_e)&&we(rt,Qe,Qe.next,_e)&&$(rt,_e)&&$(_e,rt)&&(Ke.push(rt.i/be|0),Ke.push(Qe.i/be|0),Ke.push(_e.i/be|0),oe(Qe),oe(Qe.next),Qe=xe=_e),Qe=Qe.next}while(Qe!==xe);return ue(Qe)}function Ie(xe,Ke,be,Qe,rt,_e){var St=xe;do{for(var Je=St.next.next;Je!==St.prev;){if(St.i!==Je.i&&j(St,Je)){var nn=Be(St,Je);return St=ue(St,St.next),nn=ue(nn,nn.next),Ee(St,Ke,be,Qe,rt,_e,0),void Ee(nn,Ke,be,Qe,rt,_e,0)}Je=Je.next}St=St.next}while(St!==xe)}function ct(xe,Ke){return xe.x-Ke.x}function ft(xe,Ke){var be=function Gt(xe,Ke){var St,be=Ke,Qe=xe.x,rt=xe.y,_e=-1/0;do{if(rt<=be.y&&rt>=be.next.y&&be.next.y!==be.y){var Je=be.x+(rt-be.y)*(be.next.x-be.x)/(be.next.y-be.y);if(Je<=Qe&&Je>_e&&(_e=Je,St=be.x<be.next.x?be:be.next,Je===Qe))return St}be=be.next}while(be!==Ke);if(!St)return null;var li,nn=St,vt=St.x,xn=St.y,_n=1/0;be=St;do{Qe>=be.x&&be.x>=vt&&Qe!==be.x&&Ye(rt<xn?Qe:_e,rt,vt,xn,rt<xn?_e:Qe,rt,be.x,be.y)&&(li=Math.abs(rt-be.y)/(Qe-be.x),$(be,xe)&&(li<_n||li===_n&&(be.x>St.x||be.x===St.x&&Ct(St,be)))&&(St=be,_n=li)),be=be.next}while(be!==nn);return St}(xe,Ke);if(!be)return Ke;var Qe=Be(be,xe);return ue(Qe,Qe.next),ue(be,be.next)}function Ct(xe,Ke){return X(xe.prev,xe,Ke.prev)<0&&X(Ke.next,xe,xe.next)<0}function Xt(xe,Ke,be,Qe,rt){return(xe=1431655765&((xe=858993459&((xe=252645135&((xe=16711935&((xe=(xe-be)*rt|0)|xe<<8))|xe<<4))|xe<<2))|xe<<1))|(Ke=1431655765&((Ke=858993459&((Ke=252645135&((Ke=16711935&((Ke=(Ke-Qe)*rt|0)|Ke<<8))|Ke<<4))|Ke<<2))|Ke<<1))<<1}function Ve(xe){var Ke=xe,be=xe;do{(Ke.x<be.x||Ke.x===be.x&&Ke.y<be.y)&&(be=Ke),Ke=Ke.next}while(Ke!==xe);return be}function Ye(xe,Ke,be,Qe,rt,_e,St,Je){return(rt-St)*(Ke-Je)>=(xe-St)*(_e-Je)&&(xe-St)*(Qe-Je)>=(be-St)*(Ke-Je)&&(be-St)*(_e-Je)>=(rt-St)*(Qe-Je)}function j(xe,Ke){return xe.next.i!==Ke.i&&xe.prev.i!==Ke.i&&!function ce(xe,Ke){var be=xe;do{if(be.i!==xe.i&&be.next.i!==xe.i&&be.i!==Ke.i&&be.next.i!==Ke.i&&we(be,be.next,xe,Ke))return!0;be=be.next}while(be!==xe);return!1}(xe,Ke)&&($(xe,Ke)&&$(Ke,xe)&&function je(xe,Ke){var be=xe,Qe=!1,rt=(xe.x+Ke.x)/2,_e=(xe.y+Ke.y)/2;do{be.y>_e!=be.next.y>_e&&be.next.y!==be.y&&rt<(be.next.x-be.x)*(_e-be.y)/(be.next.y-be.y)+be.x&&(Qe=!Qe),be=be.next}while(be!==xe);return Qe}(xe,Ke)&&(X(xe.prev,xe,Ke.prev)||X(xe,Ke.prev,Ke))||Y(xe,Ke)&&X(xe.prev,xe,xe.next)>0&&X(Ke.prev,Ke,Ke.next)>0)}function X(xe,Ke,be){return(Ke.y-xe.y)*(be.x-Ke.x)-(Ke.x-xe.x)*(be.y-Ke.y)}function Y(xe,Ke){return xe.x===Ke.x&&xe.y===Ke.y}function we(xe,Ke,be,Qe){var rt=se(X(xe,Ke,be)),_e=se(X(xe,Ke,Qe)),St=se(X(be,Qe,xe)),Je=se(X(be,Qe,Ke));return!!(rt!==_e&&St!==Je||0===rt&&J(xe,be,Ke)||0===_e&&J(xe,Qe,Ke)||0===St&&J(be,xe,Qe)||0===Je&&J(be,Ke,Qe))}function J(xe,Ke,be){return Ke.x<=Math.max(xe.x,be.x)&&Ke.x>=Math.min(xe.x,be.x)&&Ke.y<=Math.max(xe.y,be.y)&&Ke.y>=Math.min(xe.y,be.y)}function se(xe){return xe>0?1:xe<0?-1:0}function $(xe,Ke){return X(xe.prev,xe,xe.next)<0?X(xe,Ke,xe.next)>=0&&X(xe,xe.prev,Ke)>=0:X(xe,Ke,xe.prev)<0||X(xe,xe.next,Ke)<0}function Be(xe,Ke){var be=new Pt(xe.i,xe.x,xe.y),Qe=new Pt(Ke.i,Ke.x,Ke.y),rt=xe.next,_e=Ke.prev;return xe.next=Ke,Ke.prev=xe,be.next=rt,rt.prev=be,Qe.next=be,be.prev=Qe,_e.next=Qe,Qe.prev=_e,Qe}function He(xe,Ke,be,Qe){var rt=new Pt(xe,Ke,be);return Qe?(rt.next=Qe.next,rt.prev=Qe,Qe.next.prev=rt,Qe.next=rt):(rt.prev=rt,rt.next=rt),rt}function oe(xe){xe.next.prev=xe.prev,xe.prev.next=xe.next,xe.prevZ&&(xe.prevZ.nextZ=xe.nextZ),xe.nextZ&&(xe.nextZ.prevZ=xe.prevZ)}function Pt(xe,Ke,be){this.i=xe,this.x=Ke,this.y=be,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function At(xe,Ke,be,Qe){for(var rt=0,_e=Ke,St=be-Qe;_e<be;_e+=Qe)rt+=(xe[St]-xe[_e])*(xe[_e+1]+xe[St+1]),St=_e;return rt}Ut.exports=nt,Ut.exports.default=nt,nt.deviation=function(xe,Ke,be,Qe){var rt=Ke&&Ke.length,St=Math.abs(At(xe,0,rt?Ke[0]*be:xe.length,be));if(rt)for(var Je=0,nn=Ke.length;Je<nn;Je++)St-=Math.abs(At(xe,Ke[Je]*be,Je<nn-1?Ke[Je+1]*be:xe.length,be));var _n=0;for(Je=0;Je<Qe.length;Je+=3){var li=Qe[Je]*be,qt=Qe[Je+1]*be,$n=Qe[Je+2]*be;_n+=Math.abs((xe[li]-xe[$n])*(xe[qt+1]-xe[li+1])-(xe[li]-xe[qt])*(xe[$n+1]-xe[li+1]))}return 0===St&&0===_n?0:Math.abs((_n-St)/St)},nt.flatten=function(xe){for(var Ke=xe[0][0].length,be={vertices:[],holes:[],dimensions:Ke},Qe=0,rt=0;rt<xe.length;rt++){for(var _e=0;_e<xe[rt].length;_e++)for(var St=0;St<Ke;St++)be.vertices.push(xe[rt][_e][St]);rt>0&&be.holes.push(Qe+=xe[rt-1].length)}return be}},3457:Ut=>{"use strict";var nt="Function.prototype.bind called on incompatible ",Se=Array.prototype.slice,ue=Object.prototype.toString,Ee="[object Function]";Ut.exports=function(ze){var Re=this;if("function"!=typeof Re||ue.call(Re)!==Ee)throw new TypeError(nt+Re);for(var We,Ie=Se.call(arguments,1),ct=function(){if(this instanceof We){var yt=Re.apply(this,Ie.concat(Se.call(arguments)));return Object(yt)===yt?yt:this}return Re.apply(ze,Ie.concat(Se.call(arguments)))},ft=Math.max(0,Re.length-Ie.length),Gt=[],Ct=0;Ct<ft;Ct++)Gt.push("$"+Ct);if(We=Function("binder","return function ("+Gt.join(",")+"){ return binder.apply(this,arguments); }")(ct),Re.prototype){var st=function(){};st.prototype=Re.prototype,We.prototype=new st,st.prototype=null}return We}},4444:(Ut,nt,Se)=>{"use strict";var ue=Se(3457);Ut.exports=Function.prototype.bind||ue},9582:Ut=>{"use strict";var nt=function(){return"string"==typeof function(){}.name},Se=Object.getOwnPropertyDescriptor;if(Se)try{Se([],"length")}catch{Se=null}nt.functionsHaveConfigurableNames=function(){if(!nt()||!Se)return!1;var Ne=Se(function(){},"name");return!!Ne&&!!Ne.configurable};var ue=Function.prototype.bind;nt.boundFunctionsHaveNames=function(){return nt()&&"function"==typeof ue&&""!==function(){}.bind().name},Ut.exports=nt},5013:(Ut,nt,Se)=>{var ue=Se(6952),Ee=function(Ie){this.precision=Ie&&Ie.precision?Ie.precision:17,this.direction=!(!Ie||!Ie.direction)&&Ie.direction,this.pseudoNode=!(!Ie||!Ie.pseudoNode)&&Ie.pseudoNode,this.objectComparator=Ie&&Ie.objectComparator?Ie.objectComparator:Re};function Ne(Ie){return Ie.coordinates.map(function(We){return{type:Ie.type.replace("Multi",""),coordinates:We}})}function ze(Ie,We){return Ie.hasOwnProperty("coordinates")?Ie.coordinates.length===We.coordinates.length:Ie.length===We.length}function Re(Ie,We){return ue(Ie,We,{strict:!0})}Ee.prototype.compare=function(Ie,We){if(Ie.type!==We.type||!ze(Ie,We))return!1;switch(Ie.type){case"Point":return this.compareCoord(Ie.coordinates,We.coordinates);case"LineString":return this.compareLine(Ie.coordinates,We.coordinates,0,!1);case"Polygon":return this.comparePolygon(Ie,We);case"Feature":return this.compareFeature(Ie,We);default:if(0===Ie.type.indexOf("Multi")){var ct=this,ft=Ne(Ie),Gt=Ne(We);return ft.every(function(Ct){return this.some(function(st){return ct.compare(Ct,st)})},Gt)}}return!1},Ee.prototype.compareCoord=function(Ie,We){if(Ie.length!==We.length)return!1;for(var ct=0;ct<Ie.length;ct++)if(Ie[ct].toFixed(this.precision)!==We[ct].toFixed(this.precision))return!1;return!0},Ee.prototype.compareLine=function(Ie,We,ct,ft){if(!ze(Ie,We))return!1;var Gt=this.pseudoNode?Ie:this.removePseudo(Ie),Ct=this.pseudoNode?We:this.removePseudo(We);if(!ft||this.compareCoord(Gt[0],Ct[0])||(Ct=this.fixStartIndex(Ct,Gt))){var st=this.compareCoord(Gt[ct],Ct[ct]);return this.direction||st?this.comparePath(Gt,Ct):!!this.compareCoord(Gt[ct],Ct[Ct.length-(1+ct)])&&this.comparePath(Gt.slice().reverse(),Ct)}},Ee.prototype.fixStartIndex=function(Ie,We){for(var ct,ft=-1,Gt=0;Gt<Ie.length;Gt++)if(this.compareCoord(Ie[Gt],We[0])){ft=Gt;break}return ft>=0&&(ct=[].concat(Ie.slice(ft,Ie.length),Ie.slice(1,ft+1))),ct},Ee.prototype.comparePath=function(Ie,We){var ct=this;return Ie.every(function(ft,Gt){return ct.compareCoord(ft,this[Gt])},We)},Ee.prototype.comparePolygon=function(Ie,We){if(this.compareLine(Ie.coordinates[0],We.coordinates[0],1,!0)){var ct=Ie.coordinates.slice(1,Ie.coordinates.length),ft=We.coordinates.slice(1,We.coordinates.length),Gt=this;return ct.every(function(Ct){return this.some(function(st){return Gt.compareLine(Ct,st,1,!0)})},ft)}return!1},Ee.prototype.compareFeature=function(Ie,We){return!(Ie.id!==We.id||!this.objectComparator(Ie.properties,We.properties)||!this.compareBBox(Ie,We))&&this.compare(Ie.geometry,We.geometry)},Ee.prototype.compareBBox=function(Ie,We){return!!(!Ie.bbox&&!We.bbox||Ie.bbox&&We.bbox&&this.compareCoord(Ie.bbox,We.bbox))},Ee.prototype.removePseudo=function(Ie){return Ie},Ut.exports=Ee},5406:(Ut,nt,Se)=>{var ue=Se(2402),Ee=Se(8275),Ne=Se(3269),ze=Se(1503).Z,Re=Ne.featureEach,ct=Ee.featureCollection;function ft(Gt){var Ct=new ue(Gt);return Ct.insert=function(st){if("Feature"!==st.type)throw new Error("invalid feature");return st.bbox=st.bbox?st.bbox:ze(st),ue.prototype.insert.call(this,st)},Ct.load=function(st){var yt=[];return Array.isArray(st)?st.forEach(function(Xt){if("Feature"!==Xt.type)throw new Error("invalid features");Xt.bbox=Xt.bbox?Xt.bbox:ze(Xt),yt.push(Xt)}):Re(st,function(Xt){if("Feature"!==Xt.type)throw new Error("invalid features");Xt.bbox=Xt.bbox?Xt.bbox:ze(Xt),yt.push(Xt)}),ue.prototype.load.call(this,yt)},Ct.remove=function(st,yt){if("Feature"!==st.type)throw new Error("invalid feature");return st.bbox=st.bbox?st.bbox:ze(st),ue.prototype.remove.call(this,st,yt)},Ct.clear=function(){return ue.prototype.clear.call(this)},Ct.search=function(st){var yt=ue.prototype.search.call(this,this.toBBox(st));return ct(yt)},Ct.collides=function(st){return ue.prototype.collides.call(this,this.toBBox(st))},Ct.all=function(){var st=ue.prototype.all.call(this);return ct(st)},Ct.toJSON=function(){return ue.prototype.toJSON.call(this)},Ct.fromJSON=function(st){return ue.prototype.fromJSON.call(this,st)},Ct.toBBox=function(st){var yt;if(st.bbox)yt=st.bbox;else if(Array.isArray(st)&&4===st.length)yt=st;else if(Array.isArray(st)&&6===st.length)yt=[st[0],st[1],st[3],st[4]];else if("Feature"===st.type)yt=ze(st);else{if("FeatureCollection"!==st.type)throw new Error("invalid geojson");yt=ze(st)}return{minX:yt[0],minY:yt[1],maxX:yt[2],maxY:yt[3]}},Ct}Ut.exports=ft,Ut.exports.default=ft},5203:(Ut,nt,Se)=>{"use strict";var ue,Ee=SyntaxError,Ne=Function,ze=TypeError,Re=function(He){try{return Ne('"use strict"; return ('+He+").constructor;")()}catch{}},Ie=Object.getOwnPropertyDescriptor;if(Ie)try{Ie({},"")}catch{Ie=null}var We=function(){throw new ze},ct=Ie?function(){try{return We}catch{try{return Ie(arguments,"callee").get}catch{return We}}}():We,ft=Se(2969)(),Gt=Object.getPrototypeOf||function(He){return He.__proto__},Ct={},st=typeof Uint8Array>"u"?ue:Gt(Uint8Array),yt={"%AggregateError%":typeof AggregateError>"u"?ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ue:ArrayBuffer,"%ArrayIteratorPrototype%":ft?Gt([][Symbol.iterator]()):ue,"%AsyncFromSyncIteratorPrototype%":ue,"%AsyncFunction%":Ct,"%AsyncGenerator%":Ct,"%AsyncGeneratorFunction%":Ct,"%AsyncIteratorPrototype%":Ct,"%Atomics%":typeof Atomics>"u"?ue:Atomics,"%BigInt%":typeof BigInt>"u"?ue:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ue:FinalizationRegistry,"%Function%":Ne,"%GeneratorFunction%":Ct,"%Int8Array%":typeof Int8Array>"u"?ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ft?Gt(Gt([][Symbol.iterator]())):ue,"%JSON%":"object"==typeof JSON?JSON:ue,"%Map%":typeof Map>"u"?ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ft?ue:Gt((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ue:Promise,"%Proxy%":typeof Proxy>"u"?ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ft?ue:Gt((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ft?Gt(""[Symbol.iterator]()):ue,"%Symbol%":ft?Symbol:ue,"%SyntaxError%":Ee,"%ThrowTypeError%":ct,"%TypedArray%":st,"%TypeError%":ze,"%Uint8Array%":typeof Uint8Array>"u"?ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ue:WeakSet},Xt=function He(oe){var Pt;if("%AsyncFunction%"===oe)Pt=Re("async function () {}");else if("%GeneratorFunction%"===oe)Pt=Re("function* () {}");else if("%AsyncGeneratorFunction%"===oe)Pt=Re("async function* () {}");else if("%AsyncGenerator%"===oe){var At=He("%AsyncGeneratorFunction%");At&&(Pt=At.prototype)}else if("%AsyncIteratorPrototype%"===oe){var xe=He("%AsyncGenerator%");xe&&(Pt=Gt(xe.prototype))}return yt[oe]=Pt,Pt},Ve={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ye=Se(4444),j=Se(3164),X=Ye.call(Function.call,Array.prototype.concat),Y=Ye.call(Function.apply,Array.prototype.splice),we=Ye.call(Function.call,String.prototype.replace),J=Ye.call(Function.call,String.prototype.slice),se=Ye.call(Function.call,RegExp.prototype.exec),ce=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,je=function(oe){var Pt=J(oe,0,1),At=J(oe,-1);if("%"===Pt&&"%"!==At)throw new Ee("invalid intrinsic syntax, expected closing `%`");if("%"===At&&"%"!==Pt)throw new Ee("invalid intrinsic syntax, expected opening `%`");var xe=[];return we(oe,ce,function(Ke,be,Qe,rt){xe[xe.length]=Qe?we(rt,$,"$1"):be||Ke}),xe},Be=function(oe,Pt){var xe,At=oe;if(j(Ve,At)&&(At="%"+(xe=Ve[At])[0]+"%"),j(yt,At)){var Ke=yt[At];if(Ke===Ct&&(Ke=Xt(At)),typeof Ke>"u"&&!Pt)throw new ze("intrinsic "+oe+" exists, but is not available. Please file an issue!");return{alias:xe,name:At,value:Ke}}throw new Ee("intrinsic "+oe+" does not exist!")};Ut.exports=function(oe,Pt){if("string"!=typeof oe||0===oe.length)throw new ze("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Pt)throw new ze('"allowMissing" argument must be a boolean');if(null===se(/^%?[^%]*%?$/g,oe))throw new Ee("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var At=je(oe),xe=At.length>0?At[0]:"",Ke=Be("%"+xe+"%",Pt),be=Ke.name,Qe=Ke.value,rt=!1,_e=Ke.alias;_e&&(xe=_e[0],Y(At,X([0,1],_e)));for(var St=1,Je=!0;St<At.length;St+=1){var nn=At[St],vt=J(nn,0,1),xn=J(nn,-1);if(('"'===vt||"'"===vt||"`"===vt||'"'===xn||"'"===xn||"`"===xn)&&vt!==xn)throw new Ee("property names with quotes must have matching quotes");if(("constructor"===nn||!Je)&&(rt=!0),j(yt,be="%"+(xe+="."+nn)+"%"))Qe=yt[be];else if(null!=Qe){if(!(nn in Qe)){if(!Pt)throw new ze("base intrinsic for "+oe+" exists, but the property is not available.");return}if(Ie&&St+1>=At.length){var _n=Ie(Qe,nn);Qe=(Je=!!_n)&&"get"in _n&&!("originalValue"in _n.get)?_n.get:Qe[nn]}else Je=j(Qe,nn),Qe=Qe[nn];Je&&!rt&&(yt[be]=Qe)}}return Qe}},7027:(Ut,nt,Se)=>{"use strict";var Ee=Se(5203)("%Object.defineProperty%",!0),Ne=function(){if(Ee)try{return Ee({},"a",{value:1}),!0}catch{return!1}return!1};Ne.hasArrayLengthDefineBug=function(){if(!Ne())return null;try{return 1!==Ee([],"length",{value:1}).length}catch{return!0}},Ut.exports=Ne},2969:(Ut,nt,Se)=>{"use strict";var ue=typeof Symbol<"u"&&Symbol,Ee=Se(1983);Ut.exports=function(){return"function"==typeof ue&&"function"==typeof Symbol&&"symbol"==typeof ue("foo")&&"symbol"==typeof Symbol("bar")&&Ee()}},1983:Ut=>{"use strict";Ut.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var Se={},ue=Symbol("test"),Ee=Object(ue);if("string"==typeof ue||"[object Symbol]"!==Object.prototype.toString.call(ue)||"[object Symbol]"!==Object.prototype.toString.call(Ee))return!1;for(ue in Se[ue]=42,Se)return!1;if("function"==typeof Object.keys&&0!==Object.keys(Se).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(Se).length)return!1;var ze=Object.getOwnPropertySymbols(Se);if(1!==ze.length||ze[0]!==ue||!Object.prototype.propertyIsEnumerable.call(Se,ue))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var Re=Object.getOwnPropertyDescriptor(Se,ue);if(42!==Re.value||!0!==Re.enumerable)return!1}return!0}},6259:(Ut,nt,Se)=>{"use strict";var ue=Se(1983);Ut.exports=function(){return ue()&&!!Symbol.toStringTag}},3164:(Ut,nt,Se)=>{"use strict";var ue=Se(4444);Ut.exports=ue.call(Function.call,Object.prototype.hasOwnProperty)},4159:function(Ut){Ut.exports=function(){"use strict";var nt=function(E,S){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,L){D.__proto__=L}||function(D,L){for(var O in L)Object.prototype.hasOwnProperty.call(L,O)&&(D[O]=L[O])})(E,S)};function Se(E,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function D(){this.constructor=E}nt(E,S),E.prototype=null===S?Object.create(S):(D.prototype=S.prototype,new D)}var ue=function(){return ue=Object.assign||function(S){for(var D,L=1,O=arguments.length;L<O;L++)for(var G in D=arguments[L])Object.prototype.hasOwnProperty.call(D,G)&&(S[G]=D[G]);return S},ue.apply(this,arguments)};function Ee(E,S,D,L){return new(D||(D=Promise))(function(G,re){function ye(lt){try{Ze(L.next(lt))}catch(dt){re(dt)}}function Me(lt){try{Ze(L.throw(lt))}catch(dt){re(dt)}}function Ze(lt){lt.done?G(lt.value):function O(G){return G instanceof D?G:new D(function(re){re(G)})}(lt.value).then(ye,Me)}Ze((L=L.apply(E,S||[])).next())})}function Ne(E,S){var L,O,G,re,D={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return re={next:ye(0),throw:ye(1),return:ye(2)},"function"==typeof Symbol&&(re[Symbol.iterator]=function(){return this}),re;function ye(Ze){return function(lt){return function Me(Ze){if(L)throw new TypeError("Generator is already executing.");for(;D;)try{if(L=1,O&&(G=2&Ze[0]?O.return:Ze[0]?O.throw||((G=O.return)&&G.call(O),0):O.next)&&!(G=G.call(O,Ze[1])).done)return G;switch(O=0,G&&(Ze=[2&Ze[0],G.value]),Ze[0]){case 0:case 1:G=Ze;break;case 4:return D.label++,{value:Ze[1],done:!1};case 5:D.label++,O=Ze[1],Ze=[0];continue;case 7:Ze=D.ops.pop(),D.trys.pop();continue;default:if(!(G=(G=D.trys).length>0&&G[G.length-1])&&(6===Ze[0]||2===Ze[0])){D=0;continue}if(3===Ze[0]&&(!G||Ze[1]>G[0]&&Ze[1]<G[3])){D.label=Ze[1];break}if(6===Ze[0]&&D.label<G[1]){D.label=G[1],G=Ze;break}if(G&&D.label<G[2]){D.label=G[2],D.ops.push(Ze);break}G[2]&&D.ops.pop(),D.trys.pop();continue}Ze=S.call(E,D)}catch(lt){Ze=[6,lt],O=0}finally{L=G=0}if(5&Ze[0])throw Ze[1];return{value:Ze[0]?Ze[1]:void 0,done:!0}}([Ze,lt])}}}function ze(E,S,D){if(D||2===arguments.length)for(var G,L=0,O=S.length;L<O;L++)(G||!(L in S))&&(G||(G=Array.prototype.slice.call(S,0,L)),G[L]=S[L]);return E.concat(G||S)}for(var Re=function(){function E(S,D,L,O){this.left=S,this.top=D,this.width=L,this.height=O}return E.prototype.add=function(S,D,L,O){return new E(this.left+S,this.top+D,this.width+L,this.height+O)},E.fromClientRect=function(S,D){return new E(D.left+S.windowBounds.left,D.top+S.windowBounds.top,D.width,D.height)},E.fromDOMRectList=function(S,D){var L=Array.from(D).find(function(O){return 0!==O.width});return L?new E(L.left+S.windowBounds.left,L.top+S.windowBounds.top,L.width,L.height):E.EMPTY},E.EMPTY=new E(0,0,0,0),E}(),Ie=function(E,S){return Re.fromClientRect(E,S.getBoundingClientRect())},ct=function(E){for(var S=[],D=0,L=E.length;D<L;){var O=E.charCodeAt(D++);if(O>=55296&&O<=56319&&D<L){var G=E.charCodeAt(D++);56320==(64512&G)?S.push(((1023&O)<<10)+(1023&G)+65536):(S.push(O),D--)}else S.push(O)}return S},ft=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];if(String.fromCodePoint)return String.fromCodePoint.apply(String,E);var D=E.length;if(!D)return"";for(var L=[],O=-1,G="";++O<D;){var re=E[O];re<=65535?L.push(re):L.push(55296+((re-=65536)>>10),re%1024+56320),(O+1===D||L.length>16384)&&(G+=String.fromCharCode.apply(String,L),L.length=0)}return G},Gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ct=typeof Uint8Array>"u"?[]:new Uint8Array(256),st=0;st<Gt.length;st++)Ct[Gt.charCodeAt(st)]=st;for(var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xt=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ve=0;Ve<yt.length;Ve++)Xt[yt.charCodeAt(Ve)]=Ve;for(var Qe=function(E,S,D){return E.slice?E.slice(S,D):new Uint16Array(Array.prototype.slice.call(E,S,D))},St=function(){function E(S,D,L,O,G,re){this.initialValue=S,this.errorValue=D,this.highStart=L,this.highValueIndex=O,this.index=G,this.data=re}return E.prototype.get=function(S){var D;if(S>=0){if(S<55296||S>56319&&S<=65535)return this.data[D=((D=this.index[S>>5])<<2)+(31&S)];if(S<=65535)return this.data[D=((D=this.index[2048+(S-55296>>5)])<<2)+(31&S)];if(S<this.highStart)return D=this.index[D=2080+(S>>11)],this.data[D=((D=this.index[D+=S>>5&63])<<2)+(31&S)];if(S<=1114111)return this.data[this.highValueIndex]}return this.errorValue},E}(),Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nn=typeof Uint8Array>"u"?[]:new Uint8Array(256),vt=0;vt<Je.length;vt++)nn[Je.charCodeAt(vt)]=vt;var D,L,O,re,ye,vi=10,te=13,Le=15,mt=17,Qt=18,Yt=19,Mt=20,bi=21,Hi=22,Ri=24,_r=25,ur=26,yr=27,Ws=28,jo=30,Sa=32,Cs=33,q1=34,$o=35,O2=37,uc=38,Fi=39,Jc=40,gl=42,Om=[9001,65288],Lr="\xd7",au=(D=function(E){var L,G,re,ye,Me,S=.75*E.length,D=E.length,O=0;"="===E[E.length-1]&&(S--,"="===E[E.length-2]&&S--);var Ze=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(S):new Array(S),lt=Array.isArray(Ze)?Ze:new Uint8Array(Ze);for(L=0;L<D;L+=4)G=Xt[E.charCodeAt(L)],re=Xt[E.charCodeAt(L+1)],ye=Xt[E.charCodeAt(L+2)],Me=Xt[E.charCodeAt(L+3)],lt[O++]=G<<2|re>>4,lt[O++]=(15&re)<<4|ye>>2,lt[O++]=(3&ye)<<6|63&Me;return Ze}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),L=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=4)D.push(E[L+3]<<24|E[L+2]<<16|E[L+1]<<8|E[L]);return D}(D):new Uint32Array(D),O=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=2)D.push(E[L+1]<<8|E[L]);return D}(D):new Uint16Array(D),re=Qe(O,12,L[4]/2),ye=2===L[5]?Qe(O,(24+L[4])/2):function(E,S,D){return E.slice?E.slice(S,D):new Uint32Array(Array.prototype.slice.call(E,S,D))}(L,Math.ceil((24+L[4])/4)),new St(L[0],L[1],L[2],L[3],re,ye)),ka=[jo,36],Yl=[1,2,3,5],xi=[vi,8],n1=[yr,ur],Pa=Yl.concat(xi),y2=[uc,Fi,Jc,q1,$o],_1=[Le,te],y1=function(E,S,D,L){var O=L[D];if(Array.isArray(E)?-1!==E.indexOf(O):E===O)for(var G=D;G<=L.length;){if((re=L[++G])===S)return!0;if(re!==vi)break}if(O===vi)for(G=D;G>0;){var ye=L[--G];if(Array.isArray(E)?-1!==E.indexOf(ye):E===ye)for(var Me=D;Me<=L.length;){var re;if((re=L[++Me])===S)return!0;if(re!==vi)break}if(ye!==vi)break}return!1},a0=function(E,S){for(var D=E;D>=0;){var L=S[D];if(L!==vi)return L;D--}return 0},w1=function(E,S,D,L,O){if(0===D[L])return Lr;var G=L-1;if(Array.isArray(O)&&!0===O[G])return Lr;var re=G-1,ye=G+1,Me=S[G],Ze=re>=0?S[re]:0,lt=S[ye];if(2===Me&&3===lt)return Lr;if(-1!==Yl.indexOf(Me))return"!";if(-1!==Yl.indexOf(lt)||-1!==xi.indexOf(lt))return Lr;if(8===a0(G,S))return"\xf7";if(11===au.get(E[G])||(Me===Sa||Me===Cs)&&11===au.get(E[ye])||7===Me||7===lt||9===Me||-1===[vi,te,Le].indexOf(Me)&&9===lt||-1!==[mt,Qt,Yt,Ri,Ws].indexOf(lt)||a0(G,S)===Hi||y1(23,Hi,G,S)||y1([mt,Qt],bi,G,S)||y1(12,12,G,S))return Lr;if(Me===vi)return"\xf7";if(23===Me||23===lt)return Lr;if(16===lt||16===Me)return"\xf7";if(-1!==[te,Le,bi].indexOf(lt)||14===Me||36===Ze&&-1!==_1.indexOf(Me)||Me===Ws&&36===lt||lt===Mt||-1!==ka.indexOf(lt)&&Me===_r||-1!==ka.indexOf(Me)&&lt===_r||Me===yr&&-1!==[O2,Sa,Cs].indexOf(lt)||-1!==[O2,Sa,Cs].indexOf(Me)&&lt===ur||-1!==ka.indexOf(Me)&&-1!==n1.indexOf(lt)||-1!==n1.indexOf(Me)&&-1!==ka.indexOf(lt)||-1!==[yr,ur].indexOf(Me)&&(lt===_r||-1!==[Hi,Le].indexOf(lt)&&S[ye+1]===_r)||-1!==[Hi,Le].indexOf(Me)&&lt===_r||Me===_r&&-1!==[_r,Ws,Ri].indexOf(lt))return Lr;if(-1!==[_r,Ws,Ri,mt,Qt].indexOf(lt))for(var dt=G;dt>=0;){if((kt=S[dt])===_r)return Lr;if(-1===[Ws,Ri].indexOf(kt))break;dt--}if(-1!==[yr,ur].indexOf(lt))for(dt=-1!==[mt,Qt].indexOf(Me)?re:G;dt>=0;){var kt;if((kt=S[dt])===_r)return Lr;if(-1===[Ws,Ri].indexOf(kt))break;dt--}if(uc===Me&&-1!==[uc,Fi,q1,$o].indexOf(lt)||-1!==[Fi,q1].indexOf(Me)&&-1!==[Fi,Jc].indexOf(lt)||-1!==[Jc,$o].indexOf(Me)&&lt===Jc||-1!==y2.indexOf(Me)&&-1!==[Mt,ur].indexOf(lt)||-1!==y2.indexOf(lt)&&Me===yr||-1!==ka.indexOf(Me)&&-1!==ka.indexOf(lt)||Me===Ri&&-1!==ka.indexOf(lt)||-1!==ka.concat(_r).indexOf(Me)&&lt===Hi&&-1===Om.indexOf(E[ye])||-1!==ka.concat(_r).indexOf(lt)&&Me===Qt)return Lr;if(41===Me&&41===lt){for(var Gn=D[G],Tn=1;Gn>0&&41===S[--Gn];)Tn++;if(Tn%2!=0)return Lr}return Me===Sa&&lt===Cs?Lr:"\xf7"},N6=function(E,S){S||(S={lineBreak:"normal",wordBreak:"normal"});var D=function(E,S){void 0===S&&(S="strict");var D=[],L=[],O=[];return E.forEach(function(G,re){var ye=au.get(G);if(ye>50?(O.push(!0),ye-=50):O.push(!1),-1!==["normal","auto","loose"].indexOf(S)&&-1!==[8208,8211,12316,12448].indexOf(G))return L.push(re),D.push(16);if(4===ye||11===ye){if(0===re)return L.push(re),D.push(jo);var Me=D[re-1];return-1===Pa.indexOf(Me)?(L.push(L[re-1]),D.push(Me)):(L.push(re),D.push(jo))}return L.push(re),31===ye?D.push("strict"===S?bi:O2):ye===gl||29===ye?D.push(jo):43===ye?D.push(G>=131072&&G<=196605||G>=196608&&G<=262141?O2:jo):void D.push(ye)}),[L,D,O]}(E,S.lineBreak),L=D[0],O=D[1],G=D[2];return("break-all"===S.wordBreak||"break-word"===S.wordBreak)&&(O=O.map(function(ye){return-1!==[_r,jo,gl].indexOf(ye)?O2:ye})),[L,O,"keep-all"===S.wordBreak?G.map(function(ye,Me){return ye&&E[Me]>=19968&&E[Me]<=40959}):void 0]},Co=function(){function E(S,D,L,O){this.codePoints=S,this.required="!"===D,this.start=L,this.end=O}return E.prototype.slice=function(){return ft.apply(void 0,this.codePoints.slice(this.start,this.end))},E}(),Js=function(E){return E>=48&&E<=57},zn=function(E){return Js(E)||E>=65&&E<=70||E>=97&&E<=102},ed=function(E){return 10===E||9===E||32===E},vo=function(E){return function(E){return function(E){return E>=97&&E<=122}(E)||function(E){return E>=65&&E<=90}(E)}(E)||function(E){return E>=128}(E)||95===E},Ha=function(E){return vo(E)||Js(E)||45===E},X1=function(E){return E>=0&&E<=8||11===E||E>=14&&E<=31||127===E},C2=function(E,S){return 92===E&&10!==S},Yo=function(E,S,D){return 45===E?vo(S)||C2(S,D):!!vo(E)||!(92!==E||!C2(E,S))},bs=function(E,S,D){return 43===E||45===E?!!Js(S)||46===S&&Js(D):Js(46===E?S:E)},Zo=function(E){var S=0,D=1;(43===E[S]||45===E[S])&&(45===E[S]&&(D=-1),S++);for(var L=[];Js(E[S]);)L.push(E[S++]);var O=L.length?parseInt(ft.apply(void 0,L),10):0;46===E[S]&&S++;for(var G=[];Js(E[S]);)G.push(E[S++]);var re=G.length,ye=re?parseInt(ft.apply(void 0,G),10):0;(69===E[S]||101===E[S])&&S++;var Me=1;(43===E[S]||45===E[S])&&(45===E[S]&&(Me=-1),S++);for(var Ze=[];Js(E[S]);)Ze.push(E[S++]);var lt=Ze.length?parseInt(ft.apply(void 0,Ze),10):0;return D*(O+ye*Math.pow(10,-re))*Math.pow(10,Me*lt)},ui={type:2},lu={type:3},Hr={type:4},o1={type:13},s2={type:8},t3={type:21},h0={type:9},wl={type:10},f0={type:11},Dr={type:12},Bn={type:14},eo={type:23},d0={type:1},pc={type:25},oi={type:24},fr={type:26},w4={type:27},ht={type:28},b1={type:29},ir={type:31},ia={type:32},Y1=function(){function E(){this._value=[]}return E.prototype.write=function(S){this._value=this._value.concat(ct(S))},E.prototype.read=function(){for(var S=[],D=this.consumeToken();D!==ia;)S.push(D),D=this.consumeToken();return S},E.prototype.consumeToken=function(){var S=this.consumeCodePoint();switch(S){case 34:return this.consumeStringToken(34);case 35:var D=this.peekCodePoint(0),L=this.peekCodePoint(1),O=this.peekCodePoint(2);if(Ha(D)||C2(L,O)){var G=Yo(D,L,O)?2:1;return{type:5,value:this.consumeName(),flags:G}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),o1;break;case 39:return this.consumeStringToken(39);case 40:return ui;case 41:return lu;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Bn;break;case 43:if(bs(S,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(S),this.consumeNumericToken();break;case 44:return Hr;case 45:var ye=S,Me=this.peekCodePoint(0),Ze=this.peekCodePoint(1);if(bs(ye,Me,Ze))return this.reconsumeCodePoint(S),this.consumeNumericToken();if(Yo(ye,Me,Ze))return this.reconsumeCodePoint(S),this.consumeIdentLikeToken();if(45===Me&&62===Ze)return this.consumeCodePoint(),this.consumeCodePoint(),oi;break;case 46:if(bs(S,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(S),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var lt=this.consumeCodePoint();if(42===lt&&47===(lt=this.consumeCodePoint()))return this.consumeToken();if(-1===lt)return this.consumeToken()}break;case 58:return fr;case 59:return w4;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),pc;break;case 64:var dt=this.peekCodePoint(0),kt=this.peekCodePoint(1),Gn=this.peekCodePoint(2);if(Yo(dt,kt,Gn))return{type:7,value:this.consumeName()};break;case 91:return ht;case 92:if(C2(S,this.peekCodePoint(0)))return this.reconsumeCodePoint(S),this.consumeIdentLikeToken();break;case 93:return b1;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),s2;break;case 123:return f0;case 125:return Dr;case 117:case 85:var Tn=this.peekCodePoint(0),Qn=this.peekCodePoint(1);return 43===Tn&&(zn(Qn)||63===Qn)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(S),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),h0;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),t3;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),wl;break;case-1:return ia}return ed(S)?(this.consumeWhiteSpace(),ir):Js(S)?(this.reconsumeCodePoint(S),this.consumeNumericToken()):vo(S)?(this.reconsumeCodePoint(S),this.consumeIdentLikeToken()):{type:6,value:ft(S)}},E.prototype.consumeCodePoint=function(){var S=this._value.shift();return typeof S>"u"?-1:S},E.prototype.reconsumeCodePoint=function(S){this._value.unshift(S)},E.prototype.peekCodePoint=function(S){return S>=this._value.length?-1:this._value[S]},E.prototype.consumeUnicodeRangeToken=function(){for(var S=[],D=this.consumeCodePoint();zn(D)&&S.length<6;)S.push(D),D=this.consumeCodePoint();for(var L=!1;63===D&&S.length<6;)S.push(D),D=this.consumeCodePoint(),L=!0;if(L)return{type:30,start:parseInt(ft.apply(void 0,S.map(function(Me){return 63===Me?48:Me})),16),end:parseInt(ft.apply(void 0,S.map(function(Me){return 63===Me?70:Me})),16)};var re=parseInt(ft.apply(void 0,S),16);if(45===this.peekCodePoint(0)&&zn(this.peekCodePoint(1))){this.consumeCodePoint(),D=this.consumeCodePoint();for(var ye=[];zn(D)&&ye.length<6;)ye.push(D),D=this.consumeCodePoint();return{type:30,start:re,end:parseInt(ft.apply(void 0,ye),16)}}return{type:30,start:re,end:re}},E.prototype.consumeIdentLikeToken=function(){var S=this.consumeName();return"url"===S.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:S}):{type:20,value:S}},E.prototype.consumeUrlToken=function(){var S=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var D=this.peekCodePoint(0);if(39===D||34===D){var L=this.consumeStringToken(this.consumeCodePoint());return 0===L.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:L.value}):(this.consumeBadUrlRemnants(),eo)}for(;;){var O=this.consumeCodePoint();if(-1===O||41===O)return{type:22,value:ft.apply(void 0,S)};if(ed(O))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:ft.apply(void 0,S)}):(this.consumeBadUrlRemnants(),eo);if(34===O||39===O||40===O||X1(O))return this.consumeBadUrlRemnants(),eo;if(92===O){if(!C2(O,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),eo;S.push(this.consumeEscapedCodePoint())}else S.push(O)}},E.prototype.consumeWhiteSpace=function(){for(;ed(this.peekCodePoint(0));)this.consumeCodePoint()},E.prototype.consumeBadUrlRemnants=function(){for(;;){var S=this.consumeCodePoint();if(41===S||-1===S)return;C2(S,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},E.prototype.consumeStringSlice=function(S){for(var L="";S>0;){var O=Math.min(5e4,S);L+=ft.apply(void 0,this._value.splice(0,O)),S-=O}return this._value.shift(),L},E.prototype.consumeStringToken=function(S){for(var D="",L=0;;){var O=this._value[L];if(-1===O||void 0===O||O===S)return{type:0,value:D+=this.consumeStringSlice(L)};if(10===O)return this._value.splice(0,L),d0;if(92===O){var G=this._value[L+1];-1!==G&&void 0!==G&&(10===G?(D+=this.consumeStringSlice(L),L=-1,this._value.shift()):C2(O,G)&&(D+=this.consumeStringSlice(L),D+=ft(this.consumeEscapedCodePoint()),L=-1))}L++}},E.prototype.consumeNumber=function(){var S=[],D=4,L=this.peekCodePoint(0);for((43===L||45===L)&&S.push(this.consumeCodePoint());Js(this.peekCodePoint(0));)S.push(this.consumeCodePoint());L=this.peekCodePoint(0);var O=this.peekCodePoint(1);if(46===L&&Js(O))for(S.push(this.consumeCodePoint(),this.consumeCodePoint()),D=8;Js(this.peekCodePoint(0));)S.push(this.consumeCodePoint());L=this.peekCodePoint(0),O=this.peekCodePoint(1);var G=this.peekCodePoint(2);if((69===L||101===L)&&((43===O||45===O)&&Js(G)||Js(O)))for(S.push(this.consumeCodePoint(),this.consumeCodePoint()),D=8;Js(this.peekCodePoint(0));)S.push(this.consumeCodePoint());return[Zo(S),D]},E.prototype.consumeNumericToken=function(){var S=this.consumeNumber(),D=S[0],L=S[1],O=this.peekCodePoint(0),G=this.peekCodePoint(1),re=this.peekCodePoint(2);return Yo(O,G,re)?{type:15,number:D,flags:L,unit:this.consumeName()}:37===O?(this.consumeCodePoint(),{type:16,number:D,flags:L}):{type:17,number:D,flags:L}},E.prototype.consumeEscapedCodePoint=function(){var S=this.consumeCodePoint();if(zn(S)){for(var D=ft(S);zn(this.peekCodePoint(0))&&D.length<6;)D+=ft(this.consumeCodePoint());ed(this.peekCodePoint(0))&&this.consumeCodePoint();var L=parseInt(D,16);return 0===L||function(E){return E>=55296&&E<=57343}(L)||L>1114111?65533:L}return-1===S?65533:S},E.prototype.consumeName=function(){for(var S="";;){var D=this.consumeCodePoint();if(Ha(D))S+=ft(D);else{if(!C2(D,this.peekCodePoint(0)))return this.reconsumeCodePoint(D),S;S+=ft(this.consumeEscapedCodePoint())}}},E}(),o2=function(){function E(S){this._tokens=S}return E.create=function(S){var D=new Y1;return D.write(S),new E(D.read())},E.parseValue=function(S){return E.create(S).parseComponentValue()},E.parseValues=function(S){return E.create(S).parseComponentValues()},E.prototype.parseComponentValue=function(){for(var S=this.consumeToken();31===S.type;)S=this.consumeToken();if(32===S.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(S);var D=this.consumeComponentValue();do{S=this.consumeToken()}while(31===S.type);if(32===S.type)return D;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},E.prototype.parseComponentValues=function(){for(var S=[];;){var D=this.consumeComponentValue();if(32===D.type)return S;S.push(D),S.push()}},E.prototype.consumeComponentValue=function(){var S=this.consumeToken();switch(S.type){case 11:case 28:case 2:return this.consumeSimpleBlock(S.type);case 19:return this.consumeFunction(S)}return S},E.prototype.consumeSimpleBlock=function(S){for(var D={type:S,values:[]},L=this.consumeToken();;){if(32===L.type||Pc(L,S))return D;this.reconsumeToken(L),D.values.push(this.consumeComponentValue()),L=this.consumeToken()}},E.prototype.consumeFunction=function(S){for(var D={name:S.value,values:[],type:18};;){var L=this.consumeToken();if(32===L.type||3===L.type)return D;this.reconsumeToken(L),D.values.push(this.consumeComponentValue())}},E.prototype.consumeToken=function(){var S=this._tokens.shift();return typeof S>"u"?ia:S},E.prototype.reconsumeToken=function(S){this._tokens.unshift(S)},E}(),Li=function(E){return 15===E.type},$s=function(E){return 17===E.type},sn=function(E){return 20===E.type},ki=function(E){return 0===E.type},gr=function(E,S){return sn(E)&&E.value===S},Is=function(E){return 31!==E.type},V2=function(E){return 31!==E.type&&4!==E.type},uo=function(E){var S=[],D=[];return E.forEach(function(L){if(4===L.type){if(0===D.length)throw new Error("Error parsing function args, zero tokens for arg");return S.push(D),void(D=[])}31!==L.type&&D.push(L)}),D.length&&S.push(D),S},Pc=function(E,S){return 11===S&&12===E.type||28===S&&29===E.type||2===S&&3===E.type},dr=function(E){return 17===E.type||15===E.type},Hs=function(E){return 16===E.type||dr(E)},za=function(E){return E.length>1?[E[0],E[1]]:[E[0]]},ri={type:17,number:0,flags:4},gc={type:16,number:50,flags:4},Oa={type:16,number:100,flags:4},mc=function(E,S,D){var L=E[0],O=E[1];return[zi(L,S),zi(typeof O<"u"?O:L,D)]},zi=function(E,S){if(16===E.type)return E.number/100*S;if(Li(E))switch(E.unit){case"rem":case"em":return 16*E.number;default:return E.number}return E.number},Va_parse=function(E,S){if(15===S.type)switch(S.unit){case"deg":return Math.PI*S.number/180;case"grad":return Math.PI/200*S.number;case"rad":return S.number;case"turn":return 2*Math.PI*S.number}throw new Error("Unsupported angle type")},td=function(E){return 15===E.type&&("deg"===E.unit||"grad"===E.unit||"rad"===E.unit||"turn"===E.unit)},lr=function(E){switch(E.filter(sn).map(function(D){return D.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ri,ri];case"to top":case"bottom":return b2(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ri,Oa];case"to right":case"left":return b2(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Oa,Oa];case"to bottom":case"top":return b2(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Oa,ri];case"to left":case"right":return b2(270)}return 0},b2=function(E){return Math.PI*E/180},U2_parse=function(E,S){if(18===S.type){var D=zs[S.name];if(typeof D>"u")throw new Error('Attempting to parse an unsupported color function "'+S.name+'"');return D(E,S.values)}if(5===S.type){if(3===S.value.length){var L=S.value.substring(0,1),O=S.value.substring(1,2),G=S.value.substring(2,3);return x2(parseInt(L+L,16),parseInt(O+O,16),parseInt(G+G,16),1)}if(4===S.value.length){L=S.value.substring(0,1),O=S.value.substring(1,2),G=S.value.substring(2,3);var re=S.value.substring(3,4);return x2(parseInt(L+L,16),parseInt(O+O,16),parseInt(G+G,16),parseInt(re+re,16)/255)}if(6===S.value.length)return L=S.value.substring(0,2),O=S.value.substring(2,4),G=S.value.substring(4,6),x2(parseInt(L,16),parseInt(O,16),parseInt(G,16),1);if(8===S.value.length)return L=S.value.substring(0,2),O=S.value.substring(2,4),G=S.value.substring(4,6),re=S.value.substring(6,8),x2(parseInt(L,16),parseInt(O,16),parseInt(G,16),parseInt(re,16)/255)}if(20===S.type){var ye=S1[S.value.toUpperCase()];if(typeof ye<"u")return ye}return S1.TRANSPARENT},Ac=function(E){return 0==(255&E)},Ea=function(E){var S=255&E,D=255&E>>8,L=255&E>>16,O=255&E>>24;return S<255?"rgba("+O+","+L+","+D+","+S/255+")":"rgb("+O+","+L+","+D+")"},x2=function(E,S,D,L){return(E<<24|S<<16|D<<8|Math.round(255*L)<<0)>>>0},Cl=function(E,S){if(17===E.type)return E.number;if(16===E.type){var D=3===S?1:255;return 3===S?E.number/100*D:Math.round(E.number/100*D)}return 0},M1=function(E,S){var D=S.filter(V2);if(3===D.length){var L=D.map(Cl);return x2(L[0],L[1],L[2],1)}if(4===D.length){var ye=D.map(Cl);return x2(ye[0],ye[1],ye[2],ye[3])}return 0};function Ir(E,S,D){return D<0&&(D+=1),D>=1&&(D-=1),D<1/6?(S-E)*D*6+E:D<.5?S:D<2/3?6*(S-E)*(2/3-D)+E:E}var uu=function(E,S){var D=S.filter(V2),L=D[0],O=D[1],G=D[2],re=D[3],ye=(17===L.type?b2(L.number):Va_parse(E,L))/(2*Math.PI),Me=Hs(O)?O.number/100:0,Ze=Hs(G)?G.number/100:0,lt=typeof re<"u"&&Hs(re)?zi(re,1):1;if(0===Me)return x2(255*Ze,255*Ze,255*Ze,1);var dt=Ze<=.5?Ze*(Me+1):Ze+Me-Ze*Me,kt=2*Ze-dt,Gn=Ir(kt,dt,ye+1/3),Tn=Ir(kt,dt,ye),Qn=Ir(kt,dt,ye-1/3);return x2(255*Gn,255*Tn,255*Qn,lt)},zs={hsl:uu,hsla:uu,rgb:M1,rgba:M1},Bo=function(E,S){return U2_parse(E,o2.create(S).parseComponentValue())},S1={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},p0={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(E,S){return S.map(function(D){if(sn(D))switch(D.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},n3={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ga=function(E,S){var D=U2_parse(E,S[0]),L=S[1];return L&&Hs(L)?{color:D,stop:L}:{color:D,stop:null}},bl=function(E,S){var D=E[0],L=E[E.length-1];null===D.stop&&(D.stop=ri),null===L.stop&&(L.stop=Oa);for(var O=[],G=0,re=0;re<E.length;re++){var ye=E[re].stop;if(null!==ye){var Me=zi(ye,S);O.push(Me>G?Me:G),G=Me}else O.push(null)}var Ze=null;for(re=0;re<O.length;re++){var lt=O[re];if(null===lt)null===Ze&&(Ze=re);else if(null!==Ze){for(var dt=re-Ze,Gn=(lt-O[Ze-1])/(dt+1),Tn=1;Tn<=dt;Tn++)O[Ze+Tn-1]=Gn*Tn;Ze=null}}return E.map(function(Qn,Cr){return{color:Qn.color,stop:Math.max(Math.min(1,O[Cr]/S),0)}})},M2=function(E,S,D){var L="number"==typeof E?E:function(E,S,D){var L=S/2,O=D/2,G=zi(E[0],S)-L,re=O-zi(E[1],D);return(Math.atan2(re,G)+2*Math.PI)%(2*Math.PI)}(E,S,D),O=Math.abs(S*Math.sin(L))+Math.abs(D*Math.cos(L)),G=S/2,re=D/2,ye=O/2,Me=Math.sin(L-Math.PI/2)*ye,Ze=Math.cos(L-Math.PI/2)*ye;return[O,G-Ze,G+Ze,re-Me,re+Me]},ho=function(E,S){return Math.sqrt(E*E+S*S)},_p=function(E,S,D,L,O){return[[0,0],[0,S],[E,0],[E,S]].reduce(function(re,ye){var lt=ho(D-ye[0],L-ye[1]);return(O?lt<re.optimumDistance:lt>re.optimumDistance)?{optimumCorner:ye,optimumDistance:lt}:re},{optimumDistance:O?1/0:-1/0,optimumCorner:null}).optimumCorner},ma=function(E,S){var D=b2(180),L=[];return uo(S).forEach(function(O,G){if(0===G){var re=O[0];if(20===re.type&&-1!==["top","left","right","bottom"].indexOf(re.value))return void(D=lr(O));if(td(re))return void(D=(Va_parse(E,re)+b2(270))%b2(360))}var ye=ga(E,O);L.push(ye)}),{angle:D,stops:L,type:1}},G2="closest-side",a2="farthest-side",U6="closest-corner",hu="farthest-corner",vc="ellipse",Ua="contain",_c=function(E,S){var D=0,L=3,O=[],G=[];return uo(S).forEach(function(re,ye){var Me=!0;if(0===ye?Me=re.reduce(function(lt,dt){if(sn(dt))switch(dt.value){case"center":return G.push(gc),!1;case"top":case"left":return G.push(ri),!1;case"right":case"bottom":return G.push(Oa),!1}else if(Hs(dt)||dr(dt))return G.push(dt),!1;return lt},Me):1===ye&&(Me=re.reduce(function(lt,dt){if(sn(dt))switch(dt.value){case"circle":return D=0,!1;case vc:return D=1,!1;case Ua:case G2:return L=0,!1;case a2:return L=1,!1;case U6:return L=2,!1;case"cover":case hu:return L=3,!1}else if(dr(dt)||Hs(dt))return Array.isArray(L)||(L=[]),L.push(dt),!1;return lt},Me)),Me){var Ze=ga(E,re);O.push(Ze)}}),{size:L,shape:D,stops:O,position:G,type:2}},O3_parse=function(E,S){if(22===S.type){var D={url:S.value,type:0};return E.cache.addImage(S.value),D}if(18===S.type){var L=c1[S.name];if(typeof L>"u")throw new Error('Attempting to parse an unsupported image function "'+S.name+'"');return L(E,S.values)}throw new Error("Unsupported image type "+S.type)};for(var c1={"linear-gradient":function(E,S){var D=b2(180),L=[];return uo(S).forEach(function(O,G){if(0===G){var re=O[0];if(20===re.type&&"to"===re.value)return void(D=lr(O));if(td(re))return void(D=Va_parse(E,re))}var ye=ga(E,O);L.push(ye)}),{angle:D,stops:L,type:1}},"-moz-linear-gradient":ma,"-ms-linear-gradient":ma,"-o-linear-gradient":ma,"-webkit-linear-gradient":ma,"radial-gradient":function(E,S){var D=0,L=3,O=[],G=[];return uo(S).forEach(function(re,ye){var Me=!0;if(0===ye){var Ze=!1;Me=re.reduce(function(dt,kt){if(Ze)if(sn(kt))switch(kt.value){case"center":return G.push(gc),dt;case"top":case"left":return G.push(ri),dt;case"right":case"bottom":return G.push(Oa),dt}else(Hs(kt)||dr(kt))&&G.push(kt);else if(sn(kt))switch(kt.value){case"circle":return D=0,!1;case vc:return D=1,!1;case"at":return Ze=!0,!1;case G2:return L=0,!1;case"cover":case a2:return L=1,!1;case Ua:case U6:return L=2,!1;case hu:return L=3,!1}else if(dr(kt)||Hs(kt))return Array.isArray(L)||(L=[]),L.push(kt),!1;return dt},Me)}if(Me){var lt=ga(E,re);O.push(lt)}}),{size:L,shape:D,stops:O,position:G,type:2}},"-moz-radial-gradient":_c,"-ms-radial-gradient":_c,"-o-radial-gradient":_c,"-webkit-radial-gradient":_c,"-webkit-gradient":function(E,S){var D=b2(180),L=[],O=1;return uo(S).forEach(function(Me,Ze){var lt=Me[0];if(0===Ze){if(sn(lt)&&"linear"===lt.value)return void(O=1);if(sn(lt)&&"radial"===lt.value)return void(O=2)}if(18===lt.type)if("from"===lt.name){var dt=U2_parse(E,lt.values[0]);L.push({stop:ri,color:dt})}else if("to"===lt.name)dt=U2_parse(E,lt.values[0]),L.push({stop:Oa,color:dt});else if("color-stop"===lt.name){var kt=lt.values.filter(V2);if(2===kt.length){dt=U2_parse(E,kt[1]);var Gn=kt[0];$s(Gn)&&L.push({stop:{type:16,number:100*Gn.number,flags:Gn.flags},color:dt})}}}),1===O?{angle:(D+b2(180))%b2(360),stops:L,type:O}:{size:3,shape:0,stops:L,position:[],type:O}}},fu={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(E,S){if(0===S.length)return[];var D=S[0];return 20===D.type&&"none"===D.value?[]:S.filter(function(L){return V2(L)&&function m0(E){return!(20===E.type&&"none"===E.value||18===E.type&&!c1[E.name])}(L)}).map(function(L){return O3_parse(E,L)})}},wr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(E,S){return S.map(function(D){if(sn(D))switch(D.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},W2={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(E,S){return uo(S).map(function(D){return D.filter(Hs)}).map(za)}},Ro={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(E,S){return uo(S).map(function(D){return D.filter(sn).map(function(L){return L.value}).join(" ")}).map(wp)}},wp=function(E){switch(E){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},N3=(()=>{return(E=N3||(N3={})).AUTO="auto",E.CONTAIN="contain",E.COVER="cover",N3;var E})(),l1={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(E,S){return uo(S).map(function(D){return D.filter(V3)})}},V3=function(E){return sn(E)||Hs(E)},b4=function(E){return{name:"border-"+E+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},du=b4("top"),Ga=b4("right"),sa=b4("bottom"),T1=b4("left"),r3=function(E){return{name:"border-radius-"+E,initialValue:"0 0",prefix:!1,type:1,parse:function(S,D){return za(D.filter(Hs))}}},yc=r3("top-left"),Cp=r3("top-right"),oa=r3("bottom-right"),Qa=r3("bottom-left"),Q6=function(E){return{name:"border-"+E+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(S,D){switch(D){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},c2=Q6("top"),S2=Q6("right"),Ah=Q6("bottom"),W6=Q6("left"),U3=function(E){return{name:"border-"+E+"-width",initialValue:"0",type:0,prefix:!1,parse:function(S,D){return Li(D)?D.number:0}}},aa=U3("top"),A0=U3("right"),G3=U3("bottom"),j6=U3("left"),E2={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Q3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(E,S){return"rtl"===S?1:0}},pu={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(E,S){return S.filter(sn).reduce(function(D,L){return D|Ni(L.value)},0)}},Ni=function(E){switch(E){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},W3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Vi={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(E,S){return 20===S.type&&"normal"===S.value?0:17===S.type||15===S.type?S.number:0}},T2=(()=>{return(E=T2||(T2={})).NORMAL="normal",E.STRICT="strict",T2;var E})(),v0={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){return"strict"===S?T2.STRICT:T2.NORMAL}},x4={name:"line-height",initialValue:"normal",prefix:!1,type:4},Z1=function(E,S){return sn(E)&&"normal"===E.value?1.2*S:17===E.type?S*E.number:Hs(E)?zi(E,S):S},bp={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(E,S){return 20===S.type&&"none"===S.value?null:O3_parse(E,S)}},Hc={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(E,S){return"inside"===S?0:1}},It={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Sr=function(E){return{name:"margin-"+E,initialValue:"0",prefix:!1,type:4}},ai=Sr("top"),h=Sr("right"),d=Sr("bottom"),m=Sr("left"),v={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(E,S){return S.filter(sn).map(function(D){switch(D.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},b={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){return"break-word"===S?"break-word":"normal"}},B=function(E){return{name:"padding-"+E,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},z=B("top"),q=B("right"),pe=B("bottom"),Ue=B("left"),gt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(E,S){switch(S){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},pt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(E,S){switch(S){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},fn={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(E,S){return 1===S.length&&gr(S[0],"none")?[]:uo(S).map(function(D){for(var L={color:S1.TRANSPARENT,offsetX:ri,offsetY:ri,blur:ri},O=0,G=0;G<D.length;G++){var re=D[G];dr(re)?(0===O?L.offsetX=re:1===O?L.offsetY=re:L.blur=re,O++):L.color=U2_parse(E,re)}return L})}},Mn={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Fn={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(E,S){if(20===S.type&&"none"===S.value)return null;if(18===S.type){var D=Fo[S.name];if(typeof D>"u")throw new Error('Attempting to parse an unsupported transform function "'+S.name+'"');return D(S.values)}return null}},Fo={matrix:function(E){var S=E.filter(function(D){return 17===D.type}).map(function(D){return D.number});return 6===S.length?S:null},matrix3d:function(E){var S=E.filter(function(Me){return 17===Me.type}).map(function(Me){return Me.number});return 16===S.length?[S[0],S[1],S[4],S[5],S[12],S[13]]:null}},u1={type:16,number:50,flags:4},xl=[u1,u1],Ml={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(E,S){var D=S.filter(Hs);return 2!==D.length?xl:[D[0],D[1]]}},vh={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"hidden":return 1;case"collapse":return 2;default:return 0}}},_h=(()=>{return(E=_h||(_h={})).NORMAL="normal",E.BREAK_ALL="break-all",E.KEEP_ALL="keep-all",_h;var E})(),Um={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){switch(S){case"break-all":return _h.BREAK_ALL;case"keep-all":return _h.KEEP_ALL;default:return _h.NORMAL}}},qT={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(E,S){if(20===S.type)return{auto:!0,order:0};if($s(S))return{auto:!1,order:S.number};throw new Error("Invalid z-index number parsed")}},Gm={name:"time",parse:function(E,S){if(15===S.type)switch(S.unit.toLowerCase()){case"s":return 1e3*S.number;case"ms":return S.number}throw new Error("Unsupported time type")}},Qm={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(E,S){return $s(S)?S.number:1}},Ly={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dy={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(E,S){return S.filter(sn).map(function(D){switch(D.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(D){return 0!==D})}},Iy={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(E,S){var D=[],L=[];return S.forEach(function(O){switch(O.type){case 20:case 0:D.push(O.value);break;case 17:D.push(O.number.toString());break;case 4:L.push(D.join(" ")),D.length=0}}),D.length&&L.push(D.join(" ")),L.map(function(O){return-1===O.indexOf(" ")?O:"'"+O+"'"})}},By={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Wm={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(E,S){return $s(S)?S.number:sn(S)&&"bold"===S.value?700:400}},KT={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(E,S){return S.filter(sn).map(function(D){return D.value})}},XT={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){switch(S){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Os=function(E,S){return 0!=(E&S)},_0={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(E,S){if(0===S.length)return[];var D=S[0];return 20===D.type&&"none"===D.value?[]:S}},Wa={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(E,S){if(0===S.length)return null;var D=S[0];if(20===D.type&&"none"===D.value)return null;for(var L=[],O=S.filter(Is),G=0;G<O.length;G++){var re=O[G],ye=O[G+1];if(20===re.type){var Me=ye&&$s(ye)?ye.number:1;L.push({counter:re.value,increment:Me})}}return L}},ko={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(E,S){if(0===S.length)return[];for(var D=[],L=S.filter(Is),O=0;O<L.length;O++){var G=L[O],re=L[O+1];if(sn(G)&&"none"!==G.value){var ye=re&&$s(re)?re.number:0;D.push({counter:G.value,reset:ye})}}return D}},YT={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(E,S){return S.filter(Li).map(function(D){return Gm.parse(E,D)})}},Ry={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(E,S){if(0===S.length)return null;var D=S[0];if(20===D.type&&"none"===D.value)return null;var L=[],O=S.filter(ki);if(O.length%2!=0)return null;for(var G=0;G<O.length;G+=2)L.push({open:O[G].value,close:O[G+1].value});return L}},Fy=function(E,S,D){if(!E)return"";var L=E[Math.min(S,E.length-1)];return L?D?L.open:L.close:""},ZT={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(E,S){return 1===S.length&&gr(S[0],"none")?[]:uo(S).map(function(D){for(var L={color:255,offsetX:ri,offsetY:ri,blur:ri,spread:ri,inset:!1},O=0,G=0;G<D.length;G++){var re=D[G];gr(re,"inset")?L.inset=!0:dr(re)?(0===O?L.offsetX=re:1===O?L.offsetY=re:2===O?L.blur=re:L.spread=re,O++):L.color=U2_parse(E,re)}return L})}},JT={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(E,S){var L=[];return S.filter(sn).forEach(function(O){switch(O.value){case"stroke":L.push(1);break;case"fill":L.push(0);break;case"markers":L.push(2)}}),[0,1,2].forEach(function(O){-1===L.indexOf(O)&&L.push(O)}),L}},xp={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Mp={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(E,S){return Li(S)?S.number:0}},Sp=function(){function E(S,D){var L,O;this.animationDuration=si(S,YT,D.animationDuration),this.backgroundClip=si(S,p0,D.backgroundClip),this.backgroundColor=si(S,n3,D.backgroundColor),this.backgroundImage=si(S,fu,D.backgroundImage),this.backgroundOrigin=si(S,wr,D.backgroundOrigin),this.backgroundPosition=si(S,W2,D.backgroundPosition),this.backgroundRepeat=si(S,Ro,D.backgroundRepeat),this.backgroundSize=si(S,l1,D.backgroundSize),this.borderTopColor=si(S,du,D.borderTopColor),this.borderRightColor=si(S,Ga,D.borderRightColor),this.borderBottomColor=si(S,sa,D.borderBottomColor),this.borderLeftColor=si(S,T1,D.borderLeftColor),this.borderTopLeftRadius=si(S,yc,D.borderTopLeftRadius),this.borderTopRightRadius=si(S,Cp,D.borderTopRightRadius),this.borderBottomRightRadius=si(S,oa,D.borderBottomRightRadius),this.borderBottomLeftRadius=si(S,Qa,D.borderBottomLeftRadius),this.borderTopStyle=si(S,c2,D.borderTopStyle),this.borderRightStyle=si(S,S2,D.borderRightStyle),this.borderBottomStyle=si(S,Ah,D.borderBottomStyle),this.borderLeftStyle=si(S,W6,D.borderLeftStyle),this.borderTopWidth=si(S,aa,D.borderTopWidth),this.borderRightWidth=si(S,A0,D.borderRightWidth),this.borderBottomWidth=si(S,G3,D.borderBottomWidth),this.borderLeftWidth=si(S,j6,D.borderLeftWidth),this.boxShadow=si(S,ZT,D.boxShadow),this.color=si(S,E2,D.color),this.direction=si(S,Q3,D.direction),this.display=si(S,pu,D.display),this.float=si(S,W3,D.cssFloat),this.fontFamily=si(S,Iy,D.fontFamily),this.fontSize=si(S,By,D.fontSize),this.fontStyle=si(S,XT,D.fontStyle),this.fontVariant=si(S,KT,D.fontVariant),this.fontWeight=si(S,Wm,D.fontWeight),this.letterSpacing=si(S,Vi,D.letterSpacing),this.lineBreak=si(S,v0,D.lineBreak),this.lineHeight=si(S,x4,D.lineHeight),this.listStyleImage=si(S,bp,D.listStyleImage),this.listStylePosition=si(S,Hc,D.listStylePosition),this.listStyleType=si(S,It,D.listStyleType),this.marginTop=si(S,ai,D.marginTop),this.marginRight=si(S,h,D.marginRight),this.marginBottom=si(S,d,D.marginBottom),this.marginLeft=si(S,m,D.marginLeft),this.opacity=si(S,Qm,D.opacity);var G=si(S,v,D.overflow);this.overflowX=G[0],this.overflowY=G[G.length>1?1:0],this.overflowWrap=si(S,b,D.overflowWrap),this.paddingTop=si(S,z,D.paddingTop),this.paddingRight=si(S,q,D.paddingRight),this.paddingBottom=si(S,pe,D.paddingBottom),this.paddingLeft=si(S,Ue,D.paddingLeft),this.paintOrder=si(S,JT,D.paintOrder),this.position=si(S,pt,D.position),this.textAlign=si(S,gt,D.textAlign),this.textDecorationColor=si(S,Ly,null!==(L=D.textDecorationColor)&&void 0!==L?L:D.color),this.textDecorationLine=si(S,Dy,null!==(O=D.textDecorationLine)&&void 0!==O?O:D.textDecoration),this.textShadow=si(S,fn,D.textShadow),this.textTransform=si(S,Mn,D.textTransform),this.transform=si(S,Fn,D.transform),this.transformOrigin=si(S,Ml,D.transformOrigin),this.visibility=si(S,vh,D.visibility),this.webkitTextStrokeColor=si(S,xp,D.webkitTextStrokeColor),this.webkitTextStrokeWidth=si(S,Mp,D.webkitTextStrokeWidth),this.wordBreak=si(S,Um,D.wordBreak),this.zIndex=si(S,qT,D.zIndex)}return E.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},E.prototype.isTransparent=function(){return Ac(this.backgroundColor)},E.prototype.isTransformed=function(){return null!==this.transform},E.prototype.isPositioned=function(){return 0!==this.position},E.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},E.prototype.isFloating=function(){return 0!==this.float},E.prototype.isInlineLevel=function(){return Os(this.display,4)||Os(this.display,33554432)||Os(this.display,268435456)||Os(this.display,536870912)||Os(this.display,67108864)||Os(this.display,134217728)},E}(),jm=function E(S,D){this.content=si(S,_0,D.content),this.quotes=si(S,Ry,D.quotes)},$m=function E(S,D){this.counterIncrement=si(S,Wa,D.counterIncrement),this.counterReset=si(S,ko,D.counterReset)},si=function(E,S,D){var L=new Y1,O=null!==D&&typeof D<"u"?D.toString():S.initialValue;L.write(O);var G=new o2(L.read());switch(S.type){case 2:var re=G.parseComponentValue();return S.parse(E,sn(re)?re.value:S.initialValue);case 0:return S.parse(E,G.parseComponentValue());case 1:return S.parse(E,G.parseComponentValues());case 4:return G.parseComponentValue();case 3:switch(S.format){case"angle":return Va_parse(E,G.parseComponentValue());case"color":return U2_parse(E,G.parseComponentValue());case"image":return O3_parse(E,G.parseComponentValue());case"length":var ye=G.parseComponentValue();return dr(ye)?ye:ri;case"length-percentage":var Me=G.parseComponentValue();return Hs(Me)?Me:ri;case"time":return Gm.parse(E,G.parseComponentValue())}}},qm=function(E,S){var D=function(E){switch(E.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(E);return 1===D||S===D},M4=function E(S,D){this.context=S,this.textNodes=[],this.elements=[],this.flags=0,qm(D,3),this.styles=new Sp(S,window.getComputedStyle(D,null)),uA(D)&&(this.styles.animationDuration.some(function(L){return L>0})&&(D.style.animationDuration="0s"),null!==this.styles.transform&&(D.style.transform="none")),this.bounds=Ie(this.context,D),qm(D,4)&&(this.flags|=16)},Ep="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K6=typeof Uint8Array>"u"?[]:new Uint8Array(256),Tp=0;Tp<Ep.length;Tp++)K6[Ep.charCodeAt(Tp)]=Tp;for(var zy=function(E,S,D){return E.slice?E.slice(S,D):new Uint16Array(Array.prototype.slice.call(E,S,D))},Jm=function(){function E(S,D,L,O,G,re){this.initialValue=S,this.errorValue=D,this.highStart=L,this.highValueIndex=O,this.index=G,this.data=re}return E.prototype.get=function(S){var D;if(S>=0){if(S<55296||S>56319&&S<=65535)return this.data[D=((D=this.index[S>>5])<<2)+(31&S)];if(S<=65535)return this.data[D=((D=this.index[2048+(S-55296>>5)])<<2)+(31&S)];if(S<this.highStart)return D=this.index[D=2080+(S>>11)],this.data[D=((D=this.index[D+=S>>5&63])<<2)+(31&S)];if(S<=1114111)return this.data[this.highValueIndex]}return this.errorValue},E}(),Y6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bp=typeof Uint8Array>"u"?[]:new Uint8Array(256),Rp=0;Rp<Y6.length;Rp++)Bp[Y6.charCodeAt(Rp)]=Rp;var sd=8,tA=9,nA=11,yh=12,Uy=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];if(String.fromCodePoint)return String.fromCodePoint.apply(String,E);var D=E.length;if(!D)return"";for(var L=[],O=-1,G="";++O<D;){var re=E[O];re<=65535?L.push(re):L.push(55296+((re-=65536)>>10),re%1024+56320),(O+1===D||L.length>16384)&&(G+=String.fromCharCode.apply(String,L),L.length=0)}return G},s3=function(E,S){var D=function(E){var L,G,re,ye,Me,S=.75*E.length,D=E.length,O=0;"="===E[E.length-1]&&(S--,"="===E[E.length-2]&&S--);var Ze=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(S):new Array(S),lt=Array.isArray(Ze)?Ze:new Uint8Array(Ze);for(L=0;L<D;L+=4)G=K6[E.charCodeAt(L)],re=K6[E.charCodeAt(L+1)],ye=K6[E.charCodeAt(L+2)],Me=K6[E.charCodeAt(L+3)],lt[O++]=G<<2|re>>4,lt[O++]=(15&re)<<4|ye>>2,lt[O++]=(3&ye)<<6|63&Me;return Ze}(E),L=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=4)D.push(E[L+3]<<24|E[L+2]<<16|E[L+1]<<8|E[L]);return D}(D):new Uint32Array(D),O=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=2)D.push(E[L+1]<<8|E[L]);return D}(D):new Uint16Array(D),re=zy(O,12,L[4]/2),ye=2===L[5]?zy(O,(24+L[4])/2):function(E,S,D){return E.slice?E.slice(S,D):new Uint32Array(Array.prototype.slice.call(E,S,D))}(L,Math.ceil((24+L[4])/4));return new Jm(L[0],L[1],L[2],L[3],re,ye)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),od=function(E){return s3.get(E)},Gy=function(E,S,D){var L=D-2,O=S[L],G=S[D-1],re=S[D];if(2===G&&3===re)return"\xd7";if(2===G||3===G||4===G||2===re||3===re||4===re)return"\xf7";if(G===sd&&-1!==[sd,tA,nA,yh].indexOf(re)||(G===nA||G===tA)&&(re===tA||10===re)||(G===yh||10===G)&&10===re||13===re||5===re||7===re||1===G)return"\xd7";if(13===G&&14===re){for(;5===O;)O=S[--L];if(14===O)return"\xd7"}if(15===G&&15===re){for(var ye=0;15===O;)ye++,O=S[--L];if(ye%2==0)return"\xd7"}return"\xf7"},iA=function(E){var S=function(E){for(var S=[],D=0,L=E.length;D<L;){var O=E.charCodeAt(D++);if(O>=55296&&O<=56319&&D<L){var G=E.charCodeAt(D++);56320==(64512&G)?S.push(((1023&O)<<10)+(1023&G)+65536):(S.push(O),D--)}else S.push(O)}return S}(E),D=S.length,L=0,O=0,G=S.map(od);return{next:function(){if(L>=D)return{done:!0,value:null};for(var re="\xd7";L<D&&"\xd7"===(re=Gy(0,G,++L)););if("\xd7"!==re||L===D){var ye=Uy.apply(null,S.slice(O,L));return O=L,{value:ye,done:!1}}return{done:!0,value:null}}}},iL=function(E){return 0===E[0]&&255===E[1]&&0===E[2]&&255===E[3]},Qy=function(E,S,D,L,O){var G="http://www.w3.org/2000/svg",re=document.createElementNS(G,"svg"),ye=document.createElementNS(G,"foreignObject");return re.setAttributeNS(null,"width",E.toString()),re.setAttributeNS(null,"height",S.toString()),ye.setAttributeNS(null,"width","100%"),ye.setAttributeNS(null,"height","100%"),ye.setAttributeNS(null,"x",D.toString()),ye.setAttributeNS(null,"y",L.toString()),ye.setAttributeNS(null,"externalResourcesRequired","true"),re.appendChild(ye),ye.appendChild(O),re},rL=function(E){return new Promise(function(S,D){var L=new Image;L.onload=function(){return S(L)},L.onerror=D,L.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(E))})},l2={get SUPPORT_RANGE_BOUNDS(){var E=function(E){if(E.createRange){var D=E.createRange();if(D.getBoundingClientRect){var L=E.createElement("boundtest");L.style.height="123px",L.style.display="block",E.body.appendChild(L),D.selectNode(L);var O=D.getBoundingClientRect(),G=Math.round(O.height);if(E.body.removeChild(L),123===G)return!0}}return!1}(document);return Object.defineProperty(l2,"SUPPORT_RANGE_BOUNDS",{value:E}),E},get SUPPORT_WORD_BREAKING(){var E=l2.SUPPORT_RANGE_BOUNDS&&function(E){var S=E.createElement("boundtest");S.style.width="50px",S.style.display="block",S.style.fontSize="12px",S.style.letterSpacing="0px",S.style.wordSpacing="0px",E.body.appendChild(S);var D=E.createRange();S.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var L=S.firstChild,O=ct(L.data).map(function(Me){return ft(Me)}),G=0,re={},ye=O.every(function(Me,Ze){D.setStart(L,G),D.setEnd(L,G+Me.length);var lt=D.getBoundingClientRect();G+=Me.length;var dt=lt.x>re.x||lt.y>re.y;return re=lt,0===Ze||dt});return E.body.removeChild(S),ye}(document);return Object.defineProperty(l2,"SUPPORT_WORD_BREAKING",{value:E}),E},get SUPPORT_SVG_DRAWING(){var E=function(E){var S=new Image,D=E.createElement("canvas"),L=D.getContext("2d");if(!L)return!1;S.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{L.drawImage(S,0,0),D.toDataURL()}catch{return!1}return!0}(document);return Object.defineProperty(l2,"SUPPORT_SVG_DRAWING",{value:E}),E},get SUPPORT_FOREIGNOBJECT_DRAWING(){var E="function"==typeof Array.from&&"function"==typeof window.fetch?function(E){var S=E.createElement("canvas"),D=100;S.width=D,S.height=D;var L=S.getContext("2d");if(!L)return Promise.reject(!1);L.fillStyle="rgb(0, 255, 0)",L.fillRect(0,0,D,D);var O=new Image,G=S.toDataURL();O.src=G;var re=Qy(D,D,0,0,O);return L.fillStyle="red",L.fillRect(0,0,D,D),rL(re).then(function(ye){L.drawImage(ye,0,0);var Me=L.getImageData(0,0,D,D).data;L.fillStyle="red",L.fillRect(0,0,D,D);var Ze=E.createElement("div");return Ze.style.backgroundImage="url("+G+")",Ze.style.height=D+"px",iL(Me)?rL(Qy(D,D,0,0,Ze)):Promise.reject(!1)}).then(function(ye){return L.drawImage(ye,0,0),iL(L.getImageData(0,0,D,D).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(l2,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:E}),E},get SUPPORT_CORS_IMAGES(){var E=typeof(new Image).crossOrigin<"u";return Object.defineProperty(l2,"SUPPORT_CORS_IMAGES",{value:E}),E},get SUPPORT_RESPONSE_TYPE(){var E="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(l2,"SUPPORT_RESPONSE_TYPE",{value:E}),E},get SUPPORT_CORS_XHR(){var E="withCredentials"in new XMLHttpRequest;return Object.defineProperty(l2,"SUPPORT_CORS_XHR",{value:E}),E},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var E=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(l2,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:E}),E}},gu=function E(S,D){this.text=S,this.bounds=D},eU=function(E,S){var D=S.ownerDocument;if(D){var L=D.createElement("html2canvaswrapper");L.appendChild(S.cloneNode(!0));var O=S.parentNode;if(O){O.replaceChild(L,S);var G=Ie(E,L);return L.firstChild&&O.replaceChild(L.firstChild,L),G}}return Re.EMPTY},L1=function(E,S,D){var L=E.ownerDocument;if(!L)throw new Error("Node has no owner document");var O=L.createRange();return O.setStart(E,S),O.setEnd(E,S+D),O},J6=function(E){if(l2.SUPPORT_NATIVE_TEXT_SEGMENTATION){var S=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(S.segment(E)).map(function(D){return D.segment})}return function(E){for(var L,S=iA(E),D=[];!(L=S.next()).done;)L.value&&D.push(L.value.slice());return D}(E)},tU=function(E,S){return 0!==S.letterSpacing?J6(E):function(E,S){if(l2.SUPPORT_NATIVE_TEXT_SEGMENTATION){var D=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(D.segment(E)).map(function(L){return L.segment})}return Sl(E,S)}(E,S)},sL=[32,160,4961,65792,65793,4153,4241],Sl=function(E,S){for(var O,D=function(E,S){var D=ct(E),L=N6(D,S),O=L[0],G=L[1],re=L[2],ye=D.length,Me=0,Ze=0;return{next:function(){if(Ze>=ye)return{done:!0,value:null};for(var lt=Lr;Ze<ye&&(lt=w1(D,G,O,++Ze,re))===Lr;);if(lt!==Lr||Ze===ye){var dt=new Co(D,lt,Me,Ze);return Me=Ze,{value:dt,done:!1}}return{done:!0,value:null}}}}(E,{lineBreak:S.lineBreak,wordBreak:"break-word"===S.overflowWrap?"break-word":S.wordBreak}),L=[],G=function(){if(O.value){var re=O.value.slice(),ye=ct(re),Me="";ye.forEach(function(Ze){-1===sL.indexOf(Ze)?Me+=ft(Ze):(Me.length&&L.push(Me),L.push(ft(Ze)),Me="")}),Me.length&&L.push(Me)}};!(O=D.next()).done;)G();return L},mu=function E(S,D,L){this.text=Wy(D.data,L.textTransform),this.textBounds=function(E,S,D,L){var O=tU(S,D),G=[],re=0;return O.forEach(function(ye){if(D.textDecorationLine.length||ye.trim().length>0)if(l2.SUPPORT_RANGE_BOUNDS){var Me=L1(L,re,ye.length).getClientRects();if(Me.length>1){var Ze=J6(ye),lt=0;Ze.forEach(function(kt){G.push(new gu(kt,Re.fromDOMRectList(E,L1(L,lt+re,kt.length).getClientRects()))),lt+=kt.length})}else G.push(new gu(ye,Re.fromDOMRectList(E,Me)))}else{var dt=L.splitText(ye.length);G.push(new gu(ye,eU(E,L))),L=dt}else l2.SUPPORT_RANGE_BOUNDS||(L=L.splitText(ye.length));re+=ye.length}),G}(S,this.text,L,D)},Wy=function(E,S){switch(S){case 1:return E.toLowerCase();case 3:return E.replace(zp,t8);case 2:return E.toUpperCase();default:return E}},zp=/(^|\s|:|-|\(|\))([a-z])/g,t8=function(E,S,D){return E.length>0?S+D.toUpperCase():E},rA=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.src=L.currentSrc||L.src,O.intrinsicWidth=L.naturalWidth,O.intrinsicHeight=L.naturalHeight,O.context.cache.addImage(O.src),O}return Se(S,E),S}(M4),jy=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.canvas=L,O.intrinsicWidth=L.width,O.intrinsicHeight=L.height,O}return Se(S,E),S}(M4),$y=function(E){function S(D,L){var O=E.call(this,D,L)||this,G=new XMLSerializer,re=Ie(D,L);return L.setAttribute("width",re.width+"px"),L.setAttribute("height",re.height+"px"),O.svg="data:image/svg+xml,"+encodeURIComponent(G.serializeToString(L)),O.intrinsicWidth=L.width.baseVal.value,O.intrinsicHeight=L.height.baseVal.value,O.context.cache.addImage(O.svg),O}return Se(S,E),S}(M4),oL=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.value=L.value,O}return Se(S,E),S}(M4),qy=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.start=L.start,O.reversed="boolean"==typeof L.reversed&&!0===L.reversed,O}return Se(S,E),S}(M4),Ky=[{type:15,flags:0,unit:"px",number:3}],El=[{type:16,flags:0,number:50}],oA="checkbox",n8="radio",aL="password",Xy=707406591,aA=function(E){function S(D,L){var O=E.call(this,D,L)||this;switch(O.type=L.type.toLowerCase(),O.checked=L.checked,O.value=function(E){var S=E.type===aL?new Array(E.value.length+1).join("\u2022"):E.value;return 0===S.length?E.placeholder||"":S}(L),(O.type===oA||O.type===n8)&&(O.styles.backgroundColor=3739148031,O.styles.borderTopColor=O.styles.borderRightColor=O.styles.borderBottomColor=O.styles.borderLeftColor=2779096575,O.styles.borderTopWidth=O.styles.borderRightWidth=O.styles.borderBottomWidth=O.styles.borderLeftWidth=1,O.styles.borderTopStyle=O.styles.borderRightStyle=O.styles.borderBottomStyle=O.styles.borderLeftStyle=1,O.styles.backgroundClip=[0],O.styles.backgroundOrigin=[0],O.bounds=function(E){return E.width>E.height?new Re(E.left+(E.width-E.height)/2,E.top,E.height,E.height):E.width<E.height?new Re(E.left,E.top+(E.height-E.width)/2,E.width,E.width):E}(O.bounds)),O.type){case oA:O.styles.borderTopRightRadius=O.styles.borderTopLeftRadius=O.styles.borderBottomRightRadius=O.styles.borderBottomLeftRadius=Ky;break;case n8:O.styles.borderTopRightRadius=O.styles.borderTopLeftRadius=O.styles.borderBottomRightRadius=O.styles.borderBottomLeftRadius=El}return O}return Se(S,E),S}(M4),Yy=function(E){function S(D,L){var O=E.call(this,D,L)||this,G=L.options[L.selectedIndex||0];return O.value=G&&G.text||"",O}return Se(S,E),S}(M4),Zy=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.value=L.value,O}return Se(S,E),S}(M4),Jy=function(E){function S(D,L){var O=E.call(this,D,L)||this;O.src=L.src,O.width=parseInt(L.width,10)||0,O.height=parseInt(L.height,10)||0,O.backgroundColor=O.styles.backgroundColor;try{if(L.contentWindow&&L.contentWindow.document&&L.contentWindow.document.documentElement){O.tree=ld(D,L.contentWindow.document.documentElement);var G=L.contentWindow.document.documentElement?Bo(D,getComputedStyle(L.contentWindow.document.documentElement).backgroundColor):S1.TRANSPARENT,re=L.contentWindow.document.body?Bo(D,getComputedStyle(L.contentWindow.document.body).backgroundColor):S1.TRANSPARENT;O.backgroundColor=Ac(G)?Ac(re)?O.styles.backgroundColor:re:G}}catch{}return O}return Se(S,E),S}(M4),cA=["OL","UL","MENU"],wh=function(E,S,D,L){for(var O=S.firstChild,G=void 0;O;O=G)if(G=O.nextSibling,ew(O)&&O.data.trim().length>0)D.textNodes.push(new mu(E,O,D.styles));else if(ud(O))if(b0(O)&&O.assignedNodes)O.assignedNodes().forEach(function(ye){return wh(E,ye,D,L)});else{var re=cL(E,O);re.styles.isVisible()&&(lA(O,re,L)?re.flags|=4:Op(re.styles)&&(re.flags|=2),-1!==cA.indexOf(O.tagName)&&(re.flags|=8),D.elements.push(re),O.shadowRoot?wh(E,O.shadowRoot,re,L):!o3(O)&&!hA(O)&&!o8(O)&&wh(E,O,re,L))}},cL=function(E,S){return fA(S)?new rA(E,S):Np(S)?new jy(E,S):hA(S)?new $y(E,S):s8(S)?new oL(E,S):hd(S)?new qy(E,S):lL(S)?new aA(E,S):o8(S)?new Yy(E,S):o3(S)?new Zy(E,S):tw(S)?new Jy(E,S):new M4(E,S)},ld=function(E,S){var D=cL(E,S);return D.flags|=4,wh(E,S,D,D),D},lA=function(E,S,D){return S.styles.isPositionedWithZIndex()||S.styles.opacity<1||S.styles.isTransformed()||xs(E)&&D.styles.isTransparent()},Op=function(E){return E.isPositioned()||E.isFloating()},ew=function(E){return E.nodeType===Node.TEXT_NODE},ud=function(E){return E.nodeType===Node.ELEMENT_NODE},uA=function(E){return ud(E)&&typeof E.style<"u"&&!r8(E)},r8=function(E){return"object"==typeof E.className},s8=function(E){return"LI"===E.tagName},hd=function(E){return"OL"===E.tagName},lL=function(E){return"INPUT"===E.tagName},hA=function(E){return"svg"===E.tagName},xs=function(E){return"BODY"===E.tagName},Np=function(E){return"CANVAS"===E.tagName},fd=function(E){return"VIDEO"===E.tagName},fA=function(E){return"IMG"===E.tagName},tw=function(E){return"IFRAME"===E.tagName},nw=function(E){return"STYLE"===E.tagName},o3=function(E){return"TEXTAREA"===E.tagName},o8=function(E){return"SELECT"===E.tagName},b0=function(E){return"SLOT"===E.tagName},iw=function(E){return E.tagName.indexOf("-")>0},rw=function(){function E(){this.counters={}}return E.prototype.getCounterValue=function(S){var D=this.counters[S];return D&&D.length?D[D.length-1]:1},E.prototype.getCounterValues=function(S){return this.counters[S]||[]},E.prototype.pop=function(S){var D=this;S.forEach(function(L){return D.counters[L].pop()})},E.prototype.parse=function(S){var D=this,L=S.counterIncrement,O=S.counterReset,G=!0;null!==L&&L.forEach(function(ye){var Me=D.counters[ye.counter];Me&&0!==ye.increment&&(G=!1,Me.length||Me.push(1),Me[Math.max(0,Me.length-1)]+=ye.increment)});var re=[];return G&&O.forEach(function(ye){var Me=D.counters[ye.counter];re.push(ye.counter),Me||(Me=D.counters[ye.counter]=[]),Me.push(ye.reset)}),re},E}(),dd={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},a8={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},sw={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},uL={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},pd=function(E,S,D,L,O,G){return E<S||E>D?u8(E,O,G.length>0):L.integers.reduce(function(re,ye,Me){for(;E>=ye;)E-=ye,re+=L.values[Me];return re},"")+G},Ch=function(E,S,D,L){var O="";do{D||E--,O=L(E)+O,E/=S}while(E*S>=S);return O},ca=function(E,S,D,L,O){var G=D-S+1;return(E<0?"-":"")+(Ch(Math.abs(E),G,L,function(re){return ft(Math.floor(re%G)+S)})+O)},bh=function(E,S,D){void 0===D&&(D=". ");var L=S.length;return Ch(Math.abs(E),L,!1,function(O){return S[Math.floor(O%L)]})+D},vu=function(E,S,D,L,O,G){if(E<-9999||E>9999)return u8(E,4,O.length>0);var re=Math.abs(E),ye=O;if(0===re)return S[0]+ye;for(var Me=0;re>0&&Me<=4;Me++){var Ze=re%10;0===Ze&&Os(G,1)&&""!==ye?ye=S[Ze]+ye:Ze>1||1===Ze&&0===Me||1===Ze&&1===Me&&Os(G,2)||1===Ze&&1===Me&&Os(G,4)&&E>100||1===Ze&&Me>1&&Os(G,8)?ye=S[Ze]+(Me>0?D[Me-1]:"")+ye:1===Ze&&Me>0&&(ye=D[Me-1]+ye),re=Math.floor(re/10)}return(E<0?L:"")+ye},Up="\ub9c8\uc774\ub108\uc2a4",u8=function(E,S,D){var L=D?". ":"",O=D?"\u3001":"",G=D?", ":"",re=D?" ":"";switch(S){case 0:return"\u2022"+re;case 1:return"\u25e6"+re;case 2:return"\u25fe"+re;case 5:var ye=ca(E,48,57,!0,L);return ye.length<4?"0"+ye:ye;case 4:return bh(E,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",O);case 6:return pd(E,1,3999,dd,3,L).toLowerCase();case 7:return pd(E,1,3999,dd,3,L);case 8:return ca(E,945,969,!1,L);case 9:return ca(E,97,122,!1,L);case 10:return ca(E,65,90,!1,L);case 11:return ca(E,1632,1641,!0,L);case 12:case 49:return pd(E,1,9999,a8,3,L);case 35:return pd(E,1,9999,a8,3,L).toLowerCase();case 13:return ca(E,2534,2543,!0,L);case 14:case 30:return ca(E,6112,6121,!0,L);case 15:return bh(E,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",O);case 16:return bh(E,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",O);case 17:case 48:return vu(E,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8ca0",O,14);case 47:return vu(E,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8ca0",O,15);case 42:return vu(E,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8d1f",O,14);case 41:return vu(E,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8d1f",O,15);case 26:return vu(E,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",O,0);case 25:return vu(E,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",O,7);case 31:return vu(E,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Up,G,7);case 33:return vu(E,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Up,G,0);case 32:return vu(E,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Up,G,7);case 18:return ca(E,2406,2415,!0,L);case 20:return pd(E,1,19999,uL,3,L);case 21:return ca(E,2790,2799,!0,L);case 22:return ca(E,2662,2671,!0,L);case 22:return pd(E,1,10999,sw,3,L);case 23:return bh(E,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return bh(E,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return ca(E,3302,3311,!0,L);case 28:return bh(E,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",O);case 29:return bh(E,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",O);case 34:return ca(E,3792,3801,!0,L);case 37:return ca(E,6160,6169,!0,L);case 38:return ca(E,4160,4169,!0,L);case 39:return ca(E,2918,2927,!0,L);case 40:return ca(E,1776,1785,!0,L);case 43:return ca(E,3046,3055,!0,L);case 44:return ca(E,3174,3183,!0,L);case 45:return ca(E,3664,3673,!0,L);case 46:return ca(E,3872,3881,!0,L);default:return ca(E,48,57,!0,L)}},pA="data-html2canvas-ignore",hL=function(){function E(S,D,L){if(this.context=S,this.options=L,this.scrolledElements=[],this.referenceElement=D,this.counters=new rw,this.quoteDepth=0,!D.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(D.ownerDocument.documentElement,!1)}return E.prototype.toIFrame=function(S,D){var L=this,O=nU(S,D);if(!O.contentWindow)return Promise.reject("Unable to find iframe window");var G=S.defaultView.pageXOffset,re=S.defaultView.pageYOffset,ye=O.contentWindow,Me=ye.document,Ze=cw(O).then(function(){return Ee(L,void 0,void 0,function(){var lt,dt;return Ne(this,function(kt){switch(kt.label){case 0:return this.scrolledElements.forEach(pL),ye&&(ye.scrollTo(D.left,D.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(ye.scrollY!==D.top||ye.scrollX!==D.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(ye.scrollX-D.left,ye.scrollY-D.top,0,0))),lt=this.options.onclone,typeof(dt=this.clonedReferenceElement)>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Me.fonts&&Me.fonts.ready?[4,Me.fonts.ready]:[3,2];case 1:kt.sent(),kt.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,fL(Me)]:[3,4];case 3:kt.sent(),kt.label=4;case 4:return"function"==typeof lt?[2,Promise.resolve().then(function(){return lt(Me,dt)}).then(function(){return O})]:[2,O]}})})});return Me.open(),Me.write(gd(document.doctype)+"<html></html>"),dL(this.referenceElement.ownerDocument,G,re),Me.replaceChild(Me.adoptNode(this.documentElement),Me.documentElement),Me.close(),Ze},E.prototype.createElementClone=function(S){if(qm(S,2),Np(S))return this.createCanvasClone(S);if(fd(S))return this.createVideoClone(S);if(nw(S))return this.createStyleClone(S);var D=S.cloneNode(!1);return fA(D)&&(fA(S)&&S.currentSrc&&S.currentSrc!==S.src&&(D.src=S.currentSrc,D.srcset=""),"lazy"===D.loading&&(D.loading="eager")),iw(D)?this.createCustomElementClone(D):D},E.prototype.createCustomElementClone=function(S){var D=document.createElement("html2canvascustomelement");return h8(S.style,D),D},E.prototype.createStyleClone=function(S){try{var D=S.sheet;if(D&&D.cssRules){var L=[].slice.call(D.cssRules,0).reduce(function(G,re){return re&&"string"==typeof re.cssText?G+re.cssText:G},""),O=S.cloneNode(!1);return O.textContent=L,O}}catch(G){if(this.context.logger.error("Unable to access cssRules property",G),"SecurityError"!==G.name)throw G}return S.cloneNode(!1)},E.prototype.createCanvasClone=function(S){var D;if(this.options.inlineImages&&S.ownerDocument){var L=S.ownerDocument.createElement("img");try{return L.src=S.toDataURL(),L}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",S)}}var O=S.cloneNode(!1);try{O.width=S.width,O.height=S.height;var G=S.getContext("2d"),re=O.getContext("2d");if(re)if(!this.options.allowTaint&&G)re.putImageData(G.getImageData(0,0,S.width,S.height),0,0);else{var ye=null!==(D=S.getContext("webgl2"))&&void 0!==D?D:S.getContext("webgl");ye&&!1===ye.getContextAttributes()?.preserveDrawingBuffer&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",S),re.drawImage(S,0,0)}return O}catch{this.context.logger.info("Unable to clone canvas as it is tainted",S)}return O},E.prototype.createVideoClone=function(S){var D=S.ownerDocument.createElement("canvas");D.width=S.offsetWidth,D.height=S.offsetHeight;var L=D.getContext("2d");try{return L&&(L.drawImage(S,0,0,D.width,D.height),this.options.allowTaint||L.getImageData(0,0,D.width,D.height)),D}catch{this.context.logger.info("Unable to clone video as it is tainted",S)}var O=S.ownerDocument.createElement("canvas");return O.width=S.offsetWidth,O.height=S.offsetHeight,O},E.prototype.appendChildNode=function(S,D,L){(!ud(D)||!function(E){return"SCRIPT"===E.tagName}(D)&&!D.hasAttribute(pA)&&("function"!=typeof this.options.ignoreElements||!this.options.ignoreElements(D)))&&(!this.options.copyStyles||!ud(D)||!nw(D))&&S.appendChild(this.cloneNode(D,L))},E.prototype.cloneChildNodes=function(S,D,L){for(var O=this,G=S.shadowRoot?S.shadowRoot.firstChild:S.firstChild;G;G=G.nextSibling)if(ud(G)&&b0(G)&&"function"==typeof G.assignedNodes){var re=G.assignedNodes();re.length&&re.forEach(function(ye){return O.appendChildNode(D,ye,L)})}else this.appendChildNode(D,G,L)},E.prototype.cloneNode=function(S,D){if(ew(S))return document.createTextNode(S.data);if(!S.ownerDocument)return S.cloneNode(!1);var L=S.ownerDocument.defaultView;if(L&&ud(S)&&(uA(S)||r8(S))){var O=this.createElementClone(S);O.style.transitionProperty="none";var G=L.getComputedStyle(S),re=L.getComputedStyle(S,":before"),ye=L.getComputedStyle(S,":after");this.referenceElement===S&&uA(O)&&(this.clonedReferenceElement=O),xs(O)&&lw(O);var Me=this.counters.parse(new $m(this.context,G)),Ze=this.resolvePseudoContent(S,O,re,xh.BEFORE);iw(S)&&(D=!0),fd(S)||this.cloneChildNodes(S,O,D),Ze&&O.insertBefore(Ze,O.firstChild);var lt=this.resolvePseudoContent(S,O,ye,xh.AFTER);return lt&&O.appendChild(lt),this.counters.pop(Me),(G&&(this.options.copyStyles||r8(S))&&!tw(S)||D)&&h8(G,O),(0!==S.scrollTop||0!==S.scrollLeft)&&this.scrolledElements.push([O,S.scrollLeft,S.scrollTop]),(o3(S)||o8(S))&&(o3(O)||o8(O))&&(O.value=S.value),O}return S.cloneNode(!1)},E.prototype.resolvePseudoContent=function(S,D,L,O){var G=this;if(L){var re=L.content,ye=D.ownerDocument;if(ye&&re&&"none"!==re&&"-moz-alt-content"!==re&&"none"!==L.display){this.counters.parse(new $m(this.context,L));var Me=new jm(this.context,L),Ze=ye.createElement("html2canvaspseudoelement");h8(L,Ze),Me.content.forEach(function(dt){if(0===dt.type)Ze.appendChild(ye.createTextNode(dt.value));else if(22===dt.type){var kt=ye.createElement("img");kt.src=dt.value,kt.style.opacity="1",Ze.appendChild(kt)}else if(18===dt.type){if("attr"===dt.name){var Gn=dt.values.filter(sn);Gn.length&&Ze.appendChild(ye.createTextNode(S.getAttribute(Gn[0].value)||""))}else if("counter"===dt.name){var Tn=dt.values.filter(V2),Cr=Tn[1];if((Qn=Tn[0])&&sn(Qn)){var _i=G.counters.getCounterValue(Qn.value),hi=Cr&&sn(Cr)?It.parse(G.context,Cr.value):3;Ze.appendChild(ye.createTextNode(u8(_i,hi,!1)))}}else if("counters"===dt.name){var Qn,Ks=dt.values.filter(V2),br=Ks[1];if(Cr=Ks[2],(Qn=Ks[0])&&sn(Qn)){var rr=G.counters.getCounterValues(Qn.value),Xn=Cr&&sn(Cr)?It.parse(G.context,Cr.value):3,Ns=br&&0===br.type?br.value:"",Bs=rr.map(function(J1){return u8(J1,Xn,!1)}).join(Ns);Ze.appendChild(ye.createTextNode(Bs))}}}else if(20===dt.type)switch(dt.value){case"open-quote":Ze.appendChild(ye.createTextNode(Fy(Me.quotes,G.quoteDepth++,!0)));break;case"close-quote":Ze.appendChild(ye.createTextNode(Fy(Me.quotes,--G.quoteDepth,!1)));break;default:Ze.appendChild(ye.createTextNode(dt.value))}}),Ze.className=f8+" "+Wp;var lt=O===xh.BEFORE?" "+f8:" "+Wp;return r8(D)?D.className.baseValue+=lt:D.className+=lt,Ze}}},E.destroy=function(S){return!!S.parentNode&&(S.parentNode.removeChild(S),!0)},E}(),xh=(()=>{return(E=xh||(xh={}))[E.BEFORE=0]="BEFORE",E[E.AFTER=1]="AFTER",xh;var E})(),nU=function(E,S){var D=E.createElement("iframe");return D.className="html2canvas-container",D.style.visibility="hidden",D.style.position="fixed",D.style.left="-10000px",D.style.top="0px",D.style.border="0",D.width=S.width.toString(),D.height=S.height.toString(),D.scrolling="no",D.setAttribute(pA,"true"),E.body.appendChild(D),D},gA=function(E){return new Promise(function(S){E.complete?S():E.src?(E.onload=S,E.onerror=S):S()})},fL=function(E){return Promise.all([].slice.call(E.images,0).map(gA))},cw=function(E){return new Promise(function(S,D){var L=E.contentWindow;if(!L)return D("No window assigned for iframe");var O=L.document;L.onload=E.onload=function(){L.onload=E.onload=null;var G=setInterval(function(){O.body.childNodes.length>0&&"complete"===O.readyState&&(clearInterval(G),S(E))},50)}})},Gp=["all","d","content"],h8=function(E,S){for(var D=E.length-1;D>=0;D--){var L=E.item(D);-1===Gp.indexOf(L)&&S.style.setProperty(L,E.getPropertyValue(L))}return S},gd=function(E){var S="";return E&&(S+="<!DOCTYPE ",E.name&&(S+=E.name),E.internalSubset&&(S+=E.internalSubset),E.publicId&&(S+='"'+E.publicId+'"'),E.systemId&&(S+='"'+E.systemId+'"'),S+=">"),S},dL=function(E,S,D){E&&E.defaultView&&(S!==E.defaultView.pageXOffset||D!==E.defaultView.pageYOffset)&&E.defaultView.scrollTo(S,D)},pL=function(E){var S=E[0],L=E[2];S.scrollLeft=E[1],S.scrollTop=L},f8="___html2canvas___pseudoelement_before",Wp="___html2canvas___pseudoelement_after",mA='{\n    content: "" !important;\n    display: none !important;\n}',lw=function(E){Mh(E,"."+f8+":before"+mA+"\n         ."+Wp+":after"+mA)},Mh=function(E,S){var D=E.ownerDocument;if(D){var L=D.createElement("style");L.textContent=S,E.appendChild(L)}},uw=function(){function E(){}return E.getOrigin=function(S){var D=E._link;return D?(D.href=S,D.href=D.href,D.protocol+D.hostname+D.port):"about:blank"},E.isSameOrigin=function(S){return E.getOrigin(S)===E._origin},E.setContext=function(S){E._link=S.document.createElement("a"),E._origin=E.getOrigin(S.location.href)},E._origin="about:blank",E}(),gL=function(){function E(S,D){this.context=S,this._options=D,this._cache={}}return E.prototype.addImage=function(S){var D=Promise.resolve();return this.has(S)||(AA(S)||Tl(S))&&(this._cache[S]=this.loadImage(S)).catch(function(){}),D},E.prototype.match=function(S){return this._cache[S]},E.prototype.loadImage=function(S){return Ee(this,void 0,void 0,function(){var D,L,O,G,re=this;return Ne(this,function(ye){switch(ye.label){case 0:return D=uw.isSameOrigin(S),L=!a3(S)&&!0===this._options.useCORS&&l2.SUPPORT_CORS_IMAGES&&!D,O=!a3(S)&&!D&&!AA(S)&&"string"==typeof this._options.proxy&&l2.SUPPORT_CORS_XHR&&!L,D||!1!==this._options.allowTaint||a3(S)||AA(S)||O||L?(G=S,O?[4,this.proxy(G)]:[3,2]):[2];case 1:G=ye.sent(),ye.label=2;case 2:return this.context.logger.debug("Added image "+S.substring(0,256)),[4,new Promise(function(Me,Ze){var lt=new Image;lt.onload=function(){return Me(lt)},lt.onerror=Ze,(_L(G)||L)&&(lt.crossOrigin="anonymous"),lt.src=G,!0===lt.complete&&setTimeout(function(){return Me(lt)},500),re._options.imageTimeout>0&&setTimeout(function(){return Ze("Timed out ("+re._options.imageTimeout+"ms) loading image")},re._options.imageTimeout)})];case 3:return[2,ye.sent()]}})})},E.prototype.has=function(S){return typeof this._cache[S]<"u"},E.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},E.prototype.proxy=function(S){var D=this,L=this._options.proxy;if(!L)throw new Error("No proxy defined");var O=S.substring(0,256);return new Promise(function(G,re){var ye=l2.SUPPORT_RESPONSE_TYPE?"blob":"text",Me=new XMLHttpRequest;Me.onload=function(){if(200===Me.status)if("text"===ye)G(Me.response);else{var dt=new FileReader;dt.addEventListener("load",function(){return G(dt.result)},!1),dt.addEventListener("error",function(kt){return re(kt)},!1),dt.readAsDataURL(Me.response)}else re("Failed to proxy resource "+O+" with status code "+Me.status)},Me.onerror=re;var Ze=L.indexOf("?")>-1?"&":"?";if(Me.open("GET",""+L+Ze+"url="+encodeURIComponent(S)+"&responseType="+ye),"text"!==ye&&Me instanceof XMLHttpRequest&&(Me.responseType=ye),D._options.imageTimeout){var lt=D._options.imageTimeout;Me.timeout=lt,Me.ontimeout=function(){return re("Timed out ("+lt+"ms) proxying "+O)}}Me.send()})},E}(),mL=/^data:image\/svg\+xml/i,AL=/^data:image\/.*;base64,/i,vL=/^data:image\/.*/i,Tl=function(E){return l2.SUPPORT_SVG_DRAWING||!yL(E)},a3=function(E){return vL.test(E)},_L=function(E){return AL.test(E)},AA=function(E){return"blob"===E.substr(0,4)},yL=function(E){return"svg"===E.substr(-3).toLowerCase()||mL.test(E)},Kn=function(){function E(S,D){this.type=0,this.x=S,this.y=D}return E.prototype.add=function(S,D){return new E(this.x+S,this.y+D)},E}(),md=function(E,S,D){return new Kn(E.x+(S.x-E.x)*D,E.y+(S.y-E.y)*D)},jp=function(){function E(S,D,L,O){this.type=1,this.start=S,this.startControl=D,this.endControl=L,this.end=O}return E.prototype.subdivide=function(S,D){var L=md(this.start,this.startControl,S),O=md(this.startControl,this.endControl,S),G=md(this.endControl,this.end,S),re=md(L,O,S),ye=md(O,G,S),Me=md(re,ye,S);return D?new E(this.start,L,re,Me):new E(Me,ye,G,this.end)},E.prototype.add=function(S,D){return new E(this.start.add(S,D),this.startControl.add(S,D),this.endControl.add(S,D),this.end.add(S,D))},E.prototype.reverse=function(){return new E(this.end,this.endControl,this.startControl,this.start)},E}(),Ll=function(E){return 1===E.type},wL=function E(S){var D=S.styles,L=S.bounds,O=mc(D.borderTopLeftRadius,L.width,L.height),G=O[0],re=O[1],ye=mc(D.borderTopRightRadius,L.width,L.height),Me=ye[0],Ze=ye[1],lt=mc(D.borderBottomRightRadius,L.width,L.height),dt=lt[0],kt=lt[1],Gn=mc(D.borderBottomLeftRadius,L.width,L.height),Tn=Gn[0],Qn=Gn[1],Cr=[];Cr.push((G+Me)/L.width),Cr.push((Tn+dt)/L.width),Cr.push((re+Qn)/L.height),Cr.push((Ze+kt)/L.height);var _i=Math.max.apply(Math,Cr);_i>1&&(G/=_i,re/=_i,Me/=_i,Ze/=_i,dt/=_i,kt/=_i,Tn/=_i,Qn/=_i);var hi=L.width-Me,Ks=L.height-kt,br=L.width-dt,rr=L.height-Qn,Xn=D.borderTopWidth,Ns=D.borderRightWidth,Bs=D.borderBottomWidth,Ui=D.borderLeftWidth,D1=zi(D.paddingTop,S.bounds.width),J1=zi(D.paddingRight,S.bounds.width),dn=zi(D.paddingBottom,S.bounds.width),xo=zi(D.paddingLeft,S.bounds.width);this.topLeftBorderDoubleOuterBox=G>0||re>0?Aa(L.left+Ui/3,L.top+Xn/3,G-Ui/3,re-Xn/3,to.TOP_LEFT):new Kn(L.left+Ui/3,L.top+Xn/3),this.topRightBorderDoubleOuterBox=G>0||re>0?Aa(L.left+hi,L.top+Xn/3,Me-Ns/3,Ze-Xn/3,to.TOP_RIGHT):new Kn(L.left+L.width-Ns/3,L.top+Xn/3),this.bottomRightBorderDoubleOuterBox=dt>0||kt>0?Aa(L.left+br,L.top+Ks,dt-Ns/3,kt-Bs/3,to.BOTTOM_RIGHT):new Kn(L.left+L.width-Ns/3,L.top+L.height-Bs/3),this.bottomLeftBorderDoubleOuterBox=Tn>0||Qn>0?Aa(L.left+Ui/3,L.top+rr,Tn-Ui/3,Qn-Bs/3,to.BOTTOM_LEFT):new Kn(L.left+Ui/3,L.top+L.height-Bs/3),this.topLeftBorderDoubleInnerBox=G>0||re>0?Aa(L.left+2*Ui/3,L.top+2*Xn/3,G-2*Ui/3,re-2*Xn/3,to.TOP_LEFT):new Kn(L.left+2*Ui/3,L.top+2*Xn/3),this.topRightBorderDoubleInnerBox=G>0||re>0?Aa(L.left+hi,L.top+2*Xn/3,Me-2*Ns/3,Ze-2*Xn/3,to.TOP_RIGHT):new Kn(L.left+L.width-2*Ns/3,L.top+2*Xn/3),this.bottomRightBorderDoubleInnerBox=dt>0||kt>0?Aa(L.left+br,L.top+Ks,dt-2*Ns/3,kt-2*Bs/3,to.BOTTOM_RIGHT):new Kn(L.left+L.width-2*Ns/3,L.top+L.height-2*Bs/3),this.bottomLeftBorderDoubleInnerBox=Tn>0||Qn>0?Aa(L.left+2*Ui/3,L.top+rr,Tn-2*Ui/3,Qn-2*Bs/3,to.BOTTOM_LEFT):new Kn(L.left+2*Ui/3,L.top+L.height-2*Bs/3),this.topLeftBorderStroke=G>0||re>0?Aa(L.left+Ui/2,L.top+Xn/2,G-Ui/2,re-Xn/2,to.TOP_LEFT):new Kn(L.left+Ui/2,L.top+Xn/2),this.topRightBorderStroke=G>0||re>0?Aa(L.left+hi,L.top+Xn/2,Me-Ns/2,Ze-Xn/2,to.TOP_RIGHT):new Kn(L.left+L.width-Ns/2,L.top+Xn/2),this.bottomRightBorderStroke=dt>0||kt>0?Aa(L.left+br,L.top+Ks,dt-Ns/2,kt-Bs/2,to.BOTTOM_RIGHT):new Kn(L.left+L.width-Ns/2,L.top+L.height-Bs/2),this.bottomLeftBorderStroke=Tn>0||Qn>0?Aa(L.left+Ui/2,L.top+rr,Tn-Ui/2,Qn-Bs/2,to.BOTTOM_LEFT):new Kn(L.left+Ui/2,L.top+L.height-Bs/2),this.topLeftBorderBox=G>0||re>0?Aa(L.left,L.top,G,re,to.TOP_LEFT):new Kn(L.left,L.top),this.topRightBorderBox=Me>0||Ze>0?Aa(L.left+hi,L.top,Me,Ze,to.TOP_RIGHT):new Kn(L.left+L.width,L.top),this.bottomRightBorderBox=dt>0||kt>0?Aa(L.left+br,L.top+Ks,dt,kt,to.BOTTOM_RIGHT):new Kn(L.left+L.width,L.top+L.height),this.bottomLeftBorderBox=Tn>0||Qn>0?Aa(L.left,L.top+rr,Tn,Qn,to.BOTTOM_LEFT):new Kn(L.left,L.top+L.height),this.topLeftPaddingBox=G>0||re>0?Aa(L.left+Ui,L.top+Xn,Math.max(0,G-Ui),Math.max(0,re-Xn),to.TOP_LEFT):new Kn(L.left+Ui,L.top+Xn),this.topRightPaddingBox=Me>0||Ze>0?Aa(L.left+Math.min(hi,L.width-Ns),L.top+Xn,hi>L.width+Ns?0:Math.max(0,Me-Ns),Math.max(0,Ze-Xn),to.TOP_RIGHT):new Kn(L.left+L.width-Ns,L.top+Xn),this.bottomRightPaddingBox=dt>0||kt>0?Aa(L.left+Math.min(br,L.width-Ui),L.top+Math.min(Ks,L.height-Bs),Math.max(0,dt-Ns),Math.max(0,kt-Bs),to.BOTTOM_RIGHT):new Kn(L.left+L.width-Ns,L.top+L.height-Bs),this.bottomLeftPaddingBox=Tn>0||Qn>0?Aa(L.left+Ui,L.top+Math.min(rr,L.height-Bs),Math.max(0,Tn-Ui),Math.max(0,Qn-Bs),to.BOTTOM_LEFT):new Kn(L.left+Ui,L.top+L.height-Bs),this.topLeftContentBox=G>0||re>0?Aa(L.left+Ui+xo,L.top+Xn+D1,Math.max(0,G-(Ui+xo)),Math.max(0,re-(Xn+D1)),to.TOP_LEFT):new Kn(L.left+Ui+xo,L.top+Xn+D1),this.topRightContentBox=Me>0||Ze>0?Aa(L.left+Math.min(hi,L.width+Ui+xo),L.top+Xn+D1,hi>L.width+Ui+xo?0:Me-Ui+xo,Ze-(Xn+D1),to.TOP_RIGHT):new Kn(L.left+L.width-(Ns+J1),L.top+Xn+D1),this.bottomRightContentBox=dt>0||kt>0?Aa(L.left+Math.min(br,L.width-(Ui+xo)),L.top+Math.min(Ks,L.height+Xn+D1),Math.max(0,dt-(Ns+J1)),kt-(Bs+dn),to.BOTTOM_RIGHT):new Kn(L.left+L.width-(Ns+J1),L.top+L.height-(Bs+dn)),this.bottomLeftContentBox=Tn>0||Qn>0?Aa(L.left+Ui+xo,L.top+rr,Math.max(0,Tn-(Ui+xo)),Qn-(Bs+dn),to.BOTTOM_LEFT):new Kn(L.left+Ui+xo,L.top+L.height-(Bs+dn))},to=(()=>{return(E=to||(to={}))[E.TOP_LEFT=0]="TOP_LEFT",E[E.TOP_RIGHT=1]="TOP_RIGHT",E[E.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",E[E.BOTTOM_LEFT=3]="BOTTOM_LEFT",to;var E})(),Aa=function(E,S,D,L,O){var G=(Math.sqrt(2)-1)/3*4,re=D*G,ye=L*G,Me=E+D,Ze=S+L;switch(O){case to.TOP_LEFT:return new jp(new Kn(E,Ze),new Kn(E,Ze-ye),new Kn(Me-re,S),new Kn(Me,S));case to.TOP_RIGHT:return new jp(new Kn(E,S),new Kn(E+re,S),new Kn(Me,Ze-ye),new Kn(Me,Ze));case to.BOTTOM_RIGHT:return new jp(new Kn(Me,S),new Kn(Me,S+ye),new Kn(E+re,Ze),new Kn(E,Ze));default:return new jp(new Kn(Me,Ze),new Kn(Me-re,Ze),new Kn(E,S+ye),new Kn(E,S))}},$p=function(E){return[E.topLeftBorderBox,E.topRightBorderBox,E.bottomRightBorderBox,E.bottomLeftBorderBox]},c3=function(E){return[E.topLeftPaddingBox,E.topRightPaddingBox,E.bottomRightPaddingBox,E.bottomLeftPaddingBox]},d8=function E(S,D,L){this.offsetX=S,this.offsetY=D,this.matrix=L,this.type=0,this.target=6},p8=function E(S,D){this.path=S,this.target=D,this.type=1},hw=function E(S){this.opacity=S,this.type=2,this.target=6},CL=function(E){return 1===E.type},bL=function(E,S){return E.length===S.length&&E.some(function(D,L){return D===S[L]})},Kp=function E(S){this.element=S,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},xL=function(){function E(S,D){if(this.container=S,this.parent=D,this.effects=[],this.curves=new wL(this.container),this.container.styles.opacity<1&&this.effects.push(new hw(this.container.styles.opacity)),null!==this.container.styles.transform&&this.effects.push(new d8(this.container.bounds.left+this.container.styles.transformOrigin[0].number,this.container.bounds.top+this.container.styles.transformOrigin[1].number,this.container.styles.transform)),0!==this.container.styles.overflowX){var re=$p(this.curves),ye=c3(this.curves);bL(re,ye)?this.effects.push(new p8(re,6)):(this.effects.push(new p8(re,2)),this.effects.push(new p8(ye,4)))}}return E.prototype.getEffects=function(S){for(var D=-1===[2,3].indexOf(this.container.styles.position),L=this.parent,O=this.effects.slice(0);L;){var G=L.effects.filter(function(Me){return!CL(Me)});if(D||0!==L.container.styles.position||!L.parent){if(O.unshift.apply(O,G),D=-1===[2,3].indexOf(L.container.styles.position),0!==L.container.styles.overflowX){var re=$p(L.curves),ye=c3(L.curves);bL(re,ye)||O.unshift(new p8(ye,6))}}else O.unshift.apply(O,G);L=L.parent}return O.filter(function(Me){return Os(Me.target,S)})},E}(),dw=function(E,S,D,L){E.container.elements.forEach(function(O){var G=Os(O.flags,4),re=Os(O.flags,2),ye=new xL(O,E);Os(O.styles.display,2048)&&L.push(ye);var Me=Os(O.flags,8)?[]:L;if(G||re){var Ze=G||O.styles.isPositioned()?D:S,lt=new Kp(ye);if(O.styles.isPositioned()||O.styles.opacity<1||O.styles.isTransformed()){var dt=O.styles.zIndex.order;if(dt<0){var kt=0;Ze.negativeZIndex.some(function(Tn,Qn){return dt>Tn.element.container.styles.zIndex.order?(kt=Qn,!1):kt>0}),Ze.negativeZIndex.splice(kt,0,lt)}else if(dt>0){var Gn=0;Ze.positiveZIndex.some(function(Tn,Qn){return dt>=Tn.element.container.styles.zIndex.order?(Gn=Qn+1,!1):Gn>0}),Ze.positiveZIndex.splice(Gn,0,lt)}else Ze.zeroOrAutoZIndexOrTransformedOrOpacity.push(lt)}else O.styles.isFloating()?Ze.nonPositionedFloats.push(lt):Ze.nonPositionedInlineLevel.push(lt);dw(ye,lt,G?lt:D,Me)}else O.styles.isInlineLevel()?S.inlineLevel.push(ye):S.nonInlineLevel.push(ye),dw(ye,S,D,Me);Os(O.flags,8)&&_A(O,Me)})},_A=function(E,S){for(var D=E instanceof qy?E.start:1,L=E instanceof qy&&E.reversed,O=0;O<S.length;O++){var G=S[O];G.container instanceof oL&&"number"==typeof G.container.value&&0!==G.container.value&&(D=G.container.value),G.listValue=u8(D,G.container.styles.listStyleType,!0),D+=L?-1:1}},pw=function(E,S){switch(S){case 0:return Dl(E.topLeftBorderBox,E.topLeftPaddingBox,E.topRightBorderBox,E.topRightPaddingBox);case 1:return Dl(E.topRightBorderBox,E.topRightPaddingBox,E.bottomRightBorderBox,E.bottomRightPaddingBox);case 2:return Dl(E.bottomRightBorderBox,E.bottomRightPaddingBox,E.bottomLeftBorderBox,E.bottomLeftPaddingBox);default:return Dl(E.bottomLeftBorderBox,E.bottomLeftPaddingBox,E.topLeftBorderBox,E.topLeftPaddingBox)}},Sh=function(E,S){var D=[];return Ll(E)?D.push(E.subdivide(.5,!1)):D.push(E),Ll(S)?D.push(S.subdivide(.5,!0)):D.push(S),D},Dl=function(E,S,D,L){var O=[];return Ll(E)?O.push(E.subdivide(.5,!1)):O.push(E),Ll(D)?O.push(D.subdivide(.5,!0)):O.push(D),Ll(L)?O.push(L.subdivide(.5,!0).reverse()):O.push(L),Ll(S)?O.push(S.subdivide(.5,!1).reverse()):O.push(S),O},Xp=function(E){var D=E.styles;return E.bounds.add(D.borderLeftWidth,D.borderTopWidth,-(D.borderRightWidth+D.borderLeftWidth),-(D.borderTopWidth+D.borderBottomWidth))},Yp=function(E){var S=E.styles,D=E.bounds,L=zi(S.paddingLeft,D.width),O=zi(S.paddingRight,D.width),G=zi(S.paddingTop,D.width),re=zi(S.paddingBottom,D.width);return D.add(L+S.borderLeftWidth,G+S.borderTopWidth,-(S.borderRightWidth+S.borderLeftWidth+L+O),-(S.borderTopWidth+S.borderBottomWidth+G+re))},yA=function(E,S,D){var L=function(E,S){return 0===E?S.bounds:2===E?Yp(S):Xp(S)}(Ad(E.styles.backgroundOrigin,S),E),O=function(E,S){return 0===E?S.bounds:2===E?Yp(S):Xp(S)}(Ad(E.styles.backgroundClip,S),E),G=TL(Ad(E.styles.backgroundSize,S),D,L),re=G[0],ye=G[1],Me=mc(Ad(E.styles.backgroundPosition,S),L.width-re,L.height-ye);return[LL(Ad(E.styles.backgroundRepeat,S),Me,G,L,O),Math.round(L.left+Me[0]),Math.round(L.top+Me[1]),re,ye]},wc=function(E){return sn(E)&&E.value===N3.AUTO},g8=function(E){return"number"==typeof E},TL=function(E,S,D){var L=S[0],O=S[1],G=S[2],re=E[0],ye=E[1];if(!re)return[0,0];if(Hs(re)&&ye&&Hs(ye))return[zi(re,D.width),zi(ye,D.height)];var Me=g8(G);if(sn(re)&&(re.value===N3.CONTAIN||re.value===N3.COVER))return g8(G)?D.width/D.height<G!=(re.value===N3.COVER)?[D.width,D.width/G]:[D.height*G,D.height]:[D.width,D.height];var lt=g8(L),dt=g8(O),kt=lt||dt;if(wc(re)&&(!ye||wc(ye)))return lt&&dt?[L,O]:Me||kt?kt&&Me?[lt?L:O*G,dt?O:L/G]:[lt?L:D.width,dt?O:D.height]:[D.width,D.height];if(Me){var _i=0,hi=0;return Hs(re)?_i=zi(re,D.width):Hs(ye)&&(hi=zi(ye,D.height)),wc(re)?_i=hi*G:(!ye||wc(ye))&&(hi=_i/G),[_i,hi]}var Ks=null,br=null;if(Hs(re)?Ks=zi(re,D.width):ye&&Hs(ye)&&(br=zi(ye,D.height)),null!==Ks&&(!ye||wc(ye))&&(br=lt&&dt?Ks/L*O:D.height),null!==br&&wc(re)&&(Ks=lt&&dt?br/O*L:D.width),null!==Ks&&null!==br)return[Ks,br];throw new Error("Unable to calculate background-size for element")},Ad=function(E,S){var D=E[S];return typeof D>"u"?E[0]:D},LL=function(E,S,D,L,O){var G=S[0],re=S[1],ye=D[0],Me=D[1];switch(E){case 2:return[new Kn(Math.round(L.left),Math.round(L.top+re)),new Kn(Math.round(L.left+L.width),Math.round(L.top+re)),new Kn(Math.round(L.left+L.width),Math.round(Me+L.top+re)),new Kn(Math.round(L.left),Math.round(Me+L.top+re))];case 3:return[new Kn(Math.round(L.left+G),Math.round(L.top)),new Kn(Math.round(L.left+G+ye),Math.round(L.top)),new Kn(Math.round(L.left+G+ye),Math.round(L.height+L.top)),new Kn(Math.round(L.left+G),Math.round(L.height+L.top))];case 1:return[new Kn(Math.round(L.left+G),Math.round(L.top+re)),new Kn(Math.round(L.left+G+ye),Math.round(L.top+re)),new Kn(Math.round(L.left+G+ye),Math.round(L.top+re+Me)),new Kn(Math.round(L.left+G),Math.round(L.top+re+Me))];default:return[new Kn(Math.round(O.left),Math.round(O.top)),new Kn(Math.round(O.left+O.width),Math.round(O.top)),new Kn(Math.round(O.left+O.width),Math.round(O.height+O.top)),new Kn(Math.round(O.left),Math.round(O.height+O.top))]}},mw="Hidden Text",sU=function(){function E(S){this._data={},this._document=S}return E.prototype.parseMetrics=function(S,D){var L=this._document.createElement("div"),O=this._document.createElement("img"),G=this._document.createElement("span"),re=this._document.body;L.style.visibility="hidden",L.style.fontFamily=S,L.style.fontSize=D,L.style.margin="0",L.style.padding="0",L.style.whiteSpace="nowrap",re.appendChild(L),O.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",O.width=1,O.height=1,O.style.margin="0",O.style.padding="0",O.style.verticalAlign="baseline",G.style.fontFamily=S,G.style.fontSize=D,G.style.margin="0",G.style.padding="0",G.appendChild(this._document.createTextNode(mw)),L.appendChild(G),L.appendChild(O);var ye=O.offsetTop-G.offsetTop+2;L.removeChild(G),L.appendChild(this._document.createTextNode(mw)),L.style.lineHeight="normal",O.style.verticalAlign="super";var Me=O.offsetTop-L.offsetTop+2;return re.removeChild(L),{baseline:ye,middle:Me}},E.prototype.getMetrics=function(S,D){var L=S+" "+D;return typeof this._data[L]>"u"&&(this._data[L]=this.parseMetrics(S,D)),this._data[L]},E}(),IL=function E(S,D){this.context=S,this.options=D},wA=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O._activeEffects=[],O.canvas=L.canvas?L.canvas:document.createElement("canvas"),O.ctx=O.canvas.getContext("2d"),L.canvas||(O.canvas.width=Math.floor(L.width*L.scale),O.canvas.height=Math.floor(L.height*L.scale),O.canvas.style.width=L.width+"px",O.canvas.style.height=L.height+"px"),O.fontMetrics=new sU(document),O.ctx.scale(O.options.scale,O.options.scale),O.ctx.translate(-L.x,-L.y),O.ctx.textBaseline="bottom",O._activeEffects=[],O.context.logger.debug("Canvas renderer initialized ("+L.width+"x"+L.height+") with scale "+L.scale),O}return Se(S,E),S.prototype.applyEffects=function(D){for(var L=this;this._activeEffects.length;)this.popEffect();D.forEach(function(O){return L.applyEffect(O)})},S.prototype.applyEffect=function(D){this.ctx.save(),function(E){return 2===E.type}(D)&&(this.ctx.globalAlpha=D.opacity),function(E){return 0===E.type}(D)&&(this.ctx.translate(D.offsetX,D.offsetY),this.ctx.transform(D.matrix[0],D.matrix[1],D.matrix[2],D.matrix[3],D.matrix[4],D.matrix[5]),this.ctx.translate(-D.offsetX,-D.offsetY)),CL(D)&&(this.path(D.path),this.ctx.clip()),this._activeEffects.push(D)},S.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},S.prototype.renderStack=function(D){return Ee(this,void 0,void 0,function(){return Ne(this,function(O){switch(O.label){case 0:return D.element.container.styles.isVisible()?[4,this.renderStackContent(D)]:[3,2];case 1:O.sent(),O.label=2;case 2:return[2]}})})},S.prototype.renderNode=function(D){return Ee(this,void 0,void 0,function(){return Ne(this,function(L){switch(L.label){case 0:return Os(D.container.flags,16),D.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(D)]:[3,3];case 1:return L.sent(),[4,this.renderNodeContent(D)];case 2:L.sent(),L.label=3;case 3:return[2]}})})},S.prototype.renderTextWithLetterSpacing=function(D,L,O){var G=this;0===L?this.ctx.fillText(D.text,D.bounds.left,D.bounds.top+O):J6(D.text).reduce(function(ye,Me){return G.ctx.fillText(Me,ye,D.bounds.top+O),ye+G.ctx.measureText(Me).width},D.bounds.left)},S.prototype.createFontStyle=function(D){var L=D.fontVariant.filter(function(re){return"normal"===re||"small-caps"===re}).join(""),O=yw(D.fontFamily).join(", "),G=Li(D.fontSize)?""+D.fontSize.number+D.fontSize.unit:D.fontSize.number+"px";return[[D.fontStyle,L,D.fontWeight,G,O].join(" "),O,G]},S.prototype.renderTextNode=function(D,L){return Ee(this,void 0,void 0,function(){var O,re,ye,Me,Ze,lt,dt,kt=this;return Ne(this,function(Gn){return O=this.createFontStyle(L),re=O[1],ye=O[2],this.ctx.font=O[0],this.ctx.direction=1===L.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",Me=this.fontMetrics.getMetrics(re,ye),Ze=Me.baseline,lt=Me.middle,dt=L.paintOrder,D.textBounds.forEach(function(Tn){dt.forEach(function(Qn){switch(Qn){case 0:kt.ctx.fillStyle=Ea(L.color),kt.renderTextWithLetterSpacing(Tn,L.letterSpacing,Ze);var Cr=L.textShadow;Cr.length&&Tn.text.trim().length&&(Cr.slice(0).reverse().forEach(function(_i){kt.ctx.shadowColor=Ea(_i.color),kt.ctx.shadowOffsetX=_i.offsetX.number*kt.options.scale,kt.ctx.shadowOffsetY=_i.offsetY.number*kt.options.scale,kt.ctx.shadowBlur=_i.blur.number,kt.renderTextWithLetterSpacing(Tn,L.letterSpacing,Ze)}),kt.ctx.shadowColor="",kt.ctx.shadowOffsetX=0,kt.ctx.shadowOffsetY=0,kt.ctx.shadowBlur=0),L.textDecorationLine.length&&(kt.ctx.fillStyle=Ea(L.textDecorationColor||L.color),L.textDecorationLine.forEach(function(_i){switch(_i){case 1:kt.ctx.fillRect(Tn.bounds.left,Math.round(Tn.bounds.top+Ze),Tn.bounds.width,1);break;case 2:kt.ctx.fillRect(Tn.bounds.left,Math.round(Tn.bounds.top),Tn.bounds.width,1);break;case 3:kt.ctx.fillRect(Tn.bounds.left,Math.ceil(Tn.bounds.top+lt),Tn.bounds.width,1)}}));break;case 1:L.webkitTextStrokeWidth&&Tn.text.trim().length&&(kt.ctx.strokeStyle=Ea(L.webkitTextStrokeColor),kt.ctx.lineWidth=L.webkitTextStrokeWidth,kt.ctx.lineJoin=window.chrome?"miter":"round",kt.ctx.strokeText(Tn.text,Tn.bounds.left,Tn.bounds.top+Ze)),kt.ctx.strokeStyle="",kt.ctx.lineWidth=0,kt.ctx.lineJoin="miter"}})}),[2]})})},S.prototype.renderReplacedElement=function(D,L,O){if(O&&D.intrinsicWidth>0&&D.intrinsicHeight>0){var G=Yp(D),re=c3(L);this.path(re),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(O,0,0,D.intrinsicWidth,D.intrinsicHeight,G.left,G.top,G.width,G.height),this.ctx.restore()}},S.prototype.renderNodeContent=function(D){return Ee(this,void 0,void 0,function(){var L,O,G,re,ye,lt,dt,kt,Tn,Qn,Cr,_i,hi,Ks,br,rr;return Ne(this,function(Xn){switch(Xn.label){case 0:this.applyEffects(D.getEffects(4)),O=D.curves,G=(L=D.container).styles,re=0,ye=L.textNodes,Xn.label=1;case 1:return re<ye.length?[4,this.renderTextNode(ye[re],G)]:[3,4];case 2:Xn.sent(),Xn.label=3;case 3:return re++,[3,1];case 4:if(!(L instanceof rA))return[3,8];Xn.label=5;case 5:return Xn.trys.push([5,7,,8]),[4,this.context.cache.match(L.src)];case 6:return hi=Xn.sent(),this.renderReplacedElement(L,O,hi),[3,8];case 7:return Xn.sent(),this.context.logger.error("Error loading image "+L.src),[3,8];case 8:if(L instanceof jy&&this.renderReplacedElement(L,O,L.canvas),!(L instanceof $y))return[3,12];Xn.label=9;case 9:return Xn.trys.push([9,11,,12]),[4,this.context.cache.match(L.svg)];case 10:return hi=Xn.sent(),this.renderReplacedElement(L,O,hi),[3,12];case 11:return Xn.sent(),this.context.logger.error("Error loading svg "+L.svg.substring(0,255)),[3,12];case 12:return L instanceof Jy&&L.tree?[4,new S(this.context,{scale:this.options.scale,backgroundColor:L.backgroundColor,x:0,y:0,width:L.width,height:L.height}).render(L.tree)]:[3,14];case 13:lt=Xn.sent(),L.width&&L.height&&this.ctx.drawImage(lt,0,0,L.width,L.height,L.bounds.left,L.bounds.top,L.bounds.width,L.bounds.height),Xn.label=14;case 14:if(L instanceof aA&&(dt=Math.min(L.bounds.width,L.bounds.height),L.type===oA?L.checked&&(this.ctx.save(),this.path([new Kn(L.bounds.left+.39363*dt,L.bounds.top+.79*dt),new Kn(L.bounds.left+.16*dt,L.bounds.top+.5549*dt),new Kn(L.bounds.left+.27347*dt,L.bounds.top+.44071*dt),new Kn(L.bounds.left+.39694*dt,L.bounds.top+.5649*dt),new Kn(L.bounds.left+.72983*dt,L.bounds.top+.23*dt),new Kn(L.bounds.left+.84*dt,L.bounds.top+.34085*dt),new Kn(L.bounds.left+.39363*dt,L.bounds.top+.79*dt)]),this.ctx.fillStyle=Ea(Xy),this.ctx.fill(),this.ctx.restore()):L.type===n8&&L.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(L.bounds.left+dt/2,L.bounds.top+dt/2,dt/4,0,2*Math.PI,!0),this.ctx.fillStyle=Ea(Xy),this.ctx.fill(),this.ctx.restore())),Aw(L)&&L.value.length){switch(kt=this.createFontStyle(G),Tn=this.fontMetrics.getMetrics(br=kt[0],kt[1]).baseline,this.ctx.font=br,this.ctx.fillStyle=Ea(G.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=_w(L.styles.textAlign),rr=Yp(L),Qn=0,L.styles.textAlign){case 1:Qn+=rr.width/2;break;case 2:Qn+=rr.width}Cr=rr.add(Qn,0,0,-rr.height/2+1),this.ctx.save(),this.path([new Kn(rr.left,rr.top),new Kn(rr.left+rr.width,rr.top),new Kn(rr.left+rr.width,rr.top+rr.height),new Kn(rr.left,rr.top+rr.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gu(L.value,Cr),G.letterSpacing,Tn),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Os(L.styles.display,2048))return[3,20];if(null===L.styles.listStyleImage)return[3,19];if(0!==(_i=L.styles.listStyleImage).type)return[3,18];hi=void 0,Ks=_i.url,Xn.label=15;case 15:return Xn.trys.push([15,17,,18]),[4,this.context.cache.match(Ks)];case 16:return hi=Xn.sent(),this.ctx.drawImage(hi,L.bounds.left-(hi.width+10),L.bounds.top),[3,18];case 17:return Xn.sent(),this.context.logger.error("Error loading list-style-image "+Ks),[3,18];case 18:return[3,20];case 19:D.listValue&&-1!==L.styles.listStyleType&&(br=this.createFontStyle(G)[0],this.ctx.font=br,this.ctx.fillStyle=Ea(G.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",rr=new Re(L.bounds.left,L.bounds.top+zi(L.styles.paddingTop,L.bounds.width),L.bounds.width,Z1(G.lineHeight,G.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gu(D.listValue,rr),G.letterSpacing,Z1(G.lineHeight,G.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Xn.label=20;case 20:return[2]}})})},S.prototype.renderStackContent=function(D){return Ee(this,void 0,void 0,function(){var L,O,G,re,ye,Me,Ze,lt,dt,kt,Gn,Tn,Qn,Cr;return Ne(this,function(hi){switch(hi.label){case 0:return Os(D.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(D.element)];case 1:hi.sent(),L=0,O=D.negativeZIndex,hi.label=2;case 2:return L<O.length?[4,this.renderStack(O[L])]:[3,5];case 3:hi.sent(),hi.label=4;case 4:return L++,[3,2];case 5:return[4,this.renderNodeContent(D.element)];case 6:hi.sent(),G=0,re=D.nonInlineLevel,hi.label=7;case 7:return G<re.length?[4,this.renderNode(re[G])]:[3,10];case 8:hi.sent(),hi.label=9;case 9:return G++,[3,7];case 10:ye=0,Me=D.nonPositionedFloats,hi.label=11;case 11:return ye<Me.length?[4,this.renderStack(Me[ye])]:[3,14];case 12:hi.sent(),hi.label=13;case 13:return ye++,[3,11];case 14:Ze=0,lt=D.nonPositionedInlineLevel,hi.label=15;case 15:return Ze<lt.length?[4,this.renderStack(lt[Ze])]:[3,18];case 16:hi.sent(),hi.label=17;case 17:return Ze++,[3,15];case 18:dt=0,kt=D.inlineLevel,hi.label=19;case 19:return dt<kt.length?[4,this.renderNode(kt[dt])]:[3,22];case 20:hi.sent(),hi.label=21;case 21:return dt++,[3,19];case 22:Gn=0,Tn=D.zeroOrAutoZIndexOrTransformedOrOpacity,hi.label=23;case 23:return Gn<Tn.length?[4,this.renderStack(Tn[Gn])]:[3,26];case 24:hi.sent(),hi.label=25;case 25:return Gn++,[3,23];case 26:Qn=0,Cr=D.positiveZIndex,hi.label=27;case 27:return Qn<Cr.length?[4,this.renderStack(Cr[Qn])]:[3,30];case 28:hi.sent(),hi.label=29;case 29:return Qn++,[3,27];case 30:return[2]}})})},S.prototype.mask=function(D){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(D.slice(0).reverse()),this.ctx.closePath()},S.prototype.path=function(D){this.ctx.beginPath(),this.formatPath(D),this.ctx.closePath()},S.prototype.formatPath=function(D){var L=this;D.forEach(function(O,G){var re=Ll(O)?O.start:O;0===G?L.ctx.moveTo(re.x,re.y):L.ctx.lineTo(re.x,re.y),Ll(O)&&L.ctx.bezierCurveTo(O.startControl.x,O.startControl.y,O.endControl.x,O.endControl.y,O.end.x,O.end.y)})},S.prototype.renderRepeat=function(D,L,O,G){this.path(D),this.ctx.fillStyle=L,this.ctx.translate(O,G),this.ctx.fill(),this.ctx.translate(-O,-G)},S.prototype.resizeImage=function(D,L,O){var G;if(D.width===L&&D.height===O)return D;var ye=(null!==(G=this.canvas.ownerDocument)&&void 0!==G?G:document).createElement("canvas");return ye.width=Math.max(1,L),ye.height=Math.max(1,O),ye.getContext("2d").drawImage(D,0,0,D.width,D.height,0,0,L,O),ye},S.prototype.renderBackgroundImage=function(D){return Ee(this,void 0,void 0,function(){var L,O,G,re,ye;return Ne(this,function(Ze){switch(Ze.label){case 0:L=D.styles.backgroundImage.length-1,O=function(lt){var dt,kt,Gn,Tn,Qn,Cr,_i,hi,Ks,br,rr,Xn,Ns,Bs,Ui,D1,J1,dn,xo,u2,l3,ea,j2,Eh,Oc,M0,_u,Th,yu,wu,S0;return Ne(this,function(A8){switch(A8.label){case 0:if(0!==lt.type)return[3,5];dt=void 0,kt=lt.url,A8.label=1;case 1:return A8.trys.push([1,3,,4]),[4,G.context.cache.match(kt)];case 2:return dt=A8.sent(),[3,4];case 3:return A8.sent(),G.context.logger.error("Error loading background-image "+kt),[3,4];case 4:return dt&&(Gn=yA(D,L,[dt.width,dt.height,dt.width/dt.height]),D1=Gn[0],ea=Gn[1],j2=Gn[2],Bs=G.ctx.createPattern(G.resizeImage(dt,xo=Gn[3],u2=Gn[4]),"repeat"),G.renderRepeat(D1,Bs,ea,j2)),[3,6];case 5:!function(E){return 1===E.type}(lt)?function(E){return 2===E.type}(lt)&&(Ui=yA(D,L,[null,null,null]),D1=Ui[0],J1=Ui[1],dn=Ui[2],u2=Ui[4],ea=zi((l3=0===lt.position.length?[gc]:lt.position)[0],xo=Ui[3]),j2=zi(l3[l3.length-1],u2),Eh=function(E,S,D,L,O){var G=0,re=0;switch(E.size){case 0:0===E.shape?G=re=Math.min(Math.abs(S),Math.abs(S-L),Math.abs(D),Math.abs(D-O)):1===E.shape&&(G=Math.min(Math.abs(S),Math.abs(S-L)),re=Math.min(Math.abs(D),Math.abs(D-O)));break;case 2:if(0===E.shape)G=re=Math.min(ho(S,D),ho(S,D-O),ho(S-L,D),ho(S-L,D-O));else if(1===E.shape){var ye=Math.min(Math.abs(D),Math.abs(D-O))/Math.min(Math.abs(S),Math.abs(S-L)),Me=_p(L,O,S,D,!0);re=ye*(G=ho(Me[0]-S,(Me[1]-D)/ye))}break;case 1:0===E.shape?G=re=Math.max(Math.abs(S),Math.abs(S-L),Math.abs(D),Math.abs(D-O)):1===E.shape&&(G=Math.max(Math.abs(S),Math.abs(S-L)),re=Math.max(Math.abs(D),Math.abs(D-O)));break;case 3:if(0===E.shape)G=re=Math.max(ho(S,D),ho(S,D-O),ho(S-L,D),ho(S-L,D-O));else if(1===E.shape){ye=Math.max(Math.abs(D),Math.abs(D-O))/Math.max(Math.abs(S),Math.abs(S-L));var dt=_p(L,O,S,D,!1);re=ye*(G=ho(dt[0]-S,(dt[1]-D)/ye))}}return Array.isArray(E.size)&&(G=zi(E.size[0],L),re=2===E.size.length?zi(E.size[1],O):G),[G,re]}(lt,ea,j2,xo,u2),M0=Eh[1],(Oc=Eh[0])>0&&M0>0&&(_u=G.ctx.createRadialGradient(J1+ea,dn+j2,0,J1+ea,dn+j2,Oc),bl(lt.stops,2*Oc).forEach(function(Lh){return _u.addColorStop(Lh.stop,Ea(Lh.color))}),G.path(D1),G.ctx.fillStyle=_u,Oc!==M0?(Th=D.bounds.left+.5*D.bounds.width,yu=D.bounds.top+.5*D.bounds.height,S0=1/(wu=M0/Oc),G.ctx.save(),G.ctx.translate(Th,yu),G.ctx.transform(1,0,0,wu,0,0),G.ctx.translate(-Th,-yu),G.ctx.fillRect(J1,S0*(dn-yu)+yu,xo,u2*S0),G.ctx.restore()):G.ctx.fill())):(Tn=yA(D,L,[null,null,null]),D1=Tn[0],ea=Tn[1],j2=Tn[2],Qn=M2(lt.angle,xo=Tn[3],u2=Tn[4]),Cr=Qn[0],_i=Qn[1],hi=Qn[2],Ks=Qn[3],br=Qn[4],(rr=document.createElement("canvas")).width=xo,rr.height=u2,Xn=rr.getContext("2d"),Ns=Xn.createLinearGradient(_i,Ks,hi,br),bl(lt.stops,Cr).forEach(function(Lh){return Ns.addColorStop(Lh.stop,Ea(Lh.color))}),Xn.fillStyle=Ns,Xn.fillRect(0,0,xo,u2),xo>0&&u2>0&&(Bs=G.ctx.createPattern(rr,"repeat"),G.renderRepeat(D1,Bs,ea,j2))),A8.label=6;case 6:return L--,[2]}})},G=this,re=0,ye=D.styles.backgroundImage.slice(0).reverse(),Ze.label=1;case 1:return re<ye.length?[5,O(ye[re])]:[3,4];case 2:Ze.sent(),Ze.label=3;case 3:return re++,[3,1];case 4:return[2]}})})},S.prototype.renderSolidBorder=function(D,L,O){return Ee(this,void 0,void 0,function(){return Ne(this,function(G){return this.path(pw(O,L)),this.ctx.fillStyle=Ea(D),this.ctx.fill(),[2]})})},S.prototype.renderDoubleBorder=function(D,L,O,G){return Ee(this,void 0,void 0,function(){var re,ye;return Ne(this,function(Me){switch(Me.label){case 0:return L<3?[4,this.renderSolidBorder(D,O,G)]:[3,2];case 1:return Me.sent(),[2];case 2:return re=function(E,S){switch(S){case 0:return Dl(E.topLeftBorderBox,E.topLeftBorderDoubleOuterBox,E.topRightBorderBox,E.topRightBorderDoubleOuterBox);case 1:return Dl(E.topRightBorderBox,E.topRightBorderDoubleOuterBox,E.bottomRightBorderBox,E.bottomRightBorderDoubleOuterBox);case 2:return Dl(E.bottomRightBorderBox,E.bottomRightBorderDoubleOuterBox,E.bottomLeftBorderBox,E.bottomLeftBorderDoubleOuterBox);default:return Dl(E.bottomLeftBorderBox,E.bottomLeftBorderDoubleOuterBox,E.topLeftBorderBox,E.topLeftBorderDoubleOuterBox)}}(G,O),this.path(re),this.ctx.fillStyle=Ea(D),this.ctx.fill(),ye=function(E,S){switch(S){case 0:return Dl(E.topLeftBorderDoubleInnerBox,E.topLeftPaddingBox,E.topRightBorderDoubleInnerBox,E.topRightPaddingBox);case 1:return Dl(E.topRightBorderDoubleInnerBox,E.topRightPaddingBox,E.bottomRightBorderDoubleInnerBox,E.bottomRightPaddingBox);case 2:return Dl(E.bottomRightBorderDoubleInnerBox,E.bottomRightPaddingBox,E.bottomLeftBorderDoubleInnerBox,E.bottomLeftPaddingBox);default:return Dl(E.bottomLeftBorderDoubleInnerBox,E.bottomLeftPaddingBox,E.topLeftBorderDoubleInnerBox,E.topLeftPaddingBox)}}(G,O),this.path(ye),this.ctx.fill(),[2]}})})},S.prototype.renderNodeBackgroundAndBorders=function(D){return Ee(this,void 0,void 0,function(){var L,O,G,re,ye,Me,Ze,lt,dt=this;return Ne(this,function(kt){switch(kt.label){case 0:return this.applyEffects(D.getEffects(2)),O=!Ac((L=D.container.styles).backgroundColor)||L.backgroundImage.length,G=[{style:L.borderTopStyle,color:L.borderTopColor,width:L.borderTopWidth},{style:L.borderRightStyle,color:L.borderRightColor,width:L.borderRightWidth},{style:L.borderBottomStyle,color:L.borderBottomColor,width:L.borderBottomWidth},{style:L.borderLeftStyle,color:L.borderLeftColor,width:L.borderLeftWidth}],re=vw(Ad(L.backgroundClip,0),D.curves),O||L.boxShadow.length?(this.ctx.save(),this.path(re),this.ctx.clip(),Ac(L.backgroundColor)||(this.ctx.fillStyle=Ea(L.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(D.container)]):[3,2];case 1:kt.sent(),this.ctx.restore(),L.boxShadow.slice(0).reverse().forEach(function(Gn){dt.ctx.save();var Tn=$p(D.curves),Qn=Gn.inset?0:1e4,Cr=function(E,S,D,L,O){return E.map(function(G,re){switch(re){case 0:return G.add(S,D);case 1:return G.add(S+L,D);case 2:return G.add(S+L,D+O);case 3:return G.add(S,D+O)}return G})}(Tn,(Gn.inset?1:-1)*Gn.spread.number-Qn,(Gn.inset?1:-1)*Gn.spread.number,Gn.spread.number*(Gn.inset?-2:2),Gn.spread.number*(Gn.inset?-2:2));Gn.inset?(dt.path(Tn),dt.ctx.clip(),dt.mask(Cr)):(dt.mask(Tn),dt.ctx.clip(),dt.path(Cr)),dt.ctx.shadowOffsetX=Gn.offsetX.number+Qn,dt.ctx.shadowOffsetY=Gn.offsetY.number,dt.ctx.shadowColor=Ea(Gn.color),dt.ctx.shadowBlur=Gn.blur.number,dt.ctx.fillStyle=Gn.inset?Ea(Gn.color):"rgba(0,0,0,1)",dt.ctx.fill(),dt.ctx.restore()}),kt.label=2;case 2:ye=0,Me=0,Ze=G,kt.label=3;case 3:return Me<Ze.length?0!==(lt=Ze[Me]).style&&!Ac(lt.color)&&lt.width>0?2!==lt.style?[3,5]:[4,this.renderDashedDottedBorder(lt.color,lt.width,ye,D.curves,2)]:[3,11]:[3,13];case 4:return kt.sent(),[3,11];case 5:return 3!==lt.style?[3,7]:[4,this.renderDashedDottedBorder(lt.color,lt.width,ye,D.curves,3)];case 6:return kt.sent(),[3,11];case 7:return 4!==lt.style?[3,9]:[4,this.renderDoubleBorder(lt.color,lt.width,ye,D.curves)];case 8:return kt.sent(),[3,11];case 9:return[4,this.renderSolidBorder(lt.color,ye,D.curves)];case 10:kt.sent(),kt.label=11;case 11:ye++,kt.label=12;case 12:return Me++,[3,3];case 13:return[2]}})})},S.prototype.renderDashedDottedBorder=function(D,L,O,G,re){return Ee(this,void 0,void 0,function(){var ye,Me,Ze,lt,dt,kt,Gn,Tn,Qn,Cr,_i,hi,Ks,br,rr,Xn;return Ne(this,function(Ns){return this.ctx.save(),ye=function(E,S){switch(S){case 0:return Sh(E.topLeftBorderStroke,E.topRightBorderStroke);case 1:return Sh(E.topRightBorderStroke,E.bottomRightBorderStroke);case 2:return Sh(E.bottomRightBorderStroke,E.bottomLeftBorderStroke);default:return Sh(E.bottomLeftBorderStroke,E.topLeftBorderStroke)}}(G,O),Me=pw(G,O),2===re&&(this.path(Me),this.ctx.clip()),Ll(Me[0])?(Ze=Me[0].start.x,lt=Me[0].start.y):(Ze=Me[0].x,lt=Me[0].y),Ll(Me[1])?(dt=Me[1].end.x,kt=Me[1].end.y):(dt=Me[1].x,kt=Me[1].y),Gn=0===O||2===O?Math.abs(Ze-dt):Math.abs(lt-kt),this.ctx.beginPath(),this.formatPath(3===re?ye:Me.slice(0,2)),Tn=L<3?3*L:2*L,Qn=L<3?2*L:L,3===re&&(Tn=L,Qn=L),Cr=!0,Gn<=2*Tn?Cr=!1:Gn<=2*Tn+Qn?(Tn*=_i=Gn/(2*Tn+Qn),Qn*=_i):(hi=Math.floor((Gn+Qn)/(Tn+Qn)),Ks=(Gn-hi*Tn)/(hi-1),Qn=(br=(Gn-(hi+1)*Tn)/hi)<=0||Math.abs(Qn-Ks)<Math.abs(Qn-br)?Ks:br),Cr&&this.ctx.setLineDash(3===re?[0,Tn+Qn]:[Tn,Qn]),3===re?(this.ctx.lineCap="round",this.ctx.lineWidth=L):this.ctx.lineWidth=2*L+1.1,this.ctx.strokeStyle=Ea(D),this.ctx.stroke(),this.ctx.setLineDash([]),2===re&&(Ll(Me[0])&&(rr=Me[3],Xn=Me[0],this.ctx.beginPath(),this.formatPath([new Kn(rr.end.x,rr.end.y),new Kn(Xn.start.x,Xn.start.y)]),this.ctx.stroke()),Ll(Me[1])&&(rr=Me[1],Xn=Me[2],this.ctx.beginPath(),this.formatPath([new Kn(rr.end.x,rr.end.y),new Kn(Xn.start.x,Xn.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},S.prototype.render=function(D){return Ee(this,void 0,void 0,function(){var L;return Ne(this,function(O){switch(O.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ea(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),L=function(E){var S=new xL(E,null),D=new Kp(S),L=[];return dw(S,D,D,L),_A(S.container,L),D}(D),[4,this.renderStack(L)];case 1:return O.sent(),this.applyEffects([]),[2,this.canvas]}})})},S}(IL),Aw=function(E){return E instanceof Zy||E instanceof Yy||E instanceof aA&&E.type!==n8&&E.type!==oA},vw=function(E,S){switch(E){case 0:return $p(S);case 2:return function(E){return[E.topLeftContentBox,E.topRightContentBox,E.bottomRightContentBox,E.bottomLeftContentBox]}(S);default:return c3(S)}},_w=function(E){switch(E){case 1:return"center";case 2:return"right";default:return"left"}},BL=["-apple-system","system-ui"],yw=function(E){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?E.filter(function(S){return-1===BL.indexOf(S)}):E},ww=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.canvas=L.canvas?L.canvas:document.createElement("canvas"),O.ctx=O.canvas.getContext("2d"),O.options=L,O.canvas.width=Math.floor(L.width*L.scale),O.canvas.height=Math.floor(L.height*L.scale),O.canvas.style.width=L.width+"px",O.canvas.style.height=L.height+"px",O.ctx.scale(O.options.scale,O.options.scale),O.ctx.translate(-L.x,-L.y),O.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+L.width+"x"+L.height+" at "+L.x+","+L.y+") with scale "+L.scale),O}return Se(S,E),S.prototype.render=function(D){return Ee(this,void 0,void 0,function(){var L,O;return Ne(this,function(G){switch(G.label){case 0:return L=Qy(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,D),[4,CA(L)];case 1:return O=G.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ea(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(O,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},S}(IL),CA=function(E){return new Promise(function(S,D){var L=new Image;L.onload=function(){S(L)},L.onerror=D,L.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(E))})},oU=function(){function E(S){var L=S.enabled;this.id=S.id,this.enabled=L,this.start=Date.now()}return E.prototype.debug=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.debug?console.debug.apply(console,ze([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},E.prototype.getTime=function(){return Date.now()-this.start},E.prototype.info=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&typeof window<"u"&&window.console&&"function"==typeof console.info&&console.info.apply(console,ze([this.id,this.getTime()+"ms"],S))},E.prototype.warn=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.warn?console.warn.apply(console,ze([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},E.prototype.error=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.error?console.error.apply(console,ze([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},E.instances={},E}(),RL=function(){function E(S,D){var L;this.windowBounds=D,this.instanceName="#"+E.instanceCount++,this.logger=new oU({id:this.instanceName,enabled:S.logging}),this.cache=null!==(L=S.cache)&&void 0!==L?L:new gL(this,S)}return E.instanceCount=1,E}();typeof window<"u"&&uw.setContext(window);var Cw=function(E,S){return Ee(void 0,void 0,void 0,function(){var D,L,O,G,re,ye,Me,Ze,lt,dt,kt,Gn,Tn,Qn,Cr,_i,hi,Ks,br,rr,Xn,Bs,Ui,D1,J1,dn,xo,u2,l3,ea,j2,Eh,Oc,M0,_u,Th,yu,wu;return Ne(this,function(S0){switch(S0.label){case 0:if(!E||"object"!=typeof E)return[2,Promise.reject("Invalid element provided as first argument")];if(!(D=E.ownerDocument))throw new Error("Element is not attached to a Document");if(!(L=D.defaultView))throw new Error("Document is not attached to a Window");return O={allowTaint:null!==(Bs=S.allowTaint)&&void 0!==Bs&&Bs,imageTimeout:null!==(Ui=S.imageTimeout)&&void 0!==Ui?Ui:15e3,proxy:S.proxy,useCORS:null!==(D1=S.useCORS)&&void 0!==D1&&D1},G=ue({logging:null===(J1=S.logging)||void 0===J1||J1,cache:S.cache},O),re={windowWidth:null!==(dn=S.windowWidth)&&void 0!==dn?dn:L.innerWidth,windowHeight:null!==(xo=S.windowHeight)&&void 0!==xo?xo:L.innerHeight,scrollX:null!==(u2=S.scrollX)&&void 0!==u2?u2:L.pageXOffset,scrollY:null!==(l3=S.scrollY)&&void 0!==l3?l3:L.pageYOffset},ye=new Re(re.scrollX,re.scrollY,re.windowWidth,re.windowHeight),Me=new RL(G,ye),Ze=null!==(ea=S.foreignObjectRendering)&&void 0!==ea&&ea,lt={allowTaint:null!==(j2=S.allowTaint)&&void 0!==j2&&j2,onclone:S.onclone,ignoreElements:S.ignoreElements,inlineImages:Ze,copyStyles:Ze},Me.logger.debug("Starting document clone with size "+ye.width+"x"+ye.height+" scrolled to "+-ye.left+","+-ye.top),dt=new hL(Me,E,lt),(kt=dt.clonedReferenceElement)?[4,dt.toIFrame(D,ye)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Gn=S0.sent(),Tn=xs(kt)||function(E){return"HTML"===E.tagName}(kt)?function(E){var S=E.body,D=E.documentElement;if(!S||!D)throw new Error("Unable to get document size");var L=Math.max(Math.max(S.scrollWidth,D.scrollWidth),Math.max(S.offsetWidth,D.offsetWidth),Math.max(S.clientWidth,D.clientWidth)),O=Math.max(Math.max(S.scrollHeight,D.scrollHeight),Math.max(S.offsetHeight,D.offsetHeight),Math.max(S.clientHeight,D.clientHeight));return new Re(0,0,L,O)}(kt.ownerDocument):Ie(Me,kt),Qn=Tn.width,Cr=Tn.height,_i=Tn.left,hi=Tn.top,Ks=bw(Me,kt,S.backgroundColor),br={canvas:S.canvas,backgroundColor:Ks,scale:null!==(Oc=null!==(Eh=S.scale)&&void 0!==Eh?Eh:L.devicePixelRatio)&&void 0!==Oc?Oc:1,x:(null!==(M0=S.x)&&void 0!==M0?M0:0)+_i,y:(null!==(_u=S.y)&&void 0!==_u?_u:0)+hi,width:null!==(Th=S.width)&&void 0!==Th?Th:Math.ceil(Qn),height:null!==(yu=S.height)&&void 0!==yu?yu:Math.ceil(Cr)},Ze?(Me.logger.debug("Document cloned, using foreign object rendering"),[4,new ww(Me,br).render(kt)]):[3,3];case 2:return rr=S0.sent(),[3,5];case 3:return Me.logger.debug("Document cloned, element located at "+_i+","+hi+" with size "+Qn+"x"+Cr+" using computed rendering"),Me.logger.debug("Starting DOM parsing"),Xn=ld(Me,kt),Ks===Xn.styles.backgroundColor&&(Xn.styles.backgroundColor=S1.TRANSPARENT),Me.logger.debug("Starting renderer for element at "+br.x+","+br.y+" with size "+br.width+"x"+br.height),[4,new wA(Me,br).render(Xn)];case 4:rr=S0.sent(),S0.label=5;case 5:return(!(null!==(wu=S.removeContainer)&&void 0!==wu)||wu)&&(hL.destroy(Gn)||Me.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),Me.logger.debug("Finished rendering"),[2,rr]}})})},bw=function(E,S,D){var L=S.ownerDocument,O=L.documentElement?Bo(E,getComputedStyle(L.documentElement).backgroundColor):S1.TRANSPARENT,G=L.body?Bo(E,getComputedStyle(L.body).backgroundColor):S1.TRANSPARENT,re="string"==typeof D?Bo(E,D):null===D?S1.TRANSPARENT:4294967295;return S===L.documentElement?Ac(O)?Ac(G)?re:G:O:re};return function(E,S){return void 0===S&&(S={}),Cw(E,S)}}()},3407:(Ut,nt,Se)=>{"use strict";var ue=Se(6259)(),Ne=Se(5834)("Object.prototype.toString"),ze=function(ct){return!(ue&&ct&&"object"==typeof ct&&Symbol.toStringTag in ct)&&"[object Arguments]"===Ne(ct)},Re=function(ct){return!!ze(ct)||null!==ct&&"object"==typeof ct&&"number"==typeof ct.length&&ct.length>=0&&"[object Array]"!==Ne(ct)&&"[object Function]"===Ne(ct.callee)},Ie=function(){return ze(arguments)}();ze.isLegacyArguments=Re,Ut.exports=Ie?ze:Re},2374:(Ut,nt,Se)=>{"use strict";var ue=Date.prototype.getDay,Ne=Object.prototype.toString,Re=Se(6259)();Ut.exports=function(We){return"object"==typeof We&&null!==We&&(Re?function(We){try{return ue.call(We),!0}catch{return!1}}(We):"[object Date]"===Ne.call(We))}},2342:(Ut,nt,Se)=>{"use strict";var Ne,ze,Re,Ie,ue=Se(5834),Ee=Se(6259)();if(Ee){Ne=ue("Object.prototype.hasOwnProperty"),ze=ue("RegExp.prototype.exec"),Re={};var We=function(){throw Re};Ie={toString:We,valueOf:We},"symbol"==typeof Symbol.toPrimitive&&(Ie[Symbol.toPrimitive]=We)}var ct=ue("Object.prototype.toString"),ft=Object.getOwnPropertyDescriptor;Ut.exports=Ee?function(st){if(!st||"object"!=typeof st)return!1;var yt=ft(st,"lastIndex");if(!yt||!Ne(yt,"value"))return!1;try{ze(st,Ie)}catch(Ve){return Ve===Re}}:function(st){return!(!st||"object"!=typeof st&&"function"!=typeof st)&&"[object RegExp]"===ct(st)}},5943:Ut=>{"use strict";var nt=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;function Ee(ze){if(null==ze)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(ze)}Ut.exports=function Ne(){try{if(!Object.assign)return!1;var ze=new String("abc");if(ze[5]="de","5"===Object.getOwnPropertyNames(ze)[0])return!1;for(var Re={},Ie=0;Ie<10;Ie++)Re["_"+String.fromCharCode(Ie)]=Ie;if("0123456789"!==Object.getOwnPropertyNames(Re).map(function(ft){return Re[ft]}).join(""))return!1;var ct={};return"abcdefghijklmnopqrst".split("").forEach(function(ft){ct[ft]=ft}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},ct)).join("")}catch{return!1}}()?Object.assign:function(ze,Re){for(var Ie,ct,We=Ee(ze),ft=1;ft<arguments.length;ft++){for(var Gt in Ie=Object(arguments[ft]))Se.call(Ie,Gt)&&(We[Gt]=Ie[Gt]);if(nt){ct=nt(Ie);for(var Ct=0;Ct<ct.length;Ct++)ue.call(Ie,ct[Ct])&&(We[ct[Ct]]=Ie[ct[Ct]])}}return We}},1175:Ut=>{"use strict";var nt=function(Se){return Se!=Se};Ut.exports=function(ue,Ee){return 0===ue&&0===Ee?1/ue==1/Ee:!!(ue===Ee||nt(ue)&&nt(Ee))}},2e3:(Ut,nt,Se)=>{"use strict";var ue=Se(2358),Ee=Se(5685),Ne=Se(1175),ze=Se(6305),Re=Se(3859),Ie=Ee(ze(),Object);ue(Ie,{getPolyfill:ze,implementation:Ne,shim:Re}),Ut.exports=Ie},6305:(Ut,nt,Se)=>{"use strict";var ue=Se(1175);Ut.exports=function(){return"function"==typeof Object.is?Object.is:ue}},3859:(Ut,nt,Se)=>{"use strict";var ue=Se(6305),Ee=Se(2358);Ut.exports=function(){var ze=ue();return Ee(Object,{is:ze},{is:function(){return Object.is!==ze}}),ze}},2450:(Ut,nt,Se)=>{"use strict";var ue;if(!Object.keys){var Ee=Object.prototype.hasOwnProperty,Ne=Object.prototype.toString,ze=Se(9978),Re=Object.prototype.propertyIsEnumerable,Ie=!Re.call({toString:null},"toString"),We=Re.call(function(){},"prototype"),ct=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ft=function(yt){var Xt=yt.constructor;return Xt&&Xt.prototype===yt},Gt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ct=function(){if(typeof window>"u")return!1;for(var yt in window)try{if(!Gt["$"+yt]&&Ee.call(window,yt)&&null!==window[yt]&&"object"==typeof window[yt])try{ft(window[yt])}catch{return!0}}catch{return!0}return!1}();ue=function(Xt){var Ve=null!==Xt&&"object"==typeof Xt,Ye="[object Function]"===Ne.call(Xt),j=ze(Xt),X=Ve&&"[object String]"===Ne.call(Xt),Y=[];if(!Ve&&!Ye&&!j)throw new TypeError("Object.keys called on a non-object");var we=We&&Ye;if(X&&Xt.length>0&&!Ee.call(Xt,0))for(var J=0;J<Xt.length;++J)Y.push(String(J));if(j&&Xt.length>0)for(var se=0;se<Xt.length;++se)Y.push(String(se));else for(var ce in Xt)(!we||"prototype"!==ce)&&Ee.call(Xt,ce)&&Y.push(String(ce));if(Ie)for(var $=function(yt){if(typeof window>"u"||!Ct)return ft(yt);try{return ft(yt)}catch{return!1}}(Xt),je=0;je<ct.length;++je)(!$||"constructor"!==ct[je])&&Ee.call(Xt,ct[je])&&Y.push(ct[je]);return Y}}Ut.exports=ue},1356:(Ut,nt,Se)=>{"use strict";var ue=Array.prototype.slice,Ee=Se(9978),Ne=Object.keys,ze=Ne?function(We){return Ne(We)}:Se(2450),Re=Object.keys;ze.shim=function(){if(Object.keys){var We=function(){var ct=Object.keys(arguments);return ct&&ct.length===arguments.length}(1,2);We||(Object.keys=function(ft){return Ee(ft)?Re(ue.call(ft)):Re(ft)})}else Object.keys=ze;return Object.keys||ze},Ut.exports=ze},9978:Ut=>{"use strict";var nt=Object.prototype.toString;Ut.exports=function(ue){var Ee=nt.call(ue),Ne="[object Arguments]"===Ee;return Ne||(Ne="[object Array]"!==Ee&&null!==ue&&"object"==typeof ue&&"number"==typeof ue.length&&ue.length>=0&&"[object Function]"===nt.call(ue.callee)),Ne}},1766:Ut=>{Ut.exports=function(Se,ue,Ee,Ne){var ze=Se[0],Re=Se[1],Ie=!1;void 0===Ee&&(Ee=0),void 0===Ne&&(Ne=ue.length);for(var We=(Ne-Ee)/2,ct=0,ft=We-1;ct<We;ft=ct++){var Gt=ue[Ee+2*ct+0],Ct=ue[Ee+2*ct+1],yt=ue[Ee+2*ft+1];Ct>Re!=yt>Re&&ze<(ue[Ee+2*ft+0]-Gt)*(Re-Ct)/(yt-Ct)+Gt&&(Ie=!Ie)}return Ie}},3870:(Ut,nt,Se)=>{var ue=Se(1766),Ee=Se(2260);Ut.exports=function(ze,Re,Ie,We){return Re.length>0&&Array.isArray(Re[0])?Ee(ze,Re,Ie,We):ue(ze,Re,Ie,We)},Ut.exports.nested=Ee,Ut.exports.flat=ue},2260:Ut=>{Ut.exports=function(Se,ue,Ee,Ne){var ze=Se[0],Re=Se[1],Ie=!1;void 0===Ee&&(Ee=0),void 0===Ne&&(Ne=ue.length);for(var We=Ne-Ee,ct=0,ft=We-1;ct<We;ft=ct++){var Gt=ue[ct+Ee][0],Ct=ue[ct+Ee][1],yt=ue[ft+Ee][1];Ct>Re!=yt>Re&&ze<(ue[ft+Ee][0]-Gt)*(Re-Ct)/(yt-Ct)+Gt&&(Ie=!Ie)}return Ie}},9855:function(Ut){Ut.exports=function(){"use strict";function nt(it,le){if(!(it instanceof le))throw new TypeError("Cannot call a class as a function")}function Se(it,le){for(var te=0;te<le.length;te++){var ee=le[te];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(it,ee.key,ee)}}function ue(it,le,te){return le&&Se(it.prototype,le),te&&Se(it,te),it}var Ee=function it(le,te){this.next=null,this.key=le,this.data=te,this.left=null,this.right=null};function Ne(it,le){return it>le?1:it<le?-1:0}function ze(it,le,te){for(var ee=new Ee(null,null),Le=ee,qe=ee;;){var mt=te(it,le.key);if(mt<0){if(null===le.left)break;if(te(it,le.left.key)<0&&(le.left=(Qt=le.left).right,Qt.right=le,null===(le=Qt).left))break;qe.left=le,qe=le,le=le.left}else{if(!(mt>0))break;if(null===le.right)break;var Qt;if(te(it,le.right.key)>0&&(le.right=(Qt=le.right).left,Qt.left=le,null===(le=Qt).right))break;Le.right=le,Le=le,le=le.right}}return Le.right=le.left,qe.left=le.right,le.left=ee.right,le.right=ee.left,le}function Re(it,le,te,ee){var Le=new Ee(it,le);if(null===te)return Le.left=Le.right=null,Le;var qe=ee(it,(te=ze(it,te,ee)).key);return qe<0?(Le.left=te.left,Le.right=te,te.left=null):qe>=0&&(Le.right=te.right,Le.left=te,te.right=null),Le}function Ie(it,le,te){var ee=null,Le=null;if(le){var qe=te((le=ze(it,le,te)).key,it);0===qe?(ee=le.left,Le=le.right):qe<0?(Le=le.right,le.right=null,ee=le):(ee=le.left,le.left=null,Le=le)}return{left:ee,right:Le}}function ct(it,le,te,ee,Le){if(it){ee(le+(te?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+Le(it)+"\n");var qe=le+(te?"    ":"\u2502   ");it.left&&ct(it.left,qe,!1,ee,Le),it.right&&ct(it.right,qe,!0,ee,Le)}}var ft=function(){function it(le){void 0===le&&(le=Ne),this._root=null,this._size=0,this._comparator=le}return it.prototype.insert=function(le,te){return this._size++,this._root=Re(le,te,this._root,this._comparator)},it.prototype.add=function(le,te){var ee=new Ee(le,te);null===this._root&&(ee.left=ee.right=null,this._size++,this._root=ee);var Le=this._comparator,qe=ze(le,this._root,Le),mt=Le(le,qe.key);return 0===mt?this._root=qe:(mt<0?(ee.left=qe.left,ee.right=qe,qe.left=null):mt>0&&(ee.right=qe.right,ee.left=qe,qe.right=null),this._size++,this._root=ee),this._root},it.prototype.remove=function(le){this._root=this._remove(le,this._root,this._comparator)},it.prototype._remove=function(le,te,ee){var Le;return null===te?null:0===ee(le,(te=ze(le,te,ee)).key)?(null===te.left?Le=te.right:(Le=ze(le,te.left,ee)).right=te.right,this._size--,Le):te},it.prototype.pop=function(){var le=this._root;if(le){for(;le.left;)le=le.left;return this._root=ze(le.key,this._root,this._comparator),this._root=this._remove(le.key,this._root,this._comparator),{key:le.key,data:le.data}}return null},it.prototype.findStatic=function(le){for(var te=this._root,ee=this._comparator;te;){var Le=ee(le,te.key);if(0===Le)return te;te=Le<0?te.left:te.right}return null},it.prototype.find=function(le){return this._root&&(this._root=ze(le,this._root,this._comparator),0!==this._comparator(le,this._root.key))?null:this._root},it.prototype.contains=function(le){for(var te=this._root,ee=this._comparator;te;){var Le=ee(le,te.key);if(0===Le)return!0;te=Le<0?te.left:te.right}return!1},it.prototype.forEach=function(le,te){for(var ee=this._root,Le=[],qe=!1;!qe;)null!==ee?(Le.push(ee),ee=ee.left):0!==Le.length?(ee=Le.pop(),le.call(te,ee),ee=ee.right):qe=!0;return this},it.prototype.range=function(le,te,ee,Le){for(var qe=[],mt=this._comparator,Qt=this._root;0!==qe.length||Qt;)if(Qt)qe.push(Qt),Qt=Qt.left;else{if(mt((Qt=qe.pop()).key,te)>0)break;if(mt(Qt.key,le)>=0&&ee.call(Le,Qt))return this;Qt=Qt.right}return this},it.prototype.keys=function(){var le=[];return this.forEach(function(te){return le.push(te.key)}),le},it.prototype.values=function(){var le=[];return this.forEach(function(te){return le.push(te.data)}),le},it.prototype.min=function(){return this._root?this.minNode(this._root).key:null},it.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},it.prototype.minNode=function(le){if(void 0===le&&(le=this._root),le)for(;le.left;)le=le.left;return le},it.prototype.maxNode=function(le){if(void 0===le&&(le=this._root),le)for(;le.right;)le=le.right;return le},it.prototype.at=function(le){for(var te=this._root,ee=!1,Le=0,qe=[];!ee;)if(te)qe.push(te),te=te.left;else if(qe.length>0){if(te=qe.pop(),Le===le)return te;Le++,te=te.right}else ee=!0;return null},it.prototype.next=function(le){var te=this._root,ee=null;if(le.right){for(ee=le.right;ee.left;)ee=ee.left;return ee}for(var Le=this._comparator;te;){var qe=Le(le.key,te.key);if(0===qe)break;qe<0?(ee=te,te=te.left):te=te.right}return ee},it.prototype.prev=function(le){var te=this._root,ee=null;if(null!==le.left){for(ee=le.left;ee.right;)ee=ee.right;return ee}for(var Le=this._comparator;te;){var qe=Le(le.key,te.key);if(0===qe)break;qe<0?te=te.left:(ee=te,te=te.right)}return ee},it.prototype.clear=function(){return this._root=null,this._size=0,this},it.prototype.toList=function(){return function st(it){for(var le=it,te=[],ee=!1,Le=new Ee(null,null),qe=Le;!ee;)le?(te.push(le),le=le.left):te.length>0?le=(le=qe=qe.next=te.pop()).right:ee=!0;return qe.next=null,Le.next}(this._root)},it.prototype.load=function(le,te,ee){void 0===te&&(te=[]),void 0===ee&&(ee=!1);var Le=le.length,qe=this._comparator;if(ee&&Ve(le,te,0,Le-1,qe),null===this._root)this._root=Gt(le,te,0,Le),this._size=Le;else{var mt=function Xt(it,le,te){for(var ee=new Ee(null,null),Le=ee,qe=it,mt=le;null!==qe&&null!==mt;)te(qe.key,mt.key)<0?(Le.next=qe,qe=qe.next):(Le.next=mt,mt=mt.next),Le=Le.next;return null!==qe?Le.next=qe:null!==mt&&(Le.next=mt),ee.next}(this.toList(),function Ct(it,le){for(var te=new Ee(null,null),ee=te,Le=0;Le<it.length;Le++)ee=ee.next=new Ee(it[Le],le[Le]);return ee.next=null,te.next}(le,te),qe);this._root=yt({head:mt},0,Le=this._size+Le)}return this},it.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(it.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(it.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),it.prototype.toString=function(le){void 0===le&&(le=function(Le){return String(Le.key)});var te=[];return ct(this._root,"",!0,function(ee){return te.push(ee)},le),te.join("")},it.prototype.update=function(le,te,ee){var Le=this._comparator,qe=Ie(le,this._root,Le),mt=qe.left,Qt=qe.right;Le(le,te)<0?Qt=Re(te,ee,Qt,Le):mt=Re(te,ee,mt,Le),this._root=function We(it,le,te){return null===le?it:(null===it||((le=ze(it.key,le,te)).left=it),le)}(mt,Qt,Le)},it.prototype.split=function(le){return Ie(le,this._root,this._comparator)},it}();function Gt(it,le,te,ee){var Le=ee-te;if(Le>0){var qe=te+Math.floor(Le/2),Yt=new Ee(it[qe],le[qe]);return Yt.left=Gt(it,le,te,qe),Yt.right=Gt(it,le,qe+1,ee),Yt}return null}function yt(it,le,te){var ee=te-le;if(ee>0){var Le=le+Math.floor(ee/2),qe=yt(it,le,Le),mt=it.head;return mt.left=qe,it.head=it.head.next,mt.right=yt(it,Le+1,te),mt}return null}function Ve(it,le,te,ee,Le){if(!(te>=ee)){for(var qe=it[te+ee>>1],mt=te-1,Qt=ee+1;;){do{mt++}while(Le(it[mt],qe)<0);do{Qt--}while(Le(it[Qt],qe)>0);if(mt>=Qt)break;var Yt=it[mt];it[mt]=it[Qt],it[Qt]=Yt,Yt=le[mt],le[mt]=le[Qt],le[Qt]=Yt}Ve(it,le,te,Qt,Le),Ve(it,le,Qt+1,ee,Le)}}var Ye=function(le,te){return le.ll.x<=te.x&&te.x<=le.ur.x&&le.ll.y<=te.y&&te.y<=le.ur.y},j=function(le,te){return te.ur.x<le.ll.x||le.ur.x<te.ll.x||te.ur.y<le.ll.y||le.ur.y<te.ll.y?null:{ll:{x:le.ll.x<te.ll.x?te.ll.x:le.ll.x,y:le.ll.y<te.ll.y?te.ll.y:le.ll.y},ur:{x:le.ur.x<te.ur.x?le.ur.x:te.ur.x,y:le.ur.y<te.ur.y?le.ur.y:te.ur.y}}},X=Number.EPSILON;void 0===X&&(X=Math.pow(2,-52));var Y=X*X,we=function(le,te){if(-X<le&&le<X&&-X<te&&te<X)return 0;var ee=le-te;return ee*ee<Y*le*te?0:le<te?-1:1},J=function(){function it(){nt(this,it),this.reset()}return ue(it,[{key:"reset",value:function(){this.xRounder=new se,this.yRounder=new se}},{key:"round",value:function(te,ee){return{x:this.xRounder.round(te),y:this.yRounder.round(ee)}}}]),it}(),se=function(){function it(){nt(this,it),this.tree=new ft,this.round(0)}return ue(it,[{key:"round",value:function(te){var ee=this.tree.add(te),Le=this.tree.prev(ee);if(null!==Le&&0===we(ee.key,Le.key))return this.tree.remove(te),Le.key;var qe=this.tree.next(ee);return null!==qe&&0===we(ee.key,qe.key)?(this.tree.remove(te),qe.key):te}}]),it}(),ce=new J,$=function(le,te){return le.x*te.y-le.y*te.x},je=function(le,te){return le.x*te.x+le.y*te.y},Be=function(le,te,ee){var mt=$({x:te.x-le.x,y:te.y-le.y},{x:ee.x-le.x,y:ee.y-le.y});return we(mt,0)},He=function(le){return Math.sqrt(je(le,le))},oe=function(le,te,ee){var Le={x:te.x-le.x,y:te.y-le.y},qe={x:ee.x-le.x,y:ee.y-le.y};return $(qe,Le)/He(qe)/He(Le)},Pt=function(le,te,ee){var Le={x:te.x-le.x,y:te.y-le.y},qe={x:ee.x-le.x,y:ee.y-le.y};return je(qe,Le)/He(qe)/He(Le)},At=function(le,te,ee){return 0===te.y?null:{x:le.x+te.x/te.y*(ee-le.y),y:ee}},xe=function(le,te,ee){return 0===te.x?null:{x:ee,y:le.y+te.y/te.x*(ee-le.x)}},be=function(){function it(le,te){nt(this,it),void 0===le.events?le.events=[this]:le.events.push(this),this.point=le,this.isLeft=te}return ue(it,null,[{key:"compare",value:function(te,ee){var Le=it.comparePoints(te.point,ee.point);return 0!==Le?Le:(te.point!==ee.point&&te.link(ee),te.isLeft!==ee.isLeft?te.isLeft?1:-1:rt.compare(te.segment,ee.segment))}},{key:"comparePoints",value:function(te,ee){return te.x<ee.x?-1:te.x>ee.x?1:te.y<ee.y?-1:te.y>ee.y?1:0}}]),ue(it,[{key:"link",value:function(te){if(te.point===this.point)throw new Error("Tried to link already linked events");for(var ee=te.point.events,Le=0,qe=ee.length;Le<qe;Le++){var mt=ee[Le];this.point.events.push(mt),mt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var te=this.point.events.length,ee=0;ee<te;ee++){var Le=this.point.events[ee];if(void 0===Le.segment.consumedBy)for(var qe=ee+1;qe<te;qe++){var mt=this.point.events[qe];void 0===mt.consumedBy&&Le.otherSE.point.events===mt.otherSE.point.events&&Le.segment.consume(mt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var te=[],ee=0,Le=this.point.events.length;ee<Le;ee++){var qe=this.point.events[ee];qe!==this&&!qe.segment.ringOut&&qe.segment.isInResult()&&te.push(qe)}return te}},{key:"getLeftmostComparator",value:function(te){var ee=this,Le=new Map,qe=function(Qt){var Yt=Qt.otherSE;Le.set(Qt,{sine:oe(ee.point,te.point,Yt.point),cosine:Pt(ee.point,te.point,Yt.point)})};return function(mt,Qt){Le.has(mt)||qe(mt),Le.has(Qt)||qe(Qt);var Yt=Le.get(mt),Mt=Yt.sine,bi=Yt.cosine,Hi=Le.get(Qt),yn=Hi.sine,Ri=Hi.cosine;return Mt>=0&&yn>=0?bi<Ri?1:bi>Ri?-1:0:Mt<0&&yn<0?bi<Ri?-1:bi>Ri?1:0:yn<Mt?-1:yn>Mt?1:0}}}]),it}(),Qe=0,rt=function(){function it(le,te,ee,Le){nt(this,it),this.id=++Qe,this.leftSE=le,le.segment=this,le.otherSE=te,this.rightSE=te,te.segment=this,te.otherSE=le,this.rings=ee,this.windings=Le}return ue(it,null,[{key:"compare",value:function(te,ee){var Le=te.leftSE.point.x,qe=ee.leftSE.point.x,mt=te.rightSE.point.x,Qt=ee.rightSE.point.x;if(Qt<Le)return 1;if(mt<qe)return-1;var Yt=te.leftSE.point.y,Mt=ee.leftSE.point.y,bi=te.rightSE.point.y,Hi=ee.rightSE.point.y;if(Le<qe){if(Mt<Yt&&Mt<bi)return 1;if(Mt>Yt&&Mt>bi)return-1;var yn=te.comparePoint(ee.leftSE.point);if(yn<0)return 1;if(yn>0)return-1;var Ri=ee.comparePoint(te.rightSE.point);return 0!==Ri?Ri:-1}if(Le>qe){if(Yt<Mt&&Yt<Hi)return-1;if(Yt>Mt&&Yt>Hi)return 1;var _r=ee.comparePoint(te.leftSE.point);if(0!==_r)return _r;var ur=te.comparePoint(ee.rightSE.point);return ur<0?1:ur>0?-1:1}if(Yt<Mt)return-1;if(Yt>Mt)return 1;if(mt<Qt){var yr=ee.comparePoint(te.rightSE.point);if(0!==yr)return yr}if(mt>Qt){var Ws=te.comparePoint(ee.rightSE.point);if(Ws<0)return 1;if(Ws>0)return-1}if(mt!==Qt){var Ma=bi-Yt,jo=mt-Le,Io=Hi-Mt,Sa=Qt-qe;if(Ma>jo&&Io<Sa)return 1;if(Ma<jo&&Io>Sa)return-1}return mt>Qt?1:mt<Qt||bi<Hi?-1:bi>Hi?1:te.id<ee.id?-1:te.id>ee.id?1:0}}]),ue(it,[{key:"replaceRightSE",value:function(te){this.rightSE=te,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var te=this.leftSE.point.y,ee=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:te<ee?te:ee},ur:{x:this.rightSE.point.x,y:te>ee?te:ee}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(te){return te.x===this.leftSE.point.x&&te.y===this.leftSE.point.y||te.x===this.rightSE.point.x&&te.y===this.rightSE.point.y}},{key:"comparePoint",value:function(te){if(this.isAnEndpoint(te))return 0;var ee=this.leftSE.point,Le=this.rightSE.point,qe=this.vector();if(ee.x===Le.x)return te.x===ee.x?0:te.x<ee.x?1:-1;if(te.x===ee.x+(te.y-ee.y)/qe.y*qe.x)return 0;var Mt=ee.y+(te.x-ee.x)/qe.x*qe.y;return te.y===Mt?0:te.y<Mt?-1:1}},{key:"getIntersection",value:function(te){var ee=this.bbox(),Le=te.bbox(),qe=j(ee,Le);if(null===qe)return null;var mt=this.leftSE.point,Qt=this.rightSE.point,Yt=te.leftSE.point,Mt=te.rightSE.point,bi=Ye(ee,Yt)&&0===this.comparePoint(Yt),Hi=Ye(Le,mt)&&0===te.comparePoint(mt),yn=Ye(ee,Mt)&&0===this.comparePoint(Mt),Ri=Ye(Le,Qt)&&0===te.comparePoint(Qt);if(Hi&&bi)return Ri&&!yn?Qt:!Ri&&yn?Mt:null;if(Hi)return yn&&mt.x===Mt.x&&mt.y===Mt.y?null:mt;if(bi)return Ri&&Qt.x===Yt.x&&Qt.y===Yt.y?null:Yt;if(Ri&&yn)return null;if(Ri)return Qt;if(yn)return Mt;var _r=function(le,te,ee,Le){if(0===te.x)return xe(ee,Le,le.x);if(0===Le.x)return xe(le,te,ee.x);if(0===te.y)return At(ee,Le,le.y);if(0===Le.y)return At(le,te,ee.y);var qe=$(te,Le);if(0==qe)return null;var mt={x:ee.x-le.x,y:ee.y-le.y},Qt=$(mt,te)/qe,Yt=$(mt,Le)/qe;return{x:(le.x+Yt*te.x+(ee.x+Qt*Le.x))/2,y:(le.y+Yt*te.y+(ee.y+Qt*Le.y))/2}}(mt,this.vector(),Yt,te.vector());return null!==_r&&Ye(qe,_r)?ce.round(_r.x,_r.y):null}},{key:"split",value:function(te){var ee=[],Le=void 0!==te.events,qe=new be(te,!0),mt=new be(te,!1),Qt=this.rightSE;this.replaceRightSE(mt),ee.push(mt),ee.push(qe);var Yt=new it(qe,Qt,this.rings.slice(),this.windings.slice());return be.comparePoints(Yt.leftSE.point,Yt.rightSE.point)>0&&Yt.swapEvents(),be.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Le&&(qe.checkForConsuming(),mt.checkForConsuming()),ee}},{key:"swapEvents",value:function(){var te=this.rightSE;this.rightSE=this.leftSE,this.leftSE=te,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var ee=0,Le=this.windings.length;ee<Le;ee++)this.windings[ee]*=-1}},{key:"consume",value:function(te){for(var ee=this,Le=te;ee.consumedBy;)ee=ee.consumedBy;for(;Le.consumedBy;)Le=Le.consumedBy;var qe=it.compare(ee,Le);if(0!==qe){if(qe>0){var mt=ee;ee=Le,Le=mt}if(ee.prev===Le){var Qt=ee;ee=Le,Le=Qt}for(var Yt=0,Mt=Le.rings.length;Yt<Mt;Yt++){var bi=Le.rings[Yt],Hi=Le.windings[Yt],yn=ee.rings.indexOf(bi);-1===yn?(ee.rings.push(bi),ee.windings.push(Hi)):ee.windings[yn]+=Hi}Le.rings=null,Le.windings=null,Le.consumedBy=ee,Le.leftSE.consumedBy=ee.leftSE,Le.rightSE.consumedBy=ee.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var te=this.beforeState();this._afterState={rings:te.rings.slice(0),windings:te.windings.slice(0),multiPolys:[]};for(var ee=this._afterState.rings,Le=this._afterState.windings,qe=this._afterState.multiPolys,mt=0,Qt=this.rings.length;mt<Qt;mt++){var Yt=this.rings[mt],Mt=this.windings[mt],bi=ee.indexOf(Yt);-1===bi?(ee.push(Yt),Le.push(Mt)):Le[bi]+=Mt}for(var Hi=[],yn=[],Ri=0,_r=ee.length;Ri<_r;Ri++)if(0!==Le[Ri]){var ur=ee[Ri],yr=ur.poly;if(-1===yn.indexOf(yr))if(ur.isExterior)Hi.push(yr);else{-1===yn.indexOf(yr)&&yn.push(yr);var Ws=Hi.indexOf(ur.poly);-1!==Ws&&Hi.splice(Ws,1)}}for(var Ma=0,jo=Hi.length;Ma<jo;Ma++){var Io=Hi[Ma].multiPoly;-1===qe.indexOf(Io)&&qe.push(Io)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var te=this.beforeState().multiPolys,ee=this.afterState().multiPolys;switch(on.type){case"union":this._isInResult=0===te.length!=(0===ee.length);break;case"intersection":var mt,Qt;te.length<ee.length?(mt=te.length,Qt=ee.length):(mt=ee.length,Qt=te.length),this._isInResult=Qt===on.numMultiPolys&&mt<Qt;break;case"xor":var Yt=Math.abs(te.length-ee.length);this._isInResult=Yt%2==1;break;case"difference":var Mt=function(Hi){return 1===Hi.length&&Hi[0].isSubject};this._isInResult=Mt(te)!==Mt(ee);break;default:throw new Error("Unrecognized operation type found ".concat(on.type))}return this._isInResult}}],[{key:"fromRing",value:function(te,ee,Le){var qe,mt,Qt,Yt=be.comparePoints(te,ee);if(Yt<0)qe=te,mt=ee,Qt=1;else{if(!(Yt>0))throw new Error("Tried to create degenerate segment at [".concat(te.x,", ").concat(te.y,"]"));qe=ee,mt=te,Qt=-1}return new it(new be(qe,!0),new be(mt,!1),[Le],[Qt])}}]),it}(),_e=function(){function it(le,te,ee){if(nt(this,it),!Array.isArray(le)||0===le.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=te,this.isExterior=ee,this.segments=[],"number"!=typeof le[0][0]||"number"!=typeof le[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Le=ce.round(le[0][0],le[0][1]);this.bbox={ll:{x:Le.x,y:Le.y},ur:{x:Le.x,y:Le.y}};for(var qe=Le,mt=1,Qt=le.length;mt<Qt;mt++){if("number"!=typeof le[mt][0]||"number"!=typeof le[mt][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Yt=ce.round(le[mt][0],le[mt][1]);Yt.x===qe.x&&Yt.y===qe.y||(this.segments.push(rt.fromRing(qe,Yt,this)),Yt.x<this.bbox.ll.x&&(this.bbox.ll.x=Yt.x),Yt.y<this.bbox.ll.y&&(this.bbox.ll.y=Yt.y),Yt.x>this.bbox.ur.x&&(this.bbox.ur.x=Yt.x),Yt.y>this.bbox.ur.y&&(this.bbox.ur.y=Yt.y),qe=Yt)}(Le.x!==qe.x||Le.y!==qe.y)&&this.segments.push(rt.fromRing(qe,Le,this))}return ue(it,[{key:"getSweepEvents",value:function(){for(var te=[],ee=0,Le=this.segments.length;ee<Le;ee++){var qe=this.segments[ee];te.push(qe.leftSE),te.push(qe.rightSE)}return te}}]),it}(),St=function(){function it(le,te){if(nt(this,it),!Array.isArray(le))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new _e(le[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var ee=1,Le=le.length;ee<Le;ee++){var qe=new _e(le[ee],this,!1);qe.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=qe.bbox.ll.x),qe.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=qe.bbox.ll.y),qe.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=qe.bbox.ur.x),qe.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=qe.bbox.ur.y),this.interiorRings.push(qe)}this.multiPoly=te}return ue(it,[{key:"getSweepEvents",value:function(){for(var te=this.exteriorRing.getSweepEvents(),ee=0,Le=this.interiorRings.length;ee<Le;ee++)for(var qe=this.interiorRings[ee].getSweepEvents(),mt=0,Qt=qe.length;mt<Qt;mt++)te.push(qe[mt]);return te}}]),it}(),Je=function(){function it(le,te){if(nt(this,it),!Array.isArray(le))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof le[0][0][0]&&(le=[le])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var ee=0,Le=le.length;ee<Le;ee++){var qe=new St(le[ee],this);qe.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=qe.bbox.ll.x),qe.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=qe.bbox.ll.y),qe.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=qe.bbox.ur.x),qe.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=qe.bbox.ur.y),this.polys.push(qe)}this.isSubject=te}return ue(it,[{key:"getSweepEvents",value:function(){for(var te=[],ee=0,Le=this.polys.length;ee<Le;ee++)for(var qe=this.polys[ee].getSweepEvents(),mt=0,Qt=qe.length;mt<Qt;mt++)te.push(qe[mt]);return te}}]),it}(),nn=function(){function it(le){nt(this,it),this.events=le;for(var te=0,ee=le.length;te<ee;te++)le[te].segment.ringOut=this;this.poly=null}return ue(it,null,[{key:"factory",value:function(te){for(var ee=[],Le=0,qe=te.length;Le<qe;Le++){var mt=te[Le];if(mt.isInResult()&&!mt.ringOut){for(var Qt=null,Yt=mt.leftSE,Mt=mt.rightSE,bi=[Yt],Hi=Yt.point,yn=[];Qt=Yt,bi.push(Yt=Mt),Yt.point!==Hi;)for(;;){var Ri=Yt.getAvailableLinkedEvents();if(0===Ri.length){var _r=bi[0].point,ur=bi[bi.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(_r.x,",")+" ".concat(_r.y,"]. Last matching segment found ends at")+" [".concat(ur.x,", ").concat(ur.y,"]."))}if(1===Ri.length){Mt=Ri[0].otherSE;break}for(var yr=null,Ws=0,Ma=yn.length;Ws<Ma;Ws++)if(yn[Ws].point===Yt.point){yr=Ws;break}if(null===yr){yn.push({index:bi.length,point:Yt.point});var Sa=Yt.getLeftmostComparator(Qt);Mt=Ri.sort(Sa)[0].otherSE;break}var jo=yn.splice(yr)[0],Io=bi.splice(jo.index);Io.unshift(Io[0].otherSE),ee.push(new it(Io.reverse()))}ee.push(new it(bi))}}return ee}}]),ue(it,[{key:"getGeom",value:function(){for(var te=this.events[0].point,ee=[te],Le=1,qe=this.events.length-1;Le<qe;Le++){var mt=this.events[Le].point;0!==Be(mt,te,this.events[Le+1].point)&&(ee.push(mt),te=mt)}if(1===ee.length)return null;0===Be(ee[0],te,ee[1])&&ee.shift(),ee.push(ee[0]);for(var bi=this.isExteriorRing()?1:-1,Hi=this.isExteriorRing()?0:ee.length-1,yn=this.isExteriorRing()?ee.length:-1,Ri=[],_r=Hi;_r!=yn;_r+=bi)Ri.push([ee[_r].x,ee[_r].y]);return Ri}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var te=this.enclosingRing();this._isExteriorRing=!te||!te.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var te=this.events[0],ee=1,Le=this.events.length;ee<Le;ee++){var qe=this.events[ee];be.compare(te,qe)>0&&(te=qe)}for(var mt=te.segment.prevInResult(),Qt=mt?mt.prevInResult():null;;){if(!mt)return null;if(!Qt)return mt.ringOut;if(Qt.ringOut!==mt.ringOut)return Qt.ringOut.enclosingRing()!==mt.ringOut?mt.ringOut:mt.ringOut.enclosingRing();mt=Qt.prevInResult(),Qt=mt?mt.prevInResult():null}}}]),it}(),vt=function(){function it(le){nt(this,it),this.exteriorRing=le,le.poly=this,this.interiorRings=[]}return ue(it,[{key:"addInterior",value:function(te){this.interiorRings.push(te),te.poly=this}},{key:"getGeom",value:function(){var te=[this.exteriorRing.getGeom()];if(null===te[0])return null;for(var ee=0,Le=this.interiorRings.length;ee<Le;ee++){var qe=this.interiorRings[ee].getGeom();null!==qe&&te.push(qe)}return te}}]),it}(),xn=function(){function it(le){nt(this,it),this.rings=le,this.polys=this._composePolys(le)}return ue(it,[{key:"getGeom",value:function(){for(var te=[],ee=0,Le=this.polys.length;ee<Le;ee++){var qe=this.polys[ee].getGeom();null!==qe&&te.push(qe)}return te}},{key:"_composePolys",value:function(te){for(var ee=[],Le=0,qe=te.length;Le<qe;Le++){var mt=te[Le];if(!mt.poly)if(mt.isExteriorRing())ee.push(new vt(mt));else{var Qt=mt.enclosingRing();Qt.poly||ee.push(new vt(Qt)),Qt.poly.addInterior(mt)}}return ee}}]),it}(),_n=function(){function it(le){var te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt.compare;nt(this,it),this.queue=le,this.tree=new ft(te),this.segments=[]}return ue(it,[{key:"process",value:function(te){var ee=te.segment,Le=[];if(te.consumedBy)return te.isLeft?this.queue.remove(te.otherSE):this.tree.remove(ee),Le;var qe=te.isLeft?this.tree.insert(ee):this.tree.find(ee);if(!qe)throw new Error("Unable to find segment #".concat(ee.id," ")+"[".concat(ee.leftSE.point.x,", ").concat(ee.leftSE.point.y,"] -> ")+"[".concat(ee.rightSE.point.x,", ").concat(ee.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var mt=qe,Qt=qe,Yt=void 0,Mt=void 0;void 0===Yt;)null===(mt=this.tree.prev(mt))?Yt=null:void 0===mt.key.consumedBy&&(Yt=mt.key);for(;void 0===Mt;)null===(Qt=this.tree.next(Qt))?Mt=null:void 0===Qt.key.consumedBy&&(Mt=Qt.key);if(te.isLeft){var bi=null;if(Yt){var Hi=Yt.getIntersection(ee);if(null!==Hi&&(ee.isAnEndpoint(Hi)||(bi=Hi),!Yt.isAnEndpoint(Hi)))for(var yn=this._splitSafely(Yt,Hi),Ri=0,_r=yn.length;Ri<_r;Ri++)Le.push(yn[Ri])}var ur=null;if(Mt){var yr=Mt.getIntersection(ee);if(null!==yr&&(ee.isAnEndpoint(yr)||(ur=yr),!Mt.isAnEndpoint(yr)))for(var Ws=this._splitSafely(Mt,yr),Ma=0,jo=Ws.length;Ma<jo;Ma++)Le.push(Ws[Ma])}if(null!==bi||null!==ur){var Io;Io=null===bi?ur:null===ur||be.comparePoints(bi,ur)<=0?bi:ur,this.queue.remove(ee.rightSE),Le.push(ee.rightSE);for(var Cs=ee.split(Io),q1=0,$o=Cs.length;q1<$o;q1++)Le.push(Cs[q1])}Le.length>0?(this.tree.remove(ee),Le.push(te)):(this.segments.push(ee),ee.prev=Yt)}else{if(Yt&&Mt){var rn=Yt.getIntersection(Mt);if(null!==rn){if(!Yt.isAnEndpoint(rn))for(var O2=this._splitSafely(Yt,rn),uc=0,Fi=O2.length;uc<Fi;uc++)Le.push(O2[uc]);if(!Mt.isAnEndpoint(rn))for(var Jc=this._splitSafely(Mt,rn),po=0,gl=Jc.length;po<gl;po++)Le.push(Jc[po])}}this.tree.remove(ee)}return Le}},{key:"_splitSafely",value:function(te,ee){this.tree.remove(te);var Le=te.rightSE;this.queue.remove(Le);var qe=te.split(ee);return qe.push(Le),void 0===te.consumedBy&&this.tree.insert(te),qe}}]),it}(),li=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,qt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,on=new(function(){function it(){nt(this,it)}return ue(it,[{key:"run",value:function(te,ee,Le){on.type=te,ce.reset();for(var qe=[new Je(ee,!0)],mt=0,Qt=Le.length;mt<Qt;mt++)qe.push(new Je(Le[mt],!1));if(on.numMultiPolys=qe.length,"difference"===on.type)for(var Yt=qe[0],Mt=1;Mt<qe.length;)null!==j(qe[Mt].bbox,Yt.bbox)?Mt++:qe.splice(Mt,1);if("intersection"===on.type)for(var bi=0,Hi=qe.length;bi<Hi;bi++)for(var yn=qe[bi],Ri=bi+1,_r=qe.length;Ri<_r;Ri++)if(null===j(yn.bbox,qe[Ri].bbox))return[];for(var ur=new ft(be.compare),yr=0,Ws=qe.length;yr<Ws;yr++)for(var Ma=qe[yr].getSweepEvents(),jo=0,Io=Ma.length;jo<Io;jo++)if(ur.insert(Ma[jo]),ur.size>li)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Sa=new _n(ur),Cs=ur.size,q1=ur.pop();q1;){var $o=q1.key;if(ur.size===Cs){var rn=$o.segment;throw new Error("Unable to pop() ".concat($o.isLeft?"left":"right"," SweepEvent ")+"[".concat($o.point.x,", ").concat($o.point.y,"] from segment #").concat(rn.id," ")+"[".concat(rn.leftSE.point.x,", ").concat(rn.leftSE.point.y,"] -> ")+"[".concat(rn.rightSE.point.x,", ").concat(rn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(ur.size>li)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Sa.segments.length>qt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var O2=Sa.process($o),uc=0,Fi=O2.length;uc<Fi;uc++){var Jc=O2[uc];void 0===Jc.consumedBy&&ur.insert(Jc)}Cs=ur.size,q1=ur.pop()}ce.reset();var po=nn.factory(Sa.segments);return new xn(po).getGeom()}}]),it}());return{union:function(le){for(var te=arguments.length,ee=new Array(te>1?te-1:0),Le=1;Le<te;Le++)ee[Le-1]=arguments[Le];return on.run("union",le,ee)},intersection:function(le){for(var te=arguments.length,ee=new Array(te>1?te-1:0),Le=1;Le<te;Le++)ee[Le-1]=arguments[Le];return on.run("intersection",le,ee)},xor:function(le){for(var te=arguments.length,ee=new Array(te>1?te-1:0),Le=1;Le<te;Le++)ee[Le-1]=arguments[Le];return on.run("xor",le,ee)},difference:function(le){for(var te=arguments.length,ee=new Array(te>1?te-1:0),Le=1;Le<te;Le++)ee[Le-1]=arguments[Le];return on.run("difference",le,ee)}}}()},2402:function(Ut){Ut.exports=function(){"use strict";function nt(Ve,Ye,j,X,Y){!function we(J,se,ce,$,je){for(;$>ce;){if($-ce>600){var Be=$-ce+1,He=se-ce+1,oe=Math.log(Be),Pt=.5*Math.exp(2*oe/3),At=.5*Math.sqrt(oe*Pt*(Be-Pt)/Be)*(He-Be/2<0?-1:1);we(J,se,Math.max(ce,Math.floor(se-He*Pt/Be+At)),Math.min($,Math.floor(se+(Be-He)*Pt/Be+At)),je)}var be=J[se],Qe=ce,rt=$;for(Se(J,ce,se),je(J[$],be)>0&&Se(J,ce,$);Qe<rt;){for(Se(J,Qe,rt),Qe++,rt--;je(J[Qe],be)<0;)Qe++;for(;je(J[rt],be)>0;)rt--}0===je(J[ce],be)?Se(J,ce,rt):Se(J,++rt,$),rt<=se&&(ce=rt+1),se<=rt&&($=rt-1)}}(Ve,Ye,j||0,X||Ve.length-1,Y||ue)}function Se(Ve,Ye,j){var X=Ve[Ye];Ve[Ye]=Ve[j],Ve[j]=X}function ue(Ve,Ye){return Ve<Ye?-1:Ve>Ye?1:0}var Ee=function(Ve){void 0===Ve&&(Ve=9),this._maxEntries=Math.max(4,Ve),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Ne(Ve,Ye,j){if(!j)return Ye.indexOf(Ve);for(var X=0;X<Ye.length;X++)if(j(Ve,Ye[X]))return X;return-1}function ze(Ve,Ye){Re(Ve,0,Ve.children.length,Ye,Ve)}function Re(Ve,Ye,j,X,Y){Y||(Y=yt(null)),Y.minX=1/0,Y.minY=1/0,Y.maxX=-1/0,Y.maxY=-1/0;for(var we=Ye;we<j;we++){var J=Ve.children[we];Ie(Y,Ve.leaf?X(J):J)}return Y}function Ie(Ve,Ye){return Ve.minX=Math.min(Ve.minX,Ye.minX),Ve.minY=Math.min(Ve.minY,Ye.minY),Ve.maxX=Math.max(Ve.maxX,Ye.maxX),Ve.maxY=Math.max(Ve.maxY,Ye.maxY),Ve}function We(Ve,Ye){return Ve.minX-Ye.minX}function ct(Ve,Ye){return Ve.minY-Ye.minY}function ft(Ve){return(Ve.maxX-Ve.minX)*(Ve.maxY-Ve.minY)}function Gt(Ve){return Ve.maxX-Ve.minX+(Ve.maxY-Ve.minY)}function Ct(Ve,Ye){return Ve.minX<=Ye.minX&&Ve.minY<=Ye.minY&&Ye.maxX<=Ve.maxX&&Ye.maxY<=Ve.maxY}function st(Ve,Ye){return Ye.minX<=Ve.maxX&&Ye.minY<=Ve.maxY&&Ye.maxX>=Ve.minX&&Ye.maxY>=Ve.minY}function yt(Ve){return{children:Ve,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Xt(Ve,Ye,j,X,Y){for(var we=[Ye,j];we.length;)if(!((j=we.pop())-(Ye=we.pop())<=X)){var J=Ye+Math.ceil((j-Ye)/X/2)*X;nt(Ve,J,Ye,j,Y),we.push(Ye,J,J,j)}}return Ee.prototype.all=function(){return this._all(this.data,[])},Ee.prototype.search=function(Ve){var Ye=this.data,j=[];if(!st(Ve,Ye))return j;for(var X=this.toBBox,Y=[];Ye;){for(var we=0;we<Ye.children.length;we++){var J=Ye.children[we],se=Ye.leaf?X(J):J;st(Ve,se)&&(Ye.leaf?j.push(J):Ct(Ve,se)?this._all(J,j):Y.push(J))}Ye=Y.pop()}return j},Ee.prototype.collides=function(Ve){var Ye=this.data;if(!st(Ve,Ye))return!1;for(var j=[];Ye;){for(var X=0;X<Ye.children.length;X++){var Y=Ye.children[X],we=Ye.leaf?this.toBBox(Y):Y;if(st(Ve,we)){if(Ye.leaf||Ct(Ve,we))return!0;j.push(Y)}}Ye=j.pop()}return!1},Ee.prototype.load=function(Ve){if(!Ve||!Ve.length)return this;if(Ve.length<this._minEntries){for(var Ye=0;Ye<Ve.length;Ye++)this.insert(Ve[Ye]);return this}var j=this._build(Ve.slice(),0,Ve.length-1,0);if(this.data.children.length)if(this.data.height===j.height)this._splitRoot(this.data,j);else{if(this.data.height<j.height){var X=this.data;this.data=j,j=X}this._insert(j,this.data.height-j.height-1,!0)}else this.data=j;return this},Ee.prototype.insert=function(Ve){return Ve&&this._insert(Ve,this.data.height-1),this},Ee.prototype.clear=function(){return this.data=yt([]),this},Ee.prototype.remove=function(Ve,Ye){if(!Ve)return this;for(var j,X,Y,we=this.data,J=this.toBBox(Ve),se=[],ce=[];we||se.length;){if(we||(we=se.pop(),X=se[se.length-1],j=ce.pop(),Y=!0),we.leaf){var $=Ne(Ve,we.children,Ye);if(-1!==$)return we.children.splice($,1),se.push(we),this._condense(se),this}Y||we.leaf||!Ct(we,J)?X?(j++,we=X.children[j],Y=!1):we=null:(se.push(we),ce.push(j),j=0,X=we,we=we.children[0])}return this},Ee.prototype.toBBox=function(Ve){return Ve},Ee.prototype.compareMinX=function(Ve,Ye){return Ve.minX-Ye.minX},Ee.prototype.compareMinY=function(Ve,Ye){return Ve.minY-Ye.minY},Ee.prototype.toJSON=function(){return this.data},Ee.prototype.fromJSON=function(Ve){return this.data=Ve,this},Ee.prototype._all=function(Ve,Ye){for(var j=[];Ve;)Ve.leaf?Ye.push.apply(Ye,Ve.children):j.push.apply(j,Ve.children),Ve=j.pop();return Ye},Ee.prototype._build=function(Ve,Ye,j,X){var Y,we=j-Ye+1,J=this._maxEntries;if(we<=J)return ze(Y=yt(Ve.slice(Ye,j+1)),this.toBBox),Y;X||(X=Math.ceil(Math.log(we)/Math.log(J)),J=Math.ceil(we/Math.pow(J,X-1))),(Y=yt([])).leaf=!1,Y.height=X;var se=Math.ceil(we/J),ce=se*Math.ceil(Math.sqrt(J));Xt(Ve,Ye,j,ce,this.compareMinX);for(var $=Ye;$<=j;$+=ce){var je=Math.min($+ce-1,j);Xt(Ve,$,je,se,this.compareMinY);for(var Be=$;Be<=je;Be+=se){var He=Math.min(Be+se-1,je);Y.children.push(this._build(Ve,Be,He,X-1))}}return ze(Y,this.toBBox),Y},Ee.prototype._chooseSubtree=function(Ve,Ye,j,X){for(;X.push(Ye),!Ye.leaf&&X.length-1!==j;){for(var Y=1/0,we=1/0,J=void 0,se=0;se<Ye.children.length;se++){var ce=Ye.children[se],$=ft(ce),je=(Be=Ve,He=ce,(Math.max(He.maxX,Be.maxX)-Math.min(He.minX,Be.minX))*(Math.max(He.maxY,Be.maxY)-Math.min(He.minY,Be.minY))-$);je<we?(we=je,Y=$<Y?$:Y,J=ce):je===we&&$<Y&&(Y=$,J=ce)}Ye=J||Ye.children[0]}var Be,He;return Ye},Ee.prototype._insert=function(Ve,Ye,j){var X=j?Ve:this.toBBox(Ve),Y=[],we=this._chooseSubtree(X,this.data,Ye,Y);for(we.children.push(Ve),Ie(we,X);Ye>=0&&Y[Ye].children.length>this._maxEntries;)this._split(Y,Ye),Ye--;this._adjustParentBBoxes(X,Y,Ye)},Ee.prototype._split=function(Ve,Ye){var j=Ve[Ye],X=j.children.length,Y=this._minEntries;this._chooseSplitAxis(j,Y,X);var we=this._chooseSplitIndex(j,Y,X),J=yt(j.children.splice(we,j.children.length-we));J.height=j.height,J.leaf=j.leaf,ze(j,this.toBBox),ze(J,this.toBBox),Ye?Ve[Ye-1].children.push(J):this._splitRoot(j,J)},Ee.prototype._splitRoot=function(Ve,Ye){this.data=yt([Ve,Ye]),this.data.height=Ve.height+1,this.data.leaf=!1,ze(this.data,this.toBBox)},Ee.prototype._chooseSplitIndex=function(Ve,Ye,j){for(var X,Y,we,J,se,ce,$,je=1/0,Be=1/0,He=Ye;He<=j-Ye;He++){var oe=Re(Ve,0,He,this.toBBox),Pt=Re(Ve,He,j,this.toBBox),At=(Y=oe,we=Pt,void 0,void 0,void 0,void 0,J=Math.max(Y.minX,we.minX),se=Math.max(Y.minY,we.minY),ce=Math.min(Y.maxX,we.maxX),$=Math.min(Y.maxY,we.maxY),Math.max(0,ce-J)*Math.max(0,$-se)),xe=ft(oe)+ft(Pt);At<je?(je=At,X=He,Be=xe<Be?xe:Be):At===je&&xe<Be&&(Be=xe,X=He)}return X||j-Ye},Ee.prototype._chooseSplitAxis=function(Ve,Ye,j){var X=Ve.leaf?this.compareMinX:We,Y=Ve.leaf?this.compareMinY:ct;this._allDistMargin(Ve,Ye,j,X)<this._allDistMargin(Ve,Ye,j,Y)&&Ve.children.sort(X)},Ee.prototype._allDistMargin=function(Ve,Ye,j,X){Ve.children.sort(X);for(var Y=this.toBBox,we=Re(Ve,0,Ye,Y),J=Re(Ve,j-Ye,j,Y),se=Gt(we)+Gt(J),ce=Ye;ce<j-Ye;ce++){var $=Ve.children[ce];Ie(we,Ve.leaf?Y($):$),se+=Gt(we)}for(var je=j-Ye-1;je>=Ye;je--){var Be=Ve.children[je];Ie(J,Ve.leaf?Y(Be):Be),se+=Gt(J)}return se},Ee.prototype._adjustParentBBoxes=function(Ve,Ye,j){for(var X=j;X>=0;X--)Ie(Ye[X],Ve)},Ee.prototype._condense=function(Ve){for(var Ye=Ve.length-1,j=void 0;Ye>=0;Ye--)0===Ve[Ye].children.length?Ye>0?(j=Ve[Ye-1].children).splice(j.indexOf(Ve[Ye]),1):this.clear():ze(Ve[Ye],this.toBBox)},Ee}()},4468:(Ut,nt,Se)=>{"use strict";var ue=Se(9582).functionsHaveConfigurableNames(),Ee=Object,Ne=TypeError;Ut.exports=function(){if(null!=this&&this!==Ee(this))throw new Ne("RegExp.prototype.flags getter called on non-object");var Re="";return this.hasIndices&&(Re+="d"),this.global&&(Re+="g"),this.ignoreCase&&(Re+="i"),this.multiline&&(Re+="m"),this.dotAll&&(Re+="s"),this.unicode&&(Re+="u"),this.sticky&&(Re+="y"),Re},ue&&Object.defineProperty&&Object.defineProperty(Ut.exports,"name",{value:"get flags"})},9235:(Ut,nt,Se)=>{"use strict";var ue=Se(2358),Ee=Se(5685),Ne=Se(4468),ze=Se(6343),Re=Se(1956),Ie=Ee(ze());ue(Ie,{getPolyfill:ze,implementation:Ne,shim:Re}),Ut.exports=Ie},6343:(Ut,nt,Se)=>{"use strict";var ue=Se(4468),Ee=Se(2358).supportsDescriptors,Ne=Object.getOwnPropertyDescriptor;Ut.exports=function(){if(Ee&&"gim"===/a/gim.flags){var Re=Ne(RegExp.prototype,"flags");if(Re&&"function"==typeof Re.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var Ie="",We={};if(Object.defineProperty(We,"hasIndices",{get:function(){Ie+="d"}}),Object.defineProperty(We,"sticky",{get:function(){Ie+="y"}}),"dy"===Ie)return Re.get}}return ue}},1956:(Ut,nt,Se)=>{"use strict";var ue=Se(2358).supportsDescriptors,Ee=Se(6343),Ne=Object.getOwnPropertyDescriptor,ze=Object.defineProperty,Re=TypeError,Ie=Object.getPrototypeOf,We=/a/;Ut.exports=function(){if(!ue||!Ie)throw new Re("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var ft=Ee(),Gt=Ie(We),Ct=Ne(Gt,"flags");return(!Ct||Ct.get!==ft)&&ze(Gt,"flags",{configurable:!0,enumerable:!1,get:ft}),ft}},9231:Ut=>{"use strict";Ut.exports={eudist:function(Se,ue,Ee){for(var Ne=Se.length,ze=0,Re=0;Re<Ne;Re++){var Ie=(Se[Re]||0)-(ue[Re]||0);ze+=Ie*Ie}return Ee?Math.sqrt(ze):ze},mandist:function(Se,ue,Ee){for(var Ne=Se.length,ze=0,Re=0;Re<Ne;Re++)ze+=Math.abs((Se[Re]||0)-(ue[Re]||0));return Ee?Math.sqrt(ze):ze},dist:function(Se,ue,Ee){var Ne=Math.abs(Se-ue);return Ee?Ne:Ne*Ne}}},5561:(Ut,nt,Se)=>{"use strict";var ue=Se(9231),Ee=ue.eudist,Ne=ue.dist;Ut.exports={kmrand:function(Re,Ie){for(var We={},ct=[],ft=Ie<<2,Gt=Re.length,Ct=Re[0].length>0;ct.length<Ie&&ft-- >0;){var st=Re[Math.floor(Math.random()*Gt)],yt=Ct?st.join("_"):""+st;We[yt]||(We[yt]=!0,ct.push(st))}if(ct.length<Ie)throw new Error("Error initializating clusters");return ct},kmpp:function(Re,Ie){var We=Re[0].length?Ee:Ne,ct=[],ft=Re.length,Gt=Re[0].length>0,st=Re[Math.floor(Math.random()*ft)];for(Gt&&st.join("_"),ct.push(st);ct.length<Ie;){for(var Xt=[],Ve=ct.length,Ye=0,j=[],X=0;X<ft;X++){for(var Y=1/0,we=0;we<Ve;we++){var J=We(Re[X],ct[we]);J<=Y&&(Y=J)}Xt[X]=Y}for(var se=0;se<ft;se++)Ye+=Xt[se];for(var ce=0;ce<ft;ce++)j[ce]={i:ce,v:Re[ce],pr:Xt[ce]/Ye,cs:0};j.sort(function(He,oe){return He.pr-oe.pr}),j[0].cs=j[0].pr;for(var $=1;$<ft;$++)j[$].cs=j[$-1].cs+j[$].pr;for(var je=Math.random(),Be=0;Be<ft-1&&j[Be++].cs<je;);ct.push(j[Be-1].v)}return ct}}},9475:(Ut,nt,Se)=>{"use strict";var ue=Se(9231),Ee=Se(5561),Ne=ue.eudist,Ie=Ee.kmrand,We=Ee.kmpp;function ft(Ct,st,yt){yt=yt||[];for(var Xt=0;Xt<Ct;Xt++)yt[Xt]=st;return yt}Ut.exports=function Gt(Ct,st,yt,Xt){var Ve=[],Ye=[],j=[],X=[],Y=!1,we=Xt||1e4,J=Ct.length,se=Ct[0].length,ce=se>0,$=[];if(yt)Ve="kmrand"==yt?Ie(Ct,st):"kmpp"==yt?We(Ct,st):yt;else for(var je={};Ve.length<st;){var Be=Math.floor(Math.random()*J);je[Be]||(je[Be]=!0,Ve.push(Ct[Be]))}do{ft(st,0,$);for(var He=0;He<J;He++){for(var oe=1/0,Pt=0,At=0;At<st;At++)(X=ce?Ne(Ct[He],Ve[At]):Math.abs(Ct[He]-Ve[At]))<=oe&&(oe=X,Pt=At);j[He]=Pt,$[Pt]++}for(var xe=[],be=(Ye=[],0);be<st;be++)xe[be]=ce?ft(se,0,xe[be]):0,Ye[be]=Ve[be];if(ce){for(var Qe=0;Qe<st;Qe++)Ve[Qe]=[];for(var rt=0;rt<J;rt++)for(var St=xe[j[rt]],Je=Ct[rt],nn=0;nn<se;nn++)St[nn]+=Je[nn];Y=!0;for(var vt=0;vt<st;vt++){for(var xn=Ve[vt],_n=xe[vt],li=Ye[vt],qt=$[vt],$n=0;$n<se;$n++)xn[$n]=_n[$n]/qt||0;if(Y)for(var on=0;on<se;on++)if(li[on]!=xn[on]){Y=!1;break}}}else{for(var Fs=0;Fs<J;Fs++)xe[j[Fs]]+=Ct[Fs];for(var Zs=0;Zs<st;Zs++)Ve[Zs]=xe[Zs]/$[Zs]||0;Y=!0;for(var gi=0;gi<st;gi++)if(Ye[gi]!=Ve[gi]){Y=!1;break}}Y=Y||--we<=0}while(!Y);return{it:1e4-we,k:st,idxs:j,centroids:Ve}}},7253:(Ut,nt,Se)=>{"use strict";Se.r(nt),Se.d(nt,{default:()=>ue});class ue{constructor(ze=[],Re=Ee){if(this.data=ze,this.length=this.data.length,this.compare=Re,this.length>0)for(let Ie=(this.length>>1)-1;Ie>=0;Ie--)this._down(Ie)}push(ze){this.data.push(ze),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const ze=this.data[0],Re=this.data.pop();return this.length--,this.length>0&&(this.data[0]=Re,this._down(0)),ze}peek(){return this.data[0]}_up(ze){const{data:Re,compare:Ie}=this,We=Re[ze];for(;ze>0;){const ct=ze-1>>1,ft=Re[ct];if(Ie(We,ft)>=0)break;Re[ze]=ft,ze=ct}Re[ze]=We}_down(ze){const{data:Re,compare:Ie}=this,We=this.length>>1,ct=Re[ze];for(;ze<We;){let ft=1+(ze<<1),Gt=Re[ft];const Ct=ft+1;if(Ct<this.length&&Ie(Re[Ct],Gt)<0&&(ft=Ct,Gt=Re[Ct]),Ie(Gt,ct)>=0)break;Re[ze]=Gt,ze=ft}Re[ze]=ct}}function Ee(Ne,ze){return Ne<ze?-1:Ne>ze?1:0}},770:function(Ut,nt){!function(Se){"use strict";function ue(){}function Ee(h){this.message=h||""}function Ne(h){this.message=h||""}function ze(h){this.message=h||""}function Re(){}function Ie(h){return null===h?_2:h.color}function We(h){return null===h?null:h.parent}function ct(h,d){null!==h&&(h.color=d)}function ft(h){return null===h?null:h.left}function Gt(h){return null===h?null:h.right}function Ct(){this.root_=null,this.size_=0}function st(){}function yt(){this.array_=[],arguments[0]instanceof Cs&&this.addAll(arguments[0])}function Xt(){}function Ve(h){this.message=h||""}function Ye(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(h){if(null==this)throw new TypeError(this+" is not an object");var d=Object(this),m=Math.max(Math.min(d.length,9007199254740991),0)||0,v=1 in arguments&&parseInt(Number(arguments[1]),10)||0;v=v<0?Math.max(m+v,0):Math.min(v,m);var b=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:m;for(b=b<0?Math.max(m+arguments[2],0):Math.min(b,m);v<b;)d[v]=h,++v;return d},writable:!0}),Number.isFinite=Number.isFinite||function(h){return"number"==typeof h&&isFinite(h)},Number.isInteger=Number.isInteger||function(h){return"number"==typeof h&&isFinite(h)&&Math.floor(h)===h},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(h){return h!=h},Math.trunc=Math.trunc||function(h){return h<0?Math.ceil(h):Math.floor(h)};var j=function(){};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.prototype.equalsWithTolerance=function(h,d,m){return Math.abs(h-d)<=m};var X=function(h){function d(m){h.call(this,m),this.name="IllegalArgumentException",this.message=m,this.stack=(new h).stack}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(Error),Y=function(){},we={MAX_VALUE:{configurable:!0}};Y.isNaN=function(h){return Number.isNaN(h)},Y.doubleToLongBits=function(h){return h},Y.longBitsToDouble=function(h){return h},Y.isInfinite=function(h){return!Number.isFinite(h)},we.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Y,we);var J=function(){},se=function(){},ce=function(){},$=function h(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=h.NULL_ORDINATE;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.z=d.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=h.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},je={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};$.prototype.setOrdinate=function(h,d){switch(h){case $.X:this.x=d;break;case $.Y:this.y=d;break;case $.Z:this.z=d;break;default:throw new X("Invalid ordinate index: "+h)}},$.prototype.equals2D=function(){if(1===arguments.length){var h=arguments[0];return this.x===h.x&&this.y===h.y}if(2===arguments.length){var d=arguments[0],m=arguments[1];return!!j.equalsWithTolerance(this.x,d.x,m)&&!!j.equalsWithTolerance(this.y,d.y,m)}},$.prototype.getOrdinate=function(h){switch(h){case $.X:return this.x;case $.Y:return this.y;case $.Z:return this.z}throw new X("Invalid ordinate index: "+h)},$.prototype.equals3D=function(h){return this.x===h.x&&this.y===h.y&&(this.z===h.z||Y.isNaN(this.z))&&Y.isNaN(h.z)},$.prototype.equals=function(h){return h instanceof $&&this.equals2D(h)},$.prototype.equalInZ=function(h,d){return j.equalsWithTolerance(this.z,h.z,d)},$.prototype.compareTo=function(h){return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0},$.prototype.clone=function(){},$.prototype.copy=function(){return new $(this)},$.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},$.prototype.distance3D=function(h){var d=this.x-h.x,m=this.y-h.y,v=this.z-h.z;return Math.sqrt(d*d+m*m+v*v)},$.prototype.distance=function(h){var d=this.x-h.x,m=this.y-h.y;return Math.sqrt(d*d+m*m)},$.prototype.hashCode=function(){var h=17;return 37*(h=37*h+$.hashCode(this.x))+$.hashCode(this.y)},$.prototype.setCoordinate=function(h){this.x=h.x,this.y=h.y,this.z=h.z},$.prototype.interfaces_=function(){return[J,se,ue]},$.prototype.getClass=function(){return $},$.hashCode=function(){if(1===arguments.length){var d=Y.doubleToLongBits(arguments[0]);return Math.trunc((d^d)>>>32)}},je.DimensionalComparator.get=function(){return Be},je.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},je.NULL_ORDINATE.get=function(){return Y.NaN},je.X.get=function(){return 0},je.Y.get=function(){return 1},je.Z.get=function(){return 2},Object.defineProperties($,je);var Be=function(h){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var d=arguments[0];if(2!==d&&3!==d)throw new X("only 2 or 3 dimensions may be specified");this._dimensionsToTest=d}};Be.prototype.compare=function(h,d){var m=h,v=d,b=Be.compare(m.x,v.x);if(0!==b)return b;var B=Be.compare(m.y,v.y);return 0!==B?B:this._dimensionsToTest<=2?0:Be.compare(m.z,v.z)},Be.prototype.interfaces_=function(){return[ce]},Be.prototype.getClass=function(){return Be},Be.compare=function(h,d){return h<d?-1:h>d?1:Y.isNaN(h)?Y.isNaN(d)?0:-1:Y.isNaN(d)?1:0};var He=function(){};He.prototype.create=function(){},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var oe=function(){},Pt={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.toLocationSymbol=function(h){switch(h){case oe.EXTERIOR:return"e";case oe.BOUNDARY:return"b";case oe.INTERIOR:return"i";case oe.NONE:return"-"}throw new X("Unknown location value: "+h)},Pt.INTERIOR.get=function(){return 0},Pt.BOUNDARY.get=function(){return 1},Pt.EXTERIOR.get=function(){return 2},Pt.NONE.get=function(){return-1},Object.defineProperties(oe,Pt);var At=function(h,d){return h.interfaces_&&h.interfaces_().indexOf(d)>-1},xe=function(){},Ke={LOG_10:{configurable:!0}};xe.prototype.interfaces_=function(){return[]},xe.prototype.getClass=function(){return xe},xe.log10=function(h){var d=Math.log(h);return Y.isInfinite(d)||Y.isNaN(d)?d:d/xe.LOG_10},xe.min=function(h,d,m,v){var b=h;return d<b&&(b=d),m<b&&(b=m),v<b&&(b=v),b},xe.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1],m=arguments[2];return h<d?d:h>m?m:h}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var v=arguments[0],b=arguments[1],B=arguments[2];return v<b?b:v>B?B:v}},xe.wrap=function(h,d){return h<0?d- -h%d:h%d},xe.max=function(){if(3===arguments.length){var d=arguments[1],m=arguments[2],v=arguments[0];return d>v&&(v=d),m>v&&(v=m),v}if(4===arguments.length){var B=arguments[1],z=arguments[2],q=arguments[3],pe=arguments[0];return B>pe&&(pe=B),z>pe&&(pe=z),q>pe&&(pe=q),pe}},xe.average=function(h,d){return(h+d)/2},Ke.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(xe,Ke);var be=function(h){this.str=h};be.prototype.append=function(h){this.str+=h},be.prototype.setCharAt=function(h,d){this.str=this.str.substr(0,h)+d+this.str.substr(h+1)},be.prototype.toString=function(h){return this.str};var Qe=function(h){this.value=h};Qe.prototype.intValue=function(){return this.value},Qe.prototype.compareTo=function(h){return this.value<h?-1:this.value>h?1:0},Qe.isNaN=function(h){return Number.isNaN(h)};var rt=function(){};rt.isWhitespace=function(h){return h<=32&&h>=0||127===h},rt.toUpperCase=function(h){return h.toUpperCase()};var _e=function h(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof h?this.init(arguments[0]):"string"==typeof arguments[0]&&h.call(this,h.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},St={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};_e.prototype.le=function(h){return(this._hi<h._hi||this._hi===h._hi)&&this._lo<=h._lo},_e.prototype.extractSignificantDigits=function(h,d){var m=this.abs(),v=_e.magnitude(m._hi),b=_e.TEN.pow(v);(m=m.divide(b)).gt(_e.TEN)?(m=m.divide(_e.TEN),v+=1):m.lt(_e.ONE)&&(m=m.multiply(_e.TEN),v-=1);for(var B=v+1,z=new be,q=_e.MAX_PRINT_DIGITS-1,pe=0;pe<=q;pe++){h&&pe===B&&z.append(".");var Ue=Math.trunc(m._hi);if(Ue<0)break;var gt=!1,pt=0;Ue>9?(gt=!0,pt="9"):pt="0"+Ue,z.append(pt),m=m.subtract(_e.valueOf(Ue)).multiply(_e.TEN),gt&&m.selfAdd(_e.TEN);var fn=!0,Mn=_e.magnitude(m._hi);if(Mn<0&&Math.abs(Mn)>=q-pe&&(fn=!1),!fn)break}return d[0]=v,z.toString()},_e.prototype.sqr=function(){return this.multiply(this)},_e.prototype.doubleValue=function(){return this._hi+this._lo},_e.prototype.subtract=function(){return arguments[0]instanceof _e?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},_e.prototype.equals=function(){if(1===arguments.length){var h=arguments[0];return this._hi===h._hi&&this._lo===h._lo}},_e.prototype.isZero=function(){return 0===this._hi&&0===this._lo},_e.prototype.selfSubtract=function(){if(arguments[0]instanceof _e){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h._hi,-h._lo)}if("number"==typeof arguments[0]){var d=arguments[0];return this.isNaN()?this:this.selfAdd(-d,0)}},_e.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},_e.prototype.min=function(h){return this.le(h)?this:h},_e.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof _e){var h=arguments[0];return this.selfDivide(h._hi,h._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],b=null,B=null,z=null,q=null,pe=null,Ue=null,gt=null,pt=null;return this._hi=pt=(pe=this._hi/m)+(Ue=(this._hi-(gt=pe*m)-(pt=(b=(Ue=_e.SPLIT*pe)-(b=Ue-pe))*(z=(pt=_e.SPLIT*m)-(z=pt-m))-gt+b*(q=m-z)+(B=pe-b)*z+B*q)+this._lo-pe*arguments[1])/m),this._lo=pe-pt+Ue,this}},_e.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},_e.prototype.divide=function(){if(arguments[0]instanceof _e){var h=arguments[0],d=null,m=null,v=null,b=null,B=null,z=null,q=null,pe=null;return m=(B=this._hi/h._hi)-(d=(z=_e.SPLIT*B)-(d=z-B)),pe=d*(v=(pe=_e.SPLIT*h._hi)-(v=pe-h._hi))-(q=B*h._hi)+d*(b=h._hi-v)+m*v+m*b,new _e(pe=B+(z=(this._hi-q-pe+this._lo-B*h._lo)/h._hi),B-pe+z)}if("number"==typeof arguments[0]){var Ue=arguments[0];return Y.isNaN(Ue)?_e.createNaN():_e.copy(this).selfDivide(Ue,0)}},_e.prototype.ge=function(h){return(this._hi>h._hi||this._hi===h._hi)&&this._lo>=h._lo},_e.prototype.pow=function(h){if(0===h)return _e.valueOf(1);var d=new _e(this),m=_e.valueOf(1),v=Math.abs(h);if(v>1)for(;v>0;)v%2==1&&m.selfMultiply(d),(v/=2)>0&&(d=d.sqr());else m=d;return h<0?m.reciprocal():m},_e.prototype.ceil=function(){if(this.isNaN())return _e.NaN;var h=Math.ceil(this._hi),d=0;return h===this._hi&&(d=Math.ceil(this._lo)),new _e(h,d)},_e.prototype.compareTo=function(h){return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0},_e.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},_e.prototype.setValue=function(){return arguments[0]instanceof _e||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},_e.prototype.max=function(h){return this.ge(h)?this:h},_e.prototype.sqrt=function(){if(this.isZero())return _e.valueOf(0);if(this.isNegative())return _e.NaN;var h=1/Math.sqrt(this._hi),m=_e.valueOf(this._hi*h),v=this.subtract(m.sqr())._hi*(.5*h);return m.add(v)},_e.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof _e){var h=arguments[0];return this.selfAdd(h._hi,h._lo)}if("number"==typeof arguments[0]){var d=arguments[0],m=null,v=null,b=null,z=null,q=null;return this._hi=(m=(b=this._hi+d)+(q=d-(z=b-this._hi)+(this._hi-(b-z))+this._lo))+(v=q+(b-m)),this._lo=v+(m-this._hi),this}}else if(2===arguments.length){var pe=arguments[0],Ue=arguments[1],gt=null,pt=null,fn=null,Mn=null,Fn=null,Zn=null,zr=null;Fn=(Mn=this._hi+pe)-(Zn=Mn-this._hi),fn=(pt=this._lo+Ue)-(zr=pt-this._lo);var Fo=(gt=Mn+(Zn=(Fn=pe-Zn+(this._hi-Fn))+pt))+(Zn=(fn=Ue-zr+(this._lo-fn))+(Zn+(Mn-gt))),u1=Zn+(gt-Fo);return this._hi=Fo,this._lo=u1,this}},_e.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof _e){var h=arguments[0];return this.selfMultiply(h._hi,h._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],b=null,B=null,z=null,q=null,pe=null,Ue=null;b=(pe=_e.SPLIT*this._hi)-this._hi,b=pe-b;var gt=(pe=this._hi*m)+(Ue=b*(z=(Ue=_e.SPLIT*m)-(z=Ue-m))-pe+b*(q=m-z)+(B=this._hi-b)*z+B*q+(this._hi*arguments[1]+this._lo*m)),pt=Ue+(b=pe-gt);return this._hi=gt,this._lo=pt,this}},_e.prototype.selfSqr=function(){return this.selfMultiply(this)},_e.prototype.floor=function(){if(this.isNaN())return _e.NaN;var h=Math.floor(this._hi),d=0;return h===this._hi&&(d=Math.floor(this._lo)),new _e(h,d)},_e.prototype.negate=function(){return this.isNaN()?this:new _e(-this._hi,-this._lo)},_e.prototype.clone=function(){},_e.prototype.multiply=function(){if(arguments[0]instanceof _e){var h=arguments[0];return h.isNaN()?_e.createNaN():_e.copy(this).selfMultiply(h)}if("number"==typeof arguments[0]){var d=arguments[0];return Y.isNaN(d)?_e.createNaN():_e.copy(this).selfMultiply(d,0)}},_e.prototype.isNaN=function(){return Y.isNaN(this._hi)},_e.prototype.intValue=function(){return Math.trunc(this._hi)},_e.prototype.toString=function(){var h=_e.magnitude(this._hi);return h>=-3&&h<=20?this.toStandardNotation():this.toSciNotation()},_e.prototype.toStandardNotation=function(){var h=this.getSpecialNumberString();if(null!==h)return h;var d=new Array(1).fill(null),m=this.extractSignificantDigits(!0,d),v=d[0]+1,b=m;return"."===m.charAt(0)?b="0"+m:v<0?b="0."+_e.stringOfChar("0",-v)+m:-1===m.indexOf(".")&&(b=m+_e.stringOfChar("0",v-m.length)+".0"),this.isNegative()?"-"+b:b},_e.prototype.reciprocal=function(){var d,v,b,z,h=null,m=null,B=null,q=null;d=(b=1/this._hi)-(h=(B=_e.SPLIT*b)-(h=B-b)),m=(q=_e.SPLIT*this._hi)-this._hi;var pe=b+(B=(1-(z=b*this._hi)-(q=h*(m=q-m)-z+h*(v=this._hi-m)+d*m+d*v)-b*this._lo)/this._hi);return new _e(pe,b-pe+B)},_e.prototype.toSciNotation=function(){if(this.isZero())return _e.SCI_NOT_ZERO;var h=this.getSpecialNumberString();if(null!==h)return h;var d=new Array(1).fill(null),m=this.extractSignificantDigits(!1,d),v=_e.SCI_NOT_EXPONENT_CHAR+d[0];if("0"===m.charAt(0))throw new Error("Found leading zero: "+m);var b="";m.length>1&&(b=m.substring(1));var B=m.charAt(0)+"."+b;return this.isNegative()?"-"+B+v:B+v},_e.prototype.abs=function(){return this.isNaN()?_e.NaN:this.isNegative()?this.negate():new _e(this)},_e.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},_e.prototype.lt=function(h){return(this._hi<h._hi||this._hi===h._hi)&&this._lo<h._lo},_e.prototype.add=function(){if(arguments[0]instanceof _e){var h=arguments[0];return _e.copy(this).selfAdd(h)}if("number"==typeof arguments[0]){var d=arguments[0];return _e.copy(this).selfAdd(d)}},_e.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof _e){var d=arguments[0];this._hi=d._hi,this._lo=d._lo}}else if(2===arguments.length){var v=arguments[1];this._hi=arguments[0],this._lo=v}},_e.prototype.gt=function(h){return(this._hi>h._hi||this._hi===h._hi)&&this._lo>h._lo},_e.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},_e.prototype.trunc=function(){return this.isNaN()?_e.NaN:this.isPositive()?this.floor():this.ceil()},_e.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},_e.prototype.interfaces_=function(){return[ue,J,se]},_e.prototype.getClass=function(){return _e},_e.sqr=function(h){return _e.valueOf(h).selfMultiply(h)},_e.valueOf=function(){return"string"==typeof arguments[0]?_e.parse(arguments[0]):"number"==typeof arguments[0]?new _e(arguments[0]):void 0},_e.sqrt=function(h){return _e.valueOf(h).sqrt()},_e.parse=function(h){for(var d=0,m=h.length;rt.isWhitespace(h.charAt(d));)d++;var v=!1;if(d<m){var b=h.charAt(d);"-"!==b&&"+"!==b||(d++,"-"===b&&(v=!0))}for(var B=new _e,z=0,q=0,pe=0;!(d>=m);){var Ue=h.charAt(d);if(d++,rt.isDigit(Ue)){var gt=Ue-"0";B.selfMultiply(_e.TEN),B.selfAdd(gt),z++}else{if("."!==Ue){if("e"===Ue||"E"===Ue){var pt=h.substring(d);try{pe=Qe.parseInt(pt)}catch(zr){throw zr instanceof Error?new Error("Invalid exponent "+pt+" in string "+h):zr}break}throw new Error("Unexpected character '"+Ue+"' at position "+d+" in string "+h)}q=z}}var fn=B,Mn=z-q-pe;if(0===Mn)fn=B;else if(Mn>0){var Fn=_e.TEN.pow(Mn);fn=B.divide(Fn)}else if(Mn<0){var Zn=_e.TEN.pow(-Mn);fn=B.multiply(Zn)}return v?fn.negate():fn},_e.createNaN=function(){return new _e(Y.NaN,Y.NaN)},_e.copy=function(h){return new _e(h)},_e.magnitude=function(h){var d=Math.abs(h),m=Math.log(d)/Math.log(10),v=Math.trunc(Math.floor(m));return 10*Math.pow(10,v)<=d&&(v+=1),v},_e.stringOfChar=function(h,d){for(var m=new be,v=0;v<d;v++)m.append(h);return m.toString()},St.PI.get=function(){return new _e(3.141592653589793,12246467991473532e-32)},St.TWO_PI.get=function(){return new _e(6.283185307179586,24492935982947064e-32)},St.PI_2.get=function(){return new _e(1.5707963267948966,6123233995736766e-32)},St.E.get=function(){return new _e(2.718281828459045,14456468917292502e-32)},St.NaN.get=function(){return new _e(Y.NaN,Y.NaN)},St.EPS.get=function(){return 123259516440783e-46},St.SPLIT.get=function(){return 134217729},St.MAX_PRINT_DIGITS.get=function(){return 32},St.TEN.get=function(){return _e.valueOf(10)},St.ONE.get=function(){return _e.valueOf(1)},St.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},St.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(_e,St);var Je=function(){},nn={DP_SAFE_EPSILON:{configurable:!0}};Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.orientationIndex=function(h,d,m){var v=Je.orientationIndexFilter(h,d,m);if(v<=1)return v;var b=_e.valueOf(d.x).selfAdd(-h.x),B=_e.valueOf(d.y).selfAdd(-h.y),z=_e.valueOf(m.x).selfAdd(-d.x),q=_e.valueOf(m.y).selfAdd(-d.y);return b.selfMultiply(q).selfSubtract(B.selfMultiply(z)).signum()},Je.signOfDet2x2=function(h,d,m,v){return h.multiply(v).selfSubtract(d.multiply(m)).signum()},Je.intersection=function(h,d,m,v){var b=_e.valueOf(v.y).selfSubtract(m.y).selfMultiply(_e.valueOf(d.x).selfSubtract(h.x)),B=_e.valueOf(v.x).selfSubtract(m.x).selfMultiply(_e.valueOf(d.y).selfSubtract(h.y)),z=b.subtract(B),q=_e.valueOf(v.x).selfSubtract(m.x).selfMultiply(_e.valueOf(h.y).selfSubtract(m.y)),pe=_e.valueOf(v.y).selfSubtract(m.y).selfMultiply(_e.valueOf(h.x).selfSubtract(m.x)),Ue=q.subtract(pe).selfDivide(z).doubleValue(),gt=_e.valueOf(h.x).selfAdd(_e.valueOf(d.x).selfSubtract(h.x).selfMultiply(Ue)).doubleValue(),pt=_e.valueOf(d.x).selfSubtract(h.x).selfMultiply(_e.valueOf(h.y).selfSubtract(m.y)),fn=_e.valueOf(d.y).selfSubtract(h.y).selfMultiply(_e.valueOf(h.x).selfSubtract(m.x)),Mn=pt.subtract(fn).selfDivide(z).doubleValue(),Fn=_e.valueOf(m.y).selfAdd(_e.valueOf(v.y).selfSubtract(m.y).selfMultiply(Mn)).doubleValue();return new $(gt,Fn)},Je.orientationIndexFilter=function(h,d,m){var v=null,b=(h.x-m.x)*(d.y-m.y),B=(h.y-m.y)*(d.x-m.x),z=b-B;if(b>0){if(B<=0)return Je.signum(z);v=b+B}else{if(!(b<0)||B>=0)return Je.signum(z);v=-b-B}var q=Je.DP_SAFE_EPSILON*v;return z>=q||-z>=q?Je.signum(z):2},Je.signum=function(h){return h>0?1:h<0?-1:0},nn.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Je,nn);var vt=function(){},xn={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};xn.X.get=function(){return 0},xn.Y.get=function(){return 1},xn.Z.get=function(){return 2},xn.M.get=function(){return 3},vt.prototype.setOrdinate=function(h,d,m){},vt.prototype.size=function(){},vt.prototype.getOrdinate=function(h,d){},vt.prototype.getCoordinate=function(){},vt.prototype.getCoordinateCopy=function(h){},vt.prototype.getDimension=function(){},vt.prototype.getX=function(h){},vt.prototype.clone=function(){},vt.prototype.expandEnvelope=function(h){},vt.prototype.copy=function(){},vt.prototype.getY=function(h){},vt.prototype.toCoordinateArray=function(){},vt.prototype.interfaces_=function(){return[se]},vt.prototype.getClass=function(){return vt},Object.defineProperties(vt,xn);var _n=function(){},li=function(h){function d(){h.call(this,"Projective point not representable on the Cartesian plane.")}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(_n),qt=function(){};qt.arraycopy=function(h,d,m,v,b){for(var B=0,z=d;z<d+b;z++)m[v+B]=h[z],B++},qt.getProperty=function(h){return{"line.separator":"\n"}[h]};var $n=function h(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var v=arguments[1];this.x=arguments[0],this.y=v,this.w=1}else if(arguments[0]instanceof h&&arguments[1]instanceof h){var b=arguments[0],B=arguments[1];this.x=b.y*B.w-B.y*b.w,this.y=B.x*b.w-b.x*B.w,this.w=b.x*B.y-B.x*b.y}else if(arguments[0]instanceof $&&arguments[1]instanceof $){var z=arguments[0],q=arguments[1];this.x=z.y-q.y,this.y=q.x-z.x,this.w=z.x*q.y-q.x*z.y}}else if(3===arguments.length){var Ue=arguments[1],gt=arguments[2];this.x=arguments[0],this.y=Ue,this.w=gt}else if(4===arguments.length){var pt=arguments[0],fn=arguments[1],Mn=arguments[2],Fn=arguments[3],Zn=pt.y-fn.y,zr=fn.x-pt.x,Fo=pt.x*fn.y-fn.x*pt.y,u1=Mn.y-Fn.y,xl=Fn.x-Mn.x,Ml=Mn.x*Fn.y-Fn.x*Mn.y;this.x=zr*Ml-xl*Fo,this.y=u1*Fo-Zn*Ml,this.w=Zn*xl-u1*zr}};$n.prototype.getY=function(){var h=this.y/this.w;if(Y.isNaN(h)||Y.isInfinite(h))throw new li;return h},$n.prototype.getX=function(){var h=this.x/this.w;if(Y.isNaN(h)||Y.isInfinite(h))throw new li;return h},$n.prototype.getCoordinate=function(){var h=new $;return h.x=this.getX(),h.y=this.getY(),h},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.intersection=function(h,d,m,v){var b=h.y-d.y,B=d.x-h.x,z=h.x*d.y-d.x*h.y,q=m.y-v.y,pe=v.x-m.x,Ue=m.x*v.y-v.x*m.y,gt=b*pe-q*B,pt=(B*Ue-pe*z)/gt,fn=(q*z-b*Ue)/gt;if(Y.isNaN(pt)||Y.isInfinite(pt)||Y.isNaN(fn)||Y.isInfinite(fn))throw new li;return new $(pt,fn)};var on=function h(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof $){var d=arguments[0];this.init(d.x,d.x,d.y,d.y)}else arguments[0]instanceof h&&this.init(arguments[0]);else if(2===arguments.length){var v=arguments[0],b=arguments[1];this.init(v.x,b.x,v.y,b.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},Fs={serialVersionUID:{configurable:!0}};on.prototype.getArea=function(){return this.getWidth()*this.getHeight()},on.prototype.equals=function(h){if(!(h instanceof on))return!1;var d=h;return this.isNull()?d.isNull():this._maxx===d.getMaxX()&&this._maxy===d.getMaxY()&&this._minx===d.getMinX()&&this._miny===d.getMinY()},on.prototype.intersection=function(h){return this.isNull()||h.isNull()||!this.intersects(h)?new on:new on(this._minx>h._minx?this._minx:h._minx,this._maxx<h._maxx?this._maxx:h._maxx,this._miny>h._miny?this._miny:h._miny,this._maxy<h._maxy?this._maxy:h._maxy)},on.prototype.isNull=function(){return this._maxx<this._minx},on.prototype.getMaxX=function(){return this._maxx},on.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];return this.covers(h.x,h.y)}if(arguments[0]instanceof on){var d=arguments[0];return!this.isNull()&&!d.isNull()&&d.getMinX()>=this._minx&&d.getMaxX()<=this._maxx&&d.getMinY()>=this._miny&&d.getMaxY()<=this._maxy}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return!this.isNull()&&m>=this._minx&&m<=this._maxx&&v>=this._miny&&v<=this._maxy}},on.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof on){var h=arguments[0];return!this.isNull()&&!h.isNull()&&!(h._minx>this._maxx||h._maxx<this._minx||h._miny>this._maxy||h._maxy<this._miny)}if(arguments[0]instanceof $){var d=arguments[0];return this.intersects(d.x,d.y)}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return!this.isNull()&&!(m>this._maxx||m<this._minx||v>this._maxy||v<this._miny)}},on.prototype.getMinY=function(){return this._miny},on.prototype.getMinX=function(){return this._minx},on.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];this.expandToInclude(h.x,h.y)}else if(arguments[0]instanceof on){var d=arguments[0];if(d.isNull())return null;this.isNull()?(this._minx=d.getMinX(),this._maxx=d.getMaxX(),this._miny=d.getMinY(),this._maxy=d.getMaxY()):(d._minx<this._minx&&(this._minx=d._minx),d._maxx>this._maxx&&(this._maxx=d._maxx),d._miny<this._miny&&(this._miny=d._miny),d._maxy>this._maxy&&(this._maxy=d._maxy))}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this.isNull()?(this._minx=m,this._maxx=m,this._miny=v,this._maxy=v):(m<this._minx&&(this._minx=m),m>this._maxx&&(this._maxx=m),v<this._miny&&(this._miny=v),v>this._maxy&&(this._maxy=v))}},on.prototype.minExtent=function(){if(this.isNull())return 0;var h=this.getWidth(),d=this.getHeight();return h<d?h:d},on.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},on.prototype.compareTo=function(h){var d=h;return this.isNull()?d.isNull()?0:-1:d.isNull()?1:this._minx<d._minx?-1:this._minx>d._minx?1:this._miny<d._miny?-1:this._miny>d._miny?1:this._maxx<d._maxx?-1:this._maxx>d._maxx?1:this._maxy<d._maxy?-1:this._maxy>d._maxy?1:0},on.prototype.translate=function(h,d){if(this.isNull())return null;this.init(this.getMinX()+h,this.getMaxX()+h,this.getMinY()+d,this.getMaxY()+d)},on.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},on.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},on.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},on.prototype.maxExtent=function(){if(this.isNull())return 0;var h=this.getWidth(),d=this.getHeight();return h>d?h:d},on.prototype.expandBy=function(){if(1===arguments.length){var h=arguments[0];this.expandBy(h,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this.isNull())return null;this._minx-=d,this._maxx+=d,this._miny-=m,this._maxy+=m,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},on.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof on)return this.covers(arguments[0]);if(arguments[0]instanceof $)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},on.prototype.centre=function(){return this.isNull()?null:new $((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},on.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];this.init(h.x,h.x,h.y,h.y)}else if(arguments[0]instanceof on){var d=arguments[0];this._minx=d._minx,this._maxx=d._maxx,this._miny=d._miny,this._maxy=d._maxy}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this.init(m.x,v.x,m.y,v.y)}else if(4===arguments.length){var b=arguments[0],B=arguments[1],z=arguments[2],q=arguments[3];b<B?(this._minx=b,this._maxx=B):(this._minx=B,this._maxx=b),z<q?(this._miny=z,this._maxy=q):(this._miny=q,this._maxy=z)}},on.prototype.getMaxY=function(){return this._maxy},on.prototype.distance=function(h){if(this.intersects(h))return 0;var d=0;this._maxx<h._minx?d=h._minx-this._maxx:this._minx>h._maxx&&(d=this._minx-h._maxx);var m=0;return this._maxy<h._miny?m=h._miny-this._maxy:this._miny>h._maxy&&(m=this._miny-h._maxy),0===d?m:0===m?d:Math.sqrt(d*d+m*m)},on.prototype.hashCode=function(){var h=17;return 37*(h=37*(h=37*(h=37*h+$.hashCode(this._minx))+$.hashCode(this._maxx))+$.hashCode(this._miny))+$.hashCode(this._maxy)},on.prototype.interfaces_=function(){return[J,ue]},on.prototype.getClass=function(){return on},on.intersects=function(){if(3===arguments.length){var h=arguments[0],d=arguments[1],m=arguments[2];return m.x>=(h.x<d.x?h.x:d.x)&&m.x<=(h.x>d.x?h.x:d.x)&&m.y>=(h.y<d.y?h.y:d.y)&&m.y<=(h.y>d.y?h.y:d.y)}if(4===arguments.length){var v=arguments[0],b=arguments[1],B=arguments[2],z=arguments[3],q=Math.min(B.x,z.x),pe=Math.max(B.x,z.x),Ue=Math.min(v.x,b.x),gt=Math.max(v.x,b.x);return!(Ue>pe||gt<q||(q=Math.min(B.y,z.y),pe=Math.max(B.y,z.y),Ue=Math.min(v.y,b.y),gt=Math.max(v.y,b.y),Ue>pe||gt<q))}},Fs.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(on,Fs);var ws={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Zs=function(h){this.geometryFactory=h||new qi};Zs.prototype.read=function(h){var d,m;h=h.replace(/[\n\r]/g," ");var b=ws.typeStr.exec(h);if(-1!==h.search("EMPTY")&&((b=ws.emptyTypeStr.exec(h))[2]=void 0),b&&(m=b[1].toLowerCase(),vi[m]&&(d=vi[m].apply(this,[b[2]]))),void 0===d)throw new Error("Could not parse WKT "+h);return d},Zs.prototype.write=function(h){return this.extractGeometry(h)},Zs.prototype.extractGeometry=function(h){var d=h.getGeometryType().toLowerCase();if(!gi[d])return null;var m=d.toUpperCase();return h.isEmpty()?m+" EMPTY":m+"("+gi[d].apply(this,[h])+")"};var gi={coordinate:function(h){return h.x+" "+h.y},point:function(h){return gi.coordinate.call(this,h._coordinates._coordinates[0])},multipoint:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push("("+gi.point.apply(this,[h._geometries[m]])+")");return d.join(",")},linestring:function(h){for(var d=[],m=0,v=h._points._coordinates.length;m<v;++m)d.push(gi.coordinate.apply(this,[h._points._coordinates[m]]));return d.join(",")},linearring:function(h){for(var d=[],m=0,v=h._points._coordinates.length;m<v;++m)d.push(gi.coordinate.apply(this,[h._points._coordinates[m]]));return d.join(",")},multilinestring:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push("("+gi.linestring.apply(this,[h._geometries[m]])+")");return d.join(",")},polygon:function(h){var d=[];d.push("("+gi.linestring.apply(this,[h._shell])+")");for(var m=0,v=h._holes.length;m<v;++m)d.push("("+gi.linestring.apply(this,[h._holes[m]])+")");return d.join(",")},multipolygon:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push("("+gi.polygon.apply(this,[h._geometries[m]])+")");return d.join(",")},geometrycollection:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push(this.extractGeometry(h._geometries[m]));return d.join(",")}},vi={point:function(h){if(void 0===h)return this.geometryFactory.createPoint();var d=h.trim().split(ws.spaces);return this.geometryFactory.createPoint(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])))},multipoint:function(h){if(void 0===h)return this.geometryFactory.createMultiPoint();for(var d,m=h.trim().split(","),v=[],b=0,B=m.length;b<B;++b)d=m[b].replace(ws.trimParens,"$1"),v.push(vi.point.apply(this,[d]));return this.geometryFactory.createMultiPoint(v)},linestring:function(h){if(void 0===h)return this.geometryFactory.createLineString();for(var d,m=h.trim().split(","),v=[],b=0,B=m.length;b<B;++b)d=m[b].trim().split(ws.spaces),v.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLineString(v)},linearring:function(h){if(void 0===h)return this.geometryFactory.createLinearRing();for(var d,m=h.trim().split(","),v=[],b=0,B=m.length;b<B;++b)d=m[b].trim().split(ws.spaces),v.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLinearRing(v)},multilinestring:function(h){if(void 0===h)return this.geometryFactory.createMultiLineString();for(var d,m=h.trim().split(ws.parenComma),v=[],b=0,B=m.length;b<B;++b)d=m[b].replace(ws.trimParens,"$1"),v.push(vi.linestring.apply(this,[d]));return this.geometryFactory.createMultiLineString(v)},polygon:function(h){if(void 0===h)return this.geometryFactory.createPolygon();for(var d,m,v,b,B=h.trim().split(ws.parenComma),z=[],q=0,pe=B.length;q<pe;++q)d=B[q].replace(ws.trimParens,"$1"),m=vi.linestring.apply(this,[d]),v=this.geometryFactory.createLinearRing(m._points),0===q?b=v:z.push(v);return this.geometryFactory.createPolygon(b,z)},multipolygon:function(h){if(void 0===h)return this.geometryFactory.createMultiPolygon();for(var d,m=h.trim().split(ws.doubleParenComma),v=[],b=0,B=m.length;b<B;++b)d=m[b].replace(ws.trimParens,"$1"),v.push(vi.polygon.apply(this,[d]));return this.geometryFactory.createMultiPolygon(v)},geometrycollection:function(h){if(void 0===h)return this.geometryFactory.createGeometryCollection();for(var d=(h=h.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),m=[],v=0,b=d.length;v<b;++v)m.push(this.read(d[v]));return this.geometryFactory.createGeometryCollection(m)}},it=function(h){this.parser=new Zs(h)};it.prototype.write=function(h){return this.parser.write(h)},it.toLineString=function(h,d){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+h.x+" "+h.y+", "+d.x+" "+d.y+" )"};var le=function(h){function d(m){h.call(this,m),this.name="RuntimeException",this.message=m,this.stack=(new h).stack}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(Error),te=function(h){function d(){h.call(this),0===arguments.length?h.call(this):1===arguments.length&&h.call(this,arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(le),ee=function(){};ee.prototype.interfaces_=function(){return[]},ee.prototype.getClass=function(){return ee},ee.shouldNeverReachHere=function(){if(0===arguments.length)ee.shouldNeverReachHere(null);else if(1===arguments.length){var h=arguments[0];throw new te("Should never reach here"+(null!==h?": "+h:""))}},ee.isTrue=function(){var d;if(1===arguments.length)ee.isTrue(arguments[0],null);else if(2===arguments.length&&(d=arguments[1],!arguments[0]))throw null===d?new te:new te(d)},ee.equals=function(){var h,d,m;if(2===arguments.length)ee.equals(h=arguments[0],d=arguments[1],null);else if(3===arguments.length&&(m=arguments[2],!(d=arguments[1]).equals(h=arguments[0])))throw new te("Expected "+h+" but encountered "+d+(null!==m?": "+m:""))};var Le=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new $,this._intPt[1]=new $,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},qe={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Le.prototype.getIndexAlongSegment=function(h,d){return this.computeIntLineIndex(),this._intLineIndex[h][d]},Le.prototype.getTopologySummary=function(){var h=new be;return this.isEndPoint()&&h.append(" endpoint"),this._isProper&&h.append(" proper"),this.isCollinear()&&h.append(" collinear"),h.toString()},Le.prototype.computeIntersection=function(h,d,m,v){this._inputLines[0][0]=h,this._inputLines[0][1]=d,this._inputLines[1][0]=m,this._inputLines[1][1]=v,this._result=this.computeIntersect(h,d,m,v)},Le.prototype.getIntersectionNum=function(){return this._result},Le.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var h=arguments[0];this.getEdgeDistance(h,0)>this.getEdgeDistance(h,1)?(this._intLineIndex[h][0]=0,this._intLineIndex[h][1]=1):(this._intLineIndex[h][0]=1,this._intLineIndex[h][1]=0)}},Le.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Le.prototype.setPrecisionModel=function(h){this._precisionModel=h},Le.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var h=arguments[0],d=0;d<this._result;d++)if(!this._intPt[d].equals2D(this._inputLines[h][0])&&!this._intPt[d].equals2D(this._inputLines[h][1]))return!0;return!1}},Le.prototype.getIntersection=function(h){return this._intPt[h]},Le.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Le.prototype.hasIntersection=function(){return this._result!==Le.NO_INTERSECTION},Le.prototype.getEdgeDistance=function(h,d){return Le.computeEdgeDistance(this._intPt[d],this._inputLines[h][0],this._inputLines[h][1])},Le.prototype.isCollinear=function(){return this._result===Le.COLLINEAR_INTERSECTION},Le.prototype.toString=function(){return it.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+it.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Le.prototype.getEndpoint=function(h,d){return this._inputLines[h][d]},Le.prototype.isIntersection=function(h){for(var d=0;d<this._result;d++)if(this._intPt[d].equals2D(h))return!0;return!1},Le.prototype.getIntersectionAlongSegment=function(h,d){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[h][d]]},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le},Le.computeEdgeDistance=function(h,d,m){var v=Math.abs(m.x-d.x),b=Math.abs(m.y-d.y),B=-1;if(h.equals(d))B=0;else if(h.equals(m))B=v>b?v:b;else{var z=Math.abs(h.x-d.x),q=Math.abs(h.y-d.y);0!==(B=v>b?z:q)||h.equals(d)||(B=Math.max(z,q))}return ee.isTrue(!(0===B&&!h.equals(d)),"Bad distance calculation"),B},Le.nonRobustComputeEdgeDistance=function(h,d,m){var v=h.x-d.x,b=h.y-d.y,B=Math.sqrt(v*v+b*b);return ee.isTrue(!(0===B&&!h.equals(d)),"Invalid distance calculation"),B},qe.DONT_INTERSECT.get=function(){return 0},qe.DO_INTERSECT.get=function(){return 1},qe.COLLINEAR.get=function(){return 2},qe.NO_INTERSECTION.get=function(){return 0},qe.POINT_INTERSECTION.get=function(){return 1},qe.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Le,qe);var mt=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isInSegmentEnvelopes=function(m){var v=new on(this._inputLines[0][0],this._inputLines[0][1]),b=new on(this._inputLines[1][0],this._inputLines[1][1]);return v.contains(m)&&b.contains(m)},d.prototype.computeIntersection=function(){if(3!==arguments.length)return h.prototype.computeIntersection.apply(this,arguments);var m=arguments[0],v=arguments[1],b=arguments[2];if(this._isProper=!1,on.intersects(v,b,m)&&0===Mt.orientationIndex(v,b,m)&&0===Mt.orientationIndex(b,v,m))return this._isProper=!0,(m.equals(v)||m.equals(b))&&(this._isProper=!1),this._result=h.POINT_INTERSECTION,null;this._result=h.NO_INTERSECTION},d.prototype.normalizeToMinimum=function(m,v,b,B,z){z.x=this.smallestInAbsValue(m.x,v.x,b.x,B.x),z.y=this.smallestInAbsValue(m.y,v.y,b.y,B.y),m.x-=z.x,m.y-=z.y,v.x-=z.x,v.y-=z.y,b.x-=z.x,b.y-=z.y,B.x-=z.x,B.y-=z.y},d.prototype.safeHCoordinateIntersection=function(m,v,b,B){var z=null;try{z=$n.intersection(m,v,b,B)}catch(q){if(!(q instanceof li))throw q;z=d.nearestEndpoint(m,v,b,B)}return z},d.prototype.intersection=function(m,v,b,B){var z=this.intersectionWithNormalization(m,v,b,B);return this.isInSegmentEnvelopes(z)||(z=new $(d.nearestEndpoint(m,v,b,B))),null!==this._precisionModel&&this._precisionModel.makePrecise(z),z},d.prototype.smallestInAbsValue=function(m,v,b,B){var z=m,q=Math.abs(z);return Math.abs(v)<q&&(z=v,q=Math.abs(v)),Math.abs(b)<q&&(z=b,q=Math.abs(b)),Math.abs(B)<q&&(z=B),z},d.prototype.checkDD=function(m,v,b,B,z){var q=Je.intersection(m,v,b,B),pe=this.isInSegmentEnvelopes(q);qt.out.println("DD in env = "+pe+"  --------------------- "+q),z.distance(q)>1e-4&&qt.out.println("Distance = "+z.distance(q))},d.prototype.intersectionWithNormalization=function(m,v,b,B){var z=new $(m),q=new $(v),pe=new $(b),Ue=new $(B),gt=new $;this.normalizeToEnvCentre(z,q,pe,Ue,gt);var pt=this.safeHCoordinateIntersection(z,q,pe,Ue);return pt.x+=gt.x,pt.y+=gt.y,pt},d.prototype.computeCollinearIntersection=function(m,v,b,B){var z=on.intersects(m,v,b),q=on.intersects(m,v,B),pe=on.intersects(b,B,m),Ue=on.intersects(b,B,v);return z&&q?(this._intPt[0]=b,this._intPt[1]=B,h.COLLINEAR_INTERSECTION):pe&&Ue?(this._intPt[0]=m,this._intPt[1]=v,h.COLLINEAR_INTERSECTION):z&&pe?(this._intPt[0]=b,this._intPt[1]=m,!b.equals(m)||q||Ue?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):z&&Ue?(this._intPt[0]=b,this._intPt[1]=v,!b.equals(v)||q||pe?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):q&&pe?(this._intPt[0]=B,this._intPt[1]=m,!B.equals(m)||z||Ue?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):q&&Ue?(this._intPt[0]=B,this._intPt[1]=v,!B.equals(v)||z||pe?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):h.NO_INTERSECTION},d.prototype.normalizeToEnvCentre=function(m,v,b,B,z){var q=m.x<v.x?m.x:v.x,pe=m.y<v.y?m.y:v.y,Ue=m.x>v.x?m.x:v.x,gt=m.y>v.y?m.y:v.y,pt=b.x<B.x?b.x:B.x,fn=b.y<B.y?b.y:B.y,Mn=b.x>B.x?b.x:B.x,Fn=b.y>B.y?b.y:B.y,zr=((pe>fn?pe:fn)+(gt<Fn?gt:Fn))/2;z.x=((q>pt?q:pt)+(Ue<Mn?Ue:Mn))/2,z.y=zr,m.x-=z.x,m.y-=z.y,v.x-=z.x,v.y-=z.y,b.x-=z.x,b.y-=z.y,B.x-=z.x,B.y-=z.y},d.prototype.computeIntersect=function(m,v,b,B){if(this._isProper=!1,!on.intersects(m,v,b,B))return h.NO_INTERSECTION;var z=Mt.orientationIndex(m,v,b),q=Mt.orientationIndex(m,v,B);if(z>0&&q>0||z<0&&q<0)return h.NO_INTERSECTION;var pe=Mt.orientationIndex(b,B,m),Ue=Mt.orientationIndex(b,B,v);return pe>0&&Ue>0||pe<0&&Ue<0?h.NO_INTERSECTION:0===z&&0===q&&0===pe&&0===Ue?this.computeCollinearIntersection(m,v,b,B):(0===z||0===q||0===pe||0===Ue?(this._isProper=!1,m.equals2D(b)||m.equals2D(B)?this._intPt[0]=m:v.equals2D(b)||v.equals2D(B)?this._intPt[0]=v:0===z?this._intPt[0]=new $(b):0===q?this._intPt[0]=new $(B):0===pe?this._intPt[0]=new $(m):0===Ue&&(this._intPt[0]=new $(v))):(this._isProper=!0,this._intPt[0]=this.intersection(m,v,b,B)),h.POINT_INTERSECTION)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.nearestEndpoint=function(m,v,b,B){var z=m,q=Mt.distancePointLine(m,b,B),pe=Mt.distancePointLine(v,b,B);return pe<q&&(q=pe,z=v),(pe=Mt.distancePointLine(b,m,v))<q&&(q=pe,z=b),(pe=Mt.distancePointLine(B,m,v))<q&&(q=pe,z=B),z},d}(Le),Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt},Qt.orientationIndex=function(h,d,m){return Qt.signOfDet2x2(d.x-h.x,d.y-h.y,m.x-d.x,m.y-d.y)},Qt.signOfDet2x2=function(h,d,m,v){var b=null,B=null,z=null;if(b=1,0===h||0===v)return 0===d||0===m?0:d>0?m>0?-b:b:m>0?b:-b;if(0===d||0===m)return v>0?h>0?b:-b:h>0?-b:b;if(d>0?v>0?d<=v||(b=-b,B=h,h=m,m=B,B=d,d=v,v=B):d<=-v?(b=-b,m=-m,v=-v):(B=h,h=-m,m=B,B=d,d=-v,v=B):v>0?-d<=v?(b=-b,h=-h,d=-d):(B=-h,h=m,m=B,B=-d,d=v,v=B):d>=v?(h=-h,d=-d,m=-m,v=-v):(b=-b,B=-h,h=-m,m=B,B=-d,d=-v,v=B),h>0){if(!(m>0&&h<=m))return b}else{if(m>0||!(h>=m))return-b;b=-b,h=-h,m=-m}for(;;){if((v-=(z=Math.floor(m/h))*d)<0)return-b;if(v>d)return b;if(h>(m-=z*h)+m){if(d<v+v)return b}else{if(d>v+v)return-b;m=h-m,v=d-v,b=-b}if(0===v)return 0===m?0:-b;if(0===m||(h-=(z=Math.floor(h/m))*m,(d-=z*v)<0))return b;if(d>v)return-b;if(m>h+h){if(v<d+d)return-b}else{if(v>d+d)return b;h=m-h,d=v-d,b=-b}if(0===d)return 0===h?0:b;if(0===h)return-b}};var Yt=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Yt.prototype.countSegment=function(h,d){if(h.x<this._p.x&&d.x<this._p.x)return null;if(this._p.x===d.x&&this._p.y===d.y)return this._isPointOnSegment=!0,null;if(h.y===this._p.y&&d.y===this._p.y){var m=h.x,v=d.x;return m>v&&(m=d.x,v=h.x),this._p.x>=m&&this._p.x<=v&&(this._isPointOnSegment=!0),null}if(h.y>this._p.y&&d.y<=this._p.y||d.y>this._p.y&&h.y<=this._p.y){var B=h.y-this._p.y,q=d.y-this._p.y,pe=Qt.signOfDet2x2(h.x-this._p.x,B,d.x-this._p.x,q);if(0===pe)return this._isPointOnSegment=!0,null;q<B&&(pe=-pe),pe>0&&this._crossingCount++}},Yt.prototype.isPointInPolygon=function(){return this.getLocation()!==oe.EXTERIOR},Yt.prototype.getLocation=function(){return this._isPointOnSegment?oe.BOUNDARY:this._crossingCount%2==1?oe.INTERIOR:oe.EXTERIOR},Yt.prototype.isOnSegment=function(){return this._isPointOnSegment},Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.locatePointInRing=function(){if(arguments[0]instanceof $&&At(arguments[1],vt)){for(var d=arguments[1],m=new Yt(arguments[0]),v=new $,b=new $,B=1;B<d.size();B++)if(d.getCoordinate(B,v),d.getCoordinate(B-1,b),m.countSegment(v,b),m.isOnSegment())return m.getLocation();return m.getLocation()}if(arguments[0]instanceof $&&arguments[1]instanceof Array){for(var q=arguments[1],pe=new Yt(arguments[0]),Ue=1;Ue<q.length;Ue++)if(pe.countSegment(q[Ue],q[Ue-1]),pe.isOnSegment())return pe.getLocation();return pe.getLocation()}};var Mt=function(){},bi={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt},Mt.orientationIndex=function(h,d,m){return Je.orientationIndex(h,d,m)},Mt.signedArea=function(){if(arguments[0]instanceof Array){var h=arguments[0];if(h.length<3)return 0;for(var d=0,m=h[0].x,v=1;v<h.length-1;v++)d+=(h[v].x-m)*(h[v-1].y-h[v+1].y);return d/2}if(At(arguments[0],vt)){var z=arguments[0],q=z.size();if(q<3)return 0;var pe=new $,Ue=new $,gt=new $;z.getCoordinate(0,Ue),z.getCoordinate(1,gt);var pt=Ue.x;gt.x-=pt;for(var fn=0,Mn=1;Mn<q-1;Mn++)pe.y=Ue.y,Ue.x=gt.x,Ue.y=gt.y,z.getCoordinate(Mn+1,gt),gt.x-=pt,fn+=Ue.x*(pe.y-gt.y);return fn/2}},Mt.distanceLineLine=function(h,d,m,v){if(h.equals(d))return Mt.distancePointLine(h,m,v);if(m.equals(v))return Mt.distancePointLine(v,h,d);var b=!1;if(on.intersects(h,d,m,v)){var B=(d.x-h.x)*(v.y-m.y)-(d.y-h.y)*(v.x-m.x);if(0===B)b=!0;else{var q=((h.y-m.y)*(d.x-h.x)-(h.x-m.x)*(d.y-h.y))/B,pe=((h.y-m.y)*(v.x-m.x)-(h.x-m.x)*(v.y-m.y))/B;(pe<0||pe>1||q<0||q>1)&&(b=!0)}}else b=!0;return b?xe.min(Mt.distancePointLine(h,m,v),Mt.distancePointLine(d,m,v),Mt.distancePointLine(m,h,d),Mt.distancePointLine(v,h,d)):0},Mt.isPointInRing=function(h,d){return Mt.locatePointInRing(h,d)!==oe.EXTERIOR},Mt.computeLength=function(h){var d=h.size();if(d<=1)return 0;var m=0,v=new $;h.getCoordinate(0,v);for(var b=v.x,B=v.y,z=1;z<d;z++){h.getCoordinate(z,v);var q=v.x,pe=v.y,Ue=q-b,gt=pe-B;m+=Math.sqrt(Ue*Ue+gt*gt),b=q,B=pe}return m},Mt.isCCW=function(h){var d=h.length-1;if(d<3)throw new X("Ring has fewer than 4 points, so orientation cannot be determined");for(var m=h[0],v=0,b=1;b<=d;b++){var B=h[b];B.y>m.y&&(m=B,v=b)}var z=v;do{(z-=1)<0&&(z=d)}while(h[z].equals2D(m)&&z!==v);var q=v;do{q=(q+1)%d}while(h[q].equals2D(m)&&q!==v);var pe=h[z],Ue=h[q];if(pe.equals2D(m)||Ue.equals2D(m)||pe.equals2D(Ue))return!1;var gt=Mt.computeOrientation(pe,m,Ue);return 0===gt?pe.x>Ue.x:gt>0},Mt.locatePointInRing=function(h,d){return Yt.locatePointInRing(h,d)},Mt.distancePointLinePerpendicular=function(h,d,m){var v=(m.x-d.x)*(m.x-d.x)+(m.y-d.y)*(m.y-d.y);return Math.abs(((d.y-h.y)*(m.x-d.x)-(d.x-h.x)*(m.y-d.y))/v)*Math.sqrt(v)},Mt.computeOrientation=function(h,d,m){return Mt.orientationIndex(h,d,m)},Mt.distancePointLine=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];if(0===d.length)throw new X("Line array must contain at least one vertex");for(var m=h.distance(d[0]),v=0;v<d.length-1;v++){var b=Mt.distancePointLine(h,d[v],d[v+1]);b<m&&(m=b)}return m}if(3===arguments.length){var B=arguments[0],z=arguments[1],q=arguments[2];if(z.x===q.x&&z.y===q.y)return B.distance(z);var pe=(q.x-z.x)*(q.x-z.x)+(q.y-z.y)*(q.y-z.y),Ue=((B.x-z.x)*(q.x-z.x)+(B.y-z.y)*(q.y-z.y))/pe;return Ue<=0?B.distance(z):Ue>=1?B.distance(q):Math.abs(((z.y-B.y)*(q.x-z.x)-(z.x-B.x)*(q.y-z.y))/pe)*Math.sqrt(pe)}},Mt.isOnLine=function(h,d){for(var m=new mt,v=1;v<d.length;v++)if(m.computeIntersection(h,d[v-1],d[v]),m.hasIntersection())return!0;return!1},bi.CLOCKWISE.get=function(){return-1},bi.RIGHT.get=function(){return Mt.CLOCKWISE},bi.COUNTERCLOCKWISE.get=function(){return 1},bi.LEFT.get=function(){return Mt.COUNTERCLOCKWISE},bi.COLLINEAR.get=function(){return 0},bi.STRAIGHT.get=function(){return Mt.COLLINEAR},Object.defineProperties(Mt,bi);var Hi=function(){};Hi.prototype.filter=function(h){},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var yn=function(){var h=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=h,this._SRID=h.getSRID()},Ri={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};yn.prototype.isGeometryCollection=function(){return this.getSortIndex()===yn.SORTINDEX_GEOMETRYCOLLECTION},yn.prototype.getFactory=function(){return this._factory},yn.prototype.getGeometryN=function(h){return this},yn.prototype.getArea=function(){return 0},yn.prototype.isRectangle=function(){return!1},yn.prototype.equals=function(){if(arguments[0]instanceof yn){var h=arguments[0];return null!==h&&this.equalsTopo(h)}if(arguments[0]instanceof Object){var d=arguments[0];return d instanceof yn&&this.equalsExact(d)}},yn.prototype.equalsExact=function(h){return this===h||this.equalsExact(h,0)},yn.prototype.geometryChanged=function(){this.apply(yn.geometryChangedFilter)},yn.prototype.geometryChangedAction=function(){this._envelope=null},yn.prototype.equalsNorm=function(h){return null!==h&&this.norm().equalsExact(h.norm())},yn.prototype.getLength=function(){return 0},yn.prototype.getNumGeometries=function(){return 1},yn.prototype.compareTo=function(){if(1===arguments.length){var h=arguments[0],d=h;return this.getSortIndex()!==d.getSortIndex()?this.getSortIndex()-d.getSortIndex():this.isEmpty()&&d.isEmpty()?0:this.isEmpty()?-1:d.isEmpty()?1:this.compareToSameClass(h)}if(2===arguments.length){var m=arguments[0],v=arguments[1];return this.getSortIndex()!==m.getSortIndex()?this.getSortIndex()-m.getSortIndex():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(m,v)}},yn.prototype.getUserData=function(){return this._userData},yn.prototype.getSRID=function(){return this._SRID},yn.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},yn.prototype.checkNotGeometryCollection=function(h){if(h.getSortIndex()===yn.SORTINDEX_GEOMETRYCOLLECTION)throw new X("This method does not support GeometryCollection arguments")},yn.prototype.equal=function(h,d,m){return 0===m?h.equals(d):h.distance(d)<=m},yn.prototype.norm=function(){var h=this.copy();return h.normalize(),h},yn.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},yn.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new on(this._envelope)},yn.prototype.setSRID=function(h){this._SRID=h},yn.prototype.setUserData=function(h){this._userData=h},yn.prototype.compare=function(h,d){for(var m=h.iterator(),v=d.iterator();m.hasNext()&&v.hasNext();){var b=m.next(),B=v.next(),z=b.compareTo(B);if(0!==z)return z}return m.hasNext()?1:v.hasNext()?-1:0},yn.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},yn.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===yn.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===yn.SORTINDEX_MULTIPOINT||this.getSortIndex()===yn.SORTINDEX_MULTILINESTRING||this.getSortIndex()===yn.SORTINDEX_MULTIPOLYGON},yn.prototype.interfaces_=function(){return[se,J,ue]},yn.prototype.getClass=function(){return yn},yn.hasNonEmptyElements=function(h){for(var d=0;d<h.length;d++)if(!h[d].isEmpty())return!0;return!1},yn.hasNullElements=function(h){for(var d=0;d<h.length;d++)if(null===h[d])return!0;return!1},Ri.serialVersionUID.get=function(){return 0x799ea46522854c00},Ri.SORTINDEX_POINT.get=function(){return 0},Ri.SORTINDEX_MULTIPOINT.get=function(){return 1},Ri.SORTINDEX_LINESTRING.get=function(){return 2},Ri.SORTINDEX_LINEARRING.get=function(){return 3},Ri.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ri.SORTINDEX_POLYGON.get=function(){return 5},Ri.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ri.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ri.geometryChangedFilter.get=function(){return _r},Object.defineProperties(yn,Ri);var _r=function(){};_r.interfaces_=function(){return[Hi]},_r.filter=function(h){h.geometryChangedAction()};var ur=function(){};ur.prototype.filter=function(h){},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var yr=function(){},Ws={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};yr.prototype.isInBoundary=function(h){},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},Ws.Mod2BoundaryNodeRule.get=function(){return Ma},Ws.EndPointBoundaryNodeRule.get=function(){return jo},Ws.MultiValentEndPointBoundaryNodeRule.get=function(){return Io},Ws.MonoValentEndPointBoundaryNodeRule.get=function(){return Sa},Ws.MOD2_BOUNDARY_RULE.get=function(){return new Ma},Ws.ENDPOINT_BOUNDARY_RULE.get=function(){return new jo},Ws.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Io},Ws.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Sa},Ws.OGC_SFS_BOUNDARY_RULE.get=function(){return yr.MOD2_BOUNDARY_RULE},Object.defineProperties(yr,Ws);var Ma=function(){};Ma.prototype.isInBoundary=function(h){return h%2==1},Ma.prototype.interfaces_=function(){return[yr]},Ma.prototype.getClass=function(){return Ma};var jo=function(){};jo.prototype.isInBoundary=function(h){return h>0},jo.prototype.interfaces_=function(){return[yr]},jo.prototype.getClass=function(){return jo};var Io=function(){};Io.prototype.isInBoundary=function(h){return h>1},Io.prototype.interfaces_=function(){return[yr]},Io.prototype.getClass=function(){return Io};var Sa=function(){};Sa.prototype.isInBoundary=function(h){return 1===h},Sa.prototype.interfaces_=function(){return[yr]},Sa.prototype.getClass=function(){return Sa};var Cs=function(){};Cs.prototype.add=function(){},Cs.prototype.addAll=function(){},Cs.prototype.isEmpty=function(){},Cs.prototype.iterator=function(){},Cs.prototype.size=function(){},Cs.prototype.toArray=function(){},Cs.prototype.remove=function(){},(Ee.prototype=new Error).name="IndexOutOfBoundsException";var q1=function(){};q1.prototype.hasNext=function(){},q1.prototype.next=function(){},q1.prototype.remove=function(){};var $o=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.get=function(){},d.prototype.set=function(){},d.prototype.isEmpty=function(){},d}(Cs);(Ne.prototype=new Error).name="NoSuchElementException";var rn=function(h){function d(){h.call(this),this.array_=[],arguments[0]instanceof Cs&&this.addAll(arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.ensureCapacity=function(){},d.prototype.interfaces_=function(){return[h,Cs]},d.prototype.add=function(m){return 1===arguments.length?this.array_.push(m):this.array_.splice(arguments[0],arguments[1]),!0},d.prototype.clear=function(){this.array_=[]},d.prototype.addAll=function(m){for(var v=m.iterator();v.hasNext();)this.add(v.next());return!0},d.prototype.set=function(m,v){var b=this.array_[m];return this.array_[m]=v,b},d.prototype.iterator=function(){return new O2(this)},d.prototype.get=function(m){if(m<0||m>=this.size())throw new Ee;return this.array_[m]},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.size=function(){return this.array_.length},d.prototype.toArray=function(){for(var m=[],v=0,b=this.array_.length;v<b;v++)m.push(this.array_[v]);return m},d.prototype.remove=function(m){for(var v=!1,b=0,B=this.array_.length;b<B;b++)if(this.array_[b]===m){this.array_.splice(b,1),v=!0;break}return v},d}($o),O2=function(h){function d(m){h.call(this),this.arrayList_=m,this.position_=0}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Ne;return this.arrayList_.get(this.position_++)},d.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},d.prototype.set=function(m){return this.arrayList_.set(this.position_-1,m)},d.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},d}(q1),uc=function(h){function d(){if(h.call(this),0!==arguments.length)if(1===arguments.length){var v=arguments[0];this.ensureCapacity(v.length),this.add(v,!0)}else if(2===arguments.length){var b=arguments[0],B=arguments[1];this.ensureCapacity(b.length),this.add(b,B)}}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={coordArrayType:{configurable:!0}};return m.coordArrayType.get=function(){return new Array(0).fill(null)},d.prototype.getCoordinate=function(v){return this.get(v)},d.prototype.addAll=function(){if(2===arguments.length){for(var b=arguments[1],B=!1,z=arguments[0].iterator();z.hasNext();)this.add(z.next(),b),B=!0;return B}return h.prototype.addAll.apply(this,arguments)},d.prototype.clone=function(){for(var v=h.prototype.clone.call(this),b=0;b<this.size();b++)v.add(b,this.get(b).copy());return v},d.prototype.toCoordinateArray=function(){return this.toArray(d.coordArrayType)},d.prototype.add=function(){if(1===arguments.length)h.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof $&&"boolean"==typeof arguments[1]){var z=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(z))return null;h.prototype.add.call(this,z)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var Ue=arguments[0],gt=arguments[1];if(arguments[2])for(var pt=0;pt<Ue.length;pt++)this.add(Ue[pt],gt);else for(var fn=Ue.length-1;fn>=0;fn--)this.add(Ue[fn],gt);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof $){var Mn=arguments[0],Fn=arguments[1];if(!arguments[2]){var Zn=this.size();if(Zn>0&&(Mn>0&&this.get(Mn-1).equals2D(Fn)||Mn<Zn&&this.get(Mn).equals2D(Fn)))return null}h.prototype.add.call(this,Mn,Fn)}}else if(4===arguments.length){var zr=arguments[0],Fo=arguments[1],u1=arguments[2],xl=arguments[3],Ml=1;u1>xl&&(Ml=-1);for(var vh=u1;vh!==xl;vh+=Ml)this.add(zr[vh],Fo);return!0}},d.prototype.closeRing=function(){this.size()>0&&this.add(new $(this.get(0)),!1)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},Object.defineProperties(d,m),d}(rn),Fi=function(){},Jc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Jc.ForwardComparator.get=function(){return po},Jc.BidirectionalComparator.get=function(){return gl},Jc.coordArrayType.get=function(){return new Array(0).fill(null)},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi},Fi.isRing=function(h){return!(h.length<4||!h[0].equals2D(h[h.length-1]))},Fi.ptNotInList=function(h,d){for(var m=0;m<h.length;m++){var v=h[m];if(Fi.indexOf(v,d)<0)return v}return null},Fi.scroll=function(h,d){var m=Fi.indexOf(d,h);if(m<0)return null;var v=new Array(h.length).fill(null);qt.arraycopy(h,m,v,0,h.length-m),qt.arraycopy(h,0,v,h.length-m,m),qt.arraycopy(v,0,h,0,h.length)},Fi.equals=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];if(h===d)return!0;if(null===h||null===d||h.length!==d.length)return!1;for(var m=0;m<h.length;m++)if(!h[m].equals(d[m]))return!1;return!0}if(3===arguments.length){var v=arguments[0],b=arguments[1],B=arguments[2];if(v===b)return!0;if(null===v||null===b||v.length!==b.length)return!1;for(var z=0;z<v.length;z++)if(0!==B.compare(v[z],b[z]))return!1;return!0}},Fi.intersection=function(h,d){for(var m=new uc,v=0;v<h.length;v++)d.intersects(h[v])&&m.add(h[v],!0);return m.toCoordinateArray()},Fi.hasRepeatedPoints=function(h){for(var d=1;d<h.length;d++)if(h[d-1].equals(h[d]))return!0;return!1},Fi.removeRepeatedPoints=function(h){return Fi.hasRepeatedPoints(h)?new uc(h,!1).toCoordinateArray():h},Fi.reverse=function(h){for(var d=h.length-1,m=Math.trunc(d/2),v=0;v<=m;v++){var b=h[v];h[v]=h[d-v],h[d-v]=b}},Fi.removeNull=function(h){for(var d=0,m=0;m<h.length;m++)null!==h[m]&&d++;var v=new Array(d).fill(null);if(0===d)return v;for(var b=0,B=0;B<h.length;B++)null!==h[B]&&(v[b++]=h[B]);return v},Fi.copyDeep=function(){if(1===arguments.length){for(var h=arguments[0],d=new Array(h.length).fill(null),m=0;m<h.length;m++)d[m]=new $(h[m]);return d}if(5===arguments.length)for(var v=arguments[0],b=arguments[1],B=arguments[2],z=arguments[3],q=arguments[4],pe=0;pe<q;pe++)B[z+pe]=new $(v[b+pe])},Fi.isEqualReversed=function(h,d){for(var m=0;m<h.length;m++)if(0!==h[m].compareTo(d[h.length-m-1]))return!1;return!0},Fi.envelope=function(h){for(var d=new on,m=0;m<h.length;m++)d.expandToInclude(h[m]);return d},Fi.toCoordinateArray=function(h){return h.toArray(Fi.coordArrayType)},Fi.atLeastNCoordinatesOrNothing=function(h,d){return d.length>=h?d:[]},Fi.indexOf=function(h,d){for(var m=0;m<d.length;m++)if(h.equals(d[m]))return m;return-1},Fi.increasingDirection=function(h){for(var d=0;d<Math.trunc(h.length/2);d++){var v=h[d].compareTo(h[h.length-1-d]);if(0!==v)return v}return 1},Fi.compare=function(h,d){for(var m=0;m<h.length&&m<d.length;){var v=h[m].compareTo(d[m]);if(0!==v)return v;m++}return m<d.length?-1:m<h.length?1:0},Fi.minCoordinate=function(h){for(var d=null,m=0;m<h.length;m++)(null===d||d.compareTo(h[m])>0)&&(d=h[m]);return d},Fi.extract=function(h,d,m){d=xe.clamp(d,0,h.length);var v=(m=xe.clamp(m,-1,h.length))-d+1;m<0&&(v=0),d>=h.length&&(v=0),m<d&&(v=0);var b=new Array(v).fill(null);if(0===v)return b;for(var B=0,z=d;z<=m;z++)b[B++]=h[z];return b},Object.defineProperties(Fi,Jc);var po=function(){};po.prototype.compare=function(h,d){return Fi.compare(h,d)},po.prototype.interfaces_=function(){return[ce]},po.prototype.getClass=function(){return po};var gl=function(){};gl.prototype.compare=function(h,d){var m=h,v=d;if(m.length<v.length)return-1;if(m.length>v.length)return 1;if(0===m.length)return 0;var b=Fi.compare(m,v);return Fi.isEqualReversed(m,v)?0:b},gl.prototype.OLDcompare=function(h,d){var m=h,v=d;if(m.length<v.length)return-1;if(m.length>v.length)return 1;if(0===m.length)return 0;for(var b=Fi.increasingDirection(m),B=Fi.increasingDirection(v),z=b>0?0:m.length-1,q=B>0?0:m.length-1,pe=0;pe<m.length;pe++){var Ue=m[z].compareTo(v[q]);if(0!==Ue)return Ue;z+=b,q+=B}return 0},gl.prototype.interfaces_=function(){return[ce]},gl.prototype.getClass=function(){return gl};var ou=function(){};ou.prototype.get=function(){},ou.prototype.put=function(){},ou.prototype.size=function(){},ou.prototype.values=function(){},ou.prototype.entrySet=function(){};var Om=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(ou);(ze.prototype=new Error).name="OperationNotSupported",(Re.prototype=new Cs).contains=function(){};var qf=function(h){function d(){h.call(this),this.array_=[],arguments[0]instanceof Cs&&this.addAll(arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.contains=function(m){for(var v=0,b=this.array_.length;v<b;v++)if(this.array_[v]===m)return!0;return!1},d.prototype.add=function(m){return!this.contains(m)&&(this.array_.push(m),!0)},d.prototype.addAll=function(m){for(var v=m.iterator();v.hasNext();)this.add(v.next());return!0},d.prototype.remove=function(m){throw new Error},d.prototype.size=function(){return this.array_.length},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.toArray=function(){for(var m=[],v=0,b=this.array_.length;v<b;v++)m.push(this.array_[v]);return m},d.prototype.iterator=function(){return new Lr(this)},d}(Re),Lr=function(h){function d(m){h.call(this),this.hashSet_=m,this.position_=0}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Ne;return this.hashSet_.array_[this.position_++]},d.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},d.prototype.remove=function(){throw new ze},d}(q1),_2=0;(Ct.prototype=new Om).get=function(h){for(var d=this.root_;null!==d;){var m=h.compareTo(d.key);if(m<0)d=d.left;else{if(!(m>0))return d.value;d=d.right}}return null},Ct.prototype.put=function(h,d){if(null===this.root_)return this.root_={key:h,value:d,left:null,right:null,parent:null,color:_2,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var m,v,b=this.root_;do{if(m=b,(v=h.compareTo(b.key))<0)b=b.left;else{if(!(v>0)){var B=b.value;return b.value=d,B}b=b.right}}while(null!==b);var z={key:h,left:null,right:null,value:d,parent:m,color:_2,getValue:function(){return this.value},getKey:function(){return this.key}};return v<0?m.left=z:m.right=z,this.fixAfterInsertion(z),this.size_++,null},Ct.prototype.fixAfterInsertion=function(h){for(h.color=1;null!=h&&h!==this.root_&&1===h.parent.color;)if(We(h)===ft(We(We(h)))){var d=Gt(We(We(h)));1===Ie(d)?(ct(We(h),_2),ct(d,_2),ct(We(We(h)),1),h=We(We(h))):(h===Gt(We(h))&&(h=We(h),this.rotateLeft(h)),ct(We(h),_2),ct(We(We(h)),1),this.rotateRight(We(We(h))))}else{var m=ft(We(We(h)));1===Ie(m)?(ct(We(h),_2),ct(m,_2),ct(We(We(h)),1),h=We(We(h))):(h===ft(We(h))&&(h=We(h),this.rotateRight(h)),ct(We(h),_2),ct(We(We(h)),1),this.rotateLeft(We(We(h))))}this.root_.color=_2},Ct.prototype.values=function(){var h=new rn,d=this.getFirstEntry();if(null!==d)for(h.add(d.value);null!==(d=Ct.successor(d));)h.add(d.value);return h},Ct.prototype.entrySet=function(){var h=new qf,d=this.getFirstEntry();if(null!==d)for(h.add(d);null!==(d=Ct.successor(d));)h.add(d);return h},Ct.prototype.rotateLeft=function(h){if(null!=h){var d=h.right;h.right=d.left,null!=d.left&&(d.left.parent=h),d.parent=h.parent,null===h.parent?this.root_=d:h.parent.left===h?h.parent.left=d:h.parent.right=d,d.left=h,h.parent=d}},Ct.prototype.rotateRight=function(h){if(null!=h){var d=h.left;h.left=d.right,null!=d.right&&(d.right.parent=h),d.parent=h.parent,null===h.parent?this.root_=d:h.parent.right===h?h.parent.right=d:h.parent.left=d,d.right=h,h.parent=d}},Ct.prototype.getFirstEntry=function(){var h=this.root_;if(null!=h)for(;null!=h.left;)h=h.left;return h},Ct.successor=function(h){if(null===h)return null;if(null!==h.right){for(var d=h.right;null!==d.left;)d=d.left;return d}for(var m=h.parent,v=h;null!==m&&v===m.right;)v=m,m=m.parent;return m},Ct.prototype.size=function(){return this.size_};var au=function(){};au.prototype.interfaces_=function(){return[]},au.prototype.getClass=function(){return au},st.prototype=new Re,(yt.prototype=new st).contains=function(h){for(var d=0,m=this.array_.length;d<m;d++)if(0===this.array_[d].compareTo(h))return!0;return!1},yt.prototype.add=function(h){if(this.contains(h))return!1;for(var d=0,m=this.array_.length;d<m;d++)if(1===this.array_[d].compareTo(h))return this.array_.splice(d,0,h),!0;return this.array_.push(h),!0},yt.prototype.addAll=function(h){for(var d=h.iterator();d.hasNext();)this.add(d.next());return!0},yt.prototype.remove=function(h){throw new ze},yt.prototype.size=function(){return this.array_.length},yt.prototype.isEmpty=function(){return 0===this.array_.length},yt.prototype.toArray=function(){for(var h=[],d=0,m=this.array_.length;d<m;d++)h.push(this.array_[d]);return h},yt.prototype.iterator=function(){return new ka(this)};var ka=function(h){this.treeSet_=h,this.position_=0};ka.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Ne;return this.treeSet_.array_[this.position_++]},ka.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ka.prototype.remove=function(){throw new ze};var Yl=function(){};Yl.sort=function(){var h,d,m,b=arguments[0];if(1===arguments.length)b.sort(function(z,q){return z.compareTo(q)});else if(2===arguments.length)m=arguments[1],b.sort(function(z,q){return m.compare(z,q)});else if(3===arguments.length){(d=b.slice(arguments[1],arguments[2])).sort();var B=b.slice(0,arguments[1]).concat(d,b.slice(arguments[2],b.length));for(b.splice(0,b.length),h=0;h<B.length;h++)b.push(B[h])}else if(4===arguments.length)for(d=b.slice(arguments[1],arguments[2]),m=arguments[3],d.sort(function(z,q){return m.compare(z,q)}),B=b.slice(0,arguments[1]).concat(d,b.slice(arguments[2],b.length)),b.splice(0,b.length),h=0;h<B.length;h++)b.push(B[h])},Yl.asList=function(h){for(var d=new rn,m=0,v=h.length;m<v;m++)d.add(h[m]);return d};var xi=function(){},n1={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};n1.P.get=function(){return 0},n1.L.get=function(){return 1},n1.A.get=function(){return 2},n1.FALSE.get=function(){return-1},n1.TRUE.get=function(){return-2},n1.DONTCARE.get=function(){return-3},n1.SYM_FALSE.get=function(){return"F"},n1.SYM_TRUE.get=function(){return"T"},n1.SYM_DONTCARE.get=function(){return"*"},n1.SYM_P.get=function(){return"0"},n1.SYM_L.get=function(){return"1"},n1.SYM_A.get=function(){return"2"},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi},xi.toDimensionSymbol=function(h){switch(h){case xi.FALSE:return xi.SYM_FALSE;case xi.TRUE:return xi.SYM_TRUE;case xi.DONTCARE:return xi.SYM_DONTCARE;case xi.P:return xi.SYM_P;case xi.L:return xi.SYM_L;case xi.A:return xi.SYM_A}throw new X("Unknown dimension value: "+h)},xi.toDimensionValue=function(h){switch(rt.toUpperCase(h)){case xi.SYM_FALSE:return xi.FALSE;case xi.SYM_TRUE:return xi.TRUE;case xi.SYM_DONTCARE:return xi.DONTCARE;case xi.SYM_P:return xi.P;case xi.SYM_L:return xi.L;case xi.SYM_A:return xi.A}throw new X("Unknown dimension symbol: "+h)},Object.defineProperties(xi,n1);var Pa=function(){};Pa.prototype.filter=function(h){},Pa.prototype.interfaces_=function(){return[]},Pa.prototype.getClass=function(){return Pa};var y2=function(){};y2.prototype.filter=function(h,d){},y2.prototype.isDone=function(){},y2.prototype.isGeometryChanged=function(){},y2.prototype.interfaces_=function(){return[]},y2.prototype.getClass=function(){return y2};var _1=function(h){function d(v,b){if(h.call(this,b),this._geometries=v||[],h.hasNullElements(this._geometries))throw new X("geometries must not contain null elements")}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){for(var v=new on,b=0;b<this._geometries.length;b++)v.expandToInclude(this._geometries[b].getEnvelopeInternal());return v},d.prototype.getGeometryN=function(v){return this._geometries[v]},d.prototype.getSortIndex=function(){return h.SORTINDEX_GEOMETRYCOLLECTION},d.prototype.getCoordinates=function(){for(var v=new Array(this.getNumPoints()).fill(null),b=-1,B=0;B<this._geometries.length;B++)for(var z=this._geometries[B].getCoordinates(),q=0;q<z.length;q++)v[++b]=z[q];return v},d.prototype.getArea=function(){for(var v=0,b=0;b<this._geometries.length;b++)v+=this._geometries[b].getArea();return v},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];if(!this.isEquivalentClass(v))return!1;var B=v;if(this._geometries.length!==B._geometries.length)return!1;for(var z=0;z<this._geometries.length;z++)if(!this._geometries[z].equalsExact(B._geometries[z],b))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var v=0;v<this._geometries.length;v++)this._geometries[v].normalize();Yl.sort(this._geometries)},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},d.prototype.getBoundaryDimension=function(){for(var v=xi.FALSE,b=0;b<this._geometries.length;b++)v=Math.max(v,this._geometries[b].getBoundaryDimension());return v},d.prototype.getDimension=function(){for(var v=xi.FALSE,b=0;b<this._geometries.length;b++)v=Math.max(v,this._geometries[b].getDimension());return v},d.prototype.getLength=function(){for(var v=0,b=0;b<this._geometries.length;b++)v+=this._geometries[b].getLength();return v},d.prototype.getNumPoints=function(){for(var v=0,b=0;b<this._geometries.length;b++)v+=this._geometries[b].getNumPoints();return v},d.prototype.getNumGeometries=function(){return this._geometries.length},d.prototype.reverse=function(){for(var b=new Array(this._geometries.length).fill(null),B=0;B<this._geometries.length;B++)b[B]=this._geometries[B].reverse();return this.getFactory().createGeometryCollection(b)},d.prototype.compareToSameClass=function(){if(1===arguments.length){var v=arguments[0],b=new yt(Yl.asList(this._geometries)),B=new yt(Yl.asList(v._geometries));return this.compare(b,B)}if(2===arguments.length){for(var q=arguments[1],pe=arguments[0],Ue=this.getNumGeometries(),gt=pe.getNumGeometries(),pt=0;pt<Ue&&pt<gt;){var fn=this.getGeometryN(pt),Mn=pe.getGeometryN(pt),Fn=fn.compareToSameClass(Mn,q);if(0!==Fn)return Fn;pt++}return pt<Ue?1:pt<gt?-1:0}},d.prototype.apply=function(){if(At(arguments[0],ur))for(var v=arguments[0],b=0;b<this._geometries.length;b++)this._geometries[b].apply(v);else if(At(arguments[0],y2)){var B=arguments[0];if(0===this._geometries.length)return null;for(var z=0;z<this._geometries.length&&(this._geometries[z].apply(B),!B.isDone());z++);B.isGeometryChanged()&&this.geometryChanged()}else if(At(arguments[0],Pa)){var q=arguments[0];q.filter(this);for(var pe=0;pe<this._geometries.length;pe++)this._geometries[pe].apply(q)}else if(At(arguments[0],Hi)){var Ue=arguments[0];Ue.filter(this);for(var gt=0;gt<this._geometries.length;gt++)this._geometries[gt].apply(Ue)}},d.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),ee.shouldNeverReachHere(),null},d.prototype.clone=function(){var v=h.prototype.clone.call(this);v._geometries=new Array(this._geometries.length).fill(null);for(var b=0;b<this._geometries.length;b++)v._geometries[b]=this._geometries[b].clone();return v},d.prototype.getGeometryType=function(){return"GeometryCollection"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),b=0;b<v.length;b++)v[b]=this._geometries[b].copy();return new d(v,this._factory)},d.prototype.isEmpty=function(){for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isEmpty())return!1;return!0},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(d,m),d}(yn),R3=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return yn.SORTINDEX_MULTILINESTRING},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];return!!this.isEquivalentClass(v)&&h.prototype.equalsExact.call(this,v,b)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?xi.FALSE:0},d.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isClosed())return!1;return!0},d.prototype.getDimension=function(){return 1},d.prototype.reverse=function(){for(var v=this._geometries.length,b=new Array(v).fill(null),B=0;B<this._geometries.length;B++)b[v-1-B]=this._geometries[B].reverse();return this.getFactory().createMultiLineString(b)},d.prototype.getBoundary=function(){return new y1(this).getBoundary()},d.prototype.getGeometryType=function(){return"MultiLineString"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),b=0;b<v.length;b++)v[b]=this._geometries[b].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[au]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(d,m),d}(_1),y1=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var h=arguments[0],d=yr.MOD2_BOUNDARY_RULE;this._geom=h,this._geomFact=h.getFactory(),this._bnRule=d}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this._geom=m,this._geomFact=m.getFactory(),this._bnRule=v}};y1.prototype.boundaryMultiLineString=function(h){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var d=this.computeBoundaryCoordinates(h);return 1===d.length?this._geomFact.createPoint(d[0]):this._geomFact.createMultiPointFromCoords(d)},y1.prototype.getBoundary=function(){return this._geom instanceof go?this.boundaryLineString(this._geom):this._geom instanceof R3?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},y1.prototype.boundaryLineString=function(h){return this._geom.isEmpty()?this.getEmptyMultiPoint():h.isClosed()?this._bnRule.isInBoundary(2)?h.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([h.getStartPoint(),h.getEndPoint()])},y1.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},y1.prototype.computeBoundaryCoordinates=function(h){var d=new rn;this._endpointMap=new Ct;for(var m=0;m<h.getNumGeometries();m++){var v=h.getGeometryN(m);0!==v.getNumPoints()&&(this.addEndpoint(v.getCoordinateN(0)),this.addEndpoint(v.getCoordinateN(v.getNumPoints()-1)))}for(var b=this._endpointMap.entrySet().iterator();b.hasNext();){var B=b.next(),z=B.getValue().count;this._bnRule.isInBoundary(z)&&d.add(B.getKey())}return Fi.toCoordinateArray(d)},y1.prototype.addEndpoint=function(h){var d=this._endpointMap.get(h);null===d&&(d=new a0,this._endpointMap.put(h,d)),d.count++},y1.prototype.interfaces_=function(){return[]},y1.prototype.getClass=function(){return y1},y1.getBoundary=function(){return 1===arguments.length?new y1(arguments[0]).getBoundary():2===arguments.length?new y1(arguments[0],arguments[1]).getBoundary():void 0};var a0=function(){this.count=null};a0.prototype.interfaces_=function(){return[]},a0.prototype.getClass=function(){return a0};var w1=function(){},N6={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};w1.prototype.interfaces_=function(){return[]},w1.prototype.getClass=function(){return w1},w1.chars=function(h,d){for(var m=new Array(d).fill(null),v=0;v<d;v++)m[v]=h;return String(m)},w1.getStackTrace=function(){if(1===arguments.length){var h=arguments[0],d=new function(){},m=new function(){}(d);return h.printStackTrace(m),d.toString()}if(2===arguments.length){for(var b=arguments[1],B="",z=new function(){}(new function(){}(w1.getStackTrace(arguments[0]))),q=0;q<b;q++)try{B+=z.readLine()+w1.NEWLINE}catch(pe){if(!(pe instanceof Xt))throw pe;ee.shouldNeverReachHere()}return B}},w1.split=function(h,d){for(var m=d.length,v=new rn,b=""+h,B=b.indexOf(d);B>=0;){var z=b.substring(0,B);v.add(z),B=(b=b.substring(B+m)).indexOf(d)}b.length>0&&v.add(b);for(var q=new Array(v.size()).fill(null),pe=0;pe<q.length;pe++)q[pe]=v.get(pe);return q},w1.toString=function(){if(1===arguments.length)return w1.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},w1.spaces=function(h){return w1.chars(" ",h)},N6.NEWLINE.get=function(){return qt.getProperty("line.separator")},N6.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(w1,N6);var Co=function(){};Co.prototype.interfaces_=function(){return[]},Co.prototype.getClass=function(){return Co},Co.copyCoord=function(h,d,m,v){for(var b=Math.min(h.getDimension(),m.getDimension()),B=0;B<b;B++)m.setOrdinate(v,B,h.getOrdinate(d,B))},Co.isRing=function(h){var d=h.size();return 0===d||!(d<=3)&&h.getOrdinate(0,vt.X)===h.getOrdinate(d-1,vt.X)&&h.getOrdinate(0,vt.Y)===h.getOrdinate(d-1,vt.Y)},Co.isEqual=function(h,d){var m=h.size();if(m!==d.size())return!1;for(var v=Math.min(h.getDimension(),d.getDimension()),b=0;b<m;b++)for(var B=0;B<v;B++){var z=h.getOrdinate(b,B),q=d.getOrdinate(b,B);if(!(h.getOrdinate(b,B)===d.getOrdinate(b,B)||Y.isNaN(z)&&Y.isNaN(q)))return!1}return!0},Co.extend=function(h,d,m){var v=h.create(m,d.getDimension()),b=d.size();if(Co.copy(d,0,v,0,b),b>0)for(var B=b;B<m;B++)Co.copy(d,b-1,v,B,1);return v},Co.reverse=function(h){for(var d=h.size()-1,m=Math.trunc(d/2),v=0;v<=m;v++)Co.swap(h,v,d-v)},Co.swap=function(h,d,m){if(d===m)return null;for(var v=0;v<h.getDimension();v++){var b=h.getOrdinate(d,v);h.setOrdinate(d,v,h.getOrdinate(m,v)),h.setOrdinate(m,v,b)}},Co.copy=function(h,d,m,v,b){for(var B=0;B<b;B++)Co.copyCoord(h,d+B,m,v+B)},Co.toString=function(){if(1===arguments.length){var h=arguments[0],d=h.size();if(0===d)return"()";var m=h.getDimension(),v=new be;v.append("(");for(var b=0;b<d;b++){b>0&&v.append(" ");for(var B=0;B<m;B++)B>0&&v.append(","),v.append(w1.toString(h.getOrdinate(b,B)))}return v.append(")"),v.toString()}},Co.ensureValidRing=function(h,d){var m=d.size();return 0===m?d:m<=3?Co.createClosedRing(h,d,4):d.getOrdinate(0,vt.X)===d.getOrdinate(m-1,vt.X)&&d.getOrdinate(0,vt.Y)===d.getOrdinate(m-1,vt.Y)?d:Co.createClosedRing(h,d,m+1)},Co.createClosedRing=function(h,d,m){var v=h.create(m,d.getDimension()),b=d.size();Co.copy(d,0,v,0,b);for(var B=b;B<m;B++)Co.copy(d,0,v,B,1);return v};var go=function(h){function d(v,b){h.call(this,b),this._points=null,this.init(v)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new on:this._points.expandEnvelope(new on)},d.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},d.prototype.getSortIndex=function(){return h.SORTINDEX_LINESTRING},d.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];if(!this.isEquivalentClass(v))return!1;var B=v;if(this._points.size()!==B._points.size())return!1;for(var z=0;z<this._points.size();z++)if(!this.equal(this._points.getCoordinate(z),B._points.getCoordinate(z),b))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var v=0;v<Math.trunc(this._points.size()/2);v++){var b=this._points.size()-1-v;if(!this._points.getCoordinate(v).equals(this._points.getCoordinate(b)))return this._points.getCoordinate(v).compareTo(this._points.getCoordinate(b))>0&&Co.reverse(this._points),null}},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?xi.FALSE:0},d.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},d.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},d.prototype.getDimension=function(){return 1},d.prototype.getLength=function(){return Mt.computeLength(this._points)},d.prototype.getNumPoints=function(){return this._points.size()},d.prototype.reverse=function(){var v=this._points.copy();return Co.reverse(v),this.getFactory().createLineString(v)},d.prototype.compareToSameClass=function(){if(1===arguments.length){for(var v=arguments[0],b=0,B=0;b<this._points.size()&&B<v._points.size();){var z=this._points.getCoordinate(b).compareTo(v._points.getCoordinate(B));if(0!==z)return z;b++,B++}return b<this._points.size()?1:B<v._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},d.prototype.apply=function(){if(At(arguments[0],ur))for(var v=arguments[0],b=0;b<this._points.size();b++)v.filter(this._points.getCoordinate(b));else if(At(arguments[0],y2)){var B=arguments[0];if(0===this._points.size())return null;for(var z=0;z<this._points.size()&&(B.filter(this._points,z),!B.isDone());z++);B.isGeometryChanged()&&this.geometryChanged()}else(At(arguments[0],Pa)||At(arguments[0],Hi))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return new y1(this).getBoundary()},d.prototype.isEquivalentClass=function(v){return v instanceof d},d.prototype.clone=function(){var v=h.prototype.clone.call(this);return v._points=this._points.clone(),v},d.prototype.getCoordinateN=function(v){return this._points.getCoordinate(v)},d.prototype.getGeometryType=function(){return"LineString"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._points},d.prototype.isEmpty=function(){return 0===this._points.size()},d.prototype.init=function(v){if(null===v&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),1===v.size())throw new X("Invalid number of points in LineString (found "+v.size()+" - must be 0 or >= 2)");this._points=v},d.prototype.isCoordinate=function(v){for(var b=0;b<this._points.size();b++)if(this._points.getCoordinate(b).equals(v))return!0;return!1},d.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},d.prototype.getPointN=function(v){return this.getFactory().createPoint(this._points.getCoordinate(v))},d.prototype.interfaces_=function(){return[au]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(d,m),d}(yn),gh=function(){};gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh};var hc=function(h){function d(v,b){h.call(this,b),this._coordinates=v||null,this.init(this._coordinates)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new on;var v=new on;return v.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),v},d.prototype.getSortIndex=function(){return h.SORTINDEX_POINT},d.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];return!!this.isEquivalentClass(v)&&(!(!this.isEmpty()||!v.isEmpty())||this.isEmpty()===v.isEmpty()&&this.equal(v.getCoordinate(),this.getCoordinate(),b))}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){},d.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},d.prototype.getBoundaryDimension=function(){return xi.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getNumPoints=function(){return this.isEmpty()?0:1},d.prototype.reverse=function(){return this.copy()},d.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},d.prototype.compareToSameClass=function(){if(1===arguments.length){var v=arguments[0];return this.getCoordinate().compareTo(v.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},d.prototype.apply=function(){if(At(arguments[0],ur)){var v=arguments[0];if(this.isEmpty())return null;v.filter(this.getCoordinate())}else if(At(arguments[0],y2)){var b=arguments[0];if(this.isEmpty())return null;b.filter(this._coordinates,0),b.isGeometryChanged()&&this.geometryChanged()}else(At(arguments[0],Pa)||At(arguments[0],Hi))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.clone=function(){var v=h.prototype.clone.call(this);return v._coordinates=this._coordinates.clone(),v},d.prototype.getGeometryType=function(){return"Point"},d.prototype.copy=function(){return new d(this._coordinates.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._coordinates},d.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},d.prototype.isEmpty=function(){return 0===this._coordinates.size()},d.prototype.init=function(v){null===v&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),ee.isTrue(v.size()<=1),this._coordinates=v},d.prototype.isSimple=function(){return!0},d.prototype.interfaces_=function(){return[gh]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(d,m),d}(yn),w2=function(){};w2.prototype.interfaces_=function(){return[]},w2.prototype.getClass=function(){return w2};var qo=function(h){function d(v,b,B){if(h.call(this,B),this._shell=null,this._holes=null,null===v&&(v=this.getFactory().createLinearRing()),null===b&&(b=[]),h.hasNullElements(b))throw new X("holes must not contain null elements");if(v.isEmpty()&&h.hasNonEmptyElements(b))throw new X("shell is empty but holes are not");this._shell=v,this._holes=b}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},d.prototype.getSortIndex=function(){return h.SORTINDEX_POLYGON},d.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var v=new Array(this.getNumPoints()).fill(null),b=-1,B=this._shell.getCoordinates(),z=0;z<B.length;z++)v[++b]=B[z];for(var q=0;q<this._holes.length;q++)for(var pe=this._holes[q].getCoordinates(),Ue=0;Ue<pe.length;Ue++)v[++b]=pe[Ue];return v},d.prototype.getArea=function(){var v=0;v+=Math.abs(Mt.signedArea(this._shell.getCoordinateSequence()));for(var b=0;b<this._holes.length;b++)v-=Math.abs(Mt.signedArea(this._holes[b].getCoordinateSequence()));return v},d.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var v=this._shell.getCoordinateSequence(),b=this.getEnvelopeInternal(),B=0;B<5;B++){var z=v.getX(B);if(z!==b.getMinX()&&z!==b.getMaxX())return!1;var q=v.getY(B);if(q!==b.getMinY()&&q!==b.getMaxY())return!1}for(var pe=v.getX(0),Ue=v.getY(0),gt=1;gt<=4;gt++){var pt=v.getX(gt),fn=v.getY(gt);if(pt!==pe==(fn!==Ue))return!1;pe=pt,Ue=fn}return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];if(!this.isEquivalentClass(v))return!1;var B=v;if(!this._shell.equalsExact(B._shell,b)||this._holes.length!==B._holes.length)return!1;for(var pe=0;pe<this._holes.length;pe++)if(!this._holes[pe].equalsExact(B._holes[pe],b))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var v=0;v<this._holes.length;v++)this.normalize(this._holes[v],!1);Yl.sort(this._holes)}else if(2===arguments.length){var b=arguments[0],B=arguments[1];if(b.isEmpty())return null;var z=new Array(b.getCoordinates().length-1).fill(null);qt.arraycopy(b.getCoordinates(),0,z,0,z.length);var q=Fi.minCoordinate(b.getCoordinates());Fi.scroll(z,q),qt.arraycopy(z,0,b.getCoordinates(),0,z.length),b.getCoordinates()[z.length]=z[0],Mt.isCCW(b.getCoordinates())===B&&Fi.reverse(b.getCoordinates())}},d.prototype.getCoordinate=function(){return this._shell.getCoordinate()},d.prototype.getNumInteriorRing=function(){return this._holes.length},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.getLength=function(){var v=0;v+=this._shell.getLength();for(var b=0;b<this._holes.length;b++)v+=this._holes[b].getLength();return v},d.prototype.getNumPoints=function(){for(var v=this._shell.getNumPoints(),b=0;b<this._holes.length;b++)v+=this._holes[b].getNumPoints();return v},d.prototype.reverse=function(){var v=this.copy();v._shell=this._shell.copy().reverse(),v._holes=new Array(this._holes.length).fill(null);for(var b=0;b<this._holes.length;b++)v._holes[b]=this._holes[b].copy().reverse();return v},d.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},d.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var q=arguments[1],pe=arguments[0],pt=this._shell.compareToSameClass(pe._shell,q);if(0!==pt)return pt;for(var fn=this.getNumInteriorRing(),Mn=pe.getNumInteriorRing(),Fn=0;Fn<fn&&Fn<Mn;){var Zn=this.getInteriorRingN(Fn),zr=pe.getInteriorRingN(Fn),Fo=Zn.compareToSameClass(zr,q);if(0!==Fo)return Fo;Fn++}return Fn<fn?1:Fn<Mn?-1:0}},d.prototype.apply=function(v){if(At(v,ur)){this._shell.apply(v);for(var b=0;b<this._holes.length;b++)this._holes[b].apply(v)}else if(At(v,y2)){if(this._shell.apply(v),!v.isDone())for(var B=0;B<this._holes.length&&(this._holes[B].apply(v),!v.isDone());B++);v.isGeometryChanged()&&this.geometryChanged()}else if(At(v,Pa))v.filter(this);else if(At(v,Hi)){v.filter(this),this._shell.apply(v);for(var z=0;z<this._holes.length;z++)this._holes[z].apply(v)}},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var v=new Array(this._holes.length+1).fill(null);v[0]=this._shell;for(var b=0;b<this._holes.length;b++)v[b+1]=this._holes[b];return v.length<=1?this.getFactory().createLinearRing(v[0].getCoordinateSequence()):this.getFactory().createMultiLineString(v)},d.prototype.clone=function(){var v=h.prototype.clone.call(this);v._shell=this._shell.clone(),v._holes=new Array(this._holes.length).fill(null);for(var b=0;b<this._holes.length;b++)v._holes[b]=this._holes[b].clone();return v},d.prototype.getGeometryType=function(){return"Polygon"},d.prototype.copy=function(){for(var v=this._shell.copy(),b=new Array(this._holes.length).fill(null),B=0;B<b.length;B++)b[B]=this._holes[B].copy();return new d(v,b,this._factory)},d.prototype.getExteriorRing=function(){return this._shell},d.prototype.isEmpty=function(){return this._shell.isEmpty()},d.prototype.getInteriorRingN=function(v){return this._holes[v]},d.prototype.interfaces_=function(){return[w2]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(d,m),d}(yn),Zl=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return yn.SORTINDEX_MULTIPOINT},d.prototype.isValid=function(){return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];return!!this.isEquivalentClass(v)&&h.prototype.equalsExact.call(this,v,b)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():h.prototype.getCoordinate.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return xi.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.getGeometryType=function(){return"MultiPoint"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),b=0;b<v.length;b++)v[b]=this._geometries[b].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[gh]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(d,m),d}(_1),N2=function(h){function d(v,b){v instanceof $&&b instanceof qi&&(v=b.getCoordinateSequenceFactory().create(v)),h.call(this,v,b),this.validateConstruction()}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return yn.SORTINDEX_LINEARRING},d.prototype.getBoundaryDimension=function(){return xi.FALSE},d.prototype.isClosed=function(){return!!this.isEmpty()||h.prototype.isClosed.call(this)},d.prototype.reverse=function(){var v=this._points.copy();return Co.reverse(v),this.getFactory().createLinearRing(v)},d.prototype.validateConstruction=function(){if(!this.isEmpty()&&!h.prototype.isClosed.call(this))throw new X("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<d.MINIMUM_VALID_SIZE)throw new X("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},d.prototype.getGeometryType=function(){return"LinearRing"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.MINIMUM_VALID_SIZE.get=function(){return 4},m.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(d,m),d}(go),kc=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return yn.SORTINDEX_MULTIPOLYGON},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];return!!this.isEquivalentClass(v)&&h.prototype.equalsExact.call(this,v,b)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.reverse=function(){for(var b=new Array(this._geometries.length).fill(null),B=0;B<this._geometries.length;B++)b[B]=this._geometries[B].reverse();return this.getFactory().createMultiPolygon(b)},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var v=new rn,b=0;b<this._geometries.length;b++)for(var B=this._geometries[b].getBoundary(),z=0;z<B.getNumGeometries();z++)v.add(B.getGeometryN(z));var q=new Array(v.size()).fill(null);return this.getFactory().createMultiLineString(v.toArray(q))},d.prototype.getGeometryType=function(){return"MultiPolygon"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),b=0;b<v.length;b++)v[b]=this._geometries[b].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[w2]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(d,m),d}(_1),fs=function(h){this._factory=h||null,this._isUserDataCopied=!1},e2={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};fs.prototype.setCopyUserData=function(h){this._isUserDataCopied=h},fs.prototype.edit=function(h,d){if(null===h)return null;var m=this.editInternal(h,d);return this._isUserDataCopied&&m.setUserData(h.getUserData()),m},fs.prototype.editInternal=function(h,d){return null===this._factory&&(this._factory=h.getFactory()),h instanceof _1?this.editGeometryCollection(h,d):h instanceof qo?this.editPolygon(h,d):h instanceof hc||h instanceof go?d.edit(h,this._factory):(ee.shouldNeverReachHere("Unsupported Geometry class: "+h.getClass().getName()),null)},fs.prototype.editGeometryCollection=function(h,d){for(var m=d.edit(h,this._factory),v=new rn,b=0;b<m.getNumGeometries();b++){var B=this.edit(m.getGeometryN(b),d);null===B||B.isEmpty()||v.add(B)}return m.getClass()===Zl?this._factory.createMultiPoint(v.toArray([])):m.getClass()===R3?this._factory.createMultiLineString(v.toArray([])):m.getClass()===kc?this._factory.createMultiPolygon(v.toArray([])):this._factory.createGeometryCollection(v.toArray([]))},fs.prototype.editPolygon=function(h,d){var m=d.edit(h,this._factory);if(null===m&&(m=this._factory.createPolygon(null)),m.isEmpty())return m;var v=this.edit(m.getExteriorRing(),d);if(null===v||v.isEmpty())return this._factory.createPolygon();for(var b=new rn,B=0;B<m.getNumInteriorRing();B++){var z=this.edit(m.getInteriorRingN(B),d);null===z||z.isEmpty()||b.add(z)}return this._factory.createPolygon(v,b.toArray([]))},fs.prototype.interfaces_=function(){return[]},fs.prototype.getClass=function(){return fs},fs.GeometryEditorOperation=function(){},e2.NoOpGeometryOperation.get=function(){return F3},e2.CoordinateOperation.get=function(){return ml},e2.CoordinateSequenceOperation.get=function(){return ks},Object.defineProperties(fs,e2);var F3=function(){};F3.prototype.edit=function(h,d){return h},F3.prototype.interfaces_=function(){return[fs.GeometryEditorOperation]},F3.prototype.getClass=function(){return F3};var ml=function(){};ml.prototype.edit=function(h,d){var m=this.editCoordinates(h.getCoordinates(),h);return null===m?h:h instanceof N2?d.createLinearRing(m):h instanceof go?d.createLineString(m):h instanceof hc?m.length>0?d.createPoint(m[0]):d.createPoint():h},ml.prototype.interfaces_=function(){return[fs.GeometryEditorOperation]},ml.prototype.getClass=function(){return ml};var ks=function(){};ks.prototype.edit=function(h,d){return h instanceof N2?d.createLinearRing(this.edit(h.getCoordinateSequence(),h)):h instanceof go?d.createLineString(this.edit(h.getCoordinateSequence(),h)):h instanceof hc?d.createPoint(this.edit(h.getCoordinateSequence(),h)):h},ks.prototype.interfaces_=function(){return[fs.GeometryEditorOperation]},ks.prototype.getClass=function(){return ks};var mo=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var h=arguments[0];this._coordinates=new Array(h).fill(null);for(var d=0;d<h;d++)this._coordinates[d]=new $}else if(At(arguments[0],vt)){var m=arguments[0];if(null===m)return this._coordinates=new Array(0).fill(null),null;this._dimension=m.getDimension(),this._coordinates=new Array(m.size()).fill(null);for(var v=0;v<this._coordinates.length;v++)this._coordinates[v]=m.getCoordinateCopy(v)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var b=arguments[0],B=arguments[1];this._coordinates=b,this._dimension=B,null===b&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var z=arguments[0],q=arguments[1];this._coordinates=new Array(z).fill(null),this._dimension=q;for(var pe=0;pe<z;pe++)this._coordinates[pe]=new $}},lo={serialVersionUID:{configurable:!0}};mo.prototype.setOrdinate=function(h,d,m){switch(d){case vt.X:this._coordinates[h].x=m;break;case vt.Y:this._coordinates[h].y=m;break;case vt.Z:this._coordinates[h].z=m;break;default:throw new X("invalid ordinateIndex")}},mo.prototype.size=function(){return this._coordinates.length},mo.prototype.getOrdinate=function(h,d){switch(d){case vt.X:return this._coordinates[h].x;case vt.Y:return this._coordinates[h].y;case vt.Z:return this._coordinates[h].z}return Y.NaN},mo.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var d=arguments[0],m=arguments[1];m.x=this._coordinates[d].x,m.y=this._coordinates[d].y,m.z=this._coordinates[d].z}},mo.prototype.getCoordinateCopy=function(h){return new $(this._coordinates[h])},mo.prototype.getDimension=function(){return this._dimension},mo.prototype.getX=function(h){return this._coordinates[h].x},mo.prototype.clone=function(){for(var h=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)h[d]=this._coordinates[d].clone();return new mo(h,this._dimension)},mo.prototype.expandEnvelope=function(h){for(var d=0;d<this._coordinates.length;d++)h.expandToInclude(this._coordinates[d]);return h},mo.prototype.copy=function(){for(var h=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)h[d]=this._coordinates[d].copy();return new mo(h,this._dimension)},mo.prototype.toString=function(){if(this._coordinates.length>0){var h=new be(17*this._coordinates.length);h.append("("),h.append(this._coordinates[0]);for(var d=1;d<this._coordinates.length;d++)h.append(", "),h.append(this._coordinates[d]);return h.append(")"),h.toString()}return"()"},mo.prototype.getY=function(h){return this._coordinates[h].y},mo.prototype.toCoordinateArray=function(){return this._coordinates},mo.prototype.interfaces_=function(){return[vt,ue]},mo.prototype.getClass=function(){return mo},lo.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(mo,lo);var fc=function(){},c0={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};fc.prototype.readResolve=function(){return fc.instance()},fc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new mo(arguments[0]);if(At(arguments[0],vt))return new mo(arguments[0])}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return v>3&&(v=3),v<2?new mo(m):new mo(m,v)}},fc.prototype.interfaces_=function(){return[He,ue]},fc.prototype.getClass=function(){return fc},fc.instance=function(){return fc.instanceObject},c0.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},c0.instanceObject.get=function(){return new fc},Object.defineProperties(fc,c0);var pr=function(h){function d(){h.call(this),this.map_=new Map}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.get=function(m){return this.map_.get(m)||null},d.prototype.put=function(m,v){return this.map_.set(m,v),v},d.prototype.values=function(){for(var m=new rn,v=this.map_.values(),b=v.next();!b.done;)m.add(b.value),b=v.next();return m},d.prototype.entrySet=function(){var m=new qf;return this.map_.entries().forEach(function(v){return m.add(v)}),m},d.prototype.size=function(){return this.map_.size()},d}(ou),Ln=function h(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=h.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Al){var d=arguments[0];this._modelType=d,d===h.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var m=arguments[0];this._modelType=h.FIXED,this.setScale(m)}else if(arguments[0]instanceof h){var v=arguments[0];this._modelType=v._modelType,this._scale=v._scale}},C1={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ln.prototype.equals=function(h){return h instanceof Ln&&this._modelType===h._modelType&&this._scale===h._scale},Ln.prototype.compareTo=function(h){var d=h,m=this.getMaximumSignificantDigits(),v=d.getMaximumSignificantDigits();return new Qe(m).compareTo(new Qe(v))},Ln.prototype.getScale=function(){return this._scale},Ln.prototype.isFloating=function(){return this._modelType===Ln.FLOATING||this._modelType===Ln.FLOATING_SINGLE},Ln.prototype.getType=function(){return this._modelType},Ln.prototype.toString=function(){var h="UNKNOWN";return this._modelType===Ln.FLOATING?h="Floating":this._modelType===Ln.FLOATING_SINGLE?h="Floating-Single":this._modelType===Ln.FIXED&&(h="Fixed (Scale="+this.getScale()+")"),h},Ln.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var h=arguments[0];return Y.isNaN(h)||this._modelType===Ln.FLOATING_SINGLE?h:this._modelType===Ln.FIXED?Math.round(h*this._scale)/this._scale:h}if(arguments[0]instanceof $){var d=arguments[0];if(this._modelType===Ln.FLOATING)return null;d.x=this.makePrecise(d.x),d.y=this.makePrecise(d.y)}},Ln.prototype.getMaximumSignificantDigits=function(){var h=16;return this._modelType===Ln.FLOATING?h=16:this._modelType===Ln.FLOATING_SINGLE?h=6:this._modelType===Ln.FIXED&&(h=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),h},Ln.prototype.setScale=function(h){this._scale=Math.abs(h)},Ln.prototype.interfaces_=function(){return[ue,J]},Ln.prototype.getClass=function(){return Ln},Ln.mostPrecise=function(h,d){return h.compareTo(d)>=0?h:d},C1.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},C1.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Ln,C1);var Al=function h(d){this._name=d||null,h.nameToTypeMap.put(d,this)},Kt={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Al.prototype.readResolve=function(){return Al.nameToTypeMap.get(this._name)},Al.prototype.toString=function(){return this._name},Al.prototype.interfaces_=function(){return[ue]},Al.prototype.getClass=function(){return Al},Kt.serialVersionUID.get=function(){return-552860263173159e4},Kt.nameToTypeMap.get=function(){return new pr},Object.defineProperties(Al,Kt),Ln.Type=Al,Ln.FIXED=new Al("FIXED"),Ln.FLOATING=new Al("FLOATING"),Ln.FLOATING_SINGLE=new Al("FLOATING SINGLE");var qi=function h(){this._precisionModel=new Ln,this._SRID=0,this._coordinateSequenceFactory=h.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?At(arguments[0],He)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ln&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},nr={serialVersionUID:{configurable:!0}};qi.prototype.toGeometry=function(h){return h.isNull()?this.createPoint(null):h.getMinX()===h.getMaxX()&&h.getMinY()===h.getMaxY()?this.createPoint(new $(h.getMinX(),h.getMinY())):h.getMinX()===h.getMaxX()||h.getMinY()===h.getMaxY()?this.createLineString([new $(h.getMinX(),h.getMinY()),new $(h.getMaxX(),h.getMaxY())]):this.createPolygon(this.createLinearRing([new $(h.getMinX(),h.getMinY()),new $(h.getMinX(),h.getMaxY()),new $(h.getMaxX(),h.getMaxY()),new $(h.getMaxX(),h.getMinY()),new $(h.getMinX(),h.getMinY())]),null)},qi.prototype.createLineString=function(h){return h?h instanceof Array?new go(this.getCoordinateSequenceFactory().create(h),this):At(h,vt)?new go(h,this):void 0:new go(this.getCoordinateSequenceFactory().create([]),this)},qi.prototype.createMultiLineString=function(){return 0===arguments.length?new R3(null,this):1===arguments.length?new R3(arguments[0],this):void 0},qi.prototype.buildGeometry=function(h){for(var d=null,m=!1,v=!1,b=h.iterator();b.hasNext();){var B=b.next(),z=B.getClass();null===d&&(d=z),z!==d&&(m=!0),B.isGeometryCollectionOrDerived()&&(v=!0)}if(null===d)return this.createGeometryCollection();if(m||v)return this.createGeometryCollection(qi.toGeometryArray(h));var q=h.iterator().next();if(h.size()>1){if(q instanceof qo)return this.createMultiPolygon(qi.toPolygonArray(h));if(q instanceof go)return this.createMultiLineString(qi.toLineStringArray(h));if(q instanceof hc)return this.createMultiPoint(qi.toPointArray(h));ee.shouldNeverReachHere("Unhandled class: "+q.getClass().getName())}return q},qi.prototype.createMultiPointFromCoords=function(h){return this.createMultiPoint(null!==h?this.getCoordinateSequenceFactory().create(h):null)},qi.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];return this.createPoint(null!==h?this.getCoordinateSequenceFactory().create([h]):null)}if(At(arguments[0],vt))return new hc(arguments[0],this)}},qi.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},qi.prototype.createPolygon=function(){if(0===arguments.length)return new qo(null,null,this);if(1===arguments.length){if(At(arguments[0],vt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof N2)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new qo(arguments[0],arguments[1],this)},qi.prototype.getSRID=function(){return this._SRID},qi.prototype.createGeometryCollection=function(){return 0===arguments.length?new _1(null,this):1===arguments.length?new _1(arguments[0],this):void 0},qi.prototype.createGeometry=function(h){return new fs(this).edit(h,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},qi.prototype.getPrecisionModel=function(){return this._precisionModel},qi.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var h=arguments[0];return this.createLinearRing(null!==h?this.getCoordinateSequenceFactory().create(h):null)}if(At(arguments[0],vt))return new N2(arguments[0],this)}},qi.prototype.createMultiPolygon=function(){return 0===arguments.length?new kc(null,this):1===arguments.length?new kc(arguments[0],this):void 0},qi.prototype.createMultiPoint=function(){if(0===arguments.length)return new Zl(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Zl(arguments[0],this);if(arguments[0]instanceof Array){var d=arguments[0];return this.createMultiPoint(null!==d?this.getCoordinateSequenceFactory().create(d):null)}if(At(arguments[0],vt)){var m=arguments[0];if(null===m)return this.createMultiPoint(new Array(0).fill(null));for(var v=new Array(m.size()).fill(null),b=0;b<m.size();b++){var B=this.getCoordinateSequenceFactory().create(1,m.getDimension());Co.copy(m,b,B,0,1),v[b]=this.createPoint(B)}return this.createMultiPoint(v)}}},qi.prototype.interfaces_=function(){return[ue]},qi.prototype.getClass=function(){return qi},qi.toMultiPolygonArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toGeometryArray=function(h){if(null===h)return null;var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.getDefaultCoordinateSequenceFactory=function(){return fc.instance()},qi.toMultiLineStringArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toLineStringArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toMultiPointArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toLinearRingArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toPointArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toPolygonArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.createPointFromInternalCoord=function(h,d){return d.getPrecisionModel().makePrecise(h),d.getFactory().createPoint(h)},nr.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(qi,nr);var Ps=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Kf=function(h){this.geometryFactory=h||new qi};Kf.prototype.read=function(h){var d,m=(d="string"==typeof h?JSON.parse(h):h).type;if(!vl[m])throw new Error("Unknown GeoJSON type: "+d.type);return-1!==Ps.indexOf(m)?vl[m].apply(this,[d.coordinates]):vl[m].apply(this,"GeometryCollection"===m?[d.geometries]:[d])},Kf.prototype.write=function(h){var d=h.getGeometryType();if(!Jl[d])throw new Error("Geometry is not supported");return Jl[d].apply(this,[h])};var vl={Feature:function(h){var d={};for(var m in h)d[m]=h[m];if(h.geometry){if(!vl[h.geometry.type])throw new Error("Unknown GeoJSON type: "+h.type);d.geometry=this.read(h.geometry)}return h.bbox&&(d.bbox=vl.bbox.apply(this,[h.bbox])),d},FeatureCollection:function(h){var d={};if(h.features){d.features=[];for(var m=0;m<h.features.length;++m)d.features.push(this.read(h.features[m]))}return h.bbox&&(d.bbox=this.parse.bbox.apply(this,[h.bbox])),d},coordinates:function(h){for(var d=[],m=0;m<h.length;++m){var v=h[m];d.push(new $(v[0],v[1]))}return d},bbox:function(h){return this.geometryFactory.createLinearRing([new $(h[0],h[1]),new $(h[2],h[1]),new $(h[2],h[3]),new $(h[0],h[3]),new $(h[0],h[1])])},Point:function(h){var d=new $(h[0],h[1]);return this.geometryFactory.createPoint(d)},MultiPoint:function(h){for(var d=[],m=0;m<h.length;++m)d.push(vl.Point.apply(this,[h[m]]));return this.geometryFactory.createMultiPoint(d)},LineString:function(h){var d=vl.coordinates.apply(this,[h]);return this.geometryFactory.createLineString(d)},MultiLineString:function(h){for(var d=[],m=0;m<h.length;++m)d.push(vl.LineString.apply(this,[h[m]]));return this.geometryFactory.createMultiLineString(d)},Polygon:function(h){for(var d=vl.coordinates.apply(this,[h[0]]),m=this.geometryFactory.createLinearRing(d),v=[],b=1;b<h.length;++b){var z=vl.coordinates.apply(this,[h[b]]),q=this.geometryFactory.createLinearRing(z);v.push(q)}return this.geometryFactory.createPolygon(m,v)},MultiPolygon:function(h){for(var d=[],m=0;m<h.length;++m)d.push(vl.Polygon.apply(this,[h[m]]));return this.geometryFactory.createMultiPolygon(d)},GeometryCollection:function(h){for(var d=[],m=0;m<h.length;++m)d.push(this.read(h[m]));return this.geometryFactory.createGeometryCollection(d)}},Jl={coordinate:function(h){return[h.x,h.y]},Point:function(h){return{type:"Point",coordinates:Jl.coordinate.apply(this,[h.getCoordinate()])}},MultiPoint:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var b=Jl.Point.apply(this,[h._geometries[m]]);d.push(b.coordinates)}return{type:"MultiPoint",coordinates:d}},LineString:function(h){for(var d=[],m=h.getCoordinates(),v=0;v<m.length;++v)d.push(Jl.coordinate.apply(this,[m[v]]));return{type:"LineString",coordinates:d}},MultiLineString:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var b=Jl.LineString.apply(this,[h._geometries[m]]);d.push(b.coordinates)}return{type:"MultiLineString",coordinates:d}},Polygon:function(h){var d=[],m=Jl.LineString.apply(this,[h._shell]);d.push(m.coordinates);for(var v=0;v<h._holes.length;++v){var B=Jl.LineString.apply(this,[h._holes[v]]);d.push(B.coordinates)}return{type:"Polygon",coordinates:d}},MultiPolygon:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var b=Jl.Polygon.apply(this,[h._geometries[m]]);d.push(b.coordinates)}return{type:"MultiPolygon",coordinates:d}},GeometryCollection:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var v=h._geometries[m],b=v.getGeometryType();d.push(Jl[b].apply(this,[v]))}return{type:"GeometryCollection",geometries:d}}},k3=function(h){this.geometryFactory=h||new qi,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Kf(this.geometryFactory)};k3.prototype.read=function(h){var d=this.parser.read(h);return this.precisionModel.getType()===Ln.FIXED&&this.reducePrecision(d),d},k3.prototype.reducePrecision=function(h){var d,m;if(h.coordinate)this.precisionModel.makePrecise(h.coordinate);else if(h.points)for(d=0,m=h.points.length;d<m;d++)this.precisionModel.makePrecise(h.points[d]);else if(h.geometries)for(d=0,m=h.geometries.length;d<m;d++)this.reducePrecision(h.geometries[d])};var t2=function(){this.parser=new Kf(this.geometryFactory)};t2.prototype.write=function(h){return this.parser.write(h)};var hn=function(){},Xf={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.opposite=function(h){return h===hn.LEFT?hn.RIGHT:h===hn.RIGHT?hn.LEFT:h},Xf.ON.get=function(){return 0},Xf.LEFT.get=function(){return 1},Xf.RIGHT.get=function(){return 2},Object.defineProperties(hn,Xf),(Ve.prototype=new Error).name="EmptyStackException",(Ye.prototype=new $o).add=function(h){return this.array_.push(h),!0},Ye.prototype.get=function(h){if(h<0||h>=this.size())throw new Error;return this.array_[h]},Ye.prototype.push=function(h){return this.array_.push(h),h},Ye.prototype.pop=function(h){if(0===this.array_.length)throw new Ve;return this.array_.pop()},Ye.prototype.peek=function(){if(0===this.array_.length)throw new Ve;return this.array_[this.array_.length-1]},Ye.prototype.empty=function(){return 0===this.array_.length},Ye.prototype.isEmpty=function(){return this.empty()},Ye.prototype.search=function(h){return this.array_.indexOf(h)},Ye.prototype.size=function(){return this.array_.length},Ye.prototype.toArray=function(){for(var h=[],d=0,m=this.array_.length;d<m;d++)h.push(this.array_[d]);return h};var _l=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};_l.prototype.getCoordinate=function(){return this._minCoord},_l.prototype.getRightmostSide=function(h,d){var m=this.getRightmostSideOfSegment(h,d);return m<0&&(m=this.getRightmostSideOfSegment(h,d-1)),m<0&&(this._minCoord=null,this.checkForRightmostCoordinate(h)),m},_l.prototype.findRightmostEdgeAtVertex=function(){var h=this._minDe.getEdge().getCoordinates();ee.isTrue(this._minIndex>0&&this._minIndex<h.length,"rightmost point expected to be interior vertex of edge");var d=h[this._minIndex-1],m=h[this._minIndex+1],v=Mt.computeOrientation(this._minCoord,m,d),b=!1;(d.y<this._minCoord.y&&m.y<this._minCoord.y&&v===Mt.COUNTERCLOCKWISE||d.y>this._minCoord.y&&m.y>this._minCoord.y&&v===Mt.CLOCKWISE)&&(b=!0),b&&(this._minIndex=this._minIndex-1)},_l.prototype.getRightmostSideOfSegment=function(h,d){var m=h.getEdge().getCoordinates();if(d<0||d+1>=m.length||m[d].y===m[d+1].y)return-1;var v=hn.LEFT;return m[d].y<m[d+1].y&&(v=hn.RIGHT),v},_l.prototype.getEdge=function(){return this._orientedDe},_l.prototype.checkForRightmostCoordinate=function(h){for(var d=h.getEdge().getCoordinates(),m=0;m<d.length-1;m++)(null===this._minCoord||d[m].x>this._minCoord.x)&&(this._minDe=h,this._minIndex=m,this._minCoord=d[m])},_l.prototype.findRightmostEdgeAtNode=function(){var h=this._minDe.getNode().getEdges();this._minDe=h.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},_l.prototype.findEdge=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next();m.isForward()&&this.checkForRightmostCoordinate(m)}ee.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===hn.LEFT&&(this._orientedDe=this._minDe.getSym())},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l};var r1=function(h){function d(m,v){h.call(this,d.msgWithCoord(m,v)),this.pt=v?new $(v):null,this.name="TopologyException"}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getCoordinate=function(){return this.pt},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.msgWithCoord=function(m,v){return v?m:m+" [ "+v+" ]"},d}(le),mh=function(){this.array_=[]};mh.prototype.addLast=function(h){this.array_.push(h)},mh.prototype.removeFirst=function(){return this.array_.shift()},mh.prototype.isEmpty=function(){return 0===this.array_.length};var na=function(){this._finder=null,this._dirEdgeList=new rn,this._nodes=new rn,this._rightMostCoord=null,this._env=null,this._finder=new _l};na.prototype.clearVisitedEdges=function(){for(var h=this._dirEdgeList.iterator();h.hasNext();)h.next().setVisited(!1)},na.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},na.prototype.computeNodeDepth=function(h){for(var d=null,m=h.getEdges().iterator();m.hasNext();){var v=m.next();if(v.isVisited()||v.getSym().isVisited()){d=v;break}}if(null===d)throw new r1("unable to find edge to compute depths at "+h.getCoordinate());h.getEdges().computeDepths(d);for(var b=h.getEdges().iterator();b.hasNext();){var B=b.next();B.setVisited(!0),this.copySymDepths(B)}},na.prototype.computeDepth=function(h){this.clearVisitedEdges();var d=this._finder.getEdge();d.setEdgeDepths(hn.RIGHT,h),this.copySymDepths(d),this.computeDepths(d)},na.prototype.create=function(h){this.addReachable(h),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},na.prototype.findResultEdges=function(){for(var h=this._dirEdgeList.iterator();h.hasNext();){var d=h.next();d.getDepth(hn.RIGHT)>=1&&d.getDepth(hn.LEFT)<=0&&!d.isInteriorAreaEdge()&&d.setInResult(!0)}},na.prototype.computeDepths=function(h){var d=new qf,m=new mh,v=h.getNode();for(m.addLast(v),d.add(v),h.setVisited(!0);!m.isEmpty();){var b=m.removeFirst();d.add(b),this.computeNodeDepth(b);for(var B=b.getEdges().iterator();B.hasNext();){var z=B.next().getSym();if(!z.isVisited()){var q=z.getNode();d.contains(q)||(m.addLast(q),d.add(q))}}}},na.prototype.compareTo=function(h){return this._rightMostCoord.x<h._rightMostCoord.x?-1:this._rightMostCoord.x>h._rightMostCoord.x?1:0},na.prototype.getEnvelope=function(){if(null===this._env){for(var h=new on,d=this._dirEdgeList.iterator();d.hasNext();)for(var m=d.next().getEdge().getCoordinates(),v=0;v<m.length-1;v++)h.expandToInclude(m[v]);this._env=h}return this._env},na.prototype.addReachable=function(h){var d=new Ye;for(d.add(h);!d.empty();){var m=d.pop();this.add(m,d)}},na.prototype.copySymDepths=function(h){var d=h.getSym();d.setDepth(hn.LEFT,h.getDepth(hn.RIGHT)),d.setDepth(hn.RIGHT,h.getDepth(hn.LEFT))},na.prototype.add=function(h,d){h.setVisited(!0),this._nodes.add(h);for(var m=h.getEdges().iterator();m.hasNext();){var v=m.next();this._dirEdgeList.add(v);var b=v.getSym().getNode();b.isVisited()||d.push(b)}},na.prototype.getNodes=function(){return this._nodes},na.prototype.getDirectedEdges=function(){return this._dirEdgeList},na.prototype.interfaces_=function(){return[J]},na.prototype.getClass=function(){return na};var js=function h(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var m=arguments[0];this.init(1),this.location[hn.ON]=m}else if(arguments[0]instanceof h){var v=arguments[0];if(this.init(v.location.length),null!==v)for(var b=0;b<this.location.length;b++)this.location[b]=v.location[b]}}else if(3===arguments.length){var B=arguments[0],z=arguments[1],q=arguments[2];this.init(3),this.location[hn.ON]=B,this.location[hn.LEFT]=z,this.location[hn.RIGHT]=q}};js.prototype.setAllLocations=function(h){for(var d=0;d<this.location.length;d++)this.location[d]=h},js.prototype.isNull=function(){for(var h=0;h<this.location.length;h++)if(this.location[h]!==oe.NONE)return!1;return!0},js.prototype.setAllLocationsIfNull=function(h){for(var d=0;d<this.location.length;d++)this.location[d]===oe.NONE&&(this.location[d]=h)},js.prototype.isLine=function(){return 1===this.location.length},js.prototype.merge=function(h){if(h.location.length>this.location.length){var d=new Array(3).fill(null);d[hn.ON]=this.location[hn.ON],d[hn.LEFT]=oe.NONE,d[hn.RIGHT]=oe.NONE,this.location=d}for(var m=0;m<this.location.length;m++)this.location[m]===oe.NONE&&m<h.location.length&&(this.location[m]=h.location[m])},js.prototype.getLocations=function(){return this.location},js.prototype.flip=function(){if(this.location.length<=1)return null;var h=this.location[hn.LEFT];this.location[hn.LEFT]=this.location[hn.RIGHT],this.location[hn.RIGHT]=h},js.prototype.toString=function(){var h=new be;return this.location.length>1&&h.append(oe.toLocationSymbol(this.location[hn.LEFT])),h.append(oe.toLocationSymbol(this.location[hn.ON])),this.location.length>1&&h.append(oe.toLocationSymbol(this.location[hn.RIGHT])),h.toString()},js.prototype.setLocations=function(h,d,m){this.location[hn.ON]=h,this.location[hn.LEFT]=d,this.location[hn.RIGHT]=m},js.prototype.get=function(h){return h<this.location.length?this.location[h]:oe.NONE},js.prototype.isArea=function(){return this.location.length>1},js.prototype.isAnyNull=function(){for(var h=0;h<this.location.length;h++)if(this.location[h]===oe.NONE)return!0;return!1},js.prototype.setLocation=function(){1===arguments.length?this.setLocation(hn.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},js.prototype.init=function(h){this.location=new Array(h).fill(null),this.setAllLocations(oe.NONE)},js.prototype.isEqualOnSide=function(h,d){return this.location[d]===h.location[d]},js.prototype.allPositionsEqual=function(h){for(var d=0;d<this.location.length;d++)if(this.location[d]!==h)return!1;return!0},js.prototype.interfaces_=function(){return[]},js.prototype.getClass=function(){return js};var ds=function h(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var d=arguments[0];this.elt[0]=new js(d),this.elt[1]=new js(d)}else if(arguments[0]instanceof h){var m=arguments[0];this.elt[0]=new js(m.elt[0]),this.elt[1]=new js(m.elt[1])}}else if(2===arguments.length){var v=arguments[0],b=arguments[1];this.elt[0]=new js(oe.NONE),this.elt[1]=new js(oe.NONE),this.elt[v].setLocation(b)}else if(3===arguments.length){var B=arguments[0],z=arguments[1],q=arguments[2];this.elt[0]=new js(B,z,q),this.elt[1]=new js(B,z,q)}else if(4===arguments.length){var pe=arguments[0],Ue=arguments[1],gt=arguments[2],pt=arguments[3];this.elt[0]=new js(oe.NONE,oe.NONE,oe.NONE),this.elt[1]=new js(oe.NONE,oe.NONE,oe.NONE),this.elt[pe].setLocations(Ue,gt,pt)}};ds.prototype.getGeometryCount=function(){var h=0;return this.elt[0].isNull()||h++,this.elt[1].isNull()||h++,h},ds.prototype.setAllLocations=function(h,d){this.elt[h].setAllLocations(d)},ds.prototype.isNull=function(h){return this.elt[h].isNull()},ds.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var h=arguments[0];this.setAllLocationsIfNull(0,h),this.setAllLocationsIfNull(1,h)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},ds.prototype.isLine=function(h){return this.elt[h].isLine()},ds.prototype.merge=function(h){for(var d=0;d<2;d++)null===this.elt[d]&&null!==h.elt[d]?this.elt[d]=new js(h.elt[d]):this.elt[d].merge(h.elt[d])},ds.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},ds.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(hn.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},ds.prototype.toString=function(){var h=new be;return null!==this.elt[0]&&(h.append("A:"),h.append(this.elt[0].toString())),null!==this.elt[1]&&(h.append(" B:"),h.append(this.elt[1].toString())),h.toString()},ds.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},ds.prototype.isAnyNull=function(h){return this.elt[h].isAnyNull()},ds.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(hn.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},ds.prototype.isEqualOnSide=function(h,d){return this.elt[0].isEqualOnSide(h.elt[0],d)&&this.elt[1].isEqualOnSide(h.elt[1],d)},ds.prototype.allPositionsEqual=function(h,d){return this.elt[h].allPositionsEqual(d)},ds.prototype.toLine=function(h){this.elt[h].isArea()&&(this.elt[h]=new js(this.elt[h].location[0]))},ds.prototype.interfaces_=function(){return[]},ds.prototype.getClass=function(){return ds},ds.toLineLabel=function(h){for(var d=new ds(oe.NONE),m=0;m<2;m++)d.setLocation(m,h.getLocation(m));return d};var Ko=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new rn,this._pts=new rn,this._label=new ds(oe.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new rn,this._geometryFactory=null;var h=arguments[0];this._geometryFactory=arguments[1],this.computePoints(h),this.computeRing()};Ko.prototype.computeRing=function(){if(null!==this._ring)return null;for(var h=new Array(this._pts.size()).fill(null),d=0;d<this._pts.size();d++)h[d]=this._pts.get(d);this._ring=this._geometryFactory.createLinearRing(h),this._isHole=Mt.isCCW(this._ring.getCoordinates())},Ko.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ko.prototype.computePoints=function(h){this._startDe=h;var d=h,m=!0;do{if(null===d)throw new r1("Found null DirectedEdge");if(d.getEdgeRing()===this)throw new r1("Directed Edge visited twice during ring-building at "+d.getCoordinate());this._edges.add(d);var v=d.getLabel();ee.isTrue(v.isArea()),this.mergeLabel(v),this.addPoints(d.getEdge(),d.isForward(),m),m=!1,this.setEdgeRing(d,this),d=this.getNext(d)}while(d!==this._startDe)},Ko.prototype.getLinearRing=function(){return this._ring},Ko.prototype.getCoordinate=function(h){return this._pts.get(h)},Ko.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var h=this._startDe;do{var d=h.getNode().getEdges().getOutgoingDegree(this);d>this._maxNodeDegree&&(this._maxNodeDegree=d),h=this.getNext(h)}while(h!==this._startDe);this._maxNodeDegree*=2},Ko.prototype.addPoints=function(h,d,m){var v=h.getCoordinates();if(d){var b=1;m&&(b=0);for(var B=b;B<v.length;B++)this._pts.add(v[B])}else{var z=v.length-2;m&&(z=v.length-1);for(var q=z;q>=0;q--)this._pts.add(v[q])}},Ko.prototype.isHole=function(){return this._isHole},Ko.prototype.setInResult=function(){var h=this._startDe;do{h.getEdge().setInResult(!0),h=h.getNext()}while(h!==this._startDe)},Ko.prototype.containsPoint=function(h){var d=this.getLinearRing();if(!d.getEnvelopeInternal().contains(h)||!Mt.isPointInRing(h,d.getCoordinates()))return!1;for(var m=this._holes.iterator();m.hasNext();)if(m.next().containsPoint(h))return!1;return!0},Ko.prototype.addHole=function(h){this._holes.add(h)},Ko.prototype.isShell=function(){return null===this._shell},Ko.prototype.getLabel=function(){return this._label},Ko.prototype.getEdges=function(){return this._edges},Ko.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ko.prototype.getShell=function(){return this._shell},Ko.prototype.mergeLabel=function(){if(1===arguments.length){var h=arguments[0];this.mergeLabel(h,0),this.mergeLabel(h,1)}else if(2===arguments.length){var m=arguments[1],v=arguments[0].getLocation(m,hn.RIGHT);if(v===oe.NONE)return null;if(this._label.getLocation(m)===oe.NONE)return this._label.setLocation(m,v),null}},Ko.prototype.setShell=function(h){this._shell=h,null!==h&&h.addHole(this)},Ko.prototype.toPolygon=function(h){for(var d=new Array(this._holes.size()).fill(null),m=0;m<this._holes.size();m++)d[m]=this._holes.get(m).getLinearRing();return h.createPolygon(this.getLinearRing(),d)},Ko.prototype.interfaces_=function(){return[]},Ko.prototype.getClass=function(){return Ko};var Yf=function(h){function d(){h.call(this,arguments[0],arguments[1])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.setEdgeRing=function(m,v){m.setMinEdgeRing(v)},d.prototype.getNext=function(m){return m.getNextMin()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ko),Nm=function(h){function d(){h.call(this,arguments[0],arguments[1])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.buildMinimalRings=function(){var m=new rn,v=this._startDe;do{if(null===v.getMinEdgeRing()){var b=new Yf(v,this._geometryFactory);m.add(b)}v=v.getNext()}while(v!==this._startDe);return m},d.prototype.setEdgeRing=function(m,v){m.setEdgeRing(v)},d.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var m=this._startDe;do{m.getNode().getEdges().linkMinimalDirectedEdges(this),m=m.getNext()}while(m!==this._startDe)},d.prototype.getNext=function(m){return m.getNext()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ko),n2=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};n2.prototype.setVisited=function(h){this._isVisited=h},n2.prototype.setInResult=function(h){this._isInResult=h},n2.prototype.isCovered=function(){return this._isCovered},n2.prototype.isCoveredSet=function(){return this._isCoveredSet},n2.prototype.setLabel=function(h){this._label=h},n2.prototype.getLabel=function(){return this._label},n2.prototype.setCovered=function(h){this._isCovered=h,this._isCoveredSet=!0},n2.prototype.updateIM=function(h){ee.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(h)},n2.prototype.isInResult=function(){return this._isInResult},n2.prototype.isVisited=function(){return this._isVisited},n2.prototype.interfaces_=function(){return[]},n2.prototype.getClass=function(){return n2};var dc=function(h){function d(){h.call(this),this._coord=null,this._edges=null;var v=arguments[1];this._coord=arguments[0],this._edges=v,this._label=new ds(0,oe.NONE)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isIncidentEdgeInResult=function(){for(var m=this.getEdges().getEdges().iterator();m.hasNext();)if(m.next().getEdge().isInResult())return!0;return!1},d.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},d.prototype.getCoordinate=function(){return this._coord},d.prototype.print=function(m){m.println("node "+this._coord+" lbl: "+this._label)},d.prototype.computeIM=function(m){},d.prototype.computeMergedLocation=function(m,v){var b=oe.NONE;if(b=this._label.getLocation(v),!m.isNull(v)){var B=m.getLocation(v);b!==oe.BOUNDARY&&(b=B)}return b},d.prototype.setLabel=function(){if(2!==arguments.length)return h.prototype.setLabel.apply(this,arguments);var m=arguments[0],v=arguments[1];null===this._label?this._label=new ds(m,v):this._label.setLocation(m,v)},d.prototype.getEdges=function(){return this._edges},d.prototype.mergeLabel=function(){if(arguments[0]instanceof d)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof ds)for(var v=arguments[0],b=0;b<2;b++){var B=this.computeMergedLocation(v,b);this._label.getLocation(b)===oe.NONE&&this._label.setLocation(b,B)}},d.prototype.add=function(m){this._edges.insert(m),m.setNode(this)},d.prototype.setLabelBoundary=function(m){if(null===this._label)return null;var v=oe.NONE;null!==this._label&&(v=this._label.getLocation(m)),this._label.setLocation(m,v===oe.BOUNDARY?oe.INTERIOR:oe.BOUNDARY)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(n2),hr=function(){this.nodeMap=new Ct,this.nodeFact=null,this.nodeFact=arguments[0]};hr.prototype.find=function(h){return this.nodeMap.get(h)},hr.prototype.addNode=function(){if(arguments[0]instanceof $){var h=arguments[0],d=this.nodeMap.get(h);return null===d&&(d=this.nodeFact.createNode(h),this.nodeMap.put(h,d)),d}if(arguments[0]instanceof dc){var m=arguments[0],v=this.nodeMap.get(m.getCoordinate());return null===v?(this.nodeMap.put(m.getCoordinate(),m),m):(v.mergeLabel(m),v)}},hr.prototype.print=function(h){for(var d=this.iterator();d.hasNext();)d.next().print(h)},hr.prototype.iterator=function(){return this.nodeMap.values().iterator()},hr.prototype.values=function(){return this.nodeMap.values()},hr.prototype.getBoundaryNodes=function(h){for(var d=new rn,m=this.iterator();m.hasNext();){var v=m.next();v.getLabel().getLocation(h)===oe.BOUNDARY&&d.add(v)}return d},hr.prototype.add=function(h){var d=h.getCoordinate();this.addNode(d).add(h)},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr};var Ds=function(){},Zf={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ds.prototype.interfaces_=function(){return[]},Ds.prototype.getClass=function(){return Ds},Ds.isNorthern=function(h){return h===Ds.NE||h===Ds.NW},Ds.isOpposite=function(h,d){return h!==d&&(h-d+4)%4==2},Ds.commonHalfPlane=function(h,d){if(h===d)return h;if((h-d+4)%4==2)return-1;var m=h<d?h:d;return 0===m&&3===(h>d?h:d)?3:m},Ds.isInHalfPlane=function(h,d){return d===Ds.SE?h===Ds.SE||h===Ds.SW:h===d||h===d+1},Ds.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1];if(0===h&&0===d)throw new X("Cannot compute the quadrant for point ( "+h+", "+d+" )");return h>=0?d>=0?Ds.NE:Ds.SE:d>=0?Ds.NW:Ds.SW}if(arguments[0]instanceof $&&arguments[1]instanceof $){var m=arguments[0],v=arguments[1];if(v.x===m.x&&v.y===m.y)throw new X("Cannot compute the quadrant for two identical points "+m);return v.x>=m.x?v.y>=m.y?Ds.NE:Ds.SE:v.y>=m.y?Ds.NW:Ds.SW}},Zf.NE.get=function(){return 0},Zf.NW.get=function(){return 1},Zf.SW.get=function(){return 2},Zf.SE.get=function(){return 3},Object.defineProperties(Ds,Zf);var Ao=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var m=arguments[1],v=arguments[2];this._edge=arguments[0],this.init(m,v),this._label=null}else if(4===arguments.length){var B=arguments[1],z=arguments[2],q=arguments[3];this._edge=arguments[0],this.init(B,z),this._label=q}};Ao.prototype.compareDirection=function(h){return this._dx===h._dx&&this._dy===h._dy?0:this._quadrant>h._quadrant?1:this._quadrant<h._quadrant?-1:Mt.computeOrientation(h._p0,h._p1,this._p1)},Ao.prototype.getDy=function(){return this._dy},Ao.prototype.getCoordinate=function(){return this._p0},Ao.prototype.setNode=function(h){this._node=h},Ao.prototype.print=function(h){var d=Math.atan2(this._dy,this._dx),m=this.getClass().getName(),v=m.lastIndexOf("."),b=m.substring(v+1);h.print("  "+b+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+d+"   "+this._label)},Ao.prototype.compareTo=function(h){return this.compareDirection(h)},Ao.prototype.getDirectedCoordinate=function(){return this._p1},Ao.prototype.getDx=function(){return this._dx},Ao.prototype.getLabel=function(){return this._label},Ao.prototype.getEdge=function(){return this._edge},Ao.prototype.getQuadrant=function(){return this._quadrant},Ao.prototype.getNode=function(){return this._node},Ao.prototype.toString=function(){var h=Math.atan2(this._dy,this._dx),d=this.getClass().getName(),m=d.lastIndexOf(".");return"  "+d.substring(m+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label},Ao.prototype.computeLabel=function(h){},Ao.prototype.init=function(h,d){this._p0=h,this._p1=d,this._dx=d.x-h.x,this._dy=d.y-h.y,this._quadrant=Ds.quadrant(this._dx,this._dy),ee.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ao.prototype.interfaces_=function(){return[J]},Ao.prototype.getClass=function(){return Ao};var Lt=function(h){function d(){var m=arguments[0],v=arguments[1];if(h.call(this,m),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=v,v)this.init(m.getCoordinate(0),m.getCoordinate(1));else{var b=m.getNumPoints()-1;this.init(m.getCoordinate(b),m.getCoordinate(b-1))}this.computeDirectedLabel()}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getNextMin=function(){return this._nextMin},d.prototype.getDepth=function(m){return this._depth[m]},d.prototype.setVisited=function(m){this._isVisited=m},d.prototype.computeDirectedLabel=function(){this._label=new ds(this._edge.getLabel()),this._isForward||this._label.flip()},d.prototype.getNext=function(){return this._next},d.prototype.setDepth=function(m,v){if(-999!==this._depth[m]&&this._depth[m]!==v)throw new r1("assigned depths do not match",this.getCoordinate());this._depth[m]=v},d.prototype.isInteriorAreaEdge=function(){for(var m=!0,v=0;v<2;v++)this._label.isArea(v)&&this._label.getLocation(v,hn.LEFT)===oe.INTERIOR&&this._label.getLocation(v,hn.RIGHT)===oe.INTERIOR||(m=!1);return m},d.prototype.setNextMin=function(m){this._nextMin=m},d.prototype.print=function(m){h.prototype.print.call(this,m),m.print(" "+this._depth[hn.LEFT]+"/"+this._depth[hn.RIGHT]),m.print(" ("+this.getDepthDelta()+")"),this._isInResult&&m.print(" inResult")},d.prototype.setMinEdgeRing=function(m){this._minEdgeRing=m},d.prototype.isLineEdge=function(){var m=this._label.isLine(0)||this._label.isLine(1),v=!this._label.isArea(0)||this._label.allPositionsEqual(0,oe.EXTERIOR),b=!this._label.isArea(1)||this._label.allPositionsEqual(1,oe.EXTERIOR);return m&&v&&b},d.prototype.setEdgeRing=function(m){this._edgeRing=m},d.prototype.getMinEdgeRing=function(){return this._minEdgeRing},d.prototype.getDepthDelta=function(){var m=this._edge.getDepthDelta();return this._isForward||(m=-m),m},d.prototype.setInResult=function(m){this._isInResult=m},d.prototype.getSym=function(){return this._sym},d.prototype.isForward=function(){return this._isForward},d.prototype.getEdge=function(){return this._edge},d.prototype.printEdge=function(m){this.print(m),m.print(" "),this._isForward?this._edge.print(m):this._edge.printReverse(m)},d.prototype.setSym=function(m){this._sym=m},d.prototype.setVisitedEdge=function(m){this.setVisited(m),this._sym.setVisited(m)},d.prototype.setEdgeDepths=function(m,v){var b=this.getEdge().getDepthDelta();this._isForward||(b=-b);var B=1;m===hn.LEFT&&(B=-1);var z=hn.opposite(m),q=v+b*B;this.setDepth(m,v),this.setDepth(z,q)},d.prototype.getEdgeRing=function(){return this._edgeRing},d.prototype.isInResult=function(){return this._isInResult},d.prototype.setNext=function(m){this._next=m},d.prototype.isVisited=function(){return this._isVisited},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.depthFactor=function(m,v){return m===oe.EXTERIOR&&v===oe.INTERIOR?1:m===oe.INTERIOR&&v===oe.EXTERIOR?-1:0},d}(Ao),cu=function(){};cu.prototype.createNode=function(h){return new dc(h,null)},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu};var wn=function(){this._edges=new rn,this._nodes=null,this._edgeEndList=new rn,0===arguments.length?this._nodes=new hr(new cu):1===arguments.length&&(this._nodes=new hr(arguments[0]))};wn.prototype.printEdges=function(h){h.println("Edges:");for(var d=0;d<this._edges.size();d++){h.println("edge "+d+":");var m=this._edges.get(d);m.print(h),m.eiList.print(h)}},wn.prototype.find=function(h){return this._nodes.find(h)},wn.prototype.addNode=function(){return arguments[0]instanceof dc||arguments[0]instanceof $?this._nodes.addNode(arguments[0]):void 0},wn.prototype.getNodeIterator=function(){return this._nodes.iterator()},wn.prototype.linkResultDirectedEdges=function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkResultDirectedEdges()},wn.prototype.debugPrintln=function(h){qt.out.println(h)},wn.prototype.isBoundaryNode=function(h,d){var m=this._nodes.find(d);if(null===m)return!1;var v=m.getLabel();return null!==v&&v.getLocation(h)===oe.BOUNDARY},wn.prototype.linkAllDirectedEdges=function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkAllDirectedEdges()},wn.prototype.matchInSameDirection=function(h,d,m,v){return!!h.equals(m)&&Mt.computeOrientation(h,d,v)===Mt.COLLINEAR&&Ds.quadrant(h,d)===Ds.quadrant(m,v)},wn.prototype.getEdgeEnds=function(){return this._edgeEndList},wn.prototype.debugPrint=function(h){qt.out.print(h)},wn.prototype.getEdgeIterator=function(){return this._edges.iterator()},wn.prototype.findEdgeInSameDirection=function(h,d){for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m),b=v.getCoordinates();if(this.matchInSameDirection(h,d,b[0],b[1])||this.matchInSameDirection(h,d,b[b.length-1],b[b.length-2]))return v}return null},wn.prototype.insertEdge=function(h){this._edges.add(h)},wn.prototype.findEdgeEnd=function(h){for(var d=this.getEdgeEnds().iterator();d.hasNext();){var m=d.next();if(m.getEdge()===h)return m}return null},wn.prototype.addEdges=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next();this._edges.add(m);var v=new Lt(m,!0),b=new Lt(m,!1);v.setSym(b),b.setSym(v),this.add(v),this.add(b)}},wn.prototype.add=function(h){this._nodes.add(h),this._edgeEndList.add(h)},wn.prototype.getNodes=function(){return this._nodes.values()},wn.prototype.findEdge=function(h,d){for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m),b=v.getCoordinates();if(h.equals(b[0])&&d.equals(b[1]))return v}return null},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.linkResultDirectedEdges=function(h){for(var d=h.iterator();d.hasNext();)d.next().getEdges().linkResultDirectedEdges()};var s1=function(){this._geometryFactory=null,this._shellList=new rn,this._geometryFactory=arguments[0]};s1.prototype.sortShellsAndHoles=function(h,d,m){for(var v=h.iterator();v.hasNext();){var b=v.next();b.isHole()?m.add(b):d.add(b)}},s1.prototype.computePolygons=function(h){for(var d=new rn,m=h.iterator();m.hasNext();){var v=m.next().toPolygon(this._geometryFactory);d.add(v)}return d},s1.prototype.placeFreeHoles=function(h,d){for(var m=d.iterator();m.hasNext();){var v=m.next();if(null===v.getShell()){var b=this.findEdgeRingContaining(v,h);if(null===b)throw new r1("unable to assign hole to a shell",v.getCoordinate(0));v.setShell(b)}}},s1.prototype.buildMinimalEdgeRings=function(h,d,m){for(var v=new rn,b=h.iterator();b.hasNext();){var B=b.next();if(B.getMaxNodeDegree()>2){B.linkDirectedEdgesForMinimalEdgeRings();var z=B.buildMinimalRings(),q=this.findShell(z);null!==q?(this.placePolygonHoles(q,z),d.add(q)):m.addAll(z)}else v.add(B)}return v},s1.prototype.containsPoint=function(h){for(var d=this._shellList.iterator();d.hasNext();)if(d.next().containsPoint(h))return!0;return!1},s1.prototype.buildMaximalEdgeRings=function(h){for(var d=new rn,m=h.iterator();m.hasNext();){var v=m.next();if(v.isInResult()&&v.getLabel().isArea()&&null===v.getEdgeRing()){var b=new Nm(v,this._geometryFactory);d.add(b),b.setInResult()}}return d},s1.prototype.placePolygonHoles=function(h,d){for(var m=d.iterator();m.hasNext();){var v=m.next();v.isHole()&&v.setShell(h)}},s1.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},s1.prototype.findEdgeRingContaining=function(h,d){for(var m=h.getLinearRing(),v=m.getEnvelopeInternal(),b=m.getCoordinateN(0),B=null,z=null,q=d.iterator();q.hasNext();){var pe=q.next(),Ue=pe.getLinearRing(),gt=Ue.getEnvelopeInternal();null!==B&&(z=B.getLinearRing().getEnvelopeInternal());var pt=!1;gt.contains(v)&&Mt.isPointInRing(b,Ue.getCoordinates())&&(pt=!0),pt&&(null===B||z.contains(gt))&&(B=pe)}return B},s1.prototype.findShell=function(h){for(var d=0,m=null,v=h.iterator();v.hasNext();){var b=v.next();b.isHole()||(m=b,d++)}return ee.isTrue(d<=1,"found two shells in MinimalEdgeRing list"),m},s1.prototype.add=function(){if(1===arguments.length){var h=arguments[0];this.add(h.getEdgeEnds(),h.getNodes())}else if(2===arguments.length){var d=arguments[0];wn.linkResultDirectedEdges(arguments[1]);var v=this.buildMaximalEdgeRings(d),b=new rn,B=this.buildMinimalEdgeRings(v,this._shellList,b);this.sortShellsAndHoles(B,this._shellList,b),this.placeFreeHoles(this._shellList,b)}},s1.prototype.interfaces_=function(){return[]},s1.prototype.getClass=function(){return s1};var l0=function(){};l0.prototype.getBounds=function(){},l0.prototype.interfaces_=function(){return[]},l0.prototype.getClass=function(){return l0};var r2=function(){this._bounds=null,this._item=null;var d=arguments[1];this._bounds=arguments[0],this._item=d};r2.prototype.getItem=function(){return this._item},r2.prototype.getBounds=function(){return this._bounds},r2.prototype.interfaces_=function(){return[l0,ue]},r2.prototype.getClass=function(){return r2};var yl=function(){this._size=null,this._items=null,this._size=0,this._items=new rn,this._items.add(null)};yl.prototype.poll=function(){if(this.isEmpty())return null;var h=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),h},yl.prototype.size=function(){return this._size},yl.prototype.reorder=function(h){for(var d=null,m=this._items.get(h);2*h<=this._size&&((d=2*h)!==this._size&&this._items.get(d+1).compareTo(this._items.get(d))<0&&d++,this._items.get(d).compareTo(m)<0);h=d)this._items.set(h,this._items.get(d));this._items.set(h,m)},yl.prototype.clear=function(){this._size=0,this._items.clear()},yl.prototype.isEmpty=function(){return 0===this._size},yl.prototype.add=function(h){this._items.add(null),this._size+=1;var d=this._size;for(this._items.set(0,h);h.compareTo(this._items.get(Math.trunc(d/2)))<0;d/=2)this._items.set(d,this._items.get(Math.trunc(d/2)));this._items.set(d,h)},yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl};var e3=function(){};e3.prototype.visitItem=function(h){},e3.prototype.interfaces_=function(){return[]},e3.prototype.getClass=function(){return e3};var P3=function(){};P3.prototype.insert=function(h,d){},P3.prototype.remove=function(h,d){},P3.prototype.query=function(){},P3.prototype.interfaces_=function(){return[]},P3.prototype.getClass=function(){return P3};var bo=function(){this._childBoundables=new rn,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},Jf={serialVersionUID:{configurable:!0}};bo.prototype.getLevel=function(){return this._level},bo.prototype.size=function(){return this._childBoundables.size()},bo.prototype.getChildBoundables=function(){return this._childBoundables},bo.prototype.addChildBoundable=function(h){ee.isTrue(null===this._bounds),this._childBoundables.add(h)},bo.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},bo.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},bo.prototype.interfaces_=function(){return[l0,ue]},bo.prototype.getClass=function(){return bo},Jf.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(bo,Jf);var Js=function(){};Js.reverseOrder=function(){return{compare:function(h,d){return d.compareTo(h)}}},Js.min=function(h){return Js.sort(h),h.get(0)},Js.sort=function(h,d){var m=h.toArray();d?Yl.sort(m,d):Yl.sort(m);for(var v=h.iterator(),b=0,B=m.length;b<B;b++)v.next(),v.set(m[b])},Js.singletonList=function(h){var d=new rn;return d.add(h),d};var Xo=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var d=arguments[1],m=arguments[2];this._boundable1=arguments[0],this._boundable2=d,this._itemDistance=m,this._distance=this.distance()};Xo.prototype.expandToQueue=function(h,d){var m=Xo.isComposite(this._boundable1),v=Xo.isComposite(this._boundable2);if(m&&v)return Xo.area(this._boundable1)>Xo.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,h,d),null):(this.expand(this._boundable2,this._boundable1,h,d),null);if(m)return this.expand(this._boundable1,this._boundable2,h,d),null;if(v)return this.expand(this._boundable2,this._boundable1,h,d),null;throw new X("neither boundable is composite")},Xo.prototype.isLeaves=function(){return!(Xo.isComposite(this._boundable1)||Xo.isComposite(this._boundable2))},Xo.prototype.compareTo=function(h){return this._distance<h._distance?-1:this._distance>h._distance?1:0},Xo.prototype.expand=function(h,d,m,v){for(var b=h.getChildBoundables().iterator();b.hasNext();){var B=b.next(),z=new Xo(B,d,this._itemDistance);z.getDistance()<v&&m.add(z)}},Xo.prototype.getBoundable=function(h){return 0===h?this._boundable1:this._boundable2},Xo.prototype.getDistance=function(){return this._distance},Xo.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Xo.prototype.interfaces_=function(){return[J]},Xo.prototype.getClass=function(){return Xo},Xo.area=function(h){return h.getBounds().getArea()},Xo.isComposite=function(h){return h instanceof bo};var zn=function h(){if(this._root=null,this._built=!1,this._itemBoundables=new rn,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=h.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var m=arguments[0];ee.isTrue(m>1,"Node capacity must be greater than 1"),this._nodeCapacity=m}},u0={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};zn.prototype.getNodeCapacity=function(){return this._nodeCapacity},zn.prototype.lastNode=function(h){return h.get(h.size()-1)},zn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var h=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var m=d.next();m instanceof bo?h+=this.size(m):m instanceof r2&&(h+=1)}return h}},zn.prototype.removeItem=function(h,d){for(var m=null,v=h.getChildBoundables().iterator();v.hasNext();){var b=v.next();b instanceof r2&&b.getItem()===d&&(m=b)}return null!==m&&(h.getChildBoundables().remove(m),!0)},zn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var h=this.itemsTree(this._root);return null===h?new rn:h}if(1===arguments.length){for(var d=arguments[0],m=new rn,v=d.getChildBoundables().iterator();v.hasNext();){var b=v.next();if(b instanceof bo){var B=this.itemsTree(b);null!==B&&m.add(B)}else b instanceof r2?m.add(b.getItem()):ee.shouldNeverReachHere()}return m.size()<=0?null:m}},zn.prototype.insert=function(h,d){ee.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new r2(h,d))},zn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var h=arguments[0],d=new rn;return this.boundablesAtLevel(h,this._root,d),d}if(3===arguments.length){var m=arguments[0],v=arguments[1],b=arguments[2];if(ee.isTrue(m>-2),v.getLevel()===m)return b.add(v),null;for(var B=v.getChildBoundables().iterator();B.hasNext();){var z=B.next();z instanceof bo?this.boundablesAtLevel(m,z,b):(ee.isTrue(z instanceof r2),-1===m&&b.add(z))}return null}},zn.prototype.query=function(){if(1===arguments.length){var h=arguments[0];this.build();var d=new rn;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),h)&&this.query(h,this._root,d),d}if(2===arguments.length){var m=arguments[0],v=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.query(m,this._root,v)}else if(3===arguments.length)if(At(arguments[2],e3)&&arguments[0]instanceof Object&&arguments[1]instanceof bo)for(var b=arguments[0],z=arguments[2],q=arguments[1].getChildBoundables(),pe=0;pe<q.size();pe++){var Ue=q.get(pe);this.getIntersectsOp().intersects(Ue.getBounds(),b)&&(Ue instanceof bo?this.query(b,Ue,z):Ue instanceof r2?z.visitItem(Ue.getItem()):ee.shouldNeverReachHere())}else if(At(arguments[2],$o)&&arguments[0]instanceof Object&&arguments[1]instanceof bo)for(var gt=arguments[0],fn=arguments[2],Mn=arguments[1].getChildBoundables(),Fn=0;Fn<Mn.size();Fn++){var Zn=Mn.get(Fn);this.getIntersectsOp().intersects(Zn.getBounds(),gt)&&(Zn instanceof bo?this.query(gt,Zn,fn):Zn instanceof r2?fn.add(Zn.getItem()):ee.shouldNeverReachHere())}},zn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},zn.prototype.getRoot=function(){return this.build(),this._root},zn.prototype.remove=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),h)&&this.remove(h,this._root,d)}if(3===arguments.length){var m=arguments[0],v=arguments[1],b=arguments[2],B=this.removeItem(v,b);if(B)return!0;for(var z=null,q=v.getChildBoundables().iterator();q.hasNext();){var pe=q.next();if(this.getIntersectsOp().intersects(pe.getBounds(),m)&&pe instanceof bo&&(B=this.remove(m,pe,b))){z=pe;break}}return null!==z&&z.getChildBoundables().isEmpty()&&v.getChildBoundables().remove(z),B}},zn.prototype.createHigherLevels=function(h,d){ee.isTrue(!h.isEmpty());var m=this.createParentBoundables(h,d+1);return 1===m.size()?m.get(0):this.createHigherLevels(m,d+1)},zn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var h=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var m=d.next();if(m instanceof bo){var v=this.depth(m);v>h&&(h=v)}}return h+1}},zn.prototype.createParentBoundables=function(h,d){ee.isTrue(!h.isEmpty());var m=new rn;m.add(this.createNode(d));var v=new rn(h);Js.sort(v,this.getComparator());for(var b=v.iterator();b.hasNext();){var B=b.next();this.lastNode(m).getChildBoundables().size()===this.getNodeCapacity()&&m.add(this.createNode(d)),this.lastNode(m).addChildBoundable(B)}return m},zn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},zn.prototype.interfaces_=function(){return[ue]},zn.prototype.getClass=function(){return zn},zn.compareDoubles=function(h,d){return h>d?1:h<d?-1:0},u0.IntersectsOp.get=function(){return Vm},u0.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},u0.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(zn,u0);var Vm=function(){},K1=function(){};K1.prototype.distance=function(h,d){},K1.prototype.interfaces_=function(){return[]},K1.prototype.getClass=function(){return K1};var V6=function(h){function d(v){h.call(this,v=v||d.DEFAULT_NODE_CAPACITY)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return d.prototype.createParentBoundablesFromVerticalSlices=function(v,b){ee.isTrue(v.length>0);for(var B=new rn,z=0;z<v.length;z++)B.addAll(this.createParentBoundablesFromVerticalSlice(v[z],b));return B},d.prototype.createNode=function(v){return new ed(v)},d.prototype.size=function(){return 0===arguments.length?h.prototype.size.call(this):h.prototype.size.apply(this,arguments)},d.prototype.insert=function(){if(2!==arguments.length)return h.prototype.insert.apply(this,arguments);var v=arguments[0],b=arguments[1];if(v.isNull())return null;h.prototype.insert.call(this,v,b)},d.prototype.getIntersectsOp=function(){return d.intersectsOp},d.prototype.verticalSlices=function(v,b){for(var B=Math.trunc(Math.ceil(v.size()/b)),z=new Array(b).fill(null),q=v.iterator(),pe=0;pe<b;pe++){z[pe]=new rn;for(var Ue=0;q.hasNext()&&Ue<B;){var gt=q.next();z[pe].add(gt),Ue++}}return z},d.prototype.query=function(){if(1===arguments.length)return h.prototype.query.call(this,arguments[0]);2===arguments.length?h.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(At(arguments[2],e3)&&arguments[0]instanceof Object&&arguments[1]instanceof bo||At(arguments[2],$o)&&arguments[0]instanceof Object&&arguments[1]instanceof bo)&&h.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},d.prototype.getComparator=function(){return d.yComparator},d.prototype.createParentBoundablesFromVerticalSlice=function(v,b){return h.prototype.createParentBoundables.call(this,v,b)},d.prototype.remove=function(){return 2===arguments.length?h.prototype.remove.call(this,arguments[0],arguments[1]):h.prototype.remove.apply(this,arguments)},d.prototype.depth=function(){return 0===arguments.length?h.prototype.depth.call(this):h.prototype.depth.apply(this,arguments)},d.prototype.createParentBoundables=function(v,b){ee.isTrue(!v.isEmpty());var B=Math.trunc(Math.ceil(v.size()/this.getNodeCapacity())),z=new rn(v);Js.sort(z,d.xComparator);var q=this.verticalSlices(z,Math.trunc(Math.ceil(Math.sqrt(B))));return this.createParentBoundablesFromVerticalSlices(q,b)},d.prototype.nearestNeighbour=function(){if(1===arguments.length){if(At(arguments[0],K1)){var v=arguments[0],b=new Xo(this.getRoot(),this.getRoot(),v);return this.nearestNeighbour(b)}if(arguments[0]instanceof Xo)return this.nearestNeighbour(arguments[0],Y.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof d&&At(arguments[1],K1)){var z=arguments[0],q=arguments[1],pe=new Xo(this.getRoot(),z.getRoot(),q);return this.nearestNeighbour(pe)}if(arguments[0]instanceof Xo&&"number"==typeof arguments[1]){var Ue=arguments[0],gt=arguments[1],pt=null,fn=new yl;for(fn.add(Ue);!fn.isEmpty()&&gt>0;){var Mn=fn.poll(),Fn=Mn.getDistance();if(Fn>=gt)break;Mn.isLeaves()?(gt=Fn,pt=Mn):Mn.expandToQueue(fn,gt)}return[pt.getBoundable(0).getItem(),pt.getBoundable(1).getItem()]}}else if(3===arguments.length){var Fo=arguments[2],u1=new r2(arguments[0],arguments[1]),xl=new Xo(this.getRoot(),u1,Fo);return this.nearestNeighbour(xl)[0]}},d.prototype.interfaces_=function(){return[P3,ue]},d.prototype.getClass=function(){return d},d.centreX=function(v){return d.avg(v.getMinX(),v.getMaxX())},d.avg=function(v,b){return(v+b)/2},d.centreY=function(v){return d.avg(v.getMinY(),v.getMaxY())},m.STRtreeNode.get=function(){return ed},m.serialVersionUID.get=function(){return 0x39920f7d5f261e0},m.xComparator.get=function(){return{interfaces_:function(){return[ce]},compare:function(v,b){return h.compareDoubles(d.centreX(v.getBounds()),d.centreX(b.getBounds()))}}},m.yComparator.get=function(){return{interfaces_:function(){return[ce]},compare:function(v,b){return h.compareDoubles(d.centreY(v.getBounds()),d.centreY(b.getBounds()))}}},m.intersectsOp.get=function(){return{interfaces_:function(){return[h.IntersectsOp]},intersects:function(v,b){return v.intersects(b)}}},m.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(d,m),d}(zn),ed=function(h){function d(){h.call(this,arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.computeBounds=function(){for(var m=null,v=this.getChildBoundables().iterator();v.hasNext();){var b=v.next();null===m?m=new on(b.getBounds()):m.expandToInclude(b.getBounds())}return m},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(bo),vo=function(){};vo.prototype.interfaces_=function(){return[]},vo.prototype.getClass=function(){return vo},vo.relativeSign=function(h,d){return h<d?-1:h>d?1:0},vo.compare=function(h,d,m){if(d.equals2D(m))return 0;var v=vo.relativeSign(d.x,m.x),b=vo.relativeSign(d.y,m.y);switch(h){case 0:return vo.compareValue(v,b);case 1:return vo.compareValue(b,v);case 2:return vo.compareValue(b,-v);case 3:return vo.compareValue(-v,b);case 4:return vo.compareValue(-v,-b);case 5:return vo.compareValue(-b,-v);case 6:return vo.compareValue(-b,v);case 7:return vo.compareValue(v,-b)}return ee.shouldNeverReachHere("invalid octant value"),0},vo.compareValue=function(h,d){return h<0?-1:h>0?1:d<0?-1:d>0?1:0};var Ha=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var h=arguments[0],d=arguments[1],m=arguments[2],v=arguments[3];this._segString=h,this.coord=new $(d),this.segmentIndex=m,this._segmentOctant=v,this._isInterior=!d.equals2D(h.getCoordinate(m))};Ha.prototype.getCoordinate=function(){return this.coord},Ha.prototype.print=function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex)},Ha.prototype.compareTo=function(h){var d=h;return this.segmentIndex<d.segmentIndex?-1:this.segmentIndex>d.segmentIndex?1:this.coord.equals2D(d.coord)?0:vo.compare(this._segmentOctant,this.coord,d.coord)},Ha.prototype.isEndPoint=function(h){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===h},Ha.prototype.isInterior=function(){return this._isInterior},Ha.prototype.interfaces_=function(){return[J]},Ha.prototype.getClass=function(){return Ha};var X1=function(){this._nodeMap=new Ct,this._edge=null,this._edge=arguments[0]};X1.prototype.getSplitCoordinates=function(){var h=new uc;this.addEndpoints();for(var d=this.iterator(),m=d.next();d.hasNext();){var v=d.next();this.addEdgeCoordinates(m,v,h),m=v}return h.toCoordinateArray()},X1.prototype.addCollapsedNodes=function(){var h=new rn;this.findCollapsesFromInsertedNodes(h),this.findCollapsesFromExistingVertices(h);for(var d=h.iterator();d.hasNext();){var m=d.next().intValue();this.add(this._edge.getCoordinate(m),m)}},X1.prototype.print=function(h){h.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(h)},X1.prototype.findCollapsesFromExistingVertices=function(h){for(var d=0;d<this._edge.size()-2;d++){var m=this._edge.getCoordinate(d),v=this._edge.getCoordinate(d+2);m.equals2D(v)&&h.add(new Qe(d+1))}},X1.prototype.addEdgeCoordinates=function(h,d,m){var v=this._edge.getCoordinate(d.segmentIndex),b=d.isInterior()||!d.coord.equals2D(v);m.add(new $(h.coord),!1);for(var B=h.segmentIndex+1;B<=d.segmentIndex;B++)m.add(this._edge.getCoordinate(B));b&&m.add(new $(d.coord))},X1.prototype.iterator=function(){return this._nodeMap.values().iterator()},X1.prototype.addSplitEdges=function(h){this.addEndpoints(),this.addCollapsedNodes();for(var d=this.iterator(),m=d.next();d.hasNext();){var v=d.next(),b=this.createSplitEdge(m,v);h.add(b),m=v}},X1.prototype.findCollapseIndex=function(h,d,m){if(!h.coord.equals2D(d.coord))return!1;var v=d.segmentIndex-h.segmentIndex;return d.isInterior()||v--,1===v&&(m[0]=h.segmentIndex+1,!0)},X1.prototype.findCollapsesFromInsertedNodes=function(h){for(var d=new Array(1).fill(null),m=this.iterator(),v=m.next();m.hasNext();){var b=m.next();this.findCollapseIndex(v,b,d)&&h.add(new Qe(d[0])),v=b}},X1.prototype.getEdge=function(){return this._edge},X1.prototype.addEndpoints=function(){var h=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(h),h)},X1.prototype.createSplitEdge=function(h,d){var m=d.segmentIndex-h.segmentIndex+2,v=this._edge.getCoordinate(d.segmentIndex),b=d.isInterior()||!d.coord.equals2D(v);b||m--;var B=new Array(m).fill(null),z=0;B[z++]=new $(h.coord);for(var q=h.segmentIndex+1;q<=d.segmentIndex;q++)B[z++]=this._edge.getCoordinate(q);return b&&(B[z]=new $(d.coord)),new Zo(B,this._edge.getData())},X1.prototype.add=function(h,d){var m=new Ha(this._edge,h,d,this._edge.getSegmentOctant(d)),v=this._nodeMap.get(m);return null!==v?(ee.isTrue(v.coord.equals2D(h),"Found equal nodes with different coordinates"),v):(this._nodeMap.put(m,m),m)},X1.prototype.checkSplitEdgesCorrectness=function(h){var d=this._edge.getCoordinates(),m=h.get(0).getCoordinate(0);if(!m.equals2D(d[0]))throw new le("bad split edge start point at "+m);var v=h.get(h.size()-1).getCoordinates(),b=v[v.length-1];if(!b.equals2D(d[d.length-1]))throw new le("bad split edge end point at "+b)},X1.prototype.interfaces_=function(){return[]},X1.prototype.getClass=function(){return X1};var C2=function(){};C2.prototype.interfaces_=function(){return[]},C2.prototype.getClass=function(){return C2},C2.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1];if(0===h&&0===d)throw new X("Cannot compute the octant for point ( "+h+", "+d+" )");var m=Math.abs(h),v=Math.abs(d);return h>=0?d>=0?m>=v?0:1:m>=v?7:6:d>=0?m>=v?3:2:m>=v?4:5}if(arguments[0]instanceof $&&arguments[1]instanceof $){var b=arguments[0],B=arguments[1],z=B.x-b.x,q=B.y-b.y;if(0===z&&0===q)throw new X("Cannot compute the octant for two identical points "+b);return C2.octant(z,q)}};var Yo=function(){};Yo.prototype.getCoordinates=function(){},Yo.prototype.size=function(){},Yo.prototype.getCoordinate=function(h){},Yo.prototype.isClosed=function(){},Yo.prototype.setData=function(h){},Yo.prototype.getData=function(){},Yo.prototype.interfaces_=function(){return[]},Yo.prototype.getClass=function(){return Yo};var bs=function(){};bs.prototype.addIntersection=function(h,d){},bs.prototype.interfaces_=function(){return[Yo]},bs.prototype.getClass=function(){return bs};var Zo=function(){this._nodeList=new X1(this),this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};Zo.prototype.getCoordinates=function(){return this._pts},Zo.prototype.size=function(){return this._pts.length},Zo.prototype.getCoordinate=function(h){return this._pts[h]},Zo.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Zo.prototype.getSegmentOctant=function(h){return h===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(h),this.getCoordinate(h+1))},Zo.prototype.setData=function(h){this._data=h},Zo.prototype.safeOctant=function(h,d){return h.equals2D(d)?0:C2.octant(h,d)},Zo.prototype.getData=function(){return this._data},Zo.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var v=arguments[1],B=new $(arguments[0].getIntersection(arguments[3]));this.addIntersection(B,v)}},Zo.prototype.toString=function(){return it.toLineString(new mo(this._pts))},Zo.prototype.getNodeList=function(){return this._nodeList},Zo.prototype.addIntersectionNode=function(h,d){var m=d,v=m+1;return v<this._pts.length&&h.equals2D(this._pts[v])&&(m=v),this._nodeList.add(h,m)},Zo.prototype.addIntersections=function(h,d,m){for(var v=0;v<h.getIntersectionNum();v++)this.addIntersection(h,d,m,v)},Zo.prototype.interfaces_=function(){return[bs]},Zo.prototype.getClass=function(){return Zo},Zo.getNodedSubstrings=function(){if(1===arguments.length){var h=arguments[0],d=new rn;return Zo.getNodedSubstrings(h,d),d}if(2===arguments.length)for(var v=arguments[1],b=arguments[0].iterator();b.hasNext();)b.next().getNodeList().addSplitEdges(v)};var ui=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new $,this.p1=new $;else if(1===arguments.length){var h=arguments[0];this.p0=new $(h.p0),this.p1=new $(h.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var v=arguments[2],b=arguments[3];this.p0=new $(arguments[0],arguments[1]),this.p1=new $(v,b)}},lu={serialVersionUID:{configurable:!0}};ui.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},ui.prototype.orientationIndex=function(){if(arguments[0]instanceof ui){var h=arguments[0],d=Mt.orientationIndex(this.p0,this.p1,h.p0),m=Mt.orientationIndex(this.p0,this.p1,h.p1);return d>=0&&m>=0||d<=0&&m<=0?Math.max(d,m):0}if(arguments[0]instanceof $)return Mt.orientationIndex(this.p0,this.p1,arguments[0])},ui.prototype.toGeometry=function(h){return h.createLineString([this.p0,this.p1])},ui.prototype.isVertical=function(){return this.p0.x===this.p1.x},ui.prototype.equals=function(h){if(!(h instanceof ui))return!1;var d=h;return this.p0.equals(d.p0)&&this.p1.equals(d.p1)},ui.prototype.intersection=function(h){var d=new mt;return d.computeIntersection(this.p0,this.p1,h.p0,h.p1),d.hasIntersection()?d.getIntersection(0):null},ui.prototype.project=function(){if(arguments[0]instanceof $){var h=arguments[0];if(h.equals(this.p0)||h.equals(this.p1))return new $(h);var d=this.projectionFactor(h),m=new $;return m.x=this.p0.x+d*(this.p1.x-this.p0.x),m.y=this.p0.y+d*(this.p1.y-this.p0.y),m}if(arguments[0]instanceof ui){var v=arguments[0],b=this.projectionFactor(v.p0),B=this.projectionFactor(v.p1);if(b>=1&&B>=1||b<=0&&B<=0)return null;var z=this.project(v.p0);b<0&&(z=this.p0),b>1&&(z=this.p1);var q=this.project(v.p1);return B<0&&(q=this.p0),B>1&&(q=this.p1),new ui(z,q)}},ui.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},ui.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},ui.prototype.getCoordinate=function(h){return 0===h?this.p0:this.p1},ui.prototype.distancePerpendicular=function(h){return Mt.distancePointLinePerpendicular(h,this.p0,this.p1)},ui.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},ui.prototype.midPoint=function(){return ui.midPoint(this.p0,this.p1)},ui.prototype.projectionFactor=function(h){if(h.equals(this.p0))return 0;if(h.equals(this.p1))return 1;var d=this.p1.x-this.p0.x,m=this.p1.y-this.p0.y,v=d*d+m*m;return v<=0?Y.NaN:((h.x-this.p0.x)*d+(h.y-this.p0.y)*m)/v},ui.prototype.closestPoints=function(h){var d=this.intersection(h);if(null!==d)return[d,d];var m=new Array(2).fill(null),v=Y.MAX_VALUE,b=null,B=this.closestPoint(h.p0);v=B.distance(h.p0),m[0]=B,m[1]=h.p0;var z=this.closestPoint(h.p1);(b=z.distance(h.p1))<v&&(v=b,m[0]=z,m[1]=h.p1);var q=h.closestPoint(this.p0);(b=q.distance(this.p0))<v&&(v=b,m[0]=this.p0,m[1]=q);var pe=h.closestPoint(this.p1);return(b=pe.distance(this.p1))<v&&(v=b,m[0]=this.p1,m[1]=pe),m},ui.prototype.closestPoint=function(h){var d=this.projectionFactor(h);return d>0&&d<1?this.project(h):this.p0.distance(h)<this.p1.distance(h)?this.p0:this.p1},ui.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},ui.prototype.getLength=function(){return this.p0.distance(this.p1)},ui.prototype.compareTo=function(h){var d=h,m=this.p0.compareTo(d.p0);return 0!==m?m:this.p1.compareTo(d.p1)},ui.prototype.reverse=function(){var h=this.p0;this.p0=this.p1,this.p1=h},ui.prototype.equalsTopo=function(h){return this.p0.equals(h.p0)&&(this.p1.equals(h.p1)||this.p0.equals(h.p1))&&this.p1.equals(h.p0)},ui.prototype.lineIntersection=function(h){try{return $n.intersection(this.p0,this.p1,h.p0,h.p1)}catch(d){if(!(d instanceof li))throw d}return null},ui.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},ui.prototype.pointAlongOffset=function(h,d){var m=this.p0.x+h*(this.p1.x-this.p0.x),v=this.p0.y+h*(this.p1.y-this.p0.y),b=this.p1.x-this.p0.x,B=this.p1.y-this.p0.y,z=Math.sqrt(b*b+B*B),q=0,pe=0;if(0!==d){if(z<=0)throw new Error("Cannot compute offset from zero-length line segment");q=d*b/z,pe=d*B/z}return new $(m-pe,v+q)},ui.prototype.setCoordinates=function(){if(1===arguments.length){var h=arguments[0];this.setCoordinates(h.p0,h.p1)}else if(2===arguments.length){var d=arguments[0],m=arguments[1];this.p0.x=d.x,this.p0.y=d.y,this.p1.x=m.x,this.p1.y=m.y}},ui.prototype.segmentFraction=function(h){var d=this.projectionFactor(h);return d<0?d=0:(d>1||Y.isNaN(d))&&(d=1),d},ui.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},ui.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},ui.prototype.distance=function(){if(arguments[0]instanceof ui){var h=arguments[0];return Mt.distanceLineLine(this.p0,this.p1,h.p0,h.p1)}if(arguments[0]instanceof $)return Mt.distancePointLine(arguments[0],this.p0,this.p1)},ui.prototype.pointAlong=function(h){var d=new $;return d.x=this.p0.x+h*(this.p1.x-this.p0.x),d.y=this.p0.y+h*(this.p1.y-this.p0.y),d},ui.prototype.hashCode=function(){var h=Y.doubleToLongBits(this.p0.x);h^=31*Y.doubleToLongBits(this.p0.y);var d=Math.trunc(h)^Math.trunc(h>>32),m=Y.doubleToLongBits(this.p1.x);return m^=31*Y.doubleToLongBits(this.p1.y),d^Math.trunc(m)^Math.trunc(m>>32)},ui.prototype.interfaces_=function(){return[J,ue]},ui.prototype.getClass=function(){return ui},ui.midPoint=function(h,d){return new $((h.x+d.x)/2,(h.y+d.y)/2)},lu.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(ui,lu);var Hr=function(){this.tempEnv1=new on,this.tempEnv2=new on,this._overlapSeg1=new ui,this._overlapSeg2=new ui};Hr.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var m=arguments[2],v=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),m.getLineSegment(v,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var o1=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var d=arguments[1],m=arguments[2],v=arguments[3];this._pts=arguments[0],this._start=d,this._end=m,this._context=v};o1.prototype.getLineSegment=function(h,d){d.p0=this._pts[h],d.p1=this._pts[h+1]},o1.prototype.computeSelect=function(h,d,m,v){if(v.tempEnv1.init(this._pts[d],this._pts[m]),m-d==1)return v.select(this,d),null;if(!h.intersects(v.tempEnv1))return null;var z=Math.trunc((d+m)/2);d<z&&this.computeSelect(h,d,z,v),z<m&&this.computeSelect(h,z,m,v)},o1.prototype.getCoordinates=function(){for(var h=new Array(this._end-this._start+1).fill(null),d=0,m=this._start;m<=this._end;m++)h[d++]=this._pts[m];return h},o1.prototype.computeOverlaps=function(h,d){this.computeOverlapsInternal(this._start,this._end,h,h._start,h._end,d)},o1.prototype.setId=function(h){this._id=h},o1.prototype.select=function(h,d){this.computeSelect(h,this._start,this._end,d)},o1.prototype.getEnvelope=function(){return null===this._env&&(this._env=new on(this._pts[this._start],this._pts[this._end])),this._env},o1.prototype.getEndIndex=function(){return this._end},o1.prototype.getStartIndex=function(){return this._start},o1.prototype.getContext=function(){return this._context},o1.prototype.getId=function(){return this._id},o1.prototype.computeOverlapsInternal=function(h,d,m,v,b,B){var z=this._pts[h],q=this._pts[d],pe=m._pts[v],Ue=m._pts[b];if(d-h==1&&b-v==1)return B.overlap(this,h,m,v),null;if(B.tempEnv1.init(z,q),B.tempEnv2.init(pe,Ue),!B.tempEnv1.intersects(B.tempEnv2))return null;var gt=Math.trunc((h+d)/2),pt=Math.trunc((v+b)/2);h<gt&&(v<pt&&this.computeOverlapsInternal(h,gt,m,v,pt,B),pt<b&&this.computeOverlapsInternal(h,gt,m,pt,b,B)),gt<d&&(v<pt&&this.computeOverlapsInternal(gt,d,m,v,pt,B),pt<b&&this.computeOverlapsInternal(gt,d,m,pt,b,B))},o1.prototype.interfaces_=function(){return[]},o1.prototype.getClass=function(){return o1};var s2=function(){};s2.prototype.interfaces_=function(){return[]},s2.prototype.getClass=function(){return s2},s2.getChainStartIndices=function(h){var d=0,m=new rn;m.add(new Qe(d));do{var v=s2.findChainEnd(h,d);m.add(new Qe(v)),d=v}while(d<h.length-1);return s2.toIntArray(m)},s2.findChainEnd=function(h,d){for(var m=d;m<h.length-1&&h[m].equals2D(h[m+1]);)m++;if(m>=h.length-1)return h.length-1;for(var v=Ds.quadrant(h[m],h[m+1]),b=d+1;b<h.length&&(h[b-1].equals2D(h[b])||Ds.quadrant(h[b-1],h[b])===v);)b++;return b-1},s2.getChains=function(){if(1===arguments.length)return s2.getChains(arguments[0],null);if(2===arguments.length){for(var d=arguments[0],m=arguments[1],v=new rn,b=s2.getChainStartIndices(d),B=0;B<b.length-1;B++){var z=new o1(d,b[B],b[B+1],m);v.add(z)}return v}},s2.toIntArray=function(h){for(var d=new Array(h.size()).fill(null),m=0;m<d.length;m++)d[m]=h.get(m).intValue();return d};var t3=function(){};t3.prototype.computeNodes=function(h){},t3.prototype.getNodedSubstrings=function(){},t3.prototype.interfaces_=function(){return[]},t3.prototype.getClass=function(){return t3};var h0=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};h0.prototype.setSegmentIntersector=function(h){this._segInt=h},h0.prototype.interfaces_=function(){return[t3]},h0.prototype.getClass=function(){return h0};var wl=function(h){function d(v){v?h.call(this,v):h.call(this),this._monoChains=new rn,this._index=new V6,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={SegmentOverlapAction:{configurable:!0}};return d.prototype.getMonotoneChains=function(){return this._monoChains},d.prototype.getNodedSubstrings=function(){return Zo.getNodedSubstrings(this._nodedSegStrings)},d.prototype.getIndex=function(){return this._index},d.prototype.add=function(v){for(var b=s2.getChains(v.getCoordinates(),v).iterator();b.hasNext();){var B=b.next();B.setId(this._idCounter++),this._index.insert(B.getEnvelope(),B),this._monoChains.add(B)}},d.prototype.computeNodes=function(v){this._nodedSegStrings=v;for(var b=v.iterator();b.hasNext();)this.add(b.next());this.intersectChains()},d.prototype.intersectChains=function(){for(var v=new f0(this._segInt),b=this._monoChains.iterator();b.hasNext();)for(var B=b.next(),z=this._index.query(B.getEnvelope()).iterator();z.hasNext();){var q=z.next();if(q.getId()>B.getId()&&(B.computeOverlaps(q,v),this._nOverlaps++),this._segInt.isDone())return null}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.SegmentOverlapAction.get=function(){return f0},Object.defineProperties(d,m),d}(h0),f0=function(h){function d(){h.call(this),this._si=null,this._si=arguments[0]}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.overlap=function(){if(4!==arguments.length)return h.prototype.overlap.apply(this,arguments);var v=arguments[1],b=arguments[2],B=arguments[3],z=arguments[0].getContext(),q=b.getContext();this._si.processIntersections(z,v,q,B)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Hr),Dr=function h(){if(this._quadrantSegments=h.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=h.CAP_ROUND,this._joinStyle=h.JOIN_ROUND,this._mitreLimit=h.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=h.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var v=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(v)}else if(4===arguments.length){var B=arguments[1],z=arguments[2],q=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(B),this.setJoinStyle(z),this.setMitreLimit(q)}},Bn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Dr.prototype.getEndCapStyle=function(){return this._endCapStyle},Dr.prototype.isSingleSided=function(){return this._isSingleSided},Dr.prototype.setQuadrantSegments=function(h){this._quadrantSegments=h,0===this._quadrantSegments&&(this._joinStyle=Dr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Dr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),h<=0&&(this._quadrantSegments=1),this._joinStyle!==Dr.JOIN_ROUND&&(this._quadrantSegments=Dr.DEFAULT_QUADRANT_SEGMENTS)},Dr.prototype.getJoinStyle=function(){return this._joinStyle},Dr.prototype.setJoinStyle=function(h){this._joinStyle=h},Dr.prototype.setSimplifyFactor=function(h){this._simplifyFactor=h<0?0:h},Dr.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Dr.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Dr.prototype.setEndCapStyle=function(h){this._endCapStyle=h},Dr.prototype.getMitreLimit=function(){return this._mitreLimit},Dr.prototype.setMitreLimit=function(h){this._mitreLimit=h},Dr.prototype.setSingleSided=function(h){this._isSingleSided=h},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.bufferDistanceError=function(h){var d=Math.PI/2/h;return 1-Math.cos(d/2)},Bn.CAP_ROUND.get=function(){return 1},Bn.CAP_FLAT.get=function(){return 2},Bn.CAP_SQUARE.get=function(){return 3},Bn.JOIN_ROUND.get=function(){return 1},Bn.JOIN_MITRE.get=function(){return 2},Bn.JOIN_BEVEL.get=function(){return 3},Bn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Bn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Bn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Dr,Bn);var eo=function(h){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Mt.COUNTERCLOCKWISE,this._inputLine=h||null},d0={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};eo.prototype.isDeletable=function(h,d,m,v){var b=this._inputLine[h],B=this._inputLine[d],z=this._inputLine[m];return!!this.isConcave(b,B,z)&&!!this.isShallow(b,B,z,v)&&this.isShallowSampled(b,B,h,m,v)},eo.prototype.deleteShallowConcavities=function(){for(var h=1,d=this.findNextNonDeletedIndex(h),m=this.findNextNonDeletedIndex(d),v=!1;m<this._inputLine.length;){var b=!1;this.isDeletable(h,d,m,this._distanceTol)&&(this._isDeleted[d]=eo.DELETE,b=!0,v=!0),d=this.findNextNonDeletedIndex(h=b?m:d),m=this.findNextNonDeletedIndex(d)}return v},eo.prototype.isShallowConcavity=function(h,d,m,v){return Mt.computeOrientation(h,d,m)===this._angleOrientation&&Mt.distancePointLine(d,h,m)<v},eo.prototype.isShallowSampled=function(h,d,m,v,b){var B=Math.trunc((v-m)/eo.NUM_PTS_TO_CHECK);B<=0&&(B=1);for(var z=m;z<v;z+=B)if(!this.isShallow(h,d,this._inputLine[z],b))return!1;return!0},eo.prototype.isConcave=function(h,d,m){return Mt.computeOrientation(h,d,m)===this._angleOrientation},eo.prototype.simplify=function(h){this._distanceTol=Math.abs(h),h<0&&(this._angleOrientation=Mt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var d=!1;do{d=this.deleteShallowConcavities()}while(d);return this.collapseLine()},eo.prototype.findNextNonDeletedIndex=function(h){for(var d=h+1;d<this._inputLine.length&&this._isDeleted[d]===eo.DELETE;)d++;return d},eo.prototype.isShallow=function(h,d,m,v){return Mt.distancePointLine(d,h,m)<v},eo.prototype.collapseLine=function(){for(var h=new uc,d=0;d<this._inputLine.length;d++)this._isDeleted[d]!==eo.DELETE&&h.add(this._inputLine[d]);return h.toCoordinateArray()},eo.prototype.interfaces_=function(){return[]},eo.prototype.getClass=function(){return eo},eo.simplify=function(h,d){return new eo(h).simplify(d)},d0.INIT.get=function(){return 0},d0.DELETE.get=function(){return 1},d0.KEEP.get=function(){return 1},d0.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(eo,d0);var pc=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new rn},oi={COORDINATE_ARRAY_TYPE:{configurable:!0}};pc.prototype.getCoordinates=function(){return this._ptList.toArray(pc.COORDINATE_ARRAY_TYPE)},pc.prototype.setPrecisionModel=function(h){this._precisionModel=h},pc.prototype.addPt=function(h){var d=new $(h);if(this._precisionModel.makePrecise(d),this.isRedundant(d))return null;this._ptList.add(d)},pc.prototype.revere=function(){},pc.prototype.addPts=function(h,d){if(d)for(var m=0;m<h.length;m++)this.addPt(h[m]);else for(var v=h.length-1;v>=0;v--)this.addPt(h[v])},pc.prototype.isRedundant=function(h){if(this._ptList.size()<1)return!1;var d=this._ptList.get(this._ptList.size()-1);return h.distance(d)<this._minimimVertexDistance},pc.prototype.toString=function(){return(new qi).createLineString(this.getCoordinates()).toString()},pc.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var h=new $(this._ptList.get(0)),d=this._ptList.get(this._ptList.size()-1);if(h.equals(d))return null;this._ptList.add(h)},pc.prototype.setMinimumVertexDistance=function(h){this._minimimVertexDistance=h},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},oi.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(pc,oi);var fr=function(){},w4={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr},fr.toDegrees=function(h){return 180*h/Math.PI},fr.normalize=function(h){for(;h>Math.PI;)h-=fr.PI_TIMES_2;for(;h<=-Math.PI;)h+=fr.PI_TIMES_2;return h},fr.angle=function(){if(1===arguments.length){var h=arguments[0];return Math.atan2(h.y,h.x)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return Math.atan2(m.y-d.y,m.x-d.x)}},fr.isAcute=function(h,d,m){return(h.x-d.x)*(m.x-d.x)+(h.y-d.y)*(m.y-d.y)>0},fr.isObtuse=function(h,d,m){return(h.x-d.x)*(m.x-d.x)+(h.y-d.y)*(m.y-d.y)<0},fr.interiorAngle=function(h,d,m){var v=fr.angle(d,h),b=fr.angle(d,m);return Math.abs(b-v)},fr.normalizePositive=function(h){if(h<0){for(;h<0;)h+=fr.PI_TIMES_2;h>=fr.PI_TIMES_2&&(h=0)}else{for(;h>=fr.PI_TIMES_2;)h-=fr.PI_TIMES_2;h<0&&(h=0)}return h},fr.angleBetween=function(h,d,m){var v=fr.angle(d,h),b=fr.angle(d,m);return fr.diff(v,b)},fr.diff=function(h,d){var m=null;return(m=h<d?d-h:h-d)>Math.PI&&(m=2*Math.PI-m),m},fr.toRadians=function(h){return h*Math.PI/180},fr.getTurn=function(h,d){var m=Math.sin(d-h);return m>0?fr.COUNTERCLOCKWISE:m<0?fr.CLOCKWISE:fr.NONE},fr.angleBetweenOriented=function(h,d,m){var v=fr.angle(d,h),b=fr.angle(d,m)-v;return b<=-Math.PI?b+fr.PI_TIMES_2:b>Math.PI?b-fr.PI_TIMES_2:b},w4.PI_TIMES_2.get=function(){return 2*Math.PI},w4.PI_OVER_2.get=function(){return Math.PI/2},w4.PI_OVER_4.get=function(){return Math.PI/4},w4.COUNTERCLOCKWISE.get=function(){return Mt.COUNTERCLOCKWISE},w4.CLOCKWISE.get=function(){return Mt.CLOCKWISE},w4.NONE.get=function(){return Mt.COLLINEAR},Object.defineProperties(fr,w4);var ht=function h(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ui,this._seg1=new ui,this._offset0=new ui,this._offset1=new ui,this._side=0,this._hasNarrowConcaveAngle=!1;var m=arguments[1],v=arguments[2];this._precisionModel=arguments[0],this._bufParams=m,this._li=new mt,this._filletAngleQuantum=Math.PI/2/m.getQuadrantSegments(),m.getQuadrantSegments()>=8&&m.getJoinStyle()===Dr.JOIN_ROUND&&(this._closingSegLengthFactor=h.MAX_CLOSING_SEG_LEN_FACTOR),this.init(v)},b1={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ht.prototype.addNextSegment=function(h,d){if(this._s0=this._s1,this._s1=this._s2,this._s2=h,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var m=Mt.computeOrientation(this._s0,this._s1,this._s2),v=m===Mt.CLOCKWISE&&this._side===hn.LEFT||m===Mt.COUNTERCLOCKWISE&&this._side===hn.RIGHT;0===m?this.addCollinear(d):v?this.addOutsideTurn(m,d):this.addInsideTurn(m,d)},ht.prototype.addLineEndCap=function(h,d){var m=new ui(h,d),v=new ui;this.computeOffsetSegment(m,hn.LEFT,this._distance,v);var b=new ui;this.computeOffsetSegment(m,hn.RIGHT,this._distance,b);var q=Math.atan2(d.y-h.y,d.x-h.x);switch(this._bufParams.getEndCapStyle()){case Dr.CAP_ROUND:this._segList.addPt(v.p1),this.addFilletArc(d,q+Math.PI/2,q-Math.PI/2,Mt.CLOCKWISE,this._distance),this._segList.addPt(b.p1);break;case Dr.CAP_FLAT:this._segList.addPt(v.p1),this._segList.addPt(b.p1);break;case Dr.CAP_SQUARE:var pe=new $;pe.x=Math.abs(this._distance)*Math.cos(q),pe.y=Math.abs(this._distance)*Math.sin(q);var Ue=new $(v.p1.x+pe.x,v.p1.y+pe.y),gt=new $(b.p1.x+pe.x,b.p1.y+pe.y);this._segList.addPt(Ue),this._segList.addPt(gt)}},ht.prototype.getCoordinates=function(){return this._segList.getCoordinates()},ht.prototype.addMitreJoin=function(h,d,m,v){var b=!0,B=null;try{B=$n.intersection(d.p0,d.p1,m.p0,m.p1),(v<=0?1:B.distance(h)/Math.abs(v))>this._bufParams.getMitreLimit()&&(b=!1)}catch(z){if(!(z instanceof li))throw z;B=new $(0,0),b=!1}b?this._segList.addPt(B):this.addLimitedMitreJoin(d,m,v,this._bufParams.getMitreLimit())},ht.prototype.addFilletCorner=function(h,d,m,v,b){var q=Math.atan2(d.y-h.y,d.x-h.x),gt=Math.atan2(m.y-h.y,m.x-h.x);v===Mt.CLOCKWISE?q<=gt&&(q+=2*Math.PI):q>=gt&&(q-=2*Math.PI),this._segList.addPt(d),this.addFilletArc(h,q,gt,v,b),this._segList.addPt(m)},ht.prototype.addOutsideTurn=function(h,d){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ht.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Dr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Dr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(d&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,h,this._distance),this._segList.addPt(this._offset1.p0))},ht.prototype.createSquare=function(h){this._segList.addPt(new $(h.x+this._distance,h.y+this._distance)),this._segList.addPt(new $(h.x+this._distance,h.y-this._distance)),this._segList.addPt(new $(h.x-this._distance,h.y-this._distance)),this._segList.addPt(new $(h.x-this._distance,h.y+this._distance)),this._segList.closeRing()},ht.prototype.addSegments=function(h,d){this._segList.addPts(h,d)},ht.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},ht.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},ht.prototype.initSideSegments=function(h,d,m){this._s1=h,this._s2=d,this._side=m,this._seg1.setCoordinates(h,d),this.computeOffsetSegment(this._seg1,m,this._distance,this._offset1)},ht.prototype.addLimitedMitreJoin=function(h,d,m,v){var b=this._seg0.p1,B=fr.angle(b,this._seg0.p0),z=fr.angleBetweenOriented(this._seg0.p0,b,this._seg1.p1)/2,q=fr.normalize(B+z),pe=fr.normalize(q+Math.PI),Ue=v*m,gt=m-Ue*Math.abs(Math.sin(z)),pt=b.x+Ue*Math.cos(pe),fn=b.y+Ue*Math.sin(pe),Mn=new $(pt,fn),Fn=new ui(b,Mn),Zn=Fn.pointAlongOffset(1,gt),zr=Fn.pointAlongOffset(1,-gt);this._side===hn.LEFT?(this._segList.addPt(Zn),this._segList.addPt(zr)):(this._segList.addPt(zr),this._segList.addPt(Zn))},ht.prototype.computeOffsetSegment=function(h,d,m,v){var b=d===hn.LEFT?1:-1,B=h.p1.x-h.p0.x,z=h.p1.y-h.p0.y,q=Math.sqrt(B*B+z*z),pe=b*m*B/q,Ue=b*m*z/q;v.p0.x=h.p0.x-Ue,v.p0.y=h.p0.y+pe,v.p1.x=h.p1.x-Ue,v.p1.y=h.p1.y+pe},ht.prototype.addFilletArc=function(h,d,m,v,b){var B=v===Mt.CLOCKWISE?-1:1,z=Math.abs(d-m),q=Math.trunc(z/this._filletAngleQuantum+.5);if(q<1)return null;for(var pe=z/q,Ue=0,gt=new $;Ue<z;){var pt=d+B*Ue;gt.x=h.x+b*Math.cos(pt),gt.y=h.y+b*Math.sin(pt),this._segList.addPt(gt),Ue+=pe}},ht.prototype.addInsideTurn=function(h,d){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ht.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var m=new $((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(m);var v=new $((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(v)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},ht.prototype.createCircle=function(h){var d=new $(h.x+this._distance,h.y);this._segList.addPt(d),this.addFilletArc(h,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},ht.prototype.addBevelJoin=function(h,d){this._segList.addPt(h.p1),this._segList.addPt(d.p0)},ht.prototype.init=function(h){this._distance=h,this._maxCurveSegmentError=h*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new pc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(h*ht.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},ht.prototype.addCollinear=function(h){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Dr.JOIN_BEVEL||this._bufParams.getJoinStyle()===Dr.JOIN_MITRE?(h&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Mt.CLOCKWISE,this._distance))},ht.prototype.closeRing=function(){this._segList.closeRing()},ht.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht},b1.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},b1.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},b1.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},b1.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(ht,b1);var ir=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var d=arguments[1];this._precisionModel=arguments[0],this._bufParams=d};ir.prototype.getOffsetCurve=function(h,d){if(this._distance=d,0===d)return null;var m=d<0,v=Math.abs(d),b=this.getSegGen(v);h.length<=1?this.computePointCurve(h[0],b):this.computeOffsetCurve(h,m,b);var B=b.getCoordinates();return m&&Fi.reverse(B),B},ir.prototype.computeSingleSidedBufferCurve=function(h,d,m){var v=this.simplifyTolerance(this._distance);if(d){m.addSegments(h,!0);var b=eo.simplify(h,-v),B=b.length-1;m.initSideSegments(b[B],b[B-1],hn.LEFT),m.addFirstSegment();for(var z=B-2;z>=0;z--)m.addNextSegment(b[z],!0)}else{m.addSegments(h,!1);var q=eo.simplify(h,v),pe=q.length-1;m.initSideSegments(q[0],q[1],hn.LEFT),m.addFirstSegment();for(var Ue=2;Ue<=pe;Ue++)m.addNextSegment(q[Ue],!0)}m.addLastSegment(),m.closeRing()},ir.prototype.computeRingBufferCurve=function(h,d,m){var v=this.simplifyTolerance(this._distance);d===hn.RIGHT&&(v=-v);var b=eo.simplify(h,v),B=b.length-1;m.initSideSegments(b[B-1],b[0],d);for(var z=1;z<=B;z++)m.addNextSegment(b[z],1!==z);m.closeRing()},ir.prototype.computeLineBufferCurve=function(h,d){var m=this.simplifyTolerance(this._distance),v=eo.simplify(h,m),b=v.length-1;d.initSideSegments(v[0],v[1],hn.LEFT);for(var B=2;B<=b;B++)d.addNextSegment(v[B],!0);d.addLastSegment(),d.addLineEndCap(v[b-1],v[b]);var z=eo.simplify(h,-m),q=z.length-1;d.initSideSegments(z[q],z[q-1],hn.LEFT);for(var pe=q-2;pe>=0;pe--)d.addNextSegment(z[pe],!0);d.addLastSegment(),d.addLineEndCap(z[1],z[0]),d.closeRing()},ir.prototype.computePointCurve=function(h,d){switch(this._bufParams.getEndCapStyle()){case Dr.CAP_ROUND:d.createCircle(h);break;case Dr.CAP_SQUARE:d.createSquare(h)}},ir.prototype.getLineCurve=function(h,d){if(this._distance=d,d<0&&!this._bufParams.isSingleSided()||0===d)return null;var m=Math.abs(d),v=this.getSegGen(m);return h.length<=1?this.computePointCurve(h[0],v):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(h,d<0,v):this.computeLineBufferCurve(h,v),v.getCoordinates()},ir.prototype.getBufferParameters=function(){return this._bufParams},ir.prototype.simplifyTolerance=function(h){return h*this._bufParams.getSimplifyFactor()},ir.prototype.getRingCurve=function(h,d,m){if(this._distance=m,h.length<=2)return this.getLineCurve(h,m);if(0===m)return ir.copyCoordinates(h);var v=this.getSegGen(m);return this.computeRingBufferCurve(h,d,v),v.getCoordinates()},ir.prototype.computeOffsetCurve=function(h,d,m){var v=this.simplifyTolerance(this._distance);if(d){var b=eo.simplify(h,-v),B=b.length-1;m.initSideSegments(b[B],b[B-1],hn.LEFT),m.addFirstSegment();for(var z=B-2;z>=0;z--)m.addNextSegment(b[z],!0)}else{var q=eo.simplify(h,v),pe=q.length-1;m.initSideSegments(q[0],q[1],hn.LEFT),m.addFirstSegment();for(var Ue=2;Ue<=pe;Ue++)m.addNextSegment(q[Ue],!0)}m.addLastSegment()},ir.prototype.getSegGen=function(h){return new ht(this._precisionModel,this._bufParams,h)},ir.prototype.interfaces_=function(){return[]},ir.prototype.getClass=function(){return ir},ir.copyCoordinates=function(h){for(var d=new Array(h.length).fill(null),m=0;m<d.length;m++)d[m]=new $(h[m]);return d};var ia=function(){this._subgraphs=null,this._seg=new ui,this._cga=new Mt,this._subgraphs=arguments[0]},Y1={DepthSegment:{configurable:!0}};ia.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var h=arguments[0],d=new rn,m=this._subgraphs.iterator();m.hasNext();){var v=m.next(),b=v.getEnvelope();h.y<b.getMinY()||h.y>b.getMaxY()||this.findStabbedSegments(h,v.getDirectedEdges(),d)}return d}if(3===arguments.length)if(At(arguments[2],$o)&&arguments[0]instanceof $&&arguments[1]instanceof Lt){for(var B=arguments[0],z=arguments[1],q=arguments[2],pe=z.getEdge().getCoordinates(),Ue=0;Ue<pe.length-1;Ue++)if(this._seg.p0=pe[Ue],this._seg.p1=pe[Ue+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<B.x||this._seg.isHorizontal()||B.y<this._seg.p0.y||B.y>this._seg.p1.y||Mt.computeOrientation(this._seg.p0,this._seg.p1,B)===Mt.RIGHT)){var gt=z.getDepth(hn.LEFT);this._seg.p0.equals(pe[Ue])||(gt=z.getDepth(hn.RIGHT));var pt=new o2(this._seg,gt);q.add(pt)}}else if(At(arguments[2],$o)&&arguments[0]instanceof $&&At(arguments[1],$o))for(var fn=arguments[0],Fn=arguments[2],Zn=arguments[1].iterator();Zn.hasNext();){var zr=Zn.next();zr.isForward()&&this.findStabbedSegments(fn,zr,Fn)}},ia.prototype.getDepth=function(h){var d=this.findStabbedSegments(h);return 0===d.size()?0:Js.min(d)._leftDepth},ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia},Y1.DepthSegment.get=function(){return o2},Object.defineProperties(ia,Y1);var o2=function(){this._upwardSeg=null,this._leftDepth=null;var d=arguments[1];this._upwardSeg=new ui(arguments[0]),this._leftDepth=d};o2.prototype.compareTo=function(h){var d=h;if(this._upwardSeg.minX()>=d._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=d._upwardSeg.minX())return-1;var m=this._upwardSeg.orientationIndex(d._upwardSeg);return 0!==m||0!=(m=-1*d._upwardSeg.orientationIndex(this._upwardSeg))?m:this._upwardSeg.compareTo(d._upwardSeg)},o2.prototype.compareX=function(h,d){var m=h.p0.compareTo(d.p0);return 0!==m?m:h.p1.compareTo(d.p1)},o2.prototype.toString=function(){return this._upwardSeg.toString()},o2.prototype.interfaces_=function(){return[J]},o2.prototype.getClass=function(){return o2};var Li=function(h,d,m){this.p0=h||null,this.p1=d||null,this.p2=m||null};Li.prototype.area=function(){return Li.area(this.p0,this.p1,this.p2)},Li.prototype.signedArea=function(){return Li.signedArea(this.p0,this.p1,this.p2)},Li.prototype.interpolateZ=function(h){if(null===h)throw new X("Supplied point is null.");return Li.interpolateZ(h,this.p0,this.p1,this.p2)},Li.prototype.longestSideLength=function(){return Li.longestSideLength(this.p0,this.p1,this.p2)},Li.prototype.isAcute=function(){return Li.isAcute(this.p0,this.p1,this.p2)},Li.prototype.circumcentre=function(){return Li.circumcentre(this.p0,this.p1,this.p2)},Li.prototype.area3D=function(){return Li.area3D(this.p0,this.p1,this.p2)},Li.prototype.centroid=function(){return Li.centroid(this.p0,this.p1,this.p2)},Li.prototype.inCentre=function(){return Li.inCentre(this.p0,this.p1,this.p2)},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.area=function(h,d,m){return Math.abs(((m.x-h.x)*(d.y-h.y)-(d.x-h.x)*(m.y-h.y))/2)},Li.signedArea=function(h,d,m){return((m.x-h.x)*(d.y-h.y)-(d.x-h.x)*(m.y-h.y))/2},Li.det=function(h,d,m,v){return h*v-d*m},Li.interpolateZ=function(h,d,m,v){var b=d.x,B=d.y,z=m.x-b,q=v.x-b,pe=m.y-B,Ue=v.y-B,gt=z*Ue-q*pe,pt=h.x-b,fn=h.y-B;return d.z+(Ue*pt-q*fn)/gt*(m.z-d.z)+(-pe*pt+z*fn)/gt*(v.z-d.z)},Li.longestSideLength=function(h,d,m){var v=h.distance(d),b=d.distance(m),B=m.distance(h),z=v;return b>z&&(z=b),B>z&&(z=B),z},Li.isAcute=function(h,d,m){return!!fr.isAcute(h,d,m)&&!!fr.isAcute(d,m,h)&&!!fr.isAcute(m,h,d)},Li.circumcentre=function(h,d,m){var v=m.x,b=m.y,B=h.x-v,z=h.y-b,q=d.x-v,pe=d.y-b,Ue=2*Li.det(B,z,q,pe),gt=Li.det(z,B*B+z*z,pe,q*q+pe*pe),pt=Li.det(B,B*B+z*z,q,q*q+pe*pe);return new $(v-gt/Ue,b+pt/Ue)},Li.perpendicularBisector=function(h,d){var m=d.x-h.x,v=d.y-h.y,b=new $n(h.x+m/2,h.y+v/2,1),B=new $n(h.x-v+m/2,h.y+m+v/2,1);return new $n(b,B)},Li.angleBisector=function(h,d,m){var v=d.distance(h),b=v/(v+d.distance(m));return new $(h.x+b*(m.x-h.x),h.y+b*(m.y-h.y))},Li.area3D=function(h,d,m){var v=d.x-h.x,b=d.y-h.y,B=d.z-h.z,z=m.x-h.x,q=m.y-h.y,pe=m.z-h.z,Ue=b*pe-B*q,gt=B*z-v*pe,pt=v*q-b*z;return Math.sqrt(Ue*Ue+gt*gt+pt*pt)/2},Li.centroid=function(h,d,m){return new $((h.x+d.x+m.x)/3,(h.y+d.y+m.y)/3)},Li.inCentre=function(h,d,m){var v=d.distance(m),b=h.distance(m),B=h.distance(d),z=v+b+B;return new $((v*h.x+b*d.x+B*m.x)/z,(v*h.y+b*d.y+B*m.y)/z)};var $s=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new rn;var d=arguments[1],m=arguments[2];this._inputGeom=arguments[0],this._distance=d,this._curveBuilder=m};$s.prototype.addPoint=function(h){if(this._distance<=0)return null;var d=h.getCoordinates(),m=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(m,oe.EXTERIOR,oe.INTERIOR)},$s.prototype.addPolygon=function(h){var d=this._distance,m=hn.LEFT;this._distance<0&&(d=-this._distance,m=hn.RIGHT);var v=h.getExteriorRing(),b=Fi.removeRepeatedPoints(v.getCoordinates());if(this._distance<0&&this.isErodedCompletely(v,this._distance)||this._distance<=0&&b.length<3)return null;this.addPolygonRing(b,d,m,oe.EXTERIOR,oe.INTERIOR);for(var B=0;B<h.getNumInteriorRing();B++){var z=h.getInteriorRingN(B),q=Fi.removeRepeatedPoints(z.getCoordinates());this._distance>0&&this.isErodedCompletely(z,-this._distance)||this.addPolygonRing(q,d,hn.opposite(m),oe.INTERIOR,oe.EXTERIOR)}},$s.prototype.isTriangleErodedCompletely=function(h,d){var m=new Li(h[0],h[1],h[2]),v=m.inCentre();return Mt.distancePointLine(v,m.p0,m.p1)<Math.abs(d)},$s.prototype.addLineString=function(h){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var d=Fi.removeRepeatedPoints(h.getCoordinates()),m=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(m,oe.EXTERIOR,oe.INTERIOR)},$s.prototype.addCurve=function(h,d,m){if(null===h||h.length<2)return null;var v=new Zo(h,new ds(0,oe.BOUNDARY,d,m));this._curveList.add(v)},$s.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},$s.prototype.addPolygonRing=function(h,d,m,v,b){if(0===d&&h.length<N2.MINIMUM_VALID_SIZE)return null;var B=v,z=b;h.length>=N2.MINIMUM_VALID_SIZE&&Mt.isCCW(h)&&(B=b,z=v,m=hn.opposite(m));var q=this._curveBuilder.getRingCurve(h,m,d);this.addCurve(q,B,z)},$s.prototype.add=function(h){if(h.isEmpty())return null;h instanceof qo?this.addPolygon(h):h instanceof go?this.addLineString(h):h instanceof hc?this.addPoint(h):(h instanceof Zl||h instanceof R3||h instanceof kc||h instanceof _1)&&this.addCollection(h)},$s.prototype.isErodedCompletely=function(h,d){var m=h.getCoordinates();if(m.length<4)return d<0;if(4===m.length)return this.isTriangleErodedCompletely(m,d);var v=h.getEnvelopeInternal(),b=Math.min(v.getHeight(),v.getWidth());return d<0&&2*Math.abs(d)>b},$s.prototype.addCollection=function(h){for(var d=0;d<h.getNumGeometries();d++){var m=h.getGeometryN(d);this.add(m)}},$s.prototype.interfaces_=function(){return[]},$s.prototype.getClass=function(){return $s};var sn=function(){};sn.prototype.locate=function(h){},sn.prototype.interfaces_=function(){return[]},sn.prototype.getClass=function(){return sn};var ki=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var h=arguments[0];this._parent=h,this._atStart=!0,this._index=0,this._max=h.getNumGeometries()};ki.prototype.next=function(){if(this._atStart)return this._atStart=!1,ki.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ne;var h=this._parent.getGeometryN(this._index++);return h instanceof _1?(this._subcollectionIterator=new ki(h),this._subcollectionIterator.next()):h},ki.prototype.remove=function(){throw new Error(this.getClass().getName())},ki.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},ki.prototype.interfaces_=function(){return[q1]},ki.prototype.getClass=function(){return ki},ki.isAtomic=function(h){return!(h instanceof _1)};var gr=function(){this._geom=null,this._geom=arguments[0]};gr.prototype.locate=function(h){return gr.locate(h,this._geom)},gr.prototype.interfaces_=function(){return[sn]},gr.prototype.getClass=function(){return gr},gr.isPointInRing=function(h,d){return!!d.getEnvelopeInternal().intersects(h)&&Mt.isPointInRing(h,d.getCoordinates())},gr.containsPointInPolygon=function(h,d){if(d.isEmpty())return!1;var m=d.getExteriorRing();if(!gr.isPointInRing(h,m))return!1;for(var v=0;v<d.getNumInteriorRing();v++){var b=d.getInteriorRingN(v);if(gr.isPointInRing(h,b))return!1}return!0},gr.containsPoint=function(h,d){if(d instanceof qo)return gr.containsPointInPolygon(h,d);if(d instanceof _1)for(var m=new ki(d);m.hasNext();){var v=m.next();if(v!==d&&gr.containsPoint(h,v))return!0}return!1},gr.locate=function(h,d){return d.isEmpty()?oe.EXTERIOR:gr.containsPoint(h,d)?oe.INTERIOR:oe.EXTERIOR};var Is=function(){this._edgeMap=new Ct,this._edgeList=null,this._ptInAreaLocation=[oe.NONE,oe.NONE]};Is.prototype.getNextCW=function(h){this.getEdges();var d=this._edgeList.indexOf(h),m=d-1;return 0===d&&(m=this._edgeList.size()-1),this._edgeList.get(m)},Is.prototype.propagateSideLabels=function(h){for(var d=oe.NONE,m=this.iterator();m.hasNext();){var v=m.next().getLabel();v.isArea(h)&&v.getLocation(h,hn.LEFT)!==oe.NONE&&(d=v.getLocation(h,hn.LEFT))}if(d===oe.NONE)return null;for(var b=d,B=this.iterator();B.hasNext();){var z=B.next(),q=z.getLabel();if(q.getLocation(h,hn.ON)===oe.NONE&&q.setLocation(h,hn.ON,b),q.isArea(h)){var pe=q.getLocation(h,hn.LEFT),Ue=q.getLocation(h,hn.RIGHT);if(Ue!==oe.NONE){if(Ue!==b)throw new r1("side location conflict",z.getCoordinate());pe===oe.NONE&&ee.shouldNeverReachHere("found single null side (at "+z.getCoordinate()+")"),b=pe}else ee.isTrue(q.getLocation(h,hn.LEFT)===oe.NONE,"found single null side"),q.setLocation(h,hn.RIGHT,b),q.setLocation(h,hn.LEFT,b)}}},Is.prototype.getCoordinate=function(){var h=this.iterator();return h.hasNext()?h.next().getCoordinate():null},Is.prototype.print=function(h){qt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var d=this.iterator();d.hasNext();)d.next().print(h)},Is.prototype.isAreaLabelsConsistent=function(h){return this.computeEdgeEndLabels(h.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Is.prototype.checkAreaLabelsConsistent=function(h){var d=this.getEdges();if(d.size()<=0)return!0;var m=d.size()-1,v=d.get(m).getLabel().getLocation(h,hn.LEFT);ee.isTrue(v!==oe.NONE,"Found unlabelled area edge");for(var b=v,B=this.iterator();B.hasNext();){var z=B.next().getLabel();ee.isTrue(z.isArea(h),"Found non-area edge");var q=z.getLocation(h,hn.LEFT),pe=z.getLocation(h,hn.RIGHT);if(q===pe||pe!==b)return!1;b=q}return!0},Is.prototype.findIndex=function(h){this.iterator();for(var d=0;d<this._edgeList.size();d++)if(this._edgeList.get(d)===h)return d;return-1},Is.prototype.iterator=function(){return this.getEdges().iterator()},Is.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new rn(this._edgeMap.values())),this._edgeList},Is.prototype.getLocation=function(h,d,m){return this._ptInAreaLocation[h]===oe.NONE&&(this._ptInAreaLocation[h]=gr.locate(d,m[h].getGeometry())),this._ptInAreaLocation[h]},Is.prototype.toString=function(){var h=new be;h.append("EdgeEndStar:   "+this.getCoordinate()),h.append("\n");for(var d=this.iterator();d.hasNext();){var m=d.next();h.append(m),h.append("\n")}return h.toString()},Is.prototype.computeEdgeEndLabels=function(h){for(var d=this.iterator();d.hasNext();)d.next().computeLabel(h)},Is.prototype.computeLabelling=function(h){this.computeEdgeEndLabels(h[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var d=[!1,!1],m=this.iterator();m.hasNext();)for(var v=m.next().getLabel(),b=0;b<2;b++)v.isLine(b)&&v.getLocation(b)===oe.BOUNDARY&&(d[b]=!0);for(var B=this.iterator();B.hasNext();)for(var z=B.next(),q=z.getLabel(),pe=0;pe<2;pe++)if(q.isAnyNull(pe)){var Ue=oe.NONE;if(d[pe])Ue=oe.EXTERIOR;else{var gt=z.getCoordinate();Ue=this.getLocation(pe,gt,h)}q.setAllLocationsIfNull(pe,Ue)}},Is.prototype.getDegree=function(){return this._edgeMap.size()},Is.prototype.insertEdgeEnd=function(h,d){this._edgeMap.put(h,d),this._edgeList=null},Is.prototype.interfaces_=function(){return[]},Is.prototype.getClass=function(){return Is};var V2=function(h){function d(){h.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var m=null,v=null,b=this._SCANNING_FOR_INCOMING,B=0;B<this._resultAreaEdgeList.size();B++){var z=this._resultAreaEdgeList.get(B),q=z.getSym();if(z.getLabel().isArea())switch(null===m&&z.isInResult()&&(m=z),b){case this._SCANNING_FOR_INCOMING:if(!q.isInResult())continue;v=q,b=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!z.isInResult())continue;v.setNext(z),b=this._SCANNING_FOR_INCOMING}}if(b===this._LINKING_TO_OUTGOING){if(null===m)throw new r1("no outgoing dirEdge found",this.getCoordinate());ee.isTrue(m.isInResult(),"unable to link last incoming dirEdge"),v.setNext(m)}},d.prototype.insert=function(m){this.insertEdgeEnd(m,m)},d.prototype.getRightmostEdge=function(){var m=this.getEdges(),v=m.size();if(v<1)return null;var b=m.get(0);if(1===v)return b;var B=m.get(v-1),z=b.getQuadrant(),q=B.getQuadrant();return Ds.isNorthern(z)&&Ds.isNorthern(q)?b:Ds.isNorthern(z)||Ds.isNorthern(q)?0!==b.getDy()?b:0!==B.getDy()?B:(ee.shouldNeverReachHere("found two horizontal edges incident on node"),null):B},d.prototype.print=function(m){qt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var v=this.iterator();v.hasNext();){var b=v.next();m.print("out "),b.print(m),m.println(),m.print("in "),b.getSym().print(m),m.println()}},d.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new rn;for(var m=this.iterator();m.hasNext();){var v=m.next();(v.isInResult()||v.getSym().isInResult())&&this._resultAreaEdgeList.add(v)}return this._resultAreaEdgeList},d.prototype.updateLabelling=function(m){for(var v=this.iterator();v.hasNext();){var b=v.next().getLabel();b.setAllLocationsIfNull(0,m.getLocation(0)),b.setAllLocationsIfNull(1,m.getLocation(1))}},d.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var m=null,v=null,b=this._edgeList.size()-1;b>=0;b--){var B=this._edgeList.get(b),z=B.getSym();null===v&&(v=z),null!==m&&z.setNext(m),m=B}v.setNext(m)},d.prototype.computeDepths=function(){if(1===arguments.length){var m=arguments[0],v=this.findIndex(m),b=m.getDepth(hn.LEFT),B=m.getDepth(hn.RIGHT),z=this.computeDepths(v+1,this._edgeList.size(),b);if(this.computeDepths(0,v,z)!==B)throw new r1("depth mismatch at "+m.getCoordinate())}else if(3===arguments.length){for(var pe=arguments[1],Ue=arguments[2],gt=arguments[0];gt<pe;gt++){var pt=this._edgeList.get(gt);pt.setEdgeDepths(hn.RIGHT,Ue),Ue=pt.getDepth(hn.LEFT)}return Ue}},d.prototype.mergeSymLabels=function(){for(var m=this.iterator();m.hasNext();){var v=m.next();v.getLabel().merge(v.getSym().getLabel())}},d.prototype.linkMinimalDirectedEdges=function(m){for(var v=null,b=null,B=this._SCANNING_FOR_INCOMING,z=this._resultAreaEdgeList.size()-1;z>=0;z--){var q=this._resultAreaEdgeList.get(z),pe=q.getSym();switch(null===v&&q.getEdgeRing()===m&&(v=q),B){case this._SCANNING_FOR_INCOMING:if(pe.getEdgeRing()!==m)continue;b=pe,B=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(q.getEdgeRing()!==m)continue;b.setNextMin(q),B=this._SCANNING_FOR_INCOMING}}B===this._LINKING_TO_OUTGOING&&(ee.isTrue(null!==v,"found null for first outgoing dirEdge"),ee.isTrue(v.getEdgeRing()===m,"unable to link last incoming dirEdge"),b.setNextMin(v))},d.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var m=0,v=this.iterator();v.hasNext();)v.next().isInResult()&&m++;return m}if(1===arguments.length){for(var b=arguments[0],B=0,z=this.iterator();z.hasNext();)z.next().getEdgeRing()===b&&B++;return B}},d.prototype.getLabel=function(){return this._label},d.prototype.findCoveredLineEdges=function(){for(var m=oe.NONE,v=this.iterator();v.hasNext();){var b=v.next(),B=b.getSym();if(!b.isLineEdge()){if(b.isInResult()){m=oe.INTERIOR;break}if(B.isInResult()){m=oe.EXTERIOR;break}}}if(m===oe.NONE)return null;for(var z=m,q=this.iterator();q.hasNext();){var pe=q.next(),Ue=pe.getSym();pe.isLineEdge()?pe.getEdge().setCovered(z===oe.INTERIOR):(pe.isInResult()&&(z=oe.EXTERIOR),Ue.isInResult()&&(z=oe.INTERIOR))}},d.prototype.computeLabelling=function(m){h.prototype.computeLabelling.call(this,m),this._label=new ds(oe.NONE);for(var v=this.iterator();v.hasNext();)for(var b=v.next().getEdge().getLabel(),B=0;B<2;B++){var z=b.getLocation(B);z!==oe.INTERIOR&&z!==oe.BOUNDARY||this._label.setLocation(B,oe.INTERIOR)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Is),uo=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.createNode=function(m){return new dc(m,new V2)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(cu),Pc=function h(){this._pts=null,this._orientation=null;var d=arguments[0];this._pts=d,this._orientation=h.orientation(d)};Pc.prototype.compareTo=function(h){return Pc.compareOriented(this._pts,this._orientation,h._pts,h._orientation)},Pc.prototype.interfaces_=function(){return[J]},Pc.prototype.getClass=function(){return Pc},Pc.orientation=function(h){return 1===Fi.increasingDirection(h)},Pc.compareOriented=function(h,d,m,v){for(var b=d?1:-1,B=v?1:-1,z=d?h.length:-1,q=v?m.length:-1,pe=d?0:h.length-1,Ue=v?0:m.length-1;;){var gt=h[pe].compareTo(m[Ue]);if(0!==gt)return gt;var pt=(pe+=b)===z,fn=(Ue+=B)===q;if(pt&&!fn)return-1;if(!pt&&fn)return 1;if(pt&&fn)return 0}};var dr=function(){this._edges=new rn,this._ocaMap=new Ct};dr.prototype.print=function(h){h.print("MULTILINESTRING ( ");for(var d=0;d<this._edges.size();d++){var m=this._edges.get(d);d>0&&h.print(","),h.print("(");for(var v=m.getCoordinates(),b=0;b<v.length;b++)b>0&&h.print(","),h.print(v[b].x+" "+v[b].y);h.println(")")}h.print(")  ")},dr.prototype.addAll=function(h){for(var d=h.iterator();d.hasNext();)this.add(d.next())},dr.prototype.findEdgeIndex=function(h){for(var d=0;d<this._edges.size();d++)if(this._edges.get(d).equals(h))return d;return-1},dr.prototype.iterator=function(){return this._edges.iterator()},dr.prototype.getEdges=function(){return this._edges},dr.prototype.get=function(h){return this._edges.get(h)},dr.prototype.findEqualEdge=function(h){var d=new Pc(h.getCoordinates());return this._ocaMap.get(d)},dr.prototype.add=function(h){this._edges.add(h);var d=new Pc(h.getCoordinates());this._ocaMap.put(d,h)},dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr};var Hs=function(){};Hs.prototype.processIntersections=function(h,d,m,v){},Hs.prototype.isDone=function(){},Hs.prototype.interfaces_=function(){return[]},Hs.prototype.getClass=function(){return Hs};var za=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};za.prototype.isTrivialIntersection=function(h,d,m,v){if(h===m&&1===this._li.getIntersectionNum()){if(za.isAdjacentSegments(d,v))return!0;if(h.isClosed()){var b=h.size()-1;if(0===d&&v===b||0===v&&d===b)return!0}}return!1},za.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},za.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},za.prototype.getLineIntersector=function(){return this._li},za.prototype.hasProperIntersection=function(){return this._hasProper},za.prototype.processIntersections=function(h,d,m,v){if(h===m&&d===v)return null;this.numTests++;var b=h.getCoordinates()[d],B=h.getCoordinates()[d+1],z=m.getCoordinates()[v],q=m.getCoordinates()[v+1];this._li.computeIntersection(b,B,z,q),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(h,d,m,v)||(this._hasIntersection=!0,h.addIntersections(this._li,d,0),m.addIntersections(this._li,v,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},za.prototype.hasIntersection=function(){return this._hasIntersection},za.prototype.isDone=function(){return!1},za.prototype.hasInteriorIntersection=function(){return this._hasInterior},za.prototype.interfaces_=function(){return[Hs]},za.prototype.getClass=function(){return za},za.isAdjacentSegments=function(h,d){return 1===Math.abs(h-d)};var ri=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var d=arguments[1],m=arguments[2];this.coord=new $(arguments[0]),this.segmentIndex=d,this.dist=m};ri.prototype.getSegmentIndex=function(){return this.segmentIndex},ri.prototype.getCoordinate=function(){return this.coord},ri.prototype.print=function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex),h.println(" dist = "+this.dist)},ri.prototype.compareTo=function(h){return this.compare(h.segmentIndex,h.dist)},ri.prototype.isEndPoint=function(h){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===h},ri.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},ri.prototype.getDistance=function(){return this.dist},ri.prototype.compare=function(h,d){return this.segmentIndex<h?-1:this.segmentIndex>h?1:this.dist<d?-1:this.dist>d?1:0},ri.prototype.interfaces_=function(){return[J]},ri.prototype.getClass=function(){return ri};var gc=function(){this._nodeMap=new Ct,this.edge=null,this.edge=arguments[0]};gc.prototype.print=function(h){h.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(h)},gc.prototype.iterator=function(){return this._nodeMap.values().iterator()},gc.prototype.addSplitEdges=function(h){this.addEndpoints();for(var d=this.iterator(),m=d.next();d.hasNext();){var v=d.next(),b=this.createSplitEdge(m,v);h.add(b),m=v}},gc.prototype.addEndpoints=function(){var h=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[h],h,0)},gc.prototype.createSplitEdge=function(h,d){var m=d.segmentIndex-h.segmentIndex+2,b=d.dist>0||!d.coord.equals2D(this.edge.pts[d.segmentIndex]);b||m--;var B=new Array(m).fill(null),z=0;B[z++]=new $(h.coord);for(var q=h.segmentIndex+1;q<=d.segmentIndex;q++)B[z++]=this.edge.pts[q];return b&&(B[z]=d.coord),new H3(B,new ds(this.edge._label))},gc.prototype.add=function(h,d,m){var v=new ri(h,d,m),b=this._nodeMap.get(v);return null!==b?b:(this._nodeMap.put(v,v),v)},gc.prototype.isIntersection=function(h){for(var d=this.iterator();d.hasNext();)if(d.next().coord.equals(h))return!0;return!1},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc};var Oa=function(){};Oa.prototype.getChainStartIndices=function(h){var d=0,m=new rn;m.add(new Qe(d));do{var v=this.findChainEnd(h,d);m.add(new Qe(v)),d=v}while(d<h.length-1);return Oa.toIntArray(m)},Oa.prototype.findChainEnd=function(h,d){for(var m=Ds.quadrant(h[d],h[d+1]),v=d+1;v<h.length&&Ds.quadrant(h[v-1],h[v])===m;)v++;return v-1},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa},Oa.toIntArray=function(h){for(var d=new Array(h.size()).fill(null),m=0;m<d.length;m++)d[m]=h.get(m).intValue();return d};var mc=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new on,this.env2=new on;var h=arguments[0];this.e=h,this.pts=h.getCoordinates();var d=new Oa;this.startIndex=d.getChainStartIndices(this.pts)};mc.prototype.getCoordinates=function(){return this.pts},mc.prototype.getMaxX=function(h){var d=this.pts[this.startIndex[h]].x,m=this.pts[this.startIndex[h+1]].x;return d>m?d:m},mc.prototype.getMinX=function(h){var d=this.pts[this.startIndex[h]].x,m=this.pts[this.startIndex[h+1]].x;return d<m?d:m},mc.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var h=arguments[0],d=arguments[1],m=arguments[2];this.computeIntersectsForChain(this.startIndex[h],this.startIndex[h+1],d,d.startIndex[m],d.startIndex[m+1],arguments[3])}else if(6===arguments.length){var b=arguments[0],B=arguments[1],z=arguments[2],q=arguments[3],pe=arguments[4],Ue=arguments[5],gt=this.pts[b],pt=this.pts[B],fn=z.pts[q],Mn=z.pts[pe];if(B-b==1&&pe-q==1)return Ue.addIntersections(this.e,b,z.e,q),null;if(this.env1.init(gt,pt),this.env2.init(fn,Mn),!this.env1.intersects(this.env2))return null;var Fn=Math.trunc((b+B)/2),Zn=Math.trunc((q+pe)/2);b<Fn&&(q<Zn&&this.computeIntersectsForChain(b,Fn,z,q,Zn,Ue),Zn<pe&&this.computeIntersectsForChain(b,Fn,z,Zn,pe,Ue)),Fn<B&&(q<Zn&&this.computeIntersectsForChain(Fn,B,z,q,Zn,Ue),Zn<pe&&this.computeIntersectsForChain(Fn,B,z,Zn,pe,Ue))}},mc.prototype.getStartIndexes=function(){return this.startIndex},mc.prototype.computeIntersects=function(h,d){for(var m=0;m<this.startIndex.length-1;m++)for(var v=0;v<h.startIndex.length-1;v++)this.computeIntersectsForChain(m,h,v,d)},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc};var zi=function h(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var d=0;d<2;d++)for(var m=0;m<3;m++)this._depth[d][m]=h.NULL_VALUE},x1={NULL_VALUE:{configurable:!0}};zi.prototype.getDepth=function(h,d){return this._depth[h][d]},zi.prototype.setDepth=function(h,d,m){this._depth[h][d]=m},zi.prototype.isNull=function(){if(0===arguments.length){for(var h=0;h<2;h++)for(var d=0;d<3;d++)if(this._depth[h][d]!==zi.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===zi.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===zi.NULL_VALUE:void 0},zi.prototype.normalize=function(){for(var h=0;h<2;h++)if(!this.isNull(h)){var d=this._depth[h][1];this._depth[h][2]<d&&(d=this._depth[h][2]),d<0&&(d=0);for(var m=1;m<3;m++){var v=0;this._depth[h][m]>d&&(v=1),this._depth[h][m]=v}}},zi.prototype.getDelta=function(h){return this._depth[h][hn.RIGHT]-this._depth[h][hn.LEFT]},zi.prototype.getLocation=function(h,d){return this._depth[h][d]<=0?oe.EXTERIOR:oe.INTERIOR},zi.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},zi.prototype.add=function(){if(1===arguments.length)for(var h=arguments[0],d=0;d<2;d++)for(var m=1;m<3;m++){var v=h.getLocation(d,m);v!==oe.EXTERIOR&&v!==oe.INTERIOR||(this.isNull(d,m)?this._depth[d][m]=zi.depthAtLocation(v):this._depth[d][m]+=zi.depthAtLocation(v))}else 3===arguments.length&&arguments[2]===oe.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi},zi.depthAtLocation=function(h){return h===oe.EXTERIOR?0:h===oe.INTERIOR?1:zi.NULL_VALUE},x1.NULL_VALUE.get=function(){return-1},Object.defineProperties(zi,x1);var H3=function(h){function d(){if(h.call(this),this.pts=null,this._env=null,this.eiList=new gc(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new zi,this._depthDelta=0,1===arguments.length)d.call(this,arguments[0],null);else if(2===arguments.length){var b=arguments[1];this.pts=arguments[0],this._label=b}}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getDepth=function(){return this._depth},d.prototype.getCollapsedEdge=function(){var m=new Array(2).fill(null);return m[0]=this.pts[0],m[1]=this.pts[1],new d(m,ds.toLineLabel(this._label))},d.prototype.isIsolated=function(){return this._isIsolated},d.prototype.getCoordinates=function(){return this.pts},d.prototype.setIsolated=function(m){this._isIsolated=m},d.prototype.setName=function(m){this._name=m},d.prototype.equals=function(m){if(!(m instanceof d))return!1;var v=m;if(this.pts.length!==v.pts.length)return!1;for(var b=!0,B=!0,z=this.pts.length,q=0;q<this.pts.length;q++)if(this.pts[q].equals2D(v.pts[q])||(b=!1),this.pts[q].equals2D(v.pts[--z])||(B=!1),!b&&!B)return!1;return!0},d.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},d.prototype.print=function(m){m.print("edge "+this._name+": "),m.print("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&m.print(","),m.print(this.pts[v].x+" "+this.pts[v].y);m.print(")  "+this._label+" "+this._depthDelta)},d.prototype.computeIM=function(m){d.updateIM(this._label,m)},d.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},d.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},d.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},d.prototype.getDepthDelta=function(){return this._depthDelta},d.prototype.getNumPoints=function(){return this.pts.length},d.prototype.printReverse=function(m){m.print("edge "+this._name+": ");for(var v=this.pts.length-1;v>=0;v--)m.print(this.pts[v]+" ");m.println("")},d.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new mc(this)),this._mce},d.prototype.getEnvelope=function(){if(null===this._env){this._env=new on;for(var m=0;m<this.pts.length;m++)this._env.expandToInclude(this.pts[m])}return this._env},d.prototype.addIntersection=function(m,v,b,B){var z=new $(m.getIntersection(B)),q=v,pe=m.getEdgeDistance(b,B),Ue=q+1;Ue<this.pts.length&&z.equals2D(this.pts[Ue])&&(q=Ue,pe=0),this.eiList.add(z,q,pe)},d.prototype.toString=function(){var m=new be;m.append("edge "+this._name+": "),m.append("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&m.append(","),m.append(this.pts[v].x+" "+this.pts[v].y);return m.append(")  "+this._label+" "+this._depthDelta),m.toString()},d.prototype.isPointwiseEqual=function(m){if(this.pts.length!==m.pts.length)return!1;for(var v=0;v<this.pts.length;v++)if(!this.pts[v].equals2D(m.pts[v]))return!1;return!0},d.prototype.setDepthDelta=function(m){this._depthDelta=m},d.prototype.getEdgeIntersectionList=function(){return this.eiList},d.prototype.addIntersections=function(m,v,b){for(var B=0;B<m.getIntersectionNum();B++)this.addIntersection(m,v,b,B)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.updateIM=function(){if(2!==arguments.length)return h.prototype.updateIM.apply(this,arguments);var m=arguments[0],v=arguments[1];v.setAtLeastIfValid(m.getLocation(0,hn.ON),m.getLocation(1,hn.ON),1),m.isArea()&&(v.setAtLeastIfValid(m.getLocation(0,hn.LEFT),m.getLocation(1,hn.LEFT),2),v.setAtLeastIfValid(m.getLocation(0,hn.RIGHT),m.getLocation(1,hn.RIGHT),2))},d}(n2),Jo=function(h){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new dr,this._bufParams=h||null};Jo.prototype.setWorkingPrecisionModel=function(h){this._workingPrecisionModel=h},Jo.prototype.insertUniqueEdge=function(h){var d=this._edgeList.findEqualEdge(h);if(null!==d){var m=d.getLabel(),v=h.getLabel();d.isPointwiseEqual(h)||(v=new ds(h.getLabel())).flip(),m.merge(v);var b=Jo.depthDelta(v),B=d.getDepthDelta()+b;d.setDepthDelta(B)}else this._edgeList.add(h),h.setDepthDelta(Jo.depthDelta(h.getLabel()))},Jo.prototype.buildSubgraphs=function(h,d){for(var m=new rn,v=h.iterator();v.hasNext();){var b=v.next(),B=b.getRightmostCoordinate(),z=new ia(m).getDepth(B);b.computeDepth(z),b.findResultEdges(),m.add(b),d.add(b.getDirectedEdges(),b.getNodes())}},Jo.prototype.createSubgraphs=function(h){for(var d=new rn,m=h.getNodes().iterator();m.hasNext();){var v=m.next();if(!v.isVisited()){var b=new na;b.create(v),d.add(b)}}return Js.sort(d,Js.reverseOrder()),d},Jo.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Jo.prototype.getNoder=function(h){if(null!==this._workingNoder)return this._workingNoder;var d=new wl,m=new mt;return m.setPrecisionModel(h),d.setSegmentIntersector(new za(m)),d},Jo.prototype.buffer=function(h,d){var m=this._workingPrecisionModel;null===m&&(m=h.getPrecisionModel()),this._geomFact=h.getFactory();var v=new ir(m,this._bufParams),b=new $s(h,d,v).getCurves();if(b.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(b,m),this._graph=new wn(new uo),this._graph.addEdges(this._edgeList.getEdges());var B=this.createSubgraphs(this._graph),z=new s1(this._geomFact);this.buildSubgraphs(B,z);var q=z.getPolygons();return q.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(q)},Jo.prototype.computeNodedEdges=function(h,d){var m=this.getNoder(d);m.computeNodes(h);for(var v=m.getNodedSubstrings().iterator();v.hasNext();){var b=v.next(),B=b.getCoordinates();if(2!==B.length||!B[0].equals2D(B[1])){var z=b.getData(),q=new H3(b.getCoordinates(),new ds(z));this.insertUniqueEdge(q)}}},Jo.prototype.setNoder=function(h){this._workingNoder=h},Jo.prototype.interfaces_=function(){return[]},Jo.prototype.getClass=function(){return Jo},Jo.depthDelta=function(h){var d=h.getLocation(0,hn.LEFT),m=h.getLocation(0,hn.RIGHT);return d===oe.INTERIOR&&m===oe.EXTERIOR?1:d===oe.EXTERIOR&&m===oe.INTERIOR?-1:0},Jo.convertSegStrings=function(h){for(var d=new qi,m=new rn;h.hasNext();){var v=h.next(),b=d.createLineString(v.getCoordinates());m.add(b)}return d.buildGeometry(m)};var Na=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var d=arguments[1];this._noder=arguments[0],this._scaleFactor=d,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var v=arguments[1],b=arguments[2],B=arguments[3];this._noder=arguments[0],this._scaleFactor=v,this._offsetX=b,this._offsetY=B,this._isScaled=!this.isIntegerPrecision()}};Na.prototype.rescale=function(){if(At(arguments[0],Cs))for(var h=arguments[0].iterator();h.hasNext();){var d=h.next();this.rescale(d.getCoordinates())}else if(arguments[0]instanceof Array){for(var m=arguments[0],v=0;v<m.length;v++)m[v].x=m[v].x/this._scaleFactor+this._offsetX,m[v].y=m[v].y/this._scaleFactor+this._offsetY;2===m.length&&m[0].equals2D(m[1])&&qt.out.println(m)}},Na.prototype.scale=function(){if(At(arguments[0],Cs)){for(var h=arguments[0],d=new rn,m=h.iterator();m.hasNext();){var v=m.next();d.add(new Zo(this.scale(v.getCoordinates()),v.getData()))}return d}if(arguments[0]instanceof Array){for(var b=arguments[0],B=new Array(b.length).fill(null),z=0;z<b.length;z++)B[z]=new $(Math.round((b[z].x-this._offsetX)*this._scaleFactor),Math.round((b[z].y-this._offsetY)*this._scaleFactor),b[z].z);return Fi.removeRepeatedPoints(B)}},Na.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Na.prototype.getNodedSubstrings=function(){var h=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(h),h},Na.prototype.computeNodes=function(h){var d=h;this._isScaled&&(d=this.scale(h)),this._noder.computeNodes(d)},Na.prototype.interfaces_=function(){return[t3]},Na.prototype.getClass=function(){return Na};var Va=function(){this._li=new mt,this._segStrings=null,this._segStrings=arguments[0]},td={fact:{configurable:!0}};Va.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();){var d=h.next().getCoordinates();this.checkEndPtVertexIntersections(d[0],this._segStrings),this.checkEndPtVertexIntersections(d[d.length-1],this._segStrings)}else if(2===arguments.length)for(var m=arguments[0],v=arguments[1].iterator();v.hasNext();)for(var b=v.next().getCoordinates(),B=1;B<b.length-1;B++)if(b[B].equals(m))throw new le("found endpt/interior pt intersection at index "+B+" :pt "+m)},Va.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();)for(var d=h.next(),m=this._segStrings.iterator();m.hasNext();){var v=m.next();this.checkInteriorIntersections(d,v)}else if(2===arguments.length)for(var b=arguments[0],B=arguments[1],z=b.getCoordinates(),q=B.getCoordinates(),pe=0;pe<z.length-1;pe++)for(var Ue=0;Ue<q.length-1;Ue++)this.checkInteriorIntersections(b,pe,B,Ue);else if(4===arguments.length){var gt=arguments[0],pt=arguments[1],fn=arguments[2],Mn=arguments[3];if(gt===fn&&pt===Mn)return null;var Fn=gt.getCoordinates()[pt],Zn=gt.getCoordinates()[pt+1],zr=fn.getCoordinates()[Mn],Fo=fn.getCoordinates()[Mn+1];if(this._li.computeIntersection(Fn,Zn,zr,Fo),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Fn,Zn)||this.hasInteriorIntersection(this._li,zr,Fo)))throw new le("found non-noded intersection at "+Fn+"-"+Zn+" and "+zr+"-"+Fo)}},Va.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Va.prototype.checkCollapses=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();){var d=h.next();this.checkCollapses(d)}else if(1===arguments.length)for(var m=arguments[0].getCoordinates(),v=0;v<m.length-2;v++)this.checkCollapse(m[v],m[v+1],m[v+2])},Va.prototype.hasInteriorIntersection=function(h,d,m){for(var v=0;v<h.getIntersectionNum();v++){var b=h.getIntersection(v);if(!b.equals(d)&&!b.equals(m))return!0}return!1},Va.prototype.checkCollapse=function(h,d,m){if(h.equals(m))throw new le("found non-noded collapse at "+Va.fact.createLineString([h,d,m]))},Va.prototype.interfaces_=function(){return[]},Va.prototype.getClass=function(){return Va},td.fact.get=function(){return new qi},Object.defineProperties(Va,td);var lr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var h=arguments[0],d=arguments[1],m=arguments[2];if(this._originalPt=h,this._pt=h,this._scaleFactor=d,this._li=m,d<=0)throw new X("Scale factor must be non-zero");1!==d&&(this._pt=new $(this.scale(h.x),this.scale(h.y)),this._p0Scaled=new $,this._p1Scaled=new $),this.initCorners(this._pt)},b2={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};lr.prototype.intersectsScaled=function(h,d){var m=Math.min(h.x,d.x),v=Math.max(h.x,d.x),b=Math.min(h.y,d.y),B=Math.max(h.y,d.y),z=this._maxx<m||this._minx>v||this._maxy<b||this._miny>B;if(z)return!1;var q=this.intersectsToleranceSquare(h,d);return ee.isTrue(!(z&&q),"Found bad envelope test"),q},lr.prototype.initCorners=function(h){this._minx=h.x-.5,this._maxx=h.x+.5,this._miny=h.y-.5,this._maxy=h.y+.5,this._corner[0]=new $(this._maxx,this._maxy),this._corner[1]=new $(this._minx,this._maxy),this._corner[2]=new $(this._minx,this._miny),this._corner[3]=new $(this._maxx,this._miny)},lr.prototype.intersects=function(h,d){return 1===this._scaleFactor?this.intersectsScaled(h,d):(this.copyScaled(h,this._p0Scaled),this.copyScaled(d,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},lr.prototype.scale=function(h){return Math.round(h*this._scaleFactor)},lr.prototype.getCoordinate=function(){return this._originalPt},lr.prototype.copyScaled=function(h,d){d.x=this.scale(h.x),d.y=this.scale(h.y)},lr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var h=lr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new on(this._originalPt.x-h,this._originalPt.x+h,this._originalPt.y-h,this._originalPt.y+h)}return this._safeEnv},lr.prototype.intersectsPixelClosure=function(h,d){return this._li.computeIntersection(h,d,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},lr.prototype.intersectsToleranceSquare=function(h,d){var m=!1,v=!1;return this._li.computeIntersection(h,d,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(h,d,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(m=!0),this._li.computeIntersection(h,d,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(v=!0),this._li.computeIntersection(h,d,this._corner[3],this._corner[0]),this._li.isProper()||m&&v||h.equals(this._pt)||d.equals(this._pt)))))},lr.prototype.addSnappedNode=function(h,d){var m=h.getCoordinate(d),v=h.getCoordinate(d+1);return!!this.intersects(m,v)&&(h.addIntersection(this.getCoordinate(),d),!0)},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},b2.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(lr,b2);var U2=function(){this.tempEnv1=new on,this.selectedSegment=new ui};U2.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},U2.prototype.interfaces_=function(){return[]},U2.prototype.getClass=function(){return U2};var Ac=function(){this._index=null,this._index=arguments[0]},Ea={HotPixelSnapAction:{configurable:!0}};Ac.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var d=arguments[0],m=arguments[1],v=arguments[2],b=d.getSafeEnvelope(),B=new x2(d,m,v);return this._index.query(b,{interfaces_:function(){return[e3]},visitItem:function(z){z.select(b,B)}}),B.isNodeAdded()}},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ea.HotPixelSnapAction.get=function(){return x2},Object.defineProperties(Ac,Ea);var x2=function(h){function d(){h.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var v=arguments[1],b=arguments[2];this._hotPixel=arguments[0],this._parentEdge=v,this._hotPixelVertexIndex=b}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isNodeAdded=function(){return this._isNodeAdded},d.prototype.select=function(){if(2!==arguments.length)return h.prototype.select.apply(this,arguments);var v=arguments[1],b=arguments[0].getContext();if(null!==this._parentEdge&&b===this._parentEdge&&v===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(b,v)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(U2),Cl=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new rn};Cl.prototype.processIntersections=function(h,d,m,v){if(h===m&&d===v)return null;var b=h.getCoordinates()[d],B=h.getCoordinates()[d+1],z=m.getCoordinates()[v],q=m.getCoordinates()[v+1];if(this._li.computeIntersection(b,B,z,q),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var pe=0;pe<this._li.getIntersectionNum();pe++)this._interiorIntersections.add(this._li.getIntersection(pe));h.addIntersections(this._li,d,0),m.addIntersections(this._li,v,1)}},Cl.prototype.isDone=function(){return!1},Cl.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Cl.prototype.interfaces_=function(){return[Hs]},Cl.prototype.getClass=function(){return Cl};var M1=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var h=arguments[0];this._pm=h,this._li=new mt,this._li.setPrecisionModel(h),this._scaleFactor=h.getScale()};M1.prototype.checkCorrectness=function(h){var d=Zo.getNodedSubstrings(h),m=new Va(d);try{m.checkValid()}catch(v){if(!(v instanceof _n))throw v;v.printStackTrace()}},M1.prototype.getNodedSubstrings=function(){return Zo.getNodedSubstrings(this._nodedSegStrings)},M1.prototype.snapRound=function(h,d){var m=this.findInteriorIntersections(h,d);this.computeIntersectionSnaps(m),this.computeVertexSnaps(h)},M1.prototype.findInteriorIntersections=function(h,d){var m=new Cl(d);return this._noder.setSegmentIntersector(m),this._noder.computeNodes(h),m.getInteriorIntersections()},M1.prototype.computeVertexSnaps=function(){if(At(arguments[0],Cs))for(var h=arguments[0].iterator();h.hasNext();){var d=h.next();this.computeVertexSnaps(d)}else if(arguments[0]instanceof Zo)for(var m=arguments[0],v=m.getCoordinates(),b=0;b<v.length;b++){var B=new lr(v[b],this._scaleFactor,this._li);this._pointSnapper.snap(B,m,b)&&m.addIntersection(v[b],b)}},M1.prototype.computeNodes=function(h){this._nodedSegStrings=h,this._noder=new wl,this._pointSnapper=new Ac(this._noder.getIndex()),this.snapRound(h,this._li)},M1.prototype.computeIntersectionSnaps=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next(),v=new lr(m,this._scaleFactor,this._li);this._pointSnapper.snap(v)}},M1.prototype.interfaces_=function(){return[t3]},M1.prototype.getClass=function(){return M1};var Ir=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Dr,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var m=arguments[1];this._argGeom=arguments[0],this._bufParams=m}},uu={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ir.prototype.bufferFixedPrecision=function(h){var d=new Na(new M1(new Ln(1)),h.getScale()),m=new Jo(this._bufParams);m.setWorkingPrecisionModel(h),m.setNoder(d),this._resultGeometry=m.buffer(this._argGeom,this._distance)},Ir.prototype.bufferReducedPrecision=function(){var h=this;if(0===arguments.length){for(var d=Ir.MAX_PRECISION_DIGITS;d>=0;d--){try{h.bufferReducedPrecision(d)}catch(B){if(!(B instanceof r1))throw B;h._saveException=B}if(null!==h._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var v=Ir.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),b=new Ln(v);this.bufferFixedPrecision(b)}},Ir.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var h=this._argGeom.getFactory().getPrecisionModel();h.getType()===Ln.FIXED?this.bufferFixedPrecision(h):this.bufferReducedPrecision()},Ir.prototype.setQuadrantSegments=function(h){this._bufParams.setQuadrantSegments(h)},Ir.prototype.bufferOriginalPrecision=function(){try{var h=new Jo(this._bufParams);this._resultGeometry=h.buffer(this._argGeom,this._distance)}catch(d){if(!(d instanceof le))throw d;this._saveException=d}},Ir.prototype.getResultGeometry=function(h){return this._distance=h,this.computeGeometry(),this._resultGeometry},Ir.prototype.setEndCapStyle=function(h){this._bufParams.setEndCapStyle(h)},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Ir.bufferOp=function(){if(2===arguments.length){var d=arguments[1];return new Ir(arguments[0]).getResultGeometry(d)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof yn&&"number"==typeof arguments[1]){var v=arguments[1],b=arguments[2],B=new Ir(arguments[0]);return B.setQuadrantSegments(b),B.getResultGeometry(v)}if(arguments[2]instanceof Dr&&arguments[0]instanceof yn&&"number"==typeof arguments[1]){var q=arguments[1];return new Ir(arguments[0],arguments[2]).getResultGeometry(q)}}else if(4===arguments.length){var gt=arguments[1],pt=arguments[2],fn=arguments[3],Mn=new Ir(arguments[0]);return Mn.setQuadrantSegments(pt),Mn.setEndCapStyle(fn),Mn.getResultGeometry(gt)}},Ir.precisionScaleFactor=function(h,d,m){var v=h.getEnvelopeInternal(),b=xe.max(Math.abs(v.getMaxX()),Math.abs(v.getMaxY()),Math.abs(v.getMinX()),Math.abs(v.getMinY()))+2*(d>0?d:0),B=m-Math.trunc(Math.log(b)/Math.log(10)+1);return Math.pow(10,B)},uu.CAP_ROUND.get=function(){return Dr.CAP_ROUND},uu.CAP_BUTT.get=function(){return Dr.CAP_FLAT},uu.CAP_FLAT.get=function(){return Dr.CAP_FLAT},uu.CAP_SQUARE.get=function(){return Dr.CAP_SQUARE},uu.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ir,uu);var zs=function(){this._pt=[new $,new $],this._distance=Y.NaN,this._isNull=!0};zs.prototype.getCoordinates=function(){return this._pt},zs.prototype.getCoordinate=function(h){return this._pt[h]},zs.prototype.setMinimum=function(){if(1===arguments.length){var h=arguments[0];this.setMinimum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v<this._distance&&this.initialize(d,m,v)}},zs.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var h=arguments[0],d=arguments[1];this._pt[0].setCoordinate(h),this._pt[1].setCoordinate(d),this._distance=h.distance(d),this._isNull=!1}else if(3===arguments.length){var v=arguments[1],b=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(v),this._distance=b,this._isNull=!1}},zs.prototype.getDistance=function(){return this._distance},zs.prototype.setMaximum=function(){if(1===arguments.length){var h=arguments[0];this.setMaximum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v>this._distance&&this.initialize(d,m,v)}},zs.prototype.interfaces_=function(){return[]},zs.prototype.getClass=function(){return zs};var Bo=function(){};Bo.prototype.interfaces_=function(){return[]},Bo.prototype.getClass=function(){return Bo},Bo.computeDistance=function(){if(arguments[2]instanceof zs&&arguments[0]instanceof go&&arguments[1]instanceof $)for(var d=arguments[1],m=arguments[2],v=arguments[0].getCoordinates(),b=new ui,B=0;B<v.length-1;B++){b.setCoordinates(v[B],v[B+1]);var z=b.closestPoint(d);m.setMinimum(z,d)}else if(arguments[2]instanceof zs&&arguments[0]instanceof qo&&arguments[1]instanceof $){var q=arguments[0],pe=arguments[1],Ue=arguments[2];Bo.computeDistance(q.getExteriorRing(),pe,Ue);for(var gt=0;gt<q.getNumInteriorRing();gt++)Bo.computeDistance(q.getInteriorRingN(gt),pe,Ue)}else if(arguments[2]instanceof zs&&arguments[0]instanceof yn&&arguments[1]instanceof $){var pt=arguments[0],fn=arguments[1],Mn=arguments[2];if(pt instanceof go)Bo.computeDistance(pt,fn,Mn);else if(pt instanceof qo)Bo.computeDistance(pt,fn,Mn);else if(pt instanceof _1)for(var Fn=pt,Zn=0;Zn<Fn.getNumGeometries();Zn++){var zr=Fn.getGeometryN(Zn);Bo.computeDistance(zr,fn,Mn)}else Mn.setMinimum(pt.getCoordinate(),fn)}else if(arguments[2]instanceof zs&&arguments[0]instanceof ui&&arguments[1]instanceof $){var u1=arguments[1],xl=arguments[2],Ml=arguments[0].closestPoint(u1);xl.setMinimum(Ml,u1)}};var S1=function(h){this._maxPtDist=new zs,this._inputGeom=h||null},p0={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};S1.prototype.computeMaxMidpointDistance=function(h){var d=new ga(this._inputGeom);h.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},S1.prototype.computeMaxVertexDistance=function(h){var d=new n3(this._inputGeom);h.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},S1.prototype.findDistance=function(h){return this.computeMaxVertexDistance(h),this.computeMaxMidpointDistance(h),this._maxPtDist.getDistance()},S1.prototype.getDistancePoints=function(){return this._maxPtDist},S1.prototype.interfaces_=function(){return[]},S1.prototype.getClass=function(){return S1},p0.MaxPointDistanceFilter.get=function(){return n3},p0.MaxMidpointDistanceFilter.get=function(){return ga},Object.defineProperties(S1,p0);var n3=function(h){this._maxPtDist=new zs,this._minPtDist=new zs,this._geom=h||null};n3.prototype.filter=function(h){this._minPtDist.initialize(),Bo.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},n3.prototype.getMaxPointDistance=function(){return this._maxPtDist},n3.prototype.interfaces_=function(){return[ur]},n3.prototype.getClass=function(){return n3};var ga=function(h){this._maxPtDist=new zs,this._minPtDist=new zs,this._geom=h||null};ga.prototype.filter=function(h,d){if(0===d)return null;var m=h.getCoordinate(d-1),v=h.getCoordinate(d),b=new $((m.x+v.x)/2,(m.y+v.y)/2);this._minPtDist.initialize(),Bo.computeDistance(this._geom,b,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ga.prototype.isDone=function(){return!1},ga.prototype.isGeometryChanged=function(){return!1},ga.prototype.getMaxPointDistance=function(){return this._maxPtDist},ga.prototype.interfaces_=function(){return[y2]},ga.prototype.getClass=function(){return ga};var bl=function(h){this._comps=h||null};bl.prototype.filter=function(h){h instanceof qo&&this._comps.add(h)},bl.prototype.interfaces_=function(){return[Pa]},bl.prototype.getClass=function(){return bl},bl.getPolygons=function(){if(1===arguments.length)return bl.getPolygons(arguments[0],new rn);if(2===arguments.length){var d=arguments[0],m=arguments[1];return d instanceof qo?m.add(d):d instanceof _1&&d.apply(new bl(m)),m}};var a1=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var m=arguments[1];this._lines=arguments[0],this._isForcedToLineString=m}};a1.prototype.filter=function(h){if(this._isForcedToLineString&&h instanceof N2){var d=h.getFactory().createLineString(h.getCoordinateSequence());return this._lines.add(d),null}h instanceof go&&this._lines.add(h)},a1.prototype.setForceToLineString=function(h){this._isForcedToLineString=h},a1.prototype.interfaces_=function(){return[Hi]},a1.prototype.getClass=function(){return a1},a1.getGeometry=function(){if(1===arguments.length){var h=arguments[0];return h.getFactory().buildGeometry(a1.getLines(h))}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d.getFactory().buildGeometry(a1.getLines(d,m))}},a1.getLines=function(){if(1===arguments.length)return a1.getLines(arguments[0],!1);if(2===arguments.length){if(At(arguments[0],Cs)&&At(arguments[1],Cs)){for(var m=arguments[1],v=arguments[0].iterator();v.hasNext();){var b=v.next();a1.getLines(b,m)}return m}if(arguments[0]instanceof yn&&"boolean"==typeof arguments[1]){var B=arguments[0],z=arguments[1],q=new rn;return B.apply(new a1(q,z)),q}if(arguments[0]instanceof yn&&At(arguments[1],Cs)){var pe=arguments[0],Ue=arguments[1];return pe instanceof go?Ue.add(pe):pe.apply(new a1(Ue)),Ue}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&At(arguments[0],Cs)&&At(arguments[1],Cs)){for(var pt=arguments[1],fn=arguments[2],Mn=arguments[0].iterator();Mn.hasNext();){var Fn=Mn.next();a1.getLines(Fn,pt,fn)}return pt}if("boolean"==typeof arguments[2]&&arguments[0]instanceof yn&&At(arguments[1],Cs)){var zr=arguments[1];return arguments[0].apply(new a1(zr,arguments[2])),zr}}};var M2=function(){if(this._boundaryRule=yr.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var h=arguments[0];if(null===h)throw new X("Rule must be non-null");this._boundaryRule=h}};M2.prototype.locateInternal=function(){if(arguments[0]instanceof $&&arguments[1]instanceof qo){var h=arguments[0],d=arguments[1];if(d.isEmpty())return oe.EXTERIOR;var m=d.getExteriorRing(),v=this.locateInPolygonRing(h,m);if(v===oe.EXTERIOR)return oe.EXTERIOR;if(v===oe.BOUNDARY)return oe.BOUNDARY;for(var b=0;b<d.getNumInteriorRing();b++){var B=d.getInteriorRingN(b),z=this.locateInPolygonRing(h,B);if(z===oe.INTERIOR)return oe.EXTERIOR;if(z===oe.BOUNDARY)return oe.BOUNDARY}return oe.INTERIOR}if(arguments[0]instanceof $&&arguments[1]instanceof go){var q=arguments[0],pe=arguments[1];if(!pe.getEnvelopeInternal().intersects(q))return oe.EXTERIOR;var Ue=pe.getCoordinates();return pe.isClosed()||!q.equals(Ue[0])&&!q.equals(Ue[Ue.length-1])?Mt.isOnLine(q,Ue)?oe.INTERIOR:oe.EXTERIOR:oe.BOUNDARY}if(arguments[0]instanceof $&&arguments[1]instanceof hc){var gt=arguments[0];return arguments[1].getCoordinate().equals2D(gt)?oe.INTERIOR:oe.EXTERIOR}},M2.prototype.locateInPolygonRing=function(h,d){return d.getEnvelopeInternal().intersects(h)?Mt.locatePointInRing(h,d.getCoordinates()):oe.EXTERIOR},M2.prototype.intersects=function(h,d){return this.locate(h,d)!==oe.EXTERIOR},M2.prototype.updateLocationInfo=function(h){h===oe.INTERIOR&&(this._isIn=!0),h===oe.BOUNDARY&&this._numBoundaries++},M2.prototype.computeLocation=function(h,d){if(d instanceof hc&&this.updateLocationInfo(this.locateInternal(h,d)),d instanceof go)this.updateLocationInfo(this.locateInternal(h,d));else if(d instanceof qo)this.updateLocationInfo(this.locateInternal(h,d));else if(d instanceof R3)for(var m=d,v=0;v<m.getNumGeometries();v++){var b=m.getGeometryN(v);this.updateLocationInfo(this.locateInternal(h,b))}else if(d instanceof kc)for(var B=d,z=0;z<B.getNumGeometries();z++){var q=B.getGeometryN(z);this.updateLocationInfo(this.locateInternal(h,q))}else if(d instanceof _1)for(var pe=new ki(d);pe.hasNext();){var Ue=pe.next();Ue!==d&&this.computeLocation(h,Ue)}},M2.prototype.locate=function(h,d){return d.isEmpty()?oe.EXTERIOR:d instanceof go||d instanceof qo?this.locateInternal(h,d):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(h,d),this._boundaryRule.isInBoundary(this._numBoundaries)?oe.BOUNDARY:this._numBoundaries>0||this._isIn?oe.INTERIOR:oe.EXTERIOR)},M2.prototype.interfaces_=function(){return[]},M2.prototype.getClass=function(){return M2};var ho=function h(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)h.call(this,arguments[0],h.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var b=arguments[1],B=arguments[2];this._component=arguments[0],this._segIndex=b,this._pt=B}},_p={INSIDE_AREA:{configurable:!0}};ho.prototype.isInsideArea=function(){return this._segIndex===ho.INSIDE_AREA},ho.prototype.getCoordinate=function(){return this._pt},ho.prototype.getGeometryComponent=function(){return this._component},ho.prototype.getSegmentIndex=function(){return this._segIndex},ho.prototype.interfaces_=function(){return[]},ho.prototype.getClass=function(){return ho},_p.INSIDE_AREA.get=function(){return-1},Object.defineProperties(ho,_p);var C4=function(h){this._pts=h||null};C4.prototype.filter=function(h){h instanceof hc&&this._pts.add(h)},C4.prototype.interfaces_=function(){return[Pa]},C4.prototype.getClass=function(){return C4},C4.getPoints=function(){if(1===arguments.length){var h=arguments[0];return h instanceof hc?Js.singletonList(h):C4.getPoints(h,new rn)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d instanceof hc?m.add(d):d instanceof _1&&d.apply(new C4(m)),m}};var g0=function(){this._locations=null,this._locations=arguments[0]};g0.prototype.filter=function(h){(h instanceof hc||h instanceof go||h instanceof qo)&&this._locations.add(new ho(h,0,h.getCoordinate()))},g0.prototype.interfaces_=function(){return[Pa]},g0.prototype.getClass=function(){return g0},g0.getLocations=function(h){var d=new rn;return h.apply(new g0(d)),d};var ma=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new M2,this._minDistanceLocation=null,this._minDistance=Y.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var m=arguments[0],v=arguments[1],b=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=m,this._geom[1]=v,this._terminateDistance=b}};ma.prototype.computeContainmentDistance=function(){if(0===arguments.length){var h=new Array(2).fill(null);if(this.computeContainmentDistance(0,h),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1],v=1-d,b=bl.getPolygons(this._geom[d]);if(b.size()>0){var B=g0.getLocations(this._geom[v]);if(this.computeContainmentDistance(B,b,m),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[v]=m[0],this._minDistanceLocation[d]=m[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&At(arguments[0],$o)&&At(arguments[1],$o)){for(var z=arguments[0],q=arguments[1],pe=arguments[2],Ue=0;Ue<z.size();Ue++)for(var gt=z.get(Ue),pt=0;pt<q.size();pt++)if(this.computeContainmentDistance(gt,q.get(pt),pe),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ho&&arguments[1]instanceof qo){var fn=arguments[0],Mn=arguments[1],Fn=arguments[2],Zn=fn.getCoordinate();if(oe.EXTERIOR!==this._ptLocator.locate(Zn,Mn))return this._minDistance=0,Fn[0]=fn,Fn[1]=new ho(Mn,Zn),null}},ma.prototype.computeMinDistanceLinesPoints=function(h,d,m){for(var v=0;v<h.size();v++)for(var b=h.get(v),B=0;B<d.size();B++){var z=d.get(B);if(this.computeMinDistance(b,z,m),this._minDistance<=this._terminateDistance)return null}},ma.prototype.computeFacetDistance=function(){var h=new Array(2).fill(null),d=a1.getLines(this._geom[0]),m=a1.getLines(this._geom[1]),v=C4.getPoints(this._geom[0]),b=C4.getPoints(this._geom[1]);return this.computeMinDistanceLines(d,m,h),this.updateMinDistance(h,!1),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistanceLinesPoints(d,b,h),this.updateMinDistance(h,!1),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistanceLinesPoints(m,v,h),this.updateMinDistance(h,!0),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistancePoints(v,b,h),void this.updateMinDistance(h,!1))))},ma.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},ma.prototype.updateMinDistance=function(h,d){if(null===h[0])return null;d?(this._minDistanceLocation[0]=h[1],this._minDistanceLocation[1]=h[0]):(this._minDistanceLocation[0]=h[0],this._minDistanceLocation[1]=h[1])},ma.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},ma.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof go&&arguments[1]instanceof hc){var h=arguments[0],d=arguments[1],m=arguments[2];if(h.getEnvelopeInternal().distance(d.getEnvelopeInternal())>this._minDistance)return null;for(var v=h.getCoordinates(),b=d.getCoordinate(),B=0;B<v.length-1;B++){var z=Mt.distancePointLine(b,v[B],v[B+1]);if(z<this._minDistance){this._minDistance=z;var q=new ui(v[B],v[B+1]).closestPoint(b);m[0]=new ho(h,B,q),m[1]=new ho(d,0,b)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof go&&arguments[1]instanceof go){var pe=arguments[0],Ue=arguments[1],gt=arguments[2];if(pe.getEnvelopeInternal().distance(Ue.getEnvelopeInternal())>this._minDistance)return null;for(var pt=pe.getCoordinates(),fn=Ue.getCoordinates(),Mn=0;Mn<pt.length-1;Mn++)for(var Fn=0;Fn<fn.length-1;Fn++){var Zn=Mt.distanceLineLine(pt[Mn],pt[Mn+1],fn[Fn],fn[Fn+1]);if(Zn<this._minDistance){this._minDistance=Zn;var zr=new ui(pt[Mn],pt[Mn+1]),Fo=new ui(fn[Fn],fn[Fn+1]),u1=zr.closestPoints(Fo);gt[0]=new ho(pe,Mn,u1[0]),gt[1]=new ho(Ue,Fn,u1[1])}if(this._minDistance<=this._terminateDistance)return null}}},ma.prototype.computeMinDistancePoints=function(h,d,m){for(var v=0;v<h.size();v++)for(var b=h.get(v),B=0;B<d.size();B++){var z=d.get(B),q=b.getCoordinate().distance(z.getCoordinate());if(q<this._minDistance&&(this._minDistance=q,m[0]=new ho(b,0,b.getCoordinate()),m[1]=new ho(z,0,z.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},ma.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new X("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},ma.prototype.computeMinDistanceLines=function(h,d,m){for(var v=0;v<h.size();v++)for(var b=h.get(v),B=0;B<d.size();B++){var z=d.get(B);if(this.computeMinDistance(b,z,m),this._minDistance<=this._terminateDistance)return null}},ma.prototype.interfaces_=function(){return[]},ma.prototype.getClass=function(){return ma},ma.distance=function(h,d){return new ma(h,d).distance()},ma.isWithinDistance=function(h,d,m){return new ma(h,d,m).distance()<=m},ma.nearestPoints=function(h,d){return new ma(h,d).nearestPoints()};var E1=function(){this._pt=[new $,new $],this._distance=Y.NaN,this._isNull=!0};E1.prototype.getCoordinates=function(){return this._pt},E1.prototype.getCoordinate=function(h){return this._pt[h]},E1.prototype.setMinimum=function(){if(1===arguments.length){var h=arguments[0];this.setMinimum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v<this._distance&&this.initialize(d,m,v)}},E1.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var h=arguments[0],d=arguments[1];this._pt[0].setCoordinate(h),this._pt[1].setCoordinate(d),this._distance=h.distance(d),this._isNull=!1}else if(3===arguments.length){var v=arguments[1],b=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(v),this._distance=b,this._isNull=!1}},E1.prototype.toString=function(){return it.toLineString(this._pt[0],this._pt[1])},E1.prototype.getDistance=function(){return this._distance},E1.prototype.setMaximum=function(){if(1===arguments.length){var h=arguments[0];this.setMaximum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v>this._distance&&this.initialize(d,m,v)}},E1.prototype.interfaces_=function(){return[]},E1.prototype.getClass=function(){return E1};var G2=function(){};G2.prototype.interfaces_=function(){return[]},G2.prototype.getClass=function(){return G2},G2.computeDistance=function(){if(arguments[2]instanceof E1&&arguments[0]instanceof go&&arguments[1]instanceof $)for(var h=arguments[0],d=arguments[1],m=arguments[2],v=new ui,b=h.getCoordinates(),B=0;B<b.length-1;B++){v.setCoordinates(b[B],b[B+1]);var z=v.closestPoint(d);m.setMinimum(z,d)}else if(arguments[2]instanceof E1&&arguments[0]instanceof qo&&arguments[1]instanceof $){var q=arguments[0],pe=arguments[1],Ue=arguments[2];G2.computeDistance(q.getExteriorRing(),pe,Ue);for(var gt=0;gt<q.getNumInteriorRing();gt++)G2.computeDistance(q.getInteriorRingN(gt),pe,Ue)}else if(arguments[2]instanceof E1&&arguments[0]instanceof yn&&arguments[1]instanceof $){var pt=arguments[0],fn=arguments[1],Mn=arguments[2];if(pt instanceof go)G2.computeDistance(pt,fn,Mn);else if(pt instanceof qo)G2.computeDistance(pt,fn,Mn);else if(pt instanceof _1)for(var Fn=pt,Zn=0;Zn<Fn.getNumGeometries();Zn++){var zr=Fn.getGeometryN(Zn);G2.computeDistance(zr,fn,Mn)}else Mn.setMinimum(pt.getCoordinate(),fn)}else if(arguments[2]instanceof E1&&arguments[0]instanceof ui&&arguments[1]instanceof $){var u1=arguments[1],xl=arguments[2],Ml=arguments[0].closestPoint(u1);xl.setMinimum(Ml,u1)}};var a2=function(){this._g0=null,this._g1=null,this._ptDist=new E1,this._densifyFrac=0;var d=arguments[1];this._g0=arguments[0],this._g1=d},U6={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};a2.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},a2.prototype.setDensifyFraction=function(h){if(h>1||h<=0)throw new X("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=h},a2.prototype.compute=function(h,d){this.computeOrientedDistance(h,d,this._ptDist),this.computeOrientedDistance(d,h,this._ptDist)},a2.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},a2.prototype.computeOrientedDistance=function(h,d,m){var v=new hu(d);if(h.apply(v),m.setMaximum(v.getMaxPointDistance()),this._densifyFrac>0){var b=new z3(d,this._densifyFrac);h.apply(b),m.setMaximum(b.getMaxPointDistance())}},a2.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},a2.prototype.interfaces_=function(){return[]},a2.prototype.getClass=function(){return a2},a2.distance=function(){if(2===arguments.length)return new a2(arguments[0],arguments[1]).distance();if(3===arguments.length){var b=arguments[2],B=new a2(arguments[0],arguments[1]);return B.setDensifyFraction(b),B.distance()}},U6.MaxPointDistanceFilter.get=function(){return hu},U6.MaxDensifiedByFractionDistanceFilter.get=function(){return z3},Object.defineProperties(a2,U6);var hu=function(){this._maxPtDist=new E1,this._minPtDist=new E1,this._euclideanDist=new G2,this._geom=null,this._geom=arguments[0]};hu.prototype.filter=function(h){this._minPtDist.initialize(),G2.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},hu.prototype.getMaxPointDistance=function(){return this._maxPtDist},hu.prototype.interfaces_=function(){return[ur]},hu.prototype.getClass=function(){return hu};var z3=function(){this._maxPtDist=new E1,this._minPtDist=new E1,this._geom=null,this._numSubSegs=0;var d=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/d))};z3.prototype.filter=function(h,d){if(0===d)return null;for(var m=h.getCoordinate(d-1),v=h.getCoordinate(d),b=(v.x-m.x)/this._numSubSegs,B=(v.y-m.y)/this._numSubSegs,z=0;z<this._numSubSegs;z++){var Ue=new $(m.x+z*b,m.y+z*B);this._minPtDist.initialize(),G2.computeDistance(this._geom,Ue,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},z3.prototype.isDone=function(){return!1},z3.prototype.isGeometryChanged=function(){return!1},z3.prototype.getMaxPointDistance=function(){return this._maxPtDist},z3.prototype.interfaces_=function(){return[y2]},z3.prototype.getClass=function(){return z3};var vc=function(h,d,m){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=h||null,this._bufDistance=d||null,this._result=m||null},G6={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};vc.prototype.checkMaximumDistance=function(h,d,m){var v=new a2(d,h);if(v.setDensifyFraction(.25),this._maxDistanceFound=v.orientedDistance(),this._maxDistanceFound>m){this._isValid=!1;var b=v.getCoordinates();this._errorLocation=b[1],this._errorIndicator=h.getFactory().createLineString(b),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+it.toLineString(b[0],b[1])+")"}},vc.prototype.isValid=function(){var h=Math.abs(this._bufDistance),d=vc.MAX_DISTANCE_DIFF_FRAC*h;return this._minValidDistance=h-d,this._maxValidDistance=h+d,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),vc.VERBOSE&&qt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},vc.prototype.checkNegativeValid=function(){if(!(this._input instanceof qo||this._input instanceof kc||this._input instanceof _1))return null;var h=this.getPolygonLines(this._input);if(this.checkMinimumDistance(h,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(h,this._result,this._maxValidDistance)},vc.prototype.getErrorIndicator=function(){return this._errorIndicator},vc.prototype.checkMinimumDistance=function(h,d,m){var v=new ma(h,d,m);if(this._minDistanceFound=v.distance(),this._minDistanceFound<m){this._isValid=!1;var b=v.nearestPoints();this._errorLocation=v.nearestPoints()[1],this._errorIndicator=h.getFactory().createLineString(b),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+it.toLineString(b[0],b[1])+" )"}},vc.prototype.checkPositiveValid=function(){var h=this._result.getBoundary();if(this.checkMinimumDistance(this._input,h,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,h,this._maxValidDistance)},vc.prototype.getErrorLocation=function(){return this._errorLocation},vc.prototype.getPolygonLines=function(h){for(var d=new rn,m=new a1(d),v=bl.getPolygons(h).iterator();v.hasNext();)v.next().apply(m);return h.getFactory().buildGeometry(d)},vc.prototype.getErrorMessage=function(){return this._errMsg},vc.prototype.interfaces_=function(){return[]},vc.prototype.getClass=function(){return vc},G6.VERBOSE.get=function(){return!1},G6.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(vc,G6);var Ua=function(h,d,m){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=h||null,this._distance=d||null,this._result=m||null},yp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Ua.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Ua.prototype.checkEnvelope=function(){if(this._distance<0)return null;var h=this._distance*Ua.MAX_ENV_DIFF_FRAC;0===h&&(h=.001);var d=new on(this._input.getEnvelopeInternal());d.expandBy(this._distance);var m=new on(this._result.getEnvelopeInternal());m.expandBy(h),m.contains(d)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(m)),this.report("Envelope")},Ua.prototype.checkDistance=function(){var h=new vc(this._input,this._distance,this._result);h.isValid()||(this._isValid=!1,this._errorMsg=h.getErrorMessage(),this._errorLocation=h.getErrorLocation(),this._errorIndicator=h.getErrorIndicator()),this.report("Distance")},Ua.prototype.checkArea=function(){var h=this._input.getArea(),d=this._result.getArea();this._distance>0&&h>d&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&h<d&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Ua.prototype.checkPolygonal=function(){this._result instanceof qo||this._result instanceof kc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Ua.prototype.getErrorIndicator=function(){return this._errorIndicator},Ua.prototype.getErrorLocation=function(){return this._errorLocation},Ua.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Ua.prototype.report=function(h){if(!Ua.VERBOSE)return null;qt.out.println("Check "+h+": "+(this._isValid?"passed":"FAILED"))},Ua.prototype.getErrorMessage=function(){return this._errorMsg},Ua.prototype.interfaces_=function(){return[]},Ua.prototype.getClass=function(){return Ua},Ua.isValidMsg=function(h,d,m){var v=new Ua(h,d,m);return v.isValid()?null:v.getErrorMessage()},Ua.isValid=function(h,d,m){return!!new Ua(h,d,m).isValid()},yp.VERBOSE.get=function(){return!1},yp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ua,yp);var _c=function(){this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};_c.prototype.getCoordinates=function(){return this._pts},_c.prototype.size=function(){return this._pts.length},_c.prototype.getCoordinate=function(h){return this._pts[h]},_c.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},_c.prototype.getSegmentOctant=function(h){return h===this._pts.length-1?-1:C2.octant(this.getCoordinate(h),this.getCoordinate(h+1))},_c.prototype.setData=function(h){this._data=h},_c.prototype.getData=function(){return this._data},_c.prototype.toString=function(){return it.toLineString(new mo(this._pts))},_c.prototype.interfaces_=function(){return[Yo]},_c.prototype.getClass=function(){return _c};var ra=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new rn,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};ra.prototype.getInteriorIntersection=function(){return this._interiorIntersection},ra.prototype.setCheckEndSegmentsOnly=function(h){this._isCheckEndSegmentsOnly=h},ra.prototype.getIntersectionSegments=function(){return this._intSegments},ra.prototype.count=function(){return this._intersectionCount},ra.prototype.getIntersections=function(){return this._intersections},ra.prototype.setFindAllIntersections=function(h){this._findAllIntersections=h},ra.prototype.setKeepIntersections=function(h){this._keepIntersections=h},ra.prototype.processIntersections=function(h,d,m,v){if(!this._findAllIntersections&&this.hasIntersection()||h===m&&d===v||this._isCheckEndSegmentsOnly&&!this.isEndSegment(h,d)&&!this.isEndSegment(m,v))return null;var b=h.getCoordinates()[d],B=h.getCoordinates()[d+1],z=m.getCoordinates()[v],q=m.getCoordinates()[v+1];this._li.computeIntersection(b,B,z,q),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=b,this._intSegments[1]=B,this._intSegments[2]=z,this._intSegments[3]=q,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},ra.prototype.isEndSegment=function(h,d){return 0===d||d>=h.size()-2},ra.prototype.hasIntersection=function(){return null!==this._interiorIntersection},ra.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},ra.prototype.interfaces_=function(){return[Hs]},ra.prototype.getClass=function(){return ra},ra.createAllIntersectionsFinder=function(h){var d=new ra(h);return d.setFindAllIntersections(!0),d},ra.createAnyIntersectionFinder=function(h){return new ra(h)},ra.createIntersectionCounter=function(h){var d=new ra(h);return d.setFindAllIntersections(!0),d.setKeepIntersections(!1),d};var Q2=function(){this._li=new mt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};Q2.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Q2.prototype.getIntersections=function(){return this._segInt.getIntersections()},Q2.prototype.isValid=function(){return this.execute(),this._isValid},Q2.prototype.setFindAllIntersections=function(h){this._findAllIntersections=h},Q2.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new ra(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var h=new wl;if(h.setSegmentIntersector(this._segInt),h.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Q2.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new r1(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Q2.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var h=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+it.toLineString(h[0],h[1])+" and "+it.toLineString(h[2],h[3])},Q2.prototype.interfaces_=function(){return[]},Q2.prototype.getClass=function(){return Q2},Q2.computeIntersections=function(h){var d=new Q2(h);return d.setFindAllIntersections(!0),d.isValid(),d.getIntersections()};var O3=function h(){this._nv=null,this._nv=new Q2(h.toSegmentStrings(arguments[0]))};O3.prototype.checkValid=function(){this._nv.checkValid()},O3.prototype.interfaces_=function(){return[]},O3.prototype.getClass=function(){return O3},O3.toSegmentStrings=function(h){for(var d=new rn,m=h.iterator();m.hasNext();){var v=m.next();d.add(new _c(v.getCoordinates(),v))}return d},O3.checkValid=function(h){new O3(h).checkValid()};var m0=function(h){this._mapOp=h};m0.prototype.map=function(h){for(var d=new rn,m=0;m<h.getNumGeometries();m++){var v=this._mapOp.map(h.getGeometryN(m));v.isEmpty()||d.add(v)}return h.getFactory().createGeometryCollection(qi.toGeometryArray(d))},m0.prototype.interfaces_=function(){return[]},m0.prototype.getClass=function(){return m0},m0.map=function(h,d){return new m0(d).map(h)};var c1=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new rn,this._resultLineList=new rn;var d=arguments[1],m=arguments[2];this._op=arguments[0],this._geometryFactory=d,this._ptLocator=m};c1.prototype.collectLines=function(h){for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var m=d.next();this.collectLineEdge(m,h,this._lineEdgesList),this.collectBoundaryTouchEdge(m,h,this._lineEdgesList)}},c1.prototype.labelIsolatedLine=function(h,d){var m=this._ptLocator.locate(h.getCoordinate(),this._op.getArgGeometry(d));h.getLabel().setLocation(d,m)},c1.prototype.build=function(h){return this.findCoveredLineEdges(),this.collectLines(h),this.buildLines(h),this._resultLineList},c1.prototype.collectLineEdge=function(h,d,m){var v=h.getLabel(),b=h.getEdge();h.isLineEdge()&&(h.isVisited()||!Vi.isResultOfOp(v,d)||b.isCovered()||(m.add(b),h.setVisitedEdge(!0)))},c1.prototype.findCoveredLineEdges=function(){for(var h=this._op.getGraph().getNodes().iterator();h.hasNext();)h.next().getEdges().findCoveredLineEdges();for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var m=d.next(),v=m.getEdge();if(m.isLineEdge()&&!v.isCoveredSet()){var b=this._op.isCoveredByA(m.getCoordinate());v.setCovered(b)}}},c1.prototype.labelIsolatedLines=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next(),v=m.getLabel();m.isIsolated()&&(v.isNull(0)?this.labelIsolatedLine(m,0):this.labelIsolatedLine(m,1))}},c1.prototype.buildLines=function(h){for(var d=this._lineEdgesList.iterator();d.hasNext();){var m=d.next(),v=this._geometryFactory.createLineString(m.getCoordinates());this._resultLineList.add(v),m.setInResult(!0)}},c1.prototype.collectBoundaryTouchEdge=function(h,d,m){var v=h.getLabel();return h.isLineEdge()||h.isVisited()||h.isInteriorAreaEdge()||h.getEdge().isInResult()?null:(ee.isTrue(!(h.isInResult()||h.getSym().isInResult())||!h.getEdge().isInResult()),void(Vi.isResultOfOp(v,d)&&d===Vi.INTERSECTION&&(m.add(h.getEdge()),h.setVisitedEdge(!0))))},c1.prototype.interfaces_=function(){return[]},c1.prototype.getClass=function(){return c1};var fu=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new rn;var d=arguments[1];this._op=arguments[0],this._geometryFactory=d};fu.prototype.filterCoveredNodeToPoint=function(h){var d=h.getCoordinate();if(!this._op.isCoveredByLA(d)){var m=this._geometryFactory.createPoint(d);this._resultPointList.add(m)}},fu.prototype.extractNonCoveredResultNodes=function(h){for(var d=this._op.getGraph().getNodes().iterator();d.hasNext();){var m=d.next();if(!(m.isInResult()||m.isIncidentEdgeInResult()||0!==m.getEdges().getDegree()&&h!==Vi.INTERSECTION)){var v=m.getLabel();Vi.isResultOfOp(v,h)&&this.filterCoveredNodeToPoint(m)}}},fu.prototype.build=function(h){return this.extractNonCoveredResultNodes(h),this._resultPointList},fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu};var wr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};wr.prototype.transformPoint=function(h,d){return this._factory.createPoint(this.transformCoordinates(h.getCoordinateSequence(),h))},wr.prototype.transformPolygon=function(h,d){var m=!0,v=this.transformLinearRing(h.getExteriorRing(),h);null!==v&&v instanceof N2&&!v.isEmpty()||(m=!1);for(var b=new rn,B=0;B<h.getNumInteriorRing();B++){var z=this.transformLinearRing(h.getInteriorRingN(B),h);null===z||z.isEmpty()||(z instanceof N2||(m=!1),b.add(z))}if(m)return this._factory.createPolygon(v,b.toArray([]));var q=new rn;return null!==v&&q.add(v),q.addAll(b),this._factory.buildGeometry(q)},wr.prototype.createCoordinateSequence=function(h){return this._factory.getCoordinateSequenceFactory().create(h)},wr.prototype.getInputGeometry=function(){return this._inputGeom},wr.prototype.transformMultiLineString=function(h,d){for(var m=new rn,v=0;v<h.getNumGeometries();v++){var b=this.transformLineString(h.getGeometryN(v),h);null!==b&&(b.isEmpty()||m.add(b))}return this._factory.buildGeometry(m)},wr.prototype.transformCoordinates=function(h,d){return this.copy(h)},wr.prototype.transformLineString=function(h,d){return this._factory.createLineString(this.transformCoordinates(h.getCoordinateSequence(),h))},wr.prototype.transformMultiPoint=function(h,d){for(var m=new rn,v=0;v<h.getNumGeometries();v++){var b=this.transformPoint(h.getGeometryN(v),h);null!==b&&(b.isEmpty()||m.add(b))}return this._factory.buildGeometry(m)},wr.prototype.transformMultiPolygon=function(h,d){for(var m=new rn,v=0;v<h.getNumGeometries();v++){var b=this.transformPolygon(h.getGeometryN(v),h);null!==b&&(b.isEmpty()||m.add(b))}return this._factory.buildGeometry(m)},wr.prototype.copy=function(h){return h.copy()},wr.prototype.transformGeometryCollection=function(h,d){for(var m=new rn,v=0;v<h.getNumGeometries();v++){var b=this.transform(h.getGeometryN(v));null!==b&&(this._pruneEmptyGeometry&&b.isEmpty()||m.add(b))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(qi.toGeometryArray(m)):this._factory.buildGeometry(m)},wr.prototype.transform=function(h){if(this._inputGeom=h,this._factory=h.getFactory(),h instanceof hc)return this.transformPoint(h,null);if(h instanceof Zl)return this.transformMultiPoint(h,null);if(h instanceof N2)return this.transformLinearRing(h,null);if(h instanceof go)return this.transformLineString(h,null);if(h instanceof R3)return this.transformMultiLineString(h,null);if(h instanceof qo)return this.transformPolygon(h,null);if(h instanceof kc)return this.transformMultiPolygon(h,null);if(h instanceof _1)return this.transformGeometryCollection(h,null);throw new X("Unknown Geometry subtype: "+h.getClass().getName())},wr.prototype.transformLinearRing=function(h,d){var m=this.transformCoordinates(h.getCoordinateSequence(),h);if(null===m)return this._factory.createLinearRing(null);var v=m.size();return v>0&&v<4&&!this._preserveType?this._factory.createLineString(m):this._factory.createLinearRing(m)},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr};var W2=function h(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ui,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof go&&"number"==typeof arguments[1]){var m=arguments[1];h.call(this,arguments[0].getCoordinates(),m)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var v=arguments[0],b=arguments[1];this._srcPts=v,this._isClosed=h.isClosed(v),this._snapTolerance=b}};W2.prototype.snapVertices=function(h,d){for(var m=this._isClosed?h.size()-1:h.size(),v=0;v<m;v++){var b=h.get(v),B=this.findSnapForVertex(b,d);null!==B&&(h.set(v,new $(B)),0===v&&this._isClosed&&h.set(h.size()-1,new $(B)))}},W2.prototype.findSnapForVertex=function(h,d){for(var m=0;m<d.length;m++){if(h.equals2D(d[m]))return null;if(h.distance(d[m])<this._snapTolerance)return d[m]}return null},W2.prototype.snapTo=function(h){var d=new uc(this._srcPts);return this.snapVertices(d,h),this.snapSegments(d,h),d.toCoordinateArray()},W2.prototype.snapSegments=function(h,d){if(0===d.length)return null;var m=d.length;d[0].equals2D(d[d.length-1])&&(m=d.length-1);for(var v=0;v<m;v++){var b=d[v],B=this.findSegmentIndexToSnap(b,h);B>=0&&h.add(B+1,new $(b),!1)}},W2.prototype.findSegmentIndexToSnap=function(h,d){for(var m=Y.MAX_VALUE,v=-1,b=0;b<d.size()-1;b++){if(this._seg.p0=d.get(b),this._seg.p1=d.get(b+1),this._seg.p0.equals2D(h)||this._seg.p1.equals2D(h)){if(this._allowSnappingToSourceVertices)continue;return-1}var B=this._seg.distance(h);B<this._snapTolerance&&B<m&&(m=B,v=b)}return v},W2.prototype.setAllowSnappingToSourceVertices=function(h){this._allowSnappingToSourceVertices=h},W2.prototype.interfaces_=function(){return[]},W2.prototype.getClass=function(){return W2},W2.isClosed=function(h){return!(h.length<=1)&&h[0].equals2D(h[h.length-1])};var Ro=function(h){this._srcGeom=h||null},wp={SNAP_PRECISION_FACTOR:{configurable:!0}};Ro.prototype.snapTo=function(h,d){var m=this.extractTargetCoordinates(h);return new N3(d,m).transform(this._srcGeom)},Ro.prototype.snapToSelf=function(h,d){var m=this.extractTargetCoordinates(this._srcGeom),v=new N3(h,m,!0).transform(this._srcGeom),b=v;return d&&At(b,w2)&&(b=v.buffer(0)),b},Ro.prototype.computeSnapTolerance=function(h){return this.computeMinimumSegmentLength(h)/10},Ro.prototype.extractTargetCoordinates=function(h){for(var d=new yt,m=h.getCoordinates(),v=0;v<m.length;v++)d.add(m[v]);return d.toArray(new Array(0).fill(null))},Ro.prototype.computeMinimumSegmentLength=function(h){for(var d=Y.MAX_VALUE,m=0;m<h.length-1;m++){var v=h[m].distance(h[m+1]);v<d&&(d=v)}return d},Ro.prototype.interfaces_=function(){return[]},Ro.prototype.getClass=function(){return Ro},Ro.snap=function(h,d,m){var v=new Array(2).fill(null),b=new Ro(h);v[0]=b.snapTo(d,m);var B=new Ro(d);return v[1]=B.snapTo(v[0],m),v},Ro.computeOverlaySnapTolerance=function(){if(1===arguments.length){var h=arguments[0],d=Ro.computeSizeBasedSnapTolerance(h),m=h.getPrecisionModel();if(m.getType()===Ln.FIXED){var v=1/m.getScale()*2/1.415;v>d&&(d=v)}return d}if(2===arguments.length){var B=arguments[1];return Math.min(Ro.computeOverlaySnapTolerance(arguments[0]),Ro.computeOverlaySnapTolerance(B))}},Ro.computeSizeBasedSnapTolerance=function(h){var d=h.getEnvelopeInternal();return Math.min(d.getHeight(),d.getWidth())*Ro.SNAP_PRECISION_FACTOR},Ro.snapToSelf=function(h,d,m){return new Ro(h).snapToSelf(d,m)},wp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Ro,wp);var N3=function(h){function d(m,v,b){h.call(this),this._snapTolerance=m||null,this._snapPts=v||null,this._isSelfSnap=void 0!==b&&b}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.snapLine=function(m,v){var b=new W2(m,this._snapTolerance);return b.setAllowSnappingToSourceVertices(this._isSelfSnap),b.snapTo(v)},d.prototype.transformCoordinates=function(m,v){var b=m.toCoordinateArray(),B=this.snapLine(b,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(B)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(wr),l1=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};l1.prototype.getCommon=function(){return Y.longBitsToDouble(this._commonBits)},l1.prototype.add=function(h){var d=Y.doubleToLongBits(h);return this._isFirst?(this._commonBits=d,this._commonSignExp=l1.signExpBits(this._commonBits),this._isFirst=!1,null):l1.signExpBits(d)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=l1.numCommonMostSigMantissaBits(this._commonBits,d),void(this._commonBits=l1.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},l1.prototype.toString=function(){if(1===arguments.length){var h=arguments[0],d=Y.longBitsToDouble(h),m="0000000000000000000000000000000000000000000000000000000000000000"+Y.toBinaryString(h),v=m.substring(m.length-64);return v.substring(0,1)+"  "+v.substring(1,12)+"(exp) "+v.substring(12)+" [ "+d+" ]"}},l1.prototype.interfaces_=function(){return[]},l1.prototype.getClass=function(){return l1},l1.getBit=function(h,d){return 0!=(h&1<<d)?1:0},l1.signExpBits=function(h){return h>>52},l1.zeroLowerBits=function(h,d){return h&~((1<<d)-1)},l1.numCommonMostSigMantissaBits=function(h,d){for(var m=0,v=52;v>=0;v--){if(l1.getBit(h,v)!==l1.getBit(d,v))return m;m++}return 52};var V3=function(){this._commonCoord=null,this._ccFilter=new du},b4={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};V3.prototype.addCommonBits=function(h){var d=new Ga(this._commonCoord);h.apply(d),h.geometryChanged()},V3.prototype.removeCommonBits=function(h){if(0===this._commonCoord.x&&0===this._commonCoord.y)return h;var d=new $(this._commonCoord);d.x=-d.x,d.y=-d.y;var m=new Ga(d);return h.apply(m),h.geometryChanged(),h},V3.prototype.getCommonCoordinate=function(){return this._commonCoord},V3.prototype.add=function(h){h.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},V3.prototype.interfaces_=function(){return[]},V3.prototype.getClass=function(){return V3},b4.CommonCoordinateFilter.get=function(){return du},b4.Translater.get=function(){return Ga},Object.defineProperties(V3,b4);var du=function(){this._commonBitsX=new l1,this._commonBitsY=new l1};du.prototype.filter=function(h){this._commonBitsX.add(h.x),this._commonBitsY.add(h.y)},du.prototype.getCommonCoordinate=function(){return new $(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},du.prototype.interfaces_=function(){return[ur]},du.prototype.getClass=function(){return du};var Ga=function(){this.trans=null,this.trans=arguments[0]};Ga.prototype.filter=function(h,d){var m=h.getOrdinate(d,0)+this.trans.x,v=h.getOrdinate(d,1)+this.trans.y;h.setOrdinate(d,0,m),h.setOrdinate(d,1,v)},Ga.prototype.isDone=function(){return!1},Ga.prototype.isGeometryChanged=function(){return!0},Ga.prototype.interfaces_=function(){return[y2]},Ga.prototype.getClass=function(){return Ga};var sa=function(h,d){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=h,this._geom[1]=d,this.computeSnapTolerance()};sa.prototype.selfSnap=function(h){return new Ro(h).snapTo(h,this._snapTolerance)},sa.prototype.removeCommonBits=function(h){this._cbr=new V3,this._cbr.add(h[0]),this._cbr.add(h[1]);var d=new Array(2).fill(null);return d[0]=this._cbr.removeCommonBits(h[0].copy()),d[1]=this._cbr.removeCommonBits(h[1].copy()),d},sa.prototype.prepareResult=function(h){return this._cbr.addCommonBits(h),h},sa.prototype.getResultGeometry=function(h){var d=this.snap(this._geom),m=Vi.overlayOp(d[0],d[1],h);return this.prepareResult(m)},sa.prototype.checkValid=function(h){h.isValid()||qt.out.println("Snapped geometry is invalid")},sa.prototype.computeSnapTolerance=function(){this._snapTolerance=Ro.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},sa.prototype.snap=function(h){var d=this.removeCommonBits(h);return Ro.snap(d[0],d[1],this._snapTolerance)},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa},sa.overlayOp=function(h,d,m){return new sa(h,d).getResultGeometry(m)},sa.union=function(h,d){return sa.overlayOp(h,d,Vi.UNION)},sa.intersection=function(h,d){return sa.overlayOp(h,d,Vi.INTERSECTION)},sa.symDifference=function(h,d){return sa.overlayOp(h,d,Vi.SYMDIFFERENCE)},sa.difference=function(h,d){return sa.overlayOp(h,d,Vi.DIFFERENCE)};var T1=function(h,d){this._geom=new Array(2).fill(null),this._geom[0]=h,this._geom[1]=d};T1.prototype.getResultGeometry=function(h){var d=null,m=!1,v=null;try{d=Vi.overlayOp(this._geom[0],this._geom[1],h),m=!0}catch(b){if(!(b instanceof le))throw b;v=b}if(!m)try{d=sa.overlayOp(this._geom[0],this._geom[1],h)}catch(b){throw b instanceof le?v:b}return d},T1.prototype.interfaces_=function(){return[]},T1.prototype.getClass=function(){return T1},T1.overlayOp=function(h,d,m){return new T1(h,d).getResultGeometry(m)},T1.union=function(h,d){return T1.overlayOp(h,d,Vi.UNION)},T1.intersection=function(h,d){return T1.overlayOp(h,d,Vi.INTERSECTION)},T1.symDifference=function(h,d){return T1.overlayOp(h,d,Vi.SYMDIFFERENCE)},T1.difference=function(h,d){return T1.overlayOp(h,d,Vi.DIFFERENCE)};var r3=function(){this.mce=null,this.chainIndex=null;var d=arguments[1];this.mce=arguments[0],this.chainIndex=d};r3.prototype.computeIntersections=function(h,d){this.mce.computeIntersectsForChain(this.chainIndex,h.mce,h.chainIndex,d)},r3.prototype.interfaces_=function(){return[]},r3.prototype.getClass=function(){return r3};var yc=function h(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var d=arguments[0],m=arguments[1];this._eventType=h.DELETE,this._xValue=d,this._insertEvent=m}else if(3===arguments.length){var v=arguments[0],b=arguments[1],B=arguments[2];this._eventType=h.INSERT,this._label=v,this._xValue=b,this._obj=B}},Cp={INSERT:{configurable:!0},DELETE:{configurable:!0}};yc.prototype.isDelete=function(){return this._eventType===yc.DELETE},yc.prototype.setDeleteEventIndex=function(h){this._deleteEventIndex=h},yc.prototype.getObject=function(){return this._obj},yc.prototype.compareTo=function(h){return this._xValue<h._xValue?-1:this._xValue>h._xValue?1:this._eventType<h._eventType?-1:this._eventType>h._eventType?1:0},yc.prototype.getInsertEvent=function(){return this._insertEvent},yc.prototype.isInsert=function(){return this._eventType===yc.INSERT},yc.prototype.isSameLabel=function(h){return null!==this._label&&this._label===h._label},yc.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},yc.prototype.interfaces_=function(){return[J]},yc.prototype.getClass=function(){return yc},Cp.INSERT.get=function(){return 1},Cp.DELETE.get=function(){return 2},Object.defineProperties(yc,Cp);var oa=function(){};oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa};var Qa=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var d=arguments[1],m=arguments[2];this._li=arguments[0],this._includeProper=d,this._recordIsolated=m};Qa.prototype.isTrivialIntersection=function(h,d,m,v){if(h===m&&1===this._li.getIntersectionNum()){if(Qa.isAdjacentSegments(d,v))return!0;if(h.isClosed()){var b=h.getNumPoints()-1;if(0===d&&v===b||0===v&&d===b)return!0}}return!1},Qa.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Qa.prototype.setIsDoneIfProperInt=function(h){this._isDoneWhenProperInt=h},Qa.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Qa.prototype.isBoundaryPointInternal=function(h,d){for(var m=d.iterator();m.hasNext();){var v=m.next().getCoordinate();if(h.isIntersection(v))return!0}return!1},Qa.prototype.hasProperIntersection=function(){return this._hasProper},Qa.prototype.hasIntersection=function(){return this._hasIntersection},Qa.prototype.isDone=function(){return this._isDone},Qa.prototype.isBoundaryPoint=function(h,d){return!(null===d||!this.isBoundaryPointInternal(h,d[0])&&!this.isBoundaryPointInternal(h,d[1]))},Qa.prototype.setBoundaryNodes=function(h,d){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=h,this._bdyNodes[1]=d},Qa.prototype.addIntersections=function(h,d,m,v){if(h===m&&d===v)return null;this.numTests++;var b=h.getCoordinates()[d],B=h.getCoordinates()[d+1],z=m.getCoordinates()[v],q=m.getCoordinates()[v+1];this._li.computeIntersection(b,B,z,q),this._li.hasIntersection()&&(this._recordIsolated&&(h.setIsolated(!1),m.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(h,d,m,v)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(h.addIntersections(this._li,d,0),m.addIntersections(this._li,v,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Qa.prototype.interfaces_=function(){return[]},Qa.prototype.getClass=function(){return Qa},Qa.isAdjacentSegments=function(h,d){return 1===Math.abs(h-d)};var Q6=function(h){function d(){h.call(this),this.events=new rn,this.nOverlaps=null}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.prepareEvents=function(){Js.sort(this.events);for(var m=0;m<this.events.size();m++){var v=this.events.get(m);v.isDelete()&&v.getInsertEvent().setDeleteEventIndex(m)}},d.prototype.computeIntersections=function(){if(1===arguments.length){var m=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var v=0;v<this.events.size();v++){var b=this.events.get(v);if(b.isInsert()&&this.processOverlaps(v,b.getDeleteEventIndex(),b,m),m.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Qa&&At(arguments[0],$o)&&At(arguments[1],$o)){var B=arguments[0],z=arguments[1],q=arguments[2];this.addEdges(B,B),this.addEdges(z,z),this.computeIntersections(q)}else if("boolean"==typeof arguments[2]&&At(arguments[0],$o)&&arguments[1]instanceof Qa){var pe=arguments[0],Ue=arguments[1];arguments[2]?this.addEdges(pe,null):this.addEdges(pe),this.computeIntersections(Ue)}},d.prototype.addEdge=function(m,v){for(var b=m.getMonotoneChainEdge(),B=b.getStartIndexes(),z=0;z<B.length-1;z++){var q=new r3(b,z),pe=new yc(v,b.getMinX(z),q);this.events.add(pe),this.events.add(new yc(b.getMaxX(z),pe))}},d.prototype.processOverlaps=function(m,v,b,B){for(var z=b.getObject(),q=m;q<v;q++){var pe=this.events.get(q);if(pe.isInsert()){var Ue=pe.getObject();b.isSameLabel(pe)||(z.computeIntersections(Ue,B),this.nOverlaps++)}}},d.prototype.addEdges=function(){if(1===arguments.length)for(var m=arguments[0].iterator();m.hasNext();){var v=m.next();this.addEdge(v,v)}else if(2===arguments.length)for(var B=arguments[1],z=arguments[0].iterator();z.hasNext();){var q=z.next();this.addEdge(q,B)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(oa),c2=function(){this._min=Y.POSITIVE_INFINITY,this._max=Y.NEGATIVE_INFINITY},S2={NodeComparator:{configurable:!0}};c2.prototype.getMin=function(){return this._min},c2.prototype.intersects=function(h,d){return!(this._min>d||this._max<h)},c2.prototype.getMax=function(){return this._max},c2.prototype.toString=function(){return it.toLineString(new $(this._min,0),new $(this._max,0))},c2.prototype.interfaces_=function(){return[]},c2.prototype.getClass=function(){return c2},S2.NodeComparator.get=function(){return Ah},Object.defineProperties(c2,S2);var Ah=function(){};Ah.prototype.compare=function(h,d){var b=(h._min+h._max)/2,B=(d._min+d._max)/2;return b<B?-1:b>B?1:0},Ah.prototype.interfaces_=function(){return[ce]},Ah.prototype.getClass=function(){return Ah};var W6=function(h){function d(){h.call(this),this._item=null;var v=arguments[1],b=arguments[2];this._min=arguments[0],this._max=v,this._item=b}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.query=function(m,v,b){if(!this.intersects(m,v))return null;b.visitItem(this._item)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(c2),U3=function(h){function d(){h.call(this),this._node1=null,this._node2=null;var v=arguments[1];this._node1=arguments[0],this._node2=v,this.buildExtent(this._node1,this._node2)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.buildExtent=function(m,v){this._min=Math.min(m._min,v._min),this._max=Math.max(m._max,v._max)},d.prototype.query=function(m,v,b){if(!this.intersects(m,v))return null;null!==this._node1&&this._node1.query(m,v,b),null!==this._node2&&this._node2.query(m,v,b)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(c2),aa=function(){this._leaves=new rn,this._root=null,this._level=0};aa.prototype.buildTree=function(){Js.sort(this._leaves,new c2.NodeComparator);for(var h=this._leaves,d=null,m=new rn;;){if(this.buildLevel(h,m),1===m.size())return m.get(0);d=h,h=m,m=d}},aa.prototype.insert=function(h,d,m){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new W6(h,d,m))},aa.prototype.query=function(h,d,m){this.init(),this._root.query(h,d,m)},aa.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},aa.prototype.printNode=function(h){qt.out.println(it.toLineString(new $(h._min,this._level),new $(h._max,this._level)))},aa.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},aa.prototype.buildLevel=function(h,d){this._level++,d.clear();for(var m=0;m<h.size();m+=2){var v=h.get(m);if(null===(m+1<h.size()?h.get(m):null))d.add(v);else{var b=new U3(h.get(m),h.get(m+1));d.add(b)}}},aa.prototype.interfaces_=function(){return[]},aa.prototype.getClass=function(){return aa};var A0=function(){this._items=new rn};A0.prototype.visitItem=function(h){this._items.add(h)},A0.prototype.getItems=function(){return this._items},A0.prototype.interfaces_=function(){return[e3]},A0.prototype.getClass=function(){return A0};var G3=function(){this._index=null;var h=arguments[0];if(!At(h,w2))throw new X("Argument must be Polygonal");this._index=new Q3(h)},j6={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};G3.prototype.locate=function(h){var d=new Yt(h),m=new E2(d);return this._index.query(h.y,h.y,m),d.getLocation()},G3.prototype.interfaces_=function(){return[sn]},G3.prototype.getClass=function(){return G3},j6.SegmentVisitor.get=function(){return E2},j6.IntervalIndexedGeometry.get=function(){return Q3},Object.defineProperties(G3,j6);var E2=function(){this._counter=null,this._counter=arguments[0]};E2.prototype.visitItem=function(h){var d=h;this._counter.countSegment(d.getCoordinate(0),d.getCoordinate(1))},E2.prototype.interfaces_=function(){return[e3]},E2.prototype.getClass=function(){return E2};var Q3=function(){this._index=new aa,this.init(arguments[0])};Q3.prototype.init=function(h){for(var d=a1.getLines(h).iterator();d.hasNext();){var m=d.next().getCoordinates();this.addLine(m)}},Q3.prototype.addLine=function(h){for(var d=1;d<h.length;d++){var m=new ui(h[d-1],h[d]),v=Math.min(m.p0.y,m.p1.y),b=Math.max(m.p0.y,m.p1.y);this._index.insert(v,b,m)}},Q3.prototype.query=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=new A0;return this._index.query(h,d,m),m.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},Q3.prototype.interfaces_=function(){return[]},Q3.prototype.getClass=function(){return Q3};var pu=function(h){function d(){if(h.call(this),this._parentGeom=null,this._lineEdgeMap=new pr,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new M2,2===arguments.length){var v=arguments[1],b=yr.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=v,this._boundaryNodeRule=b,null!==v&&this.add(v)}else if(3===arguments.length){var z=arguments[1],q=arguments[2];this._argIndex=arguments[0],this._parentGeom=z,this._boundaryNodeRule=q,null!==z&&this.add(z)}}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.insertBoundaryPoint=function(m,v){var b=this._nodes.addNode(v).getLabel(),B=1;b.getLocation(m,hn.ON)===oe.BOUNDARY&&B++;var z=d.determineBoundary(this._boundaryNodeRule,B);b.setLocation(m,z)},d.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var B=arguments[1],z=arguments[2],q=new Qa(arguments[0],!0,!1);return q.setIsDoneIfProperInt(z),this.createEdgeSetIntersector().computeIntersections(this._edges,q,B||!(this._parentGeom instanceof N2||this._parentGeom instanceof qo||this._parentGeom instanceof kc)),this.addSelfIntersectionNodes(this._argIndex),q}},d.prototype.computeSplitEdges=function(m){for(var v=this._edges.iterator();v.hasNext();)v.next().eiList.addSplitEdges(m)},d.prototype.computeEdgeIntersections=function(m,v,b){var B=new Qa(v,b,!0);return B.setBoundaryNodes(this.getBoundaryNodes(),m.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,m._edges,B),B},d.prototype.getGeometry=function(){return this._parentGeom},d.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},d.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},d.prototype.addPoint=function(){if(arguments[0]instanceof hc){var m=arguments[0].getCoordinate();this.insertPoint(this._argIndex,m,oe.INTERIOR)}else arguments[0]instanceof $&&this.insertPoint(this._argIndex,arguments[0],oe.INTERIOR)},d.prototype.addPolygon=function(m){this.addPolygonRing(m.getExteriorRing(),oe.EXTERIOR,oe.INTERIOR);for(var v=0;v<m.getNumInteriorRing();v++){var b=m.getInteriorRingN(v);this.addPolygonRing(b,oe.INTERIOR,oe.EXTERIOR)}},d.prototype.addEdge=function(m){this.insertEdge(m);var v=m.getCoordinates();this.insertPoint(this._argIndex,v[0],oe.BOUNDARY),this.insertPoint(this._argIndex,v[v.length-1],oe.BOUNDARY)},d.prototype.addLineString=function(m){var v=Fi.removeRepeatedPoints(m.getCoordinates());if(v.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=v[0],null;var b=new H3(v,new ds(this._argIndex,oe.INTERIOR));this._lineEdgeMap.put(m,b),this.insertEdge(b),ee.isTrue(v.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,v[0]),this.insertBoundaryPoint(this._argIndex,v[v.length-1])},d.prototype.getInvalidPoint=function(){return this._invalidPoint},d.prototype.getBoundaryPoints=function(){for(var m=this.getBoundaryNodes(),v=new Array(m.size()).fill(null),b=0,B=m.iterator();B.hasNext();){var z=B.next();v[b++]=z.getCoordinate().copy()}return v},d.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},d.prototype.addSelfIntersectionNode=function(m,v,b){if(this.isBoundaryNode(m,v))return null;b===oe.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(m,v):this.insertPoint(m,v,b)},d.prototype.addPolygonRing=function(m,v,b){if(m.isEmpty())return null;var B=Fi.removeRepeatedPoints(m.getCoordinates());if(B.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=B[0],null;var z=v,q=b;Mt.isCCW(B)&&(z=b,q=v);var pe=new H3(B,new ds(this._argIndex,oe.BOUNDARY,z,q));this._lineEdgeMap.put(m,pe),this.insertEdge(pe),this.insertPoint(this._argIndex,B[0],oe.BOUNDARY)},d.prototype.insertPoint=function(m,v,b){var B=this._nodes.addNode(v),z=B.getLabel();null===z?B._label=new ds(m,b):z.setLocation(m,b)},d.prototype.createEdgeSetIntersector=function(){return new Q6},d.prototype.addSelfIntersectionNodes=function(m){for(var v=this._edges.iterator();v.hasNext();)for(var b=v.next(),B=b.getLabel().getLocation(m),z=b.eiList.iterator();z.hasNext();){var q=z.next();this.addSelfIntersectionNode(m,q.coord,B)}},d.prototype.add=function(){if(1!==arguments.length)return h.prototype.add.apply(this,arguments);var m=arguments[0];if(m.isEmpty())return null;if(m instanceof kc&&(this._useBoundaryDeterminationRule=!1),m instanceof qo)this.addPolygon(m);else if(m instanceof go)this.addLineString(m);else if(m instanceof hc)this.addPoint(m);else if(m instanceof Zl)this.addCollection(m);else if(m instanceof R3)this.addCollection(m);else if(m instanceof kc)this.addCollection(m);else{if(!(m instanceof _1))throw new Error(m.getClass().getName());this.addCollection(m)}},d.prototype.addCollection=function(m){for(var v=0;v<m.getNumGeometries();v++){var b=m.getGeometryN(v);this.add(b)}},d.prototype.locate=function(m){return At(this._parentGeom,w2)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new G3(this._parentGeom)),this._areaPtLocator.locate(m)):this._ptLocator.locate(m,this._parentGeom)},d.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):h.prototype.findEdge.apply(this,arguments)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.determineBoundary=function(m,v){return m.isInBoundary(v)?oe.BOUNDARY:oe.INTERIOR},d}(wn),Ni=function(){if(this._li=new mt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var h=arguments[0];this.setComputationPrecision(h.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new pu(0,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1],v=yr.OGC_SFS_BOUNDARY_RULE;d.getPrecisionModel().compareTo(m.getPrecisionModel())>=0?this.setComputationPrecision(d.getPrecisionModel()):this.setComputationPrecision(m.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new pu(0,d,v),this._arg[1]=new pu(1,m,v)}else if(3===arguments.length){var b=arguments[0],B=arguments[1],z=arguments[2];b.getPrecisionModel().compareTo(B.getPrecisionModel())>=0?this.setComputationPrecision(b.getPrecisionModel()):this.setComputationPrecision(B.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new pu(0,b,z),this._arg[1]=new pu(1,B,z)}};Ni.prototype.getArgGeometry=function(h){return this._arg[h].getGeometry()},Ni.prototype.setComputationPrecision=function(h){this._resultPrecisionModel=h,this._li.setPrecisionModel(this._resultPrecisionModel)},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni};var W3=function(){};W3.prototype.interfaces_=function(){return[]},W3.prototype.getClass=function(){return W3},W3.map=function(){if(arguments[0]instanceof yn&&At(arguments[1],W3.MapOp)){for(var h=arguments[0],d=arguments[1],m=new rn,v=0;v<h.getNumGeometries();v++){var b=d.map(h.getGeometryN(v));null!==b&&m.add(b)}return h.getFactory().buildGeometry(m)}if(At(arguments[0],Cs)&&At(arguments[1],W3.MapOp)){for(var B=arguments[0],z=arguments[1],q=new rn,pe=B.iterator();pe.hasNext();){var Ue=pe.next(),gt=z.map(Ue);null!==gt&&q.add(gt)}return q}},W3.MapOp=function(){};var Vi=function(h){function d(){var m=arguments[0];h.call(this,m,arguments[1]),this._ptLocator=new M2,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new dr,this._resultPolyList=new rn,this._resultLineList=new rn,this._resultPointList=new rn,this._graph=new wn(new uo),this._geomFact=m.getFactory()}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.insertUniqueEdge=function(m){var v=this._edgeList.findEqualEdge(m);if(null!==v){var b=v.getLabel(),B=m.getLabel();v.isPointwiseEqual(m)||(B=new ds(m.getLabel())).flip();var z=v.getDepth();z.isNull()&&z.add(b),z.add(B),b.merge(B)}else this._edgeList.add(m)},d.prototype.getGraph=function(){return this._graph},d.prototype.cancelDuplicateResultEdges=function(){for(var m=this._graph.getEdgeEnds().iterator();m.hasNext();){var v=m.next(),b=v.getSym();v.isInResult()&&b.isInResult()&&(v.setInResult(!1),b.setInResult(!1))}},d.prototype.isCoveredByLA=function(m){return!!this.isCovered(m,this._resultLineList)||!!this.isCovered(m,this._resultPolyList)},d.prototype.computeGeometry=function(m,v,b,B){var z=new rn;return z.addAll(m),z.addAll(v),z.addAll(b),z.isEmpty()?d.createEmptyResult(B,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(z)},d.prototype.mergeSymLabels=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().mergeSymLabels()},d.prototype.isCovered=function(m,v){for(var b=v.iterator();b.hasNext();){var B=b.next();if(this._ptLocator.locate(m,B)!==oe.EXTERIOR)return!0}return!1},d.prototype.replaceCollapsedEdges=function(){for(var m=new rn,v=this._edgeList.iterator();v.hasNext();){var b=v.next();b.isCollapsed()&&(v.remove(),m.add(b.getCollapsedEdge()))}this._edgeList.addAll(m)},d.prototype.updateNodeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var v=m.next(),b=v.getEdges().getLabel();v.getLabel().merge(b)}},d.prototype.getResultGeometry=function(m){return this.computeOverlay(m),this._resultGeom},d.prototype.insertUniqueEdges=function(m){for(var v=m.iterator();v.hasNext();){var b=v.next();this.insertUniqueEdge(b)}},d.prototype.computeOverlay=function(m){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var v=new rn;this._arg[0].computeSplitEdges(v),this._arg[1].computeSplitEdges(v),this.insertUniqueEdges(v),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),O3.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(m),this.cancelDuplicateResultEdges();var b=new s1(this._geomFact);b.add(this._graph),this._resultPolyList=b.getPolygons();var B=new c1(this,this._geomFact,this._ptLocator);this._resultLineList=B.build(m);var z=new fu(this,this._geomFact,this._ptLocator);this._resultPointList=z.build(m),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,m)},d.prototype.labelIncompleteNode=function(m,v){var b=this._ptLocator.locate(m.getCoordinate(),this._arg[v].getGeometry());m.getLabel().setLocation(v,b)},d.prototype.copyPoints=function(m){for(var v=this._arg[m].getNodeIterator();v.hasNext();){var b=v.next();this._graph.addNode(b.getCoordinate()).setLabel(m,b.getLabel().getLocation(m))}},d.prototype.findResultAreaEdges=function(m){for(var v=this._graph.getEdgeEnds().iterator();v.hasNext();){var b=v.next(),B=b.getLabel();B.isArea()&&!b.isInteriorAreaEdge()&&d.isResultOfOp(B.getLocation(0,hn.RIGHT),B.getLocation(1,hn.RIGHT),m)&&b.setInResult(!0)}},d.prototype.computeLabelsFromDepths=function(){for(var m=this._edgeList.iterator();m.hasNext();){var v=m.next(),b=v.getLabel(),B=v.getDepth();if(!B.isNull()){B.normalize();for(var z=0;z<2;z++)b.isNull(z)||!b.isArea()||B.isNull(z)||(0===B.getDelta(z)?b.toLine(z):(ee.isTrue(!B.isNull(z,hn.LEFT),"depth of LEFT side has not been initialized"),b.setLocation(z,hn.LEFT,B.getLocation(z,hn.LEFT)),ee.isTrue(!B.isNull(z,hn.RIGHT),"depth of RIGHT side has not been initialized"),b.setLocation(z,hn.RIGHT,B.getLocation(z,hn.RIGHT))))}}},d.prototype.computeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},d.prototype.labelIncompleteNodes=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var v=m.next(),b=v.getLabel();v.isIsolated()&&(b.isNull(0)?this.labelIncompleteNode(v,0):this.labelIncompleteNode(v,1)),v.getEdges().updateLabelling(b)}},d.prototype.isCoveredByA=function(m){return!!this.isCovered(m,this._resultPolyList)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ni);Vi.overlayOp=function(h,d,m){return new Vi(h,d).getResultGeometry(m)},Vi.intersection=function(h,d){if(h.isEmpty()||d.isEmpty())return Vi.createEmptyResult(Vi.INTERSECTION,h,d,h.getFactory());if(h.isGeometryCollection()){var m=d;return m0.map(h,{interfaces_:function(){return[W3.MapOp]},map:function(v){return v.intersection(m)}})}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),T1.overlayOp(h,d,Vi.INTERSECTION)},Vi.symDifference=function(h,d){if(h.isEmpty()||d.isEmpty()){if(h.isEmpty()&&d.isEmpty())return Vi.createEmptyResult(Vi.SYMDIFFERENCE,h,d,h.getFactory());if(h.isEmpty())return d.copy();if(d.isEmpty())return h.copy()}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),T1.overlayOp(h,d,Vi.SYMDIFFERENCE)},Vi.resultDimension=function(h,d,m){var v=d.getDimension(),b=m.getDimension(),B=-1;switch(h){case Vi.INTERSECTION:B=Math.min(v,b);break;case Vi.UNION:B=Math.max(v,b);break;case Vi.DIFFERENCE:B=v;break;case Vi.SYMDIFFERENCE:B=Math.max(v,b)}return B},Vi.createEmptyResult=function(h,d,m,v){var b=null;switch(Vi.resultDimension(h,d,m)){case-1:b=v.createGeometryCollection(new Array(0).fill(null));break;case 0:b=v.createPoint();break;case 1:b=v.createLineString();break;case 2:b=v.createPolygon()}return b},Vi.difference=function(h,d){return h.isEmpty()?Vi.createEmptyResult(Vi.DIFFERENCE,h,d,h.getFactory()):d.isEmpty()?h.copy():(h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),T1.overlayOp(h,d,Vi.DIFFERENCE))},Vi.isResultOfOp=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=h.getLocation(0),v=h.getLocation(1);return Vi.isResultOfOp(m,v,d)}if(3===arguments.length){var b=arguments[0],B=arguments[1];switch(b===oe.BOUNDARY&&(b=oe.INTERIOR),B===oe.BOUNDARY&&(B=oe.INTERIOR),arguments[2]){case Vi.INTERSECTION:return b===oe.INTERIOR&&B===oe.INTERIOR;case Vi.UNION:return b===oe.INTERIOR||B===oe.INTERIOR;case Vi.DIFFERENCE:return b===oe.INTERIOR&&B!==oe.INTERIOR;case Vi.SYMDIFFERENCE:return b===oe.INTERIOR&&B!==oe.INTERIOR||b!==oe.INTERIOR&&B===oe.INTERIOR}return!1}},Vi.INTERSECTION=1,Vi.UNION=2,Vi.DIFFERENCE=3,Vi.SYMDIFFERENCE=4;var T2=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new M2,this._seg=new ui;var h=arguments[0],d=arguments[1];this._g=h,this._boundaryDistanceTolerance=d,this._linework=this.extractLinework(h)};T2.prototype.isWithinToleranceOfBoundary=function(h){for(var d=0;d<this._linework.getNumGeometries();d++)for(var m=this._linework.getGeometryN(d).getCoordinateSequence(),v=0;v<m.size()-1;v++)if(m.getCoordinate(v,this._seg.p0),m.getCoordinate(v+1,this._seg.p1),this._seg.distance(h)<=this._boundaryDistanceTolerance)return!0;return!1},T2.prototype.getLocation=function(h){return this.isWithinToleranceOfBoundary(h)?oe.BOUNDARY:this._ptLocator.locate(h,this._g)},T2.prototype.extractLinework=function(h){var d=new v0;h.apply(d);var m=d.getLinework(),v=qi.toLineStringArray(m);return h.getFactory().createMultiLineString(v)},T2.prototype.interfaces_=function(){return[]},T2.prototype.getClass=function(){return T2};var v0=function(){this._linework=null,this._linework=new rn};v0.prototype.getLinework=function(){return this._linework},v0.prototype.filter=function(h){if(h instanceof qo){var d=h;this._linework.add(d.getExteriorRing());for(var m=0;m<d.getNumInteriorRing();m++)this._linework.add(d.getInteriorRingN(m))}},v0.prototype.interfaces_=function(){return[Pa]},v0.prototype.getClass=function(){return v0};var x4=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};x4.prototype.extractPoints=function(h,d,m){for(var v=h.getCoordinates(),b=0;b<v.length-1;b++)this.computeOffsetPoints(v[b],v[b+1],d,m)},x4.prototype.setSidesToGenerate=function(h,d){this._doLeft=h,this._doRight=d},x4.prototype.getPoints=function(h){for(var d=new rn,m=a1.getLines(this._g).iterator();m.hasNext();){var v=m.next();this.extractPoints(v,h,d)}return d},x4.prototype.computeOffsetPoints=function(h,d,m,v){var b=d.x-h.x,B=d.y-h.y,z=Math.sqrt(b*b+B*B),q=m*b/z,pe=m*B/z,Ue=(d.x+h.x)/2,gt=(d.y+h.y)/2;if(this._doLeft){var pt=new $(Ue-pe,gt+q);v.add(pt)}if(this._doRight){var fn=new $(Ue+pe,gt-q);v.add(fn)}},x4.prototype.interfaces_=function(){return[]},x4.prototype.getClass=function(){return x4};var Z1=function h(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=h.TOLERANCE,this._testCoords=new rn;var d=arguments[0],m=arguments[1],v=arguments[2];this._boundaryDistanceTolerance=h.computeBoundaryDistanceTolerance(d,m),this._geom=[d,m,v],this._locFinder=[new T2(this._geom[0],this._boundaryDistanceTolerance),new T2(this._geom[1],this._boundaryDistanceTolerance),new T2(this._geom[2],this._boundaryDistanceTolerance)]},bp={TOLERANCE:{configurable:!0}};Z1.prototype.reportResult=function(h,d,m){qt.out.println("Overlay result invalid - A:"+oe.toLocationSymbol(d[0])+" B:"+oe.toLocationSymbol(d[1])+" expected:"+(m?"i":"e")+" actual:"+oe.toLocationSymbol(d[2]))},Z1.prototype.isValid=function(h){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(h)},Z1.prototype.checkValid=function(){if(1===arguments.length){for(var h=arguments[0],d=0;d<this._testCoords.size();d++){var m=this._testCoords.get(d);if(!this.checkValid(h,m))return this._invalidLocation=m,!1}return!0}if(2===arguments.length){var v=arguments[0],b=arguments[1];return this._location[0]=this._locFinder[0].getLocation(b),this._location[1]=this._locFinder[1].getLocation(b),this._location[2]=this._locFinder[2].getLocation(b),!!Z1.hasLocation(this._location,oe.BOUNDARY)||this.isValidResult(v,this._location)}},Z1.prototype.addTestPts=function(h){var d=new x4(h);this._testCoords.addAll(d.getPoints(5*this._boundaryDistanceTolerance))},Z1.prototype.isValidResult=function(h,d){var m=Vi.isResultOfOp(d[0],d[1],h),v=!(m^d[2]===oe.INTERIOR);return v||this.reportResult(h,d,m),v},Z1.prototype.getInvalidLocation=function(){return this._invalidLocation},Z1.prototype.interfaces_=function(){return[]},Z1.prototype.getClass=function(){return Z1},Z1.hasLocation=function(h,d){for(var m=0;m<3;m++)if(h[m]===d)return!0;return!1},Z1.computeBoundaryDistanceTolerance=function(h,d){return Math.min(Ro.computeSizeBasedSnapTolerance(h),Ro.computeSizeBasedSnapTolerance(d))},Z1.isValid=function(h,d,m,v){return new Z1(h,d,v).isValid(m)},bp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Z1,bp);var Hc=function h(d){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=h.extractFactory(d),this._inputGeoms=d};Hc.prototype.extractElements=function(h,d){if(null===h)return null;for(var m=0;m<h.getNumGeometries();m++){var v=h.getGeometryN(m);this._skipEmpty&&v.isEmpty()||d.add(v)}},Hc.prototype.combine=function(){for(var h=new rn,d=this._inputGeoms.iterator();d.hasNext();){var m=d.next();this.extractElements(m,h)}return 0===h.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(h)},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Hc.combine=function(){return 1===arguments.length?new Hc(arguments[0]).combine():2===arguments.length?new Hc(Hc.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Hc(Hc.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Hc.extractFactory=function(h){return h.isEmpty()?null:h.iterator().next().getFactory()},Hc.createList=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=new rn;return m.add(h),m.add(d),m}if(3===arguments.length){var v=arguments[0],b=arguments[1],B=arguments[2],z=new rn;return z.add(v),z.add(b),z.add(B),z}};var It=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new rn)},Sr={STRTREE_NODE_CAPACITY:{configurable:!0}};It.prototype.reduceToGeometries=function(h){for(var d=new rn,m=h.iterator();m.hasNext();){var v=m.next(),b=null;At(v,$o)?b=this.unionTree(v):v instanceof yn&&(b=v),d.add(b)}return d},It.prototype.extractByEnvelope=function(h,d,m){for(var v=new rn,b=0;b<d.getNumGeometries();b++){var B=d.getGeometryN(b);B.getEnvelopeInternal().intersects(h)?v.add(B):m.add(B)}return this._geomFactory.buildGeometry(v)},It.prototype.unionOptimized=function(h,d){var m=h.getEnvelopeInternal(),v=d.getEnvelopeInternal();if(!m.intersects(v))return Hc.combine(h,d);if(h.getNumGeometries()<=1&&d.getNumGeometries()<=1)return this.unionActual(h,d);var b=m.intersection(v);return this.unionUsingEnvelopeIntersection(h,d,b)},It.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var h=new V6(It.STRTREE_NODE_CAPACITY),d=this._inputPolys.iterator();d.hasNext();){var m=d.next();h.insert(m.getEnvelopeInternal(),m)}this._inputPolys=null;var v=h.itemsTree();return this.unionTree(v)},It.prototype.binaryUnion=function(){if(1===arguments.length){var h=arguments[0];return this.binaryUnion(h,0,h.size())}if(3===arguments.length){var d=arguments[0],m=arguments[1],v=arguments[2];if(v-m<=1){var b=It.getGeometry(d,m);return this.unionSafe(b,null)}if(v-m==2)return this.unionSafe(It.getGeometry(d,m),It.getGeometry(d,m+1));var B=Math.trunc((v+m)/2),z=this.binaryUnion(d,m,B),q=this.binaryUnion(d,B,v);return this.unionSafe(z,q)}},It.prototype.repeatedUnion=function(h){for(var d=null,m=h.iterator();m.hasNext();){var v=m.next();d=null===d?v.copy():d.union(v)}return d},It.prototype.unionSafe=function(h,d){return null===h&&null===d?null:null===h?d.copy():null===d?h.copy():this.unionOptimized(h,d)},It.prototype.unionActual=function(h,d){return It.restrictToPolygons(h.union(d))},It.prototype.unionTree=function(h){var d=this.reduceToGeometries(h);return this.binaryUnion(d)},It.prototype.unionUsingEnvelopeIntersection=function(h,d,m){var v=new rn,b=this.extractByEnvelope(m,h,v),B=this.extractByEnvelope(m,d,v),z=this.unionActual(b,B);return v.add(z),Hc.combine(v)},It.prototype.bufferUnion=function(){if(1===arguments.length){var h=arguments[0];return h.get(0).getFactory().buildGeometry(h).buffer(0)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d.getFactory().createGeometryCollection([d,m]).buffer(0)}},It.prototype.interfaces_=function(){return[]},It.prototype.getClass=function(){return It},It.restrictToPolygons=function(h){if(At(h,w2))return h;var d=bl.getPolygons(h);return 1===d.size()?d.get(0):h.getFactory().createMultiPolygon(qi.toPolygonArray(d))},It.getGeometry=function(h,d){return d>=h.size()?null:h.get(d)},It.union=function(h){return new It(h).union()},Sr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(It,Sr);var ai=function(){};ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},ai.union=function(h,d){if(h.isEmpty()||d.isEmpty()){if(h.isEmpty()&&d.isEmpty())return Vi.createEmptyResult(Vi.UNION,h,d,h.getFactory());if(h.isEmpty())return d.copy();if(d.isEmpty())return h.copy()}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),T1.overlayOp(h,d,Vi.UNION)},Se.GeoJSONReader=k3,Se.GeoJSONWriter=t2,Se.OverlayOp=Vi,Se.UnionOp=ai,Se.BufferOp=Ir,Object.defineProperty(Se,"__esModule",{value:!0})}(nt)}},Ut=>{Ut(Ut.s=5040)}]);