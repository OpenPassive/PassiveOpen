(self.webpackChunkpassiveopen=self.webpackChunkpassiveopen||[]).push([[179],{2086:(Nt,et,Me)=>{"use strict";function ue(n){return"function"==typeof n}function Se(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Oe=Se(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function He(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Fe{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ue(i))try{i()}catch(s){e=s instanceof Oe?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{ct(s)}catch(o){e=e??[],o instanceof Oe?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Oe(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ct(e);else{if(e instanceof Fe){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&He(t,e)}remove(e){const{_finalizers:t}=this;t&&He(t,e),e instanceof Fe&&e._removeParent(this)}}Fe.EMPTY=(()=>{const n=new Fe;return n.closed=!0,n})();const De=Fe.EMPTY;function We(n){return n instanceof Fe||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function ct(n){ue(n)?n():n.unsubscribe()}const ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Vt={setTimeout(n,e,...t){const{delegate:i}=Vt;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Vt;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ct(n){Vt.setTimeout(()=>{const{onUnhandledError:e}=ft;if(!e)throw n;e(n)})}function st(){}const yt=Ke("C",void 0,void 0);function Ke(n,e,t){return{kind:n,value:e,error:t}}let j=null;function X(n){if(ft.useDeprecatedSynchronousErrorHandling){const e=!j;if(e&&(j={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=j;if(j=null,t)throw i}}else n()}class we extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,We(e)&&e.add(this)):this.destination=se}static create(e,t,i){return new $(e,t,i)}next(e){this.isStopped?Pe(function Ne(n){return Ke("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Pe(function qt(n){return Ke("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pe(yt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Z=Function.prototype.bind;function re(n,e){return Z.call(n,e)}class ce{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){je(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){je(i)}else je(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){je(t)}}}class $ extends we{constructor(e,t,i){let r;if(super(),ue(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&ft.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&re(e.next,s),error:e.error&&re(e.error,s),complete:e.complete&&re(e.complete,s)}):r=e}this.destination=new ce(r)}}function je(n){ft.useDeprecatedSynchronousErrorHandling?function Y(n){ft.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=n)}(n):Ct(n)}function Pe(n,e){const{onStoppedNotification:t}=ft;t&&Vt.setTimeout(()=>t(n,e))}const se={closed:!0,next:st,error:function Ie(n){throw n},complete:st},kt="function"==typeof Symbol&&Symbol.observable||"@@observable";function At(n){return n}function qe(n){return 0===n.length?At:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function _e(n){return n&&n instanceof we||function it(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}(n)&&We(n)}(t)?t:new $(t,i,r);return X(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Qe(i))((r,s)=>{const o=new $({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[kt](){return this}pipe(...t){return qe(t)(this)}toPromise(t){return new(t=Qe(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Qe(n){var e;return null!==(e=n??ft.Promise)&&void 0!==e?e:Promise}const St=Se(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Je=(()=>{class n extends Ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new en(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new St}next(t){X(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){X(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){X(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?De:(this.currentObservers=null,s.push(t),new Fe(()=>{this.currentObservers=null,He(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Ce;return t.source=this,t}}return n.create=(e,t)=>new en(e,t),n})();class en extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:De}}function vt(n){return ue(n?.lift)}function Mn(n){return e=>{if(vt(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function yn(n,e,t,i,r){return new ci(n,e,t,i,r)}class ci extends we{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $t(n,e){return Mn((t,i)=>{let r=0;t.subscribe(yn(i,s=>{i.next(n.call(e,s,r++))}))})}function Mt(n){return this instanceof Mt?(this.v=n,this):new Mt(n)}function xi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){i[p]&&(r[p]=function(g){return new Promise(function(_,y){s.push([p,g,_,y])>1||a(p,g)})})}function a(p,g){try{!function c(p){p.value instanceof Mt?Promise.resolve(p.value.v).then(l,u):f(s[0][2],p)}(i[p](g))}catch(_){f(s[0][3],_)}}function l(p){a("next",p)}function u(p){a("throw",p)}function f(p,g){p(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _n(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Ee(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}const xo=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function _a(n){return ue(n?.then)}function vs(n){return ue(n[kt])}function W1(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function ko(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ic=function tn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function l2(n){return ue(n?.[Ic])}function Bi(n){return xi(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Mt(t.read());if(r)return yield Mt(void 0);yield yield Mt(i)}}finally{t.releaseLock()}})}function W2(n){return ue(n?.getReader)}function lo(n){if(n instanceof Ce)return n;if(null!=n){if(vs(n))return function ol(n){return new Ce(e=>{const t=n[kt]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(xo(n))return function X4(n){return new Ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(_a(n))return function Bm(n){return new Ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ct)})}(n);if(W1(n))return Tr(n);if(l2(n))return function Df(n){return new Ce(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(W2(n))return function hc(n){return Tr(Bi(n))}(n)}throw ko(n)}function Tr(n){return new Ce(e=>{(function Y4(n,e){var t,i,r,s;return function nt(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(f){o(f)}}function c(u){try{l(i.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=_n(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Da(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Mi(n,e,t=1/0){return ue(e)?Mi((i,r)=>$t((s,o)=>e(i,s,r,o))(lo(n(i,r))),t):("number"==typeof e&&(t=e),Mn((i,r)=>function jl(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,f=!1;const p=()=>{f&&!c.length&&!l&&e.complete()},g=y=>l<i?_(y):c.push(y),_=y=>{s&&e.next(y),l++;let w=!1;lo(t(y,u++)).subscribe(yn(e,C=>{r?.(C),s?g(C):e.next(C)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<i;){const C=c.shift();o?Da(e,o,()=>_(C)):_(C)}p()}catch(C){e.error(C)}}))};return n.subscribe(yn(e,g,()=>{f=!0,p()})),()=>{a?.()}}(i,r,n,t)))}function Za(n=1/0){return Mi(At,n)}const Ia=new Ce(n=>n.complete());function C3(n){return n&&ue(n.schedule)}function A1(n){return n[n.length-1]}function Yu(n){return ue(A1(n))?n.pop():void 0}function v1(n){return C3(A1(n))?n.pop():void 0}function mo(n,e=0){return Mn((t,i)=>{t.subscribe(yn(i,r=>Da(i,n,()=>i.next(r),e),()=>Da(i,n,()=>i.complete(),e),r=>Da(i,n,()=>i.error(r),e)))})}function uo(n,e=0){return Mn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function $l(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ce(t=>{Da(t,e,()=>{const i=n[Symbol.asyncIterator]();Da(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function us(n,e){return e?function D2(n,e){if(null!=n){if(vs(n))return function rh(n,e){return lo(n).pipe(uo(e),mo(e))}(n,e);if(xo(n))return function dc(n,e){return new Ce(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(_a(n))return function u2(n,e){return lo(n).pipe(uo(e),mo(e))}(n,e);if(W1(n))return $l(n,e);if(l2(n))return function Po(n,e){return new Ce(t=>{let i;return Da(t,e,()=>{i=n[Ic](),Da(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>ue(i?.return)&&i.return()})}(n,e);if(W2(n))return function Bc(n,e){return $l(Bi(n),e)}(n,e)}throw ko(n)}(n,e):lo(n)}function al(...n){const e=v1(n),t=function T6(n,e){return"number"==typeof A1(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?lo(i[0]):Za(t)(us(i,e)):Ia}function x3(n={}){const{connector:e=(()=>new Je),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),o=c=void 0,u=f=!1},_=()=>{const y=o;g(),y?.unsubscribe()};return Mn((y,w)=>{l++,!f&&!u&&p();const C=c=c??e();w.add(()=>{l--,0===l&&!f&&!u&&(a=cl(_,r))}),C.subscribe(w),!o&&l>0&&(o=new $({next:b=>C.next(b),error:b=>{f=!0,p(),a=cl(g,t,b),C.error(b)},complete:()=>{u=!0,p(),a=cl(g,i),C.complete()}}),lo(y).subscribe(o))})(s)}}function cl(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new $({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function Is(n){for(let e in n)if(n[e]===Is)return e;throw Error("Could not find renamed property on target object.")}function ho(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function io(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(io).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function h2(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Zu=Is({__forward_ref__:Is});function pr(n){return n.__forward_ref__=pr,n.toString=function(){return io(this())},n}function Ln(n){return _1(n)?n():n}function _1(n){return"function"==typeof n&&n.hasOwnProperty(Zu)&&n.__forward_ref__===pr}class jt extends Error{constructor(e,t){super(function $i(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Zi(n){return"string"==typeof n?n:null==n?"":String(n)}function b3(n,e){throw new jt(-201,!1)}function f2(n,e){null==n&&function ur(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Lt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}const Z4=Lt;function wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function e1(n){return q2(n,Ao)||q2(n,qs)}function q2(n,e){return n.hasOwnProperty(e)?n[e]:null}function M3(n){return n&&(n.hasOwnProperty(kf)||n.hasOwnProperty(zo))?n[kf]:null}const Ao=Is({\u0275prov:Is}),kf=Is({\u0275inj:Is}),qs=Is({ngInjectableDef:Is}),zo=Is({ngInjectorDef:Is});var Hn=(()=>((Hn=Hn||{})[Hn.Default=0]="Default",Hn[Hn.Host=1]="Host",Hn[Hn.Self=2]="Self",Hn[Hn.SkipSelf=4]="SkipSelf",Hn[Hn.Optional=8]="Optional",Hn))();let e0;function j1(n){const e=e0;return e0=n,e}function L6(n,e,t){const i=e1(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Hn.Optional?null:void 0!==e?e:void b3(io(n))}function po(n){return{toString:n}.toString()}var Ba=(()=>((Ba=Ba||{})[Ba.OnPush=0]="OnPush",Ba[Ba.Default=1]="Default",Ba))(),Oo=(()=>{return(n=Oo||(Oo={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Oo;var n})();const _s=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),J4={},kr=[],t1=Is({\u0275cmp:Is}),K2=Is({\u0275dir:Is}),Xl=Is({\u0275pipe:Is}),t0=Is({\u0275mod:Is}),dl=Is({\u0275fac:Is}),n0=Is({__NG_ELEMENT_ID__:Is});let Lr=0;function On(n){return po(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ba.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||kr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Oo.Emulated,id:"c"+Lr++,styles:n.styles||kr,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return r.inputs=f4(n.inputs,i),r.outputs=f4(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(r0).filter(d2):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(q1).filter(d2):null,r})}function r0(n){return Ji(n)||Xo(n)}function d2(n){return null!==n}function oi(n){return po(()=>({type:n.type,bootstrap:n.bootstrap||kr,declarations:n.declarations||kr,imports:n.imports||kr,exports:n.exports||kr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function f4(n,e){if(null==n)return J4;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const ht=On;function y1(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ji(n){return n[t1]||null}function Xo(n){return n[K2]||null}function q1(n){return n[Xl]||null}function Li(n,e){const t=n[t0]||null;if(!t&&!0===e)throw new Error(`Type ${io(n)} does not have '\u0275mod' property.`);return t}function Fs(n){return Array.isArray(n)&&"object"==typeof n[1]}function bo(n){return Array.isArray(n)&&!0===n[1]}function x1(n){return 0!=(8&n.flags)}function s0(n){return 2==(2&n.flags)}function Yl(n){return 1==(1&n.flags)}function la(n){return null!==n.template}function gl(n){return 0!=(256&n[2])}function r1(n,e){return n.hasOwnProperty(dl)?n[dl]:null}class nu{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function wr(){return Hc}function Hc(n){return n.type.prototype.ngOnChanges&&(n.setInput=pp),Mo}function Mo(){const n=s1(this),e=n?.current;if(e){const t=n.previous;if(t===J4)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function pp(n,e,t,i){const r=s1(n)||function D3(n,e){return n[L3]=e}(n,{previous:J4,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],c=o[a];s[a]=new nu(c&&c.currentValue,e,o===J4),n[i]=e}wr.ngInherit=!0;const L3="__ngSimpleChanges__";function s1(n){return n[L3]||null}function Jo(n){for(;Array.isArray(n);)n=n[0];return n}function Z2(n,e){return Jo(e[n])}function vc(n,e){return Jo(e[n.index])}function R6(n,e){return n.data[e]}function I3(n,e){return n[e]}function ea(n,e){const t=e[n];return Fs(t)?t:t[0]}function B3(n){return 64==(64&n[2])}function _c(n,e){return null==e?null:n[e]}function R3(n){n[18]=0}function ru(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Hi={lFrame:hy(null),bindingsEnabled:!0};function K1(){return Hi.bindingsEnabled}function Dt(){return Hi.lFrame.lView}function Sr(){return Hi.lFrame.tView}function Ai(n){return Hi.lFrame.contextLView=n,n[8]}function h(n){return Hi.lFrame.contextLView=null,n}function d(){let n=m();for(;null!==n&&64===n.type;)n=n.parent;return n}function m(){return Hi.lFrame.currentTNode}function x(n,e){const t=Hi.lFrame;t.currentTNode=n,t.isParent=e}function B(){return Hi.lFrame.isParent}function H(){Hi.lFrame.isParent=!1}function pt(){const n=Hi.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ln(){return Hi.lFrame.bindingIndex}function Rn(){return Hi.lFrame.bindingIndex++}function Zn(n){const e=Hi.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function o1(n,e){const t=Hi.lFrame;t.bindingIndex=t.bindingRootIndex=n,Al(e)}function Al(n){Hi.lFrame.currentDirectiveIndex=n}function ah(n){const e=Hi.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function ch(){return Hi.lFrame.currentQueryIndex}function km(n){Hi.lFrame.currentQueryIndex=n}function bT(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Pm(n,e,t){if(t&Hn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Hn.Host||(r=bT(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Hi.lFrame=uy();return i.currentTNode=e,i.lView=n,!0}function Hm(n){const e=uy(),t=n[1];Hi.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function uy(){const n=Hi.lFrame,e=null===n?null:n.child;return null===e?hy(n):e}function hy(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function fy(){const n=Hi.lFrame;return Hi.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const dy=fy;function zm(){const n=fy();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ks(){return Hi.lFrame.selectedIndex}function u0(n){Hi.lFrame.selectedIndex=n}function Na(){const n=Hi.lFrame;return R6(n.tView,n.selectedIndex)}function Uo(){Hi.lFrame.currentNamespace="svg"}function Ap(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function vp(n,e,t){Nm(n,e,3,t)}function _p(n,e,t,i){(3&n[2])===t&&Nm(n,e,t,i)}function Om(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Nm(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(ri(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function ri(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class k6{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Cp(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];xp(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function f0(n){return 3===n||4===n||6===n}function xp(n){return 64===n.charCodeAt(0)}function zf(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||my(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function my(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function Um(n){return-1!==n}function Of(n){return 32767&n}function Nf(n,e){let t=function Gm(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Qm=!0;function bp(n){const e=Qm;return Qm=n,e}let DT=0;const A4={};function z6(n,e){const t=jm(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,Wm(i.data,n),Wm(e,null),Wm(i.blueprint,null));const r=O6(n,e),s=n.injectorIndex;if(Um(r)){const o=Of(r),a=Nf(r,e),c=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Wm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function jm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function O6(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=xy(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Mp(n,e,t){!function _y(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(n0)&&(i=t[n0]),null==i&&(i=t[n0]=DT++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function yy(n,e,t){if(t&Hn.Optional||void 0!==n)return n;b3()}function Ep(n,e,t,i){if(t&Hn.Optional&&void 0===i&&(i=null),0==(t&(Hn.Self|Hn.Host))){const r=n[9],s=j1(void 0);try{return r?r.get(e,i,t&Hn.Optional):L6(e,i,t&Hn.Optional)}finally{j1(s)}}return yy(i,0,t)}function Tp(n,e,t,i=Hn.Default,r){if(null!==n){if(1024&e[2]){const o=function IT(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=$m(s,o,t,i|Hn.Self,A4);if(a!==A4)return a;let c=s.parent;if(!c){const l=o[21];if(l){const u=l.get(t,A4,i);if(u!==A4)return u}c=xy(o),o=o[15]}s=c}return r}(n,e,t,i,A4);if(o!==A4)return o}const s=$m(n,e,t,i,A4);if(s!==A4)return s}return Ep(e,t,i,r)}function $m(n,e,t,i,r){const s=function qm(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(n0)?n[n0]:void 0;return"number"==typeof e?e>=0?255&e:Cy:e}(t);if("function"==typeof s){if(!Pm(e,n,i))return i&Hn.Host?yy(r,0,i):Ep(e,t,i,r);try{const o=s(i);if(null!=o||i&Hn.Optional)return o;b3()}finally{dy()}}else if("number"==typeof s){let o=null,a=jm(n,e),c=-1,l=i&Hn.Host?e[16][6]:null;for((-1===a||i&Hn.SkipSelf)&&(c=-1===a?O6(n,e):e[a+8],-1!==c&&Km(i,!1)?(o=e[1],a=Of(c),e=Nf(c,e)):a=-1);-1!==a;){const u=e[1];if(Dp(s,a,u.data)){const f=wy(a,e,t,o,i,l);if(f!==A4)return f}c=e[a+8],-1!==c&&Km(i,e[1].data[a+8]===l)&&Dp(s,a,e)?(o=u,a=Of(c),e=Nf(c,e)):a=-1}}return r}function wy(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=Lp(a,o,t,null==i?s0(a)&&Qm:i!=o&&0!=(3&a.type),r&Hn.Host&&s===a);return null!==u?Vf(e,o,u,a):A4}function Lp(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,p=r?a+u:n.directiveEnd;for(let g=i?a:a+u;g<p;g++){const _=o[g];if(g<c&&t===_||g>=c&&_.type===t)return g}if(r){const g=o[c];if(g&&la(g)&&g.type===t)return c}return null}function Vf(n,e,t,i){let r=n[t];const s=e.data;if(function Vm(n){return n instanceof k6}(r)){const o=r;o.resolving&&function If(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new jt(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Bs(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Zi(n)}(s[t]));const a=bp(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?j1(o.injectImpl):null;Pm(n,i,Hn.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function LT(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Hc(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&j1(c),bp(a),o.resolving=!1,dy()}}return r}function Dp(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Km(n,e){return!(n&Hn.Self||n&Hn.Host&&e)}class lh{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Tp(this._tNode,this._lView,e,i,t)}}function Cy(){return new lh(d(),Dt())}function Nn(n){return po(()=>{const e=n.prototype.constructor,t=e[dl]||N6(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[dl]||N6(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function N6(n){return _1(n)?()=>{const e=N6(Ln(n));return e&&e()}:r1(n)}function xy(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function Jl(n){return function Sp(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(f0(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(d(),n)}const d0="__parameters__";function Gf(n,e,t){return po(()=>{const i=function Xm(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const f=c.hasOwnProperty(d0)?c[d0]:Object.defineProperty(c,d0,{value:[]})[d0];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Bt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Lt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vl(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),vl(i,e)):e!==n&&e.push(i)}return e}function ou(n,e){n.forEach(t=>Array.isArray(t)?ou(t,e):e(t))}function Sy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ip(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function G6(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function _l(n,e,t){let i=Qf(n,e);return i>=0?n[1|i]=t:(i=~i,function Ty(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Zm(n,e){const t=Qf(n,e);if(t>=0)return n[1|t]}function Qf(n,e){return function Q6(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Wf={},nA="__NG_DI_FLAG__",Bp="ngTempTokenPath",jf=/\n/gm,W6="__source";let j6;function $f(n){const e=j6;return j6=n,e}function OT(n,e=Hn.Default){if(void 0===j6)throw new jt(-203,!1);return null===j6?L6(n,void 0,e):j6.get(n,e&Hn.Optional?null:void 0,e)}function Xe(n,e=Hn.Default){return(function Fm(){return e0}()||OT)(Ln(n),e)}function ys(n,e=Hn.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),Xe(n,e)}function Rp(n){const e=[];for(let t=0;t<n.length;t++){const i=Ln(n[t]);if(Array.isArray(i)){if(0===i.length)throw new jt(900,!1);let r,s=Hn.Default;for(let o=0;o<i.length;o++){const a=i[o],c=sA(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(Xe(r,s))}else e.push(Xe(i))}return e}function qf(n,e){return n[nA]=e,n.prototype[nA]=e,n}function sA(n){return n[nA]}const e3=qf(Gf("Optional"),8),p0=qf(Gf("SkipSelf"),4);let cA,Pp,Hp;function Yf(n){return function Z6(){if(void 0===Pp&&(Pp=null,_s.trustedTypes))try{Pp=_s.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Pp}()?.createHTML(n)||n}function zp(n){return function J6(){if(void 0===Hp&&(Hp=null,_s.trustedTypes))try{Hp=_s.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Hp}()?.createHTML(n)||n}class ph{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Wy extends ph{getTypeName(){return"HTML"}}class WT extends ph{getTypeName(){return"Style"}}class jT extends ph{getTypeName(){return"Script"}}class $T extends ph{getTypeName(){return"URL"}}class qT extends ph{getTypeName(){return"ResourceURL"}}function yl(n){return n instanceof ph?n.changingThisBreaksApplicationSecurity:n}function t3(n,e){const t=function KT(n){return n instanceof ph&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class YT{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Yf(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class Xs{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Yf(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Yf(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const Np=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Vp(n){return(n=String(n)).match(Np)?n:"unsafe:"+n}function n3(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function e8(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const t8=n3("area,br,col,hr,img,wbr"),jy=n3("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$y=n3("rp,rt"),hA=e8(t8,e8(jy,n3("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),e8($y,n3("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),e8($y,jy)),Up=n3("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fA=e8(Up,n3("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),n3("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tL=n3("script,style,template");class Ky{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!hA.hasOwnProperty(t))return this.sanitizedSomething=!0,!tL.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!fA.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Up[a]&&(c=Vp(c)),this.buf.push(" ",o,'="',Xy(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();hA.hasOwnProperty(t)&&!t8.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Xy(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const nL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,iL=/([^\#-~ |!])/g;function Xy(n){return n.replace(/&/g,"&amp;").replace(nL,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(iL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gh;function Cl(n,e){let t=null;try{gh=gh||function wl(n){const e=new Xs(n);return function ha(){try{return!!(new window.DOMParser).parseFromString(Yf(""),"text/html")}catch{return!1}}()?new YT(e):e}(n);let i=e?String(e):"";t=gh.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=gh.getInertBodyElement(i)}while(i!==s);return Yf((new Ky).sanitizeChildren(Gp(t)||t))}finally{if(t){const i=Gp(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Gp(n){return"content"in n&&function Qp(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Us=(()=>((Us=Us||{})[Us.NONE=0]="NONE",Us[Us.HTML=1]="HTML",Us[Us.STYLE=2]="STYLE",Us[Us.SCRIPT=3]="SCRIPT",Us[Us.URL=4]="URL",Us[Us.RESOURCE_URL=5]="RESOURCE_URL",Us))();function k3(n){const e=r8();return e?zp(e.sanitize(Us.HTML,n)||""):t3(n,"HTML")?zp(yl(n)):Cl(function Gy(){return void 0!==cA?cA:typeof document<"u"?document:void 0}(),Zi(n))}function xl(n){const e=r8();return e?e.sanitize(Us.URL,n)||"":t3(n,"URL")?yl(n):Vp(Zi(n))}function r8(){const n=Dt();return n&&n[12]}const pA=new Bt("ENVIRONMENT_INITIALIZER"),Zy=new Bt("INJECTOR",-1),Jy=new Bt("INJECTOR_DEF_TYPES");class ew{get(e,t=Wf){if(t===Wf){const i=new Error(`NullInjectorError: No provider for ${io(e)}!`);throw i.name="NullInjectorError",i}return t}}function cL(...n){return{\u0275providers:tw(0,n)}}function tw(n,...e){const t=[],i=new Set;let r;return ou(e,s=>{const o=s;gA(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&nw(r,t),t}function nw(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];ou(r,s=>{e.push(s)})}}function gA(n,e,t,i){if(!(n=Ln(n)))return!1;let r=null,s=M3(n);const o=!s&&Ji(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=M3(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)gA(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{ou(s.imports,u=>{gA(u,e,t,i)&&(l||(l=[]),l.push(u))})}finally{}void 0!==l&&nw(l,e)}if(!a){const l=r1(r)||(()=>new r);e.push({provide:r,useFactory:l,deps:kr},{provide:Jy,useValue:r,multi:!0},{provide:pA,useValue:()=>Xe(r),multi:!0})}const c=s.providers;null==c||a||ou(c,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}const lL=Is({provide:String,useValue:Is});function mA(n){return null!==n&&"object"==typeof n&&lL in n}function E(n){return"function"==typeof n}const D=new Bt("Set Injector scope."),L={},z={};let U;function ne(){return void 0===U&&(U=new ew),U}class ye{}class be extends ye{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ui(e,o=>this.processProvider(o)),this.records.set(Zy,Gn(void 0,this)),r.has("environment")&&this.records.set(ye,Gn(void 0,this));const s=this.records.get(D);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Jy.multi,kr,Hn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=$f(this),i=j1(void 0);try{return e()}finally{$f(t),j1(i)}}get(e,t=Wf,i=Hn.Default){this.assertNotDestroyed();const r=$f(this),s=j1(void 0);try{if(!(i&Hn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function Cr(n){return"function"==typeof n||"object"==typeof n&&n instanceof Bt}(e)&&e1(e);a=c&&this.injectableDefInScope(c)?Gn(Ye(e),L):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Hn.Self?ne():this.parent).get(e,t=i&Hn.Optional&&t===Wf?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Bp]=o[Bp]||[]).unshift(io(e)),r)throw o;return function Py(n,e,t,i){const r=n[Bp];throw e[W6]&&r.unshift(e[W6]),n.message=function Hy(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=io(e);if(Array.isArray(e))r=e.map(io).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):io(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(jf,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Bp]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{j1(s),$f(r)}}resolveInjectorInitializers(){const e=$f(this),t=j1(void 0);try{const i=this.get(pA.multi,kr,Hn.Self);for(const r of i)r()}finally{$f(e),j1(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(io(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new jt(205,!1)}processProvider(e){let t=E(e=Ln(e))?e:Ln(e&&e.provide);const i=function dt(n){return mA(n)?Gn(void 0,n.useValue):Gn(Ft(n),L)}(e);if(E(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Gn(void 0,L,!0),r.factory=()=>Rp(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===L&&(t.value=z,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Qn(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ln(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Ye(n){const e=e1(n),t=null!==e?e.factory:r1(n);if(null!==t)return t;if(n instanceof Bt)throw new jt(204,!1);if(n instanceof Function)return function lt(n){const e=n.length;if(e>0)throw G6(e,"?"),new jt(204,!1);const t=function fl(n){const e=n&&(n[Ao]||n[qs]);if(e){const t=function Kl(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new jt(204,!1)}function Ft(n,e,t){let i;if(E(n)){const r=Ln(n);return r1(r)||Ye(r)}if(mA(n))i=()=>Ln(n.useValue);else if(function rw(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Rp(n.deps||[]));else if(function iw(n){return!(!n||!n.useExisting)}(n))i=()=>Xe(Ln(n.useExisting));else{const r=Ln(n&&(n.useClass||n.provide));if(!function Tn(n){return!!n.deps}(n))return r1(r)||Ye(r);i=()=>new r(...Rp(n.deps))}return i}function Gn(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _i(n){return!!n.\u0275providers}function ui(n,e){for(const t of n)Array.isArray(t)?ui(t,e):_i(t)?ui(t.\u0275providers,e):e(t)}class xr{}class Ls{resolveComponentFactory(e){throw function er(n){const e=Error(`No component factory found for ${io(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Oi=(()=>{class n{}return n.NULL=new Ls,n})();function E1(){return X1(d(),Dt())}function X1(n,e){return new gn(vc(n,e))}let gn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=E1,n})();function vo(n){return n instanceof gn?n.nativeElement:n}class r3{}let Go=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function zc(){const n=Dt(),t=ea(d().index,n);return(Fs(t)?t:n)[11]}(),n})(),mh=(()=>{class n{}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:()=>null}),n})();class F2{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const m0=new F2("14.2.2"),lu={};function fL(n){return n.ngOriginalError}class _h{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&fL(e);for(;t&&fL(t);)t=fL(t);return t||null}}const dL=new Map;let Jde=0;const gL="__ngContext__";function Oc(n,e){Fs(e)?(n[gL]=e[20],function t6e(n){dL.set(n[20],n)}(e)):n[gL]=e}function mL(n){return n.ownerDocument.defaultView}function AL(n){return n.ownerDocument}function yh(n){return n instanceof Function?n():n}var s3=(()=>((s3=s3||{})[s3.Important=1]="Important",s3[s3.DashCase=2]="DashCase",s3))();function _L(n,e){return undefined(n,e)}function vA(n){const e=n[3];return bo(e)?e[3]:e}function yL(n){return VV(n[13])}function wL(n){return VV(n[4])}function VV(n){for(;null!==n&&!bo(n);)n=n[4];return n}function jp(n,e,t,i,r){if(null!=i){let s,o=!1;bo(i)?s=i:Fs(i)&&(o=!0,i=i[0]);const a=Jo(i);0===n&&null!==t?null==r?$V(e,t,a):o8(e,t,a,r||null,!0):1===n&&null!==t?o8(e,t,a,r||null,!0):2===n?function eU(n,e,t){const i=sw(n,e);i&&function S6e(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function L6e(n,e,t,i,r){const s=t[7];s!==Jo(t)&&jp(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];_A(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function xL(n,e,t){return n.createElement(e,t)}function GV(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,ru(r,-1)),t.splice(i,1)}function bL(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&GV(r,i),e>0&&(n[t-1][4]=i[4]);const s=Ip(n,10+e);!function v6e(n,e){_A(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function QV(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&_A(n,e,t,3,null,null),function w6e(n){let e=n[13];if(!e)return ML(n[1],n);for(;e;){let t=null;if(Fs(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Fs(e)&&ML(e[1],e),e=e[3];null===e&&(e=n),Fs(e)&&ML(e[1],e),t=e&&e[4]}e=t}}(e)}}function ML(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function M6e(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof k6)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function b6e(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Jo(e[o]),c=i[r=t[s+2]],l=t[s+3];"boolean"==typeof l?a.removeEventListener(t[s],c,l):l>=0?i[r=l]():i[r=-l].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&bo(e[3])){t!==e[3]&&GV(t,e);const i=e[19];null!==i&&i.detachView(n)}!function n6e(n){dL.delete(n[20])}(e)}}function WV(n,e,t){return function jV(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Oo.None||r===Oo.Emulated)return null}return vc(i,t)}(n,e.parent,t)}function o8(n,e,t,i,r){n.insertBefore(e,t,i,r)}function $V(n,e,t){n.appendChild(e,t)}function qV(n,e,t,i,r){null!==i?o8(n,e,t,i,r):$V(n,e,t)}function sw(n,e){return n.parentNode(e)}function KV(n,e,t){return YV(n,e,t)}let YV=function XV(n,e,t){return 40&n.type?vc(n,t):null};function ow(n,e,t,i){const r=WV(n,i,e),s=e[11],a=KV(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)qV(s,r,t[c],a,!1);else qV(s,r,t,a,!1)}function aw(n,e){if(null!==e){const t=e.type;if(3&t)return vc(e,n);if(4&t)return EL(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return aw(n,i);{const r=n[e.index];return bo(r)?EL(-1,r):Jo(r)}}if(32&t)return _L(e,n)()||Jo(n[e.index]);{const i=JV(n,e);return null!==i?Array.isArray(i)?i[0]:aw(vA(n[16]),i):aw(n,e.next)}}return null}function JV(n,e){return null!==e?n[16][6].projection[e.projection]:null}function EL(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return aw(i,r)}return e[7]}function TL(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&Oc(Jo(a),i),t.flags|=4),64!=(64&t.flags))if(8&c)TL(n,e,t.child,i,r,s,!1),jp(e,n,r,a,s);else if(32&c){const l=_L(t,i);let u;for(;u=l();)jp(e,n,r,u,s);jp(e,n,r,a,s)}else 16&c?tU(n,e,i,t,r,s):jp(e,n,r,a,s);t=o?t.projectionNext:t.next}}function _A(n,e,t,i,r,s){TL(t,i,n.firstChild,e,r,s,!1)}function tU(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)jp(e,n,r,c[l],s);else TL(n,e,c,o[3],r,s,!0)}function nU(n,e,t){n.setAttribute(e,"style",t)}function LL(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function iU(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const rU="ng-template";function I6e(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==iU(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function sU(n){return 4===n.type&&n.value!==rU}function B6e(n,e,t){return e===(4!==n.type||t?n.value:rU)}function R6e(n,e,t){let i=4;const r=n.attrs||[],s=function P6e(n){for(let e=0;e<n.length;e++)if(f0(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!B6e(n,c,t)||""===c&&1===e.length){if(fu(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!I6e(n.attrs,l,t)){if(fu(i))return!1;o=!0}continue}const f=F6e(8&i?"class":c,r,sU(n),t);if(-1===f){if(fu(i))return!1;o=!0;continue}if(""!==l){let p;p=f>s?"":r[f+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==iU(g,l,0)||2&i&&l!==p){if(fu(i))return!1;o=!0}}}}else{if(!o&&!fu(i)&&!fu(c))return!1;if(o&&fu(c))continue;o=!1,i=c|1&i}}return fu(i)||o}function fu(n){return 0==(1&n)}function F6e(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function H6e(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function oU(n,e,t=!1){for(let i=0;i<e.length;i++)if(R6e(n,e[i],t))return!0;return!1}function z6e(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function aU(n,e){return n?":not("+e.trim()+")":e}function O6e(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!fu(o)&&(e+=aU(s,r),r=""),i=o,s=s||!fu(i);t++}return""!==r&&(e+=aU(s,r)),e}const mr={};function ae(n){cU(Sr(),Dt(),ks()+n,!1)}function cU(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&vp(e,s,t)}else{const s=n.preOrderHooks;null!==s&&_p(e,s,0,t)}u0(t)}function fU(n,e=null,t=null,i){const r=dU(n,e,t,i);return r.resolveInjectorInitializers(),r}function dU(n,e=null,t=null,i,r=new Set){const s=[t||kr,cL(n)];return i=i||("object"==typeof n?void 0:io(n)),new be(s,e||ne(),i||null,r)}let y2=(()=>{class n{static create(t,i){if(Array.isArray(t))return fU({name:""},i,t,"");{const r=t.name??"";return fU({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Wf,n.NULL=new ew,n.\u0275prov=Lt({token:n,providedIn:"any",factory:()=>Xe(Zy)}),n.__NG_ELEMENT_ID__=-1,n})();function G(n,e=Hn.Default){const t=Dt();return null===t?Xe(n,e):Tp(d(),t,Ln(n),e)}function a8(){throw new Error("invalid")}function lw(n,e){return n<<17|e<<2}function du(n){return n>>17&32767}function FL(n){return 2|n}function wh(n){return(131068&n)>>2}function kL(n,e){return-131069&n|e<<2}function PL(n){return 1|n}function DU(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];km(r),o.contentQueries(2,e[s],s)}}}function fw(n,e,t,i,r,s,o,a,c,l,u){const f=e.blueprint.slice();return f[0]=r,f[2]=76|i,(null!==u||n&&1024&n[2])&&(f[2]|=1024),R3(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=c||n&&n[12]||null,f[9]=l||n&&n[9]||null,f[6]=s,f[20]=function e6e(){return Jde++}(),f[21]=u,f[16]=2==e.type?n[16]:f,f}function qp(n,e,t,i,r){let s=n.data[e];if(null===s)s=function QL(n,e,t,i,r){const s=m(),o=B(),c=n.data[e]=function w8e(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),function Pr(){return Hi.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function v(){const n=Hi.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return x(s,!0),s}function Kp(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function WL(n,e,t){Hm(e);try{const i=n.viewQuery;null!==i&&JL(1,i,t);const r=n.template;null!==r&&IU(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&DU(n,e),n.staticViewQueries&&JL(2,n.viewQuery,t);const s=n.components;null!==s&&function v8e(n,e){for(let t=0;t<e.length;t++)H8e(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,zm()}}function dw(n,e,t,i){const r=e[2];if(128!=(128&r)){Hm(e);try{R3(e),function bn(n){return Hi.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&IU(n,e,t,2,i);const o=3==(3&r);if(o){const l=n.preOrderCheckHooks;null!==l&&vp(e,l,null)}else{const l=n.preOrderHooks;null!==l&&_p(e,l,0,null),Om(e,0)}if(function k8e(n){for(let e=yL(n);null!==e;e=wL(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&ru(s,1),r[2]|=512}}}(e),function F8e(n){for(let e=yL(n);null!==e;e=wL(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];B3(i)&&dw(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&DU(n,e),o){const l=n.contentCheckHooks;null!==l&&vp(e,l)}else{const l=n.contentHooks;null!==l&&_p(e,l,1),Om(e,1)}!function m8e(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)u0(~r);else{const s=r,o=t[++i],a=t[++i];o1(o,s),a(2,e[s])}}}finally{u0(-1)}}(n,e);const a=n.components;null!==a&&function A8e(n,e){for(let t=0;t<e.length;t++)P8e(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&JL(2,c,i),o){const l=n.viewCheckHooks;null!==l&&vp(e,l)}else{const l=n.viewHooks;null!==l&&_p(e,l,2),Om(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,ru(e[3],-1))}finally{zm()}}}function IU(n,e,t,i,r){const s=ks(),o=2&i;try{u0(-1),o&&e.length>22&&cU(n,e,22,!1),t(i,r)}finally{u0(s)}}function BU(n,e,t){if(x1(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function jL(n,e,t){!K1()||(function S8e(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||z6(t,e),Oc(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=la(c);l&&I8e(e,t,c);const u=Vf(e,n,a,t);Oc(u,e),null!==o&&B8e(0,a-r,u,c,0,o),l&&(ea(t.index,e)[8]=u)}}(n,e,t,vc(t,e)),128==(128&t.flags)&&function E8e(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function ml(){return Hi.lFrame.currentDirectiveIndex}();try{u0(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];Al(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&OU(c,l)}}finally{u0(-1),Al(o)}}(n,e,t))}function $L(n,e,t=vc){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function RU(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=qL(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function qL(n,e,t,i,r,s,o,a,c,l){const u=22+i,f=u+r,p=function _8e(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:mr);return t}(u,f),g="function"==typeof l?l():l;return p[1]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1}}function FU(n,e,t,i){const r=QU(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&WU(n).push(i,r.length-1))}function kU(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function PU(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,c=null;for(let l=e.directiveStart;l<i;l++){const u=r[l],f=u.inputs,p=null===s||sU(e)?null:R8e(f,s);o.push(p),a=kU(f,l,a),c=kU(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}function P3(n,e,t,i,r,s,o,a){const c=vc(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(eD(n,t,u,i,r),s0(e)&&HU(t,e.index)):3&e.type&&(i=function C8e(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function HU(n,e){const t=ea(e,n);16&t[2]||(t[2]|=32)}function KL(n,e,t,i){let r=!1;if(K1()){const s=function T8e(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];oU(t,o.selectors,!1)&&(r||(r=[]),Mp(z6(t,e),n,o.type),la(o)?(NU(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,VU(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const f=s[u];f.providersResolver&&f.providersResolver(f)}let a=!1,c=!1,l=Kp(n,e,s.length,null);for(let u=0;u<s.length;u++){const f=s[u];t.mergedAttrs=zf(t.mergedAttrs,f.hostAttrs),UU(n,t,e,l,f),D8e(l,f,o),null!==f.contentQueries&&(t.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=128);const p=f.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),l++}PU(n,t)}o&&function L8e(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new jt(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=zf(t.mergedAttrs,t.attrs),r}function zU(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function M8e(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(i,r,o)}}function OU(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function NU(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function D8e(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;la(e)&&(t[""]=n)}}function VU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function UU(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=r1(r.type)),o=new k6(s,la(r),G);n.blueprint[i]=o,t[i]=o,zU(n,e,0,i,Kp(n,t,r.hostVars,mr),r)}function I8e(n,e,t){const i=vc(e,n),r=RU(t),s=n[10],o=pw(n,fw(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}function v0(n,e,t,i,r,s){const o=vc(n,e);!function XL(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Zi(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function B8e(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],f=o[c++];null!==a?i.setInput(t,f,l,u):t[u]=f}}}function R8e(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function GU(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function P8e(n,e){const t=ea(e,n);if(B3(t)){const i=t[1];48&t[2]?dw(i,t,i.template,t[8]):t[5]>0&&YL(t)}}function YL(n){for(let i=yL(n);null!==i;i=wL(i))for(let r=10;r<i.length;r++){const s=i[r];if(B3(s))if(512&s[2]){const o=s[1];dw(o,s,o.template,s[8])}else s[5]>0&&YL(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=ea(t[i],n);B3(r)&&r[5]>0&&YL(r)}}function H8e(n,e){const t=ea(e,n),i=t[1];(function z8e(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),WL(i,t,t[8])}function pw(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function ZL(n){for(;n;){n[2]|=32;const e=vA(n);if(gl(n)&&!e)return n;n=e}return null}function gw(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{dw(n,e,n.template,t)}catch(o){throw i&&$U(e,o),o}finally{r.end&&r.end()}}function JL(n,e,t){km(0),e(n,t)}function QU(n){return n[7]||(n[7]=[])}function WU(n){return n.cleanup||(n.cleanup=[])}function jU(n,e,t){return(null===n||la(n))&&(t=function Oa(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function $U(n,e){const t=n[9],i=t?t.get(_h,null):null;i&&i.handleError(e)}function eD(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,r,i,a):c[a]=r}}function Ch(n,e,t){const i=Z2(e,n);!function UV(n,e,t){n.setValue(e,t)}(n[11],i,t)}function mw(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=h2(r,a):2==s&&(i=h2(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Aw(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(Jo(s)),bo(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1].firstChild;null!==l&&Aw(c[1],c,l,i)}const o=t.type;if(8&o)Aw(n,e,t.child,i);else if(32&o){const a=_L(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=JV(e,t);if(Array.isArray(a))i.push(...a);else{const c=vA(e[16]);Aw(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class yA{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Aw(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(bo(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(bL(e,i),Ip(t,i))}this._attachedToViewContainer=!1}QV(this._lView[1],this._lView)}onDestroy(e){FU(this._lView[1],this._lView,null,e)}markForCheck(){ZL(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){gw(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new jt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function y6e(n,e){_A(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new jt(902,!1);this._appRef=e}}class O8e extends yA{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;gw(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class tD extends Oi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ji(e);return new wA(t,this.ngModule)}}function qU(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class V8e{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){const r=this.injector.get(e,lu,i);return r!==lu||t===lu?r:this.parentInjector.get(e,t,i)}}class wA extends xr{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function N6e(n){return n.map(O6e).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return qU(this.componentDef.inputs)}get outputs(){return qU(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof ye?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new V8e(e,s):e,a=o.get(r3,null);if(null===a)throw new jt(407,!1);const c=o.get(mh,null),l=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",f=i?function y8e(n,e,t){return n.selectRootElement(e,t===Oo.ShadowDom)}(l,i,this.componentDef.encapsulation):xL(a.createRenderer(null,this.componentDef),u,function N8e(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),p=this.componentDef.onPush?288:272,g=qL(0,null,null,1,0,null,null,null,null,null),_=fw(null,g,null,p,null,null,a,l,c,o,null);let y,w;Hm(_);try{const C=function Q8e(n,e,t,i,r,s){const o=t[1];t[22]=n;const c=qp(o,22,2,"#host",null),l=c.mergedAttrs=e.hostAttrs;null!==l&&(mw(c,l,!0),null!==n&&(Cp(r,n,l),null!==c.classes&&LL(r,n,c.classes),null!==c.styles&&nU(r,n,c.styles)));const u=i.createRenderer(n,e),f=fw(t,RU(e),null,e.onPush?32:16,t[22],c,i,u,s||null,null,null);return o.firstCreatePass&&(Mp(z6(c,t),o,e.type),NU(o,c),VU(c,t.length,1)),pw(t,f),t[22]=f}(f,this.componentDef,_,a,l);if(f)if(i)Cp(l,f,["ng-version",m0.full]);else{const{attrs:b,classes:M}=function V6e(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!fu(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);b&&Cp(l,f,b),M&&M.length>0&&LL(l,f,M.join(" "))}if(w=R6(g,22),void 0!==t){const b=w.projection=[];for(let M=0;M<this.ngContentSelectors.length;M++){const T=t[M];b.push(null!=T?Array.from(T):null)}}y=function W8e(n,e,t,i){const r=t[1],s=function b8e(n,e,t){const i=d();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),UU(n,i,e,Kp(n,e,1,null),t),PU(n,i));const r=Vf(e,n,i.directiveStart,i);Oc(r,e);const s=vc(i,e);return s&&Oc(s,e),r}(r,t,e);if(n[8]=t[8]=s,null!==i)for(const a of i)a(s,e);if(e.contentQueries){const a=d();e.contentQueries(1,s,a.directiveStart)}const o=d();return!r.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(u0(o.index),zU(t[1],o,0,o.directiveStart,o.directiveEnd,e),OU(e,s)),s}(C,this.componentDef,_,[j8e]),WL(g,_,null)}finally{zm()}return new G8e(this.componentType,y,X1(w,_),_,w)}}class G8e extends class Gs{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new O8e(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;eD(s[1],s,r,e,t),HU(s,this._tNode.index)}}get injector(){return new lh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function j8e(){const n=d();Ap(Dt()[1],n)}function zt(n){let e=function KU(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(la(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new jt(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=nD(n.inputs),o.declaredInputs=nD(n.declaredInputs),o.outputs=nD(n.outputs);const a=r.hostBindings;a&&X8e(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&q8e(n,c),l&&K8e(n,l),ho(n.inputs,r.inputs),ho(n.declaredInputs,r.declaredInputs),ho(n.outputs,r.outputs),la(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===zt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function $8e(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=zf(r.hostAttrs,t=zf(t,r.hostAttrs))}}(i)}function nD(n){return n===J4?{}:n===kr?[]:n}function q8e(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function K8e(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function X8e(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let vw=null;function c8(){if(!vw){const n=_s.Symbol;if(n&&n.iterator)vw=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(vw=i)}}}return vw}function CA(n){return!!iD(n)&&(Array.isArray(n)||!(n instanceof Map)&&c8()in n)}function iD(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function _0(n,e,t){return n[e]=t}function Nc(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function l8(n,e,t,i){const r=Nc(n,e,t);return Nc(n,e+1,i)||r}function Qs(n,e,t,i){const r=Dt();return Nc(r,Rn(),e)&&(Sr(),v0(Na(),r,n,e,t,i)),Qs}function Yp(n,e,t,i){return Nc(n,Rn(),t)?e+Zi(t)+i:mr}function Zp(n,e,t,i,r,s){const a=l8(n,ln(),t,r);return Zn(2),a?e+Zi(t)+i+Zi(r)+s:mr}function r7(n,e,t,i,r,s,o,a,c,l,u,f,p,g,_,y){const w=ln();let C=function v4(n,e,t,i,r,s){const o=l8(n,e,t,i);return l8(n,e+2,r,s)||o}(n,w,t,r,o,c);return C=function _w(n,e,t,i,r){const s=l8(n,e,t,i);return Nc(n,e+2,r)||s}(n,w+4,u,p,_)||C,Zn(7),C?e+Zi(t)+i+Zi(r)+s+Zi(o)+a+Zi(c)+l+Zi(u)+f+Zi(p)+g+Zi(_)+y:mr}function fn(n,e,t,i,r,s,o,a){const c=Dt(),l=Sr(),u=n+22,f=l.firstCreatePass?function r5e(n,e,t,i,r,s,o,a,c){const l=e.consts,u=qp(e,n,4,o||null,_c(l,a));KL(e,t,u,_c(l,c)),Ap(e,u);const f=u.tViews=qL(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),f.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];x(f,!1);const p=c[11].createComment("");ow(l,c,p,f),Oc(p,c),pw(c,c[u]=GU(p,c,p,f)),Yl(f)&&jL(l,c,f),null!=o&&$L(c,f,a)}function Qo(n){return I3(function pe(){return Hi.lFrame.contextLView}(),22+n)}function Ve(n,e,t){const i=Dt();return Nc(i,Rn(),e)&&P3(Sr(),Na(),i,n,e,i[11],t,!1),Ve}function rD(n,e,t,i,r){const o=r?"class":"style";eD(n,t,e.inputs[o],o,i)}function O(n,e,t,i){const r=Dt(),s=Sr(),o=22+n,a=r[11],c=r[o]=xL(a,e,function TT(){return Hi.lFrame.currentNamespace}()),l=s.firstCreatePass?function o5e(n,e,t,i,r,s,o){const a=e.consts,l=qp(e,n,2,r,_c(a,s));return KL(e,t,l,_c(a,o)),null!==l.attrs&&mw(l,l.attrs,!1),null!==l.mergedAttrs&&mw(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,0,e,t,i):s.data[o];x(l,!0);const u=l.mergedAttrs;null!==u&&Cp(a,c,u);const f=l.classes;null!==f&&LL(a,c,f);const p=l.styles;return null!==p&&nU(a,c,p),64!=(64&l.flags)&&ow(s,r,c,l),0===function yc(){return Hi.lFrame.elementDepthCount}()&&Oc(c,r),function l0(){Hi.lFrame.elementDepthCount++}(),Yl(l)&&(jL(s,r,l),BU(s,l,r)),null!==i&&$L(r,l),O}function N(){let n=d();B()?H():(n=n.parent,x(n,!1));const e=n;!function g4(){Hi.lFrame.elementDepthCount--}();const t=Sr();return t.firstCreatePass&&(Ap(t,n),x1(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function H6(n){return 0!=(16&n.flags)}(e)&&rD(t,e,Dt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function wp(n){return 0!=(32&n.flags)}(e)&&rD(t,e,Dt(),e.stylesWithoutHost,!1),N}function rt(n,e,t,i){return O(n,e,t,i),N(),rt}function oo(n,e,t){const i=Dt(),r=Sr(),s=n+22,o=r.firstCreatePass?function a5e(n,e,t,i,r){const s=e.consts,o=_c(s,i),a=qp(e,n,8,"ng-container",o);return null!==o&&mw(a,o,!0),KL(e,t,a,_c(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];x(o,!0);const a=i[s]=i[11].createComment("");return ow(r,i,a,o),Oc(a,i),Yl(o)&&(jL(r,i,o),BU(r,o,i)),null!=t&&$L(i,o),oo}function ao(){let n=d();const e=Sr();return B()?H():(n=n.parent,x(n,!1)),e.firstCreatePass&&(Ap(e,n),x1(n)&&e.queries.elementEnd(n)),ao}function pu(n,e,t){return oo(n,e,t),ao(),pu}function Va(){return Dt()}function bA(n){return!!n&&"function"==typeof n.then}function sG(n){return!!n&&"function"==typeof n.subscribe}const sD=sG;function mn(n,e,t,i){const r=Dt(),s=Sr(),o=d();return oG(s,r,r[11],o,n,e,0,i),mn}function oD(n,e){const t=d(),i=Dt(),r=Sr();return oG(r,i,jU(ah(r.data),t,i),t,n,e),oD}function oG(n,e,t,i,r,s,o,a){const c=Yl(i),u=n.firstCreatePass&&WU(n),f=e[8],p=QU(e);let g=!0;if(3&i.type||a){const w=vc(i,e),C=a?a(w):w,b=p.length,M=a?I=>a(Jo(I[i.index])):i.index;let T=null;if(!a&&c&&(T=function c5e(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,g=!1;else{s=cG(i,e,f,s,!1);const I=t.listen(C,r,s);p.push(s,I),u&&u.push(r,M,b,b+1)}}else s=cG(i,e,f,s,!1);const _=i.outputs;let y;if(g&&null!==_&&(y=_[r])){const w=y.length;if(w)for(let C=0;C<w;C+=2){const F=e[y[C]][y[C+1]].subscribe(s),P=p.length;p.push(s,F),u&&u.push(r,i.index,P,-(P+1))}}}function aG(n,e,t,i){try{return!1!==t(i)}catch(r){return $U(n,r),!1}}function cG(n,e,t,i,r){return function s(o){if(o===Function)return i;ZL(2&n.flags?ea(n.index,e):e);let c=aG(e,0,i,o),l=s.__ngNextListenerFn__;for(;l;)c=aG(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function pn(n=1){return function MT(n){return(Hi.lFrame.contextLView=function ST(n,e){for(;n>0;)e=e[15],n--;return e}(n,Hi.lFrame.contextLView))[8]}(n)}function l5e(n,e){let t=null;const i=function k6e(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?oU(n,s,!0):z6e(i,s))return r}else t=r}return t}function Vc(n){const e=Dt()[16][6];if(!e.projection){const i=e.projection=G6(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?l5e(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function T1(n,e=0,t){const i=Dt(),r=Sr(),s=qp(r,22+n,16,null,t||null);null===s.projection&&(s.projection=e),H(),64!=(64&s.flags)&&function T6e(n,e,t){tU(e[11],0,e,t,WV(n,t,e),KV(t.parent||e[6],t,e))}(r,i,s)}function gu(n,e,t){return ws(n,"",e,"",t),gu}function ws(n,e,t,i,r){const s=Dt(),o=Yp(s,e,t,i);return o!==mr&&P3(Sr(),Na(),s,n,o,s[11],r,!1),ws}function AG(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?du(s):wh(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];f5e(n[a],e)&&(c=!0,n[a+1]=i?PL(u):FL(u)),a=i?du(u):wh(u)}c&&(n[t+1]=i?FL(s):PL(s))}function f5e(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Qf(n,e)>=0}const k2={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vG(n){return n.substring(k2.key,k2.keyEnd)}function d5e(n){return n.substring(k2.value,k2.valueEnd)}function _G(n,e){const t=k2.textEnd;return t===e?-1:(e=k2.keyEnd=function m5e(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,k2.key=e,t),o7(n,e,t))}function yG(n,e){const t=k2.textEnd;let i=k2.key=o7(n,e,t);return t===i?-1:(i=k2.keyEnd=function A5e(n,e,t){let i;for(;e<t&&(45===(i=n.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(n,i,t),i=CG(n,i,t),i=k2.value=o7(n,i,t),i=k2.valueEnd=function v5e(n,e,t){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const c=n.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=xG(n,c,o,t):e===o-4&&85===s&&82===r&&76===i&&40===c?a=o=xG(n,41,o,t):c>32&&(a=o),s=r,r=i,i=-33&c}return a}(n,i,t),CG(n,i,t))}function wG(n){k2.key=0,k2.keyEnd=0,k2.value=0,k2.valueEnd=0,k2.textEnd=n.length}function o7(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function CG(n,e,t,i){return(e=o7(n,e,t))<t&&e++,e}function xG(n,e,t,i){let r=-1,s=t;for(;s<i;){const o=n.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function Uc(n,e,t){return Au(n,e,t,!1),Uc}function Gi(n,e){return Au(n,e,null,!0),Gi}function _5e(n,e){for(let t=function g5e(n){return wG(n),yG(n,o7(n,0,k2.textEnd))}(e);t>=0;t=yG(e,t))EG(n,vG(e),d5e(e))}function y0(n,e){for(let t=function p5e(n){return wG(n),_G(n,o7(n,0,k2.textEnd))}(e);t>=0;t=_G(e,t))_l(n,vG(e),!0)}function Au(n,e,t,i){const r=Dt(),s=Sr(),o=Zn(2);s.firstUpdatePass&&SG(s,n,o,i),e!==mr&&Nc(r,o,e)&&TG(s,s.data[ks()],r,r[11],n,r[o+1]=function S5e(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=io(yl(n)))),n}(e,t),i,o)}function vu(n,e,t,i){const r=Sr(),s=Zn(2);r.firstUpdatePass&&SG(r,null,s,i);const o=Dt();if(t!==mr&&Nc(o,s,t)){const a=r.data[ks()];if(DG(a,i)&&!MG(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=h2(c,t||"")),rD(r,a,o,t,i)}else!function M5e(n,e,t,i,r,s,o,a){r===mr&&(r=kr);let c=0,l=0,u=0<r.length?r[0]:null,f=0<s.length?s[0]:null;for(;null!==u||null!==f;){const p=c<r.length?r[c+1]:void 0,g=l<s.length?s[l+1]:void 0;let y,_=null;u===f?(c+=2,l+=2,p!==g&&(_=f,y=g)):null===f||null!==u&&u<f?(c+=2,_=u):(l+=2,_=f,y=g),null!==_&&TG(n,e,t,i,_,y,o,a),u=c<r.length?r[c]:null,f=l<s.length?s[l]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function b5e(n,e,t){if(null==t||""===t)return kr;const i=[],r=yl(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function MG(n,e){return e>=n.expandoStartIndex}function SG(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[ks()],o=MG(n,t);DG(s,i)&&null===e&&!o&&(e=!1),e=function y5e(n,e,t,i){const r=ah(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=MA(t=aD(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=aD(r,n,e,t,i),null===s){let c=function w5e(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==wh(i))return n[du(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=aD(null,n,e,c[1],i),c=MA(c,e.attrs,i),function C5e(n,e,t,i){n[du(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function x5e(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=MA(i,n[s].hostAttrs,t);return MA(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function u5e(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=du(o),c=wh(o);n[i]=t;let u,l=!1;if(Array.isArray(t)){const f=t;u=f[1],(null===u||Qf(f,u)>0)&&(l=!0)}else u=t;if(r)if(0!==c){const p=du(n[a+1]);n[i+1]=lw(p,a),0!==p&&(n[p+1]=kL(n[p+1],i)),n[a+1]=function o8e(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=lw(a,0),0!==a&&(n[a+1]=kL(n[a+1],i)),a=i;else n[i+1]=lw(c,0),0===a?a=i:n[c+1]=kL(n[c+1],i),c=i;l&&(n[i+1]=FL(n[i+1])),AG(n,u,i,!0),AG(n,u,i,!1),function h5e(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Qf(s,e)>=0&&(t[i+1]=PL(t[i+1]))}(e,u,n,i,s),o=lw(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function aD(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=MA(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function MA(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),_l(n,o,!!t||e[++s]))}return void 0===n?null:n}function EG(n,e,t){_l(n,e,yl(t))}function TG(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1];yw(function CU(n){return 1==(1&n)}(l)?LG(c,e,t,r,wh(l),o):void 0)||(yw(s)||function wU(n){return 2==(2&n)}(l)&&(s=LG(c,null,t,r,a,o)),function D6e(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:s3.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=s3.Important),n.setStyle(t,i,r,s))}}(i,o,Z2(ks(),t),r,s))}function LG(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,f=null===u;let p=t[r+1];p===mr&&(p=f?kr:void 0);let g=f?Zm(p,i):u===i?p:void 0;if(l&&!yw(g)&&(g=Zm(c,i)),yw(g)&&(a=g,o))return a;const _=n[r+1];r=o?du(_):wh(_)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Zm(c,i))}return a}function yw(n){return void 0!==n}function DG(n,e){return 0!=(n.flags&(e?16:32))}function V(n,e=""){const t=Dt(),i=Sr(),r=n+22,s=i.firstCreatePass?qp(i,r,1,e,null):i.data[r],o=t[r]=function CL(n,e){return n.createText(e)}(t[11],e);ow(i,t,o,s),x(s,!1)}function a7(n){return si("",n,""),a7}function si(n,e,t){const i=Dt(),r=Yp(i,n,e,t);return r!==mr&&Ch(i,ks(),r),si}function c7(n,e,t,i,r){const s=Dt(),o=Zp(s,n,e,t,i,r);return o!==mr&&Ch(s,ks(),o),c7}function na(n,e,t){vu(_l,y0,Yp(Dt(),n,e,t),!0)}function cD(n,e,t,i,r){vu(_l,y0,Zp(Dt(),n,e,t,i,r),!0)}function u8(n,e,t,i,r){return Au(n,Yp(Dt(),e,t,i),r,!1),u8}function h8(n,e,t){const i=Dt();return Nc(i,Rn(),e)&&P3(Sr(),Na(),i,n,e,i[11],t,!0),h8}function lD(n,e,t){const i=Dt();if(Nc(i,Rn(),e)){const s=Sr(),o=Na();P3(s,o,i,n,e,jU(ah(s.data),o,i),t,!0)}return lD}const f8=void 0;var G5e=["en",[["a","p"],["AM","PM"],f8],[["AM","PM"],f8,f8],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],f8,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],f8,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",f8,"{1} 'at' {0}",f8],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function U5e(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let l7={};function Ml(n){const e=function Q5e(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=qG(e);if(t)return t;const i=e.split("-")[0];if(t=qG(i),t)return t;if("en"===i)return G5e;throw new jt(701,!1)}function qG(n){return n in l7||(l7[n]=_s.ng&&_s.ng.common&&_s.ng.common.locales&&_s.ng.common.locales[n]),l7[n]}var ei=(()=>((ei=ei||{})[ei.LocaleId=0]="LocaleId",ei[ei.DayPeriodsFormat=1]="DayPeriodsFormat",ei[ei.DayPeriodsStandalone=2]="DayPeriodsStandalone",ei[ei.DaysFormat=3]="DaysFormat",ei[ei.DaysStandalone=4]="DaysStandalone",ei[ei.MonthsFormat=5]="MonthsFormat",ei[ei.MonthsStandalone=6]="MonthsStandalone",ei[ei.Eras=7]="Eras",ei[ei.FirstDayOfWeek=8]="FirstDayOfWeek",ei[ei.WeekendRange=9]="WeekendRange",ei[ei.DateFormat=10]="DateFormat",ei[ei.TimeFormat=11]="TimeFormat",ei[ei.DateTimeFormat=12]="DateTimeFormat",ei[ei.NumberSymbols=13]="NumberSymbols",ei[ei.NumberFormats=14]="NumberFormats",ei[ei.CurrencyCode=15]="CurrencyCode",ei[ei.CurrencySymbol=16]="CurrencySymbol",ei[ei.CurrencyName=17]="CurrencyName",ei[ei.Currencies=18]="Currencies",ei[ei.Directionality=19]="Directionality",ei[ei.PluralCase=20]="PluralCase",ei[ei.ExtraData=21]="ExtraData",ei))();const u7="en-US";let KG=u7;function fD(n,e,t,i,r){if(n=Ln(n),Array.isArray(n))for(let s=0;s<n.length;s++)fD(n[s],e,t,i,r);else{const s=Sr(),o=Dt();let a=E(n)?n:Ln(n.provide),c=Ft(n);const l=d(),u=1048575&l.providerIndexes,f=l.directiveStart,p=l.providerIndexes>>20;if(E(n)||!n.multi){const g=new k6(c,r,G),_=pD(a,e,r?u:u+p,f);-1===_?(Mp(z6(l,o),s,a),dD(s,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(g),o.push(g)):(t[_]=g,o[_]=g)}else{const g=pD(a,e,u+p,f),_=pD(a,e,u,u+p),y=g>=0&&t[g],w=_>=0&&t[_];if(r&&!w||!r&&!y){Mp(z6(l,o),s,a);const C=function Vpe(n,e,t,i,r){const s=new k6(n,t,G);return s.multi=[],s.index=e,s.componentProviders=0,yQ(s,r,i&&!t),s}(r?Npe:Ope,t.length,r,i,c);!r&&w&&(t[_].providerFactory=C),dD(s,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(C),o.push(C)}else dD(s,n,g>-1?g:_,yQ(t[r?_:g],c,!r&&i));!r&&i&&w&&t[_].componentProviders++}}}function dD(n,e,t,i){const r=E(e),s=function S(n){return!!n.useClass}(e);if(r||s){const c=(s?Ln(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function yQ(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function pD(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Ope(n,e,t,i){return gD(this.multi,[])}function Npe(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Vf(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),gD(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],gD(r,s);return s}function gD(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Xi(n,e=[]){return t=>{t.providersResolver=(i,r)=>function zpe(n,e,t){const i=Sr();if(i.firstCreatePass){const r=la(n);fD(t,i.data,i.blueprint,r,!0),fD(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class d8{}class wQ{}class CQ extends d8{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tD(this);const i=Li(e);this._bootstrapComponents=yh(i.bootstrap),this._r3Injector=dU(e,t,[{provide:d8,useValue:this},{provide:Oi,useValue:this.componentFactoryResolver}],io(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class mD extends wQ{constructor(e){super(),this.moduleType=e}create(e){return new CQ(this.moduleType,e)}}class Gpe extends d8{constructor(e,t,i){super(),this.componentFactoryResolver=new tD(this),this.instance=null;const r=new be([...e,{provide:d8,useValue:this},{provide:Oi,useValue:this.componentFactoryResolver}],t||ne(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Mw(n,e,t=null){return new Gpe(n,e,t).injector}let Qpe=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=tw(0,t.type),r=i.length>0?Mw([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Lt({token:n,providedIn:"environment",factory:()=>new n(Xe(ye))}),n})();function xQ(n){n.getStandaloneInjector=e=>e.get(Qpe).getOrCreateStandaloneInjector(n)}function nd(n,e,t){const i=pt()+n,r=Dt();return r[i]===mr?_0(r,i,t?e.call(t):e()):function xA(n,e){return n[e]}(r,i)}function w0(n,e,t,i){return IQ(Dt(),pt(),n,e,t,i)}function IA(n,e){const t=n[e];return t===mr?void 0:t}function IQ(n,e,t,i,r,s){const o=e+t;return Nc(n,o,r)?_0(n,o+1,s?i.call(s,r):i(r)):IA(n,o+1)}function BQ(n,e,t,i,r,s,o){const a=e+t;return l8(n,a,r,s)?_0(n,a+2,o?i.call(o,r,s):i(r,s)):IA(n,a+2)}function wa(n,e){const t=Sr();let i;const r=n+22;t.firstCreatePass?(i=function o7e(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=r1(i.type)),o=j1(G);try{const a=bp(!1),c=s();return bp(a),function s5e(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Dt(),r,c),c}finally{j1(o)}}function Y1(n,e,t){const i=n+22,r=Dt(),s=I3(r,i);return RA(r,i)?IQ(r,pt(),e,s.transform,t,s):s.transform(t)}function BA(n,e,t,i){const r=n+22,s=Dt(),o=I3(s,r);return RA(s,r)?BQ(s,pt(),e,o.transform,t,i,o):o.transform(t,i)}function RA(n,e){return n[1].data[e].pure}function vD(n){return e=>{setTimeout(n,void 0,e)}}const Ar=class u7e extends Je{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=vD(s),r&&(r=vD(r)),o&&(o=vD(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Fe&&e.add(a),a}};function h7e(){return this._results[c8()]()}class FA{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=c8(),i=FA.prototype;i[t]||(i[t]=h7e)}get changes(){return this._changes||(this._changes=new Ar)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=vl(e);(this._changesDetected=!function kT(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let tc=(()=>{class n{}return n.__NG_ELEMENT_ID__=p7e,n})();const f7e=tc,d7e=class extends f7e{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=fw(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),WL(i,r,e),new yA(r)}};function p7e(){return Sw(d(),Dt())}function Sw(n,e){return 4&n.type?new d7e(e,n,X1(n,e)):null}let nc=(()=>{class n{}return n.__NG_ELEMENT_ID__=g7e,n})();function g7e(){return zQ(d(),Dt())}const m7e=nc,PQ=class extends m7e{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return X1(this._hostTNode,this._hostLView)}get injector(){return new lh(this._hostTNode,this._hostLView)}get parentInjector(){const e=O6(this._hostTNode,this._hostLView);if(Um(e)){const t=Nf(e,this._hostLView),i=Of(e);return new lh(t[1].data[i+8],t)}return new lh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=HQ(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function U6(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const f=t||{};a=f.index,i=f.injector,r=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}const c=o?e:new wA(Ji(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const p=(o?l:this.parentInjector).get(ye,null);p&&(s=p)}const u=c.create(l,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function F6(n){return bo(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const f=i[3],p=new PQ(f,f[6],f[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function C6e(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Sy(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function x6e(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=EL(s,o),c=i[11],l=sw(c,o[7]);return null!==l&&function _6e(n,e,t,i,r,s){i[0]=r,i[6]=e,_A(n,i,t,1,r,s)}(r,o[6],c,i,l,a),e.attachToViewContainerRef(),Sy(_D(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=HQ(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=bL(this._lContainer,t);i&&(Ip(_D(this._lContainer),t),QV(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=bL(this._lContainer,t);return i&&null!=Ip(_D(this._lContainer),t)?new yA(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function HQ(n){return n[8]}function _D(n){return n[8]||(n[8]=[])}function zQ(n,e){let t;const i=e[n.index];if(bo(i))t=i;else{let r;if(8&n.type)r=Jo(i);else{const s=e[11];r=s.createComment("");const o=vc(n,e);o8(s,sw(s,o),r,function E6e(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=GU(i,e,r,n),pw(e,t)}return new PQ(t,n,e)}class yD{constructor(e){this.queryList=e,this.matches=null}clone(){return new yD(this.queryList)}setDirty(){this.queryList.setDirty()}}class wD{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new wD(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==GQ(e,t).matches&&this.queries[t].setDirty()}}class OQ{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class CD{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new CD(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class xD{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new xD(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,_7e(t,s)),this.matchTNodeWithReadOption(e,t,Lp(t,e,s,!1,!1))}else i===tc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Lp(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===gn||r===nc||r===tc&&4&t.type)this.addMatch(t.index,-2);else{const s=Lp(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function _7e(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function w7e(n,e,t,i){return-1===t?function y7e(n,e){return 11&n.type?X1(n,e):4&n.type?Sw(n,e):null}(e,n):-2===t?function C7e(n,e,t){return t===gn?X1(e,n):t===tc?Sw(e,n):t===nc?zQ(e,n):void 0}(n,e,i):Vf(n,n[1],t,e)}function NQ(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:w7e(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function bD(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=NQ(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let f=10;f<u.length;f++){const p=u[f];p[17]===p[3]&&bD(p[1],p,l,i)}if(null!==u[9]){const f=u[9];for(let p=0;p<f.length;p++){const g=f[p];bD(g[1],g,l,i)}}}}}return i}function ir(n){const e=Dt(),t=Sr(),i=ch();km(i+1);const r=GQ(t,i);if(n.dirty&&function c0(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?bD(t,e,i,[]):NQ(t,e,r,i);n.reset(s,vo),n.notifyOnChanges()}return!0}return!1}function Wo(n,e,t){const i=Sr();i.firstCreatePass&&(UQ(i,new OQ(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),VQ(i,Dt(),e)}function Z1(n,e,t,i){const r=Sr();if(r.firstCreatePass){const s=d();UQ(r,new OQ(e,t,i),s.index),function b7e(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}VQ(r,Dt(),t)}function rr(){return function x7e(n,e){return n[19].queries[e].queryList}(Dt(),ch())}function VQ(n,e,t){const i=new FA(4==(4&t));FU(n,e,i,i.destroy),null===e[19]&&(e[19]=new wD),e[19].queries.push(new yD(i))}function UQ(n,e,t){null===n.queries&&(n.queries=new CD),n.queries.track(new xD(e,t))}function GQ(n,e){return n.queries.getByIndex(e)}function C0(n,e){return Sw(n,e)}function Tw(...n){}const PA=new Bt("Application Initializer");let Lw=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Tw,this.reject=Tw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(bA(s))t.push(s);else if(sD(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Xe(PA,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HA=new Bt("AppId",{providedIn:"root",factory:function cW(){return`${LD()}${LD()}${LD()}`}});function LD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lW=new Bt("Platform Initializer"),H3=new Bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Dw=new Bt("appBootstrapListener"),_4=new Bt("AnimationModuleType");let Q7e=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const x0=new Bt("LocaleId",{providedIn:"root",factory:()=>ys(x0,Hn.Optional|Hn.SkipSelf)||function W7e(){return typeof $localize<"u"&&$localize.locale||u7}()});class $7e{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let DD=(()=>{class n{compileModuleSync(t){return new mD(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=yh(Li(t).declarations).reduce((o,a)=>{const c=Ji(a);return c&&o.push(new wA(c)),o},[]);return new $7e(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const X7e=(()=>Promise.resolve(0))();function ID(n){typeof Zone>"u"?X7e.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class sr{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ar(!1),this.onMicrotaskEmpty=new Ar(!1),this.onStable=new Ar(!1),this.onError=new Ar(!1),typeof Zone>"u")throw new jt(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Y7e(){let n=_s.requestAnimationFrame,e=_s.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function ege(n){const e=()=>{!function J7e(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(_s,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,RD(n),n.isCheckStableRunning=!0,BD(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),RD(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return fW(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),dW(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return fW(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),dW(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,RD(n),BD(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!sr.isInAngularZone())throw new jt(909,!1)}static assertNotInAngularZone(){if(sr.isInAngularZone())throw new jt(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Z7e,Tw,Tw);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Z7e={};function BD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function RD(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function fW(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dW(n){n._nesting--,BD(n)}class tge{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ar,this.onMicrotaskEmpty=new Ar,this.onStable=new Ar,this.onError=new Ar}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const pW=new Bt(""),Iw=new Bt("");let PD,FD=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,PD||(function nge(n){PD=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{sr.assertNotInAngularZone(),ID(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ID(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Xe(sr),Xe(kD),Xe(Iw))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),kD=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return PD?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),id=null;const gW=new Bt("AllowMultipleToken"),HD=new Bt("PlatformDestroyListeners");class mW{constructor(e,t){this.name=e,this.token=t}}function vW(n,e,t=[]){const i=`Platform: ${e}`,r=new Bt(i);return(s=[])=>{let o=zD();if(!o||o.injector.get(gW,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function sge(n){if(id&&!id.get(gW,!1))throw new jt(400,!1);id=n;const e=n.get(yW);(function AW(n){const e=n.get(lW,null);e&&e.forEach(t=>t())})(n)}(function _W(n=[],e){return y2.create({name:e,providers:[{provide:D,useValue:"platform"},{provide:HD,useValue:new Set([()=>id=null])},...n]})}(a,i))}return function age(n){const e=zD();if(!e)throw new jt(401,!1);return e}()}}function zD(){return id?.get(yW)??null}let yW=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function CW(n,e){let t;return t="noop"===n?new tge:("zone.js"===n?void 0:n)||new sr(e),t}(i?.ngZone,function wW(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:sr,useValue:r}];return r.run(()=>{const o=y2.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(_h,null);if(!c)throw new jt(402,!1);return r.runOutsideAngular(()=>{const l=r.onError.subscribe({next:u=>{c.handleError(u)}});a.onDestroy(()=>{Bw(this._modules,a),l.unsubscribe()})}),function xW(n,e,t){try{const i=t();return bA(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const l=a.injector.get(Lw);return l.runInitializers(),l.donePromise.then(()=>(function XG(n){f2(n,"Expected localeId to be defined"),"string"==typeof n&&(KG=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(x0,u7)||u7),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=bW({},i);return function ige(n,e,t){const i=new mD(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(d7);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new jt(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new jt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(HD,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Xe(y2))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function bW(n,e){return Array.isArray(e)?e.reduce(bW,n):{...n,...e}}let d7=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Ce(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Ce(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{sr.assertNotInAngularZone(),ID(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{sr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=al(s,o.pipe(x3()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof xr;if(!this._injector.get(Lw).done)throw!r&&function X2(n){const e=Ji(n)||Xo(n)||q1(n);return null!==e&&e.standalone}(t),new jt(405,false);let o;o=r?t:this._injector.get(Oi).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function rge(n){return n.isBoundToModule}(o)?void 0:this._injector.get(d8),l=o.create(y2.NULL,[],i||o.selector,a),u=l.location.nativeElement,f=l.injector.get(pW,null);return f?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Bw(this.components,l),f?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new jt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Bw(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Dw,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Bw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new jt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Xe(sr),Xe(ye),Xe(_h))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Bw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let SW=!0,EW=!1;function Rw(){return EW=!0,SW}let wc=(()=>{class n{}return n.__NG_ELEMENT_ID__=uge,n})();function uge(n){return function hge(n,e,t){if(s0(n)&&!t){const i=ea(n.index,e);return new yA(i,i)}return 47&n.type?new yA(e[16],e):null}(d(),Dt(),16==(16&n))}class IW{constructor(){}supports(e){return CA(e)}create(e){return new Age(e)}}const mge=(n,e)=>e;class Age{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||mge}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<RW(i,r,s)?t:i,a=RW(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let p=0;p<l;p++){const g=p<s.length?s[p]:s[p]=0,_=g+p;u<=_&&_<l&&(s[p]=g+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!CA(e))throw new jt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function t5e(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[c8()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new vge(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new BW),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BW),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class vge{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _ge{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class BW{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new _ge,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RW(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class FW{constructor(){}supports(e){return e instanceof Map||iD(e)}create(){return new yge}}class yge{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||iD(e)))throw new jt(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new wge(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class wge{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kW(){return new b0([new IW])}let b0=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||kW()),deps:[[n,new p0,new e3]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new jt(901,!1)}}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:kW}),n})();function PW(){return new g8([new FW])}let g8=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||PW()),deps:[[n,new p0,new e3]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new jt(901,!1)}}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:PW}),n})();const bge=vW(null,"core",[]);let Mge=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Xe(d7))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function bh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Pw=null;function M0(){return Pw}const Pi=new Bt("DocumentToken");let GD=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return function Lge(){return Xe(HW)}()},providedIn:"platform"}),n})();const Dge=new Bt("Location Initialized");let HW=(()=>{class n extends GD{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return M0().getBaseHref(this._doc)}onPopState(t){const i=M0().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=M0().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){zW()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){zW()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:function(){return function Ige(){return new HW(Xe(Pi))}()},providedIn:"platform"}),n})();function zW(){return!!window.history.pushState}function QD(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function OW(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Mh(n){return n&&"?"!==n[0]?"?"+n:n}let m8=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return ys(VW)},providedIn:"root"}),n})();const NW=new Bt("appBaseHref");let VW=(()=>{class n extends m8{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ys(Pi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return QD(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Mh(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Mh(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Mh(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(GD),Xe(NW,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bge=(()=>{class n extends m8{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=QD(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Mh(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Mh(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(GD),Xe(NW,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),zA=(()=>{class n{constructor(t){this._subject=new Ar,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=OW(UW(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Mh(i))}normalize(t){return n.stripTrailingSlash(function Fge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,UW(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mh(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mh(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Mh,n.joinWithSlash=QD,n.stripTrailingSlash=OW,n.\u0275fac=function(t){return new(t||n)(Xe(m8))},n.\u0275prov=Lt({token:n,factory:function(){return function Rge(){return new zA(Xe(m8))}()},providedIn:"root"}),n})();function UW(n){return n.replace(/\/index.html$/,"")}var J1=(()=>((J1=J1||{})[J1.Format=0]="Format",J1[J1.Standalone=1]="Standalone",J1))(),Cs=(()=>((Cs=Cs||{})[Cs.Narrow=0]="Narrow",Cs[Cs.Abbreviated=1]="Abbreviated",Cs[Cs.Wide=2]="Wide",Cs[Cs.Short=3]="Short",Cs))(),a1=(()=>((a1=a1||{})[a1.Short=0]="Short",a1[a1.Medium=1]="Medium",a1[a1.Long=2]="Long",a1[a1.Full=3]="Full",a1))(),qi=(()=>((qi=qi||{})[qi.Decimal=0]="Decimal",qi[qi.Group=1]="Group",qi[qi.List=2]="List",qi[qi.PercentSign=3]="PercentSign",qi[qi.PlusSign=4]="PlusSign",qi[qi.MinusSign=5]="MinusSign",qi[qi.Exponential=6]="Exponential",qi[qi.SuperscriptingExponent=7]="SuperscriptingExponent",qi[qi.PerMille=8]="PerMille",qi[qi.Infinity=9]="Infinity",qi[qi.NaN=10]="NaN",qi[qi.TimeSeparator=11]="TimeSeparator",qi[qi.CurrencyDecimal=12]="CurrencyDecimal",qi[qi.CurrencyGroup=13]="CurrencyGroup",qi))();function Hw(n,e){return w4(Ml(n)[ei.DateFormat],e)}function zw(n,e){return w4(Ml(n)[ei.TimeFormat],e)}function Ow(n,e){return w4(Ml(n)[ei.DateTimeFormat],e)}function y4(n,e){const t=Ml(n),i=t[ei.NumberSymbols][e];if(typeof i>"u"){if(e===qi.CurrencyDecimal)return t[ei.NumberSymbols][qi.Decimal];if(e===qi.CurrencyGroup)return t[ei.NumberSymbols][qi.Group]}return i}function QW(n){if(!n[ei.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ei.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function w4(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function jD(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const $ge=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,OA={},qge=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var P2=(()=>((P2=P2||{})[P2.Short=0]="Short",P2[P2.ShortGMT=1]="ShortGMT",P2[P2.Long=2]="Long",P2[P2.Extended=3]="Extended",P2))(),tr=(()=>((tr=tr||{})[tr.FullYear=0]="FullYear",tr[tr.Month=1]="Month",tr[tr.Date=2]="Date",tr[tr.Hours=3]="Hours",tr[tr.Minutes=4]="Minutes",tr[tr.Seconds=5]="Seconds",tr[tr.FractionalSeconds=6]="FractionalSeconds",tr[tr.Day=7]="Day",tr))(),Ir=(()=>((Ir=Ir||{})[Ir.DayPeriods=0]="DayPeriods",Ir[Ir.Days=1]="Days",Ir[Ir.Months=2]="Months",Ir[Ir.Eras=3]="Eras",Ir))();function Kge(n,e,t,i){let r=function rme(n){if($W(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return Nw(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match($ge))return function sme(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,l),e}(i)}const e=new Date(n);if(!$W(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Sh(t,e)||e;let a,o=[];for(;e;){if(a=qge.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=r.getTimezoneOffset();i&&(c=jW(i,c),r=function ime(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function nme(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(jW(e,r)-r))}(r,i,!0));let l="";return o.forEach(u=>{const f=function tme(n){if(qD[n])return qD[n];let e;switch(n){case"G":case"GG":case"GGG":e=fa(Ir.Eras,Cs.Abbreviated);break;case"GGGG":e=fa(Ir.Eras,Cs.Wide);break;case"GGGGG":e=fa(Ir.Eras,Cs.Narrow);break;case"y":e=C2(tr.FullYear,1,0,!1,!0);break;case"yy":e=C2(tr.FullYear,2,0,!0,!0);break;case"yyy":e=C2(tr.FullYear,3,0,!1,!0);break;case"yyyy":e=C2(tr.FullYear,4,0,!1,!0);break;case"Y":e=Qw(1);break;case"YY":e=Qw(2,!0);break;case"YYY":e=Qw(3);break;case"YYYY":e=Qw(4);break;case"M":case"L":e=C2(tr.Month,1,1);break;case"MM":case"LL":e=C2(tr.Month,2,1);break;case"MMM":e=fa(Ir.Months,Cs.Abbreviated);break;case"MMMM":e=fa(Ir.Months,Cs.Wide);break;case"MMMMM":e=fa(Ir.Months,Cs.Narrow);break;case"LLL":e=fa(Ir.Months,Cs.Abbreviated,J1.Standalone);break;case"LLLL":e=fa(Ir.Months,Cs.Wide,J1.Standalone);break;case"LLLLL":e=fa(Ir.Months,Cs.Narrow,J1.Standalone);break;case"w":e=$D(1);break;case"ww":e=$D(2);break;case"W":e=$D(1,!0);break;case"d":e=C2(tr.Date,1);break;case"dd":e=C2(tr.Date,2);break;case"c":case"cc":e=C2(tr.Day,1);break;case"ccc":e=fa(Ir.Days,Cs.Abbreviated,J1.Standalone);break;case"cccc":e=fa(Ir.Days,Cs.Wide,J1.Standalone);break;case"ccccc":e=fa(Ir.Days,Cs.Narrow,J1.Standalone);break;case"cccccc":e=fa(Ir.Days,Cs.Short,J1.Standalone);break;case"E":case"EE":case"EEE":e=fa(Ir.Days,Cs.Abbreviated);break;case"EEEE":e=fa(Ir.Days,Cs.Wide);break;case"EEEEE":e=fa(Ir.Days,Cs.Narrow);break;case"EEEEEE":e=fa(Ir.Days,Cs.Short);break;case"a":case"aa":case"aaa":e=fa(Ir.DayPeriods,Cs.Abbreviated);break;case"aaaa":e=fa(Ir.DayPeriods,Cs.Wide);break;case"aaaaa":e=fa(Ir.DayPeriods,Cs.Narrow);break;case"b":case"bb":case"bbb":e=fa(Ir.DayPeriods,Cs.Abbreviated,J1.Standalone,!0);break;case"bbbb":e=fa(Ir.DayPeriods,Cs.Wide,J1.Standalone,!0);break;case"bbbbb":e=fa(Ir.DayPeriods,Cs.Narrow,J1.Standalone,!0);break;case"B":case"BB":case"BBB":e=fa(Ir.DayPeriods,Cs.Abbreviated,J1.Format,!0);break;case"BBBB":e=fa(Ir.DayPeriods,Cs.Wide,J1.Format,!0);break;case"BBBBB":e=fa(Ir.DayPeriods,Cs.Narrow,J1.Format,!0);break;case"h":e=C2(tr.Hours,1,-12);break;case"hh":e=C2(tr.Hours,2,-12);break;case"H":e=C2(tr.Hours,1);break;case"HH":e=C2(tr.Hours,2);break;case"m":e=C2(tr.Minutes,1);break;case"mm":e=C2(tr.Minutes,2);break;case"s":e=C2(tr.Seconds,1);break;case"ss":e=C2(tr.Seconds,2);break;case"S":e=C2(tr.FractionalSeconds,1);break;case"SS":e=C2(tr.FractionalSeconds,2);break;case"SSS":e=C2(tr.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Uw(P2.Short);break;case"ZZZZZ":e=Uw(P2.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Uw(P2.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Uw(P2.Long);break;default:return null}return qD[n]=e,e}(u);l+=f?f(r,t,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Nw(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Sh(n,e){const t=function kge(n){return Ml(n)[ei.LocaleId]}(n);if(OA[t]=OA[t]||{},OA[t][e])return OA[t][e];let i="";switch(e){case"shortDate":i=Hw(n,a1.Short);break;case"mediumDate":i=Hw(n,a1.Medium);break;case"longDate":i=Hw(n,a1.Long);break;case"fullDate":i=Hw(n,a1.Full);break;case"shortTime":i=zw(n,a1.Short);break;case"mediumTime":i=zw(n,a1.Medium);break;case"longTime":i=zw(n,a1.Long);break;case"fullTime":i=zw(n,a1.Full);break;case"short":const r=Sh(n,"shortTime"),s=Sh(n,"shortDate");i=Vw(Ow(n,a1.Short),[r,s]);break;case"medium":const o=Sh(n,"mediumTime"),a=Sh(n,"mediumDate");i=Vw(Ow(n,a1.Medium),[o,a]);break;case"long":const c=Sh(n,"longTime"),l=Sh(n,"longDate");i=Vw(Ow(n,a1.Long),[c,l]);break;case"full":const u=Sh(n,"fullTime"),f=Sh(n,"fullDate");i=Vw(Ow(n,a1.Full),[u,f])}return i&&(OA[t][e]=i),i}function Vw(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function yu(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function C2(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function Yge(n,e){switch(n){case tr.FullYear:return e.getFullYear();case tr.Month:return e.getMonth();case tr.Date:return e.getDate();case tr.Hours:return e.getHours();case tr.Minutes:return e.getMinutes();case tr.Seconds:return e.getSeconds();case tr.FractionalSeconds:return e.getMilliseconds();case tr.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===tr.Hours)0===a&&-12===t&&(a=12);else if(n===tr.FractionalSeconds)return function Xge(n,e){return yu(n,3).substring(0,e)}(a,e);const c=y4(o,qi.MinusSign);return yu(a,e,c,i,r)}}function fa(n,e,t=J1.Format,i=!1){return function(r,s){return function Zge(n,e,t,i,r,s){switch(t){case Ir.Months:return function zge(n,e,t){const i=Ml(n),s=w4([i[ei.MonthsFormat],i[ei.MonthsStandalone]],e);return w4(s,t)}(e,r,i)[n.getMonth()];case Ir.Days:return function Hge(n,e,t){const i=Ml(n),s=w4([i[ei.DaysFormat],i[ei.DaysStandalone]],e);return w4(s,t)}(e,r,i)[n.getDay()];case Ir.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function Uge(n){const e=Ml(n);return QW(e),(e[ei.ExtraData][2]||[]).map(i=>"string"==typeof i?jD(i):[jD(i[0]),jD(i[1])])}(e),u=function Gge(n,e,t){const i=Ml(n);QW(i);const s=w4([i[ei.ExtraData][0],i[ei.ExtraData][1]],e)||[];return w4(s,t)||[]}(e,r,i),f=l.findIndex(p=>{if(Array.isArray(p)){const[g,_]=p,y=o>=g.hours&&a>=g.minutes,w=o<_.hours||o===_.hours&&a<_.minutes;if(g.hours<_.hours){if(y&&w)return!0}else if(y||w)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(-1!==f)return u[f]}return function Pge(n,e,t){const i=Ml(n),s=w4([i[ei.DayPeriodsFormat],i[ei.DayPeriodsStandalone]],e);return w4(s,t)}(e,r,i)[o<12?0:1];case Ir.Eras:return function Oge(n,e){return w4(Ml(n)[ei.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function Uw(n){return function(e,t,i){const r=-1*i,s=y4(t,qi.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case P2.Short:return(r>=0?"+":"")+yu(o,2,s)+yu(Math.abs(r%60),2,s);case P2.ShortGMT:return"GMT"+(r>=0?"+":"")+yu(o,1,s);case P2.Long:return"GMT"+(r>=0?"+":"")+yu(o,2,s)+":"+yu(Math.abs(r%60),2,s);case P2.Extended:return 0===i?"Z":(r>=0?"+":"")+yu(o,2,s)+":"+yu(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function WW(n){return Nw(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function $D(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=WW(t),o=function eme(n){const e=Nw(n,0,1).getDay();return Nw(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return yu(r,n,y4(i,qi.MinusSign))}}function Qw(n,e=!1){return function(t,i){return yu(WW(t).getFullYear(),n,y4(i,qi.MinusSign),e)}}const qD={};function jW(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function $W(n){return n instanceof Date&&!isNaN(n.valueOf())}function YW(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class vme{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let C4=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new vme(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),ej(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{ej(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(G(nc),G(tc),G(b0))},n.\u0275dir=ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ej(n,e){n.context.$implicit=e.item}let x4=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new yme,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tj("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tj("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(G(nc),G(tc))},n.\u0275dir=ht({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class yme{constructor(){this.$implicit=null,this.ngIf=null}}function tj(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${io(e)}'.`)}class tI{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let jw=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),nj=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new tI(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(G(nc),G(tc),G(jw,9))},n.\u0275dir=ht({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),rd=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:s3.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(g8),G(Go))},n.\u0275dir=ht({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),rj=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(G(nc))},n.\u0275dir=ht({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[wr]}),n})();function wu(n,e){return new jt(2100,!1)}class xme{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class bme{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Mme=new bme,Sme=new xme;let sd=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(bA(t))return Mme;if(sG(t))return Sme;throw wu()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(G(wc,16))},n.\u0275pipe=y1({name:"async",type:n,pure:!1,standalone:!0}),n})();const Ime=new Bt("DATE_PIPE_DEFAULT_TIMEZONE");let $w=(()=>{class n{constructor(t,i){this.locale=t,this.defaultTimezone=i}transform(t,i="mediumDate",r,s){if(null==t||""===t||t!=t)return null;try{return Kge(t,i,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw wu()}}}return n.\u0275fac=function(t){return new(t||n)(G(x0,16),G(Ime,24))},n.\u0275pipe=y1({name:"date",type:n,pure:!0,standalone:!0}),n})(),El=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();const oj="browser";function od(n){return n===oj}function p7(n){return"server"===n}let Wme=(()=>{class n{}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:()=>new jme(Xe(Pi),window)}),n})();class jme{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $me(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=aj(this.window.history)||aj(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function aj(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class cj{}class oI extends class hAe extends class Tge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Ege(n){Pw||(Pw=n)}(new oI)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function fAe(){return UA=UA||document.querySelector("base"),UA?UA.getAttribute("href"):null}();return null==t?null:function dAe(n){Kw=Kw||document.createElement("a"),Kw.setAttribute("href",n);const e=Kw.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){UA=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return YW(document.cookie,e)}}let Kw,UA=null;const fj=new Bt("TRANSITION_ID"),gAe=[{provide:PA,useFactory:function pAe(n,e,t){return()=>{t.get(Lw).donePromise.then(()=>{const i=M0(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[fj,Pi,y2],multi:!0}];let AAe=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const Xw=new Bt("EventManagerPlugins");let Yw=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Xw),Xe(sr))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class dj{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=M0().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let pj=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),GA=(()=>{class n extends pj{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(gj),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(gj))}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();function gj(n){M0().remove(n)}const aI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cI=/%COMP%/g;function Zw(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Zw(n,r,t):(r=r.replace(cI,n),t.push(r))}return t}function vj(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Jw=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new lI(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Oo.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new xAe(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Oo.ShadowDom:return new bAe(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Zw(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Xe(Yw),Xe(GA),Xe(HA))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class lI{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(aI[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(yj(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(yj(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=aI[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=aI[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(s3.DashCase|s3.Important)?e.style.setProperty(t,i,r&s3.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&s3.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vj(i)):this.eventManager.addEventListener(e,t,vj(i))}}function yj(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class xAe extends lI{constructor(e,t,i,r){super(e),this.component=i;const s=Zw(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function yAe(n){return"_ngcontent-%COMP%".replace(cI,n)}(r+"-"+i.id),this.hostAttr=function wAe(n){return"_nghost-%COMP%".replace(cI,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class bAe extends lI{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Zw(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let MAe=(()=>{class n extends dj{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const wj=["alt","control","meta","shift"],SAe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EAe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let TAe=(()=>{class n extends dj{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>M0().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),wj.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=SAe[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),wj.forEach(o=>{o!==r&&(0,EAe[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const xj=[{provide:H3,useValue:oj},{provide:lW,useValue:function LAe(){oI.makeCurrent()},multi:!0},{provide:Pi,useFactory:function IAe(){return function UT(n){cA=n}(document),document},deps:[]}],BAe=vW(bge,"browser",xj),bj=new Bt(""),Mj=[{provide:Iw,useClass:class mAe{addToWindow(e){_s.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},_s.getAllAngularTestabilities=()=>e.getAllTestabilities(),_s.getAllAngularRootElements=()=>e.getAllRootElements(),_s.frameworkStabilizers||(_s.frameworkStabilizers=[]),_s.frameworkStabilizers.push(i=>{const r=_s.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?M0().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:pW,useClass:FD,deps:[sr,kD,Iw]},{provide:FD,useClass:FD,deps:[sr,kD,Iw]}],Sj=[{provide:D,useValue:"root"},{provide:_h,useFactory:function DAe(){return new _h},deps:[]},{provide:Xw,useClass:MAe,multi:!0,deps:[Pi,sr,H3]},{provide:Xw,useClass:TAe,multi:!0,deps:[Pi]},{provide:Jw,useClass:Jw,deps:[Yw,GA,HA]},{provide:r3,useExisting:Jw},{provide:pj,useExisting:GA},{provide:GA,useClass:GA,deps:[Pi]},{provide:Yw,useClass:Yw,deps:[Xw,sr]},{provide:cj,useClass:AAe,deps:[]},[]];let Ej=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:HA,useValue:t.appId},{provide:fj,useExisting:HA},gAe]}}}return n.\u0275fac=function(t){return new(t||n)(Xe(bj,12))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[...Sj,...Mj],imports:[El,Mge]}),n})(),Tj=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:function(t){let i=null;return i=t?new t:function FAe(){return new Tj(Xe(Pi))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let A8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(t){let i=null;return i=t?new(t||n):Xe(Ij),i},providedIn:"root"}),n})(),Ij=(()=>{class n extends A8{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Us.NONE:return i;case Us.HTML:return t3(i,"HTML")?yl(i):Cl(this._doc,String(i)).toString();case Us.STYLE:return t3(i,"Style")?yl(i):i;case Us.SCRIPT:if(t3(i,"Script"))return yl(i);throw new Error("unsafe value used in a script context");case Us.URL:return t3(i,"URL")?yl(i):Vp(String(i));case Us.RESOURCE_URL:if(t3(i,"ResourceURL"))return yl(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function uA(n){return new Wy(n)}(t)}bypassSecurityTrustStyle(t){return function XT(n){return new WT(n)}(t)}bypassSecurityTrustScript(t){return function Kn(n){return new jT(n)}(t)}bypassSecurityTrustUrl(t){return function Zf(n){return new $T(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Op(n){return new qT(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:function(t){let i=null;return i=t?new t:function VAe(n){return new Ij(n.get(Pi))}(Xe(y2)),i},providedIn:"root"}),n})();function Br(n){return null!=n&&"false"!=`${n}`}function Cu(n,e=0){return function UAe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function eC(n){return Array.isArray(n)?n:[n]}function x2(n){return null==n?"":"string"==typeof n?n:`${n}px`}function v8(n){return n instanceof gn?n.nativeElement:n}function vi(...n){return us(n,v1(n))}const{isArray:GAe}=Array;function fI(n){return $t(e=>function QAe(n,e){return GAe(e)?n(...e):n(e)}(n,e))}const WAe=["addListener","removeListener"],jAe=["addEventListener","removeEventListener"],$Ae=["on","off"];function ic(n,e,t,i){if(ue(t)&&(i=t,t=void 0),i)return ic(n,e,t).pipe(fI(i));const[r,s]=function XAe(n){return ue(n.addEventListener)&&ue(n.removeEventListener)}(n)?jAe.map(o=>a=>n[o](e,a,t)):function qAe(n){return ue(n.addListener)&&ue(n.removeListener)}(n)?WAe.map(Bj(n,e)):function KAe(n){return ue(n.on)&&ue(n.off)}(n)?$Ae.map(Bj(n,e)):[];if(!r&&xo(n))return Mi(o=>ic(o,e,t))(lo(n));if(!r)throw new TypeError("Invalid event target");return new Ce(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function Bj(n,e){return t=>i=>n[t](e,i)}class YAe extends Fe{constructor(e,t){super()}schedule(e,t=0){return this}}const tC={setInterval(n,e,...t){const{delegate:i}=tC;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=tC;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class dI extends YAe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return tC.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;tC.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,He(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const QA={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=QA;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new Fe(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=QA;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=QA;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},Rj={now:()=>(Rj.delegate||Date).now(),delegate:void 0};class WA{constructor(e,t=WA.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}WA.now=Rj.now;class pI extends WA{constructor(e,t=WA.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}new class JAe extends pI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class ZAe extends dI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=QA.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(QA.cancelAnimationFrame(t),e._scheduled=void 0)}});let gI,t9e=1;const nC={};function Fj(n){return n in nC&&(delete nC[n],!0)}const n9e={setImmediate(n){const e=t9e++;return nC[e]=!0,gI||(gI=Promise.resolve()),gI.then(()=>Fj(e)&&n()),e},clearImmediate(n){Fj(n)}},{setImmediate:i9e,clearImmediate:r9e}=n9e,iC={setImmediate(...n){const{delegate:e}=iC;return(e?.setImmediate||i9e)(...n)},clearImmediate(n){const{delegate:e}=iC;return(e?.clearImmediate||r9e)(n)},delegate:void 0},rC=(new class o9e extends pI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class s9e extends dI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=iC.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(iC.clearImmediate(t),e._scheduled=void 0)}}),new pI(dI)),c9e=rC;function kj(n=0,e,t=c9e){let i=-1;return null!=e&&(C3(e)?t=e:i=e),new Ce(r=>{let s=function u9e(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Pj(n,e=rC){return function l9e(n){return Mn((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(yn(t,l=>{i=!0,r=l,s||lo(n(l)).subscribe(s=yn(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>kj(n,e))}function jo(n,e){return Mn((t,i)=>{let r=0;t.subscribe(yn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function D1(n){return Mn((e,t)=>{lo(n).subscribe(yn(t,()=>t.complete(),st)),!t.closed&&e.subscribe(t)})}let mI;try{mI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{mI=!1}let jA,sC,_8,AI,a3=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?od(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!mI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Xe(H3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cd(n){return function h9e(){if(null==jA&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>jA=!0}))}finally{jA=jA||!1}return jA}()?n:!!n.capture}function zj(){if(null==_8){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return _8=!1,_8;if("scrollBehavior"in document.documentElement.style)_8=!0;else{const n=Element.prototype.scrollTo;_8=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return _8}function $A(){if("object"!=typeof document||!document)return 0;if(null==sC){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),sC=0,0===n.scrollLeft&&(n.scrollLeft=1,sC=0===n.scrollLeft?1:2),n.remove()}return sC}function Oj(n){if(function f9e(){if(null==AI){const n=typeof document<"u"?document.head:null;AI=!(!n||!n.createShadowRoot&&!n.attachShadow)}return AI}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function vI(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function y8(n){return n.composedPath?n.composedPath()[0]:n.target}function _I(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const d9e=new Bt("cdk-dir-doc",{providedIn:"root",factory:function p9e(){return ys(Pi)}}),g9e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ld=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Ar,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function m9e(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?g9e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Xe(d9e,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),w8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),Nj=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Je,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ce(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(Pj(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):vi()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(jo(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=v8(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ic(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Xe(sr),Xe(a3),Xe(Pi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v9e=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Je,this._elementScrolled=new Ce(o=>this.ngZone.runOutsideAngular(()=>ic(this.elementRef.nativeElement,"scroll").pipe(D1(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=$A()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==$A()?t.left=t.right:1==$A()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;zj()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==$A()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==$A()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(Nj),G(sr),G(ld,8))},n.\u0275dir=ht({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),oC=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Je,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Pj(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Xe(a3),Xe(sr),Xe(Pi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),aC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[w8,C8,w8,C8]}),n})();class yI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class qA extends yI{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class wI extends yI{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Vj extends yI{constructor(e){super(),this.element=e instanceof gn?e.nativeElement:e}}class CI{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof qA?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof wI?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Vj?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class y9e extends CI{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||y2.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let xI=(()=>{class n extends CI{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Ar,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(G(Oi),G(nc),G(Pi))},n.\u0275dir=ht({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[zt]}),n})(),ud=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function Tl(n){return n<=0?()=>Ia:Mn((e,t)=>{let i=0;e.subscribe(yn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}const Uj=zj();class w9e{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=x2(-this._previousScrollPosition.left),e.style.top=x2(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Uj&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Uj&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class C9e{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Gj{enable(){}disable(){}attach(){}}function bI(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Qj(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class x9e{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();bI(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let b9e=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Gj,this.close=o=>new C9e(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new w9e(this._viewportRuler,this._document),this.reposition=o=>new x9e(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(Xe(Nj),Xe(oC),Xe(sr),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Wj{constructor(e){if(this.scrollStrategy=new Gj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class cC{constructor(e,t,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class M9e{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let jj=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S9e=(()=>{class n extends jj{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(sr,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E9e=(()=>{class n extends jj{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=y8(s)},this._clickListener=s=>{const o=y8(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const f=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(a3),Xe(sr,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lC=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||_I()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),_I()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(a3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class KA{constructor(e,t,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Je,this._attachments=new Je,this._detachments=new Je,this._locationChanges=Fe.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new Je,this._outsidePointerEvents=new Je,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Tl(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=x2(this._config.width),e.height=x2(this._config.height),e.minWidth=x2(this._config.minWidth),e.minHeight=x2(this._config.minHeight),e.maxWidth=x2(this._config.maxWidth),e.maxHeight=x2(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=eC(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(D1(al(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const $j="cdk-overlay-connected-position-bounding-box",T9e=/([A-Za-z%]+)$/;class L9e{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Je,this._resizeSubscription=Fe.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add($j),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&x8(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($j),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=Kj(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let p=0-a,g=a+s.height-i.height,_=this._subtractOverflows(s.width,0-o,o+s.width-i.width),y=this._subtractOverflows(s.height,p,g),w=_*y;return{visibleArea:w,isCompletelyWithinViewport:s.width*s.height===w,fitsInViewportVertically:y===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=qj(this._overlayRef.getConfig().minHeight),a=qj(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&l}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=Kj(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,f=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,f=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:f},{x:e.x+u,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new M9e(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,f,p;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),_=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)f=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),_=this._lastBoundingBoxSize.width;u=2*g,f=e.x-g,u>_&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-_/2)}return{top:o,left:f,bottom:a,right:p,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=x2(i.height),r.top=x2(i.top),r.bottom=x2(i.bottom),r.width=x2(i.width),r.left=x2(i.left),r.right=x2(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=x2(s)),o&&(r.maxWidth=x2(o))}this._lastBoundingBoxSize=i,x8(this._boundingBox.style,r)}_resetBoundingBoxStyles(){x8(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){x8(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();x8(i,this._getExactOverlayY(t,e,u)),x8(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=x2(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=x2(o.maxWidth):s&&(i.maxWidth="")),x8(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=x2(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=x2(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Qj(e,i),isOriginOutsideView:bI(e,i),isOverlayClipped:Qj(t,i),isOverlayOutsideView:bI(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&eC(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof gn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function x8(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function qj(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(T9e);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Kj(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Xj="cdk-global-overlay-wrapper";class D9e{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Xj),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,f=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let g="",_="",y="";c?y="flex-start":"center"===u?(y="center",p?_=f:g=f):p?"left"===u||"end"===u?(y="flex-end",g=f):("right"===u||"start"===u)&&(y="flex-start",_=f):"left"===u||"start"===u?(y="flex-start",g=f):("right"===u||"end"===u)&&(y="flex-end",_=f),e.position=this._cssPosition,e.marginLeft=c?"0":g,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":_,t.justifyContent=y,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Xj),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let I9e=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new D9e}flexibleConnectedTo(t){return new L9e(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Xe(oC),Xe(Pi),Xe(a3),Xe(lC))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),B9e=0,z3=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f,p,g){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=f,this._outsideClickDispatcher=p,this._animationsModuleType=g}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new Wj(t);return o.direction=o.direction||this._directionality.value,new KA(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+B9e++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(d7)),new y9e(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Xe(b9e),Xe(lC),Xe(Oi),Xe(I9e),Xe(S9e),Xe(y2),Xe(sr),Xe(Pi),Xe(ld),Xe(zA),Xe(E9e),Xe(_4,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const R9e=new Bt("cdk-connected-overlay-scroll-strategy");let F9e=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(G(gn))},n.\u0275dir=ht({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})();const P9e={provide:R9e,deps:[z3],useFactory:function k9e(n){return()=>n.scrollStrategies.reposition()}};let hd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[z3,P9e],imports:[w8,ud,aC,aC]}),n})();class go extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const uC=Se(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:H9e}=Array,{getPrototypeOf:z9e,prototype:O9e,keys:N9e}=Object;function Yj(n){if(1===n.length){const e=n[0];if(H9e(e))return{args:e,keys:null};if(function V9e(n){return n&&"object"==typeof n&&z9e(n)===O9e}(e)){const t=N9e(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function Zj(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function MI(...n){const e=v1(n),t=Yu(n),{args:i,keys:r}=Yj(n);if(0===i.length)return us([],e);const s=new Ce(function U9e(n,e,t=At){return i=>{Jj(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)Jj(e,()=>{const l=us(n[c],e);let u=!1;l.subscribe(yn(i,f=>{s[c]=f,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>Zj(r,o):At));return t?s.pipe(fI(t)):s}function Jj(n,e,t){n?Da(t,n,e):e()}function hC(...n){return function G9e(){return Za(1)}()(us(n,v1(n)))}function fC(n){return new Ce(e=>{lo(n()).subscribe(e)})}function m7(n,e){const t=ue(n)?n:()=>n,i=r=>r.error(t());return new Ce(e?r=>e.schedule(i,0,r):i)}function SI(){return Mn((n,e)=>{let t=null;n._refCount++;const i=yn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class EI extends Ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,vt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;const t=this.getSubject();e.add(this.source.subscribe(yn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return SI()(this)}}function S0(n,e){return Mn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(yn(i,c=>{r?.unsubscribe();let l=0;const u=s++;lo(n(c,u)).subscribe(r=yn(i,f=>i.next(e?e(c,f,u,l++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function b8(...n){const e=v1(n);return Mn((t,i)=>{(e?hC(n,t,e):hC(n,t)).subscribe(i)})}function dC(n){return Mn((e,t)=>{let i=!1;e.subscribe(yn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function e$(n=Q9e){return Mn((e,t)=>{let i=!1;e.subscribe(yn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Q9e(){return new uC}function Eh(n,e){const t=arguments.length>=2;return i=>i.pipe(n?jo((r,s)=>n(r,s,i)):At,Tl(1),t?dC(e):e$(()=>new uC))}function fd(n,e){return ue(e)?Mi(n,e,1):Mi(n,1)}function Ca(n,e,t){const i=ue(n)||e||t?{next:n,error:e,complete:t}:n;return i?Mn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(yn(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):At}function E0(n){return Mn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(yn(t,void 0,void 0,o=>{s=lo(n(o,E0(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function W9e(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(yn(o,u=>{const f=l++;c=a?n(c,u,f):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function t$(n,e){return Mn(W9e(n,e,arguments.length>=2,!0))}function TI(n){return n<=0?()=>Ia:Mn((e,t)=>{let i=[];e.subscribe(yn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function n$(n,e){const t=arguments.length>=2;return i=>i.pipe(n?jo((r,s)=>n(r,s,i)):At,TI(1),t?dC(e):e$(()=>new uC))}function pC(n){return Mn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Hr="primary",XA=Symbol("RouteTitle");class q9e{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function A7(n){return new q9e(n)}function K9e(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function T0(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!i$(n[r],e[r]))return!1;return!0}function i$(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function r$(n){return Array.prototype.concat.apply([],n)}function s$(n){return n.length>0?n[n.length-1]:null}function Cc(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function dd(n){return sD(n)?n:bA(n)?us(Promise.resolve(n)):vi(n)}const Z9e={exact:function c$(n,e,t){if(!S8(n.segments,e.segments)||!gC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!c$(n.children[i],e.children[i],t))return!1;return!0},subset:l$},o$={exact:function J9e(n,e){return T0(n,e)},subset:function eve(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>i$(n[t],e[t]))},ignored:()=>!0};function a$(n,e,t){return Z9e[t.paths](n.root,e.root,t.matrixParams)&&o$[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function l$(n,e,t){return u$(n,e,e.segments,t)}function u$(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!S8(r,t)||e.hasChildren()||!gC(r,t,i))}if(n.segments.length===t.length){if(!S8(n.segments,t)||!gC(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!l$(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(S8(n.segments,r)&&gC(n.segments,r,i)&&n.children[Hr])&&u$(n.children[Hr],e,s,i)}}function gC(n,e,t){return e.every((i,r)=>o$[t](n[r].parameters,i.parameters))}class M8{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=A7(this.queryParams)),this._queryParamMap}toString(){return ive.serialize(this)}}class fs{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Cc(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mC(this)}}class YA{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=A7(this.parameters)),this._parameterMap}toString(){return p$(this)}}function S8(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let h$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return new DI},providedIn:"root"}),n})();class DI{parse(e){const t=new fve(e);return new M8(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ZA(e.root,!0)}`,i=function ove(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${AC(t)}=${AC(r)}`).join("&"):`${AC(t)}=${AC(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function rve(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ive=new DI;function mC(n){return n.segments.map(e=>p$(e)).join("/")}function ZA(n,e){if(!n.hasChildren())return mC(n);if(e){const t=n.children[Hr]?ZA(n.children[Hr],!1):"",i=[];return Cc(n.children,(r,s)=>{s!==Hr&&i.push(`${s}:${ZA(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function nve(n,e){let t=[];return Cc(n.children,(i,r)=>{r===Hr&&(t=t.concat(e(i,r)))}),Cc(n.children,(i,r)=>{r!==Hr&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Hr?[ZA(n.children[Hr],!1)]:[`${r}:${ZA(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Hr]?`${mC(n)}/${t[0]}`:`${mC(n)}/(${t.join("//")})`}}function f$(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function AC(n){return f$(n).replace(/%3B/gi,";")}function II(n){return f$(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vC(n){return decodeURIComponent(n)}function d$(n){return vC(n.replace(/\+/g,"%20"))}function p$(n){return`${II(n.path)}${function sve(n){return Object.keys(n).map(e=>`;${II(e)}=${II(n[e])}`).join("")}(n.parameters)}`}const ave=/^[^\/()?;=#]+/;function _C(n){const e=n.match(ave);return e?e[0]:""}const cve=/^[^=?&#]+/,uve=/^[^&#]+/;class fve{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fs([],{}):new fs([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Hr]=new fs(e,t)),i}parseSegment(){const e=_C(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new jt(4009,!1);return this.capture(e),new YA(vC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=_C(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=_C(this.remaining);r&&(i=r,this.capture(i))}e[vC(t)]=vC(i)}parseQueryParam(e){const t=function lve(n){const e=n.match(cve);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function hve(n){const e=n.match(uve);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=d$(t),s=d$(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=_C(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new jt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Hr);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Hr]:new fs([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new jt(4011,!1)}}function BI(n){return n.segments.length>0?new fs([],{[Hr]:n}):n}function yC(n){const e={};for(const i of Object.keys(n.children)){const s=yC(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function dve(n){if(1===n.numberOfChildren&&n.children[Hr]){const e=n.children[Hr];return new fs(n.segments.concat(e.segments),e.children)}return n}(new fs(n.segments,e))}function E8(n){return n instanceof M8}function mve(n,e,t,i,r){if(0===t.length)return v7(e.root,e.root,e.root,i,r);const s=function A$(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new m$(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Cc(s.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new m$(t,e,i)}(t);return s.toRoot()?v7(e.root,e.root,new fs([],{}),i,r):function o(c){const l=function vve(n,e,t,i){if(n.isAbsolute)return new _7(e.root,!0,0);if(-1===i)return new _7(t,t===e.root,0);return function v$(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new jt(4005,!1);r=i.segments.length}return new _7(i,!1,r-s)}(t,i+(JA(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),u=l.processChildren?t9(l.segmentGroup,l.index,s.commands):FI(l.segmentGroup,l.index,s.commands);return v7(e.root,l.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function JA(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function e9(n){return"object"==typeof n&&null!=n&&n.outlets}function v7(n,e,t,i,r){let o,s={};i&&Cc(i,(c,l)=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:g$(n,e,t);const a=BI(yC(o));return new M8(a,s,r)}function g$(n,e,t){const i={};return Cc(n.children,(r,s)=>{i[s]=r===e?t:g$(r,e,t)}),new fs(n.segments,i)}class m${constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&JA(i[0]))throw new jt(4003,!1);const r=i.find(e9);if(r&&r!==s$(i))throw new jt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _7{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function FI(n,e,t){if(n||(n=new fs([],{})),0===n.segments.length&&n.hasChildren())return t9(n,e,t);const i=function yve(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(e9(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!y$(c,l,o))return s;i+=2}else{if(!y$(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new fs(n.segments.slice(0,i.pathIndex),{});return s.children[Hr]=new fs(n.segments.slice(i.pathIndex),n.children),t9(s,0,r)}return i.match&&0===r.length?new fs(n.segments,{}):i.match&&!n.hasChildren()?kI(n,e,t):i.match?t9(n,0,r):kI(n,e,t)}function t9(n,e,t){if(0===t.length)return new fs(n.segments,{});{const i=function _ve(n){return e9(n[0])?n[0].outlets:{[Hr]:n}}(t),r={};return Cc(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=FI(n.children[o],e,s))}),Cc(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new fs(n.segments,r)}}function kI(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(e9(s)){const c=wve(s.outlets);return new fs(i,c)}if(0===r&&JA(t[0])){i.push(new YA(n.segments[e].path,_$(t[0]))),r++;continue}const o=e9(s)?s.outlets[Hr]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&JA(a)?(i.push(new YA(o,_$(a))),r+=2):(i.push(new YA(o,{})),r++)}return new fs(i,{})}function wve(n){const e={};return Cc(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=kI(new fs([],{}),0,t))}),e}function _$(n){const e={};return Cc(n,(t,i)=>e[i]=`${t}`),e}function y$(n,e,t){return n==t.path&&T0(e,t.parameters)}class Th{constructor(e,t){this.id=e,this.url=t}}class PI extends Th{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xu extends Th{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wC extends Th{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class w$ extends Th{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Cve extends Th{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xve extends Th{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bve extends Th{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mve extends Th{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sve extends Th{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eve{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tve{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lve{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dve{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ive{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bve{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C${constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class x${constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=HI(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=HI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=zI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return zI(e,this._root).map(t=>t.value)}}function HI(n,e){if(n===e.value)return e;for(const t of e.children){const i=HI(n,t);if(i)return i}return null}function zI(n,e){if(n===e.value)return[e];for(const t of e.children){const i=zI(n,t);if(i.length)return i.unshift(e),i}return[]}class Lh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function y7(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class b$ extends x${constructor(e,t){super(e),this.snapshot=t,OI(this,e)}toString(){return this.snapshot.toString()}}function M$(n,e){const t=function Fve(n,e){const o=new CC([],{},{},"",{},Hr,e,null,n.root,-1,{});return new E$("",new Lh(o,[]))}(n,e),i=new go([new YA("",{})]),r=new go({}),s=new go({}),o=new go({}),a=new go(""),c=new pd(i,r,o,a,s,Hr,e,t.root);return c.snapshot=t.root,new b$(new Lh(c,[]),t)}class pd{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe($t(l=>l[XA]))??vi(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe($t(e=>A7(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($t(e=>A7(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function S$(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function kve(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class CC{constructor(e,t,i,r,s,o,a,c,l,u,f,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[XA],this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._correctedLastPathIndex=p??u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=A7(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=A7(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class E$ extends x${constructor(e,t){super(t),this.url=e,OI(this,t)}toString(){return T$(this._root)}}function OI(n,e){e.value._routerState=n,e.children.forEach(t=>OI(n,t))}function T$(n){const e=n.children.length>0?` { ${n.children.map(T$).join(", ")} } `:"";return`${n.value}${e}`}function NI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,T0(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),T0(e.params,t.params)||n.params.next(t.params),function X9e(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!T0(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),T0(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function VI(n,e){const t=T0(n.params,e.params)&&function tve(n,e){return S8(n,e)&&n.every((t,i)=>T0(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||VI(n.parent,e.parent))}function n9(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Hve(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return n9(n,i,r);return n9(n,i)})}(n,e,t);return new Lh(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>n9(n,a)),o}}const i=function zve(n){return new pd(new go(n.url),new go(n.params),new go(n.queryParams),new go(n.fragment),new go(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>n9(n,s));return new Lh(i,r)}}const UI="ngNavigationCancelingError";function L$(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=E8(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=D$(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function D$(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[UI]=!0,i.cancellationCode=e,t&&(i.url=t),i}function I$(n){return B$(n)&&E8(n.url)}function B$(n){return n&&n[UI]}class Ove{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new i9,this.attachRef=null}}let i9=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Ove,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xC=!1;let bC=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ar,this.deactivateEvents=new Ar,this.attachEvents=new Ar,this.detachEvents=new Ar,this.name=r||Hr,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new jt(4012,xC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new jt(4012,xC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new jt(4012,xC);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new jt(4013,xC);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Nve(t,a,r.injector);if(i&&function Vve(n){return!!n.resolveComponentFactory}(i)){const l=i.resolveComponentFactory(o);this.activated=r.createComponent(l,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(G(i9),G(nc),Jl("name"),G(wc),G(ye))},n.\u0275dir=ht({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Nve{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===pd?this.route:e===i9?this.childContexts:this.parent.get(e,t)}}let GI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=On({type:n,selectors:[["ng-component"]],standalone:!0,features:[xQ],decls:1,vars:0,template:function(t,i){1&t&&rt(0,"router-outlet")},dependencies:[bC],encapsulation:2}),n})();function R$(n,e){return n.providers&&!n._injector&&(n._injector=Mw(n.providers,e,`Route: ${n.path}`)),n._injector??e}function WI(n){const e=n.children&&n.children.map(WI),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Hr&&(t.component=GI),t}function b4(n){return n.outlet||Hr}function F$(n,e){const t=n.filter(i=>b4(i)===e);return t.push(...n.filter(i=>b4(i)!==e)),t}function r9(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jve{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),NI(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=y7(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Cc(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=y7(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=y7(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=y7(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Bve(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Dve(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(NI(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),NI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=r9(r.snapshot),c=a?.get(Oi)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class k${constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class MC{constructor(e,t){this.component=e,this.route=t}}function $ve(n,e,t){const i=n._root;return s9(i,e?e._root:null,t,[i.value])}function w7(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Ju(n){return null!==e1(n)}(n)?e.get(n):n:i}function s9(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=y7(e);return n.children.forEach(o=>{(function Kve(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function Xve(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!S8(n.url,e.url);case"pathParamsOrQueryParamsChange":return!S8(n.url,e.url)||!T0(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!VI(n,e)||!T0(n.queryParams,e.queryParams);default:return!VI(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new k$(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s9(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new MC(a.outlet.component,o))}else o&&o9(e,a,r),r.canActivateChecks.push(new k$(i)),s9(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Cc(s,(o,a)=>o9(o,t.getContext(a),r)),r}function o9(n,e,t){const i=y7(n),r=n.value;Cc(i,(s,o)=>{o9(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new MC(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function a9(n){return"function"==typeof n}function jI(n){return n instanceof uC||"EmptyError"===n?.name}const SC=Symbol("INITIAL_VALUE");function C7(){return S0(n=>MI(n.map(e=>e.pipe(Tl(1),b8(SC)))).pipe($t(e=>{for(const t of e)if(!0!==t){if(t===SC)return SC;if(!1===t||t instanceof M8)return t}return!0}),jo(e=>e!==SC),Tl(1)))}function P$(n){return function xe(...n){return qe(n)}(Ca(e=>{if(E8(e))throw L$(0,e)}),$t(e=>!0===e))}const $I={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function H$(n,e,t,i,r){const s=qI(n,e,t);return s.matched?function d_e(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?vi(r.map(o=>{const a=w7(o,n);return dd(function n_e(n){return n&&a9(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(C7(),P$()):vi(!0)}(i=R$(e,i),e,t).pipe($t(o=>!0===o?s:{...$I})):vi(s)}function qI(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...$I}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||K9e)(t,n,e);if(!r)return{...$I};const s={};Cc(r.posParams,(a,c)=>{s[c]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function EC(n,e,t,i,r="corrected"){if(t.length>0&&function m_e(n,e,t){return t.some(i=>TC(n,e,i)&&b4(i)!==Hr)}(n,t,i)){const o=new fs(e,function g_e(n,e,t,i){const r={};r[Hr]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&b4(s)!==Hr){const o=new fs([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[b4(s)]=o}return r}(n,e,i,new fs(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function A_e(n,e,t){return t.some(i=>TC(n,e,i))}(n,t,i)){const o=new fs(n.segments,function p_e(n,e,t,i,r,s){const o={};for(const a of i)if(TC(n,t,a)&&!r[b4(a)]){const c=new fs([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[b4(a)]=c}return{...r,...o}}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new fs(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function TC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function z$(n,e,t,i){return!!(b4(n)===i||i!==Hr&&TC(e,t,n))&&("**"===n.path||qI(e,n,t).matched)}function O$(n,e,t){return 0===e.length&&!n.children[t]}const LC=!1;class DC{constructor(e){this.segmentGroup=e||null}}class N${constructor(e){this.urlTree=e}}function c9(n){return m7(new DC(n))}function V$(n){return m7(new N$(n))}class w_e{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=EC(this.urlTree.root,[],[],this.config).segmentGroup,t=new fs(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Hr).pipe($t(s=>this.createUrlTree(yC(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(E0(s=>{if(s instanceof N$)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof DC?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Hr).pipe($t(r=>this.createUrlTree(yC(r),e.queryParams,e.fragment))).pipe(E0(r=>{throw r instanceof DC?this.noMatchError(r):r}))}noMatchError(e){return new jt(4002,LC)}createUrlTree(e,t,i){const r=BI(e);return new M8(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe($t(s=>new fs([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return us(r).pipe(fd(s=>{const o=i.children[s],a=F$(t,s);return this.expandSegmentGroup(e,a,o,s).pipe($t(c=>({segment:c,outlet:s})))}),t$((s,o)=>(s[o.outlet]=o.segment,s),{}),n$())}expandSegment(e,t,i,r,s,o){return us(i).pipe(fd(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(E0(l=>{if(l instanceof DC)return vi(null);throw l}))),Eh(a=>!!a),E0((a,c)=>{if(jI(a))return O$(t,r,s)?vi(new fs([],{})):c9(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return z$(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):c9(t):c9(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?V$(s):this.lineralizeSegments(i,s).pipe(Mi(o=>{const a=new fs(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=qI(t,r,s);if(!a)return c9(t);const f=this.applyRedirectCommands(c,r.redirectTo,u);return r.redirectTo.startsWith("/")?V$(f):this.lineralizeSegments(r,f).pipe(Mi(p=>this.expandSegment(e,t,i,p.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=R$(i,e),i.loadChildren?(i._loadedRoutes?vi({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe($t(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new fs(r,{})))):vi(new fs(r,{}))):H$(t,i,r,e).pipe(S0(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Mi(u=>{const f=u.injector??e,p=u.routes,{segmentGroup:g,slicedSegments:_}=EC(t,a,c,p),y=new fs(g.segments,g.children);if(0===_.length&&y.hasChildren())return this.expandChildren(f,p,y).pipe($t(M=>new fs(a,M)));if(0===p.length&&0===_.length)return vi(new fs(a,{}));const w=b4(i)===s;return this.expandSegment(f,y,p,_,w?Hr:s,!0).pipe($t(b=>new fs(a.concat(b.segments),b.children)))})):c9(t)))}getChildConfig(e,t,i){return t.children?vi({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?vi({routes:t._loadedRoutes,injector:t._loadedInjector}):function f_e(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?vi(!0):vi(r.map(o=>{const a=w7(o,n);return dd(function Zve(n){return n&&a9(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(C7(),P$())}(e,t,i).pipe(Mi(r=>r?this.configLoader.loadChildren(e,t).pipe(Ca(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function __e(n){return m7(D$(LC,3))}())):vi({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return vi(i);if(r.numberOfChildren>1||!r.children[Hr])return m7(new jt(4e3,LC));r=r.children[Hr]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new M8(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Cc(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Cc(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new fs(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new jt(4001,LC);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class x_e{}class S_e{constructor(e,t,i,r,s,o,a,c){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=c}recognize(){const e=EC(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Hr).pipe($t(t=>{if(null===t)return null;const i=new CC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Hr,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Lh(i,t),s=new E$(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=S$(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return us(Object.keys(i.children)).pipe(fd(r=>{const s=i.children[r],o=F$(t,r);return this.processSegmentGroup(e,o,s,r)}),t$((r,s)=>r&&s?(r.push(...s),r):null),function j9e(n,e=!1){return Mn((t,i)=>{let r=0;t.subscribe(yn(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),dC(null),n$(),$t(r=>{if(null===r)return null;const s=U$(r);return function E_e(n){n.sort((e,t)=>e.value.outlet===Hr?-1:t.value.outlet===Hr?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return us(t).pipe(fd(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),Eh(o=>!!o),E0(o=>{if(jI(o))return O$(i,r,s)?vi([]):vi(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!z$(t,i,r,s))return vi(null);let o;if("**"===t.path){const a=r.length>0?s$(r).parameters:{},c=Q$(i)+r.length;o=vi({snapshot:new CC(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j$(t),b4(t),t.component??t._loadedComponent??null,t,G$(i),c,$$(t),c),consumedSegments:[],remainingSegments:[]})}else o=H$(i,t,r,e).pipe($t(({matched:a,consumedSegments:c,remainingSegments:l,parameters:u})=>{if(!a)return null;const f=Q$(i)+c.length;return{snapshot:new CC(c,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j$(t),b4(t),t.component??t._loadedComponent??null,t,G$(i),f,$$(t),f),consumedSegments:c,remainingSegments:l}}));return o.pipe(S0(a=>{if(null===a)return vi(null);const{snapshot:c,consumedSegments:l,remainingSegments:u}=a;e=t._injector??e;const f=t._loadedInjector??e,p=function T_e(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:g,slicedSegments:_}=EC(i,l,u,p.filter(w=>void 0===w.redirectTo),this.relativeLinkResolution);if(0===_.length&&g.hasChildren())return this.processChildren(f,p,g).pipe($t(w=>null===w?null:[new Lh(c,w)]));if(0===p.length&&0===_.length)return vi([new Lh(c,[])]);const y=b4(t)===s;return this.processSegment(f,p,g,_,y?Hr:s).pipe($t(w=>null===w?null:[new Lh(c,w)]))}))}}function L_e(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function U$(n){const e=[],t=new Set;for(const i of n){if(!L_e(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=U$(i.children);e.push(new Lh(i.value,r))}return e.filter(i=>!t.has(i))}function G$(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Q$(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function j$(n){return n.data||{}}function $$(n){return n.resolve||{}}function q$(n){return"string"==typeof n.title||null===n.title}function KI(n){return S0(e=>{const t=n(e);return t?us(t).pipe($t(()=>e)):vi(e)})}let K$=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Hr);return i}getResolvedTitleForRoute(t){return t.data[XA]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return ys(X$)},providedIn:"root"}),n})(),X$=(()=>{class n extends K${constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Tj))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class H_e{}class O_e extends class z_e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const BC=new Bt("",{providedIn:"root",factory:()=>({})}),XI=new Bt("ROUTES");let YI=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return vi(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=dd(t.loadComponent()).pipe(Ca(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),pC(()=>{this.componentLoaders.delete(t)})),r=new EI(i,()=>new Je).pipe(SI());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return vi({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe($t(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,l,u=!1;Array.isArray(a)?l=a:(c=a.create(t).injector,l=r$(c.get(XI,[],Hn.Self|Hn.Optional)));return{routes:l.map(WI),injector:c}}),pC(()=>{this.childrenLoaders.delete(i)})),o=new EI(s,()=>new Je).pipe(SI());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return dd(t()).pipe(Mi(i=>i instanceof wQ||Array.isArray(i)?vi(i):us(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(Xe(y2),Xe(DD))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class V_e{}class U_e{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function G_e(n){throw n}function Q_e(n,e,t){return e.parse("/")}const W_e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},j_e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Z$(){const n=ys(h$),e=ys(i9),t=ys(zA),i=ys(y2),r=ys(DD),s=ys(XI,{optional:!0})??[],o=ys(BC,{optional:!0})??{},a=ys(X$),c=ys(K$,{optional:!0}),l=ys(V_e,{optional:!0}),u=ys(H_e,{optional:!0}),f=new c1(null,n,e,t,i,r,r$(s));return l&&(f.urlHandlingStrategy=l),u&&(f.routeReuseStrategy=u),f.titleStrategy=c??a,function $_e(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,f),f}let c1=(()=>{class n{constructor(t,i,r,s,o,a,c){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Je,this.errorHandler=G_e,this.malformedUriErrorHandler=Q_e,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>vi(void 0),this.urlHandlingStrategy=new U_e,this.routeReuseStrategy=new O_e,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(YI),this.configLoader.onLoadEndListener=p=>this.triggerEvent(new Tve(p)),this.configLoader.onLoadStartListener=p=>this.triggerEvent(new Eve(p)),this.ngModule=o.get(d8),this.console=o.get(Q7e);const f=o.get(sr);this.isNgZoneEnabled=f instanceof sr&&sr.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function Y9e(){return new M8(new fs([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=M$(this.currentUrlTree,this.rootComponentType),this.transitions=new go({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(jo(r=>0!==r.id),$t(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),S0(r=>{let s=!1,o=!1;return vi(r).pipe(Ca(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),S0(a=>{const c=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return J$(a.source)&&(this.browserUrlTree=a.extractedUrl),vi(a).pipe(S0(f=>{const p=this.transitions.getValue();return i.next(new PI(f.id,this.serializeUrl(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions.getValue()?Ia:Promise.resolve(f)}),function C_e(n,e,t,i){return S0(r=>function y_e(n,e,t,i,r){return new w_e(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe($t(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ca(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},r.urlAfterRedirects=f.urlAfterRedirects}),function I_e(n,e,t,i,r,s){return Mi(o=>function M_e(n,e,t,i,r,s,o="emptyOnly",a="legacy"){return new S_e(n,e,t,i,r,o,a,s).recognize().pipe(S0(c=>null===c?function b_e(n){return new Ce(e=>e.error(n))}(new x_e):vi(c)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r,s).pipe($t(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Ca(f=>{if(r.targetSnapshot=f.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!f.extras.skipLocationChange){const g=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);this.setBrowserUrl(g,f)}this.browserUrlTree=f.urlAfterRedirects}const p=new Cve(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);i.next(p)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:p,extractedUrl:g,source:_,restoredState:y,extras:w}=a,C=new PI(p,this.serializeUrl(g),_,y);i.next(C);const b=M$(g,this.rootComponentType).snapshot;return vi(r={...a,targetSnapshot:b,urlAfterRedirects:g,extras:{...w,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Ia}),Ca(a=>{const c=new xve(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),$t(a=>r={...a,guards:$ve(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function r_e(n,e){return Mi(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?vi({...t,guardsResult:!0}):function s_e(n,e,t,i){return us(n).pipe(Mi(r=>function h_e(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?vi(s.map(a=>{const c=r9(e)??r,l=w7(a,c);return dd(function t_e(n){return n&&a9(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(Eh())})).pipe(C7()):vi(!0)}(r.component,r.route,t,e,i)),Eh(r=>!0!==r,!0))}(o,i,r,n).pipe(Mi(a=>a&&function Yve(n){return"boolean"==typeof n}(a)?function o_e(n,e,t,i){return us(e).pipe(fd(r=>hC(function c_e(n,e){return null!==n&&e&&e(new Lve(n)),vi(!0)}(r.route.parent,i),function a_e(n,e){return null!==n&&e&&e(new Ive(n)),vi(!0)}(r.route,i),function u_e(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function qve(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>fC(()=>vi(o.guards.map(c=>{const l=r9(o.node)??t,u=w7(c,l);return dd(function e_e(n){return n&&a9(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(Eh())})).pipe(C7())));return vi(s).pipe(C7())}(n,r.path,t),function l_e(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return vi(!0);const r=i.map(s=>fC(()=>{const o=r9(e)??t,a=w7(s,o);return dd(function Jve(n){return n&&a9(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Eh())}));return vi(r).pipe(C7())}(n,r.route,t))),Eh(r=>!0!==r,!0))}(i,s,n,e):vi(a)),$t(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Ca(a=>{if(r.guardsResult=a.guardsResult,E8(a.guardsResult))throw L$(0,a.guardsResult);const c=new bve(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),jo(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),KI(a=>{if(a.guards.canActivateChecks.length)return vi(a).pipe(Ca(c=>{const l=new Mve(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),S0(c=>{let l=!1;return vi(c).pipe(function B_e(n,e){return Mi(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return vi(t);let s=0;return us(r).pipe(fd(o=>function R_e(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!q$(r)&&(s[XA]=r.title),function F_e(n,e,t,i){const r=function k_e(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return vi({});const s={};return us(r).pipe(Mi(o=>function P_e(n,e,t,i){const r=r9(e)??i,s=w7(n,r);return dd(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(Eh(),Ca(a=>{s[o]=a}))),TI(1),function $9e(n){return $t(()=>n)}(s),E0(o=>jI(o)?Ia:m7(o)))}(s,n,e,i).pipe($t(o=>(n._resolvedData=o,n.data=S$(n,t).resolve,r&&q$(r)&&(n.data[XA]=r.title),null)))}(o.route,i,n,e)),Ca(()=>s++),TI(1),Mi(o=>s===r.length?vi(t):Ia))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ca({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),Ca(c=>{const l=new Sve(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}))}),KI(a=>{const c=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ca(f=>{l.component=f}),$t(()=>{})));for(const f of l.children)u.push(...c(f));return u};return MI(c(a.targetSnapshot.root)).pipe(dC(),Tl(1))}),KI(()=>this.afterPreactivation()),$t(a=>{const c=function Pve(n,e,t){const i=n9(n,e._root,t?t._root:void 0);return new b$(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:c}}),Ca(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>$t(i=>(new jve(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Ca({next(){s=!0},complete(){s=!0}}),pC(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),E0(a=>{if(o=!0,B$(a)){I$(a)||(this.navigated=!0,this.restoreHistory(r,!0));const c=new wC(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(c),I$(a)){const l=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||J$(r.source)};this.scheduleNavigation(l,"imperative",null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const c=new w$(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(c);try{r.resolve(this.errorHandler(a))}catch(l){r.reject(l)}}return Ia}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(WI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=r||this.routerState.root,u=c?this.currentUrlTree.fragment:o;let f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}return null!==f&&(f=this.removeEmptyProps(f)),mve(l,this.currentUrlTree,t,f,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=E8(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function q_e(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new jt(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...W_e}:!1===i?{...j_e}:i,E8(t))return a$(this.currentUrlTree,t,r);const s=this.parseUrl(t);return a$(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,g)=>{a=p,c=g});const u=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):f=0,this.setTransition({id:u,targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,r){const s=new wC(t.id,this.serializeUrl(t.extractedUrl),i,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){a8()},n.\u0275prov=Lt({token:n,factory:function(){return Z$()},providedIn:"root"}),n})();function J$(n){return"imperative"!==n}let l9=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Je,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=bh(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=bh(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=bh(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(G(c1),G(pd),Jl("tabindex"),G(Go),G(gn))},n.\u0275dir=ht({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&mn("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[wr]}),n})(),ZI=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Je,this.subscription=t.events.subscribe(s=>{s instanceof xu&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=bh(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=bh(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=bh(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,o){return!!(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(G(c1),G(pd),G(m8))},n.\u0275dir=ht({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&mn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&Qs("target",i.target)("href",i.href,xl)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[wr]}),n})(),eq=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ar,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof xu&&this.update()})}ngAfterContentInit(){vi(this.links.changes,this.linksWithHrefs.changes,vi(null)).pipe(Za()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=us(t).pipe(Za()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function K_e(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(G(c1),G(gn),G(Go),G(wc),G(l9,8),G(ZI,8))},n.\u0275dir=ht({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&(Z1(r,l9,5),Z1(r,ZI,5)),2&t){let s;ir(s=rr())&&(i.links=s),ir(s=rr())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[wr]}),n})();class tq{}let X_e=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(jo(t=>t instanceof xu),fd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Mw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return us(r).pipe(Za())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):vi(null);const s=r.pipe(Mi(o=>null===o?vi(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?us([s,this.loader.loadComponent(i)]).pipe(Za()):s})}}return n.\u0275fac=function(t){return new(t||n)(Xe(c1),Xe(DD),Xe(ye),Xe(tq),Xe(YI))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JI=new Bt("");let nq=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof PI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof C$&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new C$(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){a8()},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();function x7(n,e){return{\u0275kind:n,\u0275providers:e}}function eB(n){return[{provide:XI,multi:!0,useValue:n}]}function rq(){const n=ys(y2);return e=>{const t=n.get(d7);if(e!==t.components[0])return;const i=n.get(c1),r=n.get(sq);1===n.get(tB)&&i.initialNavigation(),n.get(oq,null,Hn.Optional)?.setUpPreloading(),n.get(JI,null,Hn.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const sq=new Bt("",{factory:()=>new Je}),tB=new Bt("",{providedIn:"root",factory:()=>1});const oq=new Bt("");function eye(n){return x7(0,[{provide:oq,useExisting:X_e},{provide:tq,useExisting:n}])}const aq=new Bt("ROUTER_FORROOT_GUARD"),tye=[zA,{provide:h$,useClass:DI},{provide:c1,useFactory:Z$},i9,{provide:pd,useFactory:function iq(n){return n.routerState.root},deps:[c1]},YI];function nye(){return new mW("Router",c1)}let iye=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[tye,[],eB(t),{provide:aq,useFactory:aye,deps:[[c1,new e3,new p0]]},{provide:BC,useValue:i||{}},i?.useHash?{provide:m8,useClass:Bge}:{provide:m8,useClass:VW},{provide:JI,useFactory:()=>{const n=ys(c1),e=ys(Wme),t=ys(BC);return t.scrollOffset&&e.setOffset(t.scrollOffset),new nq(n,e,t)}},i?.preloadingStrategy?eye(i.preloadingStrategy).\u0275providers:[],{provide:mW,multi:!0,useFactory:nye},i?.initialNavigation?cye(i):[],[{provide:cq,useFactory:rq},{provide:Dw,multi:!0,useExisting:cq}]]}}static forChild(t){return{ngModule:n,providers:[eB(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Xe(aq,8))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[GI]}),n})();function aye(n){return"guarded"}function cye(n){return["disabled"===n.initialNavigation?x7(3,[{provide:PA,multi:!0,useFactory:()=>{const e=ys(c1);return()=>{e.setUpLocationChangeListener()}}},{provide:tB,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?x7(2,[{provide:tB,useValue:0},{provide:PA,multi:!0,deps:[y2],useFactory:e=>{const t=e.get(Dge,Promise.resolve());let i=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(c1),a=e.get(sq);(function r(s){e.get(c1).events.pipe(jo(a=>a instanceof xu||a instanceof wC||a instanceof w$),$t(a=>a instanceof xu||a instanceof wC&&(0===a.code||1===a.code)&&null),jo(a=>null!==a),Tl(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),o.afterPreactivation=()=>(s(!0),i||a.closed?vi(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const cq=new Bt("");var O3=(()=>{return(n=O3||(O3={})).insulated="insulated",n.orientation="orientation",n.baseDimension="base-dimension",n.extensionToNorth="extension-north",n.extensionToSouth="extension-south",n.extensionToWest="extension-west",n.extensionToEast="extension-east",n.halfCircle="half-circle",n.bendPoint="bend-point",n.roofBoth="roof-both",n.roofCircle="roof-circle",n.roof70="roof-70",n.roofWalls="roof-walls",n.efficiency="efficiency",n.greyOut="greyOut",n.amountSteps="amount-steps",n.viewlines="viewlines",n.warmWaterBuffer="warm-water-buffer",n.iJoists="i-joits",n.dampOpen="damp-open",n.airTight="air-tight",n.pipeLayer="pipe-layer",n.woodFiberPlate="wood-fiber-plate",O3;var n})(),_t=(()=>{return(n=_t||(_t={})).welcome="welcome",n.passiv="passiv",n.basics="basics",n.extensions="extensions",n.tower="tower",n.end="end",n.EndOfPageHouse="EndOfPageHouse",n.roofBasics="roof-basics",n.roofCircle="roof-circle",n.roofIntermezzo="roof-intermezzo",n.roof70="roof70",n.roofChoice="roof-choice",n.roofEdge="roof-edge",n.stairStart="stair-start",n.stairBasic="stair-basic",n.stairCheck="stair-check",n.stairPlan="stair-plan",n.facadeStart="facade-start",n.facadeWindow="facade-window",n.facadeBrick="facade-Brick",n.facadeDoor="facade-Door",n.constructionWelcome="construction-welcome",n.constructionFoundation="construction-foundation",n.constructionCrawlerSpace="construction-crawler-space",n.constructionGroundFloor="construction-ground-floor",n.constructionWallSole="construction-wall-sole",n.constructionWallJoists="construction-wall-joists",n.constructionWallOSB="construction-wall-osb",n.constructionWallTape="construction-wall-tape",n.constructionFloorLVL="construction-floor-lvl",n.constructionRoofRidge="construction-roof-ridge",n.constructionRoofJoist="construction-roof-joist",n.constructionRoofInside="construction-roof-inside",n.constructionRoofOuterSheet="construction-roof-outerSheet",n.constructionRoofSpace="construction-roof-space",n.constructionRoofTiles="construction-roof-tiles",n.constructionWallInsulation="construction-wall-insulation",n.constructionWallOuterSheet="construction-wall-outer-sheet",n.constructionWallSpace="construction-wall-space",n.constructionWallFacade="construction-wall-facade",n.constructionWallGips="construction-wall-gips",n.constructionWallService="construction-wall-service",n.constructionFloor="construction-floor",n.constructionFloorOSB="construction-floor-osb",n.constructionRoof="construction-roof",n.constructionWallFinish="construction-wall-finish",n.constructionParameters="construction-parameters",n.installationWelcome="installations-welcome",n.installationDrinkWater="installations-drink-water",n.installationGreyWater="installations-grey-water",n.installationHeating="installations-heating",n.installationElectricity="installations-electricity",n.installationVentilation="installations-ventilation",n.installationSmartHome="installations-smartHome",n.wiredWelcome="wired-welcome",n.wiredPower="wired-power",n.wiredEthernet="wired-ethernet",n.wiredSafety="wired-safety",n.wiredExtra="wired-extra",n.wiredLight="wired-light",n.wiredVent="wired-vent",n.wiredWater="wired-water",n.costsWelcome="costs-welcome",n.costsConstruction="costs-construction",n.costsPreparations="costs-preparations",n.costsOpenings="costs-openings",n.costsElectra="costs-electra",n.costsWater="costs-water",n.costsFinishes="costs-finishes",n.costsOuterFinishes="costs-outer-finishes",n.costsTotals="costs-totals",n.planningPreps="planningPreps",n.planningFoundation="planningFoundation",n.planningFraming="planningFraming",n.planningOutside="planningOutside",n.planningInstallations="planningInstallations",n.planningFinishing="planningFinishing",n.House3D="House3D",_t;var n})(),tt=(()=>{return(n=tt||(tt={})).top="top",n.ground="ground",n.ceiling="ceiling",n.all="all",n.tower="tower",n.none="none",tt;var n})(),gd=(()=>{return(n=gd||(gd={})).left="left",n.right="right",n.none="none",gd;var n})(),_o=(()=>{return(n=_o||(_o={})).house2D="house2D",n.cross="cross",n.stairPlan="stairPlan",n.stairCross="stairCross",n.construction="construction",n.House3D="House3D",n.none="none",_o;var n})(),Ge=(()=>{return(n=Ge||(Ge={})).perilex="perilex",n.socket="socket",n.lightBulb="light-bulb",n.lightSwitch="light-switch",n.dlc="dlc",n.dimmer="dimmer",n.poe="poe",n.ethernet="ethernet",n.wifi="wifi",n.camera="camera",n.alarm="alarm",n.smoke="smoke",n.pir="pir",n.blinds="blinds",n.temperature="temperature",n.ventIn="vent-in",n.ventOut="vent-out",n.waterCold="water-cold",n.waterRain="water-rain",n.waterWarm="water-warm",n.drain="drain",n.shower="shower",n.toilet="toilet",Ge;var n})(),xc=(()=>{return(n=xc||(xc={})).doors="doors",n.stats="stats",n.examplePlan="examplePlan",n.theoreticalWalls="theoreticalWalls",n.silhouette="silhouette",n.measure="measure",n.decoration="decoration",n.stramien="stramien",n.towerFootprint="towerFootprint",n.grid="grid",n.walkLine="walkLine",n.minimumHeight="minimumHeight",xc;var n})(),bu=(()=>{return(n=bu||(bu={})).OutsidePOE="OutsidePOE",n.SharedEthernet="SharedEthernet",bu;var n})(),md=(()=>{return(n=md||(md={})).clipBoxEnabled="clipBoxEnabled",n.clipBoxShow="clipBoxShow",n.mirror="mirror",md;var n})(),b2=(()=>{return(n=b2||(b2={})).foundation="foundation",n.groundFloor="groundFloor",n.topFloor="topFloor",n.roof="roof",n.innerWall="innerWall",n.outerWall="outerWall",n.studs="studs",n.lvl="lvl",n.debug="debug",n.tower="tower",b2;var n})(),Di=(()=>{return(n=Di||(Di={})).foundation="A1-construction-foundation",n.crawlerSpace="A2-construction-crawler-space",n.groundFloor="A3-construction-ground-floor",n.sole="A4-construction-sole",n.joists="A5-construction-joists",n.osbWall="A6-construction-osb-wall",n.tapes="A7-construction-tapes",n.floorLVL="B1-construction-floorLVL",n.topFloorJoists="B2-construction-top-floor-joists",n.topFloorOSB="B2-construction-top-floor-osb",n.roofRidge="B3-construction-roof-ridge",n.roofJoists="B4-construction-roof-joists",n.roofOSB="B5-construction-roof-osb",n.insulation="C1-construction-insulation",n.outerSheet="C2-construction-outerSheet",n.roofOuterSheets="C3-construction-roof-outerSheet",n.roofSpace="C4-construction-roof-space",n.roofTiles="C5-construction-roof-tiles",n.space="D1-construction-space",n.facade="D2-construction-facade",n.serviceBeams="E1-construction-serviceBeams",n.serviceInsulation="E2-construction-serviceInsulation",n.gips="E3-construction-gips",Di;var n})(),Eo=(()=>{return(n=Eo||(Eo={})).red="red",n.green="green",n.blue="blue",n.x="x",n.y="y",n.z="z",Eo;var n})();let Mu=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=od(this.platformId)}static getCookieRegExp(t){const i=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const r=n.getCookieRegExp(t).exec(this.document.cookie);return r[1]?n.safeDecodeURIComponent(r[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(r=>{const[s,o]=r.split("=");t[n.safeDecodeURIComponent(s.replace(/^ /,""))]=n.safeDecodeURIComponent(o)}),t}set(t,i,r,s,o,a,c){if(!this.documentIsAccessible)return;if("number"==typeof r||r instanceof Date||s||o||a||c)return void this.set(t,i,{expires:r,path:s,domain:o,secure:a,sameSite:c||"Lax"});let l=encodeURIComponent(t)+"="+encodeURIComponent(i)+";";const u=r||{};u.expires&&(l+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(l+="path="+u.path+";"),u.domain&&(l+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(l+="secure;"),u.sameSite||(u.sameSite="Lax"),l+="sameSite="+u.sameSite+";",this.document.cookie=l}delete(t,i,r,s,o="Lax"){if(!this.documentIsAccessible)return;const a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:r,secure:s,sameSite:o})}deleteAll(t,i,r,s="Lax"){if(!this.documentIsAccessible)return;const o=this.getAll();for(const a in o)o.hasOwnProperty(a)&&this.delete(a,t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(H3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),To=(()=>{class n{constructor(t,i){this.cookieService=t,this.router=i,this.darkMode=!1,this.title="Lindelund",this.update$=new Je,this.tag$=new go(void 0),this.graphic$=new go(void 0),this.states$=new go({}),this.popupActive$=new go(!1),this.fullscreen$=new go(!0),this.svgTransform$=new go(void 0),this.page$=this.router.events.pipe(jo(r=>r instanceof xu),b8(this.router),$t(r=>r.url.toLowerCase().split("/")[1])),this.floor$=new go(tt.ground),this.discord="https://discord.gg/hrjfzY3yTp",this.github="https://github.com/PassiveOpen/PassiveOpen.github.io",this.scroll$=new go({scroll:0,percentage:0,section:void 0,graphicSide:void 0,graphic:void 0}),this.getCookies()}setStatesSilent(t,i,r){t.flatMap(s=>this.setState(s,i,r,!1))}hardSetStates(t){const i=this.states$.value;Object.entries(t).forEach(([r,s])=>{i[r]=s}),this.commitState(i)}setState(t,i,r,s=!0){const o=this.states$.value;(t instanceof Array?t:[t]).flatMap(a=>{r&&(o[a]=Boolean(this.cookieService.get("states"))),o[a]=void 0!==i?i:void 0===o[a]||!o[a]}),s?this.commitState(o):this.silentStates=o}commitState(t){this.states$.next(t),this.cookieService.set("states",JSON.stringify(t))}setTransformCookie(t,i){this.svgTransform$.next({[i]:t}),this.cookieService.set("svgTransform",JSON.stringify(this.svgTransform$.value))}getCookies(){let t=this.cookieService.get("floor");""===t&&(t=tt.ground),this.floor$.next(t);let i=this.cookieService.get("fullscreen");i=""!==i&&"true"===i,this.fullscreen$.next(i);let r=this.cookieService.get("svgTransform");(""===r||!1===i)&&(r="{}"),this.svgTransform$.next(JSON.parse(r));let s=this.cookieService.get("darkMode");this.setDarkMode(""===s?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches:"true"===s);let o=this.cookieService.get("states");""===o&&(o="{}"),this.states$.next(JSON.parse(o))}setFloor(t){let i;void 0!==t?i=t:(this.floor$.value===tt.ground&&(i=tt.top),this.floor$.value===tt.top&&(i=tt.ground)),this.floor$.next(i),this.cookieService.set("floor",i),this.update$.next()}setTag(t){this.tag$.next(t),this.update$.next()}setDarkMode(t,i=!1){document.body.classList.remove("light"),document.body.classList.remove("dark"),this.darkMode=void 0!==t?t:!this.darkMode,this.darkMode?document.body.classList.add("dark"):document.body.classList.add("light"),i&&this.cookieService.set("darkMode",`${this.darkMode}`,.1)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mu),Xe(c1))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u9=(()=>{return(n=u9||(u9={})).primary="primary",n.accent="accent",n.warn="warn",n.color0="color-0",n.color5="color-5",n.color10="color-10",n.color15="color-15",n.color20="color-20",n.color30="color-30",n.color40="color-40",n.color50="color-50",n.color60="color-60",n.color70="color-70",n.color80="color-80",n.color90="color-90",n.color100="color-100",u9;var n})();let lq=(()=>{class n{constructor(){this.color={}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hye=["primary"];function fye(n,e){if(1&n&&(O(0,"div"),V(1),N()),2&n){const t=e.$implicit;(function mu(n){vu(EG,_5e,n,!1)})("background:var(--"+t+")"),na("mat-button ",t,""),ae(1),si(" ",t,"")}}let dye=(()=>{class n{constructor(t,i){this.colorService=t,this.host=i,this.keys=Object.values(u9)}ngAfterViewInit(){this.parseColors()}parseColors(){const t=this.host.nativeElement;console.log(this.host.nativeElement),this.keys.forEach(i=>{const r=t.querySelector(`.${i}`);if(!r)return;const s=getComputedStyle(r).backgroundColor;console.log(`%c ${i}: ${s}`,`background: ${s}; color: ${this.invertColor(s)}`),this.colorService.color[i]=s})}invertColor(t,i=!0){function r(c){return`${c}`.padStart(3,"0")}let[s,o,a]=t.replace(")","").replace("rgb(","").split(", ");return i?.299*s+.587*o+.114*a>186?"#000000":"#FFFFFF":(s=255-s,o=255-o,a=255-a,"#"+r(s)+r(o)+r(a))}}return n.\u0275fac=function(t){return new(t||n)(G(lq),G(gn))},n.\u0275cmp=On({type:n,selectors:[["color"]],viewQuery:function(t,i){if(1&t&&Wo(hye,5),2&t){let r;ir(r=rr())&&(i.primary=r.first)}},decls:1,vars:1,consts:[[3,"class","style",4,"ngFor","ngForOf"]],template:function(t,i){1&t&&fn(0,fye,2,6,"div",0),2&t&&Ve("ngForOf",i.keys)},dependencies:[C4],styles:["[_nghost-%COMP%]{display:none}"]}),n})();function b7(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function PC(n,e=rC){return Mn((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+n,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}t.subscribe(yn(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function rB(n){return jo((e,t)=>n<=t)}function Lye(n,e){return n===e}let mq=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dye=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=v8(t);return new Ce(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new Je,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Xe(mq))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Aq=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new Ar,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Br(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Cu(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(PC(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(G(Dye),G(gn),G(sr))},n.\u0275dir=ht({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),h9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[mq]}),n})();const vq=new Set;let M7,Iye=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Rye}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Bye(n){if(!vq.has(n))try{M7||(M7=document.createElement("style"),M7.setAttribute("type","text/css"),document.head.appendChild(M7)),M7.sheet&&(M7.sheet.insertRule(`@media ${n} {body{ }}`,0),vq.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(a3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rye(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Fye=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Je}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return _q(eC(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=MI(_q(eC(t)).map(o=>this._registerQuery(o).observable));return s=hC(s.pipe(Tl(1)),s.pipe(rB(1),PC(0))),s.pipe($t(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new Ce(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(b8(i),$t(({matches:o})=>({query:t,matches:o})),D1(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(Xe(Iye),Xe(sr))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _q(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let HC=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Nye(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Oye(n){try{return n.frameElement}catch{return null}}(function qye(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===xq(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=xq(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function jye(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function $ye(n){return!function Uye(n){return function Qye(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Vye(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Gye(n){return function Wye(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||Cq(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(Xe(a3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Cq(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function xq(n){if(!Cq(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Kye{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Tl(1)).subscribe(e)}}let sB=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Kye(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(Xe(HC),Xe(sr),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bq(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Mq(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Xye=new Bt("cdk-input-modality-detector-options"),Yye={ignoreKeys:[18,17,224,91,16]},S7=cd({passive:!0,capture:!0});let Zye=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new go(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=y8(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(bq(o)?"keyboard":"mouse"),this._mostRecentTarget=y8(o))},this._onTouchstart=o=>{Mq(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=y8(o))},this._options={...Yye,...s},this.modalityDetected=this._modality.pipe(rB(1)),this.modalityChanged=this.modalityDetected.pipe(function Tye(n,e=At){return n=n??Lye,Mn((t,i)=>{let r,s=!0;t.subscribe(yn(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,S7),r.addEventListener("mousedown",this._onMousedown,S7),r.addEventListener("touchstart",this._onTouchstart,S7)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,S7),document.removeEventListener("mousedown",this._onMousedown,S7),document.removeEventListener("touchstart",this._onTouchstart,S7))}}return n.\u0275fac=function(t){return new(t||n)(Xe(a3),Xe(sr),Xe(Pi),Xe(Xye,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ewe=new Bt("cdk-focus-monitor-default-options"),zC=cd({passive:!0,capture:!0});let L0=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Je,this._rootNodeFocusAndBlurListener=a=>{for(let l=y8(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=v8(t);if(!this._platform.isBrowser||1!==r.nodeType)return vi(null);const s=Oj(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Je,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=v8(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=v8(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=y8(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,zC),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,zC)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(D1(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,zC),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,zC),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(Xe(sr),Xe(a3),Xe(Zye),Xe(Pi,8),Xe(ewe,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Eq="cdk-high-contrast-black-on-white",Tq="cdk-high-contrast-white-on-black",oB="cdk-high-contrast-active";let Lq=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=ys(Fye).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(oB,Eq,Tq),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(oB,Eq):2===i&&t.add(oB,Tq)}}}return n.\u0275fac=function(t){return new(t||n)(Xe(a3),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aB=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Lq))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[h9]}),n})();const nwe=new Bt("mat-sanity-checks",{providedIn:"root",factory:function twe(){return!0}});let Ni=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!_I()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Xe(Lq),Xe(nwe,8),Xe(Pi))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[w8,w8]}),n})();function f9(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Br(e)}}}function T8(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Dh(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Br(e)}}}function OC(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Cu(t):this.defaultTabIndex}}}let Bq=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function d9(n,e,t){n.nativeElement.classList.toggle(e,t)}let NC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ni,Ni]}),n})();class rwe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const kq={enterDuration:225,exitDuration:150},cB=cd({passive:!0}),Pq=["mousedown","touchstart"],Hq=["mouseup","mouseleave","touchend","touchcancel"];class owe{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=v8(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...kq,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function awe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const f=window.getComputedStyle(u),g=f.transitionDuration,_="none"===f.transitionProperty||"0s"===g||"0s, 0s"===g,y=new rwe(this,u,i,_);u.style.transform="scale3d(1, 1, 1)",y.state=0,i.persistent||(this._mostRecentTransientRipple=y);let w=null;return!_&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const C=()=>this._finishRippleTransition(y),b=()=>this._destroyRipple(y);u.addEventListener("transitionend",C),u.addEventListener("transitioncancel",b),w={onTransitionEnd:C,onTransitionCancel:b}}),this._activeRipples.set(y,w),(_||!l)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...kq,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=v8(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Pq))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Hq),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=bq(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Mq(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,cB)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(Pq.forEach(e=>{this._triggerElement.removeEventListener(e,this,cB)}),this._pointerUpEventsRegistered&&Hq.forEach(e=>{this._triggerElement.removeEventListener(e,this,cB)}))}}const cwe=new Bt("mat-ripple-global-options");let Ih=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new owe(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(sr),G(a3),G(cwe,8),G(_4,8))},n.\u0275dir=ht({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Gi("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Su=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ni,Ni]}),n})(),lB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ni]}),n})(),zq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Su,El,Ni,lB]}),n})();function Oq(...n){const e=Yu(n),{args:t,keys:i}=Yj(n),r=new Ce(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let f=!1;lo(t[u]).subscribe(yn(s,p=>{f||(f=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(i?Zj(i,a):a),s.complete())}))}});return e?r.pipe(fI(e)):r}class Nq{}class Vq{}class Bh{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bh;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bh?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class uwe{encodeKey(e){return Uq(e)}encodeValue(e){return Uq(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const fwe=/%(\d[a-f0-9])/gi,dwe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Uq(n){return encodeURIComponent(n).replace(fwe,(e,t)=>dwe[t]??e)}function VC(n){return`${n}`}class Ad{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new uwe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function hwe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(VC):[VC(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ad({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(VC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(VC(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class pwe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Gq(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Qq(n){return typeof Blob<"u"&&n instanceof Blob}function Wq(n){return typeof FormData<"u"&&n instanceof FormData}class p9{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function gwe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Bh),this.context||(this.context=new pwe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ad,this.urlWithParams=t}serializeBody(){return null===this.body?null:Gq(this.body)||Qq(this.body)||Wq(this.body)||function mwe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ad?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Wq(this.body)?null:Qq(this.body)?this.body.type||null:Gq(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ad?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),l)),new p9(t,i,s,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var M2=(()=>((M2=M2||{})[M2.Sent=0]="Sent",M2[M2.UploadProgress=1]="UploadProgress",M2[M2.ResponseHeader=2]="ResponseHeader",M2[M2.DownloadProgress=3]="DownloadProgress",M2[M2.Response=4]="Response",M2[M2.User=5]="User",M2))();class uB{constructor(e,t=200,i="OK"){this.headers=e.headers||new Bh,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class hB extends uB{constructor(e={}){super(e),this.type=M2.ResponseHeader}clone(e={}){return new hB({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class UC extends uB{constructor(e={}){super(e),this.type=M2.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new UC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class jq extends uB{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function fB(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let vd=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof p9)s=t;else{let c,l;c=r.headers instanceof Bh?r.headers:new Bh(r.headers),r.params&&(l=r.params instanceof Ad?r.params:new Ad({fromObject:r.params})),s=new p9(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=vi(s).pipe(fd(c=>this.handler.handle(c)));if(t instanceof p9||"events"===r.observe)return o;const a=o.pipe(jo(c=>c instanceof UC));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe($t(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe($t(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe($t(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe($t(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ad).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,fB(r,i))}post(t,i,r={}){return this.request("POST",t,fB(r,i))}put(t,i,r={}){return this.request("PUT",t,fB(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Xe(Nq))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class $q{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const qq=new Bt("HTTP_INTERCEPTORS");let Awe=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const vwe=/^\)\]\}',?\n/;let Kq=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ce(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((g,_)=>r.setRequestHeader(g,_.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=r.statusText||"OK",_=new Bh(r.getAllResponseHeaders()),y=function _we(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new hB({headers:_,status:r.status,statusText:g,url:y}),o},c=()=>{let{headers:g,status:_,statusText:y,url:w}=a(),C=null;204!==_&&(C=typeof r.response>"u"?r.responseText:r.response),0===_&&(_=C?200:0);let b=_>=200&&_<300;if("json"===t.responseType&&"string"==typeof C){const M=C;C=C.replace(vwe,"");try{C=""!==C?JSON.parse(C):null}catch(T){C=M,b&&(b=!1,C={error:T,text:C})}}b?(i.next(new UC({body:C,headers:g,status:_,statusText:y,url:w||void 0})),i.complete()):i.error(new jq({error:C,headers:g,status:_,statusText:y,url:w||void 0}))},l=g=>{const{url:_}=a(),y=new jq({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:_||void 0});i.error(y)};let u=!1;const f=g=>{u||(i.next(a()),u=!0);let _={type:M2.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),"text"===t.responseType&&!!r.responseText&&(_.partialText=r.responseText),i.next(_)},p=g=>{let _={type:M2.UploadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),i.next(_)};return r.addEventListener("load",c),r.addEventListener("error",l),r.addEventListener("timeout",l),r.addEventListener("abort",l),t.reportProgress&&(r.addEventListener("progress",f),null!==s&&r.upload&&r.upload.addEventListener("progress",p)),r.send(s),i.next({type:M2.Sent}),()=>{r.removeEventListener("error",l),r.removeEventListener("abort",l),r.removeEventListener("load",c),r.removeEventListener("timeout",l),t.reportProgress&&(r.removeEventListener("progress",f),null!==s&&r.upload&&r.upload.removeEventListener("progress",p)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Xe(cj))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const dB=new Bt("XSRF_COOKIE_NAME"),pB=new Bt("XSRF_HEADER_NAME");class Xq{}let ywe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=YW(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(H3),Xe(dB))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),gB=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Xq),Xe(pB))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),wwe=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(qq,[]);this.chain=i.reduceRight((r,s)=>new $q(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Vq),Xe(y2))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),Cwe=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:gB,useClass:Awe}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:dB,useValue:t.cookieName}:[],t.headerName?{provide:pB,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[gB,{provide:qq,useExisting:gB,multi:!0},{provide:Xq,useClass:ywe},{provide:dB,useValue:"XSRF-TOKEN"},{provide:pB,useValue:"X-XSRF-TOKEN"}]}),n})(),xwe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[vd,{provide:Nq,useClass:wwe},Kq,{provide:Vq,useExisting:Kq}],imports:[Cwe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const bwe=["*"];let GC;function g9(n){return function Mwe(){if(void 0===GC&&(GC=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(GC=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return GC}()?.createHTML(n)||n}function Yq(n){return Error(`Unable to find icon with the name "${n}"`)}function Zq(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Jq(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class L8{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let m9=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new L8(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(Us.HTML,r);if(!o)throw Jq(r);const a=g9(o);return this._addSvgIconConfig(t,i,new L8("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new L8(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(Us.HTML,i);if(!s)throw Jq(i);const o=g9(s);return this._addSvgIconSetConfig(t,new L8("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Us.RESOURCE_URL,t);if(!i)throw Zq(t);const r=this._cachedIconsByUrl.get(i);return r?vi(QC(r)):this._loadSvgIconFromConfig(new L8(t,null)).pipe(Ca(s=>this._cachedIconsByUrl.set(i,s)),$t(s=>QC(s)))}getNamedSvgIcon(t,i=""){const r=eK(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):m7(Yq(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?vi(QC(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe($t(i=>QC(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?vi(r):Oq(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(E0(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(Us.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),vi(null)})))).pipe($t(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw Yq(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ca(i=>t.svgText=i),$t(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?vi(null):this._fetchIcon(t).pipe(Ca(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(g9("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(g9("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function Swe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(Us.RESOURCE_URL,i);if(!o)throw Zq(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe($t(l=>g9(l)),pC(()=>this._inProgressUrlFetches.delete(o)),x3());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(eK(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return Twe(s)?new L8(s.url,null,s.options):new L8(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(Xe(vd,8),Xe(A8),Xe(Pi,8),Xe(_h))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QC(n){return n.cloneNode(!0)}function eK(n,e){return n+":"+e}function Twe(n){return!(!n.url||!n.options)}const Lwe=T8(class{constructor(n){this._elementRef=n}}),Dwe=new Bt("MAT_ICON_DEFAULT_OPTIONS"),Iwe=new Bt("mat-icon-location",{providedIn:"root",factory:function Bwe(){const n=ys(Pi),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),tK=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Rwe=tK.map(n=>`[${n}]`).join(", "),Fwe=/^url\(['"]?#(.*?)['"]?\)$/;let D8=(()=>{class n extends Lwe{constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Fe.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Br(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(Rwe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)tK.forEach(o=>{const a=i[s],c=a.getAttribute(o),l=c?c.match(Fwe):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Tl(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(m9),Jl("aria-hidden"),G(Iwe),G(_h),G(Dwe,8))},n.\u0275cmp=On({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(Qs("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Gi("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[zt],ngContentSelectors:bwe,decls:1,vars:0,template:function(t,i){1&t&&(Vc(),T1(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),nK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ni,Ni]}),n})();function mB(n){return n&&"function"==typeof n.connect&&!(n instanceof EI)}class iK{applyChanges(e,t,i,r,s){e.forEachOperation((o,a,c)=>{let l,u;if(null==o.previousIndex){const f=i(o,a,c);l=t.createEmbeddedView(f.templateRef,f.context,f.index),u=1}else null==c?(t.remove(a),u=3):(l=t.get(a),t.move(l,c),u=2);s&&s({context:l?.context,operation:u,record:o})})}detach(){}}class AB{constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Je,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}const A9=new Bt("_ViewRepeater");let sK=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(G(Go),G(gn))},n.\u0275dir=ht({type:n}),n})(),I8=(()=>{class n extends sK{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,features:[zt]}),n})();const Qc=new Bt("NgValueAccessor"),Hwe={provide:Qc,useExisting:pr(()=>vB),multi:!0},Owe=new Bt("CompositionEventMode");let vB=(()=>{class n extends sK{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function zwe(){const n=M0()?M0().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(G(Go),G(gn),G(Owe,8))},n.\u0275dir=ht({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&mn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Xi([Hwe]),zt]}),n})();const rc=new Bt("NgValidators"),yd=new Bt("NgAsyncValidators");function mK(n){return null!=n}function AK(n){return bA(n)?us(n):n}function vK(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function _K(n,e){return e.map(t=>t(n))}function yK(n){return n.map(e=>function Uwe(n){return!n.validate}(e)?e:t=>e.validate(t))}function _B(n){return null!=n?function wK(n){if(!n)return null;const e=n.filter(mK);return 0==e.length?null:function(t){return vK(_K(t,e))}}(yK(n)):null}function yB(n){return null!=n?function CK(n){if(!n)return null;const e=n.filter(mK);return 0==e.length?null:function(t){return Oq(_K(t,e).map(AK)).pipe($t(vK))}}(yK(n)):null}function xK(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wB(n){return n?Array.isArray(n)?n:[n]:[]}function jC(n,e){return Array.isArray(n)?n.includes(e):n===e}function SK(n,e){const t=wB(e);return wB(n).forEach(r=>{jC(t,r)||t.push(r)}),t}function EK(n,e){return wB(e).filter(t=>!jC(n,t))}class TK{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_B(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ll extends TK{get formDirective(){return null}get path(){return null}}class wd extends TK{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let $C=(()=>{class n extends class LK{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(G(wd,2))},n.\u0275dir=ht({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Gi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[zt]}),n})();const v9="VALID",KC="INVALID",E7="PENDING",_9="DISABLED";function IK(n){return Array.isArray(n)?_B(n):n||null}function BK(n){return Array.isArray(n)?yB(n):n||null}function XC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function y9(n,e){(function TB(n,e){const t=function bK(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(xK(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function MK(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(xK(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();JC(e._rawValidators,r),JC(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Zwe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&PK(n,e)})}(n,e),function eCe(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Jwe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&PK(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ywe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function JC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function PK(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function NK(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function VK(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const cCe={provide:wd,useExisting:pr(()=>C9)},WK=(()=>Promise.resolve())();let C9=(()=>{class n extends wd{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class kK{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=IK(this._rawValidators),this._composedAsyncValidatorFn=BK(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===v9}get invalid(){return this.status===KC}get pending(){return this.status==E7}get disabled(){return this.status===_9}get enabled(){return this.status!==_9}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=IK(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=BK(e)}addValidators(e){this.setValidators(SK(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SK(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(EK(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(EK(e,this._rawAsyncValidators))}hasValidator(e){return jC(this._rawValidators,e)}hasAsyncValidator(e){return jC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=E7,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_9,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=v9,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===v9||this.status===E7)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_9:v9}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=E7,this._hasOwnPendingAsyncValidator=!0;const t=AK(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ar,this.statusChanges=new Ar}_calculateStatus(){return this._allControlsDisabled()?_9:this.errors?KC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(E7)?E7:this._anyControlsHaveStatus(KC)?KC:v9}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){XC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,i){super(function MB(n){return(XC(n)?n.validators:n)||null}(t),function SB(n,e){return(XC(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),XC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=VK(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NK(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NK(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){VK(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new Ar,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function DB(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===vB?t=s:function iCe(n){return Object.getPrototypeOf(n.constructor)===I8}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function LB(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){y9(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){WK.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&bh(i);WK.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function YC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(G(Ll,9),G(rc,10),G(yd,10),G(Qc,10),G(wc,8))},n.\u0275dir=ht({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xi([cCe]),zt,wr]}),n})(),$K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),RCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[$K]}),n})(),FCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[RCe]}),n})(),PCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ni,Ni]}),n})();const uX=["*"],HCe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],zCe=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],GCe=f9(Dh(class{})),QCe=Dh(class{}),fX=new Bt("MatList"),WCe=new Bt("MatNavList");let dX=(()=>{class n extends GCe{constructor(t){super(),this._elementRef=t,this._stateChanges=new Je,"action-list"===this._getListType()&&(t.nativeElement.classList.add("mat-action-list"),t.nativeElement.setAttribute("role","group"))}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(G(gn))},n.\u0275cmp=On({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[Xi([{provide:fX,useExisting:n}]),zt,wr],ngContentSelectors:uX,decls:1,vars:0,template:function(t,i){1&t&&(Vc(),T1(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),n})(),pX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),gX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),mX=(()=>{class n extends QCe{constructor(t,i,r,s){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new Je,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(D1(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=Br(t)}ngAfterContentInit(){!function Fq(n,e,t="mat"){n.changes.pipe(b8(n)).subscribe(({length:i})=>{d9(e,`${t}-2-line`,!1),d9(e,`${t}-3-line`,!1),d9(e,`${t}-multi-line`,!1),2===i||3===i?d9(e,`${t}-${i}-line`,!0):i>3&&d9(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(wc),G(WCe,8),G(fX,8))},n.\u0275cmp=On({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,i,r){if(1&t&&(Z1(r,pX,5),Z1(r,gX,5),Z1(r,Rq,5)),2&t){let s;ir(s=rr())&&(i._avatar=s.first),ir(s=rr())&&(i._icon=s.first),ir(s=rr())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(t,i){2&t&&Gi("mat-list-item-disabled",i.disabled)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[zt],ngContentSelectors:zCe,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,i){1&t&&(Vc(HCe),O(0,"span",0),rt(1,"span",1),T1(2),O(3,"span",2),T1(4,1),N(),T1(5,2),N()),2&t&&(ae(1),Ve("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},dependencies:[Ih],encapsulation:2,changeDetection:0}),n})(),YCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[NC,Su,Ni,lB,El,NC,Ni,lB,PCe]}),n})();function vX(n){for(let e in n){let t=n[e]??"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const zB="inline",nx=["row","column","row-reverse","column-reverse"];function _X(n){let[e,t,i]=yX(n);return function JCe(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}function yX(n){n=n?.toLowerCase()??"";let[e,t,i]=n.split(" ");return nx.find(r=>r===e)||(e=nx[0]),t===zB&&(t=i!==zB?i:"",i=zB),[e,ZCe(t),!!i]}function x9(n){let[e]=yX(n);return e.indexOf("row")>-1}function ZCe(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function Rh(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}const txe={provide:Dw,useFactory:function exe(n,e){return()=>{if(od(e)){const t=Array.from(n.querySelectorAll(`[class*=${wX}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(r=>{r.classList.contains(`${wX}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[Pi,H3],multi:!0},wX="flex-layout-";let OB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[txe]}),n})();class R8{constructor(e=!1,t="all",i="",r="",s=0){this.matches=e,this.mediaQuery=t,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new R8(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let nxe=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,r){const s=this.stylesheet.get(t);s?s.set(i,r):this.stylesheet.set(t,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const r=this.stylesheet.get(t);let s="";if(r){const o=r.get(i);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NB={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Eu=new Bt("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>NB}),T7=new Bt("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),VB=new Bt("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function CX(n,e){return n=n?.clone()??new R8,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class I1{constructor(){this.shouldCache=!0}sideEffect(e,t,i){}}let xa=(()=>{class n{constructor(t,i,r,s){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(t,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:vX(i),this._applyMultiValueStyleToElement(s,t)}applyStyleToElements(t,i=[]){const r=this.layoutConfig.disableVendorPrefixes?t:vX(t);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(t){const i="flex-direction";let r=this.lookupStyle(t,i);return[r||"row",this.lookupInlineStyle(t,i)||p7(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){return t.getAttribute(i)??""}lookupInlineStyle(t,i){return od(this._platformId)?t.style.getPropertyValue(i):function ixe(n,e){return xX(n)[e]??""}(t,i)}lookupStyle(t,i,r=!1){let s="";return t&&((s=this.lookupInlineStyle(t,i))||(od(this._platformId)?r||(s=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(t,i)))),s?s.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(r=>{const s=t[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",od(this._platformId)||!this._serverModuleLoaded?od(this._platformId)?i.style.setProperty(r,a):rxe(i,r,a):this._serverStylesheet.addStyleToElement(i,r,a)})}}return n.\u0275fac=function(t){return new(t||n)(Xe(nxe),Xe(T7),Xe(H3),Xe(Eu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rxe(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=xX(n);i[e]=t??"",function sxe(n,e){let t="";for(const i in e)e[i]&&(t+=`${i}:${e[i]};`);n.setAttribute("style",t)}(n,i)}function xX(n){const e={},t=n.getAttribute("style");if(t){const i=t.split(/;+/g);for(let r=0;r<i.length;r++){const s=i[r].trim();if(s.length>0){const o=s.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${s}`);e[s.substr(0,o).trim()]=s.substr(o+1).trim()}}}return e}function b9(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function oxe(n,e){return(n.priority||0)-(e.priority||0)}let UB=(()=>{class n{constructor(t,i,r){this._zone=t,this._platformId=i,this._document=r,this.source=new go(new R8(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,r)=>{i.matches&&t.push(r)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(r=>r.matches)}observe(t,i=!1){if(t&&t.length){const r=this._observable$.pipe(jo(o=>!i||t.indexOf(o.mediaQuery)>-1));return al(new Ce(o=>{const a=this.registerQuery(t);if(a.length){const c=a.pop();a.forEach(l=>{o.next(l)}),this.source.next(c)}o.complete()}),r)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],r=[];return function axe(n,e){const t=n.filter(i=>!bX[i]);if(t.length>0){const i=t.join(", ");try{const r=e.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),e.head.appendChild(r),t.forEach(s=>bX[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const o=c=>{this._zone.run(()=>this.source.next(new R8(c.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new R8(!0,s))}),r}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function cxe(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,od(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(Xe(sr),Xe(H3),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bX={},lxe=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],MX="(orientation: portrait) and (max-width: 599.98px)",SX="(orientation: landscape) and (max-width: 959.98px)",EX="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",TX="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",LX="(orientation: portrait) and (min-width: 840px)",DX="(orientation: landscape) and (min-width: 1280px)",Fh={HANDSET:`${MX}, ${SX}`,TABLET:`${EX} , ${TX}`,WEB:`${LX}, ${DX} `,HANDSET_PORTRAIT:`${MX}`,TABLET_PORTRAIT:`${EX} `,WEB_PORTRAIT:`${LX}`,HANDSET_LANDSCAPE:`${SX}`,TABLET_LANDSCAPE:`${TX}`,WEB_LANDSCAPE:`${DX}`},uxe=[{alias:"handset",priority:2e3,mediaQuery:Fh.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Fh.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Fh.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Fh.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Fh.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Fh.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Fh.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Fh.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Fh.WEB_PORTRAIT,overlapping:!0}],hxe=/(\.|-|_)/g;function fxe(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const mxe=new Bt("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=ys(VB),e=ys(Eu),t=[].concat.apply([],(n||[]).map(r=>Array.isArray(r)?r:[r]));return function gxe(n,e=[]){const t={};return n.forEach(i=>{t[i.alias]=i}),e.forEach(i=>{t[i.alias]?Rh(t[i.alias],i):t[i.alias]=i}),function pxe(n){return n.forEach(e=>{e.suffix||(e.suffix=function dxe(n){return n.replace(hxe,"|").split("|").map(fxe).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(i=>t[i]))}((e.disableDefaultBps?[]:lxe).concat(e.addOrientationBps?uxe:[]),t)}});let GB=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(oxe)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias===t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,i){let r=this.findByMap.get(t);return r||(r=this.items.find(i)??null,this.findByMap.set(t,r)),r??null}}return n.\u0275fac=function(t){return new(t||n)(Xe(mxe))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const L7="print",Axe={alias:L7,mediaQuery:L7,priority:1e3};let vxe=(()=>{class n{constructor(t,i,r){this.breakpoints=t,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new _xe,this.deactivations=[]}withPrintQuery(t){return[...t,L7]}isPrintEvent(t){return t.mediaQuery.startsWith(L7)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(b9)}updateEvent(t){let i=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(i=this.getEventBreakpoints(t)[0],t.mediaQuery=i?.mediaQuery??""),CX(t,i)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new R8(!0,L7))),t.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(t){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const r=this.breakpoints.findByQuery(i.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),o=!this.formerActivations&&t.activatedBreakpoints.includes(r);(s||o)&&(this.deactivations.push(r),this.deactivations.sort(b9))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(Xe(GB),Xe(Eu),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _xe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(Axe),e.sort(b9),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function yxe(n){return n?.mediaQuery.startsWith(L7)??!1}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let Ua=(()=>{class n{constructor(t,i,r){this.matchMedia=t,this.breakpoints=i,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Je,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);if(i){t=CX(t,i);const r=this.activatedBreakpoints.indexOf(i);t.matches&&-1===r?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(b9),this.updateStyles()):!t.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(b9),this.updateStyles())}}init(t,i,r,s,o=[]){IX(this.updateMap,t,i,r),IX(this.clearMap,t,i,s),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,r){const s=this.elementMap.get(t);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(o)return o.get(i)}}hasValue(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(t,i,r,s){let o=this.elementMap.get(t);if(o){const c=(o.get(s)??new Map).set(i,r);o.set(s,c),this.elementMap.set(t,o)}else o=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(t,o);const a=this.getValue(t,i);void 0!==a&&this.updateElement(t,i,a)}trackValue(t,i){return this.subject.asObservable().pipe(jo(r=>r.element===t&&r.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(t);s&&s.forEach((o,a)=>{this.updateElement(i,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(t,o),s){const a=s.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const r=this.clearMap.get(t);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,r){const s=this.updateMap.get(t);if(s){const o=s.get(i);o&&(o(r),this.subject.next({element:t,key:i,value:r}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(t));const r=this.elementMap.get(t);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(t,i,s.get(i)):s.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let r=this.elementKeyMap.get(t);r||(r=new Set,this.elementKeyMap.set(t,r)),r.add(i)}watchExtraTriggers(t,i,r){if(r&&r.length){let s=this.watcherMap.get(t);if(s||(s=new Map,this.watcherMap.set(t,s)),!s.get(i)){const a=al(...r).subscribe(()=>{const c=this.getValue(t,i);this.updateElement(t,i,c)});s.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=t.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const r=t.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const t=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(Ca(this.hook.interceptEvents(this)),jo(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(Xe(UB),Xe(GB),Xe(vxe))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function IX(n,e,t,i){if(void 0!==i){const r=n.get(e)??new Map;r.set(t,i),n.set(e,r)}}let l1=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Je,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(t);(!o||!s)&&(o=r.buildStyles(t,i),s&&this.styleCache.set(t,o)),this.mru={...o},this.applyStyleToElement(o),r.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[r,s]=this.styler.getFlowDirection(t);if(!s&&i){const o=_X(r);this.styler.applyStyleToElements(o,[t])}return r.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,r=this.nativeElement){this.styler.applyStyleToElement(r,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(I1),G(xa),G(Ua))},n.\u0275dir=ht({type:n,features:[wr]}),n})();function BX(n,e="1",t="1"){let i=[e,t,n],r=n.indexOf("calc");if(r>0){i[2]=RX(n.substring(r).trim());let s=n.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=RX(n.trim());else{let s=n.split(" ");i=3===s.length?s:[e,t,n]}return i}function RX(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function ix(n,e){if(void 0===e)return n;const t=i=>{const r=+i.slice(0,-"x".length);return n.endsWith("x")&&!isNaN(r)?`${r*e.value}${e.unit}`:n};return n.includes(" ")?n.split(" ").map(t).join(" "):t(n)}let xxe=(()=>{class n extends I1{buildStyles(t,{display:i}){const r=_X(t);return{...r,display:"none"===i?i:r.display}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bxe=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let Mxe=(()=>{class n extends l1{constructor(t,i,r,s,o){super(t,r,i,s),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=kX.get(r)??new Map,kX.set(r,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:r}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(xa),G(xxe),G(Ua),G(Eu))},n.\u0275dir=ht({type:n,features:[zt]}),n})(),Cd=(()=>{class n extends Mxe{constructor(){super(...arguments),this.inputs=bxe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[zt]}),n})();const kX=new Map,PX={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let Sxe=(()=>{class n extends I1{constructor(t,i){super(),this._styler=t,this._config=i}buildStyles(t,i){return t.endsWith(rx)?function Fxe(n,e){const[t,i]=n.split(" "),s=l=>`-${l}`;let o="0px",a=s(i??t),c="0px";return"rtl"===e?c=s(t):o=s(t),{margin:`0px ${o} ${a} ${c}`}}(t=ix(t=t.slice(0,t.indexOf(rx)),this._config.multiplier),i.directionality):{}}sideEffect(t,i,r){const s=r.items;if(t.endsWith(rx)){const o=function Rxe(n,e){const[t,i]=n.split(" ");let s="0px",a="0px";return"rtl"===e?a=t:s=t,{padding:`0px ${s} ${i??t} ${a}`}}(t=ix(t=t.slice(0,t.indexOf(rx)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(o,r.items)}else{t=ix(t,this._config.multiplier),t=this.addFallbackUnit(t);const o=s.pop(),a=function kxe(n,e){const t=HX(e.directionality,e.layout),i={...PX};return i[t]=n,i}(t,r);this._styler.applyStyleToElements(a,s),this._styler.applyStyleToElements(PX,[o])}}addFallbackUnit(t){return isNaN(+t)?t:`${t}${this._config.defaultUnit}`}}return n.\u0275fac=function(t){return new(t||n)(Xe(xa),Xe(Eu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Exe=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let Txe=(()=>{class n extends l1{constructor(t,i,r,s,o,a){super(t,o,s,a),this.zone=i,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new Je;const c=[this.directionality.change,this.observerSubject.asObservable()];this.init(c),this.marshal.trackValue(this.nativeElement,"layout").pipe(D1(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const t=this.nativeElement.children,i=[];for(let r=t.length;r--;)i[r]=t[r];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(t){const r=t.value.split(" ");this.layout=r[0],nx.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(t){const i=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const o=+this.styler.lookupStyle(r,"order"),a=+this.styler.lookupStyle(s,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(i.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=Lxe:"row"===s&&"rtl"!==r?this.styleCache=Ixe:"column"===s&&"rtl"===r?this.styleCache=Dxe:"column"===s&&"rtl"!==r&&(this.styleCache=Bxe),this.addStyles(t,{directionality:r,items:i,layout:s})}}clearStyles(){const t=Object.keys(this.mru).length>0,i=t?"padding":HX(this.directionality.value,this.layout);t&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(t){const i=this.marshal.getValue(t,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(t,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{typeof MutationObserver<"u"&&(this.observer=new MutationObserver(t=>{t.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(sr),G(ld),G(xa),G(Sxe),G(Ua))},n.\u0275dir=ht({type:n,features:[zt]}),n})(),F8=(()=>{class n extends Txe{constructor(){super(...arguments),this.inputs=Exe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[zt]}),n})();const Lxe=new Map,Dxe=new Map,Ixe=new Map,Bxe=new Map,rx=" grid";function HX(n,e){switch(e){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===n?"margin-left":"margin-right";case"row-reverse":return"rtl"===n?"margin-right":"margin-left"}}let Pxe=(()=>{class n extends I1{constructor(t){super(),this.layoutConfig=t}buildStyles(t,i){let[r,s,...o]=t.split(" "),a=o.join(" ");const c=i.direction.indexOf("column")>-1?"column":"row",l=x9(c)?"max-width":"max-height",u=x9(c)?"min-width":"min-height",f=String(a).indexOf("calc")>-1,p=f||"auto"===a,g=String(a).indexOf("%")>-1&&!f,_=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let y=f||_;r="0"==r?0:r,s="0"==s?0:s;const w=!r&&!s;let C={};const b={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const M=!1!==this.layoutConfig.useColumnBasisZero;a="row"===c?"0%":M?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!y&&!g&&!isNaN(a)&&(a+="%"),"0%"===a&&(y=!0),"0px"===a&&(a="0%"),C=Rh(b,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":y?a:"100%"}:{flex:`${r} ${s} ${y?a:"100%"}`})}return C.flex||C["flex-grow"]||(C=Rh(b,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(C[u]=w||y&&r?a:null,C[l]=w||!p&&s?a:null),C[u]||C[l]?i.hasWrap&&(C[f?"flex-basis":"flex"]=C[l]?f?C[l]:`${r} ${s} ${C[l]}`:f?C[u]:`${r} ${s} ${C[u]}`):C=Rh(b,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),Rh(C,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)(Xe(Eu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hxe=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let zxe=(()=>{class n extends l1{constructor(t,i,r,s,o){super(t,s,i,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(D1(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(D1(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const r=t.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=Vxe:s&&!o?this.styleCache=Oxe:!s&&o?this.styleCache=Uxe:!s&&!o&&(this.styleCache=Nxe);const c=BX(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(c.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const i=BX(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(xa),G(Eu),G(Pxe),G(Ua))},n.\u0275dir=ht({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[zt]}),n})(),sx=(()=>{class n extends zxe{constructor(){super(...arguments),this.inputs=Hxe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[zt]}),n})();const Oxe=new Map,Nxe=new Map,Vxe=new Map,Uxe=new Map;let hbe=(()=>{class n extends I1{buildStyles(t,i){const r={},[s,o]=t.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return Rh(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?x9(i.layout)?null:"100%":null,"max-height":"stretch"===o&&x9(i.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fbe=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let dbe=(()=>{class n extends l1{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(D1(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=vbe:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=ybe:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=_be:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=wbe:"column-reverse"===i&&!r&&(this.styleCache=Abe):this.styleCache=gbe:this.styleCache=mbe:this.styleCache=pbe,this.addStyles(t,{layout:i,inline:r})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),nx.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(xa),G(hbe),G(Ua))},n.\u0275dir=ht({type:n,features:[zt]}),n})(),xd=(()=>{class n extends dbe{constructor(){super(...arguments),this.inputs=fbe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[zt]}),n})();const pbe=new Map,gbe=new Map,mbe=new Map,Abe=new Map,vbe=new Map,_be=new Map,ybe=new Map,wbe=new Map;let zX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[OB,w8]}),n})();class Fbe{constructor(e,t,i=!0){this.key=e,this.value=t,this.key=i?e.replace(/['"]/g,"").trim():e.trim(),this.value=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=this.value.replace(/;/,"")}}function OX(n){let e=typeof n;return"object"===e?n.constructor===Array?"array":n.constructor===Set?"set":"object":e}function VX(n){const[e,...t]=n.split(":");return new Fbe(e,t.join(":"))}function UX(n,e){return e.key&&(n[e.key]=e.value),n}let Hbe=(()=>{class n extends l1{constructor(t,i,r,s,o,a,c,l,u){super(t,null,i,r),this.sanitizer=s,this.ngStyleInstance=c,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new rd(t,o,a)),this.init();const f=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(f),this.isServer=l&&p7(u)}updateWithValue(t){const i=this.buildStyleMap(t);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...i},this.isServer&&this.applyStyleToElement(i),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(t){const i=r=>this.sanitizer.sanitize(Us.STYLE,r)??"";if(t)switch(OX(t)){case"string":return GX(function kbe(n,e=";"){return String(n).trim().split(e).map(t=>t.trim()).filter(t=>""!==t)}(t),i);case"array":return GX(t,i);default:return function NX(n,e){let t=[];return"set"===OX(n)?n.forEach(i=>t.push(i)):Object.keys(n).forEach(i=>{t.push(`${i}:${n[i]}`)}),function Pbe(n,e){return n.map(VX).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(UX,{})}(t,e)}(t,i)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(xa),G(Ua),G(A8),G(g8),G(Go),G(rd,10),G(T7),G(H3))},n.\u0275dir=ht({type:n,features:[zt]}),n})();const zbe=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let M9=(()=>{class n extends Hbe{constructor(){super(...arguments),this.inputs=zbe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[zt]}),n})();function GX(n,e){return n.map(VX).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(UX,{})}let QX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[OB]}),n})();function Obe(n,e){1&n&&(O(0,"mat-icon"),V(1,"close"),N())}function Nbe(n,e){1&n&&(O(0,"mat-icon"),V(1,"menu"),N())}function Vbe(n,e){1&n&&(O(0,"span"),V(1,"Close"),N())}function Ube(n,e){if(1&n&&(O(0,"span"),V(1),N()),2&n){const t=pn();ae(1),a7(t.title)}}function Gbe(n,e){1&n&&(O(0,"mat-icon"),V(1,"light_mode"),N())}function Qbe(n,e){1&n&&(O(0,"mat-icon"),V(1,"dark_mode"),N())}const Wbe=function(n){return{transform:n}};let jbe=(()=>{class n{constructor(t){this.appService=t,this.mini=!0,this.collapsed=!0,this.version="2023.1.0",this.title=this.appService.title}open(){this.mini&&(this.collapsed=!1),this.mini=!this.mini}click(){this.collapsed=!0,!0===this.appService.fullscreen$.value&&this.appService.fullscreen$.next(!1)}ngOnInit(){}get darkMode(){return this.appService.darkMode}set darkMode(t){this.appService.setDarkMode(t,!0)}}return n.\u0275fac=function(t){return new(t||n)(G(To))},n.\u0275cmp=On({type:n,selectors:[["app-sidemenu"]],hostVars:4,hostBindings:function(t,i){2&t&&Gi("mini",i.mini)("collapsed",i.collapsed)},decls:84,vars:21,consts:[[1,"side"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1",1,"menu"],["mat-list-item","",3,"click"],[4,"ngIf"],["mat-list-item","",1,"title"],[2,"opacity","0","transition","0"],["mat-list-item","","routerLink","/house","routerLinkActive","active",3,"disabled","click"],["house2d","routerLinkActive"],[2,"font-family","Material Icons Outlined"],["mat-list-item","","routerLink","/house3d","routerLinkActive","active",3,"disabled","click"],["house3d","routerLinkActive"],["mat-list-item","","routerLink","/stairs","routerLinkActive","active",3,"disabled","click"],["stairs","routerLinkActive"],["mat-list-item","","routerLink","/construction","routerLinkActive","active",3,"disabled","click"],["construction","routerLinkActive"],["mat-list-item","","routerLink","/wired","routerLinkActive","active",3,"disabled","click"],["wired","routerLinkActive"],["mat-list-item","","routerLink","/costs","routerLinkActive","active",3,"disabled","click"],["costs","routerLinkActive"],["mat-list-item","","routerLink","/installations","routerLinkActive","active",3,"disabled","click"],["installations","routerLinkActive"],["mat-list-item","","routerLink","/planning","routerLinkActive","active",3,"disabled","click"],["planning","routerLinkActive"],["mat-list-item","","routerLink","/about","routerLinkActive","active",3,"disabled","click"],["about","routerLinkActive"],["fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","16px"],[1,"version"],["mat-list-item","",2,"opacity","0.7",3,"click"],[3,"ngStyle"]],template:function(t,i){if(1&t&&(O(0,"div",0)(1,"mat-action-list",1)(2,"button",2),mn("click",function(){return i.open()}),fn(3,Obe,2,0,"mat-icon",3),fn(4,Nbe,2,0,"mat-icon",3),fn(5,Vbe,2,0,"span",3),fn(6,Ube,2,1,"span",3),N(),O(7,"button",4)(8,"mat-icon",5),V(9,"gite"),N(),O(10,"span"),V(11),N()(),O(12,"button",6,7),mn("click",function(){return i.click()}),O(14,"mat-icon",8),V(15,"home"),N(),O(16,"span"),V(17,"The house 2D"),N()(),O(18,"button",9,10),mn("click",function(){return i.click()}),O(20,"mat-icon",8),V(21,"home"),N(),O(22,"span"),V(23,"The house 3D"),N()(),O(24,"button",11,12),mn("click",function(){return i.click()}),O(26,"mat-icon",8),V(27,"stairs"),N(),O(28,"span"),V(29,"Stairs"),N()(),O(30,"button",13,14),mn("click",function(){return i.click()}),O(32,"mat-icon"),V(33,"handyman"),N(),O(34,"span"),V(35,"Construction"),N()(),O(36,"button",15,16),mn("click",function(){return i.click()}),O(38,"mat-icon"),V(39,"bolt"),N(),O(40,"span"),V(41,"Wired"),N()(),O(42,"button",17,18),mn("click",function(){return i.click()}),O(44,"mat-icon",8),V(45,"savings"),N(),O(46,"span"),V(47,"Costs"),N()(),O(48,"button",19,20),mn("click",function(){return i.click()}),O(50,"mat-icon"),V(51,"solar_power"),N(),O(52,"span"),V(53,"Installations"),N()(),O(54,"button",21,22),mn("click",function(){return i.click()}),O(56,"mat-icon"),V(57,"calendar_month"),N(),O(58,"span"),V(59,"Planning"),N()(),O(60,"button",23,24),mn("click",function(){return i.click()}),O(62,"mat-icon"),V(63,"people_outline"),N(),O(64,"span"),V(65,"About us"),N()(),rt(66,"div",25),O(67,"button",26),mn("click",function(){return i.darkMode=!i.darkMode}),O(68,"mat-icon",5),V(69,"dark_mode"),N(),O(70,"span",27),fn(71,Gbe,2,0,"mat-icon",3),fn(72,Qbe,2,0,"mat-icon",3),O(73,"div"),V(74),N()()(),O(75,"div",28),V(76),rt(77,"span"),V(78," Version"),N(),O(79,"button",29),mn("click",function(){return i.collapsed=!i.collapsed}),O(80,"mat-icon",30),V(81,"double_arrow"),N(),O(82,"span"),V(83,"Collapse"),N()()()()),2&t){const r=Qo(13),s=Qo(19),o=Qo(25),a=Qo(31),c=Qo(37),l=Qo(43),u=Qo(49),f=Qo(55),p=Qo(61);ae(3),Ve("ngIf",!i.mini),ae(1),Ve("ngIf",i.mini),ae(1),Ve("ngIf",!i.mini),ae(1),Ve("ngIf",i.mini),ae(5),a7(i.title),ae(1),Ve("disabled",r.isActive),ae(6),Ve("disabled",s.isActive),ae(6),Ve("disabled",o.isActive),ae(6),Ve("disabled",a.isActive),ae(6),Ve("disabled",c.isActive),ae(6),Ve("disabled",l.isActive),ae(6),Ve("disabled",u.isActive),ae(6),Ve("disabled",f.isActive),ae(6),Ve("disabled",p.isActive),ae(11),Ve("ngIf",i.darkMode),ae(1),Ve("ngIf",!i.darkMode),ae(2),si("",i.darkMode?"Light":"Dark"," mode"),ae(2),si("",i.version," "),ae(4),Ve("ngStyle",w0(19,Wbe,"rotate("+(i.collapsed?0:-180)+"deg) scale(0.7)"))}},dependencies:[x4,rd,D8,dX,mX,Cd,F8,xd,sx,M9,l9,eq],styles:[".side[_ngcontent-%COMP%]{top:0;position:fixed;display:flex;flex-direction:column;max-width:200px;overflow:hidden;transition:.6s;height:100vh;max-height:100vh;border-right:1px solid var(--color-30);border-bottom:1px solid var(--color-30)}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{height:100vh;padding:0}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{min-height:56px;white-space:nowrap;opacity:1;transition:.4s}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transition:.4s;overflow:initial}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:initial;pointer-events:none;opacity:.7}[_nghost-%COMP%]{display:flex;flex-direction:row;z-index:9999}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-width:50px}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{opacity:.5}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:hover{opacity:1}.mini[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-height:50px}.version[_ngcontent-%COMP%]{padding:0 8px 8px;color:var(--color-30);white-space:nowrap}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:20px;display:inline-block}"]}),n})(),$be=(()=>{class n{constructor(t,i){this.appService=t,this.router=i,this.onStart=!0}ngOnInit(){this.router.events.pipe(jo(t=>t instanceof xu),$t(t=>t.urlAfterRedirects.split("?")[0]),function uye(n,e){return Mn((t,i)=>{const r=new Set;t.subscribe(yn(i,s=>{const o=n?n(s):s;r.has(o)||(r.add(o),i.next(s))})),e?.subscribe(yn(i,()=>r.clear(),st))})}()).subscribe(t=>{this.onStart?this.onStart=!1:window.scrollTo(0,0)})}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)(G(To),G(c1))},n.\u0275cmp=On({type:n,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"mat-button","mat-primary",2,"display","none"],["primary",""]],template:function(t,i){1&t&&(rt(0,"app-sidemenu")(1,"color")(2,"div",0,1),O(4,"main"),rt(5,"router-outlet"),N())},dependencies:[bC,dye,jbe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}main[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}.mat-drawer-content[_ngcontent-%COMP%]{overflow-y:hidden}"]}),n})();class WB{}const kh="*";function Wc(n,e){return{type:7,name:n,definitions:e,options:{}}}function ia(n,e=null){return{type:4,styles:e,timings:n}}function WX(n,e=null){return{type:3,steps:n,options:e}}function jX(n,e=null){return{type:2,steps:n,options:e}}function Wi(n){return{type:6,styles:n,offset:null}}function ra(n,e,t){return{type:0,name:n,styles:e,options:t}}function da(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function jB(n=null){return{type:9,options:n}}function $B(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function $X(n){Promise.resolve().then(n)}class S9{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){$X(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class qX{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?$X(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function KX(n){return new jt(3e3,!1)}function DMe(){return typeof window<"u"&&typeof window.document<"u"}function KB(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function bd(n){switch(n.length){case 0:return new S9;case 1:return n[0];default:return new qX(n)}}function XX(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let c=-1,l=null;if(i.forEach(u=>{const f=u.get("offset"),p=f==c,g=p&&l||new Map;u.forEach((_,y)=>{let w=y,C=_;if("offset"!==y)switch(w=e.normalizePropertyName(w,o),C){case"!":C=r.get(y);break;case kh:C=s.get(y);break;default:C=e.normalizeStyleValue(y,w,C,o)}g.set(w,C)}),p||a.push(g),l=g,c=f}),o.length)throw function vMe(n){return new jt(3502,!1)}();return a}function XB(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&YB(t,"start",n)));break;case"done":n.onDone(()=>i(t&&YB(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&YB(t,"destroy",n)))}}function YB(n,e,t){const s=ZB(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function ZB(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function N3(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function YX(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let JB=(n,e)=>!1,ZX=(n,e,t)=>[],JX=null;function eR(n){const e=n.parentNode||n.host;return e===JX?null:e}(KB()||typeof Element<"u")&&(DMe()?(JX=(()=>document.documentElement)(),JB=(n,e)=>{for(;e;){if(e===n)return!0;e=eR(e)}return!1}):JB=(n,e)=>n.contains(e),ZX=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let k8=null,eY=!1;const tY=JB,nY=ZX;let iY=(()=>{class n{validateStyleProperty(t){return function BMe(n){k8||(k8=function RMe(){return typeof document<"u"?document.body:null}()||{},eY=!!k8.style&&"WebkitAppearance"in k8.style);let e=!0;return k8.style&&!function IMe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in k8.style,!e&&eY&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in k8.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return tY(t,i)}getParentElement(t){return eR(t)}query(t,i,r){return nY(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],c){return new S9(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),tR=(()=>{class n{}return n.NOOP=new iY,n})();const nR="ng-enter",ox="ng-leave",ax="ng-trigger",cx=".ng-trigger",sY="ng-animating",iR=".ng-animating";function Ph(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:rR(parseFloat(e[1]),e[2])}function rR(n,e){return"s"===e?1e3*n:n}function lx(n,e,t){return n.hasOwnProperty("duration")?n:function PMe(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(KX()),{duration:0,delay:0,easing:""};r=rR(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=rR(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(function Xbe(){return new jt(3100,!1)}()),a=!0),s<0&&(e.push(function Ybe(){return new jt(3101,!1)}()),a=!0),a&&e.splice(c,0,KX())}return{duration:r,delay:s,easing:o}}(n,e,t)}function E9(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function oY(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Md(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function cY(n,e,t){return t?e+":"+t+";":""}function lY(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=cY(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=cY(0,NMe(t),n.style[t]));n.setAttribute("style",e)}function D0(n,e,t){n.style&&(e.forEach((i,r)=>{const s=oR(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),KB()&&lY(n))}function P8(n,e){n.style&&(e.forEach((t,i)=>{const r=oR(i);n.style[r]=""}),KB()&&lY(n))}function T9(n){return Array.isArray(n)?1==n.length?n[0]:jX(n):n}const sR=new RegExp("{{\\s*(.+?)\\s*}}","g");function uY(n){let e=[];if("string"==typeof n){let t;for(;t=sR.exec(n);)e.push(t[1]);sR.lastIndex=0}return e}function L9(n,e,t){const i=n.toString(),r=i.replace(sR,(s,o)=>{let a=e[o];return null==a&&(t.push(function Jbe(n){return new jt(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function ux(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const OMe=/-+([a-z0-9])/g;function oR(n){return n.replace(OMe,(...e)=>e[1].toUpperCase())}function NMe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function V3(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function eMe(n){return new jt(3004,!1)}()}}function hY(n,e){return window.getComputedStyle(n)[e]}function jMe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function $Me(n,e,t){if(":"==n[0]){const c=function qMe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function pMe(n){return new jt(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function dMe(n){return new jt(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(fY(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(fY(o,r))}(i,t,e)):t.push(n),t}const px=new Set(["true","1"]),gx=new Set(["false","0"]);function fY(n,e){const t=px.has(n)||gx.has(n),i=px.has(e)||gx.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?px.has(n):gx.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?px.has(e):gx.has(e)),o&&a}}const KMe=new RegExp("s*:selfs*,?","g");function aR(n,e,t,i){return new XMe(n).build(e,t,i)}class XMe{constructor(e){this._driver=e}build(e,t,i){const r=new JMe(t);return this._resetContextStyleTimingState(r),V3(this,T9(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function nMe(){return new jt(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(function iMe(){return new jt(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{uY(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(ux(s.values()),t.errors.push(function rMe(n,e){return new jt(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=V3(this,T9(e.animation),t);return{type:1,matchers:jMe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:H8(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>V3(this,i,t)),options:H8(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=V3(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:H8(e.options)}}visitAnimate(e,t){const i=function tSe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return cR(lx(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=cR(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=lx(t,e);return cR(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Wi({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};i.easing&&(l.easing=i.easing),o=Wi(l)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===kh?i.push(a):t.errors.push(new jt(3002,!1)):i.push(oY(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c);let f=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function oMe(n,e,t,i,r){return new jt(3010,!1)}()),f=!1),s=u.startTime),f&&l.set(c,{startTime:s,endTime:r}),t.options&&function zMe(n,e,t){const i=e.params||{},r=uY(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function Zbe(n){return new jt(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function aMe(){return new jt(3011,!1)}()),i;let s=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(C=>{const b=this._makeStyleAst(C,t);let M=null!=b.offset?b.offset:function eSe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(b.styles),T=0;return null!=M&&(s++,T=b.offset=M),c=c||T<0||T>1,a=a||T<l,l=T,o.push(T),b});c&&t.errors.push(function cMe(){return new jt(3012,!1)}()),a&&t.errors.push(function lMe(){return new jt(3200,!1)}());const f=e.steps.length;let p=0;s>0&&s<f?t.errors.push(function uMe(){return new jt(3202,!1)}()):0==s&&(p=1/(f-1));const g=f-1,_=t.currentTime,y=t.currentAnimateTimings,w=y.duration;return u.forEach((C,b)=>{const M=p>0?b==g?1:p*b:o[b],T=M*w;t.currentTime=_+y.delay+T,y.duration=T,this._validateStyleAst(C,t),C.offset=M,i.styles.push(C)}),i}visitReference(e,t){return{type:8,animation:V3(this,T9(e.animation),t),options:H8(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:H8(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:H8(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function YMe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(KMe,"")),n=n.replace(/@\*/g,cx).replace(/@\w+/g,t=>cx+"-"+t.slice(1)).replace(/:animating/g,iR),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,N3(t.collectedStyles,t.currentQuerySelector,new Map);const a=V3(this,T9(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:H8(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function hMe(){return new jt(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:lx(e.timings,t.errors,!0);return{type:12,animation:V3(this,T9(e.animation),t),timings:i,options:null}}}class JMe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function H8(n){return n?(n=E9(n)).params&&(n.params=function ZMe(n){return n?E9(n):null}(n.params)):n={},n}function cR(n,e,t){return{duration:n,delay:e,easing:t}}function lR(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class mx{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const rSe=new RegExp(":enter","g"),oSe=new RegExp(":leave","g");function uR(n,e,t,i,r,s=new Map,o=new Map,a,c,l=[]){return(new aSe).buildKeyframes(n,e,t,i,r,s,o,a,c,l)}class aSe{buildKeyframes(e,t,i,r,s,o,a,c,l,u=[]){l=l||new mx;const f=new hR(e,t,l,r,s,u,[]);f.options=c;const p=c.delay?Ph(c.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([o],null,f.errors,c),V3(this,i,f);const g=f.timelines.filter(_=>_.containsAnimation());if(g.length&&a.size){let _;for(let y=g.length-1;y>=0;y--){const w=g[y];if(w.element===t){_=w;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,f.errors,c)}return g.length?g.map(_=>_.buildKeyframes()):[lR(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimateRefDelay(e.animation,t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimateRefDelay(e,t,i){const r=e.options?.delay;if(!r)return;let s;s="string"==typeof r?Ph(L9(r,e.options?.params??{},t.errors)):r,i.delayNextStep(s)}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Ph(i.duration):null,a=null!=i.delay?Ph(i.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),V3(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ax);const o=Ph(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>V3(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ph(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),V3(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return lx(t.params?L9(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Ph(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ax);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;const f=t.createSubContext(e.options,l);s&&f.delayNextStep(s),l===t.element&&(c=f.currentTimeline),V3(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const u=t.currentTimeline;c&&u.delayNextStep(c);const f=u.currentTime;V3(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const Ax={};class hR{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ax,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new vx(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ph(i.duration)),null!=i.delay&&(r.delay=Ph(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=L9(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new hR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Ax,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new cSe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(rSe,"."+this._enterClassName)).replace(oSe,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=i);0!==i&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&0==a.length&&o.push(function fMe(n){return new jt(3014,!1)}()),a}}class vx{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new vx(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||kh),this._currentKeyframe.set(t,kh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function lSe(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,kh)}else Md(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const l=L9(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??kh),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const l=Md(a,new Map,this._backFill);l.forEach((u,f)=>{"!"===u?e.add(f):u===kh&&t.add(f)}),i||l.set("offset",c/this.duration),r.push(l)});const s=e.size?ux(e.values()):[],o=t.size?ux(t.values()):[];if(i){const a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return lR(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class cSe extends vx{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,c=Md(e[0]);c.set("offset",0),s.push(c);const l=Md(e[0]);l.set("offset",gY(a)),s.push(l);const u=e.length-1;for(let f=1;f<=u;f++){let p=Md(e[f]);const g=p.get("offset");p.set("offset",gY((t+g*i)/o)),s.push(p)}i=o,t=0,r="",e=s}return lR(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function gY(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class fR{}const uSe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class hSe extends fR{normalizePropertyName(e,t){return oR(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(uSe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function tMe(n,e){return new jt(3005,!1)}())}return o+s}}function mY(n,e,t,i,r,s,o,a,c,l,u,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:f,errors:p}}const dR={};class AY{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function fSe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,c,l,u){const f=[],p=this.ast.options&&this.ast.options.params||dR,_=this.buildStyles(i,a&&a.params||dR,f),y=c&&c.params||dR,w=this.buildStyles(r,y,f),C=new Set,b=new Map,M=new Map,T="void"===r,I={params:dSe(y,p),delay:this.ast.options?.delay},F=u?[]:uR(e,t,this.ast.animation,s,o,_,w,I,l,f);let P=0;if(F.forEach(k=>{P=Math.max(k.duration+k.delay,P)}),f.length)return mY(t,this._triggerName,i,r,T,_,w,[],[],b,M,P,f);F.forEach(k=>{const W=k.element,ie=N3(b,W,new Set);k.preStyleProps.forEach(me=>ie.add(me));const Te=N3(M,W,new Set);k.postStyleProps.forEach(me=>Te.add(me)),W!==t&&C.add(W)});const R=ux(C.values());return mY(t,this._triggerName,i,r,T,_,w,F,R,b,M,P)}}function dSe(n,e){const t=E9(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class pSe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=E9(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=L9(o,r,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(c,o)})}),i}}class mSe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new pSe(r.style,r.options&&r.options.params||{},i))}),vY(this.states,"true","1"),vY(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new AY(e,r,this.states))}),this.fallbackTransition=function ASe(n,e,t){return new AY(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function vY(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const vSe=new mx;class _Se{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=aR(this._driver,t,i,[]);if(i.length)throw function _Me(n){return new jt(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=XX(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=uR(this._driver,t,s,nR,ox,new Map,new Map,i,vSe,r),o.forEach(u=>{const f=N3(a,u.element,new Map);u.postStyleProps.forEach(p=>f.set(p,null))})):(r.push(function yMe(){return new jt(3300,!1)}()),o=[]),r.length)throw function wMe(n){return new jt(3504,!1)}();a.forEach((u,f)=>{u.forEach((p,g)=>{u.set(g,this._driver.computeStyle(f,g,kh))})});const l=bd(o.map(u=>{const f=a.get(u.element);return this._buildPlayer(u,new Map,f)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function CMe(n){return new jt(3301,!1)}();return t}listen(e,t,i,r){const s=ZB(t,"","","");return XB(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const _Y="ng-animate-queued",pR="ng-animate-disabled",bSe=[],yY={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},MSe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},M4="__ng_removed";class gR{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function LSe(n){return n??null}(i?e.value:e),i){const s=E9(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const D9="void",mR=new gR(D9);class SSe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,S4(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function xMe(n,e){return new jt(3302,!1)}();if(null==i||0==i.length)throw function bMe(n){return new jt(3303,!1)}();if(!function DSe(n){return"start"==n||"done"==n}(i))throw function MMe(n,e){return new jt(3400,!1)}();const s=N3(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=N3(this._engine.statesByElement,e,new Map);return a.has(t)||(S4(e,ax),S4(e,ax+"-"+t),a.set(t,mR)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function SMe(n){return new jt(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new AR(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(S4(e,ax),S4(e,ax+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new gR(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=mR),l.value!==D9&&c.value===l.value){if(!function RSe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,l.params)){const y=[],w=s.matchStyles(c.value,c.params,y),C=s.matchStyles(l.value,l.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{P8(e,w),D0(e,C)})}return}const p=N3(this._engine.playersByElement,e,[]);p.forEach(y=>{y.namespaceId==this.id&&y.triggerName==t&&y.queued&&y.destroy()});let g=s.matchTransition(c.value,l.value,e,l.params),_=!1;if(!g){if(!r)return;g=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:c,toState:l,player:o,isFallbackTransition:_}),_||(S4(e,_Y),o.onStart(()=>{D7(e,_Y)})),o.onDone(()=>{let y=this.players.indexOf(o);y>=0&&this.players.splice(y,1);const w=this._engine.playersByElement.get(e);if(w){let C=w.indexOf(o);C>=0&&w.splice(C,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,cx,!0);i.forEach(r=>{if(r[M4])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){const u=this.trigger(e,l,D9,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&bd(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const c=this._triggers.get(o).fallbackTransition,l=i.get(o)||mR,u=new gR(D9),f=new AR(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[M4];(!s||s===yY)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){S4(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const c=ZB(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,XB(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class ESe{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new SSe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=r.get(a);if(c){const l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(_x(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!_x(t))return;const s=t[M4];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),S4(e,pR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),D7(e,pR))}removeNode(e,t,i,r){if(_x(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[M4]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return _x(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,cx,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,iR,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return bd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[M4];if(t&&t.setForRemoval){if(e[M4]=yY,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(pR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)S4(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?bd(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function EMe(n){return new jt(3402,!1)}()}_flushAnimations(e,t){const i=new mx,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(K=>{u.add(K);const oe=this.driver.query(K,".ng-animate-queued",!0);for(let fe=0;fe<oe.length;fe++)u.add(oe[fe])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=xY(p,this.collectedEnterElements),_=new Map;let y=0;g.forEach((K,oe)=>{const fe=nR+y++;_.set(oe,fe),K.forEach(de=>S4(de,fe))});const w=[],C=new Set,b=new Set;for(let K=0;K<this.collectedLeaveElements.length;K++){const oe=this.collectedLeaveElements[K],fe=oe[M4];fe&&fe.setForRemoval&&(w.push(oe),C.add(oe),fe.hasAnimation?this.driver.query(oe,".ng-star-inserted",!0).forEach(de=>C.add(de)):b.add(oe))}const M=new Map,T=xY(p,Array.from(C));T.forEach((K,oe)=>{const fe=ox+y++;M.set(oe,fe),K.forEach(de=>S4(de,fe))}),e.push(()=>{g.forEach((K,oe)=>{const fe=_.get(oe);K.forEach(de=>D7(de,fe))}),T.forEach((K,oe)=>{const fe=M.get(oe);K.forEach(de=>D7(de,fe))}),w.forEach(K=>{this.processLeaveNode(K)})});const I=[],F=[];for(let K=this._namespaceList.length-1;K>=0;K--)this._namespaceList[K].drainQueuedTransitions(t).forEach(fe=>{const de=fe.player,Re=fe.element;if(I.push(de),this.collectedEnterElements.length){const Xt=Re[M4];if(Xt&&Xt.setForMove){if(Xt.previousTriggersValues&&Xt.previousTriggersValues.has(fe.triggerName)){const sn=Xt.previousTriggersValues.get(fe.triggerName),Sn=this.statesByElement.get(fe.element);if(Sn&&Sn.has(fe.triggerName)){const on=Sn.get(fe.triggerName);on.value=sn,Sn.set(fe.triggerName,on)}}return void de.destroy()}}const Ze=!f||!this.driver.containsElement(f,Re),Be=M.get(Re),wt=_.get(Re),ut=this._buildInstruction(fe,i,wt,Be,Ze);if(ut.errors&&ut.errors.length)return void F.push(ut);if(Ze)return de.onStart(()=>P8(Re,ut.fromStyles)),de.onDestroy(()=>D0(Re,ut.toStyles)),void r.push(de);if(fe.isFallbackTransition)return de.onStart(()=>P8(Re,ut.fromStyles)),de.onDestroy(()=>D0(Re,ut.toStyles)),void r.push(de);const It=[];ut.timelines.forEach(Xt=>{Xt.stretchStartingKeyframe=!0,this.disabledNodes.has(Xt.element)||It.push(Xt)}),ut.timelines=It,i.append(Re,ut.timelines),o.push({instruction:ut,player:de,element:Re}),ut.queriedElements.forEach(Xt=>N3(a,Xt,[]).push(de)),ut.preStyleProps.forEach((Xt,sn)=>{if(Xt.size){let Sn=c.get(sn);Sn||c.set(sn,Sn=new Set),Xt.forEach((on,Ti)=>Sn.add(Ti))}}),ut.postStyleProps.forEach((Xt,sn)=>{let Sn=l.get(sn);Sn||l.set(sn,Sn=new Set),Xt.forEach((on,Ti)=>Sn.add(Ti))})});if(F.length){const K=[];F.forEach(oe=>{K.push(function TMe(n,e){return new jt(3505,!1)}())}),I.forEach(oe=>oe.destroy()),this.reportError(K)}const P=new Map,R=new Map;o.forEach(K=>{const oe=K.element;i.has(oe)&&(R.set(oe,oe),this._beforeAnimationBuild(K.player.namespaceId,K.instruction,P))}),r.forEach(K=>{const oe=K.element;this._getPreviousPlayers(oe,!1,K.namespaceId,K.triggerName,null).forEach(de=>{N3(P,oe,[]).push(de),de.destroy()})});const k=w.filter(K=>MY(K,c,l)),W=new Map;CY(W,this.driver,b,l,kh).forEach(K=>{MY(K,c,l)&&k.push(K)});const Te=new Map;g.forEach((K,oe)=>{CY(Te,this.driver,new Set(K),c,"!")}),k.forEach(K=>{const oe=W.get(K),fe=Te.get(K);W.set(K,new Map([...Array.from(oe?.entries()??[]),...Array.from(fe?.entries()??[])]))});const me=[],Q=[],he={};o.forEach(K=>{const{element:oe,player:fe,instruction:de}=K;if(i.has(oe)){if(u.has(oe))return fe.onDestroy(()=>D0(oe,de.toStyles)),fe.disabled=!0,fe.overrideTotalTime(de.totalTime),void r.push(fe);let Re=he;if(R.size>1){let Be=oe;const wt=[];for(;Be=Be.parentNode;){const ut=R.get(Be);if(ut){Re=ut;break}wt.push(Be)}wt.forEach(ut=>R.set(ut,Re))}const Ze=this._buildAnimation(fe.namespaceId,de,P,s,Te,W);if(fe.setRealPlayer(Ze),Re===he)me.push(fe);else{const Be=this.playersByElement.get(Re);Be&&Be.length&&(fe.parentPlayer=bd(Be)),r.push(fe)}}else P8(oe,de.fromStyles),fe.onDestroy(()=>D0(oe,de.toStyles)),Q.push(fe),u.has(oe)&&r.push(fe)}),Q.forEach(K=>{const oe=s.get(K.element);if(oe&&oe.length){const fe=bd(oe);K.setRealPlayer(fe)}}),r.forEach(K=>{K.parentPlayer?K.syncPlayerEvents(K.parentPlayer):K.destroy()});for(let K=0;K<w.length;K++){const oe=w[K],fe=oe[M4];if(D7(oe,ox),fe&&fe.hasAnimation)continue;let de=[];if(a.size){let Ze=a.get(oe);Ze&&Ze.length&&de.push(...Ze);let Be=this.driver.query(oe,iR,!0);for(let wt=0;wt<Be.length;wt++){let ut=a.get(Be[wt]);ut&&ut.length&&de.push(...ut)}}const Re=de.filter(Ze=>!Ze.destroyed);Re.length?ISe(this,oe,Re):this.processLeaveNode(oe)}return w.length=0,me.forEach(K=>{this.players.push(K),K.onDone(()=>{K.destroy();const oe=this.players.indexOf(K);this.players.splice(oe,1)}),K.play()}),me}elementContainsData(e,t){let i=!1;const r=t[M4];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==D9;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,u=l!==s,f=N3(i,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(g=>{const _=g.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),g.destroy(),f.push(g)})}P8(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,c=t.element,l=[],u=new Set,f=new Set,p=t.timelines.map(_=>{const y=_.element;u.add(y);const w=y[M4];if(w&&w.removedBeforeQueried)return new S9(_.duration,_.delay);const C=y!==c,b=function BSe(n){const e=[];return bY(n,e),e}((i.get(y)||bSe).map(P=>P.getRealPlayer())).filter(P=>!!P.element&&P.element===y),M=s.get(y),T=o.get(y),I=XX(0,this._normalizer,0,_.keyframes,M,T),F=this._buildPlayer(_,I,b);if(_.subTimeline&&r&&f.add(y),C){const P=new AR(e,a,y);P.setRealPlayer(F),l.push(P)}return F});l.forEach(_=>{N3(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>function TSe(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,_.element,_))}),u.forEach(_=>S4(_,sY));const g=bd(p);return g.onDestroy(()=>{u.forEach(_=>D7(_,sY)),D0(c,t.toStyles)}),f.forEach(_=>{N3(r,_,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new S9(e.duration,e.delay)}}class AR{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new S9,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>XB(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){N3(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function _x(n){return n&&1===n.nodeType}function wY(n,e){const t=n.style.display;return n.style.display=e??"none",t}function CY(n,e,t,i,r){const s=[];t.forEach(c=>s.push(wY(c)));const o=[];i.forEach((c,l)=>{const u=new Map;c.forEach(f=>{const p=e.computeStyle(l,f,r);u.set(f,p),(!p||0==p.length)&&(l[M4]=MSe,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>wY(c,s[a++])),o}function xY(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:r.has(l)?1:o(l),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function S4(n,e){n.classList?.add(e)}function D7(n,e){n.classList?.remove(e)}function ISe(n,e,t){bd(t).onDone(()=>n.processLeaveNode(e))}function bY(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof qX?bY(i.players,e):e.push(i)}}function MY(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class yx{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new ESe(e,t,i),this._timelineEngine=new _Se(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const c=[],u=aR(this._driver,s,c,[]);if(c.length)throw function AMe(n,e){return new jt(3404,!1)}();a=function gSe(n,e,t){return new mSe(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=YX(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=YX(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let kSe=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&D0(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(D0(this._element,this._initialStyles),this._endStyles&&(D0(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(P8(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(P8(this._element,this._endStyles),this._endStyles=null),D0(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function vR(n){let e=null;return n.forEach((t,i)=>{(function PSe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class SY{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:hY(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class HSe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return tY(e,t)}getParentElement(e){return eR(e)}query(e,t,i){return nY(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const c={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(c.easing=s);const l=new Map,u=o.filter(g=>g instanceof SY);(function VMe(n,e){return 0===n||0===e})(i,r)&&u.forEach(g=>{g.currentSnapshot.forEach((_,y)=>l.set(y,_))});let f=function HMe(n){return n.length?n[0]instanceof Map?n:n.map(e=>oY(e)):[]}(t).map(g=>Md(g));f=function UMe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,hY(n,a)))}}return e}(e,f,l);const p=function FSe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=vR(e[0]),e.length>1&&(i=vR(e[e.length-1]))):e instanceof Map&&(t=vR(e)),t||i?new kSe(n,t,i):null}(e,f);return new SY(e,f,c,p)}}let zSe=(()=>{class n extends WB{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Oo.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?jX(t):t;return EY(this._renderer,null,i,"register",[r]),new OSe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Xe(r3),Xe(Pi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class OSe extends class qbe{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new NSe(this._id,e,t||{},this._renderer)}}class NSe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return EY(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function EY(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const TY="@.disabled";let VSe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new LY("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=u=>{Array.isArray(u)?u.forEach(c):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(c),new USe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Xe(r3),Xe(yx),Xe(sr))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class LY{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==TY?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class USe extends LY{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==TY?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function GSe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function QSe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let WSe=(()=>{class n extends yx{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Pi),Xe(tR),Xe(fR),Xe(d7))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const DY=[{provide:WB,useClass:zSe},{provide:fR,useFactory:function jSe(){return new hSe}},{provide:yx,useClass:WSe},{provide:r3,useFactory:function $Se(n,e,t){return new VSe(n,e,t)},deps:[Jw,yx,sr]}],_R=[{provide:tR,useFactory:()=>new HSe},{provide:_4,useValue:"BrowserAnimations"},...DY],IY=[{provide:tR,useClass:iY},{provide:_4,useValue:"NoopAnimations"},...DY];let qSe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?IY:_R}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:_R,imports:[Ej]}),n})();const KSe=["*",[["mat-toolbar-row"]]],XSe=["*","mat-toolbar-row"],YSe=T8(class{constructor(n){this._elementRef=n}});let ZSe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),JSe=(()=>{class n extends YSe{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(a3),G(Pi))},n.\u0275cmp=On({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&Z1(r,ZSe,5),2&t){let s;ir(s=rr())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&Gi("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[zt],ngContentSelectors:XSe,decls:2,vars:0,template:function(t,i){1&t&&(Vc(KSe),T1(0),T1(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),eEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ni,Ni]}),n})();const tEe=["mat-button",""],nEe=["*"],rEe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],sEe=T8(f9(Dh(class{constructor(n){this._elementRef=n}})));let Cx=(()=>{class n extends sEe{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of rEe)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(L0),G(_4,8))},n.\u0275cmp=On({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&Wo(Ih,5),2&t){let r;ir(r=rr())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(Qs("disabled",i.disabled||null),Gi("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[zt],attrs:tEe,ngContentSelectors:nEe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Vc(),O(0,"span",0),T1(1),N(),rt(2,"span",1)(3,"span",2)),2&t&&(ae(2),Gi("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Ve("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[Ih],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),yR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Su,Ni,Ni]}),n})(),aEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[El,Ni,C8,C8,Ni]}),n})(),cEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),lEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[El,Ni,cEe,ud]}),n})();const uEe=["sliderWrapper"],E4=cd({passive:!1}),gEe={provide:Qc,useExisting:pr(()=>xx),multi:!0};class mEe{}const AEe=OC(T8(f9(class{constructor(n){this._elementRef=n}}),"accent"));let xx=(()=>{class n extends AEe{constructor(t,i,r,s,o,a,c,l){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=l,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Ar,this.input=new Ar,this.valueChange=new Ar,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=Fe.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!I9(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=I9(u)?function vEe(n,e){for(let t=0;t<n.touches.length;t++){const i=n.touches[t].target;if(e===i||e.contains(i))return n.touches[t].identifier}}(u,this._elementRef.nativeElement):void 0;const f=FY(u,this._touchId);if(f){const p=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(f),this._valueOnSlideStart=p,u.cancelable&&u.preventDefault(),p!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const f=FY(u,this._touchId);if(f){u.cancelable&&u.preventDefault();const p=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(f),p!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!I9(u)||"number"!=typeof this._touchId||wR(u.changedTouches,this._touchId))&&(u.cancelable&&u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=c,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=t.nativeElement;u.addEventListener("mousedown",this._pointerDown,E4),u.addEventListener("touchstart",this._pointerDown,E4)})}get invert(){return this._invert}set invert(t){this._invert=Br(t)}get max(){return this._max}set max(t){this._max=Cu(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Cu(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Cu(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Br(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Cu(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let i=Cu(t,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Br(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const t=this.percent,r=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const c=this._shouldInvertAxis();let l;l=this.vertical?c?"Bottom":"Top":c?"Right":"Left",a[`padding${l}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,E4),t.removeEventListener("touchstart",this._pointerDown,E4),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||b7(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const i=this._document,r=I9(t),o=r?"touchend":"mouseup";i.addEventListener(r?"touchmove":"mousemove",this._pointerMove,E4),i.addEventListener(o,this._pointerUp,E4),r&&i.addEventListener("touchcancel",this._pointerUp,E4);const a=this._getWindow();typeof a<"u"&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,E4),t.removeEventListener("mouseup",this._pointerUp,E4),t.removeEventListener("touchmove",this._pointerMove,E4),t.removeEventListener("touchend",this._pointerUp,E4),t.removeEventListener("touchcancel",this._pointerUp,E4);const i=this._getWindow();typeof i<"u"&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(t){const i=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(i+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),c=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(c,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let i=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(i*this.step/(this.max-this.min)))*this.step/i}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=RY(t)?t:0}_createChangeEvent(t=this.value){let i=new mEe;return i.source=this,i.value=t,i}_calculatePercentage(t){const i=((t||0)-this.min)/(this.max-this.min);return RY(i)?i:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,i=0,r=1){return Math.max(i,Math.min(t,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(L0),G(wc),G(ld,8),Jl("tabindex"),G(sr),G(Pi),G(_4,8))},n.\u0275cmp=On({type:n,selectors:[["mat-slider"]],viewQuery:function(t,i){if(1&t&&Wo(uEe,5),2&t){let r;ir(r=rr())&&(i._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,i){1&t&&mn("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(h8("tabIndex",i.tabIndex),Qs("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",i.valueText??i.displayValue)("aria-orientation",i.vertical?"vertical":"horizontal"),Gi("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[Xi([gEe]),zt],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,i){1&t&&(O(0,"div",0,1)(2,"div",2),rt(3,"div",3)(4,"div",4),N(),O(5,"div",5),rt(6,"div",6),N(),O(7,"div",7),rt(8,"div",8)(9,"div",9),O(10,"div",10)(11,"span",11),V(12),N()()()()),2&t&&(ae(3),Ve("ngStyle",i._getTrackBackgroundStyles()),ae(1),Ve("ngStyle",i._getTrackFillStyles()),ae(1),Ve("ngStyle",i._getTicksContainerStyles()),ae(1),Ve("ngStyle",i._getTicksStyles()),ae(1),Ve("ngStyle",i._getThumbContainerStyles()),ae(5),a7(i.displayValue))},dependencies:[rd],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),n})();function RY(n){return!isNaN(n)&&isFinite(n)}function I9(n){return"t"===n.type[0]}function FY(n,e){let t;return t=I9(n)?"number"==typeof e?wR(n.touches,e)||wR(n.changedTouches,e):n.touches[0]||n.changedTouches[0]:n,t?{x:t.clientX,y:t.clientY}:void 0}function wR(n,e){for(let t=0;t<n.length;t++)if(n[t].identifier===e)return n[t]}let _Ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[El,Ni,Ni]}),n})(),HY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),REe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Su,Ni,h9,HY,Ni,HY]}),n})();const HEe={provide:new Bt("mat-menu-scroll-strategy"),deps:[z3],useFactory:function PEe(n){return()=>n.scrollStrategies.reposition()}};let zEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[HEe],imports:[El,Ni,Su,hd,C8,Ni]}),n})();function OEe(n,e){}class bx{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let OY=(()=>{class n extends CI{constructor(t,i,r,s,o,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),f},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=vI(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=vI();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=vI())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(sB),G(Pi,8),G(bx),G(HC),G(sr),G(KA),G(L0))},n.\u0275cmp=On({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&Wo(xI,7),2&t){let r;ir(r=rr())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&Qs("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[zt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&fn(0,OEe,0,0,"ng-template",0)},dependencies:[xI],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class CR{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Je,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!b7(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const NY=new Bt("DialogScrollStrategy"),NEe=new Bt("DialogData"),VEe=new Bt("DefaultDialogConfig"),GEe={provide:NY,deps:[z3],useFactory:function UEe(n){return()=>n.scrollStrategies.block()}};let QEe=0,VY=(()=>{class n{constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je,this._afterOpenedAtThisLevel=new Je,this._ariaHiddenElements=new Map,this.afterAllClosed=fC(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(b8(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new bx,...i}).id=i.id||"cdk-dialog-"+QEe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new CR(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){xR(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){xR(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),xR(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new Wj({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:bx,useValue:r},{provide:CR,useValue:i},{provide:KA,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=OY;const c=new qA(a,r.viewContainerRef,y2.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,s){if(t instanceof tc){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new wI(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new qA(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:NEe,useValue:t.data},{provide:CR,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(ld,null,Hn.Optional))&&a.push({provide:ld,useValue:{value:t.direction,change:vi()}}),y2.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(Xe(z3),Xe(y2),Xe(VEe,8),Xe(n,12),Xe(lC),Xe(NY))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();function xR(n,e){let t=n.length;for(;t--;)e(n[t])}let WEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[VY,GEe],imports:[hd,ud,aB,ud]}),n})();function jEe(n,e){}const I7={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},$Ee={dialogContainer:Wc("dialogContainer",[ra("void, exit",Wi({opacity:0,transform:"scale(0.7)"})),ra("enter",Wi({transform:"none"})),da("* => enter",WX([ia("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",Wi({transform:"none",opacity:1})),$B("@*",jB(),{optional:!0})]),I7),da("* => void, * => exit",WX([ia("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",Wi({opacity:0})),$B("@*",jB(),{optional:!0})]),I7)])};class Mx{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=I7.params.enterAnimationDuration,this.exitAnimationDuration=I7.params.exitAnimationDuration}}let qEe=(()=>{class n extends OY{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,o,a,c,l),this._animationStateChanged=new Ar}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(sB),G(Pi,8),G(Mx),G(HC),G(sr),G(KA),G(L0))},n.\u0275cmp=On({type:n,selectors:[["ng-component"]],features:[zt],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),KEe=(()=>{class n extends qEe{constructor(t,i,r,s,o,a,c,l,u){super(t,i,r,s,o,a,c,u),this._changeDetectorRef=l,this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?this._openAnimationDone(i):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||I7.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||I7.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(sB),G(Pi,8),G(Mx),G(HC),G(sr),G(KA),G(wc),G(L0))},n.\u0275cmp=On({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,i){1&t&&oD("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(h8("id",i._config.id),Qs("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),lD("@dialogContainer",i._getAnimationState()))},features:[zt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&fn(0,jEe,0,0,"ng-template",0)},dependencies:[xI],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[$Ee.dialogContainer]}}),n})();class XEe{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Je,this._beforeClosed=new Je,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(jo(r=>"opened"===r.state),Tl(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(jo(r=>"closed"===r.state),Tl(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),al(this.backdropClick(),this.keydownEvents().pipe(jo(r=>27===r.keyCode&&!this.disableClose&&!b7(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function YEe(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(jo(t=>"closing"===t.state),Tl(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const ZEe=new Bt("MatDialogData"),JEe=new Bt("mat-dialog-default-options"),UY=new Bt("mat-dialog-scroll-strategy"),tTe={provide:UY,deps:[z3],useFactory:function eTe(n){return()=>n.scrollStrategies.block()}};let nTe=0,iTe=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=c,this._dialogContainerType=l,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je,this._afterOpenedAtThisLevel=new Je,this._idPrefix="mat-dialog-",this.afterAllClosed=fC(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(b8(void 0))),this._scrollStrategy=a,this._dialog=i.get(VY)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let r;(i={...this._defaultOptions||new Mx,...i}).id=i.id||`${this._idPrefix}${nTe++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Mx,useValue:i},{provide:bx,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){a8()},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),rTe=(()=>{class n extends iTe{constructor(t,i,r,s,o,a,c,l){super(t,i,s,a,c,o,XEe,KEe,ZEe,l)}}return n.\u0275fac=function(t){return new(t||n)(Xe(z3),Xe(y2),Xe(zA,8),Xe(JEe,8),Xe(UY),Xe(n,12),Xe(lC),Xe(_4,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),sTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[rTe,tTe],imports:[WEe,hd,ud,Ni,Ni]}),n})(),vTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Su,Ni,Ni]}),n})(),_Te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ni,Ni]}),n})();const yTe=["input"],wTe=function(n){return{enterDuration:n}},CTe=["*"],xTe=new Bt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let bTe=0;const MTe={provide:Qc,useExisting:pr(()=>jY),multi:!0};class STe{constructor(e,t){this.source=e,this.checked=t}}const ETe=OC(T8(Dh(f9(class{constructor(n){this._elementRef=n}}))));let TTe=(()=>{class n extends ETe{constructor(t,i,r,s,o,a,c){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Ar,this.toggleChange=new Ar,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${c}${++bTe}`}get required(){return this._required}set required(t){this._required=Br(t)}get checked(){return this._checked}set checked(t){this._checked=Br(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(t){a8()},n.\u0275dir=ht({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[zt]}),n})(),jY=(()=>{class n extends TTe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a,"mat-slide-toggle-")}_createChangeEvent(t){return new STe(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(L0),G(wc),Jl("tabindex"),G(xTe),G(_4,8))},n.\u0275cmp=On({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&Wo(yTe,5),2&t){let r;ir(r=rr())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,i){2&t&&(h8("id",i.id),Qs("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),Gi("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[Xi([MTe]),zt],ngContentSelectors:CTe,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,i){if(1&t&&(Vc(),O(0,"label",0,1)(2,"span",2)(3,"input",3,4),mn("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),N(),O(5,"span",5),rt(6,"span",6),O(7,"span",7),rt(8,"span",8),N()()(),O(9,"span",9,10),mn("cdkObserveContent",function(){return i._onLabelTextChange()}),O(11,"span",11),V(12,"\xa0"),N(),T1(13),N()()),2&t){const r=Qo(1),s=Qo(10);Qs("for",i.inputId),ae(2),Gi("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),ae(1),Ve("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),Qs("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),ae(4),Ve("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",w0(18,wTe,i._noopAnimations?0:150))}},dependencies:[Ih,Aq],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),n})(),$Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),ITe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[$Y,Su,Ni,h9,$Y,Ni]}),n})(),Sx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[El,Ni,h9,Ni]}),n})(),PTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[w8]}),n})(),bR=(()=>{class n{constructor(){this.changes=new Je,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $Te={provide:bR,deps:[[new e3,new p0,bR]],useFactory:function jTe(n){return n||new bR}};let qTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[$Te,Bq],imports:[Ni,El,ud,yR,PTe,nK,Su,Ni]}),n})(),YY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),KTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[Bq],imports:[YY,Sx,Ni,YY,Sx]}),n})(),eLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[El,Ni,ud,Su,h9,aB,Ni]}),n})(),iLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[NC,Ni,NC,Ni]}),n})();const rLe=["button"],sLe=["*"],JY=new Bt("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),eZ=new Bt("MatButtonToggleGroup"),oLe={provide:Qc,useExisting:pr(()=>iZ),multi:!0};let tZ=0;class nZ{constructor(e,t){this.source=e,this.value=t}}let iZ=(()=>{class n{constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+tZ++,this.valueChange=new Ar,this.change=new Ar,this.appearance=i&&i.appearance?i.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=Br(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=Br(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=Br(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new AB(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const i=new nZ(t,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,r=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(G(wc),G(JY,8))},n.\u0275dir=ht({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,r){if(1&t&&Z1(r,rZ,5),2&t){let s;ir(s=rr())&&(i._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(Qs("aria-disabled",i.disabled),Gi("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Xi([oLe,{provide:eZ,useExisting:n}])]}),n})();const aLe=Dh(class{});let rZ=(()=>{class n extends aLe{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Ar;const c=Number(o);this.tabIndex=c||0===c?c:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=Br(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=Br(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+tZ++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new nZ(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(t){return new(t||n)(G(eZ,8),G(wc),G(gn),G(L0),Jl("tabindex"),G(JY,8))},n.\u0275cmp=On({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&Wo(rLe,5),2&t){let r;ir(r=rr())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&mn("focus",function(){return i.focus()}),2&t&&(Qs("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),Gi("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[zt],ngContentSelectors:sLe,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(Vc(),O(0,"button",0,1),mn("click",function(){return i._onButtonClick()}),O(2,"span",2),T1(3),N()(),rt(4,"span",3)(5,"span",4)),2&t){const r=Qo(1);Ve("id",i.buttonId)("disabled",i.disabled||null),Qs("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),ae(5),Ve("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[Ih],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),cLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ni,Su,Ni]}),n})(),hLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[hd,ud,El,yR,Ni,Ni]}),n})();const mLe={provide:new Bt("mat-tooltip-scroll-strategy"),deps:[z3],useFactory:function gLe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let vLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[mLe],imports:[aB,El,hd,Ni,Ni,C8]}),n})();const xLe={provide:new Bt("mat-select-scroll-strategy"),deps:[z3],useFactory:function CLe(n){return()=>n.scrollStrategies.reposition()}};let bLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[xLe],imports:[El,hd,zq,Ni,C8,Sx,zq,Ni]}),n})();function MLe(n,e){if(1&n&&(Uo(),rt(0,"circle",4)),2&n){const t=pn(),i=Qo(1);Uc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),Qs("r",t._getCircleRadius())}}function SLe(n,e){if(1&n&&(Uo(),rt(0,"circle",4)),2&n){const t=pn(),i=Qo(1);Uc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),Qs("r",t._getCircleRadius())}}const TLe=T8(class{constructor(n){this._elementRef=n}},"primary"),LLe=new Bt("mat-progress-spinner-default-options",{providedIn:"root",factory:function DLe(){return{diameter:100}}});class Sd extends TLe{constructor(e,t,i,r,s,o,a,c){super(e),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Fe.EMPTY,this.mode="determinate";const l=Sd._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),l.has(i.head)||l.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&c&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&c.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=Cu(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Cu(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Cu(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=Oj(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,i=Sd._diameters;let r=i.get(e);if(!r||!r.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),r||(r=new Set,i.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Sd._diameters=new WeakMap,Sd.\u0275fac=function(e){return new(e||Sd)(G(gn),G(a3),G(Pi,8),G(_4,8),G(LLe),G(wc),G(oC),G(sr))},Sd.\u0275cmp=On({type:Sd,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(Qs("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),Uc("width",t.diameter,"px")("height",t.diameter,"px"),Gi("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[zt],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(Uo(),O(0,"svg",0,1),fn(2,MLe,1,11,"circle",2),fn(3,SLe,1,9,"circle",3),N()),2&e&&(Uc("width",t.diameter,"px")("height",t.diameter,"px"),Ve("ngSwitch","indeterminate"===t.mode),Qs("viewBox",t._getViewBox()),ae(2),Ve("ngSwitchCase",!0),ae(1),Ve("ngSwitchCase",!1))},dependencies:[jw,nj],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let BLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ni,El,Ni]}),n})();const FLe=[[["caption"]],[["colgroup"],["col"]]],kLe=["caption","colgroup, col"];function SR(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=Br(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const B7=new Bt("CDK_TABLE");let R7=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(G(tc))},n.\u0275dir=ht({type:n,selectors:[["","cdkCellDef",""]]}),n})(),F7=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(G(tc))},n.\u0275dir=ht({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),Ex=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(G(tc))},n.\u0275dir=ht({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class OLe{}const NLe=SR(OLe);let Hh=(()=>{class n extends NLe{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=Br(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(G(B7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(Z1(r,R7,5),Z1(r,F7,5),Z1(r,Ex,5)),2&t){let s;ir(s=rr())&&(i.cell=s.first),ir(s=rr())&&(i.headerCell=s.first),ir(s=rr())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[Xi([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),zt]}),n})();class ER{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let TR=(()=>{class n extends ER{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(G(Hh),G(gn))},n.\u0275dir=ht({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[zt]}),n})(),LR=(()=>{class n extends ER{constructor(t,i){if(super(t,i),1===t._table?._elementRef.nativeElement.nodeType){const r=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(G(Hh),G(gn))},n.\u0275dir=ht({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[zt]}),n})();class aZ{constructor(){this.tasks=[],this.endTasks=[]}}const DR=new Bt("_COALESCED_STYLE_SCHEDULER");let cZ=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new Je}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new aZ,this._getScheduleObservable().pipe(D1(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new aZ;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?us(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Tl(1))}}return n.\u0275fac=function(t){return new(t||n)(Xe(sr))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),IR=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof B9?t.headerCell.template:this instanceof R9?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(G(tc),G(b0))},n.\u0275dir=ht({type:n,features:[wr]}),n})();class VLe extends IR{}const ULe=SR(VLe);let B9=(()=>{class n extends ULe{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(G(tc),G(b0),G(B7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[zt,wr]}),n})();class GLe extends IR{}const QLe=SR(GLe);let R9=(()=>{class n extends QLe{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(G(tc),G(b0),G(B7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[zt,wr]}),n})(),Tx=(()=>{class n extends IR{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(G(tc),G(b0),G(B7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[zt]}),n})(),zh=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(G(nc))},n.\u0275dir=ht({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),BR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=On({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&pu(0,0)},dependencies:[zh],encapsulation:2}),n})(),FR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=On({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&pu(0,0)},dependencies:[zh],encapsulation:2}),n})(),Lx=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(G(tc))},n.\u0275dir=ht({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const lZ=["top","bottom","left","right"];class WLe{constructor(e,t,i,r,s=!0,o=!0,a){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(p=>p)&&!i.some(p=>p))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],o=s.children.length,a=this._getCellWidths(s,r),c=this._getStickyStartColumnPositions(a,t),l=this._getStickyEndColumnPositions(a,i),u=t.lastIndexOf(!0),f=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const p="rtl"===this.direction,g=p?"right":"left",_=p?"left":"right";for(const y of e)for(let w=0;w<o;w++){const C=y.children[w];t[w]&&this._addStickyStyle(C,g,c[w],w===u),i[w]&&this._addStickyStyle(C,_,l[w],w===f)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:a.slice(0,u+1).map((y,w)=>t[w]?y:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===f?[]:a.slice(f).map((y,w)=>i[w+f]?y:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,o=[],a=[],c=[];for(let u=0,f=0;u<r.length;u++){if(!s[u])continue;o[u]=f;const p=r[u];c[u]=this._isNativeHtmlTable?Array.from(p.children):[p];const g=p.getBoundingClientRect().height;f+=g,a[u]=g}const l=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let u=0;u<r.length;u++){if(!s[u])continue;const f=o[u],p=u===l;for(const g of c[u])this._addStickyStyle(g,i,f,p)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:c}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:c})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);lZ.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of lZ)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const kR=new Bt("CDK_SPL");let Dx=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(G(nc),G(gn))},n.\u0275dir=ht({type:n,selectors:[["","rowOutlet",""]]}),n})(),Ix=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(G(nc),G(gn))},n.\u0275dir=ht({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),Bx=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(G(nc),G(gn))},n.\u0275dir=ht({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),Rx=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(G(nc),G(gn))},n.\u0275dir=ht({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),Fx=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f,p,g){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=o,this._platform=c,this._viewRepeater=l,this._coalescedStyleScheduler=u,this._viewportRuler=f,this._stickyPositioningListener=p,this._ngZone=g,this._onDestroy=new Je,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Ar,this.viewChange=new go({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Br(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Br(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(D1(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),mB(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&sr.isInAngularZone()?this._ngZone.onStable.pipe(Tl(1),D1(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let a=0;a<i.length;a++)this._renderRows[a].rowDef===s&&o.push(i[a]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const o=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let c=o[a];const l=this._cachedRenderRowsMap.get(c.data);l.has(c.rowDef)?l.get(c.rowDef).push(c):l.set(c.rowDef,[c]),t.push(c)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(o=>{const a=r&&r.has(o)?r.get(o):[];if(a.length){const c=a.shift();return c.dataIndex=i,c}return{data:t,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),kx(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=kx(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=kx(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=kx(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(o,a)=>o||!!a.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],mB(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;mB(this.dataSource)?t=this.dataSource.connect(this):function RLe(n){return!!n&&(n instanceof Ce||ue(n.lift)&&ue(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=vi(this.dataSource)),this._renderChangeSubscription=t.pipe(D1(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(a=>this._columnDefsByName.get(a)),s=r.map(a=>a.sticky),o=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(o=>o.when&&o.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const o=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),o}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))zh.mostRecentCellOutlet&&zh.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const o=t.get(i).context;o.count=r,o.first=0===i,o.last=i===r-1,o.even=i%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const o of r.outlets)s.appendChild(o.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new WLe(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:vi()).pipe(D1(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(G(b0),G(wc),G(gn),Jl("role"),G(ld,8),G(Pi),G(a3),G(A9),G(DR),G(oC),G(kR,12),G(sr,8))},n.\u0275cmp=On({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(Z1(r,Lx,5),Z1(r,Hh,5),Z1(r,Tx,5),Z1(r,B9,5),Z1(r,R9,5)),2&t){let s;ir(s=rr())&&(i._noDataRow=s.first),ir(s=rr())&&(i._contentColumnDefs=s),ir(s=rr())&&(i._contentRowDefs=s),ir(s=rr())&&(i._contentHeaderRowDefs=s),ir(s=rr())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(Wo(Dx,7),Wo(Ix,7),Wo(Bx,7),Wo(Rx,7)),2&t){let r;ir(r=rr())&&(i._rowOutlet=r.first),ir(r=rr())&&(i._headerRowOutlet=r.first),ir(r=rr())&&(i._footerRowOutlet=r.first),ir(r=rr())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&Gi("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[Xi([{provide:B7,useExisting:n},{provide:A9,useClass:iK},{provide:DR,useClass:cZ},{provide:kR,useValue:null}])],ngContentSelectors:kLe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(Vc(FLe),T1(0),T1(1,1),pu(2,0)(3,1)(4,2)(5,3))},dependencies:[Dx,Ix,Bx,Rx],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function kx(n,e){return n.concat(Array.from(e))}let $Le=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[aC]}),n})();const qLe=[[["caption"]],[["colgroup"],["col"]]],KLe=["caption","colgroup, col"];let Px=(()=>{class n extends Fx{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275cmp=On({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&Gi("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[Xi([{provide:A9,useClass:iK},{provide:Fx,useExisting:n},{provide:B7,useExisting:n},{provide:DR,useClass:cZ},{provide:kR,useValue:null}]),zt],ngContentSelectors:KLe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(Vc(qLe),T1(0),T1(1,1),pu(2,0)(3,1)(4,2)(5,3))},dependencies:[Dx,Ix,Bx,Rx],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})(),F9=(()=>{class n extends R7{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matCellDef",""]],features:[Xi([{provide:R7,useExisting:n}]),zt]}),n})(),k9=(()=>{class n extends F7{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matHeaderCellDef",""]],features:[Xi([{provide:F7,useExisting:n}]),zt]}),n})(),P9=(()=>{class n extends Hh{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[Xi([{provide:Hh,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),zt]}),n})(),H9=(()=>{class n extends TR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[zt]}),n})(),z9=(()=>{class n extends LR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[zt]}),n})(),Hx=(()=>{class n extends B9{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[Xi([{provide:B9,useExisting:n}]),zt]}),n})(),zx=(()=>{class n extends Tx{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[Xi([{provide:Tx,useExisting:n}]),zt]}),n})(),Ox=(()=>{class n extends BR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275cmp=On({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[Xi([{provide:BR,useExisting:n}]),zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&pu(0,0)},dependencies:[zh],encapsulation:2}),n})(),Nx=(()=>{class n extends FR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275cmp=On({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[Xi([{provide:FR,useExisting:n}]),zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&pu(0,0)},dependencies:[zh],encapsulation:2}),n})(),sDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[$Le,Ni,Ni]}),n})(),aDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[hd,KTe,eEe,nK,yR,aEe,YCe,lEe,_Ee,REe,zEe,sTe,vTe,qTe,_Te,ITe,Sx,sDe,FCe,eLe,iLe,Su,cLe,hLe,vLe,bLe,BLe,aC]}),n})(),iIe=(()=>{class n extends I1{buildStyles(t,i){let r=!1;(t=t||"none").endsWith("!")&&(t=t.substring(0,t.indexOf("!")),r=!0);const s={display:i.inline?"inline-grid":"grid","grid-auto-columns":"","grid-template-columns":""};return s[r?"grid-auto-columns":"grid-template-columns"]=t,s}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rIe=(()=>{class n extends l1{constructor(t,i,r,s){super(t,i,r,s),this.DIRECTIVE_KEY="grid-columns",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=Br(t)}updateWithValue(t){this.styleCache=this.inline?oIe:sIe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(iIe),G(xa),G(Ua))},n.\u0275dir=ht({type:n,inputs:{inline:["gdInline","inline"]},features:[zt]}),n})();const sIe=new Map,oIe=new Map,aIe=["gdColumns","gdColumns.xs","gdColumns.sm","gdColumns.md","gdColumns.lg","gdColumns.xl","gdColumns.lt-sm","gdColumns.lt-md","gdColumns.lt-lg","gdColumns.lt-xl","gdColumns.gt-xs","gdColumns.gt-sm","gdColumns.gt-md","gdColumns.gt-lg"];let AZ=(()=>{class n extends rIe{constructor(){super(...arguments),this.inputs=aIe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","gdColumns",""],["","gdColumns.xs",""],["","gdColumns.sm",""],["","gdColumns.md",""],["","gdColumns.lg",""],["","gdColumns.xl",""],["","gdColumns.lt-sm",""],["","gdColumns.lt-md",""],["","gdColumns.lt-lg",""],["","gdColumns.lt-xl",""],["","gdColumns.gt-xs",""],["","gdColumns.gt-sm",""],["","gdColumns.gt-md",""],["","gdColumns.gt-lg",""]],inputs:{gdColumns:"gdColumns","gdColumns.xs":"gdColumns.xs","gdColumns.sm":"gdColumns.sm","gdColumns.md":"gdColumns.md","gdColumns.lg":"gdColumns.lg","gdColumns.xl":"gdColumns.xl","gdColumns.lt-sm":"gdColumns.lt-sm","gdColumns.lt-md":"gdColumns.lt-md","gdColumns.lt-lg":"gdColumns.lt-lg","gdColumns.lt-xl":"gdColumns.lt-xl","gdColumns.gt-xs":"gdColumns.gt-xs","gdColumns.gt-sm":"gdColumns.gt-sm","gdColumns.gt-md":"gdColumns.gt-md","gdColumns.gt-lg":"gdColumns.gt-lg"},features:[zt]}),n})(),lIe=(()=>{class n extends I1{buildStyles(t,i){return{display:i.inline?"inline-grid":"grid","grid-gap":t||"0"}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uIe=(()=>{class n extends l1{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="grid-gap",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=Br(t)}updateWithValue(t){this.styleCache=this.inline?fIe:hIe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(G(gn),G(xa),G(lIe),G(Ua))},n.\u0275dir=ht({type:n,inputs:{inline:["gdInline","inline"]},features:[zt]}),n})();const hIe=new Map,fIe=new Map,dIe=["gdGap","gdGap.xs","gdGap.sm","gdGap.md","gdGap.lg","gdGap.xl","gdGap.lt-sm","gdGap.lt-md","gdGap.lt-lg","gdGap.lt-xl","gdGap.gt-xs","gdGap.gt-sm","gdGap.gt-md","gdGap.gt-lg"];let vZ=(()=>{class n extends uIe{constructor(){super(...arguments),this.inputs=dIe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Nn(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","gdGap",""],["","gdGap.xs",""],["","gdGap.sm",""],["","gdGap.md",""],["","gdGap.lg",""],["","gdGap.xl",""],["","gdGap.lt-sm",""],["","gdGap.lt-md",""],["","gdGap.lt-lg",""],["","gdGap.lt-xl",""],["","gdGap.gt-xs",""],["","gdGap.gt-sm",""],["","gdGap.gt-md",""],["","gdGap.gt-lg",""]],inputs:{gdGap:"gdGap","gdGap.xs":"gdGap.xs","gdGap.sm":"gdGap.sm","gdGap.md":"gdGap.md","gdGap.lg":"gdGap.lg","gdGap.xl":"gdGap.xl","gdGap.lt-sm":"gdGap.lt-sm","gdGap.lt-md":"gdGap.lt-md","gdGap.lt-lg":"gdGap.lt-lg","gdGap.lt-xl":"gdGap.lt-xl","gdGap.gt-xs":"gdGap.gt-xs","gdGap.gt-sm":"gdGap.gt-sm","gdGap.gt-md":"gdGap.gt-md","gdGap.gt-lg":"gdGap.gt-lg"},features:[zt]}),n})(),yZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[OB]}),n})(),EIe=(()=>{class n{constructor(t,i){p7(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Eu,useValue:{...NB,...t}},{provide:VB,useValue:i,multi:!0},{provide:T7,useValue:!0}]:[{provide:Eu,useValue:{...NB,...t}},{provide:VB,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(Xe(T7),Xe(H3))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[zX,QX,yZ,zX,QX,yZ]}),n})();const PR=new Bt("DISQUS_SHORTNAME");class Oh{constructor(e,t){this.shortname=e,this._document=t}get DISQUS(){return this._document.defaultView.DISQUS}get disqus_config(){return this._document.defaultView.disqus_config}set disqus_config(e){this._document.defaultView.disqus_config=e}}Oh.\u0275fac=function(e){return new(e||Oh)(Xe(PR),Xe(Pi))},Oh.\u0275prov=Lt({token:Oh,factory:Oh.\u0275fac,providedIn:"root"}),Oh.ngInjectableDef=Z4({factory:function(){return new Oh(ys(PR),ys(Pi))},token:Oh,providedIn:"root"});let O9=(()=>{class n{constructor(t,i,r){this.renderer=t,this.el=i,this.dService=r,this.newComment=new Ar(!0),this.ready=new Ar(!0),this.paginate=new Ar(!0)}ngOnChanges(){this.dService.DISQUS?this.reset():this.addDisqusScript()}addDisqusScript(){this.dService.disqus_config=this.getConfig();const t=this.renderer.createElement("script");t.src=`//${this.dService.shortname}.disqus.com/embed.js`,t.async=!0,t.type="text/javascript",this.renderer.setAttribute(t,"data-timestamp",(new Date).getTime().toString()),this.renderer.appendChild(this.el.nativeElement,t)}reset(){this.dService.DISQUS.reset({reload:!0,config:this.getConfig()})}getConfig(){const t=this;return function(){this.page.identifier=t.identifier,this.page.url=t.validateUrl(t.url),this.page.title=t.title,this.category_id=t.category,this.language=t.language,this.callbacks.onNewComment=[i=>{t.newComment.emit(i)}],this.callbacks.onReady=[i=>{t.ready.emit(i)}],this.callbacks.onPaginate=[i=>{t.paginate.emit(i)}]}}validateUrl(t){if(t){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t))return t;console.warn("[Disqus]: Invalid URL")}}}return n.\u0275fac=function(t){return new(t||n)(G(Go),G(gn),G(Oh))},n.\u0275cmp=On({type:n,selectors:[["disqus"]],inputs:{url:"url",identifier:"identifier",title:"title",category:"category",language:"language"},outputs:{newComment:"newComment",ready:"ready",paginate:"paginate"},features:[wr],decls:1,vars:0,consts:[["id","disqus_thread"]],template:function(t,i){1&t&&rt(0,"div",0)},encapsulation:2,changeDetection:0}),n})(),TIe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:PR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function wZ(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function ba(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){wZ(s,i,r,o,a,"next",c)}function a(c){wZ(s,i,r,o,a,"throw",c)}o(void 0)})}}const HR=new Bt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),CZ=new Bt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=ys(Pi);if(!n)throw new Error("Window is not available");return n}}),DIe=new Bt("ngx-data-layer",{providedIn:"root",factory:()=>function LIe(n){return n?n.dataLayer=n.dataLayer||[]:null}(ys(CZ))}),xZ=new Bt("ngx-gtag-fn",{providedIn:"root",factory:()=>function IIe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(ys(CZ),ys(DIe))}),RIe={provide:PA,multi:!0,useFactory:function FIe(n,e,t){return ba(function*(){if(!n.trackingCode)return void(Rw()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(Rw()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||Rw()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(s=>"config"===s.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(s=>"js"===s.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const s of n.initCommands)e(s.command,...s.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[HR,xZ,Pi]};new Bt("ngx-google-analytics-routing-settings",{factory:()=>({})});let HIe=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:HR,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},RIe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function Vx(n,e){let t=0;if(void 0===e)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let r of n)(r=+e(r,++i,n))&&(t+=r)}return t}function zIe(){}function zR(n){return null==n?zIe:function(){return this.querySelector(n)}}function NIe(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function VIe(){return[]}function MZ(n){return null==n?VIe:function(){return this.querySelectorAll(n)}}function SZ(n){return function(){return this.matches(n)}}function EZ(n){return function(e){return e.matches(n)}}var QIe=Array.prototype.find;function jIe(){return this.firstElementChild}var qIe=Array.prototype.filter;function KIe(){return Array.from(this.children)}function TZ(n){return new Array(n.length)}function Ux(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}function eBe(n){return function(){return n}}function tBe(n,e,t,i,r,s){for(var a,o=0,c=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):t[o]=new Ux(n,s[o]);for(;o<c;++o)(a=e[o])&&(r[o]=a)}function nBe(n,e,t,i,r,s,o){var a,c,g,l=new Map,u=e.length,f=s.length,p=new Array(u);for(a=0;a<u;++a)(c=e[a])&&(p[a]=g=o.call(c,c.__data__,a,e)+"",l.has(g)?r[a]=c:l.set(g,c));for(a=0;a<f;++a)g=o.call(n,s[a],a,s)+"",(c=l.get(g))?(i[a]=c,c.__data__=s[a],l.delete(g)):t[a]=new Ux(n,s[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(p[a])===c&&(r[a]=c)}function iBe(n){return n.__data__}function sBe(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function hBe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}Ux.prototype={constructor:Ux,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var OR="http://www.w3.org/1999/xhtml";const LZ={svg:"http://www.w3.org/2000/svg",xhtml:OR,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gx(n){var e=n+="",t=e.indexOf(":");return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),LZ.hasOwnProperty(e)?{space:LZ[e],local:n}:n}function vBe(n){return function(){this.removeAttribute(n)}}function _Be(n){return function(){this.removeAttributeNS(n.space,n.local)}}function yBe(n,e){return function(){this.setAttribute(n,e)}}function wBe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function CBe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function xBe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function DZ(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function MBe(n){return function(){this.style.removeProperty(n)}}function SBe(n,e,t){return function(){this.style.setProperty(n,e,t)}}function EBe(n,e,t){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function k7(n,e){return n.style.getPropertyValue(e)||DZ(n).getComputedStyle(n,null).getPropertyValue(e)}function LBe(n){return function(){delete this[n]}}function DBe(n,e){return function(){this[n]=e}}function IBe(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function IZ(n){return n.trim().split(/^|\s+/)}function NR(n){return n.classList||new BZ(n)}function BZ(n){this._node=n,this._names=IZ(n.getAttribute("class")||"")}function RZ(n,e){for(var t=NR(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function FZ(n,e){for(var t=NR(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function RBe(n){return function(){RZ(this,n)}}function FBe(n){return function(){FZ(this,n)}}function kBe(n,e){return function(){(e.apply(this,arguments)?RZ:FZ)(this,n)}}function HBe(){this.textContent=""}function zBe(n){return function(){this.textContent=n}}function OBe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function VBe(){this.innerHTML=""}function UBe(n){return function(){this.innerHTML=n}}function GBe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function WBe(){this.nextSibling&&this.parentNode.appendChild(this)}function $Be(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function KBe(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===OR&&e.documentElement.namespaceURI===OR?e.createElement(n):e.createElementNS(t,n)}}function XBe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function kZ(n){var e=Gx(n);return(e.local?XBe:KBe)(e)}function ZBe(){return null}function eRe(){var n=this.parentNode;n&&n.removeChild(this)}function nRe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function iRe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function aRe(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function cRe(n){return function(){var e=this.__on;if(e){for(var s,t=0,i=-1,r=e.length;t<r;++t)s=e[t],n.type&&s.type!==n.type||s.name!==n.name?e[++i]=s:this.removeEventListener(s.type,s.listener,s.options);++i?e.length=i:delete this.__on}}}function lRe(n,e,t){return function(){var r,i=this.__on,s=function oRe(n){return function(e){n.call(this,e,this.__data__)}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===n.type&&r.name===n.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),void(r.value=e);this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function PZ(n,e,t){var i=DZ(n),r=i.CustomEvent;"function"==typeof r?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function hRe(n,e){return function(){return PZ(this,n,e)}}function fRe(n,e){return function(){return PZ(this,n,e.apply(this,arguments))}}BZ.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var HZ=[null];function U3(n,e){this._groups=n,this._parents=e}function zZ(){return new U3([[document.documentElement]],HZ)}U3.prototype=zZ.prototype={constructor:U3,select:function OIe(n){"function"!=typeof n&&(n=zR(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,l,s=e[r],o=s.length,a=i[r]=new Array(o),u=0;u<o;++u)(c=s[u])&&(l=n.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new U3(i,this._parents)},selectAll:function GIe(n){n="function"==typeof n?function UIe(n){return function(){return NIe(n.apply(this,arguments))}}(n):MZ(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var c,o=e[s],a=o.length,l=0;l<a;++l)(c=o[l])&&(i.push(n.call(c,c.__data__,l,o)),r.push(c));return new U3(i,r)},selectChild:function $Ie(n){return this.select(null==n?jIe:function WIe(n){return function(){return QIe.call(this.children,n)}}("function"==typeof n?n:EZ(n)))},selectChildren:function YIe(n){return this.selectAll(null==n?KIe:function XIe(n){return function(){return qIe.call(this.children,n)}}("function"==typeof n?n:EZ(n)))},filter:function ZIe(n){"function"!=typeof n&&(n=SZ(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,s=e[r],o=s.length,a=i[r]=[],l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new U3(i,this._parents)},data:function rBe(n,e){if(!arguments.length)return Array.from(this,iBe);var t=e?nBe:tBe,i=this._parents,r=this._groups;"function"!=typeof n&&(n=eBe(n));for(var s=r.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=i[l],f=r[l],p=f.length,g=sBe(n.call(u,u&&u.__data__,l,i)),_=g.length,y=a[l]=new Array(_),w=o[l]=new Array(_),C=c[l]=new Array(p);t(u,f,y,w,C,g,e);for(var T,I,b=0,M=0;b<_;++b)if(T=y[b]){for(b>=M&&(M=b+1);!(I=w[M])&&++M<_;);T._next=I||null}}return(o=new U3(o,i))._enter=a,o._exit=c,o},enter:function JIe(){return new U3(this._enter||this._groups.map(TZ),this._parents)},exit:function oBe(){return new U3(this._exit||this._groups.map(TZ),this._parents)},join:function aBe(n,e,t){var i=this.enter(),r=this,s=this.exit();return"function"==typeof n?(i=n(i))&&(i=i.selection()):i=i.append(n+""),null!=e&&(r=e(r))&&(r=r.selection()),null==t?s.remove():t(s),i&&r?i.merge(r).order():r},merge:function cBe(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,o=Math.min(r,i.length),a=new Array(r),c=0;c<o;++c)for(var g,l=t[c],u=i[c],f=l.length,p=a[c]=new Array(f),_=0;_<f;++_)(g=l[_]||u[_])&&(p[_]=g);for(;c<r;++c)a[c]=t[c];return new U3(a,this._parents)},selection:function gRe(){return this},order:function lBe(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var o,i=n[e],r=i.length-1,s=i[r];--r>=0;)(o=i[r])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function uBe(n){function e(f,p){return f&&p?n(f.__data__,p.__data__):!f-!p}n||(n=hBe);for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var l,o=t[s],a=o.length,c=r[s]=new Array(a),u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(e)}return new U3(r,this._parents).order()},call:function fBe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function dBe(){return Array.from(this)},node:function pBe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function gBe(){let n=0;for(const e of this)++n;return n},empty:function mBe(){return!this.node()},each:function ABe(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var a,r=e[t],s=0,o=r.length;s<o;++s)(a=r[s])&&n.call(a,a.__data__,s,r);return this},attr:function bBe(n,e){var t=Gx(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((null==e?t.local?_Be:vBe:"function"==typeof e?t.local?xBe:CBe:t.local?wBe:yBe)(t,e))},style:function TBe(n,e,t){return arguments.length>1?this.each((null==e?MBe:"function"==typeof e?EBe:SBe)(n,e,t??"")):k7(this.node(),n)},property:function BBe(n,e){return arguments.length>1?this.each((null==e?LBe:"function"==typeof e?IBe:DBe)(n,e)):this.node()[n]},classed:function PBe(n,e){var t=IZ(n+"");if(arguments.length<2){for(var i=NR(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each(("function"==typeof e?kBe:e?RBe:FBe)(t,e))},text:function NBe(n){return arguments.length?this.each(null==n?HBe:("function"==typeof n?OBe:zBe)(n)):this.node().textContent},html:function QBe(n){return arguments.length?this.each(null==n?VBe:("function"==typeof n?GBe:UBe)(n)):this.node().innerHTML},raise:function jBe(){return this.each(WBe)},lower:function qBe(){return this.each($Be)},append:function YBe(n){var e="function"==typeof n?n:kZ(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function JBe(n,e){var t="function"==typeof n?n:kZ(n),i=null==e?ZBe:"function"==typeof e?e:zR(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function tRe(){return this.each(eRe)},clone:function rRe(n){return this.select(n?iRe:nRe)},datum:function sRe(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function uRe(n,e,t){var r,o,i=aRe(n+""),s=i.length;if(!(arguments.length<2)){for(a=e?lRe:cRe,r=0;r<s;++r)this.each(a(i[r],e,t));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(r=0,u=a[c];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function dRe(n,e){return this.each(("function"==typeof e?fRe:hRe)(n,e))},[Symbol.iterator]:function*pRe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var o,i=n[e],r=0,s=i.length;r<s;++r)(o=i[r])&&(yield o)}};const N9=zZ;var mRe={value:()=>{}};function OZ(){for(var i,n=0,e=arguments.length,t={};n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new Qx(t)}function Qx(n){this._=n}function ARe(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}function vRe(n,e){for(var r,t=0,i=n.length;t<i;++t)if((r=n[t]).name===e)return r.value}function NZ(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=mRe,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=t&&n.push({name:e,value:t}),n}Qx.prototype=OZ.prototype={constructor:Qx,on:function(n,e){var r,t=this._,i=ARe(n+"",t),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=NZ(t[r],n.name,e);else if(null==e)for(r in t)t[r]=NZ(t[r],n.name,null);return this}for(;++s<o;)if((r=(n=i[s]).type)&&(r=vRe(t[r],n.name)))return r},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Qx(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var r,s,t=new Array(r),i=0;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,r=(s=this._[n]).length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};const VZ=OZ;var Wx,G9,P7=0,V9=0,U9=0,jx=0,O8=0,$x=0,Q9="object"==typeof performance&&performance.now?performance:Date,GZ="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function VR(){return O8||(GZ(_Re),O8=Q9.now()+$x)}function _Re(){O8=0}function qx(){this._call=this._time=this._next=null}function QZ(n,e,t){var i=new qx;return i.restart(n,e,t),i}function WZ(){O8=(jx=Q9.now())+$x,P7=V9=0;try{!function yRe(){VR(),++P7;for(var e,n=Wx;n;)(e=O8-n._time)>=0&&n._call.call(void 0,e),n=n._next;--P7}()}finally{P7=0,function CRe(){for(var n,t,e=Wx,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Wx=t);G9=n,UR(i)}(),O8=0}}function wRe(){var n=Q9.now(),e=n-jx;e>1e3&&($x-=e,jx=n)}function UR(n){P7||(V9&&(V9=clearTimeout(V9)),n-O8>24?(n<1/0&&(V9=setTimeout(WZ,n-Q9.now()-$x)),U9&&(U9=clearInterval(U9))):(U9||(jx=Q9.now(),U9=setInterval(wRe,1e3)),P7=1,GZ(WZ)))}function jZ(n,e,t){var i=new qx;return i.restart(r=>{i.stop(),n(r+e)},e=null==e?0:+e,t),i}qx.prototype=QZ.prototype={constructor:qx,restart:function(n,e,t){if("function"!=typeof n)throw new TypeError("callback is not a function");t=(null==t?VR():+t)+(null==e?0:+e),!this._next&&G9!==this&&(G9?G9._next=this:Wx=this,G9=this),this._call=n,this._time=t,UR()},stop:function(){this._call&&(this._call=null,this._time=1/0,UR())}};var xRe=VZ("start","end","cancel","interrupt"),bRe=[];function Yx(n,e,t,i,r,s){var o=n.__transition;if(o){if(t in o)return}else n.__transition={};!function MRe(n,e,t){var r,i=n.__transition;function o(l){var u,f,p,g;if(1!==t.state)return c();for(u in i)if((g=i[u]).name===t.name){if(3===g.state)return jZ(o);4===g.state?(g.state=6,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete i[u]):+u<e&&(g.state=6,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete i[u])}if(jZ(function(){3===t.state&&(t.state=4,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=2,t.on.call("start",n,n.__data__,t.index,t.group),2===t.state){for(t.state=3,r=new Array(p=t.tween.length),u=0,f=-1;u<p;++u)(g=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(r[++f]=g);r.length=f+1}}function a(l){for(var u=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=5,1),f=-1,p=r.length;++f<p;)r[f].call(n,u);5===t.state&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){for(var l in t.state=6,t.timer.stop(),delete i[e],i)return;delete n.__transition}i[e]=t,t.timer=QZ(function s(l){t.state=1,t.timer.restart(o,t.delay,t.time),t.delay<=l&&o(l-t.delay)},0,t.time)}(n,t,{name:e,index:i,group:r,on:xRe,tween:bRe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function WR(n,e){var t=Tu(n,e);if(t.state>0)throw new Error("too late; already scheduled");return t}function I0(n,e){var t=Tu(n,e);if(t.state>3)throw new Error("too late; already running");return t}function Tu(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Zx(n,e){var i,r,o,t=n.__transition,s=!0;if(t){for(o in e=null==e?null:e+"",t)(i=t[o]).name===e?(r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]):s=!1;s&&delete n.__transition}}function Ed(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var Jx,XZ=180/Math.PI,jR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function YZ(n,e,t,i,r,s){var o,a,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*i)&&(t-=n*c,i-=e*c),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,c/=a),n*i<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*XZ,skewX:Math.atan(c)*XZ,scaleX:o,scaleY:a}}function ZZ(n,e,t,i){function r(l){return l.length?l.pop()+" ":""}return function(l,u){var f=[],p=[];return l=n(l),u=n(u),function s(l,u,f,p,g,_){if(l!==f||u!==p){var y=g.push("translate(",null,e,null,t);_.push({i:y-4,x:Ed(l,f)},{i:y-2,x:Ed(u,p)})}else(f||p)&&g.push("translate("+f+e+p+t)}(l.translateX,l.translateY,u.translateX,u.translateY,f,p),function o(l,u,f,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Ed(l,u)})):u&&f.push(r(f)+"rotate("+u+i)}(l.rotate,u.rotate,f,p),function a(l,u,f,p){l!==u?p.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Ed(l,u)}):u&&f.push(r(f)+"skewX("+u+i)}(l.skewX,u.skewX,f,p),function c(l,u,f,p,g,_){if(l!==f||u!==p){var y=g.push(r(g)+"scale(",null,",",null,")");_.push({i:y-4,x:Ed(l,f)},{i:y-2,x:Ed(u,p)})}else(1!==f||1!==p)&&g.push(r(g)+"scale("+f+","+p+")")}(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,p),l=u=null,function(g){for(var w,_=-1,y=p.length;++_<y;)f[(w=p[_]).i]=w.x(g);return f.join("")}}}var LRe=ZZ(function ERe(n){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?jR:YZ(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),DRe=ZZ(function TRe(n){return null!=n&&(Jx||(Jx=document.createElementNS("http://www.w3.org/2000/svg","g")),Jx.setAttribute("transform",n),n=Jx.transform.baseVal.consolidate())?YZ((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):jR},", ",")",")");function IRe(n,e){var t,i;return function(){var r=I0(this,n),s=r.tween;if(s!==t)for(var o=0,a=(i=t=s).length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function BRe(n,e,t){var i,r;if("function"!=typeof t)throw new Error;return function(){var s=I0(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:t},c=0,l=r.length;c<l;++c)if(r[c].name===e){r[c]=a;break}c===l&&r.push(a)}s.tween=r}}function $R(n,e,t){var i=n._id;return n.each(function(){var r=I0(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return Tu(r,i).value[e]}}function qR(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function JZ(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function W9(){}var eb=1/.7,H7="\\s*([+-]?\\d+)\\s*",$9="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",B0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",FRe=/^#([0-9a-f]{3,8})$/,kRe=new RegExp(`^rgb\\(${H7},${H7},${H7}\\)$`),PRe=new RegExp(`^rgb\\(${B0},${B0},${B0}\\)$`),HRe=new RegExp(`^rgba\\(${H7},${H7},${H7},${$9}\\)$`),zRe=new RegExp(`^rgba\\(${B0},${B0},${B0},${$9}\\)$`),ORe=new RegExp(`^hsl\\(${$9},${B0},${B0}\\)$`),NRe=new RegExp(`^hsla\\(${$9},${B0},${B0},${$9}\\)$`),eJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function tJ(){return this.rgb().formatHex()}function nJ(){return this.rgb().formatRgb()}function q9(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=FRe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),6===t?iJ(e):3===t?new c3(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===t?tb(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===t?tb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=kRe.exec(n))?new c3(e[1],e[2],e[3],1):(e=PRe.exec(n))?new c3(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=HRe.exec(n))?tb(e[1],e[2],e[3],e[4]):(e=zRe.exec(n))?tb(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ORe.exec(n))?oJ(e[1],e[2]/100,e[3]/100,1):(e=NRe.exec(n))?oJ(e[1],e[2]/100,e[3]/100,e[4]):eJ.hasOwnProperty(n)?iJ(eJ[n]):"transparent"===n?new c3(NaN,NaN,NaN,0):null}function iJ(n){return new c3(n>>16&255,n>>8&255,255&n,1)}function tb(n,e,t,i){return i<=0&&(n=e=t=NaN),new c3(n,e,t,i)}function GRe(n){return n instanceof W9||(n=q9(n)),n?new c3((n=n.rgb()).r,n.g,n.b,n.opacity):new c3}function nb(n,e,t,i){return 1===arguments.length?GRe(n):new c3(n,e,t,i??1)}function c3(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}function rJ(){return`#${V8(this.r)}${V8(this.g)}${V8(this.b)}`}function sJ(){const n=ib(this.opacity);return`${1===n?"rgb(":"rgba("}${N8(this.r)}, ${N8(this.g)}, ${N8(this.b)}${1===n?")":`, ${n})`}`}function ib(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function N8(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function V8(n){return((n=N8(n))<16?"0":"")+n.toString(16)}function oJ(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Lu(n,e,t,i)}function aJ(n){if(n instanceof Lu)return new Lu(n.h,n.s,n.l,n.opacity);if(n instanceof W9||(n=q9(n)),!n)return new Lu;if(n instanceof Lu)return n;var e=(n=n.rgb()).r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,c=(s+r)/2;return a?(o=e===s?(t-i)/a+6*(t<i):t===s?(i-e)/a+2:(e-t)/a+4,a/=c<.5?s+r:2-s-r,o*=60):a=c>0&&c<1?0:o,new Lu(o,a,c,n.opacity)}function Lu(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}function cJ(n){return(n=(n||0)%360)<0?n+360:n}function rb(n){return Math.max(0,Math.min(1,n||0))}function KR(n,e,t){return 255*(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)}function lJ(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}qR(W9,q9,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:tJ,formatHex:tJ,formatHex8:function VRe(){return this.rgb().formatHex8()},formatHsl:function URe(){return aJ(this).formatHsl()},formatRgb:nJ,toString:nJ}),qR(c3,nb,JZ(W9,{brighter(n){return n=null==n?eb:Math.pow(eb,n),new c3(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new c3(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new c3(N8(this.r),N8(this.g),N8(this.b),ib(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rJ,formatHex:rJ,formatHex8:function QRe(){return`#${V8(this.r)}${V8(this.g)}${V8(this.b)}${V8(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:sJ,toString:sJ})),qR(Lu,function WRe(n,e,t,i){return 1===arguments.length?aJ(n):new Lu(n,e,t,i??1)},JZ(W9,{brighter(n){return n=null==n?eb:Math.pow(eb,n),new Lu(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Lu(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new c3(KR(n>=240?n-240:n+120,r,i),KR(n,r,i),KR(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Lu(cJ(this.h),rb(this.s),rb(this.l),ib(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=ib(this.opacity);return`${1===n?"hsl(":"hsla("}${cJ(this.h)}, ${100*rb(this.s)}%, ${100*rb(this.l)}%${1===n?")":`, ${n})`}`}}));const uJ=n=>()=>n;function fJ(n,e){var t=e-n;return t?function hJ(n,e){return function(t){return n+t*e}}(n,t):uJ(isNaN(n)?e:n)}const dJ=function n(e){var t=function KRe(n){return 1==(n=+n)?fJ:function(e,t){return t-e?function qRe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}(e,t,n):uJ(isNaN(e)?t:e)}}(e);function i(r,s){var o=t((r=nb(r)).r,(s=nb(s)).r),a=t(r.g,s.g),c=t(r.b,s.b),l=fJ(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=c(u),r.opacity=l(u),r+""}}return i.gamma=n,i}(1);function pJ(n){return function(e){var o,a,t=e.length,i=new Array(t),r=new Array(t),s=new Array(t);for(o=0;o<t;++o)a=nb(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(c){return a.r=i(c),a.g=r(c),a.b=s(c),a+""}}}pJ(function jRe(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1];return lJ((t-i/e)*e,i>0?n[i-1]:2*r-s,r,s,i<e-1?n[i+2]:2*s-r)}}),pJ(function $Re(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e);return lJ((t-i/e)*e,n[(i+e-1)%e],n[i%e],n[(i+1)%e],n[(i+2)%e])}});var XR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,YR=new RegExp(XR.source,"g");function ZRe(n,e){var i,r,s,t=XR.lastIndex=YR.lastIndex=0,o=-1,a=[],c=[];for(n+="",e+="";(i=XR.exec(n))&&(r=YR.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:Ed(i,r)})),t=YR.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?function YRe(n){return function(e){return n(e)+""}}(c[0].x):function XRe(n){return function(){return n}}(e):(e=c.length,function(l){for(var f,u=0;u<e;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function gJ(n,e){var t;return("number"==typeof e?Ed:e instanceof q9?dJ:(t=q9(e))?(e=t,dJ):ZRe)(n,e)}function JRe(n){return function(){this.removeAttribute(n)}}function eFe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function tFe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function nFe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function iFe(n,e,t){var i,r,s;return function(){var o,c,a=t(this);return null==a?void this.removeAttribute(n):(o=this.getAttribute(n))===(c=a+"")?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}function rFe(n,e,t){var i,r,s;return function(){var o,c,a=t(this);return null==a?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local))===(c=a+"")?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}function oFe(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function aFe(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function cFe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&aFe(n,s)),t}return r._value=e,r}function lFe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&oFe(n,s)),t}return r._value=e,r}function hFe(n,e){return function(){WR(this,n).delay=+e.apply(this,arguments)}}function fFe(n,e){return e=+e,function(){WR(this,n).delay=e}}function pFe(n,e){return function(){I0(this,n).duration=+e.apply(this,arguments)}}function gFe(n,e){return e=+e,function(){I0(this,n).duration=e}}function AFe(n,e){if("function"!=typeof e)throw new Error;return function(){I0(this,n).ease=e}}function bFe(n,e,t){var i,r,s=function xFe(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(e)?WR:I0;return function(){var o=s(this,n),a=o.on;a!==i&&(r=(i=a).copy()).on(e,t),o.on=r}}var DFe=N9.prototype.constructor;function mJ(n){return function(){this.style.removeProperty(n)}}function HFe(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function zFe(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&HFe(n,o,t)),i}return s._value=e,s}function GFe(n){return function(e){this.textContent=n.call(this,e)}}function QFe(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&GFe(r)),e}return i._value=n,i}var qFe=0;function Nh(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function AJ(){return++qFe}var Vh=N9.prototype;Nh.prototype=function KFe(n){return N9().transition(n)}.prototype={constructor:Nh,select:function TFe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=zR(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var u,f,a=i[o],c=a.length,l=s[o]=new Array(c),p=0;p<c;++p)(u=a[p])&&(f=n.call(u,u.__data__,p,a))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f,Yx(l[p],e,t,p,l,Tu(u,t)));return new Nh(s,this._parents,e,t)},selectAll:function LFe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=MZ(n));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var u,c=i[a],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var g,p=n.call(u,u.__data__,f,c),_=Tu(u,t),y=0,w=p.length;y<w;++y)(g=p[y])&&Yx(g,e,t,y,p,_);s.push(p),o.push(u)}return new Nh(s,o,e,t)},selectChild:Vh.selectChild,selectChildren:Vh.selectChildren,filter:function wFe(n){"function"!=typeof n&&(n=SZ(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,s=e[r],o=s.length,a=i[r]=[],l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new Nh(i,this._parents,this._name,this._id)},merge:function CFe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,s=Math.min(i,t.length),o=new Array(i),a=0;a<s;++a)for(var p,c=e[a],l=t[a],u=c.length,f=o[a]=new Array(u),g=0;g<u;++g)(p=c[g]||l[g])&&(f[g]=p);for(;a<i;++a)o[a]=e[a];return new Nh(o,this._parents,this._name,this._id)},selection:function IFe(){return new DFe(this._groups,this._parents)},transition:function jFe(){for(var n=this._name,e=this._id,t=AJ(),i=this._groups,r=i.length,s=0;s<r;++s)for(var c,o=i[s],a=o.length,l=0;l<a;++l)if(c=o[l]){var u=Tu(c,e);Yx(c,n,t,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Nh(i,this._parents,n,t)},call:Vh.call,nodes:Vh.nodes,node:Vh.node,size:Vh.size,empty:Vh.empty,each:Vh.each,on:function MFe(n,e){var t=this._id;return arguments.length<2?Tu(this.node(),t).on.on(n):this.each(bFe(t,n,e))},attr:function sFe(n,e){var t=Gx(n),i="transform"===t?DRe:gJ;return this.attrTween(n,"function"==typeof e?(t.local?rFe:iFe)(t,i,$R(this,"attr."+n,e)):null==e?(t.local?eFe:JRe)(t):(t.local?nFe:tFe)(t,i,e))},attrTween:function uFe(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;var i=Gx(n);return this.tween(t,(i.local?cFe:lFe)(i,e))},style:function PFe(n,e,t){var i="transform"==(n+="")?LRe:gJ;return null==e?this.styleTween(n,function BFe(n,e){var t,i,r;return function(){var s=k7(this,n),o=(this.style.removeProperty(n),k7(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}(n,i)).on("end.style."+n,mJ(n)):"function"==typeof e?this.styleTween(n,function FFe(n,e,t){var i,r,s;return function(){var o=k7(this,n),a=t(this),c=a+"";return null==a&&(this.style.removeProperty(n),c=a=k7(this,n)),o===c?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}(n,i,$R(this,"style."+n,e))).each(function kFe(n,e){var t,i,r,a,s="style."+e,o="end."+s;return function(){var c=I0(this,n),l=c.on,u=null==c.value[s]?a||(a=mJ(e)):void 0;(l!==t||r!==u)&&(i=(t=l).copy()).on(o,r=u),c.on=i}}(this._id,n)):this.styleTween(n,function RFe(n,e,t){var i,s,r=t+"";return function(){var o=k7(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}(n,i,e),t).on("end.style."+n,null)},styleTween:function OFe(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,zFe(n,e,t??""))},text:function UFe(n){return this.tween("text","function"==typeof n?function VFe(n){return function(){var e=n(this);this.textContent=e??""}}($R(this,"text",n)):function NFe(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function WFe(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;return this.tween(e,QFe(n))},remove:function EFe(){return this.on("end.remove",function SFe(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}(this._id))},tween:function RRe(n,e){var t=this._id;if(n+="",arguments.length<2){for(var o,i=Tu(this.node(),t).tween,r=0,s=i.length;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((null==e?IRe:BRe)(t,n,e))},delay:function dFe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?hFe:fFe)(e,n)):Tu(this.node(),e).delay},duration:function mFe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?pFe:gFe)(e,n)):Tu(this.node(),e).duration},ease:function vFe(n){var e=this._id;return arguments.length?this.each(AFe(e,n)):Tu(this.node(),e).ease},easeVarying:function yFe(n){if("function"!=typeof n)throw new Error;return this.each(function _Fe(n,e){return function(){var t=e.apply(this,arguments);if("function"!=typeof t)throw new Error;I0(this,n).ease=t}}(this._id,n))},end:function $Fe(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var a={value:o},c={value:function(){0==--r&&s()}};t.each(function(){var l=I0(this,i),u=l.on;u!==n&&((e=(n=u).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),0===r&&s()})},[Symbol.iterator]:Vh[Symbol.iterator]};var YFe={time:null,delay:0,duration:250,ease:function XFe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function ZFe(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}N9.prototype.interrupt=function SRe(n){return this.each(function(){Zx(this,n)})},N9.prototype.transition=function JFe(n){var e,t;n instanceof Nh?(e=n._id,n=n._name):(e=AJ(),(t=YFe).time=VR(),n=null==n?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var c,o=i[s],a=o.length,l=0;l<a;++l)(c=o[l])&&Yx(c,n,e,l,o,t||ZFe(c,e));return new Nh(i,this._parents,n,e)};Math;function K9(n){return{type:n}}function xJ(n){for(var i,e=-1,t=n.length,r=n[t-1],s=0;++e<t;)s+=(i=r)[1]*(r=n[e])[0]-i[0]*r[1];return s/2}function Td(n,e){if(n=function ake(n){let e;for(;e=n.sourceEvent;)n=e;return n}(n),void 0===e&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}function Ws(n){return"string"==typeof n?new U3([[document.querySelector(n)]],[document.documentElement]):new U3([[n]],HZ)}["w","e"].map(K9),["n","s"].map(K9),["n","w","e","s","nw","ne","sw","se"].map(K9);const nF={capture:!0,passive:!1};function iF(n){n.preventDefault(),n.stopImmediatePropagation()}function cke(n){var e=n.document.documentElement,t=Ws(n).on("dragstart.drag",iF,nF);"onselectstart"in e?t.on("selectstart.drag",iF,nF):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function lke(n,e){var t=n.document.documentElement,i=Ws(n).on("dragstart.drag",null);e&&(i.on("click.drag",iF,nF),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function bJ(n){return((n=Math.exp(n))+1/n)/2}const dke=function n(e,t,i){function r(s,o){var w,C,a=s[0],c=s[1],l=s[2],p=o[2],g=o[0]-a,_=o[1]-c,y=g*g+_*_;if(y<1e-12)C=Math.log(p/l)/e,w=function(P){return[a+P*g,c+P*_,l*Math.exp(e*P*C)]};else{var b=Math.sqrt(y),M=(p*p-l*l+i*y)/(2*l*t*b),T=(p*p-l*l-i*y)/(2*p*t*b),I=Math.log(Math.sqrt(M*M+1)-M),F=Math.log(Math.sqrt(T*T+1)-T);C=(F-I)/e,w=function(P){var R=P*C,k=bJ(I),W=l/(t*b)*(k*function fke(n){return((n=Math.exp(2*n))-1)/(n+1)}(e*R+I)-function hke(n){return((n=Math.exp(n))-1/n)/2}(I));return[a+W*g,c+W*_,l*k/bJ(e*R+I)]}}return w.duration=1e3*C*e/Math.SQRT2,w}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o;return n(o,a,a*a)},r}(Math.SQRT2,2,4),ab=n=>()=>n;function pke(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function R0(n,e,t){this.k=n,this.x=e,this.y=t}R0.prototype={constructor:R0,scale:function(n){return 1===n?this:new R0(this.k*n,this.x,this.y)},translate:function(n,e){return 0===n&0===e?this:new R0(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rF=new R0(1,0,0);function sF(n){n.stopImmediatePropagation()}function X9(n){n.preventDefault(),n.stopImmediatePropagation()}function mke(n){return!(n.ctrlKey&&"wheel"!==n.type||n.button)}function Ake(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n).hasAttribute("viewBox")?[[(n=n.viewBox.baseVal).x,n.y],[n.x+n.width,n.y+n.height]]:[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]:[[0,0],[n.clientWidth,n.clientHeight]]}function MJ(){return this.__zoom||rF}function vke(n){return-n.deltaY*(1===n.deltaMode?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function _ke(){return navigator.maxTouchPoints||"ontouchstart"in this}function yke(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}let cb={};class qc{constructor(){this.classes=[],this.transform="",this.selector="",this.index=0,this.visible=!0,this.outOfDesign=!1,this.theoretic=!1,this.loaded=!1,this._lineThickness=1,this.tooltip=e=>`<b>${this.name?this.name:this.selector}</b>`}get lineThickness(){return this._lineThickness}set lineThickness(e){this._lineThickness=e}draw(e){return ba(function*(){})()}redraw(e){}init(e,t){}show(e){return(this.floor===this.svgUpdate.floor||this.floor===tt.all)&&!this.theoretic&&this.visible&&!this.outOfDesign}update(e){var t=this;return ba(function*(){t.svgUpdate=e,t.onUpdate(t.svgUpdate.theme);const i=t.svgUpdate.floor;t.meterPerPixel=t.svgUpdate.meterPerPixel,t.svgUpdate.redrawAll&&(void 0!==t.svgUpdate.theme.showTower?void 0===t.floor&&t.parent&&t.parent.floor&&(t.floor=t.parent.floor):t.floor=tt.all,t.init(i,t.svgUpdate.theme),yield t.draw(i)),t.show(i)&&(yield t.redraw(i))})()}createSelector(){if(!this.selector)if(this.parent&&(this.parent.selector?this.selector=this.parent.selector:(this.floor===tt.ground&&(this.selector="L0"),this.floor===tt.top&&(this.selector="L1"))),void 0!==this.name)this.selector+=`-${this.name.replace(/\s/g,"")}`;else{let e=this.constructor.name;"sensorType"in this&&(e=this.sensorType),e in cb||(cb[e]=0),cb[e]++,this.selector+=`-${e}-${cb[e]}`}}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),this.svg.node().classList.add("selected")}setClass(e){!e.node()||!this.classes||this.classes.forEach(t=>{e.node().classList.add(t)})}}class Ga extends qc{constructor(e){super(),this.name="",this.coords=[],Object.assign(this,e)}draw(e){var t=this;return ba(function*(){void 0===t.svg&&(t.svg=Ws(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){this.svg&&this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness)}square(e,t,i){this.coords=[[i[0],i[1]],[i[0]+e,i[1]],[i[0]+e,i[1]+t],[i[0],i[1]+t]]}}class l3 extends qc{constructor(e){super(),this.coords=[],this.dash=[],Object.assign(this,e)}draw(e){var t=this;return ba(function*(){void 0===t.svg&&(t.svg=Ws(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){this.svg&&this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness).attr("stroke-dasharray",this.dash.map(t=>t*this.meterPerPixel*this.lineThickness).join(" "))}}class lb extends qc{constructor(e){super(),this.d="",Object.assign(this,e)}draw(e){var t=this;return ba(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=Ws(`#${t.selector}`)}t.svg.attr("d",t.d).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}setClass(e){!e.node()||0===this.classes.length||e.node().classList.add(this.classes)}}const Ld=100,k0=1e3,Dl=1001,B1=1003,Qa=1006,Dd=1008,W8=1009,j8=1014,L4=1015,P0=1016,$8=1020,Du=1023,q8=1026,K8=1027,ev=2300,G7=2301,Gh=3e3,Lo=3001,Qh="srgb",X8="srgb-linear";class Y8{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Xc=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let fee=1234567;const Z8=Math.PI/180,tv=180/Math.PI;function G3(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Xc[255&n]+Xc[n>>8&255]+Xc[n>>16&255]+Xc[n>>24&255]+"-"+Xc[255&e]+Xc[e>>8&255]+"-"+Xc[e>>16&15|64]+Xc[e>>24&255]+"-"+Xc[63&t|128]+Xc[t>>8&255]+"-"+Xc[t>>16&255]+Xc[t>>24&255]+Xc[255&i]+Xc[i>>8&255]+Xc[i>>16&255]+Xc[i>>24&255]).toLowerCase()}function e2(n,e,t){return Math.max(e,Math.min(t,n))}function _F(n,e){return(n%e+e)%e}function nv(n,e,t){return(1-t)*n+t*e}function yF(n){return 0==(n&n-1)&&0!==n}function dee(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ab(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Wh(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function sa(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var vb=Object.freeze({__proto__:null,DEG2RAD:Z8,RAD2DEG:tv,generateUUID:G3,clamp:e2,euclideanModulo:_F,mapLinear:function dPe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},inverseLerp:function pPe(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:nv,damp:function gPe(n,e,t,i){return nv(n,e,1-Math.exp(-t*i))},pingpong:function mPe(n,e=1){return e-Math.abs(_F(n,2*e)-e)},smoothstep:function APe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function vPe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function _Pe(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function yPe(n,e){return n+Math.random()*(e-n)},randFloatSpread:function wPe(n){return n*(.5-Math.random())},seededRandom:function CPe(n){void 0!==n&&(fee=n);let e=fee+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function xPe(n){return n*Z8},radToDeg:function bPe(n){return n*tv},isPowerOfTwo:yF,ceilPowerOfTwo:dee,floorPowerOfTwo:Ab,setQuaternionFromProperEuler:function MPe(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),g=s((i-e)/2),_=o((i-e)/2);switch(r){case"XYX":n.set(a*u,c*f,c*p,a*l);break;case"YZY":n.set(c*p,a*u,c*f,a*l);break;case"ZXZ":n.set(c*f,c*p,a*u,a*l);break;case"XZX":n.set(a*u,c*_,c*g,a*l);break;case"YXY":n.set(c*g,a*u,c*_,a*l);break;case"ZYZ":n.set(c*_,c*g,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:sa,denormalize:Wh});class Qt{constructor(e=0,t=0){Qt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class h3{constructor(){h3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],f=i[7],p=i[2],g=i[5],_=i[8],y=r[0],w=r[3],C=r[6],b=r[1],M=r[4],T=r[7],I=r[2],F=r[5],P=r[8];return s[0]=o*y+a*b+c*I,s[3]=o*w+a*M+c*F,s[6]=o*C+a*T+c*P,s[1]=l*y+u*b+f*I,s[4]=l*w+u*M+f*F,s[7]=l*C+u*T+f*P,s[2]=p*y+g*b+_*I,s[5]=p*w+g*M+_*F,s[8]=p*C+g*T+_*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=u*o-a*l,p=a*c-u*s,g=l*s-o*c,_=t*f+i*p+r*g;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const y=1/_;return e[0]=f*y,e[1]=(r*l-u*i)*y,e[2]=(a*i-r*o)*y,e[3]=p*y,e[4]=(u*t-r*c)*y,e[5]=(r*s-a*t)*y,e[6]=g*y,e[7]=(i*c-l*t)*y,e[8]=(o*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],c=r[1],l=r[4],u=r[7];return r[0]=t*s+i*c,r[3]=t*o+i*l,r[6]=t*a+i*u,r[1]=-i*s+t*c,r[4]=-i*o+t*l,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function pee(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function iv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function J8(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function _b(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const wF={[Qh]:{[X8]:J8},[X8]:{[Qh]:_b}},Iu={legacyMode:!0,get workingColorSpace(){return X8},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(wF[e]&&void 0!==wF[e][t]){const i=wF[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},gee={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},H2={r:0,g:0,b:0},Bu={h:0,s:0,l:0},yb={h:0,s:0,l:0};function CF(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function wb(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let $7,Dn=(()=>{class n{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Qh){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Iu.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=X8){return this.r=t,this.g=i,this.b=r,Iu.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=X8){if(t=_F(t,1),i=e2(i,0,1),r=e2(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=CF(a,o,t+1/3),this.g=CF(a,o,t),this.b=CF(a,o,t-1/3)}return Iu.toWorkingColorSpace(this,s),this}setStyle(t,i=Qh){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const c=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,Iu.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,Iu.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const l=parseFloat(o[1])/360,u=parseFloat(o[2])/100,f=parseFloat(o[3])/100;return r(o[4]),this.setHSL(l,u,f,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,Iu.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,Iu.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Qh){const r=gee[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=J8(t.r),this.g=J8(t.g),this.b=J8(t.b),this}copyLinearToSRGB(t){return this.r=_b(t.r),this.g=_b(t.g),this.b=_b(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Qh){return Iu.fromWorkingColorSpace(wb(this,H2),t),e2(255*H2.r,0,255)<<16^e2(255*H2.g,0,255)<<8^e2(255*H2.b,0,255)<<0}getHexString(t=Qh){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=X8){Iu.fromWorkingColorSpace(wb(this,H2),i);const r=H2.r,s=H2.g,o=H2.b,a=Math.max(r,s,o),c=Math.min(r,s,o);let l,u;const f=(c+a)/2;if(c===a)l=0,u=0;else{const p=a-c;switch(u=f<=.5?p/(a+c):p/(2-a-c),a){case r:l=(s-o)/p+(s<o?6:0);break;case s:l=(o-r)/p+2;break;case o:l=(r-s)/p+4}l/=6}return t.h=l,t.s=u,t.l=f,t}getRGB(t,i=X8){return Iu.fromWorkingColorSpace(wb(this,H2),i),t.r=H2.r,t.g=H2.g,t.b=H2.b,t}getStyle(t=Qh){return Iu.fromWorkingColorSpace(wb(this,H2),t),t!==Qh?`color(${t} ${H2.r} ${H2.g} ${H2.b})`:`rgb(${255*H2.r|0},${255*H2.g|0},${255*H2.b|0})`}offsetHSL(t,i,r){return this.getHSL(Bu),Bu.h+=t,Bu.s+=i,Bu.l+=r,this.setHSL(Bu.h,Bu.s,Bu.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(Bu),t.getHSL(yb);const r=nv(Bu.h,yb.h,i),s=nv(Bu.s,yb.s,i),o=nv(Bu.l,yb.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=gee,n})();class mee{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===$7&&($7=iv("canvas")),$7.width=e.width,$7.height=e.height;const i=$7.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=$7}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=iv("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*J8(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*J8(t[i]/255)):J8(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class q7{constructor(e=null){this.isSource=!0,this.uuid=G3(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(xF(r[o].isDataTexture?r[o].image:r[o]))}else s=xF(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function xF(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?mee.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let EPe=0,D4=(()=>{class n extends Y8{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Dl,s=Dl,o=Qa,a=Dd,c=Du,l=W8,u=1,f=Gh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:EPe++}),this.uuid=G3(),this.name="",this.source=new q7(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new Qt(0,0),this.repeat=new Qt(1,1),this.center=new Qt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new h3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case k0:t.x=t.x-Math.floor(t.x);break;case Dl:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case k0:t.y=t.y-Math.floor(t.y);break;case Dl:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class yo{constructor(e=0,t=0,i=0,r=1){yo.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],f=c[8],p=c[1],g=c[5],_=c[9],y=c[2],w=c[6],C=c[10];if(Math.abs(u-p)<.01&&Math.abs(f-y)<.01&&Math.abs(_-w)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+y)<.1&&Math.abs(_+w)<.1&&Math.abs(l+g+C-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(l+1)/2,T=(g+1)/2,I=(C+1)/2,F=(u+p)/4,P=(f+y)/4,R=(_+w)/4;return M>T&&M>I?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=F/i,s=P/i):T>I?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=F/r,s=R/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=P/s,r=R/s),this.set(i,r,s,t),this}let b=Math.sqrt((w-_)*(w-_)+(f-y)*(f-y)+(p-u)*(p-u));return Math.abs(b)<.001&&(b=1),this.x=(w-_)/b,this.y=(f-y)/b,this.z=(p-u)/b,this.w=Math.acos((l+g+C-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class I4 extends Y8{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new yo(0,0,e,t),this.scissorTest=!1,this.viewport=new yo(0,0,e,t),this.texture=new D4({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Qa,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new q7(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class bF extends D4{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=B1,this.minFilter=B1,this.wrapR=Dl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Aee extends D4{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=B1,this.minFilter=B1,this.wrapR=Dl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bc{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],f=i[r+3];const p=s[o+0],g=s[o+1],_=s[o+2],y=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=f);if(1===a)return e[t+0]=p,e[t+1]=g,e[t+2]=_,void(e[t+3]=y);if(f!==y||c!==p||l!==g||u!==_){let w=1-a;const C=c*p+l*g+u*_+f*y,b=C>=0?1:-1,M=1-C*C;if(M>Number.EPSILON){const I=Math.sqrt(M),F=Math.atan2(I,C*b);w=Math.sin(w*F)/I,a=Math.sin(a*F)/I}const T=a*b;if(c=c*w+p*T,l=l*w+g*T,u=u*w+_*T,f=f*w+y*T,w===1-a){const I=1/Math.sqrt(c*c+l*l+u*u+f*f);c*=I,l*=I,u*=I,f*=I}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],f=s[o],p=s[o+1],g=s[o+2],_=s[o+3];return e[t]=a*_+u*f+c*g-l*p,e[t+1]=c*_+u*p+l*f-a*g,e[t+2]=l*_+u*g+a*p-c*f,e[t+3]=u*_-a*f-c*p-l*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),f=a(s/2),p=c(i/2),g=c(r/2),_=c(s/2);switch(o){case"XYZ":this._x=p*u*f+l*g*_,this._y=l*g*f-p*u*_,this._z=l*u*_+p*g*f,this._w=l*u*f-p*g*_;break;case"YXZ":this._x=p*u*f+l*g*_,this._y=l*g*f-p*u*_,this._z=l*u*_-p*g*f,this._w=l*u*f+p*g*_;break;case"ZXY":this._x=p*u*f-l*g*_,this._y=l*g*f+p*u*_,this._z=l*u*_+p*g*f,this._w=l*u*f-p*g*_;break;case"ZYX":this._x=p*u*f-l*g*_,this._y=l*g*f+p*u*_,this._z=l*u*_-p*g*f,this._w=l*u*f+p*g*_;break;case"YZX":this._x=p*u*f+l*g*_,this._y=l*g*f+p*u*_,this._z=l*u*_-p*g*f,this._w=l*u*f-p*g*_;break;case"XZY":this._x=p*u*f-l*g*_,this._y=l*g*f-p*u*_,this._z=l*u*_+p*g*f,this._w=l*u*f+p*g*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],f=t[10],p=i+a+f;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(u-c)*g,this._y=(s-l)*g,this._z=(o-r)*g}else if(i>a&&i>f){const g=2*Math.sqrt(1+i-a-f);this._w=(u-c)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+l)/g}else if(a>f){const g=2*Math.sqrt(1+a-i-f);this._w=(s-l)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(c+u)/g}else{const g=2*Math.sqrt(1+f-i-a);this._w=(o-r)/g,this._x=(s+l)/g,this._y=(c+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(e2(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),f=Math.sin((1-t)*u)/l,p=Math.sin(t*u)/l;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ge{constructor(e=0,t=0,i=0){ge.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(vee.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(vee.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*r-a*i,u=c*i+a*t-s*r,f=c*r+s*i-o*t,p=-s*t-o*i-a*r;return this.x=l*c+p*-s+u*-a-f*-o,this.y=u*c+p*-o+f*-s-l*-a,this.z=f*c+p*-a+l*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return MF.copy(this).projectOnVector(e),this.sub(MF)}reflect(e){return this.sub(MF.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(e2(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const MF=new ge,vee=new bc;class e5{constructor(e=new ge(1/0,1/0,1/0),t=new ge(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.length;c<l;c+=3){const u=e[c],f=e[c+1],p=e[c+2];u<t&&(t=u),f<i&&(i=f),p<r&&(r=p),u>s&&(s=u),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.count;c<l;c++){const u=e.getX(c),f=e.getY(c),p=e.getZ(c);u<t&&(t=u),f<i&&(i=f),p<r&&(r=p),u>s&&(s=u),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=t5.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)t5.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(t5)}else null===i.boundingBox&&i.computeBoundingBox(),SF.copy(i.boundingBox),SF.applyMatrix4(e.matrixWorld),this.union(SF);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,t5),t5.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(rv),Cb.subVectors(this.max,rv),K7.subVectors(e.a,rv),X7.subVectors(e.b,rv),Y7.subVectors(e.c,rv),Bd.subVectors(X7,K7),Rd.subVectors(Y7,X7),n5.subVectors(K7,Y7);let t=[0,-Bd.z,Bd.y,0,-Rd.z,Rd.y,0,-n5.z,n5.y,Bd.z,0,-Bd.x,Rd.z,0,-Rd.x,n5.z,0,-n5.x,-Bd.y,Bd.x,0,-Rd.y,Rd.x,0,-n5.y,n5.x,0];return!(!EF(t,K7,X7,Y7,Cb)||(t=[1,0,0,0,1,0,0,0,1],!EF(t,K7,X7,Y7,Cb)))&&(xb.crossVectors(Bd,Rd),t=[xb.x,xb.y,xb.z],EF(t,K7,X7,Y7,Cb))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return t5.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(t5).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(jh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jh)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const jh=[new ge,new ge,new ge,new ge,new ge,new ge,new ge,new ge],t5=new ge,SF=new e5,K7=new ge,X7=new ge,Y7=new ge,Bd=new ge,Rd=new ge,n5=new ge,rv=new ge,Cb=new ge,xb=new ge,r5=new ge;function EF(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){r5.fromArray(n,s);const a=r.x*Math.abs(r5.x)+r.y*Math.abs(r5.y)+r.z*Math.abs(r5.z),c=e.dot(r5),l=t.dot(r5),u=i.dot(r5);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const TPe=new e5,_ee=new ge,bb=new ge,TF=new ge;class s5{constructor(e=new ge,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):TPe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){TF.subVectors(e,this.center);const t=TF.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(TF.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?bb.set(0,0,1).multiplyScalar(e.radius):bb.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(_ee.copy(e.center).add(bb)),this.expandByPoint(_ee.copy(e.center).sub(bb)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const $h=new ge,LF=new ge,Mb=new ge,Fd=new ge,DF=new ge,Sb=new ge,IF=new ge;class Eb{constructor(e=new ge,t=new ge(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$h)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$h.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($h.copy(this.direction).multiplyScalar(t).add(this.origin),$h.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){LF.copy(e).add(t).multiplyScalar(.5),Mb.copy(t).sub(e).normalize(),Fd.copy(this.origin).sub(LF);const s=.5*e.distanceTo(t),o=-this.direction.dot(Mb),a=Fd.dot(this.direction),c=-Fd.dot(Mb),l=Fd.lengthSq(),u=Math.abs(1-o*o);let f,p,g,_;if(u>0)if(f=o*c-a,p=o*a-c,_=s*u,f>=0)if(p>=-_)if(p<=_){const y=1/u;f*=y,p*=y,g=f*(f+o*p+2*a)+p*(o*f+p+2*c)+l}else p=s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;else p=-s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;else p<=-_?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-c),s),g=-f*f+p*(p+2*c)+l):p<=_?(f=0,p=Math.min(Math.max(-s,-c),s),g=p*(p+2*c)+l):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-c),s),g=-f*f+p*(p+2*c)+l);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(Mb).multiplyScalar(p).add(LF),g}intersectSphere(e,t){$h.subVectors(e.center,this.origin);const i=$h.dot(this.direction),r=$h.dot($h)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return l>=0?(i=(e.min.x-p.x)*l,r=(e.max.x-p.x)*l):(i=(e.max.x-p.x)*l,r=(e.min.x-p.x)*l),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),f>=0?(a=(e.min.z-p.z)*f,c=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,c=(e.min.z-p.z)*f),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,$h)}intersectTriangle(e,t,i,r,s){DF.subVectors(t,e),Sb.subVectors(i,e),IF.crossVectors(DF,Sb);let a,o=this.direction.dot(IF);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Fd.subVectors(this.origin,e);const c=a*this.direction.dot(Sb.crossVectors(Fd,Sb));if(c<0)return null;const l=a*this.direction.dot(DF.cross(Fd));if(l<0||c+l>o)return null;const u=-a*Fd.dot(IF);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Vi{constructor(){Vi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w){const C=this.elements;return C[0]=e,C[4]=t,C[8]=i,C[12]=r,C[1]=s,C[5]=o,C[9]=a,C[13]=c,C[2]=l,C[6]=u,C[10]=f,C[14]=p,C[3]=g,C[7]=_,C[11]=y,C[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Vi).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Z7.setFromMatrixColumn(e,0).length(),s=1/Z7.setFromMatrixColumn(e,1).length(),o=1/Z7.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if("XYZ"===e.order){const p=o*u,g=o*f,_=a*u,y=a*f;t[0]=c*u,t[4]=-c*f,t[8]=l,t[1]=g+_*l,t[5]=p-y*l,t[9]=-a*c,t[2]=y-p*l,t[6]=_+g*l,t[10]=o*c}else if("YXZ"===e.order){const p=c*u,g=c*f,_=l*u,y=l*f;t[0]=p+y*a,t[4]=_*a-g,t[8]=o*l,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=g*a-_,t[6]=y+p*a,t[10]=o*c}else if("ZXY"===e.order){const p=c*u,g=c*f,_=l*u,y=l*f;t[0]=p-y*a,t[4]=-o*f,t[8]=_+g*a,t[1]=g+_*a,t[5]=o*u,t[9]=y-p*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const p=o*u,g=o*f,_=a*u,y=a*f;t[0]=c*u,t[4]=_*l-g,t[8]=p*l+y,t[1]=c*f,t[5]=y*l+p,t[9]=g*l-_,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const p=o*c,g=o*l,_=a*c,y=a*l;t[0]=c*u,t[4]=y-p*f,t[8]=_*f+g,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=g*f+_,t[10]=p-y*f}else if("XZY"===e.order){const p=o*c,g=o*l,_=a*c,y=a*l;t[0]=c*u,t[4]=-f,t[8]=l*u,t[1]=p*f+y,t[5]=o*u,t[9]=g*f-_,t[2]=_*f-g,t[6]=a*u,t[10]=y*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(LPe,e,DPe)}lookAt(e,t,i){const r=this.elements;return Q3.subVectors(e,t),0===Q3.lengthSq()&&(Q3.z=1),Q3.normalize(),kd.crossVectors(i,Q3),0===kd.lengthSq()&&(1===Math.abs(i.z)?Q3.x+=1e-4:Q3.z+=1e-4,Q3.normalize(),kd.crossVectors(i,Q3)),kd.normalize(),Tb.crossVectors(Q3,kd),r[0]=kd.x,r[4]=Tb.x,r[8]=Q3.x,r[1]=kd.y,r[5]=Tb.y,r[9]=Q3.y,r[2]=kd.z,r[6]=Tb.z,r[10]=Q3.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],f=i[5],p=i[9],g=i[13],_=i[2],y=i[6],w=i[10],C=i[14],b=i[3],M=i[7],T=i[11],I=i[15],F=r[0],P=r[4],R=r[8],k=r[12],W=r[1],ie=r[5],Te=r[9],me=r[13],Q=r[2],he=r[6],K=r[10],oe=r[14],fe=r[3],de=r[7],Re=r[11],Ze=r[15];return s[0]=o*F+a*W+c*Q+l*fe,s[4]=o*P+a*ie+c*he+l*de,s[8]=o*R+a*Te+c*K+l*Re,s[12]=o*k+a*me+c*oe+l*Ze,s[1]=u*F+f*W+p*Q+g*fe,s[5]=u*P+f*ie+p*he+g*de,s[9]=u*R+f*Te+p*K+g*Re,s[13]=u*k+f*me+p*oe+g*Ze,s[2]=_*F+y*W+w*Q+C*fe,s[6]=_*P+y*ie+w*he+C*de,s[10]=_*R+y*Te+w*K+C*Re,s[14]=_*k+y*me+w*oe+C*Ze,s[3]=b*F+M*W+T*Q+I*fe,s[7]=b*P+M*ie+T*he+I*de,s[11]=b*R+M*Te+T*K+I*Re,s[15]=b*k+M*me+T*oe+I*Ze,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],f=e[6],p=e[10],g=e[14];return e[3]*(+s*c*f-r*l*f-s*a*p+i*l*p+r*a*g-i*c*g)+e[7]*(+t*c*g-t*l*p+s*o*p-r*o*g+r*l*u-s*c*u)+e[11]*(+t*l*f-t*a*g-s*o*f+i*o*g+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*f+t*a*p+r*o*f-i*o*p+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],p=e[10],g=e[11],_=e[12],y=e[13],w=e[14],C=e[15],b=f*w*l-y*p*l+y*c*g-a*w*g-f*c*C+a*p*C,M=_*p*l-u*w*l-_*c*g+o*w*g+u*c*C-o*p*C,T=u*y*l-_*f*l+_*a*g-o*y*g-u*a*C+o*f*C,I=_*f*c-u*y*c-_*a*p+o*y*p+u*a*w-o*f*w,F=t*b+i*M+r*T+s*I;if(0===F)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/F;return e[0]=b*P,e[1]=(y*p*s-f*w*s-y*r*g+i*w*g+f*r*C-i*p*C)*P,e[2]=(a*w*s-y*c*s+y*r*l-i*w*l-a*r*C+i*c*C)*P,e[3]=(f*c*s-a*p*s-f*r*l+i*p*l+a*r*g-i*c*g)*P,e[4]=M*P,e[5]=(u*w*s-_*p*s+_*r*g-t*w*g-u*r*C+t*p*C)*P,e[6]=(_*c*s-o*w*s-_*r*l+t*w*l+o*r*C-t*c*C)*P,e[7]=(o*p*s-u*c*s+u*r*l-t*p*l-o*r*g+t*c*g)*P,e[8]=T*P,e[9]=(_*f*s-u*y*s-_*i*g+t*y*g+u*i*C-t*f*C)*P,e[10]=(o*y*s-_*a*s+_*i*l-t*y*l-o*i*C+t*a*C)*P,e[11]=(u*a*s-o*f*s-u*i*l+t*f*l+o*i*g-t*a*g)*P,e[12]=I*P,e[13]=(u*y*r-_*f*r+_*i*p-t*y*p-u*i*w+t*f*w)*P,e[14]=(_*a*r-o*y*r-_*i*c+t*y*c+o*i*w-t*a*w)*P,e[15]=(o*f*r-u*a*r+u*i*c-t*f*c-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,f=a+a,p=s*l,g=s*u,_=s*f,y=o*u,w=o*f,C=a*f,b=c*l,M=c*u,T=c*f,I=i.x,F=i.y,P=i.z;return r[0]=(1-(y+C))*I,r[1]=(g+T)*I,r[2]=(_-M)*I,r[3]=0,r[4]=(g-T)*F,r[5]=(1-(p+C))*F,r[6]=(w+b)*F,r[7]=0,r[8]=(_+M)*P,r[9]=(w-b)*P,r[10]=(1-(p+y))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Z7.set(r[0],r[1],r[2]).length();const o=Z7.set(r[4],r[5],r[6]).length(),a=Z7.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ru.copy(this);const l=1/s,u=1/o,f=1/a;return Ru.elements[0]*=l,Ru.elements[1]*=l,Ru.elements[2]*=l,Ru.elements[4]*=u,Ru.elements[5]*=u,Ru.elements[6]*=u,Ru.elements[8]*=f,Ru.elements[9]*=f,Ru.elements[10]*=f,t.setFromRotationMatrix(Ru),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(i-r),u=(t+e)/(t-e),f=(i+r)/(i-r),p=-(o+s)/(o-s),g=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),l=1/(i-r),u=1/(o-s),f=(t+e)*c,p=(i+r)*l,g=(o+s)*u;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Z7=new ge,Ru=new Vi,LPe=new ge(0,0,0),DPe=new ge(1,1,1),kd=new ge,Tb=new ge,Q3=new ge,yee=new Vi,wee=new bc;let IPe=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],f=s[9],p=s[2],g=s[6],_=s[10];switch(i){case"XYZ":this._y=Math.asin(e2(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,_),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-e2(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(e2(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-e2(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,_),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(e2(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-e2(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return yee.makeRotationFromQuaternion(t),this.setFromRotationMatrix(yee,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return wee.setFromEuler(this),this.setFromQuaternion(wee,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class BF{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let BPe=0;const Cee=new ge,J7=new bc,qh=new Vi,Lb=new ge,sv=new ge,RPe=new ge,FPe=new bc,xee=new ge(1,0,0),bee=new ge(0,1,0),Mee=new ge(0,0,1),kPe={type:"added"},See={type:"removed"};let Mc=(()=>{class n extends Y8{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:BPe++}),this.uuid=G3(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new ge,i=new IPe,r=new bc,s=new ge(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Vi},normalMatrix:{value:new h3}}),this.matrix=new Vi,this.matrixWorld=new Vi,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new BF,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return J7.setFromAxisAngle(t,i),this.quaternion.multiply(J7),this}rotateOnWorldAxis(t,i){return J7.setFromAxisAngle(t,i),this.quaternion.premultiply(J7),this}rotateX(t){return this.rotateOnAxis(xee,t)}rotateY(t){return this.rotateOnAxis(bee,t)}rotateZ(t){return this.rotateOnAxis(Mee,t)}translateOnAxis(t,i){return Cee.copy(t).applyQuaternion(this.quaternion),this.position.add(Cee.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(xee,t)}translateY(t){return this.translateOnAxis(bee,t)}translateZ(t){return this.translateOnAxis(Mee,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(qh.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Lb.copy(t):Lb.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),sv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qh.lookAt(sv,Lb,this.up):qh.lookAt(Lb,sv,this.up),this.quaternion.setFromRotationMatrix(qh),s&&(qh.extractRotation(s.matrixWorld),J7.setFromRotationMatrix(qh),this.quaternion.premultiply(J7.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(kPe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(See)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(See)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),qh.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),qh.multiply(t.parent.matrixWorld)),t.applyMatrix4(qh),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sv,t,RPe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sv,FPe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const c=s[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),f=a(t.images),p=a(t.shapes),g=a(t.skeletons),_=a(t.animations),y=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),_.length>0&&(r.animations=_),y.length>0&&(r.nodes=y)}return r.object=s,r;function a(c){const l=[];for(const u in c){const f=c[u];delete f.metadata,l.push(f)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DefaultUp=new ge(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const Fu=new ge,Kh=new ge,RF=new ge,Xh=new ge,eg=new ge,tg=new ge,Eee=new ge,FF=new ge,kF=new ge,PF=new ge;class ku{constructor(e=new ge,t=new ge,i=new ge){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Fu.subVectors(e,t),r.cross(Fu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Fu.subVectors(r,t),Kh.subVectors(i,t),RF.subVectors(e,t);const o=Fu.dot(Fu),a=Fu.dot(Kh),c=Fu.dot(RF),l=Kh.dot(Kh),u=Kh.dot(RF),f=o*l-a*a;if(0===f)return s.set(-2,-1,-1);const p=1/f,g=(l*c-a*u)*p,_=(o*u-a*c)*p;return s.set(1-g-_,_,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Xh),Xh.x>=0&&Xh.y>=0&&Xh.x+Xh.y<=1}static getUV(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,Xh),c.set(0,0),c.addScaledVector(s,Xh.x),c.addScaledVector(o,Xh.y),c.addScaledVector(a,Xh.z),c}static isFrontFacing(e,t,i,r){return Fu.subVectors(i,t),Kh.subVectors(e,t),Fu.cross(Kh).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Fu.subVectors(this.c,this.b),Kh.subVectors(this.a,this.b),.5*Fu.cross(Kh).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ku.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ku.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return ku.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ku.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ku.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;eg.subVectors(r,i),tg.subVectors(s,i),FF.subVectors(e,i);const c=eg.dot(FF),l=tg.dot(FF);if(c<=0&&l<=0)return t.copy(i);kF.subVectors(e,r);const u=eg.dot(kF),f=tg.dot(kF);if(u>=0&&f<=u)return t.copy(r);const p=c*f-u*l;if(p<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(eg,o);PF.subVectors(e,s);const g=eg.dot(PF),_=tg.dot(PF);if(_>=0&&g<=_)return t.copy(s);const y=g*l-c*_;if(y<=0&&l>=0&&_<=0)return a=l/(l-_),t.copy(i).addScaledVector(tg,a);const w=u*_-g*f;if(w<=0&&f-u>=0&&g-_>=0)return Eee.subVectors(s,r),a=(f-u)/(f-u+(g-_)),t.copy(r).addScaledVector(Eee,a);const C=1/(w+y+p);return o=y*C,a=p*C,t.copy(i).addScaledVector(eg,o).addScaledVector(tg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let PPe=0;class Yc extends Y8{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:PPe++}),this.uuid=G3(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Ld,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Il extends Yc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const S2=new ge,Db=new Qt;class Wa{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Db.fromBufferAttribute(this,t),Db.applyMatrix3(e),this.setXY(t,Db.x,Db.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)S2.fromBufferAttribute(this,t),S2.applyMatrix3(e),this.setXYZ(t,S2.x,S2.y,S2.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)S2.fromBufferAttribute(this,t),S2.applyMatrix4(e),this.setXYZ(t,S2.x,S2.y,S2.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)S2.fromBufferAttribute(this,t),S2.applyNormalMatrix(e),this.setXYZ(t,S2.x,S2.y,S2.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)S2.fromBufferAttribute(this,t),S2.transformDirection(e),this.setXYZ(t,S2.x,S2.y,S2.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Wh(t,this.array)),t}setX(e,t){return this.normalized&&(t=sa(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Wh(t,this.array)),t}setY(e,t){return this.normalized&&(t=sa(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Wh(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sa(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Wh(t,this.array)),t}setW(e,t){return this.normalized&&(t=sa(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=sa(t,this.array),i=sa(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=sa(t,this.array),i=sa(i,this.array),r=sa(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=sa(t,this.array),i=sa(i,this.array),r=sa(r,this.array),s=sa(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Tee extends Wa{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Lee extends Wa{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class ai extends Wa{constructor(e,t,i){super(new Float32Array(e),t,i)}}let HPe=0;const B4=new Vi,HF=new Mc,ng=new ge,W3=new e5,ov=new e5,sc=new ge;class vr extends Y8{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:HPe++}),this.uuid=G3(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(pee(e)?Lee:Tee)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new h3).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return B4.makeRotationFromQuaternion(e),this.applyMatrix4(B4),this}rotateX(e){return B4.makeRotationX(e),this.applyMatrix4(B4),this}rotateY(e){return B4.makeRotationY(e),this.applyMatrix4(B4),this}rotateZ(e){return B4.makeRotationZ(e),this.applyMatrix4(B4),this}translate(e,t,i){return B4.makeTranslation(e,t,i),this.applyMatrix4(B4),this}scale(e,t,i){return B4.makeScale(e,t,i),this.applyMatrix4(B4),this}lookAt(e){return HF.lookAt(e),HF.updateMatrix(),this.applyMatrix4(HF.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ng).negate(),this.translate(ng.x,ng.y,ng.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ai(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new e5);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ge(-1/0,-1/0,-1/0),new ge(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)W3.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(sc.addVectors(this.boundingBox.min,W3.min),this.boundingBox.expandByPoint(sc),sc.addVectors(this.boundingBox.max,W3.max),this.boundingBox.expandByPoint(sc)):(this.boundingBox.expandByPoint(W3.min),this.boundingBox.expandByPoint(W3.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new s5);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ge,1/0);if(e){const i=this.boundingSphere.center;if(W3.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)ov.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(sc.addVectors(W3.min,ov.min),W3.expandByPoint(sc),sc.addVectors(W3.max,ov.max),W3.expandByPoint(sc)):(W3.expandByPoint(ov.min),W3.expandByPoint(ov.max));W3.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)sc.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(sc));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)sc.fromBufferAttribute(a,l),c&&(ng.fromBufferAttribute(e,l),sc.add(ng)),r=Math.max(r,i.distanceToSquared(sc))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Wa(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let W=0;W<a;W++)l[W]=new ge,u[W]=new ge;const f=new ge,p=new ge,g=new ge,_=new Qt,y=new Qt,w=new Qt,C=new ge,b=new ge;function M(W,ie,Te){f.fromArray(r,3*W),p.fromArray(r,3*ie),g.fromArray(r,3*Te),_.fromArray(o,2*W),y.fromArray(o,2*ie),w.fromArray(o,2*Te),p.sub(f),g.sub(f),y.sub(_),w.sub(_);const me=1/(y.x*w.y-w.x*y.y);!isFinite(me)||(C.copy(p).multiplyScalar(w.y).addScaledVector(g,-y.y).multiplyScalar(me),b.copy(g).multiplyScalar(y.x).addScaledVector(p,-w.x).multiplyScalar(me),l[W].add(C),l[ie].add(C),l[Te].add(C),u[W].add(b),u[ie].add(b),u[Te].add(b))}let T=this.groups;0===T.length&&(T=[{start:0,count:i.length}]);for(let W=0,ie=T.length;W<ie;++W){const Te=T[W],me=Te.start;for(let he=me,K=me+Te.count;he<K;he+=3)M(i[he+0],i[he+1],i[he+2])}const I=new ge,F=new ge,P=new ge,R=new ge;function k(W){P.fromArray(s,3*W),R.copy(P);const ie=l[W];I.copy(ie),I.sub(P.multiplyScalar(P.dot(ie))).normalize(),F.crossVectors(R,ie);const me=F.dot(u[W])<0?-1:1;c[4*W]=I.x,c[4*W+1]=I.y,c[4*W+2]=I.z,c[4*W+3]=me}for(let W=0,ie=T.length;W<ie;++W){const Te=T[W],me=Te.start;for(let he=me,K=me+Te.count;he<K;he+=3)k(i[he+0]),k(i[he+1]),k(i[he+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Wa(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const r=new ge,s=new ge,o=new ge,a=new ge,c=new ge,l=new ge,u=new ge,f=new ge;if(e)for(let p=0,g=e.count;p<g;p+=3){const _=e.getX(p+0),y=e.getX(p+1),w=e.getX(p+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,w),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,_),c.fromBufferAttribute(i,y),l.fromBufferAttribute(i,w),a.add(u),c.add(u),l.add(u),i.setXYZ(_,a.x,a.y,a.z),i.setXYZ(y,c.x,c.y,c.z),i.setXYZ(w,l.x,l.y,l.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)sc.fromBufferAttribute(e,t),sc.normalize(),e.setXYZ(t,sc.x,sc.y,sc.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,f=a.normalized,p=new l.constructor(c.length*u);let g=0,_=0;for(let y=0,w=c.length;y<w;y++){g=a.isInterleavedBufferAttribute?c[y]*a.data.stride+a.offset:c[y]*u;for(let C=0;C<u;C++)p[_++]=l[g++]}return new Wa(p,u,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new vr,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,f=l.length;u<f;u++){const g=e(l[u],i);c.push(g)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let f=0,p=l.length;f<p;f++)u.push(l[f].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],f=s[l];for(let p=0,g=f.length;p<g;p++)u.push(f[p].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Dee=new Vi,ig=new Eb,zF=new s5,Pd=new ge,Hd=new ge,zd=new ge,OF=new ge,NF=new ge,VF=new ge,Ib=new ge,Bb=new ge,Rb=new ge,Fb=new Qt,kb=new Qt,Pb=new Qt,UF=new ge,Hb=new ge;class Ys extends Mc{constructor(e=new vr,t=new Il){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),zF.copy(i.boundingSphere),zF.applyMatrix4(s),!1===e.ray.intersectsSphere(zF))||(Dee.copy(s).invert(),ig.copy(e.ray).applyMatrix4(Dee),null!==i.boundingBox&&!1===ig.intersectsBox(i.boundingBox)))return;let o;const a=i.index,c=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,f=i.attributes.uv,p=i.attributes.uv2,g=i.groups,_=i.drawRange;if(null!==a)if(Array.isArray(r))for(let y=0,w=g.length;y<w;y++){const C=g[y],b=r[C.materialIndex];for(let I=Math.max(C.start,_.start),F=Math.min(a.count,Math.min(C.start+C.count,_.start+_.count));I<F;I+=3){const P=a.getX(I),R=a.getX(I+1),k=a.getX(I+2);o=zb(this,b,e,ig,c,l,u,f,p,P,R,k),o&&(o.faceIndex=Math.floor(I/3),o.face.materialIndex=C.materialIndex,t.push(o))}}else for(let C=Math.max(0,_.start),b=Math.min(a.count,_.start+_.count);C<b;C+=3){const M=a.getX(C),T=a.getX(C+1),I=a.getX(C+2);o=zb(this,r,e,ig,c,l,u,f,p,M,T,I),o&&(o.faceIndex=Math.floor(C/3),t.push(o))}else if(void 0!==c)if(Array.isArray(r))for(let y=0,w=g.length;y<w;y++){const C=g[y],b=r[C.materialIndex];for(let I=Math.max(C.start,_.start),F=Math.min(c.count,Math.min(C.start+C.count,_.start+_.count));I<F;I+=3)o=zb(this,b,e,ig,c,l,u,f,p,I,I+1,I+2),o&&(o.faceIndex=Math.floor(I/3),o.face.materialIndex=C.materialIndex,t.push(o))}else for(let C=Math.max(0,_.start),b=Math.min(c.count,_.start+_.count);C<b;C+=3)o=zb(this,r,e,ig,c,l,u,f,p,C,C+1,C+2),o&&(o.faceIndex=Math.floor(C/3),t.push(o))}}function zb(n,e,t,i,r,s,o,a,c,l,u,f){Pd.fromBufferAttribute(r,l),Hd.fromBufferAttribute(r,u),zd.fromBufferAttribute(r,f);const p=n.morphTargetInfluences;if(s&&p){Ib.set(0,0,0),Bb.set(0,0,0),Rb.set(0,0,0);for(let _=0,y=s.length;_<y;_++){const w=p[_],C=s[_];0!==w&&(OF.fromBufferAttribute(C,l),NF.fromBufferAttribute(C,u),VF.fromBufferAttribute(C,f),o?(Ib.addScaledVector(OF,w),Bb.addScaledVector(NF,w),Rb.addScaledVector(VF,w)):(Ib.addScaledVector(OF.sub(Pd),w),Bb.addScaledVector(NF.sub(Hd),w),Rb.addScaledVector(VF.sub(zd),w)))}Pd.add(Ib),Hd.add(Bb),zd.add(Rb)}n.isSkinnedMesh&&(n.boneTransform(l,Pd),n.boneTransform(u,Hd),n.boneTransform(f,zd));const g=function zPe(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===c)return null;Hb.copy(a),Hb.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(Hb);return l<t.near||l>t.far?null:{distance:l,point:Hb.clone(),object:n}}(n,e,t,i,Pd,Hd,zd,UF);if(g){a&&(Fb.fromBufferAttribute(a,l),kb.fromBufferAttribute(a,u),Pb.fromBufferAttribute(a,f),g.uv=ku.getUV(UF,Pd,Hd,zd,Fb,kb,Pb,new Qt)),c&&(Fb.fromBufferAttribute(c,l),kb.fromBufferAttribute(c,u),Pb.fromBufferAttribute(c,f),g.uv2=ku.getUV(UF,Pd,Hd,zd,Fb,kb,Pb,new Qt));const _={a:l,b:u,c:f,normal:new ge,materialIndex:0};ku.getNormal(Pd,Hd,zd,_.normal),g.face=_}return g}class H0 extends vr{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],f=[];let p=0,g=0;function _(y,w,C,b,M,T,I,F,P,R,k){const W=T/P,ie=I/R,Te=T/2,me=I/2,Q=F/2,he=P+1,K=R+1;let oe=0,fe=0;const de=new ge;for(let Re=0;Re<K;Re++){const Ze=Re*ie-me;for(let Be=0;Be<he;Be++)de[y]=(Be*W-Te)*b,de[w]=Ze*M,de[C]=Q,l.push(de.x,de.y,de.z),de[y]=0,de[w]=0,de[C]=F>0?1:-1,u.push(de.x,de.y,de.z),f.push(Be/P),f.push(1-Re/R),oe+=1}for(let Re=0;Re<R;Re++)for(let Ze=0;Ze<P;Ze++){const wt=p+Ze+he*(Re+1),ut=p+(Ze+1)+he*(Re+1),It=p+(Ze+1)+he*Re;c.push(p+Ze+he*Re,wt,It),c.push(wt,ut,It),fe+=6}a.addGroup(g,fe,k),g+=fe,p+=oe}_("z","y","x",-1,-1,i,t,e,o,s,0),_("z","y","x",1,-1,i,t,-e,o,s,1),_("x","z","y",1,1,e,i,t,r,o,2),_("x","z","y",1,-1,e,i,-t,r,o,3),_("x","y","z",1,-1,e,t,i,r,s,4),_("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new ai(l,3)),this.setAttribute("normal",new ai(u,3)),this.setAttribute("uv",new ai(f,2))}static fromJSON(e){return new H0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function rg(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function Zc(n){const e={};for(let t=0;t<n.length;t++){const i=rg(n[t]);for(const r in i)e[r]=i[r]}return e}const Od={clone:rg,merge:Zc};class Sc extends Yc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rg(e.uniforms),this.uniformsGroups=function OPe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class GF extends Mc{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vi,this.projectionMatrix=new Vi,this.projectionMatrixInverse=new Vi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class z2 extends GF{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*tv*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Z8*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*tv*Math.atan(Math.tan(.5*Z8*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Z8*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class UPe extends Mc{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new z2(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ge(1,0,0)),this.add(r);const s=new z2(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ge(-1,0,0)),this.add(s);const o=new z2(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ge(0,1,0)),this.add(o);const a=new z2(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new ge(0,-1,0)),this.add(a);const c=new z2(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new ge(0,0,1)),this.add(c);const l=new z2(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ge(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,l]=this.children,u=e.getRenderTarget(),f=e.toneMapping,p=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=g,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class Ob extends D4{constructor(e,t,i,r,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class GPe extends I4{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new Ob([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Qa}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new H0(5,5,5),s=new Sc({name:"CubemapFromEquirect",uniforms:rg(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Ys(r,s),a=t.minFilter;return t.minFilter===Dd&&(t.minFilter=Qa),new UPe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const QF=new ge,QPe=new ge,WPe=new h3;class Pu{constructor(e=new ge(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=QF.subVectors(i,t).cross(QPe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(QF),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||WPe.getNormalMatrix(e),r=this.coplanarPoint(QF).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ag=new s5,Nb=new ge;class WF{constructor(e=new Pu,t=new Pu,i=new Pu,r=new Pu,s=new Pu,o=new Pu){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],l=i[5],u=i[6],f=i[7],p=i[8],g=i[9],_=i[10],y=i[11],w=i[12],C=i[13],b=i[14],M=i[15];return t[0].setComponents(a-r,f-c,y-p,M-w).normalize(),t[1].setComponents(a+r,f+c,y+p,M+w).normalize(),t[2].setComponents(a+s,f+l,y+g,M+C).normalize(),t[3].setComponents(a-s,f-l,y-g,M-C).normalize(),t[4].setComponents(a-o,f-u,y-_,M-b).normalize(),t[5].setComponents(a+o,f+u,y+_,M+b).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),ag.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ag)}intersectsSprite(e){return ag.center.set(0,0,0),ag.radius=.7071067811865476,ag.applyMatrix4(e.matrixWorld),this.intersectsSphere(ag)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Nb.x=r.normal.x>0?e.max.x:e.min.x,Nb.y=r.normal.y>0?e.max.y:e.min.y,Nb.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Nb)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Iee(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function jPe(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const p=i.get(l);return void((!p||p.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const f=i.get(l);void 0===f?i.set(l,function r(l,u){const f=l.array,p=l.usage,g=n.createBuffer();let _;if(n.bindBuffer(u,g),n.bufferData(u,f,p),l.onUploadCallback(),f instanceof Float32Array)_=5126;else if(f instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");_=5131}else _=5123;else if(f instanceof Int16Array)_=5122;else if(f instanceof Uint32Array)_=5125;else if(f instanceof Int32Array)_=5124;else if(f instanceof Int8Array)_=5120;else if(f instanceof Uint8Array)_=5121;else{if(!(f instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);_=5121}return{buffer:g,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version}}(l,u)):f.version<l.version&&(function s(l,u,f){const p=u.array,g=u.updateRange;n.bindBuffer(f,l),-1===g.count?n.bufferSubData(f,0,p):(t?n.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):n.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1)}(f.buffer,l,u),f.version=l.version)}}}class f3 extends vr{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,f=e/a,p=t/c,g=[],_=[],y=[],w=[];for(let C=0;C<u;C++){const b=C*p-o;for(let M=0;M<l;M++)_.push(M*f-s,-b,0),y.push(0,0,1),w.push(M/a),w.push(1-C/c)}for(let C=0;C<c;C++)for(let b=0;b<a;b++){const T=b+l*(C+1),I=b+1+l*(C+1),F=b+1+l*C;g.push(b+l*C,T,F),g.push(T,I,F)}this.setIndex(g),this.setAttribute("position",new ai(_,3)),this.setAttribute("normal",new ai(y,3)),this.setAttribute("uv",new ai(w,2))}static fromJSON(e){return new f3(e.width,e.height,e.widthSegments,e.heightSegments)}}const xs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Vn={common:{diffuse:{value:new Dn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new h3},uv2Transform:{value:new h3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Qt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new h3}},sprite:{diffuse:{value:new Dn(16777215)},opacity:{value:1},center:{value:new Qt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new h3}}},z0={basic:{uniforms:Zc([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.fog]),vertexShader:xs.meshbasic_vert,fragmentShader:xs.meshbasic_frag},lambert:{uniforms:Zc([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)}}]),vertexShader:xs.meshlambert_vert,fragmentShader:xs.meshlambert_frag},phong:{uniforms:Zc([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)},specular:{value:new Dn(1118481)},shininess:{value:30}}]),vertexShader:xs.meshphong_vert,fragmentShader:xs.meshphong_frag},standard:{uniforms:Zc([Vn.common,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.roughnessmap,Vn.metalnessmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xs.meshphysical_vert,fragmentShader:xs.meshphysical_frag},toon:{uniforms:Zc([Vn.common,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.gradientmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)}}]),vertexShader:xs.meshtoon_vert,fragmentShader:xs.meshtoon_frag},matcap:{uniforms:Zc([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,{matcap:{value:null}}]),vertexShader:xs.meshmatcap_vert,fragmentShader:xs.meshmatcap_frag},points:{uniforms:Zc([Vn.points,Vn.fog]),vertexShader:xs.points_vert,fragmentShader:xs.points_frag},dashed:{uniforms:Zc([Vn.common,Vn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xs.linedashed_vert,fragmentShader:xs.linedashed_frag},depth:{uniforms:Zc([Vn.common,Vn.displacementmap]),vertexShader:xs.depth_vert,fragmentShader:xs.depth_frag},normal:{uniforms:Zc([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,{opacity:{value:1}}]),vertexShader:xs.meshnormal_vert,fragmentShader:xs.meshnormal_frag},sprite:{uniforms:Zc([Vn.sprite,Vn.fog]),vertexShader:xs.sprite_vert,fragmentShader:xs.sprite_frag},background:{uniforms:{uvTransform:{value:new h3},t2D:{value:null}},vertexShader:xs.background_vert,fragmentShader:xs.background_frag},cube:{uniforms:Zc([Vn.envmap,{opacity:{value:1}}]),vertexShader:xs.cube_vert,fragmentShader:xs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xs.equirect_vert,fragmentShader:xs.equirect_frag},distanceRGBA:{uniforms:Zc([Vn.common,Vn.displacementmap,{referencePosition:{value:new ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xs.distanceRGBA_vert,fragmentShader:xs.distanceRGBA_frag},shadow:{uniforms:Zc([Vn.lights,Vn.fog,{color:{value:new Dn(0)},opacity:{value:1}}]),vertexShader:xs.shadow_vert,fragmentShader:xs.shadow_frag}};function Wze(n,e,t,i,r,s){const o=new Dn(0);let c,l,a=!0===r?0:1,u=null,f=0,p=null;function _(y,w){t.buffers.color.setClear(y.r,y.g,y.b,w,s)}return{getClearColor:function(){return o},setClearColor:function(y,w=1){o.set(y),a=w,_(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(y){a=y,_(o,a)},render:function g(y,w){let C=!1,b=!0===w.isScene?w.background:null;b&&b.isTexture&&(b=e.get(b));const M=n.xr,T=M.getSession&&M.getSession();T&&"additive"===T.environmentBlendMode&&(b=null),null===b?_(o,a):b&&b.isColor&&(_(b,1),C=!0),(n.autoClear||C)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||306===b.mapping)?(void 0===l&&(l=new Ys(new H0(1,1,1),new Sc({name:"BackgroundCubeMaterial",uniforms:rg(z0.cube.uniforms),vertexShader:z0.cube.vertexShader,fragmentShader:z0.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(I,F,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=b,l.material.uniforms.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,(u!==b||f!==b.version||p!==n.toneMapping)&&(l.material.needsUpdate=!0,u=b,f=b.version,p=n.toneMapping),l.layers.enableAll(),y.unshift(l,l.geometry,l.material,0,0,null)):b&&b.isTexture&&(void 0===c&&(c=new Ys(new f3(2,2),new Sc({name:"BackgroundMaterial",uniforms:rg(z0.background.uniforms),vertexShader:z0.background.vertexShader,fragmentShader:z0.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=b,!0===b.matrixAutoUpdate&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(u!==b||f!==b.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,u=b,f=b.version,p=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}}}function jze(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},c=w(null);let l=c,u=!1;function g(Q){return i.isWebGL2?n.bindVertexArray(Q):s.bindVertexArrayOES(Q)}function _(Q){return i.isWebGL2?n.deleteVertexArray(Q):s.deleteVertexArrayOES(Q)}function w(Q){const he=[],K=[],oe=[];for(let fe=0;fe<r;fe++)he[fe]=0,K[fe]=0,oe[fe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:he,enabledAttributes:K,attributeDivisors:oe,object:Q,attributes:{},index:null}}function M(){const Q=l.newAttributes;for(let he=0,K=Q.length;he<K;he++)Q[he]=0}function T(Q){I(Q,0)}function I(Q,he){const oe=l.enabledAttributes,fe=l.attributeDivisors;l.newAttributes[Q]=1,0===oe[Q]&&(n.enableVertexAttribArray(Q),oe[Q]=1),fe[Q]!==he&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Q,he),fe[Q]=he)}function F(){const Q=l.newAttributes,he=l.enabledAttributes;for(let K=0,oe=he.length;K<oe;K++)he[K]!==Q[K]&&(n.disableVertexAttribArray(K),he[K]=0)}function P(Q,he,K,oe,fe,de){!0!==i.isWebGL2||5124!==K&&5125!==K?n.vertexAttribPointer(Q,he,K,oe,fe,de):n.vertexAttribIPointer(Q,he,K,fe,de)}function Te(){me(),u=!0,l!==c&&(l=c,g(l.object))}function me(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function f(Q,he,K,oe,fe){let de=!1;if(o){const Re=function y(Q,he,K){const oe=!0===K.wireframe;let fe=a[Q.id];void 0===fe&&(fe={},a[Q.id]=fe);let de=fe[he.id];void 0===de&&(de={},fe[he.id]=de);let Re=de[oe];return void 0===Re&&(Re=w(function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),de[oe]=Re),Re}(oe,K,he);l!==Re&&(l=Re,g(l.object)),de=function C(Q,he,K,oe){const fe=l.attributes,de=he.attributes;let Re=0;const Ze=K.getAttributes();for(const Be in Ze)if(Ze[Be].location>=0){const ut=fe[Be];let It=de[Be];if(void 0===It&&("instanceMatrix"===Be&&Q.instanceMatrix&&(It=Q.instanceMatrix),"instanceColor"===Be&&Q.instanceColor&&(It=Q.instanceColor)),void 0===ut||ut.attribute!==It||It&&ut.data!==It.data)return!0;Re++}return l.attributesNum!==Re||l.index!==oe}(Q,oe,K,fe),de&&function b(Q,he,K,oe){const fe={},de=he.attributes;let Re=0;const Ze=K.getAttributes();for(const Be in Ze)if(Ze[Be].location>=0){let ut=de[Be];void 0===ut&&("instanceMatrix"===Be&&Q.instanceMatrix&&(ut=Q.instanceMatrix),"instanceColor"===Be&&Q.instanceColor&&(ut=Q.instanceColor));const It={};It.attribute=ut,ut&&ut.data&&(It.data=ut.data),fe[Be]=It,Re++}l.attributes=fe,l.attributesNum=Re,l.index=oe}(Q,oe,K,fe)}else{const Re=!0===he.wireframe;(l.geometry!==oe.id||l.program!==K.id||l.wireframe!==Re)&&(l.geometry=oe.id,l.program=K.id,l.wireframe=Re,de=!0)}null!==fe&&t.update(fe,34963),(de||u)&&(u=!1,function R(Q,he,K,oe){if(!1===i.isWebGL2&&(Q.isInstancedMesh||oe.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;M();const fe=oe.attributes,de=K.getAttributes(),Re=he.defaultAttributeValues;for(const Ze in de){const Be=de[Ze];if(Be.location>=0){let wt=fe[Ze];if(void 0===wt&&("instanceMatrix"===Ze&&Q.instanceMatrix&&(wt=Q.instanceMatrix),"instanceColor"===Ze&&Q.instanceColor&&(wt=Q.instanceColor)),void 0!==wt){const ut=wt.normalized,It=wt.itemSize,bt=t.get(wt);if(void 0===bt)continue;const Xt=bt.buffer,sn=bt.type,Sn=bt.bytesPerElement;if(wt.isInterleavedBufferAttribute){const on=wt.data,Ti=on.stride,Ot=wt.offset;if(on.isInstancedInterleavedBuffer){for(let Rt=0;Rt<Be.locationSize;Rt++)I(Be.location+Rt,on.meshPerAttribute);!0!==Q.isInstancedMesh&&void 0===oe._maxInstanceCount&&(oe._maxInstanceCount=on.meshPerAttribute*on.count)}else for(let Rt=0;Rt<Be.locationSize;Rt++)T(Be.location+Rt);n.bindBuffer(34962,Xt);for(let Rt=0;Rt<Be.locationSize;Rt++)P(Be.location+Rt,It/Be.locationSize,sn,ut,Ti*Sn,(Ot+It/Be.locationSize*Rt)*Sn)}else{if(wt.isInstancedBufferAttribute){for(let on=0;on<Be.locationSize;on++)I(Be.location+on,wt.meshPerAttribute);!0!==Q.isInstancedMesh&&void 0===oe._maxInstanceCount&&(oe._maxInstanceCount=wt.meshPerAttribute*wt.count)}else for(let on=0;on<Be.locationSize;on++)T(Be.location+on);n.bindBuffer(34962,Xt);for(let on=0;on<Be.locationSize;on++)P(Be.location+on,It/Be.locationSize,sn,ut,It*Sn,It/Be.locationSize*on*Sn)}}else if(void 0!==Re){const ut=Re[Ze];if(void 0!==ut)switch(ut.length){case 2:n.vertexAttrib2fv(Be.location,ut);break;case 3:n.vertexAttrib3fv(Be.location,ut);break;case 4:n.vertexAttrib4fv(Be.location,ut);break;default:n.vertexAttrib1fv(Be.location,ut)}}}}F()}(Q,he,K,oe),null!==fe&&n.bindBuffer(34963,t.get(fe).buffer))},reset:Te,resetDefaultState:me,dispose:function k(){Te();for(const Q in a){const he=a[Q];for(const K in he){const oe=he[K];for(const fe in oe)_(oe[fe].object),delete oe[fe];delete he[K]}delete a[Q]}},releaseStatesOfGeometry:function W(Q){if(void 0===a[Q.id])return;const he=a[Q.id];for(const K in he){const oe=he[K];for(const fe in oe)_(oe[fe].object),delete oe[fe];delete he[K]}delete a[Q.id]},releaseStatesOfProgram:function ie(Q){for(const he in a){const K=a[he];if(void 0===K[Q.id])continue;const oe=K[Q.id];for(const fe in oe)_(oe[fe].object),delete oe[fe];delete K[Q.id]}},initAttributes:M,enableAttribute:T,disableUnusedAttributes:F}}function $ze(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(l){s=l},this.render=function a(l,u){n.drawArrays(s,l,u),t.update(u,s,1)},this.renderInstances=function c(l,u,f){if(0===f)return;let p,g;if(r)p=n,g="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[g](s,l,u,f),t.update(u,s,f)}}function qze(n,e,t){let i;function s(P){if("highp"===P){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return"mediump"===P&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,f=n.getParameter(34930),p=n.getParameter(35660),g=n.getParameter(3379),_=n.getParameter(34076),y=n.getParameter(34921),w=n.getParameter(36347),C=n.getParameter(36348),b=n.getParameter(36349),M=p>0,T=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:_,maxAttributes:y,maxVertexUniforms:w,maxVaryings:C,maxFragmentUniforms:b,vertexTextures:M,floatFragmentTextures:T,floatVertexTextures:M&&T,maxSamples:o?n.getParameter(36183):0}}function Kze(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Pu,a=new h3,c={value:null,needsUpdate:!1};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,p,g,_){const y=null!==f?f.length:0;let w=null;if(0!==y){if(w=c.value,!0!==_||null===w){const C=g+4*y,b=p.matrixWorldInverse;a.getNormalMatrix(b),(null===w||w.length<C)&&(w=new Float32Array(C));for(let M=0,T=g;M!==y;++M,T+=4)o.copy(f[M]).applyMatrix4(b,a),o.normal.toArray(w,T),w[T+3]=o.constant}c.value=w,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,w}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p,g){const _=0!==f.length||p||0!==i||r;return r=p,t=u(f,g,0),i=f.length,_},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(f,p,g){const _=f.clippingPlanes,y=f.clipIntersection,w=f.clipShadows,C=n.get(f);if(!r||null===_||0===_.length||s&&!w)s?u(null):l();else{const b=s?0:i,M=4*b;let T=C.clippingState||null;c.value=T,T=u(_,p,M,g);for(let I=0;I!==M;++I)T[I]=t[I];C.clippingState=T,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=b}}}function Xze(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new GPe(c.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}z0.physical={uniforms:Zc([z0.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Qt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Dn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Qt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Dn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Dn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:xs.meshphysical_vert,fragmentShader:xs.meshphysical_frag};class o5 extends GF{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Bee=[.125,.215,.35,.446,.526,.582],jF=new o5,Ree=new Dn;let $F=null;const c5=(1+Math.sqrt(5))/2,lg=1/c5,Fee=[new ge(1,1,1),new ge(-1,1,1),new ge(1,1,-1),new ge(-1,1,-1),new ge(0,c5,lg),new ge(0,c5,-lg),new ge(lg,0,c5),new ge(-lg,0,c5),new ge(c5,lg,0),new ge(-c5,lg,0)];class qF{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){$F=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Hee(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Pee(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget($F),e.scissorTest=!1,Vb(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),$F=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Qa,minFilter:Qa,generateMipmaps:!1,type:P0,format:Du,encoding:Gh,depthBuffer:!1},r=kee(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=kee(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Yze(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+Bee.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=Bee[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,f=1+l,p=[u,u,f,u,f,f,u,u,f,f,u,f],g=6,_=6,y=3,w=2,C=1,b=new Float32Array(y*_*g),M=new Float32Array(w*_*g),T=new Float32Array(C*_*g);for(let F=0;F<g;F++){const P=F%3*2/3-1,R=F>2?0:-1;b.set([P,R,0,P+2/3,R,0,P+2/3,R+1,0,P,R,0,P+2/3,R+1,0,P,R+1,0],y*_*F),M.set(p,w*_*F),T.set([F,F,F,F,F,F],C*_*F)}const I=new vr;I.setAttribute("position",new Wa(b,y)),I.setAttribute("uv",new Wa(M,w)),I.setAttribute("faceIndex",new Wa(T,C)),e.push(I),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function Zze(n,e,t){const i=new Float32Array(20),r=new ge(0,1,0);return new Sc({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Ys(this._lodPlanes[0],e);this._renderer.compile(t,jF)}_sceneToCubeUV(e,t,i,r){const a=new z2(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(Ree),u.toneMapping=0,u.autoClear=!1;const g=new Il({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),_=new Ys(new H0,g);let y=!1;const w=e.background;w?w.isColor&&(g.color.copy(w),e.background=null,y=!0):(g.color.copy(Ree),y=!0);for(let C=0;C<6;C++){const b=C%3;0===b?(a.up.set(0,c[C],0),a.lookAt(l[C],0,0)):1===b?(a.up.set(0,0,c[C]),a.lookAt(0,l[C],0)):(a.up.set(0,c[C],0),a.lookAt(0,0,l[C]));const M=this._cubeSize;Vb(r,b*M,C>2?M:0,M,M),u.setRenderTarget(r),y&&u.render(_,a),u.render(e,a)}_.geometry.dispose(),_.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Hee()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Pee());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ys(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;Vb(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,jF)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,Fee[(r-1)%Fee.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new Ys(this._lodPlanes[r],l),p=l.uniforms,g=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*g):2*Math.PI/39,y=s/_,w=isFinite(s)?1+Math.floor(3*y):20;w>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to 20`);const C=[];let b=0;for(let P=0;P<20;++P){const R=P/y,k=Math.exp(-R*R/2);C.push(k),0===P?b+=k:P<w&&(b+=2*k)}for(let P=0;P<C.length;P++)C[P]=C[P]/b;p.envMap.value=e.texture,p.samples.value=w,p.weights.value=C,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=_,p.mipInt.value=M-i;const T=this._sizeLods[r];Vb(t,3*T*(r>M-4?r-M+4:0),4*(this._cubeSize-T),3*T,2*T),c.setRenderTarget(t),c.render(f,jF)}}function kee(n,e,t){const i=new I4(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Vb(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Pee(){return new Sc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Hee(){return new Sc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Jze(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=301===c||302===c;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let f=e.get(a);return null===t&&(t=new qF(n)),f=l?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}if(e.has(a))return e.get(a).texture;{const f=a.image;if(l&&f&&f.height>0||u&&f&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(f)){null===t&&(t=new qF(n));const p=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function eOe(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function tOe(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;null!==p.index&&e.remove(p.index);for(const _ in p.attributes)e.remove(p.attributes[_]);p.removeEventListener("dispose",o),delete r[p.id];const g=s.get(p);g&&(e.remove(g),s.delete(p)),i.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function l(f){const p=[],g=f.index,_=f.attributes.position;let y=0;if(null!==g){const b=g.array;y=g.version;for(let M=0,T=b.length;M<T;M+=3){const I=b[M+0],F=b[M+1],P=b[M+2];p.push(I,F,F,P,P,I)}}else{y=_.version;for(let M=0,T=_.array.length/3-1;M<T;M+=3){const I=M+0,F=M+1,P=M+2;p.push(I,F,F,P,P,I)}}const w=new(pee(p)?Lee:Tee)(p,1);w.version=y;const C=s.get(f);C&&e.remove(C),s.set(f,w)}return{get:function a(f,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p},update:function c(f){const p=f.attributes;for(const _ in p)e.update(p[_],34962);const g=f.morphAttributes;for(const _ in g){const y=g[_];for(let w=0,C=y.length;w<C;w++)e.update(y[w],34962)}},getWireframeAttribute:function u(f){const p=s.get(f);if(p){const g=f.index;null!==g&&p.version<g.version&&l(f)}else l(f);return s.get(f)}}}function nOe(n,e,t,i){const r=i.isWebGL2;let s,a,c;this.setMode=function o(p){s=p},this.setIndex=function l(p){a=p.type,c=p.bytesPerElement},this.render=function u(p,g){n.drawElements(s,g,a,p*c),t.update(g,s,1)},this.renderInstances=function f(p,g,_){if(0===_)return;let y,w;if(r)y=n,w="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",null===y)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");y[w](s,g,a,p*c,_),t.update(g,s,_)}}function iOe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function rOe(n,e){return n[0]-e[0]}function sOe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function oOe(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new yo,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,f,p){const g=l.morphTargetInfluences;if(!0===e.isWebGL2){const _=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=void 0!==_?_.length:0;let w=s.get(u);if(void 0===w||w.count!==y){let he=function(){me.dispose(),s.delete(u),u.removeEventListener("dispose",he)};void 0!==w&&w.texture.dispose();const M=void 0!==u.morphAttributes.position,T=void 0!==u.morphAttributes.normal,I=void 0!==u.morphAttributes.color,F=u.morphAttributes.position||[],P=u.morphAttributes.normal||[],R=u.morphAttributes.color||[];let k=0;!0===M&&(k=1),!0===T&&(k=2),!0===I&&(k=3);let W=u.attributes.position.count*k,ie=1;W>e.maxTextureSize&&(ie=Math.ceil(W/e.maxTextureSize),W=e.maxTextureSize);const Te=new Float32Array(W*ie*4*y),me=new bF(Te,W,ie,y);me.type=L4,me.needsUpdate=!0;const Q=4*k;for(let K=0;K<y;K++){const oe=F[K],fe=P[K],de=R[K],Re=W*ie*4*K;for(let Ze=0;Ze<oe.count;Ze++){const Be=Ze*Q;!0===M&&(o.fromBufferAttribute(oe,Ze),Te[Re+Be+0]=o.x,Te[Re+Be+1]=o.y,Te[Re+Be+2]=o.z,Te[Re+Be+3]=0),!0===T&&(o.fromBufferAttribute(fe,Ze),Te[Re+Be+4]=o.x,Te[Re+Be+5]=o.y,Te[Re+Be+6]=o.z,Te[Re+Be+7]=0),!0===I&&(o.fromBufferAttribute(de,Ze),Te[Re+Be+8]=o.x,Te[Re+Be+9]=o.y,Te[Re+Be+10]=o.z,Te[Re+Be+11]=4===de.itemSize?o.w:1)}}w={count:y,texture:me,size:new Qt(W,ie)},s.set(u,w),u.addEventListener("dispose",he)}let C=0;for(let M=0;M<g.length;M++)C+=g[M];const b=u.morphTargetsRelative?1:1-C;p.getUniforms().setValue(n,"morphTargetBaseInfluence",b),p.getUniforms().setValue(n,"morphTargetInfluences",g),p.getUniforms().setValue(n,"morphTargetsTexture",w.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",w.size)}else{const _=void 0===g?0:g.length;let y=i[u.id];if(void 0===y||y.length!==_){y=[];for(let T=0;T<_;T++)y[T]=[T,0];i[u.id]=y}for(let T=0;T<_;T++){const I=y[T];I[0]=T,I[1]=g[T]}y.sort(sOe);for(let T=0;T<8;T++)T<_&&y[T][1]?(a[T][0]=y[T][0],a[T][1]=y[T][1]):(a[T][0]=Number.MAX_SAFE_INTEGER,a[T][1]=0);a.sort(rOe);const w=u.morphAttributes.position,C=u.morphAttributes.normal;let b=0;for(let T=0;T<8;T++){const I=a[T],F=I[0],P=I[1];F!==Number.MAX_SAFE_INTEGER&&P?(w&&u.getAttribute("morphTarget"+T)!==w[F]&&u.setAttribute("morphTarget"+T,w[F]),C&&u.getAttribute("morphNormal"+T)!==C[F]&&u.setAttribute("morphNormal"+T,C[F]),r[T]=P,b+=P):(w&&!0===u.hasAttribute("morphTarget"+T)&&u.deleteAttribute("morphTarget"+T),C&&!0===u.hasAttribute("morphNormal"+T)&&u.deleteAttribute("morphNormal"+T),r[T]=0)}const M=u.morphTargetsRelative?1:1-b;p.getUniforms().setValue(n,"morphTargetBaseInfluence",M),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function aOe(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,f=e.get(c,c.geometry);return r.get(f)!==l&&(e.update(f),r.set(f,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),null!==c.instanceColor&&t.update(c.instanceColor,34962)),f},dispose:function o(){r=new WeakMap}}}const zee=new D4,Oee=new bF,Nee=new Aee,Vee=new Ob,Uee=[],Gee=[],Qee=new Float32Array(16),Wee=new Float32Array(9),jee=new Float32Array(4);function ug(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=Uee[r];if(void 0===s&&(s=new Float32Array(r),Uee[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Bl(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Rl(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Ub(n,e){let t=Gee[e];void 0===t&&(t=new Int32Array(e),Gee[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function cOe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function lOe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bl(t,e))return;n.uniform2fv(this.addr,e),Rl(t,e)}}function uOe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Bl(t,e))return;n.uniform3fv(this.addr,e),Rl(t,e)}}function hOe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bl(t,e))return;n.uniform4fv(this.addr,e),Rl(t,e)}}function fOe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Bl(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Rl(t,e)}else{if(Bl(t,i))return;jee.set(i),n.uniformMatrix2fv(this.addr,!1,jee),Rl(t,i)}}function dOe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Bl(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Rl(t,e)}else{if(Bl(t,i))return;Wee.set(i),n.uniformMatrix3fv(this.addr,!1,Wee),Rl(t,i)}}function pOe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Bl(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Rl(t,e)}else{if(Bl(t,i))return;Qee.set(i),n.uniformMatrix4fv(this.addr,!1,Qee),Rl(t,i)}}function gOe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function mOe(n,e){const t=this.cache;Bl(t,e)||(n.uniform2iv(this.addr,e),Rl(t,e))}function AOe(n,e){const t=this.cache;Bl(t,e)||(n.uniform3iv(this.addr,e),Rl(t,e))}function vOe(n,e){const t=this.cache;Bl(t,e)||(n.uniform4iv(this.addr,e),Rl(t,e))}function _Oe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function yOe(n,e){const t=this.cache;Bl(t,e)||(n.uniform2uiv(this.addr,e),Rl(t,e))}function wOe(n,e){const t=this.cache;Bl(t,e)||(n.uniform3uiv(this.addr,e),Rl(t,e))}function COe(n,e){const t=this.cache;Bl(t,e)||(n.uniform4uiv(this.addr,e),Rl(t,e))}function xOe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||zee,r)}function bOe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Nee,r)}function MOe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Vee,r)}function SOe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Oee,r)}function TOe(n,e){n.uniform1fv(this.addr,e)}function LOe(n,e){const t=ug(e,this.size,2);n.uniform2fv(this.addr,t)}function DOe(n,e){const t=ug(e,this.size,3);n.uniform3fv(this.addr,t)}function IOe(n,e){const t=ug(e,this.size,4);n.uniform4fv(this.addr,t)}function BOe(n,e){const t=ug(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ROe(n,e){const t=ug(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function FOe(n,e){const t=ug(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function kOe(n,e){n.uniform1iv(this.addr,e)}function POe(n,e){n.uniform2iv(this.addr,e)}function HOe(n,e){n.uniform3iv(this.addr,e)}function zOe(n,e){n.uniform4iv(this.addr,e)}function OOe(n,e){n.uniform1uiv(this.addr,e)}function NOe(n,e){n.uniform2uiv(this.addr,e)}function VOe(n,e){n.uniform3uiv(this.addr,e)}function UOe(n,e){n.uniform4uiv(this.addr,e)}function GOe(n,e,t){const i=e.length,r=Ub(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||zee,r[s])}function QOe(n,e,t){const i=e.length,r=Ub(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||Nee,r[s])}function WOe(n,e,t){const i=e.length,r=Ub(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||Vee,r[s])}function jOe(n,e,t){const i=e.length,r=Ub(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||Oee,r[s])}class qOe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function EOe(n){switch(n){case 5126:return cOe;case 35664:return lOe;case 35665:return uOe;case 35666:return hOe;case 35674:return fOe;case 35675:return dOe;case 35676:return pOe;case 5124:case 35670:return gOe;case 35667:case 35671:return mOe;case 35668:case 35672:return AOe;case 35669:case 35673:return vOe;case 5125:return _Oe;case 36294:return yOe;case 36295:return wOe;case 36296:return COe;case 35678:case 36198:case 36298:case 36306:case 35682:return xOe;case 35679:case 36299:case 36307:return bOe;case 35680:case 36300:case 36308:case 36293:return MOe;case 36289:case 36303:case 36311:case 36292:return SOe}}(t.type)}}class KOe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function $Oe(n){switch(n){case 5126:return TOe;case 35664:return LOe;case 35665:return DOe;case 35666:return IOe;case 35674:return BOe;case 35675:return ROe;case 35676:return FOe;case 5124:case 35670:return kOe;case 35667:case 35671:return POe;case 35668:case 35672:return HOe;case 35669:case 35673:return zOe;case 5125:return OOe;case 36294:return NOe;case 36295:return VOe;case 36296:return UOe;case 35678:case 36198:case 36298:case 36306:case 35682:return GOe;case 35679:case 36299:case 36307:return QOe;case 35680:case 36300:case 36308:case 36293:return WOe;case 36289:case 36303:case 36311:case 36292:return jOe}}(t.type)}}class XOe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const XF=/(\w+)(\])?(\[|\.)?/g;function $ee(n,e){n.seq.push(e),n.map[e.id]=e}function YOe(n,e,t){const i=n.name,r=i.length;for(XF.lastIndex=0;;){const s=XF.exec(i),o=XF.lastIndex;let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&o+2===r){$ee(t,void 0===l?new qOe(a,n,e):new KOe(a,n,e));break}{let f=t.map[a];void 0===f&&(f=new XOe(a),$ee(t,f)),t=f}}}class Gb{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);YOe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function qee(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let ZOe=0;function Kee(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function JOe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function tNe(n,e){const t=function eNe(n){switch(n){case Gh:return["Linear","( value )"];case Lo:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function nNe(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function av(n){return""!==n}function Xee(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Yee(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const oNe=/^[ \t]*#include +<([\w\d./]+)>/gm;function YF(n){return n.replace(oNe,aNe)}function aNe(n,e){const t=xs[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return YF(t)}const cNe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Zee(n){return n.replace(cNe,lNe)}function lNe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Jee(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function gNe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function uNe(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function hNe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function fNe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function dNe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function pNe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),g=t.isWebGL2?"":function iNe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(av).join("\n")}(t),_=function rNe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),y=r.createProgram();let w,C,b=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(w=[_].filter(av).join("\n"),w.length>0&&(w+="\n"),C=[g,_].filter(av).join("\n"),C.length>0&&(C+="\n")):(w=[Jee(t),"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(av).join("\n"),C=[g,Jee(t),"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?xs.tonemapping_pars_fragment:"",0!==t.toneMapping?nNe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",xs.encodings_pars_fragment,tNe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(av).join("\n")),o=YF(o),o=Xee(o,t),o=Yee(o,t),a=YF(a),a=Xee(a,t),a=Yee(a,t),o=Zee(o),a=Zee(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(b="#version 300 es\n",w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,C=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+C);const T=b+C+a,I=qee(r,35633,b+w+o),F=qee(r,35632,T);if(r.attachShader(y,I),r.attachShader(y,F),void 0!==t.index0AttributeName?r.bindAttribLocation(y,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const k=r.getProgramInfoLog(y).trim(),W=r.getShaderInfoLog(I).trim(),ie=r.getShaderInfoLog(F).trim();let Te=!0,me=!0;if(!1===r.getProgramParameter(y,35714)){Te=!1;const Q=Kee(r,I,"vertex"),he=Kee(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+k+"\n"+Q+"\n"+he)}else""!==k?console.warn("THREE.WebGLProgram: Program Info Log:",k):(""===W||""===ie)&&(me=!1);me&&(this.diagnostics={runnable:Te,programLog:k,vertexShader:{log:W,prefix:w},fragmentShader:{log:ie,prefix:C}})}let P,R;return r.deleteShader(I),r.deleteShader(F),this.getUniforms=function(){return void 0===P&&(P=new Gb(r,y)),P},this.getAttributes=function(){return void 0===R&&(R=function sNe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,y)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=ZOe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=I,this.fragmentShader=F,this}let mNe=0;class ANe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new vNe(e),t.set(e,i)),i}}class vNe{constructor(e){this.id=mNe++,this.code=e,this.usedTimes=0}}function _Ne(n,e,t,i,r,s,o){const a=new BF,c=new ANe,l=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,p=r.vertexTextures;let g=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function y(R,k,W,ie,Te){const me=ie.fog,Q=Te.geometry,K=(R.isMeshStandardMaterial?t:e).get(R.envMap||(R.isMeshStandardMaterial?ie.environment:null)),oe=K&&306===K.mapping?K.image.height:null,fe=_[R.type];null!==R.precision&&(g=r.getMaxPrecision(R.precision),g!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",g,"instead."));const de=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,Re=void 0!==de?de.length:0;let Be,wt,ut,It,Ze=0;if(void 0!==Q.morphAttributes.position&&(Ze=1),void 0!==Q.morphAttributes.normal&&(Ze=2),void 0!==Q.morphAttributes.color&&(Ze=3),fe){const Ti=z0[fe];Be=Ti.vertexShader,wt=Ti.fragmentShader}else Be=R.vertexShader,wt=R.fragmentShader,c.update(R),ut=c.getVertexShaderID(R),It=c.getFragmentShaderID(R);const bt=n.getRenderTarget(),sn=R.clearcoat>0,Sn=R.iridescence>0;return{isWebGL2:u,shaderID:fe,shaderName:R.type,vertexShader:Be,fragmentShader:wt,defines:R.defines,customVertexShaderID:ut,customFragmentShaderID:It,isRawShaderMaterial:!0===R.isRawShaderMaterial,glslVersion:R.glslVersion,precision:g,instancing:!0===Te.isInstancedMesh,instancingColor:!0===Te.isInstancedMesh&&null!==Te.instanceColor,supportsVertexTextures:p,outputEncoding:null===bt?n.outputEncoding:!0===bt.isXRRenderTarget?bt.texture.encoding:Gh,map:!!R.map,matcap:!!R.matcap,envMap:!!K,envMapMode:K&&K.mapping,envMapCubeUVHeight:oe,lightMap:!!R.lightMap,aoMap:!!R.aoMap,emissiveMap:!!R.emissiveMap,bumpMap:!!R.bumpMap,normalMap:!!R.normalMap,objectSpaceNormalMap:1===R.normalMapType,tangentSpaceNormalMap:0===R.normalMapType,decodeVideoTexture:!!R.map&&!0===R.map.isVideoTexture&&R.map.encoding===Lo,clearcoat:sn,clearcoatMap:sn&&!!R.clearcoatMap,clearcoatRoughnessMap:sn&&!!R.clearcoatRoughnessMap,clearcoatNormalMap:sn&&!!R.clearcoatNormalMap,iridescence:Sn,iridescenceMap:Sn&&!!R.iridescenceMap,iridescenceThicknessMap:Sn&&!!R.iridescenceThicknessMap,displacementMap:!!R.displacementMap,roughnessMap:!!R.roughnessMap,metalnessMap:!!R.metalnessMap,specularMap:!!R.specularMap,specularIntensityMap:!!R.specularIntensityMap,specularColorMap:!!R.specularColorMap,opaque:!1===R.transparent&&1===R.blending,alphaMap:!!R.alphaMap,alphaTest:R.alphaTest>0,gradientMap:!!R.gradientMap,sheen:R.sheen>0,sheenColorMap:!!R.sheenColorMap,sheenRoughnessMap:!!R.sheenRoughnessMap,transmission:R.transmission>0,transmissionMap:!!R.transmissionMap,thicknessMap:!!R.thicknessMap,combine:R.combine,vertexTangents:!!R.normalMap&&!!Q.attributes.tangent,vertexColors:R.vertexColors,vertexAlphas:!0===R.vertexColors&&!!Q.attributes.color&&4===Q.attributes.color.itemSize,vertexUvs:!!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatMap||R.clearcoatRoughnessMap||R.clearcoatNormalMap||R.iridescenceMap||R.iridescenceThicknessMap||R.displacementMap||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheenColorMap||R.sheenRoughnessMap),uvsVertexOnly:!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatNormalMap||R.iridescenceMap||R.iridescenceThicknessMap||R.transmission>0||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheen>0||R.sheenColorMap||R.sheenRoughnessMap||!R.displacementMap),fog:!!me,useFog:!0===R.fog,fogExp2:me&&me.isFogExp2,flatShading:!!R.flatShading,sizeAttenuation:R.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===Te.isSkinnedMesh,morphTargets:void 0!==Q.morphAttributes.position,morphNormals:void 0!==Q.morphAttributes.normal,morphColors:void 0!==Q.morphAttributes.color,morphTargetsCount:Re,morphTextureStride:Ze,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:R.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:2===R.side,flipSided:1===R.side,useDepthPacking:!!R.depthPacking,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:R.extensions&&R.extensions.derivatives,extensionFragDepth:R.extensions&&R.extensions.fragDepth,extensionDrawBuffers:R.extensions&&R.extensions.drawBuffers,extensionShaderTextureLOD:R.extensions&&R.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}},getProgramCacheKey:function w(R){const k=[];if(R.shaderID?k.push(R.shaderID):(k.push(R.customVertexShaderID),k.push(R.customFragmentShaderID)),void 0!==R.defines)for(const W in R.defines)k.push(W),k.push(R.defines[W]);return!1===R.isRawShaderMaterial&&(function C(R,k){R.push(k.precision),R.push(k.outputEncoding),R.push(k.envMapMode),R.push(k.envMapCubeUVHeight),R.push(k.combine),R.push(k.vertexUvs),R.push(k.fogExp2),R.push(k.sizeAttenuation),R.push(k.morphTargetsCount),R.push(k.morphAttributeCount),R.push(k.numDirLights),R.push(k.numPointLights),R.push(k.numSpotLights),R.push(k.numSpotLightMaps),R.push(k.numHemiLights),R.push(k.numRectAreaLights),R.push(k.numDirLightShadows),R.push(k.numPointLightShadows),R.push(k.numSpotLightShadows),R.push(k.numSpotLightShadowsWithMaps),R.push(k.shadowMapType),R.push(k.toneMapping),R.push(k.numClippingPlanes),R.push(k.numClipIntersection),R.push(k.depthPacking)}(k,R),function b(R,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.map&&a.enable(4),k.matcap&&a.enable(5),k.envMap&&a.enable(6),k.lightMap&&a.enable(7),k.aoMap&&a.enable(8),k.emissiveMap&&a.enable(9),k.bumpMap&&a.enable(10),k.normalMap&&a.enable(11),k.objectSpaceNormalMap&&a.enable(12),k.tangentSpaceNormalMap&&a.enable(13),k.clearcoat&&a.enable(14),k.clearcoatMap&&a.enable(15),k.clearcoatRoughnessMap&&a.enable(16),k.clearcoatNormalMap&&a.enable(17),k.iridescence&&a.enable(18),k.iridescenceMap&&a.enable(19),k.iridescenceThicknessMap&&a.enable(20),k.displacementMap&&a.enable(21),k.specularMap&&a.enable(22),k.roughnessMap&&a.enable(23),k.metalnessMap&&a.enable(24),k.gradientMap&&a.enable(25),k.alphaMap&&a.enable(26),k.alphaTest&&a.enable(27),k.vertexColors&&a.enable(28),k.vertexAlphas&&a.enable(29),k.vertexUvs&&a.enable(30),k.vertexTangents&&a.enable(31),k.uvsVertexOnly&&a.enable(32),R.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.physicallyCorrectLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.specularIntensityMap&&a.enable(15),k.specularColorMap&&a.enable(16),k.transmission&&a.enable(17),k.transmissionMap&&a.enable(18),k.thicknessMap&&a.enable(19),k.sheen&&a.enable(20),k.sheenColorMap&&a.enable(21),k.sheenRoughnessMap&&a.enable(22),k.decodeVideoTexture&&a.enable(23),k.opaque&&a.enable(24),R.push(a.mask)}(k,R),k.push(n.outputEncoding)),k.push(R.customProgramCacheKey),k.join()},getUniforms:function M(R){const k=_[R.type];let W;return W=k?Od.clone(z0[k].uniforms):R.uniforms,W},acquireProgram:function T(R,k){let W;for(let ie=0,Te=l.length;ie<Te;ie++){const me=l[ie];if(me.cacheKey===k){W=me,++W.usedTimes;break}}return void 0===W&&(W=new gNe(n,k,R,s),l.push(W)),W},releaseProgram:function I(R){if(0==--R.usedTimes){const k=l.indexOf(R);l[k]=l[l.length-1],l.pop(),R.destroy()}},releaseShaderCache:function F(R){c.remove(R)},programs:l,dispose:function P(){c.dispose()}}}function yNe(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function wNe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function ete(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function tte(){const n=[];let e=0;const t=[],i=[],r=[];function o(f,p,g,_,y,w){let C=n[e];return void 0===C?(C={id:f.id,object:f,geometry:p,material:g,groupOrder:_,renderOrder:f.renderOrder,z:y,group:w},n[e]=C):(C.id=f.id,C.object=f,C.geometry=p,C.material=g,C.groupOrder=_,C.renderOrder=f.renderOrder,C.z=y,C.group=w),e++,C}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(f,p,g,_,y,w){const C=o(f,p,g,_,y,w);g.transmission>0?i.push(C):!0===g.transparent?r.push(C):t.push(C)},unshift:function c(f,p,g,_,y,w){const C=o(f,p,g,_,y,w);g.transmission>0?i.unshift(C):!0===g.transparent?r.unshift(C):t.unshift(C)},finish:function u(){for(let f=e,p=n.length;f<p;f++){const g=n[f];if(null===g.id)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}},sort:function l(f,p){t.length>1&&t.sort(f||wNe),i.length>1&&i.sort(p||ete),r.length>1&&r.sort(p||ete)}}}function CNe(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new tte,n.set(i,[o])):r>=s.length?(o=new tte,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function xNe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ge,color:new Dn};break;case"SpotLight":t={position:new ge,direction:new ge,color:new Dn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ge,color:new Dn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ge,skyColor:new Dn,groundColor:new Dn};break;case"RectAreaLight":t={color:new Dn,position:new ge,halfWidth:new ge,halfHeight:new ge}}return n[e.id]=t,t}}}let MNe=0;function SNe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function ENe(n,e){const t=new xNe,i=function bNe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qt,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new ge);const s=new ge,o=new Vi,a=new Vi;return{setup:function c(u,f){let p=0,g=0,_=0;for(let ie=0;ie<9;ie++)r.probe[ie].set(0,0,0);let y=0,w=0,C=0,b=0,M=0,T=0,I=0,F=0,P=0,R=0;u.sort(SNe);const k=!0!==f?Math.PI:1;for(let ie=0,Te=u.length;ie<Te;ie++){const me=u[ie],Q=me.color,he=me.intensity,K=me.distance,oe=me.shadow&&me.shadow.map?me.shadow.map.texture:null;if(me.isAmbientLight)p+=Q.r*he*k,g+=Q.g*he*k,_+=Q.b*he*k;else if(me.isLightProbe)for(let fe=0;fe<9;fe++)r.probe[fe].addScaledVector(me.sh.coefficients[fe],he);else if(me.isDirectionalLight){const fe=t.get(me);if(fe.color.copy(me.color).multiplyScalar(me.intensity*k),me.castShadow){const de=me.shadow,Re=i.get(me);Re.shadowBias=de.bias,Re.shadowNormalBias=de.normalBias,Re.shadowRadius=de.radius,Re.shadowMapSize=de.mapSize,r.directionalShadow[y]=Re,r.directionalShadowMap[y]=oe,r.directionalShadowMatrix[y]=me.shadow.matrix,T++}r.directional[y]=fe,y++}else if(me.isSpotLight){const fe=t.get(me);fe.position.setFromMatrixPosition(me.matrixWorld),fe.color.copy(Q).multiplyScalar(he*k),fe.distance=K,fe.coneCos=Math.cos(me.angle),fe.penumbraCos=Math.cos(me.angle*(1-me.penumbra)),fe.decay=me.decay,r.spot[C]=fe;const de=me.shadow;if(me.map&&(r.spotLightMap[P]=me.map,P++,de.updateMatrices(me),me.castShadow&&R++),r.spotLightMatrix[C]=de.matrix,me.castShadow){const Re=i.get(me);Re.shadowBias=de.bias,Re.shadowNormalBias=de.normalBias,Re.shadowRadius=de.radius,Re.shadowMapSize=de.mapSize,r.spotShadow[C]=Re,r.spotShadowMap[C]=oe,F++}C++}else if(me.isRectAreaLight){const fe=t.get(me);fe.color.copy(Q).multiplyScalar(he),fe.halfWidth.set(.5*me.width,0,0),fe.halfHeight.set(0,.5*me.height,0),r.rectArea[b]=fe,b++}else if(me.isPointLight){const fe=t.get(me);if(fe.color.copy(me.color).multiplyScalar(me.intensity*k),fe.distance=me.distance,fe.decay=me.decay,me.castShadow){const de=me.shadow,Re=i.get(me);Re.shadowBias=de.bias,Re.shadowNormalBias=de.normalBias,Re.shadowRadius=de.radius,Re.shadowMapSize=de.mapSize,Re.shadowCameraNear=de.camera.near,Re.shadowCameraFar=de.camera.far,r.pointShadow[w]=Re,r.pointShadowMap[w]=oe,r.pointShadowMatrix[w]=me.shadow.matrix,I++}r.point[w]=fe,w++}else if(me.isHemisphereLight){const fe=t.get(me);fe.skyColor.copy(me.color).multiplyScalar(he*k),fe.groundColor.copy(me.groundColor).multiplyScalar(he*k),r.hemi[M]=fe,M++}}b>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Vn.LTC_FLOAT_1,r.rectAreaLTC2=Vn.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Vn.LTC_HALF_1,r.rectAreaLTC2=Vn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=g,r.ambient[2]=_;const W=r.hash;(W.directionalLength!==y||W.pointLength!==w||W.spotLength!==C||W.rectAreaLength!==b||W.hemiLength!==M||W.numDirectionalShadows!==T||W.numPointShadows!==I||W.numSpotShadows!==F||W.numSpotMaps!==P)&&(r.directional.length=y,r.spot.length=C,r.rectArea.length=b,r.point.length=w,r.hemi.length=M,r.directionalShadow.length=T,r.directionalShadowMap.length=T,r.pointShadow.length=I,r.pointShadowMap.length=I,r.spotShadow.length=F,r.spotShadowMap.length=F,r.directionalShadowMatrix.length=T,r.pointShadowMatrix.length=I,r.spotLightMatrix.length=F+P-R,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=R,W.directionalLength=y,W.pointLength=w,W.spotLength=C,W.rectAreaLength=b,W.hemiLength=M,W.numDirectionalShadows=T,W.numPointShadows=I,W.numSpotShadows=F,W.numSpotMaps=P,r.version=MNe++)},setupView:function l(u,f){let p=0,g=0,_=0,y=0,w=0;const C=f.matrixWorldInverse;for(let b=0,M=u.length;b<M;b++){const T=u[b];if(T.isDirectionalLight){const I=r.directional[p];I.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(C),p++}else if(T.isSpotLight){const I=r.spot[_];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(C),I.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(C),_++}else if(T.isRectAreaLight){const I=r.rectArea[y];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(C),a.identity(),o.copy(T.matrixWorld),o.premultiply(C),a.extractRotation(o),I.halfWidth.set(.5*T.width,0,0),I.halfHeight.set(0,.5*T.height,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),y++}else if(T.isPointLight){const I=r.point[g];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(C),g++}else if(T.isHemisphereLight){const I=r.hemi[w];I.direction.setFromMatrixPosition(T.matrixWorld),I.direction.transformDirection(C),w++}}},state:r}}function nte(n,e){const t=new ENe(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(f){t.setup(i,f)},setupLightsView:function l(f){t.setupView(i,f)},pushLight:function o(f){i.push(f)},pushShadow:function a(f){r.push(f)}}}function TNe(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let c;return void 0===a?(c=new nte(n,e),t.set(s,[c])):o>=a.length?(c=new nte(n,e),a.push(c)):c=a[o],c},dispose:function r(){t=new WeakMap}}}class ite extends Yc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class rte extends Yc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ge,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function INe(n,e,t){let i=new WF;const r=new Qt,s=new Qt,o=new yo,a=new ite({depthPacking:3201}),c=new rte,l={},u=t.maxTextureSize,f={0:1,1:0,2:2},p=new Sc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const _=new vr;_.setAttribute("position",new Wa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Ys(_,p),w=this;function C(T,I){const F=e.update(y);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,g.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),null===T.mapPass&&(T.mapPass=new I4(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(I,null,F,p,y,null),g.uniforms.shadow_pass.value=T.mapPass.texture,g.uniforms.resolution.value=T.mapSize,g.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(I,null,F,g,y,null)}function b(T,I,F,P,R,k){let W=null;const ie=!0===F.isPointLight?T.customDistanceMaterial:T.customDepthMaterial;if(W=void 0!==ie?ie:!0===F.isPointLight?c:a,n.localClippingEnabled&&!0===I.clipShadows&&Array.isArray(I.clippingPlanes)&&0!==I.clippingPlanes.length||I.displacementMap&&0!==I.displacementScale||I.alphaMap&&I.alphaTest>0){const Te=W.uuid,me=I.uuid;let Q=l[Te];void 0===Q&&(Q={},l[Te]=Q);let he=Q[me];void 0===he&&(he=W.clone(),Q[me]=he),W=he}return W.visible=I.visible,W.wireframe=I.wireframe,W.side=3===k?null!==I.shadowSide?I.shadowSide:I.side:null!==I.shadowSide?I.shadowSide:f[I.side],W.alphaMap=I.alphaMap,W.alphaTest=I.alphaTest,W.clipShadows=I.clipShadows,W.clippingPlanes=I.clippingPlanes,W.clipIntersection=I.clipIntersection,W.displacementMap=I.displacementMap,W.displacementScale=I.displacementScale,W.displacementBias=I.displacementBias,W.wireframeLinewidth=I.wireframeLinewidth,W.linewidth=I.linewidth,!0===F.isPointLight&&!0===W.isMeshDistanceMaterial&&(W.referencePosition.setFromMatrixPosition(F.matrixWorld),W.nearDistance=P,W.farDistance=R),W}function M(T,I,F,P,R){if(!1===T.visible)return;if(T.layers.test(I.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&3===R)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,T.matrixWorld);const ie=e.update(T),Te=T.material;if(Array.isArray(Te)){const me=ie.groups;for(let Q=0,he=me.length;Q<he;Q++){const K=me[Q],oe=Te[K.materialIndex];if(oe&&oe.visible){const fe=b(T,oe,P,F.near,F.far,R);n.renderBufferDirect(F,null,ie,fe,T,K)}}}else if(Te.visible){const me=b(T,Te,P,F.near,F.far,R);n.renderBufferDirect(F,null,ie,me,T,null)}}const W=T.children;for(let ie=0,Te=W.length;ie<Te;ie++)M(W[ie],I,F,P,R)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(T,I,F){if(!1===w.enabled||!1===w.autoUpdate&&!1===w.needsUpdate||0===T.length)return;const P=n.getRenderTarget(),R=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),W=n.state;W.setBlending(0),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);for(let ie=0,Te=T.length;ie<Te;ie++){const me=T[ie],Q=me.shadow;if(void 0===Q){console.warn("THREE.WebGLShadowMap:",me,"has no shadow.");continue}if(!1===Q.autoUpdate&&!1===Q.needsUpdate)continue;r.copy(Q.mapSize);const he=Q.getFrameExtents();r.multiply(he),s.copy(Q.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/he.x),r.x=s.x*he.x,Q.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/he.y),r.y=s.y*he.y,Q.mapSize.y=s.y)),null===Q.map&&(Q.map=new I4(r.x,r.y,3!==this.type?{minFilter:B1,magFilter:B1}:{}),Q.map.texture.name=me.name+".shadowMap",Q.camera.updateProjectionMatrix()),n.setRenderTarget(Q.map),n.clear();const K=Q.getViewportCount();for(let oe=0;oe<K;oe++){const fe=Q.getViewport(oe);o.set(s.x*fe.x,s.y*fe.y,s.x*fe.z,s.y*fe.w),W.viewport(o),Q.updateMatrices(me,oe),i=Q.getFrustum(),M(I,F,Q.camera,me,this.type)}!0!==Q.isPointLightShadow&&3===this.type&&C(Q,F),Q.needsUpdate=!1}w.needsUpdate=!1,n.setRenderTarget(P,R,k)}}function BNe(n,e,t){const i=t.isWebGL2,a=new function r(){let at=!1;const Bn=new yo;let Ht=null;const zn=new yo(0,0,0,0);return{setMask:function(Pn){Ht!==Pn&&!at&&(n.colorMask(Pn,Pn,Pn,Pn),Ht=Pn)},setLocked:function(Pn){at=Pn},setClear:function(Pn,gs,c2,Ya,V1){!0===V1&&(Pn*=Ya,gs*=Ya,c2*=Ya),Bn.set(Pn,gs,c2,Ya),!1===zn.equals(Bn)&&(n.clearColor(Pn,gs,c2,Ya),zn.copy(Bn))},reset:function(){at=!1,Ht=null,zn.set(-1,0,0,0)}}},c=new function s(){let at=!1,Bn=null,Ht=null,zn=null;return{setTest:function(Pn){Pn?Xt(2929):sn(2929)},setMask:function(Pn){Bn!==Pn&&!at&&(n.depthMask(Pn),Bn=Pn)},setFunc:function(Pn){if(Ht!==Pn){if(Pn)switch(Pn){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);Ht=Pn}},setLocked:function(Pn){at=Pn},setClear:function(Pn){zn!==Pn&&(n.clearDepth(Pn),zn=Pn)},reset:function(){at=!1,Bn=null,Ht=null,zn=null}}},l=new function o(){let at=!1,Bn=null,Ht=null,zn=null,Pn=null,gs=null,c2=null,Ya=null,V1=null;return{setTest:function(Bo){at||(Bo?Xt(2960):sn(2960))},setMask:function(Bo){Bn!==Bo&&!at&&(n.stencilMask(Bo),Bn=Bo)},setFunc:function(Bo,U1,G1){(Ht!==Bo||zn!==U1||Pn!==G1)&&(n.stencilFunc(Bo,U1,G1),Ht=Bo,zn=U1,Pn=G1)},setOp:function(Bo,U1,G1){(gs!==Bo||c2!==U1||Ya!==G1)&&(n.stencilOp(Bo,U1,G1),gs=Bo,c2=U1,Ya=G1)},setLocked:function(Bo){at=Bo},setClear:function(Bo){V1!==Bo&&(n.clearStencil(Bo),V1=Bo)},reset:function(){at=!1,Bn=null,Ht=null,zn=null,Pn=null,gs=null,c2=null,Ya=null,V1=null}}},u=new WeakMap,f=new WeakMap;let p={},g={},_=new WeakMap,y=[],w=null,C=!1,b=null,M=null,T=null,I=null,F=null,P=null,R=null,k=!1,W=null,ie=null,Te=null,me=null,Q=null;const he=n.getParameter(35661);let K=!1,oe=0;const fe=n.getParameter(7938);-1!==fe.indexOf("WebGL")?(oe=parseFloat(/^WebGL (\d)/.exec(fe)[1]),K=oe>=1):-1!==fe.indexOf("OpenGL ES")&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(fe)[1]),K=oe>=2);let de=null,Re={};const Ze=n.getParameter(3088),Be=n.getParameter(2978),wt=(new yo).fromArray(Ze),ut=(new yo).fromArray(Be);function It(at,Bn,Ht){const zn=new Uint8Array(4),Pn=n.createTexture();n.bindTexture(at,Pn),n.texParameteri(at,10241,9728),n.texParameteri(at,10240,9728);for(let gs=0;gs<Ht;gs++)n.texImage2D(Bn+gs,0,6408,1,1,0,6408,5121,zn);return Pn}const bt={};function Xt(at){!0!==p[at]&&(n.enable(at),p[at]=!0)}function sn(at){!1!==p[at]&&(n.disable(at),p[at]=!1)}bt[3553]=It(3553,3553,1),bt[34067]=It(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),Xt(2929),c.setFunc(3),En(!1),Cn(1),Xt(2884),dn(0);const Ot={[Ld]:32774,101:32778,102:32779};if(i)Ot[103]=32775,Ot[104]=32776;else{const at=e.get("EXT_blend_minmax");null!==at&&(Ot[103]=at.MIN_EXT,Ot[104]=at.MAX_EXT)}const Rt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function dn(at,Bn,Ht,zn,Pn,gs,c2,Ya){if(0!==at){if(!1===C&&(Xt(3042),C=!0),5===at)Pn=Pn||Bn,gs=gs||Ht,c2=c2||zn,(Bn!==M||Pn!==F)&&(n.blendEquationSeparate(Ot[Bn],Ot[Pn]),M=Bn,F=Pn),(Ht!==T||zn!==I||gs!==P||c2!==R)&&(n.blendFuncSeparate(Rt[Ht],Rt[zn],Rt[gs],Rt[c2]),T=Ht,I=zn,P=gs,R=c2),b=at,k=null;else if(at!==b||Ya!==k){if((M!==Ld||F!==Ld)&&(n.blendEquation(32774),M=Ld,F=Ld),Ya)switch(at){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",at)}else switch(at){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",at)}T=null,I=null,P=null,R=null,b=at,k=Ya}}else!0===C&&(sn(3042),C=!1)}function En(at){W!==at&&(n.frontFace(at?2304:2305),W=at)}function Cn(at){0!==at?(Xt(2884),at!==ie&&n.cullFace(1===at?1029:2===at?1028:1032)):sn(2884),ie=at}function fi(at,Bn,Ht){at?(Xt(32823),(me!==Bn||Q!==Ht)&&(n.polygonOffset(Bn,Ht),me=Bn,Q=Ht)):sn(32823)}function ls(at){void 0===at&&(at=33984+he-1),de!==at&&(n.activeTexture(at),de=at)}return{buffers:{color:a,depth:c,stencil:l},enable:Xt,disable:sn,bindFramebuffer:function Sn(at,Bn){return g[at]!==Bn&&(n.bindFramebuffer(at,Bn),g[at]=Bn,i&&(36009===at&&(g[36160]=Bn),36160===at&&(g[36009]=Bn)),!0)},drawBuffers:function on(at,Bn){let Ht=y,zn=!1;if(at)if(Ht=_.get(Bn),void 0===Ht&&(Ht=[],_.set(Bn,Ht)),at.isWebGLMultipleRenderTargets){const Pn=at.texture;if(Ht.length!==Pn.length||36064!==Ht[0]){for(let gs=0,c2=Pn.length;gs<c2;gs++)Ht[gs]=36064+gs;Ht.length=Pn.length,zn=!0}}else 36064!==Ht[0]&&(Ht[0]=36064,zn=!0);else 1029!==Ht[0]&&(Ht[0]=1029,zn=!0);zn&&(t.isWebGL2?n.drawBuffers(Ht):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ht))},useProgram:function Ti(at){return w!==at&&(n.useProgram(at),w=at,!0)},setBlending:dn,setMaterial:function qn(at,Bn){2===at.side?sn(2884):Xt(2884);let Ht=1===at.side;Bn&&(Ht=!Ht),En(Ht),1===at.blending&&!1===at.transparent?dn(0):dn(at.blending,at.blendEquation,at.blendSrc,at.blendDst,at.blendEquationAlpha,at.blendSrcAlpha,at.blendDstAlpha,at.premultipliedAlpha),c.setFunc(at.depthFunc),c.setTest(at.depthTest),c.setMask(at.depthWrite),a.setMask(at.colorWrite);const zn=at.stencilWrite;l.setTest(zn),zn&&(l.setMask(at.stencilWriteMask),l.setFunc(at.stencilFunc,at.stencilRef,at.stencilFuncMask),l.setOp(at.stencilFail,at.stencilZFail,at.stencilZPass)),fi(at.polygonOffset,at.polygonOffsetFactor,at.polygonOffsetUnits),!0===at.alphaToCoverage?Xt(32926):sn(32926)},setFlipSided:En,setCullFace:Cn,setLineWidth:function Un(at){at!==Te&&(K&&n.lineWidth(at),Te=at)},setPolygonOffset:fi,setScissorTest:function ar(at){at?Xt(3089):sn(3089)},activeTexture:ls,bindTexture:function ze(at,Bn){null===de&&ls();let Ht=Re[de];void 0===Ht&&(Ht={type:void 0,texture:void 0},Re[de]=Ht),(Ht.type!==at||Ht.texture!==Bn)&&(n.bindTexture(at,Bn||bt[at]),Ht.type=at,Ht.texture=Bn)},unbindTexture:function ve(){const at=Re[de];void 0!==at&&void 0!==at.type&&(n.bindTexture(at.type,null),at.type=void 0,at.texture=void 0)},compressedTexImage2D:function Tt(){try{n.compressedTexImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texImage2D:function Yt(){try{n.texImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texImage3D:function an(){try{n.texImage3D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},updateUBOMapping:function Yi(at,Bn){let Ht=f.get(Bn);void 0===Ht&&(Ht=new WeakMap,f.set(Bn,Ht));let zn=Ht.get(at);void 0===zn&&(zn=n.getUniformBlockIndex(Bn,at.name),Ht.set(at,zn))},uniformBlockBinding:function Fr(at,Bn){const zn=f.get(Bn).get(at);u.get(at)!==zn&&(n.uniformBlockBinding(Bn,zn,at.__bindingPointIndex),u.set(at,zn))},texStorage2D:function wi(){try{n.texStorage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texStorage3D:function Le(){try{n.texStorage3D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texSubImage2D:function hn(){try{n.texSubImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texSubImage3D:function xn(){try{n.texSubImage3D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},compressedTexSubImage2D:function In(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},scissor:function Wn(at){!1===wt.equals(at)&&(n.scissor(at.x,at.y,at.z,at.w),wt.copy(at))},viewport:function jn(at){!1===ut.equals(at)&&(n.viewport(at.x,at.y,at.z,at.w),ut.copy(at))},reset:function Io(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},de=null,Re={},g={},_=new WeakMap,y=[],w=null,C=!1,b=null,M=null,T=null,I=null,F=null,P=null,R=null,k=!1,W=null,ie=null,Te=null,me=null,Q=null,wt.set(0,0,n.canvas.width,n.canvas.height),ut.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function RNe(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let y;const w=new WeakMap;let C=!1;try{C=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function b(ze,ve){return C?new OffscreenCanvas(ze,ve):iv("canvas")}function M(ze,ve,Tt,hn){let xn=1;if((ze.width>hn||ze.height>hn)&&(xn=hn/Math.max(ze.width,ze.height)),xn<1||!0===ve){if(typeof HTMLImageElement<"u"&&ze instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ze instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ze instanceof ImageBitmap){const In=ve?Ab:Math.floor,wi=In(xn*ze.width),Le=In(xn*ze.height);void 0===y&&(y=b(wi,Le));const Yt=Tt?b(wi,Le):y;return Yt.width=wi,Yt.height=Le,Yt.getContext("2d").drawImage(ze,0,0,wi,Le),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ze.width+"x"+ze.height+") to ("+wi+"x"+Le+")."),Yt}return"data"in ze&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ze.width+"x"+ze.height+")."),ze}return ze}function T(ze){return yF(ze.width)&&yF(ze.height)}function F(ze,ve){return ze.generateMipmaps&&ve&&ze.minFilter!==B1&&ze.minFilter!==Qa}function P(ze){n.generateMipmap(ze)}function R(ze,ve,Tt,hn,xn=!1){if(!1===a)return ve;if(null!==ze){if(void 0!==n[ze])return n[ze];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ze+"'")}let In=ve;return 6403===ve&&(5126===Tt&&(In=33326),5131===Tt&&(In=33325),5121===Tt&&(In=33321)),33319===ve&&(5126===Tt&&(In=33328),5131===Tt&&(In=33327),5121===Tt&&(In=33323)),6408===ve&&(5126===Tt&&(In=34836),5131===Tt&&(In=34842),5121===Tt&&(In=hn===Lo&&!1===xn?35907:32856),32819===Tt&&(In=32854),32820===Tt&&(In=32855)),(33325===In||33326===In||33327===In||33328===In||34842===In||34836===In)&&e.get("EXT_color_buffer_float"),In}function k(ze,ve,Tt){return!0===F(ze,Tt)||ze.isFramebufferTexture&&ze.minFilter!==B1&&ze.minFilter!==Qa?Math.log2(Math.max(ve.width,ve.height))+1:void 0!==ze.mipmaps&&ze.mipmaps.length>0?ze.mipmaps.length:ze.isCompressedTexture&&Array.isArray(ze.image)?ve.mipmaps.length:1}function W(ze){return ze===B1||1004===ze||1005===ze?9728:9729}function ie(ze){const ve=ze.target;ve.removeEventListener("dispose",ie),function me(ze){const ve=i.get(ze);if(void 0===ve.__webglInit)return;const Tt=ze.source,hn=w.get(Tt);if(hn){const xn=hn[ve.__cacheKey];xn.usedTimes--,0===xn.usedTimes&&Q(ze),0===Object.keys(hn).length&&w.delete(Tt)}i.remove(ze)}(ve),ve.isVideoTexture&&_.delete(ve)}function Te(ze){const ve=ze.target;ve.removeEventListener("dispose",Te),function he(ze){const ve=ze.texture,Tt=i.get(ze),hn=i.get(ve);if(void 0!==hn.__webglTexture&&(n.deleteTexture(hn.__webglTexture),o.memory.textures--),ze.depthTexture&&ze.depthTexture.dispose(),ze.isWebGLCubeRenderTarget)for(let xn=0;xn<6;xn++)n.deleteFramebuffer(Tt.__webglFramebuffer[xn]),Tt.__webglDepthbuffer&&n.deleteRenderbuffer(Tt.__webglDepthbuffer[xn]);else{if(n.deleteFramebuffer(Tt.__webglFramebuffer),Tt.__webglDepthbuffer&&n.deleteRenderbuffer(Tt.__webglDepthbuffer),Tt.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Tt.__webglMultisampledFramebuffer),Tt.__webglColorRenderbuffer)for(let xn=0;xn<Tt.__webglColorRenderbuffer.length;xn++)Tt.__webglColorRenderbuffer[xn]&&n.deleteRenderbuffer(Tt.__webglColorRenderbuffer[xn]);Tt.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Tt.__webglDepthRenderbuffer)}if(ze.isWebGLMultipleRenderTargets)for(let xn=0,In=ve.length;xn<In;xn++){const wi=i.get(ve[xn]);wi.__webglTexture&&(n.deleteTexture(wi.__webglTexture),o.memory.textures--),i.remove(ve[xn])}i.remove(ve),i.remove(ze)}(ve)}function Q(ze){const ve=i.get(ze);n.deleteTexture(ve.__webglTexture),delete w.get(ze.source)[ve.__cacheKey],o.memory.textures--}let K=0;function Re(ze,ve){const Tt=i.get(ze);if(ze.isVideoTexture&&function ar(ze){const ve=o.render.frame;_.get(ze)!==ve&&(_.set(ze,ve),ze.update())}(ze),!1===ze.isRenderTargetTexture&&ze.version>0&&Tt.__version!==ze.version){const hn=ze.image;if(null===hn)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==hn.complete)return void sn(Tt,ze,ve);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+ve),t.bindTexture(3553,Tt.__webglTexture)}const ut={[k0]:10497,[Dl]:33071,1002:33648},It={[B1]:9728,1004:9984,1005:9986,[Qa]:9729,1007:9985,[Dd]:9987};function bt(ze,ve,Tt){if(Tt?(n.texParameteri(ze,10242,ut[ve.wrapS]),n.texParameteri(ze,10243,ut[ve.wrapT]),(32879===ze||35866===ze)&&n.texParameteri(ze,32882,ut[ve.wrapR]),n.texParameteri(ze,10240,It[ve.magFilter]),n.texParameteri(ze,10241,It[ve.minFilter])):(n.texParameteri(ze,10242,33071),n.texParameteri(ze,10243,33071),(32879===ze||35866===ze)&&n.texParameteri(ze,32882,33071),(ve.wrapS!==Dl||ve.wrapT!==Dl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ze,10240,W(ve.magFilter)),n.texParameteri(ze,10241,W(ve.minFilter)),ve.minFilter!==B1&&ve.minFilter!==Qa&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const hn=e.get("EXT_texture_filter_anisotropic");if(ve.type===L4&&!1===e.has("OES_texture_float_linear")||!1===a&&ve.type===P0&&!1===e.has("OES_texture_half_float_linear"))return;(ve.anisotropy>1||i.get(ve).__currentAnisotropy)&&(n.texParameterf(ze,hn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ve.anisotropy,r.getMaxAnisotropy())),i.get(ve).__currentAnisotropy=ve.anisotropy)}}function Xt(ze,ve){let Tt=!1;void 0===ze.__webglInit&&(ze.__webglInit=!0,ve.addEventListener("dispose",ie));const hn=ve.source;let xn=w.get(hn);void 0===xn&&(xn={},w.set(hn,xn));const In=function de(ze){const ve=[];return ve.push(ze.wrapS),ve.push(ze.wrapT),ve.push(ze.magFilter),ve.push(ze.minFilter),ve.push(ze.anisotropy),ve.push(ze.internalFormat),ve.push(ze.format),ve.push(ze.type),ve.push(ze.generateMipmaps),ve.push(ze.premultiplyAlpha),ve.push(ze.flipY),ve.push(ze.unpackAlignment),ve.push(ze.encoding),ve.join()}(ve);if(In!==ze.__cacheKey){void 0===xn[In]&&(xn[In]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Tt=!0),xn[In].usedTimes++;const wi=xn[ze.__cacheKey];void 0!==wi&&(xn[ze.__cacheKey].usedTimes--,0===wi.usedTimes&&Q(ve)),ze.__cacheKey=In,ze.__webglTexture=xn[In].texture}return Tt}function sn(ze,ve,Tt){let hn=3553;ve.isDataArrayTexture&&(hn=35866),ve.isData3DTexture&&(hn=32879);const xn=Xt(ze,ve),In=ve.source;if(t.activeTexture(33984+Tt),t.bindTexture(hn,ze.__webglTexture),In.version!==In.__currentVersion||!0===xn){n.pixelStorei(37440,ve.flipY),n.pixelStorei(37441,ve.premultiplyAlpha),n.pixelStorei(3317,ve.unpackAlignment),n.pixelStorei(37443,0);const wi=function I(ze){return!a&&(ze.wrapS!==Dl||ze.wrapT!==Dl||ze.minFilter!==B1&&ze.minFilter!==Qa)}(ve)&&!1===T(ve.image);let Le=M(ve.image,wi,!1,u);Le=ls(ve,Le);const Yt=T(Le)||a,an=s.convert(ve.format,ve.encoding);let Yi,Wn=s.convert(ve.type),jn=R(ve.internalFormat,an,Wn,ve.encoding,ve.isVideoTexture);bt(hn,ve,Yt);const Fr=ve.mipmaps,Io=a&&!0!==ve.isVideoTexture,at=void 0===In.__currentVersion||!0===xn,Bn=k(ve,Le,Yt);if(ve.isDepthTexture)jn=6402,a?jn=ve.type===L4?36012:ve.type===j8?33190:ve.type===$8?35056:33189:ve.type===L4&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ve.format===q8&&6402===jn&&1012!==ve.type&&ve.type!==j8&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ve.type=j8,Wn=s.convert(ve.type)),ve.format===K8&&6402===jn&&(jn=34041,ve.type!==$8&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ve.type=$8,Wn=s.convert(ve.type))),at&&(Io?t.texStorage2D(3553,1,jn,Le.width,Le.height):t.texImage2D(3553,0,jn,Le.width,Le.height,0,an,Wn,null));else if(ve.isDataTexture)if(Fr.length>0&&Yt){Io&&at&&t.texStorage2D(3553,Bn,jn,Fr[0].width,Fr[0].height);for(let Ht=0,zn=Fr.length;Ht<zn;Ht++)Yi=Fr[Ht],Io?t.texSubImage2D(3553,Ht,0,0,Yi.width,Yi.height,an,Wn,Yi.data):t.texImage2D(3553,Ht,jn,Yi.width,Yi.height,0,an,Wn,Yi.data);ve.generateMipmaps=!1}else Io?(at&&t.texStorage2D(3553,Bn,jn,Le.width,Le.height),t.texSubImage2D(3553,0,0,0,Le.width,Le.height,an,Wn,Le.data)):t.texImage2D(3553,0,jn,Le.width,Le.height,0,an,Wn,Le.data);else if(ve.isCompressedTexture){Io&&at&&t.texStorage2D(3553,Bn,jn,Fr[0].width,Fr[0].height);for(let Ht=0,zn=Fr.length;Ht<zn;Ht++)Yi=Fr[Ht],ve.format!==Du?null!==an?Io?t.compressedTexSubImage2D(3553,Ht,0,0,Yi.width,Yi.height,an,Yi.data):t.compressedTexImage2D(3553,Ht,jn,Yi.width,Yi.height,0,Yi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Io?t.texSubImage2D(3553,Ht,0,0,Yi.width,Yi.height,an,Wn,Yi.data):t.texImage2D(3553,Ht,jn,Yi.width,Yi.height,0,an,Wn,Yi.data)}else if(ve.isDataArrayTexture)Io?(at&&t.texStorage3D(35866,Bn,jn,Le.width,Le.height,Le.depth),t.texSubImage3D(35866,0,0,0,0,Le.width,Le.height,Le.depth,an,Wn,Le.data)):t.texImage3D(35866,0,jn,Le.width,Le.height,Le.depth,0,an,Wn,Le.data);else if(ve.isData3DTexture)Io?(at&&t.texStorage3D(32879,Bn,jn,Le.width,Le.height,Le.depth),t.texSubImage3D(32879,0,0,0,0,Le.width,Le.height,Le.depth,an,Wn,Le.data)):t.texImage3D(32879,0,jn,Le.width,Le.height,Le.depth,0,an,Wn,Le.data);else if(ve.isFramebufferTexture){if(at)if(Io)t.texStorage2D(3553,Bn,jn,Le.width,Le.height);else{let Ht=Le.width,zn=Le.height;for(let Pn=0;Pn<Bn;Pn++)t.texImage2D(3553,Pn,jn,Ht,zn,0,an,Wn,null),Ht>>=1,zn>>=1}}else if(Fr.length>0&&Yt){Io&&at&&t.texStorage2D(3553,Bn,jn,Fr[0].width,Fr[0].height);for(let Ht=0,zn=Fr.length;Ht<zn;Ht++)Yi=Fr[Ht],Io?t.texSubImage2D(3553,Ht,0,0,an,Wn,Yi):t.texImage2D(3553,Ht,jn,an,Wn,Yi);ve.generateMipmaps=!1}else Io?(at&&t.texStorage2D(3553,Bn,jn,Le.width,Le.height),t.texSubImage2D(3553,0,0,0,an,Wn,Le)):t.texImage2D(3553,0,jn,an,Wn,Le);F(ve,Yt)&&P(hn),In.__currentVersion=In.version,ve.onUpdate&&ve.onUpdate(ve)}ze.__version=ve.version}function on(ze,ve,Tt,hn,xn){const In=s.convert(Tt.format,Tt.encoding),wi=s.convert(Tt.type),Le=R(Tt.internalFormat,In,wi,Tt.encoding);i.get(ve).__hasExternalTextures||(32879===xn||35866===xn?t.texImage3D(xn,0,Le,ve.width,ve.height,ve.depth,0,In,wi,null):t.texImage2D(xn,0,Le,ve.width,ve.height,0,In,wi,null)),t.bindFramebuffer(36160,ze),fi(ve)?p.framebufferTexture2DMultisampleEXT(36160,hn,xn,i.get(Tt).__webglTexture,0,Un(ve)):n.framebufferTexture2D(36160,hn,xn,i.get(Tt).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ti(ze,ve,Tt){if(n.bindRenderbuffer(36161,ze),ve.depthBuffer&&!ve.stencilBuffer){let hn=33189;if(Tt||fi(ve)){const xn=ve.depthTexture;xn&&xn.isDepthTexture&&(xn.type===L4?hn=36012:xn.type===j8&&(hn=33190));const In=Un(ve);fi(ve)?p.renderbufferStorageMultisampleEXT(36161,In,hn,ve.width,ve.height):n.renderbufferStorageMultisample(36161,In,hn,ve.width,ve.height)}else n.renderbufferStorage(36161,hn,ve.width,ve.height);n.framebufferRenderbuffer(36160,36096,36161,ze)}else if(ve.depthBuffer&&ve.stencilBuffer){const hn=Un(ve);Tt&&!1===fi(ve)?n.renderbufferStorageMultisample(36161,hn,35056,ve.width,ve.height):fi(ve)?p.renderbufferStorageMultisampleEXT(36161,hn,35056,ve.width,ve.height):n.renderbufferStorage(36161,34041,ve.width,ve.height),n.framebufferRenderbuffer(36160,33306,36161,ze)}else{const hn=!0===ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture];for(let xn=0;xn<hn.length;xn++){const In=hn[xn],wi=s.convert(In.format,In.encoding),Le=s.convert(In.type),Yt=R(In.internalFormat,wi,Le,In.encoding),an=Un(ve);Tt&&!1===fi(ve)?n.renderbufferStorageMultisample(36161,an,Yt,ve.width,ve.height):fi(ve)?p.renderbufferStorageMultisampleEXT(36161,an,Yt,ve.width,ve.height):n.renderbufferStorage(36161,Yt,ve.width,ve.height)}}n.bindRenderbuffer(36161,null)}function Rt(ze){const ve=i.get(ze),Tt=!0===ze.isWebGLCubeRenderTarget;if(ze.depthTexture&&!ve.__autoAllocateDepthBuffer){if(Tt)throw new Error("target.depthTexture not supported in Cube render targets");!function Ot(ze,ve){if(ve&&ve.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ze),!ve.depthTexture||!ve.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ve.depthTexture).__webglTexture||ve.depthTexture.image.width!==ve.width||ve.depthTexture.image.height!==ve.height)&&(ve.depthTexture.image.width=ve.width,ve.depthTexture.image.height=ve.height,ve.depthTexture.needsUpdate=!0),Re(ve.depthTexture,0);const hn=i.get(ve.depthTexture).__webglTexture,xn=Un(ve);if(ve.depthTexture.format===q8)fi(ve)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,hn,0,xn):n.framebufferTexture2D(36160,36096,3553,hn,0);else{if(ve.depthTexture.format!==K8)throw new Error("Unknown depthTexture format");fi(ve)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,hn,0,xn):n.framebufferTexture2D(36160,33306,3553,hn,0)}}(ve.__webglFramebuffer,ze)}else if(Tt){ve.__webglDepthbuffer=[];for(let hn=0;hn<6;hn++)t.bindFramebuffer(36160,ve.__webglFramebuffer[hn]),ve.__webglDepthbuffer[hn]=n.createRenderbuffer(),Ti(ve.__webglDepthbuffer[hn],ze,!1)}else t.bindFramebuffer(36160,ve.__webglFramebuffer),ve.__webglDepthbuffer=n.createRenderbuffer(),Ti(ve.__webglDepthbuffer,ze,!1);t.bindFramebuffer(36160,null)}function Un(ze){return Math.min(f,ze.samples)}function fi(ze){const ve=i.get(ze);return a&&ze.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==ve.__useRenderToTexture}function ls(ze,ve){const Tt=ze.encoding,hn=ze.format,xn=ze.type;return!0===ze.isCompressedTexture||!0===ze.isVideoTexture||1035===ze.format||Tt!==Gh&&(Tt===Lo?!1===a?!0===e.has("EXT_sRGB")&&hn===Du?(ze.format=1035,ze.minFilter=Qa,ze.generateMipmaps=!1):ve=mee.sRGBToLinear(ve):(hn!==Du||xn!==W8)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Tt)),ve}this.allocateTextureUnit=function fe(){const ze=K;return ze>=c&&console.warn("THREE.WebGLTextures: Trying to use "+ze+" texture units while this GPU supports only "+c),K+=1,ze},this.resetTextureUnits=function oe(){K=0},this.setTexture2D=Re,this.setTexture2DArray=function Ze(ze,ve){const Tt=i.get(ze);ze.version>0&&Tt.__version!==ze.version?sn(Tt,ze,ve):(t.activeTexture(33984+ve),t.bindTexture(35866,Tt.__webglTexture))},this.setTexture3D=function Be(ze,ve){const Tt=i.get(ze);ze.version>0&&Tt.__version!==ze.version?sn(Tt,ze,ve):(t.activeTexture(33984+ve),t.bindTexture(32879,Tt.__webglTexture))},this.setTextureCube=function wt(ze,ve){const Tt=i.get(ze);ze.version>0&&Tt.__version!==ze.version?function Sn(ze,ve,Tt){if(6!==ve.image.length)return;const hn=Xt(ze,ve),xn=ve.source;if(t.activeTexture(33984+Tt),t.bindTexture(34067,ze.__webglTexture),xn.version!==xn.__currentVersion||!0===hn){n.pixelStorei(37440,ve.flipY),n.pixelStorei(37441,ve.premultiplyAlpha),n.pixelStorei(3317,ve.unpackAlignment),n.pixelStorei(37443,0);const In=ve.isCompressedTexture||ve.image[0].isCompressedTexture,wi=ve.image[0]&&ve.image[0].isDataTexture,Le=[];for(let Ht=0;Ht<6;Ht++)Le[Ht]=In||wi?wi?ve.image[Ht].image:ve.image[Ht]:M(ve.image[Ht],!1,!0,l),Le[Ht]=ls(ve,Le[Ht]);const Yt=Le[0],an=T(Yt)||a,Wn=s.convert(ve.format,ve.encoding),jn=s.convert(ve.type),Yi=R(ve.internalFormat,Wn,jn,ve.encoding),Fr=a&&!0!==ve.isVideoTexture,Io=void 0===xn.__currentVersion||!0===hn;let Bn,at=k(ve,Yt,an);if(bt(34067,ve,an),In){Fr&&Io&&t.texStorage2D(34067,at,Yi,Yt.width,Yt.height);for(let Ht=0;Ht<6;Ht++){Bn=Le[Ht].mipmaps;for(let zn=0;zn<Bn.length;zn++){const Pn=Bn[zn];ve.format!==Du?null!==Wn?Fr?t.compressedTexSubImage2D(34069+Ht,zn,0,0,Pn.width,Pn.height,Wn,Pn.data):t.compressedTexImage2D(34069+Ht,zn,Yi,Pn.width,Pn.height,0,Pn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fr?t.texSubImage2D(34069+Ht,zn,0,0,Pn.width,Pn.height,Wn,jn,Pn.data):t.texImage2D(34069+Ht,zn,Yi,Pn.width,Pn.height,0,Wn,jn,Pn.data)}}}else{Bn=ve.mipmaps,Fr&&Io&&(Bn.length>0&&at++,t.texStorage2D(34067,at,Yi,Le[0].width,Le[0].height));for(let Ht=0;Ht<6;Ht++)if(wi){Fr?t.texSubImage2D(34069+Ht,0,0,0,Le[Ht].width,Le[Ht].height,Wn,jn,Le[Ht].data):t.texImage2D(34069+Ht,0,Yi,Le[Ht].width,Le[Ht].height,0,Wn,jn,Le[Ht].data);for(let zn=0;zn<Bn.length;zn++){const gs=Bn[zn].image[Ht].image;Fr?t.texSubImage2D(34069+Ht,zn+1,0,0,gs.width,gs.height,Wn,jn,gs.data):t.texImage2D(34069+Ht,zn+1,Yi,gs.width,gs.height,0,Wn,jn,gs.data)}}else{Fr?t.texSubImage2D(34069+Ht,0,0,0,Wn,jn,Le[Ht]):t.texImage2D(34069+Ht,0,Yi,Wn,jn,Le[Ht]);for(let zn=0;zn<Bn.length;zn++){const Pn=Bn[zn];Fr?t.texSubImage2D(34069+Ht,zn+1,0,0,Wn,jn,Pn.image[Ht]):t.texImage2D(34069+Ht,zn+1,Yi,Wn,jn,Pn.image[Ht])}}}F(ve,an)&&P(34067),xn.__currentVersion=xn.version,ve.onUpdate&&ve.onUpdate(ve)}ze.__version=ve.version}(Tt,ze,ve):(t.activeTexture(33984+ve),t.bindTexture(34067,Tt.__webglTexture))},this.rebindTextures=function dn(ze,ve,Tt){const hn=i.get(ze);void 0!==ve&&on(hn.__webglFramebuffer,ze,ze.texture,36064,3553),void 0!==Tt&&Rt(ze)},this.setupRenderTarget=function qn(ze){const ve=ze.texture,Tt=i.get(ze),hn=i.get(ve);ze.addEventListener("dispose",Te),!0!==ze.isWebGLMultipleRenderTargets&&(void 0===hn.__webglTexture&&(hn.__webglTexture=n.createTexture()),hn.__version=ve.version,o.memory.textures++);const xn=!0===ze.isWebGLCubeRenderTarget,In=!0===ze.isWebGLMultipleRenderTargets,wi=T(ze)||a;if(xn){Tt.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)Tt.__webglFramebuffer[Le]=n.createFramebuffer()}else{if(Tt.__webglFramebuffer=n.createFramebuffer(),In)if(r.drawBuffers){const Le=ze.texture;for(let Yt=0,an=Le.length;Yt<an;Yt++){const Wn=i.get(Le[Yt]);void 0===Wn.__webglTexture&&(Wn.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&ze.samples>0&&!1===fi(ze)){const Le=In?ve:[ve];Tt.__webglMultisampledFramebuffer=n.createFramebuffer(),Tt.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Tt.__webglMultisampledFramebuffer);for(let Yt=0;Yt<Le.length;Yt++){const an=Le[Yt];Tt.__webglColorRenderbuffer[Yt]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Tt.__webglColorRenderbuffer[Yt]);const Wn=s.convert(an.format,an.encoding),jn=s.convert(an.type),Yi=R(an.internalFormat,Wn,jn,an.encoding),Fr=Un(ze);n.renderbufferStorageMultisample(36161,Fr,Yi,ze.width,ze.height),n.framebufferRenderbuffer(36160,36064+Yt,36161,Tt.__webglColorRenderbuffer[Yt])}n.bindRenderbuffer(36161,null),ze.depthBuffer&&(Tt.__webglDepthRenderbuffer=n.createRenderbuffer(),Ti(Tt.__webglDepthRenderbuffer,ze,!0)),t.bindFramebuffer(36160,null)}}if(xn){t.bindTexture(34067,hn.__webglTexture),bt(34067,ve,wi);for(let Le=0;Le<6;Le++)on(Tt.__webglFramebuffer[Le],ze,ve,36064,34069+Le);F(ve,wi)&&P(34067),t.unbindTexture()}else if(In){const Le=ze.texture;for(let Yt=0,an=Le.length;Yt<an;Yt++){const Wn=Le[Yt],jn=i.get(Wn);t.bindTexture(3553,jn.__webglTexture),bt(3553,Wn,wi),on(Tt.__webglFramebuffer,ze,Wn,36064+Yt,3553),F(Wn,wi)&&P(3553)}t.unbindTexture()}else{let Le=3553;(ze.isWebGL3DRenderTarget||ze.isWebGLArrayRenderTarget)&&(a?Le=ze.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Le,hn.__webglTexture),bt(Le,ve,wi),on(Tt.__webglFramebuffer,ze,ve,36064,Le),F(ve,wi)&&P(Le),t.unbindTexture()}ze.depthBuffer&&Rt(ze)},this.updateRenderTargetMipmap=function En(ze){const ve=T(ze)||a,Tt=!0===ze.isWebGLMultipleRenderTargets?ze.texture:[ze.texture];for(let hn=0,xn=Tt.length;hn<xn;hn++){const In=Tt[hn];if(F(In,ve)){const wi=ze.isWebGLCubeRenderTarget?34067:3553,Le=i.get(In).__webglTexture;t.bindTexture(wi,Le),P(wi),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Cn(ze){if(a&&ze.samples>0&&!1===fi(ze)){const ve=ze.isWebGLMultipleRenderTargets?ze.texture:[ze.texture],Tt=ze.width,hn=ze.height;let xn=16384;const In=[],wi=ze.stencilBuffer?33306:36096,Le=i.get(ze),Yt=!0===ze.isWebGLMultipleRenderTargets;if(Yt)for(let an=0;an<ve.length;an++)t.bindFramebuffer(36160,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+an,36161,null),t.bindFramebuffer(36160,Le.__webglFramebuffer),n.framebufferTexture2D(36009,36064+an,3553,null,0);t.bindFramebuffer(36008,Le.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Le.__webglFramebuffer);for(let an=0;an<ve.length;an++){In.push(36064+an),ze.depthBuffer&&In.push(wi);const Wn=void 0!==Le.__ignoreDepthValues&&Le.__ignoreDepthValues;if(!1===Wn&&(ze.depthBuffer&&(xn|=256),ze.stencilBuffer&&(xn|=1024)),Yt&&n.framebufferRenderbuffer(36008,36064,36161,Le.__webglColorRenderbuffer[an]),!0===Wn&&(n.invalidateFramebuffer(36008,[wi]),n.invalidateFramebuffer(36009,[wi])),Yt){const jn=i.get(ve[an]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,jn,0)}n.blitFramebuffer(0,0,Tt,hn,0,0,Tt,hn,xn,9728),g&&n.invalidateFramebuffer(36008,In)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Yt)for(let an=0;an<ve.length;an++){t.bindFramebuffer(36160,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+an,36161,Le.__webglColorRenderbuffer[an]);const Wn=i.get(ve[an]).__webglTexture;t.bindFramebuffer(36160,Le.__webglFramebuffer),n.framebufferTexture2D(36009,36064+an,3553,Wn,0)}t.bindFramebuffer(36009,Le.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Rt,this.setupFrameBufferTexture=on,this.useMultisampledRTT=fi}function FNe(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===W8)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===j8)return 5125;if(s===L4)return 5126;if(s===P0)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Du)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===q8)return 6402;if(s===K8)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Lo){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Lo?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Lo?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Lo?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===$8?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class kNe extends z2{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class wo extends Mc{constructor(){super(),this.isGroup=!0,this.type="Group"}}const PNe={type:"move"};class ZF{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new wo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new wo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ge),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new wo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ge),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const y of e.hand.values()){const w=t.getJointPose(y,i);if(void 0===l.joints[y.jointName]){const b=new wo;b.matrixAutoUpdate=!1,b.visible=!1,l.joints[y.jointName]=b,l.add(b)}const C=l.joints[y.jointName];null!==w&&(C.matrix.fromArray(w.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.jointRadius=w.radius),C.visible=null!==w}const p=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),g=.02,_=.005;l.inputState.pinching&&p>g+_?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&p<=g-_&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(PNe)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}}class ste extends D4{constructor(e,t,i,r,s,o,a,c,l,u){if((u=void 0!==u?u:q8)!==q8&&u!==K8)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===q8&&(i=j8),void 0===i&&u===K8&&(i=$8),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:B1,this.minFilter=void 0!==c?c:B1,this.flipY=!1,this.generateMipmaps=!1}}class HNe extends Y8{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=null,l=null,u=null,f=null,p=null,g=null;const _=t.getContextAttributes();let y=null,w=null;const C=[],b=[],M=new z2;M.layers.enable(1),M.viewport=new yo;const T=new z2;T.layers.enable(2),T.viewport=new yo;const I=[M,T],F=new kNe;F.layers.enable(1),F.layers.enable(2);let P=null,R=null;function k(de){const Re=b.indexOf(de.inputSource);if(-1===Re)return;const Ze=C[Re];void 0!==Ze&&Ze.dispatchEvent({type:de.type,data:de.inputSource})}function W(){r.removeEventListener("select",k),r.removeEventListener("selectstart",k),r.removeEventListener("selectend",k),r.removeEventListener("squeeze",k),r.removeEventListener("squeezestart",k),r.removeEventListener("squeezeend",k),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",ie);for(let de=0;de<C.length;de++){const Re=b[de];null!==Re&&(b[de]=null,C[de].disconnect(Re))}P=null,R=null,e.setRenderTarget(y),p=null,f=null,u=null,r=null,w=null,fe.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function ie(de){for(let Re=0;Re<de.removed.length;Re++){const Ze=de.removed[Re],Be=b.indexOf(Ze);Be>=0&&(b[Be]=null,C[Be].dispatchEvent({type:"disconnected",data:Ze}))}for(let Re=0;Re<de.added.length;Re++){const Ze=de.added[Re];let Be=b.indexOf(Ze);if(-1===Be){for(let ut=0;ut<C.length;ut++){if(ut>=b.length){b.push(Ze),Be=ut;break}if(null===b[ut]){b[ut]=Ze,Be=ut;break}}if(-1===Be)break}const wt=C[Be];wt&&wt.dispatchEvent({type:"connected",data:Ze})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let Re=C[de];return void 0===Re&&(Re=new ZF,C[de]=Re),Re.getTargetRaySpace()},this.getControllerGrip=function(de){let Re=C[de];return void 0===Re&&(Re=new ZF,C[de]=Re),Re.getGripSpace()},this.getHand=function(de){let Re=C[de];return void 0===Re&&(Re=new ZF,C[de]=Re),Re.getHandSpace()},this.setFramebufferScaleFactor=function(de){s=de,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){a=de,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(de){c=de},this.getBaseLayer=function(){return null!==f?f:p},this.getBinding=function(){return u},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=function(){var de=ba(function*(Re){if(r=Re,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",k),r.addEventListener("selectstart",k),r.addEventListener("selectend",k),r.addEventListener("squeeze",k),r.addEventListener("squeezestart",k),r.addEventListener("squeezeend",k),r.addEventListener("end",W),r.addEventListener("inputsourceschange",ie),!0!==_.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)p=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||_.antialias,alpha:_.alpha,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:p}),w=new I4(p.framebufferWidth,p.framebufferHeight,{format:Du,type:W8,encoding:e.outputEncoding,stencilBuffer:_.stencil});else{let Ze=null,Be=null,wt=null;_.depth&&(wt=_.stencil?35056:33190,Ze=_.stencil?K8:q8,Be=_.stencil?$8:j8);const ut={colorFormat:32856,depthFormat:wt,scaleFactor:s};u=new XRWebGLBinding(r,t),f=u.createProjectionLayer(ut),r.updateRenderState({layers:[f]}),w=new I4(f.textureWidth,f.textureHeight,{format:Du,type:W8,depthTexture:new ste(f.textureWidth,f.textureHeight,Be,void 0,void 0,void 0,void 0,void 0,void 0,Ze),stencilBuffer:_.stencil,encoding:e.outputEncoding,samples:_.antialias?4:0}),e.properties.get(w).__ignoreDepthValues=f.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),c=null,o=yield r.requestReferenceSpace(a),fe.setContext(r),fe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(Re){return de.apply(this,arguments)}}();const Te=new ge,me=new ge;function he(de,Re){null===Re?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(Re.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(null===r)return;F.near=T.near=M.near=de.near,F.far=T.far=M.far=de.far,(P!==F.near||R!==F.far)&&(r.updateRenderState({depthNear:F.near,depthFar:F.far}),P=F.near,R=F.far);const Re=de.parent,Ze=F.cameras;he(F,Re);for(let wt=0;wt<Ze.length;wt++)he(Ze[wt],Re);F.matrixWorld.decompose(F.position,F.quaternion,F.scale),de.matrix.copy(F.matrix),de.matrix.decompose(de.position,de.quaternion,de.scale);const Be=de.children;for(let wt=0,ut=Be.length;wt<ut;wt++)Be[wt].updateMatrixWorld(!0);2===Ze.length?function Q(de,Re,Ze){Te.setFromMatrixPosition(Re.matrixWorld),me.setFromMatrixPosition(Ze.matrixWorld);const Be=Te.distanceTo(me),wt=Re.projectionMatrix.elements,ut=Ze.projectionMatrix.elements,It=wt[14]/(wt[10]-1),bt=wt[14]/(wt[10]+1),Xt=(wt[9]+1)/wt[5],sn=(wt[9]-1)/wt[5],Sn=(wt[8]-1)/wt[0],on=(ut[8]+1)/ut[0],Ti=It*Sn,Ot=It*on,Rt=Be/(-Sn+on),dn=Rt*-Sn;Re.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(dn),de.translateZ(Rt),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert();const qn=It+Rt,En=bt+Rt;de.projectionMatrix.makePerspective(Ti-dn,Ot+(Be-dn),Xt*bt/En*qn,sn*bt/En*qn,qn,En)}(F,M,T):F.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return F},this.getFoveation=function(){return null!==f?f.fixedFoveation:null!==p?p.fixedFoveation:void 0},this.setFoveation=function(de){null!==f&&(f.fixedFoveation=de),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=de)};let K=null;const fe=new Iee;fe.setAnimationLoop(function oe(de,Re){if(l=Re.getViewerPose(c||o),g=Re,null!==l){const Ze=l.views;null!==p&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let Be=!1;Ze.length!==F.cameras.length&&(F.cameras.length=0,Be=!0);for(let wt=0;wt<Ze.length;wt++){const ut=Ze[wt];let It=null;if(null!==p)It=p.getViewport(ut);else{const Xt=u.getViewSubImage(f,ut);It=Xt.viewport,0===wt&&(e.setRenderTargetTextures(w,Xt.colorTexture,f.ignoreDepthValues?void 0:Xt.depthStencilTexture),e.setRenderTarget(w))}let bt=I[wt];void 0===bt&&(bt=new z2,bt.layers.enable(wt),bt.viewport=new yo,I[wt]=bt),bt.matrix.fromArray(ut.transform.matrix),bt.projectionMatrix.fromArray(ut.projectionMatrix),bt.viewport.set(It.x,It.y,It.width,It.height),0===wt&&F.matrix.copy(bt.matrix),!0===Be&&F.cameras.push(bt)}}for(let Ze=0;Ze<C.length;Ze++){const Be=b[Ze],wt=C[Ze];null!==Be&&void 0!==wt&&wt.update(Be,Re,c||o)}K&&K(de,Re),g=null}),this.setAnimationLoop=function(de){K=de},this.dispose=function(){}}}function zNe(n,e){function r(y,w){y.opacity.value=w.opacity,w.color&&y.diffuse.value.copy(w.color),w.emissive&&y.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.bumpMap&&(y.bumpMap.value=w.bumpMap,y.bumpScale.value=w.bumpScale,1===w.side&&(y.bumpScale.value*=-1)),w.displacementMap&&(y.displacementMap.value=w.displacementMap,y.displacementScale.value=w.displacementScale,y.displacementBias.value=w.displacementBias),w.emissiveMap&&(y.emissiveMap.value=w.emissiveMap),w.normalMap&&(y.normalMap.value=w.normalMap,y.normalScale.value.copy(w.normalScale),1===w.side&&y.normalScale.value.negate()),w.specularMap&&(y.specularMap.value=w.specularMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);const C=e.get(w).envMap;if(C&&(y.envMap.value=C,y.flipEnvMap.value=C.isCubeTexture&&!1===C.isRenderTargetTexture?-1:1,y.reflectivity.value=w.reflectivity,y.ior.value=w.ior,y.refractionRatio.value=w.refractionRatio),w.lightMap){y.lightMap.value=w.lightMap;const T=!0!==n.physicallyCorrectLights?Math.PI:1;y.lightMapIntensity.value=w.lightMapIntensity*T}let b,M;w.aoMap&&(y.aoMap.value=w.aoMap,y.aoMapIntensity.value=w.aoMapIntensity),w.map?b=w.map:w.specularMap?b=w.specularMap:w.displacementMap?b=w.displacementMap:w.normalMap?b=w.normalMap:w.bumpMap?b=w.bumpMap:w.roughnessMap?b=w.roughnessMap:w.metalnessMap?b=w.metalnessMap:w.alphaMap?b=w.alphaMap:w.emissiveMap?b=w.emissiveMap:w.clearcoatMap?b=w.clearcoatMap:w.clearcoatNormalMap?b=w.clearcoatNormalMap:w.clearcoatRoughnessMap?b=w.clearcoatRoughnessMap:w.iridescenceMap?b=w.iridescenceMap:w.iridescenceThicknessMap?b=w.iridescenceThicknessMap:w.specularIntensityMap?b=w.specularIntensityMap:w.specularColorMap?b=w.specularColorMap:w.transmissionMap?b=w.transmissionMap:w.thicknessMap?b=w.thicknessMap:w.sheenColorMap?b=w.sheenColorMap:w.sheenRoughnessMap&&(b=w.sheenRoughnessMap),void 0!==b&&(b.isWebGLRenderTarget&&(b=b.texture),!0===b.matrixAutoUpdate&&b.updateMatrix(),y.uvTransform.value.copy(b.matrix)),w.aoMap?M=w.aoMap:w.lightMap&&(M=w.lightMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uv2Transform.value.copy(M.matrix))}return{refreshFogUniforms:function t(y,w){y.fogColor.value.copy(w.color),w.isFog?(y.fogNear.value=w.near,y.fogFar.value=w.far):w.isFogExp2&&(y.fogDensity.value=w.density)},refreshMaterialUniforms:function i(y,w,C,b,M){w.isMeshBasicMaterial||w.isMeshLambertMaterial?r(y,w):w.isMeshToonMaterial?(r(y,w),function u(y,w){w.gradientMap&&(y.gradientMap.value=w.gradientMap)}(y,w)):w.isMeshPhongMaterial?(r(y,w),function l(y,w){y.specular.value.copy(w.specular),y.shininess.value=Math.max(w.shininess,1e-4)}(y,w)):w.isMeshStandardMaterial?(r(y,w),function f(y,w){y.roughness.value=w.roughness,y.metalness.value=w.metalness,w.roughnessMap&&(y.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(y.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(y.envMapIntensity.value=w.envMapIntensity)}(y,w),w.isMeshPhysicalMaterial&&function p(y,w,C){y.ior.value=w.ior,w.sheen>0&&(y.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),y.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(y.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(y.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(y.clearcoat.value=w.clearcoat,y.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(y.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),y.clearcoatNormalMap.value=w.clearcoatNormalMap,1===w.side&&y.clearcoatNormalScale.value.negate())),w.iridescence>0&&(y.iridescence.value=w.iridescence,y.iridescenceIOR.value=w.iridescenceIOR,y.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(y.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(y.transmission.value=w.transmission,y.transmissionSamplerMap.value=C.texture,y.transmissionSamplerSize.value.set(C.width,C.height),w.transmissionMap&&(y.transmissionMap.value=w.transmissionMap),y.thickness.value=w.thickness,w.thicknessMap&&(y.thicknessMap.value=w.thicknessMap),y.attenuationDistance.value=w.attenuationDistance,y.attenuationColor.value.copy(w.attenuationColor)),y.specularIntensity.value=w.specularIntensity,y.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(y.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(y.specularColorMap.value=w.specularColorMap)}(y,w,M)):w.isMeshMatcapMaterial?(r(y,w),function g(y,w){w.matcap&&(y.matcap.value=w.matcap)}(y,w)):w.isMeshDepthMaterial?r(y,w):w.isMeshDistanceMaterial?(r(y,w),function _(y,w){y.referencePosition.value.copy(w.referencePosition),y.nearDistance.value=w.nearDistance,y.farDistance.value=w.farDistance}(y,w)):w.isMeshNormalMaterial?r(y,w):w.isLineBasicMaterial?(function s(y,w){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity}(y,w),w.isLineDashedMaterial&&function o(y,w){y.dashSize.value=w.dashSize,y.totalSize.value=w.dashSize+w.gapSize,y.scale.value=w.scale}(y,w)):w.isPointsMaterial?function a(y,w,C,b){let M;y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.size.value=w.size*C,y.scale.value=.5*b,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest),w.map?M=w.map:w.alphaMap&&(M=w.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uvTransform.value.copy(M.matrix))}(y,w,C,b):w.isSpriteMaterial?function c(y,w){let C;y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.rotation.value=w.rotation,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest),w.map?C=w.map:w.alphaMap&&(C=w.alphaMap),void 0!==C&&(!0===C.matrixAutoUpdate&&C.updateMatrix(),y.uvTransform.value.copy(C.matrix))}(y,w):w.isShadowMaterial?(y.color.value.copy(w.color),y.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}}}function ONe(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function g(b,M,T){const I=b.value;if(void 0===T[M])return T[M]="number"==typeof I?I:I.clone(),!0;if("number"==typeof I){if(T[M]!==I)return T[M]=I,!0}else{const F=T[M];if(!1===F.equals(I))return F.copy(I),!0}return!1}function y(b){const M=b.value,T={boundary:0,storage:0};return"number"==typeof M?(T.boundary=4,T.storage=4):M.isVector2?(T.boundary=8,T.storage=8):M.isVector3||M.isColor?(T.boundary=16,T.storage=12):M.isVector4?(T.boundary=16,T.storage=16):M.isMatrix3?(T.boundary=48,T.storage=48):M.isMatrix4?(T.boundary=64,T.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),T}function w(b){const M=b.target;M.removeEventListener("dispose",w);const T=o.indexOf(M.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}return{bind:function c(b,M){i.uniformBlockBinding(b,M.program)},update:function l(b,M){let T=r[b.id];void 0===T&&(function _(b){const M=b.uniforms;let T=0;let F=0;for(let P=0,R=M.length;P<R;P++){const k=M[P],W=y(k);if(k.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),k.__offset=T,P>0){F=T%16;const ie=16-F;0!==F&&ie-W.boundary<0&&(T+=16-F,k.__offset=T)}T+=W.storage}F=T%16,F>0&&(T+=16-F),b.__size=T,b.__cache={}}(b),T=function u(b){const M=function f(){for(let b=0;b<a;b++)if(-1===o.indexOf(b))return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=M;const T=n.createBuffer(),I=b.__size,F=b.usage;return n.bindBuffer(35345,T),n.bufferData(35345,I,F),n.bindBuffer(35345,null),n.bindBufferBase(35345,M,T),T}(b),r[b.id]=T,b.addEventListener("dispose",w)),i.updateUBOMapping(b,M.program);const F=e.render.frame;s[b.id]!==F&&(function p(b){const T=b.uniforms,I=b.__cache;n.bindBuffer(35345,r[b.id]);for(let F=0,P=T.length;F<P;F++){const R=T[F];if(!0===g(R,F,I)){const k=R.value,W=R.__offset;"number"==typeof k?(R.__data[0]=k,n.bufferSubData(35345,W,R.__data)):(R.value.isMatrix3?(R.__data[0]=R.value.elements[0],R.__data[1]=R.value.elements[1],R.__data[2]=R.value.elements[2],R.__data[3]=R.value.elements[0],R.__data[4]=R.value.elements[3],R.__data[5]=R.value.elements[4],R.__data[6]=R.value.elements[5],R.__data[7]=R.value.elements[0],R.__data[8]=R.value.elements[6],R.__data[9]=R.value.elements[7],R.__data[10]=R.value.elements[8],R.__data[11]=R.value.elements[0]):k.toArray(R.__data),n.bufferSubData(35345,W,R.__data))}}n.bindBuffer(35345,null)}(b),s[b.id]=F)},dispose:function C(){for(const b in r)n.deleteBuffer(r[b]);o=[],r={},s={}}}}function ote(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function NNe(){const n=iv("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",l=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let f=null,p=null;const g=[],_=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Gh,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const y=this;let w=!1,C=0,b=0,M=null,T=-1,I=null;const F=new yo,P=new yo;let R=null,k=e.width,W=e.height,ie=1,Te=null,me=null;const Q=new yo(0,0,k,W),he=new yo(0,0,k,W);let K=!1;const oe=new WF;let fe=!1,de=!1,Re=null;const Ze=new Vi,Be=new Qt,wt=new ge,ut={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function It(){return null===M?ie:1}let sn,Sn,on,Ti,Ot,Rt,dn,qn,En,Cn,Un,fi,ar,ls,ze,ve,Tt,hn,xn,In,wi,Le,Yt,an,bt=t;function Xt(ke,Et){for(let Wt=0;Wt<ke.length;Wt++){const Zt=e.getContext(ke[Wt],Et);if(null!==Zt)return Zt}return null}try{const ke={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:c,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r144"),e.addEventListener("webglcontextlost",Yi,!1),e.addEventListener("webglcontextrestored",Fr,!1),e.addEventListener("webglcontextcreationerror",Io,!1),null===bt){const Et=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&Et.shift(),bt=Xt(Et,ke),null===bt)throw Xt(Et)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===bt.getShaderPrecisionFormat&&(bt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ke){throw console.error("THREE.WebGLRenderer: "+ke.message),ke}function Wn(){sn=new eOe(bt),Sn=new qze(bt,sn,n),sn.init(Sn),Le=new FNe(bt,sn,Sn),on=new BNe(bt,sn,Sn),Ti=new iOe,Ot=new yNe,Rt=new RNe(bt,sn,on,Ot,Sn,Le,Ti),dn=new Xze(y),qn=new Jze(y),En=new jPe(bt,Sn),Yt=new jze(bt,sn,En,Sn),Cn=new tOe(bt,En,Ti,Yt),Un=new aOe(bt,Cn,En,Ti),xn=new oOe(bt,Sn,Rt),ve=new Kze(Ot),fi=new _Ne(y,dn,qn,sn,Sn,Yt,ve),ar=new zNe(y,Ot),ls=new CNe,ze=new TNe(sn,Sn),hn=new Wze(y,dn,on,Un,u,o),Tt=new INe(y,Un,Sn),an=new ONe(bt,Ti,Sn,on),In=new $ze(bt,sn,Ti,Sn),wi=new nOe(bt,sn,Ti,Sn),Ti.programs=fi.programs,y.capabilities=Sn,y.extensions=sn,y.properties=Ot,y.renderLists=ls,y.shadowMap=Tt,y.state=on,y.info=Ti}Wn();const jn=new HNe(y,bt);function Yi(ke){ke.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Fr(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const ke=Ti.autoReset,Et=Tt.enabled,Wt=Tt.autoUpdate,xt=Tt.needsUpdate,Zt=Tt.type;Wn(),Ti.autoReset=ke,Tt.enabled=Et,Tt.autoUpdate=Wt,Tt.needsUpdate=xt,Tt.type=Zt}function Io(ke){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ke.statusMessage)}function at(ke){const Et=ke.target;Et.removeEventListener("dispose",at),function Bn(ke){(function Ht(ke){const Et=Ot.get(ke).programs;void 0!==Et&&(Et.forEach(function(Wt){fi.releaseProgram(Wt)}),ke.isShaderMaterial&&fi.releaseShaderCache(ke))})(ke),Ot.remove(ke)}(Et)}this.xr=jn,this.getContext=function(){return bt},this.getContextAttributes=function(){return bt.getContextAttributes()},this.forceContextLoss=function(){const ke=sn.get("WEBGL_lose_context");ke&&ke.loseContext()},this.forceContextRestore=function(){const ke=sn.get("WEBGL_lose_context");ke&&ke.restoreContext()},this.getPixelRatio=function(){return ie},this.setPixelRatio=function(ke){void 0!==ke&&(ie=ke,this.setSize(k,W,!1))},this.getSize=function(ke){return ke.set(k,W)},this.setSize=function(ke,Et,Wt){jn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=ke,W=Et,e.width=Math.floor(ke*ie),e.height=Math.floor(Et*ie),!1!==Wt&&(e.style.width=ke+"px",e.style.height=Et+"px"),this.setViewport(0,0,ke,Et))},this.getDrawingBufferSize=function(ke){return ke.set(k*ie,W*ie).floor()},this.setDrawingBufferSize=function(ke,Et,Wt){k=ke,W=Et,ie=Wt,e.width=Math.floor(ke*Wt),e.height=Math.floor(Et*Wt),this.setViewport(0,0,ke,Et)},this.getCurrentViewport=function(ke){return ke.copy(F)},this.getViewport=function(ke){return ke.copy(Q)},this.setViewport=function(ke,Et,Wt,xt){ke.isVector4?Q.set(ke.x,ke.y,ke.z,ke.w):Q.set(ke,Et,Wt,xt),on.viewport(F.copy(Q).multiplyScalar(ie).floor())},this.getScissor=function(ke){return ke.copy(he)},this.setScissor=function(ke,Et,Wt,xt){ke.isVector4?he.set(ke.x,ke.y,ke.z,ke.w):he.set(ke,Et,Wt,xt),on.scissor(P.copy(he).multiplyScalar(ie).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(ke){on.setScissorTest(K=ke)},this.setOpaqueSort=function(ke){Te=ke},this.setTransparentSort=function(ke){me=ke},this.getClearColor=function(ke){return ke.copy(hn.getClearColor())},this.setClearColor=function(){hn.setClearColor.apply(hn,arguments)},this.getClearAlpha=function(){return hn.getClearAlpha()},this.setClearAlpha=function(){hn.setClearAlpha.apply(hn,arguments)},this.clear=function(ke=!0,Et=!0,Wt=!0){let xt=0;ke&&(xt|=16384),Et&&(xt|=256),Wt&&(xt|=1024),bt.clear(xt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Yi,!1),e.removeEventListener("webglcontextrestored",Fr,!1),e.removeEventListener("webglcontextcreationerror",Io,!1),ls.dispose(),ze.dispose(),Ot.dispose(),dn.dispose(),qn.dispose(),Un.dispose(),Yt.dispose(),an.dispose(),fi.dispose(),jn.dispose(),jn.removeEventListener("sessionstart",gs),jn.removeEventListener("sessionend",c2),Re&&(Re.dispose(),Re=null),Ya.stop()},this.renderBufferDirect=function(ke,Et,Wt,xt,Zt,Ki){null===Et&&(Et=ut);const Mr=Zt.isMesh&&Zt.matrixWorld.determinant()<0,ms=function sl(ke,Et,Wt,xt,Zt){!0!==Et.isScene&&(Et=ut),Rt.resetTextureUnits();const Ki=Et.fog,ms=null===M?y.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:Gh,Er=(xt.isMeshStandardMaterial?qn:dn).get(xt.envMap||(xt.isMeshStandardMaterial?Et.environment:null)),Ro=!0===xt.vertexColors&&!!Wt.attributes.color&&4===Wt.attributes.color.itemSize,to=!!xt.normalMap&&!!Wt.attributes.tangent,no=!!Wt.morphAttributes.position,Q1=!!Wt.morphAttributes.normal,up=!!Wt.morphAttributes.color,Lm=xt.toneMapped?y.toneMapping:0,Dm=Wt.morphAttributes.position||Wt.morphAttributes.normal||Wt.morphAttributes.color,ih=void 0!==Dm?Dm.length:0,Co=Ot.get(xt),Im=p.state.lights;!0!==fe||!0!==de&&ke===I||ve.setState(xt,ke,ke===I&&xt.id===T);let L2=!1;xt.version===Co.__version?(Co.needsLights&&Co.lightsStateVersion!==Im.state.version||Co.outputEncoding!==ms||Zt.isInstancedMesh&&!1===Co.instancing||!Zt.isInstancedMesh&&!0===Co.instancing||Zt.isSkinnedMesh&&!1===Co.skinning||!Zt.isSkinnedMesh&&!0===Co.skinning||Co.envMap!==Er||!0===xt.fog&&Co.fog!==Ki||void 0!==Co.numClippingPlanes&&(Co.numClippingPlanes!==ve.numPlanes||Co.numIntersection!==ve.numIntersection)||Co.vertexAlphas!==Ro||Co.vertexTangents!==to||Co.morphTargets!==no||Co.morphNormals!==Q1||Co.morphColors!==up||Co.toneMapping!==Lm||!0===Sn.isWebGL2&&Co.morphTargetsCount!==ih)&&(L2=!0):(L2=!0,Co.__version=xt.version);let K4=Co.currentProgram;!0===L2&&(K4=Lf(xt,Et,Zt));let E6=!1,ly=!1,uV=!1;const Wl=K4.getUniforms(),hp=Co.uniforms;if(on.useProgram(K4.program)&&(E6=!0,ly=!0,uV=!0),xt.id!==T&&(T=xt.id,ly=!0),E6||I!==ke){if(Wl.setValue(bt,"projectionMatrix",ke.projectionMatrix),Sn.logarithmicDepthBuffer&&Wl.setValue(bt,"logDepthBufFC",2/(Math.log(ke.far+1)/Math.LN2)),I!==ke&&(I=ke,ly=!0,uV=!0),xt.isShaderMaterial||xt.isMeshPhongMaterial||xt.isMeshToonMaterial||xt.isMeshStandardMaterial||xt.envMap){const h4=Wl.map.cameraPosition;void 0!==h4&&h4.setValue(bt,wt.setFromMatrixPosition(ke.matrixWorld))}(xt.isMeshPhongMaterial||xt.isMeshToonMaterial||xt.isMeshLambertMaterial||xt.isMeshBasicMaterial||xt.isMeshStandardMaterial||xt.isShaderMaterial)&&Wl.setValue(bt,"isOrthographic",!0===ke.isOrthographicCamera),(xt.isMeshPhongMaterial||xt.isMeshToonMaterial||xt.isMeshLambertMaterial||xt.isMeshBasicMaterial||xt.isMeshStandardMaterial||xt.isShaderMaterial||xt.isShadowMaterial||Zt.isSkinnedMesh)&&Wl.setValue(bt,"viewMatrix",ke.matrixWorldInverse)}if(Zt.isSkinnedMesh){Wl.setOptional(bt,Zt,"bindMatrix"),Wl.setOptional(bt,Zt,"bindMatrixInverse");const h4=Zt.skeleton;h4&&(Sn.floatVertexTextures?(null===h4.boneTexture&&h4.computeBoneTexture(),Wl.setValue(bt,"boneTexture",h4.boneTexture,Rt),Wl.setValue(bt,"boneTextureSize",h4.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const hV=Wt.morphAttributes;if((void 0!==hV.position||void 0!==hV.normal||void 0!==hV.color&&!0===Sn.isWebGL2)&&xn.update(Zt,Wt,xt,K4),(ly||Co.receiveShadow!==Zt.receiveShadow)&&(Co.receiveShadow=Zt.receiveShadow,Wl.setValue(bt,"receiveShadow",Zt.receiveShadow)),xt.isMeshGouraudMaterial&&null!==xt.envMap&&(hp.envMap.value=Er,hp.flipEnvMap.value=Er.isCubeTexture&&!1===Er.isRenderTargetTexture?-1:1),ly&&(Wl.setValue(bt,"toneMappingExposure",y.toneMappingExposure),Co.needsLights&&function w3(ke,Et){ke.ambientLightColor.needsUpdate=Et,ke.lightProbe.needsUpdate=Et,ke.directionalLights.needsUpdate=Et,ke.directionalLightShadows.needsUpdate=Et,ke.pointLights.needsUpdate=Et,ke.pointLightShadows.needsUpdate=Et,ke.spotLights.needsUpdate=Et,ke.spotLightShadows.needsUpdate=Et,ke.rectAreaLights.needsUpdate=Et,ke.hemisphereLights.needsUpdate=Et}(hp,uV),Ki&&!0===xt.fog&&ar.refreshFogUniforms(hp,Ki),ar.refreshMaterialUniforms(hp,xt,ie,W,Re),Gb.upload(bt,Co.uniformsList,hp,Rt)),xt.isShaderMaterial&&!0===xt.uniformsNeedUpdate&&(Gb.upload(bt,Co.uniformsList,hp,Rt),xt.uniformsNeedUpdate=!1),xt.isSpriteMaterial&&Wl.setValue(bt,"center",Zt.center),Wl.setValue(bt,"modelViewMatrix",Zt.modelViewMatrix),Wl.setValue(bt,"normalMatrix",Zt.normalMatrix),Wl.setValue(bt,"modelMatrix",Zt.matrixWorld),xt.isShaderMaterial||xt.isRawShaderMaterial){const h4=xt.uniformsGroups;for(let fV=0,vBt=h4.length;fV<vBt;fV++)if(Sn.isWebGL2){const Gde=h4[fV];an.update(Gde,K4),an.bind(Gde,K4)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return K4}(ke,Et,Wt,xt,Zt);on.setMaterial(xt,Mr);let Er=Wt.index;const Ro=Wt.attributes.position;if(null===Er){if(void 0===Ro||0===Ro.count)return}else if(0===Er.count)return;let to=1;!0===xt.wireframe&&(Er=Cn.getWireframeAttribute(Wt),to=2),Yt.setup(Zt,xt,ms,Wt,Er);let no,Q1=In;null!==Er&&(no=En.get(Er),Q1=wi,Q1.setIndex(no));const up=null!==Er?Er.count:Ro.count,Lm=Wt.drawRange.start*to,Dm=Wt.drawRange.count*to,ih=null!==Ki?Ki.start*to:0,Co=null!==Ki?Ki.count*to:1/0,Im=Math.max(Lm,ih),L2=Math.min(up,Lm+Dm,ih+Co)-1,K4=Math.max(0,L2-Im+1);if(0!==K4){if(Zt.isMesh)!0===xt.wireframe?(on.setLineWidth(xt.wireframeLinewidth*It()),Q1.setMode(1)):Q1.setMode(4);else if(Zt.isLine){let E6=xt.linewidth;void 0===E6&&(E6=1),on.setLineWidth(E6*It()),Q1.setMode(Zt.isLineSegments?1:Zt.isLineLoop?2:3)}else Zt.isPoints?Q1.setMode(0):Zt.isSprite&&Q1.setMode(4);if(Zt.isInstancedMesh)Q1.renderInstances(Im,K4,Zt.count);else if(Wt.isInstancedBufferGeometry){const E6=Math.min(Wt.instanceCount,Wt._maxInstanceCount);Q1.renderInstances(Im,K4,E6)}else Q1.render(Im,K4)}},this.compile=function(ke,Et){function Wt(xt,Zt,Ki){!0===xt.transparent&&2===xt.side?(xt.side=1,xt.needsUpdate=!0,Lf(xt,Zt,Ki),xt.side=0,xt.needsUpdate=!0,Lf(xt,Zt,Ki),xt.side=2):Lf(xt,Zt,Ki)}p=ze.get(ke),p.init(),_.push(p),ke.traverseVisible(function(xt){xt.isLight&&xt.layers.test(Et.layers)&&(p.pushLight(xt),xt.castShadow&&p.pushShadow(xt))}),p.setupLights(y.physicallyCorrectLights),ke.traverse(function(xt){const Zt=xt.material;if(Zt)if(Array.isArray(Zt))for(let Ki=0;Ki<Zt.length;Ki++)Wt(Zt[Ki],ke,xt);else Wt(Zt,ke,xt)}),_.pop(),p=null};let zn=null;function gs(){Ya.stop()}function c2(){Ya.start()}const Ya=new Iee;function V1(ke,Et,Wt,xt){if(!1===ke.visible)return;if(ke.layers.test(Et.layers))if(ke.isGroup)Wt=ke.renderOrder;else if(ke.isLOD)!0===ke.autoUpdate&&ke.update(Et);else if(ke.isLight)p.pushLight(ke),ke.castShadow&&p.pushShadow(ke);else if(ke.isSprite){if(!ke.frustumCulled||oe.intersectsSprite(ke)){xt&&wt.setFromMatrixPosition(ke.matrixWorld).applyMatrix4(Ze);const Mr=Un.update(ke),ms=ke.material;ms.visible&&f.push(ke,Mr,ms,Wt,wt.z,null)}}else if((ke.isMesh||ke.isLine||ke.isPoints)&&(ke.isSkinnedMesh&&ke.skeleton.frame!==Ti.render.frame&&(ke.skeleton.update(),ke.skeleton.frame=Ti.render.frame),!ke.frustumCulled||oe.intersectsObject(ke))){xt&&wt.setFromMatrixPosition(ke.matrixWorld).applyMatrix4(Ze);const Mr=Un.update(ke),ms=ke.material;if(Array.isArray(ms)){const Er=Mr.groups;for(let Ro=0,to=Er.length;Ro<to;Ro++){const no=Er[Ro],Q1=ms[no.materialIndex];Q1&&Q1.visible&&f.push(ke,Mr,Q1,Wt,wt.z,no)}}else ms.visible&&f.push(ke,Mr,ms,Wt,wt.z,null)}const Ki=ke.children;for(let Mr=0,ms=Ki.length;Mr<ms;Mr++)V1(Ki[Mr],Et,Wt,xt)}function Bo(ke,Et,Wt,xt){const Zt=ke.opaque,Ki=ke.transmissive,Mr=ke.transparent;p.setupLightsView(Wt),Ki.length>0&&function U1(ke,Et,Wt){const xt=Sn.isWebGL2;null===Re&&(Re=new I4(1,1,{generateMipmaps:!0,type:sn.has("EXT_color_buffer_half_float")?P0:W8,minFilter:Dd,samples:xt&&!0===s?4:0})),y.getDrawingBufferSize(Be),xt?Re.setSize(Be.x,Be.y):Re.setSize(Ab(Be.x),Ab(Be.y));const Zt=y.getRenderTarget();y.setRenderTarget(Re),y.clear();const Ki=y.toneMapping;y.toneMapping=0,G1(ke,Et,Wt),y.toneMapping=Ki,Rt.updateMultisampleRenderTarget(Re),Rt.updateRenderTargetMipmap(Re),y.setRenderTarget(Zt)}(Zt,Et,Wt),xt&&on.viewport(F.copy(xt)),Zt.length>0&&G1(Zt,Et,Wt),Ki.length>0&&G1(Ki,Et,Wt),Mr.length>0&&G1(Mr,Et,Wt),on.buffers.depth.setTest(!0),on.buffers.depth.setMask(!0),on.buffers.color.setMask(!0),on.setPolygonOffset(!1)}function G1(ke,Et,Wt){const xt=!0===Et.isScene?Et.overrideMaterial:null;for(let Zt=0,Ki=ke.length;Zt<Ki;Zt++){const Mr=ke[Zt],ms=Mr.object,Er=Mr.geometry,Ro=null===xt?Mr.material:xt,to=Mr.group;ms.layers.test(Wt.layers)&&Ql(ms,Et,Wt,Er,Ro,to)}}function Ql(ke,Et,Wt,xt,Zt,Ki){ke.onBeforeRender(y,Et,Wt,xt,Zt,Ki),ke.modelViewMatrix.multiplyMatrices(Wt.matrixWorldInverse,ke.matrixWorld),ke.normalMatrix.getNormalMatrix(ke.modelViewMatrix),Zt.onBeforeRender(y,Et,Wt,xt,ke,Ki),!0===Zt.transparent&&2===Zt.side?(Zt.side=1,Zt.needsUpdate=!0,y.renderBufferDirect(Wt,Et,xt,Zt,ke,Ki),Zt.side=0,Zt.needsUpdate=!0,y.renderBufferDirect(Wt,Et,xt,Zt,ke,Ki),Zt.side=2):y.renderBufferDirect(Wt,Et,xt,Zt,ke,Ki),ke.onAfterRender(y,Et,Wt,xt,Zt,Ki)}function Lf(ke,Et,Wt){!0!==Et.isScene&&(Et=ut);const xt=Ot.get(ke),Zt=p.state.lights,Mr=Zt.state.version,ms=fi.getParameters(ke,Zt.state,p.state.shadowsArray,Et,Wt),Er=fi.getProgramCacheKey(ms);let Ro=xt.programs;xt.environment=ke.isMeshStandardMaterial?Et.environment:null,xt.fog=Et.fog,xt.envMap=(ke.isMeshStandardMaterial?qn:dn).get(ke.envMap||xt.environment),void 0===Ro&&(ke.addEventListener("dispose",at),Ro=new Map,xt.programs=Ro);let to=Ro.get(Er);if(void 0!==to){if(xt.currentProgram===to&&xt.lightsStateVersion===Mr)return lp(ke,ms),to}else ms.uniforms=fi.getUniforms(ke),ke.onBuild(Wt,ms,y),ke.onBeforeCompile(ms,y),to=fi.acquireProgram(ms,Er),Ro.set(Er,to),xt.uniforms=ms.uniforms;const no=xt.uniforms;(!ke.isShaderMaterial&&!ke.isRawShaderMaterial||!0===ke.clipping)&&(no.clippingPlanes=ve.uniform),lp(ke,ms),xt.needsLights=function Xu(ke){return ke.isMeshLambertMaterial||ke.isMeshToonMaterial||ke.isMeshPhongMaterial||ke.isMeshStandardMaterial||ke.isShadowMaterial||ke.isShaderMaterial&&!0===ke.lights}(ke),xt.lightsStateVersion=Mr,xt.needsLights&&(no.ambientLightColor.value=Zt.state.ambient,no.lightProbe.value=Zt.state.probe,no.directionalLights.value=Zt.state.directional,no.directionalLightShadows.value=Zt.state.directionalShadow,no.spotLights.value=Zt.state.spot,no.spotLightShadows.value=Zt.state.spotShadow,no.rectAreaLights.value=Zt.state.rectArea,no.ltc_1.value=Zt.state.rectAreaLTC1,no.ltc_2.value=Zt.state.rectAreaLTC2,no.pointLights.value=Zt.state.point,no.pointLightShadows.value=Zt.state.pointShadow,no.hemisphereLights.value=Zt.state.hemi,no.directionalShadowMap.value=Zt.state.directionalShadowMap,no.directionalShadowMatrix.value=Zt.state.directionalShadowMatrix,no.spotShadowMap.value=Zt.state.spotShadowMap,no.spotLightMatrix.value=Zt.state.spotLightMatrix,no.spotLightMap.value=Zt.state.spotLightMap,no.pointShadowMap.value=Zt.state.pointShadowMap,no.pointShadowMatrix.value=Zt.state.pointShadowMatrix);const Q1=to.getUniforms(),up=Gb.seqWithValue(Q1.seq,no);return xt.currentProgram=to,xt.uniformsList=up,to}function lp(ke,Et){const Wt=Ot.get(ke);Wt.outputEncoding=Et.outputEncoding,Wt.instancing=Et.instancing,Wt.skinning=Et.skinning,Wt.morphTargets=Et.morphTargets,Wt.morphNormals=Et.morphNormals,Wt.morphColors=Et.morphColors,Wt.morphTargetsCount=Et.morphTargetsCount,Wt.numClippingPlanes=Et.numClippingPlanes,Wt.numIntersection=Et.numClipIntersection,Wt.vertexAlphas=Et.vertexAlphas,Wt.vertexTangents=Et.vertexTangents,Wt.toneMapping=Et.toneMapping}Ya.setAnimationLoop(function Pn(ke){zn&&zn(ke)}),typeof self<"u"&&Ya.setContext(self),this.setAnimationLoop=function(ke){zn=ke,jn.setAnimationLoop(ke),null===ke?Ya.stop():Ya.start()},jn.addEventListener("sessionstart",gs),jn.addEventListener("sessionend",c2),this.render=function(ke,Et){if(void 0===Et||!0===Et.isCamera){if(!0!==w){if(!0===ke.matrixWorldAutoUpdate&&ke.updateMatrixWorld(),null===Et.parent&&!0===Et.matrixWorldAutoUpdate&&Et.updateMatrixWorld(),!0===jn.enabled&&!0===jn.isPresenting&&(!0===jn.cameraAutoUpdate&&jn.updateCamera(Et),Et=jn.getCamera()),!0===ke.isScene&&ke.onBeforeRender(y,ke,Et,M),p=ze.get(ke,_.length),p.init(),_.push(p),Ze.multiplyMatrices(Et.projectionMatrix,Et.matrixWorldInverse),oe.setFromProjectionMatrix(Ze),de=this.localClippingEnabled,fe=ve.init(this.clippingPlanes,de,Et),f=ls.get(ke,g.length),f.init(),g.push(f),V1(ke,Et,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(Te,me),!0===fe&&ve.beginShadows(),Tt.render(p.state.shadowsArray,ke,Et),!0===fe&&ve.endShadows(),!0===this.info.autoReset&&this.info.reset(),hn.render(f,ke),p.setupLights(y.physicallyCorrectLights),Et.isArrayCamera){const xt=Et.cameras;for(let Zt=0,Ki=xt.length;Zt<Ki;Zt++){const Mr=xt[Zt];Bo(f,ke,Mr,Mr.viewport)}}else Bo(f,ke,Et);null!==M&&(Rt.updateMultisampleRenderTarget(M),Rt.updateRenderTargetMipmap(M)),!0===ke.isScene&&ke.onAfterRender(y,ke,Et),Yt.resetDefaultState(),T=-1,I=null,_.pop(),p=_.length>0?_[_.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(ke,Et,Wt){Ot.get(ke.texture).__webglTexture=Et,Ot.get(ke.depthTexture).__webglTexture=Wt;const xt=Ot.get(ke);xt.__hasExternalTextures=!0,xt.__hasExternalTextures&&(xt.__autoAllocateDepthBuffer=void 0===Wt,xt.__autoAllocateDepthBuffer||!0===sn.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),xt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ke,Et){const Wt=Ot.get(ke);Wt.__webglFramebuffer=Et,Wt.__useDefaultFramebuffer=void 0===Et},this.setRenderTarget=function(ke,Et=0,Wt=0){M=ke,C=Et,b=Wt;let xt=!0;if(ke){const Er=Ot.get(ke);void 0!==Er.__useDefaultFramebuffer?(on.bindFramebuffer(36160,null),xt=!1):void 0===Er.__webglFramebuffer?Rt.setupRenderTarget(ke):Er.__hasExternalTextures&&Rt.rebindTextures(ke,Ot.get(ke.texture).__webglTexture,Ot.get(ke.depthTexture).__webglTexture)}let Zt=null,Ki=!1,Mr=!1;if(ke){const Er=ke.texture;(Er.isData3DTexture||Er.isDataArrayTexture)&&(Mr=!0);const Ro=Ot.get(ke).__webglFramebuffer;ke.isWebGLCubeRenderTarget?(Zt=Ro[Et],Ki=!0):Zt=Sn.isWebGL2&&ke.samples>0&&!1===Rt.useMultisampledRTT(ke)?Ot.get(ke).__webglMultisampledFramebuffer:Ro,F.copy(ke.viewport),P.copy(ke.scissor),R=ke.scissorTest}else F.copy(Q).multiplyScalar(ie).floor(),P.copy(he).multiplyScalar(ie).floor(),R=K;if(on.bindFramebuffer(36160,Zt)&&Sn.drawBuffers&&xt&&on.drawBuffers(ke,Zt),on.viewport(F),on.scissor(P),on.setScissorTest(R),Ki){const Er=Ot.get(ke.texture);bt.framebufferTexture2D(36160,36064,34069+Et,Er.__webglTexture,Wt)}else if(Mr){const Er=Ot.get(ke.texture);bt.framebufferTextureLayer(36160,36064,Er.__webglTexture,Wt||0,Et||0)}T=-1},this.readRenderTargetPixels=function(ke,Et,Wt,xt,Zt,Ki,Mr){if(!ke||!ke.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ms=Ot.get(ke).__webglFramebuffer;if(ke.isWebGLCubeRenderTarget&&void 0!==Mr&&(ms=ms[Mr]),ms){on.bindFramebuffer(36160,ms);try{const Er=ke.texture,Ro=Er.format,to=Er.type;if(Ro!==Du&&Le.convert(Ro)!==bt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const no=to===P0&&(sn.has("EXT_color_buffer_half_float")||Sn.isWebGL2&&sn.has("EXT_color_buffer_float"));if(!(to===W8||Le.convert(to)===bt.getParameter(35738)||to===L4&&(Sn.isWebGL2||sn.has("OES_texture_float")||sn.has("WEBGL_color_buffer_float"))||no))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Et>=0&&Et<=ke.width-xt&&Wt>=0&&Wt<=ke.height-Zt&&bt.readPixels(Et,Wt,xt,Zt,Le.convert(Ro),Le.convert(to),Ki)}finally{const Er=null!==M?Ot.get(M).__webglFramebuffer:null;on.bindFramebuffer(36160,Er)}}},this.copyFramebufferToTexture=function(ke,Et,Wt=0){const xt=Math.pow(2,-Wt),Zt=Math.floor(Et.image.width*xt),Ki=Math.floor(Et.image.height*xt);Rt.setTexture2D(Et,0),bt.copyTexSubImage2D(3553,Wt,0,0,ke.x,ke.y,Zt,Ki),on.unbindTexture()},this.copyTextureToTexture=function(ke,Et,Wt,xt=0){const Zt=Et.image.width,Ki=Et.image.height,Mr=Le.convert(Wt.format),ms=Le.convert(Wt.type);Rt.setTexture2D(Wt,0),bt.pixelStorei(37440,Wt.flipY),bt.pixelStorei(37441,Wt.premultiplyAlpha),bt.pixelStorei(3317,Wt.unpackAlignment),Et.isDataTexture?bt.texSubImage2D(3553,xt,ke.x,ke.y,Zt,Ki,Mr,ms,Et.image.data):Et.isCompressedTexture?bt.compressedTexSubImage2D(3553,xt,ke.x,ke.y,Et.mipmaps[0].width,Et.mipmaps[0].height,Mr,Et.mipmaps[0].data):bt.texSubImage2D(3553,xt,ke.x,ke.y,Mr,ms,Et.image),0===xt&&Wt.generateMipmaps&&bt.generateMipmap(3553),on.unbindTexture()},this.copyTextureToTexture3D=function(ke,Et,Wt,xt,Zt=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ki=ke.max.x-ke.min.x+1,Mr=ke.max.y-ke.min.y+1,ms=ke.max.z-ke.min.z+1,Er=Le.convert(xt.format),Ro=Le.convert(xt.type);let to;if(xt.isData3DTexture)Rt.setTexture3D(xt,0),to=32879;else{if(!xt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Rt.setTexture2DArray(xt,0),to=35866}bt.pixelStorei(37440,xt.flipY),bt.pixelStorei(37441,xt.premultiplyAlpha),bt.pixelStorei(3317,xt.unpackAlignment);const no=bt.getParameter(3314),Q1=bt.getParameter(32878),up=bt.getParameter(3316),Lm=bt.getParameter(3315),Dm=bt.getParameter(32877),ih=Wt.isCompressedTexture?Wt.mipmaps[0]:Wt.image;bt.pixelStorei(3314,ih.width),bt.pixelStorei(32878,ih.height),bt.pixelStorei(3316,ke.min.x),bt.pixelStorei(3315,ke.min.y),bt.pixelStorei(32877,ke.min.z),Wt.isDataTexture||Wt.isData3DTexture?bt.texSubImage3D(to,Zt,Et.x,Et.y,Et.z,Ki,Mr,ms,Er,Ro,ih.data):Wt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),bt.compressedTexSubImage3D(to,Zt,Et.x,Et.y,Et.z,Ki,Mr,ms,Er,ih.data)):bt.texSubImage3D(to,Zt,Et.x,Et.y,Et.z,Ki,Mr,ms,Er,Ro,ih),bt.pixelStorei(3314,no),bt.pixelStorei(32878,Q1),bt.pixelStorei(3316,up),bt.pixelStorei(3315,Lm),bt.pixelStorei(32877,Dm),0===Zt&&xt.generateMipmaps&&bt.generateMipmap(to),on.unbindTexture()},this.initTexture=function(ke){ke.isCubeTexture?Rt.setTextureCube(ke,0):ke.isData3DTexture?Rt.setTexture3D(ke,0):ke.isDataArrayTexture?Rt.setTexture2DArray(ke,0):Rt.setTexture2D(ke,0),on.unbindTexture()},this.resetState=function(){C=0,b=0,M=null,on.reset(),Yt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class VNe extends ote{}).prototype.isWebGL1Renderer=!0;class Qb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Dn(e),this.near=t,this.far=i}clone(){return new Qb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class ate extends Mc{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class ek{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=G3()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=G3()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=G3()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fl=new ge;class l5{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Fl.fromBufferAttribute(this,t),Fl.applyMatrix4(e),this.setXYZ(t,Fl.x,Fl.y,Fl.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Fl.fromBufferAttribute(this,t),Fl.applyNormalMatrix(e),this.setXYZ(t,Fl.x,Fl.y,Fl.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Fl.fromBufferAttribute(this,t),Fl.transformDirection(e),this.setXYZ(t,Fl.x,Fl.y,Fl.z);return this}setX(e,t){return this.normalized&&(t=sa(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=sa(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=sa(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=sa(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Wh(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Wh(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Wh(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Wh(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=sa(t,this.array),i=sa(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=sa(t,this.array),i=sa(i,this.array),r=sa(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=sa(t,this.array),i=sa(i,this.array),r=sa(r,this.array),s=sa(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Wa(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new l5(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const dte=new ge,pte=new yo,gte=new yo,QNe=new ge,mte=new Vi;class Ate extends Ys{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Vi,this.bindMatrixInverse=new Vi}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yo,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;pte.fromBufferAttribute(r.attributes.skinIndex,e),gte.fromBufferAttribute(r.attributes.skinWeight,e),dte.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=gte.getComponent(s);if(0!==o){const a=pte.getComponent(s);mte.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(QNe.copy(dte).applyMatrix4(mte),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class nk extends Mc{constructor(){super(),this.isBone=!0,this.type="Bone"}}class gg extends D4{constructor(e=null,t=1,i=1,r,s,o,a,c,l=B1,u=B1,f,p){super(null,o,a,c,l,u,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vte=new Vi,WNe=new Vi;class Kb{constructor(e=[],t=[]){this.uuid=G3(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Vi)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Vi;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)vte.multiplyMatrices(e[s]?e[s].matrixWorld:WNe,t[s]),vte.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Kb(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=dee(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new gg(t,e,e,Du,L4);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new nk),this.bones.push(o),this.boneInverses.push((new Vi).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class oc extends Yc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const wte=new ge,Cte=new ge,xte=new Vi,ik=new Eb,Yb=new s5;class Nd extends Mc{constructor(e=new vr,t=new oc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)wte.fromBufferAttribute(t,r-1),Cte.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=wte.distanceTo(Cte);e.setAttribute("lineDistance",new ai(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Yb.copy(i.boundingSphere),Yb.applyMatrix4(r),Yb.radius+=s,!1===e.ray.intersectsSphere(Yb))return;xte.copy(r).invert(),ik.copy(e.ray).applyMatrix4(xte);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new ge,u=new ge,f=new ge,p=new ge,g=this.isLineSegments?2:1,_=i.index,w=i.attributes.position;if(null!==_)for(let M=Math.max(0,o.start),T=Math.min(_.count,o.start+o.count)-1;M<T;M+=g){const I=_.getX(M),F=_.getX(M+1);if(l.fromBufferAttribute(w,I),u.fromBufferAttribute(w,F),ik.distanceSqToSegment(l,u,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(p);R<e.near||R>e.far||t.push({distance:R,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}else for(let M=Math.max(0,o.start),T=Math.min(w.count,o.start+o.count)-1;M<T;M+=g){if(l.fromBufferAttribute(w,M),u.fromBufferAttribute(w,M+1),ik.distanceSqToSegment(l,u,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(p);F<e.near||F>e.far||t.push({distance:F,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const bte=new ge,Mte=new ge;class mg extends Nd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)bte.fromBufferAttribute(t,r),Mte.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+bte.distanceTo(Mte);e.setAttribute("lineDistance",new ai(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ste extends Nd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class u5 extends Yc{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Ete=new Vi,rk=new Eb,Zb=new s5,Jb=new ge;class dv extends Mc{constructor(e=new vr,t=new u5){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Zb.copy(i.boundingSphere),Zb.applyMatrix4(r),Zb.radius+=s,!1===e.ray.intersectsSphere(Zb))return;Ete.copy(r).invert(),rk.copy(e.ray).applyMatrix4(Ete);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,f=i.attributes.position;if(null!==l)for(let _=Math.max(0,o.start),y=Math.min(l.count,o.start+o.count);_<y;_++){const w=l.getX(_);Jb.fromBufferAttribute(f,w),Tte(Jb,w,c,r,e,t,this)}else for(let _=Math.max(0,o.start),y=Math.min(f.count,o.start+o.count);_<y;_++)Jb.fromBufferAttribute(f,_),Tte(Jb,_,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Tte(n,e,t,i,r,s,o){const a=rk.distanceSqToPoint(n);if(a<t){const c=new ge;rk.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class O0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let l,a=0,c=s-1;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-o,l<0)a=r+1;else{if(!(l>0)){c=r;break}c=r-1}if(r=c,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new Qt:new ge);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ge,r=[],s=[],o=[],a=new ge,c=new Vi;for(let g=0;g<=e;g++)r[g]=this.getTangentAt(g/e,new ge);s[0]=new ge,o[0]=new ge;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),f<=l&&(l=f,i.set(0,1,0)),p<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(e2(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(c.makeRotationAxis(a,_))}o[g].crossVectors(r[g],s[g])}if(!0===t){let g=Math.acos(e2(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(r[_],g*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class sk extends O0{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const i=t||new Qt,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=c-this.aX,g=l-this.aY;c=p*u-g*f+this.aX,l=p*f+g*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function ok(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,f){let p=(o-s)/l-(a-s)/(l+u)+(a-o)/u,g=(a-o)/u-(c-o)/(u+f)+(c-a)/f;p*=u,g*=u,r(o,a,p,g)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}const eM=new ge,ak=new ok,ck=new ok,lk=new ok;function Lte(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function pv(n,e,t,i){return function XNe(n,e){const t=1-n;return t*t*e}(n,e)+function YNe(n,e){return 2*(1-n)*n*e}(n,t)+function ZNe(n,e){return n*n*e}(n,i)}function gv(n,e,t,i,r){return function JNe(n,e){const t=1-n;return t*t*t*e}(n,e)+function eVe(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function tVe(n,e){return 3*(1-n)*n*n*e}(n,i)+function nVe(n,e){return n*n*n*e}(n,r)}class Dte extends O0{constructor(e=new Qt,t=new Qt,i=new Qt,r=new Qt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Qt){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(gv(e,r.x,s.x,o.x,a.x),gv(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uk extends O0{constructor(e=new Qt,t=new Qt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Qt){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Qt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ite extends O0{constructor(e=new Qt,t=new Qt,i=new Qt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Qt){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(pv(e,r.x,s.x,o.x),pv(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Rte extends O0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Qt){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(Lte(a,c.x,l.x,u.x,f.x),Lte(a,c.y,l.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new Qt).fromArray(r))}return this}}var hk=Object.freeze({__proto__:null,ArcCurve:class qNe extends sk{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class KNe extends O0{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ge){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l,u,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===c&&a===s-1&&(a=s-2,c=1),this.closed||a>0?l=r[(a-1)%s]:(eM.subVectors(r[0],r[1]).add(r[0]),l=eM);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(eM.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=eM),"centripetal"===this.curveType||"chordal"===this.curveType){const g="chordal"===this.curveType?.5:.25;let _=Math.pow(l.distanceToSquared(f),g),y=Math.pow(f.distanceToSquared(p),g),w=Math.pow(p.distanceToSquared(u),g);y<1e-4&&(y=1),_<1e-4&&(_=y),w<1e-4&&(w=y),ak.initNonuniformCatmullRom(l.x,f.x,p.x,u.x,_,y,w),ck.initNonuniformCatmullRom(l.y,f.y,p.y,u.y,_,y,w),lk.initNonuniformCatmullRom(l.z,f.z,p.z,u.z,_,y,w)}else"catmullrom"===this.curveType&&(ak.initCatmullRom(l.x,f.x,p.x,u.x,this.tension),ck.initCatmullRom(l.y,f.y,p.y,u.y,this.tension),lk.initCatmullRom(l.z,f.z,p.z,u.z,this.tension));return i.set(ak.calc(c),ck.calc(c),lk.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new ge).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Dte,CubicBezierCurve3:class iVe extends O0{constructor(e=new ge,t=new ge,i=new ge,r=new ge){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ge){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(gv(e,r.x,s.x,o.x,a.x),gv(e,r.y,s.y,o.y,a.y),gv(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:sk,LineCurve:uk,LineCurve3:class rVe extends O0{constructor(e=new ge,t=new ge){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ge){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Ite,QuadraticBezierCurve3:class Bte extends O0{constructor(e=new ge,t=new ge,i=new ge){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ge){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(pv(e,r.x,s.x,o.x),pv(e,r.y,s.y,o.y),pv(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:Rte});class sVe extends O0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new uk(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],c=a.getLength();return a.getPointAt(0===c?0:1-o/c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],c=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let l=0;l<c.length;l++){const u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new hk[r.type]).fromJSON(r))}return this}}class tM extends sVe{constructor(e){super(),this.type="Path",this.currentPoint=new Qt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new uk(this.currentPoint.clone(),new Qt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Ite(this.currentPoint.clone(),new Qt(e,t),new Qt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new Dte(this.currentPoint.clone(),new Qt(e,t),new Qt(i,r),new Qt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Rte(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){const l=new sk(e,t,i,r,s,o,a,c);if(this.curves.length>0){const f=l.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Vd extends tM{constructor(e){super(e),this.uuid=G3(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new tM).fromJSON(r))}return this}}function Fte(n,e,t,i,r){let s,o;if(r===function xVe(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=Hte(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=Hte(s,n[s],n[s+1],o);return o&&oM(o,o.next)&&(_v(o),o=o.next),o}function Ud(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!oM(t,t.next)&&0!==u1(t.prev,t,t.next))t=t.next;else{if(_v(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function Av(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function AVe(n,e,t,i){let r=n;do{null===r.z&&(r.z=Ak(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function vVe(n){let e,t,i,r,s,o,a,c,l=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<l&&(a++,i=i.nextZ,i);e++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,l*=2}while(o>1)}(r)}(n,i,r,s);let c,l,a=n;for(;n.prev!==n.next;)if(c=n.prev,l=n.next,s?lVe(n,i,r,s):cVe(n))e.push(c.i/t),e.push(n.i/t),e.push(l.i/t),_v(n),n=l.next,a=l.next;else if((n=l)===a){o?1===o?Av(n=uVe(Ud(n),e,t),e,t,i,r,s,2):2===o&&hVe(n,e,t,i,r,s):Av(Ud(n),e,t,i,r,s,1);break}}function cVe(n){const e=n.prev,t=n,i=n.next;if(u1(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Ag(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&u1(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function lVe(n,e,t,i){const r=n.prev,s=n,o=n.next;if(u1(r,s,o)>=0)return!1;const l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,f=Ak(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,i),p=Ak(l,u,e,t,i);let g=n.prevZ,_=n.nextZ;for(;g&&g.z>=f&&_&&_.z<=p;){if(g!==n.prev&&g!==n.next&&Ag(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&u1(g.prev,g,g.next)>=0||(g=g.prevZ,_!==n.prev&&_!==n.next&&Ag(r.x,r.y,s.x,s.y,o.x,o.y,_.x,_.y)&&u1(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;g&&g.z>=f;){if(g!==n.prev&&g!==n.next&&Ag(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&u1(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;_&&_.z<=p;){if(_!==n.prev&&_!==n.next&&Ag(r.x,r.y,s.x,s.y,o.x,o.y,_.x,_.y)&&u1(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function uVe(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!oM(r,s)&&kte(r,i,i.next,s)&&vv(r,s)&&vv(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),_v(i),_v(i.next),i=n=s),i=i.next}while(i!==n);return Ud(i)}function hVe(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&yVe(o,a)){let c=Pte(o,a);return o=Ud(o,o.next),c=Ud(c,c.next),Av(o,e,t,i,r,s),void Av(c,e,t,i,r,s)}a=a.next}o=o.next}while(o!==n)}function dVe(n,e){return n.x-e.x}function pVe(n,e){if(e=function gVe(n,e){let t=e;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=i&&p>s){if(s=p,p===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,c=o.x,l=o.y;let f,u=1/0;t=o;do{i>=t.x&&t.x>=c&&i!==t.x&&Ag(r<l?i:s,r,c,l,r<l?s:i,r,t.x,t.y)&&(f=Math.abs(r-t.y)/(i-t.x),vv(t,n)&&(f<u||f===u&&(t.x>o.x||t.x===o.x&&mVe(o,t)))&&(o=t,u=f)),t=t.next}while(t!==a);return o}(n,e),e){const t=Pte(e,n);Ud(e,e.next),Ud(t,t.next)}}function mVe(n,e){return u1(n.prev,n,e.prev)<0&&u1(e.next,n,n.next)<0}function Ak(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function _Ve(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function Ag(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function yVe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function wVe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&kte(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(vv(n,e)&&vv(e,n)&&function CVe(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(u1(n.prev,n,e.prev)||u1(n,e.prev,e))||oM(n,e)&&u1(n.prev,n,n.next)>0&&u1(e.prev,e,e.next)>0)}function u1(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function oM(n,e){return n.x===e.x&&n.y===e.y}function kte(n,e,t,i){const r=cM(u1(n,e,t)),s=cM(u1(n,e,i)),o=cM(u1(t,i,n)),a=cM(u1(t,i,e));return!!(r!==s&&o!==a||0===r&&aM(n,t,e)||0===s&&aM(n,i,e)||0===o&&aM(t,n,i)||0===a&&aM(t,e,i))}function aM(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function cM(n){return n>0?1:n<0?-1:0}function vv(n,e){return u1(n.prev,n,n.next)<0?u1(n,e,n.next)>=0&&u1(n,n.prev,e)>=0:u1(n,e,n.prev)<0||u1(n,n.next,e)<0}function Pte(n,e){const t=new vk(n.i,n.x,n.y),i=new vk(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Hte(n,e,t,i){const r=new vk(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function _v(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function vk(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Yh{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return Yh.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];zte(e),Ote(i,e);let o=e.length;t.forEach(zte);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,Ote(i,t[c]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=Fte(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l,u,f,p,g;if(i&&(s=function fVe(n,e,t,i){const r=[];let s,o,a,c,l;for(s=0,o=e.length;s<o;s++)a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=Fte(n,a,c,i,!1),l===l.next&&(l.steiner=!0),r.push(_Ve(l));for(r.sort(dVe),s=0;s<r.length;s++)pVe(r[s],t),t=Ud(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=l=n[0],c=u=n[1];for(let _=t;_<r;_+=t)f=n[_],p=n[_+1],f<a&&(a=f),p<c&&(c=p),f>l&&(l=f),p>u&&(u=p);g=Math.max(l-a,u-c),g=0!==g?1/g:0}return Av(s,o,t,a,c,g),o}(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function zte(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Ote(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class lM extends vr{constructor(e=new Vd([new Qt(.5,.5),new Qt(-.5,.5),new Qt(-.5,-.5),new Qt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++)o(e[a]);function o(a){const c=[],l=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,f=void 0!==t.depth?t.depth:1;let p=void 0===t.bevelEnabled||t.bevelEnabled,g=void 0!==t.bevelThickness?t.bevelThickness:.2,_=void 0!==t.bevelSize?t.bevelSize:g-.1,y=void 0!==t.bevelOffset?t.bevelOffset:0,w=void 0!==t.bevelSegments?t.bevelSegments:3;const C=t.extrudePath,b=void 0!==t.UVGenerator?t.UVGenerator:bVe;let M,I,F,P,R,T=!1;C&&(M=C.getSpacedPoints(u),T=!0,p=!1,I=C.computeFrenetFrames(u,!1),F=new ge,P=new ge,R=new ge),p||(w=0,g=0,_=0,y=0);const k=a.extractPoints(l);let W=k.shape;const ie=k.holes;if(!Yh.isClockWise(W)){W=W.reverse();for(let Ot=0,Rt=ie.length;Ot<Rt;Ot++){const dn=ie[Ot];Yh.isClockWise(dn)&&(ie[Ot]=dn.reverse())}}const me=Yh.triangulateShape(W,ie),Q=W;for(let Ot=0,Rt=ie.length;Ot<Rt;Ot++)W=W.concat(ie[Ot]);function he(Ot,Rt,dn){return Rt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Rt.clone().multiplyScalar(dn).add(Ot)}const K=W.length,oe=me.length;function fe(Ot,Rt,dn){let qn,En,Cn;const Un=Ot.x-Rt.x,fi=Ot.y-Rt.y,ar=dn.x-Ot.x,ls=dn.y-Ot.y,ze=Un*Un+fi*fi;if(Math.abs(Un*ls-fi*ar)>Number.EPSILON){const Tt=Math.sqrt(ze),hn=Math.sqrt(ar*ar+ls*ls),xn=Rt.x-fi/Tt,In=Rt.y+Un/Tt,Yt=((dn.x-ls/hn-xn)*ls-(dn.y+ar/hn-In)*ar)/(Un*ls-fi*ar);qn=xn+Un*Yt-Ot.x,En=In+fi*Yt-Ot.y;const an=qn*qn+En*En;if(an<=2)return new Qt(qn,En);Cn=Math.sqrt(an/2)}else{let Tt=!1;Un>Number.EPSILON?ar>Number.EPSILON&&(Tt=!0):Un<-Number.EPSILON?ar<-Number.EPSILON&&(Tt=!0):Math.sign(fi)===Math.sign(ls)&&(Tt=!0),Tt?(qn=-fi,En=Un,Cn=Math.sqrt(ze)):(qn=Un,En=fi,Cn=Math.sqrt(ze/2))}return new Qt(qn/Cn,En/Cn)}const de=[];for(let Ot=0,Rt=Q.length,dn=Rt-1,qn=Ot+1;Ot<Rt;Ot++,dn++,qn++)dn===Rt&&(dn=0),qn===Rt&&(qn=0),de[Ot]=fe(Q[Ot],Q[dn],Q[qn]);const Re=[];let Ze,Be=de.concat();for(let Ot=0,Rt=ie.length;Ot<Rt;Ot++){const dn=ie[Ot];Ze=[];for(let qn=0,En=dn.length,Cn=En-1,Un=qn+1;qn<En;qn++,Cn++,Un++)Cn===En&&(Cn=0),Un===En&&(Un=0),Ze[qn]=fe(dn[qn],dn[Cn],dn[Un]);Re.push(Ze),Be=Be.concat(Ze)}for(let Ot=0;Ot<w;Ot++){const Rt=Ot/w,dn=g*Math.cos(Rt*Math.PI/2),qn=_*Math.sin(Rt*Math.PI/2)+y;for(let En=0,Cn=Q.length;En<Cn;En++){const Un=he(Q[En],de[En],qn);Xt(Un.x,Un.y,-dn)}for(let En=0,Cn=ie.length;En<Cn;En++){const Un=ie[En];Ze=Re[En];for(let fi=0,ar=Un.length;fi<ar;fi++){const ls=he(Un[fi],Ze[fi],qn);Xt(ls.x,ls.y,-dn)}}}const wt=_+y;for(let Ot=0;Ot<K;Ot++){const Rt=p?he(W[Ot],Be[Ot],wt):W[Ot];T?(P.copy(I.normals[0]).multiplyScalar(Rt.x),F.copy(I.binormals[0]).multiplyScalar(Rt.y),R.copy(M[0]).add(P).add(F),Xt(R.x,R.y,R.z)):Xt(Rt.x,Rt.y,0)}for(let Ot=1;Ot<=u;Ot++)for(let Rt=0;Rt<K;Rt++){const dn=p?he(W[Rt],Be[Rt],wt):W[Rt];T?(P.copy(I.normals[Ot]).multiplyScalar(dn.x),F.copy(I.binormals[Ot]).multiplyScalar(dn.y),R.copy(M[Ot]).add(P).add(F),Xt(R.x,R.y,R.z)):Xt(dn.x,dn.y,f/u*Ot)}for(let Ot=w-1;Ot>=0;Ot--){const Rt=Ot/w,dn=g*Math.cos(Rt*Math.PI/2),qn=_*Math.sin(Rt*Math.PI/2)+y;for(let En=0,Cn=Q.length;En<Cn;En++){const Un=he(Q[En],de[En],qn);Xt(Un.x,Un.y,f+dn)}for(let En=0,Cn=ie.length;En<Cn;En++){const Un=ie[En];Ze=Re[En];for(let fi=0,ar=Un.length;fi<ar;fi++){const ls=he(Un[fi],Ze[fi],qn);T?Xt(ls.x,ls.y+M[u-1].y,M[u-1].x+dn):Xt(ls.x,ls.y,f+dn)}}}function bt(Ot,Rt){let dn=Ot.length;for(;--dn>=0;){const qn=dn;let En=dn-1;En<0&&(En=Ot.length-1);for(let Cn=0,Un=u+2*w;Cn<Un;Cn++){const fi=K*Cn,ar=K*(Cn+1);Sn(Rt+qn+fi,Rt+En+fi,Rt+En+ar,Rt+qn+ar)}}}function Xt(Ot,Rt,dn){c.push(Ot),c.push(Rt),c.push(dn)}function sn(Ot,Rt,dn){on(Ot),on(Rt),on(dn);const qn=r.length/3,En=b.generateTopUV(i,r,qn-3,qn-2,qn-1);Ti(En[0]),Ti(En[1]),Ti(En[2])}function Sn(Ot,Rt,dn,qn){on(Ot),on(Rt),on(qn),on(Rt),on(dn),on(qn);const En=r.length/3,Cn=b.generateSideWallUV(i,r,En-6,En-3,En-2,En-1);Ti(Cn[0]),Ti(Cn[1]),Ti(Cn[3]),Ti(Cn[1]),Ti(Cn[2]),Ti(Cn[3])}function on(Ot){r.push(c[3*Ot+0]),r.push(c[3*Ot+1]),r.push(c[3*Ot+2])}function Ti(Ot){s.push(Ot.x),s.push(Ot.y)}(function ut(){const Ot=r.length/3;if(p){let Rt=0,dn=K*Rt;for(let qn=0;qn<oe;qn++){const En=me[qn];sn(En[2]+dn,En[1]+dn,En[0]+dn)}Rt=u+2*w,dn=K*Rt;for(let qn=0;qn<oe;qn++){const En=me[qn];sn(En[0]+dn,En[1]+dn,En[2]+dn)}}else{for(let Rt=0;Rt<oe;Rt++){const dn=me[Rt];sn(dn[2],dn[1],dn[0])}for(let Rt=0;Rt<oe;Rt++){const dn=me[Rt];sn(dn[0]+K*u,dn[1]+K*u,dn[2]+K*u)}}i.addGroup(Ot,r.length/3-Ot,0)})(),function It(){const Ot=r.length/3;let Rt=0;bt(Q,Rt),Rt+=Q.length;for(let dn=0,qn=ie.length;dn<qn;dn++){const En=ie[dn];bt(En,Rt),Rt+=En.length}i.addGroup(Ot,r.length/3-Ot,1)}()}this.setAttribute("position",new ai(r,3)),this.setAttribute("uv",new ai(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function MVe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new hk[r.type]).fromJSON(r)),new lM(i,e.options)}}const bVe={generateTopUV:function(n,e,t,i,r){const a=e[3*i],c=e[3*i+1],l=e[3*r],u=e[3*r+1];return[new Qt(e[3*t],e[3*t+1]),new Qt(a,c),new Qt(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],c=e[3*t+2],l=e[3*i],u=e[3*i+1],f=e[3*i+2],p=e[3*r],g=e[3*r+1],_=e[3*r+2],y=e[3*s],w=e[3*s+1],C=e[3*s+2];return Math.abs(a-u)<Math.abs(o-l)?[new Qt(o,1-c),new Qt(l,1-f),new Qt(p,1-_),new Qt(y,1-C)]:[new Qt(a,1-c),new Qt(u,1-f),new Qt(g,1-_),new Qt(w,1-C)]}};class hM extends vr{constructor(e=new Vd([new Qt(0,.5),new Qt(-.5,-.5),new Qt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,c=0;if(!1===Array.isArray(e))l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,c,u),a+=c,c=0;function l(u){const f=r.length/3,p=u.extractPoints(t);let g=p.shape;const _=p.holes;!1===Yh.isClockWise(g)&&(g=g.reverse());for(let w=0,C=_.length;w<C;w++){const b=_[w];!0===Yh.isClockWise(b)&&(_[w]=b.reverse())}const y=Yh.triangulateShape(g,_);for(let w=0,C=_.length;w<C;w++)g=g.concat(_[w]);for(let w=0,C=g.length;w<C;w++){const b=g[w];r.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let w=0,C=y.length;w<C;w++){const b=y[w];i.push(b[0]+f,b[1]+f,b[2]+f),c+=3}}this.setIndex(i),this.setAttribute("position",new ai(r,3)),this.setAttribute("normal",new ai(s,3)),this.setAttribute("uv",new ai(o,2))}toJSON(){const e=super.toJSON();return function SVe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++)i.push(t[e.shapes[r]]);return new hM(i,e.curveSegments)}}class yv extends vr{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+a,Math.PI);let l=0;const u=[],f=new ge,p=new ge,g=[],_=[],y=[],w=[];for(let C=0;C<=i;C++){const b=[],M=C/i;let T=0;0==C&&0==o?T=.5/t:C==i&&c==Math.PI&&(T=-.5/t);for(let I=0;I<=t;I++){const F=I/t;f.x=-e*Math.cos(r+F*s)*Math.sin(o+M*a),f.y=e*Math.cos(o+M*a),f.z=e*Math.sin(r+F*s)*Math.sin(o+M*a),_.push(f.x,f.y,f.z),p.copy(f).normalize(),y.push(p.x,p.y,p.z),w.push(F+T,1-M),b.push(l++)}u.push(b)}for(let C=0;C<i;C++)for(let b=0;b<t;b++){const M=u[C][b+1],T=u[C][b],I=u[C+1][b],F=u[C+1][b+1];(0!==C||o>0)&&g.push(M,T,F),(C!==i-1||c<Math.PI)&&g.push(T,I,F)}this.setIndex(g),this.setAttribute("position",new ai(_,3)),this.setAttribute("normal",new ai(y,3)),this.setAttribute("uv",new ai(w,2))}static fromJSON(e){return new yv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wv extends Yc{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Dn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zh extends wv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return e2(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Dn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Ute extends Yc{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dn(16777215),this.specular=new Dn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mk extends Yc{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Ma extends Yc{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function R4(n,e,t){return Sk(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function f5(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function Sk(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Gte(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function Ek(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function Tk(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class Cv{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class kVe extends Cv{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,g=this._weightNext,_=(i-t)/(r-t),y=_*_,w=y*_,C=-p*w+2*p*y-p*_,b=(1+p)*w+(-1.5-2*p)*y+(-.5+p)*_+1,M=(-1-g)*w+(1.5+g)*y+.5*_,T=g*w-g*y;for(let I=0;I!==a;++I)s[I]=C*o[u+I]+b*o[l+I]+M*o[c+I]+T*o[f+I];return s}}class Qte extends Cv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),f=1-u;for(let p=0;p!==a;++p)s[p]=o[l+p]*f+o[c+p]*u;return s}}class PVe extends Cv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class N0{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=f5(t,this.TimeBufferType),this.values=f5(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:f5(e.times,Array),values:f5(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new PVe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Qte(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new kVe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ev:t=this.InterpolantFactoryMethodDiscrete;break;case G7:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ev;case this.InterpolantFactoryMethodLinear:return G7;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=R4(i,s,o),this.values=R4(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&Sk(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=R4(this.times),t=R4(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const f=a*i,p=f-i,g=f+i;for(let _=0;_!==i;++_){const y=t[f+_];if(y!==t[p+_]||y!==t[g+_]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let g=0;g!==i;++g)t[p+g]=t[f+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=R4(e,0,o),this.values=R4(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=R4(this.times,0),t=R4(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}N0.prototype.TimeBufferType=Float32Array,N0.prototype.ValueBufferType=Float32Array,N0.prototype.DefaultInterpolation=G7;class vg extends N0{}vg.prototype.ValueTypeName="bool",vg.prototype.ValueBufferType=Array,vg.prototype.DefaultInterpolation=ev,vg.prototype.InterpolantFactoryMethodLinear=void 0,vg.prototype.InterpolantFactoryMethodSmooth=void 0;class Wte extends N0{}Wte.prototype.ValueTypeName="color";class xv extends N0{}xv.prototype.ValueTypeName="number";class HVe extends Cv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)bc.slerpFlat(s,0,o,l-a,o,l,c);return s}}class d5 extends N0{InterpolantFactoryMethodLinear(e){return new HVe(this.times,this.values,this.getValueSize(),e)}}d5.prototype.ValueTypeName="quaternion",d5.prototype.DefaultInterpolation=G7,d5.prototype.InterpolantFactoryMethodSmooth=void 0;class _g extends N0{}_g.prototype.ValueTypeName="string",_g.prototype.ValueBufferType=Array,_g.prototype.DefaultInterpolation=ev,_g.prototype.InterpolantFactoryMethodLinear=void 0,_g.prototype.InterpolantFactoryMethodSmooth=void 0;class bv extends N0{}bv.prototype.ValueTypeName="vector";class Mv{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=G3(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(OVe(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(N0.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=Gte(c);c=Ek(c,1,u),l=Ek(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),o.push(new xv(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const f=u[1];let p=r[f];p||(r[f]=p=[]),p.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,g,_,y){if(0!==g.length){const w=[],C=[];Tk(g,w,C,_),0!==w.length&&y.push(new f(p,w,C))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let f=0;f<l.length;f++){const p=l[f].keys;if(p&&0!==p.length)if(p[0].morphTargets){const g={};let _;for(_=0;_<p.length;_++)if(p[_].morphTargets)for(let y=0;y<p[_].morphTargets.length;y++)g[p[_].morphTargets[y]]=-1;for(const y in g){const w=[],C=[];for(let b=0;b!==p[_].morphTargets.length;++b){const M=p[_];w.push(M.time),C.push(M.morphTarget===y?1:0)}r.push(new xv(".morphTargetInfluence["+y+"]",w,C))}c=g.length*o}else{const g=".bones["+t[f].name+"]";i(bv,g+".position",p,"pos",r),i(d5,g+".quaternion",p,"rot",r),i(bv,g+".scale",p,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function OVe(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function zVe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xv;case"vector":case"vector2":case"vector3":case"vector4":return bv;case"color":return Wte;case"quaternion":return d5;case"bool":case"boolean":return vg;case"string":return _g}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];Tk(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const yg={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class jte{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,f){return l.push(u,f),this},this.removeHandler=function(u){const f=l.indexOf(u);return-1!==f&&l.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=l.length;f<p;f+=2){const g=l[f],_=l[f+1];if(g.global&&(g.lastIndex=0),g.test(u))return _}return null}}}const Sv=new jte;class p5{constructor(e){this.manager=void 0!==e?e:Sv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Jh={};class NVe extends Error{constructor(e,t){super(e),this.response=t}}class Hu extends p5{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=yg.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Jh[e])return void Jh[e].push({onLoad:t,onProgress:i,onError:r});Jh[e]=[],Jh[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=Jh[e],f=l.body.getReader(),p=l.headers.get("Content-Length"),g=p?parseInt(p):0,_=0!==g;let y=0;const w=new ReadableStream({start(C){!function b(){f.read().then(({done:M,value:T})=>{if(M)C.close();else{y+=T.byteLength;const I=new ProgressEvent("progress",{lengthComputable:_,loaded:y,total:g});for(let F=0,P=u.length;F<P;F++){const R=u[F];R.onProgress&&R.onProgress(I)}C.enqueue(T),b()}})}()}});return new Response(w)}throw new NVe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(p);return l.arrayBuffer().then(_=>g.decode(_))}}}).then(l=>{yg.add(e,l);const u=Jh[e];delete Jh[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onLoad&&g.onLoad(l)}}).catch(l=>{const u=Jh[e];if(void 0===u)throw this.manager.itemError(e),l;delete Jh[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onError&&g.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class fM extends p5{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=yg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=iv("img");function c(){u(),yg.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class VVe extends p5{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new gg,a=new Hu(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){const l=s.parse(c);!l||(void 0!==l.image?o.image=l.image:void 0!==l.data&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=void 0!==l.wrapS?l.wrapS:Dl,o.wrapT=void 0!==l.wrapT?l.wrapT:Dl,o.magFilter=void 0!==l.magFilter?l.magFilter:Qa,o.minFilter=void 0!==l.minFilter?l.minFilter:Qa,o.anisotropy=void 0!==l.anisotropy?l.anisotropy:1,void 0!==l.encoding&&(o.encoding=l.encoding),void 0!==l.flipY&&(o.flipY=l.flipY),void 0!==l.format&&(o.format=l.format),void 0!==l.type&&(o.type=l.type),void 0!==l.mipmaps&&(o.mipmaps=l.mipmaps,o.minFilter=Dd),1===l.mipmapCount&&(o.minFilter=Qa),void 0!==l.generateMipmaps&&(o.generateMipmaps=l.generateMipmaps),o.needsUpdate=!0,t&&t(o,l))},i,r),o}}class UVe extends p5{constructor(e){super(e)}load(e,t,i,r){const s=new D4,o=new fM(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class dM extends Mc{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class $te extends dM{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Mc.DefaultUp),this.updateMatrix(),this.groundColor=new Dn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const qte=new Vi,Kte=new ge,Xte=new ge;class Lk{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qt(512,512),this.map=null,this.mapPass=null,this.matrix=new Vi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new WF,this._frameExtents=new Qt(1,1),this._viewportCount=1,this._viewports=[new yo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Kte.setFromMatrixPosition(e.matrixWorld),t.position.copy(Kte),Xte.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Xte),t.updateMatrixWorld(),qte.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qte),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class GVe extends Lk{constructor(){super(new z2(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*tv*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Yte extends dM{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mc.DefaultUp),this.updateMatrix(),this.target=new Mc,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new GVe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Zte=new Vi,Ev=new ge,Dk=new ge;class QVe extends Lk{constructor(){super(new z2(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qt(4,2),this._viewportCount=6,this._viewports=[new yo(2,1,1,1),new yo(0,1,1,1),new yo(3,1,1,1),new yo(1,1,1,1),new yo(3,0,1,1),new yo(1,0,1,1)],this._cubeDirections=[new ge(1,0,0),new ge(-1,0,0),new ge(0,0,1),new ge(0,0,-1),new ge(0,1,0),new ge(0,-1,0)],this._cubeUps=[new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,0,1),new ge(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Ev.setFromMatrixPosition(e.matrixWorld),i.position.copy(Ev),Dk.copy(i.position),Dk.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Dk),i.updateMatrixWorld(),r.makeTranslation(-Ev.x,-Ev.y,-Ev.z),Zte.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Zte)}}class Jte extends dM{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new QVe}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class WVe extends Lk{constructor(){super(new o5(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ik extends dM{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mc.DefaultUp),this.updateMatrix(),this.target=new Mc,this.shadow=new WVe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ef{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class JVe extends p5{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=yg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){yg.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class sne{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=one(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=one();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function one(){return(typeof performance>"u"?Date:performance).now()}const Rk="\\[\\]\\.:\\/",iUe=new RegExp("["+Rk+"]","g"),Fk="[^"+Rk+"]",rUe="[^"+Rk.replace("\\.","")+"]",lUe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Fk)+/(WCOD+)?/.source.replace("WCOD",rUe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Fk)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Fk)+"$"),uUe=["material","materials","bones","map"];class hUe{constructor(e,t,i){const r=i||pa.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let pa=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(iUe,"")}static parseTrackName(t){const i=lUe.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==uUe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===u){u=f;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=hUe,n})();pa.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},pa.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},pa.prototype.GetterByBindingType=[pa.prototype._getValue_direct,pa.prototype._getValue_array,pa.prototype._getValue_arrayElement,pa.prototype._getValue_toArray],pa.prototype.SetterByBindingTypeAndVersioning=[[pa.prototype._setValue_direct,pa.prototype._setValue_direct_setNeedsUpdate,pa.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pa.prototype._setValue_array,pa.prototype._setValue_array_setNeedsUpdate,pa.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pa.prototype._setValue_arrayElement,pa.prototype._setValue_arrayElement_setNeedsUpdate,pa.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pa.prototype._setValue_fromArray,pa.prototype._setValue_fromArray_setNeedsUpdate,pa.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class gUe{constructor(e,t,i=0,r=1/0){this.ray=new Eb(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new BF,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return kk(e,this,i,t),i.sort(une),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)kk(e[r],this,i,t);return i.sort(une),i}}function une(n,e){return n.distance-e.distance}function kk(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===i){const r=n.children;for(let s=0,o=r.length;s<o;s++)kk(r[s],e,t,!0)}}class hne{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(e2(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class zk extends mg{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new vr;r.setAttribute("position",new ai(t,3)),r.setAttribute("color",new ai([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new oc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const r=new Dn,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}const tf=AUe();function AUe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const l=c-127;l<-27?(i[c]=0,i[256|c]=32768,r[c]=24,r[256|c]=24):l<-14?(i[c]=1024>>-l-14,i[256|c]=1024>>-l-14|32768,r[c]=-l-1,r[256|c]=-l-1):l<=15?(i[c]=l+15<<10,i[256|c]=l+15<<10|32768,r[c]=13,r[256|c]=13):l<128?(i[c]=31744,i[256|c]=64512,r[c]=24,r[256|c]=24):(i[c]=31744,i[256|c]=64512,r[c]=13,r[256|c]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,u=0;for(;0==(8388608&l);)l<<=1,u-=8388608;l&=-8388609,u+=947912704,s[c]=l|u}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)32!==c&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}var wM=Object.freeze({__proto__:null,toHalfFloat:function vUe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=e2(n,-65504,65504),tf.floatView[0]=n;const e=tf.uint32View[0],t=e>>23&511;return tf.baseTable[t]+((8388607&e)>>tf.shiftTable[t])},fromHalfFloat:function _Ue(n){const e=n>>10;return tf.uint32View[0]=tf.mantissaTable[tf.offsetTable[e]+(1023&n)]+tf.exponentTable[e],tf.floatView[0]}});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"144"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="144");const An=(n,e=4)=>Math.round(n*10**e)/10**e,y5=([n,e],[t,i],r=1)=>[(t-n)/(2/r)+n,(i-e)/(2/r)+e],j3=(n,e=4)=>An(n.reduce((t,i)=>t+i,0),e),Zs=(n,e,t=[0,0],i=4)=>{const r=n*Math.PI/180,s=e*Math.cos(r),o=e*Math.sin(r);return[An(s+t[0],i),An(o+t[1],i)]},h1=(n,e,t=3)=>An(180*Math.atan2(e[1]-n[1],e[0]-n[0])/Math.PI,t),wne=(n,e,t,i=0,r=0)=>{const s=g=>g*g,o=g=>Math.sqrt(g);var a=1+s(e),c=2*-i+e*(t-r)*2,l=s(i)+s(t-r)-s(n);s(c);const p=(o(s(c)-4*a*l),(-c-o(s(c)-4*a*l))/(2*a));return[p,e*p+t]},wg=(n,e)=>{const[[t,i],[r,s]]=n,[[o,a],[c,l]]=e;var u,p=(l-a)*(r-t)-(c-o)*(s-i);return 0==p?null:[t+(u=((c-o)*(i-a)-(l-a)*(t-o))/p)*(r-t),i+u*(s-i)]},Cne=(n,e)=>{const t=[],i=n.length;for(let r=0;r<i-1;r++){const s=[n[r],n[r+1]];wg(s,e)&&t.push(wg(s,e))}return t},ja=(n,e,t=4)=>n&&e?An(Math.hypot(e[0]-n[0],e[1]-n[1]),t):0,Ae=(n,e)=>[n[0]+e[0],n[1]+e[1]],Jt=(n,e,t=!0)=>t?[n[0],e[1]]:[e[0],n[1]],w5=(n,e,t=!1)=>{let i;return i=t?.3528*n/10:n*e,An(i,3)};function xne(n){return n*(Math.PI/180)}String.prototype.toTitleCase=function(){return this.replace(/\b\w/g,n=>n.toLocaleUpperCase())};class f1 extends qc{constructor(e){super(),this.textRotate=0,this.fontSize=12,this.a=[0,0],this.b=[4,4],this.offsetPixels=0,this.offsetMeters=0,this.direction=90,this._lineThickness=.6,this.decimals=1,this.classes=["measure"],Object.assign(this,e)}between(e,t){return[e[0]+(t[0]-e[0])/2,e[1]+(t[1]-e[1])/2]}draw(e){var t=this;return ba(function*(){if(void 0===t.svg&&(t.svg=Ws(`#${t.selector}`),t.setClass(t.svg),t.svgLine=t.svg.append("polyline"),t.svgArrow1=t.svg.append("text"),t.svgArrow2=t.svg.append("text"),t.svgText=t.svg.append("text")),!t.show(e))return t.svgLine.attr("points",""),t.svgText.text(""),t.svgArrow1.text(""),void t.svgArrow2.text("");let i=[...t.a],r=[...t.b],s=[0,0];90===t.direction&&(i=[i[0],Math.max(i[1],r[1])],r=[r[0],Math.max(i[1],r[1])]),-90===t.direction&&(i=[i[0],Math.min(i[1],r[1])],r=[r[0],Math.min(i[1],r[1])]),0===t.direction&&(i=[Math.max(i[0],r[0]),i[1]],r=[Math.max(i[0],r[0]),r[1]]),180===t.direction&&(i=[Math.min(i[0],r[0]),i[1]],r=[Math.min(i[0],r[0]),r[1]]);const o=t.offsetPixels*t.meterPerPixel,a=Zs(t.direction,o+t.offsetMeters,i),c=Zs(t.direction,o+t.offsetMeters,r),u=t.between(a,c);var f=c[0]-a[0],p=c[1]-a[1],g=An(Math.sqrt(f*f+p*p),t.decimals);t.svg.style("visibility",0===g?"hidden":""),t.svgLine.attr("points",[t.a,i,a,c,r,t.b].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`\n        translate(${u[0]+s[0]} ${u[1]+s[1]}) \n        rotate(${t.textRotate})\n        `).text(g);let _=90;[90,0].includes(t.direction)&&(_=-90),t.svgArrow1.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n        translate(${a[0]} ${a[1]}) \n        rotate(${t.direction+_})\n        `).text("<"),t.svgArrow2.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n          translate(${c[0]} ${c[1]}) \n          rotate(${t.direction+_+180})\n          `).text("<")})()}redraw(e){this.svgArrow2&&(this.svgArrow2.attr("font-size",w5(16,this.meterPerPixel,this.svgUpdate.print)),this.svgArrow1.attr("font-size",w5(16,this.meterPerPixel,this.svgUpdate.print))),this.svgText&&this.svgText.attr("font-size",w5(this.fontSize,this.meterPerPixel,this.svgUpdate.print)).attr("stroke-width",6*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",this.meterPerPixel*this.lineThickness)}}const Jc=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],xUe=Math.PI/180,bUe=180/Math.PI;function Ok(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Jc[255&n]+Jc[n>>8&255]+Jc[n>>16&255]+Jc[n>>24&255]+"-"+Jc[255&e]+Jc[e>>8&255]+"-"+Jc[e>>16&15|64]+Jc[e>>24&255]+"-"+Jc[63&t|128]+Jc[t>>8&255]+"-"+Jc[t>>16&255]+Jc[t>>24&255]+Jc[255&i]+Jc[i>>8&255]+Jc[i>>16&255]+Jc[i>>24&255]).toLowerCase()}function Ci(n){return n*xUe}function Mne(n){return n*bUe}class Nk extends qc{constructor(){super(),this.selector="g-distance",this.point1=[-999,-999],this.point2=void 0,this.onUpdate=()=>{},this.floor=tt.all}draw(e){var t=this;return ba(function*(){if(void 0===t.svg&&(t.svg=Ws(`#${t.selector}`),t.svgCircle1=t.svg.append("circle").style("fill","var(--accent-color)").style("cursor","crosshair").attr("stroke-width",0),t.svgCircle2=t.svg.append("circle").style("cursor","crosshair").style("fill","var(--accent-color)").attr("stroke-width",0),t.svgLine=t.svg.append("polyline").style("stroke","var(--accent-color)"),t.svgText=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)"),t.svgTextAngle=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)")),!t.show(e))return void t.clear();if(t.svgCircle1.attr("cx",t.point1[0]).attr("cy",t.point1[1]),!t.point2)return void t.clearExceptFirst();t.svgCircle2.attr("cx",t.point2[0]).attr("cy",t.point2[1]),t.svgLine.attr("points",[t.point1,t.point2].join(" "));const i=ja(t.point1,t.point2);var s;t.svgText.text((s=i)<1200?`${An(1e3*s,0)}mm`:`${An(s,3)}m`),t.svgTextAngle.text(`${Math.abs(h1(t.point1,t.point2,0))}\xb0`),t.setClass(t.svg)})()}clear(){this.clearExceptFirst(),this.svgCircle1.attr("cx",-999).attr("cy",-999)}clearExceptFirst(){this.svgCircle2.attr("cx",-999).attr("cy",-999),this.svgText.attr("transform","translate(-999, -999)"),this.svgTextAngle.attr("transform","translate(-999, -999)"),this.svgLine.attr("points",[])}redraw(e){if(this.svgCircle1&&this.svgCircle1.attr("r",4*this.meterPerPixel),this.svgCircle2&&this.svgCircle2.attr("r",4*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",2*this.meterPerPixel),this.svgText&&this.svgTextAngle&&this.point2){const[t,i]=Ae(y5(this.point1,this.point2),[0,-20*this.meterPerPixel]);this.svgText.attr("transform",`translate(${t}, ${i})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel);const[r,s]=Ae(this.point1,[-20*this.meterPerPixel,0]);this.svgTextAngle.attr("transform",`translate(${r}, ${s})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel)}}}var Gt=(()=>{return(n=Gt||(Gt={})).topFloor="topFloor",n.wallOutside="wallOutside",n.wallInside="wallInside",n.bendInside="bendInside",n.bendOutside="bendOutside",n.topInside="topInside",n.topOutside="topOutside",n.lowestInside="lowestInside",n.lowestOutside="lowestOutside",n.groundFloorInside="groundFloorInside",n.groundFloorOutside="groundFloorOutside",Gt;var n})(),Si=(()=>{return(n=Si||(Si={})).ground="ground",n.crawlerFloor="crawlerFloor",n.crawlerCeiling="crawlerCeiling",n.groundFloor="groundFloor",n.ceiling="ceiling",n.topFloor="topFloor",n.towerTop="towerTop",Si;var n})(),F1=(()=>{return(n=F1||(F1={})).outer="outer",n.inner="inner",n.sketch="sketch",n.shadow="shadow",F1;var n})(),kl=(()=>{return(n=kl||(kl={})).roof70="roof70",n.roofCircle="roofCircle",n.roofCircleAnd70="roofCircleAnd70",kl;var n})();class EUe{constructor(){this.innerWidth=-1,this.wallOuterThickness=-1,this.ceilingHeight=3.3,this.floorAboveGround=.7,this.crawlerHeight=1,this.crawlerSpace=!0,this.topFloorThickness=.4,this.groundFloorThickness=.48,this.roofCenter=[],this.roofThickness=.4,this.roofCirclePullDown=1,this.roofCircleExtra=-1,this.roofCircleWalls=1,this.roof70offset=.6,this.roof70Extension=1.3,this.roof70Walls=1.4,this.roofRidgeHight=.6,this.roofRidgeWidth=.04,this.bendPoint=[-1,-1],this.bendPointInner=[-1,-1],this.elevations={},this.roofPoints={},this.houseHeight=-1,this.outerWallHeight=-1,this.innerWallHeight=-1,this.gableWallArea=-1,this.minimumHeight=1.5,this.minimumHeightWidth=-1,this.minimumHeightRoom=2.3,this.minimumHeightRoomWidth=-1,this.roofStyle=kl.roof70,this.viewedRoofStyle=kl.roof70,this.parts=[],this.create()}create(){this.drawRoofCircle(),this.drawBuilding(),this.drawRoof70(),this.drawHelpers(),this.parts.push(new Nk)}calculate(e){this.house=e,this.innerWidth=this.house.outerBase,this.wallOuterThickness=this.house.wallOuterThickness,this.roofCircleExtra=An(Math.cos(Ci(65))*this.roofCirclePullDown,3),this.bendPoint=[this.roof70offset,-this.roof70offset*Math.tan(Ci(70))-this.roof70Walls],this.bendPointInner=[this.roof70offset,-this.roof70offset*Math.tan(Ci(70))];const i=0-this.groundFloorThickness,o=i+this.groundFloorThickness+this.ceilingHeight,a=o+this.topFloorThickness;if(this.elevations={[Si.ground]:i-(this.crawlerSpace?this.floorAboveGround:0)+this.groundFloorThickness,[Si.crawlerFloor]:i-(this.crawlerSpace?this.crawlerHeight:0),[Si.crawlerCeiling]:i,[Si.groundFloor]:0,[Si.ceiling]:o,[Si.topFloor]:a,[Si.towerTop]:a+5},this.roofCenter=[An(this.house.outerBase/2),An(this.elevations[Si.topFloor])],this.roofPoints={[Gt.topFloor]:[this.wallOuterThickness,this.roofCenter[1]],[Gt.groundFloorOutside]:[0,0],[Gt.groundFloorInside]:[this.wallOuterThickness,0]},this.viewedRoofStyle===kl.roof70){const c=this.pointOf70Roof();this.roofPoints={...this.roofPoints,[Gt.bendOutside]:c[2],[Gt.bendInside]:c[11],[Gt.topInside]:c[10],[Gt.topOutside]:c[3],[Gt.lowestInside]:c[13],[Gt.lowestOutside]:c[0]}}if(this.viewedRoofStyle===kl.roofCircle){const c=(l,u)=>{const[f,p]=this.pointOnCircleRoof(Math.PI*(-(4-l)/4),u);return[f,p]};this.roofPoints={...this.roofPoints,[Gt.bendOutside]:c(1,F1.outer),[Gt.bendInside]:c(1,F1.inner),[Gt.topInside]:c(2,F1.inner),[Gt.topOutside]:c(2,F1.outer),[Gt.lowestInside]:c(0,F1.inner),[Gt.lowestOutside]:c(0,F1.outer)}}this.roofPoints[Gt.wallInside]=this.calcPointUnderInnerWall(),this.roofPoints[Gt.wallOutside]=this.calcPointUnderOuterWall(),Object.entries(this.roofPoints).forEach(([c,l],u)=>{this.elevations[c]=An(l[1])}),this.gableWallArea=this.calculateGable(),this.innerWallHeight=Math.abs(this.roofPoints[Gt.wallInside][1]),this.outerWallHeight=Math.abs(this.roofPoints[Gt.wallOutside][1]),this.minimumHeightWidth=An(this.getIntersectionWithRoof(this.minimumHeight)[0]),this.minimumHeightRoomWidth=An(this.getIntersectionWithRoof(this.minimumHeightRoom)[0]),this.lowerAngle=An(h1(this.roofPoints[Gt.lowestOutside],this.roofPoints[Gt.bendOutside]),3),this.upperAngle=An(h1(this.roofPoints[Gt.bendOutside],this.roofPoints[Gt.topOutside]),3)}calculateGable(){const t=this.roofPoints[Gt.wallInside],i=this.roofPoints[Gt.bendInside],r=this.roofPoints[Gt.topInside];return 2*j3([t[1]*i[0]+(i[1]-t[1])*i[0]/2+(r[0]-i[0])*i[1]+(r[0]-i[0])*(r[1]-i[1])/2])}calcPointUnderInnerWall(){const e=this.roofPoints[Gt.lowestInside];let[t,i]=wg([[this.wallOuterThickness,-100],[this.wallOuterThickness,100]],[e,this.roofPoints[Gt.bendInside]]);return[t,i]}calcPointUnderOuterWall(){const e=this.roofPoints[Gt.lowestInside];let[t,i]=wg([[0,-100],[0,100]],[e,this.roofPoints[Gt.bendInside]]);return e[0]>0&&(i=e[1]),[t,i]}drawBuilding(){this.parts.push(new Ga({selector:"building-ground-fill",onUpdate:function(e){this.square(e.innerWidth+3,Math.abs(e.elevations[Si.ground])+1.5,[-1.5,-e.elevations[Si.ground]])}})),this.parts.push(new Ga({selector:"building-ground",onUpdate:function(e){const i=Math.abs(e.elevations[Si.ground]);this.square(e.innerWidth+3,e.crawlerHeight-i+1.5,[-1.5,i])}})),this.parts.push(new l3({selector:"building-ground-line",onUpdate:function(e){const t=e.elevations[Si.ground];this.coords=[[-2,-t],[e.innerWidth+2,-t]]}})),this.parts.push(new Ga({selector:"building-crawler",onUpdate:function(e){this.visible=e.crawlerSpace,this.square(e.innerWidth-2*e.wallOuterThickness,e.crawlerHeight,[e.wallOuterThickness,-e.elevations[Si.crawlerCeiling]])}})),this.parts.push(new Ga({selector:"building-walls",onUpdate:function(e){const t=e.elevations[Si.topFloor];this.square(e.innerWidth,t+-e.elevations[Si.crawlerFloor],[0,-t])}})),this.parts.push(new Ga({selector:"building-room",onUpdate:function(e){this.square(e.innerWidth-2*e.wallOuterThickness,e.ceilingHeight,[e.wallOuterThickness,-e.elevations[Si.ceiling]])}})),this.parts.push(new Ga({selector:"building-fill",onUpdate:function(e){const i=e.elevations[Si.topFloor]+(e.viewedRoofStyle===kl.roof70?e.roof70Walls:e.roofCircleWalls);this.square(e.innerWidth,i-e.elevations[Si.ground],[0,-i])}})),this.parts.push(new Ga({selector:"building-roof-70-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[0,-e.elevations[Si.topFloor]-e.roof70Walls])}})),this.parts.push(new Ga({selector:"building-roof-70-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Si.topFloor]-e.roof70Walls])}})),this.parts.push(new Ga({selector:"building-roof-circle-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Si.topFloor]-e.roofCircleWalls])}})),this.parts.push(new Ga({selector:"building-roof-circle-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[0,-e.elevations[Si.topFloor]-e.roofCircleWalls])}}))}drawHelpers(){this.parts.push(new f1({selector:"minimum",floor:tt.all,direction:0,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Si.topFloor];this.offsetPixels=-20;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=-1,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new f1({selector:"minimum-h",floor:tt.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Si.topFloor];this.offsetPixels=0;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=1.5,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new f1({selector:"minimum-room",floor:tt.all,direction:0,textRotate:45,decimals:3,onUpdate:function(e){const t=e.elevations[Si.topFloor];this.offsetPixels=20;const i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1;const r=e.innerWidth-i[0];this.a=[e.innerWidth,-t],this.b=[r,-i[1]]}})),this.parts.push(new f1({selector:"minimum-room-h",floor:tt.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){this.offsetPixels=0;const t=e.elevations[Si.topFloor],i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1.5;const r=e.innerWidth-i[0];this.a=[r,-i[1]],this.b=[r+i[0]-e.wallOuterThickness,-t]}})),this.parts.push(new f1({selector:"lower-roof",floor:tt.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Gt.bendInside],i=e.roofPoints[Gt.wallInside];this.offsetPixels=0,this.offsetMeters=-1.5,this.a=[i[0],-i[1]],this.b=[t[0],-t[1]],this.direction=h1(this.a,this.b)-90}})),this.parts.push(new f1({selector:"higher-roof",floor:tt.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Gt.topInside],i=e.roofPoints[Gt.bendInside];this.offsetPixels=0,this.offsetMeters=1.5,this.a=[i[0],-i[1]],this.b=[t[0],-t[1]],this.direction=h1(this.a,this.b)-90}}))}getIntersectionWithRoof(e){const t=this.elevations[Si.topFloor]+e,i=[];return[[this.roofPoints[Gt.topFloor],this.roofPoints[Gt.wallInside]],[this.roofPoints[Gt.wallInside],this.roofPoints[Gt.bendInside]],[this.roofPoints[Gt.bendInside],this.roofPoints[Gt.topInside]]].forEach((c,l,u)=>{const f=wg(c,[[-100,t],[100,t]]);i.push(f)}),i.sort((c,l)=>l[0]-c[0])[0]}drawRoofCircle(){this.parts.push(new Ga({selector:"roof-circle-fill",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),F1.outer))].map(t=>[t[0],-t[1]])}})),this.parts.push(new Ga({selector:"roof-circle-shadow",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),F1.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),F1.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new Ga({selector:"roof-circle",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),F1.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),F1.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new lb({selector:"roof-circle__h-circle",lineThickness:2,onUpdate:function(e){const[t,i]=e.pointOnCircleRoof(0,F1.outer),r=t-e.innerWidth,s=2*r+e.innerWidth;this.d=`M${s},0 a1,1 0 0,0 ${-s},0`,this.transform=`translate(${-r} ${-i})`}})),this.parts.push(new Ga({selector:"roof-circle__h-line",lineThickness:2,onUpdate:function(e){const t=e.pointOnCircleRoof(Math.PI,F1.outer);this.coords=[e.pointOnCircleRoof(Math.PI*(-3/4),F1.sketch),[e.roofCenter[0],t[1]],t,e.pointOnCircleRoof(0,F1.outer),[e.roofCenter[0],t[1]],e.pointOnCircleRoof(Math.PI*(-1/4),F1.sketch)].map(function(i){return[i[0],-i[1]]})}}))}drawRoof70(){this.parts.push(new Ga({selector:"roof-70-fill",onUpdate:function(e){this.coords=e.pointOf70Roof().slice(0,7).map(([t,i])=>[t,-i])}})),this.parts.push(new Ga({selector:"roof-70-shadow",onUpdate:function(e){this.coords=e.pointOf70Roof(!0).map(([t,i])=>[t,-i])}})),this.parts.push(new Ga({selector:"roof-70",onUpdate:function(e){this.coords=e.pointOf70Roof().map(([t,i])=>[t,-i])}}))}pointOf70Roof(e=!1){const t=this.roofThickness/Math.sin(Ci(70)),i=this.roofThickness/Math.tan(Ci(70)),r=Math.sqrt(i**2+this.roofThickness**2),o=(Math.sin(Ci(30)),this.innerWidth/2),a=this.roof70offset,c=a*Math.tan(Ci(70))+this.roof70Walls,l=Zs(-40,r),u=a+l[0],f=c+l[1],_=(o-a)*Math.tan(Ci(30))+c;return[this.angle(Ci(110),this.roof70Extension,[0,-this.roof70Walls]),[0,-this.roof70Walls],[a,-c],[o,-_],[this.innerWidth-a,-c],[this.innerWidth,-this.roof70Walls],this.angle(Ci(70),this.roof70Extension,[this.innerWidth,-this.roof70Walls]),this.angle(Ci(70),this.roof70Extension,[this.innerWidth-t,-this.roof70Walls]),[this.innerWidth-t,-this.roof70Walls],[this.innerWidth-u,-f],Ae([o,-_],[0,this.roofThickness/Math.cos(Ci(30))]),[u,-f],[t,-this.roof70Walls],this.angle(Ci(110),this.roof70Extension,[t,-this.roof70Walls])].map(([y,w])=>[An(y,40),An(this.roofCenter[1]+-w,40)])}pointOnCircleRoof(e,t){let i;const r=this.roofThickness/Math.cos(Ci(22.5));t===F1.outer&&(i=this.innerWidth/2+this.roofCircleExtra),t===F1.inner&&(i=this.innerWidth/2-r+this.roofCircleExtra),t===F1.sketch&&(i=this.innerWidth/2+1.5*r+this.roofCircleExtra);const[s,o]=Zs(Mne(e),i);return[An(this.roofCenter[0]+s),An(this.roofCenter[1]+Math.abs(o)+this.roofCircleWalls-this.roofCirclePullDown)]}angle(e,t,i=[0,0]){const r=t*Math.cos(e),s=t*Math.sin(e);return[r+i[0],s+i[1]]}}const Vk=Wc("slideInOut",[da(":enter",[Wi({transform:"translateY(100%)"}),ia("600ms 0ms ease-out",Wi({transform:"translateY(0%)"}))]),da(":leave",[ia("300ms  ease-in",Wi({transform:"translateY(100%)"}))])]),Lne=Wc("fallInOut",[da(":enter",[Wi({transform:"translateY(-100%)"}),ia("600ms 0ms ease-out",Wi({transform:"translateY(0%)"}))]),da(":leave",[ia("300ms ease-in",Wi({transform:"translateY(-100%)"}))])]);class Uk extends qc{constructor(e){super(),this.coords=[],this.floor=tt.ground,this.theoretic=!1,this.tooltip=()=>(console.log(this.selector),`Footprint\n    <br>${this.floor}-level\n    <br>${this.area()}m2`),this.area=()=>Math.abs(An(xJ(this.coords),1)),Object.assign(this,e)}setup(){}draw(e){var t=this;return ba(function*(){void 0===t.svg&&(t.svg=Ws(`#${t.selector}`),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.classes.push("bg-fill")),t.show(e)?(t.svg.attr("points",t.coords.join(" ")),t.setClass(t.svg)):t.svg.attr("points","")})()}}let Tv={};var Fn=(()=>{return(n=Fn||(Fn={})).outer="outer",n.inner="inner",n.theoretic="theoretic",Fn;var n})(),ot=(()=>{return(n=ot||(ot={})).in="in",n.out="out",n.left="left",n.right="right",ot;var n})(),ti=(()=>{return(n=ti||(ti={})).inside="inside",n.outside="outside",n.tower="tower",n.straight="straight",ti;var n})();class Jn extends qc{constructor(e){super(),this.origin=[0,0],this.orientation="",this.ceiling=-1,this.gable=!1,this.tower=!1,this.tooltip=()=>`Wall <b>${this.orientation}</b> (${this.parent instanceof Uk?"outer wall":"of "+this.parent+" room"} ) \n    <br>Inside ${this.getLength(ot.in,2)} m2\n    <br>Outside ${this.outerWallLength=this.getLength(ot.out,2)} m2`,Object.assign(this,e)}createSelector(){this.selector=this.parent.selector.replace("Footprint-1","outer");const e=h1(this.sides[ot.in][0],this.sides[ot.in][1]);this.orientation=0===e?"North":45===e?"NortEast":-45===e||315===e?"NorthWest":90===e?"East":180===e?"South":270===e||-90===e?"West":`${e}`.split(".")[0],this.selector+=`-${this.orientation}Wall`,this.selector in Tv||(Tv[this.selector]=0),Tv[this.selector]++,Tv[this.selector]>1&&(this.selector+=`-${Tv[this.selector]}`)}draw(e){var t=this;return ba(function*(){if(void 0===t.svg&&(t.svg=Ws(`#${t.selector}`),t.svgOrigin=t.svg.select(".wall-origin"),t.svgLeft=t.svg.select(".wall-left"),t.svgRight=t.svg.select(".wall-right"),t.svgFill=t.svg.select(".wall-fill"),t.type===Fn.outer&&(t.thickness=t.parent.parent.wallOuterThickness),t.type===Fn.inner&&(t.thickness=t.parent.parent.wallInnerThickness),t.svg.node()&&t.svg.node().classList.add(`type-${t.type}`)),!t.show(e))return t.svgFill.attr("points",""),t.svgLeft.attr("points",""),t.svgRight.attr("points",""),void t.svgOrigin.attr("r","0");t.svgOrigin.attr("cx",t.origin[0]).attr("cy",t.origin[1]),t.sides.in&&t.sides.out&&t.svgFill.attr("points",[...t.sides.in,...[...t.sides.out].reverse()].join(" "));for(let i of Object.keys(ot)){const r=i;if(!(r in t.sides))return;let s;s=r===ot.in?t.svgLeft:t.svgRight,s.attr("points",t.sides[r].join(" ")),s.node()&&s.node().classList.add(`side-${r}`)}t.innerWallLength=t.getLength(ot.in),t.outerWallLength=t.getLength(ot.out)})()}redraw(e){this.svgOrigin&&this.svgOrigin.attr("r",this.meterPerPixel*this.lineThickness*3),this.svgLeft&&this.svgLeft.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===Fn.theoretic?4:1)),this.svgRight&&this.svgRight.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===Fn.theoretic?4:1))}getLength(e,t=2){const i=this.sides[e];return i&&i[0]&&i[1]?An(ja(...i),t):0}getArea(e,t=2){const i=this.getLength(e);return 0===i?0:An(i*this.ceiling,t)}getPosition(e,t,i=0){const r=this.sides[e],s=this.getLength(e)*t,o=h1(r[0],r[1]);return Zs(o,s+i,r[0])}drawTheoretic(e,t,i){this.thickness=i,"n"===e&&this.drawByRoom(0,1,t,ti.straight,ti.straight),"e"===e&&this.drawByRoom(1,2,t,ti.straight,ti.straight),"s"===e&&this.drawByRoom(2,3,t,ti.straight,ti.straight),"w"===e&&this.drawByRoom(3,0,t,ti.straight,ti.straight)}drawByRoom(e,t,i,r,s){if(!1===this.visible)return void(this.sides={[ot.in]:[[0,0],[0,0]],[ot.out]:[[0,0],[0,0]]});this.type===Fn.inner?(this.thickness=i.wallInnerThickness,this.ceiling=i.cross.ceilingHeight):this.type===Fn.outer?(this.thickness=i.wallOuterThickness,this.ceiling=i.cross.outerWallHeight):this.type===Fn.theoretic?this.ceiling=i.cross.ceilingHeight:console.error(this);const o=(f,p,g)=>p===ti.inside&&0===f?g+45:p===ti.inside&&1===f||p===ti.outside&&0===f?g-45:p===ti.outside&&1===f?g+45:p===ti.tower&&0===f?g+67.5:p===ti.tower&&1===f?g-67.5:p===ti.straight?g:void 0,a=f=>{const p=Math.sqrt(this.thickness**2*2),g=i.tower;return f===ti.inside||f===ti.outside?p:f===ti.tower?ja(g.innerCoords[0],g.outerCoords[7]):f===ti.straight?this.thickness:void 0};let c=this.parent.coords[e],l=this.parent.coords[t];this.origin=c,this.innerWallLength=ja(c,l);let u=h1(c,l)-90;this.sides={[ot.in]:[c,l]},this.type!==Fn.theoretic&&(this.sides[ot.out]=[Zs(o(0,r,u),a(r),c),Zs(o(1,s,u),a(s),l)])}getFootPrint(){if(!this.sides)return[];const e=[];return this.sides[ot.in]&&e.push(...this.sides[ot.in]),this.sides[ot.out]&&e.push(...this.sides[ot.out].reverse()),e}}class Pt extends qc{constructor(e){super(),this.points=[],this.offset=[0,0],this.offsetWall=.3,this.elevation=.3,this.verticalCableLength=0,this.cableOnly=!1,this.sensorOnly=!1,this.wallSide=ot.in,this.cableLength=0,this.amount=1,this.fontSize=14,this.visible=!1,this.showBadge=!1,this.getSensorType=t=>Object.values(Ge).find(r=>t.includes(r)),this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Cable length ${An(this.cableLength,1)}m2`),this.group&&(t+=`<br>Group ${this.group}`),t},Object.assign(this,e)}draw(e){var t=this;return ba(function*(){if(void 0===t.svg){if(!t.show(e))return;(void 0===t.floor||e in t.parent)&&(t.floor=t.parent.floor),t.svg=Ws(`#${t.selector}.sensor-cable`),t.sensorType===Ge.temperature&&(t.sensorOnly=!0),t.cableOnly?(t.lineThickness=2,t.classes.push("sensor-room-cable")):(t.svgG=Ws(`#${t.selector}.sensor-g`),t.showBadge=t.amount>=2&&void 0!==t.svgG,t.svgIcon=Ws(`#${t.selector}.sensor-icon`),t.showBadge&&(t.svgBadge=t.svgG.append("g"),t.svgBadgeCircle=t.svgBadge.append("circle"),t.svgBadgeText=t.svgBadge.append("text"))),t.group&&t.classes.push(`el-group-${t.group}`),t.cableType&&t.classes.push(`cable-${t.cableType}`),t.classes.push(`sensor-${t.sensorType}`)}if(!t.show(e))return t.svgIcon&&t.svgIcon.attr("xlink:href",""),t.svg&&t.svg.attr("points",""),t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.attr("font-size",0),void(t.showBadge=!1);t.svgIcon&&t.svgIcon.attr("xlink:href",`#icon-${t.getSensorType(t.selector)}`);const i=t.calcOffsetWall();t.cableOnly||(t.svgIcon.attr("x",`${i[0]}px`).attr("y",`${i[1]}px`),t.setClass(t.svgG),t.setClass(t.svg)),t.showBadge?t.badge(i):(t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.text("")),t.sensorOnly||(t.svg.attr("points",t.cablePoints(i,e).join(" ")).attr("transform",t.transform),t.setClass(t.svg),t.cableLength=t.getLength())})()}redraw(e){!this.show(e)||(this.svgBadge&&(this.svgBadge.attr("stroke-width",this.meterPerPixel*this.lineThickness*1).attr("transform",`translate(${10*this.meterPerPixel} ${-10*this.meterPerPixel})`),this.svgBadgeCircle.attr("r",8*this.meterPerPixel),this.svgBadgeText.attr("font-size",this.meterPerPixel*this.fontSize).text(`${this.amount}`)),this.svg&&(this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.cableType===bu.OutsidePOE&&this.svg.attr("stroke-dasharray",`${this.meterPerPixel*this.lineThickness*10*.5} ${this.meterPerPixel*this.lineThickness*10}`)))}cablePoints(e,t){return this.show(t)?[e,...this.points]:[]}getLength(){let t=0;return this.points.forEach((i,r,s)=>{r+1!==this.points.length&&(t+=((i,r)=>Math.hypot(r[0]-i[0],r[1]-i[1]))(i,s[r+1]))}),An(t+this.verticalCableLength+.3*this.amount)}badge(e){this.svgBadge.attr("class","sensor-badge"),this.svgBadgeCircle.attr("fill",2===this.amount?"white":"#333").attr("cx",e[0]).attr("cy",e[1]).attr("stroke","black"),this.svgBadgeText.attr("fill",2===this.amount?"black":"white").attr("x",e[0]).attr("y",e[1]).attr("text-anchor","middle").attr("class","sensor-badge-text").attr("stroke","none").attr("dominant-baseline","middle").text(`${this.amount}`)}calcOffsetWall(){if(this.parent instanceof Jn){const t=this.parent.sides[this.wallSide],i=h1(t[0],t[1]);return Zs(i+90,this.offsetWall,this.points[0])}return[this.points[0][0]+this.offset[0],this.points[0][1]+this.offset[1]]}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),[Ge.socket,Ge.perilex].includes(this.sensorType)?document.querySelectorAll(`.el-group-${this.group}`).forEach((e,t)=>{e.classList.add("selected")}):(this.svg.node().classList.add("selected"),this.svgIcon.node().classList.add("selected"))}}let TUe=(()=>{class n{constructor(){this.class="base",this.html="dummy"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=On({type:n,selectors:[["tooltip"]],hostAttrs:[1,"popup"],hostVars:2,hostBindings:function(t,i){2&t&&function bG(n){vu(_l,y0,n,!0)}(i.class)},decls:2,vars:1,consts:[[3,"innerHtml"],[1,"popup-arrow","popup-arrow-mid"]],template:function(t,i){1&t&&rt(0,"div",0)(1,"div",1),2&t&&Ve("innerHtml",i.html,k3)},styles:[".popup-arrow-mid{left:calc(50% - 10px)!important;background:inherit}[_nghost-%COMP%]{position:relative!important}"]}),n})();class k1 extends qc{constructor(e){super(),this.coords=[],this.floor=tt.ground,this.hole=!1,this.centralElectricity=[0,0],this.theoretic=!1,this.width=0,this.height=0,this.fontSize=12,this.tooltip=()=>{console.log(this.selector);let t=`Room <b>${this.name}</b> \n    <br>${this.floor}-level\n    <br>${this.area()}m2`;return this.width&&(t+=`<br>width: ${this.width}m`),this.height&&(t+=`<br>height: ${this.height}m`),t},this.area=()=>0===this.coords.length||this.hole?0:Math.abs(An(xJ(this.coords),1)),this.volume=()=>this.floor===tt.top||this.hole||this.floor===tt.ground||this.hole?this.area()*this.parent.cross.ceilingHeight:void 0,this.squaredRoom=(t,i)=>{this.width=An(t),this.height=An(i),this.coords=[this.northWestCorner,Ae(this.northWestCorner,[t,0]),Ae(this.northWestCorner,[t,i]),Ae(this.northWestCorner,[0,i])],this.center=Ae(this.northWestCorner,[t/2,i/2]),this.centralElectricity=this.center},Object.assign(this,e)}setup(){}draw(e){var t=this;return ba(function*(){if(void 0===t.svg&&(t.svg=Ws(`#${t.selector}`),t.svgRoom=t.svg.append("polygon"),t.function&&(t.svgText=t.svg.append("text"),t.svgText1=t.svgText.append("tspan"),t.svgText2=t.svgText.append("tspan"),t.svgText.attr("class","room-function-text")),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.hole&&(t.classes.push("room-hole"),t.svg.attr("filter","url(#inset-shadow)")),t.classes.push("bg-fill")),!t.show(e))return t.svgRoom.attr("points",""),void(t.function&&(t.svgText1.text(""),t.svgText2.text("")));t.svgRoom.attr("points",t.coords.join(" "));const r=t.center?t.center:(()=>{const s=t.coords.map(f=>f[0]),o=t.coords.map(f=>f[1]);return[(Math.min(...s)+Math.max(...s))/2,(Math.min(...o)+Math.max(...o))/2]})();t.function&&(t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]} ${r[1]}) `),t.svgText1.attr("x",0).attr("dy","0em").text(`${t.function}`),t.area()>5&&t.svgText2.attr("x",0).attr("dy","1.2em").text(`${t.area()} m\xb2`)),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",w5(this.fontSize,this.meterPerPixel,this.svgUpdate.print)).attr("stroke-width",6*this.meterPerPixel)}}class LUe extends qc{constructor(e){super(),this.last=!1,this.visible=!0,this.fontSize=14,Object.assign(this,e)}draw(e){var t=this;return ba(function*(){void 0===t.svg&&(t.svg=Ws(`#${t.selector}`),t.svgRun=t.svg.select(".step-run"),t.svgRise=t.svg.select(".step-rise"),t.svgText=t.svg.select(".step-text"),t.last&&t.classes.push("last")),t.show(e)?(t.svg.style("display",""),t.svg.attr("transform",`translate(${t.index*t.parent.run}, ${-t.index*t.parent.rise})`),t.setClass(t.svg),t.svgRun.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[0,0],[0,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,0]].join(" ")),t.svgRise.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[t.parent.nose,t.parent.runThickness],[t.parent.nose,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.runThickness]].join(" ")),t.svgText.attr("font-size",t.fontSize*t.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*t.meterPerPixel).attr("transform",`\n        translate(${t.parent.run/2} ${16*-t.meterPerPixel}) \n        `).text(t.index)):t.svg.style("display","none")})()}}class Dne extends qc{constructor(e){super(),this.name="",this.cx=0,this.cy=0,this.r=1,this._lineThickness=.2,Object.assign(this,e)}draw(e){var t=this;return ba(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=Ws(`#${t.selector}`)}t.svg.attr("cx",t.cx).attr("cy",t.cy).attr("r",t.r).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}}class DUe extends qc{constructor(e){super(),this.floor=tt.all,this.name="step",this.last=!1,this.visible=!0,this.fontSize=10,this.walkLineXY=[0,0],this.nextWalkLineXY=[0,0],this.stringerXY=[0,0],this.nextStingerXY=[0,0],Object.assign(this,e)}draw(e){var t=this;return ba(function*(){if(void 0===t.svg&&(t.svg=Ws(`#${t.selector}`),t.svgText=t.svg.select(".step-plan-text"),t.svgRise=t.svg.select(".step-plan-rise"),t.svgStep=t.svg.select(".step-plan-lines"),t.last&&t.classes.push("last")),!t.show(e))return t.svgStep.attr("points",""),t.svgRise.attr("points",""),void t.svgText.text("");const i=h1(t.walkLineXY,t.nextWalkLineXY),r=Zs(i-45,.8*t.parent.run,t.walkLineXY),s=h1(t.stringerXY,t.walkLineXY),o=h1(t.nextStingerXY,t.nextWalkLineXY),a=Zs(s,10,t.walkLineXY),c=Zs(o,10,t.nextWalkLineXY),l=Cne(t.stringers.out.coords,[t.stringerXY,a]).map(y=>({xy:y,d:ja(y,t.stringerXY)})).sort((y,w)=>y.d-w.d).map(y=>y.xy)[0],u=Cne(t.stringers.out.coords,[t.nextStingerXY,c]).map(y=>({xy:y,d:ja(y,t.nextStingerXY)})).sort((y,w)=>y.d-w.d).map(y=>y.xy)[0],f=t.stringers.out.coords[1],p=t.stringers.out.coords[2];let g=null,_=null;f[1]!==l[1]&&f[1]===u[1]&&(_=t.stringers.in.coords[1],g=t.stringers.out.coords[1]),p[0]!==l[0]&&p[0]===u[0]&&(_=t.stringers.in.coords[2],g=t.stringers.out.coords[2]),t.svgStep.attr("points",[t.walkLineXY,t.stringerXY,_,t.nextStingerXY,t.nextWalkLineXY,u,g,l].join(" ")),t.svgRise.attr("points",[Zs(s+90,t.parent.nose,l),Zs(s+90,t.parent.nose,t.stringerXY)].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]}, ${r[1]})`).text(t.index),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",this.meterPerPixel*this.fontSize),this.svgRise&&this.svgRise.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.svgStep&&this.svgStep.attr("stroke-width",this.meterPerPixel*this.lineThickness*1)}}class IUe{constructor(){this.ceilingHeight=3.3,this.floorThickness=.5,this.groundFloorTop=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.totalRise=-1,this.totalRun=6,this.run=.3,this.runThickness=.02,this.rise=.2,this.riseThickness=.02,this.nose=.02,this.steps=20,this.walkWidth=.8,this.stairOrigin=[0,0],this.stepsRight=12,this.leftFlightSteps=5,this.midFlightSteps=4,this.totalWidth=2.7,this.totalHeight=-1,this.lesserHeight=-1,this.intersections={},this.walkLineOffset=.3,this.parts=[],this.create()}create(){this.createBuilding(),this.createStep(),this.createMeasures(),this.createPlan()}calculate(e){this.house=e,this.groundFloorTop=0,this.topFloorTop=this.house.cross.elevations[Si.topFloor],this.totalRise=this.topFloorTop-this.groundFloorTop,this.stairOrigin=[this.house.stramien.in.we.b,this.house.stramien.in.ns.b-5],this.angle=An(Math.atan(this.totalRise/this.totalRun)*(180/Math.PI),1),this.run=An(this.totalRun/this.steps),this.rise=An(this.totalRise/this.steps),this.step=An(2*this.run+this.run),this.maxSteps=Math.ceil(this.totalRise/.182),this.minSteps=Math.ceil(this.totalRise/.22);const[t,i]=[this.alongWalkLine(1)[1]-this.stairOrigin[1],this.alongWalkLine(this.steps)[1]-this.stairOrigin[1]];this.totalHeight=Math.max(t,i),this.lesserHeight=Math.min(t,i),this.calculateCorrectionArray();const r={coords:[Ae(this.stairOrigin,[0*this.totalWidth,t]),Ae(this.stairOrigin,[0*this.totalWidth,0]),Ae(this.stairOrigin,[1*this.totalWidth,0]),Ae(this.stairOrigin,[1*this.totalWidth,i])]};this.stringers={in:{coords:[Ae(r.coords[0],[1*this.walkWidth,0*this.walkWidth]),Ae(r.coords[1],[1*this.walkWidth,1*this.walkWidth]),Ae(r.coords[2],[-1*this.walkWidth,1*this.walkWidth]),Ae(r.coords[3],[-1*this.walkWidth,0*this.walkWidth])]},out:r}}createBuilding(){this.parts.push(new Ga({selector:"floor-groundfloor",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[[-e.run,e.groundFloorTop],[10,e.groundFloorTop],[10,e.groundFloorTop+e.floorThickness],[-e.run,e.groundFloorTop+e.floorThickness]]}})),this.parts.push(new Ga({selector:"floor-topfloor-shadow",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[-e.run,-e.topFloorTop],[-e.run,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new Ga({selector:"floor-topfloor",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[10,-e.topFloorTop],[10,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new lb({selector:"nose-line",floor:tt.all,parent:this,onUpdate:function(e){this.d=`M0 0 L${e.totalRun} ${-e.totalRise} `}})),this.parts.push(new lb({selector:"back-line",floor:tt.all,parent:this,onUpdate:function(e){const t=1*e.run+.2;this.d=`M${t} 0 L${Zs(-e.angle,-e.run/Math.tan(e.angle*Math.PI/180),[e.totalRun+t,-e.totalRise])}`}}))}createStep(){for(let e=1;e<25;e++)this.parts.push(new LUe({selector:`step-${e}`,floor:tt.all,parent:this,index:e,onUpdate:function(t){this.outOfDesign=!(e<t.steps+1),this.last=e===t.steps}}))}createMeasures(){this.parts.push(new f1({selector:"run-size",floor:tt.all,direction:-90,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.rise,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new f1({selector:"rise-size",floor:tt.all,direction:180,offsetPixels:.5,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.run,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new f1({selector:"total-rise-size",floor:tt.all,direction:0,offsetPixels:0,onUpdate:function(e){const t=e.totalRun+2*e.run;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t,0],this.b=[t,-e.totalRise]}})),this.parts.push(new f1({selector:"total-run-size",floor:tt.all,direction:90,onUpdate:function(e){this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[0,0],this.b=[e.totalRun,0]}})),this.parts.push(new f1({selector:"plateau-width",floor:tt.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+0,t],this.b=[e.stairOrigin[0]+e.walkWidth,t]}})),this.parts.push(new f1({selector:"mid-width",floor:tt.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+e.walkWidth,t],this.b=[e.stairOrigin[0]+e.totalWidth-e.walkWidth,t]}})),this.parts.push(new f1({selector:"total-width",floor:tt.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0],t],this.b=[e.stairOrigin[0]+e.totalWidth,t]}})),this.parts.push(new f1({selector:"total-height",floor:tt.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.totalHeight]}})),this.parts.push(new f1({selector:"lesser-height",floor:tt.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.lesserHeight]}}))}createPlan(){for(let e=1;e<this.steps+1;e++)this.parts.push(new DUe({selector:`step-plan-${e}`,floor:tt.all,parent:this,index:e,onUpdate:function(t){this.stringers=t.stringers,this.walkLineXY=t.alongWalkLine(e),this.nextWalkLineXY=t.alongWalkLine(e+1),this.stringerXY=t.alongStinger(e),this.nextStingerXY=t.alongStinger(e+1)}})),this.parts.push(new Dne({selector:"walk-line-"+e,floor:tt.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongWalkLine(e)}})),this.parts.push(new Dne({selector:"step-stinger-"+e,floor:tt.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongStinger(e)}}));this.parts.push(new Ga({selector:"clip-ground-floor-ref",floor:tt.ground,onUpdate:function(e){const[t,i]=e.stairOrigin,r=t+e.walkWidth,s=t+e.totalWidth-e.walkWidth,o=Math.max(e.alongWalkLine(1)[1],i+e.walkWidth);Math.max(e.alongWalkLine(e.steps)[1],i+e.walkWidth),this.coords=[[t,i],[s,i],[s,i+e.walkWidth],[r,i+e.walkWidth],[r,o],[t,o]]}})),this.parts.push(new Ga({selector:"outline",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[e.stringers.out.coords[0],e.stringers.out.coords[1],e.stringers.out.coords[2],e.stringers.out.coords[3],e.stringers.in.coords[3],e.stringers.in.coords[2],e.stringers.in.coords[1],e.stringers.in.coords[0]]}})),this.parts.push(new lb({selector:"walk-line",floor:tt.all,parent:this,onUpdate:function(e){const t=e.walkWidth-e.walkLineOffset,i=e.alongWalkLine(e.steps),r=e.alongWalkLine(1);this.d=`\n        M${r[0]} ${r[1]}\n        L${r[0]} ${e.stairOrigin[1]+e.walkWidth}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${-e.walkLineOffset}\n        L${e.stairOrigin[0]+e.walkWidth} ${e.stairOrigin[1]+t}\n        L${e.stairOrigin[0]+e.totalWidth-e.walkWidth} ${e.stairOrigin[1]+t}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${e.walkLineOffset}\n        L${i[0]} ${i[1]}\n        `}}))}calculateCorrectionArray(){const e=this.walkLineOffset*Math.PI/2,t=(this.totalWidth-2*this.walkWidth)/2,i=(this.stepsRight+1)*this.run,s=this.totalRun-i-e-t,o=i-e-t;this.intersections={};const l=this.getEGMethod(s+e/2,this.alongWalkLine(1)[1]-(this.stairOrigin[1]+this.walkWidth),0,0*this.run,!1),u=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,l+0,0,!0),f=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,l+0+u,this.run,!1);this.getEGMethod(o+e/2,this.alongWalkLine(this.steps)[1]-(this.stairOrigin[1]+this.walkWidth),l+0+u+f,0*this.run,!0)}getEGMethod(e,t,i,r,s=!1){let o,a,c,l,u;const f=e-r,p=Math.ceil(f/this.run),g=t-r;s?(o=[0,0],a=[0,f],c=[-g,0],l=wne(g,-a[1]/g,a[1]),l=[-l[0],l[1]]):(o=[0,0],a=[0,f],c=[g,0],l=wne(g,-a[1]/g,a[1]));const _=[];for(let y=0;y<p+1;y++)u=s?[0,Math.min(this.run*(p-y),f)]:[0,Math.min(this.run*y,f)],_.push(wg([o,l],[u,c]));for(let y=0;y<p+1;y++)if(0!==y)try{let w;w=s?_[y+1]:_[y-1],this.intersections[i+y]=this.run-ja(w,_[y])}catch{}return p}alongStinger(e){let t=An((e-1)*this.run);const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,c=this.alongWalkLine(e),l=this.alongWalkLine(e+1),f=(h1(c,l),isNaN(this.intersections[e])?0:this.intersections[e]);return t<o-r-i/2?[this.stairOrigin[0]+this.walkWidth,c[1]+f]:t===o?[c[0],c[1]+f]:t<o?[c[0]+f,this.stairOrigin[1]+this.walkWidth]:t-o<r+i/2?[c[0]-f,this.stairOrigin[1]+this.walkWidth]:t===this.totalRun?[c[0]-f,c[1]]:[this.stairOrigin[0]+this.totalWidth-this.walkWidth,c[1]+f]}alongWalkLine(e){let t=(e-1)*this.run;const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,a=o-i-r;if(t<a){const[c,l]=[this.stairOrigin[0]+this.walkWidth-this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+a-t]}if(t<a+i)return t-=a,Zs(180+t/i*90,this.walkLineOffset,[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth]);if(t<o){t-=a+i;const[c,l]=[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+r){t-=o;const[c,l]=[this.stairOrigin[0]+this.totalWidth/2,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+r+i)return t-=o+r,Zs(t/i*90-90,this.walkLineOffset,[this.stairOrigin[0]+this.totalWidth-this.walkWidth,this.stairOrigin[1]+this.walkWidth]);{t-=o+r+i;const[c,l]=[this.stairOrigin[0]+this.totalWidth-this.walkWidth+this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+t]}}}class BUe extends qc{constructor(e){super(),this.origin=[0,0],this.scale=[1,1],this.rotate=0,Object.assign(this,e)}draw(e){var t=this;return ba(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=Ws(`#${t.selector}`),t.svg1=t.svg.select(".house-wind-rose-1"),t.svg2=t.svg.select(".house-wind-rose-2"),t.svgText=t.svg.select(".house-wind-rose-text")}t.svg.style("transform",` \n      translate(${t.origin[0]}px, ${t.origin[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svg1.attr("points",[[0,0],[10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svg2.attr("points",[[0,0],[-10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svgText.attr("font-size",12).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6).attr("transform",`\n          translate(0 ${-8*t.meterPerPixel}) \n          rotate(${t.rotate})\n          `).text("North")})()}}var un=(()=>{return(n=un||(un={})).gips="gips",n.serviceBeams="serviceBeams",n.osb="osb",n.joists="joist",n.outerSheet="outerSheet",n.space="space",n.facade="facade",n.groundFloorEdge="groundFloorEdge",n.roofJoists="roofJoists",un;var n})();class zu{constructor(e){Object.assign(this,e)}updateR(e){void 0!==e&&("Outside"===e.name&&(this.r=.04),void 0===this.r&&(this.r=this.diameter/this.lambda))}updateT(e,t,i){isNaN(this.r)||(this.deltaT=this.r/t*i,this.temp=e.temp+this.deltaT)}}class RUe{constructor(){this.tempMin=-10,this.tempMax=24,this.Thicknesses=un,this.thickness={[un.gips]:.0125,[un.serviceBeams]:.06,[un.osb]:.015,[un.joists]:.3,[un.outerSheet]:.06,[un.space]:.04,[un.facade]:.04,[un.roofJoists]:.4},this.crossDepth={},this.x=[]}get tempDiff(){return this.tempMax-this.tempMin}getRoofPoint(e){const[t,i]=Ae(this.cross.roofPoints[e],[-this.cross.wallOuterThickness,0]);return[t,i]}calculate(e){this.cross=e.cross;const t=(r,s,o=!1)=>{this.crossDepth[r]=An(Math.abs(this.crossDepth[s])+Math.abs(this.thickness[s])),o&&(this.crossDepth[r]=-Math.abs(this.crossDepth[r]))};this.crossDepth[un.joists]=0,this.crossDepth[un.osb]=0,this.crossDepth[un.groundFloorEdge]=.2,t(un.outerSheet,un.joists),t(un.space,un.outerSheet),t(un.facade,un.space),t(un.serviceBeams,un.osb,!0),t(un.gips,un.serviceBeams,!0);const i=[new zu({name:"Outside",temp:this.tempMin}),new zu({name:"r<sub>outside</sub>"}),new zu({name:"Wood",diameter:this.thickness[un.facade],lambda:.13}),new zu({name:"space",diameter:this.thickness[un.space],lambda:.001}),new zu({name:"Celit",diameter:this.thickness[un.outerSheet],lambda:.048}),new zu({name:"CLS+Glass wol",diameter:this.thickness[un.joists],lambda:.032}),new zu({name:"OBS",diameter:this.thickness[un.osb],lambda:.13}),new zu({name:"Isolated Installations",diameter:this.thickness[un.serviceBeams],lambda:.035}),new zu({name:"Dry wall / Gips ",diameter:this.thickness[un.gips],lambda:1.3}),new zu({name:"r<sub>inside</sub>"}),new zu({name:"Inside",temp:this.tempMax})];i.forEach((r,s)=>{r.updateR(i[s-1])}),this.rConstruction=An(j3(i.map(r=>r.r).filter(r=>r)),1),this.U=An(1/this.rConstruction,3),this.outerWallThickness=An(j3(i.map(r=>r.diameter).filter(r=>r)),3),i.forEach((r,s)=>{r.updateT(i[s-1],this.rConstruction,this.tempDiff)}),this.heatCalcs=i}}var CM=(()=>{return(n=CM||(CM={})).a="a",n.b="b",n.c="c",n.d="d",n.toilet="toilet",n.hall="hall",n.walkway="walkway",CM;var n})();class kUe extends class FUe{}{constructor(e){super(),this.outerBase=void 0,this.extensionToNorth=void 0,this.extensionToSouth=void 0,this.extensionToWest=void 0,this.extensionToEast=void 0,this.houseWidth=void 0,this.houseLength=void 0,this.gridSizeY=void 0,this.gridSizeX=void 0,this.centerHouse=[void 0,void 0],this.balconyEdge=-.3,this.balconyDepth=2.5,this.westRoomWidth=4,this.midRoomExtended=!0,this.eastRoomExtended=!0,this.serverRoom=[void 0,void 0],this.cross=new EUe,this.stair=new IUe,this.construction=new RUe,this.stats={wall:{},floor:{}},this.tower={show:void 0,innerCoords:void 0,outerCoords:void 0,outerWallOffset:void 0,width:void 0,houseIncrement:void 0,innerIncrement:void 0,outerIncrement:void 0,innerWallLength:void 0,outerWallLength:void 0,intersectionEast:void 0,intersectionWest:void 0,wallOuterThickness:void 0,footprintVisible:!1},Object.assign(this,e),window.house=this,this.calculateHouse(),this.linkParts(),this.calculateStats(),this.createStramien(),this.createGrid(),this.createMeasures(),this.createExtra()}createExtra(){this.parts.push(new Nk);const e=new l3({selector:"balcony-edge",floor:tt.ground,lineThickness:1,dash:[1,8],onUpdate:function(s){const o=s.stramien.in,a=s.balconyWidth+s.balconyEdge;this.coords=[[o.we.b,o.ns.b+a],[o.we.c,o.ns.b+a]]}});this.parts.push(e);const t=new l3({selector:"hall-edge",floor:tt.ground,lineThickness:1,dash:[1,8],onUpdate:function(s){const o=s.stramien.in,c=3*s.wallInnerThickness+2;this.coords=[[o.we.b,o.ns.b-c],[o.we.b+(s.stair.totalWidth-s.stair.walkWidth),o.ns.b-c]]}});this.parts.push(t);const i=new l3({selector:"view-lines",floor:tt.ground,lineThickness:3,onUpdate:function(s){const o=s.stramien.in,a=3*s.studDistance,c=o.we.b+1,l=o.ns.b+(o.ns.c-o.ns.b)/2;this.coords=[[c,s.stair.stairOrigin[1]],[c,o.ns.d+a],[c,l],[o.we.a-a,l],[o.we.d+a,l]]}});this.parts.push(i);const r=new Ga({selector:"tower-walls",floor:tt.all,onUpdate:function(s){this.visible=s.tower.footprintVisible,this.coords=[...s.tower.innerCoords,s.tower.innerCoords[0],...[...s.tower.outerCoords].reverse(),s.tower.outerCoords[7]]}});this.parts.push(r),this.parts.push(new l3({selector:"roof-line-1",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.b,o.ns.b],l=[o.we.b,o.ns.a];this.coords=[Ae([o.we.a,o.ns.b],[0,s.cross.minimumHeightWidth]),Ae(c,[s.cross.minimumHeightWidth,s.cross.minimumHeightWidth]),Ae(l,[s.cross.minimumHeightWidth,0])]}})),this.parts.push(new l3({selector:"roof-line-2",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=s.tower.show?[o.we.c,o.ns.b-s.tower.houseIncrement-s.cross.minimumHeightWidth]:[o.we.c,o.ns.b];this.coords=[Ae([o.we.c,o.ns.a],[-s.cross.minimumHeightWidth,0]),Ae(c,[-s.cross.minimumHeightWidth,s.cross.minimumHeightWidth])]}})),this.parts.push(new l3({selector:"roof-line-3",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.d,o.ns.b];this.coords=[Ae(s.tower.show?[o.we.c+s.tower.houseIncrement+s.cross.minimumHeightWidth,o.ns.b]:[o.we.c,o.ns.b],[-s.cross.minimumHeightWidth,s.cross.minimumHeightWidth]),Ae(c,[0,s.cross.minimumHeightWidth])]}})),this.parts.push(new l3({selector:"roof-line-4",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.c,o.ns.c];this.coords=[Ae([o.we.d,o.ns.c],[0,-s.cross.minimumHeightWidth]),Ae(c,[0,-s.cross.minimumHeightWidth])]}})),this.parts.push(new l3({selector:"roof-line-5",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.a,o.ns.c];this.coords=[Ae([o.we.b,o.ns.c],[0,-s.cross.minimumHeightWidth]),Ae(c,[0,-s.cross.minimumHeightWidth])]}}))}createMeasures(){this.parts.push(new f1({selector:"house-total-width",floor:tt.all,direction:90,textRotate:0,onUpdate:function(e){const t=e.houseLength+2*e.studDistance;this.offsetPixels=16,this.a=[e.stramien.out.we.a,t],this.b=[e.stramien.out.we.d,t]}}));for(let e=0;e<3;e++){const t=["a","b","c","d"];this.parts.push(new f1({selector:"house-width-"+(e+1),floor:tt.all,direction:90,textRotate:0,onUpdate:function(r){const s=r.houseLength+2*r.studDistance;this.offsetPixels=0,this.a=[r.stramien.out.we[t[e+0]],s],this.b=[r.stramien.out.we[t[e+1]],s]}}))}this.parts.push(new f1({selector:"house-height-1",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.b]}})),this.parts.push(new f1({selector:"house-height-inner",floor:tt.all,direction:180,textRotate:0,onUpdate:function(e){const t=1*-e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.in.ns.b],this.a=[t,e.stramien.in.ns.c]}})),this.parts.push(new f1({selector:"house-height-2",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.b],this.a=[t,e.stramien.out.ns.c]}})),this.parts.push(new f1({selector:"house-height-3",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.c],this.a=[t,e.stramien.out.ns.d]}})),this.parts.push(new f1({selector:"house-total-height",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=32,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.d]}}))}createStramien(){const e=3*this.studDistance,t=i=>"in"===i||"out"===i?tt.all:"ground"===i?tt.ground:"top"===i?tt.top:void 0;for(let i of["in","out","ground","top"])for(let r of["we","ns"])for(let s of Object.keys(CM)){const o=`house-stramien-${i}-${r}-${s}`;this.parts.push(new l3("ns"===r?{floor:t(i),selector:o,lineThickness:1.5,onUpdate:function(a){this.coords=[[-e,a.stramien[i][r][s]],[a.houseWidth+e,a.stramien[i][r][s]]]}}:{floor:t(i),selector:o,lineThickness:1.5,onUpdate:function(a){this.coords=[[a.stramien[i][r][s],-e],[a.stramien[i][r][s],a.houseLength+e]]}}))}}createGrid(){const e=3*this.studDistance;this.gridSizeY=Math.round(this.houseWidth/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountWest,this.studAmountWest+this.studAmount,this.studAmountWest+this.studAmount+this.studAmountEast].includes(i-1),o=new l3({selector:`grid-index-${i}.grid-vertical`,lineThickness:r?.8:.6,index:i,floor:tt.all,onUpdate:function(a){const c=(i-1)*a.studDistance;this.points=this.index<a.gridSizeY?[[c,-e],[c,a.houseLength+e]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}});o.createSelector(),this.parts.push(o)}this.gridSizeX=Math.round(this.houseLength/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountNorth,this.studAmountNorth+this.studAmount,this.studAmountNorth+this.studAmount+this.studAmountSouth].includes(i-1);this.parts.push(new l3({lineThickness:r?.8:.6,selector:`grid-index-${i}.grid-horizontal`,index:i,floor:tt.all,onUpdate:function(o){const a=(i-1)*o.studDistance;this.points=this.index<o.gridSizeX?[[-e,a],[o.houseWidth+e,a]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}}))}this.parts[".house-wind-rose"]=new BUe({rotate:0,floor:tt.all,parent:this,onUpdate:function(i){this.origin=[2,0]}})}linkParts(){const e=(t,i)=>{void 0!==t&&(t.parent=i,t.onUpdate(this),t.createSelector(),t.parts&&t.parts.forEach(r=>e(r,t)),this.partsFlatten.push(t))};this.partsFlatten=[],this.parts.forEach(t=>e(t,this))}calculateTower(){this.tower.wallOuterThickness=this.wallOuterThickness,this.tower.outerWallOffset=An(this.tower.wallOuterThickness*Math.tan(22.5*Math.PI/180)),this.tower.innerWallLength=this.towerWidth,this.tower.outerWallLength=2*this.tower.outerWallOffset+this.tower.innerWallLength,this.tower.show=this.showTower,this.tower.width=this.towerWidth,this.tower.houseIncrement=An(this.tower.outerWallLength/Math.sqrt(2)+this.tower.outerWallLength)}calculateHouse(){this.outerBase=An(this.studAmount*this.studDistance),this.extensionToSouth=this.studAmountSouth*this.studDistance,this.extensionToNorth=this.studAmountNorth*this.studDistance,this.extensionToEast=this.studAmountEast*this.studDistance,this.extensionToWest=this.studAmountWest*this.studDistance,this.calculateTower(),this.tower.show?this.extensionToNorth=Math.max(this.extensionToNorth,Math.ceil(this.tower.houseIncrement)):this.tower.houseIncrement=0;const e={we:{a:this.wallOuterThickness,b:this.extensionToWest+1*this.wallOuterThickness,c:this.extensionToWest+1*this.outerBase+-1*this.wallOuterThickness,d:this.extensionToEast+this.outerBase+this.extensionToWest+-1*this.wallOuterThickness},ns:{a:this.wallOuterThickness,b:this.extensionToNorth+1*this.wallOuterThickness,c:this.extensionToNorth+this.outerBase+-1*this.wallOuterThickness,d:this.extensionToNorth+this.outerBase+this.extensionToSouth+-1*this.wallOuterThickness}},t=e.we.b+(this.stair.totalWidth-this.stair.walkWidth),i=e.ns.b-5;this.stramien={in:e,out:{we:{a:e.we.a-this.wallOuterThickness,b:e.we.b-this.wallOuterThickness,c:e.we.c+this.wallOuterThickness,d:e.we.d+this.wallOuterThickness},ns:{a:e.ns.a-this.wallOuterThickness,b:e.ns.b-this.wallOuterThickness,c:e.ns.c+this.wallOuterThickness,d:e.ns.d+this.wallOuterThickness}},top:{we:{toilet:e.we.b+this.stair.totalWidth-this.stair.walkWidth,hall:e.we.b+this.stair.totalWidth+1},ns:{hall:i+1.5,walkway:e.ns.b+1+.5}},ground:{we:{hall:t},ns:{hall:i}}},this.centerHouse=[e.we.c-(e.we.c-e.we.b)/2,e.ns.c-(e.ns.c-e.ns.b)/2],this.stair.stairOrigin=[i,t],this.serverRoom=[this.stramien.in.we.c-1,this.stramien.in.ns.b-this.wallInnerThickness],this.houseWidth=An(this.stramien.out.we.d-this.stramien.out.we.a),this.houseLength=An(this.stramien.out.ns.d-this.stramien.out.ns.a),this.calculateTowerCoords(),this.cross.calculate(this),this.stair.calculate(this),this.construction.calculate(this)}calculateStats(){this.getWallLength(),this.getWallArea(),this.getFloorArea()}getWallLength(){this.stats.wall.innerLength=Math.ceil(j3(Object.values(this.partsFlatten).filter(e=>e instanceof Jn).map(e=>e.type===Fn.outer?e.getLength(ot.in):e.type===Fn.inner?e.getLength(ot.out)+e.getLength(ot.in):0))),this.stats.wall.outerLength=Math.ceil(j3(Object.values(this.partsFlatten).filter(e=>e instanceof Jn).filter(e=>e.type===Fn.outer).map(e=>e.getLength(ot.out)),1))}getWallArea(){this.stats.wall.innerArea=Math.ceil(j3(Object.values(this.partsFlatten).filter(e=>e instanceof Jn).map(e=>{let t=0;return e.type===Fn.inner&&(t+=e.getArea(ot.out)),t+=e.getArea(ot.in),t}))),this.stats.wall.outerArea=Math.ceil(j3(Object.values(this.partsFlatten).filter(e=>e instanceof Jn).filter(e=>e.type===Fn.outer).map(e=>e.getArea(ot.out)),1))}getFloorArea(){let e={};Object.keys(tt).map(t=>{e[t]={area:0,volume:0}}),this.partsFlatten.filter(t=>t instanceof k1).filter(t=>"innerFootprint"!==t.name).filter(t=>!t.hole).forEach(t=>{e[t.floor].area+=t.area(),e[t.floor].volume+=t.volume(),e[tt.all].area+=t.area(),e[tt.all].volume+=t.volume()}),Object.keys(tt).map(t=>{e[t]={area:An(e[t].area,0),volume:An(e[t].volume,0)}}),this.stats.floor=e}calculateTowerCoords(){!1===this.tower.show&&(this.tower.width=0,this.tower.outerWallOffset=0,this.tower.innerWallLength=0,this.tower.outerWallLength=0,this.tower.houseIncrement=0,this.tower.wallOuterThickness=0);let e=this.tower.wallOuterThickness/Math.cos(22.5*Math.PI/180);this.tower.innerIncrement=Math.sqrt(this.tower.innerWallLength**2/2),this.tower.outerIncrement=Math.sqrt(this.tower.outerWallLength**2/2);const t=[this.stramien.out.we.c+this.tower.outerWallOffset,this.stramien.out.ns.b-this.tower.innerIncrement-this.tower.innerWallLength-this.tower.outerWallOffset],i=t,r=Ae(t,[this.tower.width,0]),s=Zs(45,this.tower.width,r),o=Ae(s,[0,this.tower.width]),a=Zs(135,this.tower.width,o),c=Ae(a,[-this.tower.width,0]),l=Zs(225,this.tower.width,c),u=Ae(l,[0,-this.tower.width]);this.tower.innerCoords=[i,r,s,o,a,c,l,u],this.tower.outerCoords=[Zs(-112.5,e,i),Zs(-67.5,e,r),Zs(-22.5,e,s),Zs(22.5,e,o),Zs(67.5,e,a),Zs(112.5,e,c),Zs(157.5,e,l),Zs(202.5,e,u)],this.tower.intersectionWest=Ae(this.tower.outerCoords[0],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),this.tower.intersectionEast=Ae(this.tower.outerCoords[3],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),!1===this.tower.show&&(this.tower.intersectionWest=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.intersectionEast=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.innerCoords=[...Array(8).keys()].map(f=>[this.stramien.in.we.c,this.stramien.in.ns.b]),this.tower.outerCoords=[...Array(8).keys()].map(f=>[this.stramien.out.we.c,this.stramien.out.ns.b]))}redrawHouse(e){const t=(i,r)=>{r.parts.forEach(function(){var s=ba(function*(o){void 0!==o&&(yield o.update({...e,theme:i}),void 0!==o.parts&&t(i,o))});return function(o){return s.apply(this,arguments)}}())};e.graphic===_o.house2D&&(t(this,this),t(this.stair,this.stair)),e.graphic===_o.cross&&t(this.cross,this.cross),[_o.stairCross,_o.stairPlan].includes(e.graphic)&&t(this.stair,this.stair)}}class $o extends qc{constructor(e){super(),this.width=.8,this.height=2.3,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.outside=!1,Object.assign(this,e)}draw(e){var t=this;return ba(function*(){if(void 0===t.svg&&(t.svg=Ws(`#${t.selector}`),t.svgOpening=t.svg.select(".door-wall-opening"),t.svgSwing=t.svg.select(".door-swing")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgSwing.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,-t.width],[t.parent.thickness,-t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgSwing.attr("d",`M${t.parent.thickness},0 \n        L0,0  \n        L${-t.width},0  \n        A${t.width},${t.width} 0 0,1  \n        0,${-t.width}\n        L${t.parent.thickness},${-t.width}`)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgSwing&&this.svgSwing.attr("stroke-width",1*this.meterPerPixel)}}var V0=(()=>{return(n=V0||(V0={})).windowWall="windowWall",n.standard="standard",n.hexagon="hexagon",V0;var n})();class $a extends qc{constructor(e){super(),this.floor=tt.ground,this.windowForm=V0.standard,this.width=2,this.height=2,this.elevation=1,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.frameThickness=.1,this.frameDepth=.1,this.innerDepthFrame=.1,this.openable=!0,Object.assign(this,e)}get outerDepthFrame(){return this.innerDepthFrame+this.frameDepth}draw(e){var t=this;return ba(function*(){if(void 0===t.svg&&(t.svg=Ws(`#${t.selector}`),t.svgOpening=t.svg.select(".window-wall-opening"),t.svgPane=t.svg.select(".window-pane")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgPane.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,t.width],[t.parent.thickness,t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgPane.attr("d",`M${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.outerDepthFrame},${t.frameThickness}  \n          L${t.outerDepthFrame},0  \n          \n          L${t.outerDepthFrame},${t.width}  \n          L${t.outerDepthFrame},${t.width-t.frameThickness}  \n          L${t.innerDepthFrame},${t.width-t.frameThickness} \n          L${t.innerDepthFrame},${t.width}  \n\n          L${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.innerDepthFrame+t.frameDepth/2},${t.frameThickness}  \n          L${t.innerDepthFrame+t.frameDepth/2},${t.width-t.frameThickness}  \n          `)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgPane&&this.svgPane.attr("stroke-width",1*this.meterPerPixel)}}class O2 extends Pt{constructor(e){super(e),this.sensorType=Ge.lightBulb,Object.assign(this,e)}}class $3 extends Pt{constructor(e){super(e),this.sensorType=Ge.ventOut,this.offsetWall=0,this.size=200,Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}}class n2 extends Pt{constructor(e){super(e),this.offsetWall=0,this.size=20,this.verticalCableLength=0,this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Pipe length ${An(this.cableLength,1)}m`),t+=`<br>vertical pipe: ${An(this.verticalCableLength,1)}m`,t},Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}init(e,t){const i=t.cross.ceilingHeight,r=t.cross.topFloorThickness;this.sensorType===Ge.toilet?(this.size=120,this.elevation=0,this.verticalCableLength+=e===tt.top?i+2*r:r):this.sensorType===Ge.waterWarm?(this.size=20,this.elevation=1.6,this.verticalCableLength+=e===tt.ground?i-this.elevation+1*r:r+this.elevation):this.sensorType===Ge.drain&&(this.size=40,this.elevation=0,this.verticalCableLength+=e===tt.top?i+2*r:r)}}const PUe=[new k1({name:"Toilet-upstairs",function:"WC",floor:tt.top,onUpdate:function(n){const t=n.stramien.top.we.toilet-n.stramien.in.we.b-n.wallInnerThickness;this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-n.wallInnerThickness],this.squaredRoom(t,1)},parts:[new Jn({floor:tt.top,type:Fn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=Ae(this.parent.northWestCorner,[0,0]),this.sides={[ot.out]:[Ae(this.origin,[0,-n.wallInnerThickness]),Ae(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[this.parent.width,0])]}},parts:[new n2({sensorType:Ge.drain,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.5,0),[0,0]),t=this.parent.parent;this.points=[e,[e[0],t.northWestCorner[1]+t.height/2]]}}),new n2({sensorType:Ge.waterWarm,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.5,0),[0,0]);this.points=[e,Jt(n.serverRoom,e,!0),n.serverRoom]}})]}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,0]),this.sides={[ot.out]:[Ae(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),Ae(this.origin,[+n.wallInnerThickness,e.height+n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,e.height])]}}}),new Jn({floor:tt.top,type:Fn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,e.height]),this.sides={[ot.out]:[Ae(this.origin,[+n.wallInnerThickness,n.wallInnerThickness]),Ae(this.origin,[-e.width,n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[-e.width,0])]}},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,1);this.points=[e,Jt(n.serverRoom,e,!0),n.serverRoom]}}),new Pt({offsetWall:-.3,sensorType:Ge.lightSwitch,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,0,1),[0,n.wallInnerThickness]);this.points=[e,Jt(n.serverRoom,e,!0),n.serverRoom]}}),new $o({scale:[-1,1],rotate:-90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,0,0),[-n.wallInnerThickness,0])}})]}),new Jn({type:Fn.theoretic,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=Ae(e.northWestCorner,[0*e.width,1*e.height]),this.innerWallLength=e.height,this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,-this.innerWallLength])]}},parts:[new n2({sensorType:Ge.toilet,size:120,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.5,0),[n.cross.minimumHeightWidth+.1,0]);this.points=[e,Jt(n.serverRoom,e,!0),n.serverRoom]}})]}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"storage-upstairs",function:"KLK2",floor:tt.top,onUpdate:function(n){const t=n.stramien.top.we.toilet-n.stramien.in.we.b-n.wallInnerThickness;this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-2*n.wallInnerThickness-1],this.squaredRoom(t,1)},parts:[new Jn({floor:tt.top,type:Fn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=Ae(this.parent.northWestCorner,[0,0]),this.sides={[ot.out]:[Ae(this.origin,[0,-n.wallInnerThickness]),Ae(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[this.parent.width,0])]}}}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,0]),this.sides={[ot.out]:[Ae(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),Ae(this.origin,[+n.wallInnerThickness,e.height])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,e.height])]}},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,.8);this.points=[e,Jt(n.serverRoom,e,!1),n.serverRoom]}}),new $o({scale:[-1,1],rotate:180,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,0,0),[-n.wallInnerThickness,0])}})]}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"main-bedroom",function:"Sovrum 1",floor:tt.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.width=An(n.stramien.in.we.c-n.stramien.in.we.b),this.height=An(n.stramien.top.ns.hall-n.stramien.in.ns.a),this.center=Ae(this.northWestCorner,[this.width/2,this.height/2]),this.centralElectricity=this.center;const e=n.stair.totalWidth+n.wallInnerThickness,t=n.stramien.ground.ns.hall-n.wallInnerThickness-this.northWestCorner[1];this.coords=[this.northWestCorner,Ae(this.northWestCorner,[this.width,0]),Ae(this.northWestCorner,[this.width,this.height]),Ae(this.northWestCorner,[e,this.height]),Ae(this.northWestCorner,[e,t]),Ae(this.northWestCorner,[0,t])]},parts:[new Jn({floor:tt.top,type:Fn.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallOuterThickness,this.origin=Ae(this.parent.northWestCorner,[0,0]),this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[this.parent.width,0])]}},parts:[new Pt({offset:[0,.3],amount:2,sensorType:Ge.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,.5,-.4);this.points=[t,Jt(e,t,!0),e]}})]}),new Jn({floor:tt.top,type:Fn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[2],this.innerWallLength=ja(e.coords[3],e.coords[2]),this.sides={[ot.out]:[Ae(this.origin,[0,n.wallInnerThickness]),Ae(this.origin,[-(this.innerWallLength+n.wallInnerThickness),n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[-this.innerWallLength,0])]}},parts:[new $o({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,1,0),[0,0])}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-1);this.points=[t,Jt(e.serverRoom,t,!1),e.serverRoom]}}))]}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=e.coords[3],this.innerWallLength=ja(e.coords[4],e.coords[3]),this.sides={[ot.out]:[Ae(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),Ae(this.origin,[-n.wallInnerThickness,-this.innerWallLength+n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,-this.innerWallLength])]}}}),new Jn({name:"SouthLeft",floor:tt.top,type:Fn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[4],this.innerWallLength=ja(e.coords[5],e.coords[4]),this.sides={[ot.out]:[Ae(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),Ae(this.origin,[-this.innerWallLength,n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[-this.innerWallLength,0])]}},parts:[new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,0,.3);this.points=[t,Jt(e,t,!0),e]}}),new Pt({offset:[0,.3],amount:2,sensorType:Ge.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,0,0);this.points=[t,Jt(e,t,!0),e]}})]}),new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.centralElectricity;this.points=[e,Jt(n.serverRoom,e,!1),n.serverRoom]}}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[1,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,2]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"bathroom",function:"Badrum",floor:tt.top,onUpdate:function(n){const i=n.stramien.top.ns.hall+n.wallInnerThickness,s=n.stramien.in.ns.b-.5,o=n.tower.innerCoords[3][0]-2;this.northWestCorner=[n.stramien.top.we.hall+n.wallInnerThickness,i],this.center=Ae(this.northWestCorner,[2,2]),this.coords=[this.northWestCorner,[n.stramien.in.we.c,i],[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1],n.tower.innerCoords[2],[n.tower.innerCoords[3][0],s],[o,s],[o,n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]]},parts:[new Jn({floor:tt.top,type:Fn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=ja(e.coords[5],e.coords[6]),this.sides={[ot.out]:[Ae(e.coords[5],[0,n.wallInnerThickness]),Ae(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness])],[ot.in]:[Ae(e.coords[5],[0,0]),Ae(e.coords[6],[0,0])]}},parts:[new n2({sensorType:Ge.shower,onUpdate:function(n){const i=this.parent.getPosition(ot.in,0,n.tower.width);this.points=[Ae(i,[0,-.3]),i,Jt(n.serverRoom,i,!0),n.serverRoom]}}),new n2({sensorType:Ge.drain,size:50,onUpdate:function(n){const i=this.parent.getPosition(ot.in,0,n.tower.width);this.points=[Ae(i,[0,-.3]),i,Jt(n.serverRoom,i,!0),n.serverRoom]}})]}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[6],this.innerWallLength=ja(e.coords[6],e.coords[7]),this.sides={[ot.out]:[Ae(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness]),Ae(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness])],[ot.in]:[Ae(e.coords[6],[0,0]),Ae(e.coords[7],[0,0])]}}}),new Jn({name:"SouthLeft",floor:tt.top,type:Fn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=ja(e.coords[7],e.coords[8]),this.sides={[ot.out]:[Ae(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness]),Ae(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness])],[ot.in]:[Ae(e.coords[7],[0,0]),Ae(e.coords[8],[0,0])]}},parts:[new $o({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,1,0),[0,0])}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({amount:n===Ge.lightSwitch?2:1,sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-1);this.points=[t,Jt(e.serverRoom,t,!0),e.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=Ae(this.parent.getPosition(ot.in,1,-1),[0,e.wallInnerThickness]);this.points=[t,Jt(e.serverRoom,t,!0),e.serverRoom]}}))]}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[8],this.innerWallLength=ja(e.coords[8],e.coords[0]),this.sides={[ot.out]:[Ae(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness]),Ae(e.coords[0],[-n.wallInnerThickness,0])],[ot.in]:[Ae(e.coords[8],[0,0]),Ae(e.coords[0],[0,0])]}},parts:[new Pt({offsetWall:-.3,sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,1,-.5);this.points=[Ae(t,[-n.wallInnerThickness,0]),Jt(e,t,!0),e]}}),...[0,1,2].map(n=>new Pt({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:Ge.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(ot.in,(n+1)/4,0);this.points=[Ae(i,[1===n?-e.wallInnerThickness:0,0]),Ae(i,[0,0]),Jt(t,i,!1),t]}})),new n2({sensorType:Ge.drain,onUpdate:function(n){const t=this.parent,i=Ae(t.getPosition(ot.in,2/3,0),[.3,0]),r=Ae(t.getPosition(ot.in,1/3,0),[.3,0]);this.points=[i,r]}}),new n2({sensorType:Ge.drain,onUpdate:function(n){const i=Ae(this.parent.getPosition(ot.in,1/3,0),[.3,0]);this.points=[i,[i[0],n.stramien.in.ns.b-(.5+n.wallInnerThickness)]]}}),new n2({sensorType:Ge.waterWarm,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.6666666666666666,0),[.3,0]),t=Ae(this.parent.getPosition(ot.in,1/3,0),[.3,0]);this.points=[e,t]}}),new n2({sensorType:Ge.waterWarm,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.3333333333333333,0),[.3,0]);this.points=[e]}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=Ae(this.parent.getPosition(ot.in,1,-1),[-e.wallInnerThickness,0]);this.points=[t,Jt(e.serverRoom,t,!1),e.serverRoom]}}))]}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({sensorType:Ge.ventIn,size:400,onUpdate:function(n){const t=Ae(n.serverRoom,[0,-1]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({function:"Sovrum 2",name:"Upper-east",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=e.in.we.d-e.in.we.c-t,r=e.in.ns.c-e.top.ns.walkway-t;this.northWestCorner=[e.in.we.c+t,e.top.ns.walkway+t];const s=e.in.we.c-e.top.we.hall,o=e.in.ns.c+n.balconyEdge-n.balconyDepth-this.northWestCorner[1];this.coords=[this.northWestCorner,Ae(this.northWestCorner,[i,0]),Ae(this.northWestCorner,[i,r]),Ae(this.northWestCorner,[0,r])],n.eastRoomExtended&&this.coords.push(Ae(this.northWestCorner,[0,o]),Ae(this.northWestCorner,[-s,o]),Ae(this.northWestCorner,[-s,0])),this.center=Ae(this.northWestCorner,[i/2,r/2]),this.centralElectricity=this.center},parts:[new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){let e=6,t=1;n.eastRoomExtended||(e=0,t=1),this.drawByRoom(e,t,n,ti.outside,ti.straight)},parts:[...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,1);this.points=[t,Jt(e.serverRoom,t,!1),e.serverRoom]}})),new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,0,1);this.points=[t,Jt(e,t,!1),e]}}),new $o({scale:[1,-1],rotate:-90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,0,0),[0,0])}})]}),new Jn({type:Fn.theoretic,floor:tt.top,onUpdate:function(n){let e=1,t=2;n.eastRoomExtended||(e=1,t=2),this.drawByRoom(e,t,n,ti.straight,ti.straight)}}),new Jn({type:Fn.theoretic,floor:tt.top,onUpdate:function(n){let e=2,t=3;n.eastRoomExtended||(e=2,t=3),this.drawByRoom(e,t,n,ti.straight,ti.straight)}}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){let e=3,t=4,i=ti.inside;n.eastRoomExtended||(e=3,t=0,i=ti.outside),this.drawByRoom(e,t,n,ti.straight,i)}}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){n.eastRoomExtended||(this.visible=!1),this.drawByRoom(4,5,n,ti.inside,ti.outside)}}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){n.eastRoomExtended||(this.visible=!1),this.drawByRoom(5,6,n,ti.outside,ti.outside)}}),...[0,1,2,3].map(n=>new Pt({offset:[[0,3].includes(n)?.3:-.3,0],group:11,sensorType:Ge.socket,onUpdate:function(e){this.points=[Ae(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Pt({group:11,sensorType:Ge.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=Ae(t.coords[0],[1,0]);this.points=[i,t.coords[1],t.coords[2],t.coords[3],t.coords[0],Jt(e,t.coords[0],!1),e]}}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Jt(n.serverRoom,i,!0),n.serverRoom]}})]}),new k1({function:"Sovrum 3",name:"upper-mid",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=e.in.ns.c-e.top.ns.walkway-t,r=e.in.we.b-e.in.we.a-n.westRoomWidth-2*t;this.northWestCorner=[e.in.we.a+n.westRoomWidth+t,e.top.ns.walkway+t];const s=e.in.ns.c+n.balconyEdge-n.balconyDepth-this.northWestCorner[1],o=e.top.we.toilet-this.northWestCorner[0]-t;this.coords=n.midRoomExtended?[this.northWestCorner,Ae(this.northWestCorner,[o,0]),Ae(this.northWestCorner,[o,s]),Ae(this.northWestCorner,[r,s]),Ae(this.northWestCorner,[r,i]),Ae(this.northWestCorner,[0,i])]:[this.northWestCorner,Ae(this.northWestCorner,[r,0]),Ae(this.northWestCorner,[r,i]),Ae(this.northWestCorner,[0,i])],this.center=Ae(this.northWestCorner,[r/2,i/2]),this.centralElectricity=this.center},parts:[new Jn({floor:tt.top,type:Fn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ti.straight,ti.outside)},parts:[...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-1);this.points=[t,Jt(e.serverRoom,t,!1),e.serverRoom]}})),new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,1,-1);this.points=[t,Jt(e,t,!1),e]}}),new $o({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,1,0),[0,0])}})]}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){this.drawByRoom(1,2,n,ti.outside,ti.outside)},parts:[]}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){n.midRoomExtended||(this.visible=!1),this.drawByRoom(2,3,n,ti.outside,ti.inside)},parts:[]}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){n.midRoomExtended||(this.visible=!1),this.drawByRoom(3,4,n,ti.inside,ti.straight)},parts:[]}),new Jn({type:Fn.theoretic,floor:tt.top,onUpdate:function(n){let e=4,t=5;n.midRoomExtended||(e=2,t=3),this.drawByRoom(e,t,n,ti.straight,ti.straight)},parts:[]}),new Jn({type:Fn.theoretic,floor:tt.top,onUpdate:function(n){let e=5,t=0;n.midRoomExtended||(e=3,t=0),this.drawByRoom(e,t,n,ti.straight,ti.straight)},parts:[]}),...[0,1,2,3].map(n=>new Pt({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:Ge.socket,onUpdate:function(e){this.points=[Ae(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Pt({group:10,sensorType:Ge.socket,cableOnly:!0,onUpdate:function(n){const t=this.parent,i=Ae(t.coords[1],[-1,0]);this.points=[t.coords[1],t.coords[2],t.coords[3],t.coords[0],i]}}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Jt(n.serverRoom,i,!0),n.serverRoom]}})]}),new k1({function:"Sovrum 3",name:"upper-west",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.westRoomWidth;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(t,e.in.ns.c-this.northWestCorner[1])},parts:[new Jn({floor:tt.top,type:Fn.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=Ae(this.parent.northWestCorner,[0,0]),this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[this.parent.width,0])]}},parts:[new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,1,-1);this.points=[t,Jt(e,t,!1),e]}})]}),new Jn({type:Fn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,0]),this.sides={[ot.out]:[Ae(this.origin,[+n.wallInnerThickness,0]),Ae(this.origin,[+n.wallInnerThickness,e.height])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,e.height])]}},parts:[...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,1);this.points=[t,Jt(e.serverRoom,t,!1),e.serverRoom]}})),new $o({scale:[1,-1],rotate:0,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,0,0),[0,0])}})]}),new Jn({type:Fn.theoretic,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,e.height]),this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new Jn({type:Fn.theoretic,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new Pt({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:Ge.socket,onUpdate:function(e){this.points=[Ae(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Pt({group:10,sensorType:Ge.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=Ae(t.coords[1],[0,1]);this.points=[i,t.coords[2],t.coords[3],t.coords[0],t.coords[1],Jt(e,t.coords[1],!0),e]}}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Jt(n.serverRoom,i,!0),n.serverRoom]}})]}),new k1({name:"hall-walkway",function:"Passage",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=[e.in.we.b+n.stair.totalWidth,e.ground.ns.hall+n.stair.totalHeight],r=e.in.ns.c+n.balconyEdge,s=r-n.balconyDepth+t;this.coords=[[e.in.we.a+n.westRoomWidth+t,e.in.ns.b],[e.top.we.toilet,e.in.ns.b],[e.top.we.toilet,i[1]],i,[i[0],e.top.ns.hall],[e.top.we.hall,e.top.ns.hall],[e.top.we.hall,e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.top.ns.walkway],[e.in.we.c,e.top.ns.walkway]],n.eastRoomExtended&&this.coords.push([e.top.we.hall,e.top.ns.walkway],[e.top.we.hall,s],[e.in.we.c,s]),this.coords.push([e.in.we.c,r],[e.in.we.b,r]),n.midRoomExtended&&this.coords.push([e.in.we.b,s],[e.top.we.toilet,s],[e.top.we.toilet,e.top.ns.walkway]),this.coords.push([e.in.we.b,e.top.ns.walkway],[e.in.we.a+n.westRoomWidth+t,e.top.ns.walkway])},parts:[new Pt({offset:[0,.3],sensorType:Ge.pir,onUpdate:function(n){const e=n.serverRoom,t=[n.stramien.in.we.b+(n.stramien.in.we.c-n.stramien.in.we.b)/2,n.stramien.in.ns.b];this.points=[Ae(t,[-n.wallInnerThickness,0]),Jt(e,t,!0),e]}}),...[Ge.smoke,Ge.poe,Ge.wifi].map((n,e)=>new Pt({offset:[0,n===Ge.smoke?-1:.3],sensorType:n,onUpdate:function(t){const i=t.serverRoom,r=[t.stramien.in.we.b+(t.stramien.in.we.c-t.stramien.in.we.b)/2,t.stramien.in.ns.b];this.points=[Ae(r,[-t.wallInnerThickness,0]),Jt(i,r,!0),i]}})),new Pt({offset:[0,.3],group:10,sensorType:Ge.socket,onUpdate:function(n){this.points=[Ae([n.stramien.in.we.b,n.stramien.in.ns.b],[-1,0])]}}),new Pt({offset:[0,.3],group:10,sensorType:Ge.socket,onUpdate:function(n){this.points=[Ae([n.stramien.in.we.c,n.stramien.in.ns.b],[0,0])]}}),new O2({onUpdate:function(n){const t=Ae(this.parent.coords[0],[1,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"void",floor:tt.top,hole:!0,onUpdate:function(n){const e=[n.stramien.in.we.b,n.stramien.in.ns.c+n.balconyEdge],t=n.stramien.in.ns.d-e[1],i=n.stramien.in.we.c-n.stramien.in.we.b;this.coords=[e,Ae(e,[1*i,0*t]),Ae(e,[1*i,1*t]),Ae(e,[0*i,1*t])]}}),new k1({name:"voidStairs",floor:tt.top,hole:!0,onUpdate:function(n){const e=n.stair;this.northWestCorner=e.stairOrigin;const t=n.stramien.in.ns.b-e.stairOrigin[1]-2-3*n.wallInnerThickness,i=e.totalWidth;this.coords=[this.northWestCorner,Ae(this.northWestCorner,[i-e.walkWidth,0]),Ae(this.northWestCorner,[i-e.walkWidth,t]),Ae(this.northWestCorner,[0,t])]},parts:[new O2({onUpdate:function(n){const t=Ae(this.parent.northWestCorner,[n.stair.totalWidth/2,1]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]})];class Cg extends qc{constructor(e){super(),this.url="assets/svg/",this.filename="dude.svg",this.anchor=[0,0],this.rotation=0,this.scaler=1,this.scale=[1,1],this.lineThickness=.1,Object.assign(this,e)}draw(e){var t=this;return ba(function*(){if(void 0===t.svg){if(!t.show(e))return;yield t.loader()}t.show(e)?(t.transform=`translate(${t.anchor[0]},${t.anchor[1]}) rotate(${t.rotation}) scale(${t.scale[0]},${t.scale[1]})`,t.svg.attr("transform",t.transform),t.svg.attr("visibility","visible"),t.setClass(t.svg)):t.svg.attr("visibility","hidden")})()}redraw(e){!this.show(e)||this.svg&&this.svg.node().querySelectorAll("path, rect, circle, ellipse, line, polyline, polygon").forEach(t=>{t.style.strokeWidth=this.scaler*this.meterPerPixel*this.lineThickness+"px"})}loader(){var e=this;return ba(function*(){const t=yield fetch(`${e.url}${e.filename}`).then(a=>a.text());e.svg=Ws(`#${e.selector}`),e.classes.push(`svg-${e.filename.split(".")[0]}`);const i=/height="([0-9]+)[.]?\d*px"/gi,r=/width="([0-9]+)[.]?\d*px"/gi,s=Number(i.exec(t)[1]),o=Number(r.exec(t)[1]);e.svg.html(t.replace(i,`height="${s/1e3}px"`).replace(r,`width="${o/1e3}px"`)),e.scaler=s})()}}const HUe={studAmount:12,studDistance:.6,towerWidth:1,wallInnerThickness:.07,wallOuterThickness:.5,roofOuterThickness:.5,studAmountNorth:12,studAmountSouth:4,studAmountWest:12,studAmountEast:8,showTower:!0,balconyWidth:6.2,name:"Lindelund",orientation:{lat:55.9198711,lng:13.6533175,rotation:10},parts:[new Uk({floor:tt.ground,onUpdate:function(n){const e=n.stramien,t=n.tower;this.coords=[[e.in.we.b,e.in.ns.b],[e.in.we.b,e.in.ns.a],[e.in.we.c,e.in.ns.a],[e.in.we.c,t.innerCoords[0][1]],t.innerCoords[0],t.innerCoords[1],t.innerCoords[2],t.innerCoords[3],[t.innerCoords[3][0],e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.in.ns.c],[e.in.we.c,e.in.ns.c],[e.in.we.c,e.in.ns.d],[e.in.we.b,e.in.ns.d],[e.in.we.b,e.in.ns.c],[e.in.we.a,e.in.ns.c],[e.in.we.a,e.in.ns.b]]},parts:[...[...Array(17).keys()].map((n,e,t)=>{const i=[3,4,5,6,7];if([3,4,5,6,7].includes(n))return;const s=[0,11,14,17],o=t.length;return new Jn({type:Fn.outer,floor:tt.all,gable:[1,9,12,15].includes(n),tower:i.includes(n),onUpdate:function(a){const c=l=>l===i[0]||l===i[4]+1||s.includes(l)?ti.inside:s.includes(l)?void 0:ti.outside;this.drawByRoom(n,n+1!==o?n+1:0,a,c(n),c(n+1))},parts:[...16===n?[1,2].map(a=>new $a({rotate:90,width:.6,onUpdate:function(c){this.origin=this.parent.getPosition(ot.out,a/3,this.width/2)}})):[],...15===n?[new $a({windowForm:V0.hexagon,floor:tt.top,rotate:0,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(ot.out,.5,this.width/2)}}),...[1,2].map(a=>new $a({rotate:0,width:.9,onUpdate:function(c){this.origin=this.parent.getPosition(ot.out,a/3,this.width/2)}}))]:[],...14===n?[1,2].map(a=>new $a({rotate:-90,onUpdate:function(c){const l=this.parent;this.width=l.innerWallLength<5?l.innerWallLength/3-.2:1.4,this.origin=l.getPosition(ot.out,a/3,this.width/2)}})):[],...13===n?[1].map(a=>new $a({rotate:0,width:.6,onUpdate:function(c){const l=this.parent;this.origin=Ae(l.getPosition(ot.in,1,-.9),[-l.thickness,0])}})):[],...12===n?[1].map(a=>new $a({rotate:-90,floor:tt.all,elevation:0,windowForm:V0.windowWall,onUpdate:function(c){this.height=c.cross.elevations[Gt.topInside];const l=this.parent;this.width=l.innerWallLength,this.origin=l.getPosition(ot.out,a/2,this.width/2)}})):[],...11===n?[1].map(a=>new $a({rotate:180,width:.6,onUpdate:function(c){const l=this.parent;this.origin=Ae(l.getPosition(ot.in,0,this.width+.9),[l.thickness,0])}})):[],...10===n?[1].map(a=>new $a({rotate:-90,width:1.4,onUpdate:function(c){this.origin=this.parent.getPosition(ot.out,a/2,this.width/2)}})):[],...9===n?[new $a({windowForm:V0.hexagon,floor:tt.top,rotate:180,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(ot.out,.5,this.width/2)}}),...[0,1].map(a=>new $a({rotate:180,width:.8,onUpdate:function(c){this.origin=this.parent.getPosition(ot.out,a,this.width/2+(this.width+.8)*(0===a?1:-1))}})),...[0,1].map(a=>new $o({floor:tt.ground,scale:[-1,0===a?-1:1],outside:!0,onUpdate:function(c){const u=this.parent,f=u.innerWallLength/2;this.origin=Ae(u.origin,[0,0===a?f-this.width:f+this.width])}}))]:[],...8===n?[1].map(a=>new $a({rotate:90,width:.6,onUpdate:function(c){this.origin=this.parent.getPosition(ot.out,.5,this.width/2-c.wallOuterThickness/2)}})):[],...2===n?[1,2.5].map(a=>new $a({rotate:180,width:.9,onUpdate:function(c){this.origin=this.parent.getPosition(ot.out,a/3,this.width/2)}})):[],...1===n?[new $a({windowForm:V0.hexagon,floor:tt.top,rotate:90,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(ot.out,.5,this.width/2)}}),...[1,2].map(a=>new $a({rotate:90,width:.9,onUpdate:function(c){this.origin=this.parent.getPosition(ot.out,a/3,this.width/2)}}))]:[],...0===n?[new $o({outside:!0,width:1,height:2.7,floor:tt.ground,rotate:0,scale:[1,1],onUpdate:function(a){this.origin=Ae(this.parent.getPosition(ot.in,0,1.2+a.wallInnerThickness),[-a.wallOuterThickness,0])}}),...[2,5].map(a=>new $a({rotate:0,width:.9,onUpdate:function(c){this.origin=this.parent.getPosition(ot.out,(a+1)/8,this.width/2)}}))]:[]]})}).filter(n=>n),...[...Array(8).keys()].map((n,e,t)=>new Jn({type:Fn.outer,tower:!0,onUpdate:function(i){if(this.ceiling=i.cross.ceilingHeight,this.outOfDesign=!i.showTower,this.floor=n<3?tt.all:tt.tower,this.outOfDesign)return;const r=i.wallOuterThickness-i.wallInnerThickness,s=JSON.parse(JSON.stringify(i.tower.innerCoords));this.origin=[i.stramien.in.we.c,s[0][1]],this.innerWallLength=i.towerWidth-r;const o=7===n?0:n+1;0===n&&(s[n][0]=i.stramien.in.we.c),2===n&&(s[o][1]=i.stramien.in.ns.b),this.sides={[ot.out]:[i.tower.outerCoords[n],i.tower.outerCoords[o]],[ot.in]:[s[n],s[o]]}},parts:[...0===n?[new Pt({sensorType:Ge.socket,amount:2,group:4,onUpdate:function(i){const r=this.parent,s=r.getPosition(ot.in,0,0);this.points=[r.getPosition(ot.in,1,-.2),s,Jt(s,i.serverRoom,!0),i.serverRoom]}})]:[],...1===n?[new $o({outside:!0,rotate:135,scale:[1,1],floor:tt.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(ot.out,.5,-this.width/2))}}),new $a({rotate:135,scale:[1,1],floor:tt.top,width:.8,elevation:1,height:2,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(ot.out,.5,this.width/2))}})]:[],...2===n?[new Pt({sensorType:Ge.socket,amount:2,group:4,onUpdate:function(i){const s=this.parent.getPosition(ot.in,0,.2);this.points=[s,Jt(s,i.serverRoom,!0),i.serverRoom]}})]:[]]})).filter(n=>n)]}),new k1({name:"West",function:"Vardagsrum",floor:tt.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(e.in.we.b-e.in.we.a-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,3/4,0);this.points=[e,Jt(n,e,!1),n]}}),new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,1/4,0);this.points=[e,Jt(n,e,!1),n]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][1],[-1,0]);this.points=[e]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=Ae(this.parent.sides[ot.in][1],[-this.parent.parent.width/2,0]);this.points=[t]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][0],[1,0]);this.points=[e]}})]}),new Jn({type:Fn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(1,2,n,ti.straight,ti.straight)},parts:[new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][1],[0,-1]);this.points=[e]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][0],[0,1]);this.points=[e]}}),new $o({floor:tt.ground,scale:[1,-1],onUpdate:function(n){this.origin=Ae(this.parent.sides[ot.in][0],[0,this.parent.parent.height/2-this.width])}}),new $o({floor:tt.ground,scale:[1,1],onUpdate:function(n){this.origin=Ae(this.parent.sides[ot.in][0],[0,this.parent.parent.height/2+this.width])}}),...[Ge.dimmer,Ge.lightSwitch,Ge.temperature].map((n,e)=>new Pt({sensorType:n,offsetWall:Ge.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(ot.in,.3333333333333333,0);this.points=[i,Jt(t.serverRoom,i,!1),t.serverRoom]}}))]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[0,-.3],onUpdate:function(n){const t=Ae(this.parent.sides[ot.in][0],[-1,0]);this.points=[t]}}),new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][0],[-this.parent.parent.width/2,0]);this.points=[e]}}),new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][1],[1,0]);this.points=[e]}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][1],[0,1]);this.points=[e]}}),new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][0],[0,-1]);this.points=[e]}})]}),new Pt({sensorType:Ge.smoke,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.8*this.parent.width,.5*this.parent.height]),t=Ae(e,[0,.5*-this.parent.height]);this.points=[e,t,Jt(t,n.serverRoom,!1),n.serverRoom]}}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:1,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[e.width,e.height/2-1]),Ae(e.northWestCorner,[e.width,0]),Ae(e.northWestCorner,[0,0]),Ae(e.northWestCorner,[0,e.height/2-1])]}}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:2,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[0,e.height/2+1]),Ae(e.northWestCorner,[0,e.height]),Ae(e.northWestCorner,[e.width,e.height]),Ae(e.northWestCorner,[e.width,e.height/2+1])]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width-n.wallInnerThickness,0]);this.points=[t,Jt(n.serverRoom,t,!0),n.serverRoom]}}),new Pt({group:2,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width,e.height/2+1]);this.points=[Ae(e.northWestCorner,[e.width-n.wallInnerThickness,e.height/2+1]),t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),...[Ge.camera,Ge.poe].map(n=>new Pt({sensorType:n,cableType:bu.OutsidePOE,offset:[0,-1],onUpdate:function(e){const t=this.parent,i=Ae(t.northWestCorner,[t.width/2,-e.wallOuterThickness]);this.points=[i,Ae(i,[0,1]),e.serverRoom]}})),...[Ge.camera,Ge.poe].map(n=>new Pt({sensorType:n,cableType:bu.OutsidePOE,offset:[0,1],onUpdate:function(e){const t=this.parent,i=Ae(t.northWestCorner,[1,t.height+e.wallOuterThickness]);this.points=[i,Ae(i,[0,-1]),e.serverRoom]}})),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({sensorType:Ge.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"East",function:"Matplats",floor:tt.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.c+n.wallInnerThickness,e.in.ns.b],this.squaredRoom(e.in.we.d-e.in.we.c-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,.3333333333333333,0);this.points=[e,Jt(n.serverRoom,e,!1),n.serverRoom]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,1/3,0)]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,2/3,0)]}}),new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,3/4,0);this.points=[e,Jt(n,e,!0),n]}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[Ge.camera,Ge.poe].map(n=>new Pt({sensorType:n,cableType:bu.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,0);this.points=[Ae(t,[e.wallOuterThickness,0]),Ae(t,[-1,1]),e.serverRoom]}})),new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,1.5);this.points=[e,Jt(n.serverRoom,e,!1),n.serverRoom]}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Pt({group:3,amount:2,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,1/3,0)]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){this.points=[this.parent.getPosition(ot.in,2/3,0)]}}),new Pt({sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,1/4,0),t=this.parent.parent.northWestCorner;this.points=[e,Jt(e,t,!0),t,Jt(n,t,!0),n]}})]}),new Jn({type:Fn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(3,0,n,ti.straight,ti.straight)},parts:[...[Ge.dimmer,Ge.lightSwitch,Ge.temperature].map((n,e)=>new Pt({sensorType:n,offsetWall:Ge.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(ot.in,1,-1.5);this.points=[i,Jt(t.serverRoom,i,!1),t.serverRoom]}})),new $o({floor:tt.ground,scale:[1,1],rotate:180,onUpdate:function(n){this.origin=Ae(this.parent.sides[ot.in][1],[0,this.parent.parent.height/2-this.width])}}),new $o({floor:tt.ground,scale:[1,-1],rotate:180,onUpdate:function(n){this.origin=Ae(this.parent.sides[ot.in][1],[0,this.parent.parent.height/2+this.width])}})]}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[e.width,e.height/2-1]),Ae(e.northWestCorner,[e.width,0]),Ae(e.northWestCorner,[0,0]),Ae(e.northWestCorner,[0,e.height/2-1])]}}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[0,e.height/2+1]),Ae(e.northWestCorner,[0,e.height]),Ae(e.northWestCorner,[e.width,e.height]),Ae(e.northWestCorner,[e.width,e.height/2+1])]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const t=Ae(this.parent.northWestCorner,[0,0]);this.points=[t,Jt(n.serverRoom,t,!0),n.serverRoom]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[-n.wallInnerThickness,e.height/2+1]);this.points=[Ae(e.northWestCorner,[0,e.height/2+1]),t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new O2({sensorType:Ge.lightBulb,onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({sensorType:Ge.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"Central",function:"k\xf6k",floor:tt.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.d-n.stramien.in.ns.b)},parts:[new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=Ae(this.parent.northWestCorner,[this.parent.width,n.stramien.in.ns.c-n.stramien.in.ns.b]),this.sides={[ot.in]:[Ae(this.origin,[n.wallOuterThickness,+n.wallOuterThickness]),Ae(this.origin,[n.wallOuterThickness,this.innerWallLength+n.wallOuterThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,this.innerWallLength])]}},parts:[new Pt({group:4,amount:3,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,.5,0)]}}),new Pt({group:4,amount:2,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,0,-1)]}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,1.5);this.points=[e,Jt(n.serverRoom,e,!1),n.serverRoom]}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Cg({filename:"Table.svg",onUpdate:function(){this.rotation=0;const e=this.parent.getPosition(ot.in,0,2.6+.8);this.anchor=Ae(e,[0,-.8-1.6])}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=Ae(this.parent.northWestCorner,[0,n.stramien.in.ns.d-n.stramien.in.ns.b]),this.sides={[ot.in]:[Ae(this.origin,[-n.wallOuterThickness,+n.wallOuterThickness]),Ae(this.origin,[-n.wallOuterThickness,-this.innerWallLength+n.wallOuterThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,-this.innerWallLength])]}},parts:[new Pt({group:5,amount:6,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,.5,0)]}}),new Pt({group:5,amount:6,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,1,1)]}}),...[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].map(n=>new Cg({filename:"kitchen.svg",onUpdate:function(){let e=.6*n;n>4&&(e=.6*(n-5)),n>8&&(e=.6*(n-8)),n>12&&(e=-1.5);let t=-.6;n>4&&(t=1.2+.6),n>8&&(t=1.8),n>12&&(t=.6*(n-13)),this.rotation=0,n>4&&(this.rotation=180),n>8&&(this.rotation=0),n>12&&(this.rotation=-90),4===n&&(this.scale=[1,.4/.6],e-=.6-.6*this.scale[1]);const r=this.parent.getPosition(ot.in,1,e);this.anchor=Ae(r,[t,0])}})),new Cg({filename:"sink.svg",onUpdate:function(){this.rotation=-90;const e=this.parent.getPosition(ot.in,1,-1.5);this.anchor=Ae(e,[.6,0])}}),new Cg({filename:"induction.svg",onUpdate:function(){this.rotation=180;const e=this.parent.getPosition(ot.in,1,.6);this.anchor=Ae(e,[1.2+.6,0])}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[Ge.dimmer,Ge.lightSwitch,Ge.temperature].map((n,e)=>new Pt({sensorType:n,offsetWall:Ge.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(ot.in,1,-1.5);this.points=[i,Jt(t.serverRoom,i,!1),t.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map((n,e)=>new Pt({sensorType:n,onUpdate:function(t){const i=this.parent.getPosition(ot.in,0,1.5);this.points=[i,Jt(t.serverRoom,i,!1),t.serverRoom]}})),...[Ge.drain,Ge.waterWarm].map(n=>new n2({sensorType:n,onUpdate:function(e){const r=this.parent.getPosition(ot.in,0,1.5);this.points=[r,Jt(e.serverRoom,r,!0),e.serverRoom]}}))]}),new Jn({type:Fn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(0,1,n,ti.straight,ti.straight)},parts:[new $o({floor:tt.ground,rotate:90,scale:[-1,1],onUpdate:function(n){this.origin=this.parent.getPosition(ot.in,0,0)}})]}),new Pt({group:7,offset:[.6,0],sensorType:Ge.perilex,verticalCableLength:4,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[0,this.parent.height-2]);this.points=[e,Jt(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({group:4,cableOnly:!0,sensorType:Ge.socket,amount:2,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[Ae(this.parent.northWestCorner,[this.parent.width,this.parent.height]),Ae(this.parent.northWestCorner,[this.parent.width,0]),e,Jt(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({group:5,cableOnly:!0,sensorType:Ge.socket,amount:2,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[Ae(this.parent.northWestCorner,[0,this.parent.height]),Ae(this.parent.northWestCorner,[0,0]),e,Jt(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({group:5,amount:6,sensorType:Ge.socket,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=Ae(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,Jt(e,t,!0),t]}}),new Pt({group:5,amount:2,offset:[.3,0],sensorType:Ge.socket,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[0*this.parent.width,.15*this.parent.height]),t=Ae(this.parent.northWestCorner,[0,.15*this.parent.height]);this.points=[e,Jt(e,t,!0),t]}}),new Pt({group:4,amount:2,offset:[-.3,0],sensorType:Ge.socket,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]),t=Ae(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]);this.points=[e,Jt(e,t,!0),t]}}),new Pt({sensorType:Ge.smoke,verticalCableLength:6,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=Ae(this.parent.northWestCorner,[0*this.parent.width,.8*this.parent.height]),i=this.parent.northWestCorner;this.points=[e,t,i,Jt(i,n.serverRoom,!0),n.serverRoom]}}),new Pt({sensorType:Ge.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=Ae(this.parent.northWestCorner,[0,.5*this.parent.height-2]);this.points=[e,Jt(n,e,!1),n]}}),new Pt({sensorType:Ge.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=Ae(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,Jt(n,e,!1),n]}}),new Pt({offset:[-.3,0],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.serverRoom,e=Ae(this.parent.northWestCorner,[this.parent.width,.5*this.parent.height-2]);this.points=[e,Jt(n,e,!1),n]}}),new Pt({sensorType:Ge.pir,cableType:bu.SharedEthernet,offset:[0,.3],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,0]),i=Jt(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"Hall",function:"Entr\xe9",floor:tt.ground,onUpdate:function(n){this.northWestCorner=n.stair.stairOrigin,this.squaredRoom(n.stramien.ground.we.hall-n.stramien.in.we.b,n.stramien.in.ns.b-n.stramien.ground.ns.hall-n.wallInnerThickness)},parts:[new Pt({sensorType:Ge.pir,cableType:bu.SharedEthernet,offset:[-.3,0],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width,e.height-1]),i=Ae(e.northWestCorner,[e.width,e.height]);this.points=[t,i,n.serverRoom]}}),new Jn({type:Fn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(1,2,n,ti.straight,ti.straight)},parts:[new $o({scale:[1,1],rotate:0,floor:tt.ground,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,1,-.2),[-n.wallInnerThickness,0])}}),new $o({scale:[-1,1],rotate:0,floor:tt.ground,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.out,1,-(n.stramien.in.ns.b-n.tower.innerCoords[0][1]-1*n.wallInnerThickness-.9)),[-n.wallInnerThickness,0])}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,offsetWall:.3,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-2.5);this.points=[t,Jt(e.serverRoom,t,!1),e.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,offsetWall:-.3,onUpdate:function(e){const t=Ae(this.parent.getPosition(ot.in,1,-2.5),[e.wallInnerThickness,0]);this.points=[t,Jt(e.serverRoom,t,!1),e.serverRoom]}}))]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,2.5);this.points=[e,Jt(n.serverRoom,e,!1),n.serverRoom]}})]}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"Office",function:"Office",floor:tt.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.ground.ns.hall-n.stramien.in.ns.a-n.wallInnerThickness)},parts:[new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[2/6,4/6].map(n=>new Pt({offsetWall:.3,sensorType:Ge.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(ot.in,n,0);this.points=[t,Jt(e,t,!1),e]}}))]}),new Jn({floor:tt.ground,type:Fn.inner,onUpdate:function(n){this.drawByRoom(2,3,n,ti.straight,ti.straight)},parts:[new $o({rotate:90,floor:tt.ground,scale:[1,1],onUpdate:function(n){this.origin=this.parent.getPosition(ot.in,1,-(n.stair.totalWidth+n.wallInnerThickness-this.width))}}),...[0,1,2].map(n=>new Pt({amount:2,offsetWall:-.3,sensorType:Ge.socket,onUpdate:function(e){const i=this.parent.getPosition(ot.in,(n+1)/6,0);this.points=[i]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,offsetWall:.3,onUpdate:function(e){const i=this.parent.getPosition(ot.in,.5,0);this.points=[i,Jt(e.serverRoom,i,!1),e.serverRoom]}})),new Pt({sensorType:Ge.lightSwitch,offsetWall:-.3,onUpdate:function(n){const t=Ae(this.parent.getPosition(ot.in,.5,0),[0,n.wallInnerThickness]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[Ge.camera,Ge.poe].map(n=>new Pt({sensorType:n,cableType:bu.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,0);this.points=[Ae(t,[e.wallOuterThickness,0]),Ae(t,[-1,1]),e.serverRoom]}})),...[2/6,4/6].map(n=>new Pt({offsetWall:-.3,sensorType:Ge.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(ot.in,n,0);this.points=[t,Jt(e,t,!1),e]}}))]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[...[1/6,5/6].map(n=>new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(ot.in,n,0);this.points=[t,Jt(e,t,!1),e]}}))]}),new Pt({sensorType:Ge.smoke,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.5*this.parent.width,.5*this.parent.height]);this.points=[e,Jt(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({sensorType:Ge.socket,amount:2,via:tt.ceiling,group:6,offset:[0,.3],onUpdate:function(n){const i=Ae(this.parent.northWestCorner,[1,0]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[0,.3],onUpdate:function(n){const e=this.parent,i=Ae(e.northWestCorner,[e.width-1,0]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const e=this.parent,i=Ae(e.northWestCorner,[0,e.height-1]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const i=Ae(this.parent.northWestCorner,[0,1]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=Ae(e.northWestCorner,[e.width,1]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=Ae(e.northWestCorner,[e.width,e.height-1]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:6,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[0,e.height-1]),Ae(e.northWestCorner,[0,0]),Ae(e.northWestCorner,[e.width,0]),Ae(e.northWestCorner,[e.width,e.height]),Ae(e.northWestCorner,[.5*e.width,e.height]),Jt(n.serverRoom,Ae(e.northWestCorner,[.5*e.width,e.height]),!1),n.serverRoom]}}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({sensorType:Ge.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"Toilet",floor:tt.ground,function:"WC",onUpdate:function(n){const e=n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9;this.northWestCorner=[n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness,n.stramien.in.ns.b-e-n.wallInnerThickness],this.squaredRoom(.8,e)},parts:[new Jn({floor:tt.ground,type:Fn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ti.straight,ti.outside)},parts:[new n2({sensorType:Ge.toilet,size:120,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.5,0),[0,.2]);this.points=[e,Jt(n.serverRoom,e,!0),n.serverRoom]}})]}),new Jn({floor:tt.ground,type:Fn.inner,onUpdate:function(n){this.drawByRoom(1,2,n,ti.outside,ti.straight)},parts:[new n2({sensorType:Ge.drain,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.6666666666666666,0),[0,0]);this.points=[e,[e[0],this.parent.parent.northWestCorner[1]+.2]]}}),new n2({sensorType:Ge.waterWarm,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.6666666666666666,0),[0,0]);this.points=[e,Jt(n.serverRoom,e,!0),n.serverRoom]}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawByRoom(3,0,n,ti.straight,ti.straight)},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,.8);this.points=[e,Jt(n.serverRoom,e,!1),n.serverRoom]}})]}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"Server",function:"KLK",floor:tt.ground,onUpdate:function(n){const e=n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9,t=n.stramien.ground.we.hall+.8+2*n.wallInnerThickness;this.northWestCorner=[t,n.stramien.in.ns.b-e-n.wallInnerThickness],this.squaredRoom(n.stramien.in.we.c-t,e)},parts:[new Jn({floor:tt.ground,type:Fn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ti.straight,ti.straight)},parts:[...[0,1,2].map(n=>new Pt({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:Ge.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(ot.in,(n+1)/4,0);this.points=[Ae(i,[0,1===n?-e.wallInnerThickness:0]),Ae(i,[0,0]),Jt(t,i,!1),t]}}))]}),new Pt({sensorType:Ge.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,Jt(e,n.serverRoom,!0),n.serverRoom]}}),...[Ge.poe,Ge.wifi].map(n=>new Pt({offset:[0,.3],sensorType:n,onUpdate:function(e){const t=this.parent.center;this.points=[t,Jt(t,e.serverRoom,!0),e.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,offset:[0,.3],onUpdate:function(e){const t=this.parent,i=Ae(t.northWestCorner,[.2*t.width,0*t.height]),r=Ae(t.northWestCorner,[0*t.width,0*t.height]);this.points=[i,r,Jt(e.serverRoom,r,!1),e.serverRoom]}})),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({sensorType:Ge.ventIn,size:100,onUpdate:function(n){const t=this.parent.center;this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"Tower",floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,this.outOfDesign||(this.northWestCorner=[n.stramien.out.we.c-(n.wallOuterThickness-n.wallInnerThickness),n.tower.innerCoords[0][1]],this.center=Ae(this.northWestCorner,[1,1]),this.centralElectricity=this.center,this.coords=[this.northWestCorner,n.tower.innerCoords[0],n.tower.innerCoords[1],n.tower.innerCoords[2],n.tower.innerCoords[3],[n.tower.innerCoords[3][0],n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]])},parts:[new Jn({type:Fn.inner,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(6,0,n,ti.outside,ti.straight)},parts:[new $o({scale:[1,1],rotate:180,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=tt.ground,this.origin=this.parent.getPosition(ot.in,1,0))}})]}),new Jn({type:Fn.inner,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(5,6,n,ti.straight,ti.outside)},parts:[new $o({scale:[-1,1],rotate:-90,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=tt.ground,this.origin=this.parent.getPosition(ot.in,0,n.wallInnerThickness))}})]}),new Pt({sensorType:Ge.pir,cableType:bu.SharedEthernet,offset:[.3,0],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[0,e.height-1]),i=Jt(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),new k1({name:"Laundry",function:"Kl\xe4dv\xe5rd",floor:tt.ground,onUpdate:function(n){const t=n.stramien.in.we.c-n.stramien.ground.we.hall-n.wallInnerThickness,i=n.stramien.in.ns.b-n.stramien.ground.ns.hall-(n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9)-2*n.wallInnerThickness;this.northWestCorner=[n.stramien.ground.we.hall+n.wallInnerThickness,n.stramien.ground.ns.hall],this.squaredRoom(t,i)},parts:[new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new n2({sensorType:Ge.drain,onUpdate:function(n){const t=this.parent.parent.center;this.points=[t,Jt(n.serverRoom,t,!0),n.serverRoom]}}),...[Ge.waterCold,Ge.waterRain].map(n=>new n2({sensorType:n,offsetWall:n===Ge.waterRain?0:.3,onUpdate:function(e){const i=this.parent.getPosition(ot.in,n===Ge.waterRain?2/3:3/4,0);this.points=[i,Jt(e.serverRoom,i,!1),e.serverRoom]}})),...[Ge.waterCold,Ge.waterRain].map(n=>new n2({sensorType:n,offsetWall:n===Ge.waterRain?0:.3,onUpdate:function(e){const t=this.parent,i=t.getPosition(ot.in,n===Ge.waterRain?1/3:1/4,0),r=t.getPosition(ot.in,n===Ge.waterRain?2/3:3/4,0);this.points=[i,r]}})),new n2({sensorType:Ge.drain,onUpdate:function(n){const e=this.parent,t=e.parent,i=e.getPosition(ot.in,.5,0);this.points=[i,t.center]}})]}),new Jn({type:Fn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallInnerThickness)},parts:[]}),new Pt({sensorType:Ge.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,Jt(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({sensorType:Ge.ethernet,offset:[.3,0],onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=Ae(t.northWestCorner,[0*t.width,.5*t.height]);this.points=[i,Jt(e,i,!1),e]}}),new O2({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}}),new $3({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Jt(n.serverRoom,t,!1),n.serverRoom]}})]}),...PUe]};var xg=(()=>{return(n=xg||(xg={})).amount="amount",n.name="name",n.sizeOrVersion="sizeOrVersion",n.price="price",n.priceAvg="priceAvg",n.priceMax="priceMax",n.priceTotal="priceTotal",n.remarks="other",n.unit="unit",xg;var n})();class U0{constructor(e){this.sectionFold=!1,Object.assign(this,e)}}class oa{constructor(e){this.amount=1,this.type="single",Object.assign(this,e)}get calcPrice(){return An(this.amount*this.price,2)}get calcAmount(){return this.amount}}class xM extends oa{constructor(e){super(e),this.costs=[],this.type="group",this.collapsed=!1,Object.assign(this,e)}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}get calcPrice(){return Vx(this.costs.map(e=>e.calcPrice))}get calcAmount(){return Vx(this.costs.map(e=>e.amount))}}class zUe extends xM{constructor(e){super(e),this.costs=[],this.type="total",Object.assign(this,e)}get calcPrice(){return Vx(this.costs.map(e=>e.calcPrice))}get calcAmount(){return 0}get folded(){return'<span class="material-icons">remove</span>'}}let qo=(()=>{class n{constructor(t){this.appService=t,this.house$=new go(new kUe(HUe)),this.roomKeys=this.house$.value.partsFlatten.filter(i=>i instanceof k1).map(i=>i.selector),this.wallKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Jn).map(i=>i.selector),this.doorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof $o).map(i=>i.selector),this.windowKeys=this.house$.value.partsFlatten.filter(i=>i instanceof $a).map(i=>i.selector),this.sensorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Pt).map(i=>i.selector).sort((i,r)=>i.localeCompare(r)),this.exampleKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Cg).map(i=>i.selector).sort((i,r)=>i.localeCompare(r))}update(t="house",i,r,s){const o=this.house$.value;"house"===t&&(o[i]=r),"stair"===t&&(o.stair[i]=r),"cross"===t&&(o.cross[i]=r),"construction"===t&&(o.construction[i]=r),o.calculateHouse(),o.calculateStats(),this.house$.next(o),void 0!==s&&(this.appService.tag$.next(s),clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.appService.tag$.next(void 0)},600))}destroyParts(){const t=r=>{r.parts.forEach(function(){var s=ba(function*(o){o.svg=void 0,void 0!==o.parts&&t(o)});return function(o){return s.apply(this,arguments)}}())},i=this.house$.value;t(i),t(i.cross),t(i.stair)}getGroups(t){return[...new Set(Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Pt).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s)}getOutlets(t){return Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Pt).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return An(Object.values(this.house$.value.partsFlatten).filter(s=>s instanceof Pt).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}getWallLength(){const t=this.house$.value;return{innerLength:Math.ceil(j3(Object.values(t.partsFlatten).filter(s=>s instanceof Jn).map(s=>{let o=0;return s.type===Fn.inner&&(o+=s.getLength(ot.out)),o+=s.getLength(ot.in),o}))),outerLength:Math.ceil(j3(Object.values(t.partsFlatten).filter(s=>s instanceof Jn).filter(s=>s.type===Fn.outer).map(s=>s.getLength(ot.out)),1))}}getWallArea(){const t=this.house$.value;return{innerArea:Math.ceil(j3(Object.values(t.partsFlatten).filter(s=>s instanceof Jn).map(s=>{let o=0;return s.type===Fn.inner&&(o+=s.getArea(ot.out)),o+=s.getArea(ot.in),o}))),outerArea:Math.ceil(j3(Object.values(t.partsFlatten).filter(s=>s instanceof Jn).filter(s=>s.type===Fn.outer).map(s=>s.getArea(ot.out)),1))}}getT(t,i,r,s=(()=>!0),o=!0){const a=Ok(),c=Object.values(this.house$.value.partsFlatten.filter(l=>l instanceof t).filter(l=>s(l)).reduce((l,u)=>{const f=i.map(p=>`${u[p]}`).join(",");return f in l||(l[f]={count:0,part:u}),l[f].count+=t!==Pt||o?1:u.getLength(),l},{})).map(l=>{const u=new oa(r(l.part));return u.amount=An(l.count,1),u.uuid=a,u});if(c.length>1){const l=new xM({uuid:a,name:`${c[0].name}`,costs:c});return l[c[0].name]=!1,l}{if(!c[0])return;const l=c[0];return l.uuid=void 0,l}}}return n.\u0275fac=function(t){return new(t||n)(Xe(To))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bg=(()=>{class n{constructor(t,i){this.overlay=t,this.houseService=i,this.tooltipHTML$=new go(void 0),this.unsubscribe=new Je}attachPopup([t,i],r){this.detachOverlay(),this.origin=r instanceof Pt?r.svgIcon.node():r.svg.node(),this.overlayRef=this.overlay.create({positionStrategy:this.getPositionStrategy([t,i]),scrollStrategy:this.overlay.scrollStrategies.reposition(),hasBackdrop:!1}),this.overlayRef.backdropClick().pipe(D1(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.attachOverlay(r)}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach()}updateOverlay(){}attachOverlay(t){if(this.overlayRef&&!this.overlayRef.hasAttached()){const i=new qA(TUe);this.componentRef=this.overlayRef.attach(i),this.componentRef.instance.html=t.tooltip(this.houseService.house$.value)}}getPositionStrategy([t,i]){return this.overlay.position().flexibleConnectedTo(this.origin).withPositions([new cC({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"},0,-20),new cC({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"},0,20,"flipped")]).withPush(!0)}}return n.\u0275fac=function(t){return new(t||n)(Xe(z3),Xe(qo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OUe=(()=>{class n{constructor(t,i){this.appService=t,this.houseService=i,this.appService.states$.subscribe(r=>{this.states=r,this.house=this.houseService.house$.value,this.cross=this.house.cross,this.filterOut(),this.appService.update$.next()})}updateStateBasedOnSection(t,i){if(this.section===t)return;this.section=t;const r=this.appService.states$.value;this.buildState(r,[xc.grid],[_t.basics].includes(t)),this.buildState(r,[xc.silhouette],[_t.roofEdge].includes(t)),this.buildState(r,[xc.measure,xc.minimumHeight],[_t.stairBasic,_t.stairCheck,_t.stairPlan,_t.basics,_t.roof70,_t.roofCircle].includes(t)),this.buildState(r,[xc.doors],![_t.passiv,_t.welcome].includes(t)),this.buildState(r,[Ge.socket,Ge.perilex],[_t.wiredPower].includes(t)),this.buildState(r,[Ge.poe,Ge.ethernet,Ge.wifi],[_t.wiredEthernet].includes(t)),this.buildState(r,[Ge.ventIn,Ge.ventOut],[_t.wiredVent].includes(t)),this.buildState(r,[Ge.dimmer,Ge.dlc,Ge.lightBulb,Ge.lightSwitch],[_t.wiredLight].includes(t)),this.buildState(r,[Ge.toilet,Ge.shower,Ge.drain,Ge.waterCold,Ge.waterRain,Ge.waterWarm],[_t.wiredWater].includes(t)),this.buildState(r,[Ge.camera,Ge.alarm,Ge.smoke],[_t.wiredSafety].includes(t)),this.buildState(r,[Ge.pir],[_t.wiredExtra,_t.wiredSafety].includes(t)),this.buildState(r,[Ge.blinds,Ge.temperature],[_t.wiredExtra].includes(t)),this.statesForConstruction(r,t),this.appService.commitState(r)}statesForConstruction(t,i){const r=[];r.push(_t.constructionWallGips),this.buildState(t,[Di.gips],[...r].includes(i)),r.push(_t.constructionWallService),this.buildState(t,[Di.serviceBeams,Di.serviceInsulation],[...r].includes(i)),r.push(_t.constructionWallFacade),this.buildState(t,[Di.facade],[...r].includes(i)),r.push(_t.constructionWallSpace),this.buildState(t,[Di.space],[...r].includes(i)),r.push(_t.constructionRoofTiles),this.buildState(t,[Di.roofTiles],[...r].includes(i)),r.push(_t.constructionRoofSpace),this.buildState(t,[Di.roofSpace],[...r].includes(i)),r.push(_t.constructionRoofOuterSheet),r.push(_t.constructionWallOuterSheet),this.buildState(t,[Di.outerSheet,Di.roofOuterSheets],[...r].includes(i)),r.push(_t.constructionWallInsulation),this.buildState(t,[Di.insulation],[...r].includes(i)),r.push(_t.constructionRoofInside),this.buildState(t,[Di.roofOSB],[...r].includes(i)),r.push(_t.constructionRoofJoist),this.buildState(t,[Di.roofJoists],[...r].includes(i)),r.push(_t.constructionRoofRidge),this.buildState(t,[Di.roofRidge],[...r].includes(i)),r.push(_t.constructionFloor),this.buildState(t,[Di.topFloorJoists,Di.topFloorOSB],[...r].includes(i)),r.push(_t.constructionFloorLVL),this.buildState(t,[Di.floorLVL],[...r].includes(i)),r.push(_t.constructionWallTape),this.buildState(t,[Di.tapes],[...r].includes(i)),r.push(_t.constructionWallOSB),this.buildState(t,[Di.osbWall],[...r].includes(i)),r.push(_t.constructionWallJoists),this.buildState(t,[Di.joists],[...r].includes(i)),r.push(_t.constructionWallSole),this.buildState(t,[Di.sole],[...r].includes(i)),r.push(_t.constructionGroundFloor),this.buildState(t,[Di.groundFloor],[...r].includes(i)),r.push(_t.constructionCrawlerSpace),this.buildState(t,[Di.crawlerSpace],[...r].includes(i)),r.push(_t.constructionFoundation),this.buildState(t,[Di.foundation],[...r].includes(i))}filterOut(){this.house.tower.footprintVisible=this.states[xc.towerFootprint],this.house.partsFlatten.filter(t=>t instanceof $o).forEach(t=>t.visible=this.states[xc.doors]),this.house.partsFlatten.filter(t=>t instanceof Jn).filter(t=>t.type===Fn.theoretic).forEach(t=>t.outOfDesign=!this.states[xc.theoreticalWalls]),[...this.house.parts,...this.cross.parts,...this.house.stair.parts].filter(t=>t instanceof f1).forEach(t=>t.visible=this.states[xc.measure]),this.house.parts.filter(t=>t.selector.includes("house-stramien-")).forEach(t=>{t.visible=this.states[xc.stramien]}),this.house.parts.filter(t=>t.selector.includes("grid-index")).forEach(t=>{t.visible=this.states[xc.grid]}),this.house.partsFlatten.filter(t=>t instanceof Pt).forEach(t=>{t.visible=this.states[t.sensorType]}),this.house.partsFlatten.filter(t=>t instanceof Cg).forEach(t=>{t.visible=this.states[xc.examplePlan]})}buildState(t,i,r){i.forEach(s=>{t[s]=r})}}return n.\u0275fac=function(t){return new(t||n)(Xe(To),Xe(qo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var bM={prefix:"fab",iconName:"discord",icon:[640,512,[],"f392","M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"]},Qk={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};function uie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function hi(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?uie(Object(t),!0).forEach(function(i){N2(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uie(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function MM(n){return(MM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function hie(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function N2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wk(n,e){return function CYe(n){if(Array.isArray(n))return n}(n)||function bYe(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(c){s=!0,a=c}finally{try{!r&&null!=t.return&&t.return()}finally{if(s)throw a}}return i}}(n,e)||fie(n,e)||function SYe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dv(n){return function wYe(n){if(Array.isArray(n))return jk(n)}(n)||function xYe(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||fie(n)||function MYe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fie(n,e){if(n){if("string"==typeof n)return jk(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jk(n,e)}}function jk(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var die=function(){},$k={},pie={},gie=null,mie={mark:die,measure:die};try{typeof window<"u"&&($k=window),typeof document<"u"&&(pie=document),typeof MutationObserver<"u"&&(gie=MutationObserver),typeof performance<"u"&&(mie=performance)}catch{}var TM,LM,DM,IM,BM,Aie=($k.navigator||{}).userAgent,vie=void 0===Aie?"":Aie,Qd=$k,Sa=pie,_ie=gie,EM=mie,nf=!!Sa.documentElement&&!!Sa.head&&"function"==typeof Sa.addEventListener&&"function"==typeof Sa.createElement,yie=~vie.indexOf("MSIE")||~vie.indexOf("Trident/"),rf="___FONT_AWESOME___",Cie="svg-inline--fa",C5="data-fa-i2svg",Kk="data-fa-pseudo-element",Xk="data-prefix",Yk="data-icon",xie="fontawesome-i2svg",DYe=["HTML","HEAD","STYLE","SCRIPT"],bie=function(){try{return!0}catch{return!1}}(),Ea="classic",P1="sharp",Zk=[Ea,P1];function Iv(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[Ea]}})}var Bv=Iv((N2(TM={},Ea,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),N2(TM,P1,{fa:"solid",fass:"solid","fa-solid":"solid"}),TM)),Rv=Iv((N2(LM={},Ea,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),N2(LM,P1,{solid:"fass"}),LM)),Fv=Iv((N2(DM={},Ea,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),N2(DM,P1,{fass:"fa-solid"}),DM)),IYe=Iv((N2(IM={},Ea,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),N2(IM,P1,{"fa-solid":"fass"}),IM)),BYe=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,Mie="fa-layers-text",RYe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,FYe=Iv((N2(BM={},Ea,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),N2(BM,P1,{900:"fass"}),BM)),Sie=[1,2,3,4,5,6,7,8,9,10],kYe=Sie.concat([11,12,13,14,15,16,17,18,19,20]),PYe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],kv=new Set;Object.keys(Rv[Ea]).map(kv.add.bind(kv)),Object.keys(Rv[P1]).map(kv.add.bind(kv));var HYe=[].concat(Zk,Dv(kv),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(Sie.map(function(n){return"".concat(n,"x")})).concat(kYe.map(function(n){return"w-".concat(n)})),Pv=Qd.FontAwesomeConfig||{};Sa&&"function"==typeof Sa.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=Wk(n,2),i=e[1],r=function OYe(n){return""===n||"false"!==n&&("true"===n||n)}(function zYe(n){var e=Sa.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(Pv[i]=r)});var Eie={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:Cie,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Pv.familyPrefix&&(Pv.cssPrefix=Pv.familyPrefix);var Mg=hi(hi({},Eie),Pv);Mg.autoReplaceSvg||(Mg.observeMutations=!1);var bi={};Object.keys(Eie).forEach(function(n){Object.defineProperty(bi,n,{enumerable:!0,set:function(t){Mg[n]=t,Hv.forEach(function(i){return i(bi)})},get:function(){return Mg[n]}})}),Object.defineProperty(bi,"familyPrefix",{enumerable:!0,set:function(e){Mg.cssPrefix=e,Hv.forEach(function(t){return t(bi)})},get:function(){return Mg.cssPrefix}}),Qd.FontAwesomeConfig=bi;var Hv=[],G0={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function zv(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function Sg(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function Jk(n){return n.classList?Sg(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function Tie(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function RM(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function eP(n){return n.size!==G0.size||n.x!==G0.x||n.y!==G0.y||n.rotate!==G0.rotate||n.flipX||n.flipY}function Lie(){var n="fa",e=Cie,t=bi.cssPrefix,i=bi.replacementClass,r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return r}var Die=!1;function tP(){bi.autoAddCss&&!Die&&(function UYe(n){if(n&&nf){var e=Sa.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=Sa.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}Sa.head.insertBefore(e,i)}}(Lie()),Die=!0)}var qYe={mixout:function(){return{dom:{css:Lie,insertCss:tP}}},hooks:function(){return{beforeDOMElementCreation:function(){tP()},beforeI2svg:function(){tP()}}}},sf=Qd||{};sf[rf]||(sf[rf]={}),sf[rf].styles||(sf[rf].styles={}),sf[rf].hooks||(sf[rf].hooks={}),sf[rf].shims||(sf[rf].shims=[]);var Ou=sf[rf],Iie=[],FM=!1;function XYe(n){!nf||(FM?setTimeout(n,0):Iie.push(n))}function Ov(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,s=void 0===r?[]:r;return"string"==typeof n?Tie(n):"<".concat(e," ").concat(function QYe(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(Tie(n[t]),'" ')},"").trim()}(i),">").concat(s.map(Ov).join(""),"</").concat(e,">")}function Bie(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}nf&&((FM=(Sa.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Sa.readyState))||Sa.addEventListener("DOMContentLoaded",function n(){Sa.removeEventListener("DOMContentLoaded",n),FM=1,Iie.map(function(e){return e()})}));var nP=function(e,t,i,r){var c,l,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(c=1,u=e[s[0]]):(c=0,u=i);c<o;c++)u=a(u,e[l=s[c]],l,e);return u};function iP(n){var e=function ZYe(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function Rie(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function rP(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,s=Rie(e);"function"!=typeof Ou.hooks.addPack||r?Ou.styles[n]=hi(hi({},Ou.styles[n]||{}),s):Ou.hooks.addPack(n,Rie(e)),"fas"===n&&rP("fa",e)}var kM,PM,HM,Eg=Ou.styles,eZe=Ou.shims,tZe=(N2(kM={},Ea,Object.values(Fv[Ea])),N2(kM,P1,Object.values(Fv[P1])),kM),sP=null,Fie={},kie={},Pie={},Hie={},zie={},nZe=(N2(PM={},Ea,Object.keys(Bv[Ea])),N2(PM,P1,Object.keys(Bv[P1])),PM);function rZe(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function iZe(n){return~HYe.indexOf(n)}(r)?null:r}var Oie=function(){var e=function(s){return nP(Eg,function(o,a,c){return o[c]=nP(a,s,{}),o},{})};Fie=e(function(r,s,o){return s[3]&&(r[s[3]]=o),s[2]&&s[2].filter(function(c){return"number"==typeof c}).forEach(function(c){r[c.toString(16)]=o}),r}),kie=e(function(r,s,o){return r[o]=o,s[2]&&s[2].filter(function(c){return"string"==typeof c}).forEach(function(c){r[c]=o}),r}),zie=e(function(r,s,o){var a=s[2];return r[o]=o,a.forEach(function(c){r[c]=o}),r});var t="far"in Eg||bi.autoFetchSvg,i=nP(eZe,function(r,s){var o=s[0],a=s[1],c=s[2];return"far"===a&&!t&&(a="fas"),"string"==typeof o&&(r.names[o]={prefix:a,iconName:c}),"number"==typeof o&&(r.unicodes[o.toString(16)]={prefix:a,iconName:c}),r},{names:{},unicodes:{}});Pie=i.names,Hie=i.unicodes,sP=zM(bi.styleDefault,{family:bi.familyDefault})};function oP(n,e){return(Fie[n]||{})[e]}function b5(n,e){return(zie[n]||{})[e]}function Nie(n){return Pie[n]||{prefix:null,iconName:null}}function jd(){return sP}function zM(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.family,i=void 0===t?Ea:t,r=Bv[i][n],s=Rv[i][n]||Rv[i][r],o=n in Ou.styles?n:null;return s||o||null}(function VYe(n){Hv.push(n)})(function(n){sP=zM(n.styleDefault,{family:bi.familyDefault})}),Oie();var Vie=(N2(HM={},Ea,Object.keys(Fv[Ea])),N2(HM,P1,Object.keys(Fv[P1])),HM);function OM(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.skipLookups,r=void 0!==i&&i,s=(N2(e={},Ea,"".concat(bi.cssPrefix,"-").concat(Ea)),N2(e,P1,"".concat(bi.cssPrefix,"-").concat(P1)),e),o=null,a=Ea;(n.includes(s[Ea])||n.some(function(l){return Vie[Ea].includes(l)}))&&(a=Ea),(n.includes(s[P1])||n.some(function(l){return Vie[P1].includes(l)}))&&(a=P1);var c=n.reduce(function(l,u){var f=rZe(bi.cssPrefix,u);if(Eg[u]?(u=tZe[a].includes(u)?IYe[a][u]:u,o=u,l.prefix=u):nZe[a].indexOf(u)>-1?(o=u,l.prefix=zM(u,{family:a})):f?l.iconName=f:u!==bi.replacementClass&&u!==s[Ea]&&u!==s[P1]&&l.rest.push(u),!r&&l.prefix&&l.iconName){var p="fa"===o?Nie(l.iconName):{},g=b5(l.prefix,l.iconName);p.prefix&&(o=null),l.iconName=p.iconName||g||l.iconName,l.prefix=p.prefix||l.prefix,"far"===l.prefix&&!Eg.far&&Eg.fas&&!bi.autoFetchSvg&&(l.prefix="fas")}return l},{prefix:null,iconName:null,rest:[]});return(n.includes("fa-brands")||n.includes("fab"))&&(c.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(c.prefix="fad"),!c.prefix&&a===P1&&(Eg.fass||bi.autoFetchSvg)&&(c.prefix="fass",c.iconName=b5(c.prefix,c.iconName)||c.iconName),("fa"===c.prefix||"fa"===o)&&(c.prefix=jd()||"fas"),c}var aZe=function(){function n(){(function vYe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function _Ye(n,e,t){e&&hie(n.prototype,e),t&&hie(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=hi(hi({},t.definitions[a]||{}),o[a]),rP(a,o[a]);var c=Fv[Ea][a];c&&rP(c,o[a]),Oie()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,c=o.iconName,l=o.icon,u=l[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(f){"string"==typeof f&&(t[a][f]=l)}),t[a][c]=l}),t}}]),n}(),Uie=[],Tg={},Lg={},cZe=Object.keys(Lg);function cP(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=Tg[n]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function M5(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=Tg[n]||[];r.forEach(function(s){s.apply(null,t)})}function af(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Lg[n]?Lg[n].apply(null,e):void 0}function lP(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||jd();if(e)return e=b5(t,e)||e,Bie(Gie.definitions,t,e)||Bie(Ou.styles,t,e)}var Gie=new aZe,hZe={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nf?(M5("beforeI2svg",e),af("pseudoElements2svg",e),af("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===bi.autoReplaceSvg&&(bi.autoReplaceSvg=!0),bi.observeMutations=!0,XYe(function(){dZe({autoReplaceSvgRoot:t}),M5("watch",e)})}},fZe={icon:function(e){if(null===e)return null;if("object"===MM(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:b5(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=zM(e[0]);return{prefix:i,iconName:b5(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(bi.cssPrefix,"-"))>-1||e.match(BYe))){var r=OM(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||jd(),iconName:b5(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var s=jd();return{prefix:s,iconName:b5(s,e)||e}}}},q3={noAuto:function(){bi.autoReplaceSvg=!1,bi.observeMutations=!1,M5("noAuto")},config:bi,dom:hZe,parse:fZe,library:Gie,findIconDefinition:lP,toHtml:Ov},dZe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,i=void 0===t?Sa:t;(Object.keys(Ou.styles).length>0||bi.autoFetchSvg)&&nf&&bi.autoReplaceSvg&&q3.dom.i2svg({node:i})};function NM(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return Ov(i)})}}),Object.defineProperty(n,"node",{get:function(){if(nf){var i=Sa.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function uP(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,o=n.transform,a=n.symbol,c=n.title,l=n.maskId,u=n.titleId,f=n.extra,p=n.watchable,g=void 0!==p&&p,_=i.found?i:t,y=_.width,w=_.height,C="fak"===r,b=[bi.replacementClass,s?"".concat(bi.cssPrefix,"-").concat(s):""].filter(function(k){return-1===f.classes.indexOf(k)}).filter(function(k){return""!==k||!!k}).concat(f.classes).join(" "),M={children:[],attributes:hi(hi({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:b,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(y," ").concat(w)})},T=C&&!~f.classes.indexOf("fa-fw")?{width:"".concat(y/w*16*.0625,"em")}:{};g&&(M.attributes[C5]=""),c&&(M.children.push({tag:"title",attributes:{id:M.attributes["aria-labelledby"]||"title-".concat(u||zv())},children:[c]}),delete M.attributes.title);var I=hi(hi({},M),{},{prefix:r,iconName:s,main:t,mask:i,maskId:l,transform:o,symbol:a,styles:hi(hi({},T),f.styles)}),F=i.found&&t.found?af("generateAbstractMask",I)||{children:[],attributes:{}}:af("generateAbstractIcon",I)||{children:[],attributes:{}},R=F.attributes;return I.children=F.children,I.attributes=R,a?function gZe(n){var t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,o=!0===s?"".concat(n.prefix,"-").concat(bi.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:hi(hi({},r),{},{id:o}),children:i}]}]}(I):function pZe(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,o=n.transform;if(eP(o)&&t.found&&!i.found){var l={x:t.width/t.height/2,y:.5};r.style=RM(hi(hi({},s),{},{"transform-origin":"".concat(l.x+o.x/16,"em ").concat(l.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(I)}function Qie(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,o=n.extra,a=n.watchable,c=void 0!==a&&a,l=hi(hi(hi({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});c&&(l[C5]="");var u=hi({},o.styles);eP(r)&&(u.transform=function jYe(n){var e=n.transform,t=n.width,r=n.height,s=void 0===r?16:r,o=n.startCentered,a=void 0!==o&&o,c="";return c+=a&&yie?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-s/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(c+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var f=RM(u);f.length>0&&(l.style=f);var p=[];return p.push({tag:"span",attributes:l,children:[e]}),s&&p.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),p}function mZe(n){var e=n.content,t=n.title,i=n.extra,r=hi(hi(hi({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=RM(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var hP=Ou.styles;function fP(n){var e=n[0],t=n[1],s=Wk(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(bi.cssPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(bi.cssPrefix,"-").concat("secondary"),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(bi.cssPrefix,"-").concat("primary"),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var AZe={found:!1,width:512,height:512};function dP(n,e){var t=e;return"fa"===e&&null!==bi.styleDefault&&(e=jd()),new Promise(function(i,r){if(af("missingIconAbstract"),"fa"===t){var o=Nie(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&hP[e]&&hP[e][n])return i(fP(hP[e][n]));(function vZe(n,e){!bie&&!bi.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(hi(hi({},AZe),{},{icon:bi.showMissingIcons&&n&&af("missingIconAbstract")||{}}))})}var Wie=function(){},pP=bi.measurePerformance&&EM&&EM.mark&&EM.measure?EM:{mark:Wie,measure:Wie},Nv='FA "6.2.0"',gP_begin=function(e){return pP.mark("".concat(Nv," ").concat(e," begins")),function(){return function(e){pP.mark("".concat(Nv," ").concat(e," ends")),pP.measure("".concat(Nv," ").concat(e),"".concat(Nv," ").concat(e," begins"),"".concat(Nv," ").concat(e," ends"))}(e)}},VM=function(){};function $ie(n){return"string"==typeof(n.getAttribute?n.getAttribute(C5):null)}function xZe(n){return Sa.createElementNS("http://www.w3.org/2000/svg",n)}function bZe(n){return Sa.createElement(n)}function qie(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,i=void 0===t?"svg"===n.tag?xZe:bZe:t;if("string"==typeof n)return Sa.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){r.setAttribute(o,n.attributes[o])});var s=n.children||[];return s.forEach(function(o){r.appendChild(qie(o,{ceFn:i}))}),r}var UM={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(qie(r),t)}),null===t.getAttribute(C5)&&bi.keepOriginalSource){var i=Sa.createComment(function MZe(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~Jk(t).indexOf(bi.replacementClass))return UM.replace(e);var r=new RegExp("".concat(bi.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,c){return c===bi.replacementClass||c.match(r)?a.toSvg.push(c):a.toNode.push(c),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return Ov(a)}).join("\n");t.setAttribute(C5,""),t.innerHTML=o}};function Kie(n){n()}function Xie(n,e){var t="function"==typeof e?e:VM;if(0===n.length)t();else{var i=Kie;"async"===bi.mutateApproach&&(i=Qd.requestAnimationFrame||Kie),i(function(){var r=function CZe(){return!0===bi.autoReplaceSvg?UM.replace:UM[bi.autoReplaceSvg]||UM.replace}(),s=gP_begin("mutate");n.map(r),s(),t()})}}var mP=!1;function Yie(){mP=!0}function AP(){mP=!1}var GM=null;function Zie(n){if(_ie&&bi.observeMutations){var e=n.treeCallback,t=void 0===e?VM:e,i=n.nodeCallback,r=void 0===i?VM:i,s=n.pseudoElementsCallback,o=void 0===s?VM:s,a=n.observeMutationsRoot,c=void 0===a?Sa:a;GM=new _ie(function(l){if(!mP){var u=jd();Sg(l).forEach(function(f){if("childList"===f.type&&f.addedNodes.length>0&&!$ie(f.addedNodes[0])&&(bi.searchPseudoElements&&o(f.target),t(f.target)),"attributes"===f.type&&f.target.parentNode&&bi.searchPseudoElements&&o(f.target.parentNode),"attributes"===f.type&&$ie(f.target)&&~PYe.indexOf(f.attributeName))if("class"===f.attributeName&&function yZe(n){var e=n.getAttribute?n.getAttribute(Xk):null,t=n.getAttribute?n.getAttribute(Yk):null;return e&&t}(f.target)){var p=OM(Jk(f.target)),_=p.iconName;f.target.setAttribute(Xk,p.prefix||u),_&&f.target.setAttribute(Yk,_)}else(function wZe(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(bi.replacementClass)})(f.target)&&r(f.target)})}}),nf&&GM.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function EZe(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function TZe(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=OM(Jk(n));return r.prefix||(r.prefix=jd()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function sZe(n,e){return(kie[n]||{})[e]}(r.prefix,n.innerText)||oP(r.prefix,iP(n.innerText))),!r.iconName&&bi.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function LZe(n){var e=Sg(n.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return bi.autoA11y&&(t?e["aria-labelledby"]="".concat(bi.replacementClass,"-title-").concat(i||zv()):(e["aria-hidden"]="true",e.focusable="false")),e}function Jie(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=TZe(n),i=t.iconName,r=t.prefix,s=t.rest,o=LZe(n),a=cP("parseNodeAttributes",{},n),c=e.styleParser?EZe(n):[];return hi({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:G0,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:c,attributes:o}},a)}var IZe=Ou.styles;function ere(n){var e="nest"===bi.autoReplaceSvg?Jie(n,{styleParser:!1}):Jie(n);return~e.extra.classes.indexOf(Mie)?af("generateLayersText",n,e):af("generateSvgReplacementMutation",n,e)}var $d=new Set;function tre(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!nf)return Promise.resolve();var t=Sa.documentElement.classList,i=function(f){return t.add("".concat(xie,"-").concat(f))},r=function(f){return t.remove("".concat(xie,"-").concat(f))},s=bi.autoFetchSvg?$d:Zk.map(function(u){return"fa-".concat(u)}).concat(Object.keys(IZe));s.includes("fa")||s.push("fa");var o=[".".concat(Mie,":not([").concat(C5,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(C5,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=Sg(n.querySelectorAll(o))}catch{}if(!(a.length>0))return Promise.resolve();i("pending"),r("complete");var c=gP_begin("onTree"),l=a.reduce(function(u,f){try{var p=ere(f);p&&u.push(p)}catch(g){bie||"MissingIcon"===g.name&&console.error(g)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(p){Xie(p,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),c(),u()})}).catch(function(p){c(),f(p)})})}function BZe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ere(n).then(function(t){t&&Xie([t],e)})}Zk.map(function(n){$d.add("fa-".concat(n))}),Object.keys(Bv[Ea]).map($d.add.bind($d)),Object.keys(Bv[P1]).map($d.add.bind($d)),$d=Dv($d);var FZe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?G0:i,s=t.symbol,o=void 0!==s&&s,a=t.mask,c=void 0===a?null:a,l=t.maskId,u=void 0===l?null:l,f=t.title,p=void 0===f?null:f,g=t.titleId,_=void 0===g?null:g,y=t.classes,w=void 0===y?[]:y,C=t.attributes,b=void 0===C?{}:C,M=t.styles,T=void 0===M?{}:M;if(e){var I=e.prefix,F=e.iconName,P=e.icon;return NM(hi({type:"icon"},e),function(){return M5("beforeDOMElementCreation",{iconDefinition:e,params:t}),bi.autoA11y&&(p?b["aria-labelledby"]="".concat(bi.replacementClass,"-title-").concat(_||zv()):(b["aria-hidden"]="true",b.focusable="false")),uP({icons:{main:fP(P),mask:c?fP(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:I,iconName:F,transform:hi(hi({},G0),r),symbol:o,title:p,maskId:u,titleId:_,extra:{attributes:b,styles:T,classes:w}})})}},kZe={mixout:function(){return{icon:(n=FZe,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:lP(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:lP(r||{})),n(i,hi(hi({},t),{},{mask:r}))})};var n},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=tre,t.nodeCallback=BZe,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=t.callback;return tre(void 0===i?Sa:i,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,o=i.titleId,a=i.prefix,c=i.transform,l=i.symbol,u=i.mask,f=i.maskId,p=i.extra;return new Promise(function(g,_){Promise.all([dP(r,a),u.iconName?dP(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(y){var w=Wk(y,2);g([t,uP({icons:{main:w[0],mask:w[1]},prefix:a,iconName:r,transform:c,symbol:l,maskId:f,title:s,titleId:o,extra:p,watchable:!0})])}).catch(_)})},e.generateAbstractIcon=function(t){var l,i=t.children,r=t.attributes,s=t.main,o=t.transform,c=RM(t.styles);return c.length>0&&(r.style=c),eP(o)&&(l=af("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(l||s.icon),{children:i,attributes:r}}}},PZe={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return NM({type:"layer"},function(){M5("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(c){o=o.concat(c.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(bi.cssPrefix,"-layers")].concat(Dv(s)).join(" ")},children:o}]})}}}},HZe={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,o=i.classes,a=void 0===o?[]:o,c=i.attributes,l=void 0===c?{}:c,u=i.styles,f=void 0===u?{}:u;return NM({type:"counter",content:t},function(){return M5("beforeDOMElementCreation",{content:t,params:i}),mZe({content:t.toString(),title:s,extra:{attributes:l,styles:f,classes:["".concat(bi.cssPrefix,"-layers-counter")].concat(Dv(a))}})})}}}},zZe={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?G0:r,o=i.title,a=void 0===o?null:o,c=i.classes,l=void 0===c?[]:c,u=i.attributes,f=void 0===u?{}:u,p=i.styles,g=void 0===p?{}:p;return NM({type:"text",content:t},function(){return M5("beforeDOMElementCreation",{content:t,params:i}),Qie({content:t,transform:hi(hi({},G0),s),title:a,extra:{attributes:f,styles:g,classes:["".concat(bi.cssPrefix,"-layers-text")].concat(Dv(l))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,o=i.extra,a=null,c=null;if(yie){var l=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/l,c=u.height/l}return bi.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,Qie({content:t.innerHTML,width:a,height:c,transform:s,title:r,extra:o,watchable:!0})])}}},OZe=new RegExp('"',"ug"),nre=[1105920,1112319];function ire(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var o=Sg(n.children).filter(function(P){return P.getAttribute(Kk)===e})[0],a=Qd.getComputedStyle(n,e),c=a.getPropertyValue("font-family").match(RYe),l=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!c)return n.removeChild(o),i();if(c&&"none"!==u&&""!==u){var f=a.getPropertyValue("content"),p=~["Sharp"].indexOf(c[2])?P1:Ea,g=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?Rv[p][c[2].toLowerCase()]:FYe[p][l],_=function NZe(n){var e=n.replace(OZe,""),t=function JYe(n,e){var r,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e,0),i=t>=nre[0]&&t<=nre[1],r=2===e.length&&e[0]===e[1];return{value:iP(r?e[0]:e),isSecondary:i||r}}(f),y=_.value,w=_.isSecondary,C=c[0].startsWith("FontAwesome"),b=oP(g,y),M=b;if(C){var T=function oZe(n){var e=Hie[n],t=oP("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(y);T.iconName&&T.prefix&&(b=T.iconName,g=T.prefix)}if(!b||w||o&&o.getAttribute(Xk)===g&&o.getAttribute(Yk)===M)i();else{n.setAttribute(t,M),o&&n.removeChild(o);var I=function DZe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:G0,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),F=I.extra;F.attributes[Kk]=e,dP(b,g).then(function(P){var R=uP(hi(hi({},I),{},{icons:{main:P,mask:{prefix:null,iconName:null,rest:[]}},prefix:g,iconName:M,extra:F,watchable:!0})),k=Sa.createElement("svg");"::before"===e?n.insertBefore(k,n.firstChild):n.appendChild(k),k.outerHTML=R.map(function(W){return Ov(W)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function VZe(n){return Promise.all([ire(n,"::before"),ire(n,"::after")])}function UZe(n){return!(n.parentNode===document.head||~DYe.indexOf(n.tagName.toUpperCase())||n.getAttribute(Kk)||n.parentNode&&"svg"===n.parentNode.tagName)}function rre(n){if(nf)return new Promise(function(e,t){var i=Sg(n.querySelectorAll("*")).filter(UZe).map(VZe),r=gP_begin("searchPseudoElements");Yie(),Promise.all(i).then(function(){r(),AP(),e()}).catch(function(){r(),AP(),t()})})}var GZe={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=rre,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;bi.searchPseudoElements&&rre(void 0===i?Sa:i)}}},sre=!1,QZe={mixout:function(){return{dom:{unwatch:function(){Yie(),sre=!0}}}},hooks:function(){return{bootstrap:function(){Zie(cP("mutationObserverCallbacks",{}))},noAuto:function(){!function SZe(){!GM||GM.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;sre?AP():Zie(cP("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},ore=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&"h"===a)return i.flipX=!0,i;if(o&&"v"===a)return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},WZe={mixout:function(){return{parse:{transform:function(t){return ore(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=ore(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,o=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},c="translate(".concat(32*r.x,", ").concat(32*r.y,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),g={outer:a,inner:{transform:"".concat(c," ").concat(l," ").concat(u)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:hi({},g.outer),children:[{tag:"g",attributes:hi({},g.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:hi(hi({},i.icon.attributes),g.path)}]}]}}}},vP={x:0,y:0,width:"100%",height:"100%"};function are(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}var $Ze={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?OM(r.split(" ").map(function(o){return o.trim()})):{prefix:null,iconName:null,rest:[]};return s.prefix||(s.prefix=jd()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n,i=t.children,r=t.attributes,s=t.main,o=t.mask,a=t.maskId,u=s.icon,p=o.icon,g=function WYe(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:s.width}),_={tag:"rect",attributes:hi(hi({},vP),{},{fill:"white"})},y=u.children?{children:u.children.map(are)}:{},w={tag:"g",attributes:hi({},g.inner),children:[are(hi({tag:u.tag,attributes:hi(hi({},u.attributes),g.path)},y))]},C={tag:"g",attributes:hi({},g.outer),children:[w]},b="mask-".concat(a||zv()),M="clip-".concat(a||zv()),T={tag:"mask",attributes:hi(hi({},vP),{},{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[_,C]},I={tag:"defs",children:[{tag:"clipPath",attributes:{id:M},children:(n=p,"g"===n.tag?n.children:[n])},T]};return i.push(I,{tag:"rect",attributes:hi({fill:"currentColor","clip-path":"url(#".concat(M,")"),mask:"url(#".concat(b,")")},vP)}),{children:i,attributes:r}}}},qZe={provides:function(e){var t=!1;Qd.matchMedia&&(t=Qd.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:hi(hi({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=hi(hi({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:hi(hi({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:hi(hi({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:hi(hi({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:hi(hi({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:hi(hi({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:hi(hi({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:hi(hi({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},XZe=[qYe,kZe,PZe,HZe,zZe,GZe,QZe,WZe,$Ze,qZe,{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}];!function lZe(n,e){var t=e.mixoutsTo;Uie=n,Tg={},Object.keys(Lg).forEach(function(i){-1===cZe.indexOf(i)&&delete Lg[i]}),Uie.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(o){"function"==typeof r[o]&&(t[o]=r[o]),"object"===MM(r[o])&&Object.keys(r[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=r[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){Tg[o]||(Tg[o]=[]),Tg[o].push(s[o])})}i.provides&&i.provides(Lg)})}(XZe,{mixoutsTo:q3});var YZe=q3.parse,ZZe=q3.icon;const JZe=["*"],nJe=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let sJe=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oJe=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const i of t){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...t){for(const i of t){const r=Object.keys(i).map(s=>i[s]);this.addIcons(...r)}}getIconDefinition(t,i){return t in this.definitions&&i in this.definitions[t]?this.definitions[t][i]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aJe=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[wr]}),n})(),cJe=(()=>{class n{constructor(t,i){this.renderer=t,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(G(Go),G(gn))},n.\u0275cmp=On({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[wr],ngContentSelectors:JZe,decls:1,vars:0,template:function(t,i){1&t&&(Vc(),T1(0))},encapsulation:2}),n})(),_P=(()=>{class n{constructor(t,i,r,s,o){this.sanitizer=t,this.config=i,this.iconLibrary=r,this.stackItem=s,this.classes=[],null!=o&&null==s&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let i=null;if(i=this.icon??this.config.fallbackIcon,t){const r=this.findIconDefinition(i);if(null!=r){const s=this.buildParams();this.renderIcon(r,s)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const i=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(i),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?YZe.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...nJe(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,i){const r=ZZe(t,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(G(A8),G(sJe),G(oJe),G(aJe,8),G(cJe,8))},n.\u0275cmp=On({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,i){2&t&&(h8("innerHTML",i.renderedIconHTML,k3),Qs("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[wr],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),lJe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),uJe=(()=>{class n{constructor(t,i){this.appService=t,this.router=i,this.year=(new Date).getFullYear(),this.discord=this.appService.discord,this.github=this.appService.github,this.faDiscord=bM,this.faGithub=Qk,this.onStart=!0}}return n.\u0275fac=function(t){return new(t||n)(G(To),G(c1))},n.\u0275cmp=On({type:n,selectors:[["app-footer"]],decls:20,vars:5,consts:[["fxLayout","column","fxLayoutAlign","center center"],[2,"font-size","1.3em"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],[3,"icon"],["target","_blank",1,"larger-link",3,"href"],["target","_blank","href","GeoDev.nl",1,"larger-link"]],template:function(t,i){1&t&&(O(0,"footer")(1,"mat-toolbar",0)(2,"div",1),V(3,"Join us on our "),O(4,"a",2),rt(5,"fa-icon",3),V(6," Discord "),N(),V(7," channel "),N(),O(8,"div"),V(9," Everything is free and open source. See "),O(10,"a",4),rt(11,"fa-icon",3),V(12," GitHub "),N()(),O(13,"div"),V(14),rt(15,"br"),N(),O(16,"div"),V(17," Build by "),O(18,"a",5),V(19,"GeoDev"),N()()()()),2&t&&(ae(4),gu("href",i.discord,xl),ae(1),Ve("icon",i.faDiscord),ae(5),gu("href",i.github,xl),ae(1),Ve("icon",i.faGithub),ae(3),si(" PassiveOpen.com 2019 - ",i.year,""))},dependencies:[JSe,Cd,xd,_P],styles:["footer[_ngcontent-%COMP%]{z-index:1000;position:relative}footer[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{padding:26px 0 80px;font-size:.8rem;opacity:.8;font-weight:400;height:initial}"]}),n})();function cf(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cre(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var yP,F4,E2,d1,P4,MP,SP,gre,vre,kg,Kv,c,l,u,f,p,g,n,e,t,i,r,s,o,a,_,K3={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Dg={duration:.5,overwrite:!1,delay:0},k4=1e8,aa=1e-8,wP=2*Math.PI,hJe=wP/4,fJe=0,lre=Math.sqrt,dJe=Math.cos,pJe=Math.sin,ac=function(e){return"string"==typeof e},H1=function(e){return"function"==typeof e},lf=function(e){return"number"==typeof e},CP=function(e){return typeof e>"u"},Q0=function(e){return"object"==typeof e},d3=function(e){return!1!==e},ure=function(){return typeof window<"u"},QM=function(e){return H1(e)||ac(e)},hre="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},el=Array.isArray,xP=/(?:-?\.?\d|\.)+/gi,fre=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ig=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,bP=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,dre=/[+-]=-?[.\d]+/,pre=/[^,'"\[\]\s]+/gi,gJe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,X3={},WM={},mre=function(e){return(WM=E5(e,X3))&&J3},EP=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},jM=function(e,t){return!t&&console.warn(e)},Are=function(e,t){return e&&(X3[e]=t)&&WM&&(WM[e]=t)||X3},Vv=function(){return 0},mJe={suppressEvents:!0,isStart:!0},Uv={suppressEvents:!0},TP={},qd=[],LP={},Y3={},DP={},_re=30,$M=[],IP="",BP=function(e){var i,r,t=e[0];if(Q0(t)||H1(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=$M.length;r--&&!$M[r].targetTest(t););i=$M[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new jre(e[r],i)))||e.splice(r,1);return e},S5=function(e){return e._gsap||BP(O4(e))[0]._gsap},yre=function(e,t,i){return(i=e[t])&&H1(i)?e[t]():CP(i)&&e.getAttribute&&e.getAttribute(t)||i},p3=function(e,t){return(e=e.split(",")).forEach(t)||e},r2=function(e){return Math.round(1e5*e)/1e5||0},Ec=function(e){return Math.round(1e7*e)/1e7||0},Bg=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+r:"-"===i?e-r:"*"===i?e*r:e/r},AJe=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},qM=function(){var i,r,e=qd.length,t=qd.slice(0);for(LP={},qd.length=0,i=0;i<e;i++)(r=t[i])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},wre=function(e,t,i,r){qd.length&&qM(),e.render(t,i,r||F4),qd.length&&qM()},Cre=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(pre).length<2?t:ac(e)?e.trim():e},xre=function(e){return e},H4=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},E5=function(e,t){for(var i in t)e[i]=t[i];return e},bre=function n(e,t){for(var i in t)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=Q0(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},KM=function(e,t){var r,i={};for(r in e)r in t||(i[r]=e[r]);return i},Gv=function(e){var t=e.parent||d1,i=e.keyframes?function(e){return function(t,i){for(var r in i)r in t||"duration"===r&&e||"ease"===r||(t[r]=i[r])}}(el(e.keyframes)):H4;if(d3(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Mre=function(e,t,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var a,o=e[r];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},XM=function(e,t,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},uf=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},T5=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},yJe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},RP=function(e,t,i,r){return e._startAt&&(F4?e._startAt.revert(Uv):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},wJe=function n(e){return!e||e._ts&&n(e.parent)},Sre=function(e){return e._repeat?Rg(e._tTime,e=e.duration()+e._rDelay)*e:0},Rg=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},YM=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},ZM=function(e){return e._end=Ec(e._start+(e._tDur/Math.abs(e._ts||e._rts||aa)||0))},JM=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Ec(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),ZM(e),i._dirty||T5(i,e)),e},Ere=function(e,t){var i;if((t._time||t._initted&&!t._dur)&&(i=YM(e.rawTime(),t),(!t._dur||Wv(0,t.totalDuration(),i)-t._tTime>aa)&&t.render(i,!0)),T5(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-aa}},W0=function(e,t,i,r){return t.parent&&uf(t),t._start=Ec((lf(i)?i:i||e!==d1?z4(e,i,t):e._time)+t._delay),t._end=Ec(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Mre(e,t,"_first","_last",e._sort?"_start":0),FP(t)||(e._recent=t),r||Ere(e,t),e._ts<0&&JM(e,e._tTime),e},Tre=function(e,t){return(X3.ScrollTrigger||EP("scrollTrigger",t))&&X3.ScrollTrigger.create(t,e)},Lre=function(e,t,i,r){return GP(e,t),e._initted?!i&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&vre!==Z3.frame?(qd.push(e),e._lazy=[t,r],1):void 0:1},CJe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},FP=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Fg=function(e,t,i,r){var s=e._repeat,o=Ec(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Ec(o*(s+1)+e._rDelay*s):o,a>0&&!r?JM(e,e._tTime=e._tDur*a):e.parent&&ZM(e),i||T5(e.parent,e),e},Dre=function(e){return e instanceof g3?T5(e):Fg(e,e._dur)},MJe={_start:0,endTime:Vv,totalDuration:Vv},z4=function n(e,t,i){var a,c,l,r=e.labels,s=e._recent||MJe,o=e.duration()>=k4?s.endTime(!1):e._dur;return ac(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),l="%"===t.substr(-1),a=t.indexOf("="),"<"===c||">"===c?(a>=0&&(t=t.replace(/=/,"")),("<"===c?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&i&&(c=c/100*(el(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+c:o+c)):null==t?o:+t},Qv=function(e,t,i){var a,c,r=lf(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s];if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,c=i;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=d3(c.vars.inherit)&&c.parent;o.immediateRender=d3(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new V2(t[0],o,t[s+1])},Kd=function(e,t){return e||0===e?t(e):t},Wv=function(e,t,i){return i<e?e:i>t?t:i},tl=function(e,t){return ac(e)&&(t=gJe.exec(e))?t[1]:""},kP=[].slice,Ire=function(e,t){return e&&Q0(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Q0(e[0]))&&!e.nodeType&&e!==P4},O4=function(e,t,i){return E2&&!t&&E2.selector?E2.selector(e):!ac(e)||i||!MP&&Pg()?el(e)?function(e,t,i){return void 0===i&&(i=[]),e.forEach(function(r){var s;return ac(r)&&!t||Ire(r,1)?(s=i).push.apply(s,O4(r)):i.push(r)})||i}(e,i):Ire(e)?kP.call(e,0):e?[e]:[]:kP.call((t||SP).querySelectorAll(e),0)},PP=function(e){return e=O4(e)[0]||jM("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return O4(t,i.querySelectorAll?i:i===e?jM("Invalid scope")||SP.createElement("div"):e)}},Bre=function(e){return e.sort(function(){return.5-Math.random()})},Rre=function(e){if(H1(e))return e;var t=Q0(e)?e:{each:e},i=L5(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,c=isNaN(r)||a,l=t.axis,u=r,f=r;return ac(r)?u=f={center:.5,edges:.5,end:1}[r]||0:!a&&c&&(u=r[0],f=r[1]),function(p,g,_){var C,b,M,T,I,F,P,R,k,y=(_||t).length,w=o[y];if(!w){if(!(k="auto"===t.grid?0:(t.grid||[1,k4])[1])){for(P=-k4;P<(P=_[k++].getBoundingClientRect().left)&&k<y;);k--}for(w=o[y]=[],C=c?Math.min(k,y)*u-.5:r%k,b=k===k4?0:c?y*f/k-.5:r/k|0,P=0,R=k4,F=0;F<y;F++)M=F%k-C,T=b-(F/k|0),w[F]=I=l?Math.abs("y"===l?T:M):lre(M*M+T*T),I>P&&(P=I),I<R&&(R=I);"random"===r&&Bre(w),w.max=P-R,w.min=R,w.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(k>y?y-1:l?"y"===l?y/k:k:Math.max(k,y/k))||0)*("edges"===r?-1:1),w.b=y<0?s-y:s,w.u=tl(t.amount||t.each)||0,i=i&&y<0?Gre(i):i}return y=(w[p]-w.min)/w.max||0,Ec(w.b+(i?i(y):y)*w.v)+w.u}},HP=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=Ec(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(lf(i)?0:tl(i))}},Fre=function(e,t){var r,s,i=el(e);return!i&&Q0(e)&&(r=i=e.radius||k4,e.values?(e=O4(e.values),(s=!lf(e[0]))&&(r*=r)):e=HP(e.increment)),Kd(t,i?H1(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var p,g,a=parseFloat(s?o.x:o),c=parseFloat(s?o.y:0),l=k4,u=0,f=e.length;f--;)(p=s?(p=e[f].x-a)*p+(g=e[f].y-c)*g:Math.abs(e[f]-a))<l&&(l=p,u=f);return u=!r||l<=r?e[u]:o,s||u===o||lf(o)?u:u+tl(o)}:HP(e))},kre=function(e,t,i,r){return Kd(el(e)?!t:!0===i?!!(i=0):!r,function(){return el(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*r)/r})},Pre=function(e,t,i){return Kd(i,function(r){return e[~~t(r)]})},jv=function(e){for(var r,s,o,a,t=0,i="";~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a="["===e.charAt(r+7),s=e.substr(r+7,o-r-7).match(a?pre:xP),i+=e.substr(t,r-t)+kre(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},Hre=function(e,t,i,r,s){var o=t-e,a=r-i;return Kd(s,function(c){return i+((c-e)/o*a||0)})},zre=function(e,t,i){var o,a,c,r=e.labels,s=k4;for(o in r)(a=r[o]-t)<0==!!i&&a&&s>(a=Math.abs(a))&&(c=o,s=a);return c},N4=function(e,t,i){var c,l,u,r=e.vars,s=r[t],o=E2,a=e._ctx;if(s)return c=r[t+"Params"],l=r.callbackScope||e,i&&qd.length&&qM(),a&&(E2=a),u=c?s.apply(l,c):s.call(l),E2=o,u},$v=function(e){return uf(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&N4(e,"onInterrupt"),e},FJe=function(e){var t=(e=!e.name&&e.default||e).name,i=H1(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:Vv,render:jP,add:VP,kill:XJe,modifier:KJe,rawVars:0},o={targetTest:0,get:0,getSetter:WP,aliases:{},register:0};if(Pg(),e!==r){if(Y3[t])return;H4(r,H4(KM(e,s),o)),E5(r.prototype,E5(s,KM(e,o))),Y3[r.prop=t]=r,e.targetTest&&($M.push(r),TP[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Are(t,r),e.register&&e.register(J3,r,m3)},ca=255,qv={aqua:[0,ca,ca],lime:[0,ca,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ca],navy:[0,0,128],white:[ca,ca,ca],olive:[128,128,0],yellow:[ca,ca,0],orange:[ca,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ca,0,0],pink:[ca,192,203],cyan:[0,ca,ca],transparent:[ca,ca,ca,0]},zP=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*ca+.5|0},Ore=function(e,t,i){var s,o,a,c,l,u,f,p,g,_,r=e?lf(e)?[e>>16,e>>8&ca,e&ca]:0:qv.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),qv[e])r=qv[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&ca,r&ca,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&ca,e&ca]}else if("hsl"===e.substr(0,3))if(r=_=e.match(xP),t){if(~e.indexOf("="))return r=e.match(fre),i&&r.length<4&&(r[3]=1),r}else c=+r[0]%360/360,l=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(l+1):u+l-u*l),r.length>3&&(r[3]*=1),r[0]=zP(c+1/3,s,o),r[1]=zP(c,s,o),r[2]=zP(c-1/3,s,o);else r=e.match(xP)||qv.transparent;r=r.map(Number)}return t&&!_&&(s=r[0]/ca,o=r[1]/ca,a=r[2]/ca,u=((f=Math.max(s,o,a))+(p=Math.min(s,o,a)))/2,f===p?c=l=0:(g=f-p,l=u>.5?g/(2-f-p):g/(f+p),c=f===s?(o-a)/g+(o<a?6:0):f===o?(a-s)/g+2:(s-o)/g+4,c*=60),r[0]=~~(c+.5),r[1]=~~(100*l+.5),r[2]=~~(100*u+.5)),i&&r.length<4&&(r[3]=1),r},Nre=function(e){var t=[],i=[],r=-1;return e.split(Xd).forEach(function(s){var o=s.match(Ig)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},Vre=function(e,t,i){var c,l,u,f,r="",s=(e+r).match(Xd),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(p){return(p=Ore(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(u=Nre(e),(c=i.c).join(r)!==u.c.join(r)))for(f=(l=e.replace(Xd,"1").split(Ig)).length-1;a<f;a++)r+=l[a]+(~c.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!l)for(f=(l=e.split(Xd)).length-1;a<f;a++)r+=l[a]+s[a];return r+l[f]},Xd=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in qv)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),kJe=/hsl[a]?\(/,Ure=function(e){var i,t=e.join(" ");if(Xd.lastIndex=0,Xd.test(t))return i=kJe.test(t),e[1]=Vre(e[1],i),e[0]=Vre(e[0],i,Nre(e[1])),!0},Z3=(n=Date.now,e=500,t=33,i=n(),r=i,o=s=1e3/240,_=function y(w){var M,T,I,F,C=n()-r,b=!0===w;if(C>e&&(i+=C-t),((M=(I=(r+=C)-i)-o)>0||b)&&(F=++f.frame,p=I-1e3*f.time,f.time=I/=1e3,o+=M+(M>=s?4:s-M),T=1),b||(c=l(y)),T)for(g=0;g<a.length;g++)a[g](I,p,F,w)},f={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(w){return p/(1e3/(w||60))},wake:function(){gre&&(!MP&&ure()&&(P4=MP=window,SP=P4.document||{},X3.gsap=J3,(P4.gsapVersions||(P4.gsapVersions=[])).push(J3.version),mre(WM||P4.GreenSockGlobals||!P4.gsap&&P4||{}),u=P4.requestAnimationFrame),c&&f.sleep(),l=u||function(w){return setTimeout(w,o-1e3*f.time+1|0)},Kv=1,_(2))},sleep:function(){(u?P4.cancelAnimationFrame:clearTimeout)(c),Kv=0,l=Vv},lagSmoothing:function(w,C){e=w||1/aa,t=Math.min(C,e,0)},fps:function(w){o=1e3*f.time+(s=1e3/(w||240))},add:function(w,C,b){var M=C?function(T,I,F,P){w(T,I,F,P),f.remove(M)}:w;return f.remove(w),a[b?"unshift":"push"](M),Pg(),M},remove:function(w,C){~(C=a.indexOf(w))&&a.splice(C,1)&&g>=C&&g--},_listeners:a=[]}),Pg=function(){return!Kv&&Z3.wake()},Hs={},PJe=/^[\d.\-M][\d.\-,\s]/,HJe=/["']/g,zJe=function(e){for(var a,c,l,t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length;s<o;s++)c=i[s],a=s!==o-1?c.lastIndexOf(","):c.length,l=c.substr(0,a),t[r]=isNaN(l)?l.replace(HJe,"").trim():+l,r=c.substr(a+1).trim();return t},Gre=function(e){return function(t){return 1-e(1-t)}},Qre=function n(e,t){for(var r,i=e._first;i;)i instanceof g3?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},L5=function(e,t){return e&&(H1(e)?e:Hs[e]||function(e){var t=(e+"").split("("),i=Hs[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[zJe(t[1])]:function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)}(e).split(",").map(Cre)):Hs._CE&&PJe.test(e)?Hs._CE("",e):i}(e))||t},D5=function(e,t,i,r){void 0===i&&(i=function(c){return 1-t(1-c)}),void 0===r&&(r=function(c){return c<.5?t(2*c)/2:1-t(2*(1-c))/2});var o,s={easeIn:t,easeOut:i,easeInOut:r};return p3(e,function(a){for(var c in Hs[a]=X3[a]=s,Hs[o=a.toLowerCase()]=i,s)Hs[o+("easeIn"===c?".in":"easeOut"===c?".out":".inOut")]=Hs[a+"."+c]=s[c]}),s},Wre=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},OP=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/wP*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*pJe((u-o)*s)+1},c="out"===e?a:"in"===e?function(l){return 1-a(1-l)}:Wre(a);return s=wP/s,c.config=function(l,u){return n(e,l,u)},c},NP=function n(e,t){void 0===t&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r="out"===e?i:"in"===e?function(s){return 1-i(1-s)}:Wre(i);return r.config=function(s){return n(e,s)},r};p3("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;D5(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(2*i,t)/2:1-Math.pow(2*(1-i),t)/2})}),Hs.Linear.easeNone=Hs.none=Hs.Linear.easeIn,D5("Elastic",OP("in"),OP("out"),OP()),function(n,e){var s=function(a){return a<.36363636363636365?n*a*a:a<.7272727272727273?n*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};D5("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),D5("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),D5("Circ",function(n){return-(lre(1-n*n)-1)}),D5("Sine",function(n){return 1===n?1:1-dJe(n*hJe)}),D5("Back",NP("in"),NP("out"),NP()),Hs.SteppedEase=Hs.steps=X3.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0;return function(a){return((r*Wv(0,.99999999,a)|0)+s)*i}}},Dg.ease=Hs["quad.out"],p3("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return IP+=n+","+n+"Params,"});var jre=function(e,t){this.id=fJe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:yre,this.set=t?t.getSetter:WP},Hg=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Fg(this,+t.duration,1,1),this.data=t.data,E2&&(this._ctx=E2,E2.data.push(this)),Kv||Z3.wake()}var e=n.prototype;return e.delay=function(i){return i||0===i?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Fg(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Pg(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(JM(this,i),!s._dp||s.parent||Ere(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&W0(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===aa||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),wre(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Sre(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?i:1-i)+Sre(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Rg(this._tTime,s)+1:1},e.timeScale=function(i){if(!arguments.length)return this._rts===-aa?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?YM(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-aa?0:this._rts,this.totalTime(Wv(-this._delay,this._tDur,r),!0),ZM(this),yJe(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Pg(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==aa&&(this._tTime-=aa)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&W0(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(d3(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?YM(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){void 0===i&&(i=Uv);var r=F4;return F4=i,this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents),"nested"!==this.data&&uf(this),F4=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this.vars.immediateRender?-1:s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Dre(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,Dre(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(z4(this,i),d3(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,d3(r))},e.play=function(i,r){return null!=i&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return null!=i&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return null!=i&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-aa:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-aa,this},e.isActive=function(){var s,i=this.parent||this._dp,r=this._start;return!(i&&!(this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-aa))},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),"onUpdate"===i&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=H1(i)?i:xre,a=function(){var l=r.then;r.then=null,H1(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=l),s(o),r.then=l};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){$v(this)},n}();H4(Hg.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-aa,_prom:0,_ps:!1,_rts:1});var g3=function(n){function e(i,r){var s;return void 0===i&&(i={}),(s=n.call(this,i)||this).labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=d3(i.sortChildren),d1&&W0(i.parent||d1,cf(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Tre(cf(s),i.scrollTrigger),s}cre(e,n);var t=e.prototype;return t.to=function(r,s,o){return Qv(0,arguments,this),this},t.from=function(r,s,o){return Qv(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Qv(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Gv(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new V2(r,s,z4(this,o),1),this},t.call=function(r,s,o){return W0(this,V2.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,c,l,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=u,o.parent=this,new V2(r,o,z4(this,c)),this},t.staggerFrom=function(r,s,o,a,c,l,u){return o.runBackwards=1,Gv(o).immediateRender=d3(o.immediateRender),this.staggerTo(r,s,o,a,c,l,u)},t.staggerFromTo=function(r,s,o,a,c,l,u,f){return a.startAt=o,Gv(a).immediateRender=d3(a.immediateRender),this.staggerTo(r,s,a,c,l,u,f)},t.render=function(r,s,o){var p,g,_,y,w,C,b,M,T,I,F,P,a=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=r<=0?0:Ec(r),f=this._zTime<0!=r<0&&(this._initted||!l);if(this!==d1&&u>c&&r>=0&&(u=c),u!==this._tTime||o||f){if(a!==this._time&&l&&(u+=this._time-a,r+=this._time-a),p=u,T=this._start,C=!(M=this._ts),f&&(l||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(F=this._yoyo,w=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*w+r,s,o);if(p=Ec(u%w),u===c?(y=this._repeat,p=l):((y=~~(u/w))&&y===u/w&&(p=l,y--),p>l&&(p=l)),I=Rg(this._tTime,w),!a&&this._tTime&&I!==y&&(I=y),F&&1&y&&(p=l-p,P=1),y!==I&&!this._lock){var R=F&&1&I,k=R===(F&&1&y);if(y<I&&(R=!R),a=R?0:l,this._lock=1,this.render(a||(P?0:Ec(y*w)),s,!l)._lock=0,this._tTime=u,!s&&this.parent&&N4(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),a&&a!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,k&&(this._lock=2,this.render(a=R?l:-1e-4,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;Qre(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Ec(a),Ec(p)),b&&(u-=p-(p=b._start))),this._tTime=u,this._time=p,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&p&&!s&&(N4(this,"onStart"),this._tTime!==u))return this;if(p>=a&&r>=0)for(g=this._first;g;){if(_=g._next,(g._act||p>=g._start)&&g._ts&&b!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,s,o),p!==this._time||!this._ts&&!C){b=0,_&&(u+=this._zTime=-aa);break}}g=_}else{o=o||F4,g=this._last;for(var W=r<0?r:p;g;){if(_=g._prev,(g._act||W<=g._end)&&g._ts&&b!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(W-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(W-g._start)*g._ts,s,o),p!==this._time||!this._ts&&!C){b=0,_&&(u+=this._zTime=W?-aa:aa);break}}g=_}}if(b&&!s&&(this.pause(),b.render(p>=a?0:-aa)._zTime=p>=a?1:-1,this._ts))return this._start=T,ZM(this),this.render(r,s,o);this._onUpdate&&!s&&N4(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&a)&&(T===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&uf(this,1),!s&&(!(r<0)||a)&&(u||a||!c)&&(N4(this,u===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(lf(s)||(s=z4(this,s,r)),!(r instanceof Hg)){if(el(r))return r.forEach(function(a){return o.add(a,s)}),this;if(ac(r))return this.addLabel(r,s);if(!H1(r))return this;r=V2.delayedCall(0,r)}return this!==r?W0(this,r,s):this},t.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-k4);for(var c=[],l=this._first;l;)l._start>=a&&(l instanceof V2?s&&c.push(l):(o&&c.push(l),r&&c.push.apply(c,l.getChildren(!0,s,o)))),l=l._next;return c},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return ac(r)?this.removeLabel(r):H1(r)?this.killTweensOf(r):(XM(this,r),r===this._recent&&(this._recent=this._last),T5(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ec(Z3.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=z4(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=V2.delayedCall(0,s||Vv,o);return a.data="isPause",this._hasPause=1,W0(this,a,z4(this,r))},t.removePause=function(r){var s=this._first;for(r=z4(this,r);s;)s._start===r&&"isPause"===s.data&&uf(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),c=a.length;c--;)Yd!==a[c]&&a[c].kill(r,s);return this},t.getTweensOf=function(r,s){for(var u,o=[],a=O4(r),c=this._first,l=lf(s);c;)c instanceof V2?AJe(c._targets,a)&&(l?(!Yd||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&o.push(c):(u=c.getTweensOf(a,s)).length&&o.push.apply(o,u),c=c._next;return o},t.tweenTo=function(r,s){s=s||{};var g,o=this,a=z4(o,r),l=s.startAt,u=s.onStart,f=s.onStartParams,p=s.immediateRender,_=V2.to(o,H4({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||aa,onStart:function(){if(o.pause(),!g){var w=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());_._dur!==w&&Fg(_,w,0,1).render(_._time,!0,!0),g=1}u&&u.apply(_,f||[])}},s));return p?_.render(0):_},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,H4({startAt:{time:z4(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),zre(this,z4(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),zre(this,z4(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+aa)},t.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var l,a=this._first,c=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(l in c)c[l]>=o&&(c[l]+=r);return T5(this)},t.invalidate=function(){var r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return n.prototype.invalidate.call(this)},t.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),T5(this)},t.totalDuration=function(r){var l,u,f,s=0,o=this,a=o._last,c=k4;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(f=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,W0(o,a,u-a._delay,1)._lock=0):c=u,u<0&&a._ts&&(s-=u,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),c=0),a._end>s&&a._ts&&(s=a._end),a=l;Fg(o,o===d1&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(d1._ts&&(wre(d1,YM(r,d1)),vre=Z3.frame),Z3.frame>=_re){_re+=K3.autoSleep||120;var s=d1._first;if((!s||!s._ts)&&K3.autoSleep&&Z3._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Z3.sleep()}}},e}(Hg);H4(g3.prototype,{_lock:0,_hasPause:0,_forcing:0});var Yd,UP,VJe=function(e,t,i,r,s,o,a){var f,p,g,_,y,w,C,b,c=new m3(this._pt,e,t,0,1,Zre,null,s),l=0,u=0;for(c.b=i,c.e=r,i+="",(C=~(r+="").indexOf("random("))&&(r=jv(r)),o&&(o(b=[i,r],e,t),i=b[0],r=b[1]),p=i.match(bP)||[];f=bP.exec(r);)_=f[0],y=r.substring(l,f.index),g?g=(g+1)%5:"rgba("===y.substr(-5)&&(g=1),_!==p[u++]&&(w=parseFloat(p[u-1])||0,c._pt={_next:c._pt,p:y||1===u?y:",",s:w,c:"="===_.charAt(1)?Bg(w,_)-w:parseFloat(_)-w,m:g&&g<4?Math.round:0},l=bP.lastIndex);return c.c=l<r.length?r.substring(l,r.length):"",c.fp=a,(dre.test(r)||C)&&(c.e=0),this._pt=c,c},VP=function(e,t,i,r,s,o,a,c,l,u){H1(r)&&(r=r(s||0,e,o));var _,f=e[t],p="get"!==i?i:H1(f)?l?e[t.indexOf("set")||!H1(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():f,g=H1(f)?l?jJe:Xre:QP;if(ac(r)&&(~r.indexOf("random(")&&(r=jv(r)),"="===r.charAt(1)&&((_=Bg(p,r)+(tl(p)||0))||0===_)&&(r=_)),!u||p!==r||UP)return isNaN(p*r)||""===r?(!f&&!(t in e)&&EP(t,r),VJe.call(this,e,t,p,r,g,c||K3.stringFilter,l)):(_=new m3(this._pt,e,t,+p||0,r-(p||0),"boolean"==typeof f?qJe:Yre,0,g),l&&(_.fp=l),a&&_.modifier(a,this,e),this._pt=_)},$re=function(e,t,i,r,s,o){var a,c,l,u;if(Y3[e]&&!1!==(a=new Y3[e]).init(s,a.rawVars?t[e]:function(e,t,i,r,s){if(H1(e)&&(e=Xv(e,s,t,i,r)),!Q0(e)||e.style&&e.nodeType||el(e)||hre(e))return ac(e)?Xv(e,s,t,i,r):e;var a,o={};for(a in e)o[a]=Xv(e[a],s,t,i,r);return o}(t[e],r,s,o,i),i,r,o)&&(i._pt=c=new m3(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==kg))for(l=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)l[a._props[u]]=c;return a},GP=function n(e,t){var F,P,R,k,W,ie,Te,me,Q,he,K,oe,fe,i=e.vars,r=i.ease,s=i.startAt,o=i.immediateRender,a=i.lazy,c=i.onUpdate,l=i.onUpdateParams,u=i.callbackScope,f=i.runBackwards,p=i.yoyoEase,g=i.keyframes,_=i.autoRevert,y=e._dur,w=e._startAt,C=e._targets,b=e.parent,M=b&&"nested"===b.data?b.vars.targets:C,T="auto"===e._overwrite&&!yP,I=e.timeline;if(I&&(!g||!r)&&(r="none"),e._ease=L5(r,Dg.ease),e._yEase=p?Gre(L5(!0===p?r:p,Dg.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!I&&!!i.runBackwards,!I||g&&!i.stagger){if(oe=(me=C[0]?S5(C[0]).harness:0)&&i[me.prop],F=KM(i,TP),w&&(t<0&&f&&o&&!_?w.render(-1,!0):w.revert(f&&y?Uv:mJe),w._lazy=0),s){if(uf(e._startAt=V2.set(C,H4({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:d3(a),startAt:null,delay:0,onUpdate:c,onUpdateParams:l,callbackScope:u,stagger:0},s))),t<0&&(F4||!o&&!_)&&e._startAt.revert(Uv),o&&y&&t<=0)return void(t&&(e._zTime=t))}else if(f&&y&&!w)if(t&&(o=!1),R=H4({overwrite:!1,data:"isFromStart",lazy:o&&d3(a),immediateRender:o,stagger:0,parent:b},F),oe&&(R[me.prop]=oe),uf(e._startAt=V2.set(C,R)),t<0&&(F4?e._startAt.revert(Uv):e._startAt.render(-1,!0)),e._zTime=t,o){if(!t)return}else n(e._startAt,aa);for(e._pt=e._ptCache=0,a=y&&d3(a)||a&&!y,P=0;P<C.length;P++){if(Te=(W=C[P])._gsap||BP(C)[P]._gsap,e._ptLookup[P]=he={},LP[Te.id]&&qd.length&&qM(),K=M===C?P:M.indexOf(W),me&&!1!==(Q=new me).init(W,oe||F,e,K,M)&&(e._pt=k=new m3(e._pt,W,Q.name,0,1,Q.render,Q,0,Q.priority),Q._props.forEach(function(de){he[de]=k}),Q.priority&&(ie=1)),!me||oe)for(R in F)Y3[R]&&(Q=$re(R,F,e,K,W,M))?Q.priority&&(ie=1):he[R]=k=VP.call(e,W,R,"get",F[R],K,M,0,i.stringFilter);e._op&&e._op[P]&&e.kill(W,e._op[P]),T&&e._pt&&(Yd=e,d1.killTweensOf(W,he,e.globalTime(t)),fe=!e.parent,Yd=0),e._pt&&a&&(LP[Te.id]=1)}ie&&Jre(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!fe,g&&t<=0&&I.render(k4,!0,!0)},WJe=function(e,t,i,r){var o,a,s=t.ease||r||"power1.inOut";if(el(t))a=i[e]||(i[e]=[]),t.forEach(function(c,l){return a.push({t:l/(t.length-1)*100,v:c,e:s})});else for(o in t)a=i[o]||(i[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},Xv=function(e,t,i,r,s){return H1(e)?e.call(t,i,r,s):ac(e)&&~e.indexOf("random(")?jv(e):e},qre=IP+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Kre={};p3(qre+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Kre[n]=1});var V2=function(n){function e(i,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var T,I,F,P,R,k,W,ie,c=(a=n.call(this,o?r:Gv(r))||this).vars,l=c.duration,u=c.delay,f=c.immediateRender,p=c.stagger,g=c.overwrite,_=c.keyframes,y=c.defaults,w=c.scrollTrigger,C=c.yoyoEase,b=r.parent||d1,M=(el(i)||hre(i)?lf(i[0]):"length"in r)?[i]:O4(i);if(a._targets=M.length?BP(M):jM("GSAP target "+i+" not found. https://greensock.com",!K3.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=g,_||p||QM(l)||QM(u)){if(r=a.vars,(T=a.timeline=new g3({data:"nested",defaults:y||{},targets:b&&"nested"===b.data?b.vars.targets:M})).kill(),T.parent=T._dp=cf(a),T._start=0,p||QM(l)||QM(u)){if(P=M.length,W=p&&Rre(p),Q0(p))for(R in p)~qre.indexOf(R)&&(ie||(ie={}),ie[R]=p[R]);for(I=0;I<P;I++)(F=KM(r,Kre)).stagger=0,C&&(F.yoyoEase=C),ie&&E5(F,ie),k=M[I],F.duration=+Xv(l,cf(a),I,k,M),F.delay=(+Xv(u,cf(a),I,k,M)||0)-a._delay,!p&&1===P&&F.delay&&(a._delay=u=F.delay,a._start+=u,F.delay=0),T.to(k,F,W?W(I,k,M):0),T._ease=Hs.none;T.duration()?l=u=0:a.timeline=0}else if(_){Gv(H4(T.vars.defaults,{ease:"none"})),T._ease=L5(_.ease||r.ease||"none");var me,Q,he,Te=0;if(el(_))_.forEach(function(K){return T.to(M,K,">")}),T.duration();else{for(R in F={},_)"ease"===R||"easeEach"===R||WJe(R,_[R],F,_.easeEach);for(R in F)for(me=F[R].sort(function(K,oe){return K.t-oe.t}),Te=0,I=0;I<me.length;I++)(he={ease:(Q=me[I]).e,duration:(Q.t-(I?me[I-1].t:0))/100*l})[R]=Q.v,T.to(M,he,Te),Te+=he.duration;T.duration()<l&&T.to({},{duration:l-T.duration()})}}l||a.duration(l=T.duration())}else a.timeline=0;return!0===g&&!yP&&(Yd=cf(a),d1.killTweensOf(M),Yd=0),W0(b,cf(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(f||!l&&!_&&a._start===Ec(b._time)&&d3(f)&&wJe(cf(a))&&"nested"!==b.data)&&(a._tTime=-aa,a.render(Math.max(0,-u))),w&&Tre(cf(a),w),a}cre(e,n);var t=e.prototype;return t.render=function(r,s,o){var p,g,_,y,w,C,b,M,T,a=this._time,c=this._tDur,l=this._dur,u=r<0,f=r>c-aa&&!u?c:r<aa?0:r;if(l){if(f!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(p=f,M=this.timeline,this._repeat){if(y=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*y+r,s,o);if(p=Ec(f%y),f===c?(_=this._repeat,p=l):((_=~~(f/y))&&_===f/y&&(p=l,_--),p>l&&(p=l)),(C=this._yoyo&&1&_)&&(T=this._yEase,p=l-p),w=Rg(this._tTime,y),p===a&&!o&&this._initted)return this._tTime=f,this;_!==w&&(M&&this._yEase&&Qre(M,C),this.vars.repeatRefresh&&!C&&!this._lock&&(this._lock=o=1,this.render(Ec(y*_),!0).invalidate()._lock=0))}if(!this._initted){if(Lre(this,u?r:p,o,s))return this._tTime=0,this;if(a!==this._time)return this;if(l!==this._dur)return this.render(r,s,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(T||this._ease)(p/l),this._from&&(this.ratio=b=1-b),p&&!a&&!s&&(N4(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(b,g.d),g=g._next;M&&M.render(r<0?r:!p&&C?-aa:M._dur*M._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&RP(this,r,0,o),N4(this,"onUpdate")),this._repeat&&_!==w&&this.vars.onRepeat&&!s&&this.parent&&N4(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&RP(this,r,0,!0),(r||!l)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&uf(this,1),!s&&(!u||a)&&(f||a)&&(N4(this,f===c?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,r){var l,u,f,s=e.ratio,o=t<0||!t&&(!e._start&&CJe(e)&&(e._initted||!FP(e))||(e._ts<0||e._dp._ts<0)&&!FP(e))?0:1,a=e._rDelay,c=0;if(a&&e._repeat&&(c=Wv(0,e._tDur,t),u=Rg(c,a),e._yoyo&&1&u&&(o=1-o),u!==Rg(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||F4||r||e._zTime===aa||!t&&e._zTime){if(!e._initted&&Lre(e,t,r,i))return;for(f=e._zTime,e._zTime=t||(i?aa:0),i||(i=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&RP(e,t,0,!0),e._onUpdate&&!i&&N4(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&N4(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&uf(e,1),!i&&!F4&&(N4(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),n.prototype.invalidate.call(this)},t.resetTo=function(r,s,o,a){Kv||Z3.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||GP(this,c),function(e,t,i,r,s,o,a){var l,u,f,p,c=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,p=e._targets.length;p--;){if((l=f[p][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return UP=1,e.vars[t]="+=0",GP(e,a),UP=0,1;c.push(l)}for(p=c.length;p--;)(l=(u=c[p])._pt||u).s=!r&&0!==r||s?l.s+(r||0)+o*l.c:r,l.c=i-l.s,u.e&&(u.e=r2(i)+tl(u.e)),u.b&&(u.b=l.s+tl(u.b))}(this,r,s,o,a,this._ease(c/this._dur),c)?this.resetTo(r,s,o,a):(JM(this,0),this.parent||Mre(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?$v(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Yd&&!0!==Yd.vars.overwrite)._first||$v(this),this.parent&&o!==this.timeline.totalDuration()&&Fg(this,this._dur*this.timeline._tDur/o,0,1),this}var f,p,g,_,y,w,C,a=this._targets,c=r?O4(r):a,l=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0}(a,c))return"all"===s&&(this._pt=0),$v(this);for(f=this._op=this._op||[],"all"!==s&&(ac(s)&&(y={},p3(s,function(b){return y[b]=1}),s=y),s=function(e,t){var s,o,a,c,i=e[0]?S5(e[0]).harness:0,r=i&&i.aliases;if(!r)return t;for(o in s=E5({},t),r)if(o in s)for(a=(c=r[o].split(",")).length;a--;)s[c[a]]=s[o];return s}(a,s)),C=a.length;C--;)if(~c.indexOf(a[C]))for(y in p=l[C],"all"===s?(f[C]=s,_=p,g={}):(g=f[C]=f[C]||{},_=s),_)(w=p&&p[y])&&((!("kill"in w.d)||!0===w.d.kill(y))&&XM(this,w,"_pt"),delete p[y]),"all"!==g&&(g[y]=1);return this._initted&&!this._pt&&u&&$v(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Qv(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Qv(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return d1.killTweensOf(r,s,o)},e}(Hg);H4(V2.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),p3("staggerTo,staggerFrom,staggerFromTo",function(n){V2[n]=function(){var e=new g3,t=kP.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var QP=function(e,t,i){return e[t]=i},Xre=function(e,t,i){return e[t](i)},jJe=function(e,t,i,r){return e[t](r.fp,i)},$Je=function(e,t,i){return e.setAttribute(t,i)},WP=function(e,t){return H1(e[t])?Xre:CP(e[t])&&e.setAttribute?$Je:QP},Yre=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},qJe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Zre=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},jP=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},KJe=function(e,t,i,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},XJe=function(e){for(var i,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?XM(this,t,"_pt"):t.dep||(i=1),t=r;return!i},YJe=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},Jre=function(e){for(var i,r,s,o,t=e._pt;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},m3=function(){function n(t,i,r,s,o,a,c,l,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||Yre,this.d=c||this,this.set=l||QP,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=YJe,this.m=i,this.mt=s,this.tween=r},n}();p3(IP+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return TP[n]=1}),X3.TweenMax=X3.TweenLite=V2,X3.TimelineLite=X3.TimelineMax=g3,d1=new g3({sortChildren:!1,defaults:Dg,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),K3.stringFilter=Ure;var zg=[],eS={},ZJe=[],ese=0,$P=function(e){return(eS[e]||ZJe).map(function(t){return t()})},qP=function(){var e=Date.now(),t=[];e-ese>2&&($P("matchMediaInit"),zg.forEach(function(i){var o,a,c,l,r=i.queries,s=i.conditions;for(a in r)(o=P4.matchMedia(r[a]).matches)&&(c=1),o!==s[a]&&(s[a]=o,l=1);l&&(i.revert(),c&&t.push(i))}),$P("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i)}),ese=e,$P("matchMedia"))},tse=function(){function n(t,i){this.selector=i&&PP(i),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){H1(i)&&(s=r,r=i,i=H1);var o=this,a=function(){var f,l=E2,u=o.selector;return l&&l!==o&&l.data.push(o),s&&(o.selector=PP(s)),E2=o,f=r.apply(o,arguments),H1(f)&&o._r.push(f),E2=l,o.selector=u,o.isReverted=!1,f};return o.last=a,i===H1?a(o):i?o[i]=a:a},e.ignore=function(i){var r=E2;E2=null,i(this),E2=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof V2&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,c){return c.g-a.g||-1}).forEach(function(a){return a.t.revert(i)}),this.data.forEach(function(a){return!(a instanceof Hg)&&a.revert&&a.revert(i)}),this._r.forEach(function(a){return a(i,s)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r){var o=zg.indexOf(this);~o&&zg.splice(o,1)}},e.revert=function(i){this.kill(i||{})},n}(),JJe=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(i,r,s){Q0(i)||(i={matches:i});var c,l,u,o=new tse(0,s||this.scope),a=o.conditions={};for(l in this.contexts.push(o),r=o.add("onMatch",r),o.queries=i,i)"all"===l?u=1:(c=P4.matchMedia(i[l]))&&(zg.indexOf(o)<0&&zg.push(o),(a[l]=c.matches)&&(u=1),c.addListener?c.addListener(qP):c.addEventListener("change",qP));return u&&r(o),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),tS={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return FJe(r)})},timeline:function(e){return new g3(e)},getTweensOf:function(e,t){return d1.getTweensOf(e,t)},getProperty:function(e,t,i,r){ac(e)&&(e=O4(e)[0]);var s=S5(e||{}).get,o=i?xre:Cre;return"native"===i&&(i=""),e&&(t?o((Y3[t]&&Y3[t].get||s)(e,t,i,r)):function(a,c,l){return o((Y3[a]&&Y3[a].get||s)(e,a,c,l))})},quickSetter:function(e,t,i){if((e=O4(e)).length>1){var r=e.map(function(u){return J3.quickSetter(u,t,i)}),s=r.length;return function(u){for(var f=s;f--;)r[f](u)}}var o=Y3[t],a=S5(e=e[0]||{}),c=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(u){var f=new o;kg._pt=0,f.init(e,i?u+i:u,kg,0,[e]),f.render(1,f),kg._pt&&jP(1,kg)}:a.set(e,c);return o?l:function(u){return l(e,c,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=J3.to(e,E5(((r={})[t]="+=0.1",r.paused=!0,r),i||{})),o=function(c,l,u){return s.resetTo(t,c,l,u)};return o.tween=s,o},isTweening:function(e){return d1.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=L5(e.ease,Dg.ease)),bre(Dg,e||{})},config:function(e){return bre(K3,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!Y3[a]&&!X3[a]&&jM(t+" effect requires "+a+" plugin.")}),DP[t]=function(a,c,l){return i(O4(a),H4(c||{},s),l)},o&&(g3.prototype[t]=function(a,c,l){return this.add(DP[t](a,Q0(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){Hs[e]=L5(t)},parseEase:function(e,t){return arguments.length?L5(e,t):Hs},getById:function(e){return d1.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,i=new g3(e);for(i.smoothChildTiming=d3(e.smoothChildTiming),d1.remove(i),i._dp=0,i._time=i._tTime=d1._time,r=d1._first;r;)s=r._next,(t||!(!r._dur&&r instanceof V2&&r.vars.onComplete===r._targets[0]))&&W0(i,r,r._start-r._delay),r=s;return W0(d1,i,0),i},context:function(e,t){return e?new tse(e,t):E2},matchMedia:function(e){return new JJe(e)},matchMediaRefresh:function(){return zg.forEach(function(e){var i,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||qP()},addEventListener:function(e,t){var i=eS[e]||(eS[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=eS[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:function n(e,t,i){var r=t-e;return el(e)?Pre(e,n(0,e.length),t):Kd(i,function(s){return(r+(s-e)%r)%r+e})},wrapYoyo:function n(e,t,i){var r=t-e,s=2*r;return el(e)?Pre(e,n(0,e.length-1),t):Kd(i,function(o){return e+((o=(s+(o-e)%s)%s||0)>r?s-o:o)})},distribute:Rre,random:kre,snap:Fre,normalize:function(e,t,i){return Hre(e,t,0,1,i)},getUnit:tl,clamp:function(e,t,i){return Kd(i,function(r){return Wv(e,t,r)})},splitColor:Ore,toArray:O4,selector:PP,mapRange:Hre,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||tl(i))}},interpolate:function n(e,t,i,r){var s=isNaN(e+t)?0:function(g){return(1-g)*e+g*t};if(!s){var c,l,u,f,p,o=ac(e),a={};if(!0===i&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(el(e)&&!el(t)){for(u=[],p=(f=e.length)-2,l=1;l<f;l++)u.push(n(e[l-1],e[l]));f--,s=function(_){_*=f;var y=Math.min(p,~~_);return u[y](_-y)},i=t}else r||(e=E5(el(e)?[]:{},e));if(!u){for(c in t)VP.call(a,e,c,"get",t[c]);s=function(_){return jP(_,a)||(o?e.p:e)}}}return Kd(i,s)},shuffle:Bre},install:mre,effects:DP,ticker:Z3,updateRoot:g3.updateRoot,plugins:Y3,globalTimeline:d1,core:{PropTween:m3,globals:Are,Tween:V2,Timeline:g3,Animation:Hg,getCache:S5,_removeLinkedListItem:XM,reverting:function(){return F4},context:function(e){return e&&E2&&(E2.data.push(e),e._ctx=E2),E2},suppressOverwrites:function(e){return yP=e}}};p3("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return tS[n]=V2[n]}),Z3.add(g3.updateRoot),kg=tS.to({},{duration:0});var eet=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},KP=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var c,l;if(ac(s)&&(c={},p3(s,function(u){return c[u]=1}),s=c),t){for(l in c={},s)c[l]=t(s[l]);s=c}!function(e,t){var r,s,o,i=e._targets;for(r in t)for(s=i.length;s--;)(o=e._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=eet(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))}(a,s)}}}},J3=tS.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,c;for(o in this.tween=i,t)c=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(c||0)+"",t[o],r,s,0,0,o)).op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)F4?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},KP("roundProps",HP),KP("modifiers"),KP("snap",Fre))||tS;V2.version=g3.version=J3.version="3.11.1",gre=1,ure()&&Pg();var nse,Zd,Og,XP,I5,ise,YP,lse,hf={},B5=180/Math.PI,Ng=Math.PI/180,Vg=Math.atan2,ZP=/([A-Z])/g,ret=/(left|right|width|margin|padding|x)/i,set=/[\s,\(]\S/,ff={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},JP=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},oet=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},aet=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},cet=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},sse=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},ose=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},uet=function(e,t,i){return e.style[t]=i},het=function(e,t,i){return e.style.setProperty(t,i)},fet=function(e,t,i){return e._gsap[t]=i},det=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},pet=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},get=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},z1="transform",Nu=z1+"Origin",met=function(e){var t=this,i=this.target,r=i.style;if(e in hf){if(this.tfm=this.tfm||{},"transform"!==e&&(~(e=ff[e]||e).indexOf(",")?e.split(",").forEach(function(s){return t.tfm[s]=df(i,s)}):this.tfm[e]=i._gsap.x?i._gsap[e]:df(i,e)),this.props.indexOf(z1)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Nu,"")),e=z1}r&&this.props.push(e,r[e])},ase=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Aet=function(){var s,o,e=this.props,t=this.target,i=t.style,r=t._gsap;for(s=0;s<e.length;s+=2)e[s+1]?i[e[s]]=e[s+1]:i.removeProperty(e[s].replace(ZP,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(s=YP())&&!s.isStart&&!i[z1]&&(ase(i),r.uncache=1)}},cse=function(e,t){var i={target:e,props:[],revert:Aet,save:met};return t&&t.split(",").forEach(function(r){return i.save(r)}),i},eH=function(e,t){var i=Zd.createElementNS?Zd.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Zd.createElement(e);return i.style?i:Zd.createElement(e)},j0=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(ZP,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Ug(t)||t,1)||""},use="O,Moz,ms,Ms,Webkit".split(","),Ug=function(e,t,i){var s=(t||I5).style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(use[o]+e in s););return o<0?null:(3===o?"ms":o>=0?use[o]:"")+e},tH=function(){typeof window<"u"&&window.document&&(nse=window,Og=(Zd=nse.document).documentElement,I5=eH("div")||{style:{}},eH("div"),z1=Ug(z1),Nu=z1+"Origin",I5.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",lse=!!Ug("perspective"),YP=J3.core.reverting,XP=1)},nH=function n(e){var o,t=eH("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(Og.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Og.removeChild(t),this.style.cssText=s,o},hse=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},fse=function(e){var t;try{t=e.getBBox()}catch{t=nH.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===nH||(t=nH.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+hse(e,["x","cx","x1"])||0,y:+hse(e,["y","cy","y1"])||0,width:0,height:0}},dse=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!fse(e))},Yv=function(e,t){if(t){var i=e.style;t in hf&&t!==Nu&&(t=z1),i.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),i.removeProperty(t.replace(ZP,"-$1").toLowerCase())):i.removeAttribute(t)}},Jd=function(e,t,i,r,s,o){var a=new m3(e._pt,t,i,0,1,o?ose:sse);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},pse={deg:1,rad:1,turn:1},vet={grid:1,flex:1},e6=function n(e,t,i,r){var _,y,w,C,s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=I5.style,c=ret.test(t),l="svg"===e.tagName.toLowerCase(),u=(l?"client":"offset")+(c?"Width":"Height"),f=100,p="px"===r,g="%"===r;return r===o||!s||pse[r]||pse[o]?s:("px"!==o&&!p&&(s=n(e,t,i,"px")),C=e.getCTM&&dse(e),!g&&"%"!==o||!hf[t]&&!~t.indexOf("adius")?(a[c?"width":"height"]=f+(p?o:r),y=~t.indexOf("adius")||"em"===r&&e.appendChild&&!l?e:e.parentNode,C&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===Zd||!y.appendChild)&&(y=Zd.body),(w=y._gsap)&&g&&w.width&&c&&w.time===Z3.time&&!w.uncache?r2(s/w.width*f):((g||"%"===o)&&!vet[j0(y,"display")]&&(a.position=j0(e,"position")),y===e&&(a.position="static"),y.appendChild(I5),_=I5[u],y.removeChild(I5),a.position="absolute",c&&g&&((w=S5(y)).time=Z3.time,w.width=y[u]),r2(p?_*s/f:_&&s?f/_*s:0))):(_=C?e.getBBox()[c?"width":"height"]:e[u],r2(g?s/_*f:s/100*_)))},df=function(e,t,i,r){var s;return XP||tH(),t in ff&&"transform"!==t&&~(t=ff[t]).indexOf(",")&&(t=t.split(",")[0]),hf[t]&&"transform"!==t?(s=Jv(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:iS(j0(e,Nu))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=nS[t]&&nS[t](e,t,i)||j0(e,t)||yre(e,t)||("opacity"===t?1:0)),i&&!~(s+"").trim().indexOf(" ")?e6(e,t,s,i)+i:s},_et=function(e,t,i,r){if(!i||"none"===i){var s=Ug(t,e,1),o=s&&j0(e,s,1);o&&o!==i?(t=s,i=o):"borderColor"===t&&(i=j0(e,"borderTopColor"))}var u,f,p,g,_,y,w,C,b,M,T,a=new m3(this._pt,e.style,t,0,1,Zre),c=0,l=0;if(a.b=i,a.e=r,i+="","auto"==(r+="")&&(e.style[t]=r,r=j0(e,t)||r,e.style[t]=i),Ure(u=[i,r]),r=u[1],p=(i=u[0]).match(Ig)||[],(r.match(Ig)||[]).length){for(;f=Ig.exec(r);)w=f[0],b=r.substring(c,f.index),_?_=(_+1)%5:("rgba("===b.substr(-5)||"hsla("===b.substr(-5))&&(_=1),w!==(y=p[l++]||"")&&(g=parseFloat(y)||0,T=y.substr((g+"").length),"="===w.charAt(1)&&(w=Bg(g,w)+T),C=parseFloat(w),M=w.substr((C+"").length),c=Ig.lastIndex-M.length,M||(M=M||K3.units[t]||T,c===r.length&&(r+=M,a.e+=M)),T!==M&&(g=e6(e,t,y,M)||0),a._pt={_next:a._pt,p:b||1===l?b:",",s:g,c:C-g,m:_&&_<4||"zIndex"===t?Math.round:0});a.c=c<r.length?r.substring(c,r.length):""}else a.r="display"===t&&"none"===r?ose:sse;return dre.test(r)&&(a.e=0),this._pt=a,a},gse={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},yet=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return("top"===i||"bottom"===i||"left"===r||"right"===r)&&(e=i,i=r,r=e),t[0]=gse[i]||i,t[1]=gse[r]||r,t.join(" ")},wet=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,c,l,i=t.t,r=i.style,s=t.u,o=i._gsap;if("all"===s||!0===s)r.cssText="",c=1;else for(l=(s=s.split(",")).length;--l>-1;)hf[a=s[l]]&&(c=1,a="transformOrigin"===a?Nu:z1),Yv(i,a);c&&(Yv(i,z1),o&&(o.svg&&i.removeAttribute("transform"),Jv(i,1),o.uncache=1,ase(r)))}},nS={clearProps:function(e,t,i,r,s){if("isFromStart"!==s.data){var o=e._pt=new m3(e._pt,t,i,0,0,wet);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},Zv=[1,0,0,1,0,0],mse={},Ase=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},vse=function(e){var t=j0(e,z1);return Ase(t)?Zv:t.substr(7).match(fre).map(r2)},iH=function(e,t){var o,a,c,l,i=e._gsap||S5(e),r=e.style,s=vse(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(c=e.transform.baseVal.consolidate().matrix).a,c.b,c.c,c.d,c.e,c.f]).join(",")?Zv:s:(s===Zv&&!e.offsetParent&&e!==Og&&!i.svg&&(c=r.display,r.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(l=1,a=e.nextElementSibling,Og.appendChild(e)),s=vse(e),c?r.display=c:Yv(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):Og.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},rH=function(e,t,i,r,s,o){var F,P,k,a=e._gsap,c=s||iH(e,!0),l=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,p=a.yOffset||0,g=c[0],_=c[1],y=c[2],w=c[3],C=c[4],b=c[5],M=t.split(" "),T=parseFloat(M[0])||0,I=parseFloat(M[1])||0;i?c!==Zv&&(P=g*w-_*y)&&(k=T*(-_/P)+I*(g/P)-(g*b-_*C)/P,T=T*(w/P)+I*(-y/P)+(y*b-w*C)/P,I=k):(T=(F=fse(e)).x+(~M[0].indexOf("%")?T/100*F.width:T),I=F.y+(~(M[1]||M[0]).indexOf("%")?I/100*F.height:I)),r||!1!==r&&a.smooth?(a.xOffset=f+((C=T-l)*g+(b=I-u)*y)-C,a.yOffset=p+(C*_+b*w)-b):a.xOffset=a.yOffset=0,a.xOrigin=T,a.yOrigin=I,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[Nu]="0px 0px",o&&(Jd(o,a,"xOrigin",l,T),Jd(o,a,"yOrigin",u,I),Jd(o,a,"xOffset",f,a.xOffset),Jd(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",T+" "+I)},Jv=function(e,t){var i=e._gsap||new jre(e);if("x"in i&&!t&&!i.uncache)return i;var u,f,p,g,_,y,w,C,b,M,T,I,F,P,R,k,W,ie,Te,me,Q,he,K,oe,fe,de,Re,Ze,Be,wt,ut,It,r=e.style,s=i.scaleX<0,o="px",a="deg",c=getComputedStyle(e),l=j0(e,Nu)||"0";return u=f=p=y=w=C=b=M=T=0,g=_=1,i.svg=!(!e.getCTM||!dse(e)),c.translate&&(("none"!==c.translate||"none"!==c.scale||"none"!==c.rotate)&&(r[z1]=("none"!==c.translate?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==c.rotate?"rotate("+c.rotate+") ":"")+("none"!==c.scale?"scale("+c.scale.split(" ").join(",")+") ":"")+c[z1]),r.scale=r.rotate=r.translate="none"),P=iH(e,i.svg),i.svg&&(i.uncache?(fe=e.getBBox(),l=i.xOrigin-fe.x+"px "+(i.yOrigin-fe.y)+"px",oe=""):oe=!t&&e.getAttribute("data-svg-origin"),rH(e,oe||l,!!oe||i.originIsAbsolute,!1!==i.smooth,P)),I=i.xOrigin||0,F=i.yOrigin||0,P!==Zv&&(ie=P[0],Te=P[1],me=P[2],Q=P[3],u=he=P[4],f=K=P[5],6===P.length?(g=Math.sqrt(ie*ie+Te*Te),_=Math.sqrt(Q*Q+me*me),y=ie||Te?Vg(Te,ie)*B5:0,(b=me||Q?Vg(me,Q)*B5+y:0)&&(_*=Math.abs(Math.cos(b*Ng))),i.svg&&(u-=I-(I*ie+F*me),f-=F-(I*Te+F*Q))):(wt=P[7],Re=P[8],Ze=P[9],ut=P[11],u=P[12],f=P[13],p=P[14],w=(R=Vg(It=P[6],Be=P[10]))*B5,R&&(oe=he*(k=Math.cos(-R))+Re*(W=Math.sin(-R)),fe=K*k+Ze*W,de=It*k+Be*W,Re=he*-W+Re*k,Ze=K*-W+Ze*k,Be=It*-W+Be*k,ut=wt*-W+ut*k,he=oe,K=fe,It=de),C=(R=Vg(-me,Be))*B5,R&&(k=Math.cos(-R),ut=Q*(W=Math.sin(-R))+ut*k,ie=oe=ie*k-Re*W,Te=fe=Te*k-Ze*W,me=de=me*k-Be*W),y=(R=Vg(Te,ie))*B5,R&&(oe=ie*(k=Math.cos(R))+Te*(W=Math.sin(R)),fe=he*k+K*W,Te=Te*k-ie*W,K=K*k-he*W,ie=oe,he=fe),w&&Math.abs(w)+Math.abs(y)>359.9&&(w=y=0,C=180-C),g=r2(Math.sqrt(ie*ie+Te*Te+me*me)),_=r2(Math.sqrt(K*K+It*It)),R=Vg(he,K),b=Math.abs(R)>2e-4?R*B5:0,T=ut?1/(ut<0?-ut:ut):0),i.svg&&(oe=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Ase(j0(e,z1)),oe&&e.setAttribute("transform",oe))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(g*=-1,b+=y<=0?180:-180,y+=y<=0?180:-180):(_*=-1,b+=b<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=f-((i.yPercent=f&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=r2(g),i.scaleY=r2(_),i.rotation=r2(y)+a,i.rotationX=r2(w)+a,i.rotationY=r2(C)+a,i.skewX=b+a,i.skewY=M+a,i.transformPerspective=T+o,(i.zOrigin=parseFloat(l.split(" ")[2])||0)&&(r[Nu]=iS(l)),i.xOffset=i.yOffset=0,i.force3D=K3.force3D,i.renderTransform=i.svg?xet:lse?_se:Cet,i.uncache=0,i},iS=function(e){return(e=e.split(" "))[0]+" "+e[1]},sH=function(e,t,i){var r=tl(t);return r2(parseFloat(t)+parseFloat(e6(e,"x",i+"px",r)))+r},Cet=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,_se(e,t)},R5="0deg",e_="0px",F5=") ",_se=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.z,l=i.rotation,u=i.rotationY,f=i.rotationX,p=i.skewX,g=i.skewY,_=i.scaleX,y=i.scaleY,w=i.transformPerspective,C=i.force3D,b=i.target,M=i.zOrigin,T="",I="auto"===C&&e&&1!==e||!0===C;if(M&&(f!==R5||u!==R5)){var k,F=parseFloat(u)*Ng,P=Math.sin(F),R=Math.cos(F);F=parseFloat(f)*Ng,k=Math.cos(F),o=sH(b,o,P*k*-M),a=sH(b,a,-Math.sin(F)*-M),c=sH(b,c,R*k*-M+M)}w!==e_&&(T+="perspective("+w+F5),(r||s)&&(T+="translate("+r+"%, "+s+"%) "),(I||o!==e_||a!==e_||c!==e_)&&(T+=c!==e_||I?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+F5),l!==R5&&(T+="rotate("+l+F5),u!==R5&&(T+="rotateY("+u+F5),f!==R5&&(T+="rotateX("+f+F5),(p!==R5||g!==R5)&&(T+="skew("+p+", "+g+F5),(1!==_||1!==y)&&(T+="scale("+_+", "+y+F5),b.style[z1]=T||"translate(0, 0)"},xet=function(e,t){var I,F,P,R,k,i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.rotation,l=i.skewX,u=i.skewY,f=i.scaleX,p=i.scaleY,g=i.target,_=i.xOrigin,y=i.yOrigin,w=i.xOffset,C=i.yOffset,b=i.forceCSS,M=parseFloat(o),T=parseFloat(a);c=parseFloat(c),l=parseFloat(l),(u=parseFloat(u))&&(l+=u=parseFloat(u),c+=u),c||l?(c*=Ng,l*=Ng,I=Math.cos(c)*f,F=Math.sin(c)*f,P=Math.sin(c-l)*-p,R=Math.cos(c-l)*p,l&&(u*=Ng,k=Math.tan(l-u),P*=k=Math.sqrt(1+k*k),R*=k,u&&(k=Math.tan(u),I*=k=Math.sqrt(1+k*k),F*=k)),I=r2(I),F=r2(F),P=r2(P),R=r2(R)):(I=f,R=p,F=P=0),(M&&!~(o+"").indexOf("px")||T&&!~(a+"").indexOf("px"))&&(M=e6(g,"x",o,"px"),T=e6(g,"y",a,"px")),(_||y||w||C)&&(M=r2(M+_-(_*I+y*P)+w),T=r2(T+y-(_*F+y*R)+C)),(r||s)&&(k=g.getBBox(),M=r2(M+r/100*k.width),T=r2(T+s/100*k.height)),g.setAttribute("transform",k="matrix("+I+","+F+","+P+","+R+","+M+","+T+")"),b&&(g.style[z1]=k)},bet=function(e,t,i,r,s){var f,p,o=360,a=ac(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?B5:1)-r,u=r+l+"deg";return a&&("short"===(f=s.split("_")[1])&&(l%=o)!=l%180&&(l+=l<0?o:-o),"cw"===f&&l<0?l=(l+36e9)%o-~~(l/o)*o:"ccw"===f&&l>0&&(l=(l-36e9)%o-~~(l/o)*o)),e._pt=p=new m3(e._pt,t,i,r,l,oet),p.e=u,p.u="deg",e._props.push(i),p},yse=function(e,t){for(var i in t)e[i]=t[i];return e},Met=function(e,t,i){var a,c,l,u,f,p,_,r=yse({},i._gsap),o=i.style;for(c in r.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),o[z1]=t,a=Jv(i,1),Yv(i,z1),i.setAttribute("transform",l)):(l=getComputedStyle(i)[z1],o[z1]=t,a=Jv(i,1),o[z1]=l),hf)(l=r[c])!==(u=a[c])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(c)<0&&(f=tl(l)!==(_=tl(u))?e6(i,c,l,_):parseFloat(l),p=parseFloat(u),e._pt=new m3(e._pt,a,c,f,p-f,JP),e._pt.u=_||0,e._props.push(c));yse(a,r)};p3("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});nS[e>1?"border"+n:n]=function(a,c,l,u,f){var p,g;if(arguments.length<4)return p=o.map(function(_){return df(a,_,l)}),5===(g=p.join(" ")).split(p[0]).length?p[0]:g;p=(u+"").split(" "),g={},o.forEach(function(_,y){return g[_]=p[y]=p[y]||p[(y-1)/2|0]}),a.init(c,g,f)}});var wse={name:"css",register:tH,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var l,u,f,p,g,_,y,w,C,b,M,T,I,F,P,R,o=this._props,a=e.style,c=i.vars.startAt;for(y in XP||tH(),this.styles=this.styles||cse(e),R=this.styles.props,this.tween=i,t)if("autoRound"!==y&&(u=t[y],!Y3[y]||!$re(y,t,i,r,e,s)))if(_=nS[y],"function"==(g=typeof u)&&(g=typeof(u=u.call(i,r,e,s))),"string"===g&&~u.indexOf("random(")&&(u=jv(u)),_)_(this,e,y,u,i)&&(P=1);else if("--"===y.substr(0,2))l=(getComputedStyle(e).getPropertyValue(y)+"").trim(),u+="",Xd.lastIndex=0,Xd.test(l)||(w=tl(l),C=tl(u)),C?w!==C&&(l=e6(e,y,l,C)+C):w&&(u+=w),this.add(a,"setProperty",l,u,r,s,0,0,y),o.push(y),R.push(y,a[y]);else if("undefined"!==g){if(c&&y in c?(l="function"==typeof c[y]?c[y].call(i,r,e,s):c[y],ac(l)&&~l.indexOf("random(")&&(l=jv(l)),tl(l+"")||(l+=K3.units[y]||tl(df(e,y))||""),"="===(l+"").charAt(1)&&(l=df(e,y))):l=df(e,y),p=parseFloat(l),(b="string"===g&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),f=parseFloat(u),y in ff&&("autoAlpha"===y&&(1===p&&"hidden"===df(e,"visibility")&&f&&(p=0),R.push("visibility",a.visibility),Jd(this,a,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),"scale"!==y&&"transform"!==y&&~(y=ff[y]).indexOf(",")&&(y=y.split(",")[0])),M=y in hf)if(this.styles.save(y),T||((I=e._gsap).renderTransform&&!t.parseTransform||Jv(e,t.parseTransform),F=!1!==t.smoothOrigin&&I.smooth,(T=this._pt=new m3(this._pt,a,z1,0,1,I.renderTransform,I,0,-1)).dep=1),"scale"===y)this._pt=new m3(this._pt,I,"scaleY",I.scaleY,(b?Bg(I.scaleY,b+f):f)-I.scaleY||0,JP),this._pt.u=0,o.push("scaleY",y),y+="X";else{if("transformOrigin"===y){R.push(Nu,a[Nu]),u=yet(u),I.svg?rH(e,u,0,F,0,this):((C=parseFloat(u.split(" ")[2])||0)!==I.zOrigin&&Jd(this,I,"zOrigin",I.zOrigin,C),Jd(this,a,y,iS(l),iS(u)));continue}if("svgOrigin"===y){rH(e,u,1,F,0,this);continue}if(y in mse){bet(this,I,y,p,b?Bg(p,b+u):u);continue}if("smoothOrigin"===y){Jd(this,I,"smooth",I.smooth,u);continue}if("force3D"===y){I[y]=u;continue}if("transform"===y){Met(this,u,e);continue}}else y in a||(y=Ug(y)||y);if(M||(f||0===f)&&(p||0===p)&&!set.test(u)&&y in a)f||(f=0),(w=(l+"").substr((p+"").length))!==(C=tl(u)||(y in K3.units?K3.units[y]:w))&&(p=e6(e,y,l,C)),this._pt=new m3(this._pt,M?I:a,y,p,(b?Bg(p,b+f):f)-p,M||"px"!==C&&"zIndex"!==y||!1===t.autoRound?JP:cet),this._pt.u=C||0,w!==C&&"%"!==C&&(this._pt.b=l,this._pt.r=aet);else if(y in a)_et.call(this,e,y,l,b?b+u:u);else{if(!(y in e)){EP(y,u);continue}this.add(e,y,l||e[y],b?b+u:u,r,s)}M||R.push(y,a[y]),o.push(y)}P&&Jre(this)},render:function(e,t){if(t.tween._time||!YP())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:df,aliases:ff,getSetter:function(e,t,i){var r=ff[t];return r&&r.indexOf(",")<0&&(t=r),t in hf&&t!==Nu&&(e._gsap.x||df(e,"x"))?i&&ise===i?"scale"===t?det:fet:(ise=i||{})&&("scale"===t?pet:get):e.style&&!CP(e.style[t])?uet:~t.indexOf("-")?het:WP(e,t)},core:{_removeProperty:Yv,_getMatrix:iH}};J3.utils.checkPrefix=Ug,J3.core.getStyleSaver=cse,function(n,e,t,i){var r=p3(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){hf[s]=1});p3(e,function(s){K3.units[s]="deg",mse[s]=1}),ff[r[13]]=n+","+e,p3("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");ff[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),p3("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){K3.units[n]="px"}),J3.registerPlugin(wse);var Vu=J3.registerPlugin(wse)||J3;let Eet=(()=>{class n extends Ys{constructor(t,i={}){super(t),this.isReflector=!0,this.type="Reflector",this.camera=new z2;const r=this,s=new Dn(void 0!==i.color?i.color:8355711),o=i.textureWidth||512,a=i.textureHeight||512,c=i.clipBias||0,l=i.shader||n.ReflectorShader,u=void 0!==i.multisample?i.multisample:4,f=new Pu,p=new ge,g=new ge,_=new ge,y=new Vi,w=new ge(0,0,-1),C=new yo,b=new ge,M=new ge,T=new yo,I=new Vi,F=this.camera,P=new I4(o,a,{samples:u,type:P0}),R=new Sc({uniforms:Od.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});R.uniforms.tDiffuse.value=P.texture,R.uniforms.color.value=s,R.uniforms.textureMatrix.value=I,this.material=R,this.onBeforeRender=function(k,W,ie){if(g.setFromMatrixPosition(r.matrixWorld),_.setFromMatrixPosition(ie.matrixWorld),y.extractRotation(r.matrixWorld),p.set(0,0,1),p.applyMatrix4(y),b.subVectors(g,_),b.dot(p)>0)return;b.reflect(p).negate(),b.add(g),y.extractRotation(ie.matrixWorld),w.set(0,0,-1),w.applyMatrix4(y),w.add(_),M.subVectors(g,w),M.reflect(p).negate(),M.add(g),F.position.copy(b),F.up.set(0,1,0),F.up.applyMatrix4(y),F.up.reflect(p),F.lookAt(M),F.far=ie.far,F.updateMatrixWorld(),F.projectionMatrix.copy(ie.projectionMatrix),I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),I.multiply(F.projectionMatrix),I.multiply(F.matrixWorldInverse),I.multiply(r.matrixWorld),f.setFromNormalAndCoplanarPoint(p,g),f.applyMatrix4(F.matrixWorldInverse),C.set(f.normal.x,f.normal.y,f.normal.z,f.constant);const Te=F.projectionMatrix;T.x=(Math.sign(C.x)+Te.elements[8])/Te.elements[0],T.y=(Math.sign(C.y)+Te.elements[9])/Te.elements[5],T.z=-1,T.w=(1+Te.elements[10])/Te.elements[14],C.multiplyScalar(2/C.dot(T)),Te.elements[2]=C.x,Te.elements[6]=C.y,Te.elements[10]=C.z+1-c,Te.elements[14]=C.w,r.visible=!1;const me=k.getRenderTarget(),Q=k.xr.enabled,he=k.shadowMap.autoUpdate,K=k.outputEncoding,oe=k.toneMapping;k.xr.enabled=!1,k.shadowMap.autoUpdate=!1,k.outputEncoding=Gh,k.toneMapping=0,k.setRenderTarget(P),k.state.buffers.depth.setMask(!0),!1===k.autoClear&&k.clear(),k.render(W,F),k.xr.enabled=Q,k.shadowMap.autoUpdate=he,k.outputEncoding=K,k.toneMapping=oe,k.setRenderTarget(me);const fe=ie.viewport;void 0!==fe&&k.state.viewport(fe),r.visible=!0},this.getRenderTarget=function(){return P},this.dispose=function(){P.dispose(),r.material.dispose()}}}return n.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"},n})();class Tet{constructor(e){this.height=1.2,this.width=.8,this.bottom=1.2,this.thicknessOSB=.015,this.gap=.1,Object.assign(this,e),this.top=this.bottom+this.height,this.roughHeight=this.height+2*this.gap,this.roughHeightOSB=this.roughHeight+2*this.thicknessOSB,this.roughWidth=this.width+2*this.gap,this.roughWidthOSB=this.roughWidth+2*this.thicknessOSB,this.roughBottom=this.bottom-this.gap,this.roughBottomOSB=this.roughBottom-this.thicknessOSB,this.roughTop=this.top+this.gap,this.roughTopOSB=this.roughTop+this.thicknessOSB}}var vn=(()=>(function(n){n.ground="ground",n.pine="pine",n.osb="osb",n.gips="gips",n.insulation="insulation",n.outerSheet="outerSheet",n.facade="facade",n.tape="tape",n.foam="foam",n.hollowCoreSlap="hollowCoreSlap",n.concrete="concrete",n.white="white",n.whiteWood="whiteWood",n.ral9016="ral9016",n.normals="normals",n.unknown="unknown",n.window="window",n.floor="floor",n.roof="roof",n.wireFrame="wireFrame"}(vn||(vn={})),vn))(),Js=(()=>(function(n){n.hollowCoreSlap="hollowCoreSlap",n.hollowCoreSlapSide="hollowCoreSlapSide",n.foam="foam",n.gips="gips",n.pine="pine",n.concrete="concrete",n.osb="osb",n.whiteWood="whiteWood",n.insulation="insulation",n.roof="roof",n.fishbone="fishbone"}(Js||(Js={})),Js))();const Let=[{key:Js.hollowCoreSlap,url:"assets/textures/hollowCoreSlap.jpg",offset:[0,0],scale:[.7,1]},{key:Js.hollowCoreSlapSide,url:"assets/textures/hollowCoreSlapSide.jpg"},{key:Js.foam,url:"assets/textures/foam.jpg"},{key:Js.gips,url:"assets/textures/gips.jpg"},{key:Js.pine,url:"assets/textures/western-yellow-pine.jpg"},{key:Js.concrete,url:"assets/textures/hollowCoreSlapPlain.jpg"},{key:Js.whiteWood,url:"assets/textures/whiteWood.jpg"},{key:Js.osb,url:"assets/textures/osb.jpg"},{key:Js.fishbone,url:"assets/textures/fishbone.jpg",rotation:90,scale:[.6,.6]},{key:Js.insulation,url:"assets/textures/insulation.png"},{key:Js.roof,url:"assets/textures/roof.png",rotation:90,scale:[.4,.4]}];let rS=(()=>{class n{constructor(t,i){this.cookieService=t,this.httpClient=i,this.colors={},this.textures={},[0,5,10,15,20,30,40,50,60,70,80,90,100].forEach(r=>{this.colors[r]=getComputedStyle(document.body).getPropertyValue(`--color-${r}`).trim()}),this.generateTextures()}generateTextures(){Let.forEach(t=>{var i=new Image,r=new D4;r.image=i,i.onload=function(){t.scale||(t.scale=[1,1]),t.offset||(t.offset=[0,0]),r.wrapS=r.wrapT=k0,r.offset.set(t.offset[0],t.offset[1]),r.repeat.set(t.scale[0],t.scale[1]),t.rotation&&(r.rotation=Ci(t.rotation)),r.needsUpdate=!0},this.textures[t.key]=r,this.httpClient.get(t.url,{responseType:"arraybuffer",headers:{"cache-control":"private, max-age=3600"}}).subscribe(s=>{const o=new Uint8Array(s);this.cookieService.set(`texture-${t.key}`,`${JSON.stringify(o).slice(0,100)}`);var a=new Blob([o.buffer],{type:"image/png"}),c=URL.createObjectURL(a);this.textures[t.key].image.src=c})})}getMaterial(t,i=!1){let r=[new Ma({color:65280})];if(t===vn.pine&&(r=[new Ma({map:this.textures[Js.pine]})]),t===vn.floor&&(r=[new Ma({map:this.textures[Js.fishbone]})]),t===vn.ral9016&&(r=[new Ma({color:15855850,bumpMap:this.textures[Js.pine],bumpScale:.05})]),t===vn.white&&(r=[new Ma({color:16777215,bumpMap:this.textures[Js.pine],bumpScale:.05})]),t===vn.normals&&(r=[new Mk({})]),t===vn.roof&&(r=[new Ma({color:15592934,map:this.textures[Js.roof],bumpMap:this.textures[Js.roof]})]),t===vn.wireFrame&&(r=[new Ma({wireframe:!0})]),t===vn.whiteWood&&(r=[new Ma({map:this.textures[Js.whiteWood]})]),t===vn.osb&&(r=[new Ma({map:this.textures[Js.osb]})]),t===vn.hollowCoreSlap){const s=this.textures[Js.hollowCoreSlapSide],o=this.textures[Js.concrete],a=this.textures[Js.hollowCoreSlap],c=this.textures[Js.foam];r=[new Ma({map:s}),new Ma({map:s}),new Ma({map:o}),new Ma({map:c}),new Ma({map:a}),new Ma({map:a})]}if(t===vn.gips&&(r=[new Ma({map:this.textures[Js.gips]})]),t===vn.ground&&(r=[new Ma({color:this.colors[10]})]),t===vn.concrete&&(r=[new Ma({map:this.textures[Js.concrete]})]),t===vn.tape&&(r=[new Ma({color:7829367})]),t===vn.foam&&(r=[new Ma({map:this.textures[Js.foam]})]),t===vn.insulation&&(r=[new Ma({map:this.textures[Js.insulation]})]),t===vn.window&&(r=[new Zh({opacity:.5,transparent:!0})]),t===vn.outerSheet){const s=new Ma({map:this.textures[Js.insulation]});r=[s],s.color=new Dn(6372634)}if(t===vn.facade){const s=this.textures[Js.pine];s.rotation=Ci(90),s.repeat.set(4,.3);const o=new Ma({map:s});r=[o],o.color=new Dn(8394776)}return 1===r.length&&(r=[r[0],r[0],r[0],r[0],r[0],r[0]]),r.forEach(s=>{s.transparent=!0,s.needsUpdate=!0}),i?r[0]:r}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mu),Xe(vd))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oH{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}class Det{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}}class $0{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygons=[],e&&this.build(e)}clone(){const e=new $0;return e.plane=this.plane&&this.plane.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.polygons=this.polygons.map(t=>t.clone()),e}invert(){for(let t=0;t<this.polygons.length;t++)this.polygons[t].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();const e=this.front;this.front=this.back,this.back=e}clipPolygons(e){if(!this.plane)return e.slice();let t=new Array,i=new Array;for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],t,i,t,i);return this.front&&(t=this.front.clipPolygons(t)),i=this.back?this.back.clipPolygons(i):[],t.concat(i)}clipTo(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}allPolygons(){let e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}build(e){if(!e.length)return;this.plane||(this.plane=e[0].plane.clone());const t=[],i=[];for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],this.polygons,this.polygons,t,i);t.length&&(this.front||(this.front=new $0),this.front.build(t)),i.length&&(this.back||(this.back=new $0),this.back.build(i))}}class A3{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clone(){return new A3(this.x,this.y,this.z)}negate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}times(e){return this.x*=e,this.y*=e,this.z*=e,this}dividedBy(e){return this.x/=e,this.y/=e,this.z/=e,this}lerp(e,t){return this.add((new A3).copy(e).sub(this).times(t))}unit(){return this.dividedBy(this.length())}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}normalize(){return this.unit()}cross(e){const t=this.clone(),i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,c=e.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}toVector3(){return new ge(this.x,this.y,this.z)}}let Iet=(()=>{class n{constructor(t,i){this.normal=t,this.w=i,this.normal=t,this.w=i}clone(){return new n(this.normal.clone(),this.w)}flip(){this.normal.negate(),this.w=-this.w}splitPolygon(t,i,r,s,o){let f=0;const p=[];for(let g=0;g<t.vertices.length;g++){const _=this.normal.dot(t.vertices[g].pos)-this.w,y=_<-n.EPSILON?2:_>n.EPSILON?1:0;f|=y,p.push(y)}switch(f){case 0:(this.normal.dot(t.plane.normal)>0?i:r).push(t);break;case 1:s.push(t);break;case 2:o.push(t);break;case 3:{const g=[],_=[];for(let y=0;y<t.vertices.length;y++){const w=(y+1)%t.vertices.length,C=p[y],b=p[w],M=t.vertices[y],T=t.vertices[w];if(2!=C&&g.push(M),1!=C&&_.push(2!=C?M.clone():M),3==(C|b)){const I=(this.w-this.normal.dot(M.pos))/this.normal.dot((new A3).copy(T.pos).sub(M.pos)),F=M.interpolate(T,I);g.push(F),_.push(F.clone())}}g.length>=3&&s.push(new Gg(g,t.shared)),_.length>=3&&o.push(new Gg(_,t.shared));break}}}static fromPoints(t,i,r){const s=(new A3).copy(i).sub(t).cross((new A3).copy(r).sub(t)).normalize();return new n(s.clone(),s.dot(t))}}return n.EPSILON=1e-5,n})();class Gg{constructor(e,t){this.vertices=e,this.shared=t,this.plane=Iet.fromPoints(e[0].pos,e[1].pos,e[2].pos)}clone(){return new Gg(this.vertices.map(e=>e.clone()),this.shared)}flip(){this.vertices.reverse().map(e=>e.flip()),this.plane.flip()}}class sS{constructor(e,t,i,r){this.pos=(new A3).copy(e),this.normal=(new A3).copy(t),this.uv=(new A3).copy(i),this.uv.z=0,r&&(this.color=(new A3).copy(r))}clone(){return new sS(this.pos,this.normal,this.uv,this.color)}flip(){this.normal.negate()}interpolate(e,t){return new sS(this.pos.clone().lerp(e.pos,t),this.normal.clone().lerp(e.normal,t),this.uv.clone().lerp(e.uv,t),this.color&&e.color&&this.color.clone().lerp(e.color,t))}}class qa{constructor(){this.polygons=new Array}static fromPolygons(e){const t=new qa;return t.polygons=e,t}static fromGeometry(e,t){let i=[];const r=e.attributes.position,s=e.attributes.normal,o=e.attributes.uv,a=e.attributes.color,c=e.groups;let l;if(e.index)l=e.index.array;else{l=new Array(r.array.length/r.itemSize|0);for(let f=0;f<l.length;f++)l[f]=f}i=new Array(l.length/3|0);for(let f=0,p=0,g=l.length;f<g;f+=3,p++){const _=new Array(3);for(let y=0;y<3;y++){const w=l[f+y],C=3*w,b=2*w,F=s.array[C],P=s.array[C+1],R=s.array[C+2],k=o?.array[b],W=o?.array[b+1];_[y]=new sS(new A3(r.array[C],r.array[C+1],r.array[C+2]),new A3(F,P,R),new A3(k,W,0),a&&new A3(a.array[b],a.array[b+1],a.array[b+2]))}if(void 0===t&&c&&c.length>0)for(const y of c)f>=y.start&&f<y.start+y.count&&(i[p]=new Gg(_,y.materialIndex));else i[p]=new Gg(_,t)}return qa.fromPolygons(i.filter(f=>!isNaN(f.plane.normal.x)))}static toGeometry(e,t){let i=0;const r=e.polygons;for(const g of r)i+=g.vertices.length-2;const s=new vr,o=new oH(3*i*3),a=new oH(3*i*3),c=new Det(2*i*3);let l;const u=[],f=[];for(const g of r){const _=g.vertices,y=_.length;void 0!==g.shared&&(u[g.shared]||(u[g.shared]=[])),y&&void 0!==_[0].color&&(l||(l=new oH(3*i*3)));for(let w=3;w<=y;w++)(void 0===g.shared?f:u[g.shared]).push(o.top/3,o.top/3+1,o.top/3+2),o.write(_[0].pos),o.write(_[w-2].pos),o.write(_[w-1].pos),a.write(_[0].normal),a.write(_[w-2].normal),a.write(_[w-1].normal),c&&(c.write(_[0].uv),c.write(_[w-2].uv),c.write(_[w-1].uv)),l&&(l.write(_[0].color),l.write(_[w-2].color),l.write(_[w-1].color))}s.setAttribute("position",new Wa(o.array,3)),s.setAttribute("normal",new Wa(a.array,3)),c&&s.setAttribute("uv",new Wa(c.array,2)),l&&s.setAttribute("color",new Wa(l.array,3));for(let g=0;g<u.length;g++)void 0===u[g]&&(u[g]=[]);if(u.length){let g=[],_=0;for(let y=0;y<u.length;y++)s.addGroup(_,u[y].length,y),_+=u[y].length,g=g.concat(u[y]);s.addGroup(_,f.length,u.length),g=g.concat(f),s.setIndex(g)}const p=(new Vi).copy(t).invert();return s.applyMatrix4(p),s.computeBoundingSphere(),s.computeBoundingBox(),s}static fromMesh(e,t){const i=qa.fromGeometry(e.geometry,t),r=new ge,s=new h3;s.getNormalMatrix(e.matrix);for(let o=0;o<i.polygons.length;o++){const a=i.polygons[o];for(let c=0;c<a.vertices.length;c++){const l=a.vertices[c];l.pos.copy(r.copy(l.pos.toVector3()).applyMatrix4(e.matrix)),l.normal.copy(r.copy(l.normal.toVector3()).applyMatrix3(s))}}return i}static toMesh(e,t,i){const r=qa.toGeometry(e,t),s=new Ys(r,i);return s.matrix.copy(t),s.matrix.decompose(s.position,s.quaternion,s.scale),s.rotation.setFromQuaternion(s.quaternion),s.updateMatrixWorld(),s.castShadow=s.receiveShadow=!0,s}static union(e,t){const i=qa.fromMesh(e),r=qa.fromMesh(t);return qa.toMesh(i.union(r),e.matrix,e.material)}static subtract(e,t){const i=qa.fromMesh(e),r=qa.fromMesh(t);return qa.toMesh(i.subtract(r),e.matrix,e.material)}static intersect(e,t){const i=qa.fromMesh(e),r=qa.fromMesh(t);return qa.toMesh(i.intersect(r),e.matrix,e.material)}clone(){const e=new qa;return e.polygons=this.polygons.map(t=>t.clone()).filter(t=>Number.isFinite(t.plane.w)),e}toPolygons(){return this.polygons}union(e){const t=new $0(this.clone().polygons),i=new $0(e.clone().polygons);return t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),qa.fromPolygons(t.allPolygons())}subtract(e){const t=new $0(this.clone().polygons),i=new $0(e.clone().polygons);return t.invert(),t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),t.invert(),qa.fromPolygons(t.allPolygons())}intersect(e){const t=new $0(this.clone().polygons),i=new $0(e.clone().polygons);return t.invert(),i.clipTo(t),i.invert(),t.clipTo(i),i.clipTo(t),t.build(i.allPolygons()),t.invert(),qa.fromPolygons(t.allPolygons())}inverse(){const e=this.clone();for(const t of e.polygons)t.flip();return e}toMesh(e,t){return qa.toMesh(this,e,t)}toGeometry(e){return qa.toGeometry(this,e)}}const Cse={type:"change"},aH={type:"start"},xse={type:"end"};class Bet extends Y8{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ge,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Le){Le.addEventListener("keydown",ls),this._domElementKeyEvents=Le},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(Cse),i.update(),s=r.NONE},this.update=function(){const Le=new ge,Yt=(new bc).setFromUnitVectors(e.up,new ge(0,1,0)),an=Yt.clone().invert(),Wn=new ge,jn=new bc,Yi=2*Math.PI;return function(){const Io=i.object.position;Le.copy(Io).sub(i.target),Le.applyQuaternion(Yt),a.setFromVector3(Le),i.autoRotate&&s===r.NONE&&k(function P(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let at=i.minAzimuthAngle,Bn=i.maxAzimuthAngle;return isFinite(at)&&isFinite(Bn)&&(at<-Math.PI?at+=Yi:at>Math.PI&&(at-=Yi),Bn<-Math.PI?Bn+=Yi:Bn>Math.PI&&(Bn-=Yi),a.theta=at<=Bn?Math.max(at,Math.min(Bn,a.theta)):a.theta>(at+Bn)/2?Math.max(at,a.theta):Math.min(Bn,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),Le.setFromSpherical(a),Le.applyQuaternion(an),Io.copy(i.target).add(Le),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),u.set(0,0,0)),l=1,!!(f||Wn.distanceToSquared(i.object.position)>o||8*(1-jn.dot(i.object.quaternion))>o)&&(i.dispatchEvent(Cse),Wn.copy(i.object.position),jn.copy(i.object.quaternion),f=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Tt),i.domElement.removeEventListener("pointerdown",dn),i.domElement.removeEventListener("pointercancel",Cn),i.domElement.removeEventListener("wheel",ar),i.domElement.removeEventListener("pointermove",qn),i.domElement.removeEventListener("pointerup",En),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",ls)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new hne,c=new hne;let l=1;const u=new ge;let f=!1;const p=new Qt,g=new Qt,_=new Qt,y=new Qt,w=new Qt,C=new Qt,b=new Qt,M=new Qt,T=new Qt,I=[],F={};function R(){return Math.pow(.95,i.zoomSpeed)}function k(Le){c.theta-=Le}function W(Le){c.phi-=Le}const ie=function(){const Le=new ge;return function(an,Wn){Le.setFromMatrixColumn(Wn,0),Le.multiplyScalar(-an),u.add(Le)}}(),Te=function(){const Le=new ge;return function(an,Wn){!0===i.screenSpacePanning?Le.setFromMatrixColumn(Wn,1):(Le.setFromMatrixColumn(Wn,0),Le.crossVectors(i.object.up,Le)),Le.multiplyScalar(an),u.add(Le)}}(),me=function(){const Le=new ge;return function(an,Wn){const jn=i.domElement;if(i.object.isPerspectiveCamera){Le.copy(i.object.position).sub(i.target);let Fr=Le.length();Fr*=Math.tan(i.object.fov/2*Math.PI/180),ie(2*an*Fr/jn.clientHeight,i.object.matrix),Te(2*Wn*Fr/jn.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(ie(an*(i.object.right-i.object.left)/i.object.zoom/jn.clientWidth,i.object.matrix),Te(Wn*(i.object.top-i.object.bottom)/i.object.zoom/jn.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function Q(Le){i.object.isPerspectiveCamera?l/=Le:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*Le)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function he(Le){i.object.isPerspectiveCamera?l*=Le:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/Le)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function K(Le){p.set(Le.clientX,Le.clientY)}function fe(Le){y.set(Le.clientX,Le.clientY)}function ut(){1===I.length?p.set(I[0].pageX,I[0].pageY):p.set(.5*(I[0].pageX+I[1].pageX),.5*(I[0].pageY+I[1].pageY))}function It(){1===I.length?y.set(I[0].pageX,I[0].pageY):y.set(.5*(I[0].pageX+I[1].pageX),.5*(I[0].pageY+I[1].pageY))}function bt(){const Le=I[0].pageX-I[1].pageX,Yt=I[0].pageY-I[1].pageY,an=Math.sqrt(Le*Le+Yt*Yt);b.set(0,an)}function Sn(Le){if(1==I.length)g.set(Le.pageX,Le.pageY);else{const an=wi(Le);g.set(.5*(Le.pageX+an.x),.5*(Le.pageY+an.y))}_.subVectors(g,p).multiplyScalar(i.rotateSpeed);const Yt=i.domElement;k(2*Math.PI*_.x/Yt.clientHeight),W(2*Math.PI*_.y/Yt.clientHeight),p.copy(g)}function on(Le){if(1===I.length)w.set(Le.pageX,Le.pageY);else{const Yt=wi(Le);w.set(.5*(Le.pageX+Yt.x),.5*(Le.pageY+Yt.y))}C.subVectors(w,y).multiplyScalar(i.panSpeed),me(C.x,C.y),y.copy(w)}function Ti(Le){const Yt=wi(Le),an=Le.pageX-Yt.x,Wn=Le.pageY-Yt.y,jn=Math.sqrt(an*an+Wn*Wn);M.set(0,jn),T.set(0,Math.pow(M.y/b.y,i.zoomSpeed)),Q(T.y),b.copy(M)}function dn(Le){!1!==i.enabled&&(0===I.length&&(i.domElement.setPointerCapture(Le.pointerId),i.domElement.addEventListener("pointermove",qn),i.domElement.addEventListener("pointerup",En)),function hn(Le){I.push(Le)}(Le),"touch"===Le.pointerType?function ze(Le){switch(In(Le),I.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;ut(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;It(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Xt(){i.enableZoom&&bt(),i.enablePan&&It()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function sn(){i.enableZoom&&bt(),i.enableRotate&&ut()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(aH)}(Le):function Un(Le){let Yt;switch(Le.button){case 0:Yt=i.mouseButtons.LEFT;break;case 1:Yt=i.mouseButtons.MIDDLE;break;case 2:Yt=i.mouseButtons.RIGHT;break;default:Yt=-1}switch(Yt){case 1:if(!1===i.enableZoom)return;(function oe(Le){b.set(Le.clientX,Le.clientY)})(Le),s=r.DOLLY;break;case 0:if(Le.ctrlKey||Le.metaKey||Le.shiftKey){if(!1===i.enablePan)return;fe(Le),s=r.PAN}else{if(!1===i.enableRotate)return;K(Le),s=r.ROTATE}break;case 2:if(Le.ctrlKey||Le.metaKey||Le.shiftKey){if(!1===i.enableRotate)return;K(Le),s=r.ROTATE}else{if(!1===i.enablePan)return;fe(Le),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(aH)}(Le))}function qn(Le){!1!==i.enabled&&("touch"===Le.pointerType?function ve(Le){switch(In(Le),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;Sn(Le),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;on(Le),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Ot(Le){i.enableZoom&&Ti(Le),i.enablePan&&on(Le)})(Le),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Rt(Le){i.enableZoom&&Ti(Le),i.enableRotate&&Sn(Le)})(Le),i.update();break;default:s=r.NONE}}(Le):function fi(Le){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function de(Le){g.set(Le.clientX,Le.clientY),_.subVectors(g,p).multiplyScalar(i.rotateSpeed);const Yt=i.domElement;k(2*Math.PI*_.x/Yt.clientHeight),W(2*Math.PI*_.y/Yt.clientHeight),p.copy(g),i.update()}(Le);break;case r.DOLLY:if(!1===i.enableZoom)return;!function Re(Le){M.set(Le.clientX,Le.clientY),T.subVectors(M,b),T.y>0?Q(R()):T.y<0&&he(R()),b.copy(M),i.update()}(Le);break;case r.PAN:if(!1===i.enablePan)return;!function Ze(Le){w.set(Le.clientX,Le.clientY),C.subVectors(w,y).multiplyScalar(i.panSpeed),me(C.x,C.y),y.copy(w),i.update()}(Le)}}(Le))}function En(Le){xn(Le),0===I.length&&(i.domElement.releasePointerCapture(Le.pointerId),i.domElement.removeEventListener("pointermove",qn),i.domElement.removeEventListener("pointerup",En)),i.dispatchEvent(xse),s=r.NONE}function Cn(Le){xn(Le)}function ar(Le){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(Le.preventDefault(),i.dispatchEvent(aH),function Be(Le){Le.deltaY<0?he(R()):Le.deltaY>0&&Q(R()),i.update()}(Le),i.dispatchEvent(xse))}function ls(Le){!1===i.enabled||!1===i.enablePan||function wt(Le){let Yt=!1;switch(Le.code){case i.keys.UP:me(0,i.keyPanSpeed),Yt=!0;break;case i.keys.BOTTOM:me(0,-i.keyPanSpeed),Yt=!0;break;case i.keys.LEFT:me(i.keyPanSpeed,0),Yt=!0;break;case i.keys.RIGHT:me(-i.keyPanSpeed,0),Yt=!0}Yt&&(Le.preventDefault(),i.update())}(Le)}function Tt(Le){!1!==i.enabled&&Le.preventDefault()}function xn(Le){delete F[Le.pointerId];for(let Yt=0;Yt<I.length;Yt++)if(I[Yt].pointerId==Le.pointerId)return void I.splice(Yt,1)}function In(Le){let Yt=F[Le.pointerId];void 0===Yt&&(Yt=new Qt,F[Le.pointerId]=Yt),Yt.set(Le.pageX,Le.pageY)}function wi(Le){return F[(Le.pointerId===I[0].pointerId?I[1]:I[0]).pointerId]}i.domElement.addEventListener("contextmenu",Tt),i.domElement.addEventListener("pointerdown",dn),i.domElement.addEventListener("pointercancel",Cn),i.domElement.addEventListener("wheel",ar,{passive:!1}),this.update()}}class Ret extends VVe{constructor(e){super(e),this.type=P0}parse(e){const a=function(M,T){switch(M){case 1:console.error("THREE.RGBELoader Read Error: "+(T||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(T||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(T||""));break;default:console.error("THREE.RGBELoader: Error: "+(T||""))}return-1},p=function(M,T,I){T=T||1024;let P=M.pos,R=-1,k=0,W="",ie=String.fromCharCode.apply(null,new Uint16Array(M.subarray(P,P+128)));for(;0>(R=ie.indexOf("\n"))&&k<T&&P<M.byteLength;)W+=ie,k+=ie.length,P+=128,ie+=String.fromCharCode.apply(null,new Uint16Array(M.subarray(P,P+128)));return-1<R&&(!1!==I&&(M.pos+=k+R+1),W+ie.slice(0,R))},y=function(M,T,I,F){const R=Math.pow(2,M[T+3]-128)/255;I[F+0]=M[T+0]*R,I[F+1]=M[T+1]*R,I[F+2]=M[T+2]*R,I[F+3]=1},w=function(M,T,I,F){const R=Math.pow(2,M[T+3]-128)/255;I[F+0]=wM.toHalfFloat(Math.min(M[T+0]*R,65504)),I[F+1]=wM.toHalfFloat(Math.min(M[T+1]*R,65504)),I[F+2]=wM.toHalfFloat(Math.min(M[T+2]*R,65504)),I[F+3]=wM.toHalfFloat(1)},C=new Uint8Array(e);C.pos=0;const b=function(M){const I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,R=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,k={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let W,ie;if(M.pos>=M.byteLength||!(W=p(M)))return a(1,"no header found");if(!(ie=W.match(/^#\?(\S+)/)))return a(3,"bad initial token");for(k.valid|=1,k.programtype=ie[1],k.string+=W+"\n";W=p(M),!1!==W;)if(k.string+=W+"\n","#"!==W.charAt(0)){if((ie=W.match(I))&&(k.gamma=parseFloat(ie[1])),(ie=W.match(F))&&(k.exposure=parseFloat(ie[1])),(ie=W.match(P))&&(k.valid|=2,k.format=ie[1]),(ie=W.match(R))&&(k.valid|=4,k.height=parseInt(ie[1],10),k.width=parseInt(ie[2],10)),2&k.valid&&4&k.valid)break}else k.comments+=W+"\n";return 2&k.valid?4&k.valid?k:a(3,"missing image size specifier"):a(3,"missing format specifier")}(C);if(-1!==b){const M=b.width,T=b.height,I=function(M,T,I){const F=T;if(F<8||F>32767||2!==M[0]||2!==M[1]||128&M[2])return new Uint8Array(M);if(F!==(M[2]<<8|M[3]))return a(3,"wrong scanline width");const P=new Uint8Array(4*T*I);if(!P.length)return a(4,"unable to allocate buffer space");let R=0,k=0;const W=4*F,ie=new Uint8Array(4),Te=new Uint8Array(W);let me=I;for(;me>0&&k<M.byteLength;){if(k+4>M.byteLength)return a(1);if(ie[0]=M[k++],ie[1]=M[k++],ie[2]=M[k++],ie[3]=M[k++],2!=ie[0]||2!=ie[1]||(ie[2]<<8|ie[3])!=F)return a(3,"bad rgbe scanline format");let he,Q=0;for(;Q<W&&k<M.byteLength;){he=M[k++];const oe=he>128;if(oe&&(he-=128),0===he||Q+he>W)return a(3,"bad scanline data");if(oe){const fe=M[k++];for(let de=0;de<he;de++)Te[Q++]=fe}else Te.set(M.subarray(k,k+he),Q),Q+=he,k+=he}const K=F;for(let oe=0;oe<K;oe++){let fe=0;P[R]=Te[oe+fe],fe+=F,P[R+1]=Te[oe+fe],fe+=F,P[R+2]=Te[oe+fe],fe+=F,P[R+3]=Te[oe+fe],R+=4}me--}return P}(C.subarray(C.pos),M,T);if(-1!==I){let F,P,R;switch(this.type){case L4:R=I.length/4;const k=new Float32Array(4*R);for(let ie=0;ie<R;ie++)y(I,4*ie,k,4*ie);F=k,P=L4;break;case P0:R=I.length/4;const W=new Uint16Array(4*R);for(let ie=0;ie<R;ie++)w(I,4*ie,W,4*ie);F=W,P=P0;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:M,height:T,data:F,header:b.string,gamma:b.gamma,exposure:b.exposure,type:P}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,r){return super.load(e,function s(o,a){switch(o.type){case L4:case P0:o.encoding=Gh,o.minFilter=Qa,o.magFilter=Qa,o.generateMipmaps=!1,o.flipY=!0}t&&t(o,a)},i,r)}}class q0{constructor(e,t,i,r,s="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),q0.nextNameID=q0.nextNameID||0,this.$name.id="lil-gui-name-"+ ++q0.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback),this.updateDisplay()}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Fet extends q0{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function cH(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!t&&"#"+t}const ket={isPrimitive:!0,match:n=>"string"==typeof n,fromHexString:cH,toHexString:cH},t_={isPrimitive:!0,match:n=>"number"==typeof n,fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},Pet={isPrimitive:!1,match:Array.isArray,fromHexString(n,e,t=1){const i=t_.fromHexString(n);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(255&i)/255*t},toHexString:([n,e,t],i=1)=>t_.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},Het={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const i=t_.fromHexString(n);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(255&i)/255*t},toHexString:({r:n,g:e,b:t},i=1)=>t_.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},zet=[ket,t_,Pet,Het];class Oet extends q0{constructor(e,t,i,r){var s;super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(s=this.initialValue,zet.find(o=>o.match(s))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const o=cH(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class lH extends q0{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{}),this.$disable=this.$button}}class Net extends q0{constructor(e,t,i,r,s,o){super(e,t,i,"number"),this._initInput(),this.min(r),this.max(s);const a=void 0!==o;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=e),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=u=>{const f=parseFloat(this.$input.value);isNaN(f)||(this._snapClampSetValue(f+u),this.$input.value=this.getValue())};let t,i,r,s,o,a=!1;const c=u=>{if(a){const f=u.clientX-t;Math.abs(u.clientY-i)>5?(u.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(f)>5&&l()}a||(o-=(u.clientY-r)*this._step*this._arrowKeyMultiplier(u),s+o>this._max?o=this._max-s:s+o<this._min&&(o=this._min-s),this._snapClampSetValue(s+o)),r=u.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",()=>{const u=parseFloat(this.$input.value);isNaN(u)||this.setValue(this._clamp(u))}),this.$input.addEventListener("keydown",u=>{"Enter"===u.code&&this.$input.blur(),"ArrowUp"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u))),"ArrowDown"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u)*-1))}),this.$input.addEventListener("wheel",u=>{this._inputFocused&&(u.preventDefault(),e(this._step*this._normalizeMouseWheel(u)))}),this.$input.addEventListener("mousedown",u=>{t=u.clientX,i=r=u.clientY,a=!0,s=this.getValue(),o=0,window.addEventListener("mousemove",c),window.addEventListener("mouseup",l)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=p=>{const g=this.$slider.getBoundingClientRect();let _=(p-(w=g.left))/(g.right-w)*(this._max-(b=this._min))+b;var w,b;this._snapClampSetValue(_)},t=p=>{e(p.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)};let r,s,o=!1;const a=p=>{p.preventDefault(),this._setDraggingStyle(!0),e(p.touches[0].clientX),o=!1},c=p=>{if(o){const _=p.touches[0].clientY-s;Math.abs(p.touches[0].clientX-r)>Math.abs(_)?a(p):(window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l))}else p.preventDefault(),e(p.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l)},u=this._callOnFinishChange.bind(this);let f;this.$slider.addEventListener("mousedown",p=>{this._setDraggingStyle(!0),e(p.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",p=>{p.touches.length>1||(this._hasScrollBar?(r=p.touches[0].clientX,s=p.touches[0].clientY,o=!0):a(p),window.addEventListener("touchmove",c),window.addEventListener("touchend",l))}),this.$slider.addEventListener("wheel",p=>{if(Math.abs(p.deltaX)<Math.abs(p.deltaY)&&this._hasScrollBar)return;p.preventDefault();const g=this._normalizeMouseWheel(p)*this._step;this._snapClampSetValue(this.getValue()+g),this.$input.value=this.getValue(),clearTimeout(f),f=setTimeout(u,400)})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class Vet extends q0{constructor(e,t,i,r){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(s=>{const o=document.createElement("option");o.innerHTML=s,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class Uet extends q0{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{"Enter"===r.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let bse=!1;class uH{constructor({parent:e,autoPlace:t=void 0===e,container:i,width:r,title:s="Controls",injectStyles:o=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{"Enter"!==c.code&&"Space"!==c.code||(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!bse&&o&&(function(c){const l=document.createElement("style");l.innerHTML='.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25be";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25b8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}';const u=document.querySelector("head link[rel=stylesheet], head style");u?document.head.insertBefore(l,u):document.head.appendChild(l)}(),bse=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",c=>c.stopPropagation()),this.domElement.addEventListener("keyup",c=>c.stopPropagation())}add(e,t,i,r,s){if(Object(i)===i)return new Vet(this,e,t,i);const o=e[t];switch(typeof o){case"number":return new Net(this,e,t,i,r,s);case"boolean":return new Fet(this,e,t);case"string":return new Uet(this,e,t);case"function":return new lH(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",o)}addColor(e,t,i=1){return new Oet(this,e,t,i)}addFolder(e){return new uH({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof lH||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof lH)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.$children.style.height=this.$children.clientHeight+"px",this.domElement.classList.add("transition");const i=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(t=>t.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const n_={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class oS{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const Get=new o5(-1,1,1,-1,0,1),hH=new vr;hH.setAttribute("position",new ai([-1,3,0,-1,-1,0,3,-1,0],3)),hH.setAttribute("uv",new ai([0,2,0,0,2,0],2));class Mse{constructor(e){this._mesh=new Ys(hH,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Get)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Sse extends oS{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof Sc?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Od.clone(e.uniforms),this.material=new Sc({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Mse(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class Ese extends oS{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),s=e.state;let o,a;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class Qet extends oS{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Wet{constructor(e,t){if(this.renderer=e,void 0===t){const i=e.getSize(new Qt);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new I4(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===n_&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Sse&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Sse(n_),this.clock=new sne}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Ese&&(o instanceof Ese?i=!0:o instanceof Qet&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new Qt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new o5(-1,1,1,-1,0,1);const fH=new vr;fH.setAttribute("position",new ai([-1,3,0,-1,-1,0,3,-1,0],3)),fH.setAttribute("uv",new ai([0,2,0,0,2,0],2));class Tse{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,i){return e[0]*t+e[1]*i}dot3(e,t,i,r){return e[0]*t+e[1]*i+e[2]*r}dot4(e,t,i,r,s){return e[0]*t+e[1]*i+e[2]*r+e[3]*s}noise(e,t){let i,r,s;const a=(e+t)*(.5*(Math.sqrt(3)-1)),c=Math.floor(e+a),l=Math.floor(t+a),u=(3-Math.sqrt(3))/6,f=(c+l)*u,_=e-(c-f),y=t-(l-f);let w,C;_>y?(w=1,C=0):(w=0,C=1);const b=_-w+u,M=y-C+u,T=_-1+2*u,I=y-1+2*u,F=255&c,P=255&l,k=this.perm[F+w+this.perm[P+C]]%12,W=this.perm[F+1+this.perm[P+1]]%12;let ie=.5-_*_-y*y;ie<0?i=0:(ie*=ie,i=ie*ie*this.dot(this.grad3[this.perm[F+this.perm[P]]%12],_,y));let Te=.5-b*b-M*M;Te<0?r=0:(Te*=Te,r=Te*Te*this.dot(this.grad3[k],b,M));let me=.5-T*T-I*I;return me<0?s=0:(me*=me,s=me*me*this.dot(this.grad3[W],T,I)),70*(i+r+s)}noise3d(e,t,i){let r,s,o,a;const l=.3333333333333333*(e+t+i),u=Math.floor(e+l),f=Math.floor(t+l),p=Math.floor(i+l),g=1/6,_=(u+f+p)*g,b=e-(u-_),M=t-(f-_),T=i-(p-_);let I,F,P,R,k,W;b>=M?M>=T?(I=1,F=0,P=0,R=1,k=1,W=0):b>=T?(I=1,F=0,P=0,R=1,k=0,W=1):(I=0,F=0,P=1,R=1,k=0,W=1):M<T?(I=0,F=0,P=1,R=0,k=1,W=1):b<T?(I=0,F=1,P=0,R=0,k=1,W=1):(I=0,F=1,P=0,R=1,k=1,W=0);const ie=b-I+g,Te=M-F+g,me=T-P+g,Q=b-R+2*g,he=M-k+2*g,K=T-W+2*g,oe=b-1+.5,fe=M-1+.5,de=T-1+.5,Re=255&u,Ze=255&f,Be=255&p,ut=this.perm[Re+I+this.perm[Ze+F+this.perm[Be+P]]]%12,It=this.perm[Re+R+this.perm[Ze+k+this.perm[Be+W]]]%12,bt=this.perm[Re+1+this.perm[Ze+1+this.perm[Be+1]]]%12;let Xt=.6-b*b-M*M-T*T;Xt<0?r=0:(Xt*=Xt,r=Xt*Xt*this.dot3(this.grad3[this.perm[Re+this.perm[Ze+this.perm[Be]]]%12],b,M,T));let sn=.6-ie*ie-Te*Te-me*me;sn<0?s=0:(sn*=sn,s=sn*sn*this.dot3(this.grad3[ut],ie,Te,me));let Sn=.6-Q*Q-he*he-K*K;Sn<0?o=0:(Sn*=Sn,o=Sn*Sn*this.dot3(this.grad3[It],Q,he,K));let on=.6-oe*oe-fe*fe-de*de;return on<0?a=0:(on*=on,a=on*on*this.dot3(this.grad3[bt],oe,fe,de)),32*(r+s+o+a)}noise4d(e,t,i,r){const s=this.grad4,o=this.simplex,a=this.perm,c=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20;let u,f,p,g,_;const y=(e+t+i+r)*c,w=Math.floor(e+y),C=Math.floor(t+y),b=Math.floor(i+y),M=Math.floor(r+y),T=(w+C+b+M)*l,k=e-(w-T),W=t-(C-T),ie=i-(b-T),Te=r-(M-T),de=(k>W?32:0)+(k>ie?16:0)+(W>ie?8:0)+(k>Te?4:0)+(W>Te?2:0)+(ie>Te?1:0),Re=o[de][0]>=3?1:0,Ze=o[de][1]>=3?1:0,Be=o[de][2]>=3?1:0,wt=o[de][3]>=3?1:0,ut=o[de][0]>=2?1:0,It=o[de][1]>=2?1:0,bt=o[de][2]>=2?1:0,Xt=o[de][3]>=2?1:0,sn=o[de][0]>=1?1:0,Sn=o[de][1]>=1?1:0,on=o[de][2]>=1?1:0,Ti=o[de][3]>=1?1:0,Ot=k-Re+l,Rt=W-Ze+l,dn=ie-Be+l,qn=Te-wt+l,En=k-ut+2*l,Cn=W-It+2*l,Un=ie-bt+2*l,fi=Te-Xt+2*l,ar=k-sn+3*l,ls=W-Sn+3*l,ze=ie-on+3*l,ve=Te-Ti+3*l,Tt=k-1+4*l,hn=W-1+4*l,xn=ie-1+4*l,In=Te-1+4*l,wi=255&w,Le=255&C,Yt=255&b,an=255&M,jn=a[wi+Re+a[Le+Ze+a[Yt+Be+a[an+wt]]]]%32,Yi=a[wi+ut+a[Le+It+a[Yt+bt+a[an+Xt]]]]%32,Fr=a[wi+sn+a[Le+Sn+a[Yt+on+a[an+Ti]]]]%32,Io=a[wi+1+a[Le+1+a[Yt+1+a[an+1]]]]%32;let at=.6-k*k-W*W-ie*ie-Te*Te;at<0?u=0:(at*=at,u=at*at*this.dot4(s[a[wi+a[Le+a[Yt+a[an]]]]%32],k,W,ie,Te));let Bn=.6-Ot*Ot-Rt*Rt-dn*dn-qn*qn;Bn<0?f=0:(Bn*=Bn,f=Bn*Bn*this.dot4(s[jn],Ot,Rt,dn,qn));let Ht=.6-En*En-Cn*Cn-Un*Un-fi*fi;Ht<0?p=0:(Ht*=Ht,p=Ht*Ht*this.dot4(s[Yi],En,Cn,Un,fi));let zn=.6-ar*ar-ls*ls-ze*ze-ve*ve;zn<0?g=0:(zn*=zn,g=zn*zn*this.dot4(s[Fr],ar,ls,ze,ve));let Pn=.6-Tt*Tt-hn*hn-xn*xn-In*In;return Pn<0?_=0:(Pn*=Pn,_=Pn*Pn*this.dot4(s[Io],Tt,hn,xn,In)),27*(u+f+p+g+_)}}const i_={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new Qt},cameraProjectionMatrix:{value:new Vi},cameraInverseProjectionMatrix:{value:new Vi},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNoise;\n\n\t\tuniform vec3 kernel[ KERNEL_SIZE ];\n\n\t\tuniform vec2 resolution;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float kernelRadius;\n\t\tuniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference\n\t\tuniform float maxDistance; // avoid the influence of fragments which are too far away\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t}\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec2 screenPosition ) {\n\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\n\t\t\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );\n\t\t\tvec3 viewNormal = getViewNormal( vUv );\n\n\t\t\tvec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );\n\t\t\tvec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );\n\n\t\t\t// compute matrix used to reorient a kernel vector\n\n\t\t\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );\n\t\t\tvec3 bitangent = cross( viewNormal, tangent );\n\t\t\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );\n\n\t\t float occlusion = 0.0;\n\n\t\t for ( int i = 0; i < KERNEL_SIZE; i ++ ) {\n\n\t\t\t\tvec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space\n\t\t\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point\n\n\t\t\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC\n\t\t\t\tsamplePointNDC /= samplePointNDC.w;\n\n\t\t\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates\n\n\t\t\t\tfloat realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture\n\t\t\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value\n\t\t\t\tfloat delta = sampleDepth - realDepth;\n\n\t\t\t\tif ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion\n\n\t\t\t\t\tocclusion += 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );\n\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );\n\n\t\t}"},aS_defines={PERSPECTIVE_CAMERA:1},aS_uniforms={tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},aS_vertexShader="varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",aS_fragmentShader="uniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );\n\n\t\t}",cS={uniforms:{tDiffuse:{value:null},resolution:{value:new Qt}},vertexShader:"varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"uniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\t\t\tfloat result = 0.0;\n\n\t\t\tfor ( int i = - 2; i <= 2; i ++ ) {\n\n\t\t\t\tfor ( int j = - 2; j <= 2; j ++ ) {\n\n\t\t\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;\n\t\t\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );\n\n\t\t}"};let $et=(()=>{class n extends oS{constructor(t,i,r,s){super(),this.width=void 0!==r?r:512,this.height=void 0!==s?s:512,this.clear=!0,this.camera=i,this.scene=t,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const o=new ste;o.format=K8,o.type=$8,this.beautyRenderTarget=new I4(this.width,this.height),this.normalRenderTarget=new I4(this.width,this.height,{minFilter:B1,magFilter:B1,depthTexture:o}),this.ssaoRenderTarget=new I4(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),void 0===i_&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new Sc({defines:Object.assign({},i_.defines),uniforms:Od.clone(i_.uniforms),vertexShader:i_.vertexShader,fragmentShader:i_.fragmentShader,blending:0}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Mk,this.normalMaterial.blending=0,this.blurMaterial=new Sc({defines:Object.assign({},cS.defines),uniforms:Od.clone(cS.uniforms),vertexShader:cS.vertexShader,fragmentShader:cS.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Sc({defines:Object.assign({},aS_defines),uniforms:Od.clone(aS_uniforms),vertexShader:aS_vertexShader,fragmentShader:aS_fragmentShader,blending:0}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Sc({uniforms:Od.clone(n_.uniforms),vertexShader:n_.vertexShader,fragmentShader:n_.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:208,blendDst:200,blendEquation:Ld,blendSrcAlpha:206,blendDstAlpha:200,blendEquationAlpha:Ld}),this.fsQuad=new Mse(null),this.originalClearColor=new Dn}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,i){switch(!1===t.capabilities.isWebGL2&&(this.noiseTexture.format=1024),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(t,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.output){case n.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=5,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(t,i,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),c=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,null!=s&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.fsQuad.material=i,this.fsQuad.render(t),t.autoClear=c,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,i,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),c=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=i.clearAlpha||o,null!=(s=i.clearColor||s)&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.scene.overrideMaterial=i,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=c,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}setSize(t,i){this.width=t,this.height=i,this.beautyRenderTarget.setSize(t,i),this.ssaoRenderTarget.setSize(t,i),this.normalRenderTarget.setSize(t,i),this.blurRenderTarget.setSize(t,i),this.ssaoMaterial.uniforms.resolution.value.set(t,i),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,i)}generateSampleKernel(){const t=this.kernelSize,i=this.kernel;for(let r=0;r<t;r++){const s=new ge;s.x=2*Math.random()-1,s.y=2*Math.random()-1,s.z=Math.random(),s.normalize();let o=r/t;o=vb.lerp(.1,1,o*o),s.multiplyScalar(o),i.push(s)}}generateRandomKernelRotations(){void 0===Tse&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const r=new Tse,o=new Float32Array(16);for(let a=0;a<16;a++){const c=2*Math.random()-1,l=2*Math.random()-1;o[a]=r.noise3d(c,l,0)}this.noiseTexture=new gg(o,4,4,1028,L4),this.noiseTexture.wrapS=k0,this.noiseTexture.wrapT=k0,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const i=this._visibilityCache;this.scene.traverse(function(r){i.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){const i=this._visibilityCache;this.scene.traverse(function(r){const s=i.get(r);r.visible=s}),i.clear()}}return n.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5},n})();var r_=function(){var n=0,e=document.createElement("div");function t(u){return e.appendChild(u.dom),u}function i(u){for(var f=0;f<e.children.length;f++)e.children[f].style.display=f===u?"block":"none";n=u}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++n%e.children.length)},!1);var r=(performance||Date).now(),s=r,o=0,a=t(new r_.Panel("FPS","#0ff","#002")),c=t(new r_.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new r_.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(c.update(u-r,200),u>=s+1e3&&(a.update(1e3*o/(u-s),100),s=u,o=0,l)){var f=performance.memory;l.update(f.usedJSHeapSize/1048576,f.jsHeapSizeLimit/1048576)}return u},update:function(){r=this.end()},domElement:e,setMode:i}};r_.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,c=48*o,l=3*o,u=2*o,f=3*o,p=15*o,g=74*o,_=30*o,y=document.createElement("canvas");y.width=a,y.height=c,y.style.cssText="width:80px;height:48px";var w=y.getContext("2d");return w.font="bold "+9*o+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=t,w.fillRect(0,0,a,c),w.fillStyle=e,w.fillText(n,l,u),w.fillRect(f,p,g,_),w.fillStyle=t,w.globalAlpha=.9,w.fillRect(f,p,g,_),{dom:y,update:function(C,b){i=Math.min(i,C),r=Math.max(r,C),w.fillStyle=t,w.globalAlpha=1,w.fillRect(0,0,a,p),w.fillStyle=e,w.fillText(s(C)+" "+n+" ("+s(i)+"-"+s(r)+")",l,u),w.drawImage(y,f+o,p,g-o,_,f,p,g-o,_),w.fillRect(f+g-o,p,o,_),w.fillStyle=t,w.globalAlpha=.9,w.fillRect(f+g-o,p,o,s((1-C/b)*_))}}};const qet=r_;class lS extends Ys{constructor(){const e=lS.SkyShader,t=new Sc({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:Od.clone(e.uniforms),side:1,depthWrite:!1});super(new H0(1,1,1),t),this.isSky=!0}}lS.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new ge},up:{value:new ge(0,1,0)}},vertexShader:"\n\t\tuniform vec3 sunPosition;\n\t\tuniform float rayleigh;\n\t\tuniform float turbidity;\n\t\tuniform float mieCoefficient;\n\t\tuniform vec3 up;\n\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float e = 2.71828182845904523536028747135266249775724709369995957;\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\t// wavelength of used primaries, according to preetham\n\t\tconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\tconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\tconst float v = 4.0;\n\t\tconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\tconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\tconst float cutoffAngle = 1.6110731556870734;\n\t\tconst float steepness = 1.5;\n\t\tconst float EE = 1000.0;\n\n\t\tfloat sunIntensity( float zenithAngleCos ) {\n\t\t\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n\t\t\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n\t\t}\n\n\t\tvec3 totalMie( float T ) {\n\t\t\tfloat c = ( 0.2 * T ) * 10E-18;\n\t\t\treturn 0.434 * c * MieConst;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n\t\t\tvSunDirection = normalize( sunPosition );\n\n\t\t\tvSunE = sunIntensity( dot( vSunDirection, up ) );\n\n\t\t\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n\t\t\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n\t\t\t// extinction (absorbtion + out scattering)\n\t\t\t// rayleigh coefficients\n\t\t\tvBetaR = totalRayleigh * rayleighCoefficient;\n\n\t\t\t// mie coefficients\n\t\t\tvBetaM = totalMie( turbidity ) * mieCoefficient;\n\n\t\t}",fragmentShader:"\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\tuniform float mieDirectionalG;\n\t\tuniform vec3 up;\n\n\t\tconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n\t\t// constants for atmospheric scattering\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\tconst float n = 1.0003; // refractive index of air\n\t\tconst float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\tconst float rayleighZenithLength = 8.4E3;\n\t\tconst float mieZenithLength = 1.25E3;\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\tconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\tconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n\t\t// 1.0 / ( 4.0 * pi )\n\t\tconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\n\t\tfloat rayleighPhase( float cosTheta ) {\n\t\t\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n\t\t}\n\n\t\tfloat hgPhase( float cosTheta, float g ) {\n\t\t\tfloat g2 = pow( g, 2.0 );\n\t\t\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n\t\t\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec3 direction = normalize( vWorldPosition - cameraPos );\n\n\t\t\t// optical length\n\t\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n\t\t\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n\t\t\tfloat sR = rayleighZenithLength * inverse;\n\t\t\tfloat sM = mieZenithLength * inverse;\n\n\t\t\t// combined extinction factor\n\t\t\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n\t\t\t// in scattering\n\t\t\tfloat cosTheta = dot( direction, vSunDirection );\n\n\t\t\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n\t\t\tvec3 betaRTheta = vBetaR * rPhase;\n\n\t\t\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\n\t\t\tvec3 betaMTheta = vBetaM * mPhase;\n\n\t\t\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n\t\t\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n\t\t\t// nightsky\n\t\t\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n\t\t\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n\t\t\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n\t\t\tvec3 L0 = vec3( 0.1 ) * Fex;\n\n\t\t\t// composition + solar disc\n\t\t\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n\t\t\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n\t\t\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n\t\t\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\t\t\tgl_FragColor = vec4( retColor, 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"};var ga=(()=>(function(n){n.left="left",n.right="right",n.top="top",n.bottom="bottom",n.back="back",n.front="front"}(ga||(ga={})),ga))();const Lse=new oc({color:3355443}),Ket=new Il({side:2,visible:!1}),Xet=new Il({visible:!1}),Yet=new Il({visible:!1});class Zet extends wo{constructor(){super(),this.width=20,this.height=8,this.depth=5,this.onChange$=new Je,this.drag=!1,this.controlEnabled=!1,this.xyz=[1,1,1],this.rayCaster=new gUe,this.activeSide=void 0,this.mouse=new Qt(0,0),this.edges={},this.planes={},this.dragPlane=new Ys(new f3(1e3,1e3,1,1),Yet),this.startPoint=new ge(0,0,0),this.setToNormalizedDeviceCoordinates=function(e,t,i){return i.x=void 0!==e.clientX?e.clientX:e.touches&&e.touches[0].clientX,i.y=void 0!==e.clientY?e.clientY:e.touches&&e.touches[0].clientY,i.x=i.x/t.innerWidth*2-1,i.y=-i.y/t.innerHeight*2+1,i},this.init(),this.startDrag=this.startDrag.bind(this),this.onDrag=this.onDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(){this.box=new Ys(new H0(this.width,this.height,this.depth),Xet),this.box.userData.side="box",this.setPosition(),this.add(this.box),this.add(this.dragPlane),this.dragPlane.castShadow=!1,this.dragPlane.receiveShadow=!1,Object.keys(ga).forEach(e=>{this.edges[e]=new Nd(new vr,Lse.clone()),this.edges[e].userData.side=e,this.add(this.edges[e]),e!==ga.top&&(this.planes[e]=new Ys(new f3(this.width,this.height,this.depth),Ket.clone()),this.planes[e].userData.side=e,this.add(this.planes[e]))}),this.drawBox(),window.addEventListener("pointermove",e=>{this.mouse=this.setToNormalizedDeviceCoordinates(e,window,this.mouse)})}states(e){this.enabled=e.clipBoxEnabled,this.show=e.clipBoxShow,this.drawBox()}drawBox(){this.box.geometry.dispose(),this.box.geometry=new H0(this.width,this.height,this.depth),this.box.position.set(this.width/2,this.height/2,this.depth/2),this.drawPlanesAroundBox(),this.drawLinesAroundBox()}drawPlanesAroundBox(){Object.keys(ga).forEach(i=>{let r;i===ga.front?(r=new f3(this.width,this.height),r.rotateY(0),r.translate(0,0,this.depth/2)):i===ga.back&&(r=new f3(this.width,this.height),r.rotateY(Math.PI),r.translate(0,0,-this.depth/2)),i===ga.left?(r=new f3(this.depth,this.height),r.rotateY(-Math.PI/2),r.translate(-this.width/2,0,0)):i===ga.right&&(r=new f3(this.depth,this.height),r.rotateY(Math.PI/2),r.translate(this.width/2,0,0)),i!==ga.top&&(i===ga.bottom&&(r=new f3(this.width,this.depth),r.rotateX(Math.PI/2),r.translate(0,-this.height/2,0)),this.planes[i].geometry.dispose(),this.show&&(this.planes[i].geometry=r,this.planes[i].position.set(this.width/2,this.height/2,this.depth/2)))})}drawLinesAroundBox(){Object.keys(ga).forEach(e=>{if(void 0===this.planes[e])return;let t=Array.from(this.planes[e].geometry.attributes.position.array).reduce((i,r,s)=>(s%3?i[i.length-1].push(r):i.push([r]))&&i,[]).map(i=>new ge(i[0],i[1],i[2]));this.show?(this.edges[e].geometry.setFromPoints([...t.slice(0,2),...t.slice(2).reverse(),t[0]]),this.edges[e].position.set(this.width/2,this.height/2,this.depth/2)):this.edges[e].geometry.setFromPoints([])})}onMouseOver(e,t,i,r,s){if(!this.enabled)return void s();if(!0===this.drag||!1===this.show)return;this.camera=e,this.callbackUpdate=i,this.rayCaster.setFromCamera(this.mouse,this.camera);const o=this.rayCaster.intersectObjects(Object.values(this.planes));if(this.activeSide=o.length>0?o[0].object.userData.side:void 0,this.previousSide===this.activeSide)return;this.previousSide=this.activeSide,Object.keys(ga).forEach(c=>{c===this.activeSide?(this.edges[c].material.color.set(3065014),this.edges[c].renderOrder=1):(this.edges[c].material.color.set(Lse.color),this.edges[c].renderOrder=0)});const a=t.domElement;void 0!==this.activeSide?(a.addEventListener("mousedown",this.startDrag),a.addEventListener("mousemove",this.onDrag),a.addEventListener("mouseup",this.endDrag),r()):(a.removeEventListener("mousedown",this.startDrag),a.removeEventListener("mousemove",this.onDrag),a.removeEventListener("mouseup",this.endDrag),s())}startDrag(e){if(1===e.buttons){this.drag=!0,this.rayCaster.setFromCamera(this.mouse,this.camera);var t=this.rayCaster.intersectObjects(Object.values(this.planes));if(t.length>0){const r=t[0].point;this.widthStart=this.width,this.heightStart=this.height,this.depthStart=this.depth,this.startPoint=t[0].point;let s=new ge;this.dragPlane.parent.getWorldPosition(s),this.dragPlane.position.set(r.x-s.x,r.y-s.y,r.z-s.z),this.dragPlane.geometry.center();let o=new ge(0,0,1);(this.activeSide===ga.front||this.activeSide===ga.back)&&(o=new ge(0,0,1)),(this.activeSide===ga.left||this.activeSide===ga.right)&&(o=new ge(1,0,0)),(this.activeSide===ga.top||this.activeSide===ga.bottom)&&(o=new ge(0,1,0));var i=this.camera.position.clone().sub(this.camera.position.clone().projectOnVector(o));this.dragPlane.lookAt(i.add(r))}}}onDrag(e){if(!1!==this.drag){this.rayCaster.setFromCamera(this.mouse,this.camera);var t=this.rayCaster.intersectObject(this.dragPlane);t.length>0&&this.change(t[0].point)}}endDrag(e){this.drag=!1,0===e.buttons&&this.onChange$.next()}change(e){if(void 0===this.activeSide)return;const t=e.x-this.startPoint.x,i=e.y-this.startPoint.y,r=e.z-this.startPoint.z;this.activeSide===ga.right&&(this.width=this.widthStart+t),this.activeSide===ga.top&&(this.height=this.heightStart+i),this.activeSide===ga.front&&(this.depth=this.depthStart+r),this.activeSide===ga.left&&(this.width=this.widthStart-t,this.xyz[0]=e.x),this.activeSide===ga.bottom&&(this.height=this.heightStart-i,this.xyz[1]=e.y),this.activeSide===ga.back&&(this.depth=this.depthStart-r,this.xyz[2]=e.z),this.width=Math.max(this.width,2),this.height=Math.max(this.height,2),this.depth=Math.max(this.depth,2),this.drawBox(),this.setPosition(),this.callbackUpdate()}setPosition(){this.position.set(this.xyz[0],this.xyz[1],this.xyz[2])}setCookie(e){this.height=e.height,this.width=e.width,this.depth=e.depth,this.xyz=e.xyz,this.setPosition()}}class Jet extends p5{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new rtt(t)}),this.register(function(t){return new htt(t)}),this.register(function(t){return new ftt(t)}),this.register(function(t){return new ott(t)}),this.register(function(t){return new att(t)}),this.register(function(t){return new ctt(t)}),this.register(function(t){return new ltt(t)}),this.register(function(t){return new itt(t)}),this.register(function(t){return new utt(t)}),this.register(function(t){return new stt(t)}),this.register(function(t){return new ttt(t)}),this.register(function(t){return new dtt(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ef.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Hu(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if("string"==typeof e)s=e;else if(ef.decodeText(new Uint8Array(e,0,4))===Dse){try{o[bs.KHR_BINARY_GLTF]=new ptt(e)}catch(f){return void(r&&r(f))}s=o[bs.KHR_BINARY_GLTF].content}else s=ef.decodeText(new Uint8Array(e));const c=JSON.parse(s);if(void 0===c.asset||c.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Ett(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](l);a[f.name]=f,o[f.name]=!0}if(c.extensionsUsed)for(let u=0;u<c.extensionsUsed.length;++u){const f=c.extensionsUsed[u],p=c.extensionsRequired||[];switch(f){case bs.KHR_MATERIALS_UNLIT:o[f]=new ntt;break;case bs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[f]=new Att;break;case bs.KHR_DRACO_MESH_COMPRESSION:o[f]=new gtt(c,this.dracoLoader);break;case bs.KHR_TEXTURE_TRANSFORM:o[f]=new mtt;break;case bs.KHR_MESH_QUANTIZATION:o[f]=new vtt;break;default:p.indexOf(f)>=0&&void 0===a[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function ett(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const bs={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class ttt{constructor(e){this.parser=e,this.name=bs.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new Dn(16777215);void 0!==c.color&&u.fromArray(c.color);const f=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new Ik(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Jte(u),l.distance=f;break;case"spot":l=new Yte(u),l.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class ntt{constructor(){this.name=bs.KHR_MATERIALS_UNLIT}getMaterialType(){return Il}extendParams(e,t,i){const r=[];e.color=new Dn(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Lo))}return Promise.all(r)}}class itt{constructor(e){this.parser=e,this.name=bs.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class rtt{constructor(e){this.parser=e,this.name=bs.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zh:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Qt(a,a)}return Promise.all(s)}}class stt{constructor(e){this.parser=e,this.name=bs.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zh:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class ott{constructor(e){this.parser=e,this.name=bs.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zh:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Dn(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Lo)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class att{constructor(e){this.parser=e,this.name=bs.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zh:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class ctt{constructor(e){this.parser=e,this.name=bs.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zh:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Dn(a[0],a[1],a[2]),Promise.all(s)}}class ltt{constructor(e){this.parser=e,this.name=bs.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zh:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class utt{constructor(e){this.parser=e,this.name=bs.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zh:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Dn(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Lo)),Promise.all(s)}}class htt{constructor(e){this.parser=e,this.name=bs.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class ftt{constructor(e){this.parser=e,this.name=bs.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class dtt{constructor(e){this.name=bs.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,f=r.byteStride,p=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,p,r.mode,r.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(g),u,f,p,r.mode,r.filter),g})})}return null}}const Dse="glTF";class ptt{constructor(e){this.name=bs.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:ef.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Dse)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const c=new Uint8Array(e,12+s,o);this.content=ef.decodeText(c)}else if(5130562===a){const c=12+s;this.body=e.slice(c,c+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class gtt{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=bs.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const f=pH[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=pH[u]||u.toLowerCase();if(void 0!==o[u]){const p=i.accessors[e.attributes[u]];l[f]=o_[p.componentType].name,c[f]=!0===p.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(p){for(const g in p.attributes){const _=p.attributes[g],y=c[g];void 0!==y&&(_.normalized=y)}f(p)},a,l)})})}}class mtt{constructor(){this.name=bs.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class dH extends wv{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Dn).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(c){for(const l in a)c.uniforms[l]=a[l];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(c){a.specular.value=c}},specularMap:{get:function(){return a.specularMap.value},set:function(c){a.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(c){a.glossiness.value=c}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(c){a.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Att{constructor(){this.name=bs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return dH}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new Dn(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(i.assignTexture(e,"map",r.diffuseTexture,Lo)),e.emissive=new Dn(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Dn(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,Lo))}return Promise.all(s)}createMaterial(e){const t=new dH(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class vtt{constructor(){this.name=bs.KHR_MESH_QUANTIZATION}}class Bse extends Cv{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,f=(i-t)/u,p=f*f,g=p*f,_=e*l,y=_-l,w=-2*g+3*p,C=g-p,b=1-w,M=C-p+f;for(let T=0;T!==a;T++)s[T]=b*o[y+T+a]+M*(o[y+T+c]*u)+w*o[_+T+a]+C*(o[_+T]*u);return s}}const _tt=new bc;class ytt extends Bse{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return _tt.fromArray(s).normalize().toArray(s),s}}const o_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Rse={9728:B1,9729:Qa,9984:1004,9985:1007,9986:1005,9987:Dd},Fse={33071:Dl,33648:1002,10497:k0},kse={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},pH={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},t6={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},wtt={CUBICSPLINE:void 0,LINEAR:G7,STEP:ev};function Ctt(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new wv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function a_(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function k5(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function btt(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Mtt(n){const e=n.extensions&&n.extensions[bs.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+Pse(e.attributes):n.indices+":"+Pse(n.attributes)+":"+n.mode,t}function Pse(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function mH(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Ett{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ett,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new UVe(this.options.manager):new JVe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Hu(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};a_(s,a,r),k5(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[bs.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(ef.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=kse[r.type],l=o_[r.componentType],u=l.BYTES_PER_ELEMENT,p=r.byteOffset||0,g=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,_=!0===r.normalized;let y,w;if(g&&g!==u*c){const C=Math.floor(p/g),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+C+":"+r.count;let M=t.cache.get(b);M||(y=new l(a,C*g,r.count*g/u),M=new ek(y,g/u),t.cache.add(b,M)),w=new l5(M,c,p%g/u,_)}else y=null===a?new l(r.count*c):new l(a,p,r.count*c),w=new Wa(y,c,_);if(void 0!==r.sparse){const T=r.sparse.values.byteOffset||0,I=new(0,o_[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*kse.SCALAR),F=new l(o[2],T,r.sparse.count*c);null!==a&&(w=new Wa(w.array.slice(),w.itemSize,w.normalized));for(let P=0,R=I.length;P<R;P++){const k=I[P];if(w.setX(k,F[P*c]),c>=2&&w.setY(k,F[P*c+1]),c>=3&&w.setZ(k,F[P*c+2]),c>=4&&w.setW(k,F[P*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=Rse[p.magFilter]||Qa,u.minFilter=Rse[p.minFilter]||Dd,u.wrapS=Fse[p.wrapS]||k0,u.wrapT=Fse[p.wrapT]||k0,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(f){l=!0;const p=new Blob([f],{type:o.mimeType});return c=a.createObjectURL(p),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(f){return new Promise(function(p,g){let _=p;!0===t.isImageBitmapLoader&&(_=function(y){const w=new D4(y);w.needsUpdate=!0,p(w)}),t.load(ef.resolveURL(f,s.path),_,void 0,g)})}).then(function(f){return!0===l&&a.revokeObjectURL(c),f.userData.mimeType=o.mimeType||function Stt(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===t&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[bs.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[bs.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[bs.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new u5,Yc.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new oc,Yc.prototype.copy.call(c,i),c.color.copy(i.color),this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return wv}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=s.extensions||{},l=[];if(c[bs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const f=r[bs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else if(c[bs.KHR_MATERIALS_UNLIT]){const f=r[bs.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Dn(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}void 0!==f.baseColorTexture&&l.push(t.assignTexture(a,"map",f.baseColorTexture,Lo)),a.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,a.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Il&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Qt(1,1),void 0!==s.normalTexture.scale)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return void 0!==s.occlusionTexture&&o!==Il&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Il&&(a.emissive=(new Dn).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==Il&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Lo)),Promise.all(l).then(function(){let f;return f=o===dH?r[bs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(f.name=s.name),k5(f,s),t.associations.set(f,{materials:e}),s.extensions&&a_(r,f,s),f})}createUniqueName(e){const t=pa.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[bs.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return zse(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=Mtt(l),f=r[u];if(f)o.push(f.promise);else{let p;p=l.extensions&&l.extensions[bs.KHR_DRACO_MESH_COMPRESSION]?s(l):zse(new vr,l,t),r[u]={primitive:l,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?Ctt(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],f=[];for(let g=0,_=u.length;g<_;g++){const y=u[g],w=o[g];let C;const b=l[g];if(4===w.mode||5===w.mode||6===w.mode||void 0===w.mode)C=!0===s.isSkinnedMesh?new Ate(y,b):new Ys(y,b),!0===C.isSkinnedMesh&&!C.geometry.attributes.skinWeight.normalized&&C.normalizeSkinWeights(),5===w.mode?C.geometry=Ose(C.geometry,1):6===w.mode&&(C.geometry=Ose(C.geometry,2));else if(1===w.mode)C=new mg(y,b);else if(3===w.mode)C=new Nd(y,b);else if(2===w.mode)C=new Ste(y,b);else{if(0!==w.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);C=new dv(y,b)}Object.keys(C.geometry.morphAttributes).length>0&&btt(C,s),C.name=t.createUniqueName(s.name||"mesh_"+e),k5(C,s),w.extensions&&a_(r,C,w),t.assignFinalMaterial(C),f.push(C)}for(let g=0,_=f.length;g<_;g++)t.associations.set(f[g],{meshes:e,primitives:g});if(1===f.length)return f[0];const p=new wo;t.associations.set(p,{meshes:e});for(let g=0,_=f.length;g<_;g++)p.add(f[g]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new z2(vb.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new o5(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),k5(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],c=[];for(let l=0,u=i.channels.length;l<u;l++){const f=i.channels[l],p=i.samplers[f.sampler],g=f.target,y=void 0!==i.parameters?i.parameters[p.input]:p.input,w=void 0!==i.parameters?i.parameters[p.output]:p.output;r.push(this.getDependency("node",g.node)),s.push(this.getDependency("accessor",y)),o.push(this.getDependency("accessor",w)),a.push(p),c.push(g)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const u=l[0],f=l[1],p=l[2],g=l[3],_=l[4],y=[];for(let C=0,b=u.length;C<b;C++){const M=u[C],T=f[C],I=p[C],F=g[C],P=_[C];if(void 0===M)continue;let R;switch(M.updateMatrix(),t6[P.path]){case t6.weights:R=xv;break;case t6.rotation:R=d5;break;default:R=bv}const k=M.name?M.name:M.uuid,W=void 0!==F.interpolation?wtt[F.interpolation]:G7,ie=[];t6[P.path]===t6.weights?M.traverse(function(me){me.morphTargetInfluences&&ie.push(me.name?me.name:me.uuid)}):ie.push(k);let Te=I.array;if(I.normalized){const me=mH(Te.constructor),Q=new Float32Array(Te.length);for(let he=0,K=Te.length;he<K;he++)Q[he]=Te[he]*me;Te=Q}for(let me=0,Q=ie.length;me<Q;me++){const he=new R(ie[me]+"."+t6[P.path],T.array,Te,W);"CUBICSPLINE"===F.interpolation&&(he.createInterpolant=function(oe){return new(this instanceof d5?ytt:Bse)(this.times,this.values,this.getValueSize()/3,oe)},he.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(he)}}return new Mv(i.name?i.name:"animation_"+e,void 0,y)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),Promise.all(a)}().then(function(a){let c;if(c=!0===s.isBone?new nk:a.length>1?new wo:1===a.length?a[0]:new Mc,c!==a[0])for(let l=0,u=a.length;l<u;l++)c.add(a[l]);if(s.name&&(c.userData.name=s.name,c.name=o),k5(c,s),s.extensions&&a_(i,c,s),void 0!==s.matrix){const l=new Vi;l.fromArray(s.matrix),c.applyMatrix4(l)}else void 0!==s.translation&&c.position.fromArray(s.translation),void 0!==s.rotation&&c.quaternion.fromArray(s.rotation),void 0!==s.scale&&c.scale.fromArray(s.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=e,c})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new wo;r.name&&(o.name=s.createUniqueName(r.name)),k5(o,r),r.extensions&&a_(i,o,r);const a=r.nodes||[],c=[];for(let l=0,u=a.length;l<u;l++)c.push(Hse(a[l],o,t,s));return Promise.all(c).then(function(){return s.associations=(u=>{const f=new Map;for(const[p,g]of s.associations)(p instanceof Yc||p instanceof D4)&&f.set(p,g);return u.traverse(p=>{const g=s.associations.get(p);null!=g&&f.set(p,g)}),f})(o),o})}}function Hse(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(void 0===r.skin)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const c=[];for(let l=0,u=o.joints.length;l<u;l++)c.push(i.getDependency("node",o.joints[l]));return Promise.all(c)}).then(function(a){return s.traverse(function(c){if(!c.isMesh)return;const l=[],u=[];for(let f=0,p=a.length;f<p;f++){const g=a[f];if(g){l.push(g);const _=new Vi;void 0!==o.inverseBindMatrices&&_.fromArray(o.inverseBindMatrices.array,16*f),u.push(_)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[f])}c.bind(new Kb(l,u),c.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let c=0,l=a.length;c<l;c++)o.push(Hse(a[c],s,t,i))}return Promise.all(o)})}function zse(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=pH[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return k5(n,e),function Ttt(n,e,t){const i=e.attributes,r=new e5;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new ge(c[0],c[1],c[2]),new ge(l[0],l[1],l[2])),a.normalized){const u=mH(o_[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new ge,c=new ge;for(let l=0,u=s.length;l<u;l++){const f=s[l];if(void 0!==f.POSITION){const p=t.json.accessors[f.POSITION],g=p.min,_=p.max;if(void 0!==g&&void 0!==_){if(c.setX(Math.max(Math.abs(g[0]),Math.abs(_[0]))),c.setY(Math.max(Math.abs(g[1]),Math.abs(_[1]))),c.setZ(Math.max(Math.abs(g[2]),Math.abs(_[2]))),p.normalized){const y=mH(o_[p.componentType]);c.multiplyScalar(y)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new s5;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function xtt(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const f=e[l];if(void 0!==f.POSITION&&(i=!0),void 0!==f.NORMAL&&(r=!0),void 0!==f.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];if(i){const p=void 0!==f.POSITION?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=void 0!==f.NORMAL?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=void 0!==f.COLOR_0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;c.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const f=l[1],p=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}function Ose(n,e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const Ltt=/^[og]\s*(.+)?/,Dtt=/^mtllib /,Itt=/^usemtl /,Btt=/^usemap /,Nse=/\s+/,Vse=new ge,AH=new ge,Use=new ge,Gse=new ge,V4=new ge,uS=new Dn;function Rtt(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(c){const l={index:"number"==typeof c?c:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return l.clone=this.clone.bind(l),l}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&"function"==typeof i.clone){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;Vse.fromArray(r,e),AH.fromArray(r,t),Use.fromArray(r,i),V4.subVectors(Use,AH),Gse.subVectors(Vse,AH),V4.cross(Gse),V4.normalize(),s.push(V4.x,V4.y,V4.z),s.push(V4.x,V4.y,V4.z),s.push(V4.x,V4.y,V4.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[i]&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,o,a,c,l){const u=this.vertices.length;let f=this.parseVertexIndex(e,u),p=this.parseVertexIndex(t,u),g=this.parseVertexIndex(i,u);if(this.addVertex(f,p,g),this.addColor(f,p,g),void 0!==a&&""!==a){const _=this.normals.length;f=this.parseNormalIndex(a,_),p=this.parseNormalIndex(c,_),g=this.parseNormalIndex(l,_),this.addNormal(f,p,g)}else this.addFaceNormal(f,p,g);if(void 0!==r&&""!==r){const _=this.uvs.length;f=this.parseUVIndex(r,_),p=this.parseUVIndex(s,_),g=this.parseUVIndex(o,_),this.addUV(f,p,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class Ftt extends p5{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,o=new Hu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new Rtt;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let r=[];for(let a=0,c=i.length;a<c;a++){const l=i[a].trimStart();if(0===l.length)continue;const u=l.charAt(0);if("#"!==u)if("v"===u){const f=l.split(Nse);switch(f[0]){case"v":t.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?(uS.setRGB(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6])).convertSRGBToLinear(),t.colors.push(uS.r,uS.g,uS.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":t.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if("f"===u){const p=l.slice(1).trim().split(Nse),g=[];for(let y=0,w=p.length;y<w;y++){const C=p[y];if(C.length>0){const b=C.split("/");g.push(b)}}const _=g[0];for(let y=1,w=g.length-1;y<w;y++){const C=g[y],b=g[y+1];t.addFace(_[0],C[0],b[0],_[1],C[1],b[1],_[2],C[2],b[2])}}else if("l"===u){const f=l.substring(1).trim().split(" ");let p=[];const g=[];if(-1===l.indexOf("/"))p=f;else for(let _=0,y=f.length;_<y;_++){const w=f[_].split("/");""!==w[0]&&p.push(w[0]),""!==w[1]&&g.push(w[1])}t.addLineGeometry(p,g)}else if("p"===u){const p=l.slice(1).trim().split(" ");t.addPointGeometry(p)}else if(null!==(r=Ltt.exec(l))){const f=(" "+r[0].slice(1).trim()).slice(1);t.startObject(f)}else if(Itt.test(l))t.object.startMaterial(l.substring(7).trim(),t.materialLibraries);else if(Dtt.test(l))t.materialLibraries.push(l.substring(7).trim());else if(Btt.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(r=l.split(" "),r.length>1){const p=r[1].trim().toLowerCase();t.object.smooth="0"!==p&&"off"!==p}else t.object.smooth=!0;const f=t.object.currentMaterial();f&&(f.smooth=t.object.smooth)}else{if("\0"===l)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+l+'"')}}t.finalize();const s=new wo;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,c=t.objects.length;a<c;a++){const l=t.objects[a],u=l.geometry,f=l.materials,p="Line"===u.type,g="Points"===u.type;let _=!1;if(0===u.vertices.length)continue;const y=new vr;y.setAttribute("position",new ai(u.vertices,3)),u.normals.length>0&&y.setAttribute("normal",new ai(u.normals,3)),u.colors.length>0&&(_=!0,y.setAttribute("color",new ai(u.colors,3))),!0===u.hasUVIndices&&y.setAttribute("uv",new ai(u.uvs,2));const w=[];for(let b=0,M=f.length;b<M;b++){const T=f[b],I=T.name+"_"+T.smooth+"_"+_;let F=t.materials[I];if(null!==this.materials)if(F=this.materials.create(T.name),!p||!F||F instanceof oc){if(g&&F&&!(F instanceof u5)){const P=new u5({size:10,sizeAttenuation:!1});Yc.prototype.copy.call(P,F),P.color.copy(F.color),P.map=F.map,F=P}}else{const P=new oc;Yc.prototype.copy.call(P,F),P.color.copy(F.color),F=P}void 0===F&&(F=p?new oc:g?new u5({size:1,sizeAttenuation:!1}):new Ute,F.name=T.name,F.flatShading=!T.smooth,F.vertexColors=_,t.materials[I]=F),w.push(F)}let C;if(w.length>1){for(let b=0,M=f.length;b<M;b++){const T=f[b];y.addGroup(T.groupStart,T.groupCount,b)}C=p?new mg(y,w):g?new dv(y,w):new Ys(y,w)}else C=p?new mg(y,w[0]):g?new dv(y,w[0]):new Ys(y,w[0]);C.name=l.name,s.add(C)}else if(t.vertices.length>0){const a=new u5({size:1,sizeAttenuation:!1}),c=new vr;c.setAttribute("position",new ai(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(c.setAttribute("color",new ai(t.colors,3)),a.vertexColors=!0);const l=new dv(c,a);s.add(l)}return s}}let c_=(()=>{class n{constructor(t,i,r,s){this.threeMaterialService=t,this.cookieService=i,this.httpClient=r,this.appService=s,this.textures={},this.cameraPerspective=!0,this.update$=new Je}swapCamera(){this.cameraPerspective=!this.cameraPerspective,this.update$.next(void 0)}filter(t,i){t.children.forEach(r=>{console.log(r.name,i),r.visible=!!r.name.includes(i)})}unionAll(t){let i=t[0];return t.forEach(r=>{void 0!==r&&(r.updateMatrix(),r!==i&&(i=qa.union(i,r)))}),i}flatShapeCross(t,i,r){const s=this.flatShape(t,i,r,i);return this.rotateAroundAxis(s,Ci(-90),Eo.blue),this.rotateAroundAxis(s,Ci(-90),Eo.red),s}flatShape(t,i=0,r=[vn.insulation],s){if(t.length<3)return;const o=new Vd,a=t[0];o.moveTo(0,0),t.forEach(p=>{o.lineTo(p[0]-a[0],p[1]-a[1])}),o.lineTo(0,0);const c={steps:2,depth:s,bevelEnabled:!1},l=r.flatMap(p=>this.threeMaterialService.getMaterial(p,r.length>1)),u=new lM(o,c),f=new Ys(u,l);return f.rotateX(Math.PI/2),f.receiveShadow=!0,f.castShadow=!0,this.translate(f,a[0],i,a[1]),f}translate(t,i,r,s){t.applyMatrix4((new Vi).makeTranslation(i,r,s))}createPane(t){const{material:i,coords:r,xyz:s}=t,o=new Vd,a=r[0];o.moveTo(0,0),r.forEach(u=>{o.lineTo(u[0]-a[0],u[1]-a[1])}),o.lineTo(0,0);const c=new hM(o),l=new Ys(c,this.threeMaterialService.getMaterial(i)[0]);return this.translate(l,s[0],s[1],s[2]),l}createBox(t){const{material:i,whd:r,xyz:s}=t,[o,a,c]=r,[l,u,f]=s||[0,0,0],p=new H0(o,a,c),g=new Ys(p,this.threeMaterialService.getMaterial(i));return g.position.set(o/2+l,a/2+u,c/2+f),g.castShadow=!0,g.receiveShadow=!0,g}createCube(t){const{material:i,whd:r,xyz:s}=t,[o,a,c]=r,[l,u,f]=s||[0,0,0],g=this.flatShape([[0,0],[o,0],[o,c],[0,c]],0,[i],a);return g.position.set(l,u+a,f),g.castShadow=!0,g.receiveShadow=!0,g}importGLTF(t,i){(new Jet).load(`/assets/models/${t}`,s=>{console.log("import dude");const o=s.scene;o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=t,i(o)})}importOBJ(t,i,r){(new Ftt).load(`/assets/models/${i}`,o=>{o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=i,r(o)})}basicGround(t,i){const s=new f3(100,100,1,1),o=this.threeMaterialService.getMaterial(vn.whiteWood),a=new Ys(s,o[0]);a.position.set(0,i,0),a.rotateX(-Math.PI/2),a.receiveShadow=!0,t.add(a)}rotateAroundAxis(t,i,r=Eo.green,s=new ge(0,0,0)){var o=new bc;o.setFromAxisAngle((n=>{switch(n){case Eo.x:return new ge(1,0,0);case Eo.y:return new ge(0,1,0);case Eo.z:return new ge(0,0,1);case Eo.red:return new ge(1,0,0);case Eo.green:return new ge(0,1,0);case Eo.blue:return new ge(0,0,1)}})(r),i),t.applyQuaternion(o),t.position.sub(s),t.position.applyQuaternion(o),t.position.add(s)}}return n.\u0275fac=function(t){return new(t||n)(Xe(rS),Xe(Mu),Xe(vd),Xe(To))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ktt=["rendererContainer"];var Rr=(()=>(function(n){n.East="East",n.West="West",n.North="North",n.South="South",n.Top="Top",n.Bottom="Bottom"}(Rr||(Rr={})),Rr))();const Qse={[Rr.North]:0,[Rr.West]:90,[Rr.South]:180,[Rr.East]:270};let Wse=(()=>{class n{constructor(t,i,r,s,o,a){this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.subscriptions=[],this.modelName="base",this.resize$=new go(void 0),this.renderer=new ote({antialias:!0,alpha:!0}),this.scene=new ate,this.subModels={},this.animations={},this.house$=this.houseService.house$,this.animationDuration=1.5,this.clipBox=new Zet,this.cameraMargin=2}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer.unobserve(this.host.nativeElement),this.gui.destroy()}AfterViewInitCallback(){}OnSectionChangeCallback(){}defaultCamera(){this.camera.position.set(10,10,10),this.controls.target.set(1,1,1)}loadManager(){}ngAfterViewInit(){this.house=this.house$.value,this.cross=this.house.cross,this.construction=this.house.construction,this.keys.forEach(t=>{this.subModels[t]=[],this.animations[t]=Vu.timeline()}),this.createScene(),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.subscriptions.push(this.appService.floor$.subscribe(t=>{this.floor=t,this.filterOnFloor()}),this.clipBox.onChange$.subscribe(()=>{this.drawAndClip()}),this.threeService.update$.subscribe(()=>{this.onUpdate()}),this.appService.states$.subscribe(t=>{this.clipBox.states(t),this.setVisibility(t,this.animationDuration),this.drawAndClip()}),this.resize$.subscribe(()=>{this.onResize()}),this.appService.fullscreen$.subscribe(t=>{this.onResize(),this.controls.enableZoom=t}),this.appService.tag$.subscribe(()=>{this.tag=this.appService.tag$.value}),this.appService.scroll$.subscribe(()=>{const t=this.appService.scroll$.value,i=this.section;if(this.section!==t.section){if(this.section=t.section,void 0===i||void 0!==this.orbitControlsCookie)return;this.OnSectionChangeCallback()}})),this.initDraw(),Sv.onStart=function(t,i,r){console.log("Started loading file: "+t+".\nLoaded "+i+" of "+r+" files.")},Sv.onLoad=function(){console.log("Loading Complete!")},Sv.onProgress=function(t,i,r){console.log("Loading file: "+t+".\nLoaded "+i+" of "+r+" files.")},Sv.onError=function(t){console.log("There was an error loading "+t)}}filterOnFloor(){const t=r=>{r.children.forEach(s=>{i(s),s instanceof wo&&t(s)})},i=r=>{const s=r.userData.floor;s&&(r.visible=s===tt.all||this.floor===tt.top||s===this.floor)};t(this.scene)}clearScene(){console.log("clearScene");try{this.scene.children.forEach(t=>{!0===t.userData.clipped&&this.scene.remove(t)})}catch(t){console.log(t)}}env(){(new Ret).setPath("assets/").load("scythian_tombs_2_4k.hdr",(t,i)=>{const r=new qF(this.renderer),s=r.fromEquirectangular(t);r.compileCubemapShader(),this.threeMaterialService.envTexture=s.texture,this.scene.background=this.threeMaterialService.envTexture})}onUpdate(){this.setCamera()}initDraw(){if(this.clipBox.enabled){this.scene.add(this.clipBox);const t=Object.values(this.cross.elevations),i=this.cookieService.get(`${this.modelName}_clip-box`);if(""!==i){const r=JSON.parse(i);this.clipBox.setCookie(r)}else this.clipBox.height=Math.max(...t)-Math.min(...t),this.clipBox.xyz[1]=Math.min(...t);this.clipBox.drawBox()}this.AfterViewInitCallback(),this.scene.traverse(t=>{t.isMesh&&(t.castShadow=!0)}),this.drawAndClip(),this.filterOnFloor()}drawAndClip(){const t=this.appService.states$.value,i=this.clipBox.box.clone();this.clipBox.enabled&&(this.clearScene(),this.clipBox.box.getWorldPosition(i.position)),Object.values(this.keys).forEach(r=>{this.subModels[r].forEach(s=>{if(this.clipBox.enabled){try{this.clipBox.box.updateMatrixWorld(!0),s instanceof Ys?s=this.clip(s,i):s instanceof wo?s=this.clipGroup(s,i):console.log(s)}catch(o){console.log(o)}this.scaleFromSomewhere(r,s),s.userData.clipped=!0}this.scene.add(s)}),this.animations[r].progress(!0===t[r]?0:1)})}onResize(){const t=this.host.nativeElement.getBoundingClientRect(),i=t.height,r=t.width;this.camera&&this.setCamera(),this.renderer.setSize(r,i),this.composer.setSize(r,i)}debug(t){const i="debug";(t=t.clone()).material=new Ma({color:65280,opacity:.5,transparent:!0,side:2,wireframe:!0}),this.add(i,[t]),this.scaleFromSomewhere(i,t,.5)}animate(){window.requestAnimationFrame(()=>this.animate()),this.stats.begin(),this.clipBox&&!this.controlsAreActive&&this.clipBox.onMouseOver(this.camera,this.renderer,()=>{this.cookieService.set(`${this.modelName}_clip-box`,JSON.stringify({xyz:this.clipBox.xyz,height:this.clipBox.height,width:this.clipBox.width,depth:this.clipBox.depth}))},()=>{this.controls.enableRotate=!1,this.renderer.domElement.style.cursor="move"},()=>{this.controls.enableRotate=!0,this.renderer.domElement.style.cursor="auto"}),this.renderer.render(this.scene,this.camera),this.stats.end()}setCamera(){const t=this.host.nativeElement.getBoundingClientRect(),s=t.width/t.height;if(this.threeService.cameraPerspective)this.camera=new z2(50,s,.1,1e3);else{const o=Math.max(this.house.houseWidth,this.house.houseLength)+2*this.cameraMargin,a=o/s;this.camera=new o5(-o/2,o/2,a/2,-a/2,-1e3,1e3)}if(this.setControls(),window.camera=this.camera,this.threeService.cameraPerspective){this.orbitControlsCookie=this.cookieService.get(`${this.modelName}_orbitControls`);try{if(""!==this.orbitControlsCookie){const o=JSON.parse(this.orbitControlsCookie)[0];this.camera.matrix.fromArray(o.camera),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.controls.target.fromArray(o.target)}else this.defaultCamera()}catch(o){console.error(o),this.defaultCamera()}}else this.orthographicCameraSnap(Rr.North,!1);this.controls.update()}setControls(){this.controls=new Bet(this.camera,this.renderer.domElement),window.control=this.controls,this.subscriptions.push(ic(this.controls,"change").pipe(PC(1e3)).subscribe(t=>{if(!this.threeService.cameraPerspective)return;const i=JSON.stringify([{camera:this.camera.matrix.toArray(),target:this.controls.target.toArray()}]);this.cookieService.set(`${this.modelName}_orbitControls`,i)})),this.controls.addEventListener("start",t=>{this.controlsAreActive=!0,this.cameraAnimation&&this.cameraAnimation.kill(),this.cameraZoomAnimation&&this.cameraZoomAnimation.kill(),this.cameraTargetAnimation&&this.cameraTargetAnimation.kill()}),this.controls.addEventListener("end",t=>{this.controlsAreActive=!1,this.orthographicCameraSnap()})}orthographicCameraSnap(t,i=!1){const r=this.camera;if(this.threeService.cameraPerspective)return;const s=this.house.houseWidth,o=this.house.houseLength,a=this.cross.elevations[Gt.topOutside];if(void 0===t){i=!0;const[p,g]=function wUe(n,e,t=3){const r=Math.atan2(e.y-n.y,Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.z-n.z,2)))*(180/Math.PI);let o=Math.atan2(e.x-n.x,e.z-n.z)*(180/Math.PI);return o<0&&(o=360+o),[An(-r,t),An(o,t)]}(r.position,this.controls.target),_=(w,C)=>{const b=Qse[C];return w>315&&(w-=360),w<b+45&&w>b-45},y=(w,C,b,M)=>{const T=Qse[C];return w>315&&(w-=360),Math.abs(w-T)<=10?C:w-T>0?M:b};p>45?t=Rr.Top:_(g,Rr.North)?t=Rr.North:_(g,Rr.West)?t=Rr.West:_(g,Rr.South)?t=Rr.South:_(g,Rr.East)&&(t=Rr.East),this.cameraViewSide===t&&(t===Rr.East?t=y(g,Rr.East,Rr.South,Rr.North):t===Rr.South?t=y(g,Rr.South,Rr.West,Rr.East):t===Rr.West?t=y(g,Rr.West,Rr.North,Rr.South):t===Rr.North&&(t=y(g,Rr.North,Rr.East,Rr.West))),this.cameraViewSide=t}let c={x:0,y:0,z:0};t==Rr.North?c={x:s/2,y:a/2,z:0*o}:t==Rr.West?c={x:0*s,y:a/2,z:o/2}:t==Rr.East?c={x:s/1,y:a/2,z:o/2}:t==Rr.South?c={x:s/2,y:a/2,z:o/1}:t==Rr.Top&&(c={x:s/2,y:a/1,z:o/2+.01});const l=([Rr.North,Rr.South].includes(t)?s:o)+2*this.cameraMargin,u=(r.right-r.left)/l,f={x:s/2,y:a/2,z:o/2};i?(this.cameraAnimation=Vu.to(r.position,{duration:1,...c,onUpdate:()=>this.controls.update()}),this.cameraZoomAnimation=Vu.to(r,{duration:1,zoom:(r.right-r.left)/l,onUpdate:()=>r.updateProjectionMatrix()}),this.cameraTargetAnimation=Vu.to(this.controls.target,{duration:1,...f,onUpdate:()=>this.controls.update()}),this.cameraAnimation.play(),this.cameraZoomAnimation.play(),this.cameraTargetAnimation.play()):(r.position.set(c.x,c.y,c.z),r.zoom=u,this.controls.target.set(f.x,f.y,f.z),r.updateProjectionMatrix(),this.controls.update())}initSky(){const t=new lS;t.scale.setScalar(45e4),this.scene.add(t);const i=new ge,r={turbidity:10,rayleigh:1,mieCoefficient:.008,mieDirectionalG:.68,elevation:20,azimuth:13,exposure:this.renderer.toneMappingExposure},s=()=>{const a=t.material.uniforms;a.turbidity.value=r.turbidity,a.rayleigh.value=r.rayleigh,a.mieCoefficient.value=r.mieCoefficient,a.mieDirectionalG.value=r.mieDirectionalG;const c=vb.degToRad(90-r.elevation),l=vb.degToRad(r.azimuth);i.setFromSphericalCoords(1,c,l),a.sunPosition.value.copy(i),this.renderer.toneMappingExposure=r.exposure,this.renderer.render(this.scene,this.camera)},o=this.gui.addFolder("Sky");o.add(r,"turbidity",0,20,.1).onChange(s),o.add(r,"rayleigh",0,4,.001).onChange(s),o.add(r,"mieCoefficient",0,.1,.001).onChange(s),o.add(r,"mieDirectionalG",0,1,.001).onChange(s),o.add(r,"elevation",0,90,.1).onChange(s),o.add(r,"azimuth",-180,180,.1).onChange(s),o.add(r,"exposure",0,1,1e-4).onChange(s),s(),o.close()}lights(t=1){const i=new $te(16777215,7829367,1.1*t);i.position.set(0,50,35),this.scene.add(i);const r=this.gui.addFolder("Lighting");r.close(),r.add(i,"intensity",0,3,.01);const s=new Ik(16777215,.4*t);s.position.set(15,30,45),s.target.position.set(0,0,0),s.castShadow=!0,s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.near=.5,s.shadow.camera.far=5e3,s.shadow.bias=-1e-4,s.shadow.camera.top=30,s.shadow.camera.bottom=-30,s.shadow.camera.left=30,s.shadow.camera.right=-30,this.initSky(),this.scene.add(s)}sky(){scene.fog=new Qb(scene.background,10,100);const t=document.getElementById("vertexShader").textContent,i=document.getElementById("fragmentShader").textContent,r={topColor:{value:new Dn(30532)},bottomColor:{value:new Dn(16729167)},offset:{value:33},exponent:{value:.6}},s=new yv(400,32,15),o=new Sc({uniforms:r,vertexShader:t,fragmentShader:i,side:1}),a=new Ys(s,o);this.scene.add(a)}createScene(){this.setCamera(),this.renderer.shadowMap.enabled=!0,this.renderer.toneMapping=4,this.renderer.toneMappingExposure=.8,this.renderer.localClippingEnabled=!0,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),window.camera=this.camera,window.renderer=this.renderer,window.scene=this.scene,this.composer=new Wet(this.renderer);const t=window.innerWidth,i=window.innerHeight,r=new $et(this.scene,this.camera,t,i);r.kernelRadius=.6,r.minDistance=1e-4,r.maxDistance=.001,this.composer.addPass(r),this.stats=new qet,this.host.nativeElement.appendChild(this.stats.dom).style.left="50px",this.gui=new uH,this.gui.close(),this.animate()}yoyo(t){setTimeout(()=>{this.animations[t].yoyo(!0).repeat(-1).repeatDelay(.3).play()},1e3)}add(t,i,r=!1){i.forEach(s=>{s.userData.key=t,this.forEachMeshOrGroup(s,o=>{o.geometry&&(o.geometry.userData.key=t)})}),this.subModels[t].push(...i.filter(s=>s)),r&&i.forEach(s=>this.scene.add(s))}forEachMeshOrGroup(t,i){t instanceof Ys&&i(t),t instanceof wo&&t.children.forEach(r=>this.forEachMeshOrGroup(r,i))}clip(t,i){return t.updateMatrix(),t.updateWorldMatrix(!0,!0),i.updateMatrix(),i.updateWorldMatrix(!0,!0),qa.subtract(t,i)}intersect(t,i){return t.updateMatrix(),i.updateMatrix(),qa.intersect(t,i)}intersectGroup(t,i){const r=t.clone();return r.children=t.children.map(o=>o instanceof Ys?this.intersect(o,i):o instanceof wo?this.intersectGroup(o,i):void 0),r}clipGroup(t,i){const r=t.clone();return r.children=t.children.map(o=>o instanceof Ys?this.clip(o,i):o instanceof wo?this.clipGroup(o,i):void 0),r}mergeAll(t){let i=t[0];return t.forEach((r,s)=>{0!==s&&(i=this.merge(i,r))}),i}merge(t,i){return t.updateMatrix(),i.updateMatrix(),qa.union(t,i)}translate(t,i,r,s){t.applyMatrix4((new Vi).makeTranslation(i,r,s))}scale(t,i,r,s){t.applyMatrix4((new Vi).scale(new ge(i,r,s)))}pauseAll(){this.keys.forEach(t=>{this.animations[t].pause()})}debugMeasureBlock(t=1,i=1,r=1,s=1){const o=this.threeService.createCube({material:vn.floor,whd:[s,s,s],xyz:[t,i,r]});this.scene.add(o)}setVisibility(t,i=1.2){this.pauseAll(),this.keys.forEach(r=>{const s=this.animations[r],o=!0===t[r],a=1!==s.progress(),c=1===s.progress();o?c||0===i?s.timeScale(1).reverse():Vu.to(s,{progress:0,duration:i}):a||0===i?s.timeScale(2).play():Vu.to(s,{progress:1,duration:i})})}group(t){const i=new wo;return t.forEach(r=>{r&&i.add(r)}),i}scaleZInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{z:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleYInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{y:0,duration:r,ease:s}),this.animations[t].to(i.scale,{y:0,z:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleXInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{x:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleFromSomewhere(t,i,r=.3,s="linear",o=!1){this.animations[t].to(i.position,{y:o?10:-10,duration:r,ease:s}),this.animations[t].to(i,{visible:!1,duration:0})}}return n.\u0275fac=function(t){return new(t||n)(G(c_),G(qo),G(gn),G(To),G(Mu),G(rS))},n.\u0275cmp=On({type:n,selectors:[["app-three-house-base"]],viewQuery:function(t,i){if(1&t&&Wo(ktt,5),2&t){let r;ir(r=rr())&&(i.rendererContainer=r.first)}},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),Ptt=(()=>{class n extends Wse{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.modelName="Construction3D",this.keys=Object.values(Di),this.demoDepth=3,this.joistFlangeHeight=.04,this.window=new Tet({}),this.windowRoughOSBClip=this.threeService.createCube({material:vn.unknown,whd:[this.window.roughWidthOSB-(this.window.gap+this.window.thicknessOSB),this.window.roughHeightOSB,2],xyz:[0,this.window.roughBottomOSB,-1]}),this.windowRoughClip=this.threeService.createCube({material:vn.unknown,whd:[this.window.roughWidth-this.window.gap,this.window.roughHeight,2],xyz:[0,this.window.roughBottom,-1]}),this.offsetDistanceBend=(c,l,u=!1)=>{const f=this.construction.getRoofPoint(l);let p=0,g=0;[Gt.bendInside,Gt.bendOutside].includes(l)&&(p=(this.lowerAngle-this.upperAngle)/2,g=this.edgeAngle+90),[Gt.topInside,Gt.topOutside].includes(l)&&(p=0,g=90),[Gt.lowestInside,Gt.lowestOutside].includes(l)&&(p=0,g=this.lowerAngle+180),[Gt.groundFloorInside,Gt.groundFloorOutside,Gt.wallInside,Gt.wallOutside].includes(l)&&(p=0,g=180);let _=c/Math.cos(Ci(p));return u&&(_=c),Zs(g,_,f)},this.appService.setState([md.clipBoxShow,md.clipBoxEnabled],!1,!1,!0)}handleKeyboardEvent(t){"F4"===t.key&&(console.log("reset camera"),this.camera.position.set(10,10,10),this.camera.lookAt(0,0,0)),"1"===t.key&&this.focusCamera("in"),"2"===t.key&&this.focusCamera("out")}focusCamera(t){console.log("camera to",t);var i=Vu.timeline();let s=this.center.z;["in"].includes(t)&&(s+=-10),["subGround"].includes(t)&&(s+=1),["out"].includes(t)&&(s+=10),this.pauseAll(),i.to(this.camera.position,{duration:.4,x:this.center.x-10,y:["subGround"].includes(t)?0:1.8,z:s,onUpdate:()=>{this.camera.lookAt(this.center.x,this.center.y,this.center.z)},onComplete:()=>{Vu.globalTimeline.play()}})}getRoofAndOffsetPoints(t){let i={};return Object.keys(Gt).forEach(r=>{i[r]=this.construction.getRoofPoint(r),i[`${r}Offset`]=this.offsetDistanceBend(t,r)}),i}getAngledProperties(t,i,r){const s=this.getRoofAndOffsetPoints(r),o=ja(s[`${t}Offset`],s[`${i}Offset`]),a=h1(s[t],s[i]);return{totalWidth:o,angle:a,origin:this.useOppositeCorner(s[`${t}Offset`],r,a),rotation:[a-90,0,0]}}useOppositeCorner(t,i,r){const[s,o]=Zs(r-90,i,t);return[0,o,-s]}scaleZInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{z:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleYInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{y:0,duration:r,ease:s}),this.animations[t].to(i.scale,{y:0,z:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleXInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{x:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}AfterViewInitCallback(){this.threeService.basicGround(this.scene,-3),this.thickness=this.construction.thickness,this.crossDepth=this.construction.crossDepth,this.amountOfStuds=6,this.outerWallHeight=this.cross.outerWallHeight,this.innerWallHeight=this.cross.innerWallHeight,this.solePlateThickness=.03,this.demoWith=this.amountOfStuds*this.house.studDistance,this.studDistance=this.house.studDistance,this.ceilingHeight=this.cross.ceilingHeight,this.floorThickness=this.cross.topFloorThickness,this.floorLVLThickness=.07,this.joistFlangeWidth=.06,this.center=new ge(this.demoWith/2,this.outerWallHeight/3,this.crossDepth[un.facade]/2),this.lowerAngle=An(h1(this.construction.getRoofPoint(Gt.lowestOutside),this.construction.getRoofPoint(Gt.bendOutside))-90,3),this.upperAngle=An(h1(this.construction.getRoofPoint(Gt.bendOutside),this.construction.getRoofPoint(Gt.topOutside))-90,3),this.edgeAngle=180-((180-this.lowerAngle+this.upperAngle)/2-this.upperAngle),this.lights(1),this.demoDepth=this.construction.getRoofPoint(Gt.topOutside)[0],this.buildFoundation(),this.buildICF(),this.buildGroundFloor(),this.buildTapes(),this.buildWindowOSB(),this.buildOSB(),this.buildOSBRoof(),this.buildTopFloor(),this.buildFloorLVL(),this.buildTopFloorOSB(),this.buildSole(),this.buildJoist(),this.buildRoofJoists(),this.buildInsulation(),this.buildServiceInsulation(),this.buildServiceBeams(),this.buildOuterSheet(),this.buildSpace(),this.buildRoofSpace(),this.buildFacade(),this.buildGips(),this.buildRoofTiles(),this.createMirror(),this.importDude();const t=new zk(.5);t.position.set(0,0,0),this.scene.add(t)}OnSectionChangeCallback(){[_t.constructionFoundation,_t.constructionCrawlerSpace].includes(this.section)?this.focusCamera("subGround"):[_t.constructionFloorLVL,_t.constructionRoof,_t.constructionWallOSB,_t.constructionWallTape,_t.constructionWallService,_t.constructionWallGips,_t.constructionFloor].includes(this.section)?this.focusCamera("in"):[_t.constructionWallSole,_t.constructionWallJoists,_t.constructionGroundFloor,_t.constructionWallInsulation,_t.constructionWallOuterSheet,_t.constructionWallSpace,_t.constructionWallFacade].includes(this.section)&&this.focusCamera("out")}importDude(){this.threeService.importGLTF("Male_Standing.glb",t=>{this.scene.add(t),t.scale.set(.5,.5,.5),t.rotateY(Ci(-110)),t.position.set(this.demoWith/2,this.cross.elevations[Si.topFloor],-2)})}createMirror(){this.mirror=new Eet(new f3(30,30),{color:new Dn(8355711),textureWidth:window.innerWidth*window.devicePixelRatio,textureHeight:window.innerHeight*window.devicePixelRatio}),this.mirror.visible=this.appService.states$.value[md.mirror],this.mirror.position.set(-2,0,-this.construction.getRoofPoint(Gt.topOutside)[0]),this.scene.add(this.mirror)}createJoist(t,i,r=.04,s=.005){const o=this.joistFlangeWidth,a=[{material:vn.pine,whd:[o,t,r],xyz:[0,0,0]},{material:vn.pine,whd:[o,t,r],xyz:[0,0,i-r]},{material:vn.osb,whd:[s,t,i-2*r],xyz:[o/2-s/2,0,r]}],c=new wo;return a.forEach((l,u)=>{const f=this.threeService.createCube(l);c.add(f),2===u&&(f.material[0].color=new Dn(14277081))}),c}createCornerTape(t,i,r,s){const o=new wo,a=this.threeService.createCube({material:vn.tape,whd:[s,t,r]});a.rotateX(Ci(0)),this.translate(a,0,-t,0),o.add(a);const c=this.threeService.createCube({material:vn.tape,whd:[s,i,r]});return c.rotateX(Ci(90)),this.translate(c,0,-i/2-r/2,-i/2+r/2),o.add(c),o}createIFCblock(t,i,r,s){const o=new wo,a=this.threeService.createCube({material:vn.foam,whd:[i,r,s]}),c=this.threeService.createCube({material:vn.foam,whd:[i,r,s]});return this.translate(a,0,0,0),this.translate(c,0,0,t+s),o.add(a),o.add(c),this.scene.add(o),o}buildFoundation(){const t=Di.foundation,c=this.threeService.createCube({material:vn.concrete,whd:[this.demoWith,.3,.4],xyz:[0,this.cross.elevations[Si.crawlerFloor]-.3,this.crossDepth[un.groundFloorEdge]-.4*.8]});this.add(t,[c]),this.animations[t].to(c.scale,{z:0,y:0,duration:.6,ease:"power3"}),this.animations[t].to(c,{visible:!1,duration:0})}buildRoofJoists(){const t=Di.roofJoists;this.buildRoofHigherJoists(),this.buildRoofLowerJoists(),this.subModels[t].flatMap(r=>r.children).sort((r,s)=>r.position.x-s.position.x).forEach((r,s)=>{this.scaleZInOut(t,r,.1)}),this.buildRoofLVL()}buildRoofLowerJoists(){const t=Di.roofJoists,s=(this.construction.getRoofPoint(Gt.wallInside),this.construction.getRoofPoint(Gt.wallInside),this.construction.getRoofPoint(Gt.wallOutside)),o=this.construction.getRoofPoint(Gt.bendInside),a=this.construction.getRoofPoint(Gt.bendOutside),c=this.thickness[un.roofJoists],l=new wo;this.add(t,[l]),l.rotateX(Ci(this.lowerAngle)),this.translate(l,0,s[1],-s[0]);const u=ja(s,a),f=[],p=-(90-h1(o,a)),g=new Pu(new ge(0,0,1),0);f.push(g);let _=(new Vi).makeRotationX(Ci(p));g.applyMatrix4(_.setPosition(new ge(0,o[1],-o[0]))),this.threeService.createCube({whd:[this.demoDepth,this.cross.elevations[Gt.wallInside],this.thickness[un.joists]],material:vn.unknown});const T=c-2*this.joistFlangeHeight-.1;for(let I of[...Array(this.amountOfStuds+1).keys()]){let F=I*this.studDistance-this.joistFlangeWidth/2;0===I&&(F=0);let P=this.createJoist(u+0,c);P.position.set(0,-0,0);const R=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,.5,T],xyz:[0,0,this.joistFlangeHeight+.05]});P.add(R);const k=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,.5,T],xyz:[0,u+0-.5,this.joistFlangeHeight+.05]});P.add(k),P.children.flatMap(W=>W.material).forEach(W=>{W.side=2,W.clippingPlanes=f,W.clipIntersection=!1,W.clipShadows=!0}),this.translate(P,F,0,0),l.add(P)}}buildRoofHigherJoists(){const t=Di.roofJoists,i=this.construction.getRoofPoint(Gt.bendInside),r=this.construction.getRoofPoint(Gt.bendOutside),o=(this.construction.getRoofPoint(Gt.topInside),this.construction.getRoofPoint(Gt.topOutside)),a=new wo;this.add(t,[a]);const c=h1(r,o)-90;a.rotateX(Ci(c)),this.translate(a,0,r[1],-r[0]);const l=this.thickness[un.roofJoists],u=ja(r,o),f=[],p=new Pu(new ge(0,0,1),o[0]-this.cross.roofRidgeWidth/2);f.push(p);const g=h1(i,r)-90,_=new Pu(new ge(0,0,-1),0);f.push(_);let y=(new Vi).makeRotationX(Ci(g));_.applyMatrix4(y.setPosition(new ge(0,i[1],-i[0])));const T=l-2*this.joistFlangeHeight-.1;for(let I of[...Array(this.amountOfStuds+1).keys()]){let F=I*this.studDistance-this.joistFlangeWidth/2;0===I&&(F=0);const P=this.createJoist(u+2,l);P.position.set(0,-1,-l);const R=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,1.5,T],xyz:[0,0,this.joistFlangeHeight+.05]});P.add(R);const k=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,1.5,T],xyz:[0,u+1-.5,this.joistFlangeHeight+.05]});P.add(k),P.children.flatMap(W=>W.material).forEach(W=>{W.side=2,W.clippingPlanes=f,W.clipIntersection=!1,W.clipShadows=!0}),this.translate(P,F,0,0),a.add(P)}}buildICF(){const t=Di.crawlerSpace,i=.2,c=this.cross.crawlerHeight,l=this.demoWith,p=Math.ceil(c/.3),g=Math.ceil(l/.6),_=this.cross.elevations[Si.crawlerCeiling],y=_-c,w=this.crossDepth[un.groundFloorEdge]-i,C=Number(`${p}${g+1}`),b=this.threeService.createCube({material:vn.concrete,whd:[this.demoWith,c,i]});this.translate(b,0,_-c,w),this.scene.add(b),this.animations[t].to(b.scale,{y:0,duration:1,ease:"Back.easeIn"}),this.animations[t].to(b.position,{y,ease:"Back.easeIn",duration:1},"<"),this.animations[t].to(b.scale,{z:0}),this.animations[t].to(b,{visible:!1,duration:0});for(let M of[...Array(p).keys()]){M=p-1-M;for(let T of[...Array(g+1).keys()]){T=g-T;const I=Number(`${M}${T}`);let P=.6*T+(M%2?-.3:0),R=y+.3*M,k=.6,W=.3;if(P<0&&(k=.3,P+=.3),P+k>l&&(k=l-P),R+W>_&&(W=_-R),0===k||0===W)continue;const ie=this.createIFCblock(i,k,W,.067);this.translate(ie,P,R,w-.067),this.add(t,[ie]);const Te=(C-I)/C,me=An(.02+.2*Math.pow(Te,4)+.4*Math.pow(Te,16));this.animations[t].to(ie.position,{y:0,x:0,duration:me,ease:"power3"}),this.animations[t].to(ie.children[0].position,{x:.5,z:i,duration:me,ease:"power3"}),this.animations[t].to(ie.scale,{z:0,x:0,duration:me})}}}buildTapes(){const t=Di.tapes,i=.07,r=.01,s=1.2,a=.05,c=this.crossDepth[un.serviceBeams]-r,l=Math.ceil(this.cross.innerWallHeight/s),u=Math.ceil(this.demoWith/2.4),f=this.createCornerTape(i,1*i,r,this.window.roughWidth-this.window.gap+i);f.scale.set(1,1,-1),this.translate(f,0,this.window.roughBottom+r,this.crossDepth[un.serviceBeams]),this.add(t,[f]),this.scaleXInOut(t,f,a);const p=this.createCornerTape(i,1*i,r,this.window.roughWidth-this.window.gap+i);p.scale.set(1,-1,-1),this.translate(p,0,this.window.roughTop-r,this.crossDepth[un.serviceBeams]),this.add(t,[p]),this.scaleXInOut(t,p,a);const g=this.createCornerTape(i,1*i,r,this.window.roughTop-this.window.roughBottom+2*i-2*r);g.rotateZ(Ci(90)),g.scale.set(1,1,-1),this.translate(g,this.window.roughWidth-this.window.gap-r,this.window.roughBottom-i+r,this.crossDepth[un.serviceBeams]),this.add(t,[g]),this.scaleXInOut(t,g,a);const _=this.createCornerTape(i,1*i,r,this.thickness[un.joists]+this.thickness[un.osb]);_.rotateY(Ci(-90)),_.scale.set(1,-1,-1),this.translate(_,this.window.roughWidth-this.window.gap-r,this.window.roughBottom,this.crossDepth[un.serviceBeams]),this.add(t,[_]),this.scaleXInOut(t,_,a);const y=this.createCornerTape(i,1*i,r,this.thickness[un.joists]+this.thickness[un.osb]);y.rotateY(Ci(-90)),y.scale.set(1,1,-1),this.translate(y,this.window.roughWidth-this.window.gap-r,this.window.roughTop,this.crossDepth[un.serviceBeams]),this.add(t,[y]),this.scaleXInOut(t,y,a);for(let w of[...Array(l).keys()]){const C=s*w,b=this.clip(this.threeService.createCube({material:vn.tape,whd:[this.demoWith,i,r],xyz:[0,C,c]}),this.windowRoughOSBClip);this.add(t,[b]),this.scaleXInOut(t,b,a);for(let M of[...Array(u).keys()]){const T=w%2?2.4*M:1.2+2.4*M;if(T+i>this.demoWith)continue;let I=s;C+s>this.cross.innerWallHeight&&(I=this.cross.innerWallHeight-C);const F=this.clip(this.threeService.createCube({material:vn.tape,whd:[i,I,r],xyz:[T,C,c]}),this.windowRoughOSBClip);this.add(t,[F]),this.scaleYInOut(t,F,a)}}}buildRoofTapes(){}plotRoofPoints(){const t=-this.cross.roofPoints[Gt.wallInside][0];Object.entries(this.cross.roofPoints).map(([i,r])=>{if(!i.includes("Inside"))return;console.log(i);const s=new zk(1);s.position.set(0,r[1],-r[0]-t),this.scene.add(s)})}buildInsulation(){this.plotRoofPoints();const t=Di.insulation,i=this.cross.elevations;let o=this.studDistance-this.joistFlangeWidth/2;const a=vn.insulation,c=.95*this.thickness[un.joists],u=.95*this.thickness[un.roofJoists];console.log(this.cross.roofPoints[Gt.bendInside],[0,i[Gt.wallInside]]),[{desc:"wall",t:this.thickness[un.joists],w:o,coords:[[0,2*this.solePlateThickness],[0,i[Gt.wallInside]],[c,i[Gt.wallInside]],[c,2*this.solePlateThickness]]},{desc:"roofLower",t:this.thickness[un.roofJoists],w:o,coords:[this.offsetDistanceBend(0,Gt.wallInside,!0),this.offsetDistanceBend(0,Gt.bendInside,!0),this.offsetDistanceBend(u,Gt.bendInside,!0),this.offsetDistanceBend(u,Gt.wallInside,!0)].map(f=>[-f[0],f[1]])},{desc:"roofHigher",t:this.thickness[un.roofJoists],w:o,coords:[this.offsetDistanceBend(0,Gt.bendInside,!0),this.offsetDistanceBend(0,Gt.topInside,!0),this.offsetDistanceBend(u,Gt.topInside,!0),this.offsetDistanceBend(u,Gt.bendInside,!0)].map(f=>[-f[0],f[1]])}].forEach(f=>{for(let p of[...Array(this.amountOfStuds).keys()]){let g=p*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===p&&(g=this.joistFlangeWidth,f.w-=this.joistFlangeWidth/2);let _=this.threeService.flatShapeCross(f.coords,f.w,[a]);this.translate(_,g,0,0),"wall"===f.desc&&(_=this.clip(_,this.windowRoughOSBClip)),this.add(t,[_])}}),this.animations[t].to(this.subModels[t].map(f=>f.position),{z:2,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(f=>f.scale),{x:0,z:0,ease:"power3",stagger:{each:.4},delay:.5},"<"),this.animations[t].to(this.subModels[t].map(f=>f),{visible:!1,duration:0})}buildJoist(){const t=Di.joists,r=this.thickness[un.joists],s=this.cross.elevations[Si.groundFloor]+this.solePlateThickness,o=this.construction.getRoofPoint(Gt.wallInside)[1],a=new wo;this.translate(a,0,s,this.crossDepth[un.joists]),this.add(t,[a]),this.animations[t].to(a.rotation,{x:Ci(-90),duration:.8});const c=this.thickness[un.osb],l=this.construction.thickness[un.joists],u=this.amountOfStuds+2;for(let f of[...Array(u).keys()]){let p=o-s-2*this.solePlateThickness,g=this.solePlateThickness,_=f*this.studDistance-this.joistFlangeWidth/2;if(f===u-1&&(_=this.window.roughWidth-this.window.gap+this.window.thicknessOSB),0===f&&(_=0),_<this.window.roughWidth-this.window.gap){g=l+this.window.roughTopOSB-this.solePlateThickness,p=p+this.solePlateThickness-g;const w=this.createJoist(p,this.construction.thickness[un.joists]);this.translate(w,_,g,0),a.add(w),this.scaleZInOut(t,w,.2),g=this.solePlateThickness,p=this.window.roughBottom-2*this.solePlateThickness-c}const y=this.createJoist(p,l);this.translate(y,_,g,0),a.add(y),this.scaleZInOut(t,y,.2)}for(let f of[...Array(2).keys()]){let g=l+this.window.roughTopOSB-this.solePlateThickness,_=this.joistFlangeWidth;0===f&&(_=l);const y=this.createJoist(this.window.roughWidth-this.window.gap+this.window.thicknessOSB,l);y.rotation.set(Ci(90),0,Ci(-90)),this.translate(y,0,g,_),a.add(y),this.scaleZInOut(t,y,.2)}for(let f of[0,1]){const p=this.threeService.createCube({material:vn.pine,whd:[this.demoWith,this.solePlateThickness,r]});this.translate(p,0,0===f?0:o-2*this.solePlateThickness,0),a.add(p),this.scaleZInOut(t,p,.2)}}buildTopFloor(){const t=Di.topFloorJoists,i=new wo,r=this.floorThickness,s=this.crossDepth[un.serviceBeams]-this.floorLVLThickness,o=this.demoDepth+s,a=o+s;for(let c of[...Array(this.amountOfStuds+1).keys()]){let l=c*this.studDistance-this.joistFlangeWidth/2;0===c&&(l=0);const u=this.createJoist(o,r);u.rotateX(Ci(-90)),this.translate(u,l,this.ceilingHeight,s),i.add(u),this.animations[t].to(u.position,{z:-a,duration:.2,ease:"power3"},">"),this.animations[t].to(u.scale,{z:0,x:0,duration:.2},"<"),this.animations[t].to(u,{visible:!1,duration:0})}this.add(t,[i])}buildTopFloorOSB(){this.buildRoofTapes();const t=Di.topFloorOSB;this.brickPattern(t,[0,this.cross.elevations[Si.topFloor],this.crossDepth[un.serviceBeams]],2.4,1.2,this.thickness[un.osb],this.demoDepth,this.demoWith,[-90,0,0],vn.osb,(u,f,p,g,_,y)=>{this.scaleZInOut(t,u,.3+(f+p)/y*.2)})}brickPattern(t,i,r,s,o,a,c,l,u,f,p){const g=new wo,_=Math.ceil(c/r),y=Math.ceil(a/s),w=r/2;for(let C of[...Array(y+1).keys()])for(let b of[...Array(_+1).keys()]){let T=(_-b)*r+(C%2?-w:0),I=(y-C)*s,F=0,P=s,R=r,k=!1;const W=Number(`${C+1}${b+1}`);if(T<0&&(R=w,T=0),I+s>a&&(P=a-I,k=!0),T+r>=c&&(R=c-T,k=!0),I>=a||T>=c)continue;let ie=this.threeService.createCube({material:u,whd:[R,P,o]});this.translate(ie,T,I,F),p&&(ie=this.clip(ie,p)),g.add(ie),f(ie,C,b,R,P,W,k)}g.rotation.set(Ci(l[0]),Ci(l[1]),Ci(l[2])),this.translate(g,i[0],i[1],i[2]),this.add(t,[g])}buildRoofTiles(){const t=Di.roofTiles,l=this.thickness[un.outerSheet]+this.thickness[un.space]+.02,u=this.getRoofAndOffsetPoints(l);this.threeService.importGLTF("rooftile.glb",f=>{f.scale.set(1,1,1),[[Gt.lowestOutside,Gt.bendOutside],[Gt.bendOutside,Gt.topOutside]].map((g,_)=>{const{totalWidth:y,rotation:C,angle:b}=this.getAngledProperties(g[0],g[1],l),M=Math.ceil(y/.308);for(let T of[...Array(M).keys()]){const I=Math.ceil(this.demoWith/.204);for(let F of[...Array(I).keys()]){const P=.204*F,R=.308*T,k=f.clone();k.rotateX(Ci(C[0]+90+-4)),this.add(t,[k]);const[W,ie]=Zs(b,R,u[`${g[0]}Offset`]);k.position.set(P,ie+.01,-W)}}}),this.animations[t].to(this.subModels[t].map(g=>g.position),{z:2,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(g=>g.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3"),this.subModels[t].forEach(g=>this.scene.add(g)),this.animations[t].progress(!0===this.appService.states$.value[t]?0:1)})}buildOSBRoof(){const t=Di.roofOSB,s=this.demoWith,o=this.thickness[un.osb],a=(b,M,T,I,F,P)=>{this.animations[t].to(b.scale,{x:0,y:0,z:0,duration:.3}),this.animations[t].to(b,{visible:!1,duration:0})},c=this.construction.getRoofPoint(Gt.bendInside),l=this.construction.getRoofPoint(Gt.topInside),u=[0,c[1],-c[0]-this.crossDepth[un.osb]-o],f=ja(c,l),p=[h1(c,l)-90,0,0];this.brickPattern(t,u,2.4,1.2,o,f,s,p,vn.osb,a);const g=this.construction.getRoofPoint(Gt.wallInside),_=this.construction.getRoofPoint(Gt.bendInside),y=[0,g[1],-g[0]-this.crossDepth[un.osb]-o],w=ja(g,_),C=[h1(g,_)-90,0,0];this.brickPattern(t,y,2.4,1.2,o,w,s,C,vn.osb,a)}buildOSB(){const t=Di.osbWall,s=this.construction.getRoofPoint(Gt.wallInside)[1],a=this.thickness[un.osb];let f=0,p=0,g=0;this.brickPattern(t,[0,this.cross.elevations[Si.groundFloor],this.crossDepth[un.osb]-a],2.4,1.2,a,s,this.demoWith,[0,0,0],vn.osb,(_,y,w,C,b,M)=>{const T=.3+(y+w)/M*.2;this.animations[t].to(_.rotation,{x:Ci(90),duration:T});const I=1.05*C<2.4,F=1.05*b<1.2;this.animations[t].to(_.position,{x:(I?2.4:0)+C/2,y:a*f,z:-(.6+(F?1.2:0)+b/2),duration:T},"<"),I?g+=1:F?p+=1:f+=1},this.windowRoughOSBClip),this.animations[t].to(this.subModels[t].flatMap(_=>_.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}buildWindowOSB(){const t=Di.osbWall,i=this.thickness[un.osb],r=this.crossDepth[un.serviceBeams],s=this.crossDepth[un.outerSheet]-r,o=this.threeService.createCube({material:vn.osb,whd:[this.window.roughWidth-this.window.gap+i,i,s],xyz:[0,this.window.roughBottomOSB,r]});this.add(t,[o]);const a=this.threeService.createCube({material:vn.osb,whd:[this.window.roughWidth-this.window.gap+i,i,s],xyz:[0,this.window.roughTop,r]});this.add(t,[a]);const c=this.threeService.createCube({material:vn.osb,whd:[i,this.window.roughHeight,s],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom,r]});this.add(t,[c]),[o,a,c].forEach(l=>{this.animations[t].to(l.position,{z:-1,duration:.6}),this.animations[t].to(l.scale,{x:0,z:0,duration:.6}),this.animations[t].to(l,{visible:!1,duration:0})})}buildServiceBeams(){const t=Di.serviceBeams,i=this.thickness[un.serviceBeams];for(let r of[...Array(this.amountOfStuds+1).keys()]){let s=r*this.studDistance-this.joistFlangeWidth/2;0===r&&(s=0);let o=this.threeService.createCube({material:vn.osb,whd:[this.joistFlangeWidth,this.ceilingHeight,i]});this.translate(o,s,0,this.crossDepth[un.serviceBeams]-i),o=this.clip(o,this.windowRoughClip),this.add(t,[o])}this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(r=>r.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}buildServiceInsulation(){const t=Di.serviceInsulation,i=this.thickness[un.serviceBeams];for(let r of[...Array(this.amountOfStuds).keys()]){let s=this.studDistance-this.joistFlangeWidth,o=r*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===r&&(o=this.joistFlangeWidth,s-=this.joistFlangeWidth/2);let a=this.threeService.createCube({material:vn.insulation,whd:[s,this.ceilingHeight,i]});this.translate(a,o,0,this.crossDepth[un.serviceBeams]-i),a=this.clip(a,this.windowRoughClip),this.add(t,[a])}this.animations[Di.serviceBeams].to(this.subModels[t].map(r=>r.position),{y:0,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[Di.serviceBeams].to(this.subModels[t].map(r=>r.scale),{z:0,y:0,duration:.7,ease:"power3",stagger:{each:.4}},"<"),this.animations[Di.serviceBeams].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildGroundFloor(){const t=Di.groundFloor,i=this.cross.groundFloorThickness,s=this.cross.elevations[Si.groundFloor]-i,a=this.demoDepth+this.crossDepth[un.groundFloorEdge],c=Math.ceil(this.demoWith/1.2);for(let l of[...Array(c).keys()]){l=c-1-l;const u=this.threeService.createCube({material:vn.hollowCoreSlap,whd:[1.2,i,a]});this.translate(u,1.2*l,s,this.crossDepth[un.groundFloorEdge]-a),this.add(t,[u]),this.animations[t].to(u.position,{y:.5,duration:.3}),this.animations[t].to(u.scale,{z:0,duration:.3}),this.animations[t].to(u.position,{z:this.demoDepth,duration:.3},"<"),this.animations[t].to(u.scale,{y:0,duration:.1}),this.animations[t].to(u,{visible:!1,duration:0})}}buildSole(){const t=Di.sole,i=this.cross.elevations[Si.groundFloor],r=this.threeService.createCube({material:vn.pine,whd:[this.demoWith,this.solePlateThickness,this.thickness[un.joists]]});this.translate(r,0,i,this.crossDepth[un.joists]),r.material[0].color=new Dn(9083745),this.add(t,[r]),this.animations[t].to(this.subModels[t].map(s=>s.position),{y:.5,duration:.6,ease:"power3"}),this.animations[t].to(this.subModels[t].map(s=>s.material),{opacity:0,duration:.4,ease:"power3"},"-=0.6"),this.animations[t].to(this.subModels[t].map(s=>s),{visible:!1,duration:0})}buildRoofLVL(){const t=Di.roofRidge,i=this.cross.roofRidgeHight,r=this.cross.roofRidgeWidth,s=this.construction.getRoofPoint(Gt.topOutside),o=this.threeService.createCube({material:vn.pine,whd:[this.demoWith,i,r],xyz:[0,s[1]-i,-s[0]-r/2]});this.add(t,[o]),this.animations[t].to(this.subModels[t].map(a=>a.position),{y:0,duration:.6}),this.animations[t].to(this.subModels[t].map(a=>a.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(a=>a),{visible:!1,duration:0})}buildFloorLVL(){const t=Di.floorLVL,i=this.threeService.createCube({material:vn.pine,whd:[this.demoWith,this.floorThickness,this.floorLVLThickness]});this.translate(i,0,this.ceilingHeight,this.crossDepth[un.serviceBeams]-this.floorLVLThickness),this.add(t,[i]),this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-1,duration:.6}),this.animations[t].to(this.subModels[t].map(r=>r.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildGips(){const t=Di.gips,i=this.thickness[un.gips];for(let r of[...Array(this.amountOfStuds/2).keys()]){let s=this.threeService.createCube({material:vn.gips,whd:[1.2,this.ceilingHeight,i]});this.translate(s,r*this.studDistance*2,0,this.crossDepth[un.gips]-i),s=this.clip(s,this.windowRoughClip),this.add(t,[s])}this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-2,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(r=>r.material),{opacity:0,duration:.4,ease:"power3",stagger:{each:.4}},"-=0.8"),this.animations[t].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildOuterSheet(){const t=Di.outerSheet,i=this.demoWith,r=this.thickness[un.outerSheet];let s=0,o=0,a=0;const p=(g,_,y,w,C,b)=>{const M=.3+(_+y)/b*.2;this.animations[t].to(g.rotation,{x:Ci(90),duration:M});const T=1.05*w<2.4,I=1.05*C<1.2;this.animations[t].to(g.position,{x:(T?2.4:0)+w/2,y:r*s,z:.6+(I?1.2:0)+C/2,duration:M},"<"),T?a+=1:I?o+=1:s+=1};[[Gt.groundFloorInside,Gt.wallInside],[Gt.lowestOutside,Gt.bendOutside],[Gt.bendOutside,Gt.topOutside]].map((g,_)=>{let{totalWidth:y,origin:w,rotation:C}=this.getAngledProperties(g[0],g[1],r);g[0]===Gt.groundFloorInside&&(w[2]=this.crossDepth[un.outerSheet]),this.brickPattern(t,w,2.4,1.2,r,y,i,C,vn.outerSheet,0===_?p:(b,M,T,I,F,P)=>{this.scaleZInOut(t,b,.1)},0===_?this.windowRoughOSBClip:void 0)}),this.animations[t].to(this.subModels[t].flatMap(g=>g.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}buildSpace(){const t=Di.space,i=this.joistFlangeWidth,r=this.thickness[un.space]/2;for(let s of[...Array(4).keys()]){const a=this.clip(this.threeService.createCube({material:vn.osb,whd:[this.demoWith,i,r],xyz:[0,s/3*(this.outerWallHeight-i),this.crossDepth[un.space]+r]}),this.windowRoughOSBClip);this.add(t,[a])}for(let s of[...Array(this.amountOfStuds+1).keys()]){let o=s*this.studDistance-i/2;0===s&&(o=0);const a=this.clip(this.threeService.createCube({material:vn.pine,whd:[i,this.outerWallHeight,r],xyz:[o,0,this.crossDepth[un.space]]}),this.windowRoughOSBClip);this.add(t,[a])}this.add(t,[this.threeService.createCube({material:vn.osb,whd:[this.window.roughWidth+i,i,r],xyz:[0,this.window.roughBottom-i,this.crossDepth[un.space]+r]})]),this.add(t,[this.threeService.createCube({material:vn.osb,whd:[this.window.roughWidth+i,i,r],xyz:[0,this.window.roughTop+i/2,this.crossDepth[un.space]+r]})]),this.add(t,[this.threeService.createCube({material:vn.osb,whd:[i,this.window.roughHeight+2*i,r],xyz:[this.window.roughWidth,this.window.roughBottom-i,this.crossDepth[un.space]]})]),this.animations[t].to(this.subModels[t].map(s=>s.position),{z:1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(s=>s.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}buildRoofSpace(){const t=Di.roofSpace,i=this.thickness[un.space]/2,s=this.getRoofAndOffsetPoints(this.thickness[un.outerSheet]+i);[[Gt.lowestOutside,Gt.bendOutside],[Gt.bendOutside,Gt.topOutside]].map(([o,a])=>{const c=ja(s[`${o}Offset`],s[`${a}Offset`]),l=h1(s[o],s[a]),u=this.useOppositeCorner(s[`${o}Offset`],i,l),p=Math.ceil(c/.204);for(let g of[...Array(p).keys()]){const y=this.threeService.createCube({material:vn.osb,whd:[this.demoWith,this.joistFlangeWidth/2,i],xyz:[0,.204*g-this.joistFlangeWidth/2,i]});let w=(new Vi).makeRotationX(Ci(l-90));y.applyMatrix4(w.setPosition(new ge(...u))),this.add(t,[y])}for(let g of[...Array(this.amountOfStuds+1).keys()]){let _=g*this.studDistance-this.joistFlangeWidth/2;0===g&&(_=0);const y=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,c,i],xyz:[_,0,0]});let w=(new Vi).makeRotationX(Ci(l-90));y.applyMatrix4(w.setPosition(new ge(...u))),this.add(t,[y])}}),this.animations[t].to(this.subModels[t].map(o=>o.position),{z:1,duration:.7,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(o=>o.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3")}buildFacade(){const t=Di.facade,i=.3,r=.02,o=.15,a=this.threeService.createCube({material:vn.unknown,whd:[this.window.roughWidth-this.window.gap+o,this.window.roughHeight+.3,2],xyz:[0,this.window.roughBottom-o,-1]}),c=this.thickness[un.facade];let l=Math.ceil(this.demoWith/(i+r));for(let u of[...Array(l).keys()]){if(0===u)continue;const p=this.clip(this.threeService.createCube({material:vn.facade,whd:[.05,this.outerWallHeight,c],xyz:[u*(i+r)-.025-r/2,0,this.crossDepth[un.facade]+c]}),a);this.add(t,[p])}for(let u of[...Array(l).keys()]){let f=u*i+u*r;0===u&&(f=0);const p=this.clip(this.threeService.createCube({material:vn.facade,whd:[i,this.outerWallHeight,c],xyz:[f,0,this.crossDepth[un.facade]]}),this.windowRoughClip);this.add(t,[p])}this.add(t,[this.threeService.createCube({material:vn.whiteWood,whd:[this.window.roughWidth-this.window.gap,o,1.1*c],xyz:[0,this.window.roughBottom-o,this.crossDepth[un.facade]+c]})]),this.add(t,[this.threeService.createCube({material:vn.whiteWood,whd:[this.window.roughWidth-this.window.gap+.18,o,1.1*c],xyz:[0,this.window.roughTop,this.crossDepth[un.facade]+c]})]),this.add(t,[this.threeService.createCube({material:vn.whiteWood,whd:[o,this.window.roughHeight+.18,1.1*c],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom-.18,this.crossDepth[un.facade]+c]})]),this.animations[t].to(this.subModels[t].map(u=>u.position),{z:this.crossDepth[un.facade]+i/2,ease:"power3",stagger:{amount:1.2}}),this.animations[t].to(this.subModels[t].map(u=>u.rotation),{y:Ci(90),stagger:{amount:1.2}},"<+=0.3"),this.animations[t].to(this.subModels[t].map(u=>u.scale),{z:0,x:0,stagger:{amount:1.2}},"<+=0.3")}}return n.\u0275fac=function(t){return new(t||n)(G(c_),G(qo),G(gn),G(To),G(Mu),G(rS))},n.\u0275cmp=On({type:n,selectors:[["app-three-construction"]],hostBindings:function(t,i){1&t&&mn("keydown",function(s){return i.handleKeyboardEvent(s)},0,AL)},features:[zt],decls:4,vars:0,consts:[["rendererContainer",""],[1,"loader"]],template:function(t,i){1&t&&(rt(0,"div",null,0),O(2,"div",1),V(3,"Loading"),N())},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();var Ms=(()=>(function(n){n.below="below",n.above="above",n.inner="inner",n.outer="outer",n.roof="roof",n.roofAndBelow="roofAndBelow",n.inBetweenAndBelow="inBetweenAndBelow",n.roofAndAbove="roofAndAbove"}(Ms||(Ms={})),Ms))(),U4=(()=>(function(n){n.northSouth="northSouth",n.westEast="westEast"}(U4||(U4={})),U4))();let Htt=(()=>{class n extends Wse{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.modelName="House3D",this.keys=Object.values(b2),this.roofMeshes={},this.animationDuration=.1,this.windowParts={},this.windows=[],this.appService.fullscreen$.next(!0),this.preLoadWindow(),this.appService.states$.next({...this.appService.states$.value,[b2.roof]:!0,[b2.outerWall]:!0,[b2.innerWall]:!0,[b2.topFloor]:!0,[b2.groundFloor]:!0})}handleKeyboardEvent(t){"F4"===t.key&&(console.log("reset camera"),this.camera.position.set(10,10,10),this.camera.lookAt(0,0,0)),"1"===t.key&&this.focusCamera("in"),"2"===t.key&&this.focusCamera("out")}defaultCamera(){const t=this.house.houseWidth/2,r=this.house.houseLength/2;this.camera.position.set(-10,10,-10),this.controls.target.set(t,2,r)}AfterViewInitCallback(){this.threeService.basicGround(this.scene,this.house.cross.elevations[Si.ground]),this.lights(1),this.createTowerClip(),this.createRoofShape(),this.createFloors(),this.createWalls(),this.debugMeasureBlock();const t=new zk(1);t.position.set(0,0,0),this.scene.add(t)}hexagonWindows(){const r=.6*Math.tan(Ci(30)),o=this.threeService.flatShape([[0,0],[.6,-r],[1.2,0],[1.2,1],[.6,1+r],[0,1]],1.1,[vn.osb],1.1);return this.threeService.rotateAroundAxis(o,Ci(90),Eo.red),this.threeService.rotateAroundAxis(o,Ci(90),Eo.green),this.threeService.translate(o,0,1+r,1.2),o}focusCamera(t){console.log("camera to",t);var i=Vu.timeline();let s=this.center.z;["in"].includes(t)&&(s+=-10),["subGround"].includes(t)&&(s+=1),["out"].includes(t)&&(s+=10),this.pauseAll(),i.to(this.camera.position,{duration:.4,x:this.center.x-10,y:["subGround"].includes(t)?0:1.8,z:s,onUpdate:()=>{this.camera.lookAt(this.center.x,this.center.y,this.center.z)},onComplete:()=>{Vu.globalTimeline.play()}})}OnSectionChangeCallback(){console.log("OnSectionChangeCallback"),[_t.constructionFoundation,_t.constructionCrawlerSpace].includes(this.section)&&this.focusCamera("subGround")}getWindow(t){const i=new wo,r=t.height-1,s=t.width-1,a=1.4/3;return Object.keys(this.windowParts).forEach(c=>{const l=this.windowParts[c].clone();if(["leftMid","rightMid"].includes(c)&&(l.scale.set(1,(t.height-a/2)/a,1),l.translateY(t.height-(1.4+2.9*a))),["topMid","bottomMid"].includes(c)){const u=t.width;l.scale.set(u/a,1,1),l.translateX(-u/2)}["topLeft","topMid","topRight"].includes(c)&&this.threeService.translate(l,0,r,0),["topRight","rightMid","bottomRight"].includes(c)&&this.threeService.translate(l,0,0,s),i.add(l)}),this.threeService.rotateAroundAxis(i,-Ci(t.rotate),Eo.green),this.threeService.translate(i,t.x,t.y,t.z),i.userData.key="WindowFrame",i.name=t.selector,i}preLoadWindow(){const t=this.threeMaterialService.getMaterial(vn.white);this.threeService.importGLTF("window.glb",i=>{this.windowParts={},i.children.forEach(s=>{s.material=t}),[...Array(3).keys()].forEach(s=>{[...Array(3).keys()].forEach(o=>{const a=i.clone();let c;0===s&&0===o&&(c="bottomLeft"),1===s&&0===o&&(c="bottomMid"),2===s&&0===o&&(c="bottomRight"),0===s&&1===o&&(c="leftMid"),1===s&&1===o&&(c="center"),2===s&&1===o&&(c="rightMid"),0===s&&2===o&&(c="topLeft"),1===s&&2===o&&(c="topMid"),2===s&&2===o&&(c="topRight");const l=1.4/3,u=this.threeService.createCube({material:vn.unknown,whd:[l,l,l],xyz:[l*s-.2,l*o-.2,-l/3]}),f=this.intersectGroup(a,u);this.threeService.rotateAroundAxis(f,Ci(-90),Eo.green),this.windowParts[c]=f})}),this.windows.map(s=>{})})}createTowerClip(){const t=b2.tower,r=this.cross.elevations[Si.towerTop],s=this.threeService.flatShape(this.house.tower.outerCoords,r,[vn.concrete],r);this.add(t,[s]),this.scaleFromSomewhere(t,s,.1),this.towerClip=s}createRoofShape(){const t=b2.roof,i=this.cross.roofPoints,r=this.house.stramien.out.we,s=this.house.stramien.out.ns,a={},c=[i.topOutside,i.bendOutside,i.lowestOutside],l=[i.topInside,i.bendInside,i.lowestInside],u=[y5(i.topOutside,i.topInside,.8),y5(i.bendOutside,i.bendInside,.8),y5(i.lowestOutside,i.lowestInside,.8)],f=[Ae(i.topOutside,[0,3]),Ae(i.bendOutside,[-1,3]),Ae(i.lowestOutside,[0,0])],p=ja(u[0],i.topOutside),g=P=>{const R=P[0];return[...P,...P.map(k=>[2*R[0]-k[0],k[1]]).slice().reverse()].map(k=>[R[0]-k[0],R[1]-k[1]])},_={[Ms.below]:g([...l,Ae(i.lowestInside,[0,-1])]),[Ms.above]:g([...c,...f.slice().reverse()]),[Ms.outer]:g([...c,...u.slice().reverse()]),[Ms.inner]:g([...l,...u.slice().reverse()]),[Ms.roof]:g([...l,...c.slice().reverse()]),[Ms.roofAndAbove]:g([...l,...f.slice().reverse()]),[Ms.roofAndBelow]:g([...c,Ae(i.lowestOutside,[0,-1])]),[Ms.inBetweenAndBelow]:g([...u,Ae(i.lowestOutside,[0,-1])])},y=this.threeService.flatShape([Ae(this.house.centerHouse,[10,10]),Ae(this.house.centerHouse,[-10,10]),this.house.centerHouse,Ae(this.house.centerHouse,[-10,-10]),Ae(this.house.centerHouse,[10,-10]),this.house.centerHouse],10,[vn.concrete],10),w=this.threeService.flatShape([Ae(this.house.centerHouse,[10,10]),Ae(this.house.centerHouse,[10,-10]),this.house.centerHouse,Ae(this.house.centerHouse,[-10,-10]),Ae(this.house.centerHouse,[-10,10]),this.house.centerHouse],10,[vn.concrete],10);Object.values(U4).map(P=>{a[P]={},Object.values(Ms).map((R,k)=>{let W;const ie=_[R],Te=P===U4.northSouth?s.d-s.a:r.d-r.a,me=P===U4.northSouth?r.b+(r.c-r.b)/2:s.b+(s.c-s.b)/2;W=[Ms.below,Ms.inner,Ms.roof,Ms.roofAndAbove].includes(R)?this.cross.elevations[Gt.topInside]:R===Ms.inBetweenAndBelow?this.cross.elevations[Gt.topOutside]-p:this.cross.elevations[Gt.topOutside];const Q=this.threeService.flatShape(ie,0,R===Ms.outer?[vn.roof]:[vn.white],Te+1.6);this.threeService.rotateAroundAxis(Q,Ci(90),Eo.red),P===U4.westEast&&this.threeService.rotateAroundAxis(Q,Ci(90),Eo.green),this.threeService.translate(Q,P===U4.northSouth?me:Te+.8,W,P===U4.northSouth?Te+.8:me),a[P][R]=this.clip(Q,P===U4.westEast?y:w)})}),Object.values(Ms).map((P,R)=>{this.roofMeshes[P]=this.merge(a[U4.northSouth][P],a[U4.westEast][P])});let[C,b]=this.towerRoofInlay();const M=b.clone();this.threeService.translate(M,0,-.3,0);const T=this.towerRoof(),I=(P,R)=>{this.roofMeshes[P]=this.clip(this.roofMeshes[P].clone(),R.clone())};I(Ms.outer,b),I(Ms.inner,b),I(Ms.above,b),I(Ms.roofAndAbove,M),I(Ms.roofAndAbove,this.towerClip),I(Ms.above,this.towerClip),I(Ms.outer,this.towerClip),I(Ms.inner,this.towerClip),this.roofMeshes[Ms.roofAndBelow]=this.merge(this.roofMeshes[Ms.roofAndBelow],b);const F=new wo;F.add(this.roofMeshes[Ms.inner]),F.add(this.roofMeshes[Ms.outer]),F.add(C),F.add(T),this.scaleFromSomewhere(t,F,1,void 0,!0),this.add(t,[F])}towerRoof(){return this.threeService.flatShape(this.house.tower.outerCoords,this.cross.elevations[Si.towerTop]+.2,[vn.roof],.2)}splitTowerRoofInlay(t){const i=t.clone();this.threeService.translate(i,0,-.1,0);const r=this.clip(t,i);return this.threeService.translate(i,0,-.4,0),[this.clip(this.clip(t,i),r),r].map(o=>this.clip(o,this.roofMeshes[Ms.inBetweenAndBelow]))}towerRoofInlay(){const r=this.house.stramien.out,s=y5(this.house.tower.outerCoords[4],this.house.tower.outerCoords[7]),o=[r.we.c-(r.we.c-r.we.b)/2,r.ns.c-(r.ns.c-r.ns.b)/2],a=ja(s,o),c=ja(this.house.tower.outerCoords[0],this.house.tower.outerCoords[3]);let u=this.threeService.flatShape([[-c/2,-2],[-c/2,0],[0,1],[c/2,0],[c/2,-2]],0,[vn.unknown],a);this.threeService.rotateAroundAxis(u,Ci(90),Eo.blue),this.threeService.rotateAroundAxis(u,Ci(-90),Eo.red),this.threeService.rotateAroundAxis(u,Ci(45),Eo.green),this.translate(u,o[0],this.cross.elevations[Gt.topInside]-1,o[1]);const f=new wo,[p,g]=this.splitTowerRoofInlay(this.clip(u.clone(),this.towerClip));return p.material=this.threeMaterialService.getMaterial(vn.white),g.material=this.threeMaterialService.getMaterial(vn.roof),f.add(p),f.add(g),[f,u]}createAllStuds(){const t=new wo,i=this.house.stramien.in,r=this.house.construction.thickness[un.joists],s=i.ns.c-i.ns.b,o=Math.max(this.house.studAmountWest,this.house.studAmountEast,this.house.studAmountNorth,this.house.studAmountSouth);["North","South","East","West"].forEach(a=>{for(let c=0;c<o;c++){const l=this.house.studDistance*(c+1);let u=[0,0],f=[0,0],p=0;if("West"===a){if(c>this.house.studAmountWest)return;u=[i.we.b-l,i.ns.b-r],f=[u[0],u[1]+s]}if("East"===a){if(c>this.house.studAmountEast)return;u=[i.we.c+l,i.ns.b],f=[u[0],u[1]+s]}if("North"===a){if(c>this.house.studAmountNorth)return;u=[i.we.b,i.ns.b-l],f=[u[0]+s,u[1]],p=Ci(90)}if("South"===a){if(c>this.house.studAmountSouth)return;u=[i.we.b,i.ns.c+l],f=[u[0]+s,u[1]],p=Ci(90)}const g=this.createStud(),_=this.createStud();this.threeService.rotateAroundAxis(g,p,Eo.green),this.threeService.rotateAroundAxis(_,p,Eo.green),this.threeService.translate(g,u[0],0,u[1]),this.threeService.translate(_,f[0],0,f[1]),t.add(g),t.add(_)}})}createStud(t=1,i=.3,r=.012,s=.04,o=.03){const a=new wo,c=this.threeService.createCube({material:vn.pine,whd:[s,t,o],xyz:[0,0,0]});a.add(c);const l=this.threeService.createCube({material:vn.osb,whd:[r,t,i-2*o],xyz:[s/2-r/2,0,o]});a.add(l);const u=this.threeService.createCube({material:vn.pine,whd:[s,t,o],xyz:[0,0,i-o]});return a.add(u),a}createFloors(){[{floor:tt.ground,key:b2.groundFloor,z:Si.groundFloor,t:this.cross.groundFloorThickness},{floor:tt.top,key:b2.topFloor,z:Si.topFloor,t:this.cross.topFloorThickness}].forEach(i=>{const r=new wo;[!0,!1].forEach(s=>{const o=i.t*(s?.19999999999999996:.8),a=this.cross.elevations[i.z],c=s?a:a-i.t*(1-.8),l=this.house.partsFlatten.find(p=>p instanceof Uk);let u=this.threeService.flatShape(l.coords,c,s?[vn.floor]:[vn.ral9016],o);this.house.partsFlatten.filter(p=>p instanceof k1&&!0===p.hole&&[i.floor].includes(p.floor)).forEach(p=>{const g=this.threeService.flatShape(p.coords,c+1,[vn.unknown],o+2);if(u=this.clip(u,g),i.floor===tt.top&&"L1-void"===p.selector&&!s){const _=p.coords[1][0]-p.coords[0][0],y=this.threeService.flatShape([[0,0],[0,-o],[Math.tan(Ci(56))*o,0]],_,[vn.unknown],_);this.threeService.rotateAroundAxis(y,Ci(90),Eo.red),this.threeService.rotateAroundAxis(y,Ci(90),Eo.green),this.translate(y,p.coords[0][0],c-o,p.coords[0][1]),u=this.clip(u,y)}}),r.add(u)}),this.scaleFromSomewhere(i.key,r,1,void 0,i.floor===tt.top),this.add(i.key,[r])})}createWalls(){const t=this.house.partsFlatten.filter(p=>p instanceof Jn),i=this.cross.elevations[Si.groundFloor],r=this.cross.elevations[Si.topFloor],s=[],o=[],a=[],c=this.threeService.flatShape([this.house.tower.outerCoords[0],...this.house.tower.outerCoords.slice(3)],this.cross.elevations[Si.towerTop],[vn.concrete],this.cross.elevations[Si.towerTop]-this.cross.elevations[Gt.wallInside]);t.forEach(p=>{let g=p.getFootPrint();if(g.length<4)return;const _=p.type===Fn.outer,y=!0===p.tower,w=p.floor===tt.tower&&y;let C=this.cross.elevations[Si.groundFloor];_&&(C=this.cross.elevations[Si.ground]),[tt.top].includes(p.floor)&&(C=this.cross.elevations[Si.topFloor]),[tt.tower].includes(p.floor)&&(C=this.cross.elevations[Si.topFloor]),w&&(C=this.cross.elevations[Gt.wallInside]);let b=p.ceiling-C;(p.gable||[tt.top,tt.all].includes(p.floor))&&(b=this.cross.elevations[Gt.topInside]-C),(w||y)&&(b=this.cross.elevations[Si.towerTop]-C),b=Math.max(b,0);const M=([R,k,W,ie],Te,me)=>{const Q=y5(R,ie,me),he=y5(k,W,me);return Te?[R,k,he,Q]:[Q,he,W,ie]};let F,I=this.threeService.flatShape(M(g,!0,1.8),b+C,[vn.ral9016],b);if(I=this.clip(I,w?this.roofMeshes[Ms.roofAndBelow]:y?c:this.roofMeshes[Ms.roofAndAbove]),_&&(F=this.threeService.flatShape(M(g,!1,1.8),b+C,[vn.facade],b),F=this.clip(F,w?this.roofMeshes[Ms.roofAndBelow]:y?c:this.roofMeshes[Ms.roofAndAbove])),(p.parts?p.parts.filter(R=>R instanceof $a||R instanceof $o):[]).forEach(R=>{let k,W;const ie=R.height,Te=R.width,me=R.origin[0],Q=R.origin[1],he=[tt.ground,tt.all].includes(R.floor)?i:r;R instanceof $a&&(k=he+R.elevation,W=0),R instanceof $o&&(k=he,W=1===R.scale[1]?-R.width:0,R.floor===tt.ground&&.1===R.width&&console.log(R.width));let oe=this.threeService.createCube({material:vn.white,whd:[2,ie,Te],xyz:[-1,0,W]});this.threeService.rotateAroundAxis(oe,Ci(-R.rotate),Eo.green),this.threeService.translate(oe,me,k,Q),I=this.clip(I,oe),F&&(F=this.clip(F,oe)),R instanceof $o&&a.push(this.createDoor(R,me,k,Q,W)),R instanceof $a&&this.windows.push({height:R.height,width:R.width,x:me,y:k,z:Q,rotate:R.rotate,selector:R.selector})}),I.userData={floor:p.floor},_||w){const R=this.group([I,F]);R.userData={floor:p.floor},R.name=p.selector,o.push(R)}else{const R=this.group([I,F]);R.name=p.selector,s.push(R)}});const l=this.createPilasters(),u=this.group([...o,...l,...a]);this.scaleFromSomewhere(b2.outerWall,u),this.add(b2.outerWall,[u]);const f=this.group(s);this.scaleFromSomewhere(b2.innerWall,f),this.add(b2.innerWall,[f])}createDoor(t,i,r,s,o){if(!t.outside)return;const a=this.threeService.createCube({material:vn.ral9016,whd:[t.width,t.height,.1],xyz:[-1===t.scale[1]?-t.width:0,0,0]});return this.threeService.rotateAroundAxis(a,Ci(90-t.rotate),Eo.green),this.translate(a,i,r,s),a}createWindowPlane(t,i,r,s){let o=[];if("L0-outer-SouthWall-2-Window-14"===t.selector){const c=this.cross.roofPoints,u=c[Gt.wallInside][0],f=t.elevation,p=c[Gt.bendInside];o=[[0,0],Ae(c[Gt.wallInside],[-u,-f]),Ae(p,[-u,-f]),Ae(c[Gt.topInside],[-u,-f]),[this.house.outerBase-p[0]-u,p[1]+-f],[t.width,c[Gt.wallInside][1]+-f],[t.width,0]]}else o=[[0,0],[0,t.height],[t.width,t.height],[t.width,0]];const a=this.threeService.createPane({material:vn.window,coords:o,xyz:[0,0,-.2]});return this.threeService.rotateAroundAxis(a,Ci(-(t.rotate+90)),Eo.green),this.translate(a,i,r,s),a}createPilasters(){const t=this.house.stramien.out,s=.04,o=[];return[[t.we.b,t.ns.a,0],[t.we.c,t.ns.a,-90],[t.we.d,t.ns.b,-90],[t.we.d,t.ns.c,180],[t.we.c,t.ns.d,180],[t.we.b,t.ns.d,90],[t.we.a,t.ns.c,90],[t.we.a,t.ns.b,0]].forEach(([a,c,l])=>{let u=this.threeService.createCube({material:vn.white,whd:[s,7,.2+s],xyz:[-s,this.cross.elevations[Si.ground],-s]}),f=this.threeService.createCube({material:vn.unknown,whd:[.2,7,s],xyz:[0,this.cross.elevations[Si.ground],-s]}),p=this.merge(u,f);this.threeService.rotateAroundAxis(p,Ci(l),Eo.green),this.translate(p,a,0,c),p=this.clip(p,this.roofMeshes[Ms.roofAndAbove]),o.push(p)}),o}}return n.\u0275fac=function(t){return new(t||n)(G(c_),G(qo),G(gn),G(To),G(Mu),G(rS))},n.\u0275cmp=On({type:n,selectors:[["app-three-house"]],hostBindings:function(t,i){1&t&&mn("keydown",function(s){return i.handleKeyboardEvent(s)},0,AL)},features:[zt],decls:4,vars:0,consts:[["rendererContainer",""],[1,"loader"]],template:function(t,i){1&t&&(rt(0,"div",null,0),O(2,"div",1),V(3,"Loading"),N())},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();const jse={leading:!0,trailing:!1};let l_=(()=>{class n{constructor(t,i,r,s){this.houseService=t,this.appService=i,this.cookieService=r,this.httpClient=s}loadSVG(t,i,r){const s=new Ntt(i,r);return s.get(this.httpClient,t),s}}return n.\u0275fac=function(t){return new(t||n)(Xe(qo),Xe(To),Xe(Mu),Xe(vd))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ntt{constructor(e,t){this.selector=e,this.callback=t}get(e,t){e.get(t,{responseType:"text"}).pipe(Tl(1)).subscribe(i=>{Ws(this.selector).html(i.replace(/height="\d+px"/gi,'height="0px"').replace(/width="\d+px"/gi,'width="0px"')),this.update()})}update(){this.callback(this.selector)}}let P5=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.distanceSubscriptions=[],this.isDistance=!1,this.distanceMouseFirst="first",this.coords=[]}stop(){this.distanceSubscriptions.forEach(t=>t.unsubscribe()),this.distanceSVG.visible=!1,this.isDistance=!1,this.distanceSubscriptions=[],this.appService.update$.next()}click(t){"first"===this.distanceMouseFirst?this.distanceMouseFirst="second":"second"===this.distanceMouseFirst?this.distanceMouseFirst="fixed":"fixed"===this.distanceMouseFirst&&(this.distanceMouseFirst="first"),this.appService.update$.next()}mousemove(t){const[i,r]=Td(t);console.log(this.distanceSVG.visible);let s=[An(i),An(r)],o=.2;try{const c=t.composedPath().find(u=>"svg"===u.tagName);o=10*Number(c.getAttribute("meterPerPixel"))}catch(c){console.log(c)}const a=this.coords.filter(c=>c).map(c=>({coords:c,d:ja(s,c)})).filter(c=>c.d<=o).sort((c,l)=>c.d-l.d).map(c=>c.coords);a.length>0&&(s=a[0]),["first"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point1=s,this.distanceSVG.point2=void 0),["second"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point2=s),this.appService.update$.next()}getParts(t){this.distanceSVG=t.find(i=>i instanceof Nk),this.coords=[],t.forEach(i=>{i instanceof l3&&this.coords.push(...i.coords),i instanceof Ga&&this.coords.push(...i.coords)})}start(){if(this.distanceSubscriptions.length>0)return void this.stop();const t=this.appService.scroll$.value.graphic,r=document.querySelector(`svg.${t}`).querySelector("g");t===_o.cross&&this.getParts(this.houseService.house$.value.cross.parts),t===_o.house2D&&this.getParts(this.houseService.house$.value.parts),t===_o.stairCross&&this.getParts(this.houseService.house$.value.stair.cross.parts),t===_o.stairPlan&&this.getParts(this.houseService.house$.value.stair.parts),this.distanceSVG.clear(),this.distanceMouseFirst="first",this.isDistance=!0,this.distanceSVG.visible=!0,console.log(this.distanceSVG.visible),this.distanceSubscriptions.push(ic(r,"mousemove").subscribe(s=>{this.mousemove(s)}),ic(r,"click").subscribe(s=>{this.click(s)}),ic(document,"keydown").subscribe(s=>{this.stop()})),console.log(this.distanceSVG)}}return n.\u0275fac=function(t){return new(t||n)(Xe(qo),Xe(To))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vtt=(()=>{class n{constructor(t,i,r){this.appService=t,this.d3Service=i,this.contextMenuService=r}ngOnInit(){}measure(){this.d3Service.start(),this.contextMenuService.closeMenu()}whatIsHere(){this.contextMenuService.closeMenu();const[t,i]=this.xy,r=new MouseEvent("click",{clientX:t,clientY:i,bubbles:!0});document.elementFromPoint(t,i).dispatchEvent(r)}}return n.\u0275fac=function(t){return new(t||n)(G(To),G(P5),G(Qg))},n.\u0275cmp=On({type:n,selectors:[["context-menu"]],decls:13,vars:0,consts:[["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","8px"]],template:function(t,i){1&t&&(O(0,"mat-action-list",0)(1,"button",1),mn("click",function(){return i.whatIsHere()}),O(2,"span",2)(3,"mat-icon"),V(4,"question_mark"),N(),O(5,"div"),V(6,"What is here?"),N()()(),O(7,"button",1),mn("click",function(){return i.measure()}),O(8,"span",2)(9,"mat-icon"),V(10,"square_foot"),N(),O(11,"div"),V(12,"Start measure"),N()()()())},dependencies:[D8,dX,mX,Cd,F8,xd,sx],styles:["[_nghost-%COMP%]{background:var(--color-0);padding:4px;border:1px solid;border-color:var(--color-80);border-radius:4px;box-shadow:2px 2px 0 2px #0006}.mat-list-base[_ngcontent-%COMP%]{padding:0}"]}),n})(),Qg=(()=>{class n{constructor(t,i){this.overlay=t,this.d3Service=i,this.isOpen=!1}click(t){this.clientXY=[t.clientX,t.clientY],this.closeMenu(),this.d3Service.isDistance?this.d3Service.stop():this.createMenu()}createMenu(){this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy()});const t=new qA(Vtt);this.overlayRef.addPanelClass("example-overlay"),this.overlayRef.attach(t).instance.xy=this.clientXY,this.isOpen=!0}closeMenu(){!this.overlayRef||(this.overlayRef.detach(),this.isOpen=!1)}positionStrategy(){return this.overlay.position().global().left(this.clientXY[0]+"px").top(this.clientXY[1]+"px")}}return n.\u0275fac=function(t){return new(t||n)(Xe(z3),Xe(P5))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Utt=["svg"];let hS=(()=>{class n{constructor(t,i,r,s,o,a,c){this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.stringCache="",this.showingImage=!1,this.printPreview=!1,this.isChild=!1,this.marginInMeters=[0,0,0,0],this.marginInPixels=[0,0,0,0],this.house$=this.houseService.house$,this.sections=Object.values(_t),this.tags=Object.values(O3),this.resize$=new go(void 0),this.subscriptions=[],this.svgHouseSize=[[0,0],[200,100]],this.loaded=!1}onClick(t){if(this.contextMenuService.closeMenu(),this.d3DistanceService.isDistance)return;const i=a=>{if(a&&a!==this.svgEl.nativeElement)return"id"in a&&`${a.id}`.length>0?a.id:i(a.parentNode)},r=i(t.target),s=()=>{this.tooltipService.detachOverlay(),document.body.classList.remove("selection-active"),document.querySelectorAll("svg .selected").forEach((a,c)=>{a.classList.remove("selected")})};if(!r)return s();const o=this.house.partsFlatten.find(a=>a.selector===r);if(!o)return console.log(`Couldnt find [${r}] in `,t.target,"probably its only a part of its full ID"),s();document.body.classList.add("selection-active"),o.select(),this.tooltipService.attachPopup([t.pageX,t.pageY],o),console.log(o)}preventContextMenu(t){return this.contextMenuService.click(t),!1}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer&&this.observer.unobserve(this.host.nativeElement),console.log("destroy",this.graphic),this.houseService.destroyParts()}svgUpdateMarginAndSize(){}setUp(){this.svg=Ws(this.svgEl.nativeElement),this.g=this.svg.select("g"),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.resize$.pipe(E0(t=>vi(void 0))),this.subscriptions.push(al(this.appService.fullscreen$.pipe(Ca(t=>{t?this.svg.call(function wke(){var u,f,p,n=mke,e=Ake,t=yke,i=vke,r=_ke,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=dke,l=VZ("start","zoom","end"),g=500,y=0,w=10;function C(Q){Q.property("__zoom",MJ).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",W).filter(r).on("touchstart.zoom",ie).on("touchmove.zoom",Te).on("touchend.zoom touchcancel.zoom",me).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(Q,he){return(he=Math.max(s[0],Math.min(s[1],he)))===Q.k?Q:new R0(he,Q.x,Q.y)}function M(Q,he,K){var oe=he[0]-K[0]*Q.k,fe=he[1]-K[1]*Q.k;return oe===Q.x&&fe===Q.y?Q:new R0(Q.k,oe,fe)}function T(Q){return[(+Q[0][0]+ +Q[1][0])/2,(+Q[0][1]+ +Q[1][1])/2]}function I(Q,he,K,oe){Q.on("start.zoom",function(){F(this,arguments).event(oe).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(oe).end()}).tween("zoom",function(){var fe=this,de=arguments,Re=F(fe,de).event(oe),Ze=e.apply(fe,de),Be=null==K?T(Ze):"function"==typeof K?K.apply(fe,de):K,wt=Math.max(Ze[1][0]-Ze[0][0],Ze[1][1]-Ze[0][1]),ut=fe.__zoom,It="function"==typeof he?he.apply(fe,de):he,bt=c(ut.invert(Be).concat(wt/ut.k),It.invert(Be).concat(wt/It.k));return function(Xt){if(1===Xt)Xt=It;else{var sn=bt(Xt),Sn=wt/sn[2];Xt=new R0(Sn,Be[0]-sn[0]*Sn,Be[1]-sn[1]*Sn)}Re.zoom(null,Xt)}})}function F(Q,he,K){return!K&&Q.__zooming||new P(Q,he)}function P(Q,he){this.that=Q,this.args=he,this.active=0,this.sourceEvent=null,this.extent=e.apply(Q,he),this.taps=0}function R(Q,...he){if(n.apply(this,arguments)){var K=F(this,he).event(Q),oe=this.__zoom,fe=Math.max(s[0],Math.min(s[1],oe.k*Math.pow(2,i.apply(this,arguments)))),de=Td(Q);if(K.wheel)(K.mouse[0][0]!==de[0]||K.mouse[0][1]!==de[1])&&(K.mouse[1]=oe.invert(K.mouse[0]=de)),clearTimeout(K.wheel);else{if(oe.k===fe)return;K.mouse=[de,oe.invert(de)],Zx(this),K.start()}X9(Q),K.wheel=setTimeout(Re,150),K.zoom("mouse",t(M(b(oe,fe),K.mouse[0],K.mouse[1]),K.extent,o))}function Re(){K.wheel=null,K.end()}}function k(Q,...he){if(!p&&n.apply(this,arguments)){var K=Q.currentTarget,oe=F(this,he,!0).event(Q),fe=Ws(Q.view).on("mousemove.zoom",Be,!0).on("mouseup.zoom",wt,!0),de=Td(Q,K),Re=Q.clientX,Ze=Q.clientY;cke(Q.view),sF(Q),oe.mouse=[de,this.__zoom.invert(de)],Zx(this),oe.start()}function Be(ut){if(X9(ut),!oe.moved){var It=ut.clientX-Re,bt=ut.clientY-Ze;oe.moved=It*It+bt*bt>y}oe.event(ut).zoom("mouse",t(M(oe.that.__zoom,oe.mouse[0]=Td(ut,K),oe.mouse[1]),oe.extent,o))}function wt(ut){fe.on("mousemove.zoom mouseup.zoom",null),lke(ut.view,oe.moved),X9(ut),oe.event(ut).end()}}function W(Q,...he){if(n.apply(this,arguments)){var K=this.__zoom,oe=Td(Q.changedTouches?Q.changedTouches[0]:Q,this),fe=K.invert(oe),Re=t(M(b(K,K.k*(Q.shiftKey?.5:2)),oe,fe),e.apply(this,he),o);X9(Q),a>0?Ws(this).transition().duration(a).call(I,Re,oe,Q):Ws(this).call(C.transform,Re,oe,Q)}}function ie(Q,...he){if(n.apply(this,arguments)){var de,Re,Ze,Be,K=Q.touches,oe=K.length,fe=F(this,he,Q.changedTouches.length===oe).event(Q);for(sF(Q),Re=0;Re<oe;++Re)Be=[Be=Td(Ze=K[Re],this),this.__zoom.invert(Be),Ze.identifier],fe.touch0?!fe.touch1&&fe.touch0[2]!==Be[2]&&(fe.touch1=Be,fe.taps=0):(fe.touch0=Be,de=!0,fe.taps=1+!!u);u&&(u=clearTimeout(u)),de&&(fe.taps<2&&(f=Be[0],u=setTimeout(function(){u=null},g)),Zx(this),fe.start())}}function Te(Q,...he){if(this.__zooming){var de,Re,Ze,Be,K=F(this,he).event(Q),oe=Q.changedTouches,fe=oe.length;for(X9(Q),de=0;de<fe;++de)Ze=Td(Re=oe[de],this),K.touch0&&K.touch0[2]===Re.identifier?K.touch0[0]=Ze:K.touch1&&K.touch1[2]===Re.identifier&&(K.touch1[0]=Ze);if(Re=K.that.__zoom,K.touch1){var wt=K.touch0[0],ut=K.touch0[1],It=K.touch1[0],bt=K.touch1[1],Xt=(Xt=It[0]-wt[0])*Xt+(Xt=It[1]-wt[1])*Xt,sn=(sn=bt[0]-ut[0])*sn+(sn=bt[1]-ut[1])*sn;Re=b(Re,Math.sqrt(Xt/sn)),Ze=[(wt[0]+It[0])/2,(wt[1]+It[1])/2],Be=[(ut[0]+bt[0])/2,(ut[1]+bt[1])/2]}else{if(!K.touch0)return;Ze=K.touch0[0],Be=K.touch0[1]}K.zoom("touch",t(M(Re,Ze,Be),K.extent,o))}}function me(Q,...he){if(this.__zooming){var de,Re,K=F(this,he).event(Q),oe=Q.changedTouches,fe=oe.length;for(sF(Q),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),de=0;de<fe;++de)Re=oe[de],K.touch0&&K.touch0[2]===Re.identifier?delete K.touch0:K.touch1&&K.touch1[2]===Re.identifier&&delete K.touch1;if(K.touch1&&!K.touch0&&(K.touch0=K.touch1,delete K.touch1),K.touch0)K.touch0[1]=this.__zoom.invert(K.touch0[0]);else if(K.end(),2===K.taps&&(Re=Td(Re,this),Math.hypot(f[0]-Re[0],f[1]-Re[1])<w)){var Ze=Ws(this).on("dblclick.zoom");Ze&&Ze.apply(this,arguments)}}}return C.transform=function(Q,he,K,oe){var fe=Q.selection?Q.selection():Q;fe.property("__zoom",MJ),Q!==fe?I(Q,he,K,oe):fe.interrupt().each(function(){F(this,arguments).event(oe).start().zoom(null,"function"==typeof he?he.apply(this,arguments):he).end()})},C.scaleBy=function(Q,he,K,oe){C.scaleTo(Q,function(){return this.__zoom.k*("function"==typeof he?he.apply(this,arguments):he)},K,oe)},C.scaleTo=function(Q,he,K,oe){C.transform(Q,function(){var fe=e.apply(this,arguments),de=this.__zoom,Re=null==K?T(fe):"function"==typeof K?K.apply(this,arguments):K,Ze=de.invert(Re),Be="function"==typeof he?he.apply(this,arguments):he;return t(M(b(de,Be),Re,Ze),fe,o)},K,oe)},C.translateBy=function(Q,he,K,oe){C.transform(Q,function(){return t(this.__zoom.translate("function"==typeof he?he.apply(this,arguments):he,"function"==typeof K?K.apply(this,arguments):K),e.apply(this,arguments),o)},null,oe)},C.translateTo=function(Q,he,K,oe,fe){C.transform(Q,function(){var de=e.apply(this,arguments),Re=this.__zoom,Ze=null==oe?T(de):"function"==typeof oe?oe.apply(this,arguments):oe;return t(rF.translate(Ze[0],Ze[1]).scale(Re.k).translate("function"==typeof he?-he.apply(this,arguments):-he,"function"==typeof K?-K.apply(this,arguments):-K),de,o)},oe,fe)},P.prototype={event:function(Q){return Q&&(this.sourceEvent=Q),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Q,he){return this.mouse&&"mouse"!==Q&&(this.mouse[1]=he.invert(this.mouse[0])),this.touch0&&"touch"!==Q&&(this.touch0[1]=he.invert(this.touch0[0])),this.touch1&&"touch"!==Q&&(this.touch1[1]=he.invert(this.touch1[0])),this.that.__zoom=he,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Q){var he=Ws(this.that).datum();l.call(Q,this.that,new pke(Q,{sourceEvent:this.sourceEvent,target:C,type:Q,transform:this.that.__zoom,dispatch:l}),he)}},C.wheelDelta=function(Q){return arguments.length?(i="function"==typeof Q?Q:ab(+Q),C):i},C.filter=function(Q){return arguments.length?(n="function"==typeof Q?Q:ab(!!Q),C):n},C.touchable=function(Q){return arguments.length?(r="function"==typeof Q?Q:ab(!!Q),C):r},C.extent=function(Q){return arguments.length?(e="function"==typeof Q?Q:ab([[+Q[0][0],+Q[0][1]],[+Q[1][0],+Q[1][1]]]),C):e},C.scaleExtent=function(Q){return arguments.length?(s[0]=+Q[0],s[1]=+Q[1],C):[s[0],s[1]]},C.translateExtent=function(Q){return arguments.length?(o[0][0]=+Q[0][0],o[1][0]=+Q[1][0],o[0][1]=+Q[0][1],o[1][1]=+Q[1][1],C):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},C.constrain=function(Q){return arguments.length?(t=Q,C):t},C.duration=function(Q){return arguments.length?(a=+Q,C):a},C.interpolate=function(Q){return arguments.length?(c=Q,C):c},C.on=function(){var Q=l.on.apply(l,arguments);return Q===l?C:Q},C.clickDistance=function(Q){return arguments.length?(y=(Q=+Q)*Q,C):Math.sqrt(y)},C.tapDistance=function(Q){return arguments.length?(w=+Q,C):w},C}().on("zoom",i=>{this.setTransform(i.transform,0)})):(this.svg.on(".zoom",null),this.setTransform())})),this.appService.scroll$.pipe(Ca(t=>{this.section=this.appService.scroll$.value.section}))).subscribe(t=>{}),al(this.appService.update$,this.house$).pipe(Ca(t=>{const i=this.house$.value;this.house=i,this.cross=i.cross,this.stair=i.stair,console.log(111,this.stair.totalRise)})).subscribe(t=>{console.log("2"),this.updateSVG(!0)}),al(this.appService.states$,this.appService.svgTransform$.pipe(Ca(t=>{if(!this.loaded&&this.graphic in t){const i=t[this.graphic];this.setTransform(new R0(i.k,i.x,i.y))}})),this.resize$.pipe(jo(t=>!this.showingImage),function Ott(n,e=rC,t=jse){const i=kj(n,e);return function ztt(n,e=jse){return Mn((t,i)=>{const{leading:r,trailing:s}=e;let o=!1,a=null,c=null,l=!1;const u=()=>{c?.unsubscribe(),c=null,s&&(g(),l&&i.complete())},f=()=>{c=null,l&&i.complete()},p=_=>c=lo(n(_)).subscribe(yn(i,u,f)),g=()=>{if(o){o=!1;const _=a;a=null,i.next(_),!l&&p(_)}};t.subscribe(yn(i,_=>{o=!0,a=_,(!c||c.closed)&&(r?g():p(_))},()=>{l=!0,(!(s&&o&&c)||c.closed)&&i.complete()}))})}(()=>i,t)}(10))).pipe(jo(t=>void 0!==this.house),Eh()).subscribe(t=>{this.updateSVG()})),this.loaded=!0}setTransform(t="translate(0,0) scale(1)",i=1e4){this.printPreview||(this.loaded&&this.appService.setTransformCookie(t,this.graphic),this.g.attr("transform",t))}updateSVG(t=!1){this.tooltipService.updateOverlay(),this.svgUpdateMarginAndSize();const[[i,r],[s,o]]=this.svgHouseSize,a=-this.marginInMeters[3]+i,c=-this.marginInMeters[0]+r,l=s+this.marginInMeters[3]+this.marginInMeters[1],u=o+this.marginInMeters[0]+this.marginInMeters[2],f="translate(0,0) scale(1)"===this.g.attr("transform"),p=this.showingImage||f?window.outerWidth/2:this.svgEl.nativeElement.clientWidth,g=this.showingImage||f?window.outerHeight/2:this.svgEl.nativeElement.clientHeight,_=Math.abs(An(p,0)-this.marginInPixels[1]-this.marginInPixels[3]),y=Math.abs(An(g,0)-this.marginInPixels[0]-this.marginInPixels[2]),w=An(l/_),C=An(u/y),b=Math.max(w,C)/this.getScale(),M=this.meterPerPixel!==b;this.meterPerPixel=b,this.svgEl.nativeElement.setAttribute("meterPerPixel",`${b}`);const T=this.marginInPixels.map(P=>An(P*this.meterPerPixel));if(!this.isChild)if(this.printPreview){const P=[21,29.7];this.svg.attr("viewBox",`-2 -2 ${P[1]} ${P[0]}`)}else this.svg.transition().duration(1e3).attr("viewBox",`\n          ${-T[3]+a} \n          ${-T[0]+c} \n          ${Math.abs(l+(T[3]+T[1]))} \n          ${Math.abs(u+(T[0]+T[2]))}`);const I=[this.appService.floor$.value,this.appService.scroll$.value.section,Object.entries(this.appService.states$.value).filter(([P,R])=>!0===R).map(([P,R])=>P),this.graphic].join("-"),F=this.stringCache!==I||""===this.stringCache;this.stringCache=I,(!1!==t||F||M)&&(this.svgSpecificUpdate(),this.house.redrawHouse({floor:this.appService.floor$.value,graphic:this.graphic,redrawAll:F||t,meterPerPixel:this.meterPerPixel,theme:void 0,print:this.printPreview}))}svgSpecificUpdate(){}getScale(){const t=/scale\(\d+\.?\d*/g.exec(this.g.attr("transform"));return t?Number(t[0].replace("scale(","").replace(")","")):1}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(To),G(bg),G(gn),G(l_),G(P5),G(Qg))},n.\u0275cmp=On({type:n,selectors:[["app-svg-base"]],viewQuery:function(t,i){if(1&t&&Wo(Utt,5),2&t){let r;ir(r=rr())&&(i.svgEl=r.first)}},hostVars:4,hostBindings:function(t,i){1&t&&mn("click",function(s){return i.onClick(s)})("contextmenu",function(s){return i.preventContextMenu(s)}),2&t&&Gi("imaged",i.showingImage)("print-preview",i.printPreview)},inputs:{isChild:"isChild"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();var Gtt=Me(4159),Qtt=Me.n(Gtt);let Wtt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i}print(t){console.log("Printing the SVG"),this.prepareToPrint(t)}prepareToPrint(t){t.printPreview=!0,this.appService.floor$.next(tt.ground),this.appService.states$.next({...this.appService.states$.value,measure:!0,doors:!0,towerFootprint:!1,stramien:!1,examplePlan:!0,theoreticalWalls:!1,grid:!1}),this.appService.setDarkMode(!1,!1),t.updateSVG(!0),t.setTransform("translate(0,0) scale(1)")}saveToCavnas(t,i){const r=t.getBoundingClientRect().width,s=t.getBoundingClientRect().height;Qtt()(t.parentElement,{width:r,height:s}).then(function(o){o.style.position="absolute",o.style.top="30px",o.style.left="30px",o.style.zIndex="9999",o.style.border="12px solid darkcyan",console.log(o),console.log(r,s),i(o)})}openNewTap(t){var i=new Image;i.src=t.toDataURL("image/png",1),window.open("").document.write(i.outerHTML)}}return n.\u0275fac=function(t){return new(t||n)(Xe(qo),Xe(To))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jtt=["render"];function $tt(n,e){1&n&&(Uo(),rt(0,"g",88)),2&n&&ws("id","icon-",e.$implicit,"")}function qtt(n,e){1&n&&(Uo(),rt(0,"polyline",89)),2&n&&ws("id","grid-index-",e.index,"")}function Ktt(n,e){1&n&&(Uo(),rt(0,"polyline",90)),2&n&&ws("id","grid-index-",e.index,"")}function Xtt(n,e){1&n&&(Uo(),rt(0,"g",88)),2&n&&Ve("id",e.$implicit)}function Ytt(n,e){1&n&&(Uo(),O(0,"g",88),rt(1,"polyline",91)(2,"polyline",92)(3,"polygon",93)(4,"circle",94),N()),2&n&&Ve("id",e.$implicit)}function Ztt(n,e){1&n&&(Uo(),O(0,"g",88),rt(1,"polygon",95)(2,"path",96),N()),2&n&&Ve("id",e.$implicit)}function Jtt(n,e){1&n&&(Uo(),O(0,"g",88),rt(1,"polygon",97)(2,"path",98),N()),2&n&&Ve("id",e.$implicit)}function ent(n,e){1&n&&(Uo(),rt(0,"polyline",99)),2&n&&gu("id",e.$implicit)}function tnt(n,e){if(1&n&&(Uo(),O(0,"g",100),rt(1,"use",101),N()),2&n){const t=e.$implicit;gu("id",t),ae(1),gu("id",t)}}function nnt(n,e){1&n&&(Uo(),rt(0,"g",102)),2&n&&gu("id",e.$implicit)}const $se=function(){return[]};let int=(()=>{class n extends hS{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.printService=l,this.marginInMeters=[0,0,0,0],this.marginInPixels=[72,64,64,8],this.gridSizeX$=new go(100),this.gridSizeY$=new go(100),this.roomKeys=this.houseService.roomKeys,this.doorKeys=this.houseService.doorKeys,this.wallKeys=this.houseService.wallKeys,this.windowKeys=this.houseService.windowKeys,this.sensorKeys=this.houseService.sensorKeys,this.exampleKeys=this.houseService.exampleKeys,this.SensorTypes=Object.values(Ge),this.graphic=_o.house2D,this.transformOrigin=[0,0],this.svgLoaders=[]}handleKeyboardEvent(t){var i=this;return ba(function*(){t.ctrlKey&&"z"===t.key&&(console.clear(),t.preventDefault(),i.printService.print(i))})()}svgSpecificUpdate(){!0!==this.appService.fullscreen$.value&&(this.appService.scroll$.value.section===_t.welcome?(this.g.attr("transform","transform: scale(0.4) translateX(40%)"),this.showingImage=!0):(this.showingImage=!1,this.g.attr("transform","")))}addLayout(t="2023-01-01"){const r=this.g.append("g").attr("class","print-layout");r.attr("transform","translate(-2,-2) scale(1)");const s=[21,29.7],o=s[1]-2,a=s[0]-2,u=w5(10,0,!0),f=w5(12,0,!0),p=w5(18,0,!0),g="black";r.append("rect").attr("x",0).attr("y",0).attr("width",s[1]).attr("height",s[0]).attr("fill","none").attr("stroke",g).attr("stroke-width",1*this.meterPerPixel),r.append("rect").attr("x",1).attr("y",1).attr("width",o).attr("height",a).attr("fill","none").attr("stroke",g).attr("stroke-width",2*this.meterPerPixel);const y=2.8;(()=>{const M=r.append("g").attr("transform",`translate(${1+o-1}, ${1+a-y-1.2})`);[...Array(5).keys()].forEach((I,F)=>{M.append("line").attr("x1",-F).attr("y1",0).attr("x2",-F).attr("y2",-.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("text").attr("fill",g).attr("font-size",.7*u).attr("x",-F).attr("y",.3).attr("text-anchor","middle").attr("font-family","sans-serif").text(4-F)}),M.append("line").attr("x1",0).attr("y1",0).attr("x2",-4).attr("y2",0).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("text").attr("fill",g).attr("font-size",.8*u).attr("x",-4).attr("y",-.3).attr("text-anchor","left").attr("font-family","sans-serif").text("Meter")})(),(()=>{const I=1+o-9,F=1+a-y;r.append("rect").attr("fill","white").attr("stroke",g).attr("stroke-width",2*this.meterPerPixel).attr("x",I).attr("y",F).attr("width",9).attr("height",y),r.append("line").attr("x1",I+.2).attr("y1",1+a-.4-.2).attr("x2",1+o-.2).attr("y2",1+a-.4-.2).attr("stroke",g).attr("stroke-width",1*this.meterPerPixel);const P=r.append("text").attr("fill",g).attr("font-size",u).attr("font-family","sans-serif");P.clone().attr("x",1+o-.2).attr("y",F-.1).attr("font-size",f).attr("text-anchor","end").text("F\xf6rhandsbesked"),P.clone().attr("x",1+o-.2).attr("y",F+.2*3).attr("font-size",p).attr("text-anchor","end").attr("font-weight","bold").text(`Passive House ${this.house.name}`),P.clone().attr("x",I+9-.2).attr("y",F+.2*6).attr("font-size",f).attr("text-anchor","end").text("Floor plan Top floor"),P.clone().attr("x",I+9-.2).attr("y",1+a-.4-.4).attr("text-anchor","end").text("Scale 1:100"),P.clone().attr("x",I+4.5+.2).attr("y",1+a-.4-.4).attr("text-anchor","middle").text(`REV: ${(new Date).toISOString().slice(0,10)}`),P.clone().attr("x",I+.2).attr("y",1+a-.4-.4).attr("font-size",f).attr("text-anchor","start").text("Drawing A1"),P.clone().attr("x",I+.2).attr("y",1+a-.2).attr("text-anchor","start").text(t),P.clone().attr("x",1+o-.2).attr("y",1+a-.2).attr("text-anchor","end").text("Drawn by: GeoDev AB")})(),(()=>{const M=r.append("g").attr("transform",`translate(${1+o-.5}, ${1+a-y-1.2})`);M.append("text").attr("fill",g).attr("font-size",u).attr("x",0).attr("y",0).attr("text-anchor","middle").attr("font-family","sans-serif").text("N"),M.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",.5).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("line").attr("x1",0).attr("y1",0).attr("x2",.1).attr("y2",.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("line").attr("x1",0).attr("y1",0).attr("x2",-.1).attr("y2",.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel)})()}ngAfterViewInit(){this.svgLoaders.push(this.d3Service.loadSVG("assets/models/sun.svg",".g-sun",t=>{const i=this.house$.value,r=40*this.meterPerPixel;Ws(t).selectChild("svg").attr("height",r+"px").attr("width",r+"px").attr("x",i.houseWidth/2+"px").attr("y",i.houseLength+1*i.studDistance+"px")}));for(let t of Object.values(Ge))this.svgLoaders.push(this.d3Service.loadSVG(`assets/svg/${t}.svg`,`#icon-${t}`,i=>{const s=20*this.meterPerPixel;Ws(i).selectChild("svg").attr("x",-s/2+"px").attr("y",-s/2+"px").attr("height",s+"px").attr("width",s+"px")}));this.setUp(),this.setStairs(),this.renderImg=this.svg.select(".render-img").attr("xlink:href","/assets/img/top_render.jpg"),this.scaleRenderImage(),Ws("svg")}svgUpdateMarginAndSize(){this.gridSizeX$.next(this.house.gridSizeX),this.gridSizeY$.next(this.house.gridSizeY);const t=3*this.house.studDistance;this.marginInMeters=[t,t,t,t],this.svgHouseSize=[[0,0],[this.house.houseWidth,this.house.houseLength]],this.scaleRenderImage(),this.scaleStairs(),this.svgLoaders.forEach(i=>i.update())}setStairs(){const t=document.querySelector(".svg-plan-stair-plan").firstChild;this.svg.select(".plan-stair-plan").select(".plan-stair-plan").node().replaceWith(t),t.classList.add("plan-stair-plan")}scaleStairs(){this.svg.select(".plan-stair-plan").attr("transform-origin",`${this.stair.stairOrigin[0]+this.stair.totalWidth/2} ${this.house.stair.stairOrigin[1]+this.stair.totalHeight/2}`)}scaleRenderImage(){const t=this.house.stramien.out,i=[582,240],c=An(this.house.houseWidth/this.meterPerPixel),l=An(this.house.houseLength/this.meterPerPixel),u=[0,0],f=An(549/c,5),p=An(481/l,5),g=Math.max(p,f);if(!this.renderImg)return;const y=M=>[An(M[0]/this.meterPerPixel,4),An(M[1]/this.meterPerPixel,4)],C=[Zs(45,100,[t.we.d,t.ns.c]),[t.we.d,t.ns.c],[t.we.b+(t.we.c-t.we.b)/2,t.ns.b+(t.ns.c-t.ns.b)/2],[t.we.b,t.ns.b],Zs(200,100,[t.we.b,t.ns.b])],b=(M=>[u[0]-An(M[0]*this.meterPerPixel/g),u[1]-An(M[1]*this.meterPerPixel/g)])(i);this.renderImg.attr("x",b[0]).attr("y",b[1]).attr("width",1920*this.meterPerPixel/g).attr("height",1080*this.meterPerPixel/g).attr("clip-path",`polygon(\n0% 0%,\n100% 0%,\n100% 100%,\n${C.map(M=>(M=>{const T=y(M);return[(T[0]*g+i[0])/1920*100,(T[1]*g+i[1])/1080*100].map(I=>`${An(I,0)}%`).join(" ")})(M)).join(", \n")}\n      )`)}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(To),G(bg),G(gn),G(l_),G(P5),G(Qg),G(Wtt))},n.\u0275cmp=On({type:n,selectors:[["app-svg-plan"]],viewQuery:function(t,i){if(1&t&&Wo(jtt,5),2&t){let r;ir(r=rr())&&(i.renderEl=r.first)}},hostBindings:function(t,i){1&t&&mn("keydown",function(s){return i.handleKeyboardEvent(s)},0,mL)},features:[zt],decls:93,vars:12,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",1,"plan"],["svg",""],["id","MyGradient","gradientTransform","rotate(90)"],["offset","-10%",1,"alt-stop"],["offset","30%",1,"alt-stop"],["offset","100%",1,"main-stop"],["id","inset-shadow"],["stdDeviation","0.5","result","offset-blur"],["operator","out","in","SourceGraphic","in2","offset-blur","result","inverse"],["flood-color","black","flood-opacity","1","result","color"],["operator","in","in","color","in2","inverse","result","shadow"],["in","shadow","result","shadow"],["type","linear","slope",".175"],["transform","rotate(0)",1,"all"],[1,"icons",2,"display","none"],[3,"id",4,"ngFor","ngForOf"],[1,"house-stramien"],["clas","house-stramien",1,"house-stramien-in"],["clas","house-stramien","id","house-stramien-in-we-a"],["clas","house-stramien","id","house-stramien-in-we-b"],["clas","house-stramien","id","house-stramien-in-we-c"],["clas","house-stramien","id","house-stramien-in-we-d"],["clas","house-stramien","id","house-stramien-in-ns-a"],["clas","house-stramien","id","house-stramien-in-ns-b"],["clas","house-stramien","id","house-stramien-in-ns-c"],["clas","house-stramien","id","house-stramien-in-ns-d"],["clas","house-stramien",1,"house-stramien-ground"],["clas","house-stramien","id","house-stramien-ground-we-hall"],["clas","house-stramien","id","house-stramien-ground-ns-hall"],["clas","house-stramien","id","house-stramien-ground-we-toilet"],["clas","house-stramien","id","house-stramien-ground-ns-toilet"],["clas","house-stramien","id","house-stramien-top-we-hall"],["clas","house-stramien","id","house-stramien-top-ns-hall"],["clas","house-stramien","id","house-stramien-top-we-toilet"],["clas","house-stramien","id","house-stramien-top-ns-toilet"],["clas","house-stramien","id","house-stramien-top-we-walkway"],["clas","house-stramien","id","house-stramien-top-ns-walkway"],["clas","house-stramien",1,"house-stramien-out"],["clas","house-stramien","id","house-stramien-out-we-a"],["clas","house-stramien","id","house-stramien-out-we-b"],["clas","house-stramien","id","house-stramien-out-we-c"],["clas","house-stramien","id","house-stramien-out-we-d"],["clas","house-stramien","id","house-stramien-out-ns-a"],["clas","house-stramien","id","house-stramien-out-ns-b"],["clas","house-stramien","id","house-stramien-out-ns-c"],["clas","house-stramien","id","house-stramien-out-ns-d"],[1,"g-grid"],["class","grid-vertical",3,"id",4,"ngFor","ngForOf"],["class","grid-horizontal",3,"id",4,"ngFor","ngForOf"],[1,"house-wind-rose"],[1,"house-wind-rose-1"],[1,"house-wind-rose-2"],[1,"house-wind-rose-text"],[1,"g-room"],[1,"plan-stair-plan","included-stairs-plan"],[1,"plan-stair-plan"],[1,"g-wall"],[1,"g-door"],[1,"g-window"],[1,"extra"],["id","balcony-edge"],["id","hall-edge"],["id","view-lines"],["id","central-void","filter","url(#inset-shadow)"],["id","tower-walls"],["id","roof-line-1"],["id","roof-line-2"],["id","roof-line-3"],["id","roof-line-4"],["id","roof-line-5"],[1,"house-measure"],["id","house-total-height"],["id","house-total-width"],["id","house-width-1"],["id","house-width-2"],["id","house-width-3"],["id","house-height-1"],["id","house-height-2"],["id","house-height-inner"],["id","house-height-3"],[1,"g-sensor"],["class","sensor-cable",3,"id",4,"ngFor","ngForOf"],["class","sensor-g",3,"id",4,"ngFor","ngForOf"],[1,"g-example"],["class","example-g",3,"id",4,"ngFor","ngForOf"],[1,"render-img"],[1,"g-sun"],["id","g-distance"],[3,"id"],[1,"grid-vertical",3,"id"],[1,"grid-horizontal",3,"id"],[1,"wall-left"],[1,"wall-right"],[1,"wall-fill"],[1,"wall-origin"],[1,"door-wall-opening"],[1,"door-swing"],[1,"window-wall-opening"],[1,"window-pane"],[1,"sensor-cable",3,"id"],[1,"sensor-g",3,"id"],[1,"sensor-icon",3,"id"],[1,"example-g",3,"id"]],template:function(t,i){1&t&&(Uo(),O(0,"svg",0,1)(2,"defs")(3,"linearGradient",2),rt(4,"stop",3)(5,"stop",4)(6,"stop",5),N(),O(7,"filter",6),rt(8,"feGaussianBlur",7)(9,"feComposite",8)(10,"feFlood",9)(11,"feComposite",10),O(12,"feComponentTransfer",11),rt(13,"feFuncA",12),N()()(),O(14,"g",13)(15,"g",14),fn(16,$tt,1,1,"g",15),N(),O(17,"g",16)(18,"g",17),rt(19,"polyline",18)(20,"polyline",19)(21,"polyline",20)(22,"polyline",21)(23,"polyline",22)(24,"polyline",23)(25,"polyline",24)(26,"polyline",25),N(),O(27,"g",26),rt(28,"polyline",27)(29,"polyline",28)(30,"polyline",29)(31,"polyline",30)(32,"polyline",31)(33,"polyline",32)(34,"polyline",33)(35,"polyline",34)(36,"polyline",35)(37,"polyline",36),N(),O(38,"g",37),rt(39,"polyline",38)(40,"polyline",39)(41,"polyline",40)(42,"polyline",41)(43,"polyline",42)(44,"polyline",43)(45,"polyline",44)(46,"polyline",45),N()(),O(47,"g",46),fn(48,qtt,1,1,"polyline",47),fn(49,Ktt,1,1,"polyline",48),N(),O(50,"g",49),rt(51,"polygon",50)(52,"polygon",51)(53,"text",52),N(),O(54,"g",53),fn(55,Xtt,1,1,"g",15),N(),O(56,"g",54),rt(57,"svg",55),N(),O(58,"g",56),fn(59,Ytt,5,1,"g",15),N(),O(60,"g",57),fn(61,Ztt,3,1,"g",15),N(),O(62,"g",58),fn(63,Jtt,3,1,"g",15),N(),O(64,"g",59),rt(65,"polyline",60)(66,"polyline",61)(67,"polyline",62)(68,"polygon",63)(69,"polygon",64)(70,"polyline",65)(71,"polyline",66)(72,"polyline",67)(73,"polyline",68)(74,"polyline",69),N(),O(75,"g",70),rt(76,"g",71)(77,"g",72)(78,"g",73)(79,"g",74)(80,"g",75)(81,"g",76)(82,"g",77)(83,"g",78)(84,"g",79),N(),O(85,"g",80),fn(86,ent,1,1,"polyline",81),fn(87,tnt,2,2,"g",82),N(),O(88,"g",83),fn(89,nnt,1,1,"g",84),N(),rt(90,"image",85)(91,"g",86)(92,"g",87),N()()),2&t&&(ae(16),Ve("ngForOf",i.SensorTypes),ae(32),Ve("ngForOf",nd(10,$se).constructor(55)),ae(1),Ve("ngForOf",nd(11,$se).constructor(55)),ae(6),Ve("ngForOf",i.roomKeys),ae(4),Ve("ngForOf",i.wallKeys),ae(2),Ve("ngForOf",i.doorKeys),ae(2),Ve("ngForOf",i.windowKeys),ae(23),Ve("ngForOf",i.sensorKeys),ae(1),Ve("ngForOf",i.sensorKeys),ae(2),Ve("ngForOf",i.exampleKeys))},dependencies:[C4],styles:[".print-preview{position:absolute!important;top:0;height:auto!important}  .floor-top .included-stairs-plan .floor-clip{clip-path:inherit}  .included-stairs-plan{pointer-events:none}  .sensor-water-cold,   .sensor-dimmer,   .sensor-pir,   .sensor-vent-out,   .sensor-ethernet,   .sensor-perilex,   .sensor-light-switch{fill:var(--primary-color)}  .sensor-water-cold.sensor-cable,   .sensor-dimmer.sensor-cable,   .sensor-pir.sensor-cable,   .sensor-vent-out.sensor-cable,   .sensor-ethernet.sensor-cable,   .sensor-perilex.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--primary-color)!important}  .sensor-water-warm,   .sensor-vent-in,   .sensor-camera,   .sensor-poe,   .sensor-socket,   .sensor-light-bulb{fill:var(--accent-color)}  .sensor-water-warm.sensor-cable,   .sensor-vent-in.sensor-cable,   .sensor-camera.sensor-cable,   .sensor-poe.sensor-cable,   .sensor-socket.sensor-cable,   .sensor-light-bulb.sensor-cable{stroke:var(--accent-color)!important}  .sensor-drain,   .sensor-alarm,   .sensor-light-switch{fill:var(--first-color)}  .sensor-drain.sensor-cable,   .sensor-alarm.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--first-color)!important}  .sensor-shower,   .sensor-dlc,   .sensor-wifi,   .sensor-blinds{fill:var(--second-color)}  .sensor-shower.sensor-cable,   .sensor-dlc.sensor-cable,   .sensor-wifi.sensor-cable,   .sensor-blinds.sensor-cable{stroke:var(--second-color)!important}  .sensor-water-rain,   .sensor-temperature{fill:var(--third-color)}  .sensor-water-rain.sensor-cable,   .sensor-temperature.sensor-cable{stroke:var(--third-color)!important}  .sensor-smoke{fill:#a80000}  .sensor-smoke.sensor-cable{stroke:#a80000!important}  .selection-active .g-sensor>*:not(.selected){opacity:0!important}  svg.plan{height:100%;width:100%;position:relative}  svg.plan polyline[id^=roof-line-]{fill:none;stroke:var(--primary-color)}  svg.plan #hall-edge,   svg.plan #balcony-edge{stroke:var(--color-60)}  svg.plan .g-sun{transition:.4s;opacity:0}  svg.plan .g-sun g{transform-origin:center;fill:#fdc865}  svg.plan #view-lines{fill:none;stroke:var(--primary-color);opacity:0}  svg.plan .render-img{pointer-events:none;transition:.4s;opacity:0}  svg.plan .house-wind-rose{fill:none;transition:.4s,stroke-width 1ms;stroke:#000;stroke-linecap:square}  svg.plan #tower-walls{fill:var(--accent-color);stroke:none;pointer-events:none;opacity:.6}  svg.plan .house-stramien{transition:.4s,stroke-width 1ms;stroke:var(--first-color);stroke-linecap:square}  svg.plan .house-stramien .house-stramien-out{stroke:var(--second-color)}  svg.plan .house-stramien .house-stramien-top,   svg.plan .house-stramien .house-stramien-ground{stroke:var(--accent-color)}  svg.plan .house-wind-rose{opacity:0}  svg.plan .house-wind-rose .house-wind-rose-text{stroke:none;fill:currentColor}  svg.plan .house-wind-rose .house-wind-rose-1{fill:currentColor}  svg.plan .g-grid .grid-main{stroke:var(--color-50)}  svg.plan .g-grid .grid-sub{stroke:var(--color-10)}  svg.plan .g-grid .grid-subsub{stroke:var(--color-30)}  svg.plan .g-sensor polyline{transition:.5s;fill:none;stroke:#00f}  svg.plan .g-sensor polyline.cable-connection{stroke:#079372}  svg.plan .g-example svg *{stroke:var(--color-70)!important}  svg.plan .g-example .svg-Table *{stroke:var(--color-10)}  svg.plan .g-example .svg-Table path{fill:var(--color-20)!important;stroke:var(--color-10)}  svg.plan .g-example .svg-Table ellipse{fill:var(--color-30)!important}  svg.plan .g-room polygon{stroke:none!important;transition:.4s;fill:var(--color-0)}  svg.plan .g-room polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-room polygon.room-hole{box-shadow:inset 3px 5px 2px #0006}  svg.plan .g-room polygon.selected{fill:var(--primary-color)}  svg.plan .g-room text{fill:var(--color-80)}  svg.plan .g-wall{transition:.4s;opacity:1}  svg.plan .g-wall .selected polygon{fill:var(--primary-color)}  svg.plan .g-wall .selected circle{opacity:1}  svg.plan .g-wall polygon{transition:.5s;fill-rule:nonzero}  svg.plan .g-wall polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-wall circle{stroke:none;fill:var(--color-50);opacity:0}  svg.plan .g-wall .type-outer{fill:var(--color-30);stroke:var(--color-60)}  svg.plan .g-wall .type-outer .side-out{stroke:var(--color-60)}  svg.plan .g-wall .side-out{transition:.6s}  svg.plan .g-wall .type-inner{fill:var(--color-20);stroke:#565656}  svg.plan .g-wall .type-theoretic{opacity:1;stroke:#0091b6;stroke-width:3px}  svg.plan .g-wall .wall-fill{stroke:none}  svg.plan .g-door g{transition:opacity .4s}  svg.plan .g-door polygon{transition:.5s;fill:var(--color-0);stroke:none}  svg.plan .g-door path{fill:none;stroke:var(--color-70);stroke-linecap:square}  svg.plan .g-window polygon{transition:.5s;fill:var(--color-20);stroke:var(--color-60)}  svg.plan .g-window path{fill:none;stroke:var(--color-60);stroke-linecap:square}  svg.plan .plan-stair-plan #walk-line,   svg.plan .plan-stair-plan .measure-stair{display:none}  .section-welcome:not(.fullscreen) .render-img{opacity:1!important}  .section-welcome:not(.fullscreen) .room-function-text{opacity:0!important}  .section-basics .house-wind-rose,   .section-basics .g-grid{transition:2s;opacity:.7!important}  .section-tower .room-f{transition:2s;fill:var(--primary-color)!important}  .tag-base-dimension #L0-outer-WestWall-3 .side-out,   .tag-base-dimension #L0-outer-NorthWall .side-out,   .tag-base-dimension #L0-outer-SouthWall-2 .side-out,   .tag-base-dimension #L0-outer-EastWall-2 .side-out{transition:.4s;stroke-width:1!important;stroke:var(--primary-color)!important;stroke-linecap:round}  .tag-orientation .main-stop{stop-color:#fdc865}  .tag-orientation .alt-stop{stop-color:var(--color-0)}  .tag-orientation .house-wind-rose{opacity:.7!important}  .tag-orientation #L0-Central{fill:#fdc865!important}  .tag-orientation #L0-West,   .tag-orientation #L0-Central,   .tag-orientation #L0-East{shape-rendering:crispEdges;fill:url(#MyGradient)!important}  .tag-orientation .g-sun{opacity:.7!important}  .tag-orientation .g-sun g{animation:spin-animation 12s infinite}  .tag-insulated .g-wall *:not(.type-inner) polygon{fill:var(--primary-color);stroke:none!important}  .tag-viewlines #view-lines{opacity:.7!important}@keyframes spin-animation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),n})();function rnt(n,e){1&n&&(Uo(),rt(0,"circle",42)),2&n&&ws("id","roof-point-",e.$implicit,"")}function snt(n,e){1&n&&(Uo(),rt(0,"circle",42)),2&n&&ws("id","debug-point-",e.$implicit,"")}const qse=function(n){return{opacity:n}},ont=function(){return[0,1,2,3,4,5,6,7,8,9,10]},ant=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]};let cnt=(()=>{class n extends hS{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.marginInMeters=[3,3,3,3],this.graphic=_o.cross,this.RoofStyle=kl}ngAfterViewInit(){this.loadFigure(),this.setUp()}loadFigure(){this.figure=this.d3Service.loadSVG("assets/models/dude.svg",".g-figure",t=>{let s,o,a;const c=.3913732394366197;[_t.roofBasics].includes(this.section)?(s=this.house$.value.cross.elevations[Si.groundFloor],o=3*this.house$.value.cross.topFloorThickness,a=!0):(s=this.house$.value.cross.elevations[Si.topFloor],o=this.house$.value.cross.innerWidth/2-c/2+.5,a=!1),Ws(t).selectChild("svg").attr("height","1.9px").attr("y",-s-1.9+"px").attr("x",o+"px").attr("width",c+"px").selectChild("g").attr("transform",a?"translate(117,0) scale(-1 1)":"")})}svgUpdateMarginAndSize(){this.svgHouseSize=[[0,-this.cross.elevations[Gt.topOutside]],[this.house.outerBase,-this.cross.elevations[Si.crawlerFloor]+this.cross.elevations[Gt.topOutside]]],this.marginInMeters=[3,3,3,3],this.drawBendPoint(),this.drawPoints(),this.figure.update()}drawPoints(){this.house.cross.pointOf70Roof().forEach((t,i)=>{Ws(`#debug-point-${i}`).attr("cx",t[0]).attr("cy",-t[1]).attr("r",.051).style("fill","var(--primary-color)").attr("stroke-width",0)})}drawBendPoint(){const i=this.cross.elevations[Si.topFloor];Ws("#bend-point__h-line").attr("points",[[0,-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i+this.cross.bendPoint[1]+.1]].join(" ")).attr("stroke-width",2*this.meterPerPixel),Ws("#bend-point__h-point").attr("cx",this.cross.bendPoint[0]).attr("cy",-i+this.cross.bendPoint[1]).attr("r",.1).attr("stroke-width",2*this.meterPerPixel)}roofCheck(t){return this.section===_t.roof70?t===kl.roof70?1:0:this.section===_t.roofCircle?t===kl.roofCircle?1:0:[kl.roofCircleAnd70,t].includes(this.house$.value.cross.roofStyle)?1:0}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(To),G(bg),G(gn),G(l_),G(P5),G(Qg))},n.\u0275cmp=On({type:n,selectors:[["app-svg-cross"]],features:[zt],decls:44,vars:10,consts:[["preserveAspectRatio","xMidYMid meet",1,"cross"],["svg",""],["id","diagonalHatch","patternUnits","userSpaceOnUse","width","4","height","4","patternTransform","scale(0.1)"],["d","M-1,1 l2,-2\n               M0,4 l4,-4\n               M3,5 l2,-2",2,"stroke","black","stroke-width","0.1"],["transform","rotate(0)",1,"all"],[1,"g-figure"],[1,"g-building"],["id","building-walls"],["id","building-room"],["id","building-crawler"],["id","building-ground-line"],["id","building-fill"],["id","building-ground-fill"],["id","building-ground","fill","url(#diagonalHatch)"],[1,"g-roof-circle",3,"ngStyle"],["id","building-roof-circle-wall1"],["id","building-roof-circle-wall2"],["id","roof-circle","clip-path","url(#clip-roof2)"],["id","roof-circle-shadow"],["id","roof-circle-fill"],[1,"g-roof-70",3,"ngStyle"],["id","building-roof-70-wall1"],["id","building-roof-70-wall2"],["id","roof-70","clip-path","url(#clip-roof2)"],["id","roof-70-fill"],["id","roof-70-shadow"],[1,"g-helper"],[3,"id",4,"ngFor","ngForOf"],[1,"g-h-circle-roof"],["id","roof-circle__h-line"],["id","roof-circle__h-circle"],[1,"g-h-bend-point"],["id","bend-point__h-line"],["id","bend-point__h-point"],[1,"cross-measure"],["id","lower-roof"],["id","higher-roof"],["id","minimum"],["id","minimum-h"],["id","minimum-room"],["id","minimum-room-h"],["id","g-distance"],[3,"id"]],template:function(t,i){1&t&&(Uo(),O(0,"svg",0,1)(2,"defs")(3,"pattern",2),rt(4,"path",3),N()(),O(5,"g",4),rt(6,"g",5),O(7,"g",6),rt(8,"polygon",7)(9,"polygon",8)(10,"polygon",9)(11,"polyline",10)(12,"polygon",11)(13,"polygon",12)(14,"polygon",13),N(),O(15,"g",14),rt(16,"polygon",15)(17,"polygon",16)(18,"polygon",17)(19,"polygon",18)(20,"polygon",19),N(),O(21,"g",20),rt(22,"polygon",21)(23,"polygon",22)(24,"polygon",23)(25,"polygon",24)(26,"polygon",25),N(),O(27,"g",26),fn(28,rnt,1,1,"circle",27),O(29,"g",28),rt(30,"polyline",29)(31,"path",30),N(),O(32,"g",31),rt(33,"polyline",32)(34,"circle",33),N()(),O(35,"g",34),rt(36,"g",35)(37,"g",36)(38,"g",37)(39,"g",38)(40,"g",39)(41,"g",40),N(),fn(42,snt,1,1,"circle",27),rt(43,"g",41),N()()),2&t&&(ae(15),Ve("ngStyle",w0(4,qse,i.roofCheck(i.RoofStyle.roofCircle))),ae(6),Ve("ngStyle",w0(6,qse,i.roofCheck(i.RoofStyle.roof70))),ae(7),Ve("ngForOf",nd(8,ont)),ae(14),Ve("ngForOf",nd(9,ant)))},dependencies:[C4,rd,M9],styles:["svg.cross{width:100%;height:100%;position:relative}  svg.cross *[id*=-fill]{stroke:none;opacity:0}  svg.cross *[id*=-fill]#building-ground-fill{opacity:1;fill:var(--color-0)}  svg.cross *{transition:fill .4s}  svg.cross .g-roof-circle,   svg.cross .g-roof-70,   svg.cross .g-building{stroke:var(--color-70);fill:var(--color-30)}  svg.cross .g-roof-circle #building-crawler,   svg.cross .g-roof-circle #building-room,   svg.cross .g-roof-70 #building-crawler,   svg.cross .g-roof-70 #building-room,   svg.cross .g-building #building-crawler,   svg.cross .g-building #building-room{fill:var(--color-0)}  svg.cross .g-helper>*{stroke:var(--primary-color)!important;opacity:0;fill:none}  svg.cross .g-helper>*[id^=roof-point-]{opacity:1!important}  .section-roof-basics #building-ground-fill{fill:transparent!important}  .tag-roof-both #roof-70-shadow,   .section-roof-choice #roof-70-shadow{opacity:.6;fill:var(--primary-color)!important}  .tag-roof-both #roof-circle-shadow,   .section-roof-choice #roof-circle-shadow{opacity:1;fill:var(--accent-color)!important}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-silhouette #building-roof-circle-wall1,   .state-silhouette #building-roof-circle-wall2,   .state-silhouette #building-roof-70-wall1,   .state-silhouette #building-roof-70-wall2,   .state-silhouette *[id*=-fill]:not(#building-ground-fill){fill:var(--color-90)!important;opacity:1!important;stroke:var(--color-90)!important}  .state-silhouette *[id*=-shadow]{stroke:var(--color-90)!important;fill:var(--color-90)!important}"]}),n})();function lnt(n,e){1&n&&(Uo(),O(0,"g",16),rt(1,"polygon",17)(2,"polygon",18)(3,"text",19),N()),2&n&&ws("id","step-",e.index,"")}const unt=function(){return[]};let hnt=(()=>{class n extends hS{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,a,c,l),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.httpClient=o,this.d3Service=a,this.d3DistanceService=c,this.contextMenuService=l,this.graphic=_o.stairCross,this.floor=tt.all,this.steps=new go(1)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){const t=this.stair.totalRise/Math.tan(Math.PI/180*30);[_t.stairCheck,_t.stairPlan].includes(this.section)?this.svgHouseSize=[[5*this.stair.run,9*-this.stair.rise],[4*this.stair.run,4*this.stair.rise]]:(this.svgHouseSize=[[-this.stair.run,-this.stair.totalRise],[t,this.stair.totalRise+this.stair.floorThickness]],this.marginInPixels=[40,40,0,0]),this.marginInMeters=[0,2*this.stair.run,0,0],[_t.stairPlan].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(To),G(bg),G(gn),G(vd),G(l_),G(P5),G(Qg))},n.\u0275cmp=On({type:n,selectors:[["app-svg-stair-steps"]],features:[zt],decls:17,vars:2,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-step"],["svg",""],[1,"g-building"],["id","floor-groundfloor"],["id","floor-topfloor-shadow"],["id","floor-topfloor"],[1,"g-step"],[3,"id",4,"ngFor","ngForOf"],[1,"g-helper"],["id","nose-line"],["id","back-line"],["id","run-size",1,"measure"],["id","rise-size",1,"measure"],["id","total-run-size",1,"measure"],["id","total-rise-size",1,"measure"],["id","distance"],[3,"id"],[1,"step-run"],[1,"step-rise"],[1,"step-text"]],template:function(t,i){1&t&&(Uo(),O(0,"svg",0,1)(2,"g")(3,"g",2),rt(4,"polygon",3)(5,"polygon",4)(6,"polygon",5),N(),O(7,"g",6),fn(8,lnt,4,1,"g",7),N(),O(9,"g",8),rt(10,"path",9)(11,"path",10)(12,"g",11)(13,"g",12)(14,"g",13)(15,"g",14),N(),rt(16,"g",15),N()()),2&t&&(ae(8),Ve("ngForOf",nd(1,unt).constructor(25)))},dependencies:[C4],styles:["svg.stairs-step{width:100%;height:100%;position:relative;transition:.2s}  svg.stairs-step .g-helper,   svg.stairs-step .g-building,   svg.stairs-step .g-step{fill:var(--color-80);transition:.4s,stroke-width 1ms;stroke:var(--color-100)}  svg.stairs-step .g-step{fill:var(--color-100);stroke:none}  svg.stairs-step .g-step text{transition:.4s;opacity:0}  svg.stairs-step #back-line,   svg.stairs-step #nose-line{stroke:var(--color-30)}  svg.stairs-step .g-building{stroke:none;fill:var(--color-20)}  svg.stairs-step .g-building #floor-topfloor-shadow{fill:var(--color-5)}  svg.stairs-step .measure text{stroke:var(--color-0);paint-order:stroke}  svg.stairs-step .measure#rise-size,   svg.stairs-step .measure#run-size{transition:.4s 0s;opacity:0}  .section-stair-check #rise-size,   .section-stair-check #run-size{transition:.4s .6s!important;opacity:1!important}  .tag-amount-steps text{opacity:1!important}  .tag-amount-steps .measure{opacity:0}"]}),n})();function fnt(n,e){1&n&&(Uo(),rt(0,"circle",18)),2&n&&ws("id","walk-line-",e.index,"")}function dnt(n,e){if(1&n&&(Uo(),O(0,"g",19),rt(1,"polygon",20)(2,"polyline",21)(3,"text",22)(4,"circle",23),N()),2&n){const t=e.index;ws("id","step-plan-",t,""),ae(4),ws("id","step-stinger-",t,"")}}function pnt(n,e){1&n&&(Uo(),O(0,"g",24),rt(1,"g",25)(2,"g",26)(3,"g",27)(4,"g",28)(5,"g",29),N())}const Kse=function(){return[]};function gnt(n,e){if(1&n&&(Uo(),O(0,"g",9)(1,"g",10),rt(2,"path",11),fn(3,fnt,1,1,"circle",12),N(),rt(4,"polygon",13),O(5,"g",14),fn(6,dnt,5,2,"g",15),N(),fn(7,pnt,6,0,"g",16),rt(8,"g",17),N()),2&n){const t=pn();ae(3),Ve("ngForOf",nd(3,Kse).constructor(25)),ae(3),Ve("ngForOf",nd(4,Kse).constructor(25)),ae(1),Ve("ngIf",!t.isChild)}}let mnt=(()=>{class n extends hS{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.graphic=_o.stairPlan,this.floor=tt.all,this.marginInMeters=[0,0,0,0],this.marginInPixels=[64,64,0,0],this.steps=new go(25)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){this.svgHouseSize=[this.stair.stairOrigin,[this.stair.totalWidth,this.stair.totalHeight]],this.marginInMeters=[2*this.stair.run,2*this.stair.run,2*this.stair.run,2*this.stair.run],[_t.stairStart,_t.stairBasic,_t.stairCheck].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(To),G(bg),G(gn),G(l_),G(P5),G(Qg))},n.\u0275cmp=On({type:n,selectors:[["app-svg-stair-plan"]],features:[zt],decls:11,vars:3,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-plan"],["svg",""],["id","clip-roof-ref"],["id","clip-ground-floor-ref"],["id","clip-roof"],[0,"xlink","href","#clip-roof-ref","overflow","visible"],["id","clip-ground-floor"],[0,"xlink","href","#clip-ground-floor-ref","overflow","visible"],["class","floor-clip","clip-path","url(#clip-ground-floor)",4,"ngIf"],["clip-path","url(#clip-ground-floor)",1,"floor-clip"],[1,"g-walk-line"],["id","walk-line"],["class","walk-line-dot",3,"id",4,"ngFor","ngForOf"],["id","outline",1,"outline"],[1,"g-step-plan"],[3,"id",4,"ngFor","ngForOf"],["class","measure-stair",4,"ngIf"],["id","distance"],[1,"walk-line-dot",3,"id"],[3,"id"],[1,"step-plan-lines"],[1,"step-plan-rise"],[1,"step-plan-text"],[1,"step-stinger",3,"id"],[1,"measure-stair"],["id","plateau-width"],["id","mid-width"],["id","total-width"],["id","total-height"],["id","lesser-height"]],template:function(t,i){1&t&&(Uo(),O(0,"svg",0,1)(2,"defs"),rt(3,"polygon",2)(4,"polygon",3),N(),O(5,"clipPath",4),rt(6,"use",5),N(),O(7,"clipPath",6),rt(8,"use",7),N(),fn(9,gnt,9,5,"g",8),wa(10,"async"),N()),2&t&&(ae(9),Ve("ngIf",Y1(10,1,i.house$)))},dependencies:[C4,x4,sd],styles:["[_nghost-%COMP%]     .floor-clip{clip-path:inherit}  svg.stairs-plan{width:100%;height:100%;position:relative;transition:.4s}  svg.stairs-plan .left-corner-line,   svg.stairs-plan .right-corner-line,   svg.stairs-plan .middleLine{stroke:var(--primary-color)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .outline,   svg.stairs-plan .step-plan-lines{fill:none;stroke:var(--color-50)}  svg.stairs-plan .outline{stroke:var(--color-10)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .step-stinger,   svg.stairs-plan .walk-line-dot,   svg.stairs-plan .walk-line,   svg.stairs-plan .step-plan-text{display:none}  .section-stair-plan .step-plan-rise,   .section-stair-plan .step-stinger,   .section-stair-plan .walk-line-dot,   .section-stair-plan .walk-line,   .section-stair-plan .step-plan-text{display:initial!important}  .section-stair-plan .walk-line-dot{opacity:0;fill:var(--first-color)}  .section-stair-plan #walk-line{fill:none;transition:0s;opacity:0;stroke:var(--first-color)}  .section-stair-plan .step-stinger{opacity:0;fill:var(--third-color)}  .section-stair-plan .step-plan-text{display:initial}  .section-stair-plan .step-plan-rise{stroke-dasharray:1%}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-walkLine .walk-line-dot,   .state-walkLine .step-stinger,   .state-walkLine #walk-line{opacity:1}"]}),n})();var Wae={prefix:"fas",iconName:"temperature-high",icon:[512,512,[],"f769","M416 128c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm0 64c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96s43 96 96 96zM96 112c0-26.5 21.5-48 48-48s48 21.5 48 48V276.5c0 17.3 7.1 31.9 15.3 42.5C217.8 332.6 224 349.5 224 368c0 44.2-35.8 80-80 80s-80-35.8-80-80c0-18.5 6.2-35.4 16.7-48.9C88.9 308.4 96 293.8 96 276.5V112zM144 0C82.1 0 32 50.2 32 112V276.5c0 .1-.1 .3-.2 .6c-.2 .6-.8 1.6-1.7 2.8C11.2 304.2 0 334.8 0 368c0 79.5 64.5 144 144 144s144-64.5 144-144c0-33.2-11.3-63.8-30.1-88.1c-.9-1.2-1.5-2.2-1.7-2.8c-.1-.3-.2-.5-.2-.6V112C256 50.2 205.9 0 144 0zm0 416c26.5 0 48-21.5 48-48c0-20.9-13.4-38.7-32-45.3V112c0-8.8-7.2-16-16-16s-16 7.2-16 16V322.7c-18.6 6.6-32 24.4-32 45.3c0 26.5 21.5 48 48 48z"]},hle={prefix:"fas",iconName:"mound",icon:[576,512,[],"e52d","M144.1 179.2C173.8 127.7 228.6 96 288 96s114.2 31.7 143.9 83.2L540.4 368c12.3 21.3-3.1 48-27.7 48H63.3c-24.6 0-40-26.6-27.7-48L144.1 179.2z"]};let x4e=(()=>{class n{constructor(t,i){this.httpClient=t,this.sanitizer=i,this.height="32px",this.width="32px"}set color(t){this.fillColor="primary"===t?"var(--primary-color)":"accent"===t?"var(--accent-color)":"first"===t?"var(--first-color)":"second"===t?"var(--second-color)":"third"===t?"var(--third-color)":`${t}`}set size(t){this.width=`${t[0]}px`,this.height=`${t[1]}px`}ngOnInit(){this.httpClient.get(this.url,{responseType:"text"}).subscribe({next:t=>{t=t.replace(/height=\"64px\"/gi,"").replace(/width=\"64px\"/gi,""),this.svgData=this.sanitizer.bypassSecurityTrustHtml(t)},error:t=>{this.background="#aaa"}})}}return n.\u0275fac=function(t){return new(t||n)(G(vd),G(A8))},n.\u0275cmp=On({type:n,selectors:[["app-svg"]],hostVars:8,hostBindings:function(t,i){2&t&&Uc("background",i.background)("fill",i.fillColor)("height",i.height)("width",i.width)},inputs:{background:"background",fillColor:"fillColor",height:"height",width:"width",url:"url",color:"color",size:"size"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,i){1&t&&rt(0,"div",0),2&t&&Ve("innerHTML",i.svgData,k3)},styles:["[_nghost-%COMP%]{display:inline-block}  svg>g>g>path:first-child{fill:#747474}"]}),n})();function O_t(n,e){if(1&n){const t=Va();oo(0),O(1,"button",7),mn("click",function(){Ai(t);const r=pn(5);return h(r.appService.setState(r.States.doors))}),O(2,"label"),V(3," Doors "),N(),O(4,"mat-icon",8),V(5," door_front"),N()(),O(6,"button",7),mn("click",function(){Ai(t);const r=pn(5);return h(r.appService.setState(r.States.theoreticalWalls))}),O(7,"label"),V(8," Theoretic walls "),N(),O(9,"mat-icon",8),V(10,"density_large"),N()(),O(11,"button",7),mn("click",function(){Ai(t);const r=pn(5);return h(r.appService.setState(r.States.examplePlan))}),O(12,"label"),V(13," Example Plan "),N(),O(14,"mat-icon",8),V(15,"table_bar"),N()(),O(16,"button",7),mn("click",function(){Ai(t);const r=pn(5);return h(r.appService.setState(r.States.grid))}),O(17,"label"),V(18," Grid "),N(),O(19,"mat-icon",8),V(20,"grid_on"),N()(),O(21,"button",7),mn("click",function(){Ai(t);const r=pn(5);return h(r.appService.setState(r.States.stramien))}),O(22,"label"),V(23," Stramien "),N(),O(24,"mat-icon",8),V(25,"grid_3x3"),N()(),O(26,"button",7),mn("click",function(){Ai(t);const r=pn(5);return h(r.appService.setState(r.States.towerFootprint))}),O(27,"label"),V(28," Tower footprint "),N(),O(29,"mat-icon",8),V(30,"hexagon"),N()(),O(31,"button",7),mn("click",function(){Ai(t);const r=pn(5);return h(r.appService.setState(r.States.measure))}),O(32,"label"),V(33," Measurements "),N(),O(34,"mat-icon",8),V(35,"square_foot"),N()(),ao()}if(2&n){const t=pn(5);ae(1),Gi("active",t.checkState(t.States.doors)),ae(5),Gi("active",t.checkState(t.States.theoreticalWalls)),ae(5),Gi("active",t.checkState(t.States.examplePlan)),ae(5),Gi("active",t.checkState(t.States.grid)),ae(5),Gi("active",t.checkState(t.States.stramien)),ae(5),Gi("active",t.checkState(t.States.towerFootprint)),ae(5),Gi("active",t.checkState(t.States.measure))}}function N_t(n,e){if(1&n){const t=Va();oo(0),O(1,"button",10),mn("click",function(){const s=Ai(t).$implicit;return h(pn(6).appService.setState(s.state))}),O(2,"label",11),V(3),N(),rt(4,"app-svg",12),N(),ao()}if(2&n){const t=e.$implicit,i=pn(6);ae(1),Gi("active",i.checkState(t.state)),ae(2),si(" ",t.title," "),ae(1),na("sensor-",t.state,""),ws("url","assets/svg/",t.state,".svg")}}function V_t(n,e){if(1&n&&(oo(0),fn(1,N_t,5,7,"ng-container",9),ao()),2&n){const t=pn(5);ae(1),Ve("ngForOf",t.sensors)}}function U_t(n,e){if(1&n&&(O(0,"div",6),fn(1,O_t,36,14,"ng-container",0),wa(2,"async"),wa(3,"async"),fn(4,V_t,2,1,"ng-container",0),wa(5,"async"),N()),2&n){const t=pn(4);ae(1),Ve("ngIf",Y1(2,2,t.page$).startsWith("house")||Y1(3,4,t.page$).startsWith("?")),ae(3),Ve("ngIf",Y1(5,6,t.page$).startsWith("wired"))}}function G_t(n,e){1&n&&(O(0,"mat-icon"),V(1,"exposure_plus_1"),N())}function Q_t(n,e){1&n&&(O(0,"mat-icon"),V(1,"exposure_zero"),N())}function W_t(n,e){if(1&n){const t=Va();O(0,"button",3),mn("click",function(){return Ai(t),h(pn(4).setFloor())}),fn(1,G_t,2,0,"mat-icon",0),fn(2,Q_t,2,0,"mat-icon",0),N()}if(2&n){const t=e.ngIf,i=pn(4);ae(1),Ve("ngIf",t===i.Floor.top),ae(1),Ve("ngIf",t===i.Floor.ground)}}function j_t(n,e){if(1&n){const t=Va();oo(0),fn(1,U_t,6,8,"div",4),O(2,"button",3),mn("click",function(){Ai(t);const r=pn(3);return h(r.extra=!r.extra)}),O(3,"mat-icon"),V(4,"keyboard_double_arrow_down "),N()(),fn(5,W_t,3,2,"button",5),wa(6,"async"),ao()}if(2&n){const t=pn(3);ae(1),Ve("ngIf",t.extra),ae(1),Gi("active",t.extra),ae(1),u8("transform","rotate(",t.extra?20:180,"deg)"),Uc("transition","0.4s"),ae(2),Ve("ngIf",Y1(6,9,t.floor$))}}function $_t(n,e){1&n&&(O(0,"mat-icon"),V(1,"home"),N())}function q_t(n,e){1&n&&(O(0,"mat-icon",8),V(1,"home_outline"),N())}function K_t(n,e){if(1&n){const t=Va();O(0,"div",14)(1,"button",7),mn("click",function(){Ai(t);const r=pn(4);return h(r.appService.setState(r.States.measure))}),O(2,"label"),V(3," Measurements "),N(),O(4,"mat-icon"),V(5,"square_foot"),N()(),O(6,"button",7),mn("click",function(){Ai(t);const r=pn(4);return h(r.appService.setState(r.States.silhouette))}),O(7,"label"),V(8," Silhouette "),N(),fn(9,$_t,2,0,"mat-icon",15),fn(10,q_t,2,0,"ng-template",null,16,C0),N()()}if(2&n){const t=Qo(11),i=pn(4);ae(1),Gi("active",i.checkState(i.States.measure)),ae(5),Gi("active",i.checkState(i.States.silhouette)),ae(3),Ve("ngIf",!i.checkState(i.States.silhouette))("ngIfElse",t)}}function X_t(n,e){if(1&n){const t=Va();oo(0),fn(1,K_t,12,6,"div",13),O(2,"button",3),mn("click",function(){Ai(t);const r=pn(3);return h(r.extra=!r.extra)}),O(3,"mat-icon"),V(4," keyboard_double_arrow_down "),N()(),ao()}if(2&n){const t=pn(3);ae(1),Ve("ngIf",t.extra),ae(1),Gi("active",t.extra),ae(1),u8("transform","rotate(",t.extra?-20:-180,"deg)"),Uc("transition","0.4s")}}function Y_t(n,e){if(1&n){const t=Va();O(0,"div",14)(1,"button",7),mn("click",function(){Ai(t);const r=pn(4);return h(r.appService.setState(r.States.walkLine))}),O(2,"label"),V(3," Walk line "),N(),O(4,"mat-icon"),V(5,"directions_walk"),N()(),O(6,"button",7),mn("click",function(){Ai(t);const r=pn(4);return h(r.appService.setState(r.States.measure))}),O(7,"label"),V(8," Measurements "),N(),O(9,"mat-icon"),V(10,"square_foot"),N()()()}if(2&n){const t=pn(4);ae(1),Gi("active",t.checkState(t.States.walkLine)),ae(5),Gi("active",t.checkState(t.States.measure))}}function Z_t(n,e){if(1&n){const t=Va();oo(0),fn(1,Y_t,11,4,"div",13),O(2,"button",3),mn("click",function(){Ai(t);const r=pn(3);return h(r.extra=!r.extra)}),O(3,"mat-icon"),V(4," keyboard_double_arrow_down "),N()(),ao()}if(2&n){const t=pn(3);ae(1),Ve("ngIf",t.extra),ae(1),Gi("active",t.extra),ae(1),u8("transform","rotate(",t.extra?-20:-180,"deg)"),Uc("transition","0.4s")}}function J_t(n,e){if(1&n){const t=Va();oo(0),O(1,"button",17),mn("click",function(){const s=Ai(t).$implicit;return h(pn(5).appService.setState(s))}),O(2,"label"),V(3),N()(),ao()}if(2&n){const t=e.$implicit,i=pn(5);ae(1),Gi("active",i.checkState(t)),ae(2),si(" ",t.replace("construction-","")," ")}}function eyt(n,e){if(1&n){const t=Va();O(0,"div",6),fn(1,J_t,4,3,"ng-container",9),O(2,"button",3),mn("click",function(){Ai(t);const r=pn(4);return h(r.appService.setState(r.Helpers3D.mirror))}),O(3,"label"),V(4," Mirror "),N(),O(5,"mat-icon"),V(6,"foundation"),N()()()}if(2&n){const t=pn(4);ae(1),Ve("ngForOf",t.constructionParts),ae(1),Gi("active",t.checkState(t.Helpers3D.mirror))}}function tyt(n,e){if(1&n){const t=Va();oo(0),fn(1,eyt,7,3,"div",4),O(2,"button",3),mn("click",function(){Ai(t);const r=pn(3);return h(r.extra=!r.extra)}),O(3,"mat-icon"),V(4,"keyboard_double_arrow_down "),N()(),ao()}if(2&n){const t=pn(3);ae(1),Ve("ngIf",t.extra),ae(1),Gi("active",t.extra),ae(1),u8("transform","rotate(",t.extra?20:180,"deg)"),Uc("transition","0.4s")}}function nyt(n,e){if(1&n){const t=Va();oo(0),O(1,"button",19),mn("click",function(){const s=Ai(t).$implicit;return h(pn(5).appService.setState(s))}),O(2,"label"),V(3),N()(),ao()}if(2&n){const t=e.$implicit,i=pn(5);ae(1),Gi("active",i.checkState(t)),ae(2),si(" ",t.replace("house3D-","")," ")}}function iyt(n,e){if(1&n&&(O(0,"div",6),fn(1,nyt,4,3,"ng-container",9),N()),2&n){const t=pn(4);ae(1),Ve("ngForOf",t.house3DParts)}}function ryt(n,e){1&n&&(O(0,"mat-icon"),V(1,"exposure_plus_1"),N())}function syt(n,e){1&n&&(O(0,"mat-icon"),V(1,"exposure_zero"),N())}function oyt(n,e){if(1&n){const t=Va();O(0,"button",3),mn("click",function(){return Ai(t),h(pn(4).setFloor())}),fn(1,ryt,2,0,"mat-icon",0),fn(2,syt,2,0,"mat-icon",0),N()}if(2&n){const t=e.ngIf,i=pn(4);ae(1),Ve("ngIf",t===i.Floor.top),ae(1),Ve("ngIf",t===i.Floor.ground)}}const ayt=function(n){return{transform:n,"font-family":"Material Icons Outlined"}};function cyt(n,e){if(1&n){const t=Va();oo(0),fn(1,iyt,2,1,"div",4),O(2,"button",3),mn("click",function(){Ai(t);const r=pn(3);return h(r.appService.setState(r.Helpers3D.clipBoxEnabled))}),O(3,"mat-icon"),V(4,"crop"),N(),O(5,"label"),V(6," Clipped "),N()(),O(7,"button",3),mn("click",function(){Ai(t);const r=pn(3);return h(r.appService.setState(r.Helpers3D.clipBoxShow))}),O(8,"mat-icon"),V(9,"view_in_ar_new"),N(),O(10,"label"),V(11," show "),N()(),O(12,"button",3),mn("click",function(){Ai(t);const r=pn(3);return h(r.extra=!r.extra)}),O(13,"mat-icon"),V(14,"keyboard_double_arrow_down "),N()(),fn(15,oyt,3,2,"button",5),wa(16,"async"),O(17,"button",3),mn("click",function(){return Ai(t),h(pn(3).swapCamera())}),O(18,"mat-icon",18),V(19," rectangle"),N(),O(20,"label"),V(21),N()(),ao()}if(2&n){const t=pn(3);ae(1),Ve("ngIf",t.extra),ae(1),Gi("active",t.checkState(t.Helpers3D.clipBoxEnabled)),ae(5),Gi("active",t.checkState(t.Helpers3D.clipBoxShow)),ae(5),Gi("active",t.extra),ae(1),u8("transform","rotate(",t.extra?20:180,"deg)"),Uc("transition","0.4s"),ae(2),Ve("ngIf",Y1(16,15,t.floor$)),ae(3),Ve("ngStyle",w0(17,ayt,t.camera?"":"perspective(10px) rotateX(9deg)  translate(0px, -2px)")),ae(3),si(" ",t.camera?"Ortho":"Persective"," ")}}function lyt(n,e){1&n&&(O(0,"mat-icon"),V(1,"fullscreen"),N())}function uyt(n,e){1&n&&(O(0,"mat-icon"),V(1,"fullscreen_exit"),N())}const hyt=function(n,e){return[n,e]};function fyt(n,e){if(1&n){const t=Va();O(0,"div",2),fn(1,j_t,7,11,"ng-container",0),fn(2,X_t,5,8,"ng-container",0),fn(3,Z_t,5,8,"ng-container",0),fn(4,tyt,5,8,"ng-container",0),fn(5,cyt,22,19,"ng-container",0),O(6,"button",3),mn("click",function(){Ai(t);const r=pn(2);return h(r.fullscreen=!r.fullscreen)}),fn(7,lyt,2,0,"mat-icon",0),fn(8,uyt,2,0,"mat-icon",0),N()()}if(2&n){const t=pn().ngIf,i=pn();na("container\nsection-",t.section,""),ae(1),Ve("ngIf",t.graphic===i.Graphic.house2D),ae(1),Ve("ngIf",t.graphic===i.Graphic.cross),ae(1),Ve("ngIf",function DQ(n,e,t,i,r){return BQ(Dt(),pt(),n,e,t,i,r)}(10,hyt,i.Graphic.stairCross,i.Graphic.stairPlan).includes(t.graphic)),ae(1),Ve("ngIf",t.graphic===i.Graphic.construction),ae(1),Ve("ngIf",t.graphic===i.Graphic.House3D),ae(2),Ve("ngIf",!i.fullscreen),ae(1),Ve("ngIf",i.fullscreen)}}function dyt(n,e){if(1&n&&(oo(0),fn(1,fyt,9,13,"div",1),wa(2,"async"),ao()),2&n){const t=pn();ae(1),Ve("ngIf",Y1(2,1,t.states$))}}let pyt=(()=>{class n{constructor(t,i,r,s,o,a){this.appService=t,this.elementRef=i,this.houseService=r,this.cookieService=s,this.router=o,this.threeService=a,this.extra=!1,this.house$=this.houseService.house$,this.Floor=tt,this.floor$=this.appService.floor$,this.scroll$=this.appService.scroll$,this.states$=this.appService.states$,this.setFloor=()=>this.appService.setFloor(),this.Graphic=_o,this.States=xc,this.page$=this.appService.page$,this.sensors=Object.values(Ge).map(c=>({state:c,title:c})),this.constructionParts=Object.values(Di),this.ConstructionParts=Di,this.house3DParts=Object.values(b2),this.House3DParts=b2,this.Helpers3D=md,this.helpers3D=Object.values(md),this.faTemperatureHigh=Wae,this.faMound=hle}get fullscreen(){return this.appService.fullscreen$.value}set fullscreen(t){this.cookieService.set("fullscreen",`${t}`),this.appService.fullscreen$.next(t)}get camera(){return this.threeService.cameraPerspective}ngOnInit(){}checkState(t){return!0===this.states$.value[t]}swapCamera(){this.threeService.swapCamera()}}return n.\u0275fac=function(t){return new(t||n)(G(To),G(gn),G(qo),G(Mu),G(c1),G(c_))},n.\u0275cmp=On({type:n,selectors:[["controls"]],decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",3,"class",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],["mat-mini-fab","","color","accent",3,"click"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",4,"ngIf"],["mat-mini-fab","","color","accent",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",1,"sub-controls"],["mat-mini-fab","",3,"click"],[2,"font-family","Material Icons Outlined"],[4,"ngFor","ngForOf"],["mat-mini-fab","",1,"sensor-button",2,"height","12px","width","12px",3,"click"],[1,"sensor-label"],["height","12px","width","12px",3,"url"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",1,"sub-controls"],[4,"ngIf","ngIfElse"],["elseGrey",""],["mat-mini-fab","","color","accent",1,"construction",3,"click"],[3,"ngStyle"],["mat-mini-fab","","color","accent",1,"house3D",3,"click"]],template:function(t,i){1&t&&(fn(0,dyt,3,3,"ng-container",0),wa(1,"async")),2&t&&Ve("ngIf",Y1(1,1,i.scroll$))},dependencies:[C4,x4,rd,D8,Cx,Cd,F8,xd,M9,x4e,sd],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:0;z-index:9999}.controls-left[_nghost-%COMP%]{left:50px}.controls-left[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{left:-24px;bottom:8px;position:relative}.controls-left[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:left;left:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);cursor:pointer}.controls-right[_nghost-%COMP%]{right:50px}.controls-right[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}.controls-right[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);opacity:1}[_nghost-%COMP%]     .sensor-button{right:0}[_nghost-%COMP%]     .sensor-button svg{position:absolute;top:0;right:0}[_nghost-%COMP%]     .sensor-label{right:15px!important;top:6px;line-height:0}.active[_ngcontent-%COMP%]{background-color:var(--accent-50)!important;box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important;color:#1b1b1b!important}.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{opacity:.4}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}.construction[_ngcontent-%COMP%]{height:16px;width:16px}.construction[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{right:18px!important;top:6px;line-height:0}.dev[_ngcontent-%COMP%]{color:#613d1a}"],data:{animation:[Vk]}}),n})();function gyt(n,e){1&n&&rt(0,"controls",10),2&n&&Ve("@slideInOut",void 0)}function myt(n,e){1&n&&rt(0,"controls",11),2&n&&Ve("@slideInOut",void 0)}function Ayt(n,e){1&n&&rt(0,"app-svg-cross",15)}function vyt(n,e){1&n&&(oo(0),rt(1,"app-svg-stair-plan",16)(2,"app-svg-plan",17),ao()),2&n&&(ae(1),Ve("isChild",!0))}function _yt(n,e){1&n&&(oo(0),rt(1,"app-three-construction"),ao())}function yyt(n,e){1&n&&(oo(0),rt(1,"app-three-house"),ao())}function wyt(n,e){1&n&&(oo(0),rt(1,"app-svg-stair-plan",18),ao())}function Cyt(n,e){1&n&&(oo(0),rt(1,"app-svg-stair-steps",19),ao())}function xyt(n,e){if(1&n&&(oo(0),O(1,"div",12),fn(2,Ayt,1,0,"app-svg-cross",13),N(),O(3,"div",14),fn(4,vyt,3,1,"ng-container",8),fn(5,_yt,2,0,"ng-container",8),fn(6,yyt,2,0,"ng-container",8),fn(7,wyt,2,0,"ng-container",8),fn(8,Cyt,2,0,"ng-container",8),N(),ao()),2&n){const t=e.ngIf,i=pn();ae(2),Ve("ngIf",t===i.Graphic.cross),ae(2),Ve("ngIf",t===i.Graphic.house2D),ae(1),Ve("ngIf",t===i.Graphic.construction),ae(1),Ve("ngIf",t===i.Graphic.House3D),ae(1),Ve("ngIf",t===i.Graphic.stairPlan),ae(1),Ve("ngIf",t===i.Graphic.stairCross)}}function byt(n,e){1&n&&rt(0,"app-footer")}const Myt=function(n){return{top:n}};let Syt=(()=>{class n{constructor(t,i,r,s,o,a){this.appService=t,this.tooltipService=i,this.houseService=r,this.router=s,this.activatedRoute=o,this.stateService=a,this.sections=Object.keys(_t),this.Tag=O3,this.GraphicSide=gd,this.Graphic=_o,this.showFooter=!0,this.sectionScroll={},this.goalLine=.4,this.popupActive$=this.appService.popupActive$,this.fullscreen$=this.appService.fullscreen$,this.scroll$=this.appService.scroll$,this.floor$=this.appService.floor$,this.tag$=this.appService.tag$,this.states$=this.appService.states$,this.page$=this.appService.page$,this.cssStates$=this.states$.pipe($t(c=>Object.entries(c).filter(([l,u])=>!0===u).map(([l,u])=>`state-${l}`).join(" "))),this.loaded=!1,ic(window,"scroll").subscribe(c=>{this.calcSection()})}ngAfterViewInit(){this.router.events.pipe(jo(t=>t instanceof xu)).subscribe(t=>{setTimeout(()=>{this.setup()},0)}),this.setup()}setup(){this.sectionEls=document.querySelectorAll("section"),this.sectionScroll={},this.sectionEls.forEach(r=>{const s=r.id;this.sectionScroll[s]={id:s,top:r.offsetTop}}),this.calcSection();const i=this.activatedRoute.snapshot.params.tag;i&&this.tag$.next(i),this.loaded=!0}checkFooter(){let t=!0;[_o.House3D].includes(this.graphic)&&(t=!1),this.showFooter=t}calcSection(){this.section=this.getSection(),void 0===this.section?(this.graphic=_o.none,this.graphicSide=gd.none):(this.graphic=this.setGraphic(this.section),this.graphicSide=this.getSide(),document.querySelector(`section#${this.section}`).classList.add("section-active")),this.checkFooter(),this.appService.scroll$.next({scroll:An(window.pageYOffset,0),percentage:this.getVerticalScrollPercentage(document.body),section:this.section,graphicSide:this.graphicSide,graphic:this.graphic}),this.stateService.updateStateBasedOnSection(this.section,this.loaded),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:this.section},replaceUrl:!0,queryParamsHandling:"merge"})}getVerticalScrollPercentage(t){var i=t.parentNode;return An((t.scrollTop||i.scrollTop)/(i.scrollHeight-i.clientHeight))}setGraphic(t){let i=_o.none;return[_t.welcome,_t.passiv,_t.basics,_t.extensions,_t.tower,_t.wiredWelcome,_t.wiredPower,_t.wiredEthernet,_t.wiredExtra,_t.wiredLight,_t.wiredSafety,_t.wiredVent,_t.wiredWater].includes(t)&&(i=_o.house2D),[_t.roof70,_t.roofBasics,_t.roofChoice,_t.roofCircle,_t.roofEdge,_t.roofIntermezzo].includes(t)&&(i=_o.cross,[_t.roof70].includes(t)&&this.houseService.update("cross","viewedRoofStyle",kl.roof70),[_t.roofBasics,_t.roofCircle].includes(t)&&this.houseService.update("cross","viewedRoofStyle",kl.roofCircle)),[_t.stairStart,_t.stairBasic,_t.stairCheck,_t.stairPlan].includes(t)&&(i=_o.stairCross),[_t.stairPlan].includes(t)&&(i=_o.stairPlan),[_t.constructionParameters,_t.facadeStart,_t.facadeWindow,_t.facadeDoor].includes(t)&&(i=_o.none),[_t.constructionWelcome,_t.constructionFoundation,_t.constructionCrawlerSpace,_t.constructionFloor,_t.constructionRoof,_t.constructionWallFinish,_t.constructionWallSole,_t.constructionWallJoists,_t.constructionWallOSB,_t.constructionWallTape,_t.constructionWallOuterSheet,_t.constructionWallSpace,_t.constructionWallFacade,_t.constructionWallInsulation,_t.constructionWallService,_t.constructionWallGips,_t.constructionFloor,_t.constructionFloorLVL,_t.constructionGroundFloor,_t.constructionRoofRidge,_t.constructionRoofJoist,_t.constructionRoofInside,_t.constructionRoofOuterSheet,_t.constructionRoofSpace,_t.constructionRoofTiles].includes(t)&&(i=_o.construction),[_t.House3D].includes(t)&&(i=_o.House3D),[_t.installationDrinkWater,_t.installationElectricity,_t.installationGreyWater,_t.installationHeating,_t.installationSmartHome,_t.installationVentilation].includes(t)&&(i=_o.none),this.graphic!==i&&(console.log("Swap side!"),this.tooltipService.detachOverlay()),this.graphic=i,i}getSection(){var t=An(window.innerHeight*this.goalLine,0),r=An(window.pageYOffset,0)+t;this.sectionEls.forEach(o=>{const a=o.id;this.sectionScroll[a].past=this.sectionScroll[a].top<r,o.classList.remove("section-active")});const s=Object.values(this.sectionScroll).filter(o=>o.past).sort((o,a)=>a.top-o.top);return s&&s[0]?s[0].id:void 0}getSide(){let t=gd.right;return[_o.cross].includes(this.graphic)&&(t=gd.left),[_o.none].includes(this.graphic)&&(t=gd.none),t}}return n.\u0275fac=function(t){return new(t||n)(G(To),G(bg),G(qo),G(c1),G(pd),G(OUe))},n.\u0275cmp=On({type:n,selectors:[["app-main-page"]],decls:22,vars:32,consts:[[1,"page"],[1,"left-blinder","bg"],[1,"left-flex"],[1,"center"],[1,"right-flex"],[1,"right-blinder","bg"],["class","controls controls-left",4,"ngIf"],["class","controls controls-right",4,"ngIf"],[4,"ngIf"],[1,"goal-marker",3,"ngStyle"],[1,"controls","controls-left"],[1,"controls","controls-right"],[1,"floating","floating-left"],["class","svg-cross",4,"ngIf"],[1,"floating","floating-right"],[1,"svg-cross"],["fxFlex","0 0 0",1,"svg-plan-stair-plan",3,"isChild"],[1,"svg-plan"],[1,"svg-stair-plan"],[1,"svg-stair-steps"]],template:function(t,i){1&t&&(O(0,"div",0)(1,"div"),wa(2,"async"),wa(3,"async"),wa(4,"async"),wa(5,"async"),wa(6,"async"),wa(7,"async"),wa(8,"async"),rt(9,"div",1),O(10,"main"),rt(11,"div",2),O(12,"div",3),rt(13,"router-outlet"),N(),rt(14,"div",4),N(),rt(15,"div",5),fn(16,gyt,1,1,"controls",6),fn(17,myt,1,1,"controls",7),fn(18,xyt,9,6,"ng-container",8),wa(19,"async"),N()(),rt(20,"div",9),fn(21,byt,1,0,"app-footer",8)),2&t&&(ae(1),function zG(n,e,t,i,r,s,o,a,c,l,u,f,p,g,_){vu(_l,y0,r7(Dt(),n,e,t,i,r,s,o,a,c,l,u,f,p,g,_),!0)}("container \n  tag-",Y1(2,14,i.tag$)," \n  floor-",Y1(3,16,i.floor$)," \n  section-",Y1(4,18,i.scroll$).section," \n  show-",Y1(5,20,i.scroll$).graphicSide," \n  ",Y1(6,22,i.popupActive$)?"popup-active":""," \n  ",Y1(7,24,i.fullscreen$)?"fullscreen":"","\n  ",Y1(8,26,i.cssStates$)," \n  "),ae(15),Ve("ngIf",i.graphicSide===i.GraphicSide.left),ae(1),Ve("ngIf",i.graphicSide===i.GraphicSide.right),ae(1),Ve("ngIf",Y1(19,28,i.scroll$).graphic),ae(2),Ve("ngStyle",w0(30,Myt,100*i.goalLine+"vh")),ae(1),Ve("ngIf",i.showFooter))},dependencies:[x4,rd,sx,M9,bC,uJe,Ptt,Htt,int,cnt,hnt,mnt,pyt,sd],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.page[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:row;flex:1 1 100vw}.container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{max-width:800px;justify-content:center;display:flex;flex-direction:row;flex:10 1 800px}.container[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{transition:.6s}.container.show-left[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container.show-left[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container.show-right[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 0vw}.container.show-right[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 100vw;border-left:0vw solid transparent;border-right:0vw solid transparent;max-width:450px;overflow-x:hidden;z-index:2;margin:0 46px}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{display:block;height:100%;width:0vw;position:absolute;z-index:5;transition:.8s ease-in;opacity:.8}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%]{left:0}.container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{right:0}.container.fullscreen.show-left[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container.fullscreen.show-right[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{transition:.6s ease-out;width:100vw;opacity:1}.container.fullscreen[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{max-width:100vw!important}.container.fullscreen[_ngcontent-%COMP%]     g.all{transition:none!important}.floating[_ngcontent-%COMP%]{top:0;height:100vh;position:fixed;max-width:100vh;display:flex;flex-direction:column;justify-content:center;z-index:500;transition:1s}.floating.floating-right[_ngcontent-%COMP%]{left:50%;width:50%}.floating.floating-left[_ngcontent-%COMP%]{right:50%;width:50%}.floating[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 100%;position:relative}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{transition:.6s;max-width:70vh;width:100vw;height:100vh;left:0vw}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]     svg{transition:.6s;left:0vw;top:0vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]{transition:.2s;max-width:100vw;left:-50vw;top:-10vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]     svg{left:25vw}.show-right[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:50vw;right:100vw}.show-left[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:50vw;left:100vw}.fullscreen.show-left[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:100vw;right:0vw;max-width:100vw}.fullscreen.show-right[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:100vw;left:0vw;max-width:100vw}.goal-marker[_ngcontent-%COMP%]{position:fixed;border:1px solid var(--color-30);height:13px;width:13px;transform:rotate(45deg);left:-10px}"],data:{animation:[Vk,Lne]}}),n})();const Eyt=["*"];let TS=(()=>{class n{constructor(t,i){this.appService=t,this.elementRef=i}mouseover(){this.appService.setTag(this.tag)}mouseout(){this.appService.setTag(void 0)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(G(To),G(gn))},n.\u0275cmp=On({type:n,selectors:[["tag"]],hostBindings:function(t,i){1&t&&mn("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})},inputs:{tag:"tag"},ngContentSelectors:Eyt,decls:2,vars:0,consts:[["mat-flat-button","",1,"mat-button-tag"]],template:function(t,i){1&t&&(Vc(),O(0,"button",0),T1(1),N())},dependencies:[Cx],styles:[".mat-button-tag[_ngcontent-%COMP%]{padding:3px 0 5px;border:1px solid var(--color-30);line-height:1em}.mat-button-tag[_ngcontent-%COMP%]     .mat-button-wrapper{padding:8px;font-weight:initial}"]}),n})(),Tyt=(()=>{class n{constructor(t,i,r,s){this.builder=t,this.overlay=i,this.appService=r,this.viewContainerRef=s,this.open=!1,this.animate=!0,this.byClick=!1,this.unsubscribe=new Je}mouseover(){this.attachOverlay()}mouseout(){this.appService.popupActive$.next(!1),this.detachOverlay()}onResize(t){this.updateOnChange()}getPositionStrategy(){let t;return t=this.overlay.position().flexibleConnectedTo(this.viewContainerRef.element.nativeElement).withPositions([new cC({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,-20),new cC({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,20,"flipped")]).withPush(!0),t}getScrollStrategy(){return this.overlay.scrollStrategies.reposition()}ngOnInit(){this.pageEl=document.querySelector(".center"),this.btn=this.viewContainerRef.element.nativeElement;const t=this.getPositionStrategy(),i=this.getScrollStrategy();this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:i,hasBackdrop:this.byClick}),this.overlayRef.backdropClick().pipe(D1(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.open&&this.attachOverlay()}ngOnDestroy(){this.detachOverlay(),this.unsubscribe.next(),this.unsubscribe.complete(),this.overlayRef.dispose()}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.arrowEl.remove(),this.overlayRef.detach())}attachOverlay(){const t=new wI(this.overlayTemplate,this.viewContainerRef);this.overlayRef&&!this.overlayRef.hasAttached()&&(this.componentRef=this.overlayRef.attach(t),this.updateOnChange(),this.createMakeMeAPopup(),this.appService.popupActive$.next(!0))}createMakeMeAPopup(){this.overlayRef.overlayElement.classList.add("popup","base"),this.arrowEl=document.createElement("div"),this.arrowEl.classList.add("popup-arrow","base"),this.setArrow(),this.overlayRef.overlayElement.append(this.arrowEl)}setArrow(){const{left:t,width:i}=this.btn.getBoundingClientRect(),{x:r}=this.pageEl.getBoundingClientRect();this.arrowEl.style.left=t-r-20+i/2+"px"}updateOnChange(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.updatePosition(),this.overlayRef.updateSize({width:this.pageEl.clientWidth}),this.arrowEl&&this.setArrow())}playAnimation(t,i){const s=this.builder.build(t).create(i);return s.play(),s}enterAnimation(t){return t.style.maxWidth="100%",[Wi({"max-width":"0%"}),ia("150ms ease-out",Wi({"max-width":"100%"}))]}leaveAnimation(){return[ia("200ms ease-in",Wi({"max-width":"0%"}))]}}return n.\u0275fac=function(t){return new(t||n)(G(WB),G(z3),G(To),G(nc))},n.\u0275dir=ht({type:n,selectors:[["","overlayTemplate",""]],hostBindings:function(t,i){1&t&&mn("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})("resize",function(s){return i.onResize(s)},!1,mL)},inputs:{overlayTemplate:"overlayTemplate",open:"open"}}),n})();function Lyt(n,e){1&n&&V(0),2&n&&si(" Insulation keeps you warm. Passiv houses have almost no heatloss so therefore (almost) no heating is needed! The walls are thicker than you are used to: ",.5," meter ")}function Dyt(n,e){1&n&&V(0," In the winter, we need the sun to warmup the house. In the summer the house needs to be shaded on the outside to prevent overheating. ")}function Iyt(n,e){1&n&&(V(0," It is even a hashtag "),O(1,"b"),V(2,"#EfficiencyFirst"),N(),V(3,". Why look at green energy if we wast still alot of energy. ( Ofcourse we still need green energy! ). First insulation to the max, before thinking of solarpanels. "))}function Byt(n,e){1&n&&V(0," It is not really a thing, more a concept. It helps the already complex roof to look good. And also, very helpful with calculations. ")}function Ryt(n,e){1&n&&V(0," This extension is to greaten the three-part south facade, creates a bigger roof on the second floor. ")}function Fyt(n,e){1&n&&V(0," Dont make this too long, it does not fit with the compact design, enlarge the base-dimension if you like. ")}function kyt(n,e){1&n&&V(0," A concept, how far is the bend-point of the roof, away from the outside wall. ")}function Pyt(n,e){if(1&n){const t=Va();oo(0),O(1,"section",1)(2,"h1"),V(3),N(),O(4,"p",12),V(5," A passiv-haus but in country style, and above all open-source. We love to share our plans as a community. See it as free building plans for your own house or give it to your constructor. Its truly free. "),N()(),O(6,"section",1)(7,"h2"),V(8,"Passiv? "),O(9,"span",13),V(10,"(Its German)"),N()(),O(11,"p"),V(12,"Passive houses are the future. Feel free to "),O(13,"a",14),V(14,"search online for 'Passiv Haus'"),N(),V(15," (not really sexy or anything). Therefor let us try to explain it. Well, really short: "),N(),O(16,"ul")(17,"li")(18,"tag",15),V(19,"Great insulated"),N(),fn(20,Lyt,1,1,"ng-template",null,16,C0),N(),O(22,"li"),V(23,"Well & compact desinged"),N(),O(24,"li")(25,"tag",15),V(26,"Orientation"),N(),V(27," to the sun "),fn(28,Dyt,1,0,"ng-template",null,17,C0),N(),O(30,"li"),V(31,"No thermal bridges"),N(),O(32,"li"),V(33,"Can be houses, but also offices etc"),N(),O(34,"li"),V(35,"Sustainable (well in our opinion)"),N()(),O(36,"p"),V(37,"Passiv Haus in one punchline:"),N(),O(38,"div",18)(39,"tag",15),V(40,"Efficiency first"),N(),fn(41,Iyt,4,0,"ng-template",null,19,C0),N(),O(43,"p"),V(44," Sometimes passive houses are often not so pretty. (maybe, if you like form-follow-function). Effiency first, but style second for us! Therefore we try to combine old design styles with this great concept. "),N()(),O(45,"section",1)(46,"h2"),V(47,"The basics"),N(),O(48,"p"),V(49," The house is based on parametric design. So play with all the sliders, its interactive. Lets start at the very basics. And why does it look like a church from above? "),N(),O(50,"h3"),V(51,"Two axis"),N(),O(52,"p"),V(53,"The main house, seen from the south (up here) has two axis with a certain "),O(54,"tag",15),V(55,"base dimension"),N(),V(56,". A design seen often in classical buildings. It comes often with great "),O(57,"tag",20),V(58,"viewlines"),N(),V(59,". The higher the base-dimension is, the lower the extensions can be, the more efficient near-cube shape we get. "),N(),fn(60,Byt,1,0,"ng-template",null,21,C0),O(62,"label")(63,"span"),V(64,"Base dimension "),N(),O(65,"mat-slider",22),mn("input",function(r){Ai(t);const s=pn();return h(s.update("house","studAmount",r.value,s.tags.baseDimension))}),N()(),O(66,"label",23)(67,"span"),V(68,"Technical "),N(),V(69),O(70,"tag",15),V(71,"base dimension"),N(),V(72),N(),O(73,"label",23)(74,"span"),V(75,"Technical "),N(),O(76,"table")(77,"tr"),rt(78,"td")(79,"td"),O(80,"td"),V(81,"total"),N(),O(82,"td"),V(83),N()()()()(),O(84,"section",1)(85,"h2"),V(86,"Extensions"),N(),O(87,"p"),V(88," Break boring lines on the southface and create more interesting view points with a "),O(89,"tag",15),V(90,"south extension"),N(),rt(91,"i"),V(92,". The colder, darker side (less windows by design) is located in the convenient "),O(93,"tag",15),V(94,"north wing"),N()(),O(95,"h3"),V(96,"Body parts "),N(),fn(97,Ryt,1,0,"ng-template",null,24,C0),fn(99,Fyt,1,0,"ng-template",null,25,C0),O(101,"label")(102,"span"),V(103,"South extension "),N(),O(104,"mat-slider",26),mn("input",function(r){Ai(t);const s=pn();return h(s.update("house","studAmountSouth",r.value,s.tags.extensionToSouth))}),N()(),O(105,"label")(106,"span"),V(107," North wing "),N(),O(108,"mat-slider",27),mn("input",function(r){Ai(t);const s=pn();return h(s.update("house","studAmountNorth",r.value,s.tags.extensionToNorth))}),N()(),O(109,"label")(110,"span"),V(111," West wing "),N(),O(112,"mat-slider",27),mn("input",function(r){Ai(t);const s=pn();return h(s.update("house","studAmountWest",r.value,s.tags.extensionToWest))}),N()(),O(113,"label")(114,"span"),V(115," East wing "),N(),O(116,"mat-slider",27),mn("input",function(r){Ai(t);const s=pn();return h(s.update("house","studAmountEast",r.value,s.tags.extensionToEast))}),N()(),O(117,"label",23)(118,"span"),V(119,"Technical "),N(),O(120,"table")(121,"tr")(122,"td"),V(123,"Floor"),N(),O(124,"td"),V(125,"area"),N(),O(126,"td"),V(127,"ground"),N(),O(128,"td"),V(129),N()(),O(130,"tr"),rt(131,"td")(132,"td"),O(133,"td"),V(134,"top"),N(),O(135,"td"),V(136),N()(),O(137,"tr"),rt(138,"td")(139,"td"),O(140,"td"),V(141,"total"),N(),O(142,"td"),V(143),N()(),O(144,"tr")(145,"td"),V(146," Wall"),N(),O(147,"td"),V(148,"inside"),N(),O(149,"td"),V(150,"length"),N(),O(151,"td"),V(152),N()(),O(153,"tr"),rt(154,"td")(155,"td"),O(156,"td"),V(157,"area"),N(),O(158,"td"),V(159),N()(),O(160,"tr"),rt(161,"td"),O(162,"td"),V(163,"outside"),N(),O(164,"td"),V(165,"length"),N(),O(166,"td"),V(167),N()(),O(168,"tr"),rt(169,"td")(170,"td"),O(171,"td"),V(172,"area"),N(),O(173,"td"),V(174),N()()()()(),O(175,"section",28)(176,"h3"),V(177,"Tower"),N(),O(178,"p"),V(179,"This tower is a practical backdoor and allows you to walk from the kitchen to the rest of the house. It creates also a viewpoint from the roof! We like the tower. "),N(),O(180,"mat-slide-toggle",29),mn("ngModelChange",function(r){return Ai(t),h(pn().update("house","showTower",r))}),V(181,"With a practical tower "),N()(),O(182,"section",1)(183,"h1"),V(184,"Cross section"),N(),O(185,"h2"),V(186,"Slicing it, the basics"),N(),O(187,"p"),V(188,"High ceilings are nice and makes the house feel larger, they costs more but worth it. Heat problems are less with floorheathing."),N(),O(189,"label")(190,"span"),V(191),N(),O(192,"mat-slider",30),mn("input",function(r){return Ai(t),h(pn().update("cross","ceilingHeight",r.value))}),N()(),O(193,"h3"),V(194),N(),O(195,"p"),V(196,"Way too technical in this design fase! However a crawler space can raise the whole building, changing the overall experience. It can protect more against climate change. Floodings or heavy rains. It is also more expensive and takes more time to build."),N(),O(197,"mat-slide-toggle",29),mn("ngModelChange",function(r){return Ai(t),h(pn().update("cross","crawlerSpace",r))}),V(198),N(),O(199,"label")(200,"span"),V(201),N(),O(202,"mat-slider",31),mn("input",function(r){return Ai(t),h(pn().update("cross","floorAboveGround",r.value))}),N()()(),O(203,"section",1)(204,"h2"),V(205,"Roof style"),N(),O(206,"p")(207,"a",32),V(208,"Mansard or Gambrel roof"),N(),V(209," is gives a nice classic countryside stylefull roof.There are three methods to create them. We check both the \"circle\" and '70\xb0/30\xb0'"),N(),O(210,"h2"),V(211,"Circle-based"),N(),O(212,"p"),V(213,"Draw a "),O(214,"tag",20),V(215,"half circle"),N(),V(216," with 45\xb0 lines to create the breakpoints. If you use the slider to create more overhang, the circle moves with it, to keep proportions. The angles are resp: 67.5\xb0, 22.5\xb0 "),N(),O(217,"label")(218,"span"),V(219,"(Fictive) 'Wider roof'"),N(),O(220,"mat-slider",33),mn("input",function(r){Ai(t);const s=pn();return h(s.update("cross","roofCirclePullDown",r.value,s.tags.halfCircle))}),N()(),O(221,"label")(222,"span"),V(223),N(),O(224,"mat-slider",33),mn("input",function(r){return Ai(t),h(pn().update("cross","roofCircleWalls",r.value))}),N()()(),O(225,"section",1)(226,"h2"),V(227,"The 70\xb0/30\xb0 roof"),N(),O(228,"p"),V(229,"With this technique, draw a line 70\xb0 until a "),O(230,"tag",15),V(231,"bend point"),N(),V(232,". After than follow 30\xb0. Think about the solar potential! "),N(),V(233," . A common seen classical symmetrical design. "),fn(234,kyt,1,0,"ng-template",null,34,C0),O(236,"label")(237,"span"),V(238,"Move "),O(239,"tag",15),V(240,"bend point"),N()(),O(241,"mat-slider",33),mn("input",function(r){Ai(t);const s=pn();return h(s.update("cross","roof70offset",r.value,s.tags.bendPoint))}),N()(),O(242,"label")(243,"span"),V(244),N(),O(245,"mat-slider",33),mn("input",function(r){Ai(t);const s=pn();return h(s.update("cross","roof70Walls",r.value,s.tags.roofWalls))}),N()(),O(246,"label")(247,"span"),V(248),N(),O(249,"mat-slider",33),mn("input",function(r){return Ai(t),h(pn().update("cross","roof70Extension",r.value))}),N()()(),O(250,"section",1)(251,"h3"),V(252,"Roof, 70\xb0 or Circle"),N(),O(253,"p"),V(254,"We should choose a roof. There are more possibilities in the end. But for now a mansard roof it is. "),N(),O(255,"mat-button-toggle-group",35),mn("ngModelChange",function(r){return h(Ai(t).ngIf.cross.roofStyle=r)})("ngModelChange",function(r){return Ai(t),h(pn().choosenRoofstyle(r))}),O(256,"mat-button-toggle",36),V(257,"Circle based"),N(),O(258,"mat-button-toggle",36),V(259,"Both"),N(),O(260,"mat-button-toggle",36),V(261,"70\xb0 based"),N()()(),O(262,"section",1)(263,"h3"),V(264,"The roof edge"),N(),O(265,"p"),V(266,"We can look at the silhouette to image it a bit better. We can also add or remove a gutter, and more decorative "),N()(),ao()}if(2&n){const t=e.ngIf,i=Qo(21),r=Qo(29),s=Qo(42),o=Qo(61),a=Qo(98),c=Qo(100),l=Qo(235),u=pn();ae(1),Ve("id",u.Section.welcome),ae(2),si("Welcome to ",t.name,""),ae(3),Ve("id",u.Section.passiv),ae(12),Ve("tag",u.tags.insulated)("overlayTemplate",i),ae(7),Ve("tag",u.tags.orientation)("overlayTemplate",r),ae(14),Ve("tag",u.tags.efficiency)("overlayTemplate",s),ae(6),Ve("id",u.Section.basics),ae(9),Ve("tag",u.tags.baseDimension)("overlayTemplate",o),ae(3),Ve("tag",u.tags.viewlines),ae(8),Ve("ngModel",t.studAmount),ae(4),si(" We talk in studs, wooden columns in the wall. They are the core that follow a grid of ",100*t.studDistance," cm. The "),ae(1),Ve("tag",u.tags.baseDimension)("overlayTemplate",o),ae(2),si(" wall has now ",t.studAmount," studs. "),ae(11),si("",null==t.stats.floor.all?null:t.stats.floor.all.area," m2"),ae(1),Ve("id",u.Section.extensions),ae(5),Ve("tag",u.tags.extensionToSouth)("overlayTemplate",a),ae(4),Ve("tag",u.tags.extensionToNorth)("overlayTemplate",c),ae(11),Ve("ngModel",t.studAmountSouth)("displayWith",u.studLabel),ae(4),Ve("min",9)("max",18)("ngModel",t.studAmountNorth)("displayWith",u.studLabel),ae(4),Ve("min",5)("max",15)("ngModel",t.studAmountWest)("displayWith",u.studLabel),ae(4),Ve("min",5)("max",9)("ngModel",t.studAmountEast)("displayWith",u.studLabel),ae(13),si("",t.stats.floor.ground.area," m2"),ae(7),si("",t.stats.floor.top.area," m2"),ae(7),si("",null==t.stats.floor.all?null:t.stats.floor.all.area," m2"),ae(9),si("",t.stats.wall.innerLength," m"),ae(7),si("",t.stats.wall.innerArea," m2"),ae(8),si("",t.stats.wall.outerLength," m"),ae(7),si("",t.stats.wall.outerArea," m2"),ae(1),Ve("id",u.Section.tower),ae(5),Ve("ngModel",t.showTower),ae(2),Ve("id",u.Section.roofBasics),ae(9),si("Ceiling height: ",t.cross.ceilingHeight," m"),ae(1),Ve("ngModel",t.cross.ceilingHeight),ae(2),si("Foundation: ",t.cross.crawlerSpace?"crawler space":"flat foundation",""),ae(3),Ve("ngModel",t.cross.crawlerSpace),ae(1),si("With a ",t.cross.crawlerSpace?"crawler space":"flat foundation"," "),ae(3),si("Ground floor above ground: ",t.cross.floorAboveGround," m"),ae(1),Ve("max",t.cross.crawlerHeight+t.cross.groundFloorThickness)("ngModel",t.cross.floorAboveGround),ae(1),Ve("id",u.Section.roofCircle),ae(11),Ve("tag",u.tags.halfCircle),ae(6),Ve("ngModel",t.cross.roofCirclePullDown),ae(3),si("Walls under the roof ",t.cross.roofCircleWalls,"m"),ae(1),Ve("ngModel",t.cross.roofCircleWalls),ae(1),Ve("id",u.Section.roof70),ae(5),Ve("tag",u.tags.bendPoint)("overlayTemplate",l),ae(9),Ve("tag",u.tags.bendPoint)("overlayTemplate",l),ae(2),Ve("ngModel",t.cross.roof70offset),ae(3),si("Walls under the roof: ",t.cross.roof70Walls,"m"),ae(1),Ve("ngModel",t.cross.roof70Walls),ae(3),si("Roof extension: ",t.cross.roof70Extension,"m"),ae(1),Ve("ngModel",t.cross.roof70Extension),ae(1),Ve("id",u.Section.roofChoice),ae(5),Ve("ngModel",t.cross.roofStyle),ae(1),Ve("value",u.RoofStyle.roofCircle),ae(2),Ve("value",u.RoofStyle.roofCircleAnd70),ae(2),Ve("value",u.RoofStyle.roof70),ae(2),Ve("id",u.Section.roofEdge)}}let Hyt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=_t,this.tags=O3,this.RoofStyle=kl,this.round=An,this.discord=this.appService.discord,this.faDiscord=bM,this.update=this.houseService.update}ngAfterViewInit(){}studLabel(t){return`#${t} `}sizeLabel(t){return`${t} m`}choosenRoofstyle(t){this.houseService.update("cross","roofStyle",t)}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(To))},n.\u0275cmp=On({type:n,selectors:[["app-page-house"]],decls:44,vars:6,consts:[[4,"ngIf"],[3,"id"],["target","_blank",2,"background","var(--primary-color)","padding","0 6px","color","white",3,"href"],[3,"icon"],["fxLayout","column","fxLayoutGap","3px",2,"max-width","180px"],["mat-flat-button","","color","accent","routerLink","/stairs"],[2,"font-family","Material Icons Outlined"],["fxLayout","column","fxLayoutGap","16px",2,"max-width","180px"],["mat-flat-button","","color","accent","routerLink","/construction"],["mat-flat-button","","color","accent","routerLink","/wired"],["mat-flat-button","","color","accent","routerLink","/costs"],["mat-flat-button","","color","accent","routerLink","/installations"],[1,"mat-caption"],[2,"font-size","0.7em"],["href","https://passivehouse.com/","target","_blank"],["cdkOverlayOrigin","",3,"tag","overlayTemplate"],["insulated",""],["orientation",""],["fxLayoutAlign","center",2,"margin","8px 0 32px"],["efficiency",""],[3,"tag"],["baseDimension",""],["min","6","max","15","tickInterval","1",3,"ngModel","input"],[1,"technical"],["extensionToSouth",""],["extensionToNorth",""],["min","0","max","6","thumbLabel","","tickInterval","1",3,"ngModel","displayWith","input"],["thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],[2,"padding-bottom","80px",3,"id"],[3,"ngModel","ngModelChange"],["min","1.9","max","3.6","step","0.1","tickInterval","1",3,"ngModel","input"],["min","0","step","0.1","tickInterval","1",3,"max","ngModel","input"],["href","https://en.wikipedia.org/wiki/Mansard_roof","target","_blank"],["min","0","max","2","step","0.1","tickInterval","1",3,"ngModel","input"],["bendPoint",""],["name","roofstyle",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,i){1&t&&(fn(0,Pyt,267,77,"ng-container",0),wa(1,"async"),O(2,"section",1)(3,"h3"),V(4,"This was the main design"),N(),O(5,"p"),V(6,"This site has a lot of info, if you are up for more. Feel free to join us at this "),O(7,"a",2),rt(8,"fa-icon",3),V(9," discord channel "),N(),V(10,": "),N(),rt(11,"br"),O(12,"p"),V(13,"Next step is to get the sizes of the stairs."),N(),O(14,"div",4)(15,"button",5)(16,"mat-icon",6),V(17,"stairs"),N(),O(18,"span"),V(19,"Stairs"),N()()(),O(20,"p"),V(21,"Its also okay to leave them default and check out other chapters!"),N(),rt(22,"br"),O(23,"div",7)(24,"button",8)(25,"mat-icon"),V(26,"handyman"),N(),O(27,"span"),V(28,"Construction"),N()(),O(29,"button",9)(30,"mat-icon"),V(31,"bolt"),N(),O(32,"span"),V(33,"Wired"),N()(),O(34,"button",10)(35,"mat-icon",6),V(36,"savings"),N(),O(37,"span"),V(38,"Costs"),N()(),O(39,"button",11)(40,"mat-icon"),V(41,"solar_power"),N(),O(42,"span"),V(43,"Installations"),N()()()()),2&t&&(Ve("ngIf",Y1(1,4,i.house$)),ae(2),Ve("id",i.Section.EndOfPageHouse),ae(5),gu("href",i.discord,xl),ae(1),Ve("icon",i.faDiscord))},dependencies:[x4,F9e,D8,Cx,xx,jY,$C,C9,iZ,rZ,Cd,F8,xd,_P,l9,TS,Tyt,sd]}),n})();function zyt(n,e){if(1&n){const t=Va();oo(0),O(1,"section",2,3)(3,"h1"),V(4,"Stairs"),N(),O(5,"p",4),V(6," Stairs are its own thing. There are even whole pinterest collections dedicated to stairs. "),N()(),O(7,"section",2)(8,"h2"),V(9,"Stair 101"),N(),O(10,"p"),V(11," There are different approaches to calculate stairs. We already did the following for us. "),N(),O(12,"ol")(13,"li"),V(14,"The "),O(15,"b"),V(16,"vertical"),N(),V(17),N(),O(18,"li"),V(19,"Building code allows the rise of the step to be between: 182mm and 220mm.Therefore we can only have between "),O(20,"b"),V(21),N()()(),O(22,"label")(23,"span"),V(24),N(),O(25,"mat-slider",5),mn("input",function(r){Ai(t);const s=pn();return h(s.update("stair","steps",r.value,s.Tag.amountSteps))}),N()(),O(26,"ol",6)(27,"li"),V(28,"The min and max "),O(29,"b"),V(30,"horizontal distance"),N(),V(31," is easy, the stairs should be between 30\xb0 and 35\xb0"),N()(),O(32,"label")(33,"span"),V(34),N(),O(35,"mat-slider",7),mn("input",function(r){return Ai(t),h(pn().update("stair","totalRun",r.value))}),N()(),O(36,"ol",8)(37,"li"),V(38),N()()(),O(39,"section",2,9)(41,"h2"),V(42,"The good, bad and perfect stairs"),N(),O(43,"label")(44,"span"),V(45,"Checks"),N(),V(46),O(47,"div"),V(48),N(),O(49,"div"),V(50),N(),O(51,"div"),V(52),N(),O(53,"div"),V(54),N()()(),O(55,"section",2,10)(57,"h2"),V(58,"Stair layout"),N(),O(59,"p"),V(60," Stairs can be straight, but we like to have two bends. This makes the stairs relative more compact. It prevents to falldown the complete stairs in accidents. Sideplus, it comes with a nice open hall effect. "),N(),O(61,"label")(62,"span"),V(63),N(),O(64,"mat-slider",11),mn("input",function(r){return Ai(t),h(pn().update("stair","walkWidth",r.value))}),N()(),O(65,"label")(66,"span"),V(67),N(),O(68,"mat-slider",11),mn("input",function(r){return Ai(t),h(pn().update("stair","totalWidth",r.value))}),N()(),O(69,"label")(70,"span"),V(71),N(),O(72,"mat-slider",12),mn("input",function(r){return Ai(t),h(pn().update("stair","stepsRight",r.value))}),N()(),O(73,"p"),V(74," For now we keep the model as simple as possible. Stairs are quite complex. Steps can change direction slowly to make it a piece of art by it self. "),N(),rt(75,"img",13),N(),ao()}if(2&n){const t=e.ngIf,i=pn();ae(1),Ve("id",i.Section.stairStart),ae(6),Ve("id",i.Section.stairBasic),ae(10),si(" distance is already decided by the house: ",t.stair.totalRise,"m"),ae(4),c7("",t.stair.minSteps," and ",t.stair.maxSteps," steps"),ae(3),si("Total steps: horizontal ",t.stair.steps,""),ae(1),Ve("min",t.stair.minSteps)("max",t.stair.maxSteps)("ngModel",t.stair.steps)("displayWith",i.sizeLabel),ae(9),si("Total length stairs: horizontal ",t.stair.totalRun,"m"),ae(1),Ve("min",i.totalRunMin)("max",i.totalRunMax)("ngModel",t.stair.totalRun)("displayWith",i.sizeLabel),ae(3),si("The angle now is: ",t.stair.angle,"\xb0"),ae(1),Ve("id",i.Section.stairCheck),ae(7),si(" The angle will be ",t.stair.angle,"\xb0 "),ae(2),si("Steps: ",t.stair.steps,""),ae(2),si("Rise: ",t.stair.rise," m"),ae(2),si("Run: ",t.stair.run," m"),ae(2),si("Rise+Run+Rise: ",10*t.stair.step," cm"),ae(1),Ve("id",i.Section.stairPlan),ae(8),si("Width ",t.stair.walkWidth,"m"),ae(1),Ve("min",.7)("max",1.2)("ngModel",t.stair.walkWidth),ae(3),si("Total width of stairs: ",t.stair.totalWidth,"m"),ae(1),Ve("min",2*t.stair.walkWidth)("max",12)("ngModel",t.stair.totalWidth),ae(3),c7("Steps on the rightside: ",t.stair.stepsRight," of ",t.stair.steps,""),ae(1),Ve("min",0)("max",t.stair.steps/2)("ngModel",t.stair.stepsRight)}}let Oyt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=_t,this.Tag=O3,this.tagsKeys=Object.keys(O3),this.deltas=4,this.update=this.houseService.update}ngAfterViewInit(){}sizeLabel(t){return`${t}m`}get totalRunMax(){return An(this.house$.value.stair.totalRise/Math.tan(xne(30)),1)}get totalRunMin(){return An(this.house$.value.stair.totalRise/Math.tan(xne(35)),1)}get rangeRun(){return this.totalRunMax-this.totalRunMin}get rangeSteps(){const t=this.house$.value.stair;return t.maxSteps-t.minSteps+1}currentRun(t){return An(t/(this.deltas-1)*this.rangeRun+this.totalRunMin)}currentCell(t,i){const r=this.house$.value.stair,s=this.currentRun(i);return An(s/(r.minSteps+t)*1e3,-1)}score(t,i){return t<220?"too-little":t>300?"too-much":void 0}select(t,i){this.update("stair","steps",t),this.update("stair","totalRun",i)}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(To))},n.\u0275cmp=On({type:n,selectors:[["app-page-stairs"]],decls:3,vars:3,consts:[[4,"ngIf"],["identifier","PassiveOpen-Stairs"],[3,"id"],["Section.stairStart",""],[1,"mat-caption"],["step","1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","3"],["step","0.1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","4"],["Section.stairCheck",""],["Section.stairPlan",""],["step","0.1","tickInterval","1",3,"min","max","ngModel","input"],["step","1","tickInterval","1",3,"min","max","ngModel","input"],["width","100%","src","https://berkela.home.xs4all.nl/stijgpunten/afbeeldingen/tn_2005extra07_11.jpg"]],template:function(t,i){1&t&&(fn(0,zyt,76,36,"ng-container",0),wa(1,"async"),rt(2,"disqus",1)),2&t&&Ve("ngIf",Y1(1,1,i.house$))},dependencies:[x4,xx,$C,C9,O9,sd],styles:[".matrix[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-wrap:wrap;flex-direction:row}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{display:block;border:1px solid black;border-radius:0;padding:0;margin:0;min-width:initial;min-height:inherit;line-height:1em;white-space:pre-wrap}.matrix[_ngcontent-%COMP%]   .matrix-cell.too-much[_ngcontent-%COMP%], .matrix[_ngcontent-%COMP%]   .matrix-cell.too-litte[_ngcontent-%COMP%]{border:1px solid rgb(255,255,255);opacity:.6}"]}),n})();function Nyt(n,e){if(1&n&&(O(0,"th",17),V(1),N()),2&n){const t=pn().$implicit;ae(1),si(" ",t.name," ")}}function Vyt(n,e){if(1&n&&rt(0,"span",20),2&n){const t=pn().$implicit,i=pn().$implicit;Ve("innerHTML",i.def(t[i.id],t.unit),k3)}}function Uyt(n,e){if(1&n&&(O(0,"td",18),fn(1,Vyt,1,1,"span",19),N()),2&n){const t=e.$implicit,i=pn().$implicit;ae(1),Ve("ngIf",t[i.id])}}function Gyt(n,e){1&n&&(oo(0,14),fn(1,Nyt,2,1,"th",15),fn(2,Uyt,2,1,"td",16),ao()),2&n&&Ve("matColumnDef",e.$implicit.id)}function Qyt(n,e){1&n&&rt(0,"tr",21)}function Wyt(n,e){1&n&&rt(0,"tr",22)}function jyt(n,e){if(1&n){const t=Va();oo(0),O(1,"table",7),fn(2,Gyt,3,1,"ng-container",8),fn(3,Qyt,1,0,"tr",9),fn(4,Wyt,1,0,"tr",10),N(),O(5,"h3"),V(6,"The numbers that matter:"),N(),O(7,"p",11)(8,"span"),V(9,"r"),O(10,"sub"),V(11,"construction"),N()(),O(12,"span"),V(13),N(),O(14,"span"),V(15,"U "),N(),O(16,"span"),V(17),N(),O(18,"span"),V(19,"Wall thickness "),N(),O(20,"span"),V(21),N()(),O(22,"label")(23,"span"),V(24),N(),O(25,"mat-slider",12),mn("input",function(r){return Ai(t),h(pn().updateJoist(r.value))}),N()(),O(26,"label")(27,"span"),V(28),N(),O(29,"mat-slider",13),mn("input",function(r){Ai(t);const s=pn();return h(s.updateOuterSheet(s.round(r.value,4)))}),N()(),ao()}if(2&n){const t=e.ngIf,i=pn();ae(1),Ve("dataSource",t.construction.heatCalcs),ae(1),Ve("ngForOf",i.columns),ae(1),Ve("matHeaderRowDef",i.columnNames),ae(1),Ve("matRowDefColumns",i.columnNames),ae(9),si(" ",t.construction.rConstruction,""),ae(4),si(" ",t.construction.U,""),ae(4),si(" ",t.construction.outerWallThickness,"m"),ae(3),si("I joist thickness (and main insulation) ",t.construction.thickness[i.Thicknesses.joists]," mm "),ae(1),Ve("max",i.joists.length-1)("ngModel",i.currentJoist()),ae(3),si("Celit thickness (",t.construction.thickness[i.Thicknesses.outerSheet],"mm ) "),ae(1),Ve("ngModel",t.construction.thickness[i.Thicknesses.outerSheet])}}let $yt=(()=>{class n{constructor(t){this.houseService=t,this.house$=this.houseService.house$,this.Tag=O3,this.Section=_t,this.update=this.houseService.update,this.round=An,this.Thicknesses=un,this.joists=[200,300,350,400],this.columns=[{id:"name",name:"Name",def:i=>`${i}`},{id:"diameter",name:"Diameter",def:i=>`${An(i,3)}`},{id:"lambda",name:"Lambda",def:i=>`${An(i,3)}`},{id:"r",name:"R",def:i=>`${An(i,2)}`},{id:"deltaT",name:"Delta T",def:i=>`${An(i,1)}\xb0C`},{id:"temp",name:"Temp",def:i=>`${An(i,1)}\xb0C`}],this.columnNames=this.columns.map(i=>i.id),this.currentJoist=()=>this.joists.findIndex(i=>i===this.house$.value.construction.Thicknesses[un.joists])}ngAfterViewInit(){}updateJoist(t){this.update("construction","thicknessJoist",this.joists[t])}updateOuterSheet(t){this.update("construction","thicknessJoist",this.joists[t])}}return n.\u0275fac=function(t){return new(t||n)(G(qo))},n.\u0275cmp=On({type:n,selectors:[["app-page-construction"]],decls:194,vars:29,consts:[[3,"id"],[1,"counter"],["href","https://www.peutz.nl/sites/peutz.nl/files/publicaties/Peutz_publicatie_HBr_TVVLMagazine_03-2007.pdf"],["href","https://en.wikipedia.org/wiki/Panelling"],[3,"tag"],[4,"ngIf"],["identifier","PassiveOpen-Construction"],["mat-table","",1,"mat-elevation-z0",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["gdColumns"," 1fr 1fr","gdGap","8px"],["min","0","step","1","tickInterval","1",3,"max","ngModel","input"],["min","0","max","150","step","10","tickInterval","1",3,"ngModel","input"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(O(0,"section",0)(1,"h1"),V(2," Construction "),N(),O(3,"h3"),V(4," This page is still under construction. "),N()(),O(5,"section",0)(6,"h2",1),V(7,"Foundation"),N(),O(8,"p"),V(9," Depends a lot on the region. In this case we use a 'mono-pour' together with the crawler space walls. "),N()(),O(10,"section",0)(11,"h2",1),V(12,"Crawler space walls"),N(),O(13,"p"),V(14," Here we use "),O(15,"tag"),V(16,"Insulated Concrete Forms (ICFs)"),N(),V(17,". These walls are connected to the floor and should be insulated. ICFs allows you to build these walls yourself. "),N()(),O(18,"section",0)(19,"h2",1),V(20,"Ground floor"),N(),O(21,"p"),V(22," Mass (heavy things) can keep heat. Like a stone wall after sunset would emit heat. It works also the opposite. Like churches are nice cool in the summer. Mass balance out the heat in a nice way. A complete wooden house, would not have that effect. Therefore some mass is a good thing to have. "),rt(23,"br")(24,"br"),V(25," Hollow-concrete-plate are relatively light and have the mass we look for. They can come with insulation, altho this would not be damp-open. "),O(26,"a",2),V(27,"https://www.peutz.nl/sites/peutz.nl/files/publicaties/Peutz_publicatie_HBr_TVVLMagazine_03-2007.pdf"),N()()(),O(28,"section",0)(29,"h2",1),V(30,"Sole beams"),N(),O(31,"p"),V(32," Its never a good idea to build wood straight on concrete."),rt(33,"br"),V(34," Therefore we use: "),N(),O(35,"ul")(36,"li"),V(37," a weather-resistent filt "),N(),O(38,"li"),V(39," pressured-treated plate (more water resistent), "),N(),O(40,"li"),V(41," the base plate. "),N()()(),O(42,"section",0)(43,"h2",1),V(44,"I-Joists"),N(),O(45,"p"),V(46," This is the actual structure. These i-joist are engineered. So they are straight, and cost less wood to produce. The "),O(47,"tag"),V(48,"on-center"),N(),V(49," distance (EU is often 60cm, US 16inch) is important. Only the first and last stud should not follow this grid, because otherwise the product on the finish end exactly on center of the stud. This is wrong because it the edge of the house, so the material should continue to the end. Wood is the material for construction. It is a storage of CO"),O(50,"sub"),V(51,"2"),N(),V(52,", natural, light and easy to work with. Modern products like, "),O(53,"tag"),V(54,"I Joists"),N(),V(55,", are even stronger than their natual twins. And you don't need to have a 30cm tree to produce a 30cm beam, so trees can be used more effective. (A disadvantage can be the glue used tho). Wood can last forever, think of all the old houses in old cities. "),N()(),O(56,"section",0)(57,"h2",1),V(58,"OSB (on the inside)"),N(),O(59,"p"),V(60," Traditional seen, OSB is used for a airtight outside layer. It also helps the whole building to be more solid, it can deal with sheer stresses. In this build, we will build "),O(61,"tag"),V(62,"damp open"),N(),V(63," and OSB is a perfect airtight product, but will also block moisture. Therefore it is actually great on the inside of the house "),N()(),O(64,"section",0)(65,"h2",1),V(66,"Tape"),N(),O(67,"p"),V(68," OSB and all the other seams are of course not air-tight. Therefore should we tape every seam. This step is harder than it sounds, especially around windows. You might not pass your passiv-haus certification due to this step."),rt(69,"br")(70,"br"),V(71," This steps includes also windows/doors and close all openings for a door-blower test. "),N()(),O(72,"section",0)(73,"h2",1),V(74,"Wall-Floor beam"),N(),O(75,"p"),V(76," The top-floor will hang on the inside of the wall. This prevents a "),O(77,"tag"),V(78,"thermal bridge"),N(),V(79,", in other words, this makes it more easy to "),O(80,"tag"),V(81,"air tighten"),N(),V(82," the house and the insulation continues "),N()(),O(83,"section",0)(84,"h2",1),V(85,"Wooden floor"),N(),O(86,"p"),V(87," Joists and osb "),N()(),O(88,"section",0)(89,"h2",1),V(90,"Roof ridge"),N(),rt(91,"p"),N(),O(92,"section",0)(93,"h2",1),V(94,"Roof joists"),N(),rt(95,"p"),N(),O(96,"section",0)(97,"h2",1),V(98,"Roof Inside"),N(),O(99,"p"),V(100," The roof need sturdiness. So we use OSB here as well as the inner layer. All seams can be taped directly "),N()(),O(101,"section",0)(102,"h2",1),V(103,"Insulation"),N(),O(104,"p"),V(105," Very important step. Keep it all dry. It feels like glass-insulation is best best of both worlds. It's often recycled glass and has a relative small footprint to the more eco-friendly alternatives. Stay away from wool for example. It is also very affordable, so we can focus our money on more expensive windows "),N()(),O(106,"section",0)(107,"h2",1),V(108,"Damp open outer sheets"),N(),O(109,"p"),V(110," Here are multiple options. We don't like to use plastics here. A great option is "),O(111,"tag"),V(112,"fiberboard's"),N(),V(113,", they are damp open, some what water resistant. This is an environment friendly product. It can be out in the rain for 4 weeks, while building. "),N()(),O(114,"section",0)(115,"h2",1),V(116,"Roof Woodwork"),N(),O(117,"p"),V(118," grid of wood "),N()(),O(119,"section",0)(120,"h2",1),V(121,"Roof tiles"),N(),O(122,"p"),V(123," Tiles. "),N()(),O(124,"section",0)(125,"h2",1),V(126,"Cavity (vent space)"),N(),O(127,"p"),V(128," This step depends a lot on the outer finish. In this example we use vertical wooden planks. Therfore we need first vertical strips (the construction is vertical, and water needs to run down). On top of these strips are horizontal strips so we can add vertical facade planks "),N()(),O(129,"section",0)(130,"h2",1),V(131,"Outer wall"),N(),O(132,"p"),V(133," In this example we use wooden planks. Traditionally seen, it was impossible to make big planks. So in the early days the alternate with big planks and smaller strips. "),N()(),O(134,"section",0)(135,"h2",1),V(136,"Service wall"),N(),O(137,"p"),V(138," To prevent puncture in our air-tight OSB layer. There will be a service layer that contains all electric, water and such. It comes with extra insulation. This makes (small) renovations possible in the future. "),N()(),O(139,"section",0)(140,"h2",1),V(141,"Gips / Drywall / wood-finish"),N(),O(142,"p"),V(143," The inside wall will be either covered by gypsum/drywall. We also very like the idea of lower "),O(144,"a",3),V(145,"paneling"),N()()(),O(146,"h2"),V(147,"The water problem"),N(),O(148,"p"),V(149," Warm air can contain more water, so the inside air normally would go through the wall and cools down. To a point that it cannot hold longer that amount of water, so it condense in the middle of the wall. "),rt(150,"br")(151,"br"),V(152," Traditional building takes that problem with plastic wraps. One on the outside to keep weather out. And a even more water-closed layer in the inside. Water moves out the construction. It is important during the building fase, to keep everything relatively dry. "),rt(153,"br")(154,"br"),V(155," The alternative is: "),O(156,"tag"),V(157,"damp Open"),N(),V(158,". where no wraps are needed. The inner layer of the house has a water-closed natural layer (OSB sheets). The outside layer is 'damp-open' so it would not absorb rainwater, but the moist air from inside can escape. It is more like a Dutch slogan: not fighting the water, but living with (some) water. "),rt(159,"br")(160,"br"),V(161," We try to look what is the best insulation out there. We think wood-fiber is the best most sustainable in therms of production/insulation values. Stone/glass fibers are a little bit less on the production level, but a bit more durable over time. "),rt(162,"br")(163,"br"),O(164,"tag",4),V(165,"Wood fiber panels"),N(),V(166," are treated with bitumen, there are light, water-resistant and still insulating. They are a perfect layer for the outside layer of the construction (not final outer layer). "),rt(167,"br")(168,"br"),V(169," On the inside of the OSB is an extra 2cm layer and finises of with wood or drywall(gips plates). This layer is practical, because all the switches and wall socket cannot interfere with the air-tight-layer. With a "),O(170,"tag",4),V(171," pipeLayer"),N(),V(172," is it:\n"),N(),O(173,"ol")(174,"li"),V(175,"Easier to build keep it "),O(176,"tag",4),V(177,"air tight"),N()(),O(178,"li"),V(179,"Deal with sockets in a later stage"),N(),O(180,"li"),V(181,"Modifications"),N()(),O(182,"section",0)(183,"h2"),V(184," Walls outer finish "),N(),O(185,"p"),V(186," Wooden house, has wood on the outside. Not completely tru. Wood is a sustainable choice (altho we wonder, painting it every 10 years...), but in theory can we have anything on the outside. Keep in mind if you build"),O(187,"tag"),V(188,"damp-open "),N(),V(189," that the finish-layer should also be damp-open. Bricks are for example. The cement is definitely not sustainable, but there is no maintenance in the coming 100-ish years. "),N()(),O(190,"section",0),fn(191,jyt,30,12,"ng-container",5),wa(192,"async"),N(),rt(193,"disqus",6)),2&t&&(Ve("id",i.Section.constructionWelcome),ae(5),Ve("id",i.Section.constructionFoundation),ae(5),Ve("id",i.Section.constructionCrawlerSpace),ae(8),Ve("id",i.Section.constructionGroundFloor),ae(10),Ve("id",i.Section.constructionWallSole),ae(14),Ve("id",i.Section.constructionWallJoists),ae(14),Ve("id",i.Section.constructionWallOSB),ae(8),Ve("id",i.Section.constructionWallTape),ae(8),Ve("id",i.Section.constructionFloorLVL),ae(11),Ve("id",i.Section.constructionFloor),ae(5),Ve("id",i.Section.constructionRoofRidge),ae(4),Ve("id",i.Section.constructionRoofJoist),ae(4),Ve("id",i.Section.constructionRoofInside),ae(5),Ve("id",i.Section.constructionWallInsulation),ae(5),Ve("id",i.Section.constructionWallOuterSheet),ae(8),Ve("id",i.Section.constructionRoofSpace),ae(5),Ve("id",i.Section.constructionRoofTiles),ae(5),Ve("id",i.Section.constructionWallSpace),ae(5),Ve("id",i.Section.constructionWallFacade),ae(5),Ve("id",i.Section.constructionWallService),ae(5),Ve("id",i.Section.constructionWallGips),ae(25),Ve("tag",i.Tag.woodFiberPlate),ae(6),Ve("tag",i.Tag.pipeLayer),ae(6),Ve("tag",i.Tag.airTight),ae(6),Ve("id",i.Section.constructionWallFinish),ae(8),Ve("id",i.Section.constructionParameters),ae(1),Ve("ngIf",Y1(192,27,i.house$)))},dependencies:[C4,x4,xx,Px,k9,Hx,P9,F9,zx,H9,z9,Ox,Nx,$C,C9,AZ,vZ,O9,TS,sd],styles:['[_nghost-%COMP%]{counter-reset:heading}h2.counter[_ngcontent-%COMP%]{position:relative;counter-reset:subheading}h2.counter[_ngcontent-%COMP%]:after{content:"Step";position:absolute;top:-1.2em;left:-.6em;font-size:.8em;opacity:.6}h2.counter[_ngcontent-%COMP%]:before{content:counter(heading) "";counter-increment:heading;width:32px;display:inline-block;opacity:.6}']}),n})(),qyt=(()=>{class n{constructor(t,i,r){this.houseService=t,this.threeService=i,this.appService=r,this.house$=this.houseService.house$,this.Section=_t,this.Tag=O3,this.wallDetail="wallDetail",this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.subscriptions.push()}showPerSection(){}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(c_),G(To))},n.\u0275cmp=On({type:n,selectors:[["app-page-facade"]],decls:42,vars:3,consts:[[3,"id"],[1,"mat-caption"],[1,"technical",2,"max-width","640px"],["fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","center center",2,"padding","16px 0 24px"],["src","/assets/img/window_1.jpg",2,"max-height","360px"],["src","/assets/img/window_2.jpg",2,"max-height","360px"],["src","https://ars.els-cdn.com/content/image/1-s2.0-S0378778816316383-gr9.jpg"],["src","/assets/img/door_step_1.jpg",2,"max-height","360px"],["identifier","PassiveOpen-Facade"]],template:function(t,i){1&t&&(O(0,"section",0)(1,"h1"),V(2,"Facade"),N(),O(3,"p",1),V(4," We cover here all the basics about the outside of the house. Windows, doors, domers and bricks. "),N()(),O(5,"section",0)(6,"h1"),V(7,"Window"),N(),O(8,"p"),V(9," Windows are a tradeoff between a nice open light house and: heat loss, heat gain, complexer builds and more expensive. In a passiv house, belongs high end windows, triple glass and high-end framing. That makes it one of the most costly investments. "),N(),O(10,"label",2)(11,"span"),V(12,"Design"),N(),O(13,"span"),V(14," Dutch traditional windows have some variations. "),rt(15,"br")(16,"br"),V(17," The right one is is nicely detailed. Look how the windowframe ends in a little stone, to keep it dry and prevent rotting. However the windowframe is missing at the bottom, the window rest on the stone. Not our modern standards. "),rt(18,"br")(19,"br"),V(20," The major difference between them is that the left one has a frame at the bottom. That is better insulated, and we do need to use less precious stone. "),N(),O(21,"div",3),rt(22,"img",4)(23,"img",5),N(),O(24,"span"),V(25," Furthermore both window-bottom-stones go into the brickwork. If you don't do this, you would create a channel for rainwater (wind blows it in the corner). And the dirt will collect on your walls. Now it would drip off. "),N()(),O(26,"p"),V(27," Place the window in the middle of insulation "),rt(28,"img",6),N()(),O(29,"section",0)(30,"h1"),V(31,"Doors"),N(),O(32,"p"),V(33," For guests the first warm welcome "),N(),O(34,"label",2)(35,"span"),V(36,"Design"),N(),O(37,"span"),V(38,"They kinda look like windows. Ofcourse the bottomframe is missing here. The bottom frame should be wheelchair friendly, altho its a bit contradictive with a eleveated ground floor (due to crawler space). The door and frame should be extreme insulated. "),N(),O(39,"div",3),rt(40,"img",7),N()()(),rt(41,"disqus",8)),2&t&&(Ve("id",i.Section.facadeStart),ae(5),Ve("id",i.Section.facadeWindow),ae(24),Ve("id",i.Section.facadeDoor))},dependencies:[Cd,F8,xd,O9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:48px;align-items:center}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})(),Kyt=(()=>{class n{constructor(t,i,r){this.zone=t,this.appService=i,this.houseService=r,this.Tag=O3,this.Section=_t}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return n.\u0275fac=function(t){return new(t||n)(G(sr),G(To),G(qo))},n.\u0275cmp=On({type:n,selectors:[["app-page-installation"]],decls:95,vars:10,consts:[[3,"id"],[3,"tag"],["identifier","PassiveOpen-installations"]],template:function(t,i){1&t&&(O(0,"section",0)(1,"h1"),V(2,"Installations"),N()(),O(3,"section",0)(4,"h2"),V(5,"Drink water"),N(),O(6,"p"),V(7," Not anything special here on the cold side. You can have a local source if you live on the countryside. "),rt(8,"br")(9,"br"),V(10," Hot/Warm drinkwater is needed in the sinks and showers. This water can be heated up via the central "),O(11,"tag",1),V(12," warm water buffer"),N(),V(13,". A big tank that takes heat from different sources, and allows for hot water and even heating. "),N()(),O(14,"section",0)(15,"h2"),V(16,"Heating"),N(),O(17,"p"),V(18," This is a bit of a contra verse subject. A passive house is passive, it receives energy from the sun, people and machines. The heat loss is minimum. Some passive houses don't need heating at all! In some colder climates some heating in extreme winters can be needed. There is only one real option (except air heating, which is fine for a few days, but less healthy): floor heating. It can use low-heat water from the "),O(19,"tag",1),V(20," warm water buffer"),N(),V(21,"1 "),N()(),O(22,"section",0)(23,"h2"),V(24,"Electricity"),N(),O(25,"p"),V(26," We like the off-grid principles, but still difficult to achieve in the 2020s. However we can take away a huge part of the electricity needed by solar panels and store energy in form of warm water. We can use solar-heat-panels or heating the overflow of electricity during the day to warm up the "),O(27,"tag",1),V(28," warm water buffer "),N(),V(29,". Warm water can be used in the shower, or heating. "),rt(30,"br")(31,"br"),V(32," This Mansard roof is a (near) perfect angle for solar panels. However the to make it look nice is harder. We are still looking for the right panel types with old, classical roof tiles. "),rt(33,"br")(34,"br"),V(35," There is a balance between the time you need electricity (evening, electricity-car & cooking) and when they produce the most (around noon). If you can return-to-the-net orientation to noon is the best. Otherwise some panels could actually more orientated to the west. "),N()(),O(36,"section",0)(37,"h2"),V(38,"Grey water"),N(),O(39,"p"),V(40," With a fancy word, climate adaption: Save rain water when it rains, like a buffer, an use it when a draught happens, or save on treated drinkwater. Rainwater water is perfect, because there are almost no levels of calcium. Water your plants with it, they love it! Flush the toilets with it and was your cloths with it, you ll see that you need less soap. "),rt(41,"br")(42,"br"),V(43," We need a big water tank outside in the ground (10m"),O(44,"sub"),V(45,"3"),N(),V(46,"), a pomp and 3-filter system. All the systems that need to use the rain water need also 'grey'-pipes. If the rainwater tank is empty, you still want the flush the toilets. There is a machine that puts normal drink-water in the 'grey'-pipes as backup. Automatically! "),rt(47,"br")(48,"br"),V(49,"In theory showering with rainwater seems perfect, but most law forbids to bend cold-rainwater with warm-drinkwater. If you do, you need less soap and your hair will be smooooth. "),N()(),O(50,"section",0)(51,"h2"),V(52,"Ventilation"),N(),O(53,"p"),V(54," A passive house is air-tight. It saves on heat loss (more than you would think). A modern house has a blow-in and suck-out ventilation system. The system can take the heat out of exit-air and warm the incoming air up. Only 6% of the heat is lost. A normal ventilation is 100% heat loss. Air-tight, than I can't open my windows. "),rt(55,"br"),V(56," Bit of a miss conception. If the outside temperature is near the inside temperature it's completely fine. Altho with a good climate system you shouldn't feel the need to open the windows! This closed system filters the air. It is perfect when there is smog or if you have hay fever or other allergies . "),rt(57,"br")(58,"br"),V(59," Some rooms get fresh air, living room, sleeping rooms. And some rooms the air is pumped out, the wet rooms and kitchen. This is in balance. In the floor there is some space for this ducts. In the "),O(60,"tag"),V(61,"installation room"),N(),V(62," there is a quite big pomp / filter. "),N()(),O(63,"section",0)(64,"h2"),V(65,"Domotica / Smart home"),N(),O(66,"p"),V(67," With more complex houses, house should become more smart. The air, and maybe the heating, should be automatic. You shouldn't even notice it. On hot summer days, the sunscreens should come down, and with rain up. "),rt(68,"br")(69,"br"),V(70," There is a basic level of intelligence needed but we can take it a few steps further with automatic lights and such. 'Smart home' creates some irritations here and there. And often completely understandable. A smart light without a button is annoying, sometimes you used need a button and not a voice command or smartphone. A smart home has them all, but above all knows when you want to turn on the lamp. "),rt(71,"br")(72,"br"),V(73,"Think of (all if over rulable) "),N(),O(74,"ul")(75,"li"),V(76,"Lights dim more if its evening"),N(),O(77,"li"),V(78,"Red nightlight in the toilet after 23:00"),N(),O(79,"li"),V(80,"Block the sunlight with screens"),N(),O(81,"li"),V(82,"Random light go on if you are on holiday"),N(),O(83,"li"),V(84,"Remote controllable (local VPN not via cloud)"),N(),O(85,"li"),V(86,"More secure, camera's and alarms"),N()(),rt(87,"br")(88,"br"),O(89,"p"),V(90," Wifi is great, but cables are better. If you build a new home, put some more internet cables than needed. A smart home can uses internet cables for sensors, camera and of course computers. Cat 6 cables are easy the work with and fine speeds for most applications (if not longer than 30m or so). Maybe put up a better cat cable for your work- or kids game stations. Shielded is not needed in homes, its only more annoying to work with and more expensive. "),rt(91,"br")(92,"br"),V(93," For us this is still a process we need to rethink. For now we think one single local controller per room for a more decentralized system. Light switches to has a twisted-pair wire back to the room-controller. The light is on a hotel-switch so the button would always work as the digital version. "),N()(),rt(94,"disqus",2)),2&t&&(Ve("id",i.Section.installationWelcome),ae(3),Ve("id",i.Section.installationDrinkWater),ae(8),Ve("tag",i.Tag.warmWaterBuffer),ae(3),Ve("id",i.Section.installationHeating),ae(5),Ve("tag",i.Tag.warmWaterBuffer),ae(3),Ve("id",i.Section.installationElectricity),ae(5),Ve("tag",i.Tag.warmWaterBuffer),ae(9),Ve("id",i.Section.installationGreyWater),ae(14),Ve("id",i.Section.installationVentilation),ae(13),Ve("id",i.Section.installationSmartHome))},dependencies:[O9,TS]}),n})();const e4=class Xyt{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},uz=class Yyt{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function H5(n,e){return n>e?1:n<e?-1:0}function hz(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;{let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return"function"==typeof t?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}}function Jyt(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Uu(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function n6(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function K0(){return!0}function jg(){return!1}function z5(){}function $g(n){for(const e in n)delete n[e]}function qg(n){let e;for(e in n)return!1;return!e}const LS=class nwt extends uz{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t="string"==typeof e,i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new e4(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let c;i in o||(o[i]=0,a[i]=0),++o[i];for(let l=0,u=r.length;l<u;++l)if(c="handleEvent"in r[l]?r[l].handleEvent(s):r[l].call(this,s),!1===c||s.propagationStopped){c=!1;break}if(0==--o[i]){let l=a[i];for(delete a[i];l--;)this.removeEventListener(i,z5);delete o[i]}return c}disposeInternal(){this.listeners_&&$g(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);-1!==r&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=z5,++this.pendingRemovals_[e]):(i.splice(r,1),0===i.length&&delete this.listeners_[e]))}}};function js(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function DS(n,e,t,i){return js(n,e,t,i,!0)}function Ta(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),$g(n))}const b4e=class IS extends LS{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=js(this,e[s],t);return r}return js(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=DS(this,e[s],t)}else i=DS(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)!function iwt(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ta(n[e]);else Ta(n)}(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}};function or(){throw new Error("Unimplemented abstract method.")}let rwt=0;function br(n){return n.ol_uid||(n.ol_uid=String(++rwt))}class M4e extends e4{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}const X0=class swt extends b4e{constructor(e){super(),br(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new M4e(i,e,t)),i="propertychange",this.hasListener(i)&&this.dispatchEvent(new M4e(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],qg(this.values_)&&(this.values_=null),t||this.notify(e,i)}}},owt={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class awt extends Error{constructor(e){const t=owt[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const S4e=awt;function Ss(n,e){if(!n)throw new S4e(e)}class fz extends X0{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new fz(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ta(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=js(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function cwt(n){if("function"==typeof n)return n;{let e;return Array.isArray(n)?e=n:(Ss("function"==typeof n.getZIndex,41),e=[n]),function(){return e}}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const G4=fz;class BS extends e4{constructor(e,t,i){super(e),this.element=t,this.index=i}}const O1=class lwt extends X0{constructor(e,t){if(super(),this.unique_=!!(t=t||{}).unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get("length")}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new BS("add",t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new BS("remove",t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new BS("remove",r,e)),this.dispatchEvent(new BS("add",t,e))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new S4e(58)}},r6=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",uwt=r6.includes("firefox"),hwt=(r6.includes("safari")&&!r6.includes("chrom")&&(r6.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(r6)),r6.includes("webkit")&&!r6.includes("edge")),fwt=r6.includes("macintosh"),T4e=typeof devicePixelRatio<"u"?devicePixelRatio:1,dz=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,dwt=typeof Image<"u"&&Image.prototype.decode,L4e=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function cc(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function gf(n,e,t,i,r,s,o,a){const c=Math.sin(s),l=Math.cos(s);return n[0]=i*l,n[1]=r*c,n[2]=-i*c,n[3]=r*l,n[4]=o*i*l-a*i*c+e,n[5]=o*r*c+a*r*l+t,n}function RS(n,e){const t=function mwt(n){return n[0]*n[3]-n[1]*n[2]}(e);Ss(0!==t,32);const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*c-o*a)/t,n[5]=-(i*c-r*a)/t,n}let D4e;function mz(n){const e="matrix("+n.join(", ")+")";if(dz)return e;const t=D4e||(D4e=document.createElement("div"));return t.style.transform=e,t.style.transform}new Array(6);function Q4(n){const e=[1/0,1/0,-1/0,-1/0];for(let t=0,i=n.length;t<i;++t)Xg(e,n[t]);return e}function FS(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function I4e(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function O5(n,e,t){let i,r;return i=e<n[0]?n[0]-e:n[2]<e?e-n[2]:0,r=t<n[1]?n[1]-t:n[3]<t?t-n[3]:0,i*i+r*r}function kS(n,e){return Az(n,e[0],e[1])}function Kg(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function Az(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function vz(n,e){const o=e[0],a=e[1];let c=0;return o<n[0]?c|=16:o>n[2]&&(c|=4),a<n[1]?c|=8:a>n[3]&&(c|=2),0===c&&(c=1),c}function Qu(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function N5(n){return Qu(1/0,1/0,-1/0,-1/0,n)}function PS(n,e){const t=n[0],i=n[1];return Qu(t,i,t,i,e)}function B4e(n,e,t,i,r){return k4e(N5(r),n,e,t,i)}function m_(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function R4e(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Xg(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function k4e(n,e,t,i,r){for(;t<i;t+=r)_wt(n,e[t],e[t+1]);return n}function _wt(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function _z(n,e){let t;return t=e(zS(n)),!!(t||(t=e(OS(n)),t)||(t=e(NS(n)),t)||(t=e(V5(n)),t))&&t}function HS(n){let e=0;return Cz(n)||(e=ma(n)*Wu(n)),e}function zS(n){return[n[0],n[1]]}function OS(n){return[n[2],n[1]]}function s6(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function ywt(n,e){let t;return"bottom-left"===e?t=zS(n):"bottom-right"===e?t=OS(n):"top-left"===e?t=V5(n):"top-right"===e?t=NS(n):Ss(!1,13),t}function yz(n,e,t,i,r){const[s,o,a,c,l,u,f,p]=wz(n,e,t,i);return Qu(Math.min(s,a,l,f),Math.min(o,c,u,p),Math.max(s,a,l,f),Math.max(o,c,u,p),r)}function wz(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),c=r*o,l=r*a,u=s*o,f=s*a,p=n[0],g=n[1];return[p-c+f,g-l-u,p-c-f,g-l+u,p+c-f,g+l+u,p+c+f,g+l-u,p-c+f,g-l-u]}function Wu(n){return n[3]-n[1]}function Yg(n,e,t){const i=t||[1/0,1/0,-1/0,-1/0];return Pl(n,e)?(i[0]=n[0]>e[0]?n[0]:e[0],i[1]=n[1]>e[1]?n[1]:e[1],i[2]=n[2]<e[2]?n[2]:e[2],i[3]=n[3]<e[3]?n[3]:e[3]):N5(i),i}function V5(n){return[n[0],n[3]]}function NS(n){return[n[2],n[3]]}function ma(n){return n[2]-n[0]}function Pl(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Cz(n){return n[2]<n[0]||n[3]<n[1]}function P4e(n,e){const t=e.getExtent(),i=s6(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=ma(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function s2(n,e,t){return Math.min(Math.max(n,e),t)}function Mwt(n,e,t,i,r,s){const o=r-t,a=s-i;if(0!==o||0!==a){const c=((n-t)*o+(e-i)*a)/(o*o+a*a);c>1?(t=r,i=s):c>0&&(t+=o*c,i+=a*c)}return mf(n,e,t,i)}function mf(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function U5(n){return n*Math.PI/180}function o6(n,e){const t=n%e;return t*e<0?t+e:t}function Af(n,e,t){return n+t*(e-n)}function VS(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function US(n,e){return Math.floor(VS(n,e))}function GS(n,e){return Math.ceil(VS(n,e))}const H4e=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,z4e=/^([a-z]*)$|^hsla?\(.*\)$/i;function O4e(n){return"string"==typeof n?n:U4e(n)}const Ewt=function(){const e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=1024){let s=0;for(const o in e)0==(3&s++)&&(delete e[o],--t)}r=function Twt(n){let e,t,i,r,s;if(z4e.exec(n)&&(n=function N4e(n){const e=document.createElement("div");if(e.style.color=n,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(n)),H4e.exec(n)){const o=n.length-1;let a;a=o<=4?1:2;const c=4===o||8===o;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),r=c?parseInt(n.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,c&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),V4e(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),V4e(s)):Ss(!1,14);return s}(i),e[i]=r,++t}return r}}();function QS(n){return Array.isArray(n)?n:Ewt(n)}function V4e(n){return n[0]=s2(n[0]+.5|0,0,255),n[1]=s2(n[1]+.5|0,0,255),n[2]=s2(n[2]+.5|0,0,255),n[3]=s2(n[3],0,1),n}function U4e(n){let e=n[0];e!=(0|e)&&(e=e+.5|0);let t=n[1];t!=(0|t)&&(t=t+.5|0);let i=n[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+t+","+i+","+(void 0===n[3]?1:Math.round(100*n[3])/100)+")"}function G4e(n,e,t){return e+":"+n+":"+(t?O4e(t):"null")}const WS=new class Lwt{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];0==(3&e++)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=G4e(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=G4e(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}},Q4e=class Dwt extends X0{constructor(e){super(),this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t.opacity=void 0!==e.opacity?e.opacity:1,Ss("number"==typeof t.opacity,64),t.visible=void 0===e.visible||e.visible,t.zIndex=e.zIndex,t.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,t.minResolution=void 0!==e.minResolution?e.minResolution:0,t.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,t.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return t.opacity=s2(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==i||t.managed?i:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return or()}getLayerStatesArray(e){return or()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return or()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set("extent",e)}setMaxResolution(e){this.set("maxResolution",e)}setMinResolution(e){this.set("minResolution",e)}setMaxZoom(e){this.set("maxZoom",e)}setMinZoom(e){this.set("minZoom",e)}setOpacity(e){Ss("number"==typeof e,64),this.set("opacity",e)}setVisible(e){this.set("visible",e)}setZIndex(e){this.set("zIndex",e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};function xz(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const jS=class Iwt extends Q4e{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(e.source?e.source:null)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ta(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=js(e,"change",this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(t=>t([]))}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(Ta(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ta(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=js(e,"precompose",function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);Ss(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=js(this,"change",e.render,e),this.changed())}setSource(e){this.set("source",e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function W4e(n,e){const r=e[0],s=e[1],o=r[0],a=r[1],c=s[0],l=s[1],u=c-o,f=l-a,p=0===u&&0===f?0:(u*(n[0]-o)+f*(n[1]-a))/(u*u+f*f||0);let g,_;return p<=0?(g=o,_=a):p>=1?(g=c,_=l):(g=o+p*u,_=a+p*f),[g,_]}function ju(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function bz(n,e){const t=Math.cos(e),i=Math.sin(e),s=n[1]*t+n[0]*i;return n[0]=n[0]*t-n[1]*i,n[1]=s,n}function Zg(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function $S(n,e){return Math.sqrt(Zg(n,e))}function $4e(n,e){if(e.canWrapX()){const t=ma(e.getExtent()),i=function Hwt(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||ma(i),r=Math.floor((n[0]-i[0])/t)),r}(n,e,t);i&&(n[0]-=i*t)}return n}function Owt(n,e){WS.expire()}const Nwt=class zwt extends uz{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){or()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;gf(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),RS(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,c){let l;const u=t.viewState;function f(T,I,F,P){return s.call(o,I,T?F:null,P)}const p=u.projection,g=$4e(e.slice(),p),_=[[0,0]];if(p.canWrapX()&&r){const I=ma(p.getExtent());_.push([-I,0],[I,0])}const y=t.layerStatesArray,w=y.length,C=[],b=[];for(let T=0;T<_.length;T++)for(let I=w-1;I>=0;--I){const F=y[I],P=F.layer;if(P.hasRenderer()&&xz(F,u)&&a.call(c,P)){const R=P.getRenderer(),k=P.getSource();if(R&&k){const W=k.getWrapX()?g:e,ie=f.bind(null,F.managed);b[0]=W[0]+_[T][0],b[1]=W[1]+_[T][1],l=R.forEachFeatureAtCoordinate(b,t,i,ie,C)}if(l)return l}}if(0===C.length)return;const M=1/C.length;return C.forEach((T,I)=>T.distanceSq+=I*M),C.sort((T,I)=>T.distanceSq-I.distanceSq),C.some(T=>l=T.callback(T.feature,T.layer,T.geometry)),l}hasFeatureAtCoordinate(e,t,i,r,s,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,i,r,K0,this,s,o)}getMap(){return this.map_}renderFrame(e){or()}scheduleExpireIconCache(e){WS.canExpireCache()&&e.postRenderFunctions.push(Owt)}},q4e=class Vwt extends e4{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}},qS="ol-hidden",KS="ol-unselectable",Mz="ol-control",K4e="ol-collapsed",Uwt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),X4e=["style","variant","weight","size","lineHeight","family"],Y4e=function(n){const e=n.match(Uwt);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=X4e.length;i<r;++i){const s=e[i+1];void 0!==s&&(t[X4e[i]]=s)}return t.families=t.family.split(/,\s?/),t};function t4(n,e,t,i){let r;return r=t&&t.length?t.shift():dz?new OffscreenCanvas(n||300,e||300):document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function Z4e(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function J4e(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function Sz(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}const eue="10px sans-serif",vf="#000",XS="round",A_=[],Jg="round",y_="#000",w_="center",YS="middle",G5=[0,0,0,0],_f=new X0;let Ez,em=null;const Tz={},Wwt=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";let s,o;function a(l,u,f){let p=!0;for(let g=0;g<i;++g){const _=t[g];if(o=ZS(l+" "+u+" "+e+_,r),f!=_){const y=ZS(l+" "+u+" "+e+f+","+_,r);p=p&&y!=o}}return!!p}function c(){let l=!0;const u=_f.getKeys();for(let f=0,p=u.length;f<p;++f){const g=u[f];_f.get(g)<100&&(a.apply(this,g.split("\n"))?($g(Tz),em=null,Ez=void 0,_f.set(g,100)):(_f.set(g,_f.get(g)+1,!0),l=!1))}l&&(clearInterval(s),s=void 0)}return function(l){const u=Y4e(l);if(!u)return;const f=u.families;for(let p=0,g=f.length;p<g;++p){const _=f[p],y=u.style+"\n"+u.weight+"\n"+_;void 0===_f.get(y)&&(_f.set(y,100,!0),a(u.style,u.weight,_)||(_f.set(y,0,!0),void 0===s&&(s=setInterval(c,32))))}}}(),jwt=function(){let n;return function(e){let t=Tz[e];if(null==t){if(dz){const i=Y4e(e),r=tue(e,"\u017dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Tz[e]=t}return t}}();function tue(n,e){return em||(em=t4(1,1)),n!=Ez&&(em.font=n,Ez=em.font),em.measureText(e)}function ZS(n,e){return tue(n,e).width}function nue(n,e,t){if(e in t)return t[e];const i=e.split("\n").reduce((r,s)=>Math.max(r,ZS(n,s)),0);return t[e]=i,i}const Ywt=class Xwt extends Nwt{constructor(e){super(e),this.fontChangeListenerKey_=js(_f,"propertychange",e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=KS+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new q4e(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Ta(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=t.length;o<a;++o){const c=t[o];e.layerIndex=o;const l=c.layer,u=l.getSourceState();if(!xz(c,i)||"ready"!=u&&"undefined"!=u){l.unrender();continue}const f=l.render(e,s);!f||(f!==s&&(this.children_.push(f),s=f),"getDeclutter"in l&&r.push(l))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(e);(function Qwt(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}};class c6 extends e4{constructor(e,t){super(e),this.layer=t}}class Dz extends Q4e{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),i?Array.isArray(i)?i=new O1(i.slice(),{unique:!0}):Ss("function"==typeof i.getArray,43):i=new O1(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ta),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(js(e,"add",this.handleLayersAdd_,this),js(e,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ta);$g(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new c6("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[js(e,"propertychange",this.handleLayerChange_,this),js(e,"change",this.handleLayerChange_,this)];e instanceof Dz&&t.push(js(e,"addlayer",this.handleLayerGroupAdd_,this),js(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[br(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new c6("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new c6("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new c6("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=br(t);this.listenerKeys_[i].forEach(Ta),delete this.listenerKeys_[i],this.dispatchEvent(new c6("removelayer",t)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new c6("removelayer",i[r]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=void 0!==e?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&void 0===r.zIndex&&(s=0);for(let o=i,a=t.length;o<a;o++){const c=t[o];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),void 0!==r.extent&&(c.extent=void 0!==c.extent?Yg(c.extent,r.extent):r.extent),void 0===c.zIndex&&(c.zIndex=s)}return t}getSourceState(){return"ready"}}const JS=Dz,tm=class Zwt extends e4{constructor(e,t,i){super(e),this.map=t,this.frameState=void 0!==i?i:null}},yf=class Jwt extends tm{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==r&&r,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},zs={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},tCt=class eCt extends LS{constructor(e,t){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=js(i,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=js(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!L4e&&{passive:!1})}emulateClick_(e){let t=new yf(zs.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new yf(zs.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const i=new yf(zs.SINGLECLICK,this.map_,e);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==zs.POINTERUP||t.type==zs.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==zs.POINTERDOWN||t.type==zs.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new yf(zs.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Ta),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new yf(zs.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.down_={};for(const i in e){const r=e[i];this.down_[i]="function"==typeof r?z5:r}if(0===this.dragListenerKeys_.length){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(js(i,zs.POINTERMOVE,this.handlePointerMove_,this),js(i,zs.POINTERUP,this.handlePointerUp_,this),js(this.element_,zs.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(js(this.element_.getRootNode(),zs.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new yf(zs.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new yf(zs.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ta(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ta(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ta),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},eE=1/0,$u={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Q5={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},iue=class lCt{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Q5[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},x_=6378137,nm=Math.PI*x_,uCt=[-nm,-nm,nm,nm],hCt=[-180,-85,180,85],tE=x_*Math.log(Math.tan(Math.PI/2));class im extends iue{constructor(e){super({code:e,units:"m",extent:uCt,global:!0,worldExtent:hCt,getPointResolution:function(t,i){return t/Math.cosh(i[1]/x_)}})}}const rue=[new im("EPSG:3857"),new im("EPSG:102100"),new im("EPSG:102113"),new im("EPSG:900913"),new im("http://www.opengis.net/def/crs/EPSG/0/3857"),new im("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fCt(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t){e[r]=nm*n[r]/180;let s=x_*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>tE?s=tE:s<-tE&&(s=-tE),e[r+1]=s}return e}function dCt(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/nm,e[r+1]=360*Math.atan(Math.exp(n[r+1]/x_))/Math.PI-90;return e}const sue=[-180,-90,180,90],gCt=6378137*Math.PI/180;class W5 extends iue{constructor(e,t){super({code:e,units:"degrees",extent:sue,axisOrientation:t,global:!0,metersPerUnit:gCt,worldExtent:sue})}}const oue=[new W5("CRS:84"),new W5("EPSG:4326","neu"),new W5("urn:ogc:def:crs:OGC:1.3:CRS84"),new W5("urn:ogc:def:crs:OGC:2:84"),new W5("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new W5("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new W5("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let nE={},qu={};function iE(n,e,t){const i=n.getCode(),r=e.getCode();i in qu||(qu[i]={}),qu[i][r]=t}const rE=6371008.8;function Rz(n,e,t){t=t||rE;const i=U5(n[1]),r=U5(e[1]),s=(r-i)/2,o=U5(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Fz(n,e){let t=0;for(let i=0,r=n.length;i<r-1;++i)t+=Rz(n[i],n[i+1],e);return t}function aue(n,e){const t=(e=e||{}).radius||rE,i=e.projection||"EPSG:3857",r=n.getType();"GeometryCollection"!==r&&(n=n.clone().transform(i,"EPSG:4326"));let o,a,c,l,u,f,s=0;switch(r){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":o=n.getCoordinates(),s=Fz(o,t);break;case"MultiLineString":case"Polygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)s+=Fz(o[c],t);break;case"MultiPolygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)for(a=o[c],u=0,f=a.length;u<f;++u)s+=Fz(a[u],t);break;case"GeometryCollection":{const p=n.getGeometries();for(c=0,l=p.length;c<l;++c)s+=aue(p[c],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function sE(n,e){let t=0;const i=n.length;let r=n[i-1][0],s=n[i-1][1];for(let o=0;o<i;o++){const a=n[o][0],c=n[o][1];t+=U5(a-r)*(2+Math.sin(U5(s))+Math.sin(U5(c))),r=a,s=c}return t*e*e/2}function cue(n,e){const t=(e=e||{}).radius||rE,i=e.projection||"EPSG:3857",r=n.getType();"GeometryCollection"!==r&&(n=n.clone().transform(i,"EPSG:4326"));let o,a,c,l,u,f,s=0;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=n.getCoordinates(),s=Math.abs(sE(o[0],t)),c=1,l=o.length;c<l;++c)s-=Math.abs(sE(o[c],t));break;case"MultiPolygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)for(a=o[c],s+=Math.abs(sE(a[0],t)),u=1,f=a.length;u<f;++u)s-=Math.abs(sE(a[u],t));break;case"GeometryCollection":{const p=n.getGeometries();for(c=0,l=p.length;c<l;++c)s+=cue(p[c],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}let kz=!0;function lue(n){kz=!(void 0===n||n)}function Pz(n,e,t){if(void 0!==e)for(let i=0,r=n.length;i<r;++i)e[i]=n[i];else e=n.slice();return e}function uue(n,e,t){if(void 0!==e&&n!==e){for(let i=0,r=n.length;i<r;++i)e[i]=n[i];n=e}return n}function _Ct(n){(function ACt(n,e){nE[n]=e})(n.getCode(),n),iE(n,n,Pz)}function Ka(n){return"string"==typeof n?function mCt(n){return nE[n]||nE[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(n):n||null}function hue(n,e,t,i){let r;const s=(n=Ka(n)).getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/Q5[i])}}else{const o=n.getUnits();if("degrees"==o&&!i||"degrees"==i)r=e;else{const a=b_(n,Ka("EPSG:4326"));if(a===uue&&"degrees"!==o)r=e*n.getMetersPerUnit();else{let l=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];l=a(l,l,2),r=(Rz(l.slice(0,2),l.slice(2,4))+Rz(l.slice(4,6),l.slice(6,8)))/2}const c=i?Q5[i]:n.getMetersPerUnit();void 0!==c&&(r/=c)}}return r}function fue(n){(function yCt(n){n.forEach(_Ct)})(n),n.forEach(function(e){n.forEach(function(t){e!==t&&iE(e,t,Pz)})})}function Hz(n,e){return n?"string"==typeof n?Ka(n):n:Ka(e)}function pue(n,e){return lue(),S_(n,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function j5(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||b_(n,e)===Pz)&&t}function b_(n,e){let r=function vCt(n,e){let t;return n in qu&&e in qu[n]&&(t=qu[n][e]),t}(n.getCode(),e.getCode());return r||(r=uue),r}function M_(n,e){return b_(Ka(n),Ka(e))}function S_(n,e,t){return M_(e,t)(n,void 0,n.length)}let Hl=null;function u6(){return Hl}function E_(n,e){return n}function o2(n,e){return kz&&!ju(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(kz=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function oE(n,e){return n}function h6(n,e){return n}function bCt(n,e){return n}function mue(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const c=e?0:s[0]*r,l=e?0:s[1]*r,u=a?a[0]:0,f=a?a[1]:0;let p=n[0]+c/2+u,g=n[2]-c/2+u,_=n[1]+l/2+f,y=n[3]-l/2+f;p>g&&(p=(g+p)/2,g=p),_>y&&(_=(y+_)/2,y=_);let w=s2(i[0],p,g),C=s2(i[1],_,y);if(o&&t&&r){const b=30*r;w+=-b*Math.log(1+Math.max(0,p-i[0])/b)+b*Math.log(1+Math.max(0,i[0]-g)/b),C+=-b*Math.log(1+Math.max(0,_-i[1])/b)+b*Math.log(1+Math.max(0,i[1]-y)/b)}return[w,C]}}function SCt(n){return n}function zz(n,e,t,i){const r=ma(e)/t[0],s=Wu(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function Oz(n,e,t){let i=Math.min(n,e);return i*=Math.log(1+50*Math.max(0,n/e-1))/50+1,t&&(i=Math.max(i,t),i/=Math.log(1+50*Math.max(0,t/n-1))/50+1),s2(i,t/2,2*e)}function Aue(n,e,t,i,r){return t=void 0===t||t,function(s,o,a,c){if(void 0!==s){const l=i?zz(n,i,a,r):n;return t&&c?Oz(s,l,e):s2(s,e,l)}}}function Nz(n){if(void 0!==n)return 0}function vue(n){if(void 0!==n)return n}function _ue(n){return Math.pow(n,3)}function rm(n){return 1-_ue(1-n)}function Vz(n){return 3*n*n-2*n*n*n}function ICt(n){return n}function $5(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const c=n[a],l=n[a+1];s[o++]=r[0]*c+r[2]*l+r[4],s[o++]=r[1]*c+r[3]*l+r[5]}return s&&s.length!=o&&(s.length=o),s}function Uz(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),c=Math.sin(r),l=s[0],u=s[1];let f=0;for(let p=e;p<t;p+=i){const g=n[p]-l,_=n[p+1]-u;o[f++]=l+g*a-_*c,o[f++]=u+g*c+_*a;for(let y=p+2;y<p+i;++y)o[f++]=n[y]}return o&&o.length!=f&&(o.length=f),o}function yue(n,e,t,i,r,s,o){o=o||[];let a=0;for(let c=e;c<t;c+=i){o[a++]=n[c]+r,o[a++]=n[c+1]+s;for(let l=c+2;l<c+i;++l)o[a++]=n[l]}return o&&o.length!=a&&(o.length=a),o}!function MCt(){fue(rue),fue(oue),function wCt(n,e,t,i){n.forEach(function(r){e.forEach(function(s){iE(r,s,t),iE(s,r,i)})})}(oue,rue,fCt,dCt)}();const wue=[1,0,0,1,0,0],Cue=class RCt extends X0{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function twt(n){let t,i,r,e=!1;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!n6(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return or()}closestPointXY(e,t,i,r){return or()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return this.closestPointXY(e[0],e[1],t=t||[NaN,NaN],1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return or()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&N5(t),this.extentRevision_=this.getRevision()}return function wwt(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}(this.extent_,e)}rotate(e,t){or()}scale(e,t,i){or()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return or()}getType(){return or()}applyTransform(e){or()}intersectsExtent(e){return or()}translate(e,t){or()}transform(e,t){const i=Ka(e),r="tile-pixels"==i.getUnits()?function(s,o,a){const c=i.getExtent(),l=i.getWorldExtent(),u=Wu(l)/Wu(c);return gf(wue,l[0],l[3],u,-u,0,0,0),$5(s,0,s.length,a,wue,o),M_(i,t)(s,o,a)}:M_(i,t);return this.applyTransform(r),this}};function aE(n){let e;return"XY"==n?e=2:"XYZ"==n||"XYM"==n?e=3:"XYZM"==n&&(e=4),e}const f6=class FCt extends Cue{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return B4e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return or()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=aE(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){or()}setLayout(e,t,i){let r;if(e)r=aE(e);else{for(let s=0;s<i;++s){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}r=t.length,e=function kCt(n){let e;return 2==n?e="XY":3==n?e="XYZ":4==n&&(e="XYZM"),e}(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Uz(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){void 0===t&&(t=e),i||(i=s6(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();(function BCt(n,e,t,i,r,s,o,a){a=a||[];const c=o[0],l=o[1];let u=0;for(let f=e;f<t;f+=i){const g=n[f+1]-l;a[u++]=c+r*(n[f]-c),a[u++]=l+s*g;for(let _=f+2;_<f+i;++_)a[u++]=n[_]}a&&a.length!=u&&(a.length=u)})(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();yue(i,0,i.length,r,e,t,i),this.changed()}}};function xue(n,e,t,i,r,s,o){const a=n[e],c=n[e+1],l=n[t]-a,u=n[t+1]-c;let f;if(0===l&&0===u)f=e;else{const p=((r-a)*l+(s-c)*u)/(l*l+u*u);if(p>1)f=t;else{if(p>0){for(let g=0;g<i;++g)o[g]=Af(n[e+g],n[t+g],p);return void(o.length=i)}f=e}}for(let p=0;p<i;++p)o[p]=n[f+p];o.length=i}function Gz(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],l=mf(s,o,a,c);l>r&&(r=l),s=a,o=c}return r}function Qz(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=Gz(n,e,a,i,r),e=a}return r}function Wz(n,e,t,i,r,s,o,a,c,l,u){if(e==t)return l;let f,p;if(0===r){if(p=mf(o,a,n[e],n[e+1]),p<l){for(f=0;f<i;++f)c[f]=n[e+f];return c.length=i,p}return l}u=u||[NaN,NaN];let g=e+i;for(;g<t;)if(xue(n,g-i,g,i,o,a,u),p=mf(o,a,u[0],u[1]),p<l){for(l=p,f=0;f<i;++f)c[f]=u[f];c.length=i,g+=i}else g+=i*Math.max((Math.sqrt(p)-Math.sqrt(l))/r|0,1);if(s&&(xue(n,t-i,e,i,o,a,u),p=mf(o,a,u[0],u[1]),p<l)){for(l=p,f=0;f<i;++f)c[f]=u[f];c.length=i}return l}function jz(n,e,t,i,r,s,o,a,c,l,u){u=u||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const g=t[f];l=Wz(n,e,g,i,r,s,o,a,c,l,u),e=g}return l}function bue(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function cE(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function $z(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=cE(n,e,t[o],i);r[s++]=c,e=c}return r.length=s,r}function lE(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const c=new Array(a);c[0]=1,c[a-1]=1;const l=[e,t-i];let u=0;for(;l.length>0;){const f=l.pop(),p=l.pop();let g=0;const _=n[p],y=n[p+1],w=n[f],C=n[f+1];for(let b=p+i;b<f;b+=i){const I=Mwt(n[b],n[b+1],_,y,w,C);I>g&&(u=b,g=I)}g>r&&(c[(u-e)/i]=1,p+i<u&&l.push(p,u),u+i<f&&l.push(u,f))}for(let f=0;f<a;++f)c[f]&&(s[o++]=n[e+f*i],s[o++]=n[e+f*i+1]);return o}function q5(n,e){return e*Math.round(n/e)}function VCt(n,e,t,i,r,s,o){if(e==t)return o;let l,u,a=q5(n[e],r),c=q5(n[e+1],r);e+=i,s[o++]=a,s[o++]=c;do{if(l=q5(n[e],r),u=q5(n[e+1],r),(e+=i)==t)return s[o++]=l,s[o++]=u,o}while(l==a&&u==c);for(;e<t;){const f=q5(n[e],r),p=q5(n[e+1],r);if(e+=i,f==l&&p==u)continue;const g=l-a,_=u-c,y=f-a,w=p-c;g*w==_*y&&(g<0&&y<g||g==y||g>0&&y>g)&&(_<0&&w<_||_==w||_>0&&w>_)?(l=f,u=p):(s[o++]=l,s[o++]=u,a=l,c=u,l=f,u=p)}return s[o++]=l,s[o++]=u,o}function Sue(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c];o=VCt(n,e,u,i,r,s,o),a.push(o),e=u}return o}function d6(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function T_(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];r[s++]=d6(n,e,c,i,r[s]),e=c}return r.length=s,r}function qz(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];r[s++]=1===c.length&&c[0]===e?[]:T_(n,e,c,i,r[s]),e=c[c.length-1]}return r.length=s,r}function Eue(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=o*a-s*c,s=a,o=c}return r/2}function Tue(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=Eue(n,e,a,i),e=a}return r}class uE extends f6{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new uE(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<O5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Gz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return Eue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return d6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=lE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new uE(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cE(this.flatCoordinates,0,e,this.stride),this.changed()}}const Lue=uE;class Kz extends f6{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Kz(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=mf(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=s[c];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return PS(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Az(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bue(this.flatCoordinates,0,e),this.changed()}}const n4=Kz;function QCt(n,e,t,i,r){return!_z(r,function(o){return!K5(n,e,t,i,o[0],o[1])})}function K5(n,e,t,i,r,s){let o=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const l=n[e],u=n[e+1];c<=s?u>s&&(l-a)*(s-c)-(r-a)*(u-c)>0&&o++:u<=s&&(l-a)*(s-c)-(r-a)*(u-c)<0&&o--,a=l,c=u}return 0!==o}function Xz(n,e,t,i,r,s){if(0===t.length||!K5(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(K5(n,t[o-1],t[o],i,r,s))return!1;return!0}function Due(n,e,t,i,r,s,o){let a,c,l,u,f,p,g;const _=r[s+1],y=[];for(let b=0,M=t.length;b<M;++b){const T=t[b];for(u=n[T-i],p=n[T-i+1],a=e;a<T;a+=i)f=n[a],g=n[a+1],(_<=p&&g<=_||p<=_&&_<=g)&&(l=(_-p)/(g-p)*(f-u)+u,y.push(l)),u=f,p=g}let w=NaN,C=-1/0;for(y.sort(H5),u=y[0],a=1,c=y.length;a<c;++a){f=y[a];const b=Math.abs(f-u);b>C&&(l=(u+f)/2,Xz(n,e,t,i,l,_)&&(w=l,C=b)),u=f}return isNaN(w)&&(w=r[s]),o?(o.push(w,_,C),o):[w,_,C]}function Iue(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function hE(n,e,t,i,r){const s=k4e([1/0,1/0,-1/0,-1/0],n,e,t,i);return!!Pl(r,s)&&(!!(Kg(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3])||Iue(n,e,t,i,function(o,a){return function Cwt(n,e,t){let i=!1;const r=vz(n,e),s=vz(n,t);if(1===r||1===s)i=!0;else{const o=n[0],a=n[1],c=n[2],l=n[3],p=t[0],g=t[1],_=(g-e[1])/(p-e[0]);let y,w;!!(2&s)&&!(2&r)&&(y=p-(g-l)/_,i=y>=o&&y<=c),!i&&!!(4&s)&&!(4&r)&&(w=g-(p-c)*_,i=w>=a&&w<=l),!i&&!!(8&s)&&!(8&r)&&(y=p-(g-a)/_,i=y>=o&&y<=c),!i&&16&s&&!(16&r)&&(w=g-(p-o)*_,i=w>=a&&w<=l)}return i}(r,o,a)}))}function Bue(n,e,t,i,r){return!!(hE(n,e,t,i,r)||K5(n,e,t,i,r[0],r[1])||K5(n,e,t,i,r[0],r[3])||K5(n,e,t,i,r[2],r[1])||K5(n,e,t,i,r[2],r[3]))}function Rue(n,e,t,i,r){if(!Bue(n,e,t[0],i,r))return!1;if(1===t.length)return!0;for(let s=1,o=t.length;s<o;++s)if(QCt(n,t[s-1],t[s],i,r)&&!hE(n,t[s-1],t[s],i,r))return!1;return!0}function KCt(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function Yz(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-s)*(c+o),s=a,o=c}return 0===r?void 0:r>0}function Fue(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=Yz(n,e,a,i);if(0===s){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function Zz(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=Yz(n,e,a,i);(0===s?r&&c||!r&&!c:r&&!c||!r&&c)&&KCt(n,e,a,i),e=a}return e}function kue(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=Zz(n,e,t[s],i,r);return e}class X5 extends f6{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Uu(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new X5(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<O5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qz(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jz(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return Xz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Tue(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),Zz(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,T_(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=s6(this.getExtent());this.flatInteriorPoint_=Due(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new n4(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Lue(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const c=i[o],l=new Lue(t.slice(s,c),e);r.push(l),s=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Fue(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Zz(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Sue(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new X5(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return Rue(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=$z(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const Y5=X5;function Pue(n){const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new X5(s,"XY",[s.length])}function Hue(n,e,t){e=e||32;const i=n.getStride(),r=n.getLayout(),s=n.getCenter(),o=i*(e+1),a=new Array(o);for(let u=0;u<o;u+=i){a[u]=0,a[u+1]=0;for(let f=2;f<i;f++)a[u+f]=s[f]}const l=new X5(a,r,[a.length]);return function YCt(n,e,t,i){const r=n.getFlatCoordinates(),s=n.getStride(),o=r.length/s-1,a=i||0;for(let c=0;c<=o;++c){const l=c*s,u=a+2*o6(c,o)*Math.PI/o;r[l]=e[0]+t*Math.cos(u),r[l+1]=e[1]+t*Math.sin(u)}n.changed()}(l,s,n.getRadius(),t),l}function fE(n,e){setTimeout(function(){n(e)},0)}function nxt(n){return!(n.sourceCenter&&n.targetCenter&&!ju(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function eO(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,c=n[1]*s+n[0]*o;return a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,o=-o,[a*s-c*o,c*s+a*o]}const p6=class ZCt extends X0{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=Hz(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&lue(),e.center&&(e.center=o2(e.center)),e.extent&&(e.extent=h6(e.extent)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in $u)delete t[a];this.setProperties(t,!0);const i=function ext(n){let e,t,i,o=void 0!==n.minZoom?n.minZoom:0,a=void 0!==n.maxZoom?n.maxZoom:28;const c=void 0!==n.zoomFactor?n.zoomFactor:2,l=void 0!==n.multiWorld&&n.multiWorld,u=void 0===n.smoothResolutionConstraint||n.smoothResolutionConstraint,f=void 0!==n.showFullExtent&&n.showFullExtent,p=Hz(n.projection,"EPSG:3857"),g=p.getExtent();let _=n.constrainOnlyCenter,y=n.extent;if(!l&&!y&&p.isGlobal()&&(_=!1,y=g),void 0!==n.resolutions){const w=n.resolutions;t=w[o],i=void 0!==w[a]?w[a]:w[w.length-1],e=n.constrainResolution?function ECt(n,e,t,i){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const c=n[0],l=n[n.length-1],u=t?zz(c,t,o,i):c;if(a)return e?Oz(r,u,l):s2(r,l,u);const f=Math.min(u,r),p=Math.floor(hz(n,f,s));return n[p]>u&&p<n.length-1?n[p+1]:n[p]}}}(w,u,!_&&y,f):Aue(t,i,u,!_&&y,f)}else{const C=(g?Math.max(ma(g),Wu(g)):360*Q5.degrees/p.getMetersPerUnit())/256/Math.pow(2,0),b=C/Math.pow(2,28);t=n.maxResolution,void 0!==t?o=0:t=C/Math.pow(c,o),i=n.minResolution,void 0===i&&(i=void 0!==n.maxZoom?void 0!==n.maxResolution?t/Math.pow(c,a):C/Math.pow(c,a):b),a=o+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-o),e=n.constrainResolution?function TCt(n,e,t,i,r,s){return i=void 0===i||i,t=void 0!==t?t:0,function(o,a,c,l){if(void 0!==o){const u=r?zz(e,r,c,s):e;if(l)return i?Oz(o,u,t):s2(o,t,u);const f=1e-9,p=Math.ceil(Math.log(e/u)/Math.log(n)-f),g=-a*(.5-f)+.5,_=Math.min(u,o),y=Math.floor(Math.log(e/_)/Math.log(n)+g),w=Math.max(p,y);return s2(e/Math.pow(n,w),t,u)}}}(c,t,i,u,!_&&y,f):Aue(t,i,u,!_&&y,f)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:c}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=function JCt(n){if(void 0!==n.extent)return mue(n.extent,n.constrainOnlyCenter,void 0===n.smoothExtentConstraint||n.smoothExtentConstraint);const e=Hz(n.projection,"EPSG:3857");if(!0!==n.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,mue(t,!1,!1)}return SCt}(e),s=i.constraint,o=function txt(n){if(void 0===n.enableRotation||n.enableRotation){const t=n.constrainRotation;return void 0===t||!0===t?function DCt(n){return n=n||U5(5),function(e,t){return t?e:void 0!==e?Math.abs(e)<=n?0:e:void 0}}():!1===t?vue:"number"==typeof t?function LCt(n){const e=2*Math.PI/n;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(t):vue}return Nz}(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenter();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution();this.setCenterInternal([i[0]+s/2*(r[3]-t[3]+t[1]-r[1]),i[1]-s/2*(r[0]-t[0]+t[2]-r[2])])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=o2(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=o2(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let i,t=arguments.length;t>1&&"function"==typeof arguments[t-1]&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),void 0!==u.zoom?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),void 0!==u.rotation&&this.setRotation(u.rotation)}if(r===t)return void(i&&fE(i,!0));let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const l=[];for(;r<t;++r){const u=arguments[r],f={start:s,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||Vz,callback:i};if(u.center&&(f.sourceCenter=o,f.targetCenter=u.center.slice(),o=f.targetCenter),void 0!==u.zoom?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(u.zoom),a=f.targetResolution):u.resolution&&(f.sourceResolution=a,f.targetResolution=u.resolution,a=f.targetResolution),void 0!==u.rotation){f.sourceRotation=c;const p=o6(u.rotation-c+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=c+p,c=f.targetRotation}nxt(f)?f.complete=!0:s+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&fE(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const c=r[o];if(c.complete)continue;const l=e-c.start;let u=c.duration>0?l/c.duration:1;u>=1?(c.complete=!0,u=1):s=!1;const f=c.easing(u);if(c.sourceCenter){const p=c.sourceCenter[0],g=c.sourceCenter[1],_=c.targetCenter[0],y=c.targetCenter[1];this.nextCenter_=c.targetCenter,this.targetCenter_=[p+f*(_-p),g+f*(y-g)]}if(c.sourceResolution&&c.targetResolution){const p=1===f?c.targetResolution:c.sourceResolution+f*(c.targetResolution-c.sourceResolution);if(c.anchor){const g=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(p,0,g,!0);this.targetCenter_=this.calculateCenterZoom(_,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){const p=1===f?o6(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+f*(c.targetRotation-c.sourceRotation);if(c.anchor){const g=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(g,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(s){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&fE(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return void 0!==r&&(i=[r[0]-t[0],r[1]-t[1]],bz(i,e-this.getRotation()),function Bwt(n,e){n[0]+=+e[0],n[1]+=+e[1]}(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();return void 0!==r&&void 0!==s&&(i=[t[0]-e*(t[0]-r[0])/s,t[1]-e*(t[1]-r[1])/s]),i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&E_(e,this.getProjection())}getCenterInternal(){return this.get($u.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return oE(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ss(t,1);const i=this.getResolution();Ss(void 0!==i,2);const r=this.getRotation();return Ss(void 0!==r,3),yz(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get($u.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(h6(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=ma(e)/t[0],r=Wu(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=Math.log(t/this.minResolution_)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get($u.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=Math.log(i/this.minResolution_)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=eO(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let i,r,t=this.minZoom_||0;if(this.resolutions_){const s=hz(this.resolutions_,e,1);t=s,i=this.resolutions_[s],r=s==this.resolutions_.length-1?2:i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=s2(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[t]/Math.pow(this.resolutions_[t]/this.resolutions_[t+1],s2(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Ss(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))Ss(!Cz(e),25),i=Pue(h6(e,this.getProjection()));else if("Circle"===e.getType()){const r=h6(e.getExtent(),this.getProjection());i=Pue(r),i.rotate(this.getRotation(),s6(r))}else{const r=u6();i=r?e.clone().transform(r,this.getProjection()):e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,c=1/0,l=-1/0,u=-1/0;for(let f=0,p=s.length;f<p;f+=o){const g=s[f]*i-s[f+1]*r,_=s[f]*r+s[f+1]*i;a=Math.min(a,g),c=Math.min(c,_),l=Math.max(l,g),u=Math.max(u,_)}return[a,c,l,u]}fitInternal(e,t){let i=(t=t||{}).size;i||(i=this.getViewportSizeMinusPadding_());const r=void 0!==t.padding?t.padding:[0,0,0,0],s=void 0!==t.nearest&&t.nearest;let o;o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?o:Math.max(c,o),c=this.getConstrainedResolution(c,s?0:1);const l=this.getRotation(),u=Math.sin(l),f=Math.cos(l),p=s6(a);p[0]+=(r[1]-r[3])/2*c,p[1]+=(r[0]-r[2])/2*c;const y=this.getConstrainedCenter([p[0]*f-p[1]*u,p[1]*f+p[0]*u],c),w=t.callback?t.callback:z5;void 0!==t.duration?this.animateInternal({resolution:c,center:y,duration:t.duration,easing:t.easing},w):(this.targetResolution_=c,this.targetCenter_=y,this.applyTargetState_(!1,!0),fE(w,!0))}centerOn(e,t,i){this.centerOnInternal(o2(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(eO(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),c=eO(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-c[0],e[1]-c[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=E_(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&o2(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=o2(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&o2(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get($u.ROTATION)!==r&&this.set($u.ROTATION,r),this.get($u.RESOLUTION)!==o&&(this.set($u.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get($u.CENTER)||!ju(this.get($u.CENTER),a))&&this.set($u.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=void 0!==e?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),c=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=c,void this.applyTargetState_();i=i||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!ju(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:c,resolution:a,duration:e,easing:rm,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,i){i=i&&o2(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.setHint(1,-1),this.resolveConstraints(e,t,i)}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}},tO=class ixt extends X0{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Sz(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Sz(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)Ta(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==z5&&this.listenerKeys.push(js(e,"postrender",this.render,this)),e.render())}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},sxt=class rxt extends tO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const t=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",r=void 0!==e.expandClassName?e.expandClassName:t+"-expand",s=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",o=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=void 0!==e.label?e.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const u=this.element;u.className=t+" "+KS+" "+Mz+(this.collapsed_&&this.collapsible_?" "+K4e:"")+(this.collapsible_?"":" ol-uncollapsible"),u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t={},i=[];let r=!0;const s=e.layerStatesArray;for(let o=0,a=s.length;o<a;++o){const c=s[o];if(!xz(c,e.viewState))continue;const l=c.layer.getSource();if(!l)continue;const u=l.getAttributions();if(!u)continue;const f=u(e);if(f)if(r=r&&!1!==l.getAttributionsCollapsible(),Array.isArray(f))for(let p=0,g=f.length;p<g;++p)f[p]in t||(i.push(f[p]),t[f[p]]=!0);else f in t||(i.push(f),t[f]=!0)}return this.overrideCollapsible_||this.setCollapsible(r),i}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!n6(t,this.renderedAttributions_)){!function Gwt(n){for(;n.lastChild;)n.removeChild(n.lastChild)}(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(K4e),this.collapsed_?J4e(this.collapseLabel_,this.label_):J4e(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},axt=class oxt extends tO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"\u21e7",r=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener("click",this.handleClick_.bind(this),!1);const c=this.element;c.className=t+" "+KS+" "+Mz,c.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(qS)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:rm}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(qS);s||0!==i?s&&0!==i&&this.element.classList.remove(qS):this.element.classList.add(qS)}this.label_.style.transform=r}this.rotation_=i}},lxt=class cxt extends tO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,r=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",s=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",a=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",c=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",l=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener("click",this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=l,f.appendChild("string"==typeof a?document.createTextNode(a):a),f.addEventListener("click",this.handleClick_.bind(this,-i),!1);const g=this.element;g.className=t+" "+KS+" "+Mz,g.appendChild(u),g.appendChild(f),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(void 0!==r){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:rm})):i.setZoom(s)}}};function nO(n,e,t,i){const r=n.getZoom();if(void 0===r)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:void 0!==i?i:250,easing:rm})}const sm=class hxt extends X0{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}},pxt=class dxt extends sm{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==zs.DBLCLICK){const i=e.originalEvent,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_;nO(e.map.getView(),o,s,this.duration_),i.preventDefault(),t=!0}return!t}};function iO(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return[t/e,i/e]}const wf=class gxt extends sm{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==zs.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==zs.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==zs.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==zs.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function rO(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),i);++r);return i}}const Axt=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},zue=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)}(n)},om=K0,Oue=function(n){const e=n.originalEvent;return 0==e.button&&!(hwt&&fwt&&e.ctrlKey)},sO=jg,Nue=function(n){return n.type==zs.SINGLECLICK},oO=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},aO=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Vue=function(n){const e=n.originalEvent,t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!e.target.isContentEditable},pE=function(n){const e=n.originalEvent;return Ss(void 0!==e,56),"mouse"==e.pointerType},Uue=function(n){const e=n.originalEvent;return Ss(void 0!==e,56),e.isPrimary&&0===e.button},yxt=class _xt extends wf{constructor(e){super({stopDown:jg}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const t=e.condition?e.condition:rO(oO,Uue);this.condition_=e.onFocusOnly?rO(zue,t):t,this.noKinetic_=!1}handleDragEvent(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const t=this.targetPointers,i=iO(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();(function Fwt(n,e){n[0]*=e,n[1]*=e})(r,o.getResolution()),bz(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:rm})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Cxt=class wxt extends wf{constructor(e){e=e||{},super({stopDown:jg}),this.condition_=e.condition?e.condition:Axt,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!pE(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===Nz)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}handleUpEvent(e){return!pE(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(pE(e)&&Oue(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},bxt=class xxt extends uz{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Y5([r])}getGeometry(){return this.geometry_}};class cO extends e4{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}const Sxt=class Mxt extends wf{constructor(e){super(),this.box_=new bxt((e=e||{}).className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Oue,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new cO("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new cO(t?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new cO("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},Txt=class Ext extends Sxt{constructor(e){super({condition:(e=e||{}).condition?e.condition:aO,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:rm})}},Dxt=class Lxt extends sm{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return oO(t)&&Vue(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if("keydown"==e.type){const i=e.originalEvent,r=i.keyCode;if(this.condition_(e)&&(40==r||37==r||39==r||38==r)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let c=0,l=0;40==r?l=-a:37==r?c=-a:39==r?c=a:l=a;const u=[c,l];bz(u,o.getRotation()),function fxt(n,e,t){const i=n.getCenterInternal();i&&n.animateInternal({duration:void 0!==t?t:250,easing:ICt,center:n.getConstrainedCenter([i[0]+e[0],i[1]+e[1]])})}(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}},Bxt=class Ixt extends sm{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:Vue,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if("keydown"==e.type||"keypress"==e.type){const i=e.originalEvent,r=i.charCode;if(this.condition_(e)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){const s=e.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_;nO(s.getView(),o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}},Pxt=class kxt extends sm{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:om;this.condition_=e.onFocusOnly?rO(zue,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||"wheel"!==e.type)return!0;const i=e.map,r=e.originalEvent;let s;if(r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(s=r.deltaY,uwt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=T4e),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),0===s)return!1;this.lastDelta_=s;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const c=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-s2(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),nO(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},zxt=class Hxt extends wf{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=jg),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){const u=s-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=u}this.lastAngle_=s;const o=e.map,a=o.getView();if(a.getConstraints().rotation===Nz)return;const c=o.getViewport().getBoundingClientRect(),l=iO(this.targetPointers);l[0]-=c.left,l[1]-=c.top,this.anchor_=o.getCoordinateFromPixelInternal(l),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},Nxt=class Oxt extends wf{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=jg),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,l=c.getView();1!=t&&(this.lastScaleDelta_=t);const u=c.getViewport().getBoundingClientRect(),f=iO(this.targetPointers);f[0]-=u.left,f[1]-=u.top,this.anchor_=c.getCoordinateFromPixelInternal(f),c.render(),l.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function Gue(n){return n[0]>0&&n[1]>0}function r4(n,e){return Array.isArray(n)?n:(void 0===e?e=[n,n]:(e[0]=n,e[1]=n),e)}function Que(n){n instanceof jS?n.setMapInternal(null):n instanceof JS&&n.getLayers().forEach(Que)}function Wue(n,e){if(n instanceof jS)n.setMapInternal(e);else if(n instanceof JS){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)Wue(t[i],e)}}const Wxt=class Gxt extends X0{constructor(e){super();const t=function Qxt(n){let e=null;void 0!==n.keyboardEventTarget&&(e="string"==typeof n.keyboardEventTarget?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&"function"==typeof n.layers.getLayers?n.layers:new JS({layers:n.layers});let r,s,o;return t.layergroup=i,t.target=n.target,t.view=n.view instanceof p6?n.view:new p6,void 0!==n.controls&&(Array.isArray(n.controls)?r=new O1(n.controls.slice()):(Ss("function"==typeof n.controls.getArray,47),r=n.controls)),void 0!==n.interactions&&(Array.isArray(n.interactions)?s=new O1(n.interactions.slice()):(Ss("function"==typeof n.interactions.getArray,48),s=n.interactions)),void 0!==n.overlays?Array.isArray(n.overlays)?o=new O1(n.overlays.slice()):(Ss("function"==typeof n.overlays.getArray,49),o=n.overlays):o=new O1,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}(e=e||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:T4e,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=t.controls||function uxt(n){n=n||{};const e=new O1;return(void 0===n.zoom||n.zoom)&&e.push(new lxt(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&e.push(new axt(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&e.push(new sxt(n.attributionOptions)),e}(),this.interactions=t.interactions||function Vxt(n){n=n||{};const e=new O1,t=new class Rxt{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&e.push(new Cxt),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&e.push(new pxt({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&e.push(new yxt({onFocusOnly:n.onFocusOnly,kinetic:t})),(void 0===n.pinchRotate||n.pinchRotate)&&e.push(new zxt),(void 0===n.pinchZoom||n.pinchZoom)&&e.push(new Nxt({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(e.push(new Dxt),e.push(new Bxt({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&e.push(new Pxt({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&e.push(new Txt({duration:n.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class rCt extends class nCt{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,$g(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Ss(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=eE&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),u=l<r&&i[l]<i[c]?l:c;t[e]=t[u],i[e]=i[u],e=u}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(!(r[a]>o))break;i[t]=i[a],r[t]=r[a],t=a}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,c;for(a=0;a<s;++a)o=t[a],c=e(o),c==eE?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=c,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener("change",this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(2===i||3===i||4===i){3!==i&&t.removeEventListener("change",this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r,s,o,i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),0===r&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof p6)&&e.view.then(function(r){i.setView(new p6(r))}),this.controls.addEventListener("add",function(r){r.element.setMap(this)}.bind(this)),this.controls.addEventListener("remove",function(r){r.element.setMap(null)}.bind(this)),this.interactions.addEventListener("add",function(r){r.element.setMap(this)}.bind(this)),this.interactions.addEventListener("remove",function(r){r.element.setMap(null)}.bind(this)),this.overlays_.addEventListener("add",function(r){this.addOverlayInternal_(r.element)}.bind(this)),this.overlays_.addEventListener("remove",function(r){const s=r.element.getId();void 0!==s&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}.bind(this)),this.controls.forEach(function(r){r.setMap(this)}.bind(this)),this.interactions.forEach(function(r){r.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Wue(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,t,null,void 0!==i.layerFilter?i.layerFilter:K0,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];return function t(i){i.forEach(function(r){r instanceof JS?t(r.getLayers()):e.push(r)})}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(t=void 0!==t?t:{}).hitTolerance?t.hitTolerance:0,!1!==t.checkWrapped,void 0!==t.layerFilter?t.layerFilter:K0,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),i="changedTouches"in e?e.changedTouches[0]:e;return[i.clientX-t.left,i.clientY-t.top]}getTarget(){return this.get("target")}getTargetElement(){const e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}getCoordinateFromPixel(e){return E_(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?cc(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const t=this.getLayerGroup();if(e instanceof O1)return void t.setLayers(e);const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=o2(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?cc(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return function oCt(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return eE;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){const i=new yf(t=t||e.type,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()===this&&o.getActive()&&this.getTargetElement()&&(!o.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[0]||o[1]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new tm("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new tm("loadstart",this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,i=this.targetChangeHandlerKeys_.length;t<i;++t)Ta(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Sz(this.viewport_)}const e=this.getTargetElement();if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Ywt(this)),this.mapBrowserEventHandler_=new tCt(this,this.moveTolerance_);for(const r in zs)this.mapBrowserEventHandler_.addEventListener(zs[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!L4e&&{passive:!1});const t=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[js(i,"keydown",this.handleBrowserEvent,this),js(i,"keypress",this.handleBrowserEvent,this),js(t,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ta(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ta(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=js(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=js(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ta),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new c6("addlayer",e)),this.layerGroupPropertyListenerKeys_=[js(e,"propertychange",this.render,this),js(e,"change",this.render,this),js(e,"addlayer",this.handleLayerAdd_,this),js(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Que(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(void 0!==t&&Gue(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:yz(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:br(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=yz(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Cz(this.previousExtent_)&&!m_(s.extent,this.previousExtent_))&&(this.dispatchEvent(new tm("movestart",this,r)),this.previousExtent_=N5(this.previousExtent_)),this.previousExtent_&&!s.viewHints[0]&&!s.viewHints[1]&&!m_(s.extent,this.previousExtent_)&&(this.dispatchEvent(new tm("moveend",this,s)),I4e(s.extent,this.previousExtent_))),this.dispatchEvent(new tm("postrender",this,s)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new c6("removelayer",t)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof p6)return void this.set("view",e);this.set("view",new p6);const t=this;e.then(function(i){t.setView(new p6(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),r=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(r)&&!isNaN(s)&&(t=[r,s],!Gue(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}};var jue=Me(2402);class lO{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=r4(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new lO({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return or()}getImage(e){return or()}getHitDetectionImage(){return or()}getPixelRatio(e){return 1}getImageState(){return or()}getImageSize(){return or()}getOrigin(){return or()}getSize(){return or()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=r4(e)}listenImageChange(e){or()}load(){or()}unlistenImageChange(e){or()}}const $ue=lO;function Y0(n){return Array.isArray(n)?U4e(n):n}class uO extends $ue{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new uO({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=t4(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let r=this.radius_,s=void 0===this.radius2_?r:this.radius2_;if(r<s){const F=r;r=s,s=F}const a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),c=s*Math.sin(a),u=r-Math.sqrt(s*s-c*c),f=Math.sqrt(c*c+u*u),p=f/c;if("miter"===e&&p<=i)return p*t;const g=t/2/p,_=t/2*(u/f),w=Math.sqrt((r+g)*(r+g)+_*_)-r;if(void 0===this.radius2_||"bevel"===e)return 2*w;const C=r*Math.sin(a),M=s-Math.sqrt(r*r-C*C),I=Math.sqrt(C*C+M*M)/C;return I<=i?2*Math.max(w,I*t/2-s-r):2*w}createRenderOptions(){let s,e=Jg,t=0,i=null,r=0,o=0;this.stroke_&&(s=this.stroke_.getColor(),null===s&&(s=y_),s=Y0(s),o=this.stroke_.getWidth(),void 0===o&&(o=1),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=Jg),t=this.stroke_.getMiterLimit(),void 0===t&&(t=10));const a=this.calculateLineJoinSize_(e,o,t),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:s,strokeWidth:o,size:Math.ceil(2*c+a),lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();null===r&&(r=vf),t.fillStyle=Y0(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if("string"==typeof t&&(t=QS(t)),null===t?i=1:Array.isArray(t)&&(i=4===t.length?t[3]:1),0===i){const r=t4(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const c=s+a*o,l=a%2==0?i:r;e.lineTo(l*Math.cos(c),l*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=vf,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const L_=uO;class hO extends L_{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new hO({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const J5=hO;class fO{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null}clone(){const e=this.getColor();return new fO({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const Aa=fO;class dO{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new dO({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const Tc=dO;class g6{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=que,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new g6({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=que,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let pO=null;function $xt(n,e){if(!pO){const t=new Aa({color:"rgba(255,255,255,0.4)"}),i=new Tc({color:"#3399CC",width:1.25});pO=[new g6({image:new J5({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return pO}function gO(){const n={},e=[255,255,255,1],t=[0,153,255,1];return n.Polygon=[new g6({fill:new Aa({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new g6({stroke:new Tc({color:e,width:5})}),new g6({stroke:new Tc({color:t,width:3})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new g6({image:new J5({radius:6,fill:new Aa({color:t}),stroke:new Tc({color:e,width:1.5})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function que(n){return n.getGeometry()}const zl=g6;function mO(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[DS(i,"load",function(){o=!0,s||e()})];return i.src&&dwt?(s=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(o?e():t())})):a.push(DS(i,"error",t)),function(){r=!1,a.forEach(Ta)}}let D_=null;class qxt extends LS{constructor(e,t,i,r,s,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){D_||(D_=t4(1,1)),D_.drawImage(this.image_,0,0);try{D_.getImageData(0,0,1,1),this.tainted_=!1}catch{D_=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=t4(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=mO(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=O4e(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class AO extends $ue{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const o=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let a=e.src;Ss(!(void 0!==a&&o),4),Ss(!o||o&&this.imgSize_,5),(void 0===a||0===a.length)&&o&&(a=o.src||br(o)),Ss(void 0!==a&&a.length>0,6);const c=void 0!==e.src?0:2;this.color_=void 0!==e.color?QS(e.color):null,this.iconImage_=function Kxt(n,e,t,i,r,s){let o=WS.get(e,i,s);return o||(o=new qxt(n,e,t,i,r,s),WS.set(e,i,s,o)),o}(o,a,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,c,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null}clone(){const e=this.getScale();return new AO({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!r)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=r[0]),"fraction"==this.anchorYUnits_&&(e[1]*=r[1])}if("top-left"!=this.anchorOrigin_){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+r[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=i[0]-t[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener("change",e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener("change",e)}}const Kue=AO;class vO{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=r4(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Aa({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new vO({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=r4(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const m6=vO;function Xue(n){return new zl({fill:I_(n,""),stroke:B_(n,""),text:Yxt(n),image:Zxt(n)})}function I_(n,e){const t=n[e+"fill-color"];if(t)return new Aa({color:t})}function B_(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(t||i)return new Tc({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function Yxt(n){const e=n["text-value"];return e?new m6({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:I_(n,"text-"),backgroundFill:I_(n,"text-background-"),stroke:B_(n,"text-"),backgroundStroke:B_(n,"text-background-")}):void 0}function Zxt(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new Kue({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new L_({points:i,fill:I_(n,s),stroke:B_(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new J5({radius:r,fill:I_(n,s),stroke:B_(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const ebt=class Jxt extends jS{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new jue(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){let t;if(void 0===e)t=$xt;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof zl)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const o=e[s];r[s]=o instanceof zl?o:Xue(o)}t=r}else t=Xue(e);this.style_=t,this.styleFunction_=null===e?void 0:function jxt(n){let e;if("function"==typeof n)e=n;else{let t;Array.isArray(n)?t=n:(Ss("function"==typeof n.getZIndex,41),t=[n]),e=function(){return t}}return e}(this.style_),this.changed()}},R_={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},mE=[R_.FILL],A6=[R_.STROKE],ep=[R_.BEGIN_PATH],Zue=[R_.CLOSE_PATH],nr=R_,Jue=class tbt{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},F_=class nbt extends Jue{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],kS(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let c=a.length;const l=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],f=e[t+1];const p=this.tmpCoordinate_;let _,y,w,g=!0;for(_=t+r;_<i;_+=r)p[0]=e[_],p[1]=e[_+1],w=vz(l,p),w!==y?(g&&(a[c++]=u,a[c++]=f,g=!1),a[c++]=p[0],a[c++]=p[1]):1===w?(a[c++]=p[0],a[c++]=p[1],g=!1):g=!0,u=p[0],f=p[1],y=w;return(s&&g||_===t+r)&&(a[c++]=u,a[c++]=f),c}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const c=i[o],l=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);s.push(l),t=c}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let c,l,u,f,p;switch(s){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),f=[];const g=e.getEndss();p=0;for(let _=0,y=g.length;_<y;++_){const w=[];p=this.drawCustomCoordinates_(c,p,g[_],o,w),f.push(w)}this.instructions.push([nr.CUSTOM,a,f,e,i,qz]),this.hitDetectionInstructions.push([nr.CUSTOM,a,f,e,r||i,qz]);break;case"Polygon":case"MultiLineString":u=[],c="Polygon"==s?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,e.getEnds(),o,u),this.instructions.push([nr.CUSTOM,a,u,e,i,T_]),this.hitDetectionInstructions.push([nr.CUSTOM,a,u,e,r||i,T_]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),l=this.appendFlatLineCoordinates(c,0,c.length,o,!1,!1),this.instructions.push([nr.CUSTOM,a,l,e,i,d6]),this.hitDetectionInstructions.push([nr.CUSTOM,a,l,e,r||i,d6]);break;case"MultiPoint":c=e.getFlatCoordinates(),l=this.appendFlatPointCoordinates(c,o),l>a&&(this.instructions.push([nr.CUSTOM,a,l,e,i,d6]),this.hitDetectionInstructions.push([nr.CUSTOM,a,l,e,r||i,d6]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),l=this.coordinates.length,this.instructions.push([nr.CUSTOM,a,l,e,i]),this.hitDetectionInstructions.push([nr.CUSTOM,a,l,e,r||i])}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[nr.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[nr.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==nr.END_GEOMETRY?o=t:s==nr.BEGIN_GEOMETRY&&(r[2]=t,Jyt(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=Y0(r||vf)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=Y0(r||y_);const s=t.getLineCap();i.lineCap=void 0!==s?s:XS;const o=t.getLineDash();i.lineDash=o?o.slice():A_;const a=t.getLineDashOffset();i.lineDashOffset=a||0;const c=t.getLineJoin();i.lineJoin=void 0!==c?c:Jg;const l=t.getWidth();i.lineWidth=void 0!==l?l:1;const u=t.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[nr.SET_FILL_STYLE,t];return"string"!=typeof t&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[nr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!n6(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=l)&&(void 0!==i&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=l)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[nr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=I4e(this.maxExtent),this.maxLineWidth>0)&&FS(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},e0e=class abt extends F_{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=void 0!==s.fillStyle,a=void 0!==s.strokeStyle,c=i.length;this.instructions.push(ep),this.hitDetectionInstructions.push(ep);for(let l=0;l<c;++l){const u=i[l],f=this.coordinates.length,p=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),g=[nr.MOVE_TO_LINE_TO,f,p];this.instructions.push(g),this.hitDetectionInstructions.push(g),a&&(this.instructions.push(Zue),this.hitDetectionInstructions.push(Zue)),t=u}return o&&(this.instructions.push(mE),this.hitDetectionInstructions.push(mE)),a&&(this.instructions.push(A6),this.hitDetectionInstructions.push(A6)),t}drawCircle(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([nr.SET_FILL_STYLE,vf]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([nr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const l=[nr.CIRCLE,c];this.instructions.push(ep,l),this.hitDetectionInstructions.push(ep,l),void 0!==i.fillStyle&&(this.instructions.push(mE),this.hitDetectionInstructions.push(mE)),void 0!==i.strokeStyle&&(this.instructions.push(A6),this.hitDetectionInstructions.push(A6)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([nr.SET_FILL_STYLE,vf]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([nr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(a,0,o,c),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([nr.SET_FILL_STYLE,vf]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([nr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,f=o.length;u<f;++u)l=this.drawFlatCoordinatess_(a,l,o[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=q5(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};function cbt(n,e,t,i,r){let u,f,p,g,_,y,w,C,b,M,s=t,o=t,a=0,c=0,l=t;for(f=t;f<i;f+=r){const T=e[f],I=e[f+1];void 0!==_&&(b=T-_,M=I-y,g=Math.sqrt(b*b+M*M),void 0!==w&&(c+=p,u=Math.acos((w*b+C*M)/(p*g)),u>n&&(c>a&&(a=c,s=l,o=f),c=0,l=f-r)),p=g,w=b,C=M),_=T,y=I}return c+=g,c>a?[l,f]:[s,o]}const k_={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ubt={Circle:e0e,Default:F_,Image:class ibt extends F_{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([nr.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([nr.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([nr.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([nr.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class sbt extends F_{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[nr.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([nr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,A_,0],ep);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(A6),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([nr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ep);const o=e.getEnds(),a=e.getFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,f=o.length;u<f;++u)l=this.drawFlatCoordinates_(a,l,o[u],c);this.hitDetectionInstructions.push(A6),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(A6),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(A6),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(ep)}},Polygon:e0e,Text:class lbt extends F_{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const s=this.textState_;if(""===this.text_||!s||!this.textFillState_&&!this.textStrokeState_)return;const o=this.coordinates;let a=o.length;const c=e.getType();let l=null,u=e.getStride();if("line"!==s.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){let f=s.overflow?null:[];switch(c){case"Point":case"MultiPoint":l=e.getFlatCoordinates();break;case"LineString":l=e.getFlatMidpoint();break;case"Circle":l=e.getCenter();break;case"MultiLineString":l=e.getFlatMidpoints(),u=2;break;case"Polygon":l=e.getFlatInteriorPoint(),s.overflow||f.push(l[2]/this.resolution),u=3;break;case"MultiPolygon":const w=e.getFlatInteriorPoints();l=[];for(let C=0,b=w.length;C<b;C+=3)s.overflow||f.push(w[C+2]/this.resolution),l.push(w[C],w[C+1]);if(0===l.length)return;u=2}const p=this.appendFlatPointCoordinates(l,u);if(p===a)return;if(f&&(p-a)/2!=l.length/u){let w=a/2;f=f.filter((C,b)=>{const M=o[2*(w+b)]===l[b*u]&&o[2*(w+b)+1]===l[b*u+1];return M||--w,M})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let g=s.padding;if(g!=G5&&(s.scale[0]<0||s.scale[1]<0)){let w=s.padding[0],C=s.padding[1],b=s.padding[2],M=s.padding[3];s.scale[0]<0&&(C=-C,M=-M),s.scale[1]<0&&(w=-w,b=-b),g=[w,C,b,M]}const _=this.pixelRatio;this.instructions.push([nr.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,g==G5?G5:g.map(function(w){return w*_}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const y=1/_;this.hitDetectionInstructions.push([nr.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,void 0,this.declutterImageWithText_,g,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(t)}else{if(!Pl(this.getBufferedMaxExtent(),e.getExtent()))return;let f;if(l=e.getFlatCoordinates(),"LineString"==c)f=[l.length];else if("MultiLineString"==c)f=e.getEnds();else if("Polygon"==c)f=e.getEnds().slice(0,1);else if("MultiPolygon"==c){const y=e.getEndss();f=[];for(let w=0,C=y.length;w<C;++w)f.push(y[w][0])}this.beginGeometry(e,t);const p=s.textAlign;let _,g=0;for(let y=0,w=f.length;y<w;++y){if(null==p){const b=cbt(s.maxAngle,l,g,f[y],u);g=b[0],_=b[1]}else _=f[y];for(let b=g;b<_;b+=u)o.push(l[b],l[b+1]);const C=o.length;g=f[y],this.drawChars_(a,C),a=C}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||w_,justify:t.justify,textBaseline:t.textBaseline||YS,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,l=k_[r.textBaseline],u=this.textOffsetY_*c,f=this.text_,p=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([nr.DRAW_CHARS,e,t,l,r.overflow,a,r.maxAngle,c,u,s,p*c,f,o,1]),this.hitDetectionInstructions.push([nr.DRAW_CHARS,e,t,l,r.overflow,a,r.maxAngle,1,u,s,p,f,o,1/c])}setTextStyle(e,t){let i,r,s;if(e){const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Y0(o.getColor()||vf)):(r=null,this.textFillState_=r);const a=e.getStroke();if(a){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const _=a.getLineDash(),y=a.getLineDashOffset(),w=a.getWidth(),C=a.getMiterLimit();s.lineCap=a.getLineCap()||XS,s.lineDash=_?_.slice():A_,s.lineDashOffset=void 0===y?0:y,s.lineJoin=a.getLineJoin()||Jg,s.lineWidth=void 0===w?1:w,s.miterLimit=void 0===C?10:C,s.strokeStyle=Y0(a.getColor()||y_)}else s=null,this.textStrokeState_=s;i=this.textState_;const c=e.getFont()||eue;Wwt(c);const l=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||YS,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||G5,i.scale=void 0===l?[1,1]:l;const u=e.getOffsetX(),f=e.getOffsetY(),p=e.getRotateWithView(),g=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===g?0:g,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:br(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+br(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=t}}},t0e=class hbt{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];return void 0===s&&(s=new(0,ubt[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s),s}},dbt=class fbt extends b4e{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return or()}getData(e){return null}prepareFrame(e){return or()}renderFrame(e,t){return or()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return function(r,s){const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}.bind(this)}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){2===e.target.getState()&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return 2!=t&&3!=t&&e.addEventListener("change",this.boundHandleImageChange_),0==t&&(e.load(),t=e.getState()),2==t}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},n0e=[];let am=null;const i0e=class gbt extends dbt{constructor(e){super(e),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){let r;am||function pbt(){const n=document.createElement("canvas");n.width=1,n.height=1,am=n.getContext("2d")}(),am.clearRect(0,0,1,1);try{am.drawImage(e,t,i,1,1,0,0,1,1),r=am.getImageData(0,0,1,1).data}catch{return am=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return"function"==typeof i&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&n6(QS(e.style.backgroundColor),QS(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=t4();const c=o.canvas;s.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=V5(i),s=NS(i),o=OS(i),a=zS(i);cc(t.coordinateToPixelTransform,r),cc(t.coordinateToPixelTransform,s),cc(t.coordinateToPixelTransform,o),cc(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;cc(c,r),cc(c,s),cc(c,o),cc(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new q4e(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_("prerender",e,t)}postRender(e,t){this.dispatchRenderEvent_("postrender",e,t)}getRenderTransform(e,t,i,r,s,o,a){const u=r/t;return gf(this.tempTransform,s/2,o/2,u,-u,-i,-e[0]+a,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}};function mbt(n,e,t,i,r,s,o,a,c,l,u,f){let p=n[e],g=n[e+1],_=0,y=0,w=0,C=0;function b(){_=p,y=g,p=n[e+=i],g=n[e+1],C+=w,w=Math.sqrt((p-_)*(p-_)+(g-y)*(g-y))}do{b()}while(e<t-i&&C+w<s);let M=0===w?0:(s-C)/w;const T=Af(_,p,M),I=Af(y,g,M),F=e-i,P=C,R=s+a*c(l,r,u);for(;e<t-i&&C+w<R;)b();M=0===w?0:(R-C)/w;const k=Af(_,p,M),W=Af(y,g,M);let ie;if(f){const K=[T,I,k,W];Uz(K,0,4,2,f,K,K),ie=K[0]>K[2]}else ie=T>k;const Te=Math.PI,me=[],Q=F+i===e;let he;if(w=0,C=P,p=n[e=F],g=n[e+1],Q)return b(),he=Math.atan2(g-y,p-_),ie&&(he+=he>0?-Te:Te),me[0]=[(k+T)/2,(W+I)/2,(R-s)/2,he,r],me;for(let K=0,oe=(r=r.replace(/\n/g," ")).length;K<oe;){b();let fe=Math.atan2(g-y,p-_);if(ie&&(fe+=fe>0?-Te:Te),void 0!==he){let ut=fe-he;if(ut+=ut>Te?-2*Te:ut<-Te?2*Te:0,Math.abs(ut)>o)return null}he=fe;const de=K;let Re=0;for(;K<oe;++K){const It=a*c(l,r[ie?oe-K-1:K],u);if(e+i<t&&C+w<s+Re+It/2)break;Re+=It}if(K===de)continue;const Ze=ie?r.substring(oe-de,oe-K):r.substring(de,K);M=0===w?0:(s+Re/2-C)/w;const Be=Af(_,p,M),wt=Af(y,g,M);me.push([Be,wt,Re/2,fe,Ze]),s+=Re}return me}function _O(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const c=n[a],l=n[a+1];o+=Math.sqrt((c-r)*(c-r)+(l-s)*(l-s)),r=c,s=l}return o}const cm=[1/0,1/0,-1/0,-1/0],v6=[],Cf=[],xf=[],_6=[];function r0e(n){return n[3].declutterBox}const Abt=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function s0e(n,e){return("start"===e||"end"===e)&&!Abt.test(n)&&(e="start"===e?"left":"right"),k_[e]}function vbt(n,e,t){return t>0&&n.push("\n",""),n.push(e,""),n}const ybt=class _bt{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],l=this.pixelRatio,u=[c.scale[0]*l,c.scale[1]*l],f=Array.isArray(e),p=c.justify?k_[c.justify]:s0e(Array.isArray(e)?e[0]:e,c.textAlign||w_),g=r&&o.lineWidth?o.lineWidth:0,_=f?e:e.split("\n").reduce(vbt,[]),{width:y,height:w,widths:C,heights:b,lineWidths:M}=function $wt(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,c=0;for(let l=0,u=e.length;l<=u;l+=2){const f=e[l];if("\n"===f||l===u){s=Math.max(s,o),r.push(o),o=0,a+=c;continue}const p=e[l+1]||n.font,g=ZS(p,f);t.push(g),o+=g;const _=jwt(p);i.push(_),c=Math.max(c,_)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}(c,_),T=y+g,I=[],F=(T+2)*u[0],P=(w+g)*u[1],R={width:F<0?Math.floor(F):Math.ceil(F),height:P<0?Math.floor(P):Math.ceil(P),contextInstructions:I};(1!=u[0]||1!=u[1])&&I.push("scale",u),r&&(I.push("strokeStyle",o.strokeStyle),I.push("lineWidth",g),I.push("lineCap",o.lineCap),I.push("lineJoin",o.lineJoin),I.push("miterLimit",o.miterLimit),I.push("setLineDash",[o.lineDash]),I.push("lineDashOffset",o.lineDashOffset)),i&&I.push("fillStyle",a.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");const k=.5-p;let W=p*T+k*g;const ie=[],Te=[];let oe,me=0,Q=0,he=0,K=0;for(let fe=0,de=_.length;fe<de;fe+=2){const Re=_[fe];if("\n"===Re){Q+=me,me=0,W=p*T+k*g,++K;continue}const Ze=_[fe+1]||c.font;Ze!==oe&&(r&&ie.push("font",Ze),i&&Te.push("font",Ze),oe=Ze),me=Math.max(me,b[he]);const Be=[Re,W+k*C[he]+p*(C[he]-M[K]),.5*(g+me)+Q];W+=C[he],r&&ie.push("strokeText",Be),i&&Te.push("fillText",Be),++he}return Array.prototype.push.apply(I,ie),Array.prototype.push.apply(I,Te),this.labels_[s]=R,R}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w){let C=i-(a*=p[0]),b=r-(c*=p[1]);const M=s+l>e?e-l:s,T=o+u>t?t-u:o,I=_[3]+M*p[0]+_[1],F=_[0]+T*p[1]+_[2],P=C-_[3],R=b-_[0];let k;return(y||0!==f)&&(v6[0]=P,_6[0]=P,v6[1]=R,Cf[1]=R,Cf[0]=P+I,xf[0]=Cf[0],xf[1]=R+F,_6[1]=xf[1]),0!==f?(k=gf([1,0,0,1,0,0],i,r,1,1,f,-i,-r),cc(k,v6),cc(k,Cf),cc(k,xf),cc(k,_6),Qu(Math.min(v6[0],Cf[0],xf[0],_6[0]),Math.min(v6[1],Cf[1],xf[1],_6[1]),Math.max(v6[0],Cf[0],xf[0],_6[0]),Math.max(v6[1],Cf[1],xf[1],_6[1]),cm)):Qu(Math.min(P,P+I),Math.min(R,R+F),Math.max(P,P+I),Math.max(R,R+F),cm),g&&(C=Math.round(C),b=Math.round(b)),{drawImageX:C,drawImageY:b,drawImageW:M,drawImageH:T,originX:l,originY:u,declutterBox:{minX:cm[0],minY:cm[1],maxX:cm[2],maxY:cm[3],value:w},canvasTransform:k,scale:p}}replayImageOrLabel_(e,t,i,r,s,o,a){const l=r.declutterBox,u=e.canvas,f=a?a[2]*r.scale[0]/2:0;return l.minX-f<=u.width/t&&l.maxX+f>=0&&l.minY-f<=u.height/t&&l.maxY+f>=0&&(!(!o&&!a)&&this.replayTextBackground_(e,v6,Cf,xf,_6,o,a),function qwt(n,e,t,i,r,s,o,a,c,l,u){n.save(),1!==t&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(c,l),n.scale(u[0],u[1]),function Kwt(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}(i,n)):u[0]<0||u[1]<0?(n.translate(c,l),n.scale(u[0],u[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,c,l,o*u[0],a*u[1]),n.restore()}(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=cc(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,l=s0e(Array.isArray(e)?e[0]:e,s.textAlign||w_),u=k_[s.textBaseline||YS],f=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/c-2*s.scale[0])+2*(.5-l)*f,anchorY:u*o.height/c+2*(.5-u)*f}}execute_(e,t,i,r,s,o,a,c){let l;this.pixelCoordinates_&&n6(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=$5(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),function pwt(n,e){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5]}(this.renderedTransform_,i));let u=0;const f=r.length;let g,_,y,w,C,b,M,T,I,F,P,R,p=0,k=0,W=0,ie=null,Te=null;const me=this.coordinateCache_,Q=this.viewRotation_,he=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,K={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Q},oe=this.instructions!=r||this.overlaps?0:200;let fe,de,Re,Ze;for(;u<f;){const Be=r[u];switch(Be[0]){case nr.BEGIN_GEOMETRY:fe=Be[1],Ze=Be[3],fe.getGeometry()?void 0===a||Pl(a,Ze.getExtent())?++u:u=Be[2]+1:u=Be[2];break;case nr.BEGIN_PATH:k>oe&&(this.fill_(e),k=0),W>oe&&(e.stroke(),W=0),!k&&!W&&(e.beginPath(),w=NaN,C=NaN),++u;break;case nr.CIRCLE:p=Be[1];const ut=l[p],It=l[p+1],sn=l[p+2]-ut,Sn=l[p+3]-It,on=Math.sqrt(sn*sn+Sn*Sn);e.moveTo(ut+on,It),e.arc(ut,It,on,0,2*Math.PI,!0),++u;break;case nr.CLOSE_PATH:e.closePath(),++u;break;case nr.CUSTOM:p=Be[1],g=Be[2];const Ot=Be[4],Rt=6==Be.length?Be[5]:void 0;K.geometry=Be[3],K.feature=fe,u in me||(me[u]=[]);const dn=me[u];Rt?Rt(l,p,g,2,dn):(dn[0]=l[p],dn[1]=l[p+1],dn.length=2),Ot(dn,K),++u;break;case nr.DRAW_IMAGE:p=Be[1],g=Be[2],T=Be[3],_=Be[4],y=Be[5];let qn=Be[6];const En=Be[7],Cn=Be[8],Un=Be[9],fi=Be[10];let ar=Be[11];const ls=Be[12];let ze=Be[13];const ve=Be[14],Tt=Be[15];if(!T&&Be.length>=20){I=Be[19],F=Be[20],P=Be[21],R=Be[22];const V1=this.drawLabelWithPointPlacement_(I,F,P,R);T=V1.label,Be[3]=T,_=(V1.anchorX-Be[23])*this.pixelRatio,Be[4]=_,y=(V1.anchorY-Be[24])*this.pixelRatio,Be[5]=y,qn=T.height,Be[6]=qn,ze=T.width,Be[13]=ze}let hn,xn,In,wi;Be.length>25&&(hn=Be[25]),Be.length>17?(xn=Be[16],In=Be[17],wi=Be[18]):(xn=G5,In=!1,wi=!1),fi&&he?ar+=Q:!fi&&!he&&(ar-=Q);let Le=0;for(;p<g;p+=2){if(hn&&hn[Le++]<ze/this.pixelRatio)continue;const V1=this.calculateImageOrLabelDimensions_(T.width,T.height,l[p],l[p+1],ze,qn,_,y,Cn,Un,ar,ls,s,xn,In||wi,fe),Bo=[e,t,T,V1,En,In?ie:null,wi?Te:null];if(c){if("none"===ve)continue;if("obstacle"===ve){c.insert(V1.declutterBox);continue}{let U1,G1;if(Tt){const Ql=g-p;if(!Tt[Ql]){Tt[Ql]=Bo;continue}if(U1=Tt[Ql],delete Tt[Ql],G1=r0e(U1),c.collides(G1))continue}if(c.collides(V1.declutterBox))continue;U1&&(c.insert(G1),this.replayImageOrLabel_.apply(this,U1)),c.insert(V1.declutterBox)}}this.replayImageOrLabel_.apply(this,Bo)}++u;break;case nr.DRAW_CHARS:const Yt=Be[1],an=Be[2],Wn=Be[3],jn=Be[4];R=Be[5];const Yi=Be[6],Fr=Be[7],Io=Be[8];P=Be[9];const at=Be[10];I=Be[11],F=Be[12];const Bn=[Be[13],Be[13]],Ht=this.textStates[F],zn=Ht.font,Pn=[Ht.scale[0]*Fr,Ht.scale[1]*Fr];let gs;zn in this.widths_?gs=this.widths_[zn]:(gs={},this.widths_[zn]=gs);const c2=_O(l,Yt,an,2),Ya=Math.abs(Pn[0])*nue(zn,I,gs);if(jn||Ya<=c2){const U1=mbt(l,Yt,an,2,I,(c2-Ya)*k_[this.textStates[F].textAlign],Yi,Math.abs(Pn[0]),nue,zn,gs,he?0:this.viewRotation_);e:if(U1){const G1=[];let Ql,Lf,lp,sl,w3;if(P)for(Ql=0,Lf=U1.length;Ql<Lf;++Ql){w3=U1[Ql],lp=w3[4],sl=this.createLabel(lp,F,"",P),_=w3[2]+(Pn[0]<0?-at:at),y=Wn*sl.height+2*(.5-Wn)*at*Pn[1]/Pn[0]-Io;const Xu=this.calculateImageOrLabelDimensions_(sl.width,sl.height,w3[0],w3[1],sl.width,sl.height,_,y,0,0,w3[3],Bn,!1,G5,!1,fe);if(c&&c.collides(Xu.declutterBox))break e;G1.push([e,t,sl,Xu,1,null,null])}if(R)for(Ql=0,Lf=U1.length;Ql<Lf;++Ql){w3=U1[Ql],lp=w3[4],sl=this.createLabel(lp,F,R,""),_=w3[2],y=Wn*sl.height-Io;const Xu=this.calculateImageOrLabelDimensions_(sl.width,sl.height,w3[0],w3[1],sl.width,sl.height,_,y,0,0,w3[3],Bn,!1,G5,!1,fe);if(c&&c.collides(Xu.declutterBox))break e;G1.push([e,t,sl,Xu,1,null,null])}c&&c.load(G1.map(r0e));for(let Xu=0,ke=G1.length;Xu<ke;++Xu)this.replayImageOrLabel_.apply(this,G1[Xu])}}++u;break;case nr.END_GEOMETRY:if(void 0!==o){fe=Be[1];const V1=o(fe,Ze);if(V1)return V1}++u;break;case nr.FILL:oe?k++:this.fill_(e),++u;break;case nr.MOVE_TO_LINE_TO:for(p=Be[1],g=Be[2],de=l[p],Re=l[p+1],b=de+.5|0,M=Re+.5|0,(b!==w||M!==C)&&(e.moveTo(de,Re),w=b,C=M),p+=2;p<g;p+=2)de=l[p],Re=l[p+1],b=de+.5|0,M=Re+.5|0,(p==g-2||b!==w||M!==C)&&(e.lineTo(de,Re),w=b,C=M);++u;break;case nr.SET_FILL_STYLE:ie=Be,this.alignFill_=Be[2],k&&(this.fill_(e),k=0,W&&(e.stroke(),W=0)),e.fillStyle=Be[1],++u;break;case nr.SET_STROKE_STYLE:Te=Be,W&&(e.stroke(),W=0),this.setStrokeStyle_(e,Be),++u;break;case nr.STROKE:oe?W++:e.stroke(),++u;break;default:++u}}k&&this.fill_(e),W&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}},yO=["Polygon","Circle","LineString","Image","Text","Default"],wO={},o0e=class wbt{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];void 0===i&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r)i[s]=new ybt(this.resolution_,this.pixelRatio_,this.overlaps_,r[s])}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){const a=2*(r=Math.round(r))+1,c=gf(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=t4(a,a));const u=this.hitDetectionContext_;let f;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):l||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(f=[1/0,1/0,-1/0,-1/0],Xg(f,e),FS(f,t*(this.renderBuffer_+r),f));const p=function Cbt(n){if(void 0!==wO[n])return wO[n];const e=2*n+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(4*((n+s)*e+(n+o))+3),s>0&&c.push(4*((n-s)*e+(n+o))+3),o>0&&(c.push(4*((n+s)*e+(n-o))+3),s>0&&c.push(4*((n-s)*e+(n-o))+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return wO[n]=r,r}(r);let g;function _(I,F){const P=u.getImageData(0,0,a,a).data;for(let R=0,k=p.length;R<k;R++)if(P[p[R]]>0){if(!o||"Image"!==g&&"Text"!==g||o.includes(I)){const W=(p[R]-3)/4,ie=r-W%a,Te=r-(W/a|0),me=s(I,F,ie*ie+Te*Te);if(me)return me}u.clearRect(0,0,a,a);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);let w,C,b,M,T;for(y.sort(H5),w=y.length-1;w>=0;--w){const I=y[w].toString();for(b=this.executorsByZIndex_[I],C=yO.length-1;C>=0;--C)if(g=yO[C],M=b[g],void 0!==M&&(T=M.executeHitDetection(u,c,i,_,f),T))return T}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return $5(a,0,8,2,e,a),a}isEmpty(){return qg(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const c=Object.keys(this.executorsByZIndex_).map(Number);let l,u,f,p,g,_;for(c.sort(H5),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||yO,a&&c.reverse(),l=0,u=c.length;l<u;++l){const y=c[l].toString();for(g=this.executorsByZIndex_[y],f=0,p=o.length;f<p;++f)_=g[o[f]],void 0!==_&&_.execute(e,t,i,r,s,a)}this.maxExtent_&&e.restore()}},bbt=class xbt extends Jue{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,i,r){if(!this.image_)return;const s=$5(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,c=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=c*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let u=0,f=s.length;u<f;u+=2){const p=s[u]-this.imageAnchorX_,g=s[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const _=p+this.imageAnchorX_,y=g+this.imageAnchorY_;gf(a,_,y,1,1,l,-_,-y),o.setTransform.apply(o,a),o.translate(_,y),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,g,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=$5(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=s[t]+this.textOffsetX_,l=s[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(c-this.textOffsetX_,l-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,c,l),this.textFillState_&&o.fillText(this.text_,c,l))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=$5(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let c=a.length;s&&(c-=2);for(let l=2;l<c;l+=2)o.lineTo(a[l],a[l+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(Pl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function PCt(n,e,t){const i=n.getFlatCoordinates();if(i){const r=n.getStride();return $5(i,0,i.length,r,e,t)}return null}(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!Pl(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Pl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Pl(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,l=o.length;c<l;++c)s=this.moveToLineTo_(r,s,o[c],a,!1);i.stroke()}if(""!==this.text_){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Pl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Pl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,c=s.length;a<c;++a)r=this.drawRings_(i,r,s[a],o);this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),n6(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:w_;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const i=e.getColor();this.fillState_={fillStyle:Y0(i||vf)}}else this.fillState_=null;if(t){const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),l=t.getMiterLimit(),u=s||A_;this.strokeState_={lineCap:void 0!==r?r:XS,lineDash:1===this.pixelRatio_?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==a?a:Jg,lineWidth:(void 0!==c?c:1)*this.pixelRatio_,miterLimit:void 0!==l?l:10,strokeStyle:Y0(i||y_)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(e){const t=e.getFill();if(t){const g=t.getColor();this.textFillState_={fillStyle:Y0(g||vf)}}else this.textFillState_=null;const i=e.getStroke();if(i){const g=i.getColor(),_=i.getLineCap(),y=i.getLineDash(),w=i.getLineDashOffset(),C=i.getLineJoin(),b=i.getWidth(),M=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==_?_:XS,lineDash:y||A_,lineDashOffset:w||0,lineJoin:void 0!==C?C:Jg,lineWidth:void 0!==b?b:1,miterLimit:void 0!==M?M:10,strokeStyle:Y0(g||y_)}}else this.textStrokeState_=null;const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),l=e.getScaleArray(),u=e.getText(),f=e.getTextAlign(),p=e.getTextBaseline();this.textState_={font:void 0!==r?r:eue,textAlign:void 0!==f?f:w_,textBaseline:void 0!==p?p:YS},this.text_=void 0!==u?Array.isArray(u)?u.reduce((g,_,y)=>g+(y%2?" ":_),""):u:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==c?c:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}},Z0=.5,a0e={Point:function Pbt(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let c=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(c=r,"obstacle"===u){const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(s,a),l.drawPoint(e,i)}if(o&&o.getText()){let c=n;r&&(c=r);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},LineString:function Rbt(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},Polygon:function zbt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,o),c.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},MultiPoint:function Hbt(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let c=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(c=r,"obstacle"===u){const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(s,a),l.drawMultiPoint(e,i)}if(o&&o.getText()){let c=n;r&&(c=r);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},MultiLineString:function Fbt(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},MultiPolygon:function kbt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,o),c.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},GeometryCollection:function Bbt(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o)(0,a0e[s[o].getType()])(n,s[o],t,i,r)},Circle:function Dbt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(s,o),c.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}};function Tbt(n,e){return parseInt(br(n),10)-parseInt(br(e),10)}function CO(n,e){return.5*n/e}function c0e(n,e,t,i,r,s,o){let a=!1;const c=t.getImage();if(c){const l=c.getImageState();2==l||3==l?c.unlistenImageChange(r):(0==l&&c.load(),c.listenImageChange(r),a=!0)}return function Ibt(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);t.getRenderer()?l0e(n,a,t,e):(0,a0e[a.getType()])(n,a,t,e,s)}(n,e,t,i,s,o),a}function l0e(n,e,t,i){if("GeometryCollection"!=e.getType())n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer());else{const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)l0e(n,s[o],t,i)}}const Nbt=class Obt extends i0e{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,c=s.projection,l=s.rotation,u=c.getExtent(),f=this.getLayer().getSource(),p=t.pixelRatio,g=t.viewHints,_=!(g[0]||g[1]),y=this.compositionContext_,w=Math.round(t.size[0]*p),C=Math.round(t.size[1]*p),b=f.getWrapX()&&c.canWrapX(),M=b?ma(u):null,T=b?Math.ceil((r[2]-u[2])/M)+1:1;let I=b?Math.floor((r[0]-u[0])/M):0;do{const F=this.getRenderTransform(o,a,l,p,w,C,I*M);e.execute(y,1,F,l,_,void 0,i)}while(++I<T)}setupCompositionContext_(){if(1!==this.opacity_){const e=t4(this.context.canvas.width,this.context.canvas.height,n0e);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Z4e(this.compositionContext_),n0e.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];(function gwt(n,e,t){(function g_(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n})(n,e,0,0,t,0,0)})(this.pixelTransform,1/i,1/i),RS(this.inversePixelTransform,this.pixelTransform);const s=mz(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,c=this.replayGroup_,l=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!l||l.isEmpty()))return null;const u=Math.round(e.size[0]*i),f=Math.round(e.size[1]*i);a.width!=u||a.height!=f?(a.width=u,a.height=f,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,u,f),this.preRender(o,e);const p=e.viewState;this.opacity_=r.opacity,this.setupCompositionContext_();let _=!1,y=!0;if(r.extent&&this.clipping){const w=h6(r.extent);y=Pl(w,e.extent),_=y&&!Kg(w,e.extent),_&&this.clipUnrotated(this.compositionContext_,e,w)}return y&&this.renderWorlds(c,e),_&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];cc(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,l=this.getLayer(),u=[],f=i[0]*Z0,p=i[1]*Z0;u.push(this.getRenderTransform(r,s,o,Z0,f,p,0).slice());const g=l.getSource(),_=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!Kg(_,c)){let y=c[0];const w=ma(_);let b,C=0;for(;y<_[0];)--C,b=w*C,u.push(this.getRenderTransform(r,s,o,Z0,f,p,b).slice()),y+=w;for(C=0,y=c[2];y>_[2];)++C,b=w*C,u.push(this.getRenderTransform(r,s,o,Z0,f,p,b).slice()),y-=w}this.hitDetectionImageData_=function Mbt(n,e,t,i,r,s,o){const l=t4(n[0]*Z0,n[1]*Z0);l.imageSmoothingEnabled=!1;const u=l.canvas,f=new bbt(l,Z0,r,null,o),p=t.length,g=Math.floor(16777215/p),_={};for(let w=1;w<=p;++w){const C=t[w-1],b=C.getStyleFunction()||i;if(!i)continue;let M=b(C,s);if(!M)continue;Array.isArray(M)||(M=[M]);const I="#"+("000000"+(w*g).toString(16)).slice(-6);for(let F=0,P=M.length;F<P;++F){const R=M[F],k=R.getGeometryFunction()(C);if(!k||!Pl(r,k.getExtent()))continue;const W=R.clone(),ie=W.getFill();ie&&ie.setColor(I);const Te=W.getStroke();Te&&(Te.setColor(I),Te.setLineDash(null)),W.setText(void 0);const me=R.getImage();if(me&&0!==me.getOpacity()){const K=me.getImageSize();if(!K)continue;const oe=t4(K[0],K[1],void 0,{alpha:!1}),fe=oe.canvas;oe.fillStyle=I,oe.fillRect(0,0,fe.width,fe.height),W.setImage(new Kue({img:fe,imgSize:K,anchor:me.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:me.getOrigin(),opacity:1,size:me.getSize(),scale:me.getScale(),rotation:me.getRotation(),rotateWithView:me.getRotateWithView()}))}const Q=W.getZIndex()||0;let he=_[Q];he||(he={},_[Q]=he,he.Polygon=[],he.Circle=[],he.LineString=[],he.Point=[]),he[k.getType().replace("Multi","")].push(k,W)}}const y=Object.keys(_).map(Number).sort(H5);for(let w=0,C=y.length;w<C;++w){const b=_[y[w]];for(const M in b){const T=b[M];for(let I=0,F=T.length;I<F;I+=2){f.setStyle(T[I+1]);for(let P=0,R=e.length;P<R;++P)f.setTransform(e[P]),f.drawGeometry(T[I])}}}return l.getImageData(0,0,u.width,u.height)}(i,u,this.renderedFeatures_,l.getStyleFunction(),c,s,o)}t(function Sbt(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*Z0),s=Math.floor(Math.round(n[1])*Z0),o=4*(s2(r,0,t.width-1)+s2(s,0,t.height-1)*t.width),u=t.data[o+2]+256*(t.data[o+1]+256*t.data[o]),f=Math.floor(16777215/e.length);u&&u%f==0&&i.push(e[u/f-1])}return i}(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),l={},u=function(g,_,y){const w=br(g),C=l[w];if(C){if(!0!==C&&y<C.distanceSq){if(0===y)return l[w]=!0,s.splice(s.lastIndexOf(C),1),r(g,c,_);C.geometry=_,C.distanceSq=y}}else{if(0===y)return l[w]=!0,r(g,c,_);s.push(l[w]={feature:g,layer:c,geometry:_,distanceSq:y,callback:r})}};let f;const p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(g=>f=g.forEachFeatureAtCoordinate(e,o,a,i,u,g===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(_=>_.value):null)),f}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[0],s=e.viewHints[1],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,l=e.viewState,u=l.projection,f=l.resolution,p=e.pixelRatio,g=t.getRevision(),_=t.getRenderBuffer();let y=t.getRenderOrder();void 0===y&&(y=Tbt);const w=l.center.slice(),C=FS(c,_*f),b=C.slice(),M=[C.slice()],T=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Kg(T,e.extent)){const K=ma(T),oe=Math.max(ma(C)/2,K);C[0]=T[0]-oe,C[2]=T[2]+oe,$4e(w,u);const fe=P4e(M[0],u);fe[0]<T[0]&&fe[2]<T[2]?M.push([fe[0]+K,fe[1],fe[2]+K,fe[3]]):fe[0]>T[0]&&fe[2]>T[2]&&M.push([fe[0]-K,fe[1],fe[2]-K,fe[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==g&&this.renderedRenderOrder_==y&&Kg(this.wrappedRenderedExtent_,C))return n6(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const I=new t0e(CO(f,p),C,f,p);let F;this.getLayer().getDeclutter()&&(F=new t0e(CO(f,p),C,f,p));const P=u6();let R;if(P){for(let K=0,oe=M.length;K<oe;++K){const de=oE(M[K]);i.loadFeatures(de,bCt(f),P)}R=b_(P,u)}else for(let K=0,oe=M.length;K<oe;++K)i.loadFeatures(M[K],f,u);const k=function Lbt(n,e){const t=CO(n,e);return t*t}(f,p);let W=!0;const ie=function(K){let oe;const fe=K.getStyleFunction()||t.getStyleFunction();if(fe&&(oe=fe(K,f)),oe){const de=this.renderFeature(K,k,oe,I,R,F);W=W&&!de}}.bind(this),Te=oE(C),me=i.getFeaturesInExtent(Te);y&&me.sort(y);for(let K=0,oe=me.length;K<oe;++K)ie(me[K]);this.renderedFeatures_=me,this.ready=W;const Q=I.finish(),he=new o0e(C,f,p,i.getOverlaps(),Q,t.getRenderBuffer());return F&&(this.declutterExecutorGroup=new o0e(C,f,p,i.getOverlaps(),F.finish(),t.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=g,this.renderedRenderOrder_=y,this.renderedExtent_=b,this.wrappedRenderedExtent_=C,this.renderedCenter_=w,this.renderedProjection_=u,this.replayGroup_=he,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,l=i.length;c<l;++c)a=c0e(r,e,i[c],t,this.boundHandleStyleImageChange_,s,o)||a;else a=c0e(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}},lm=class Vbt extends ebt{constructor(e){super(e)}createRenderer(){return new Nbt(this)}},xO=class Ubt{constructor(e){this.rbush_=new jue(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[br(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],c={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=c,this.items_[br(a)]=c}this.rbush_.load(i)}remove(e){const t=br(e),i=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(i)}update(e,t){const i=this.items_[br(t)];m_([i.minX,i.minY,i.maxX,i.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){return this.rbush_.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return qg(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Qu(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}};function u0e(n){return n?Array.isArray(n)?function(e){return n}:"function"==typeof n?n:function(e){return[n]}:null}const h0e=class Gbt extends X0{constructor(e){super(),this.projection=Ka(e.projection),this.attributions_=u0e(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return or()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=u0e(e),this.changed()}setState(e){this.state_=e,this.changed()}};function Qbt(n,e){return[[-1/0,-1/0,1/0,1/0]]}function d0e(n,e){return function(t,i,r,s,o){const a=this;!function Wbt(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(t,i,r):n,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const l=e.getType();let u;"json"==l||"text"==l?u=a.responseText:"xml"==l?(u=a.responseXML,u||(u=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==l&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}(n,e,t,i,r,function(c,l){a.addFeatures(c),void 0!==s&&s(c)},o||z5)}}class y6 extends e4{constructor(e,t,i){super(e),this.feature=t,this.features=i}}const P_=class jbt extends h0e{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=z5,this.format_=e.format,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(Ss(this.format_,7),this.loader_=d0e(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:Qbt;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,r;this.featuresRtree_=t?new xO:null,this.loadedExtentsRtree_=new xO,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&void 0===i&&(i=new O1(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=br(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new y6("addfeature",e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[js(t,"change",this.handleFeatureChange_,this),js(t,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return void 0!==r&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(Ss(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],c=br(a);this.addToIndex_(c,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],c=br(a);this.setupChangeEvents_(c,a);const l=a.getGeometry();if(l){const u=l.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener("addfeature"))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new y6("addfeature",i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener("addfeature",function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener("removefeature",function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener("add",function(i){t||(t=!0,this.addFeature(i.element),t=!1)}.bind(this)),e.addEventListener("remove",function(i){t||(t=!0,this.removeFeature(i.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ta);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=function(r){this.removeFeatureInternal(r)}.bind(this);this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new y6("clear");this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),qg(this.nullGeometryFeatures_)||Uu(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=function bwt(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];P4e(n,e);const i=ma(t);if(ma(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||K0,this.featuresRtree_.forEachInExtent(c,function(l){if(t(l)){const u=l.getGeometry(),f=a;if(a=u.closestPointXY(i,r,o,a),a<f){s=l;const p=Math.sqrt(a);c[0]=i-p,c[1]=r-p,c[2]=i+p,c[3]=r+p}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=br(t),r=t.getGeometry();if(r){const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);const s=t.getId();if(void 0!==s){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new y6("changefeature",t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:br(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&qg(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const c=s[o];r.forEachInExtent(c,function(u){return Kg(u.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new y6("featuresloadstart")),this.loader_.call(this,c,t,i,function(u){--this.loadingExtentsCount_,this.dispatchEvent(new y6("featuresloadend",void 0,u))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new y6("featuresloaderror"))}.bind(this)),r.insert(c,{extent:c.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(m_(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=br(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=br(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(Ta),delete this.featureChangeKeys_[t];const r=e.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new y6("removefeature",e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Ss(this.format_,7),this.url_=e,this.setLoader(d0e(e,this.format_))}};class qbt extends e4{constructor(e,t,i,r){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=r}}const AE={};class bO extends sm{constructor(e){let t;if(super(),e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:Nue,this.addCondition_=e.addCondition?e.addCondition:sO,this.removeCondition_=e.removeCondition?e.removeCondition:sO,this.toggleCondition_=e.toggleCondition?e.toggleCondition:aO,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:K0,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=void 0!==e.style?e.style:function Kbt(){const n=gO();return Uu(n.Polygon,n.LineString),Uu(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}(),this.features_=e.features||new O1,e.layers)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=K0;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[br(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[br(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener("add",this.boundAddFeature_),this.features_.addEventListener("remove",this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener("add",this.boundAddFeature_),this.features_.removeEventListener("remove",this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const i=this.getMap().getAllLayers().find(function(r){if(r instanceof lm&&r.getSource()&&r.getSource().hasFeature(t))return r});i&&this.addFeatureLayerAssociation_(t,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=br(e);t in AE||(AE[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof bO&&s.getStyle()&&-1!==s.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(s.getStyle())}const i=br(e);e.setStyle(AE[i]),delete AE[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[br(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!i&&!r,o=e.map,a=this.getFeatures(),c=[],l=[];if(s){$g(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,function(u,f){if(u instanceof G4&&this.filter_(u,f))return this.addFeatureLayerAssociation_(u,f),l.push(u),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=a.getLength()-1;u>=0;--u){const f=a.item(u),p=l.indexOf(f);p>-1?l.splice(p,1):(a.remove(f),c.push(f))}0!==l.length&&a.extend(l)}else{o.forEachFeatureAtPixel(e.pixel,function(u,f){if(u instanceof G4&&this.filter_(u,f))return!t&&!r||a.getArray().includes(u)?(i||r)&&a.getArray().includes(u)&&(c.push(u),this.removeFeatureLayerAssociation_(u)):(this.addFeatureLayerAssociation_(u,f),l.push(u)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=c.length-1;u>=0;--u)a.remove(c[u]);a.extend(l)}return(l.length>0||c.length>0)&&this.dispatchEvent(new qbt("select",l,c,e)),!0}}const p0e=bO;class SO extends e4{constructor(e,t,i,r,s){super(e),this.features=t,this.coordinate=i,this.startCoordinate=r,this.mapBrowserEvent=s}}const Ybt=class Xbt extends wf{constructor(e){let t;if(super(e=e||{}),this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==e.features?e.features:null,e.layers&&!this.features_)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=K0;this.layerFilter_=t,this.filter_=e.filter&&!this.features_?e.filter:K0,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.condition_=e.condition?e.condition:om,this.lastFeature_=null,this.addChangeListener("active",this.handleActiveChanged_)}handleDownEvent(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const t=this.features_||new O1([this.lastFeature_]);return this.dispatchEvent(new SO("translatestart",t,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const t=this.features_||new O1([this.lastFeature_]);return this.dispatchEvent(new SO("translateend",t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const t=e.coordinate,i=t[0]-this.lastCoordinate_[0],r=t[1]-this.lastCoordinate_[1],s=this.features_||new O1([this.lastFeature_]);s.forEach(function(o){const a=o.getGeometry();a.translate(i,r),o.setGeometry(a)}),this.lastCoordinate_=t,this.dispatchEvent(new SO("translating",s,t,this.startCoordinate_,e))}}handleMoveEvent(e){const t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,t){return t.forEachFeatureAtPixel(e,function(i,r){if(this.filter_(i,r)&&(!this.features_||this.features_.getArray().includes(i)))return i}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){const t=this.getMap();super.setMap(e),this.updateState_(t)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let t=this.getMap();const i=this.getActive();(!t||!i)&&(t=t||e,t&&t.getViewport().classList.remove("ol-grab","ol-grabbing"))}};function bf(n,e,t){void 0===t&&(t={});var i={type:"Feature"};return(0===t.id||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function tp(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!LO(n[0])||!LO(n[1]))throw new Error("coordinates must contain numbers");return bf({type:"Point",coordinates:n},e,t)}function np(n,e,t){void 0===t&&(t={});for(var i=0,r=n;i<r.length;i++){var s=r[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}return bf({type:"Polygon",coordinates:n},e,t)}function um(n,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function TO(n,e,t){return void 0===t&&(t={}),bf({type:"MultiPolygon",coordinates:n},e,t)}function LO(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function w6(n,e,t){if(null!==n)for(var i,r,s,o,a,c,l,p,u=0,f=0,g=n.type,_="FeatureCollection"===g,y="Feature"===g,w=_?n.features.length:1,C=0;C<w;C++){a=(p=!!(l=_?n.features[C].geometry:y?n.geometry:n)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var b=0;b<a;b++){var M=0,T=0;if(null!==(o=p?l.geometries[b]:l)){c=o.coordinates;var I=o.type;switch(u=!t||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":if(!1===e(c,f,C,M,T))return!1;f++,M++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],f,C,M,T))return!1;f++,"MultiPoint"===I&&M++}"LineString"===I&&M++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(r=0;r<c[i].length-u;r++){if(!1===e(c[i][r],f,C,M,T))return!1;f++}"MultiLineString"===I&&M++,"Polygon"===I&&T++}"Polygon"===I&&M++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(T=0,r=0;r<c[i].length;r++){for(s=0;s<c[i][r].length-u;s++){if(!1===e(c[i][r][s],f,C,M,T))return!1;f++}T++}M++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===w6(o.geometries[i],e,t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function H_(n,e){!function y0e(n,e){var t,i,r,s,o,a,c,l,u,f,p=0,g="FeatureCollection"===n.type,_="Feature"===n.type,y=g?n.features.length:1;for(t=0;t<y;t++){for(l=g?n.features[t].properties:_?n.properties:{},u=g?n.features[t].bbox:_?n.bbox:void 0,f=g?n.features[t].id:_?n.id:void 0,o=(c=!!(a=g?n.features[t].geometry:_?n.geometry:n)&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(s=c?a.geometries[r]:a))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(s,p,l,u,f))return!1;break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===e(s.geometries[i],p,l,u,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,u,f))return!1;p++}}(n,function(t,i,r,s,o){var c,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(bf(t,r,{bbox:s,id:o}),i,0)&&void 0}switch(a){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var l=0;l<t.coordinates.length;l++)if(!1===e(bf({type:c,coordinates:t.coordinates[l]},r),i,l))return!1})}function DO(n){var e=[1/0,1/0,-1/0,-1/0];return w6(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}DO.default=DO;const oMt=DO;function w0e(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}Me(5943);var wMt=Me(1335);function M0e(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=w0e(n),r=function uMt(n){return"Feature"===n.type?n.geometry:n}(e),s=r.type,o=e.bbox,a=r.coordinates;if(o&&!1===function xMt(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}(i,o))return!1;"Polygon"===s&&(a=[a]);for(var c=!1,l=0;l<a.length&&!c;l++)if(S0e(i,a[l][0],t.ignoreBoundary)){for(var u=!1,f=1;f<a[l].length&&!u;)S0e(i,a[l][f],!t.ignoreBoundary)&&(u=!0),f++;u||(c=!0)}return c}function S0e(n,e,t){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,s=e.length-1;r<e.length;s=r++){var o=e[r][0],a=e[r][1],c=e[s][0],l=e[s][1];if(n[1]*(o-c)+a*(c-n[0])+l*(n[0]-o)==0&&(o-n[0])*(c-n[0])<=0&&(a-n[1])*(l-n[1])<=0)return!t;a>n[1]!=l>n[1]&&n[0]<(c-o)*(n[1]-a)/(l-a)+o&&(i=!i)}return i}var T0e=new ArrayBuffer(16);new Float64Array(T0e),new Uint32Array(T0e),Me(915),function(){function n(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++){var i=this.points[t],r=this.points[t+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){var s=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,o=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,a=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+s),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+a)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+s),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}n.prototype.cacheSteps=function(e){var t=[],i=this.pos(0);t.push(0);for(var r=0;r<this.duration;r+=10){var s=this.pos(r);Math.sqrt((s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y)+(s.z-i.z)*(s.z-i.z))>e&&(t.push(r),i=s)}return t},n.prototype.vector=function(e){var t=this.pos(e+10),i=this.pos(e-10);return{angle:180*Math.atan2(t.y-i.y,t.x-i.x)/3.14,speed:Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y)+(i.z-t.z)*(i.z-t.z))}},n.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var i=t/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i);return function OMt(n,e,t,i,r){var s=function NMt(n){var e=n*n;return[e*n,3*e*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:r.x*s[0]+i.x*s[1]+t.x*s[2]+e.x*s[3],y:r.y*s[0]+i.y*s[1]+t.y*s[2]+e.y*s[3],z:r.z*s[0]+i.z*s[1]+t.z*s[2]+e.z*s[3]}}((this.length-1)*i-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();const F0e=function $Mt(n,e){void 0===e&&(e={});var t=0,i=0,r=0;return w6(n,function(s){t+=s[0],i+=s[1],r++},!0),tp([t/r,i/r],e.properties)},qMt=function k0e(n,e){switch(void 0===e&&(e={}),function hMt(n,e){return"FeatureCollection"===n.type?"FeatureCollection":"GeometryCollection"===n.type?"GeometryCollection":"Feature"===n.type&&null!==n.geometry?n.geometry.type:n.type}(n)){case"Point":return tp(w0e(n),e.properties);case"Polygon":var t=[];w6(n,function(T){t.push(T)});var c,l,u,f,p,g,_,y,i=F0e(n,{properties:e.properties}),r=i.geometry.coordinates,s=0,o=0,a=0,w=t.map(function(T){return[T[0]-r[0],T[1]-r[1]]});for(c=0;c<t.length-1;c++)a+=y=(f=(l=w[c])[0])*(_=(u=w[c+1])[1])-(p=u[0])*(g=l[1]),s+=(f+p)*y,o+=(g+_)*y;if(0===a)return i;var b=1/(.5*a*6);return tp([r[0]+b*s,r[1]+b*o],e.properties);default:var M=function CMt(n,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var t=[];if(w6(n,function(r){t.push([r[0],r[1]])}),!t.length)return null;var i=wMt(t,e.concavity);return i.length>3?np([i]):null}(n);return M?k0e(M,{properties:e.properties}):F0e(n,{properties:e.properties})}};Me(5469),Me(5406);const W0e=function gSt(n){if(!n)throw new Error("geojson is required");var e=[];return H_(n,function(t){e.push(t)}),um(e)};Me(3237);var q0e=Math.PI/180,K0e=180/Math.PI,N_=function(n,e){this.lon=n,this.lat=e,this.x=q0e*n,this.y=q0e*e};N_.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},N_.prototype.antipode=function(){return new N_(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var X0e=function(){this.coords=[],this.length=0};X0e.prototype.move_to=function(n){this.length++,this.coords.push(n)};var zO=function(n){this.properties=n||{},this.geometries=[]};zO.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],e=0;e<this.geometries.length;e++)n.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}},zO.prototype.wkt=function(){for(var n="",e="LINESTRING(",t=function(s){e+=s[0]+" "+s[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(t),n+=e.substring(0,e.length-1)+")"}return n};var OO=function(n,e,t){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new N_(n.x,n.y),this.end=new N_(e.x,e.y),this.properties=t||{};var i=this.start.x-this.end.x,s=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(s)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+e)};OO.prototype.interpolate=function(n){var e=Math.sin((1-n)*this.g)/Math.sin(this.g),t=Math.sin(n*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),s=e*Math.sin(this.start.y)+t*Math.sin(this.end.y),o=K0e*Math.atan2(s,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[K0e*Math.atan2(r,i),o]},OO.prototype.Arc=function(n,e){var t=[];if(!n||n<=2)t.push([this.start.lon,this.start.lat]),t.push([this.end.lon,this.end.lat]);else for(var i=1/(n-1),r=0;r<n;++r){var o=this.interpolate(i*r);t.push(o)}for(var a=!1,c=0,l=e&&e.offset?e.offset:10,u=180-l,f=-180+l,p=360-l,g=1;g<t.length;++g){var _=t[g-1][0],y=t[g][0],w=Math.abs(y-_);w>p&&(y>u&&_<f||_>u&&y<f)?a=!0:w>c&&(c=w)}var C=[];if(a&&c<l){var b=[];C.push(b);for(var M=0;M<t.length;++M){var T=parseFloat(t[M][0]);if(M>0&&Math.abs(T-t[M-1][0])>p){var I=parseFloat(t[M-1][0]),F=parseFloat(t[M-1][1]),P=parseFloat(t[M][0]),R=parseFloat(t[M][1]);if(I>-180&&I<f&&180===P&&M+1<t.length&&t[M-1][0]>-180&&t[M-1][0]<f){b.push([-180,t[M][1]]),M++,b.push([t[M][0],t[M][1]]);continue}if(I>u&&I<180&&-180===P&&M+1<t.length&&t[M-1][0]>u&&t[M-1][0]<180){b.push([180,t[M][1]]),M++,b.push([t[M][0],t[M][1]]);continue}if(I<f&&P>u){var k=I;I=P,P=k;var W=F;F=R,R=W}if(I>u&&P<f&&(P+=360),I<=180&&P>=180&&I<P){var ie=(180-I)/(P-I),Te=ie*R+(1-ie)*F;b.push([t[M-1][0]>u?180:-180,Te]),(b=[]).push([t[M-1][0]>u?-180:180,Te]),C.push(b)}else C.push(b=[]);b.push([T,t[M][1]])}else b.push([t[M][0],t[M][1]])}}else{var me=[];C.push(me);for(var Q=0;Q<t.length;++Q)me.push([t[Q][0],t[Q][1]])}for(var he=new zO(this.properties),K=0;K<C.length;++K){var oe=new X0e;he.geometries.push(oe);for(var fe=C[K],de=0;de<fe.length;++de)oe.move_to(fe[de])}return he},Me(6952);var zr=[],Or=[],Nr=[],Vr=[],Ur=[],Gr=[],Qr=[],Wr=[],jr=[],$r=[],qr=[],Kr=[],Xr=[],Yr=[],Zr=[],Jr=[],es=[],ts=[],ns=[],is=[],rs=[],ss=[],os=[],as=[];Qr[85]=$r[85]=-1,Wr[85]=qr[85]=0,jr[85]=Kr[85]=1,ns[85]=ss[85]=1,is[85]=os[85]=0,rs[85]=as[85]=1,zr[85]=Vr[85]=0,Or[85]=Ur[85]=-1,Nr[85]=Zr[85]=0,Jr[85]=Xr[85]=0,es[85]=Yr[85]=1,Gr[85]=ts[85]=1,ss[1]=ss[169]=0,os[1]=os[169]=-1,as[1]=as[169]=0,Xr[1]=Xr[169]=-1,Yr[1]=Yr[169]=0,Zr[1]=Zr[169]=0,$r[4]=$r[166]=0,qr[4]=qr[166]=-1,Kr[4]=Kr[166]=1,Jr[4]=Jr[166]=1,es[4]=es[166]=0,ts[4]=ts[166]=0,Qr[16]=Qr[154]=0,Wr[16]=Wr[154]=1,jr[16]=jr[154]=1,Vr[16]=Vr[154]=1,Ur[16]=Ur[154]=0,Gr[16]=Gr[154]=1,ns[64]=ns[106]=0,is[64]=is[106]=1,rs[64]=rs[106]=0,zr[64]=zr[106]=-1,Or[64]=Or[106]=0,Nr[64]=Nr[106]=1,ns[2]=ns[168]=0,is[2]=is[168]=-1,rs[2]=rs[168]=1,ss[2]=ss[168]=0,os[2]=os[168]=-1,as[2]=as[168]=0,Xr[2]=Xr[168]=-1,Yr[2]=Yr[168]=0,Zr[2]=Zr[168]=0,Jr[2]=Jr[168]=-1,es[2]=es[168]=0,ts[2]=ts[168]=1,Qr[8]=Qr[162]=0,Wr[8]=Wr[162]=-1,jr[8]=jr[162]=0,$r[8]=$r[162]=0,qr[8]=qr[162]=-1,Kr[8]=Kr[162]=1,Xr[8]=Xr[162]=1,Yr[8]=Yr[162]=0,Zr[8]=Zr[162]=1,Jr[8]=Jr[162]=1,es[8]=es[162]=0,ts[8]=ts[162]=0,Qr[32]=Qr[138]=0,Wr[32]=Wr[138]=1,jr[32]=jr[138]=1,$r[32]=$r[138]=0,qr[32]=qr[138]=1,Kr[32]=Kr[138]=0,zr[32]=zr[138]=1,Or[32]=Or[138]=0,Nr[32]=Nr[138]=0,Vr[32]=Vr[138]=1,Ur[32]=Ur[138]=0,Gr[32]=Gr[138]=1,ss[128]=ss[42]=0,os[128]=os[42]=1,as[128]=as[42]=1,ns[128]=ns[42]=0,is[128]=is[42]=1,rs[128]=rs[42]=0,zr[128]=zr[42]=-1,Or[128]=Or[42]=0,Nr[128]=Nr[42]=1,Vr[128]=Vr[42]=-1,Ur[128]=Ur[42]=0,Gr[128]=Gr[42]=0,$r[5]=$r[165]=-1,qr[5]=qr[165]=0,Kr[5]=Kr[165]=0,ss[5]=ss[165]=1,os[5]=os[165]=0,as[5]=as[165]=0,Jr[20]=Jr[150]=0,es[20]=es[150]=1,ts[20]=ts[150]=1,Vr[20]=Vr[150]=0,Ur[20]=Ur[150]=-1,Gr[20]=Gr[150]=1,Qr[80]=Qr[90]=-1,Wr[80]=Wr[90]=0,jr[80]=jr[90]=1,ns[80]=ns[90]=1,is[80]=is[90]=0,rs[80]=rs[90]=1,Xr[65]=Xr[105]=0,Yr[65]=Yr[105]=1,Zr[65]=Zr[105]=0,zr[65]=zr[105]=0,Or[65]=Or[105]=-1,Nr[65]=Nr[105]=0,Qr[160]=Qr[10]=-1,Wr[160]=Wr[10]=0,jr[160]=jr[10]=1,$r[160]=$r[10]=-1,qr[160]=qr[10]=0,Kr[160]=Kr[10]=0,ss[160]=ss[10]=1,os[160]=os[10]=0,as[160]=as[10]=0,ns[160]=ns[10]=1,is[160]=is[10]=0,rs[160]=rs[10]=1,Jr[130]=Jr[40]=0,es[130]=es[40]=1,ts[130]=ts[40]=1,Xr[130]=Xr[40]=0,Yr[130]=Yr[40]=1,Zr[130]=Zr[40]=0,zr[130]=zr[40]=0,Or[130]=Or[40]=-1,Nr[130]=Nr[40]=0,Vr[130]=Vr[40]=0,Ur[130]=Ur[40]=-1,Gr[130]=Gr[40]=1,$r[37]=$r[133]=0,qr[37]=qr[133]=1,Kr[37]=Kr[133]=1,ss[37]=ss[133]=0,os[37]=os[133]=1,as[37]=as[133]=0,zr[37]=zr[133]=-1,Or[37]=Or[133]=0,Nr[37]=Nr[133]=0,Vr[37]=Vr[133]=1,Ur[37]=Ur[133]=0,Gr[37]=Gr[133]=0,Jr[148]=Jr[22]=-1,es[148]=es[22]=0,ts[148]=ts[22]=0,ss[148]=ss[22]=0,os[148]=os[22]=-1,as[148]=as[22]=1,ns[148]=ns[22]=0,is[148]=is[22]=1,rs[148]=rs[22]=1,Vr[148]=Vr[22]=-1,Ur[148]=Ur[22]=0,Gr[148]=Gr[22]=1,Qr[82]=Qr[88]=0,Wr[82]=Wr[88]=-1,jr[82]=jr[88]=1,Jr[82]=Jr[88]=1,es[82]=es[88]=0,ts[82]=ts[88]=1,Xr[82]=Xr[88]=-1,Yr[82]=Yr[88]=0,Zr[82]=Zr[88]=1,ns[82]=ns[88]=0,is[82]=is[88]=-1,rs[82]=rs[88]=0,Qr[73]=Qr[97]=0,Wr[73]=Wr[97]=1,jr[73]=jr[97]=0,$r[73]=$r[97]=0,qr[73]=qr[97]=-1,Kr[73]=Kr[97]=0,Xr[73]=Xr[97]=1,Yr[73]=Yr[97]=0,Zr[73]=Zr[97]=0,zr[73]=zr[97]=1,Or[73]=Or[97]=0,Nr[73]=Nr[97]=1,Qr[145]=Qr[25]=0,Wr[145]=Wr[25]=-1,jr[145]=jr[25]=0,Xr[145]=Xr[25]=1,Yr[145]=Yr[25]=0,Zr[145]=Zr[25]=1,ss[145]=ss[25]=0,os[145]=os[25]=1,as[145]=as[25]=1,Vr[145]=Vr[25]=-1,Ur[145]=Ur[25]=0,Gr[145]=Gr[25]=0,$r[70]=$r[100]=0,qr[70]=qr[100]=1,Kr[70]=Kr[100]=0,Jr[70]=Jr[100]=-1,es[70]=es[100]=0,ts[70]=ts[100]=1,ns[70]=ns[100]=0,is[70]=is[100]=-1,rs[70]=rs[100]=1,zr[70]=zr[100]=1,Or[70]=Or[100]=0,Nr[70]=Nr[100]=0,$r[101]=$r[69]=0,qr[101]=qr[69]=1,Kr[101]=Kr[69]=0,zr[101]=zr[69]=1,Or[101]=Or[69]=0,Nr[101]=Nr[69]=0,ss[149]=ss[21]=0,os[149]=os[21]=1,as[149]=as[21]=1,Vr[149]=Vr[21]=-1,Ur[149]=Ur[21]=0,Gr[149]=Gr[21]=0,Jr[86]=Jr[84]=-1,es[86]=es[84]=0,ts[86]=ts[84]=1,ns[86]=ns[84]=0,is[86]=is[84]=-1,rs[86]=rs[84]=1,Qr[89]=Qr[81]=0,Wr[89]=Wr[81]=-1,jr[89]=jr[81]=0,Xr[89]=Xr[81]=1,Yr[89]=Yr[81]=0,Zr[89]=Zr[81]=1,Qr[96]=Qr[74]=0,Wr[96]=Wr[74]=1,jr[96]=jr[74]=0,$r[96]=$r[74]=-1,qr[96]=qr[74]=0,Kr[96]=Kr[74]=1,ns[96]=ns[74]=1,is[96]=is[74]=0,rs[96]=rs[74]=0,zr[96]=zr[74]=1,Or[96]=Or[74]=0,Nr[96]=Nr[74]=1,Qr[24]=Qr[146]=0,Wr[24]=Wr[146]=-1,jr[24]=jr[146]=1,Jr[24]=Jr[146]=1,es[24]=es[146]=0,ts[24]=ts[146]=1,Xr[24]=Xr[146]=0,Yr[24]=Yr[146]=1,Zr[24]=Zr[146]=1,Vr[24]=Vr[146]=0,Ur[24]=Ur[146]=-1,Gr[24]=Gr[146]=0,$r[6]=$r[164]=-1,qr[6]=qr[164]=0,Kr[6]=Kr[164]=1,Jr[6]=Jr[164]=-1,es[6]=es[164]=0,ts[6]=ts[164]=0,ss[6]=ss[164]=0,os[6]=os[164]=-1,as[6]=as[164]=1,ns[6]=ns[164]=1,is[6]=is[164]=0,rs[6]=rs[164]=0,Xr[129]=Xr[41]=0,Yr[129]=Yr[41]=1,Zr[129]=Zr[41]=1,ss[129]=ss[41]=0,os[129]=os[41]=1,as[129]=as[41]=0,zr[129]=zr[41]=-1,Or[129]=Or[41]=0,Nr[129]=Nr[41]=0,Vr[129]=Vr[41]=0,Ur[129]=Ur[41]=-1,Gr[129]=Gr[41]=0,Jr[66]=Jr[104]=0,es[66]=es[104]=1,ts[66]=ts[104]=0,Xr[66]=Xr[104]=-1,Yr[66]=Yr[104]=0,Zr[66]=Zr[104]=1,ns[66]=ns[104]=0,is[66]=is[104]=-1,rs[66]=rs[104]=0,zr[66]=zr[104]=0,Or[66]=Or[104]=-1,Nr[66]=Nr[104]=1,Qr[144]=Qr[26]=-1,Wr[144]=Wr[26]=0,jr[144]=jr[26]=0,ss[144]=ss[26]=1,os[144]=os[26]=0,as[144]=as[26]=1,ns[144]=ns[26]=0,is[144]=is[26]=1,rs[144]=rs[26]=1,Vr[144]=Vr[26]=-1,Ur[144]=Ur[26]=0,Gr[144]=Gr[26]=1,$r[36]=$r[134]=0,qr[36]=qr[134]=1,Kr[36]=Kr[134]=1,Jr[36]=Jr[134]=0,es[36]=es[134]=1,ts[36]=ts[134]=0,zr[36]=zr[134]=0,Or[36]=Or[134]=-1,Nr[36]=Nr[134]=1,Vr[36]=Vr[134]=1,Ur[36]=Ur[134]=0,Gr[36]=Gr[134]=0,Qr[9]=Qr[161]=-1,Wr[9]=Wr[161]=0,jr[9]=jr[161]=0,$r[9]=$r[161]=0,qr[9]=qr[161]=-1,Kr[9]=Kr[161]=0,Xr[9]=Xr[161]=1,Yr[9]=Yr[161]=0,Zr[9]=Zr[161]=0,ss[9]=ss[161]=1,os[9]=os[161]=0,as[9]=as[161]=1,Qr[136]=0,Wr[136]=1,jr[136]=1,$r[136]=0,qr[136]=1,Kr[136]=0,Jr[136]=-1,es[136]=0,ts[136]=1,Xr[136]=-1,Yr[136]=0,Zr[136]=0,ss[136]=0,os[136]=-1,as[136]=0,ns[136]=0,is[136]=-1,rs[136]=1,zr[136]=1,Or[136]=0,Nr[136]=0,Vr[136]=1,Ur[136]=0,Gr[136]=1,Qr[34]=0,Wr[34]=-1,jr[34]=0,$r[34]=0,qr[34]=-1,Kr[34]=1,Jr[34]=1,es[34]=0,ts[34]=0,Xr[34]=1,Yr[34]=0,Zr[34]=1,ss[34]=0,os[34]=1,as[34]=1,ns[34]=0,is[34]=1,rs[34]=0,zr[34]=-1,Or[34]=0,Nr[34]=1,Vr[34]=-1,Ur[34]=0,Gr[34]=0,Qr[35]=0,Wr[35]=1,jr[35]=1,$r[35]=0,qr[35]=-1,Kr[35]=1,Jr[35]=1,es[35]=0,ts[35]=0,Xr[35]=-1,Yr[35]=0,Zr[35]=0,ss[35]=0,os[35]=-1,as[35]=0,ns[35]=0,is[35]=1,rs[35]=0,zr[35]=-1,Or[35]=0,Nr[35]=1,Vr[35]=1,Ur[35]=0,Gr[35]=1,Qr[153]=0,Wr[153]=1,jr[153]=1,Xr[153]=-1,Yr[153]=0,Zr[153]=0,ss[153]=0,os[153]=-1,as[153]=0,Vr[153]=1,Ur[153]=0,Gr[153]=1,$r[102]=0,qr[102]=-1,Kr[102]=1,Jr[102]=1,es[102]=0,ts[102]=0,ns[102]=0,is[102]=1,rs[102]=0,zr[102]=-1,Or[102]=0,Nr[102]=1,Qr[155]=0,Wr[155]=-1,jr[155]=0,Xr[155]=1,Yr[155]=0,Zr[155]=1,ss[155]=0,os[155]=1,as[155]=1,Vr[155]=-1,Ur[155]=0,Gr[155]=0,$r[103]=0,qr[103]=1,Kr[103]=0,Jr[103]=-1,es[103]=0,ts[103]=1,ns[103]=0,is[103]=-1,rs[103]=1,zr[103]=1,Or[103]=0,Nr[103]=0,Qr[152]=0,Wr[152]=1,jr[152]=1,Jr[152]=-1,es[152]=0,ts[152]=1,Xr[152]=-1,Yr[152]=0,Zr[152]=0,ss[152]=0,os[152]=-1,as[152]=0,ns[152]=0,is[152]=-1,rs[152]=1,Vr[152]=1,Ur[152]=0,Gr[152]=1,Qr[156]=0,Wr[156]=-1,jr[156]=1,Jr[156]=1,es[156]=0,ts[156]=1,Xr[156]=-1,Yr[156]=0,Zr[156]=0,ss[156]=0,os[156]=-1,as[156]=0,ns[156]=0,is[156]=1,rs[156]=1,Vr[156]=-1,Ur[156]=0,Gr[156]=1,Qr[137]=0,Wr[137]=1,jr[137]=1,$r[137]=0,qr[137]=1,Kr[137]=0,Xr[137]=-1,Yr[137]=0,Zr[137]=0,ss[137]=0,os[137]=-1,as[137]=0,zr[137]=1,Or[137]=0,Nr[137]=0,Vr[137]=1,Ur[137]=0,Gr[137]=1,Qr[139]=0,Wr[139]=1,jr[139]=1,$r[139]=0,qr[139]=-1,Kr[139]=0,Xr[139]=1,Yr[139]=0,Zr[139]=0,ss[139]=0,os[139]=1,as[139]=0,zr[139]=-1,Or[139]=0,Nr[139]=0,Vr[139]=1,Ur[139]=0,Gr[139]=1,Qr[98]=0,Wr[98]=-1,jr[98]=0,$r[98]=0,qr[98]=-1,Kr[98]=1,Jr[98]=1,es[98]=0,ts[98]=0,Xr[98]=1,Yr[98]=0,Zr[98]=1,ns[98]=0,is[98]=1,rs[98]=0,zr[98]=-1,Or[98]=0,Nr[98]=1,Qr[99]=0,Wr[99]=1,jr[99]=0,$r[99]=0,qr[99]=-1,Kr[99]=1,Jr[99]=1,es[99]=0,ts[99]=0,Xr[99]=-1,Yr[99]=0,Zr[99]=1,ns[99]=0,is[99]=-1,rs[99]=0,zr[99]=1,Or[99]=0,Nr[99]=1,$r[38]=0,qr[38]=-1,Kr[38]=1,Jr[38]=1,es[38]=0,ts[38]=0,ss[38]=0,os[38]=1,as[38]=1,ns[38]=0,is[38]=1,rs[38]=0,zr[38]=-1,Or[38]=0,Nr[38]=1,Vr[38]=-1,Ur[38]=0,Gr[38]=0,$r[39]=0,qr[39]=1,Kr[39]=1,Jr[39]=-1,es[39]=0,ts[39]=0,ss[39]=0,os[39]=-1,as[39]=1,ns[39]=0,is[39]=1,rs[39]=0,zr[39]=-1,Or[39]=0,Nr[39]=1,Vr[39]=1,Ur[39]=0,Gr[39]=0;var GO=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},QO=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},WO=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},jO=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},$O=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},qO=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},KO=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},XO=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},ni=[],Yn=[],Ei=[],yi=[],Qi=[],Ui=[],cs=[],ds=[];yi[1]=Qi[1]=18,yi[169]=Qi[169]=18,Ei[4]=Yn[4]=12,Ei[166]=Yn[166]=12,ni[16]=ds[16]=4,ni[154]=ds[154]=4,Ui[64]=cs[64]=22,Ui[106]=cs[106]=22,Ei[2]=Ui[2]=17,yi[2]=Qi[2]=18,Ei[168]=Ui[168]=17,yi[168]=Qi[168]=18,ni[8]=yi[8]=9,Yn[8]=Ei[8]=12,ni[162]=yi[162]=9,Yn[162]=Ei[162]=12,ni[32]=ds[32]=4,Yn[32]=cs[32]=1,ni[138]=ds[138]=4,Yn[138]=cs[138]=1,Qi[128]=ds[128]=21,Ui[128]=cs[128]=22,Qi[42]=ds[42]=21,Ui[42]=cs[42]=22,Yn[5]=Qi[5]=14,Yn[165]=Qi[165]=14,Ei[20]=ds[20]=6,Ei[150]=ds[150]=6,ni[80]=Ui[80]=11,ni[90]=Ui[90]=11,yi[65]=cs[65]=3,yi[105]=cs[105]=3,ni[160]=Ui[160]=11,Yn[160]=Qi[160]=14,ni[10]=Ui[10]=11,Yn[10]=Qi[10]=14,Ei[130]=ds[130]=6,yi[130]=cs[130]=3,Ei[40]=ds[40]=6,yi[40]=cs[40]=3,Yn[101]=cs[101]=1,Yn[69]=cs[69]=1,Qi[149]=ds[149]=21,Qi[21]=ds[21]=21,Ei[86]=Ui[86]=17,Ei[84]=Ui[84]=17,ni[89]=yi[89]=9,ni[81]=yi[81]=9,ni[96]=cs[96]=0,Yn[96]=Ui[96]=15,ni[74]=cs[74]=0,Yn[74]=Ui[74]=15,ni[24]=Ei[24]=8,yi[24]=ds[24]=7,ni[146]=Ei[146]=8,yi[146]=ds[146]=7,Yn[6]=Ui[6]=15,Ei[6]=Qi[6]=16,Yn[164]=Ui[164]=15,Ei[164]=Qi[164]=16,yi[129]=ds[129]=7,Qi[129]=cs[129]=20,yi[41]=ds[41]=7,Qi[41]=cs[41]=20,Ei[66]=cs[66]=2,yi[66]=Ui[66]=19,Ei[104]=cs[104]=2,yi[104]=Ui[104]=19,ni[144]=Qi[144]=10,Ui[144]=ds[144]=23,ni[26]=Qi[26]=10,Ui[26]=ds[26]=23,Yn[36]=ds[36]=5,Ei[36]=cs[36]=2,Yn[134]=ds[134]=5,Ei[134]=cs[134]=2,ni[9]=Qi[9]=10,Yn[9]=yi[9]=13,ni[161]=Qi[161]=10,Yn[161]=yi[161]=13,Yn[37]=ds[37]=5,Qi[37]=cs[37]=20,Yn[133]=ds[133]=5,Qi[133]=cs[133]=20,Ei[148]=Qi[148]=16,Ui[148]=ds[148]=23,Ei[22]=Qi[22]=16,Ui[22]=ds[22]=23,ni[82]=Ei[82]=8,yi[82]=Ui[82]=19,ni[88]=Ei[88]=8,yi[88]=Ui[88]=19,ni[73]=cs[73]=0,Yn[73]=yi[73]=13,ni[97]=cs[97]=0,Yn[97]=yi[97]=13,ni[145]=yi[145]=9,Qi[145]=ds[145]=21,ni[25]=yi[25]=9,Qi[25]=ds[25]=21,Yn[70]=cs[70]=1,Ei[70]=Ui[70]=17,Yn[100]=cs[100]=1,Ei[100]=Ui[100]=17,ni[34]=yi[34]=9,Yn[34]=Ei[34]=12,Qi[34]=ds[34]=21,Ui[34]=cs[34]=22,ni[136]=ds[136]=4,Yn[136]=cs[136]=1,Ei[136]=Ui[136]=17,yi[136]=Qi[136]=18,ni[35]=ds[35]=4,Yn[35]=Ei[35]=12,yi[35]=Qi[35]=18,Ui[35]=cs[35]=22,ni[153]=ds[153]=4,yi[153]=Qi[153]=18,Yn[102]=Ei[102]=12,Ui[102]=cs[102]=22,ni[155]=yi[155]=9,Qi[155]=ds[155]=23,Yn[103]=cs[103]=1,Ei[103]=Ui[103]=17,ni[152]=ds[152]=4,Ei[152]=Ui[152]=17,yi[152]=Qi[152]=18,ni[156]=Ei[156]=8,yi[156]=Qi[156]=18,Ui[156]=ds[156]=23,ni[137]=ds[137]=4,Yn[137]=cs[137]=1,yi[137]=Qi[137]=18,ni[139]=ds[139]=4,Yn[139]=yi[139]=13,Qi[139]=cs[139]=20,ni[98]=yi[98]=9,Yn[98]=Ei[98]=12,Ui[98]=cs[98]=22,ni[99]=cs[99]=0,Yn[99]=Ei[99]=12,yi[99]=Ui[99]=19,Yn[38]=Ei[38]=12,Qi[38]=ds[38]=21,Ui[38]=cs[38]=22,Yn[39]=ds[39]=5,Ei[39]=Qi[39]=16,Ui[39]=cs[39]=22;var kn=[];function JO(n,e,t){return function DEt(n){return(n>0)-(n<0)||+n}((e[0]-n[0])*(t[1]-e[1])-(t[0]-e[0])*(e[1]-n[1]))}function fhe(n,e){return e.geometry.coordinates[0].every(function(t){return M0e(tp(t),n)})}kn[1]=kn[169]=GO,kn[4]=kn[166]=QO,kn[16]=kn[154]=WO,kn[64]=kn[106]=jO,kn[168]=kn[2]=$O,kn[162]=kn[8]=qO,kn[138]=kn[32]=KO,kn[42]=kn[128]=XO,kn[5]=kn[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},kn[20]=kn[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},kn[80]=kn[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},kn[65]=kn[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},kn[160]=kn[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},kn[130]=kn[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},kn[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},kn[101]=kn[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},kn[149]=kn[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},kn[86]=kn[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},kn[89]=kn[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},kn[96]=kn[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},kn[24]=kn[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},kn[6]=kn[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},kn[129]=kn[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},kn[66]=kn[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},kn[144]=kn[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},kn[36]=kn[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},kn[9]=kn[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},kn[37]=kn[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},kn[148]=kn[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},kn[82]=kn[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},kn[73]=kn[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},kn[145]=kn[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},kn[70]=kn[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},kn[34]=function(n){return[XO(n),qO(n)]},kn[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},kn[136]=function(n){return[KO(n),$O(n)]},kn[153]=function(n){return[WO(n),GO(n)]},kn[102]=function(n){return[QO(n),jO(n)]},kn[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},kn[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},kn[152]=function(n){return[WO(n),$O(n)]},kn[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},kn[137]=function(n){return[KO(n),GO(n)]},kn[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},kn[98]=function(n){return[qO(n),jO(n)]},kn[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},kn[38]=function(n){return[QO(n),XO(n)]},kn[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};var REt=function(){function n(e){this.id=n.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(e){return e.join(",")},n.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},n.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},n.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,i){var r=t.to,s=i.to;if(r.coordinates[0]-e.coordinates[0]>=0&&s.coordinates[0]-e.coordinates[0]<0)return 1;if(r.coordinates[0]-e.coordinates[0]<0&&s.coordinates[0]-e.coordinates[0]>=0)return-1;if(r.coordinates[0]-e.coordinates[0]==0&&s.coordinates[0]-e.coordinates[0]==0)return r.coordinates[1]-e.coordinates[1]>=0||s.coordinates[1]-e.coordinates[1]>=0?r.coordinates[1]-s.coordinates[1]:s.coordinates[1]-r.coordinates[1];var o=JO(e.coordinates,r.coordinates,s.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-e.coordinates[0],2)+Math.pow(r.coordinates[1]-e.coordinates[1],2)-(Math.pow(s.coordinates[0]-e.coordinates[0],2)+Math.pow(s.coordinates[1]-e.coordinates[1],2))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},n.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},n}();const dhe=REt;var FEt=function(){function n(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return function EO(n,e,t){if(void 0===t&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return bf({type:"LineString",coordinates:n},e,t)}([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(e){return JO(e.from.coordinates,e.to.coordinates,this.to.coordinates)},n}();const kEt=FEt;var PEt=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},n.prototype.get=function(e){return this.edges[e]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(e){this.edges.forEach(e)},n.prototype.map=function(e){return this.edges.map(e)},n.prototype.some=function(e){return this.edges.some(e)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var e=this,t=this.edges.reduce(function(o,a,c){return a.from.coordinates[1]>e.edges[o].from.coordinates[1]&&(o=c),o},0),i=(0===t?this.length:t)-1,r=(t+1)%this.length,s=JO(this.edges[i].from.coordinates,this.edges[t].from.coordinates,this.edges[r].from.coordinates);return 0===s?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:s>0},n.prototype.toMultiPoint=function(){return function A0e(n,e,t){return void 0===t&&(t={}),bf({type:"MultiPoint",coordinates:n},e,t)}(this.edges.map(function(e){return e.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(t){return t.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=np([e])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function GMt(n){return function UMt(n,e){void 0===e&&(e={});var t=Number(n[0]),i=Number(n[1]),r=Number(n[2]),s=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[t,i];return np([[o,[r,i],[r,s],[t,s],o]],e.properties,{bbox:n,id:e.id})}(oMt(n))}(this.toPolygon())},n.findEdgeRingContaining=function(e,t){var r,s,i=e.getEnvelope();return t.forEach(function(o){var a=o.getEnvelope();if(s&&(r=s.getEnvelope()),!function IEt(n,e){var t=n.geometry.coordinates[0].map(function(o){return o[0]}),i=n.geometry.coordinates[0].map(function(o){return o[1]}),r=e.geometry.coordinates[0].map(function(o){return o[0]}),s=e.geometry.coordinates[0].map(function(o){return o[1]});return Math.max.apply(null,t)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,s)&&Math.min.apply(null,t)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,s)}(a,i)&&fhe(a,i)){for(var c=e.map(function(_){return _.from.coordinates}),l=void 0,u=function(_){o.some(function(y){return function BEt(n,e){return n[0]===e[0]&&n[1]===e[1]}(_,y.from.coordinates)})||(l=_)},f=0,p=c;f<p.length;f++)u(p[f]);l&&o.inside(tp(l))&&(!s||fhe(r,a))&&(s=o)}}),s},n.prototype.inside=function(e){return M0e(e,this.toPolygon())},n}();const HEt=PEt;function Che(n){for(var e=n,t=[];e.parent;)t.unshift(e),e=e.parent;return t}!function(){function n(){this.edges=[],this.nodes={}}n.fromGeoJson=function(e){!function zEt(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var t=new n;return H_(e,function(i){(function cMt(n,e,t){if(!n)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)})(i,"LineString","Graph::fromGeoJson"),function nMt(n,e,t,i){var r=t;w6(n,function(s,o,a,c,l){r=0===o&&void 0===t?s:e(r,s,o,a,c,l)},i)}(i,function(r,s){if(r){var o=t.getNode(r),a=t.getNode(s);t.addEdge(o,a)}return s})}),t},n.prototype.getNode=function(e){var t=dhe.buildId(e),i=this.nodes[t];return i||(i=this.nodes[t]=new dhe(e)),i},n.prototype.addEdge=function(e,t){var i=new kEt(e,t),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},n.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},n.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var i=e.getOuterEdges().map(function(r){return r.to});this.removeNode(e),i.forEach(function(r){return t._removeIfDangle(r)})}},n.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},n.prototype._computeNextCWEdges=function(e){var t=this;typeof e>"u"?Object.keys(this.nodes).forEach(function(i){return t._computeNextCWEdges(t.nodes[i])}):e.getOuterEdges().forEach(function(i,r){e.getOuterEdge((0===r?e.getOuterEdges().length:r)-1).symetric.next=i})},n.prototype._computeNextCCWEdges=function(e,t){for(var r,s,i=e.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],c=a.symetric,l=void 0,u=void 0;a.label===t&&(l=a),c.label===t&&(u=c),l&&u&&(u&&(s=u),l&&(s&&(s.next=l,s=void 0),r||(r=l)))}s&&(s.next=r)},n.prototype._findLabeledEdgeRings=function(){var e=[],t=0;return this.edges.forEach(function(i){if(!(i.label>=0)){e.push(i);var r=i;do{r.label=t,r=r.next}while(!i.isEqual(r));t++}}),e},n.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){e._findIntersectionNodes(i).forEach(function(r){e._computeNextCCWEdges(r,i.label)})});var t=[];return this.edges.forEach(function(i){i.ring||t.push(e._findEdgeRing(i))}),t},n.prototype._findIntersectionNodes=function(e){var t=[],i=e,r=function(){var s=0;i.from.getOuterEdges().forEach(function(o){o.label===e.label&&++s}),s>1&&t.push(i.from),i=i.next};do{r()}while(!e.isEqual(i));return t},n.prototype._findEdgeRing=function(e){var t=e,i=new HEt;do{i.push(t),t.ring=i,t=t.next}while(!e.isEqual(t));return i},n.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach(function(i){return t.removeEdge(i)}),e.innerEdges.forEach(function(i){return t.removeEdge(i)}),delete this.nodes[e.id]},n.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()}}(),Me(5013),Me(7470),Me(9475);var bE={search:function(n,e,t,i){n.cleanDirty();var r=(i=i||{}).heuristic||bE.heuristics.manhattan,s=i.closest||!1,o=function eTt(){return new xhe(function(n){return n.f})}(),a=e;for(e.h=r(e,t),o.push(e);o.size()>0;){var c=o.pop();if(c===t)return Che(c);c.closed=!0;for(var l=n.neighbors(c),u=0,f=l.length;u<f;++u){var p=l[u];if(!p.closed&&!p.isWall()){var g=c.g+p.getCost(c),_=p.visited;(!_||g<p.g)&&(p.visited=!0,p.parent=c,p.h=p.h||r(p,t),p.g=g,p.f=p.g+p.h,n.markDirty(p),s&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),_?o.rescoreElement(p):o.push(p))}}}return s?Che(a):[]},heuristics:{manhattan:function(n,e){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)},diagonal:function(n,e){var i=Math.sqrt(2),r=Math.abs(e.x-n.x),s=Math.abs(e.y-n.y);return 1*(r+s)+(i-2)*Math.min(r,s)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function fm(n,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var t=0;t<n.length;t++){this.grid[t]=[];for(var i=0,r=n[t];i<r.length;i++){var s=new ME(t,i,r[i]);this.grid[t][i]=s,this.nodes.push(s)}}this.init()}function ME(n,e,t){this.x=n,this.y=e,this.weight=t}function xhe(n){this.content=[],this.scoreFunction=n}function tN(){this._=null}function SE(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function U_(n,e){var t=e,i=e.R,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.R=i.L,t.R&&(t.R.U=t),i.L=t}function G_(n,e){var t=e,i=e.L,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.L=i.R,t.L&&(t.L.U=t),i.R=t}function bhe(n){for(;n.L;)n=n.L;return n}fm.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)bE.cleanNode(this.nodes[n])},fm.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)bE.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]},fm.prototype.markDirty=function(n){this.dirtyNodes.push(n)},fm.prototype.neighbors=function(n){var e=[],t=n.x,i=n.y,r=this.grid;return r[t-1]&&r[t-1][i]&&e.push(r[t-1][i]),r[t+1]&&r[t+1][i]&&e.push(r[t+1][i]),r[t]&&r[t][i-1]&&e.push(r[t][i-1]),r[t]&&r[t][i+1]&&e.push(r[t][i+1]),this.diagonal&&(r[t-1]&&r[t-1][i-1]&&e.push(r[t-1][i-1]),r[t+1]&&r[t+1][i-1]&&e.push(r[t+1][i-1]),r[t-1]&&r[t-1][i+1]&&e.push(r[t-1][i+1]),r[t+1]&&r[t+1][i+1]&&e.push(r[t+1][i+1])),e},fm.prototype.toString=function(){for(var t,i,r,s,n=[],e=this.grid,o=0,a=e.length;o<a;o++){for(t=[],r=0,s=(i=e[o]).length;r<s;r++)t.push(i[r].weight);n.push(t.join(" "))}return n.join("\n")},ME.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},ME.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight},ME.prototype.isWall=function(){return 0===this.weight},xhe.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),n},remove:function(n){var e=this.content.indexOf(n),t=this.content.pop();e!==this.content.length-1&&(this.content[e]=t,this.scoreFunction(t)<this.scoreFunction(n)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var e=this.content[n];n>0;){var t=(n+1>>1)-1,i=this.content[t];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[t]=e,this.content[n]=i,n=t}},bubbleUp:function(n){for(var e=this.content.length,t=this.content[n],i=this.scoreFunction(t);;){var a,r=n+1<<1,s=r-1,o=null;if(s<e&&(a=this.scoreFunction(this.content[s]))<i&&(o=s),r<e&&this.scoreFunction(this.content[r])<(null===o?i:a)&&(o=r),null===o)break;this.content[n]=this.content[o],this.content[o]=t,n=o}}},tN.prototype={constructor:tN,insert:function(n,e){var t,i,r;if(n){if(e.P=n,e.N=n.N,n.N&&(n.N.P=e),n.N=e,n.R){for(n=n.R;n.L;)n=n.L;n.L=e}else n.R=e;t=n}else this._?(n=bhe(this._),e.P=null,e.N=n,n.P=n.L=e,t=n):(e.P=e.N=null,this._=e,t=null);for(e.L=e.R=null,e.U=t,e.C=!0,n=e;t&&t.C;)t===(i=t.U).L?(r=i.R)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.R&&(U_(this,t),t=(n=t).U),t.C=!1,i.C=!0,G_(this,i)):(r=i.L)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.L&&(G_(this,t),t=(n=t).U),t.C=!1,i.C=!0,U_(this,i)),t=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,s,o,e=n.U,i=n.L,r=n.R;if(s=i?r?bhe(r):i:r,e?e.L===n?e.L=s:e.R=s:this._=s,i&&r?(o=s.C,s.C=n.C,s.L=i,i.U=s,s!==r?(e=s.U,s.U=n.U,e.L=n=s.R,s.R=r,r.U=s):(s.U=e,e=s,n=s.R)):(o=n.C,n=s),n&&(n.U=e),!o){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===e.L){if((t=e.R).C&&(t.C=!1,e.C=!0,U_(this,e),t=e.R),t.L&&t.L.C||t.R&&t.R.C){(!t.R||!t.R.C)&&(t.L.C=!1,t.C=!0,G_(this,t),t=e.R),t.C=e.C,e.C=t.R.C=!1,U_(this,e),n=this._;break}}else if((t=e.L).C&&(t.C=!1,e.C=!0,G_(this,e),t=e.L),t.L&&t.L.C||t.R&&t.R.C){(!t.L||!t.L.C)&&(t.R.C=!1,t.C=!0,U_(this,t),t=e.L),t.C=e.C,e.C=t.L.C=!1,G_(this,e),n=this._;break}t.C=!0,n=e,e=e.U}while(!n.C);n&&(n.C=!1)}}};const Mhe=tN;function Q_(n,e,t,i){var r=[null,null],s=rl.push(r)-1;return r.left=n,r.right=e,t&&EE(r,n,e,t),i&&EE(r,e,n,i),o4[n.index].halfedges.push(s),o4[e.index].halfedges.push(s),r}function W_(n,e,t){var i=[e,t];return i.left=n,i}function EE(n,e,t,i){n[0]||n[1]?n.left===t?n[1]=i:n[0]=i:(n[0]=i,n.left=e,n.right=t)}function nTt(n,e,t,i,r){var y,s=n[0],o=n[1],a=s[0],c=s[1],f=0,p=1,g=o[0]-a,_=o[1]-c;if(y=e-a,g||!(y>0)){if(y/=g,g<0){if(y<f)return;y<p&&(p=y)}else if(g>0){if(y>p)return;y>f&&(f=y)}if(y=i-a,g||!(y<0)){if(y/=g,g<0){if(y>p)return;y>f&&(f=y)}else if(g>0){if(y<f)return;y<p&&(p=y)}if(y=t-c,_||!(y>0)){if(y/=_,_<0){if(y<f)return;y<p&&(p=y)}else if(_>0){if(y>p)return;y>f&&(f=y)}if(y=r-c,_||!(y<0)){if(y/=_,_<0){if(y>p)return;y>f&&(f=y)}else if(_>0){if(y<f)return;y<p&&(p=y)}return!(f>0)&&!(p<1)||(f>0&&(n[0]=[a+f*g,c+f*_]),p<1&&(n[1]=[a+p*g,c+p*_])),!0}}}}}function iTt(n,e,t,i,r){var s=n[1];if(s)return!0;var y,w,o=n[0],a=n.left,c=n.right,l=a[0],u=a[1],f=c[0],p=c[1],g=(l+f)/2;if(p===u){if(g<e||g>=i)return;if(l>f){if(o){if(o[1]>=r)return}else o=[g,t];s=[g,r]}else{if(o){if(o[1]<t)return}else o=[g,r];s=[g,t]}}else if(w=(u+p)/2-(y=(l-f)/(p-u))*g,y<-1||y>1)if(l>f){if(o){if(o[1]>=r)return}else o=[(t-w)/y,t];s=[(r-w)/y,r]}else{if(o){if(o[1]<t)return}else o=[(r-w)/y,r];s=[(t-w)/y,t]}else if(u<p){if(o){if(o[0]>=i)return}else o=[e,y*e+w];s=[i,y*i+w]}else{if(o){if(o[0]<e)return}else o=[i,y*i+w];s=[e,y*e+w]}return n[0]=o,n[1]=s,!0}function oTt(n,e){var t=n.site,i=e.left,r=e.right;return t===r&&(r=i,i=t),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(t===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function She(n,e){return e[+(e.left!==n.site)]}function aTt(n,e){return e[+(e.left===n.site)]}var nN,Ehe=[];function uTt(){SE(this),this.x=this.y=this.arc=this.site=this.cy=null}function dm(n){var e=n.P,t=n.N;if(e&&t){var i=e.site,r=n.site,s=t.site;if(i!==s){var o=r[0],a=r[1],c=i[0]-o,l=i[1]-a,u=s[0]-o,f=s[1]-a,p=2*(c*f-l*u);if(!(p>=-gTt)){var g=c*c+l*l,_=u*u+f*f,y=(f*g-l*_)/p,w=(c*_-u*g)/p,C=Ehe.pop()||new uTt;C.arc=n,C.site=r,C.x=y+o,C.y=(C.cy=w+a)+Math.sqrt(y*y+w*w),n.circle=C;for(var b=null,M=j_._;M;)if(C.y<M.y||C.y===M.y&&C.x<=M.x){if(!M.L){b=M.P;break}M=M.L}else{if(!M.R){b=M;break}M=M.R}j_.insert(b,C),b||(nN=C)}}}}function pm(n){var e=n.circle;e&&(e.P||(nN=e.N),j_.remove(e),Ehe.push(e),SE(e),n.circle=null)}var The=[];function hTt(){SE(this),this.edge=this.site=this.circle=null}function Lhe(n){var e=The.pop()||new hTt;return e.site=n,e}function iN(n){pm(n),gm.remove(n),The.push(n),SE(n)}function fTt(n){var e=n.circle,t=e.x,i=e.cy,r=[t,i],s=n.P,o=n.N,a=[n];iN(n);for(var c=s;c.circle&&Math.abs(t-c.circle.x)<Xa&&Math.abs(i-c.circle.cy)<Xa;)s=c.P,a.unshift(c),iN(c),c=s;a.unshift(c),pm(c);for(var l=o;l.circle&&Math.abs(t-l.circle.x)<Xa&&Math.abs(i-l.circle.cy)<Xa;)o=l.N,a.push(l),iN(l),l=o;a.push(l),pm(l);var f,u=a.length;for(f=1;f<u;++f)EE((l=a[f]).edge,(c=a[f-1]).site,l.site,r);(l=a[u-1]).edge=Q_((c=a[0]).site,l.site,null,r),dm(c),dm(l)}function dTt(n){for(var i,r,s,o,e=n[0],t=n[1],a=gm._;a;)if((s=Dhe(a,t)-e)>Xa)a=a.L;else{if(!((o=e-pTt(a,t))>Xa)){s>-Xa?(i=a.P,r=a):o>-Xa?(i=a,r=a.N):i=r=a;break}if(!a.R){i=a;break}a=a.R}!function sTt(n){o4[n.index]={site:n,halfedges:[]}}(n);var c=Lhe(n);if(gm.insert(i,c),i||r){if(i===r)return pm(i),r=Lhe(i.site),gm.insert(c,r),c.edge=r.edge=Q_(i.site,c.site),dm(i),void dm(r);if(!r)return void(c.edge=Q_(i.site,c.site));pm(i),pm(r);var l=i.site,u=l[0],f=l[1],p=n[0]-u,g=n[1]-f,_=r.site,y=_[0]-u,w=_[1]-f,C=2*(p*w-g*y),b=p*p+g*g,M=y*y+w*w,T=[(w*b-g*M)/C+u,(p*M-y*b)/C+f];EE(r.edge,l,_,T),c.edge=Q_(l,n,null,T),r.edge=Q_(n,_,null,T),dm(i),dm(r)}}function Dhe(n,e){var t=n.site,i=t[0],r=t[1],s=r-e;if(!s)return i;var o=n.P;if(!o)return-1/0;var a=(t=o.site)[0],c=t[1],l=c-e;if(!l)return a;var u=a-i,f=1/s-1/l,p=u/l;return f?(-p+Math.sqrt(p*p-2*f*(u*u/(-2*l)-c+l/2+r-s/2)))/f+i:(i+a)/2}function pTt(n,e){var t=n.N;if(t)return Dhe(t,e);var i=n.site;return i[1]===e?i[0]:1/0}var gm,o4,j_,rl,Xa=1e-6,gTt=1e-12;function mTt(n,e,t){return(n[0]-t[0])*(e[1]-n[1])-(n[0]-e[0])*(t[1]-n[1])}function ATt(n,e){return e[1]-n[1]||e[0]-n[0]}function Ihe(n,e){var i,r,s,t=n.sort(ATt).pop();for(rl=[],o4=new Array(n.length),gm=new Mhe,j_=new Mhe;;)if(s=nN,t&&(!s||t[1]<s.y||t[1]===s.y&&t[0]<s.x))(t[0]!==i||t[1]!==r)&&(dTt(t),i=t[0],r=t[1]),t=n.pop();else{if(!s)break;fTt(s.arc)}if(function cTt(){for(var t,i,r,s,n=0,e=o4.length;n<e;++n)if((t=o4[n])&&(s=(i=t.halfedges).length)){var o=new Array(s),a=new Array(s);for(r=0;r<s;++r)o[r]=r,a[r]=oTt(t,rl[i[r]]);for(o.sort(function(c,l){return a[l]-a[c]}),r=0;r<s;++r)a[r]=i[o[r]];for(r=0;r<s;++r)i[r]=a[r]}}(),e){var o=+e[0][0],a=+e[0][1],c=+e[1][0],l=+e[1][1];(function rTt(n,e,t,i){for(var s,r=rl.length;r--;)iTt(s=rl[r],n,e,t,i)&&nTt(s,n,e,t,i)&&(Math.abs(s[0][0]-s[1][0])>Xa||Math.abs(s[0][1]-s[1][1])>Xa)||delete rl[r]})(o,a,c,l),function lTt(n,e,t,i){var s,o,a,c,l,u,f,p,g,_,y,w,r=o4.length,C=!0;for(s=0;s<r;++s)if(o=o4[s]){for(a=o.site,c=(l=o.halfedges).length;c--;)rl[l[c]]||l.splice(c,1);for(c=0,u=l.length;c<u;)y=(_=aTt(o,rl[l[c]]))[0],w=_[1],p=(f=She(o,rl[l[++c%u]]))[0],g=f[1],(Math.abs(y-p)>Xa||Math.abs(w-g)>Xa)&&(l.splice(c,0,rl.push(W_(a,_,Math.abs(y-n)<Xa&&i-w>Xa?[n,Math.abs(p-n)<Xa?g:i]:Math.abs(w-i)<Xa&&t-y>Xa?[Math.abs(g-i)<Xa?p:t,i]:Math.abs(y-t)<Xa&&w-e>Xa?[t,Math.abs(p-t)<Xa?g:e]:Math.abs(w-e)<Xa&&y-n>Xa?[Math.abs(g-e)<Xa?p:n,e]:null))-1),++u);u&&(C=!1)}if(C){var b,M,T,I=1/0;for(s=0,C=null;s<r;++s)(o=o4[s])&&(T=(b=(a=o.site)[0]-n)*b+(M=a[1]-e)*M)<I&&(I=T,C=o);if(C){var F=[n,e],P=[n,i],R=[t,i],k=[t,e];C.halfedges.push(rl.push(W_(a=C.site,F,P))-1,rl.push(W_(a,P,R))-1,rl.push(W_(a,R,k))-1,rl.push(W_(a,k,F))-1)}}for(s=0;s<r;++s)(o=o4[s])&&(o.halfedges.length||delete o4[s])}(o,a,c,l)}this.edges=rl,this.cells=o4,gm=j_=rl=o4=null}Ihe.prototype={constructor:Ihe,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(i){return She(e,n[i])});return t.data=e.site.data,t})},triangles:function(){var n=[],e=this.edges;return this.cells.forEach(function(t,i){if(a=(s=t.halfedges).length)for(var s,a,c,r=t.site,o=-1,l=e[s[a-1]],u=l.left===r?l.right:l.left;++o<a;)c=u,u=(l=e[s[o]]).left===r?l.right:l.left,c&&u&&i<c.index&&i<u.index&&mTt(r,c,u)<0&&n.push([r.data,c.data,u.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,e,t){for(var r,a,i=this,s=i._found||0,o=i.cells.length;!(a=i.cells[s]);)if(++s>=o)return null;var c=n-a.site[0],l=e-a.site[1],u=c*c+l*l;do{a=i.cells[r=s],s=null,a.halfedges.forEach(function(f){var p=i.edges[f],g=p.left;if(g!==a.site&&g||(g=p.right)){var _=n-g[0],y=e-g[1],w=_*_+y*y;w<u&&(u=w,s=g.index)}})}while(null!==s);return i._found=r,null==t||u<=t*t?a.site:null}};var Uhe=Me(9855);function C6(){return new TE}function TE(){this.reset()}Me(770),TE.prototype={constructor:TE,reset:function(){this.s=this.t=0},add:function(n){Ghe(LE,n,this.t),Ghe(this,LE.s,this.s),this.s?this.t+=LE.t:this.s=LE.t},valueOf:function(){return this.s}};var LE=new TE;function Ghe(n,e,t){var i=n.s=e+t,r=i-e;n.t=e-(i-r)+(t-r)}var p1=Math.PI,v3=p1/2,mm=2*p1,La=p1/180,$_=(Math,Math.atan),Am=Math.atan2,eo=Math.cos,ps=(Math,Math,Math,Math,Math,Math.sin),Mf=(Math,Math.sqrt);Math;function vm(n){return n>1?v3:n<-1?-v3:Math.asin(n)}function AN(n,e){return[n>p1?n-mm:n<-p1?n+mm:n,e]}function mfe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}C6(),C6(),C6(),AN.invert=AN,function KTt(n){1===n.length&&(n=function XTt(n){return function(e,t){return mfe(n(e),t)}}(n))}(mfe),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);C6();function PN(){}function Ufe(n){return function(e,t){var i=eo(e),r=eo(t),s=n(i*r);return[s*r*ps(e),s*ps(t)]}}function iy(n){return function(e,t){var i=Mf(e*e+t*t),r=n(i),s=ps(r),o=eo(r);return[Am(e*s,i*o),vm(i&&t*s/i)]}}C6(),C6(),C6(),C6(),function Ofe(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}(4.5),PN.prototype={constructor:PN,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},eo(30*La),function Nfe(n){return function(e){var t=new PN;for(var i in n)t[i]=n[i];return t.stream=e,t}}({point:function(n,e){this.stream.point(n*La,e*La)}});var Gfe=Ufe(function(n){return Mf(2/(1+n))});Gfe.invert=iy(function(n){return 2*vm(n/2)});var Qfe=Ufe(function(n){return(n=function ITt(n){return n>1?0:n<-1?p1:Math.acos(n)}(n))&&n/ps(n)});function zN(n,e){return[n,e]}Qfe.invert=iy(function(n){return n}),zN.invert=zN,iy($_),iy(vm),iy(function(n){return 2*$_(n)});class tT extends Cue{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ta),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(js(this.geometries_[e],"change",this.changed,this))}clone(){const e=new tT(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<O5(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){N5(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)R4e(e,t[i].getExtent());return e}getGeometries(){return ede(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}if(r){const s=new tT(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=s6(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(ede(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ede(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}const ON=tT;function tde(n,e,t){const i=t?Ka(t.featureProjection):null,r=t?Ka(t.dataProjection):null;let s;if(s=i&&r&&!j5(i,r)?(e?n.clone():n).transform(e?i:r,e?r:i):n,e&&t&&void 0!==t.decimals){const o=Math.pow(10,t.decimals),a=function(c){for(let l=0,u=c.length;l<u;++l)c[l]=Math.round(c[l]*o)/o;return c};s===n&&(s=n.clone()),s.applyTransform(a)}return s}function nT(n){return"string"==typeof n?JSON.parse(n)||null:null!==n?n:null}function nde(n,e,t,i,r,s,o){let a,c;const l=(t-e)/i;if(1===l)a=e;else if(2===l)a=e,c=r;else if(0!==l){let u=n[e],f=n[e+1],p=0;const g=[0];for(let w=e+i;w<t;w+=i){const C=n[w],b=n[w+1];p+=Math.sqrt((C-u)*(C-u)+(b-f)*(b-f)),g.push(p),u=C,f=b}const _=r*p,y=function Zyt(n,e,t){let i,r;t=t||H5;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}(g,_);y<0?(c=(_-g[-y-2])/(g[-y-1]-g[-y-2]),a=e+(-y-2)*i):a=e+y*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=void 0===a?NaN:void 0===c?n[a+u]:Af(n[a+u],n[a+i+u],c);return s}function NN(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const p=a+c>>1;r<n[(p+1)*i-1]?c=p:a=p+1}const l=n[a*i-1];if(r==l)return n.slice((a-1)*i,(a-1)*i+i);const f=(r-l)/(n[(a+1)*i-1]-l);o=[];for(let p=0;p<i-1;++p)o.push(Af(n[(a-1)*i+p],n[a*i+p],f));return o.push(r),o}class iT extends f6{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}appendCoordinate(e){this.flatCoordinates?Uu(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new iT(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<O5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Gz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return Iue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:NN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t=void 0!==t&&t)}getCoordinates(){return d6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return nde(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return _O(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=lE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new iT(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return hE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cE(this.flatCoordinates,0,e,this.stride),this.changed()}}const Tf=iT;class rT extends f6{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(void 0!==t&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let r=this.getLayout();const s=e,o=[],a=[];for(let c=0,l=s.length;c<l;++c){const u=s[c];0===c&&(r=u.getLayout()),Uu(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?Uu(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new rT(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<O5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qz(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jz(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function KLt(n,e,t,i,r,s,o){if(o)return NN(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,l=t.length;c<l;++c){const u=t[c];if(e!=u){if(r<n[e+i-1])return null;if(r<=n[u-1])return NN(n,e,u,i,r,!1);e=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,t=void 0!==t&&t,i=void 0!==i&&i)}getCoordinates(){return T_(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Tf(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o],l=new Tf(e.slice(s,c),i);r.push(l),s=c}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const c=r[o];Uu(e,nde(t,i,c,s,.5)),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function Mue(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c];o=lE(n,e,u,i,r,s,o),a.push(o),e=u}return o}(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new rT(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return function $Ct(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(hE(n,e,t[s],i,r))return!0;e=t[s]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=$z(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const VN=rT;class UN extends f6{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?Uu(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new UN(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<O5(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,c=s.length;a<c;a+=o){const l=mf(e,t,s[a],s[a+1]);if(l<r){r=l;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return d6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){return e<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=e?null:new n4(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new n4(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i)if(Az(e,t[r],t[r+1]))return!0;return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cE(this.flatCoordinates,0,e,this.stride),this.changed()}}const GN=UN;class sT extends f6{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let r=this.getLayout();const s=e,o=[],a=[];for(let c=0,l=s.length;c<l;++c){const u=s[c];0===c&&(r=u.getLayout());const f=o.length,p=u.getEnds();for(let g=0,_=p.length;g<_;++g)p[g]+=f;Uu(o,u.getFlatCoordinates()),a.push(p)}t=r,e=o,i=a}void 0!==t&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(this.flatCoordinates){const i=this.flatCoordinates.length;Uu(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new sT(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<O5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function HCt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=Qz(n,e,a,i,r),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function zCt(n,e,t,i,r,s,o,a,c,l,u){u=u||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const g=t[f];l=jz(n,e,g,i,r,s,o,a,c,l,u),e=g[g.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return function WCt(n,e,t,i,r,s){if(0===t.length)return!1;for(let o=0,a=t.length;o<a;++o){const c=t[o];if(Xz(n,e,c,i,r,s))return!0;e=c[c.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return function GCt(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=Tue(n,e,a,i),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),kue(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,qz(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=function XLt(n,e,t,i){const r=[];let s=[1/0,1/0,-1/0,-1/0];for(let o=0,a=t.length;o<a;++o){const c=t[o];s=B4e(n,e,c[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=c[c.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function jCt(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const c=t[o];s=Due(n,e,c,i,r,2*o,s),e=c[c.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new GN(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function XCt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!Fue(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}(e,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=kue(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function UCt(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c],f=[];o=Sue(n,e,u,i,r,s,o,f),a.push(f),e=u[u.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new sT(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(0===e)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(0!==t)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new Y5(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const c=i[o].slice(),l=c[c.length-1];if(0!==s)for(let f=0,p=c.length;f<p;++f)c[f]-=s;const u=new Y5(t.slice(s,l),e,c);r.push(u),s=l}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return function qCt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(Rue(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=function OCt(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=$z(n,e,t[o],i,r[s]);0===c.length&&(c[0]=e),r[s++]=c,e=c[c.length-1]}return r.length=s,r}(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()}}const QN=sT;function WN(n,e){if(!n)return null;let t;switch(n.type){case"Point":t=function JLt(n){return new n4(n.coordinates)}(n);break;case"LineString":t=function eDt(n){return new Tf(n.coordinates)}(n);break;case"Polygon":t=function rDt(n){return new Y5(n.coordinates)}(n);break;case"MultiPoint":t=function nDt(n){return new GN(n.coordinates)}(n);break;case"MultiLineString":t=function tDt(n){return new VN(n.coordinates)}(n);break;case"MultiPolygon":t=function iDt(n){return new QN(n.coordinates)}(n);break;case"GeometryCollection":t=function ZLt(n,e){const t=n.geometries.map(function(i){return WN(i,e)});return new ON(t)}(n);break;default:throw new Error("Unsupported GeoJSON type: "+n.type)}return tde(t,!1,e)}function jN(n,e){const t=(n=tde(n,!0,e)).getType();let i;switch(t){case"Point":i=function uDt(n,e){return{type:"Point",coordinates:n.getCoordinates()}}(n);break;case"LineString":i=function oDt(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}(n);break;case"Polygon":i=function hDt(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}(n,e);break;case"MultiPoint":i=function cDt(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}(n);break;case"MultiLineString":i=function aDt(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}(n);break;case"MultiPolygon":i=function lDt(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}(n,e);break;case"GeometryCollection":i=function sDt(n,e){delete(e=Object.assign({},e)).featureProjection;const t=n.getGeometriesArray().map(function(i){return jN(i,e)});return{type:"GeometryCollection",geometries:t}}(n,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+t)}return i}const ide=class YLt extends class $Lt extends class WLt{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Ka(t.dataProjection):this.readProjection(e);t.extent&&i&&"tile-pixels"===i.getUnits()&&(i=Ka(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return or()}readFeature(e,t){return or()}readFeatures(e,t){return or()}readGeometry(e,t){return or()}readProjection(e){return or()}writeFeature(e,t){return or()}writeFeatures(e,t){return or()}writeGeometry(e,t){return or()}}{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(nT(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(nT(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return or()}readFeaturesFromObject(e,t){return or()}readGeometry(e,t){return this.readGeometryFromObject(nT(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return or()}readProjection(e){return this.readProjectionFromObject(nT(e))}readProjectionFromObject(e){return or()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return or()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return or()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return or()}}{constructor(e){e=e||{},super(),this.dataProjection=Ka(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ka(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;i="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const r=WN(i.geometry,t),s=new G4;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){let r=null;if("FeatureCollection"===e.type){r=[];const o=e.features;for(let a=0,c=o.length;a<c;++a)r.push(this.readFeatureFromObject(o[a],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return WN(e,t)}readProjectionFromObject(e){const t=e.crs;let i;return t?"name"==t.type?i=Ka(t.properties.name):"EPSG"===t.type?i=Ka("EPSG:"+t.properties.code):Ss(!1,36):i=this.dataProjection,i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(void 0!==r&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=jN(o,t),delete s[e.getGeometryName()]),qg(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return jN(e,this.adaptOptions(t))}};function xm(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oT(n){return oT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oT(n)}function rde(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sde(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function ode(n,e,t){return e&&sde(n.prototype,e),t&&sde(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function ap(n){return ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ap(n)}function fDt(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=ap(n)););return n}function ry(){return ry=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=fDt(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(arguments.length<3?e:i):s.value}},ry.apply(this,arguments)}function $N(n,e){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},$N(n,e)}function gDt(n,e){if(e&&("object"===oT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function pDt(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function ade(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e=["Assertion failed",e].join(": "),!n)throw new Error(e)}function cde(n){return n}function aT(n,e){return-1!==n.indexOf(e)}function lde(n){return"[object Array]"===Object.prototype.toString.call(n)}var KN=function(){function n(e,t,i,r){rde(this,n),this.propagationStopped_=!1,this.type_=e,this.features_=t,this.angle_=i,this.anchor_=r}return ode(n,[{key:"preventDefault",value:function(){this.propagationStopped_=!0}},{key:"stopPropagation",value:function(){this.propagationStopped_=!0}},{key:"propagationStopped",get:function(){return this.propagationStopped_}},{key:"type",get:function(){return this.type_}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.angle_}},{key:"anchor",get:function(){return this.anchor_}}]),n}(),XN=typeof navigator<"u"?navigator.userAgent.toLowerCase():"",mDt=-1!==XN.indexOf("macintosh"),ADt=-1!==XN.indexOf("webkit")&&-1==XN.indexOf("edge");var cT="rotate-anchor",lT="rotate-arrow",l4="angle",uT="anchor",ude=function(n){!function dDt(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&$N(n,e)}(t,n);var e=function _Dt(n){var e=function yDt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var r,i=ap(n);if(e){var s=ap(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return gDt(this,r)}}(t);function t(){var i,r,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(rde(this,t),(r=e.call(this,{handleDownEvent:wDt,handleUpEvent:CDt,handleDragEvent:xDt,handleMoveEvent:sy})).previousCursor_=void 0,r.anchorFeature_=void 0,r.arrowFeature_=void 0,r.lastCoordinate_=void 0,r.anchorMoving_=!1,r.overlay_=new lm({style:s.style||bDt(),source:new P_({features:new O1})}),r.condition_=s.condition?s.condition:om,r.features_=void 0,s.features)if(lde(s.features))r.features_=new O1(s.features);else{if(!(s.features instanceof O1))throw new Error("Features option should be an array or collection of features, got "+oT(s.features));r.features_=s.features}else r.features_=new O1;return r.allowAnchorMovement=void 0===s.allowAnchorMovement||s.allowAnchorMovement,r.setAnchor(s.anchor||YN(r.features_)),r.setAngle(s.angle||0),r.features_.on("add",(i=r).onFeatureAdd_.bind(i)),r.features_.on("remove",(i=r).onFeatureRemove_.bind(i)),r.on("change:"+l4,(i=r).onAngleChange_.bind(i)),r.on("change:"+uT,(i=r).onAnchorChange_.bind(i)),r.createOrUpdateAnchorFeature_(),r.createOrUpdateArrowFeature_(),r}return ode(t,[{key:"setMap",value:function(r){this.overlay_.setMap(r),ry(ap(t.prototype),"setMap",this).call(this,r)}},{key:"setActive",value:function(r){this.overlay_&&this.overlay_.setMap(r?this.map:void 0),ry(ap(t.prototype),"setActive",this).call(this,r)}},{key:"setAngle",value:function(r){ade(!isNaN(parseFloat(r)),"Numeric value passed"),this.set(l4,parseFloat(r))}},{key:"getAngle",value:function(){return this.get(l4)}},{key:"setAnchor",value:function(r){ade(null==r||lde(r)&&2===r.length,"Array of two elements passed"),this.set(uT,null!=r?r.map(parseFloat):YN(this.features_))}},{key:"getAnchor",value:function(){return this.get(uT)}},{key:"createOrUpdateAnchorFeature_",value:function(){var r=this.getAngle(),s=this.getAnchor();if(s)if(this.anchorFeature_)this.anchorFeature_.getGeometry().setCoordinates(s),this.anchorFeature_.set(l4,r);else{var o;this.anchorFeature_=new G4((xm(o={geometry:new n4(s)},l4,r),xm(o,cT,!0),o)),this.overlay_.getSource().addFeature(this.anchorFeature_)}}},{key:"createOrUpdateArrowFeature_",value:function(){var r=this.getAngle(),s=this.getAnchor();if(s)if(this.arrowFeature_)this.arrowFeature_.getGeometry().setCoordinates(s),this.arrowFeature_.set(l4,r);else{var o;this.arrowFeature_=new G4((xm(o={geometry:new n4(s)},l4,r),xm(o,lT,!0),o)),this.overlay_.getSource().addFeature(this.arrowFeature_)}}},{key:"resetAngleAndAnchor_",value:function(){this.resetAngle_(),this.resetAnchor_()}},{key:"resetAngle_",value:function(){this.set(l4,0,!0),this.arrowFeature_&&this.arrowFeature_.set(l4,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(l4,this.getAngle())}},{key:"resetAnchor_",value:function(){this.set(uT,YN(this.features_),!0),this.getAnchor()&&(this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor()),this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor()))}},{key:"onFeatureAdd_",value:function(){this.resetAngleAndAnchor_(),this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()}},{key:"onFeatureRemove_",value:function(){this.resetAngleAndAnchor_(),this.features_.getLength()?(this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()):(this.overlay_.getSource().clear(),this.anchorFeature_=this.arrowFeature_=void 0)}},{key:"onAngleChange_",value:function(r){var s=this,o=r.oldValue;this.features_.forEach(function(a){return a.getGeometry().rotate(s.getAngle()-o,s.getAnchor())}),this.arrowFeature_&&this.arrowFeature_.set(l4,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(l4,this.getAngle())}},{key:"onAnchorChange_",value:function(){var r=this.getAnchor();r&&(this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(r),this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(r))}},{key:"dispatchRotateStartEvent_",value:function(r){this.dispatchEvent(new KN("rotatestart",r,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotatingEvent_",value:function(r){this.dispatchEvent(new KN("rotating",r,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotateEndEvent_",value:function(r){this.dispatchEvent(new KN("rotateend",r,this.getAngle(),this.getAnchor()))}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.getAngle()},set:function(r){this.setAngle(r)}},{key:"anchor",get:function(){return this.getAnchor()},set:function(r){this.setAnchor(r)}},{key:"map",set:function(r){this.setMap(r)},get:function(){return this.getMap()}},{key:"active",set:function(r){this.setActive(r)},get:function(){return this.getActive()}}]),t}(wf);function wDt(n){if(!pE(n))return!1;if(function(e){var t=e.originalEvent;return 0==t.button&&!(ADt&&mDt&&t.ctrlKey)}(n)&&this.condition_(n)){var e=n.map.forEachFeatureAtPixel(n.pixel,cde);if(aT(["click","singleclick","dblclick"],n.type)&&aT([this.anchorFeature_,this.arrowFeature_],e))return!1;if(e&&!this.lastCoordinate_&&(aT(this.features_.getArray(),e)||e===this.arrowFeature_))return this.lastCoordinate_=n.coordinate,sy.call(this,n),this.dispatchRotateStartEvent_(this.features_),!0;if(e&&e===this.anchorFeature_&&this.allowAnchorMovement)return this.anchorMoving_=!0,sy.call(this,n),!0}return!1}function CDt(n){return this.lastCoordinate_?(this.lastCoordinate_=void 0,sy.call(this,n),this.dispatchRotateEndEvent_(this.features_),!0):!!this.anchorMoving_&&(this.anchorMoving_=!1,sy.call(this,n),!0)}function xDt(n){var e=n.coordinate,t=this.anchorFeature_.getGeometry().getCoordinates();if(this.lastCoordinate_){var i=[this.lastCoordinate_[0]-t[0],this.lastCoordinate_[1]-t[1]],r=[e[0]-t[0],e[1]-t[1]],s=Math.atan2(i[0]*r[1]-r[0]*i[1],i[0]*r[0]+i[1]*r[1]);this.setAngle(this.getAngle()+s),this.dispatchRotatingEvent_(this.features_),this.lastCoordinate_=e}else this.anchorMoving_&&this.setAnchor(e)}function sy(n){var e=n.map,t=n.pixel,i=e.getTargetElement(),r=e.forEachFeatureAtPixel(t,cde),s=function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c&&(i.style.cursor="-webkit-"+a,i.style.cursor="-moz-"+a),i.style.cursor=a};this.lastCoordinate_?(this.previousCursor_=i.style.cursor,s("grabbing",!0)):r&&(aT(this.features_.getArray(),r)||r===this.arrowFeature_)?(this.previousCursor_=i.style.cursor,s("grab",!0)):r&&r===this.anchorFeature_&&this.allowAnchorMovement||this.anchorMoving_?(this.previousCursor_=i.style.cursor,s("crosshair")):(s(this.previousCursor_||""),this.previousCursor_=void 0)}function bDt(){var n,e=[255,255,255,.8],t=[0,153,255,.8],i=[255,255,255,.01],s=(xm(n={},cT,[new zl({image:new L_({fill:new Aa({color:[0,153,255,.8]}),stroke:new Tc({color:t,width:1}),radius:4,points:6}),zIndex:1/0})]),xm(n,lT,[new zl({fill:new Aa({color:i}),stroke:new Tc({color:e,width:4}),text:new m6({font:"12px sans-serif",offsetX:20,offsetY:-20,fill:new Aa({color:"blue"}),stroke:new Tc({color:e,width:3})}),zIndex:1/0}),new zl({fill:new Aa({color:i}),stroke:new Tc({color:t,width:2}),zIndex:1/0})]),n);return function(o,a){var c,l=o.get(l4)||0;switch(!0){case o.get(cT):return(c=s[cT])[0].getImage().setRotation(-l),c;case o.get(lT):c=s[lT];var u=o.getGeometry().getCoordinates(),f=new Y5([[[u[0],u[1]-6*a],[u[0]+8*a,u[1]-12*a],[u[0],u[1]+30*a],[u[0]-8*a,u[1]-12*a],[u[0],u[1]-6*a]]]);return f.rotate(l,u),c[0].setGeometry(f),c[1].setGeometry(f),c[0].getText().setText(Math.round(180*-l/Math.PI)+"\xb0"),c}}}function YN(n){if((n=n instanceof O1?n.getArray():n).length)return s6(function MDt(n){if((n=n instanceof O1?n.getArray():n).length)return new ON(n.map(function(e){return e.getGeometry()})).getExtent()}(n))}typeof window<"u"&&window.ol&&window.ol.interaction&&(window.ol.interaction.RotateFeature=ude);const SDt=ude,TDt=class EDt extends jS{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(e){this.set("preload",e)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(e){this.set("useInterimTilesOnError",e)}getData(e){return super.getData(e)}},hde=class LDt extends LS{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?t=e:0==e.getState()?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){or()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else i=t,this.transitionStarts_[e]=i;const r=t-i+1e3/60;return r>=this.transition_?1:_ue(r/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}},fde=class DDt extends hde{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function IDt(){const n=t4(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=mO(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};let ZN;const pde=[];function gde(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function JN(n,e){return Math.abs(n[4*e]-210)>2||Math.abs(n[4*e+3]-191.25)>2}function mde(n,e,t,i){const r=S_(t,e,n);let s=hue(e,i,t);const o=e.getMetersPerUnit();void 0!==o&&(s*=o);const a=n.getMetersPerUnit();void 0!==a&&(s/=a);const c=n.getExtent();if(!c||kS(c,r)){const l=hue(n,s,r)/s;isFinite(l)&&l>0&&(s/=l)}return s}const eV=class ODt extends hde{constructor(e,t,i,r,s,o,a,c,l,u,f,p){super(s,0,{interpolate:!!p}),this.renderEdges_=void 0!==f&&f,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const g=r.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const w=_?Yg(g,_):g;if(0===HS(w))return void(this.state=4);const C=e.getExtent();C&&(y=y?Yg(y,C):C);const b=r.getResolution(this.wrappedTileCoord_[0]),M=function HDt(n,e,t,i){const r=s6(t);let s=mde(n,e,r,i);return(!isFinite(s)||s<=0)&&_z(t,function(o){return s=mde(n,e,o,i),isFinite(s)&&s>0}),s}(e,i,w,b);if(!isFinite(M)||M<=0)return void(this.state=4);if(this.triangulation_=new class FDt{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const c=M_(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const M=b[0]+"/"+b[1];return a[M]||(a[M]=c(b)),a[M]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ma(r)==ma(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ma(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ma(this.targetProj_.getExtent()):null;const l=V5(i),u=NS(i),f=OS(i),p=zS(i),g=this.transformInv_(l),_=this.transformInv_(u),y=this.transformInv_(f),w=this.transformInv_(p),C=10+(o?Math.max(0,Math.ceil(Math.log2(HS(i)/(o*o*256*256)))):0);if(this.addQuad_(l,u,f,p,g,_,y,w,C),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(M,T,I){b=Math.min(b,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(function(M){if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-b>this.sourceWorldWidth_/2){const T=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];T[0][0]-b>this.sourceWorldWidth_/2&&(T[0][0]-=this.sourceWorldWidth_),T[1][0]-b>this.sourceWorldWidth_/2&&(T[1][0]-=this.sourceWorldWidth_),T[2][0]-b>this.sourceWorldWidth_/2&&(T[2][0]-=this.sourceWorldWidth_);const I=Math.min(T[0][0],T[1][0],T[2][0]);Math.max(T[0][0],T[1][0],T[2][0])-I<this.sourceWorldWidth_/2&&(M.source=T)}}.bind(this))}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,c,l){const u=Q4([s,o,a,c]),f=this.sourceWorldWidth_?ma(u)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&f>.5&&f<1;let _=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(_=ma(Q4([e,t,i,r]))/this.targetWorldWidth_>.25||_),!g&&this.sourceProj_.isGlobal()&&f&&(_=f>.25||_)),!_&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Pl(u,this.maxSourceExtent_))return;let y=0;if(!(_||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(c[0])&&isFinite(c[1])))if(l>0)_=!0;else if(y=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(c[0])&&isFinite(c[1])?0:1),1!=y&&2!=y&&4!=y&&8!=y)return;if(l>0){if(!_){const C=this.transformInv_([(e[0]+i[0])/2,(e[1]+i[1])/2]);let b;b=g?(o6(s[0],p)+o6(a[0],p))/2-o6(C[0],p):(s[0]+a[0])/2-C[0];const M=(s[1]+a[1])/2-C[1];_=b*b+M*M>this.errorThresholdSquared_}if(_){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const w=[(t[0]+i[0])/2,(t[1]+i[1])/2],C=this.transformInv_(w),b=[(r[0]+e[0])/2,(r[1]+e[1])/2],M=this.transformInv_(b);this.addQuad_(e,t,w,b,s,o,C,M,l-1),this.addQuad_(b,w,i,r,M,C,a,c,l-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],C=this.transformInv_(w),b=[(i[0]+r[0])/2,(i[1]+r[1])/2],M=this.transformInv_(b);this.addQuad_(e,w,b,r,s,C,M,c,l-1),this.addQuad_(w,t,i,b,C,o,a,M,l-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&y)&&this.addTriangle_(e,i,r,s,a,c),0==(14&y)&&this.addTriangle_(e,i,t,s,a,o),y&&(0==(13&y)&&this.addTriangle_(t,r,e,o,c,s),0==(7&y)&&this.addTriangle_(t,r,i,o,c,a))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,i,r){const s=t.source;Xg(e,s[0]),Xg(e,s[1]),Xg(e,s[2])}),e}getTriangles(){return this.triangles_}}(e,i,w,y,M*(void 0!==u?u:.5),b),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(M);let I=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(I[1]=s2(I[1],y[1],y[3]),I[3]=s2(I[3],y[1],y[3])):I=Yg(I,y)),HS(I)){const F=t.getTileRangeForExtentAndZ(I,this.sourceZ_);for(let P=F.minX;P<=F.maxX;P++)for(let R=F.minY;R<=F.maxY;R++){const k=l(this.sourceZ_,P,R,a);k&&this.sourceTiles_.push(k)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(function(t,i,r){t&&2==t.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function zDt(n,e,t,i,r,s,o,a,c,l,u,f){const p=t4(Math.round(t*n),Math.round(t*e),pde);if(f||(p.imageSmoothingEnabled=!1),0===c.length)return p.canvas;function g(T){return Math.round(T*t)/t}p.scale(t,t),p.globalCompositeOperation="lighter";const _=[1/0,1/0,-1/0,-1/0];c.forEach(function(T,I,F){R4e(_,T.extent)});const y=ma(_),w=Wu(_),C=t4(Math.round(t*y/i),Math.round(t*w/i));f||(C.imageSmoothingEnabled=!1);const b=t/i;c.forEach(function(T,I,F){const P=T.extent[0]-_[0],R=-(T.extent[3]-_[3]),k=ma(T.extent),W=Wu(T.extent);T.image.width>0&&T.image.height>0&&C.drawImage(T.image,l,l,T.image.width-2*l,T.image.height-2*l,P*b,R*b,k*b,W*b)});const M=V5(o);return a.getTriangles().forEach(function(T,I,F){const P=T.source,R=T.target;let k=P[0][0],W=P[0][1],ie=P[1][0],Te=P[1][1],me=P[2][0],Q=P[2][1];const he=g((R[0][0]-M[0])/s),K=g(-(R[0][1]-M[1])/s),oe=g((R[1][0]-M[0])/s),fe=g(-(R[1][1]-M[1])/s),de=g((R[2][0]-M[0])/s),Re=g(-(R[2][1]-M[1])/s),Ze=k,Be=W;k=0,W=0,ie-=Ze,Te-=Be,me-=Ze,Q-=Be;const ut=function Swt(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>s&&(s=c,r=a)}if(0===s)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let l=i;l<e+1;l++)i==l?n[a][l]=0:n[a][l]+=c*n[i][l]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}([[ie,Te,0,0,oe-he],[me,Q,0,0,de-he],[0,0,ie,Te,fe-K],[0,0,me,Q,Re-K]]);if(ut){if(p.save(),p.beginPath(),function PDt(){if(void 0===ZN){const n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",gde(n,4,5,4,0),gde(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;ZN=JN(e,0)||JN(e,4)||JN(e,8)}return ZN}()||!f){p.moveTo(oe,fe);const It=4,bt=he-oe,Xt=K-fe;for(let sn=0;sn<It;sn++)p.lineTo(oe+g((sn+1)*bt/It),fe+g(sn*Xt/(It-1))),sn!=It-1&&p.lineTo(oe+g((sn+1)*bt/It),fe+g((sn+1)*Xt/(It-1)));p.lineTo(de,Re)}else p.moveTo(oe,fe),p.lineTo(he,K),p.lineTo(de,Re);p.clip(),p.transform(ut[0],ut[2],ut[1],ut[3],he,K),p.translate(_[0]-Ze,_[3]-Be),p.scale(i/t,-i/t),p.drawImage(C.canvas,0,0),p.restore()}}),u&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(T,I,F){const P=T.target,R=(P[0][0]-M[0])/s,k=-(P[0][1]-M[1])/s,W=(P[1][0]-M[0])/s,ie=-(P[1][1]-M[1])/s,Te=(P[2][0]-M[0])/s,me=-(P[2][1]-M[1])/s;p.beginPath(),p.moveTo(W,ie),p.lineTo(R,k),p.lineTo(Te,me),p.closePath(),p.stroke()}),p.restore()),p.canvas}(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,i,r){const s=t.getState();if(0==s||1==s){e++;const o=js(t,"change",function(a){const c=t.getState();(2==c||3==c||4==c)&&(Ta(o),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){0==t.getState()&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ta),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Z4e(this.canvas_.getContext("2d")),pde.push(this.canvas_),this.canvas_=null),super.release()}};class Ade{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function bm(n,e,t,i,r){return void 0!==r?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new Ade(n,e,t,i)}const vde=Ade,VDt=class NDt extends i0e{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new vde(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let l=a.getSource().getTile(e,t,i,s,o);return 3==l.getState()&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=cc(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!kS(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,c=t.viewState,l=i.getRenderSource(),u=l.getTileGridForProjection(c.projection),f=l.getTilePixelRatio(t.pixelRatio);for(let p=u.getZForResolution(c.resolution);p>=u.getMinZoom();--p){const g=u.getTileCoordForCoordAndZ(r,p),_=l.getTile(p,g[1],g[2],o,a);if(!(_ instanceof fde||_ instanceof eV)||_ instanceof eV&&4===_.getState())return null;if(2!==_.getState())continue;const y=u.getOrigin(p),w=r4(u.getTileSize(p)),C=u.getResolution(p),b=Math.floor(f*((r[0]-y[0])/C-g[1]*w[0])),M=Math.floor(f*((y[1]-r[1])/C-g[2]*w[1])),T=Math.round(f*l.getGutterForProjection(c.projection));return this.getImageData(_.getImage(),b+T,M+T)}return null}loadedTileCallback(e,t,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(e,t,i)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,c=r.rotation,l=e.pixelRatio,u=this.getLayer(),f=u.getSource(),p=f.getRevision(),g=f.getTileGridForProjection(s),_=g.getZForResolution(o,f.zDirection),y=g.getResolution(_);let w=e.extent;const C=e.viewState.resolution,b=f.getTilePixelRatio(l),M=Math.round(ma(w)/C*l),T=Math.round(Wu(w)/C*l),I=i.extent&&h6(i.extent);I&&(w=Yg(w,h6(i.extent)));const F=y*M/2/b,P=y*T/2/b,R=[a[0]-F,a[1]-P,a[0]+F,a[1]+P],k=g.getTileRangeForExtentAndZ(w,_),W={};W[_]={};const ie=this.createLoadedTileFinder(f,s,W),Te=this.tmpExtent,me=this.tmpTileRange_;this.newTiles_=!1;const Q=c?wz(r.center,C,c,e.size):void 0;for(let wt=k.minX;wt<=k.maxX;++wt)for(let ut=k.minY;ut<=k.maxY;++ut){if(c&&!g.tileCoordIntersectsViewport([_,wt,ut],Q))continue;const It=this.getTile(_,wt,ut,e);if(this.isDrawableTile(It)){const sn=br(this);if(2==It.getState()){W[_][It.tileCoord.toString()]=It;let Sn=It.inTransition(sn);Sn&&1!==i.opacity&&(It.endTransition(sn),Sn=!1),!this.newTiles_&&(Sn||!this.renderedTiles.includes(It))&&(this.newTiles_=!0)}if(1===It.getAlpha(sn,e.time))continue}const bt=g.getTileCoordChildTileRange(It.tileCoord,me,Te);let Xt=!1;bt&&(Xt=ie(_+1,bt)),Xt||g.forEachTileCoordParentTileRange(It.tileCoord,ie,me,Te)}const he=y/o*l/b;gf(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,c,-M/2,-T/2);const K=mz(this.pixelTransform);this.useContainer(t,K,this.getBackground(e));const oe=this.context,fe=oe.canvas;RS(this.inversePixelTransform,this.pixelTransform),gf(this.tempTransform,M/2,T/2,he,he,0,-M/2,-T/2),fe.width!=M||fe.height!=T?(fe.width=M,fe.height=T):this.containerReused||oe.clearRect(0,0,M,T),I&&this.clipUnrotated(oe,e,I),f.getInterpolate()||(oe.imageSmoothingEnabled=!1),this.preRender(oe,e),this.renderedTiles.length=0;let Re,Ze,Be,de=Object.keys(W).map(Number);de.sort(H5),1!==i.opacity||this.containerReused&&!f.getOpaque(e.viewState.projection)?(Re=[],Ze=[]):de=de.reverse();for(let wt=de.length-1;wt>=0;--wt){const ut=de[wt],It=f.getTilePixelSize(ut,l,s),Xt=g.getResolution(ut)/y,sn=It[0]*Xt*he,Sn=It[1]*Xt*he,on=g.getTileCoordForCoordAndZ(V5(R),ut),Ti=g.getTileCoordExtent(on),Ot=cc(this.tempTransform,[b*(Ti[0]-R[0])/y,b*(R[3]-Ti[3])/y]),Rt=b*f.getGutterForProjection(s),dn=W[ut];for(const qn in dn){const En=dn[qn],Cn=En.tileCoord,Un=on[1]-Cn[1],fi=Math.round(Ot[0]-(Un-1)*sn),ar=on[2]-Cn[2],ls=Math.round(Ot[1]-(ar-1)*Sn),ze=Math.round(Ot[0]-Un*sn),ve=Math.round(Ot[1]-ar*Sn),Tt=fi-ze,hn=ls-ve,xn=_===ut,In=xn&&1!==En.getAlpha(br(this),e.time);let wi=!1;if(!In)if(Re){Be=[ze,ve,ze+Tt,ve,ze+Tt,ve+hn,ze,ve+hn];for(let Le=0,Yt=Re.length;Le<Yt;++Le)if(_!==ut&&ut<Ze[Le]){const an=Re[Le];Pl([ze,ve,ze+Tt,ve+hn],[an[0],an[3],an[4],an[7]])&&(wi||(oe.save(),wi=!0),oe.beginPath(),oe.moveTo(Be[0],Be[1]),oe.lineTo(Be[2],Be[3]),oe.lineTo(Be[4],Be[5]),oe.lineTo(Be[6],Be[7]),oe.moveTo(an[6],an[7]),oe.lineTo(an[4],an[5]),oe.lineTo(an[2],an[3]),oe.lineTo(an[0],an[1]),oe.clip())}Re.push(Be),Ze.push(ut)}else oe.clearRect(ze,ve,Tt,hn);this.drawTileImage(En,e,ze,ve,Tt,hn,Rt,xn),Re&&!In?(wi&&oe.restore(),this.renderedTiles.unshift(En)):this.renderedTiles.push(En),this.updateUsedTiles(e.usedTiles,f,En)}}return this.renderedRevision=p,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!m_(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=l,this.renderedProjection=s,this.manageTilePyramid(e,f,g,l,s,w,_,u.getPreload()),this.scheduleExpireCache(e,f),this.postRender(oe,e),i.extent&&oe.restore(),oe.imageSmoothingEnabled=!0,K!==fe.style.transform&&(fe.style.transform=K),this.container}drawTileImage(e,t,i,r,s,o,a,c){const l=this.getTileImage(e);if(!l)return;const u=br(this),f=t.layerStatesArray[t.layerIndex],p=f.opacity*(c?e.getAlpha(u,t.time):1),g=p!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,i,r,s,o),g&&this.context.restore(),p!==f.opacity?t.animate=!0:c&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(r,s,o){const a=br(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=br(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,c,l){const u=br(t);u in e.wantedTiles||(e.wantedTiles[u]={});const f=e.wantedTiles[u],p=e.tileQueue,g=i.getMinZoom(),_=e.viewState.rotation,y=_?wz(e.viewState.center,e.viewState.resolution,_,e.size):void 0;let C,b,M,T,I,F,w=0;for(F=g;F<=a;++F)for(b=i.getTileRangeForExtentAndZ(o,F,b),M=i.getResolution(F),T=b.minX;T<=b.maxX;++T)for(I=b.minY;I<=b.maxY;++I)_&&!i.tileCoordIntersectsViewport([F,T,I],y)||(a-F<=c?(++w,C=t.getTile(F,T,I,r,s),0==C.getState()&&(f[C.getKey()]=!0,p.isKeyQueued(C.getKey())||p.enqueue([C,u,i.getTileCoordCenter(C.tileCoord),M])),void 0!==l&&l(C)):t.useTile(F,T,I,s));t.updateCacheSize(w,s)}},fT=class UDt extends TDt{constructor(e){super(e)}createRenderer(){return new VDt(this)}};function _de(n,e,t,i){return void 0!==i?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function oy(n,e,t){return n+"/"+e+"/"+t}function yde(n){return oy(n[0],n[1],n[2])}const wde=class qDt extends class GDt{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Ss(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Ss(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ss(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const i=function WDt(n){return n.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(r){r.tileCoord[0]!==i&&(this.remove(yde(r.tileCoord)),r.release())}.bind(this))}},KDt=[0,0,0],Cde=class XDt{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,Ss(function ewt(n,e,t){const i=e||H5;return n.every(function(r,s){if(0===s)return!0;const o=i(n[s-1],r);return!(o>0||t&&0===o)})}(this.resolutions_,function(r,s){return s-r},!0),17),!e.origins)for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(t){if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}else t=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,Ss(this.origins_.length==this.resolutions_.length,20));const i=e.extent;void 0!==i&&!this.origin_&&!this.origins_&&(this.origin_=V5(i)),Ss(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,Ss(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:256,Ss(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(r,s){const o=new vde(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,c=null,l=e[0]-1;for(2===this.zoomFactor_?(o=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);l>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),s=bm(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(c,l,i),t(l,s))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const s=2*e[1],o=2*e[2];return bm(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return bm(s,o,s,o,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),l=Math.floor(s*c),u=Math.floor(o*c);return t<r?bm(l,l,u,u,i):bm(l,Math.floor(c*(s+1))-1,u,Math.floor(c*(o+1))-1,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),o=r4(this.getTileSize(e),this.tmpSize_);return Qu(r[0]+t.minX*o[0]*s,r[1]+t.minY*o[1]*s,r[0]+(t.maxX+1)*o[0]*s,r[1]+(t.maxY+1)*o[1]*s,i)}getTileRangeForExtentAndZ(e,t,i){const r=KDt;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);const s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),bm(s,r[1],o,r[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=r4(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=r4(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r;return Qu(o,a,o+s[0]*r,a+s[1]*r,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),c=this.getOrigin(o),l=r4(this.getTileSize(o),this.tmpSize_);let u=a*(e-c[0])/i/l[0],f=a*(c[1]-t)/i/l[1];return r?(u=GS(u,5)-1,f=GS(f,5)-1):(u=US(u,5),f=US(f,5)),_de(o,u,f,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),c=r4(this.getTileSize(i),this.tmpSize_);let l=(e-o[0])/a/c[0],u=(o[1]-t)/a/c[1];return r?(l=GS(l,5)-1,u=GS(u,5)-1):(l=US(l,5),u=US(u,5)),_de(i,l,u,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){return s2(hz(this.resolutions_,e,t||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Bue(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}};function xde(n){let e=n.getDefaultTileGrid();return e||(e=function eIt(n,e,t,i){return function ZDt(n,e,t,i){i=void 0!==i?i:"top-left";const r=bde(n,e,t);return new Cde({extent:n,origin:ywt(n,i),resolutions:r,tileSize:t})}(nV(n),e,t,i)}(n),n.setDefaultTileGrid(e)),e}function bde(n,e,t,i){e=void 0!==e?e:42,t=r4(void 0!==t?t:256);const r=Wu(n),s=ma(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let c=0;c<o;++c)a[c]=i/Math.pow(2,c);return a}function nV(n){let e=(n=Ka(n)).getExtent();if(!e){const t=180*Q5.degrees/n.getMetersPerUnit();e=Qu(-t,-t,t,t)}return e}class nIt extends e4{constructor(e,t){super(e),this.tile=t}}const iIt=class tIt extends h0e{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&r4(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new wde(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let a,c,l,o=!0;for(let u=i.minX;u<=i.maxX;++u)for(let f=i.minY;f<=i.maxY;++f)c=oy(t,u,f),l=!1,s.containsKey(c)&&(a=s.get(c),l=2===a.getState(),l&&(l=!1!==r(a))),l||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(e,t,i,r,s){return or()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:xde(e)}getTileCacheForProjection(e){const t=this.getProjection();return Ss(null===t||j5(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=r4(r.getTileSize(e),this.tmpSize);return 1==s?o:function Uxt(n,e,t){return void 0===t&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=void 0!==t?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=function YDt(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=nV(t);if(kS(s,r))return e;{const o=ma(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}}(i,e,t)),function $Dt(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return!s||s.containsXY(i,r)}(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}};function rIt(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,c){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=e.getFullTileRange(o[0]);return Ss(u,55),(u.getHeight()-o[2]-1).toString()})}}class iV extends iIt{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===iV.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=br(t),r=t.getState();let s;1==r?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=3==r?"tileloaderror":2==r?"tileloadend":void 0),null!=s&&this.dispatchEvent(new nIt(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=function aIt(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function sIt(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=rIt(n[r],e);return function oIt(n){return 1===n.length?n[0]:function(e,t,i){if(e){const r=function jDt(n){return(n[1]<<n[0])+n[2]}(e),s=o6(r,n.length);return n[s](e,t,i)}}}(i)}(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=oy(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const cIt=iV;function uIt(n,e){n.getImage().src=e}const hIt=class lIt extends cIt{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:uIt,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:fde,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!j5(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!j5(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||j5(t,e)))return this.tileGrid;{const i=br(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=xde(e)),this.tileGridForProjection[i]}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||j5(t,e))return this.tileCache;{const i=br(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new wde(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(e,t,i,r,s,o){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,s),l=c?this.tileUrlFunction(c,r,s):void 0,u=new this.tileClass(a,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener("change",this.handleTileChange.bind(this)),u}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||j5(o,s))return this.getTileInternal(e,t,i,r,o||s);{const a=this.getTileCacheForProjection(s),c=[e,t,i];let l;const u=yde(c);a.containsKey(u)&&(l=a.get(u));const f=this.getKey();if(l&&l.key==f)return l;{const p=this.getTileGridForProjection(o),g=this.getTileGridForProjection(s),_=this.getTileCoordForTileUrlFunction(c,s),y=new eV(o,p,s,g,c,_,this.getTilePixelRatio(r),this.getGutter(),function(w,C,b,M){return this.getTileInternal(w,C,b,M,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return y.key=f,l?(y.interimTile=l,y.refreshInterimChain(),a.replace(u,y)):a.set(u,y),y}}}getTileInternal(e,t,i,r,s){let o=null;const a=oy(e,t,i),c=this.getKey();if(this.tileCache.containsKey(a)){if(o=this.tileCache.get(a),o.key!=c){const l=o;o=this.createTile_(e,t,i,r,s,c),o.interimTile=0==l.getState()?l.interimTile:l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(e,t,i,r,s,c),this.tileCache.set(a,o);return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=Ka(e);if(i){const r=br(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}},dT=class fIt extends hIt{constructor(e){const t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:function JDt(n){const e=n||{},t=e.extent||Ka("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:bde(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Cde(i)}({extent:nV(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}},gIt=class pIt extends dT{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX,zDirection:e.zDirection})}};var y3=(()=>(function(n){n.OSM="OSM",n.Google="Google",n.OSMSatellite="OSMSatellite",n.GoogleSatellite="GoogleSatellite"}(y3||(y3={})),y3))();let Mde=(()=>{class n{constructor(t){this.cookieService=t,this.cookieKey="ol-basemap",this.basemap$=new go(y3.OSM)}getStore(){const t=this.cookieService.get(this.cookieKey),i=JSON.parse(t);""===t&&!(i in y3)||this.basemap$.next(i)}setStore(){this.cookieService.set(this.cookieKey,JSON.stringify(this.basemap$.value))}getBaseLayers(){return this.getStore(),[new fT({visible:this.basemap$.value===y3.OSM,properties:{basemap:!0,key:y3.OSM},source:new gIt}),new fT({visible:this.basemap$.value===y3.OSMSatellite,properties:{basemap:!0,key:y3.OSMSatellite},source:new dT({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19})}),new fT({visible:this.basemap$.value===y3.Google,properties:{basemap:!0,key:y3.Google},source:new dT({url:"http://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}"})}),new fT({visible:this.basemap$.value===y3.GoogleSatellite,properties:{basemap:!0,key:y3.GoogleSatellite},source:new dT({url:"http://mt0.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}"})})]}nextBasemap(){const t=Object.values(y3),i=t.indexOf(this.basemap$.value);this.basemap$.next(t[(i+1)%t.length]),this.map.getLayers().getArray().filter(r=>!0===r.getProperties().basemap).forEach(r=>r.setVisible(r.getProperties().key===this.basemap$.value)),this.setStore()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ede=[0,0,0,0],Mm=[];class sV extends e4{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}function AIt(n,e){return n.index-e.index}function Tde(n,e,t){const i=e.geometry;if("Circle"===i.getType()){let s=i;if(1===e.index){const o=u6();o&&(s=s.clone().transform(o,t));const a=Zg(s.getCenter(),o2(n)),c=Math.sqrt(a)-s.getRadius();return c*c}}const r=o2(n);return Mm[0]=o2(e.segment[0]),Mm[1]=o2(e.segment[1]),function kwt(n,e){return Zg(n,W4e(n,e))}(r,Mm)}function Lde(n,e,t){const i=e.geometry;if("Circle"===i.getType()&&1===e.index){let s=i;const o=u6();return o&&(s=s.clone().transform(o,t)),E_(s.getClosestPoint(o2(n)))}const r=o2(n);return Mm[0]=o2(e.segment[0]),Mm[1]=o2(e.segment[1]),E_(W4e(r,Mm))}function vIt(){const n=gO();return function(e,t){return n.Point}}const Dde=class mIt extends wf{constructor(e){let t;if(super(e),this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:Uue,this.defaultDeleteCondition_=function(i){return function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(i)&&Nue(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:om,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new xO,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new lm({source:new P_({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:vIt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,e.features?t=e.features:e.source&&(this.source_=e.source,t=new O1(this.source_.getFeatures()),this.source_.addEventListener("addfeature",this.handleSourceAdd_.bind(this)),this.source_.addEventListener("removefeature",this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener("add",this.handleFeatureAdd_.bind(this)),this.features_.addEventListener("remove",this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===e.snapToPointer?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),e.addEventListener("change",this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new O1;const i=this.featuresBeingModified_.getArray();for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0,c=o.length;a<c;++a){const l=o[a].feature;l&&!i.includes(l)&&this.featuresBeingModified_.push(l)}}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new sV("modifystart",this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener("change",this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(r){e===r.feature&&i.push(r)});for(let r=i.length-1;r>=0;--r){const s=i[r];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),r={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),r)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r],a={feature:e,geometry:t,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length-1;r<s;++r){const o=i.slice(r,r+2),a={feature:e,geometry:t,index:r,segment:o};this.rBush_.insert(Q4(o),a)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length-1;a<c;++a){const l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:l};this.rBush_.insert(Q4(l),u)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length-1;a<c;++a){const l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:l};this.rBush_.insert(Q4(l),u)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length;a<c;++a){const l=o[a];for(let u=0,f=l.length-1;u<f;++u){const p=l.slice(u,u+2),g={feature:e,geometry:t,depth:[a,r],index:u,segment:p};this.rBush_.insert(Q4(p),g)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),r={feature:e,geometry:t,index:0,segment:[i,i]},s={feature:e,geometry:t,index:1,segment:[i,i]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.rBush_.insert(PS(i),r);let a=t;const c=u6();if(c&&this.getMap()){const l=this.getMap().getView().getProjection();a=a.clone().transform(c,l),a=Hue(a).transform(l,c)}this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let r=0;r<i.length;++r){const s=i[r];(0,this.SEGMENT_WRITERS_[s.getType()])(e,s)}}createOrUpdateVertexFeature_(e,t,i){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new G4(new n4(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",i),r}handleEvent(e){if(!e.originalEvent)return!0;let t;return this.lastPointerEvent_=e,!e.map.getView().getInteracting()&&e.type==zs.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=zs.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==zs.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],r=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],c=a[0],l=c.feature;i.includes(l)||i.push(l);const u=c.geometry;r.includes(u)||r.push(u);const f=c.depth;let p;const g=c.segment,_=a[1];for(;t.length<u.getStride();)t.push(g[_][t.length]);switch(u.getType()){case"Point":p=t,g[0]=t,g[1]=t;break;case"MultiPoint":p=u.getCoordinates(),p[c.index]=t,g[0]=t,g[1]=t;break;case"LineString":p=u.getCoordinates(),p[c.index+_]=t,g[_]=t;break;case"MultiLineString":case"Polygon":p=u.getCoordinates(),p[f[0]][c.index+_]=t,g[_]=t;break;case"MultiPolygon":p=u.getCoordinates(),p[f[1]][f[0]][c.index+_]=t,g[_]=t;break;case"Circle":if(g[0]=t,g[1]=t,0===c.index)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;const y=e.map.getView().getProjection();let w=$S(o2(u.getCenter()),o2(t));const C=u6();if(C){const b=u.clone().transform(C,y);b.setRadius(w),w=b.transform(y,C).getRadius()}u.setRadius(w),this.changingFeature_=!1}}p&&this.setGeometryCoordinates_(u,p)}this.createOrUpdateVertexFeature_(t,i,r)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){const r=e.map.getView().getProjection(),s=[],o=i.getGeometry().getCoordinates(),a=Q4([o]),c=this.rBush_.getInExtent(a),l={};c.sort(AIt);for(let u=0,f=c.length;u<f;++u){const p=c[u],g=p.segment;let _=br(p.geometry);const y=p.depth;if(y&&(_+="-"+y.join("-")),l[_]||(l[_]=new Array(2)),"Circle"!==p.geometry.getType()||1!==p.index)if(!ju(g[0],o)||l[_][0])if(!ju(g[1],o)||l[_][1])br(g)in this.vertexSegments_&&!l[_][0]&&!l[_][1]&&this.insertVertexCondition_(e)&&s.push(p);else{if(l[_][0]&&0===l[_][0].index){let w=p.geometry.getCoordinates();switch(p.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":w=w[y[1]];case"Polygon":if(p.index!==w[y[0]].length-2)continue}}this.dragSegments_.push([p,1]),l[_][1]=p}else this.dragSegments_.push([p,0]),l[_][0]=p;else ju(Lde(t,p,r),o)&&!l[_][0]&&(this.dragSegments_.push([p,0]),l[_][0]=p)}s.length&&this.willModifyFeatures_(e,[s]);for(let u=s.length-1;u>=0;--u)this.insertVertex_(s[u],o)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],r=i.geometry;if("Circle"===r.getType()){const s=r.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update(PS(s),o);let c=r;const l=u6();if(l){const u=e.map.getView().getProjection();c=c.clone().transform(l,u),c=Hue(c).transform(u,l)}this.rBush_.update(c.getExtent(),a)}else this.rBush_.update(Q4(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new sV("modifyend",this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,i){const r=i||t.getCoordinateFromPixel(e),s=t.getView().getProjection(),o=function(l,u){return Tde(r,l,s)-Tde(r,u,s)};let a,c;if(this.hitDetection_){const l="object"==typeof this.hitDetection_?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(u,f,p)=>{if("Point"===(p=p||u.getGeometry()).getType()&&this.features_.getArray().includes(u)){c=p;const g=p.getFlatCoordinates().slice(0,2);a=[{feature:u,geometry:p,segment:[g,g]}]}return!0},{layerFilter:l})}if(!a){const f=oE(FS(h6(PS(r,Ede)),t.getView().getResolution()*this.pixelTolerance_,Ede));a=this.rBush_.getInExtent(f)}if(a&&a.length>0){const l=a.sort(o)[0],u=l.segment;let f=Lde(r,l,s);const p=t.getPixelFromCoordinate(f);let g=$S(e,p);if(c||g<=this.pixelTolerance_){const _={};if(_[br(u)]=!0,this.snapToPointer_||(this.delta_[0]=f[0]-r[0],this.delta_[1]=f[1]-r[1]),"Circle"===l.geometry.getType()&&1===l.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry]);else{const y=t.getPixelFromCoordinate(u[0]),w=t.getPixelFromCoordinate(u[1]),C=Zg(p,y),b=Zg(p,w);g=Math.sqrt(Math.min(C,b)),this.snappedToVertex_=g<=this.pixelTolerance_,this.snappedToVertex_&&(f=C>b?u[1]:u[0]),this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry]);const M={};M[br(l.geometry)]=!0;for(let T=1,I=a.length;T<I;++T){const F=a[T].segment;if(!(ju(u[0],F[0])&&ju(u[1],F[1])||ju(u[0],F[1])&&ju(u[1],F[0])))break;{const P=br(a[T].geometry);P in M||(M[P]=!0,_[br(F)]=!0)}}}return void(this.vertexSegments_=_)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,r=e.feature,s=e.geometry,o=e.depth,a=e.index;let c;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":case"Polygon":c=s.getCoordinates(),c[o[0]].splice(a+1,0,t);break;case"MultiPolygon":c=s.getCoordinates(),c[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":c=s.getCoordinates(),c.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,c);const l=this.rBush_;l.remove(e),this.updateSegmentIndices_(s,a,o,1);const u={segment:[i[0],t],feature:r,geometry:s,depth:o,index:a};l.insert(Q4(u.segment),u),this.dragSegments_.push([u,1]);const f={segment:[t,i[1]],feature:r,geometry:s,depth:o,index:a+1};l.insert(Q4(f.segment),f),this.dragSegments_.push([f,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=zs.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new sV("modifyend",this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let r,s,o,a,c,l,u,f,p,g,_,i=!1;for(c=e.length-1;c>=0;--c)o=e[c],g=o[0],_=br(g.feature),g.depth&&(_+="-"+g.depth.join("-")),_ in t||(t[_]={}),0===o[1]?(t[_].right=g,t[_].index=g.index):1==o[1]&&(t[_].left=g,t[_].index=g.index+1);for(_ in t){switch(p=t[_].right,u=t[_].left,l=t[_].index,f=l-1,g=void 0!==u?u:p,f<0&&(f=0),a=g.geometry,s=a.getCoordinates(),r=s,i=!1,a.getType()){case"MultiLineString":s[g.depth[0]].length>2&&(s[g.depth[0]].splice(l,1),i=!0);break;case"LineString":s.length>2&&(s.splice(l,1),i=!0);break;case"MultiPolygon":r=r[g.depth[1]];case"Polygon":r=r[g.depth[0]],r.length>4&&(l==r.length-1&&(l=0),r.splice(l,1),i=!0,0===l&&(r.pop(),r.push(r[0]),f=r.length-1))}if(i){this.setGeometryCoordinates_(a,s);const y=[];if(void 0!==u&&(this.rBush_.remove(u),y.push(u.segment[0])),void 0!==p&&(this.rBush_.remove(p),y.push(p.segment[1])),void 0!==u&&void 0!==p){const w={depth:g.depth,feature:g.feature,geometry:g.geometry,index:f,segment:y};this.rBush_.insert(Q4(w.segment),w)}this.updateSegmentIndices_(a,l,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,r){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(void 0===i||void 0===s.depth||n6(s.depth,i))&&s.index>t&&(s.index+=r)})}};class pT extends f6{constructor(e,t,i){super(),void 0!==i&&void 0===t?this.setFlatCoordinates(i,e):this.setCenterAndRadius(e,t=t||0,i)}clone(){const e=new pT(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],c=o*o+a*a;if(c<r){if(0===c)for(let l=0;l<this.stride;++l)i[l]=s[l];else{const l=this.getRadius()/Math.sqrt(c);i[0]=s[0]+l*o,i[1]=s[1]+l*a;for(let u=2;u<this.stride;++u)i[u]=s[u]}return i.length=this.stride,c}return r}containsXY(e,t){const i=this.flatCoordinates,r=e-i[0],s=t-i[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return Qu(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){if(Pl(e,this.getExtent())){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]||_z(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+i;for(let s=1;s<t;++s)r[t+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=bue(r,0,e);r[s++]=r[0]+t;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(Uz(i,0,i.length,r,e,t,i)),this.changed()}translate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(yue(i,0,i.length,r,e,t,i)),this.changed()}}const _It=pT;class mT extends e4{constructor(e,t){super(e),this.feature=t}}function AT(n,e){return mf(n[0],n[1],e[0],e[1])}function Sm(n,e){const t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function vT(n,e,t){let i,r;e<t?(i=e,r=t):(i=t,r=e);const s=Math.ceil(i),o=Math.floor(r);if(s>o)return AT(Em(n,i),Em(n,r));let a=0;i<s&&(a+=AT(Em(n,i),Sm(n,s))),o<r&&(a+=AT(Sm(n,o),Em(n,r)));for(let c=s;c<o-1;++c)a+=AT(Sm(n,c),Sm(n,c+1));return a}function Ide(n,e,t){if(e instanceof Tf)_T(n,e.getCoordinates(),!1,t);else if(e instanceof VN){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)_T(n,i[r],!1,t)}else if(e instanceof Y5){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)_T(n,i[r],!0,t)}else if(e instanceof QN){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length;a<c;++a)_T(n,o[a],!0,t)}}else if(e instanceof ON){const i=e.getGeometries();for(let r=0;r<i.length;++r)Ide(n,i[r],t)}}const oV={index:-1,endIndex:NaN};function _T(n,e,t,i){const r=n[0],s=n[1];for(let o=0,a=e.length-1;o<a;++o){const u=Bde(r,s,e[o],e[o+1]);if(0===u.squaredDistance){const f=o+u.along;return void i.push({coordinates:e,ring:t,startIndex:f,endIndex:f})}}}const aV={along:0,squaredDistance:0};function Bde(n,e,t,i){const r=t[0],s=t[1],c=i[0]-r,l=i[1]-s;let u=0,f=r,p=s;return(0!==c||0!==l)&&(u=s2(((n-r)*c+(e-s)*l)/(c*c+l*l),0,1),f+=c*u,p+=l*u),aV.along=u,aV.squaredDistance=VS(mf(n,e,f,p),10),aV}function Em(n,e){const t=n.length;let i=Math.floor(e);const r=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const o=n[i],a=o[0],c=o[1],l=n[s];return[a+(l[0]-a)*r,c+(l[1]-c)*r]}function xIt(){const n=gO();return function(e,t){return n[e.getGeometry().getType()]}}const Rde=class CIt extends wf{constructor(e){const t=e;t.stopDown||(t.stopDown=jg),super(t),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function bIt(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:K0,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const r=this.mode_;if("Circle"===r)i=function(s,o,a){const c=o||new _It([NaN,NaN]),l=o2(s[0]),u=Zg(l,o2(s[s.length-1]));c.setCenterAndRadius(l,Math.sqrt(u),this.geometryLayout_);const f=u6();return f&&c.transform(a,f),c};else{let s;"Point"===r?s=n4:"LineString"===r?s=Tf:"Polygon"===r&&(s=Y5),i=function(o,a,c){return a?a.setCoordinates("Polygon"===r?o[0].length?[o[0].concat([o[0][0]])]:[]:o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new lm({source:new P_({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:xIt(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:oO,this.freehandCondition_=e.freehand?om:e.freehandCondition?e.freehandCondition:aO,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener("active",this.updateState_)}setTrace(e){let t;t=e?!0===e?om:e:sO,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){"contextmenu"===e.originalEvent.type&&e.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);let t=e.type===zs.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===zs.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===zs.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===zs.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===zs.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===zs.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===zs.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new yf(zs.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active)return void this.deactivateTrace_();const t=this.getMap(),s=Q4([t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_])]),o=this.traceSource_.getFeaturesInExtent(s);if(0===o.length)return;const a=function yIt(n,e){const t=[];for(let i=0;i<e.length;++i)Ide(n,e[i].getGeometry(),t);return t}(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex;i===e.startIndex<=t?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const r=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-r+1}else{const r=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=r-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const r=[];if(t<i){const s=Math.ceil(t);let o=Math.floor(i);o===i&&(o-=1);for(let a=s;a<=o;++a)r.push(Sm(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(i);o===i&&(o+=1);for(let a=s;a>=o;--a)r.push(Sm(e.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const t=this.traceState_;if(!t.active||-1===t.targetIndex&&$S(t.startPx,e.pixel)<this.snapTolerance_)return;const i=function wIt(n,e,t,i){const r=n[0],s=n[1];let o=1/0,a=-1,c=NaN;for(let f=0;f<e.targets.length;++f){const p=e.targets[f],g=p.coordinates;let y,_=1/0;for(let w=0;w<g.length-1;++w){const M=Bde(r,s,g[w],g[w+1]);M.squaredDistance<_&&(_=M.squaredDistance,y=w+M.along)}_<o&&(o=_,p.ring&&e.targetIndex===f&&(p.endIndex>p.startIndex?y<p.startIndex&&(y+=g.length):p.endIndex<p.startIndex&&y>p.startIndex&&(y-=g.length)),c=y,a=f)}const l=e.targets[a];let u=l.ring;if(e.targetIndex===a&&u){const f=Em(l.coordinates,c);$S(t.getPixelFromCoordinate(f),e.startPx)>i&&(u=!1)}if(u){const f=l.coordinates,p=f.length,g=l.startIndex,_=c;if(g<_){const y=vT(f,g,_);vT(f,g,_-p)<y&&(c-=p)}else{const y=vT(f,g,_);vT(f,g,_+p)<y&&(c+=p)}}return oV.index=a,oV.endIndex=c,oV}(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(-1!==t.targetIndex){const c=t.targets[t.targetIndex];this.removeTracedCoordinates_(c.startIndex,c.endIndex)}const a=t.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else this.addOrRemoveTracedCoordinates_(t.targets[t.targetIndex],i.endIndex);t.targetIndex=i.index;const r=t.targets[t.targetIndex];r.endIndex=i.endIndex;const s=Em(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||"Point"===this.mode_)&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,r=t[0]-i[0],s=t[1]-i[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(e),this.modifyDrawing_(e.coordinate)):this.createOrUpdateSketchPoint_(e.coordinate.slice())}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_];const o=this.mode_;if("Point"===o)i=!0;else if("Circle"===o)i=2===this.sketchCoords_.length;else if("LineString"===o)r=!t&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],s=t?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let c=0,l=s.length;c<l;c++){const u=s[c],f=a.getPixelFromCoordinate(u),p=e[0]-f[0],g=e[1]-f[1],_=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(p*p+g*g)<=_,i){this.finishCoordinate_=u;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new G4(new n4(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new G4);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new Tf(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=aE(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,"Point"===this.mode_?this.sketchCoords_=e.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new G4(new Tf(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new G4,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new mT("drawstart",this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),r=t.getView().getProjection(),s=aE(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);"Point"===this.mode_?a=this.sketchCoords_:"Polygon"===this.mode_?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),"Polygon"===i.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let r,s;const o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):"Polygon"===o&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),r&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<e;++s){let o;if("LineString"===r||"Circle"===r){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,i),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if("Polygon"===r){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const c=o[o.length-2].slice();o[o.length-1]=c,this.createOrUpdateSketchPoint_(c)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,i)}if(1===o.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const i=e.getGeometry(),r=this.getMap().getView().getProjection();"LineString"===this.mode_?(t.pop(),this.geometryFunction_(t,i,r)):"Polygon"===this.mode_&&(t[0].pop(),this.geometryFunction_(t,i,r),t=i.getCoordinates()),"MultiPoint"===this.type_?e.setGeometry(new GN([t])):"MultiLineString"===this.type_?e.setGeometry(new VN([t])):"MultiPolygon"===this.type_&&e.setGeometry(new QN([t])),this.dispatchEvent(new mT("drawend",e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new mT("drawabort",e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;let r;if(i&&this.startDrawing_(e[0]),"LineString"===t||"Circle"===t)r=this.sketchCoords_;else{if("Polygon"!==t)return;r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&r.shift(),r.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new G4(new n4(r)),this.updateSketchFeatures_(),this.dispatchEvent(new mT("drawstart",this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}};var q4=(()=>(function(n){n.Length="LineString",n.Area="Polygon",n.Point="Point"}(q4||(q4={})),q4))();let Fde=(()=>{class n{constructor(){this.DrawType=q4,this.active=!1,this.showSegments=!0,this.clearPrevious=!0,this.drawType=q4.Length,this.segmentStyles=[],this.source=new P_,this.tip="",this.halfAreaTip="Click to start",this.subscriptions=[],this.style=new zl({fill:new Aa({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Tc({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new J5({radius:5,stroke:new Tc({color:"rgba(0, 0, 0, 0.7)"}),fill:new Aa({color:"rgba(255, 255, 255, 0.2)"})})}),this.labelStyle=new zl({text:new m6({font:"14px Calibri,sans-serif",fill:new Aa({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Aa({color:"rgba(0, 0, 0, 0.7)"}),padding:[3,3,3,3],textBaseline:"bottom",offsetY:-15}),image:new L_({radius:8,points:3,angle:Math.PI,displacement:[0,8],fill:new Aa({color:"rgba(0, 0, 0, 0.7)"})})}),this.tipStyle=new zl({text:new m6({font:"12px Calibri,sans-serif",fill:new Aa({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Aa({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),this.modifyStyle=new zl({image:new J5({radius:5,stroke:new Tc({color:"rgba(0, 0, 0, 0.7)"}),fill:new Aa({color:"rgba(0, 0, 0, 0.4)"})}),text:new m6({text:"Drag to modify",font:"12px Calibri,sans-serif",fill:new Aa({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Aa({color:"rgba(0, 0, 0, 0.7)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),this.segmentStyle=new zl({text:new m6({font:"12px Calibri,sans-serif",fill:new Aa({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Aa({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textBaseline:"bottom",offsetY:-12}),image:new L_({radius:6,points:3,angle:Math.PI,displacement:[0,7],fill:new Aa({color:"rgba(0, 0, 0, 0.4)"})})}),this.modify=new Dde({source:this.source,style:this.modifyStyle})}get type(){return this.drawType===q4.Area?"area":"distance"}get idleTip(){return`Start measurement of ${this.type}`}get activeTip(){return`Double click to close ${this.type}`}init(t){this.map=t,this.addVectorLayers()}nextType(){this.drawType=this.drawType===q4.Area?q4.Length:q4.Area,this.source.clear(),this.activate(!1)}addVectorLayers(){this.vectorLayer=new lm({source:this.source,style:t=>this.styleFunction(t),zIndex:9990,className:"measureTool",properties:{key:"measureTool"}}),this.map.addLayer(this.vectorLayer)}activate(t){void 0===t&&(t=!this.active),t?(this.stopMeasure(),this.active=!0,this.segmentStyles=[this.segmentStyle],this.draw=new Rde({geometryName:"measure",source:this.source,type:this.drawType,style:i=>this.styleFunction(i),condition:i=>1===i.activePointers[0].buttons}),this.subscriptions.push(ic(document,"mousedown",{passive:!1}).pipe(jo(i=>2===i.buttons)).subscribe(i=>{console.log(this.segmentStyles.length),this.segmentStyles.length-1==0?this.draw.abortDrawing():this.draw.finishDrawing()}),ic(this.draw,"drawstart").subscribe(()=>{this.modify.setActive(!1),this.clearPrevious&&this.source.clear()}),ic(this.draw,"drawend").subscribe(()=>{this.modify.setActive(!0),this.modifyStyle.setGeometry(this.tipPoint),this.map.once("pointermove",()=>{this.modifyStyle.setGeometry(void 0)}),this.tip=this.idleTip})),this.map.addInteraction(this.modify),this.map.addInteraction(this.draw),this.tip=this.idleTip):(this.stopMeasure(),this.active=!1),this.modify.setActive(this.active),this.activateOtherInteractions()}stopMeasure(){this.map.removeInteraction(this.modify),this.map.removeInteraction(this.draw),this.source.clear(),this.subscriptions.forEach(t=>t.unsubscribe())}activateOtherInteractions(){this.map.getInteractions().getArray().filter(t=>t instanceof p0e||t instanceof Dde||t instanceof Rde).filter(t=>t!==this.draw&&t!==this.modify).forEach(t=>{t.setActive(!this.active)})}formatLength(t){const i=aue(t);return i>100?Math.round(i/1e3*100)/100+" km":Math.round(100*i)/100+" m"}formatArea(t){const i=cue(t);return i>1e4?Math.round(i/1e6*100)/100+" km\xb2":Math.round(100*i)/100+" m\xb2"}styleFunction(t){const i=[this.style],r=t.getGeometry(),s=r.getType();let o,a,c;if(s===q4.Area?(o=r.getInteriorPoint(),a=this.formatArea(r),c=new Tf(r.getCoordinates()[0]),this.tip=c.getCoordinates().length<4?this.halfAreaTip:this.activeTip):s===q4.Length&&(o=new n4(r.getLastCoordinate()),a=this.formatLength(r),c=r,this.tip=this.activeTip),this.showSegments&&c){let l=0;c.forEachSegment((u,f)=>{const p=new Tf([u,f]),g=`${this.formatLength(p)}`;this.segmentStyles.length-1<l&&this.segmentStyles.push(this.segmentStyle.clone());const _=new n4(p.getCoordinateAt(.5));this.segmentStyles[l].setGeometry(_),this.segmentStyles[l].getText().setText(g),i.push(this.segmentStyles[l]),l++})}return a&&(this.labelStyle.setGeometry(o),this.labelStyle.getText().setText(a),i.push(this.labelStyle)),this.tip&&s===q4.Point&&!this.modify.getOverlay().getSource().getFeatures().length&&(this.tipPoint=r,this.tipStyle.getText().setText(this.tip),i.push(this.tipStyle)),i}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kde=(()=>{class n{constructor(t){this.cookieService=t,this.cookieKey="ol-view",this.subscriptions=[],this.center=[0,0],this.view=new p6({center:this.center,zoom:18}),this.centerAndZoom=this.getStore(),this.subscriptions.push(ic(this.view,"change").subscribe(()=>this.setStore()))}set centerAndZoom(t){t.center&&this.view.setCenter(t.center),t.zoom&&this.view.setZoom(t.zoom)}get centerAndZoom(){return{center:this.view.getCenter(),zoom:this.view.getZoom()}}onDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getStore(){const t=this.cookieService.get(this.cookieKey),i=JSON.parse(t);return""===t?{center:this.center,zoom:15}:i}setStore(){this.cookieService.set(this.cookieKey,JSON.stringify(this.centerAndZoom))}animate(t,i=500){const r={duration:i};void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.center&&(r.center=t.center),this.view.animate(r)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MIt=(()=>{class n{constructor(t,i,r,s){this.olViewService=t,this.olBaseMapService=i,this.olMeasureService=r,this.houseService=s,this.basemap$=this.olBaseMapService.basemap$.pipe()}ngAfterViewInit(){}zoomToHouse(){const{lat:t,lng:i}=this.houseService.house$.value.orientation,r=pue([i,t]);this.olViewService.animate({center:r,zoom:16})}}return n.\u0275fac=function(t){return new(t||n)(G(kde),G(Mde),G(Fde),G(qo))},n.\u0275cmp=On({type:n,selectors:[["app-map-buttons"]],decls:17,vars:4,consts:[["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],["mat-mini-fab","","color","accent",3,"click"],[2,"font-family","Material Icons Outlined"]],template:function(t,i){1&t&&(O(0,"div",0)(1,"button",1),mn("click",function(){return i.zoomToHouse()}),O(2,"label"),V(3," House "),N(),O(4,"mat-icon"),V(5,"house"),N()(),O(6,"button",1),mn("click",function(){return i.olMeasureService.activate()}),O(7,"label"),V(8," Measurements "),N(),O(9,"mat-icon",2),V(10,"square_foot"),N()(),O(11,"button",1),mn("click",function(){return i.olBaseMapService.nextBasemap()}),O(12,"label"),V(13),wa(14,"async"),N(),O(15,"mat-icon",2),V(16,"map"),N()()()),2&t&&(Ve("@slideInOut",void 0),ae(13),si(" ",Y1(14,2,i.basemap$)," "))},dependencies:[D8,Cx,Cd,F8,xd,sd],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:50px;z-index:9999;right:50px}[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);opacity:1}.active[_ngcontent-%COMP%]{background-color:var(--accent-50)!important;box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important;color:#1b1b1b!important}.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{opacity:.4}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}.construction[_ngcontent-%COMP%]{height:16px;width:16px}.construction[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{right:18px!important;top:6px;line-height:0}.dev[_ngcontent-%COMP%]{color:#613d1a}"],data:{animation:[Vk,Lne]}}),n})();const SIt=["mapEl"],EIt=[new zl({stroke:new Tc({color:"rgba(0, 0, 0, 0.5)",width:2}),fill:new Aa({color:"rgba(30, 30, 30, 0.5)"}),zIndex:1})];let TIt=(()=>{class n{constructor(t,i,r,s,o,a){this.zone=t,this.houseService=i,this.olBaseMapService=r,this.olMeasureService=s,this.olViewService=o,this.colorService=a,this.house=this.houseService.house$.value,this.subscriptions=[],this.origin=[1519995,7542140],this.angle=0,this.roofCenter=new n4(this.origin),this.houseFeature=new G4({roofCenter:this.roofCenter,roofCenterShow:!1}),this.houseLayer=new lm({source:new P_({features:[this.houseFeature]}),style:EIt})}ngOnDestroy(){[this.olViewService].forEach(t=>t.onDestroy()),this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.getHousePolygon(),this.layers=[...this.olBaseMapService.getBaseLayers(),this.houseLayer],this.zone.runOutsideAngular(()=>this.initMap())}fromLocalToLonLat(t){var i=6378.137,r=Math.PI;const[s,o]=function CCt(n,e){const t=S_(n,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=o6(i+180,360)-180),t}(this.origin),a=o+t[1]/i*(180/r)/1e3;return pue([s+t[0]/i*(180/r)/Math.cos(o*r/180)/1e3,a])}getHousePolygon(){this.house=this.houseService.house$.value;const r=this.house.partsFlatten.filter(l=>l instanceof Jn&&l.type===Fn.outer).filter(l=>l.floor===tt.all).flatMap(l=>l.sides[ot.out]).map(l=>((n,e,t)=>{const[i,r]=n,[s,o]=e;var a=Math.PI/180*180,c=Math.cos(a),l=Math.sin(a);return[c*(i-s)+l*(r-o)+s,c*(r-o)-l*(i-s)+o]})(l,this.house.centerHouse)).map(l=>this.fromLocalToLonLat(l));r.push(r[0]);const s=new ide;var a=function OLt(n,e){if(!function tMt(n){return!!n&&n.constructor===Object}(e=e||{}))throw new Error("options is invalid");var t=e.propertyName;!function lMt(n,e,t){if(!n)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!n||"FeatureCollection"!==n.type)throw new Error("Invalid input to "+t+", FeatureCollection required");for(var i=0,r=n.features;i<r.length;i++){var s=r[i];if(!s||"Feature"!==s.type||!s.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!s.geometry||s.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+s.geometry.type)}}(n,"Polygon","dissolve");var i=[];if(!e.propertyName)return W0e(TO(Uhe.union.apply(null,n.features.map(function(c){return c.geometry.coordinates}))));var r={};!function _0e(n,e){if("Feature"===n.type)e(n,0);else if("FeatureCollection"===n.type)for(var t=0;t<n.features.length&&!1!==e(n.features[t],t);t++);}(n,function(c){Object.prototype.hasOwnProperty.call(r,c.properties[t])||(r[c.properties[t]]=[]),r[c.properties[t]].push(c)});for(var s=Object.keys(r),o=0;o<s.length;o++){var a=TO(Uhe.union.apply(null,r[s[o]].map(function(c){return c.geometry.coordinates})));a.properties[t]=s[o],i.push(a)}return W0e(um(i))}(um([np([r])]));const c=s.readFeatures(a)[0].getGeometry();this.houseFeature.setGeometry(c)}initMap(){this.map=new Wxt({view:this.olViewService.view,layers:this.layers,target:this.mapEl.nativeElement}),this.addInteractions(),this.olMeasureService.init(this.map),this.olBaseMapService.map=this.map,window.map=this.map}addInteractions(){const t=()=>Zs(Mne(a.getAngle())-90,-30,this.roofCenter.getCoordinates()),r=new p0e({style:(u,f)=>{const p=!0===this.houseFeature.getProperties().roofCenterShow,g=[new zl({stroke:new Tc({color:"rgba(0, 0, 0, 0.5)",width:5}),fill:new Aa({color:p?"rgba(255, 255, 255, 0)":"rgba(255, 255, 255, 0.9)"}),zIndex:2})];if(p){let _=[-25,25];(this.angle>90||this.angle<-90)&&(_=[25,-25]),g.push(new zl({image:new J5({radius:30/f,stroke:new Tc({color:"rgba(10, 10,10, 0.1)",width:2})}),geometry:"roofCenter",text:new m6({font:"14px sans-serif",overflow:!0,fill:new Aa({color:this.colorService.color[u9.primary]}),text:`${this.angle}\xb0`})}))}return g}}),s=new Ybt({features:r.getFeatures()}),o=(u,f)=>{if(!0===u.get("rotate-arrow"))return new zl({image:new J5({radius:14,stroke:new Tc({width:1,color:"rgba(200, 0, 0, 0.5)"}),fill:new Aa({color:"rgba(100, 100, 100, 0.5)"})}),stroke:new Tc({color:"rgba(0, 0, 0, 0.5)",width:3}),zIndex:1/0,text:new m6({offsetX:0,offsetY:1.5,text:"\u21bb",font:"900 20px Lucida Sans Unicode",rotation:Ci(this.angle||0)})})},a=new SDt({features:r.getFeatures(),style:o});this.map.addInteraction(r);const c=()=>{const u=this.houseFeature.getGeometry().getCoordinates()[0];this.origin=u[0];const f=new ide,p=qMt(np([u])),g=f.readFeatures(p)[0].getGeometry();this.roofCenter.setCoordinates(g.getCoordinates());const _=h1(u[0],u[1],1);this.angle=_},l=()=>{a.setAnchor(this.roofCenter.getCoordinates()),a.setAngle(0*Math.PI/180),a.arrowFeature_.getGeometry().setCoordinates(t())};this.subscriptions.push(ic(s,"translateend").subscribe(u=>{l()}),ic(this.houseFeature,"change").subscribe(u=>{c()}),ic(a,"rotatestart").subscribe(u=>{this.houseFeature.setProperties({roofCenterShow:!0})}),ic(a,"rotateend").subscribe(u=>{this.houseFeature.setProperties({roofCenterShow:!1})}),ic(r,"select").subscribe(u=>{u.selected[0]?(this.map.addInteraction(a),this.map.addInteraction(s),c(),l(),a.arrowFeature_.setStyle(o())):(this.map.removeInteraction(a),this.map.removeInteraction(s))}))}}return n.\u0275fac=function(t){return new(t||n)(G(sr),G(qo),G(Mde),G(Fde),G(kde),G(lq))},n.\u0275cmp=On({type:n,selectors:[["app-page-map"]],viewQuery:function(t,i){if(1&t&&Wo(SIt,5),2&t){let r;ir(r=rr())&&(i.mapEl=r.first)}},decls:3,vars:0,consts:[[1,"map"],["mapEl",""]],template:function(t,i){1&t&&rt(0,"div",0,1)(2,"app-map-buttons")},dependencies:[MIt],styles:['[_ngcontent-%COMP%]:root, [_nghost-%COMP%]{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position[_ngcontent-%COMP%]{top:8px;right:8px;position:absolute}.ol-scale-line[_ngcontent-%COMP%]{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner[_ngcontent-%COMP%]{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar[_ngcontent-%COMP%]{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner[_ngcontent-%COMP%]{display:flex}.ol-scale-step-marker[_ngcontent-%COMP%]{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text[_ngcontent-%COMP%]{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text[_ngcontent-%COMP%]{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar[_ngcontent-%COMP%]{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even[_ngcontent-%COMP%]{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd[_ngcontent-%COMP%]{background-color:var(--ol-background-color)}.ol-unsupported[_ngcontent-%COMP%]{display:none}.ol-viewport[_ngcontent-%COMP%], .ol-unselectable[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{all:unset}.ol-selectable[_ngcontent-%COMP%]{-webkit-touch-callout:default;-webkit-user-select:text;user-select:text}.ol-grabbing[_ngcontent-%COMP%]{cursor:grabbing}.ol-grab[_ngcontent-%COMP%]{cursor:move;cursor:grab}.ol-control[_ngcontent-%COMP%]{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom[_ngcontent-%COMP%]{top:.5em;left:.5em}.ol-rotate[_ngcontent-%COMP%]{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent[_ngcontent-%COMP%]{top:4.643em;left:.5em}.ol-full-screen[_ngcontent-%COMP%]{right:.5em;top:.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:1.4em}.ol-compass[_ngcontent-%COMP%]{display:block;font-weight:400;will-change:transform}.ol-touch[_ngcontent-%COMP%]   .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5em}.ol-touch[_ngcontent-%COMP%]   .ol-zoom-extent[_ngcontent-%COMP%]{top:5.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-in[_ngcontent-%COMP%]{border-radius:2px 2px 0 0}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-out[_ngcontent-%COMP%]{border-radius:0 0 2px 2px}.ol-attribution[_ngcontent-%COMP%]{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline;list-style:none}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:" "}.ol-attribution[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0}.ol-attribution.ol-collapsed[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}.ol-attribution[_ngcontent-%COMP%]:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-zoomslider[_ngcontent-%COMP%]{top:4.5em;left:.5em;height:200px}.ol-zoomslider[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;height:10px}.ol-touch[_ngcontent-%COMP%]   .ol-zoomslider[_ngcontent-%COMP%]{top:5.5em}.ol-overviewmap[_ngcontent-%COMP%]{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%]{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed)   button[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box[_ngcontent-%COMP%]{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-box[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}[_nghost-%COMP%]     .ol-attribution{display:none}.map[_ngcontent-%COMP%]{height:100%;width:100%}'],changeDetection:0}),n})(),LIt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.Tag=O3,this.Section=_t,this.SensorType=Ge}ngAfterViewInit(){this.appService.hardSetStates({[xc.theoreticalWalls]:!1})}getGroups(t){return[...new Set(Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Pt).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s).join(", ")}getOutlets(t){return Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Pt).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return An(Object.values(this.houseService.house$.value.partsFlatten).filter(s=>s instanceof Pt).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(To))},n.\u0275cmp=On({type:n,selectors:[["app-page-wired"]],decls:208,vars:112,consts:[[3,"id"],[3,"url"],[1,"technical"],["href","https://community.home-assistant.io/t/circadian-lighting-custom-component/61246"],["identifier","PassiveOpen-Wired"]],template:function(t,i){1&t&&(O(0,"section",0)(1,"h1"),V(2,"Smart home"),N()(),O(3,"section",0)(4,"h2"),V(5," Electricity "),N(),O(6,"h3"),rt(7,"app-svg",1),O(8,"span"),V(9,"Normal - 230v"),N()(),O(10,"p"),V(11," The standard in Sweden is 10amps per group (1.5mm2). In Netherlands that would be 16amps and 2.5mm2 "),N(),O(12,"label",2)(13,"span"),V(14,"Technical "),N(),V(15),rt(16,"br"),V(17),rt(18,"br"),V(19),rt(20,"br"),N(),O(21,"h3"),rt(22,"app-svg",1),O(23,"span"),V(24,"3Phase - 400v"),N()(),O(25,"p"),V(26," This weird symbol is a "),O(27,"tag"),V(28,"perilex"),N(),V(29," plug. It has 3-phase (or sometimes just two). The main goal is the devide the load over 3 wires instead of one. It requires more wires though. Think induction in the kitchen, or e-car (not this connector). "),N(),O(30,"label",2)(31,"span"),V(32,"Technical "),N(),V(33),rt(34,"br"),V(35),rt(36,"br"),V(37),rt(38,"br"),N()(),O(39,"section",0)(40,"h2"),V(41," lightning "),N(),O(42,"h3"),rt(43,"app-svg",1),O(44,"span"),V(45,"Lamps"),N()(),O(46,"p"),V(47," Lamps can come in 230v and 24v. Most lamps should be dimmable and wires run back to the PLC "),N(),O(48,"h3"),rt(49,"app-svg",1),O(50,"span"),V(51,"Double switch "),N()(),O(52,"p"),V(53," Double pulse switches. Allows for 6 options. Single, double and long press. They are 24v and wires run back to the PLC. "),N(),O(54,"h3"),rt(55,"app-svg",1),O(56,"span"),V(57,"Dimmer"),N()(),O(58,"p"),V(59," All dimmable lights have a dim level that became less bright during the evening. Following the "),O(60,"a",3),V(61,"circadian lightning."),N(),V(62,". This button is only to overrule and switch on or off "),N(),O(63,"h3"),rt(64,"app-svg",1),O(65,"span"),V(66,"DLC, or light plugs"),N()(),O(67,"p"),V(68," Completely strange for outstanders. but every fixed light has a seperate miniplug. In Sweden they had a old one, and since 2019 they follow the EU standard of DLC. "),N()(),O(69,"section",0)(70,"h2"),V(71," Network / Ethernet "),N(),O(72,"h3"),rt(73,"app-svg",1),O(74,"span"),V(75,"Ethernet (rj45)"),N()(),O(76,"p"),V(77," If you work home, you need reliable internet. A wall outlet for a normal internet cable works the best. Not limited to computers, many devices can have them as well. Like speakers, television etc. "),N(),O(78,"label",2)(79,"span"),V(80,"Technical "),N(),V(81),rt(82,"br"),V(83),rt(84,"br"),N(),O(85,"h3"),rt(86,"app-svg",1),O(87,"span"),V(88,"Power-over-Ethernet "),N()(),O(89,"p"),V(90,"Its a internet cable with (often) 48volts. So you can power up a device with only the internet cable. Perfect for a ring-doorbel, security camera or even wifi-access-points "),N(),O(91,"h3"),rt(92,"app-svg",1),O(93,"span"),V(94,"Wifi"),N()(),O(95,"p"),V(96,"Maybe most important for any mobile device, or guests "),N(),O(97,"label",2)(98,"span"),V(99,"Technical "),N(),V(100),rt(101,"br"),N()(),O(102,"section",0)(103,"h2"),V(104," Safety "),N(),O(105,"h3"),rt(106,"app-svg",1),O(107,"span"),V(108,"Smoke/heat detectors"),N()(),O(109,"p"),V(110,"We have a firefighter in the family. On a serious note, everyone should have multiple of smoke sensors. A heat sensor in the kitchen. "),N(),O(111,"label",2)(112,"span"),V(113,"Technical "),N(),V(114),rt(115,"br"),V(116),rt(117,"br"),N(),O(118,"h3"),rt(119,"app-svg",1),O(120,"span"),V(121,"Camera's"),N()(),O(122,"p"),V(123," The most optional step. Gives a bit of comfort, security wise. It does allow you to monitor your house, when you are away (via your own VPN of course) "),N(),O(124,"label",2)(125,"span"),V(126,"Technical "),N(),V(127),rt(128,"br"),N(),O(129,"h3"),rt(130,"app-svg",1)(131,"app-svg",1),O(132,"span"),V(133,"Window/Door sensors/Motion detection"),N()(),O(134,"p"),V(135," Extends the alarm functoin "),N()(),O(136,"section",0)(137,"h2"),V(138," Other smarts "),N(),O(139,"h3"),rt(140,"app-svg",1),O(141,"span"),V(142,"Sun blinds / screens"),N()(),O(143,"p"),V(144," Essential to a passive house, because the sun radiation is to much during the summer. "),N(),O(145,"h3"),rt(146,"app-svg",1),O(147,"span"),V(148,"Motion sensors"),N()(),O(149,"p"),V(150," Fun addon to help to automate the smart-home. Lights can be turned on/off automatically. "),N(),O(151,"h3"),rt(152,"app-svg",1),O(153,"span"),V(154,"Temperature"),N()(),O(155,"p"),V(156," Help to regulate the heat/cooling and ventilation in certain area's of the house "),N()(),O(157,"section",0)(158,"h2"),V(159," Ventilation "),N(),O(160,"h3"),rt(161,"app-svg",1),O(162,"span"),V(163,"Ventilation in"),N()(),O(164,"p"),V(165," Fresh air is needed in the bedrooms and main living rooms. It flows to the other parts of the house. Mainly because the air-intake in other rooms "),N(),O(166,"h3"),rt(167,"app-svg",1),O(168,"span"),V(169,"Ventilation out"),N()(),O(170,"p"),V(171," The air intakes are in the rooms with 'dirty' air. Of course the toilets, but also the bathroom/kitchen due to moisture and smells. "),N(),O(172,"p"),V(173," Read more about ventilation on the installation page! "),N()(),O(174,"section",0)(175,"h2"),V(176," Water "),N(),O(177,"h3"),rt(178,"app-svg",1),O(179,"span"),V(180,"Rainwater non-drinkable & cold"),N()(),O(181,"p"),V(182," Best for plants, and garden "),N(),O(183,"h3"),rt(184,"app-svg",1),O(185,"span"),V(186,"Water, Drinkable Both warm and cold"),N()(),O(187,"p"),V(188," Used for daily water use. "),N(),O(189,"h3"),rt(190,"app-svg",1),O(191,"span"),V(192,"Shower, Drinkable Both warm and cold"),N()(),O(193,"p"),V(194," If your water is coming from a water supply company you are not allowed to mix warm-drink water with cold rain water. Flow back is too high of a risk. Mixing in rain water has pro's like less water, you'll need less soap and you get softer hair. "),N(),O(195,"h3"),rt(196,"app-svg",1),O(197,"span"),V(198,"Drainage"),N()(),O(199,"p"),V(200," Every water tap has of course a drain. But sometimes they come in alone, like in the laundry room. "),N(),O(201,"h3"),rt(202,"app-svg",1),O(203,"span"),V(204,"Toilets"),N()(),O(205,"p"),V(206," You know what they do. Should be flushed with (filtered, non-stinky) rainwater. "),N()(),rt(207,"disqus",4)),2&t&&(Ve("id",i.Section.wiredWelcome),ae(3),Ve("id",i.Section.wiredPower),ae(4),na("sensor-",i.SensorType.socket,""),ws("url","assets/svg/",i.SensorType.socket,".svg"),ae(8),si(" Total cable length: ",i.getCable(i.SensorType.socket),"m"),ae(2),si(" Groups: ",i.getGroups(i.SensorType.socket),""),ae(2),si(" Amount: ",i.getOutlets(i.SensorType.socket),""),ae(3),na("sensor-",i.SensorType.perilex,""),ws("url","assets/svg/",i.SensorType.perilex,".svg"),ae(11),si(" Total cable length: ",i.getCable(i.SensorType.perilex),"m"),ae(2),si(" Groups: ",i.getGroups(i.SensorType.perilex),""),ae(2),si(" Amount: ",i.getOutlets(i.SensorType.perilex),""),ae(2),Ve("id",i.Section.wiredLight),ae(4),na("sensor-",i.SensorType.lightBulb,""),ws("url","assets/svg/",i.SensorType.lightBulb,".svg"),ae(6),na("sensor-",i.SensorType.lightSwitch,""),ws("url","assets/svg/",i.SensorType.lightSwitch,".svg"),ae(6),na("sensor-",i.SensorType.dimmer,""),ws("url","assets/svg/",i.SensorType.dimmer,".svg"),ae(9),na("sensor-",i.SensorType.dlc,""),ws("url","assets/svg/",i.SensorType.dlc,".svg"),ae(5),Ve("id",i.Section.wiredEthernet),ae(4),na("sensor-",i.SensorType.ethernet,""),ws("url","assets/svg/",i.SensorType.ethernet,".svg"),ae(8),si(" Amount: ",i.getOutlets(i.SensorType.ethernet),""),ae(2),si(" Total cable length: ",i.getCable(i.SensorType.ethernet,0),"m"),ae(3),na("sensor-",i.SensorType.poe,""),ws("url","assets/svg/",i.SensorType.poe,".svg"),ae(6),na("sensor-",i.SensorType.wifi,""),ws("url","assets/svg/",i.SensorType.wifi,".svg"),ae(8),si(" Amount: ",i.getOutlets(i.SensorType.wifi)," Access points"),ae(2),Ve("id",i.Section.wiredSafety),ae(4),na("sensor-",i.SensorType.smoke,""),ws("url","assets/svg/",i.SensorType.smoke,".svg"),ae(8),si(" Amount: ",i.getOutlets(i.SensorType.smoke),""),ae(2),si(" Total cable length: ",i.getCable(i.SensorType.smoke,0),"m"),ae(3),na("sensor-",i.SensorType.camera,""),ws("url","assets/svg/",i.SensorType.camera,".svg"),ae(8),si(" Amount: ",i.getOutlets(i.SensorType.camera)," PoE"),ae(3),na("sensor-",i.SensorType.pir,""),ws("url","assets/svg/",i.SensorType.pir,".svg"),ae(1),na("sensor-",i.SensorType.alarm,""),ws("url","assets/svg/",i.SensorType.alarm,".svg"),ae(5),Ve("id",i.Section.wiredExtra),ae(4),na("sensor-",i.SensorType.blinds,""),ws("url","assets/svg/",i.SensorType.blinds,".svg"),ae(6),na("sensor-",i.SensorType.pir,""),ws("url","assets/svg/",i.SensorType.pir,".svg"),ae(6),na("sensor-",i.SensorType.temperature,""),ws("url","assets/svg/",i.SensorType.temperature,".svg"),ae(5),Ve("id",i.Section.wiredVent),ae(4),na("sensor-",i.SensorType.ventIn,""),ws("url","assets/svg/",i.SensorType.ventIn,".svg"),ae(6),na("sensor-",i.SensorType.ventOut,""),ws("url","assets/svg/",i.SensorType.ventOut,".svg"),ae(7),Ve("id",i.Section.wiredWater),ae(4),na("sensor-",i.SensorType.waterRain,""),ws("url","assets/svg/",i.SensorType.waterRain,".svg"),ae(6),na("sensor-",i.SensorType.waterWarm,""),ws("url","assets/svg/",i.SensorType.waterWarm,".svg"),ae(6),na("sensor-",i.SensorType.shower,""),ws("url","assets/svg/",i.SensorType.shower,".svg"),ae(6),na("sensor-",i.SensorType.drain,""),ws("url","assets/svg/",i.SensorType.drain,".svg"),ae(6),na("sensor-",i.SensorType.toilet,""),ws("url","assets/svg/",i.SensorType.toilet,".svg"))},dependencies:[O9,x4e,TS],styles:["sh3[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%]{margin-right:6px}"]}),n})();const DIt=["tableRows"];function IIt(n,e){if(1&n&&(O(0,"th",7),V(1),N()),2&n){const t=pn().$implicit;ae(1),si(" ",t.name," ")}}function BIt(n,e){if(1&n&&rt(0,"span",9),2&n){const t=pn().$implicit,i=pn().$implicit;Ve("innerHTML",i.def(t[i.id],t.unit),k3)}}function RIt(n,e){if(1&n&&(O(0,"td",8),rt(1,"span",9),fn(2,BIt,1,1,"span",10),rt(3,"span",9),N()),2&n){const t=e.$implicit,i=pn().$implicit;ae(1),Ve("innerHTML",i.prefix,k3),ae(1),Ve("ngIf",t[i.id]),ae(1),Ve("innerHTML",i.postfix,k3)}}function FIt(n,e){1&n&&(oo(0,4),fn(1,IIt,2,1,"th",5),fn(2,RIt,4,3,"td",6),ao()),2&n&&Ve("matColumnDef",e.$implicit.id)}function kIt(n,e){1&n&&rt(0,"tr",11)}function PIt(n,e){if(1&n){const t=Va();oo(0),O(1,"tr",12,13),mn("click",function(){const s=Ai(t).$implicit;return h(pn().rowClick(s))}),N(),ao()}if(2&n){const t=e.$implicit;ae(1),cD("group-",t.uuid," row-",t.type,""),Gi("row-folded",t.uuid)}}let HIt=(()=>{class n{constructor(t){this.houseService=t,this.columns=[{id:"folded",name:"",def:i=>`${i}`},{id:xg.name,name:"Name",def:i=>`${i}`},{id:"calcAmount",name:"#",def:(i,r="x")=>`${i}${r}`},{id:"price",name:"Piece price",def:i=>`${this.readableNumbers(Number(i))}`},{id:"calcPrice",name:"Sum price",def:i=>`${this.readableNumbers(Number(i),-2)}`},{id:xg.sizeOrVersion,name:"Size or Version",def:i=>`${i}`},{id:xg.remarks,name:"remarks",def:i=>`${i}`}],this.groupRow={},this.columnNames=this.columns.map(i=>i.id),this.parts=[]}set data(t){this.costTable=t;const i=t.costs.filter(r=>r);this.dataSource=[...i.flatMap(r=>r instanceof xM?[r,...r.costs]:r),new zUe({name:`Total ${t.alias.toLocaleLowerCase()}`,costs:i})]}readableNumbers(t,i){return void 0!==i?`\u20ac${An(t,0).toLocaleString()}`:t>1e3?`\u20ac${An(t).toLocaleString()}`:`\u20ac${t}`}rowClick(t){t instanceof xM&&(t.toggleFold(),this.rowContainers.forEach(i=>{const r=i.nativeElement.classList;r.contains(`group-${t.uuid}`)&&r.toggle("row-folded")}))}}return n.\u0275fac=function(t){return new(t||n)(G(qo))},n.\u0275cmp=On({type:n,selectors:[["app-table"]],viewQuery:function(t,i){if(1&t&&Wo(DIt,5,gn),2&t){let r;ir(r=rr())&&(i.rowContainers=r)}},inputs:{data:"data"},decls:4,vars:6,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",3,"dataSource","id"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["mat-row","",3,"click"],["tableRows",""]],template:function(t,i){1&t&&(O(0,"table",0),fn(1,FIt,3,1,"ng-container",1),fn(2,kIt,1,0,"tr",2),fn(3,PIt,3,6,"ng-container",3),N()),2&t&&(ws("id","table-",i.costTable.section,""),Ve("dataSource",i.dataSource),ae(1),Ve("ngForOf",i.columns),ae(1),Ve("matHeaderRowDef",i.columnNames)("matHeaderRowDefSticky",!0),ae(1),Ve("matRowDefColumns",i.columnNames))},dependencies:[C4,x4,Px,k9,Hx,P9,F9,zx,H9,z9,Ox,Nx],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-column-calcAmount[_ngcontent-%COMP%], .mat-column-price[_ngcontent-%COMP%], .mat-column-calcPrice[_ngcontent-%COMP%]{text-align:right;width:60px}.mat-column-calcPrice[_ngcontent-%COMP%]{padding-right:16px}.mat-column-sizeOrVersion[_ngcontent-%COMP%], .mat-column-other[_ngcontent-%COMP%]{min-width:60px}.mat-column-name[_ngcontent-%COMP%]{min-width:200px}"]}),n})();function zIt(n,e){1&n&&pu(0)}const OIt=function(n){return{$implicit:n}};function NIt(n,e){if(1&n&&(oo(0),fn(1,zIt,1,0,"ng-container",4),ao()),2&n){const t=e.$implicit;pn();const i=Qo(8);ae(1),Ve("ngTemplateOutlet",i)("ngTemplateOutletContext",w0(2,OIt,t))}}function VIt(n,e){1&n&&(O(0,"span"),V(1," Nice to discover a lot of moldings: "),O(2,"a",8),V(3,"Wikipedia Moldings"),N()())}function UIt(n,e){if(1&n){const t=Va();O(0,"section",5)(1,"h2",6),mn("click",function(){const s=Ai(t).$implicit;return h(s.sectionFold=!s.sectionFold)}),O(2,"mat-icon"),V(3),N(),V(4),N(),O(5,"div"),fn(6,VIt,4,0,"span",7),rt(7,"app-table",3),N()()}if(2&n){const t=e.$implicit,i=pn();Ve("id",t.section),ae(3),si("",t.sectionFold?"expand_more":"expand_less"," "),ae(1),si(" ",t.alias," "),ae(1),Gi("folded",t.sectionFold),ae(1),Ve("ngIf",t.section===i.Section.costsFinishes),ae(1),Ve("data",t)}}let GIt=(()=>{class n{constructor(t){this.houseService=t,this.Section=_t,this.tables=[this.getPreps(),this.getConstruction(),this.getOpenings(),this.getElectra(),this.getFinish(),this.getWater(),this.getOutsideFinish()],this.hiddenTables=[this.getKitchen(),this.getBathroom()],this.totals=this.getTotals()}getFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new U0({section:_t.costsFinishes,alias:"Finishes",costs:[new oa({amount:i,name:"Crown molding",price:3,unit:"m"}),new oa({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT($o,[],a=>({name:"Door casing",price:60})),this.houseService.getT($a,[],a=>({name:"Window casing",price:60})),new oa({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getWater(){return this.houseService.getWallLength(),this.houseService.getWallArea(),new U0({section:_t.costsWater,alias:"Water ",costs:[this.houseService.getT(n2,["sensorType"],a=>({name:"Cold water",price:20,unit:"m"}),a=>a.sensorType===Ge.waterCold,!1),this.houseService.getT(n2,["sensorType"],a=>({name:"Warm water",price:20,unit:"m"}),a=>a.sensorType===Ge.waterWarm,!1),this.houseService.getT(n2,["sensorType"],a=>({name:"Rain water",price:20,unit:"m"}),a=>a.sensorType===Ge.waterWarm,!1),this.houseService.getT(n2,["sensorType"],a=>({name:"Drains",price:20,unit:"m"}),a=>[Ge.drain,Ge.toilet].includes(a.sensorType),!1)]})}getOutsideFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new U0({section:_t.costsOuterFinishes,alias:"Outer finishes",costs:[new oa({amount:i,name:"Crown molding",price:3,unit:"m"}),new oa({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT($o,[],a=>({name:"Door casing",price:60})),this.houseService.getT($a,[],a=>({name:"Window casing",price:60})),new oa({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getElectra(){return new U0({section:_t.costsElectra,alias:"Electra",costs:[new oa({amount:this.houseService.getGroups(Ge.socket).length,name:"Circuit breaker",sizeOrVersion:"10A - 240v",price:10}),new oa({amount:Math.ceil(this.houseService.getGroups(Ge.socket).length/4),name:"Circuit breaker Earth Group",sizeOrVersion:"240v",price:80}),this.houseService.getT(Pt,["sensorType"],i=>({name:"Electric power socket",sizeOrVersion:"230v",price:20}),i=>i.sensorType===Ge.socket),this.houseService.getT(Pt,["sensorType"],i=>({name:"Electric wires",sizeOrVersion:"2.5mm2 230v",price:2,unit:"m"}),i=>[Ge.socket].includes(i.sensorType),!1),this.houseService.getT(Pt,["sensorType"],i=>({name:"Perilex socket",price:60}),i=>i.sensorType===Ge.perilex),this.houseService.getT(Pt,["sensorType"],i=>({name:"Perilex wire",sizeOrVersion:"5 sub wires",price:2,unit:"m"}),i=>[Ge.perilex].includes(i.sensorType),!1),this.houseService.getT(O2,["sensorType"],i=>({name:"Light socket",price:20}),i=>!0),this.houseService.getT(Pt,["sensorType"],i=>({name:"Switch (light)",sizeOrVersion:"Double pulse",price:20}),i=>i.sensorType===Ge.lightSwitch),this.houseService.getT(Pt,["sensorType"],i=>({name:"Dimmer",price:20}),i=>i.sensorType===Ge.dimmer),this.houseService.getT(Pt,["sensorType"],i=>({name:"Wifi AP",price:100}),i=>i.sensorType===Ge.wifi),this.houseService.getT(Pt,[],i=>({name:"Ethernet cable",sizeOrVersion:"CAT6",price:.6,unit:"m"}),i=>[Ge.ethernet,Ge.poe].includes(i.sensorType),!1)]})}getPreps(){return new U0({section:_t.costsPreparations,alias:"Preparations",costs:[new oa({name:"F\xf6rhandsbesked",price:2e3}),new oa({name:"Bygglov",price:3e3}),new oa({name:"Dirt work",price:1e3}),new oa({name:"Ground prep",price:9e3}),new oa({name:"Constructions calculations",price:3e3}),new oa({name:"PassivHaus Certification",price:3e3}),new oa({name:"Utilities connections /fees",price:15e3}),new oa({name:"Tool rental",price:3e3})]})}getConstruction(){return new U0({section:_t.costsConstruction,alias:"Construction",costs:[new oa({name:"foundation",price:9e3}),new oa({name:"footer",price:9e3}),new oa({name:"Concrete prefab floor",price:32e3}),new oa({name:"Studs",price:1e4}),new oa({name:"OSB",price:1e4})]})}getBathroom(){return new U0({section:_t.costsConstruction,alias:"Bathroom",costs:[new oa({name:"Complete kitchen",price:9e3})]})}getKitchen(){return new U0({section:_t.costsConstruction,alias:"Kitchen",costs:[new oa({name:"Complete kitchen",price:9e3})]})}getOpenings(){return new U0({section:_t.costsOpenings,alias:"Openings",costs:[this.houseService.getT($o,["outside"],i=>({name:"Door",sizeOrVersion:`230x${i.width}`,price:i.outside?600:200,unit:"#",other:i.outside?"Outer door":"Inner door"})),this.houseService.getT($a,["width","height","windowForm"],i=>({name:"Window",sizeOrVersion:`${1e3*i.height}mm x ${1e3*i.width}mm`,price:i.width*i.height*800,other:`${i.windowForm}`}),i=>![V0.windowWall].includes(i.windowForm)),this.houseService.getT($a,["width","height","windowForm"],i=>({name:"Window wall",sizeOrVersion:"Custom",price:6e4,other:"main window wall"}),i=>[V0.windowWall].includes(i.windowForm))]})}getTotals(){const t=[...this.tables,...this.hiddenTables].flatMap(i=>new oa({price:j3(i.costs.filter(r=>void 0!==r).map(r=>r.calcPrice)),name:i.alias}));return console.log(),new U0({section:_t.costsTotals,alias:"Total",costs:[...t,new oa({price:j3(t.map(i=>i.price)),amount:.12,name:"Unexpected costs (12%)"})]})}}return n.\u0275fac=function(t){return new(t||n)(G(qo))},n.\u0275cmp=On({type:n,selectors:[["app-page-costs"]],decls:13,vars:3,consts:[[4,"ngFor","ngForOf"],["simple",""],[2,"margin-bottom","40px",3,"id"],[3,"data"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"id"],[3,"click"],[4,"ngIf"],["href","https://en.wikipedia.org/wiki/Molding_(decorative)"]],template:function(t,i){1&t&&(O(0,"h1"),V(1,"What does it costs"),N(),O(2,"p"),V(3," This is a overview of all the prices. Some are fixed but most are dynamic calculated of the other inputs on this website. All these prices are estimations based on on certain area, with a certain deal with a construction store.\n"),N(),O(4,"h3"),V(5," This page is still under construction. Not complete!!! Prices are not accurate\n"),N(),fn(6,NIt,2,4,"ng-container",0),fn(7,UIt,8,7,"ng-template",null,1,C0),O(9,"section",2)(10,"h1"),V(11,"Totals"),N(),rt(12,"app-table",3),N()),2&t&&(ae(6),Ve("ngForOf",i.tables),ae(3),Ve("id",i.Section.costsTotals),ae(3),Ve("data",i.totals))},dependencies:[C4,x4,rj,D8,HIt],styles:["[_nghost-%COMP%]{max-width:900px;display:block;margin:0 auto;padding:0 32px}section[_ngcontent-%COMP%]{margin:0;padding:0 0 0 24px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:100vh;transition:.4s ease-in;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}app-table[_ngcontent-%COMP%]{display:block}  td.mat-column-price span{opacity:0}  td.mat-column-calcPrice span{opacity:0}  #table-costs-totals .mat-column-sizeOrVersion,   #table-costs-totals .mat-column-other,   #table-costs-totals .mat-column-calcAmount,   #table-costs-totals .mat-column-price{color:transparent}"]}),n})(),QIt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.discord=this.appService.discord,this.github=this.appService.github,this.faDiscord=bM,this.faGithub=Qk}}return n.\u0275fac=function(t){return new(t||n)(G(qo),G(To))},n.\u0275cmp=On({type:n,selectors:[["app-page-about"]],decls:45,vars:4,consts:[["src","/assets/svg/logo.svg"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],[3,"icon"],["target","_blank",1,"larger-link",3,"href"],["target","_blank","href","https://GeoDev.nl",1,"larger-link"],["target","_blank","href","https://www.joostdevree.nl"],["target","_blank","href","https://gathering.tweakers.net/forum/list_messages/2147286"]],template:function(t,i){1&t&&(O(0,"h1"),V(1,"About PassiveOpen "),rt(2,"img",0),N(),V(3," Well we didn't put a lot of effort in this part of the site yet. Maybe you can help! "),O(4,"h2"),V(5," We have an online community.\n"),N(),O(6,"p"),V(7,"Join us on our "),O(8,"a",1),rt(9,"fa-icon",2),V(10," Discord "),N(),V(11," channel. We know, its just an other tool... But it allows us to be more swift with it all. Anybody is welcome!\n"),N(),O(12,"h2"),V(13," Open source\n"),N(),O(14,"p"),V(15," The plan is to share the plans. That would include any costs, calculations and plans, drawings and of course thoughts."),rt(16,"br")(17,"br"),V(18," We share this, so you can build this optimized but charming house your self or with a contractor. For free (not the contractor nor materials) "),rt(19,"br")(20,"br"),V(21," We are still figuring out which 'license model' we should give this project. But don't be afraid, it won't cost you anything. More about credits to the people that helped this project.\n"),N(),O(22,"div"),V(23," Everything is free and open source. See "),O(24,"a",3),rt(25,"fa-icon",2),V(26," GitHub "),N()(),O(27,"h2"),V(28," Ungoing credits:\n"),N(),O(29,"div")(30,"ul")(31,"li"),V(32," Build by "),O(33,"a",4),V(34,"GeoDev"),N()(),O(35,"li"),V(36," All the discord users of course "),N()(),V(37," Site and credits in Dutch: "),O(38,"ul")(39,"li")(40,"a",5),V(41,"https://www.joostdevree.nl"),N()(),O(42,"li")(43,"a",6),V(44,"tweakers forum"),N()()()()),2&t&&(ae(8),gu("href",i.discord,xl),ae(1),Ve("icon",i.faDiscord),ae(15),gu("href",i.github,xl),ae(1),Ve("icon",i.faGithub))},dependencies:[_P],styles:["[_nghost-%COMP%]{max-width:600px;display:block;margin:0 auto;padding:0 32px}h2[_ngcontent-%COMP%]{margin-top:80px!important}h1[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}"]}),n})(),WIt=(()=>{class n{constructor(t){this.houseService=t,this.house$=this.houseService.house$,this.Tag=O3,this.Section=_t,this.update=this.houseService.update,this.round=An,this.Thicknesses=un,this.joists=[200,300,350,400],this.columns=[{id:"name",name:"Name",def:i=>`${i}`},{id:"diameter",name:"Diameter",def:i=>`${An(i,3)}`},{id:"lambda",name:"Lambda",def:i=>`${An(i,3)}`},{id:"r",name:"R",def:i=>`${An(i,2)}`},{id:"deltaT",name:"Delta T",def:i=>`${An(i,1)}\xb0C`},{id:"temp",name:"Temp",def:i=>`${An(i,1)}\xb0C`}],this.columnNames=this.columns.map(i=>i.id),this.currentJoist=()=>this.joists.findIndex(i=>i===this.house$.value.construction.Thicknesses[un.joists])}ngAfterViewInit(){}updateJoist(t){this.update("construction","thicknessJoist",this.joists[t])}updateOuterSheet(t){this.update("construction","thicknessJoist",this.joists[t])}}return n.\u0275fac=function(t){return new(t||n)(G(qo))},n.\u0275cmp=On({type:n,selectors:[["app-page-3d-house"]],decls:5,vars:1,consts:[[3,"id"]],template:function(t,i){1&t&&(O(0,"section",0)(1,"h1"),V(2," Construction 3D House "),N(),O(3,"h3"),V(4," This page is still under construction. "),N()()),2&t&&Ve("id",i.Section.House3D)}}),n})();function Dc(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function yT(n){return yT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yT(n)}function Gl(n){Dc(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||"object"===yT(n)&&"[object Date]"===e?new Date(n.getTime()):"number"==typeof n||"[object Number]"===e?new Date(n):(("string"==typeof n||"[object String]"===e)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function wT(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function Pde(n){Dc(1,arguments);var e=Gl(n);return e.setHours(0,0,0,0),e}function $It(n,e){Dc(2,arguments);var t=Pde(n),i=Pde(e),r=t.getTime()-wT(t),s=i.getTime()-wT(i);return Math.round((r-s)/864e5)}function Hde(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function u4(n){if(null===n||!0===n||!1===n)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var zde={};function cV(){return zde}function M6(n,e){var t,i,r,s,o,a,c,l;Dc(1,arguments);var u=cV(),f=u4(null!==(t=null!==(i=null!==(r=null!==(s=e?.weekStartsOn)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==r?r:u.weekStartsOn)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==t?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Gl(n),g=p.getDay(),_=(g<f?7:0)+g-f;return p.setDate(p.getDate()-_),p.setHours(0,0,0,0),p}function Ode(n,e){Dc(2,arguments);var t=Gl(n),i=u4(e);return isNaN(i)?new Date(NaN):(i&&t.setDate(t.getDate()+i),t)}function YIt(n,e){Dc(2,arguments);var t=u4(e),i=7*t;return Ode(n,i)}function Nde(n,e){Dc(1,arguments);var t=n||{},i=Gl(t.start),r=Gl(t.end),s=r.getTime();if(!(i.getTime()<=s))throw new RangeError("Invalid interval");var o=M6(i,e),a=M6(r,e);o.setHours(15),a.setHours(15),s=a.getTime();for(var c=[],l=o;l.getTime()<=s;)l.setHours(0),c.push(Gl(l)),(l=YIt(l,1)).setHours(15);return c}function S6(n,e){for(var t=n<0?"-":"",i=Math.abs(n).toString();i.length<e;)i="0"+i;return t+i}function Vde(n,e){var t,i;Dc(1,arguments);var r=Gl(n);if(isNaN(r.getTime()))throw new RangeError("Invalid time value");var s=String(null!==(t=e?.format)&&void 0!==t?t:"extended"),o=String(null!==(i=e?.representation)&&void 0!==i?i:"complete");if("extended"!==s&&"basic"!==s)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==o&&"time"!==o&&"complete"!==o)throw new RangeError("representation must be 'date', 'time', or 'complete'");var a="",c="",l="extended"===s?"-":"",u="extended"===s?":":"";if("time"!==o){var f=S6(r.getDate(),2),p=S6(r.getMonth()+1,2),g=S6(r.getFullYear(),4);a="".concat(g).concat(l).concat(p).concat(l).concat(f)}if("date"!==o){var _=r.getTimezoneOffset();if(0!==_){var y=Math.abs(_),w=S6(Math.floor(y/60),2),C=S6(y%60,2),b=_<0?"+":"-";c="".concat(b).concat(w,":").concat(C)}else c="Z";var M=S6(r.getHours(),2),T=S6(r.getMinutes(),2),I=S6(r.getSeconds(),2),F=""===a?"":"T",P=[M,T,I].join(u);a="".concat(a).concat(F).concat(P).concat(c)}return a}function ZIt(n,e){var t,i,r,s,o,a,c,l;Dc(1,arguments);var u=Gl(n),f=u.getFullYear(),p=cV(),g=u4(null!==(t=null!==(i=null!==(r=null!==(s=e?.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:p.firstWeekContainsDate)&&void 0!==i?i:null===(c=p.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=new Date(0);_.setFullYear(f+1,0,g),_.setHours(0,0,0,0);var y=M6(_,e),w=new Date(0);w.setFullYear(f,0,g),w.setHours(0,0,0,0);var C=M6(w,e);return u.getTime()>=y.getTime()?f+1:u.getTime()>=C.getTime()?f:f-1}function JIt(n,e){var t,i,r,s,o,a,c,l;Dc(1,arguments);var u=cV(),f=u4(null!==(t=null!==(i=null!==(r=null!==(s=e?.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:u.firstWeekContainsDate)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1),p=ZIt(n,e),g=new Date(0);g.setFullYear(p,0,f),g.setHours(0,0,0,0);var _=M6(g,e);return _}function Ude(n,e){Dc(1,arguments);var t=Gl(n),i=M6(t,e).getTime()-JIt(t,e).getTime();return Math.round(i/6048e5)+1}function tBt(n){return Dc(1,arguments),Gl(n).getFullYear()}function CT(n){Dc(1,arguments);var e=Gl(n),t=e.getDay();return t}function nBt(n,e){Dc(2,arguments);var t=Gl(n),i=u4(e);if(isNaN(i))return new Date(NaN);if(!i)return t;var r=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+i+1,0);var o=s.getDate();return r>=o?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}function xT(n){return xT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xT(n)}function lV(n,e){if(Dc(2,arguments),!e||"object"!==xT(e))return new Date(NaN);var t=e.years?u4(e.years):0,i=e.months?u4(e.months):0,r=e.weeks?u4(e.weeks):0,s=e.days?u4(e.days):0,o=e.hours?u4(e.hours):0,a=e.minutes?u4(e.minutes):0,c=e.seconds?u4(e.seconds):0,l=Gl(n),u=i||t?nBt(l,i+12*t):l,f=s||r?Ode(u,s+7*r):u,p=a+60*o,g=c+60*p,_=1e3*g,y=new Date(f.getTime()+_);return y}var cp=(()=>(function(n){n.name="name",n.days="days",n.what="what",n.more="more",n.deadline="deadline",n.firstDate="firstDate",n.lastDate="lastDate"}(cp||(cp={})),cp))();class Tm{constructor(e){this.sectionFold=!1,this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e)}}class gi{constructor(e){this.type="single",this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e),void 0!==this.deadline&&(this.lastDate=this.deadline)}}class cy extends gi{constructor(e){super(e),this.steps=[],this.type="group",this.collapsed=!1,this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e),this.uuid=e.uuid,this.steps.forEach(t=>{t.uuid=e.uuid}),this.lastDate=new Date(Math.max(...this.steps.flatMap(t=>t.lastDate.getTime()))),this.firstDate=new Date(Math.max(...this.steps.flatMap(t=>t.firstDate.getTime()))),this.days=Vx(this.steps.flatMap(t=>t.days))}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}}class iBt extends cy{constructor(e){super(e),this.steps=[],this.type="total",Object.assign(this,e)}get folded(){return'<span class="material-icons">remove</span>'}}const rBt=["tableHeader"],sBt=["table"],oBt=["tableRows"],aBt=[".table-row"];function cBt(n,e){if(1&n&&(O(0,"th",8)(1,"span"),V(2),N()()),2&n){const t=pn().$implicit;ae(2),a7(t.name)}}function lBt(n,e){if(1&n&&rt(0,"div",10),2&n){const t=pn().$implicit,i=pn().$implicit;Ve("innerHTML",i.def(t[i.id],t[i.id+"-extra"]),k3)}}function uBt(n,e){if(1&n){const t=Va();O(0,"td",9),mn("mouseenter",function(r){return Ai(t),h(pn(2).mouseenter(r))})("mouseleave",function(r){return Ai(t),h(pn(2).mouseleave(r))}),rt(1,"span",10),fn(2,lBt,1,1,"div",11),rt(3,"span",10),N()}if(2&n){const t=e.$implicit,i=pn().$implicit;ae(1),Ve("innerHTML",i.prefix,k3),ae(1),Ve("ngIf",t[i.id]),ae(1),Ve("innerHTML",i.postfix,k3)}}function hBt(n,e){1&n&&(oo(0,5),fn(1,cBt,3,1,"th",6),fn(2,uBt,4,3,"td",7),ao()),2&n&&Ve("matColumnDef",e.$implicit.id)}function fBt(n,e){1&n&&rt(0,"tr",12,13)}function dBt(n,e){if(1&n){const t=Va();oo(0),O(1,"tr",14,15),mn("click",function(){const s=Ai(t).$implicit;return h(pn().rowClick(s))}),N(),ao()}if(2&n){const t=e.$implicit;ae(1),cD("table-row group-",t.uuid," row-",t.type,""),Gi("row-folded",t.uuid)}}let pBt=(()=>{class n{constructor(t){this.overlay=t,this.Prop=cp,this.groupRow={},this.parts=[],this.highlightedColumn=0}set data(t){this.planning=t;const i=t.steps.filter(r=>r);this.dataSource=[...i.flatMap(r=>r instanceof cy?[r,...r.steps]:r),new iBt({name:`Total ${t.alias.toLocaleLowerCase()}`,steps:i})]}ngOnInit(){this.columnNames=this.columns.map(t=>t.id)}ngAfterViewInit(){}observer(){console.log(this);const i=new window.IntersectionObserver(r=>{console.log(1,r),r.forEach(s=>{s.isIntersecting&&i.disconnect()})},{threshold:.2});console.log(this.tableHeader.nativeElement),i.observe(this.tableHeader.nativeElement)}mouseenter(t){}mouseleave(t){}readableNumbers(t,i){return void 0!==i?`\u20ac${An(t,0).toLocaleString()}`:t>1e3?`\u20ac${An(t).toLocaleString()}`:`\u20ac${t}`}rowClick(t){console.log(t),t instanceof cy&&(t.toggleFold(),this.tableContainers.forEach(i=>{const r=i.nativeElement.classList;console.log(r,r.contains(`group-${t.uuid}`),`group-${t.uuid}`),r.contains(`group-${t.uuid}`)&&r.toggle("row-folded")}))}double(){this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy(),scrollStrategy:this.overlay.scrollStrategies.reposition()});const t=new Vj(this.tableHeader);this.overlayRef.addPanelClass("example-overlay"),this.overlayRef.attach(t)}positionStrategy(){return this.overlay.position().flexibleConnectedTo(this.tableContainers.first).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}]).withFlexibleDimensions(!1).withPush(!1)}}return n.\u0275fac=function(t){return new(t||n)(G(z3))},n.\u0275cmp=On({type:n,selectors:[["app-table-planning"]],viewQuery:function(t,i){if(1&t&&(Wo(rBt,5,gn),Wo(sBt,5,gn),Wo(oBt,5,gn),Wo(aBt,5,gn)),2&t){let r;ir(r=rr())&&(i.tableHeader=r.first),ir(r=rr())&&(i.table=r.first),ir(r=rr())&&(i.tableContainers=r),ir(r=rr())&&(i.tableFirstCol=r)}},inputs:{columns:"columns",scrollContainer:"scrollContainer",data:"data"},decls:5,vars:4,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",2,"width","fit-content !important",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"mouseenter","mouseleave",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",3,"mouseenter","mouseleave"],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["tableHeader",""],["mat-row","",3,"click"],["tableRows",""]],template:function(t,i){1&t&&(O(0,"table",0,1),fn(2,hBt,3,1,"ng-container",2),fn(3,fBt,2,0,"tr",3),fn(4,dBt,3,6,"ng-container",4),N()),2&t&&(Ve("dataSource",i.dataSource),ae(2),Ve("ngForOf",i.columns),ae(1),Ve("matHeaderRowDef",i.columnNames),ae(1),Ve("matRowDefColumns",i.columnNames))},dependencies:[C4,x4,Px,k9,Hx,P9,F9,zx,H9,z9,Ox,Nx],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]   td.highlighted[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block}.mat-column-what[_ngcontent-%COMP%], .mat-column-name[_ngcontent-%COMP%]{min-width:200px}th[class*=mat-column-week-][_ngcontent-%COMP%], td[class*=mat-column-week-][_ngcontent-%COMP%]{min-width:20px;width:20px}th[class*=mat-column-week-][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(198deg);text-orientation:sideways;writing-mode:vertical-lr}td[class*=mat-column-week-][_ngcontent-%COMP%]{border-left:1px solid var(--color-5)}  .week-block{position:relative}  .week-block .week-block-fill{position:absolute;background:var(--accent-50);right:0;height:100%}  .week-block .week-block-fill.week-block-last{left:0;right:initial}  .week-block span{position:relative;display:block;width:100%;text-align:center}"]}),n})();function gBt(n,e){if(1&n){const t=Va();oo(0),O(1,"section",4)(2,"h2",5),mn("click",function(){const s=Ai(t).$implicit;return h(s.sectionFold=!s.sectionFold)}),O(3,"mat-icon"),V(4),N(),V(5),O(6,"span",6),V(7),wa(8,"date"),wa(9,"date"),N()(),O(10,"div",7),rt(11,"app-table-planning",8),N()(),ao()}if(2&n){const t=e.$implicit,i=pn(),r=Qo(16);ae(1),Ve("id",t.section),ae(3),si("",t.sectionFold?"expand_more":"expand_less"," "),ae(1),si(" ",t.alias," "),ae(2),c7("( ",BA(8,10,t.firstDate,"dd-LL-YYYY")," - ",BA(9,13,t.lastDate,"dd-LL-YYYY"),")"),ae(3),Gi("folded",t.sectionFold),ae(1),Ve("columns",i.columns)("data",t)("scrollContainer",r)}}const mBt=[{path:"map",component:TIt},{path:"costs",component:GIt},{path:"about",component:QIt},{path:"planning",component:(()=>{class n{constructor(t,i,r,s){this.datePipe=t,this.houseService=i,this.appService=r,this.sanitizer=s,this.columns=[{id:"folded",name:"",def:o=>`${o}`},{id:cp.name,name:"Name",def:o=>`${o}`},{id:cp.what,name:"What",def:o=>`${o}`},{id:cp.days,name:"Days",def:o=>` ${o} `}],this.starDate=new Date(2024,2,1),console.log()}ngOnInit(){this.tables=this.calc([this.getPreps(),this.getFoundation(),this.getFraming(),this.getFinishing(),this.getInstallations(),this.getOutside()]),this.minFirstDate=new Date(Math.min(...this.tables.flatMap(t=>t.steps).map(t=>t.firstDate.getTime()))),this.maxLastDate=new Date(Math.max(...this.tables.flatMap(t=>t.steps).map(t=>t.lastDate.getTime()))),this.totalDays=function qIt(n,e){Dc(2,arguments);var t=Gl(n),i=Gl(e),r=Hde(t,i),s=Math.abs($It(t,i));t.setDate(t.getDate()-r*s);var o=Number(Hde(t,i)===-r),a=r*(s-o);return 0===a?0:a}(this.maxLastDate,this.minFirstDate),this.totalWeeks=function XIt(n,e,t){Dc(2,arguments);var i=M6(n,t),r=M6(e,t),s=i.getTime()-wT(i),o=r.getTime()-wT(r);return Math.round((s-o)/6048e5)}(this.maxLastDate,this.minFirstDate),this.weeks=Nde({start:this.minFirstDate,end:this.maxLastDate}),this.columns.push(...this.weeks.map(t=>({id:`week-${Vde(t,{representation:"date"})}`,name:` ${Ude(t)} ${[1,52,53].includes(Ude(t))?"'"+tBt(t).toString().substring(2):""} `,def:(i,r)=>this.sanitizer.bypassSecurityTrustHtml(`<div class="week-block">\n              <div class="week-block-fill" style="\n                width:${Math.round(Math.abs(i/7*100))}%;\n                left: ${Math.round(Math.abs(r/7*100))}%;\n              "></div>\n              <span>${Math.abs(i)}</span>\n            </div>`)}))),this.tables.forEach(t=>{t.steps.forEach(i=>{try{Nde({start:i.firstDate,end:i.lastDate}).forEach((r,s,o)=>{const a=o.length,c=Vde(r,{representation:"date"});let l=0;1===a?(l=i.days,i[`week-${c}-extra`]=CT(i.firstDate)):0===s?(l=7-CT(i.firstDate),i[`week-${c}-extra`]=CT(i.firstDate)):s===a-1?(l=CT(i.lastDate)+1,i[`week-${c}-extra`]=0):(l=7,i[`week-${c}-extra`]=0),i[`week-${c}`]=l})}catch{console.error(i)}})}),console.log(this.tables),console.log(this.tables[1].steps[0].uuid,this.tables[1].steps[0].steps[0].uuid)}calc(t){return t.forEach((r,s)=>{r.firstDate=0===s?this.starDate:lV(t[s-1].lastDate,{days:1}),r.steps.forEach((o,a)=>{const c=r.steps[a-1];o.firstDate=c?lV(c.lastDate,{days:1}):r.firstDate,o.lastDate=lV(o.firstDate,{days:Math.max(1,o.days-1)})}),r.lastDate=r.steps[r.steps.length-1].lastDate}),t}getPreps(){return new Tm({section:_t.planningPreps,alias:"Preparations",steps:[new gi({name:"Paper work",days:3,more:"BigTODO"}),new gi({name:"Redesign",days:2,deadline:new Date("2024","04","21")})]})}getFoundation(){const t=[new gi({name:"Dirt work",what:"Ground preps",days:2}),new gi({name:"Dirt work",what:"Flatten surface / compacting",days:9}),new gi({name:"Dirt work",what:"Snapping lines",days:11}),new gi({name:"Dirt work",what:"Digging hole",days:2})],i=[new gi({name:"Footings",what:"Snapping lines",days:1}),new gi({name:"Footings",what:"IFC blocks",days:2}),new gi({name:"Footings",what:"Drainage",days:2}),new gi({name:"Footings",what:"Pouring Concrete",days:7})];return new Tm({section:_t.planningFoundation,alias:"Foundation",steps:[new cy({uuid:Ok(),name:`${t[0].name}`,steps:t}),new cy({uuid:`${Ok()}`,name:`${i[0].name}`,steps:i}),new gi({name:"Walls",what:"Snapping lines",days:2}),new gi({name:"Walls",what:"IFC blocks",days:2}),new gi({name:"Walls",what:"Pouring Concrete",days:7}),new gi({name:"First Floor",what:"Prep wall",days:2}),new gi({name:"First Floor",what:"Install prefab",days:6}),new gi({name:"Deadline",what:"Foundation finished",days:8})]})}getFraming(){return new Tm({section:_t.planningFraming,alias:"Framing",steps:[new gi({name:"Ground Floor\tMeasure for Square",days:1}),new gi({name:"Ground Floor\tSnapping the lines",days:1}),new gi({name:"Walls\tFrame the outside",days:10}),new gi({name:"Walls\tFrame walls",days:5}),new gi({name:"Stairs\tBuild temp stairs",days:2}),new gi({name:"Top Floor\tMounting Rim LVL",days:2}),new gi({name:"Top Floor\tRolling Joists",days:4}),new gi({name:"Top Floor\tSheeting",days:3}),new gi({name:"Roof\tRolling rafters",days:4}),new gi({name:"Roof\tChimenys and cutouts",days:4}),new gi({name:"Roof\tLower Sheeting",days:2}),new gi({name:"Roof\tinsulation",days:2}),new gi({name:"Roof\tOuter sheet",days:2}),new gi({name:"Roof\tTiles",days:5}),new gi({name:"Windows\tNormal openings",days:5}),new gi({name:"Windows\tDoors",days:3}),new gi({name:"Windows\tGlass facade",days:3}),new gi({name:"Windows\tTaping",days:1}),new gi({name:"Pirsing pipes (installationroom + chimneys)",days:2}),new gi({name:"DoorBlowertest",days:1}),new gi({name:"Deadline\tCorrections",days:3})]})}getFinishing(){return new Tm({section:_t.planningFinishing,alias:"Finishing",steps:[new gi({name:"Kitchen",days:2}),new gi({name:"Kitchen Countertop",days:5}),new gi({name:"Floors",days:4}),new gi({name:"Bathroom tiling",days:4})]})}getInstallations(){return new Tm({section:_t.planningInstallations,alias:"Installations",steps:[new gi({name:"Water\tPlumming / Sewer",days:3}),new gi({name:"Water\tWarm Cold water",days:3}),new gi({name:"Water\tRainwater  + installation",days:3}),new gi({name:"Water\tInstallation + Tank",days:3}),new gi({name:"Floor heating\tTubeing",days:3}),new gi({name:"Floor heating\tConcrete pressure layer",days:3}),new gi({name:"Floor heating\tMechanic installation",days:3}),new gi({name:"Electrics\tBuilding Power Connection",days:5}),new gi({name:"Electrics\tTubes + Wiring",days:1}),new gi({name:"Electrics\tInstallation",days:2}),new gi({name:"Electrics\tFixes/ lamps",days:4}),new gi({name:"Electrics\t3Phases",days:1}),new gi({name:"Electrics\tEternet Cables",days:2}),new gi({name:"Electrics\tAlarm",days:2}),new gi({name:"HVAC\tPipes",days:3}),new gi({name:"HVAC\tMechanic installation",days:2})]})}getOutside(){return new Tm({section:_t.planningOutside,alias:"Outerside",steps:[new gi({name:"Walls\tPrep El/Cables etc",days:2}),new gi({name:"Walls\tCorners",days:2}),new gi({name:"Walls\tTrimming windows/ Doors",days:5}),new gi({name:"Walls\tWindow blinds",days:2}),new gi({name:"Walls\tFarstu preps",days:2}),new gi({name:"Walls\tInsulation",days:4}),new gi({name:"Walls\tOuter planks",days:8})]})}}return n.\u0275fac=function(t){return new(t||n)(G($w),G(qo),G(To),G(A8))},n.\u0275cmp=On({type:n,selectors:[["app-page-planning"]],features:[Xi([$w])],decls:18,vars:11,consts:[["src","/assets/svg/logo.svg"],["cdkScrollable","",2,"width","100%","overflow-x","scroll"],["scrollContainer",""],[4,"ngFor","ngForOf"],[3,"id"],[3,"click"],[2,"font-size","1rem"],[2,"width","fit-content"],[3,"columns","data","scrollContainer"]],template:function(t,i){1&t&&(O(0,"h1"),V(1,"Planning "),rt(2,"img",0),N(),O(3,"p"),V(4," todo "),rt(5,"br"),V(6),wa(7,"date"),rt(8,"br"),V(9),wa(10,"date"),rt(11,"br"),V(12),N(),O(13,"h3"),V(14," This page is still under construction.\n"),N(),O(15,"div",1,2),fn(17,gBt,12,16,"ng-container",3),N()),2&t&&(ae(6),si(" ",BA(7,5,i.minFirstDate,"dd-LL-YYYY")," "),ae(3),si(" ",BA(10,8,i.maxLastDate,"dd-LL-YYYY")," "),ae(3),c7(" ",i.totalWeeks," weeks || ",i.totalDays," days\n"),ae(5),Ve("ngForOf",i.tables))},dependencies:[C4,v9e,D8,pBt,$w],styles:["section[_ngcontent-%COMP%]{margin:0;padding:8px 4px 8px 16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{transition:.4s ease-in;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}"]}),n})()},{path:"",component:Syt,children:[{path:"house",component:Hyt},{path:"stairs",component:Oyt},{path:"facade",component:qyt},{path:"installations",component:Kyt},{path:"construction",component:$yt},{path:"house3d",component:WIt},{path:"wired",component:LIt},{path:"**",redirectTo:"house",pathMatch:"full"}]},{path:"**",redirectTo:"/house",pathMatch:"full"}];let ABt=(()=>{class n{constructor(t){t.addSvgIconSet("material-icons-outlined")}}return n.\u0275fac=function(t){return new(t||n)(Xe(m9))},n.\u0275mod=oi({type:n,bootstrap:[$be]}),n.\u0275inj=wn({providers:[Mu],imports:[Ej,El,qSe,aDe,EIe,xwe,hd,lJe,TIe.forRoot("passiv"),HIe.forRoot("G-W580DX5P7G"),iye.forRoot(mBt,{anchorScrolling:"enabled",scrollPositionRestoration:"disabled"})]}),n})();(function lge(){if(EW)throw new Error("Cannot enable prod mode after platform setup.");SW=!1})(),BAe().bootstrapModule(ABt).catch(n=>console.error(n))},1503:(Nt,et,Me)=>{"use strict";var Se=Me(3269);function Oe(He){var Fe=[1/0,1/0,-1/0,-1/0];return Se.coordEach(He,function(De){Fe[0]>De[0]&&(Fe[0]=De[0]),Fe[1]>De[1]&&(Fe[1]=De[1]),Fe[2]<De[0]&&(Fe[2]=De[0]),Fe[3]<De[1]&&(Fe[3]=De[1])}),Fe}Oe.default=Oe,et.Z=Oe},2972:function(Nt){Nt.exports=function(){"use strict";function Me(Oe,He,Fe,De,We){for(;De>Fe;){if(De-Fe>600){var ct=De-Fe+1,ft=He-Fe+1,Vt=Math.log(ct),Ct=.5*Math.exp(2*Vt/3),st=.5*Math.sqrt(Vt*Ct*(ct-Ct)/ct)*(ft-ct/2<0?-1:1);Me(Oe,He,Math.max(Fe,Math.floor(He-ft*Ct/ct+st)),Math.min(De,Math.floor(He+(ct-ft)*Ct/ct+st)),We)}var Ne=Oe[He],Ke=Fe,j=De;for(ue(Oe,Fe,He),We(Oe[De],Ne)>0&&ue(Oe,Fe,De);Ke<j;){for(ue(Oe,Ke,j),Ke++,j--;We(Oe[Ke],Ne)<0;)Ke++;for(;We(Oe[j],Ne)>0;)j--}0===We(Oe[Fe],Ne)?ue(Oe,Fe,j):ue(Oe,++j,De),j<=He&&(Fe=j+1),He<=j&&(De=j-1)}}function ue(Oe,He,Fe){var De=Oe[He];Oe[He]=Oe[Fe],Oe[Fe]=De}function Se(Oe,He){return Oe<He?-1:Oe>He?1:0}return function et(Oe,He,Fe,De,We){Me(Oe,He,Fe||0,De||Oe.length-1,We||Se)}}()},915:(Nt,et,Me)=>{"use strict";Nt.exports=Se,Nt.exports.default=Se;var ue=Me(2972);function Se(j,X){if(!(this instanceof Se))return new Se(j,X);this._maxEntries=Math.max(4,j||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),X&&this._initFormat(X),this.clear()}function Oe(j,X,Y){if(!Y)return X.indexOf(j);for(var we=0;we<X.length;we++)if(Y(j,X[we]))return we;return-1}function He(j,X){Fe(j,0,j.children.length,X,j)}function Fe(j,X,Y,we,Z){Z||(Z=Ne(null)),Z.minX=1/0,Z.minY=1/0,Z.maxX=-1/0,Z.maxY=-1/0;for(var ce,re=X;re<Y;re++)ce=j.children[re],De(Z,j.leaf?we(ce):ce);return Z}function De(j,X){return j.minX=Math.min(j.minX,X.minX),j.minY=Math.min(j.minY,X.minY),j.maxX=Math.max(j.maxX,X.maxX),j.maxY=Math.max(j.maxY,X.maxY),j}function We(j,X){return j.minX-X.minX}function ct(j,X){return j.minY-X.minY}function ft(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function Vt(j){return j.maxX-j.minX+(j.maxY-j.minY)}function Ct(j,X){return(Math.max(X.maxX,j.maxX)-Math.min(X.minX,j.minX))*(Math.max(X.maxY,j.maxY)-Math.min(X.minY,j.minY))}function st(j,X){var Y=Math.max(j.minX,X.minX),we=Math.max(j.minY,X.minY),Z=Math.min(j.maxX,X.maxX),re=Math.min(j.maxY,X.maxY);return Math.max(0,Z-Y)*Math.max(0,re-we)}function yt(j,X){return j.minX<=X.minX&&j.minY<=X.minY&&X.maxX<=j.maxX&&X.maxY<=j.maxY}function qt(j,X){return X.minX<=j.maxX&&X.minY<=j.maxY&&X.maxX>=j.minX&&X.maxY>=j.minY}function Ne(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(j,X,Y,we,Z){for(var ce,re=[X,Y];re.length;)!((Y=re.pop())-(X=re.pop())<=we)&&(ce=X+Math.ceil((Y-X)/we/2)*we,ue(j,ce,X,Y,Z),re.push(X,ce,ce,Y))}Se.prototype={all:function(){return this._all(this.data,[])},search:function(j){var X=this.data,Y=[],we=this.toBBox;if(!qt(j,X))return Y;for(var re,ce,$,je,Z=[];X;){for(re=0,ce=X.children.length;re<ce;re++)$=X.children[re],qt(j,je=X.leaf?we($):$)&&(X.leaf?Y.push($):yt(j,je)?this._all($,Y):Z.push($));X=Z.pop()}return Y},collides:function(j){var X=this.data,Y=this.toBBox;if(!qt(j,X))return!1;for(var Z,re,ce,$,we=[];X;){for(Z=0,re=X.children.length;Z<re;Z++)if(ce=X.children[Z],qt(j,$=X.leaf?Y(ce):ce)){if(X.leaf||yt(j,$))return!0;we.push(ce)}X=we.pop()}return!1},load:function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var X=0,Y=j.length;X<Y;X++)this.insert(j[X]);return this}var we=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===we.height)this._splitRoot(this.data,we);else{if(this.data.height<we.height){var Z=this.data;this.data=we,we=Z}this._insert(we,this.data.height-we.height-1,!0)}else this.data=we;return this},insert:function(j){return j&&this._insert(j,this.data.height-1),this},clear:function(){return this.data=Ne([]),this},remove:function(j,X){if(!j)return this;for(var ce,$,je,Ie,Y=this.data,we=this.toBBox(j),Z=[],re=[];Y||Z.length;){if(Y||(Y=Z.pop(),$=Z[Z.length-1],ce=re.pop(),Ie=!0),Y.leaf&&-1!==(je=Oe(j,Y.children,X)))return Y.children.splice(je,1),Z.push(Y),this._condense(Z),this;Ie||Y.leaf||!yt(Y,we)?$?(ce++,Y=$.children[ce],Ie=!1):Y=null:(Z.push(Y),re.push(ce),ce=0,$=Y,Y=Y.children[0])}return this},toBBox:function(j){return j},compareMinX:We,compareMinY:ct,toJSON:function(){return this.data},fromJSON:function(j){return this.data=j,this},_all:function(j,X){for(var Y=[];j;)j.leaf?X.push.apply(X,j.children):Y.push.apply(Y,j.children),j=Y.pop();return X},_build:function(j,X,Y,we){var ce,Z=Y-X+1,re=this._maxEntries;if(Z<=re)return He(ce=Ne(j.slice(X,Y+1)),this.toBBox),ce;we||(we=Math.ceil(Math.log(Z)/Math.log(re)),re=Math.ceil(Z/Math.pow(re,we-1))),(ce=Ne([])).leaf=!1,ce.height=we;var Ie,Pe,se,kt,$=Math.ceil(Z/re),je=$*Math.ceil(Math.sqrt(re));for(Ke(j,X,Y,je,this.compareMinX),Ie=X;Ie<=Y;Ie+=je)for(Ke(j,Ie,se=Math.min(Ie+je-1,Y),$,this.compareMinY),Pe=Ie;Pe<=se;Pe+=$)kt=Math.min(Pe+$-1,se),ce.children.push(this._build(j,Pe,kt,we-1));return He(ce,this.toBBox),ce},_chooseSubtree:function(j,X,Y,we){for(var Z,re,ce,$,je,Ie,Pe,se;we.push(X),!X.leaf&&we.length-1!==Y;){for(Pe=se=1/0,Z=0,re=X.children.length;Z<re;Z++)je=ft(ce=X.children[Z]),(Ie=Ct(j,ce)-je)<se?(se=Ie,Pe=je<Pe?je:Pe,$=ce):Ie===se&&je<Pe&&(Pe=je,$=ce);X=$||X.children[0]}return X},_insert:function(j,X,Y){var Z=Y?j:(0,this.toBBox)(j),re=[],ce=this._chooseSubtree(Z,this.data,X,re);for(ce.children.push(j),De(ce,Z);X>=0&&re[X].children.length>this._maxEntries;)this._split(re,X),X--;this._adjustParentBBoxes(Z,re,X)},_split:function(j,X){var Y=j[X],we=Y.children.length,Z=this._minEntries;this._chooseSplitAxis(Y,Z,we);var re=this._chooseSplitIndex(Y,Z,we),ce=Ne(Y.children.splice(re,Y.children.length-re));ce.height=Y.height,ce.leaf=Y.leaf,He(Y,this.toBBox),He(ce,this.toBBox),X?j[X-1].children.push(ce):this._splitRoot(Y,ce)},_splitRoot:function(j,X){this.data=Ne([j,X]),this.data.height=j.height+1,this.data.leaf=!1,He(this.data,this.toBBox)},_chooseSplitIndex:function(j,X,Y){var we,Z,re,ce,$,je,Ie,Pe;for(je=Ie=1/0,we=X;we<=Y-X;we++)ce=st(Z=Fe(j,0,we,this.toBBox),re=Fe(j,we,Y,this.toBBox)),$=ft(Z)+ft(re),ce<je?(je=ce,Pe=we,Ie=$<Ie?$:Ie):ce===je&&$<Ie&&(Ie=$,Pe=we);return Pe},_chooseSplitAxis:function(j,X,Y){var we=j.leaf?this.compareMinX:We,Z=j.leaf?this.compareMinY:ct;this._allDistMargin(j,X,Y,we)<this._allDistMargin(j,X,Y,Z)&&j.children.sort(we)},_allDistMargin:function(j,X,Y,we){j.children.sort(we);var je,Ie,Z=this.toBBox,re=Fe(j,0,X,Z),ce=Fe(j,Y-X,Y,Z),$=Vt(re)+Vt(ce);for(je=X;je<Y-X;je++)Ie=j.children[je],De(re,j.leaf?Z(Ie):Ie),$+=Vt(re);for(je=Y-X-1;je>=X;je--)Ie=j.children[je],De(ce,j.leaf?Z(Ie):Ie),$+=Vt(ce);return $},_adjustParentBBoxes:function(j,X,Y){for(var we=Y;we>=0;we--)De(X[we],j)},_condense:function(j){for(var Y,X=j.length-1;X>=0;X--)0===j[X].children.length?X>0?(Y=j[X-1].children).splice(Y.indexOf(j[X]),1):this.clear():He(j[X],this.toBBox)},_initFormat:function(j){var X=["return a"," - b",";"];this.compareMinX=new Function("a","b",X.join(j[0])),this.compareMinY=new Function("a","b",X.join(j[1])),this.toBBox=new Function("a","return {minX: a"+j[0]+", minY: a"+j[1]+", maxX: a"+j[2]+", maxY: a"+j[3]+"};")}}},8275:(Nt,et)=>{"use strict";function Me(Ie,Pe,se){void 0===se&&(se={});var kt={type:"Feature"};return(0===se.id||se.id)&&(kt.id=se.id),se.bbox&&(kt.bbox=se.bbox),kt.properties=Pe||{},kt.geometry=Ie,kt}function Se(Ie,Pe,se){if(void 0===se&&(se={}),!Ie)throw new Error("coordinates is required");if(!Array.isArray(Ie))throw new Error("coordinates must be an Array");if(Ie.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!re(Ie[0])||!re(Ie[1]))throw new Error("coordinates must contain numbers");return Me({type:"Point",coordinates:Ie},Pe,se)}function He(Ie,Pe,se){void 0===se&&(se={});for(var kt=0,At=Ie;kt<At.length;kt++){var xe=At[kt];if(xe.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var qe=0;qe<xe[xe.length-1].length;qe++)if(xe[xe.length-1][qe]!==xe[0][qe])throw new Error("First and last Position are not equivalent.")}return Me({type:"Polygon",coordinates:Ie},Pe,se)}function De(Ie,Pe,se){if(void 0===se&&(se={}),Ie.length<2)throw new Error("coordinates must be an array of two or more positions");return Me({type:"LineString",coordinates:Ie},Pe,se)}function ct(Ie,Pe){void 0===Pe&&(Pe={});var se={type:"FeatureCollection"};return Pe.id&&(se.id=Pe.id),Pe.bbox&&(se.bbox=Pe.bbox),se.features=Ie,se}function ft(Ie,Pe,se){return void 0===se&&(se={}),Me({type:"MultiLineString",coordinates:Ie},Pe,se)}function Vt(Ie,Pe,se){return void 0===se&&(se={}),Me({type:"MultiPoint",coordinates:Ie},Pe,se)}function Ct(Ie,Pe,se){return void 0===se&&(se={}),Me({type:"MultiPolygon",coordinates:Ie},Pe,se)}function qt(Ie,Pe){void 0===Pe&&(Pe="kilometers");var se=et.factors[Pe];if(!se)throw new Error(Pe+" units is invalid");return Ie*se}function Ne(Ie,Pe){void 0===Pe&&(Pe="kilometers");var se=et.factors[Pe];if(!se)throw new Error(Pe+" units is invalid");return Ie/se}function X(Ie){return Ie%(2*Math.PI)*180/Math.PI}function re(Ie){return!isNaN(Ie)&&null!==Ie&&!Array.isArray(Ie)}Object.defineProperty(et,"__esModule",{value:!0}),et.earthRadius=6371008.8,et.factors={centimeters:100*et.earthRadius,centimetres:100*et.earthRadius,degrees:et.earthRadius/111325,feet:3.28084*et.earthRadius,inches:39.37*et.earthRadius,kilometers:et.earthRadius/1e3,kilometres:et.earthRadius/1e3,meters:et.earthRadius,metres:et.earthRadius,miles:et.earthRadius/1609.344,millimeters:1e3*et.earthRadius,millimetres:1e3*et.earthRadius,nauticalmiles:et.earthRadius/1852,radians:1,yards:1.0936*et.earthRadius},et.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/et.earthRadius,yards:1.0936133},et.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},et.feature=Me,et.geometry=function ue(Ie,Pe,se){switch(void 0===se&&(se={}),Ie){case"Point":return Se(Pe).geometry;case"LineString":return De(Pe).geometry;case"Polygon":return He(Pe).geometry;case"MultiPoint":return Vt(Pe).geometry;case"MultiLineString":return ft(Pe).geometry;case"MultiPolygon":return Ct(Pe).geometry;default:throw new Error(Ie+" is invalid")}},et.point=Se,et.points=function Oe(Ie,Pe,se){return void 0===se&&(se={}),ct(Ie.map(function(kt){return Se(kt,Pe)}),se)},et.polygon=He,et.polygons=function Fe(Ie,Pe,se){return void 0===se&&(se={}),ct(Ie.map(function(kt){return He(kt,Pe)}),se)},et.lineString=De,et.lineStrings=function We(Ie,Pe,se){return void 0===se&&(se={}),ct(Ie.map(function(kt){return De(kt,Pe)}),se)},et.featureCollection=ct,et.multiLineString=ft,et.multiPoint=Vt,et.multiPolygon=Ct,et.geometryCollection=function st(Ie,Pe,se){return void 0===se&&(se={}),Me({type:"GeometryCollection",geometries:Ie},Pe,se)},et.round=function yt(Ie,Pe){if(void 0===Pe&&(Pe=0),Pe&&!(Pe>=0))throw new Error("precision must be a positive number");var se=Math.pow(10,Pe||0);return Math.round(Ie*se)/se},et.radiansToLength=qt,et.lengthToRadians=Ne,et.lengthToDegrees=function Ke(Ie,Pe){return X(Ne(Ie,Pe))},et.bearingToAzimuth=function j(Ie){var Pe=Ie%360;return Pe<0&&(Pe+=360),Pe},et.radiansToDegrees=X,et.degreesToRadians=function Y(Ie){return Ie%360*Math.PI/180},et.convertLength=function we(Ie,Pe,se){if(void 0===Pe&&(Pe="kilometers"),void 0===se&&(se="kilometers"),!(Ie>=0))throw new Error("length must be a positive number");return qt(Ne(Ie,Pe),se)},et.convertArea=function Z(Ie,Pe,se){if(void 0===Pe&&(Pe="meters"),void 0===se&&(se="kilometers"),!(Ie>=0))throw new Error("area must be a positive number");var kt=et.areaFactors[Pe];if(!kt)throw new Error("invalid original units");var At=et.areaFactors[se];if(!At)throw new Error("invalid final units");return Ie/kt*At},et.isNumber=re,et.isObject=function ce(Ie){return!!Ie&&Ie.constructor===Object},et.validateBBox=function $(Ie){if(!Ie)throw new Error("bbox is required");if(!Array.isArray(Ie))throw new Error("bbox must be an Array");if(4!==Ie.length&&6!==Ie.length)throw new Error("bbox must be an Array of 4 or 6 numbers");Ie.forEach(function(Pe){if(!re(Pe))throw new Error("bbox must only contain numbers")})},et.validateId=function je(Ie){if(!Ie)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof Ie))throw new Error("id must be a number or a string")}},3269:(Nt,et,Me)=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});var ue=Me(8275);function Se(Y,we,Z){if(null!==Y)for(var re,ce,$,je,Ie,Pe,se,xe,kt=0,At=0,qe=Y.type,Ce="FeatureCollection"===qe,Qe="Feature"===qe,it=Ce?Y.features.length:1,_e=0;_e<it;_e++){Ie=(xe=!!(se=Ce?Y.features[_e].geometry:Qe?Y.geometry:Y)&&"GeometryCollection"===se.type)?se.geometries.length:1;for(var St=0;St<Ie;St++){var Je=0,en=0;if(null!==(je=xe?se.geometries[St]:se)){Pe=je.coordinates;var vt=je.type;switch(kt=!Z||"Polygon"!==vt&&"MultiPolygon"!==vt?0:1,vt){case null:break;case"Point":if(!1===we(Pe,At,_e,Je,en))return!1;At++,Je++;break;case"LineString":case"MultiPoint":for(re=0;re<Pe.length;re++){if(!1===we(Pe[re],At,_e,Je,en))return!1;At++,"MultiPoint"===vt&&Je++}"LineString"===vt&&Je++;break;case"Polygon":case"MultiLineString":for(re=0;re<Pe.length;re++){for(ce=0;ce<Pe[re].length-kt;ce++){if(!1===we(Pe[re][ce],At,_e,Je,en))return!1;At++}"MultiLineString"===vt&&Je++,"Polygon"===vt&&en++}"Polygon"===vt&&Je++;break;case"MultiPolygon":for(re=0;re<Pe.length;re++){for(en=0,ce=0;ce<Pe[re].length;ce++){for($=0;$<Pe[re][ce].length-kt;$++){if(!1===we(Pe[re][ce][$],At,_e,Je,en))return!1;At++}en++}Je++}break;case"GeometryCollection":for(re=0;re<je.geometries.length;re++)if(!1===Se(je.geometries[re],we,Z))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function He(Y,we){var Z;switch(Y.type){case"FeatureCollection":for(Z=0;Z<Y.features.length&&!1!==we(Y.features[Z].properties,Z);Z++);break;case"Feature":we(Y.properties,0)}}function De(Y,we){if("Feature"===Y.type)we(Y,0);else if("FeatureCollection"===Y.type)for(var Z=0;Z<Y.features.length&&!1!==we(Y.features[Z],Z);Z++);}function ft(Y,we){var Z,re,ce,$,je,Ie,Pe,se,kt,At,xe=0,qe="FeatureCollection"===Y.type,Ce="Feature"===Y.type,Qe=qe?Y.features.length:1;for(Z=0;Z<Qe;Z++){for(se=qe?Y.features[Z].properties:Ce?Y.properties:{},kt=qe?Y.features[Z].bbox:Ce?Y.bbox:void 0,At=qe?Y.features[Z].id:Ce?Y.id:void 0,je=(Pe=!!(Ie=qe?Y.features[Z].geometry:Ce?Y.geometry:Y)&&"GeometryCollection"===Ie.type)?Ie.geometries.length:1,ce=0;ce<je;ce++)if(null!==($=Pe?Ie.geometries[ce]:Ie))switch($.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===we($,xe,se,kt,At))return!1;break;case"GeometryCollection":for(re=0;re<$.geometries.length;re++)if(!1===we($.geometries[re],xe,se,kt,At))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===we(null,xe,se,kt,At))return!1;xe++}}function Ct(Y,we){ft(Y,function(Z,re,ce,$,je){var Pe,Ie=null===Z?null:Z.type;switch(Ie){case null:case"Point":case"LineString":case"Polygon":return!1!==we(ue.feature(Z,ce,{bbox:$,id:je}),re,0)&&void 0}switch(Ie){case"MultiPoint":Pe="Point";break;case"MultiLineString":Pe="LineString";break;case"MultiPolygon":Pe="Polygon"}for(var se=0;se<Z.coordinates.length;se++)if(!1===we(ue.feature({type:Pe,coordinates:Z.coordinates[se]},ce),re,se))return!1})}function yt(Y,we){Ct(Y,function(Z,re,ce){var $=0;if(Z.geometry){var je=Z.geometry.type;if("Point"!==je&&"MultiPoint"!==je){var Ie,Pe=0,se=0,kt=0;if(!1===Se(Z,function(At,xe,qe,Ce,Qe){if(void 0===Ie||re>Pe||Ce>se||Qe>kt)return Ie=At,Pe=re,se=Ce,kt=Qe,void($=0);var it=ue.lineString([Ie,At],Z.properties);if(!1===we(it,re,ce,Qe,$))return!1;$++,Ie=At}))return!1}}})}function Ne(Y,we){if(!Y)throw new Error("geojson is required");Ct(Y,function(Z,re,ce){if(null!==Z.geometry){var je=Z.geometry.coordinates;switch(Z.geometry.type){case"LineString":if(!1===we(Z,re,ce,0,0))return!1;break;case"Polygon":for(var Ie=0;Ie<je.length;Ie++)if(!1===we(ue.lineString(je[Ie],Z.properties),re,ce,Ie))return!1}}})}et.coordAll=function ct(Y){var we=[];return Se(Y,function(Z){we.push(Z)}),we},et.coordEach=Se,et.coordReduce=function Oe(Y,we,Z,re){var ce=Z;return Se(Y,function($,je,Ie,Pe,se){ce=0===je&&void 0===Z?$:we(ce,$,je,Ie,Pe,se)},re),ce},et.featureEach=De,et.featureReduce=function We(Y,we,Z){var re=Z;return De(Y,function(ce,$){re=0===$&&void 0===Z?ce:we(re,ce,$)}),re},et.findPoint=function X(Y,we){if(!ue.isObject(we=we||{}))throw new Error("options is invalid");var Ie,Z=we.featureIndex||0,re=we.multiFeatureIndex||0,ce=we.geometryIndex||0,$=we.coordIndex||0,je=we.properties;switch(Y.type){case"FeatureCollection":Z<0&&(Z=Y.features.length+Z),je=je||Y.features[Z].properties,Ie=Y.features[Z].geometry;break;case"Feature":je=je||Y.properties,Ie=Y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ie=Y;break;default:throw new Error("geojson is invalid")}if(null===Ie)return null;var Pe=Ie.coordinates;switch(Ie.type){case"Point":return ue.point(Pe,je,we);case"MultiPoint":return re<0&&(re=Pe.length+re),ue.point(Pe[re],je,we);case"LineString":return $<0&&($=Pe.length+$),ue.point(Pe[$],je,we);case"Polygon":return ce<0&&(ce=Pe.length+ce),$<0&&($=Pe[ce].length+$),ue.point(Pe[ce][$],je,we);case"MultiLineString":return re<0&&(re=Pe.length+re),$<0&&($=Pe[re].length+$),ue.point(Pe[re][$],je,we);case"MultiPolygon":return re<0&&(re=Pe.length+re),ce<0&&(ce=Pe[re].length+ce),$<0&&($=Pe[re][ce].length-$),ue.point(Pe[re][ce][$],je,we)}throw new Error("geojson is invalid")},et.findSegment=function j(Y,we){if(!ue.isObject(we=we||{}))throw new Error("options is invalid");var Ie,Z=we.featureIndex||0,re=we.multiFeatureIndex||0,ce=we.geometryIndex||0,$=we.segmentIndex||0,je=we.properties;switch(Y.type){case"FeatureCollection":Z<0&&(Z=Y.features.length+Z),je=je||Y.features[Z].properties,Ie=Y.features[Z].geometry;break;case"Feature":je=je||Y.properties,Ie=Y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ie=Y;break;default:throw new Error("geojson is invalid")}if(null===Ie)return null;var Pe=Ie.coordinates;switch(Ie.type){case"Point":case"MultiPoint":return null;case"LineString":return $<0&&($=Pe.length+$-1),ue.lineString([Pe[$],Pe[$+1]],je,we);case"Polygon":return ce<0&&(ce=Pe.length+ce),$<0&&($=Pe[ce].length+$-1),ue.lineString([Pe[ce][$],Pe[ce][$+1]],je,we);case"MultiLineString":return re<0&&(re=Pe.length+re),$<0&&($=Pe[re].length+$-1),ue.lineString([Pe[re][$],Pe[re][$+1]],je,we);case"MultiPolygon":return re<0&&(re=Pe.length+re),ce<0&&(ce=Pe[re].length+ce),$<0&&($=Pe[re][ce].length-$-1),ue.lineString([Pe[re][ce][$],Pe[re][ce][$+1]],je,we)}throw new Error("geojson is invalid")},et.flattenEach=Ct,et.flattenReduce=function st(Y,we,Z){var re=Z;return Ct(Y,function(ce,$,je){re=0===$&&0===je&&void 0===Z?ce:we(re,ce,$,je)}),re},et.geomEach=ft,et.geomReduce=function Vt(Y,we,Z){var re=Z;return ft(Y,function(ce,$,je,Ie,Pe){re=0===$&&void 0===Z?ce:we(re,ce,$,je,Ie,Pe)}),re},et.lineEach=Ne,et.lineReduce=function Ke(Y,we,Z){var re=Z;return Ne(Y,function(ce,$,je,Ie){re=0===$&&void 0===Z?ce:we(re,ce,$,je,Ie)}),re},et.propEach=He,et.propReduce=function Fe(Y,we,Z){var re=Z;return He(Y,function(ce,$){re=0===$&&void 0===Z?ce:we(re,ce,$)}),re},et.segmentEach=yt,et.segmentReduce=function qt(Y,we,Z){var re=Z,ce=!1;return yt(Y,function($,je,Ie,Pe,se){re=!1===ce&&void 0===Z?$:we(re,$,je,Ie,Pe,se),ce=!0}),re}},545:function(Nt){Nt.exports=function(){"use strict";function Me(Oe,He,Fe,De,We){for(;De>Fe;){if(De-Fe>600){var ct=De-Fe+1,ft=He-Fe+1,Vt=Math.log(ct),Ct=.5*Math.exp(2*Vt/3),st=.5*Math.sqrt(Vt*Ct*(ct-Ct)/ct)*(ft-ct/2<0?-1:1);Me(Oe,He,Math.max(Fe,Math.floor(He-ft*Ct/ct+st)),Math.min(De,Math.floor(He+(ct-ft)*Ct/ct+st)),We)}var Ne=Oe[He],Ke=Fe,j=De;for(ue(Oe,Fe,He),We(Oe[De],Ne)>0&&ue(Oe,Fe,De);Ke<j;){for(ue(Oe,Ke,j),Ke++,j--;We(Oe[Ke],Ne)<0;)Ke++;for(;We(Oe[j],Ne)>0;)j--}0===We(Oe[Fe],Ne)?ue(Oe,Fe,j):ue(Oe,++j,De),j<=He&&(Fe=j+1),He<=j&&(De=j-1)}}function ue(Oe,He,Fe){var De=Oe[He];Oe[He]=Oe[Fe],Oe[Fe]=De}function Se(Oe,He){return Oe<He?-1:Oe>He?1:0}return function et(Oe,He,Fe,De,We){Me(Oe,He,Fe||0,De||Oe.length-1,We||Se)}}()},3237:(Nt,et,Me)=>{"use strict";Nt.exports=Se,Nt.exports.default=Se;var ue=Me(545);function Se(j,X){if(!(this instanceof Se))return new Se(j,X);this._maxEntries=Math.max(4,j||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),X&&this._initFormat(X),this.clear()}function Oe(j,X,Y){if(!Y)return X.indexOf(j);for(var we=0;we<X.length;we++)if(Y(j,X[we]))return we;return-1}function He(j,X){Fe(j,0,j.children.length,X,j)}function Fe(j,X,Y,we,Z){Z||(Z=Ne(null)),Z.minX=1/0,Z.minY=1/0,Z.maxX=-1/0,Z.maxY=-1/0;for(var ce,re=X;re<Y;re++)ce=j.children[re],De(Z,j.leaf?we(ce):ce);return Z}function De(j,X){return j.minX=Math.min(j.minX,X.minX),j.minY=Math.min(j.minY,X.minY),j.maxX=Math.max(j.maxX,X.maxX),j.maxY=Math.max(j.maxY,X.maxY),j}function We(j,X){return j.minX-X.minX}function ct(j,X){return j.minY-X.minY}function ft(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function Vt(j){return j.maxX-j.minX+(j.maxY-j.minY)}function Ct(j,X){return(Math.max(X.maxX,j.maxX)-Math.min(X.minX,j.minX))*(Math.max(X.maxY,j.maxY)-Math.min(X.minY,j.minY))}function st(j,X){var Y=Math.max(j.minX,X.minX),we=Math.max(j.minY,X.minY),Z=Math.min(j.maxX,X.maxX),re=Math.min(j.maxY,X.maxY);return Math.max(0,Z-Y)*Math.max(0,re-we)}function yt(j,X){return j.minX<=X.minX&&j.minY<=X.minY&&X.maxX<=j.maxX&&X.maxY<=j.maxY}function qt(j,X){return X.minX<=j.maxX&&X.minY<=j.maxY&&X.maxX>=j.minX&&X.maxY>=j.minY}function Ne(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(j,X,Y,we,Z){for(var ce,re=[X,Y];re.length;)!((Y=re.pop())-(X=re.pop())<=we)&&(ce=X+Math.ceil((Y-X)/we/2)*we,ue(j,ce,X,Y,Z),re.push(X,ce,ce,Y))}Se.prototype={all:function(){return this._all(this.data,[])},search:function(j){var X=this.data,Y=[],we=this.toBBox;if(!qt(j,X))return Y;for(var re,ce,$,je,Z=[];X;){for(re=0,ce=X.children.length;re<ce;re++)$=X.children[re],qt(j,je=X.leaf?we($):$)&&(X.leaf?Y.push($):yt(j,je)?this._all($,Y):Z.push($));X=Z.pop()}return Y},collides:function(j){var X=this.data,Y=this.toBBox;if(!qt(j,X))return!1;for(var Z,re,ce,$,we=[];X;){for(Z=0,re=X.children.length;Z<re;Z++)if(ce=X.children[Z],qt(j,$=X.leaf?Y(ce):ce)){if(X.leaf||yt(j,$))return!0;we.push(ce)}X=we.pop()}return!1},load:function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var X=0,Y=j.length;X<Y;X++)this.insert(j[X]);return this}var we=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===we.height)this._splitRoot(this.data,we);else{if(this.data.height<we.height){var Z=this.data;this.data=we,we=Z}this._insert(we,this.data.height-we.height-1,!0)}else this.data=we;return this},insert:function(j){return j&&this._insert(j,this.data.height-1),this},clear:function(){return this.data=Ne([]),this},remove:function(j,X){if(!j)return this;for(var ce,$,je,Ie,Y=this.data,we=this.toBBox(j),Z=[],re=[];Y||Z.length;){if(Y||(Y=Z.pop(),$=Z[Z.length-1],ce=re.pop(),Ie=!0),Y.leaf&&-1!==(je=Oe(j,Y.children,X)))return Y.children.splice(je,1),Z.push(Y),this._condense(Z),this;Ie||Y.leaf||!yt(Y,we)?$?(ce++,Y=$.children[ce],Ie=!1):Y=null:(Z.push(Y),re.push(ce),ce=0,$=Y,Y=Y.children[0])}return this},toBBox:function(j){return j},compareMinX:We,compareMinY:ct,toJSON:function(){return this.data},fromJSON:function(j){return this.data=j,this},_all:function(j,X){for(var Y=[];j;)j.leaf?X.push.apply(X,j.children):Y.push.apply(Y,j.children),j=Y.pop();return X},_build:function(j,X,Y,we){var ce,Z=Y-X+1,re=this._maxEntries;if(Z<=re)return He(ce=Ne(j.slice(X,Y+1)),this.toBBox),ce;we||(we=Math.ceil(Math.log(Z)/Math.log(re)),re=Math.ceil(Z/Math.pow(re,we-1))),(ce=Ne([])).leaf=!1,ce.height=we;var Ie,Pe,se,kt,$=Math.ceil(Z/re),je=$*Math.ceil(Math.sqrt(re));for(Ke(j,X,Y,je,this.compareMinX),Ie=X;Ie<=Y;Ie+=je)for(Ke(j,Ie,se=Math.min(Ie+je-1,Y),$,this.compareMinY),Pe=Ie;Pe<=se;Pe+=$)kt=Math.min(Pe+$-1,se),ce.children.push(this._build(j,Pe,kt,we-1));return He(ce,this.toBBox),ce},_chooseSubtree:function(j,X,Y,we){for(var Z,re,ce,$,je,Ie,Pe,se;we.push(X),!X.leaf&&we.length-1!==Y;){for(Pe=se=1/0,Z=0,re=X.children.length;Z<re;Z++)je=ft(ce=X.children[Z]),(Ie=Ct(j,ce)-je)<se?(se=Ie,Pe=je<Pe?je:Pe,$=ce):Ie===se&&je<Pe&&(Pe=je,$=ce);X=$||X.children[0]}return X},_insert:function(j,X,Y){var Z=Y?j:(0,this.toBBox)(j),re=[],ce=this._chooseSubtree(Z,this.data,X,re);for(ce.children.push(j),De(ce,Z);X>=0&&re[X].children.length>this._maxEntries;)this._split(re,X),X--;this._adjustParentBBoxes(Z,re,X)},_split:function(j,X){var Y=j[X],we=Y.children.length,Z=this._minEntries;this._chooseSplitAxis(Y,Z,we);var re=this._chooseSplitIndex(Y,Z,we),ce=Ne(Y.children.splice(re,Y.children.length-re));ce.height=Y.height,ce.leaf=Y.leaf,He(Y,this.toBBox),He(ce,this.toBBox),X?j[X-1].children.push(ce):this._splitRoot(Y,ce)},_splitRoot:function(j,X){this.data=Ne([j,X]),this.data.height=j.height+1,this.data.leaf=!1,He(this.data,this.toBBox)},_chooseSplitIndex:function(j,X,Y){var we,Z,re,ce,$,je,Ie,Pe;for(je=Ie=1/0,we=X;we<=Y-X;we++)ce=st(Z=Fe(j,0,we,this.toBBox),re=Fe(j,we,Y,this.toBBox)),$=ft(Z)+ft(re),ce<je?(je=ce,Pe=we,Ie=$<Ie?$:Ie):ce===je&&$<Ie&&(Ie=$,Pe=we);return Pe},_chooseSplitAxis:function(j,X,Y){var we=j.leaf?this.compareMinX:We,Z=j.leaf?this.compareMinY:ct;this._allDistMargin(j,X,Y,we)<this._allDistMargin(j,X,Y,Z)&&j.children.sort(we)},_allDistMargin:function(j,X,Y,we){j.children.sort(we);var je,Ie,Z=this.toBBox,re=Fe(j,0,X,Z),ce=Fe(j,Y-X,Y,Z),$=Vt(re)+Vt(ce);for(je=X;je<Y-X;je++)Ie=j.children[je],De(re,j.leaf?Z(Ie):Ie),$+=Vt(re);for(je=Y-X-1;je>=X;je--)Ie=j.children[je],De(ce,j.leaf?Z(Ie):Ie),$+=Vt(ce);return $},_adjustParentBBoxes:function(j,X,Y){for(var we=Y;we>=0;we--)De(X[we],j)},_condense:function(j){for(var Y,X=j.length-1;X>=0;X--)0===j[X].children.length?X>0?(Y=j[X-1].children).splice(Y.indexOf(j[X]),1):this.clear():He(j[X],this.toBBox)},_initFormat:function(j){var X=["return a"," - b",";"];this.compareMinX=new Function("a","b",X.join(j[0])),this.compareMinY=new Function("a","b",X.join(j[1])),this.toBBox=new Function("a","return {minX: a"+j[0]+", minY: a"+j[1]+", maxX: a"+j[2]+", maxY: a"+j[3]+"};")}}},5834:(Nt,et,Me)=>{"use strict";var ue=Me(5203),Se=Me(5685),Oe=Se(ue("String.prototype.indexOf"));Nt.exports=function(Fe,De){var We=ue(Fe,!!De);return"function"==typeof We&&Oe(Fe,".prototype.")>-1?Se(We):We}},5685:(Nt,et,Me)=>{"use strict";var ue=Me(4444),Se=Me(5203),Oe=Se("%Function.prototype.apply%"),He=Se("%Function.prototype.call%"),Fe=Se("%Reflect.apply%",!0)||ue.call(He,Oe),De=Se("%Object.getOwnPropertyDescriptor%",!0),We=Se("%Object.defineProperty%",!0),ct=Se("%Math.max%");if(We)try{We({},"a",{value:1})}catch{We=null}Nt.exports=function(Ct){var st=Fe(ue,He,arguments);if(De&&We){var yt=De(st,"length");yt.configurable&&We(st,"length",{value:1+ct(0,Ct.length-(arguments.length-1))})}return st};var ft=function(){return Fe(ue,Oe,arguments)};We?We(Nt.exports,"apply",{value:ft}):Nt.exports.apply=ft},1335:(Nt,et,Me)=>{"use strict";var ue=Me(2402),Se=Me(7253),Oe=Me(3870),He=Me(5485).orient2d;function Fe(Z,re,ce){re=Math.max(0,void 0===re?2:re),ce=ce||0;var $=function qt(Z){for(var re=Z[0],ce=Z[0],$=Z[0],je=Z[0],Ie=0;Ie<Z.length;Ie++){var Pe=Z[Ie];Pe[0]<re[0]&&(re=Pe),Pe[0]>$[0]&&($=Pe),Pe[1]<ce[1]&&(ce=Pe),Pe[1]>je[1]&&(je=Pe)}var se=[re,ce,$,je],kt=se.slice();for(Ie=0;Ie<Z.length;Ie++)Oe(Z[Ie],se)||kt.push(Z[Ie]);return function we(Z){Z.sort(Y);for(var re=[],ce=0;ce<Z.length;ce++){for(;re.length>=2&&Ct(re[re.length-2],re[re.length-1],Z[ce])<=0;)re.pop();re.push(Z[ce])}for(var $=[],je=Z.length-1;je>=0;je--){for(;$.length>=2&&Ct($[$.length-2],$[$.length-1],Z[je])<=0;)$.pop();$.push(Z[je])}return $.pop(),re.pop(),re.concat($)}(kt)}(Z),je=new ue(16);je.toBBox=function(en){return{minX:en[0],minY:en[1],maxX:en[0],maxY:en[1]}},je.compareMinX=function(en,vt){return en[0]-vt[0]},je.compareMinY=function(en,vt){return en[1]-vt[1]},je.load(Z);for(var se,Ie=[],Pe=0;Pe<$.length;Pe++){var kt=$[Pe];je.remove(kt),se=Ne(kt,se),Ie.push(se)}var At=new ue(16);for(Pe=0;Pe<Ie.length;Pe++)At.insert(yt(Ie[Pe]));for(var xe=re*re,qe=ce*ce;Ie.length;){var Ce=Ie.shift(),Qe=Ce.p,it=Ce.next.p,_e=Ke(Qe,it);if(!(_e<qe)){var St=_e/xe;(kt=De(je,Ce.prev.p,Qe,it,Ce.next.next.p,St,At))&&Math.min(Ke(kt,Qe),Ke(kt,it))<=St&&(Ie.push(Ce),Ie.push(Ne(kt,Ce)),je.remove(kt),At.remove(Ce),At.insert(yt(Ce)),At.insert(yt(Ce.next)))}}Ce=se;var Je=[];do{Je.push(Ce.p),Ce=Ce.next}while(Ce!==se);return Je.push(Ce.p),Je}function De(Z,re,ce,$,je,Ie,Pe){for(var se=new Se([],We),kt=Z.data;kt;){for(var At=0;At<kt.children.length;At++){var xe=kt.children[At],qe=kt.leaf?j(xe,ce,$):ct(ce,$,xe);qe>Ie||se.push({node:xe,dist:qe})}for(;se.length&&!se.peek().node.children;){var Ce=se.pop(),Qe=Ce.node,it=j(Qe,re,ce),_e=j(Qe,$,je);if(Ce.dist<it&&Ce.dist<_e&&Vt(ce,Qe,Pe)&&Vt($,Qe,Pe))return Qe}(kt=se.pop())&&(kt=kt.node)}return null}function We(Z,re){return Z.dist-re.dist}function ct(Z,re,ce){if(ft(Z,ce)||ft(re,ce))return 0;var $=X(Z[0],Z[1],re[0],re[1],ce.minX,ce.minY,ce.maxX,ce.minY);if(0===$)return 0;var je=X(Z[0],Z[1],re[0],re[1],ce.minX,ce.minY,ce.minX,ce.maxY);if(0===je)return 0;var Ie=X(Z[0],Z[1],re[0],re[1],ce.maxX,ce.minY,ce.maxX,ce.maxY);if(0===Ie)return 0;var Pe=X(Z[0],Z[1],re[0],re[1],ce.minX,ce.maxY,ce.maxX,ce.maxY);return 0===Pe?0:Math.min($,je,Ie,Pe)}function ft(Z,re){return Z[0]>=re.minX&&Z[0]<=re.maxX&&Z[1]>=re.minY&&Z[1]<=re.maxY}function Vt(Z,re,ce){for(var $=Math.min(Z[0],re[0]),je=Math.min(Z[1],re[1]),Ie=Math.max(Z[0],re[0]),Pe=Math.max(Z[1],re[1]),se=ce.search({minX:$,minY:je,maxX:Ie,maxY:Pe}),kt=0;kt<se.length;kt++)if(st(se[kt].p,se[kt].next.p,Z,re))return!1;return!0}function Ct(Z,re,ce){return He(Z[0],Z[1],re[0],re[1],ce[0],ce[1])}function st(Z,re,ce,$){return Z!==$&&re!==ce&&Ct(Z,re,ce)>0!=Ct(Z,re,$)>0&&Ct(ce,$,Z)>0!=Ct(ce,$,re)>0}function yt(Z){var re=Z.p,ce=Z.next.p;return Z.minX=Math.min(re[0],ce[0]),Z.minY=Math.min(re[1],ce[1]),Z.maxX=Math.max(re[0],ce[0]),Z.maxY=Math.max(re[1],ce[1]),Z}function Ne(Z,re){var ce={p:Z,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return re?(ce.next=re.next,ce.prev=re,re.next.prev=ce,re.next=ce):(ce.prev=ce,ce.next=ce),ce}function Ke(Z,re){var ce=Z[0]-re[0],$=Z[1]-re[1];return ce*ce+$*$}function j(Z,re,ce){var $=re[0],je=re[1],Ie=ce[0]-$,Pe=ce[1]-je;if(0!==Ie||0!==Pe){var se=((Z[0]-$)*Ie+(Z[1]-je)*Pe)/(Ie*Ie+Pe*Pe);se>1?($=ce[0],je=ce[1]):se>0&&($+=Ie*se,je+=Pe*se)}return(Ie=Z[0]-$)*Ie+(Pe=Z[1]-je)*Pe}function X(Z,re,ce,$,je,Ie,Pe,se){var Mn,yn,ci,$t,kt=ce-Z,At=$-re,xe=Pe-je,qe=se-Ie,Ce=Z-je,Qe=re-Ie,it=kt*kt+At*At,_e=kt*xe+At*qe,St=xe*xe+qe*qe,Je=kt*Ce+At*Qe,en=xe*Ce+qe*Qe,vt=it*St-_e*_e,$n=vt,rn=vt;0===vt?(yn=0,$n=1,$t=en,rn=St):($t=it*en-_e*Je,(yn=_e*en-St*Je)<0?(yn=0,$t=en,rn=St):yn>$n&&(yn=$n,$t=en+_e,rn=St)),$t<0?($t=0,-Je<0?yn=0:-Je>it?yn=$n:(yn=-Je,$n=it)):$t>rn&&($t=rn,-Je+_e<0?yn=0:-Je+_e>it?yn=$n:(yn=-Je+_e,$n=it));var mi=(1-(ci=0===$t?0:$t/rn))*je+ci*Pe-((1-(Mn=0===yn?0:yn/$n))*Z+Mn*ce),nt=(1-ci)*Ie+ci*se-((1-Mn)*re+Mn*$);return mi*mi+nt*nt}function Y(Z,re){return Z[0]===re[0]?Z[1]-re[1]:Z[0]-re[0]}Se.default&&(Se=Se.default),Nt.exports=Fe,Nt.exports.default=Fe},5485:function(Nt,et){!function(Me){"use strict";function Oe(yt,qt,Ne,Ke,j){let X,Y,we,Z,re=qt[0],ce=Ke[0],$=0,je=0;ce>re==ce>-re?(X=re,re=qt[++$]):(X=ce,ce=Ke[++je]);let Ie=0;if($<yt&&je<Ne)for(ce>re==ce>-re?(we=X-((Y=re+X)-re),re=qt[++$]):(we=X-((Y=ce+X)-ce),ce=Ke[++je]),X=Y,0!==we&&(j[Ie++]=we);$<yt&&je<Ne;)ce>re==ce>-re?(we=X-((Y=X+re)-(Z=Y-X))+(re-Z),re=qt[++$]):(we=X-((Y=X+ce)-(Z=Y-X))+(ce-Z),ce=Ke[++je]),X=Y,0!==we&&(j[Ie++]=we);for(;$<yt;)we=X-((Y=X+re)-(Z=Y-X))+(re-Z),re=qt[++$],X=Y,0!==we&&(j[Ie++]=we);for(;je<Ne;)we=X-((Y=X+ce)-(Z=Y-X))+(ce-Z),ce=Ke[++je],X=Y,0!==we&&(j[Ie++]=we);return 0===X&&0!==Ie||(j[Ie++]=X),Ie}function He(yt){return new Float64Array(yt)}const ct=He(4),ft=He(8),Vt=He(12),Ct=He(16),st=He(4);Me.orient2d=function(yt,qt,Ne,Ke,j,X){const Y=(qt-X)*(Ne-j),we=(yt-j)*(Ke-X),Z=Y-we;if(0===Y||0===we||Y>0!=we>0)return Z;const re=Math.abs(Y+we);return Math.abs(Z)>=33306690738754716e-32*re?Z:-function(ce,$,je,Ie,Pe,se,kt){let At,xe,qe,Ce,Qe,it,_e,St,Je,en,vt,Mn,yn,ci,$t,$n,rn,Ds;const As=ce-Pe,$s=je-Pe,di=$-se,mi=Ie-se;Qe=($t=(St=As-(_e=(it=134217729*As)-(it-As)))*(en=mi-(Je=(it=134217729*mi)-(it-mi)))-((ci=As*mi)-_e*Je-St*Je-_e*en))-(vt=$t-(rn=(St=di-(_e=(it=134217729*di)-(it-di)))*(en=$s-(Je=(it=134217729*$s)-(it-$s)))-(($n=di*$s)-_e*Je-St*Je-_e*en))),ct[0]=$t-(vt+Qe)+(Qe-rn),Qe=(yn=ci-((Mn=ci+vt)-(Qe=Mn-ci))+(vt-Qe))-(vt=yn-$n),ct[1]=yn-(vt+Qe)+(Qe-$n),Qe=(Ds=Mn+vt)-Mn,ct[2]=Mn-(Ds-Qe)+(vt-Qe),ct[3]=Ds;let nt=function($e,mt){let Ut=mt[0];for(let Kt=1;Kt<4;Kt++)Ut+=mt[Kt];return Ut}(0,ct),le=22204460492503146e-32*kt;if(nt>=le||-nt>=le||(At=ce-(As+(Qe=ce-As))+(Qe-Pe),qe=je-($s+(Qe=je-$s))+(Qe-Pe),xe=$-(di+(Qe=$-di))+(Qe-se),Ce=Ie-(mi+(Qe=Ie-mi))+(Qe-se),0===At&&0===xe&&0===qe&&0===Ce)||(le=11093356479670487e-47*kt+33306690738754706e-32*Math.abs(nt),(nt+=As*Ce+mi*At-(di*qe+$s*xe))>=le||-nt>=le))return nt;Qe=($t=(St=At-(_e=(it=134217729*At)-(it-At)))*(en=mi-(Je=(it=134217729*mi)-(it-mi)))-((ci=At*mi)-_e*Je-St*Je-_e*en))-(vt=$t-(rn=(St=xe-(_e=(it=134217729*xe)-(it-xe)))*(en=$s-(Je=(it=134217729*$s)-(it-$s)))-(($n=xe*$s)-_e*Je-St*Je-_e*en))),st[0]=$t-(vt+Qe)+(Qe-rn),Qe=(yn=ci-((Mn=ci+vt)-(Qe=Mn-ci))+(vt-Qe))-(vt=yn-$n),st[1]=yn-(vt+Qe)+(Qe-$n),Qe=(Ds=Mn+vt)-Mn,st[2]=Mn-(Ds-Qe)+(vt-Qe),st[3]=Ds;const ee=Oe(4,ct,4,st,ft);Qe=($t=(St=As-(_e=(it=134217729*As)-(it-As)))*(en=Ce-(Je=(it=134217729*Ce)-(it-Ce)))-((ci=As*Ce)-_e*Je-St*Je-_e*en))-(vt=$t-(rn=(St=di-(_e=(it=134217729*di)-(it-di)))*(en=qe-(Je=(it=134217729*qe)-(it-qe)))-(($n=di*qe)-_e*Je-St*Je-_e*en))),st[0]=$t-(vt+Qe)+(Qe-rn),Qe=(yn=ci-((Mn=ci+vt)-(Qe=Mn-ci))+(vt-Qe))-(vt=yn-$n),st[1]=yn-(vt+Qe)+(Qe-$n),Qe=(Ds=Mn+vt)-Mn,st[2]=Mn-(Ds-Qe)+(vt-Qe),st[3]=Ds;const J=Oe(ee,ft,4,st,Vt);Qe=($t=(St=At-(_e=(it=134217729*At)-(it-At)))*(en=Ce-(Je=(it=134217729*Ce)-(it-Ce)))-((ci=At*Ce)-_e*Je-St*Je-_e*en))-(vt=$t-(rn=(St=xe-(_e=(it=134217729*xe)-(it-xe)))*(en=qe-(Je=(it=134217729*qe)-(it-qe)))-(($n=xe*qe)-_e*Je-St*Je-_e*en))),st[0]=$t-(vt+Qe)+(Qe-rn),Qe=(yn=ci-((Mn=ci+vt)-(Qe=Mn-ci))+(vt-Qe))-(vt=yn-$n),st[1]=yn-(vt+Qe)+(Qe-$n),Qe=(Ds=Mn+vt)-Mn,st[2]=Mn-(Ds-Qe)+(vt-Qe),st[3]=Ds;const Ee=Oe(J,Vt,4,st,Ct);return Ct[Ee-1]}(yt,qt,Ne,Ke,j,X,re)},Me.orient2dfast=function(yt,qt,Ne,Ke,j,X){return(qt-X)*(Ne-j)-(yt-j)*(Ke-X)},Object.defineProperty(Me,"__esModule",{value:!0})}(et)},6952:(Nt,et,Me)=>{var ue=Me(1356),Se=Me(3407),Oe=Me(2e3),He=Me(2342),Fe=Me(9235),De=Me(2374),We=Date.prototype.getTime;function ft(st){return null==st}function Vt(st){return!(!st||"object"!=typeof st||"number"!=typeof st.length||"function"!=typeof st.copy||"function"!=typeof st.slice||st.length>0&&"number"!=typeof st[0])}Nt.exports=function ct(st,yt,qt){var Ne=qt||{};return!!(Ne.strict?Oe(st,yt):st===yt)||(!st||!yt||"object"!=typeof st&&"object"!=typeof yt?Ne.strict?Oe(st,yt):st==yt:function Ct(st,yt,qt){var Ne,Ke;if(typeof st!=typeof yt||ft(st)||ft(yt)||st.prototype!==yt.prototype||Se(st)!==Se(yt))return!1;var j=He(st),X=He(yt);if(j!==X)return!1;if(j||X)return st.source===yt.source&&Fe(st)===Fe(yt);if(De(st)&&De(yt))return We.call(st)===We.call(yt);var Y=Vt(st),we=Vt(yt);if(Y!==we)return!1;if(Y||we){if(st.length!==yt.length)return!1;for(Ne=0;Ne<st.length;Ne++)if(st[Ne]!==yt[Ne])return!1;return!0}if(typeof st!=typeof yt)return!1;try{var Z=ue(st),re=ue(yt)}catch{return!1}if(Z.length!==re.length)return!1;for(Z.sort(),re.sort(),Ne=Z.length-1;Ne>=0;Ne--)if(Z[Ne]!=re[Ne])return!1;for(Ne=Z.length-1;Ne>=0;Ne--)if(!ct(st[Ke=Z[Ne]],yt[Ke],qt))return!1;return!0}(st,yt,Ne))}},2358:(Nt,et,Me)=>{"use strict";var ue=Me(1356),Se="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Oe=Object.prototype.toString,He=Array.prototype.concat,Fe=Object.defineProperty,We=Me(7027)(),ct=Fe&&We,ft=function(Ct,st,yt,qt){st in Ct&&(!function(Ct){return"function"==typeof Ct&&"[object Function]"===Oe.call(Ct)}(qt)||!qt())||(ct?Fe(Ct,st,{configurable:!0,enumerable:!1,value:yt,writable:!0}):Ct[st]=yt)},Vt=function(Ct,st){var yt=arguments.length>2?arguments[2]:{},qt=ue(st);Se&&(qt=He.call(qt,Object.getOwnPropertySymbols(st)));for(var Ne=0;Ne<qt.length;Ne+=1)ft(Ct,qt[Ne],st[qt[Ne]],yt[qt[Ne]])};Vt.supportsDescriptors=!!ct,Nt.exports=Vt},1817:Nt=>{function et(Me,ue,Se,Oe){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(Me,ue,Se,Oe)}et.prototype.run=function(Me,ue,Se,Oe){this._init(Me,ue,Se,Oe);for(var He=0;He<this._datasetLength;He++)if(1!==this._visited[He]){this._visited[He]=1;var Fe=this._regionQuery(He);if(Fe.length<this.minPts)this.noise.push(He);else{var De=this.clusters.length;this.clusters.push([]),this._addToCluster(He,De),this._expandCluster(De,Fe)}}return this.clusters},et.prototype._init=function(Me,ue,Se,Oe){if(Me){if(!(Me instanceof Array))throw Error("Dataset must be of type array, "+typeof Me+" given");this.dataset=Me,this.clusters=[],this.noise=[],this._datasetLength=Me.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}ue&&(this.epsilon=ue),Se&&(this.minPts=Se),Oe&&(this.distance=Oe)},et.prototype._expandCluster=function(Me,ue){for(var Se=0;Se<ue.length;Se++){var Oe=ue[Se];if(1!==this._visited[Oe]){this._visited[Oe]=1;var He=this._regionQuery(Oe);He.length>=this.minPts&&(ue=this._mergeArrays(ue,He))}1!==this._assigned[Oe]&&this._addToCluster(Oe,Me)}},et.prototype._addToCluster=function(Me,ue){this.clusters[ue].push(Me),this._assigned[Me]=1},et.prototype._regionQuery=function(Me){for(var ue=[],Se=0;Se<this._datasetLength;Se++)this.distance(this.dataset[Me],this.dataset[Se])<this.epsilon&&ue.push(Se);return ue},et.prototype._mergeArrays=function(Me,ue){for(var Se=ue.length,Oe=0;Oe<Se;Oe++){var He=ue[Oe];Me.indexOf(He)<0&&Me.push(He)}return Me},et.prototype._euclideanDistance=function(Me,ue){for(var Se=0,Oe=Math.min(Me.length,ue.length);Oe--;)Se+=(Me[Oe]-ue[Oe])*(Me[Oe]-ue[Oe]);return Math.sqrt(Se)},Nt.exports&&(Nt.exports=et)},4273:Nt=>{function et(Me,ue,Se){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(Me,ue,Se)}et.prototype.init=function(Me,ue,Se){this.assignments=[],this.centroids=[],typeof Me<"u"&&(this.dataset=Me),typeof ue<"u"&&(this.k=ue),typeof Se<"u"&&(this.distance=Se)},et.prototype.run=function(Me,ue){this.init(Me,ue);for(var Se=this.dataset.length,Oe=0;Oe<this.k;Oe++)this.centroids[Oe]=this.randomCentroid();for(var He=!0;He;){He=this.assign();for(var Fe=0;Fe<this.k;Fe++){for(var De=new Array(Vt),We=0,ct=0;ct<Vt;ct++)De[ct]=0;for(var ft=0;ft<Se;ft++){var Vt=this.dataset[ft].length;if(Fe===this.assignments[ft]){for(ct=0;ct<Vt;ct++)De[ct]+=this.dataset[ft][ct];We++}}if(We>0){for(ct=0;ct<Vt;ct++)De[ct]/=We;this.centroids[Fe]=De}else this.centroids[Fe]=this.randomCentroid(),He=!0}}return this.getClusters()},et.prototype.randomCentroid=function(){var ue,Se,Me=this.dataset.length-1;do{Se=Math.round(Math.random()*Me),ue=this.dataset[Se]}while(this.centroids.indexOf(ue)>=0);return ue},et.prototype.assign=function(){for(var Se,Me=!1,ue=this.dataset.length,Oe=0;Oe<ue;Oe++)(Se=this.argmin(this.dataset[Oe],this.centroids,this.distance))!=this.assignments[Oe]&&(this.assignments[Oe]=Se,Me=!0);return Me},et.prototype.getClusters=function(){for(var ue,Me=new Array(this.k),Se=0;Se<this.assignments.length;Se++)typeof Me[ue=this.assignments[Se]]>"u"&&(Me[ue]=[]),Me[ue].push(Se);return Me},et.prototype.argmin=function(Me,ue,Se){for(var De,Oe=Number.MAX_VALUE,He=0,Fe=ue.length,We=0;We<Fe;We++)(De=Se(Me,ue[We]))<Oe&&(Oe=De,He=We);return He},et.prototype.distance=function(Me,ue){for(var Se=0,Oe=Math.min(Me.length,ue.length);Oe--;){var He=Me[Oe]-ue[Oe];Se+=He*He}return Math.sqrt(Se)},Nt.exports&&(Nt.exports=et)},8680:(Nt,et,Me)=>{if(Nt.exports)var ue=Me(8759);function Se(Oe,He,Fe,De){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Oe,He,Fe,De)}Se.prototype.run=function(Oe,He,Fe,De){this._init(Oe,He,Fe,De);for(var We=0,ct=this.dataset.length;We<ct;We++)if(1!==this._processed[We]){this._processed[We]=1,this.clusters.push([We]);var ft=this.clusters.length-1;this._orderedList.push(We);var Vt=new ue(null,null,"asc"),Ct=this._regionQuery(We);void 0!==this._distanceToCore(We)&&(this._updateQueue(We,Ct,Vt),this._expandCluster(ft,Vt))}return this.clusters},Se.prototype.getReachabilityPlot=function(){for(var Oe=[],He=0,Fe=this._orderedList.length;He<Fe;He++){var De=this._orderedList[He];Oe.push([De,this._reachability[De]])}return Oe},Se.prototype._init=function(Oe,He,Fe,De){if(Oe){if(!(Oe instanceof Array))throw Error("Dataset must be of type array, "+typeof Oe+" given");this.dataset=Oe,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}He&&(this.epsilon=He),Fe&&(this.minPts=Fe),De&&(this.distance=De)},Se.prototype._updateQueue=function(Oe,He,Fe){var De=this;this._coreDistance=this._distanceToCore(Oe),He.forEach(function(We){if(void 0===De._processed[We]){var ct=De.distance(De.dataset[Oe],De.dataset[We]),ft=Math.max(De._coreDistance,ct);void 0===De._reachability[We]?(De._reachability[We]=ft,Fe.insert(We,ft)):ft<De._reachability[We]&&(De._reachability[We]=ft,Fe.remove(We),Fe.insert(We,ft))}})},Se.prototype._expandCluster=function(Oe,He){for(var Fe=He.getElements(),De=0,We=Fe.length;De<We;De++){var ct=Fe[De];if(void 0===this._processed[ct]){var ft=this._regionQuery(ct);this._processed[ct]=1,this.clusters[Oe].push(ct),this._orderedList.push(ct),void 0!==this._distanceToCore(ct)&&(this._updateQueue(ct,ft,He),this._expandCluster(Oe,He))}}},Se.prototype._distanceToCore=function(Oe){for(var He=this.epsilon,Fe=0;Fe<He;Fe++)if(this._regionQuery(Oe,Fe).length>=this.minPts)return Fe},Se.prototype._regionQuery=function(Oe,He){He=He||this.epsilon;for(var Fe=[],De=0,We=this.dataset.length;De<We;De++)this.distance(this.dataset[Oe],this.dataset[De])<He&&Fe.push(De);return Fe},Se.prototype._euclideanDistance=function(Oe,He){for(var Fe=0,De=Math.min(Oe.length,He.length);De--;)Fe+=(Oe[De]-He[De])*(Oe[De]-He[De]);return Math.sqrt(Fe)},Nt.exports&&(Nt.exports=Se)},8759:Nt=>{function et(Me,ue,Se){this._queue=[],this._priorities=[],this._sorting="desc",this._init(Me,ue,Se)}et.prototype.insert=function(Me,ue){for(var Se=this._queue.length,Oe=Se;Oe--;){var He=this._priorities[Oe];"desc"===this._sorting?ue>He&&(Se=Oe):ue<He&&(Se=Oe)}this._insertAt(Me,ue,Se)},et.prototype.remove=function(Me){for(var ue=this._queue.length;ue--;)if(Me===this._queue[ue]){this._queue.splice(ue,1),this._priorities.splice(ue,1);break}},et.prototype.forEach=function(Me){this._queue.forEach(Me)},et.prototype.getElements=function(){return this._queue},et.prototype.getElementPriority=function(Me){return this._priorities[Me]},et.prototype.getPriorities=function(){return this._priorities},et.prototype.getElementsWithPriorities=function(){for(var Me=[],ue=0,Se=this._queue.length;ue<Se;ue++)Me.push([this._queue[ue],this._priorities[ue]]);return Me},et.prototype._init=function(Me,ue,Se){if(Me&&ue){if(this._queue=[],this._priorities=[],Me.length!==ue.length)throw new Error("Arrays must have the same length");for(var Oe=0;Oe<Me.length;Oe++)this.insert(Me[Oe],ue[Oe])}Se&&(this._sorting=Se)},et.prototype._insertAt=function(Me,ue,Se){this._queue.length===Se?(this._queue.push(Me),this._priorities.push(ue)):(this._queue.splice(Se,0,Me),this._priorities.splice(Se,0,ue))},Nt.exports&&(Nt.exports=et)},7470:(Nt,et,Me)=>{Nt.exports&&(Nt.exports={DBSCAN:Me(1817),KMEANS:Me(4273),OPTICS:Me(8680),PriorityQueue:Me(8759)})},5469:Nt=>{"use strict";function et(xe,qe,Ce){Ce=Ce||2;var Je,en,vt,Mn,yn,ci,$t,Qe=qe&&qe.length,it=Qe?qe[0]*Ce:xe.length,_e=Me(xe,0,it,Ce,!0),St=[];if(!_e||_e.next===_e.prev)return St;if(Qe&&(_e=function We(xe,qe,Ce,Qe){var _e,St,vt,it=[];for(_e=0,St=qe.length;_e<St;_e++)(vt=Me(xe,qe[_e]*Qe,_e<St-1?qe[_e+1]*Qe:xe.length,Qe,!1))===vt.next&&(vt.steiner=!0),it.push(Ne(vt));for(it.sort(ct),_e=0;_e<it.length;_e++)Ce=ft(it[_e],Ce);return Ce}(xe,qe,_e,Ce)),xe.length>80*Ce){Je=vt=xe[0],en=Mn=xe[1];for(var $n=Ce;$n<it;$n+=Ce)(yn=xe[$n])<Je&&(Je=yn),(ci=xe[$n+1])<en&&(en=ci),yn>vt&&(vt=yn),ci>Mn&&(Mn=ci);$t=0!==($t=Math.max(vt-Je,Mn-en))?32767/$t:0}return Se(_e,St,Ce,Je,en,$t,0),St}function Me(xe,qe,Ce,Qe,it){var _e,St;if(it===At(xe,qe,Ce,Qe)>0)for(_e=qe;_e<Ce;_e+=Qe)St=Pe(_e,xe[_e],xe[_e+1],St);else for(_e=Ce-Qe;_e>=qe;_e-=Qe)St=Pe(_e,xe[_e],xe[_e+1],St);return St&&Y(St,St.next)&&(se(St),St=St.next),St}function ue(xe,qe){if(!xe)return xe;qe||(qe=xe);var Qe,Ce=xe;do{if(Qe=!1,Ce.steiner||!Y(Ce,Ce.next)&&0!==X(Ce.prev,Ce,Ce.next))Ce=Ce.next;else{if(se(Ce),(Ce=qe=Ce.prev)===Ce.next)break;Qe=!0}}while(Qe||Ce!==qe);return qe}function Se(xe,qe,Ce,Qe,it,_e,St){if(xe){!St&&_e&&function st(xe,qe,Ce,Qe){var it=xe;do{0===it.z&&(it.z=qt(it.x,it.y,qe,Ce,Qe)),it.prevZ=it.prev,it.nextZ=it.next,it=it.next}while(it!==xe);it.prevZ.nextZ=null,it.prevZ=null,function yt(xe){var qe,Ce,Qe,it,_e,St,Je,en,vt=1;do{for(Ce=xe,xe=null,_e=null,St=0;Ce;){for(St++,Qe=Ce,Je=0,qe=0;qe<vt&&(Je++,Qe=Qe.nextZ);qe++);for(en=vt;Je>0||en>0&&Qe;)0!==Je&&(0===en||!Qe||Ce.z<=Qe.z)?(it=Ce,Ce=Ce.nextZ,Je--):(it=Qe,Qe=Qe.nextZ,en--),_e?_e.nextZ=it:xe=it,it.prevZ=_e,_e=it;Ce=Qe}_e.nextZ=null,vt*=2}while(St>1)}(it)}(xe,Qe,it,_e);for(var en,vt,Je=xe;xe.prev!==xe.next;)if(en=xe.prev,vt=xe.next,_e?He(xe,Qe,it,_e):Oe(xe))qe.push(en.i/Ce|0),qe.push(xe.i/Ce|0),qe.push(vt.i/Ce|0),se(xe),xe=vt.next,Je=vt.next;else if((xe=vt)===Je){St?1===St?Se(xe=Fe(ue(xe),qe,Ce),qe,Ce,Qe,it,_e,2):2===St&&De(xe,qe,Ce,Qe,it,_e):Se(ue(xe),qe,Ce,Qe,it,_e,1);break}}}function Oe(xe){var qe=xe.prev,Ce=xe,Qe=xe.next;if(X(qe,Ce,Qe)>=0)return!1;for(var it=qe.x,_e=Ce.x,St=Qe.x,Je=qe.y,en=Ce.y,vt=Qe.y,Mn=it<_e?it<St?it:St:_e<St?_e:St,yn=Je<en?Je<vt?Je:vt:en<vt?en:vt,ci=it>_e?it>St?it:St:_e>St?_e:St,$t=Je>en?Je>vt?Je:vt:en>vt?en:vt,$n=Qe.next;$n!==qe;){if($n.x>=Mn&&$n.x<=ci&&$n.y>=yn&&$n.y<=$t&&Ke(it,Je,_e,en,St,vt,$n.x,$n.y)&&X($n.prev,$n,$n.next)>=0)return!1;$n=$n.next}return!0}function He(xe,qe,Ce,Qe){var it=xe.prev,_e=xe,St=xe.next;if(X(it,_e,St)>=0)return!1;for(var Je=it.x,en=_e.x,vt=St.x,Mn=it.y,yn=_e.y,ci=St.y,$t=Je<en?Je<vt?Je:vt:en<vt?en:vt,$n=Mn<yn?Mn<ci?Mn:ci:yn<ci?yn:ci,rn=Je>en?Je>vt?Je:vt:en>vt?en:vt,Ds=Mn>yn?Mn>ci?Mn:ci:yn>ci?yn:ci,As=qt($t,$n,qe,Ce,Qe),$s=qt(rn,Ds,qe,Ce,Qe),di=xe.prevZ,mi=xe.nextZ;di&&di.z>=As&&mi&&mi.z<=$s;){if(di.x>=$t&&di.x<=rn&&di.y>=$n&&di.y<=Ds&&di!==it&&di!==St&&Ke(Je,Mn,en,yn,vt,ci,di.x,di.y)&&X(di.prev,di,di.next)>=0||(di=di.prevZ,mi.x>=$t&&mi.x<=rn&&mi.y>=$n&&mi.y<=Ds&&mi!==it&&mi!==St&&Ke(Je,Mn,en,yn,vt,ci,mi.x,mi.y)&&X(mi.prev,mi,mi.next)>=0))return!1;mi=mi.nextZ}for(;di&&di.z>=As;){if(di.x>=$t&&di.x<=rn&&di.y>=$n&&di.y<=Ds&&di!==it&&di!==St&&Ke(Je,Mn,en,yn,vt,ci,di.x,di.y)&&X(di.prev,di,di.next)>=0)return!1;di=di.prevZ}for(;mi&&mi.z<=$s;){if(mi.x>=$t&&mi.x<=rn&&mi.y>=$n&&mi.y<=Ds&&mi!==it&&mi!==St&&Ke(Je,Mn,en,yn,vt,ci,mi.x,mi.y)&&X(mi.prev,mi,mi.next)>=0)return!1;mi=mi.nextZ}return!0}function Fe(xe,qe,Ce){var Qe=xe;do{var it=Qe.prev,_e=Qe.next.next;!Y(it,_e)&&we(it,Qe,Qe.next,_e)&&$(it,_e)&&$(_e,it)&&(qe.push(it.i/Ce|0),qe.push(Qe.i/Ce|0),qe.push(_e.i/Ce|0),se(Qe),se(Qe.next),Qe=xe=_e),Qe=Qe.next}while(Qe!==xe);return ue(Qe)}function De(xe,qe,Ce,Qe,it,_e){var St=xe;do{for(var Je=St.next.next;Je!==St.prev;){if(St.i!==Je.i&&j(St,Je)){var en=Ie(St,Je);return St=ue(St,St.next),en=ue(en,en.next),Se(St,qe,Ce,Qe,it,_e,0),void Se(en,qe,Ce,Qe,it,_e,0)}Je=Je.next}St=St.next}while(St!==xe)}function ct(xe,qe){return xe.x-qe.x}function ft(xe,qe){var Ce=function Vt(xe,qe){var St,Ce=qe,Qe=xe.x,it=xe.y,_e=-1/0;do{if(it<=Ce.y&&it>=Ce.next.y&&Ce.next.y!==Ce.y){var Je=Ce.x+(it-Ce.y)*(Ce.next.x-Ce.x)/(Ce.next.y-Ce.y);if(Je<=Qe&&Je>_e&&(_e=Je,St=Ce.x<Ce.next.x?Ce:Ce.next,Je===Qe))return St}Ce=Ce.next}while(Ce!==qe);if(!St)return null;var ci,en=St,vt=St.x,Mn=St.y,yn=1/0;Ce=St;do{Qe>=Ce.x&&Ce.x>=vt&&Qe!==Ce.x&&Ke(it<Mn?Qe:_e,it,vt,Mn,it<Mn?_e:Qe,it,Ce.x,Ce.y)&&(ci=Math.abs(it-Ce.y)/(Qe-Ce.x),$(Ce,xe)&&(ci<yn||ci===yn&&(Ce.x>St.x||Ce.x===St.x&&Ct(St,Ce)))&&(St=Ce,yn=ci)),Ce=Ce.next}while(Ce!==en);return St}(xe,qe);if(!Ce)return qe;var Qe=Ie(Ce,xe);return ue(Qe,Qe.next),ue(Ce,Ce.next)}function Ct(xe,qe){return X(xe.prev,xe,qe.prev)<0&&X(qe.next,xe,xe.next)<0}function qt(xe,qe,Ce,Qe,it){return(xe=1431655765&((xe=858993459&((xe=252645135&((xe=16711935&((xe=(xe-Ce)*it|0)|xe<<8))|xe<<4))|xe<<2))|xe<<1))|(qe=1431655765&((qe=858993459&((qe=252645135&((qe=16711935&((qe=(qe-Qe)*it|0)|qe<<8))|qe<<4))|qe<<2))|qe<<1))<<1}function Ne(xe){var qe=xe,Ce=xe;do{(qe.x<Ce.x||qe.x===Ce.x&&qe.y<Ce.y)&&(Ce=qe),qe=qe.next}while(qe!==xe);return Ce}function Ke(xe,qe,Ce,Qe,it,_e,St,Je){return(it-St)*(qe-Je)>=(xe-St)*(_e-Je)&&(xe-St)*(Qe-Je)>=(Ce-St)*(qe-Je)&&(Ce-St)*(_e-Je)>=(it-St)*(Qe-Je)}function j(xe,qe){return xe.next.i!==qe.i&&xe.prev.i!==qe.i&&!function ce(xe,qe){var Ce=xe;do{if(Ce.i!==xe.i&&Ce.next.i!==xe.i&&Ce.i!==qe.i&&Ce.next.i!==qe.i&&we(Ce,Ce.next,xe,qe))return!0;Ce=Ce.next}while(Ce!==xe);return!1}(xe,qe)&&($(xe,qe)&&$(qe,xe)&&function je(xe,qe){var Ce=xe,Qe=!1,it=(xe.x+qe.x)/2,_e=(xe.y+qe.y)/2;do{Ce.y>_e!=Ce.next.y>_e&&Ce.next.y!==Ce.y&&it<(Ce.next.x-Ce.x)*(_e-Ce.y)/(Ce.next.y-Ce.y)+Ce.x&&(Qe=!Qe),Ce=Ce.next}while(Ce!==xe);return Qe}(xe,qe)&&(X(xe.prev,xe,qe.prev)||X(xe,qe.prev,qe))||Y(xe,qe)&&X(xe.prev,xe,xe.next)>0&&X(qe.prev,qe,qe.next)>0)}function X(xe,qe,Ce){return(qe.y-xe.y)*(Ce.x-qe.x)-(qe.x-xe.x)*(Ce.y-qe.y)}function Y(xe,qe){return xe.x===qe.x&&xe.y===qe.y}function we(xe,qe,Ce,Qe){var it=re(X(xe,qe,Ce)),_e=re(X(xe,qe,Qe)),St=re(X(Ce,Qe,xe)),Je=re(X(Ce,Qe,qe));return!!(it!==_e&&St!==Je||0===it&&Z(xe,Ce,qe)||0===_e&&Z(xe,Qe,qe)||0===St&&Z(Ce,xe,Qe)||0===Je&&Z(Ce,qe,Qe))}function Z(xe,qe,Ce){return qe.x<=Math.max(xe.x,Ce.x)&&qe.x>=Math.min(xe.x,Ce.x)&&qe.y<=Math.max(xe.y,Ce.y)&&qe.y>=Math.min(xe.y,Ce.y)}function re(xe){return xe>0?1:xe<0?-1:0}function $(xe,qe){return X(xe.prev,xe,xe.next)<0?X(xe,qe,xe.next)>=0&&X(xe,xe.prev,qe)>=0:X(xe,qe,xe.prev)<0||X(xe,xe.next,qe)<0}function Ie(xe,qe){var Ce=new kt(xe.i,xe.x,xe.y),Qe=new kt(qe.i,qe.x,qe.y),it=xe.next,_e=qe.prev;return xe.next=qe,qe.prev=xe,Ce.next=it,it.prev=Ce,Qe.next=Ce,Ce.prev=Qe,_e.next=Qe,Qe.prev=_e,Qe}function Pe(xe,qe,Ce,Qe){var it=new kt(xe,qe,Ce);return Qe?(it.next=Qe.next,it.prev=Qe,Qe.next.prev=it,Qe.next=it):(it.prev=it,it.next=it),it}function se(xe){xe.next.prev=xe.prev,xe.prev.next=xe.next,xe.prevZ&&(xe.prevZ.nextZ=xe.nextZ),xe.nextZ&&(xe.nextZ.prevZ=xe.prevZ)}function kt(xe,qe,Ce){this.i=xe,this.x=qe,this.y=Ce,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function At(xe,qe,Ce,Qe){for(var it=0,_e=qe,St=Ce-Qe;_e<Ce;_e+=Qe)it+=(xe[St]-xe[_e])*(xe[_e+1]+xe[St+1]),St=_e;return it}Nt.exports=et,Nt.exports.default=et,et.deviation=function(xe,qe,Ce,Qe){var it=qe&&qe.length,St=Math.abs(At(xe,0,it?qe[0]*Ce:xe.length,Ce));if(it)for(var Je=0,en=qe.length;Je<en;Je++)St-=Math.abs(At(xe,qe[Je]*Ce,Je<en-1?qe[Je+1]*Ce:xe.length,Ce));var yn=0;for(Je=0;Je<Qe.length;Je+=3){var ci=Qe[Je]*Ce,$t=Qe[Je+1]*Ce,$n=Qe[Je+2]*Ce;yn+=Math.abs((xe[ci]-xe[$n])*(xe[$t+1]-xe[ci+1])-(xe[ci]-xe[$t])*(xe[$n+1]-xe[ci+1]))}return 0===St&&0===yn?0:Math.abs((yn-St)/St)},et.flatten=function(xe){for(var qe=xe[0][0].length,Ce={vertices:[],holes:[],dimensions:qe},Qe=0,it=0;it<xe.length;it++){for(var _e=0;_e<xe[it].length;_e++)for(var St=0;St<qe;St++)Ce.vertices.push(xe[it][_e][St]);it>0&&Ce.holes.push(Qe+=xe[it-1].length)}return Ce}},3457:Nt=>{"use strict";var et="Function.prototype.bind called on incompatible ",Me=Array.prototype.slice,ue=Object.prototype.toString,Se="[object Function]";Nt.exports=function(He){var Fe=this;if("function"!=typeof Fe||ue.call(Fe)!==Se)throw new TypeError(et+Fe);for(var We,De=Me.call(arguments,1),ct=function(){if(this instanceof We){var yt=Fe.apply(this,De.concat(Me.call(arguments)));return Object(yt)===yt?yt:this}return Fe.apply(He,De.concat(Me.call(arguments)))},ft=Math.max(0,Fe.length-De.length),Vt=[],Ct=0;Ct<ft;Ct++)Vt.push("$"+Ct);if(We=Function("binder","return function ("+Vt.join(",")+"){ return binder.apply(this,arguments); }")(ct),Fe.prototype){var st=function(){};st.prototype=Fe.prototype,We.prototype=new st,st.prototype=null}return We}},4444:(Nt,et,Me)=>{"use strict";var ue=Me(3457);Nt.exports=Function.prototype.bind||ue},9582:Nt=>{"use strict";var et=function(){return"string"==typeof function(){}.name},Me=Object.getOwnPropertyDescriptor;if(Me)try{Me([],"length")}catch{Me=null}et.functionsHaveConfigurableNames=function(){if(!et()||!Me)return!1;var Oe=Me(function(){},"name");return!!Oe&&!!Oe.configurable};var ue=Function.prototype.bind;et.boundFunctionsHaveNames=function(){return et()&&"function"==typeof ue&&""!==function(){}.bind().name},Nt.exports=et},5013:(Nt,et,Me)=>{var ue=Me(6952),Se=function(De){this.precision=De&&De.precision?De.precision:17,this.direction=!(!De||!De.direction)&&De.direction,this.pseudoNode=!(!De||!De.pseudoNode)&&De.pseudoNode,this.objectComparator=De&&De.objectComparator?De.objectComparator:Fe};function Oe(De){return De.coordinates.map(function(We){return{type:De.type.replace("Multi",""),coordinates:We}})}function He(De,We){return De.hasOwnProperty("coordinates")?De.coordinates.length===We.coordinates.length:De.length===We.length}function Fe(De,We){return ue(De,We,{strict:!0})}Se.prototype.compare=function(De,We){if(De.type!==We.type||!He(De,We))return!1;switch(De.type){case"Point":return this.compareCoord(De.coordinates,We.coordinates);case"LineString":return this.compareLine(De.coordinates,We.coordinates,0,!1);case"Polygon":return this.comparePolygon(De,We);case"Feature":return this.compareFeature(De,We);default:if(0===De.type.indexOf("Multi")){var ct=this,ft=Oe(De),Vt=Oe(We);return ft.every(function(Ct){return this.some(function(st){return ct.compare(Ct,st)})},Vt)}}return!1},Se.prototype.compareCoord=function(De,We){if(De.length!==We.length)return!1;for(var ct=0;ct<De.length;ct++)if(De[ct].toFixed(this.precision)!==We[ct].toFixed(this.precision))return!1;return!0},Se.prototype.compareLine=function(De,We,ct,ft){if(!He(De,We))return!1;var Vt=this.pseudoNode?De:this.removePseudo(De),Ct=this.pseudoNode?We:this.removePseudo(We);if(!ft||this.compareCoord(Vt[0],Ct[0])||(Ct=this.fixStartIndex(Ct,Vt))){var st=this.compareCoord(Vt[ct],Ct[ct]);return this.direction||st?this.comparePath(Vt,Ct):!!this.compareCoord(Vt[ct],Ct[Ct.length-(1+ct)])&&this.comparePath(Vt.slice().reverse(),Ct)}},Se.prototype.fixStartIndex=function(De,We){for(var ct,ft=-1,Vt=0;Vt<De.length;Vt++)if(this.compareCoord(De[Vt],We[0])){ft=Vt;break}return ft>=0&&(ct=[].concat(De.slice(ft,De.length),De.slice(1,ft+1))),ct},Se.prototype.comparePath=function(De,We){var ct=this;return De.every(function(ft,Vt){return ct.compareCoord(ft,this[Vt])},We)},Se.prototype.comparePolygon=function(De,We){if(this.compareLine(De.coordinates[0],We.coordinates[0],1,!0)){var ct=De.coordinates.slice(1,De.coordinates.length),ft=We.coordinates.slice(1,We.coordinates.length),Vt=this;return ct.every(function(Ct){return this.some(function(st){return Vt.compareLine(Ct,st,1,!0)})},ft)}return!1},Se.prototype.compareFeature=function(De,We){return!(De.id!==We.id||!this.objectComparator(De.properties,We.properties)||!this.compareBBox(De,We))&&this.compare(De.geometry,We.geometry)},Se.prototype.compareBBox=function(De,We){return!!(!De.bbox&&!We.bbox||De.bbox&&We.bbox&&this.compareCoord(De.bbox,We.bbox))},Se.prototype.removePseudo=function(De){return De},Nt.exports=Se},5406:(Nt,et,Me)=>{var ue=Me(2402),Se=Me(8275),Oe=Me(3269),He=Me(1503).Z,Fe=Oe.featureEach,ct=Se.featureCollection;function ft(Vt){var Ct=new ue(Vt);return Ct.insert=function(st){if("Feature"!==st.type)throw new Error("invalid feature");return st.bbox=st.bbox?st.bbox:He(st),ue.prototype.insert.call(this,st)},Ct.load=function(st){var yt=[];return Array.isArray(st)?st.forEach(function(qt){if("Feature"!==qt.type)throw new Error("invalid features");qt.bbox=qt.bbox?qt.bbox:He(qt),yt.push(qt)}):Fe(st,function(qt){if("Feature"!==qt.type)throw new Error("invalid features");qt.bbox=qt.bbox?qt.bbox:He(qt),yt.push(qt)}),ue.prototype.load.call(this,yt)},Ct.remove=function(st,yt){if("Feature"!==st.type)throw new Error("invalid feature");return st.bbox=st.bbox?st.bbox:He(st),ue.prototype.remove.call(this,st,yt)},Ct.clear=function(){return ue.prototype.clear.call(this)},Ct.search=function(st){var yt=ue.prototype.search.call(this,this.toBBox(st));return ct(yt)},Ct.collides=function(st){return ue.prototype.collides.call(this,this.toBBox(st))},Ct.all=function(){var st=ue.prototype.all.call(this);return ct(st)},Ct.toJSON=function(){return ue.prototype.toJSON.call(this)},Ct.fromJSON=function(st){return ue.prototype.fromJSON.call(this,st)},Ct.toBBox=function(st){var yt;if(st.bbox)yt=st.bbox;else if(Array.isArray(st)&&4===st.length)yt=st;else if(Array.isArray(st)&&6===st.length)yt=[st[0],st[1],st[3],st[4]];else if("Feature"===st.type)yt=He(st);else{if("FeatureCollection"!==st.type)throw new Error("invalid geojson");yt=He(st)}return{minX:yt[0],minY:yt[1],maxX:yt[2],maxY:yt[3]}},Ct}Nt.exports=ft,Nt.exports.default=ft},5203:(Nt,et,Me)=>{"use strict";var ue,Se=SyntaxError,Oe=Function,He=TypeError,Fe=function(Pe){try{return Oe('"use strict"; return ('+Pe+").constructor;")()}catch{}},De=Object.getOwnPropertyDescriptor;if(De)try{De({},"")}catch{De=null}var We=function(){throw new He},ct=De?function(){try{return We}catch{try{return De(arguments,"callee").get}catch{return We}}}():We,ft=Me(2969)(),Vt=Object.getPrototypeOf||function(Pe){return Pe.__proto__},Ct={},st=typeof Uint8Array>"u"?ue:Vt(Uint8Array),yt={"%AggregateError%":typeof AggregateError>"u"?ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ue:ArrayBuffer,"%ArrayIteratorPrototype%":ft?Vt([][Symbol.iterator]()):ue,"%AsyncFromSyncIteratorPrototype%":ue,"%AsyncFunction%":Ct,"%AsyncGenerator%":Ct,"%AsyncGeneratorFunction%":Ct,"%AsyncIteratorPrototype%":Ct,"%Atomics%":typeof Atomics>"u"?ue:Atomics,"%BigInt%":typeof BigInt>"u"?ue:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ue:FinalizationRegistry,"%Function%":Oe,"%GeneratorFunction%":Ct,"%Int8Array%":typeof Int8Array>"u"?ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ft?Vt(Vt([][Symbol.iterator]())):ue,"%JSON%":"object"==typeof JSON?JSON:ue,"%Map%":typeof Map>"u"?ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ft?ue:Vt((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ue:Promise,"%Proxy%":typeof Proxy>"u"?ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ft?ue:Vt((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ft?Vt(""[Symbol.iterator]()):ue,"%Symbol%":ft?Symbol:ue,"%SyntaxError%":Se,"%ThrowTypeError%":ct,"%TypedArray%":st,"%TypeError%":He,"%Uint8Array%":typeof Uint8Array>"u"?ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ue:WeakSet},qt=function Pe(se){var kt;if("%AsyncFunction%"===se)kt=Fe("async function () {}");else if("%GeneratorFunction%"===se)kt=Fe("function* () {}");else if("%AsyncGeneratorFunction%"===se)kt=Fe("async function* () {}");else if("%AsyncGenerator%"===se){var At=Pe("%AsyncGeneratorFunction%");At&&(kt=At.prototype)}else if("%AsyncIteratorPrototype%"===se){var xe=Pe("%AsyncGenerator%");xe&&(kt=Vt(xe.prototype))}return yt[se]=kt,kt},Ne={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ke=Me(4444),j=Me(3164),X=Ke.call(Function.call,Array.prototype.concat),Y=Ke.call(Function.apply,Array.prototype.splice),we=Ke.call(Function.call,String.prototype.replace),Z=Ke.call(Function.call,String.prototype.slice),re=Ke.call(Function.call,RegExp.prototype.exec),ce=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,je=function(se){var kt=Z(se,0,1),At=Z(se,-1);if("%"===kt&&"%"!==At)throw new Se("invalid intrinsic syntax, expected closing `%`");if("%"===At&&"%"!==kt)throw new Se("invalid intrinsic syntax, expected opening `%`");var xe=[];return we(se,ce,function(qe,Ce,Qe,it){xe[xe.length]=Qe?we(it,$,"$1"):Ce||qe}),xe},Ie=function(se,kt){var xe,At=se;if(j(Ne,At)&&(At="%"+(xe=Ne[At])[0]+"%"),j(yt,At)){var qe=yt[At];if(qe===Ct&&(qe=qt(At)),typeof qe>"u"&&!kt)throw new He("intrinsic "+se+" exists, but is not available. Please file an issue!");return{alias:xe,name:At,value:qe}}throw new Se("intrinsic "+se+" does not exist!")};Nt.exports=function(se,kt){if("string"!=typeof se||0===se.length)throw new He("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof kt)throw new He('"allowMissing" argument must be a boolean');if(null===re(/^%?[^%]*%?$/g,se))throw new Se("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var At=je(se),xe=At.length>0?At[0]:"",qe=Ie("%"+xe+"%",kt),Ce=qe.name,Qe=qe.value,it=!1,_e=qe.alias;_e&&(xe=_e[0],Y(At,X([0,1],_e)));for(var St=1,Je=!0;St<At.length;St+=1){var en=At[St],vt=Z(en,0,1),Mn=Z(en,-1);if(('"'===vt||"'"===vt||"`"===vt||'"'===Mn||"'"===Mn||"`"===Mn)&&vt!==Mn)throw new Se("property names with quotes must have matching quotes");if(("constructor"===en||!Je)&&(it=!0),j(yt,Ce="%"+(xe+="."+en)+"%"))Qe=yt[Ce];else if(null!=Qe){if(!(en in Qe)){if(!kt)throw new He("base intrinsic for "+se+" exists, but the property is not available.");return}if(De&&St+1>=At.length){var yn=De(Qe,en);Qe=(Je=!!yn)&&"get"in yn&&!("originalValue"in yn.get)?yn.get:Qe[en]}else Je=j(Qe,en),Qe=Qe[en];Je&&!it&&(yt[Ce]=Qe)}}return Qe}},7027:(Nt,et,Me)=>{"use strict";var Se=Me(5203)("%Object.defineProperty%",!0),Oe=function(){if(Se)try{return Se({},"a",{value:1}),!0}catch{return!1}return!1};Oe.hasArrayLengthDefineBug=function(){if(!Oe())return null;try{return 1!==Se([],"length",{value:1}).length}catch{return!0}},Nt.exports=Oe},2969:(Nt,et,Me)=>{"use strict";var ue=typeof Symbol<"u"&&Symbol,Se=Me(1983);Nt.exports=function(){return"function"==typeof ue&&"function"==typeof Symbol&&"symbol"==typeof ue("foo")&&"symbol"==typeof Symbol("bar")&&Se()}},1983:Nt=>{"use strict";Nt.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var Me={},ue=Symbol("test"),Se=Object(ue);if("string"==typeof ue||"[object Symbol]"!==Object.prototype.toString.call(ue)||"[object Symbol]"!==Object.prototype.toString.call(Se))return!1;for(ue in Me[ue]=42,Me)return!1;if("function"==typeof Object.keys&&0!==Object.keys(Me).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(Me).length)return!1;var He=Object.getOwnPropertySymbols(Me);if(1!==He.length||He[0]!==ue||!Object.prototype.propertyIsEnumerable.call(Me,ue))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var Fe=Object.getOwnPropertyDescriptor(Me,ue);if(42!==Fe.value||!0!==Fe.enumerable)return!1}return!0}},6259:(Nt,et,Me)=>{"use strict";var ue=Me(1983);Nt.exports=function(){return ue()&&!!Symbol.toStringTag}},3164:(Nt,et,Me)=>{"use strict";var ue=Me(4444);Nt.exports=ue.call(Function.call,Object.prototype.hasOwnProperty)},4159:function(Nt){Nt.exports=function(){"use strict";var et=function(E,S){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,L){D.__proto__=L}||function(D,L){for(var z in L)Object.prototype.hasOwnProperty.call(L,z)&&(D[z]=L[z])})(E,S)};function Me(E,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function D(){this.constructor=E}et(E,S),E.prototype=null===S?Object.create(S):(D.prototype=S.prototype,new D)}var ue=function(){return ue=Object.assign||function(S){for(var D,L=1,z=arguments.length;L<z;L++)for(var U in D=arguments[L])Object.prototype.hasOwnProperty.call(D,U)&&(S[U]=D[U]);return S},ue.apply(this,arguments)};function Se(E,S,D,L){return new(D||(D=Promise))(function(U,ne){function ye(lt){try{Ye(L.next(lt))}catch(dt){ne(dt)}}function be(lt){try{Ye(L.throw(lt))}catch(dt){ne(dt)}}function Ye(lt){lt.done?U(lt.value):function z(U){return U instanceof D?U:new D(function(ne){ne(U)})}(lt.value).then(ye,be)}Ye((L=L.apply(E,S||[])).next())})}function Oe(E,S){var L,z,U,ne,D={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return ne={next:ye(0),throw:ye(1),return:ye(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function ye(Ye){return function(lt){return function be(Ye){if(L)throw new TypeError("Generator is already executing.");for(;D;)try{if(L=1,z&&(U=2&Ye[0]?z.return:Ye[0]?z.throw||((U=z.return)&&U.call(z),0):z.next)&&!(U=U.call(z,Ye[1])).done)return U;switch(z=0,U&&(Ye=[2&Ye[0],U.value]),Ye[0]){case 0:case 1:U=Ye;break;case 4:return D.label++,{value:Ye[1],done:!1};case 5:D.label++,z=Ye[1],Ye=[0];continue;case 7:Ye=D.ops.pop(),D.trys.pop();continue;default:if(!(U=(U=D.trys).length>0&&U[U.length-1])&&(6===Ye[0]||2===Ye[0])){D=0;continue}if(3===Ye[0]&&(!U||Ye[1]>U[0]&&Ye[1]<U[3])){D.label=Ye[1];break}if(6===Ye[0]&&D.label<U[1]){D.label=U[1],U=Ye;break}if(U&&D.label<U[2]){D.label=U[2],D.ops.push(Ye);break}U[2]&&D.ops.pop(),D.trys.pop();continue}Ye=S.call(E,D)}catch(lt){Ye=[6,lt],z=0}finally{L=U=0}if(5&Ye[0])throw Ye[1];return{value:Ye[0]?Ye[1]:void 0,done:!0}}([Ye,lt])}}}function He(E,S,D){if(D||2===arguments.length)for(var U,L=0,z=S.length;L<z;L++)(U||!(L in S))&&(U||(U=Array.prototype.slice.call(S,0,L)),U[L]=S[L]);return E.concat(U||S)}for(var Fe=function(){function E(S,D,L,z){this.left=S,this.top=D,this.width=L,this.height=z}return E.prototype.add=function(S,D,L,z){return new E(this.left+S,this.top+D,this.width+L,this.height+z)},E.fromClientRect=function(S,D){return new E(D.left+S.windowBounds.left,D.top+S.windowBounds.top,D.width,D.height)},E.fromDOMRectList=function(S,D){var L=Array.from(D).find(function(z){return 0!==z.width});return L?new E(L.left+S.windowBounds.left,L.top+S.windowBounds.top,L.width,L.height):E.EMPTY},E.EMPTY=new E(0,0,0,0),E}(),De=function(E,S){return Fe.fromClientRect(E,S.getBoundingClientRect())},ct=function(E){for(var S=[],D=0,L=E.length;D<L;){var z=E.charCodeAt(D++);if(z>=55296&&z<=56319&&D<L){var U=E.charCodeAt(D++);56320==(64512&U)?S.push(((1023&z)<<10)+(1023&U)+65536):(S.push(z),D--)}else S.push(z)}return S},ft=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];if(String.fromCodePoint)return String.fromCodePoint.apply(String,E);var D=E.length;if(!D)return"";for(var L=[],z=-1,U="";++z<D;){var ne=E[z];ne<=65535?L.push(ne):L.push(55296+((ne-=65536)>>10),ne%1024+56320),(z+1===D||L.length>16384)&&(U+=String.fromCharCode.apply(String,L),L.length=0)}return U},Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ct=typeof Uint8Array>"u"?[]:new Uint8Array(256),st=0;st<Vt.length;st++)Ct[Vt.charCodeAt(st)]=st;for(var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qt=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ne=0;Ne<yt.length;Ne++)qt[yt.charCodeAt(Ne)]=Ne;for(var Qe=function(E,S,D){return E.slice?E.slice(S,D):new Uint16Array(Array.prototype.slice.call(E,S,D))},St=function(){function E(S,D,L,z,U,ne){this.initialValue=S,this.errorValue=D,this.highStart=L,this.highValueIndex=z,this.index=U,this.data=ne}return E.prototype.get=function(S){var D;if(S>=0){if(S<55296||S>56319&&S<=65535)return this.data[D=((D=this.index[S>>5])<<2)+(31&S)];if(S<=65535)return this.data[D=((D=this.index[2048+(S-55296>>5)])<<2)+(31&S)];if(S<this.highStart)return D=this.index[D=2080+(S>>11)],this.data[D=((D=this.index[D+=S>>5&63])<<2)+(31&S)];if(S<=1114111)return this.data[this.highValueIndex]}return this.errorValue},E}(),Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",en=typeof Uint8Array>"u"?[]:new Uint8Array(256),vt=0;vt<Je.length;vt++)en[Je.charCodeAt(vt)]=vt;var D,L,z,ne,ye,mi=10,ee=13,Ee=15,mt=17,Ut=18,Kt=19,Mt=20,xi=21,Fi=22,Ii=24,_r=25,lr=26,yr=27,Os=28,Fo=30,_a=32,vs=33,W1=34,ko=35,Ic=37,l2=38,Bi=39,W2=40,ol=42,Bm=[9001,65288],Tr="\xd7",Y4=(D=function(E){var L,U,ne,ye,be,S=.75*E.length,D=E.length,z=0;"="===E[E.length-1]&&(S--,"="===E[E.length-2]&&S--);var Ye=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(S):new Array(S),lt=Array.isArray(Ye)?Ye:new Uint8Array(Ye);for(L=0;L<D;L+=4)U=qt[E.charCodeAt(L)],ne=qt[E.charCodeAt(L+1)],ye=qt[E.charCodeAt(L+2)],be=qt[E.charCodeAt(L+3)],lt[z++]=U<<2|ne>>4,lt[z++]=(15&ne)<<4|ye>>2,lt[z++]=(3&ye)<<6|63&be;return Ye}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),L=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=4)D.push(E[L+3]<<24|E[L+2]<<16|E[L+1]<<8|E[L]);return D}(D):new Uint32Array(D),z=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=2)D.push(E[L+1]<<8|E[L]);return D}(D):new Uint16Array(D),ne=Qe(z,12,L[4]/2),ye=2===L[5]?Qe(z,(24+L[4])/2):function(E,S,D){return E.slice?E.slice(S,D):new Uint32Array(Array.prototype.slice.call(E,S,D))}(L,Math.ceil((24+L[4])/4)),new St(L[0],L[1],L[2],L[3],ne,ye)),Da=[Fo,36],jl=[1,2,3,5],Mi=[mi,8],Za=[yr,lr],Ia=jl.concat(Mi),fc=[l2,Bi,W2,W1,ko],m1=[Ee,ee],A1=function(E,S,D,L){var z=L[D];if(Array.isArray(E)?-1!==E.indexOf(z):E===z)for(var U=D;U<=L.length;){if((ne=L[++U])===S)return!0;if(ne!==mi)break}if(z===mi)for(U=D;U>0;){var ye=L[--U];if(Array.isArray(E)?-1!==E.indexOf(ye):E===ye)for(var be=D;be<=L.length;){var ne;if((ne=L[++be])===S)return!0;if(ne!==mi)break}if(ye!==mi)break}return!1},Yu=function(E,S){for(var D=E;D>=0;){var L=S[D];if(L!==mi)return L;D--}return 0},v1=function(E,S,D,L,z){if(0===D[L])return Tr;var U=L-1;if(Array.isArray(z)&&!0===z[U])return Tr;var ne=U-1,ye=U+1,be=S[U],Ye=ne>=0?S[ne]:0,lt=S[ye];if(2===be&&3===lt)return Tr;if(-1!==jl.indexOf(be))return"!";if(-1!==jl.indexOf(lt)||-1!==Mi.indexOf(lt))return Tr;if(8===Yu(U,S))return"\xf7";if(11===Y4.get(E[U])||(be===_a||be===vs)&&11===Y4.get(E[ye])||7===be||7===lt||9===be||-1===[mi,ee,Ee].indexOf(be)&&9===lt||-1!==[mt,Ut,Kt,Ii,Os].indexOf(lt)||Yu(U,S)===Fi||A1(23,Fi,U,S)||A1([mt,Ut],xi,U,S)||A1(12,12,U,S))return Tr;if(be===mi)return"\xf7";if(23===be||23===lt)return Tr;if(16===lt||16===be)return"\xf7";if(-1!==[ee,Ee,xi].indexOf(lt)||14===be||36===Ye&&-1!==m1.indexOf(be)||be===Os&&36===lt||lt===Mt||-1!==Da.indexOf(lt)&&be===_r||-1!==Da.indexOf(be)&&lt===_r||be===yr&&-1!==[Ic,_a,vs].indexOf(lt)||-1!==[Ic,_a,vs].indexOf(be)&&lt===lr||-1!==Da.indexOf(be)&&-1!==Za.indexOf(lt)||-1!==Za.indexOf(be)&&-1!==Da.indexOf(lt)||-1!==[yr,lr].indexOf(be)&&(lt===_r||-1!==[Fi,Ee].indexOf(lt)&&S[ye+1]===_r)||-1!==[Fi,Ee].indexOf(be)&&lt===_r||be===_r&&-1!==[_r,Os,Ii].indexOf(lt))return Tr;if(-1!==[_r,Os,Ii,mt,Ut].indexOf(lt))for(var dt=U;dt>=0;){if((Ft=S[dt])===_r)return Tr;if(-1===[Os,Ii].indexOf(Ft))break;dt--}if(-1!==[yr,lr].indexOf(lt))for(dt=-1!==[mt,Ut].indexOf(be)?ne:U;dt>=0;){var Ft;if((Ft=S[dt])===_r)return Tr;if(-1===[Os,Ii].indexOf(Ft))break;dt--}if(l2===be&&-1!==[l2,Bi,W1,ko].indexOf(lt)||-1!==[Bi,W1].indexOf(be)&&-1!==[Bi,W2].indexOf(lt)||-1!==[W2,ko].indexOf(be)&&lt===W2||-1!==fc.indexOf(be)&&-1!==[Mt,lr].indexOf(lt)||-1!==fc.indexOf(lt)&&be===yr||-1!==Da.indexOf(be)&&-1!==Da.indexOf(lt)||be===Ii&&-1!==Da.indexOf(lt)||-1!==Da.concat(_r).indexOf(be)&&lt===Fi&&-1===Bm.indexOf(E[ye])||-1!==Da.concat(_r).indexOf(lt)&&be===Ut)return Tr;if(41===be&&41===lt){for(var Gn=D[U],Tn=1;Gn>0&&41===S[--Gn];)Tn++;if(Tn%2!=0)return Tr}return be===_a&&lt===vs?Tr:"\xf7"},T6=function(E,S){S||(S={lineBreak:"normal",wordBreak:"normal"});var D=function(E,S){void 0===S&&(S="strict");var D=[],L=[],z=[];return E.forEach(function(U,ne){var ye=Y4.get(U);if(ye>50?(z.push(!0),ye-=50):z.push(!1),-1!==["normal","auto","loose"].indexOf(S)&&-1!==[8208,8211,12316,12448].indexOf(U))return L.push(ne),D.push(16);if(4===ye||11===ye){if(0===ne)return L.push(ne),D.push(Fo);var be=D[ne-1];return-1===Ia.indexOf(be)?(L.push(L[ne-1]),D.push(be)):(L.push(ne),D.push(Fo))}return L.push(ne),31===ye?D.push("strict"===S?xi:Ic):ye===ol||29===ye?D.push(Fo):43===ye?D.push(U>=131072&&U<=196605||U>=196608&&U<=262141?Ic:Fo):void D.push(ye)}),[L,D,z]}(E,S.lineBreak),L=D[0],z=D[1],U=D[2];return("break-all"===S.wordBreak||"break-word"===S.wordBreak)&&(z=z.map(function(ye){return-1!==[_r,Fo,ol].indexOf(ye)?Ic:ye})),[L,z,"keep-all"===S.wordBreak?U.map(function(ye,be){return ye&&E[be]>=19968&&E[be]<=40959}):void 0]},mo=function(){function E(S,D,L,z){this.codePoints=S,this.required="!"===D,this.start=L,this.end=z}return E.prototype.slice=function(){return ft.apply(void 0,this.codePoints.slice(this.start,this.end))},E}(),qs=function(E){return E>=48&&E<=57},Hn=function(E){return qs(E)||E>=65&&E<=70||E>=97&&E<=102},Pf=function(E){return 10===E||9===E||32===E},po=function(E){return function(E){return function(E){return E>=97&&E<=122}(E)||function(E){return E>=65&&E<=90}(E)}(E)||function(E){return E>=128}(E)||95===E},Ba=function(E){return po(E)||qs(E)||45===E},$1=function(E){return E>=0&&E<=8||11===E||E>=14&&E<=31||127===E},pc=function(E,S){return 92===E&&10!==S},Oo=function(E,S,D){return 45===E?po(S)||pc(S,D):!!po(E)||!(92!==E||!pc(E,S))},_s=function(E,S,D){return 43===E||45===E?!!qs(S)||46===S&&qs(D):qs(46===E?S:E)},No=function(E){var S=0,D=1;(43===E[S]||45===E[S])&&(45===E[S]&&(D=-1),S++);for(var L=[];qs(E[S]);)L.push(E[S++]);var z=L.length?parseInt(ft.apply(void 0,L),10):0;46===E[S]&&S++;for(var U=[];qs(E[S]);)U.push(E[S++]);var ne=U.length,ye=ne?parseInt(ft.apply(void 0,U),10):0;(69===E[S]||101===E[S])&&S++;var be=1;(43===E[S]||45===E[S])&&(45===E[S]&&(be=-1),S++);for(var Ye=[];qs(E[S]);)Ye.push(E[S++]);var lt=Ye.length?parseInt(ft.apply(void 0,Ye),10):0;return D*(z+ye*Math.pow(10,-ne))*Math.pow(10,be*lt)},li={type:2},J4={type:3},kr={type:4},t1={type:13},K2={type:8},Xl={type:21},t0={type:9},dl={type:10},n0={type:11},Lr={type:12},On={type:14},Ks={type:23},r0={type:1},d2={type:25},oi={type:24},hr={type:26},f4={type:27},ht={type:28},y1={type:29},Ji={type:31},Xo={type:32},q1=function(){function E(){this._value=[]}return E.prototype.write=function(S){this._value=this._value.concat(ct(S))},E.prototype.read=function(){for(var S=[],D=this.consumeToken();D!==Xo;)S.push(D),D=this.consumeToken();return S},E.prototype.consumeToken=function(){var S=this.consumeCodePoint();switch(S){case 34:return this.consumeStringToken(34);case 35:var D=this.peekCodePoint(0),L=this.peekCodePoint(1),z=this.peekCodePoint(2);if(Ba(D)||pc(L,z)){var U=Oo(D,L,z)?2:1;return{type:5,value:this.consumeName(),flags:U}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),t1;break;case 39:return this.consumeStringToken(39);case 40:return li;case 41:return J4;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),On;break;case 43:if(_s(S,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(S),this.consumeNumericToken();break;case 44:return kr;case 45:var ye=S,be=this.peekCodePoint(0),Ye=this.peekCodePoint(1);if(_s(ye,be,Ye))return this.reconsumeCodePoint(S),this.consumeNumericToken();if(Oo(ye,be,Ye))return this.reconsumeCodePoint(S),this.consumeIdentLikeToken();if(45===be&&62===Ye)return this.consumeCodePoint(),this.consumeCodePoint(),oi;break;case 46:if(_s(S,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(S),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var lt=this.consumeCodePoint();if(42===lt&&47===(lt=this.consumeCodePoint()))return this.consumeToken();if(-1===lt)return this.consumeToken()}break;case 58:return hr;case 59:return f4;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),d2;break;case 64:var dt=this.peekCodePoint(0),Ft=this.peekCodePoint(1),Gn=this.peekCodePoint(2);if(Oo(dt,Ft,Gn))return{type:7,value:this.consumeName()};break;case 91:return ht;case 92:if(pc(S,this.peekCodePoint(0)))return this.reconsumeCodePoint(S),this.consumeIdentLikeToken();break;case 93:return y1;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),K2;break;case 123:return n0;case 125:return Lr;case 117:case 85:var Tn=this.peekCodePoint(0),Qn=this.peekCodePoint(1);return 43===Tn&&(Hn(Qn)||63===Qn)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(S),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),t0;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Xl;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),dl;break;case-1:return Xo}return Pf(S)?(this.consumeWhiteSpace(),Ji):qs(S)?(this.reconsumeCodePoint(S),this.consumeNumericToken()):po(S)?(this.reconsumeCodePoint(S),this.consumeIdentLikeToken()):{type:6,value:ft(S)}},E.prototype.consumeCodePoint=function(){var S=this._value.shift();return typeof S>"u"?-1:S},E.prototype.reconsumeCodePoint=function(S){this._value.unshift(S)},E.prototype.peekCodePoint=function(S){return S>=this._value.length?-1:this._value[S]},E.prototype.consumeUnicodeRangeToken=function(){for(var S=[],D=this.consumeCodePoint();Hn(D)&&S.length<6;)S.push(D),D=this.consumeCodePoint();for(var L=!1;63===D&&S.length<6;)S.push(D),D=this.consumeCodePoint(),L=!0;if(L)return{type:30,start:parseInt(ft.apply(void 0,S.map(function(be){return 63===be?48:be})),16),end:parseInt(ft.apply(void 0,S.map(function(be){return 63===be?70:be})),16)};var ne=parseInt(ft.apply(void 0,S),16);if(45===this.peekCodePoint(0)&&Hn(this.peekCodePoint(1))){this.consumeCodePoint(),D=this.consumeCodePoint();for(var ye=[];Hn(D)&&ye.length<6;)ye.push(D),D=this.consumeCodePoint();return{type:30,start:ne,end:parseInt(ft.apply(void 0,ye),16)}}return{type:30,start:ne,end:ne}},E.prototype.consumeIdentLikeToken=function(){var S=this.consumeName();return"url"===S.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:S}):{type:20,value:S}},E.prototype.consumeUrlToken=function(){var S=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var D=this.peekCodePoint(0);if(39===D||34===D){var L=this.consumeStringToken(this.consumeCodePoint());return 0===L.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:L.value}):(this.consumeBadUrlRemnants(),Ks)}for(;;){var z=this.consumeCodePoint();if(-1===z||41===z)return{type:22,value:ft.apply(void 0,S)};if(Pf(z))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:ft.apply(void 0,S)}):(this.consumeBadUrlRemnants(),Ks);if(34===z||39===z||40===z||$1(z))return this.consumeBadUrlRemnants(),Ks;if(92===z){if(!pc(z,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Ks;S.push(this.consumeEscapedCodePoint())}else S.push(z)}},E.prototype.consumeWhiteSpace=function(){for(;Pf(this.peekCodePoint(0));)this.consumeCodePoint()},E.prototype.consumeBadUrlRemnants=function(){for(;;){var S=this.consumeCodePoint();if(41===S||-1===S)return;pc(S,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},E.prototype.consumeStringSlice=function(S){for(var L="";S>0;){var z=Math.min(5e4,S);L+=ft.apply(void 0,this._value.splice(0,z)),S-=z}return this._value.shift(),L},E.prototype.consumeStringToken=function(S){for(var D="",L=0;;){var z=this._value[L];if(-1===z||void 0===z||z===S)return{type:0,value:D+=this.consumeStringSlice(L)};if(10===z)return this._value.splice(0,L),r0;if(92===z){var U=this._value[L+1];-1!==U&&void 0!==U&&(10===U?(D+=this.consumeStringSlice(L),L=-1,this._value.shift()):pc(z,U)&&(D+=this.consumeStringSlice(L),D+=ft(this.consumeEscapedCodePoint()),L=-1))}L++}},E.prototype.consumeNumber=function(){var S=[],D=4,L=this.peekCodePoint(0);for((43===L||45===L)&&S.push(this.consumeCodePoint());qs(this.peekCodePoint(0));)S.push(this.consumeCodePoint());L=this.peekCodePoint(0);var z=this.peekCodePoint(1);if(46===L&&qs(z))for(S.push(this.consumeCodePoint(),this.consumeCodePoint()),D=8;qs(this.peekCodePoint(0));)S.push(this.consumeCodePoint());L=this.peekCodePoint(0),z=this.peekCodePoint(1);var U=this.peekCodePoint(2);if((69===L||101===L)&&((43===z||45===z)&&qs(U)||qs(z)))for(S.push(this.consumeCodePoint(),this.consumeCodePoint()),D=8;qs(this.peekCodePoint(0));)S.push(this.consumeCodePoint());return[No(S),D]},E.prototype.consumeNumericToken=function(){var S=this.consumeNumber(),D=S[0],L=S[1],z=this.peekCodePoint(0),U=this.peekCodePoint(1),ne=this.peekCodePoint(2);return Oo(z,U,ne)?{type:15,number:D,flags:L,unit:this.consumeName()}:37===z?(this.consumeCodePoint(),{type:16,number:D,flags:L}):{type:17,number:D,flags:L}},E.prototype.consumeEscapedCodePoint=function(){var S=this.consumeCodePoint();if(Hn(S)){for(var D=ft(S);Hn(this.peekCodePoint(0))&&D.length<6;)D+=ft(this.consumeCodePoint());Pf(this.peekCodePoint(0))&&this.consumeCodePoint();var L=parseInt(D,16);return 0===L||function(E){return E>=55296&&E<=57343}(L)||L>1114111?65533:L}return-1===S?65533:S},E.prototype.consumeName=function(){for(var S="";;){var D=this.consumeCodePoint();if(Ba(D))S+=ft(D);else{if(!pc(D,this.peekCodePoint(0)))return this.reconsumeCodePoint(D),S;S+=ft(this.consumeEscapedCodePoint())}}},E}(),X2=function(){function E(S){this._tokens=S}return E.create=function(S){var D=new q1;return D.write(S),new E(D.read())},E.parseValue=function(S){return E.create(S).parseComponentValue()},E.parseValues=function(S){return E.create(S).parseComponentValues()},E.prototype.parseComponentValue=function(){for(var S=this.consumeToken();31===S.type;)S=this.consumeToken();if(32===S.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(S);var D=this.consumeComponentValue();do{S=this.consumeToken()}while(31===S.type);if(32===S.type)return D;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},E.prototype.parseComponentValues=function(){for(var S=[];;){var D=this.consumeComponentValue();if(32===D.type)return S;S.push(D),S.push()}},E.prototype.consumeComponentValue=function(){var S=this.consumeToken();switch(S.type){case 11:case 28:case 2:return this.consumeSimpleBlock(S.type);case 19:return this.consumeFunction(S)}return S},E.prototype.consumeSimpleBlock=function(S){for(var D={type:S,values:[]},L=this.consumeToken();;){if(32===L.type||I2(L,S))return D;this.reconsumeToken(L),D.values.push(this.consumeComponentValue()),L=this.consumeToken()}},E.prototype.consumeFunction=function(S){for(var D={name:S.value,values:[],type:18};;){var L=this.consumeToken();if(32===L.type||3===L.type)return D;this.reconsumeToken(L),D.values.push(this.consumeComponentValue())}},E.prototype.consumeToken=function(){var S=this._tokens.shift();return typeof S>"u"?Xo:S},E.prototype.reconsumeToken=function(S){this._tokens.unshift(S)},E}(),Li=function(E){return 15===E.type},Vs=function(E){return 17===E.type},nn=function(E){return 20===E.type},Ri=function(E){return 0===E.type},gr=function(E,S){return nn(E)&&E.value===S},Ts=function(E){return 31!==E.type},Rc=function(E){return 31!==E.type&&4!==E.type},ro=function(E){var S=[],D=[];return E.forEach(function(L){if(4===L.type){if(0===D.length)throw new Error("Error parsing function args, zero tokens for arg");return S.push(D),void(D=[])}31!==L.type&&D.push(L)}),D.length&&S.push(D),S},I2=function(E,S){return 11===S&&12===E.type||28===S&&29===E.type||2===S&&3===E.type},fr=function(E){return 17===E.type||15===E.type},Rs=function(E){return 16===E.type||fr(E)},Ra=function(E){return E.length>1?[E[0],E[1]]:[E[0]]},ii={type:17,number:0,flags:4},p2={type:16,number:50,flags:4},Fa={type:16,number:100,flags:4},g2=function(E,S,D){var L=E[0],z=E[1];return[ki(L,S),ki(typeof z<"u"?z:L,D)]},ki=function(E,S){if(16===E.type)return E.number/100*S;if(Li(E))switch(E.unit){case"rem":case"em":return 16*E.number;default:return E.number}return E.number},Pa_parse=function(E,S){if(15===S.type)switch(S.unit){case"deg":return Math.PI*S.number/180;case"grad":return Math.PI/200*S.number;case"rad":return S.number;case"turn":return 2*Math.PI*S.number}throw new Error("Unsupported angle type")},Hf=function(E){return 15===E.type&&("deg"===E.unit||"grad"===E.unit||"rad"===E.unit||"turn"===E.unit)},cr=function(E){switch(E.filter(nn).map(function(D){return D.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ii,ii];case"to top":case"bottom":return gc(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ii,Fa];case"to right":case"left":return gc(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Fa,Fa];case"to bottom":case"top":return gc(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Fa,ii];case"to left":case"right":return gc(270)}return 0},gc=function(E){return Math.PI*E/180},Fc_parse=function(E,S){if(18===S.type){var D=Fs[S.name];if(typeof D>"u")throw new Error('Attempting to parse an unsupported color function "'+S.name+'"');return D(E,S.values)}if(5===S.type){if(3===S.value.length){var L=S.value.substring(0,1),z=S.value.substring(1,2),U=S.value.substring(2,3);return mc(parseInt(L+L,16),parseInt(z+z,16),parseInt(U+U,16),1)}if(4===S.value.length){L=S.value.substring(0,1),z=S.value.substring(1,2),U=S.value.substring(2,3);var ne=S.value.substring(3,4);return mc(parseInt(L+L,16),parseInt(z+z,16),parseInt(U+U,16),parseInt(ne+ne,16)/255)}if(6===S.value.length)return L=S.value.substring(0,2),z=S.value.substring(2,4),U=S.value.substring(4,6),mc(parseInt(L,16),parseInt(z,16),parseInt(U,16),1);if(8===S.value.length)return L=S.value.substring(0,2),z=S.value.substring(2,4),U=S.value.substring(4,6),ne=S.value.substring(6,8),mc(parseInt(L,16),parseInt(z,16),parseInt(U,16),parseInt(ne,16)/255)}if(20===S.type){var ye=x1[S.value.toUpperCase()];if(typeof ye<"u")return ye}return x1.TRANSPARENT},m2=function(E){return 0==(255&E)},ya=function(E){var S=255&E,D=255&E>>8,L=255&E>>16,z=255&E>>24;return S<255?"rgba("+z+","+L+","+D+","+S/255+")":"rgb("+z+","+L+","+D+")"},mc=function(E,S,D,L){return(E<<24|S<<16|D<<8|Math.round(255*L)<<0)>>>0},pl=function(E,S){if(17===E.type)return E.number;if(16===E.type){var D=3===S?1:255;return 3===S?E.number/100*D:Math.round(E.number/100*D)}return 0},C1=function(E,S){var D=S.filter(Rc);if(3===D.length){var L=D.map(pl);return mc(L[0],L[1],L[2],1)}if(4===D.length){var ye=D.map(pl);return mc(ye[0],ye[1],ye[2],ye[3])}return 0};function Dr(E,S,D){return D<0&&(D+=1),D>=1&&(D-=1),D<1/6?(S-E)*D*6+E:D<.5?S:D<2/3?6*(S-E)*(2/3-D)+E:E}var eu=function(E,S){var D=S.filter(Rc),L=D[0],z=D[1],U=D[2],ne=D[3],ye=(17===L.type?gc(L.number):Pa_parse(E,L))/(2*Math.PI),be=Rs(z)?z.number/100:0,Ye=Rs(U)?U.number/100:0,lt=typeof ne<"u"&&Rs(ne)?ki(ne,1):1;if(0===be)return mc(255*Ye,255*Ye,255*Ye,1);var dt=Ye<=.5?Ye*(be+1):Ye+be-Ye*be,Ft=2*Ye-dt,Gn=Dr(Ft,dt,ye+1/3),Tn=Dr(Ft,dt,ye),Qn=Dr(Ft,dt,ye-1/3);return mc(255*Gn,255*Tn,255*Qn,lt)},Fs={hsl:eu,hsla:eu,rgb:C1,rgba:C1},bo=function(E,S){return Fc_parse(E,X2.create(S).parseComponentValue())},x1={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},s0={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(E,S){return S.map(function(D){if(nn(D))switch(D.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Yl={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},la=function(E,S){var D=Fc_parse(E,S[0]),L=S[1];return L&&Rs(L)?{color:D,stop:L}:{color:D,stop:null}},gl=function(E,S){var D=E[0],L=E[E.length-1];null===D.stop&&(D.stop=ii),null===L.stop&&(L.stop=Fa);for(var z=[],U=0,ne=0;ne<E.length;ne++){var ye=E[ne].stop;if(null!==ye){var be=ki(ye,S);z.push(be>U?be:U),U=be}else z.push(null)}var Ye=null;for(ne=0;ne<z.length;ne++){var lt=z[ne];if(null===lt)null===Ye&&(Ye=ne);else if(null!==Ye){for(var dt=ne-Ye,Gn=(lt-z[Ye-1])/(dt+1),Tn=1;Tn<=dt;Tn++)z[Ye+Tn-1]=Gn*Tn;Ye=null}}return E.map(function(Qn,Cr){return{color:Qn.color,stop:Math.max(Math.min(1,z[Cr]/S),0)}})},Ac=function(E,S,D){var L="number"==typeof E?E:function(E,S,D){var L=S/2,z=D/2,U=ki(E[0],S)-L,ne=z-ki(E[1],D);return(Math.atan2(ne,U)+2*Math.PI)%(2*Math.PI)}(E,S,D),z=Math.abs(S*Math.sin(L))+Math.abs(D*Math.cos(L)),U=S/2,ne=D/2,ye=z/2,be=Math.sin(L-Math.PI/2)*ye,Ye=Math.cos(L-Math.PI/2)*ye;return[z,U-Ye,U+Ye,ne-be,ne+be]},so=function(E,S){return Math.sqrt(E*E+S*S)},fp=function(E,S,D,L,z){return[[0,0],[0,S],[E,0],[E,S]].reduce(function(ne,ye){var lt=so(D-ye[0],L-ye[1]);return(z?lt<ne.optimumDistance:lt>ne.optimumDistance)?{optimumCorner:ye,optimumDistance:lt}:ne},{optimumDistance:z?1/0:-1/0,optimumCorner:null}).optimumCorner},ua=function(E,S){var D=gc(180),L=[];return ro(S).forEach(function(z,U){if(0===U){var ne=z[0];if(20===ne.type&&-1!==["top","left","right","bottom"].indexOf(ne.value))return void(D=cr(z));if(Hf(ne))return void(D=(Pa_parse(E,ne)+gc(270))%gc(360))}var ye=la(E,z);L.push(ye)}),{angle:D,stops:L,type:1}},kc="closest-side",Y2="farthest-side",D6="closest-corner",tu="farthest-corner",A2="ellipse",Ha="contain",v2=function(E,S){var D=0,L=3,z=[],U=[];return ro(S).forEach(function(ne,ye){var be=!0;if(0===ye?be=ne.reduce(function(lt,dt){if(nn(dt))switch(dt.value){case"center":return U.push(p2),!1;case"top":case"left":return U.push(ii),!1;case"right":case"bottom":return U.push(Fa),!1}else if(Rs(dt)||fr(dt))return U.push(dt),!1;return lt},be):1===ye&&(be=ne.reduce(function(lt,dt){if(nn(dt))switch(dt.value){case"circle":return D=0,!1;case A2:return D=1,!1;case Ha:case kc:return L=0,!1;case Y2:return L=1,!1;case D6:return L=2,!1;case"cover":case tu:return L=3,!1}else if(fr(dt)||Rs(dt))return Array.isArray(L)||(L=[]),L.push(dt),!1;return lt},be)),be){var Ye=la(E,ne);z.push(Ye)}}),{size:L,shape:D,stops:z,position:U,type:2}},T3_parse=function(E,S){if(22===S.type){var D={url:S.value,type:0};return E.cache.addImage(S.value),D}if(18===S.type){var L=r1[S.name];if(typeof L>"u")throw new Error('Attempting to parse an unsupported image function "'+S.name+'"');return L(E,S.values)}throw new Error("Unsupported image type "+S.type)};for(var r1={"linear-gradient":function(E,S){var D=gc(180),L=[];return ro(S).forEach(function(z,U){if(0===U){var ne=z[0];if(20===ne.type&&"to"===ne.value)return void(D=cr(z));if(Hf(ne))return void(D=Pa_parse(E,ne))}var ye=la(E,z);L.push(ye)}),{angle:D,stops:L,type:1}},"-moz-linear-gradient":ua,"-ms-linear-gradient":ua,"-o-linear-gradient":ua,"-webkit-linear-gradient":ua,"radial-gradient":function(E,S){var D=0,L=3,z=[],U=[];return ro(S).forEach(function(ne,ye){var be=!0;if(0===ye){var Ye=!1;be=ne.reduce(function(dt,Ft){if(Ye)if(nn(Ft))switch(Ft.value){case"center":return U.push(p2),dt;case"top":case"left":return U.push(ii),dt;case"right":case"bottom":return U.push(Fa),dt}else(Rs(Ft)||fr(Ft))&&U.push(Ft);else if(nn(Ft))switch(Ft.value){case"circle":return D=0,!1;case A2:return D=1,!1;case"at":return Ye=!0,!1;case kc:return L=0,!1;case"cover":case Y2:return L=1,!1;case Ha:case D6:return L=2,!1;case tu:return L=3,!1}else if(fr(Ft)||Rs(Ft))return Array.isArray(L)||(L=[]),L.push(Ft),!1;return dt},be)}if(be){var lt=la(E,ne);z.push(lt)}}),{size:L,shape:D,stops:z,position:U,type:2}},"-moz-radial-gradient":v2,"-ms-radial-gradient":v2,"-o-radial-gradient":v2,"-webkit-radial-gradient":v2,"-webkit-gradient":function(E,S){var D=gc(180),L=[],z=1;return ro(S).forEach(function(be,Ye){var lt=be[0];if(0===Ye){if(nn(lt)&&"linear"===lt.value)return void(z=1);if(nn(lt)&&"radial"===lt.value)return void(z=2)}if(18===lt.type)if("from"===lt.name){var dt=Fc_parse(E,lt.values[0]);L.push({stop:ii,color:dt})}else if("to"===lt.name)dt=Fc_parse(E,lt.values[0]),L.push({stop:Fa,color:dt});else if("color-stop"===lt.name){var Ft=lt.values.filter(Rc);if(2===Ft.length){dt=Fc_parse(E,Ft[1]);var Gn=Ft[0];Vs(Gn)&&L.push({stop:{type:16,number:100*Gn.number,flags:Gn.flags},color:dt})}}}),1===z?{angle:(D+gc(180))%gc(360),stops:L,type:z}:{size:3,shape:0,stops:L,position:[],type:z}}},nu={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(E,S){if(0===S.length)return[];var D=S[0];return 20===D.type&&"none"===D.value?[]:S.filter(function(L){return Rc(L)&&function a0(E){return!(20===E.type&&"none"===E.value||18===E.type&&!r1[E.name])}(L)}).map(function(L){return T3_parse(E,L)})}},wr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(E,S){return S.map(function(D){if(nn(D))switch(D.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Hc={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(E,S){return ro(S).map(function(D){return D.filter(Rs)}).map(Ra)}},Mo={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(E,S){return ro(S).map(function(D){return D.filter(nn).map(function(L){return L.value}).join(" ")}).map(pp)}},pp=function(E){switch(E){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},L3=(()=>{return(E=L3||(L3={})).AUTO="auto",E.CONTAIN="contain",E.COVER="cover",L3;var E})(),s1={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(E,S){return ro(S).map(function(D){return D.filter(D3)})}},D3=function(E){return nn(E)||Rs(E)},p4=function(E){return{name:"border-"+E+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},iu=p4("top"),za=p4("right"),Zo=p4("bottom"),M1=p4("left"),Zl=function(E){return{name:"border-radius-"+E,initialValue:"0 0",prefix:!1,type:1,parse:function(S,D){return Ra(D.filter(Rs))}}},_2=Zl("top-left"),gp=Zl("top-right"),Jo=Zl("bottom-right"),Oa=Zl("bottom-left"),B6=function(E){return{name:"border-"+E+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(S,D){switch(D){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Z2=B6("top"),vc=B6("right"),oh=B6("bottom"),R6=B6("left"),I3=function(E){return{name:"border-"+E+"-width",initialValue:"0",type:0,prefix:!1,parse:function(S,D){return Li(D)?D.number:0}}},ea=I3("top"),c0=I3("right"),B3=I3("bottom"),F6=I3("left"),_c={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},R3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(E,S){return"rtl"===S?1:0}},ru={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(E,S){return S.filter(nn).reduce(function(D,L){return D|Hi(L.value)},0)}},Hi=function(E){switch(E){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},F3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},zi={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(E,S){return 20===S.type&&"normal"===S.value?0:17===S.type||15===S.type?S.number:0}},yc=(()=>{return(E=yc||(yc={})).NORMAL="normal",E.STRICT="strict",yc;var E})(),l0={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){return"strict"===S?yc.STRICT:yc.NORMAL}},g4={name:"line-height",initialValue:"normal",prefix:!1,type:4},K1=function(E,S){return nn(E)&&"normal"===E.value?1.2*S:17===E.type?S*E.number:Rs(E)?ki(E,S):S},mp={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(E,S){return 20===S.type&&"none"===S.value?null:T3_parse(E,S)}},B2={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(E,S){return"inside"===S?0:1}},Dt={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Sr=function(E){return{name:"margin-"+E,initialValue:"0",prefix:!1,type:4}},Ai=Sr("top"),h=Sr("right"),d=Sr("bottom"),m=Sr("left"),v={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(E,S){return S.filter(nn).map(function(D){switch(D.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},x={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){return"break-word"===S?"break-word":"normal"}},B=function(E){return{name:"padding-"+E,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},H=B("top"),q=B("right"),pe=B("bottom"),Ue=B("left"),gt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(E,S){switch(S){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},pt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(E,S){switch(S){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},ln={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(E,S){return 1===S.length&&gr(S[0],"none")?[]:ro(S).map(function(D){for(var L={color:x1.TRANSPARENT,offsetX:ii,offsetY:ii,blur:ii},z=0,U=0;U<D.length;U++){var ne=D[U];fr(ne)?(0===z?L.offsetX=ne:1===z?L.offsetY=ne:L.blur=ne,z++):L.color=Fc_parse(E,ne)}return L})}},bn={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Rn={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(E,S){if(20===S.type&&"none"===S.value)return null;if(18===S.type){var D=So[S.name];if(typeof D>"u")throw new Error('Attempting to parse an unsupported transform function "'+S.name+'"');return D(S.values)}return null}},So={matrix:function(E){var S=E.filter(function(D){return 17===D.type}).map(function(D){return D.number});return 6===S.length?S:null},matrix3d:function(E){var S=E.filter(function(be){return 17===be.type}).map(function(be){return be.number});return 16===S.length?[S[0],S[1],S[4],S[5],S[12],S[13]]:null}},o1={type:16,number:50,flags:4},ml=[o1,o1],Al={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(E,S){var D=S.filter(Rs);return 2!==D.length?ml:[D[0],D[1]]}},ah={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"hidden":return 1;case"collapse":return 2;default:return 0}}},ch=(()=>{return(E=ch||(ch={})).NORMAL="normal",E.BREAK_ALL="break-all",E.KEEP_ALL="keep-all",ch;var E})(),km={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){switch(S){case"break-all":return ch.BREAK_ALL;case"keep-all":return ch.KEEP_ALL;default:return ch.NORMAL}}},bT={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(E,S){if(20===S.type)return{auto:!0,order:0};if(Vs(S))return{auto:!1,order:S.number};throw new Error("Invalid z-index number parsed")}},Pm={name:"time",parse:function(E,S){if(15===S.type)switch(S.unit.toLowerCase()){case"s":return 1e3*S.number;case"ms":return S.number}throw new Error("Unsupported time type")}},Hm={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(E,S){return Vs(S)?S.number:1}},uy={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hy={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(E,S){return S.filter(nn).map(function(D){switch(D.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(D){return 0!==D})}},fy={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(E,S){var D=[],L=[];return S.forEach(function(z){switch(z.type){case 20:case 0:D.push(z.value);break;case 17:D.push(z.number.toString());break;case 4:L.push(D.join(" ")),D.length=0}}),D.length&&L.push(D.join(" ")),L.map(function(z){return-1===z.indexOf(" ")?z:"'"+z+"'"})}},dy={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},zm={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(E,S){return Vs(S)?S.number:nn(S)&&"bold"===S.value?700:400}},MT={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(E,S){return S.filter(nn).map(function(D){return D.value})}},ST={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){switch(S){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},ks=function(E,S){return 0!=(E&S)},u0={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(E,S){if(0===S.length)return[];var D=S[0];return 20===D.type&&"none"===D.value?[]:S}},Na={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(E,S){if(0===S.length)return null;var D=S[0];if(20===D.type&&"none"===D.value)return null;for(var L=[],z=S.filter(Ts),U=0;U<z.length;U++){var ne=z[U],ye=z[U+1];if(20===ne.type){var be=ye&&Vs(ye)?ye.number:1;L.push({counter:ne.value,increment:be})}}return L}},Uo={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(E,S){if(0===S.length)return[];for(var D=[],L=S.filter(Ts),z=0;z<L.length;z++){var U=L[z],ne=L[z+1];if(nn(U)&&"none"!==U.value){var ye=ne&&Vs(ne)?ne.number:0;D.push({counter:U.value,reset:ye})}}return D}},ET={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(E,S){return S.filter(Li).map(function(D){return Pm.parse(E,D)})}},py={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(E,S){if(0===S.length)return null;var D=S[0];if(20===D.type&&"none"===D.value)return null;var L=[],z=S.filter(Ri);if(z.length%2!=0)return null;for(var U=0;U<z.length;U+=2)L.push({open:z[U].value,close:z[U+1].value});return L}},gy=function(E,S,D){if(!E)return"";var L=E[Math.min(S,E.length-1)];return L?D?L.open:L.close:""},TT={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(E,S){return 1===S.length&&gr(S[0],"none")?[]:ro(S).map(function(D){for(var L={color:255,offsetX:ii,offsetY:ii,blur:ii,spread:ii,inset:!1},z=0,U=0;U<D.length;U++){var ne=D[U];gr(ne,"inset")?L.inset=!0:fr(ne)?(0===z?L.offsetX=ne:1===z?L.offsetY=ne:2===z?L.blur=ne:L.spread=ne,z++):L.color=Fc_parse(E,ne)}return L})}},LT={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(E,S){var L=[];return S.filter(nn).forEach(function(z){switch(z.value){case"stroke":L.push(1);break;case"fill":L.push(0);break;case"markers":L.push(2)}}),[0,1,2].forEach(function(z){-1===L.indexOf(z)&&L.push(z)}),L}},Ap={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},vp={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(E,S){return Li(S)?S.number:0}},_p=function(){function E(S,D){var L,z;this.animationDuration=ri(S,ET,D.animationDuration),this.backgroundClip=ri(S,s0,D.backgroundClip),this.backgroundColor=ri(S,Yl,D.backgroundColor),this.backgroundImage=ri(S,nu,D.backgroundImage),this.backgroundOrigin=ri(S,wr,D.backgroundOrigin),this.backgroundPosition=ri(S,Hc,D.backgroundPosition),this.backgroundRepeat=ri(S,Mo,D.backgroundRepeat),this.backgroundSize=ri(S,s1,D.backgroundSize),this.borderTopColor=ri(S,iu,D.borderTopColor),this.borderRightColor=ri(S,za,D.borderRightColor),this.borderBottomColor=ri(S,Zo,D.borderBottomColor),this.borderLeftColor=ri(S,M1,D.borderLeftColor),this.borderTopLeftRadius=ri(S,_2,D.borderTopLeftRadius),this.borderTopRightRadius=ri(S,gp,D.borderTopRightRadius),this.borderBottomRightRadius=ri(S,Jo,D.borderBottomRightRadius),this.borderBottomLeftRadius=ri(S,Oa,D.borderBottomLeftRadius),this.borderTopStyle=ri(S,Z2,D.borderTopStyle),this.borderRightStyle=ri(S,vc,D.borderRightStyle),this.borderBottomStyle=ri(S,oh,D.borderBottomStyle),this.borderLeftStyle=ri(S,R6,D.borderLeftStyle),this.borderTopWidth=ri(S,ea,D.borderTopWidth),this.borderRightWidth=ri(S,c0,D.borderRightWidth),this.borderBottomWidth=ri(S,B3,D.borderBottomWidth),this.borderLeftWidth=ri(S,F6,D.borderLeftWidth),this.boxShadow=ri(S,TT,D.boxShadow),this.color=ri(S,_c,D.color),this.direction=ri(S,R3,D.direction),this.display=ri(S,ru,D.display),this.float=ri(S,F3,D.cssFloat),this.fontFamily=ri(S,fy,D.fontFamily),this.fontSize=ri(S,dy,D.fontSize),this.fontStyle=ri(S,ST,D.fontStyle),this.fontVariant=ri(S,MT,D.fontVariant),this.fontWeight=ri(S,zm,D.fontWeight),this.letterSpacing=ri(S,zi,D.letterSpacing),this.lineBreak=ri(S,l0,D.lineBreak),this.lineHeight=ri(S,g4,D.lineHeight),this.listStyleImage=ri(S,mp,D.listStyleImage),this.listStylePosition=ri(S,B2,D.listStylePosition),this.listStyleType=ri(S,Dt,D.listStyleType),this.marginTop=ri(S,Ai,D.marginTop),this.marginRight=ri(S,h,D.marginRight),this.marginBottom=ri(S,d,D.marginBottom),this.marginLeft=ri(S,m,D.marginLeft),this.opacity=ri(S,Hm,D.opacity);var U=ri(S,v,D.overflow);this.overflowX=U[0],this.overflowY=U[U.length>1?1:0],this.overflowWrap=ri(S,x,D.overflowWrap),this.paddingTop=ri(S,H,D.paddingTop),this.paddingRight=ri(S,q,D.paddingRight),this.paddingBottom=ri(S,pe,D.paddingBottom),this.paddingLeft=ri(S,Ue,D.paddingLeft),this.paintOrder=ri(S,LT,D.paintOrder),this.position=ri(S,pt,D.position),this.textAlign=ri(S,gt,D.textAlign),this.textDecorationColor=ri(S,uy,null!==(L=D.textDecorationColor)&&void 0!==L?L:D.color),this.textDecorationLine=ri(S,hy,null!==(z=D.textDecorationLine)&&void 0!==z?z:D.textDecoration),this.textShadow=ri(S,ln,D.textShadow),this.textTransform=ri(S,bn,D.textTransform),this.transform=ri(S,Rn,D.transform),this.transformOrigin=ri(S,Al,D.transformOrigin),this.visibility=ri(S,ah,D.visibility),this.webkitTextStrokeColor=ri(S,Ap,D.webkitTextStrokeColor),this.webkitTextStrokeWidth=ri(S,vp,D.webkitTextStrokeWidth),this.wordBreak=ri(S,km,D.wordBreak),this.zIndex=ri(S,bT,D.zIndex)}return E.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},E.prototype.isTransparent=function(){return m2(this.backgroundColor)},E.prototype.isTransformed=function(){return null!==this.transform},E.prototype.isPositioned=function(){return 0!==this.position},E.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},E.prototype.isFloating=function(){return 0!==this.float},E.prototype.isInlineLevel=function(){return ks(this.display,4)||ks(this.display,33554432)||ks(this.display,268435456)||ks(this.display,536870912)||ks(this.display,67108864)||ks(this.display,134217728)},E}(),Om=function E(S,D){this.content=ri(S,u0,D.content),this.quotes=ri(S,py,D.quotes)},Nm=function E(S,D){this.counterIncrement=ri(S,Na,D.counterIncrement),this.counterReset=ri(S,Uo,D.counterReset)},ri=function(E,S,D){var L=new q1,z=null!==D&&typeof D<"u"?D.toString():S.initialValue;L.write(z);var U=new X2(L.read());switch(S.type){case 2:var ne=U.parseComponentValue();return S.parse(E,nn(ne)?ne.value:S.initialValue);case 0:return S.parse(E,U.parseComponentValue());case 1:return S.parse(E,U.parseComponentValues());case 4:return U.parseComponentValue();case 3:switch(S.format){case"angle":return Pa_parse(E,U.parseComponentValue());case"color":return Fc_parse(E,U.parseComponentValue());case"image":return T3_parse(E,U.parseComponentValue());case"length":var ye=U.parseComponentValue();return fr(ye)?ye:ii;case"length-percentage":var be=U.parseComponentValue();return Rs(be)?be:ii;case"time":return Pm.parse(E,U.parseComponentValue())}}},Vm=function(E,S){var D=function(E){switch(E.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(E);return 1===D||S===D},m4=function E(S,D){this.context=S,this.textNodes=[],this.elements=[],this.flags=0,Vm(D,3),this.styles=new _p(S,window.getComputedStyle(D,null)),iA(D)&&(this.styles.animationDuration.some(function(L){return L>0})&&(D.style.animationDuration="0s"),null!==this.styles.transform&&(D.style.transform="none")),this.bounds=De(this.context,D),Vm(D,4)&&(this.flags|=16)},yp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H6=typeof Uint8Array>"u"?[]:new Uint8Array(256),wp=0;wp<yp.length;wp++)H6[yp.charCodeAt(wp)]=wp;for(var _y=function(E,S,D){return E.slice?E.slice(S,D):new Uint16Array(Array.prototype.slice.call(E,S,D))},jm=function(){function E(S,D,L,z,U,ne){this.initialValue=S,this.errorValue=D,this.highStart=L,this.highValueIndex=z,this.index=U,this.data=ne}return E.prototype.get=function(S){var D;if(S>=0){if(S<55296||S>56319&&S<=65535)return this.data[D=((D=this.index[S>>5])<<2)+(31&S)];if(S<=65535)return this.data[D=((D=this.index[2048+(S-55296>>5)])<<2)+(31&S)];if(S<this.highStart)return D=this.index[D=2080+(S>>11)],this.data[D=((D=this.index[D+=S>>5&63])<<2)+(31&S)];if(S<=1114111)return this.data[this.highValueIndex]}return this.errorValue},E}(),O6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mp=typeof Uint8Array>"u"?[]:new Uint8Array(256),Sp=0;Sp<O6.length;Sp++)Mp[O6.charCodeAt(Sp)]=Sp;var Vf=8,qm=9,Km=11,lh=12,xy=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];if(String.fromCodePoint)return String.fromCodePoint.apply(String,E);var D=E.length;if(!D)return"";for(var L=[],z=-1,U="";++z<D;){var ne=E[z];ne<=65535?L.push(ne):L.push(55296+((ne-=65536)>>10),ne%1024+56320),(z+1===D||L.length>16384)&&(U+=String.fromCharCode.apply(String,L),L.length=0)}return U},Jl=function(E,S){var D=function(E){var L,U,ne,ye,be,S=.75*E.length,D=E.length,z=0;"="===E[E.length-1]&&(S--,"="===E[E.length-2]&&S--);var Ye=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(S):new Array(S),lt=Array.isArray(Ye)?Ye:new Uint8Array(Ye);for(L=0;L<D;L+=4)U=H6[E.charCodeAt(L)],ne=H6[E.charCodeAt(L+1)],ye=H6[E.charCodeAt(L+2)],be=H6[E.charCodeAt(L+3)],lt[z++]=U<<2|ne>>4,lt[z++]=(15&ne)<<4|ye>>2,lt[z++]=(3&ye)<<6|63&be;return Ye}(E),L=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=4)D.push(E[L+3]<<24|E[L+2]<<16|E[L+1]<<8|E[L]);return D}(D):new Uint32Array(D),z=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=2)D.push(E[L+1]<<8|E[L]);return D}(D):new Uint16Array(D),ne=_y(z,12,L[4]/2),ye=2===L[5]?_y(z,(24+L[4])/2):function(E,S,D){return E.slice?E.slice(S,D):new Uint32Array(Array.prototype.slice.call(E,S,D))}(L,Math.ceil((24+L[4])/4));return new jm(L[0],L[1],L[2],L[3],ne,ye)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Uf=function(E){return Jl.get(E)},by=function(E,S,D){var L=D-2,z=S[L],U=S[D-1],ne=S[D];if(2===U&&3===ne)return"\xd7";if(2===U||3===U||4===U||2===ne||3===ne||4===ne)return"\xf7";if(U===Vf&&-1!==[Vf,qm,Km,lh].indexOf(ne)||(U===Km||U===qm)&&(ne===qm||10===ne)||(U===lh||10===U)&&10===ne||13===ne||5===ne||7===ne||1===U)return"\xd7";if(13===U&&14===ne){for(;5===z;)z=S[--L];if(14===z)return"\xd7"}if(15===U&&15===ne){for(var ye=0;15===z;)ye++,z=S[--L];if(ye%2==0)return"\xd7"}return"\xf7"},Xm=function(E){var S=function(E){for(var S=[],D=0,L=E.length;D<L;){var z=E.charCodeAt(D++);if(z>=55296&&z<=56319&&D<L){var U=E.charCodeAt(D++);56320==(64512&U)?S.push(((1023&z)<<10)+(1023&U)+65536):(S.push(z),D--)}else S.push(z)}return S}(E),D=S.length,L=0,z=0,U=S.map(Uf);return{next:function(){if(L>=D)return{done:!0,value:null};for(var ne="\xd7";L<D&&"\xd7"===(ne=by(0,U,++L)););if("\xd7"!==ne||L===D){var ye=xy.apply(null,S.slice(z,L));return z=L,{value:ye,done:!1}}return{done:!0,value:null}}}},RT=function(E){return 0===E[0]&&255===E[1]&&0===E[2]&&255===E[3]},My=function(E,S,D,L,z){var U="http://www.w3.org/2000/svg",ne=document.createElementNS(U,"svg"),ye=document.createElementNS(U,"foreignObject");return ne.setAttributeNS(null,"width",E.toString()),ne.setAttributeNS(null,"height",S.toString()),ye.setAttributeNS(null,"width","100%"),ye.setAttributeNS(null,"height","100%"),ye.setAttributeNS(null,"x",D.toString()),ye.setAttributeNS(null,"y",L.toString()),ye.setAttributeNS(null,"externalResourcesRequired","true"),ne.appendChild(ye),ye.appendChild(z),ne},FT=function(E){return new Promise(function(S,D){var L=new Image;L.onload=function(){return S(L)},L.onerror=D,L.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(E))})},J2={get SUPPORT_RANGE_BOUNDS(){var E=function(E){if(E.createRange){var D=E.createRange();if(D.getBoundingClientRect){var L=E.createElement("boundtest");L.style.height="123px",L.style.display="block",E.body.appendChild(L),D.selectNode(L);var z=D.getBoundingClientRect(),U=Math.round(z.height);if(E.body.removeChild(L),123===U)return!0}}return!1}(document);return Object.defineProperty(J2,"SUPPORT_RANGE_BOUNDS",{value:E}),E},get SUPPORT_WORD_BREAKING(){var E=J2.SUPPORT_RANGE_BOUNDS&&function(E){var S=E.createElement("boundtest");S.style.width="50px",S.style.display="block",S.style.fontSize="12px",S.style.letterSpacing="0px",S.style.wordSpacing="0px",E.body.appendChild(S);var D=E.createRange();S.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var L=S.firstChild,z=ct(L.data).map(function(be){return ft(be)}),U=0,ne={},ye=z.every(function(be,Ye){D.setStart(L,U),D.setEnd(L,U+be.length);var lt=D.getBoundingClientRect();U+=be.length;var dt=lt.x>ne.x||lt.y>ne.y;return ne=lt,0===Ye||dt});return E.body.removeChild(S),ye}(document);return Object.defineProperty(J2,"SUPPORT_WORD_BREAKING",{value:E}),E},get SUPPORT_SVG_DRAWING(){var E=function(E){var S=new Image,D=E.createElement("canvas"),L=D.getContext("2d");if(!L)return!1;S.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{L.drawImage(S,0,0),D.toDataURL()}catch{return!1}return!0}(document);return Object.defineProperty(J2,"SUPPORT_SVG_DRAWING",{value:E}),E},get SUPPORT_FOREIGNOBJECT_DRAWING(){var E="function"==typeof Array.from&&"function"==typeof window.fetch?function(E){var S=E.createElement("canvas"),D=100;S.width=D,S.height=D;var L=S.getContext("2d");if(!L)return Promise.reject(!1);L.fillStyle="rgb(0, 255, 0)",L.fillRect(0,0,D,D);var z=new Image,U=S.toDataURL();z.src=U;var ne=My(D,D,0,0,z);return L.fillStyle="red",L.fillRect(0,0,D,D),FT(ne).then(function(ye){L.drawImage(ye,0,0);var be=L.getImageData(0,0,D,D).data;L.fillStyle="red",L.fillRect(0,0,D,D);var Ye=E.createElement("div");return Ye.style.backgroundImage="url("+U+")",Ye.style.height=D+"px",RT(be)?FT(My(D,D,0,0,Ye)):Promise.reject(!1)}).then(function(ye){return L.drawImage(ye,0,0),RT(L.getImageData(0,0,D,D).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(J2,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:E}),E},get SUPPORT_CORS_IMAGES(){var E=typeof(new Image).crossOrigin<"u";return Object.defineProperty(J2,"SUPPORT_CORS_IMAGES",{value:E}),E},get SUPPORT_RESPONSE_TYPE(){var E="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(J2,"SUPPORT_RESPONSE_TYPE",{value:E}),E},get SUPPORT_CORS_XHR(){var E="withCredentials"in new XMLHttpRequest;return Object.defineProperty(J2,"SUPPORT_CORS_XHR",{value:E}),E},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var E=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(J2,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:E}),E}},su=function E(S,D){this.text=S,this.bounds=D},wV=function(E,S){var D=S.ownerDocument;if(D){var L=D.createElement("html2canvaswrapper");L.appendChild(S.cloneNode(!0));var z=S.parentNode;if(z){z.replaceChild(L,S);var U=De(E,L);return L.firstChild&&z.replaceChild(L.firstChild,L),U}}return Fe.EMPTY},S1=function(E,S,D){var L=E.ownerDocument;if(!L)throw new Error("Node has no owner document");var z=L.createRange();return z.setStart(E,S),z.setEnd(E,S+D),z},V6=function(E){if(J2.SUPPORT_NATIVE_TEXT_SEGMENTATION){var S=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(S.segment(E)).map(function(D){return D.segment})}return function(E){for(var L,S=Xm(E),D=[];!(L=S.next()).done;)L.value&&D.push(L.value.slice());return D}(E)},CV=function(E,S){return 0!==S.letterSpacing?V6(E):function(E,S){if(J2.SUPPORT_NATIVE_TEXT_SEGMENTATION){var D=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(D.segment(E)).map(function(L){return L.segment})}return vl(E,S)}(E,S)},kT=[32,160,4961,65792,65793,4153,4241],vl=function(E,S){for(var z,D=function(E,S){var D=ct(E),L=T6(D,S),z=L[0],U=L[1],ne=L[2],ye=D.length,be=0,Ye=0;return{next:function(){if(Ye>=ye)return{done:!0,value:null};for(var lt=Tr;Ye<ye&&(lt=v1(D,U,z,++Ye,ne))===Tr;);if(lt!==Tr||Ye===ye){var dt=new mo(D,lt,be,Ye);return be=Ye,{value:dt,done:!1}}return{done:!0,value:null}}}}(E,{lineBreak:S.lineBreak,wordBreak:"break-word"===S.overflowWrap?"break-word":S.wordBreak}),L=[],U=function(){if(z.value){var ne=z.value.slice(),ye=ct(ne),be="";ye.forEach(function(Ye){-1===kT.indexOf(Ye)?be+=ft(Ye):(be.length&&L.push(be),L.push(ft(Ye)),be="")}),be.length&&L.push(be)}};!(z=D.next()).done;)U();return L},ou=function E(S,D,L){this.text=Sy(D.data,L.textTransform),this.textBounds=function(E,S,D,L){var z=CV(S,D),U=[],ne=0;return z.forEach(function(ye){if(D.textDecorationLine.length||ye.trim().length>0)if(J2.SUPPORT_RANGE_BOUNDS){var be=S1(L,ne,ye.length).getClientRects();if(be.length>1){var Ye=V6(ye),lt=0;Ye.forEach(function(Ft){U.push(new su(Ft,Fe.fromDOMRectList(E,S1(L,lt+ne,Ft.length).getClientRects()))),lt+=Ft.length})}else U.push(new su(ye,Fe.fromDOMRectList(E,be)))}else{var dt=L.splitText(ye.length);U.push(new su(ye,wV(E,L))),L=dt}else J2.SUPPORT_RANGE_BOUNDS||(L=L.splitText(ye.length));ne+=ye.length}),U}(S,this.text,L,D)},Sy=function(E,S){switch(S){case 1:return E.toLowerCase();case 3:return E.replace(Ip,G6);case 2:return E.toUpperCase();default:return E}},Ip=/(^|\s|:|-|\(|\))([a-z])/g,G6=function(E,S,D){return E.length>0?S+D.toUpperCase():E},Ym=function(E){function S(D,L){var z=E.call(this,D,L)||this;return z.src=L.currentSrc||L.src,z.intrinsicWidth=L.naturalWidth,z.intrinsicHeight=L.naturalHeight,z.context.cache.addImage(z.src),z}return Me(S,E),S}(m4),Ey=function(E){function S(D,L){var z=E.call(this,D,L)||this;return z.canvas=L,z.intrinsicWidth=L.width,z.intrinsicHeight=L.height,z}return Me(S,E),S}(m4),Ty=function(E){function S(D,L){var z=E.call(this,D,L)||this,U=new XMLSerializer,ne=De(D,L);return L.setAttribute("width",ne.width+"px"),L.setAttribute("height",ne.height+"px"),z.svg="data:image/svg+xml,"+encodeURIComponent(U.serializeToString(L)),z.intrinsicWidth=L.width.baseVal.value,z.intrinsicHeight=L.height.baseVal.value,z.context.cache.addImage(z.svg),z}return Me(S,E),S}(m4),PT=function(E){function S(D,L){var z=E.call(this,D,L)||this;return z.value=L.value,z}return Me(S,E),S}(m4),Ly=function(E){function S(D,L){var z=E.call(this,D,L)||this;return z.start=L.start,z.reversed="boolean"==typeof L.reversed&&!0===L.reversed,z}return Me(S,E),S}(m4),Dy=[{type:15,flags:0,unit:"px",number:3}],_l=[{type:16,flags:0,number:50}],Jm="checkbox",Q6="radio",HT="password",Iy=707406591,eA=function(E){function S(D,L){var z=E.call(this,D,L)||this;switch(z.type=L.type.toLowerCase(),z.checked=L.checked,z.value=function(E){var S=E.type===HT?new Array(E.value.length+1).join("\u2022"):E.value;return 0===S.length?E.placeholder||"":S}(L),(z.type===Jm||z.type===Q6)&&(z.styles.backgroundColor=3739148031,z.styles.borderTopColor=z.styles.borderRightColor=z.styles.borderBottomColor=z.styles.borderLeftColor=2779096575,z.styles.borderTopWidth=z.styles.borderRightWidth=z.styles.borderBottomWidth=z.styles.borderLeftWidth=1,z.styles.borderTopStyle=z.styles.borderRightStyle=z.styles.borderBottomStyle=z.styles.borderLeftStyle=1,z.styles.backgroundClip=[0],z.styles.backgroundOrigin=[0],z.bounds=function(E){return E.width>E.height?new Fe(E.left+(E.width-E.height)/2,E.top,E.height,E.height):E.width<E.height?new Fe(E.left,E.top+(E.height-E.width)/2,E.width,E.width):E}(z.bounds)),z.type){case Jm:z.styles.borderTopRightRadius=z.styles.borderTopLeftRadius=z.styles.borderBottomRightRadius=z.styles.borderBottomLeftRadius=Dy;break;case Q6:z.styles.borderTopRightRadius=z.styles.borderTopLeftRadius=z.styles.borderBottomRightRadius=z.styles.borderBottomLeftRadius=_l}return z}return Me(S,E),S}(m4),By=function(E){function S(D,L){var z=E.call(this,D,L)||this,U=L.options[L.selectedIndex||0];return z.value=U&&U.text||"",z}return Me(S,E),S}(m4),Ry=function(E){function S(D,L){var z=E.call(this,D,L)||this;return z.value=L.value,z}return Me(S,E),S}(m4),Fy=function(E){function S(D,L){var z=E.call(this,D,L)||this;z.src=L.src,z.width=parseInt(L.width,10)||0,z.height=parseInt(L.height,10)||0,z.backgroundColor=z.styles.backgroundColor;try{if(L.contentWindow&&L.contentWindow.document&&L.contentWindow.document.documentElement){z.tree=Wf(D,L.contentWindow.document.documentElement);var U=L.contentWindow.document.documentElement?bo(D,getComputedStyle(L.contentWindow.document.documentElement).backgroundColor):x1.TRANSPARENT,ne=L.contentWindow.document.body?bo(D,getComputedStyle(L.contentWindow.document.body).backgroundColor):x1.TRANSPARENT;z.backgroundColor=m2(U)?m2(ne)?z.styles.backgroundColor:ne:U}}catch{}return z}return Me(S,E),S}(m4),tA=["OL","UL","MENU"],uh=function(E,S,D,L){for(var z=S.firstChild,U=void 0;z;z=U)if(U=z.nextSibling,ky(z)&&z.data.trim().length>0)D.textNodes.push(new ou(E,z,D.styles));else if(jf(z))if(p0(z)&&z.assignedNodes)z.assignedNodes().forEach(function(ye){return uh(E,ye,D,L)});else{var ne=zT(E,z);ne.styles.isVisible()&&(nA(z,ne,L)?ne.flags|=4:Bp(ne.styles)&&(ne.flags|=2),-1!==tA.indexOf(z.tagName)&&(ne.flags|=8),D.elements.push(ne),z.shadowRoot?uh(E,z.shadowRoot,ne,L):!e3(z)&&!rA(z)&&!$6(z)&&uh(E,z,ne,L))}},zT=function(E,S){return sA(S)?new Ym(E,S):Rp(S)?new Ey(E,S):rA(S)?new Ty(E,S):j6(S)?new PT(E,S):$f(S)?new Ly(E,S):OT(S)?new eA(E,S):$6(S)?new By(E,S):e3(S)?new Ry(E,S):Py(S)?new Fy(E,S):new m4(E,S)},Wf=function(E,S){var D=zT(E,S);return D.flags|=4,uh(E,S,D,D),D},nA=function(E,S,D){return S.styles.isPositionedWithZIndex()||S.styles.opacity<1||S.styles.isTransformed()||ys(E)&&D.styles.isTransparent()},Bp=function(E){return E.isPositioned()||E.isFloating()},ky=function(E){return E.nodeType===Node.TEXT_NODE},jf=function(E){return E.nodeType===Node.ELEMENT_NODE},iA=function(E){return jf(E)&&typeof E.style<"u"&&!W6(E)},W6=function(E){return"object"==typeof E.className},j6=function(E){return"LI"===E.tagName},$f=function(E){return"OL"===E.tagName},OT=function(E){return"INPUT"===E.tagName},rA=function(E){return"svg"===E.tagName},ys=function(E){return"BODY"===E.tagName},Rp=function(E){return"CANVAS"===E.tagName},qf=function(E){return"VIDEO"===E.tagName},sA=function(E){return"IMG"===E.tagName},Py=function(E){return"IFRAME"===E.tagName},Hy=function(E){return"STYLE"===E.tagName},e3=function(E){return"TEXTAREA"===E.tagName},$6=function(E){return"SELECT"===E.tagName},p0=function(E){return"SLOT"===E.tagName},zy=function(E){return E.tagName.indexOf("-")>0},Oy=function(){function E(){this.counters={}}return E.prototype.getCounterValue=function(S){var D=this.counters[S];return D&&D.length?D[D.length-1]:1},E.prototype.getCounterValues=function(S){return this.counters[S]||[]},E.prototype.pop=function(S){var D=this;S.forEach(function(L){return D.counters[L].pop()})},E.prototype.parse=function(S){var D=this,L=S.counterIncrement,z=S.counterReset,U=!0;null!==L&&L.forEach(function(ye){var be=D.counters[ye.counter];be&&0!==ye.increment&&(U=!1,be.length||be.push(1),be[Math.max(0,be.length-1)]+=ye.increment)});var ne=[];return U&&z.forEach(function(ye){var be=D.counters[ye.counter];ne.push(ye.counter),be||(be=D.counters[ye.counter]=[]),be.push(ye.reset)}),ne},E}(),Kf={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},q6={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Ny={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},NT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Xf=function(E,S,D,L,z,U){return E<S||E>D?Y6(E,z,U.length>0):L.integers.reduce(function(ne,ye,be){for(;E>=ye;)E-=ye,ne+=L.values[be];return ne},"")+U},hh=function(E,S,D,L){var z="";do{D||E--,z=L(E)+z,E/=S}while(E*S>=S);return z},ta=function(E,S,D,L,z){var U=D-S+1;return(E<0?"-":"")+(hh(Math.abs(E),U,L,function(ne){return ft(Math.floor(ne%U)+S)})+z)},fh=function(E,S,D){void 0===D&&(D=". ");var L=S.length;return hh(Math.abs(E),L,!1,function(z){return S[Math.floor(z%L)]})+D},cu=function(E,S,D,L,z,U){if(E<-9999||E>9999)return Y6(E,4,z.length>0);var ne=Math.abs(E),ye=z;if(0===ne)return S[0]+ye;for(var be=0;ne>0&&be<=4;be++){var Ye=ne%10;0===Ye&&ks(U,1)&&""!==ye?ye=S[Ye]+ye:Ye>1||1===Ye&&0===be||1===Ye&&1===be&&ks(U,2)||1===Ye&&1===be&&ks(U,4)&&E>100||1===Ye&&be>1&&ks(U,8)?ye=S[Ye]+(be>0?D[be-1]:"")+ye:1===Ye&&be>0&&(ye=D[be-1]+ye),ne=Math.floor(ne/10)}return(E<0?L:"")+ye},kp="\ub9c8\uc774\ub108\uc2a4",Y6=function(E,S,D){var L=D?". ":"",z=D?"\u3001":"",U=D?", ":"",ne=D?" ":"";switch(S){case 0:return"\u2022"+ne;case 1:return"\u25e6"+ne;case 2:return"\u25fe"+ne;case 5:var ye=ta(E,48,57,!0,L);return ye.length<4?"0"+ye:ye;case 4:return fh(E,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",z);case 6:return Xf(E,1,3999,Kf,3,L).toLowerCase();case 7:return Xf(E,1,3999,Kf,3,L);case 8:return ta(E,945,969,!1,L);case 9:return ta(E,97,122,!1,L);case 10:return ta(E,65,90,!1,L);case 11:return ta(E,1632,1641,!0,L);case 12:case 49:return Xf(E,1,9999,q6,3,L);case 35:return Xf(E,1,9999,q6,3,L).toLowerCase();case 13:return ta(E,2534,2543,!0,L);case 14:case 30:return ta(E,6112,6121,!0,L);case 15:return fh(E,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",z);case 16:return fh(E,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",z);case 17:case 48:return cu(E,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8ca0",z,14);case 47:return cu(E,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8ca0",z,15);case 42:return cu(E,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8d1f",z,14);case 41:return cu(E,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8d1f",z,15);case 26:return cu(E,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",z,0);case 25:return cu(E,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",z,7);case 31:return cu(E,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",kp,U,7);case 33:return cu(E,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",kp,U,0);case 32:return cu(E,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",kp,U,7);case 18:return ta(E,2406,2415,!0,L);case 20:return Xf(E,1,19999,NT,3,L);case 21:return ta(E,2790,2799,!0,L);case 22:return ta(E,2662,2671,!0,L);case 22:return Xf(E,1,10999,Ny,3,L);case 23:return fh(E,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return fh(E,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return ta(E,3302,3311,!0,L);case 28:return fh(E,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",z);case 29:return fh(E,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",z);case 34:return ta(E,3792,3801,!0,L);case 37:return ta(E,6160,6169,!0,L);case 38:return ta(E,4160,4169,!0,L);case 39:return ta(E,2918,2927,!0,L);case 40:return ta(E,1776,1785,!0,L);case 43:return ta(E,3046,3055,!0,L);case 44:return ta(E,3174,3183,!0,L);case 45:return ta(E,3664,3673,!0,L);case 46:return ta(E,3872,3881,!0,L);default:return ta(E,48,57,!0,L)}},aA="data-html2canvas-ignore",VT=function(){function E(S,D,L){if(this.context=S,this.options=L,this.scrolledElements=[],this.referenceElement=D,this.counters=new Oy,this.quoteDepth=0,!D.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(D.ownerDocument.documentElement,!1)}return E.prototype.toIFrame=function(S,D){var L=this,z=xV(S,D);if(!z.contentWindow)return Promise.reject("Unable to find iframe window");var U=S.defaultView.pageXOffset,ne=S.defaultView.pageYOffset,ye=z.contentWindow,be=ye.document,Ye=Gy(z).then(function(){return Se(L,void 0,void 0,function(){var lt,dt;return Oe(this,function(Ft){switch(Ft.label){case 0:return this.scrolledElements.forEach(QT),ye&&(ye.scrollTo(D.left,D.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(ye.scrollY!==D.top||ye.scrollX!==D.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(ye.scrollX-D.left,ye.scrollY-D.top,0,0))),lt=this.options.onclone,typeof(dt=this.clonedReferenceElement)>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:be.fonts&&be.fonts.ready?[4,be.fonts.ready]:[3,2];case 1:Ft.sent(),Ft.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,UT(be)]:[3,4];case 3:Ft.sent(),Ft.label=4;case 4:return"function"==typeof lt?[2,Promise.resolve().then(function(){return lt(be,dt)}).then(function(){return z})]:[2,z]}})})});return be.open(),be.write(Yf(document.doctype)+"<html></html>"),GT(this.referenceElement.ownerDocument,U,ne),be.replaceChild(be.adoptNode(this.documentElement),be.documentElement),be.close(),Ye},E.prototype.createElementClone=function(S){if(Vm(S,2),Rp(S))return this.createCanvasClone(S);if(qf(S))return this.createVideoClone(S);if(Hy(S))return this.createStyleClone(S);var D=S.cloneNode(!1);return sA(D)&&(sA(S)&&S.currentSrc&&S.currentSrc!==S.src&&(D.src=S.currentSrc,D.srcset=""),"lazy"===D.loading&&(D.loading="eager")),zy(D)?this.createCustomElementClone(D):D},E.prototype.createCustomElementClone=function(S){var D=document.createElement("html2canvascustomelement");return Z6(S.style,D),D},E.prototype.createStyleClone=function(S){try{var D=S.sheet;if(D&&D.cssRules){var L=[].slice.call(D.cssRules,0).reduce(function(U,ne){return ne&&"string"==typeof ne.cssText?U+ne.cssText:U},""),z=S.cloneNode(!1);return z.textContent=L,z}}catch(U){if(this.context.logger.error("Unable to access cssRules property",U),"SecurityError"!==U.name)throw U}return S.cloneNode(!1)},E.prototype.createCanvasClone=function(S){var D;if(this.options.inlineImages&&S.ownerDocument){var L=S.ownerDocument.createElement("img");try{return L.src=S.toDataURL(),L}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",S)}}var z=S.cloneNode(!1);try{z.width=S.width,z.height=S.height;var U=S.getContext("2d"),ne=z.getContext("2d");if(ne)if(!this.options.allowTaint&&U)ne.putImageData(U.getImageData(0,0,S.width,S.height),0,0);else{var ye=null!==(D=S.getContext("webgl2"))&&void 0!==D?D:S.getContext("webgl");ye&&!1===ye.getContextAttributes()?.preserveDrawingBuffer&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",S),ne.drawImage(S,0,0)}return z}catch{this.context.logger.info("Unable to clone canvas as it is tainted",S)}return z},E.prototype.createVideoClone=function(S){var D=S.ownerDocument.createElement("canvas");D.width=S.offsetWidth,D.height=S.offsetHeight;var L=D.getContext("2d");try{return L&&(L.drawImage(S,0,0,D.width,D.height),this.options.allowTaint||L.getImageData(0,0,D.width,D.height)),D}catch{this.context.logger.info("Unable to clone video as it is tainted",S)}var z=S.ownerDocument.createElement("canvas");return z.width=S.offsetWidth,z.height=S.offsetHeight,z},E.prototype.appendChildNode=function(S,D,L){(!jf(D)||!function(E){return"SCRIPT"===E.tagName}(D)&&!D.hasAttribute(aA)&&("function"!=typeof this.options.ignoreElements||!this.options.ignoreElements(D)))&&(!this.options.copyStyles||!jf(D)||!Hy(D))&&S.appendChild(this.cloneNode(D,L))},E.prototype.cloneChildNodes=function(S,D,L){for(var z=this,U=S.shadowRoot?S.shadowRoot.firstChild:S.firstChild;U;U=U.nextSibling)if(jf(U)&&p0(U)&&"function"==typeof U.assignedNodes){var ne=U.assignedNodes();ne.length&&ne.forEach(function(ye){return z.appendChildNode(D,ye,L)})}else this.appendChildNode(D,U,L)},E.prototype.cloneNode=function(S,D){if(ky(S))return document.createTextNode(S.data);if(!S.ownerDocument)return S.cloneNode(!1);var L=S.ownerDocument.defaultView;if(L&&jf(S)&&(iA(S)||W6(S))){var z=this.createElementClone(S);z.style.transitionProperty="none";var U=L.getComputedStyle(S),ne=L.getComputedStyle(S,":before"),ye=L.getComputedStyle(S,":after");this.referenceElement===S&&iA(z)&&(this.clonedReferenceElement=z),ys(z)&&Qy(z);var be=this.counters.parse(new Nm(this.context,U)),Ye=this.resolvePseudoContent(S,z,ne,dh.BEFORE);zy(S)&&(D=!0),qf(S)||this.cloneChildNodes(S,z,D),Ye&&z.insertBefore(Ye,z.firstChild);var lt=this.resolvePseudoContent(S,z,ye,dh.AFTER);return lt&&z.appendChild(lt),this.counters.pop(be),(U&&(this.options.copyStyles||W6(S))&&!Py(S)||D)&&Z6(U,z),(0!==S.scrollTop||0!==S.scrollLeft)&&this.scrolledElements.push([z,S.scrollLeft,S.scrollTop]),(e3(S)||$6(S))&&(e3(z)||$6(z))&&(z.value=S.value),z}return S.cloneNode(!1)},E.prototype.resolvePseudoContent=function(S,D,L,z){var U=this;if(L){var ne=L.content,ye=D.ownerDocument;if(ye&&ne&&"none"!==ne&&"-moz-alt-content"!==ne&&"none"!==L.display){this.counters.parse(new Nm(this.context,L));var be=new Om(this.context,L),Ye=ye.createElement("html2canvaspseudoelement");Z6(L,Ye),be.content.forEach(function(dt){if(0===dt.type)Ye.appendChild(ye.createTextNode(dt.value));else if(22===dt.type){var Ft=ye.createElement("img");Ft.src=dt.value,Ft.style.opacity="1",Ye.appendChild(Ft)}else if(18===dt.type){if("attr"===dt.name){var Gn=dt.values.filter(nn);Gn.length&&Ye.appendChild(ye.createTextNode(S.getAttribute(Gn[0].value)||""))}else if("counter"===dt.name){var Tn=dt.values.filter(Rc),Cr=Tn[1];if((Qn=Tn[0])&&nn(Qn)){var _i=U.counters.getCounterValue(Qn.value),ui=Cr&&nn(Cr)?Dt.parse(U.context,Cr.value):3;Ye.appendChild(ye.createTextNode(Y6(_i,ui,!1)))}}else if("counters"===dt.name){var Qn,Gs=dt.values.filter(Rc),xr=Gs[1];if(Cr=Gs[2],(Qn=Gs[0])&&nn(Qn)){var er=U.counters.getCounterValues(Qn.value),Xn=Cr&&nn(Cr)?Dt.parse(U.context,Cr.value):3,Ps=xr&&0===xr.type?xr.value:"",Ls=er.map(function(X1){return Y6(X1,Xn,!1)}).join(Ps);Ye.appendChild(ye.createTextNode(Ls))}}}else if(20===dt.type)switch(dt.value){case"open-quote":Ye.appendChild(ye.createTextNode(gy(be.quotes,U.quoteDepth++,!0)));break;case"close-quote":Ye.appendChild(ye.createTextNode(gy(be.quotes,--U.quoteDepth,!1)));break;default:Ye.appendChild(ye.createTextNode(dt.value))}}),Ye.className=J6+" "+zp;var lt=z===dh.BEFORE?" "+J6:" "+zp;return W6(D)?D.className.baseValue+=lt:D.className+=lt,Ye}}},E.destroy=function(S){return!!S.parentNode&&(S.parentNode.removeChild(S),!0)},E}(),dh=(()=>{return(E=dh||(dh={}))[E.BEFORE=0]="BEFORE",E[E.AFTER=1]="AFTER",dh;var E})(),xV=function(E,S){var D=E.createElement("iframe");return D.className="html2canvas-container",D.style.visibility="hidden",D.style.position="fixed",D.style.left="-10000px",D.style.top="0px",D.style.border="0",D.width=S.width.toString(),D.height=S.height.toString(),D.scrolling="no",D.setAttribute(aA,"true"),E.body.appendChild(D),D},cA=function(E){return new Promise(function(S){E.complete?S():E.src?(E.onload=S,E.onerror=S):S()})},UT=function(E){return Promise.all([].slice.call(E.images,0).map(cA))},Gy=function(E){return new Promise(function(S,D){var L=E.contentWindow;if(!L)return D("No window assigned for iframe");var z=L.document;L.onload=E.onload=function(){L.onload=E.onload=null;var U=setInterval(function(){z.body.childNodes.length>0&&"complete"===z.readyState&&(clearInterval(U),S(E))},50)}})},Pp=["all","d","content"],Z6=function(E,S){for(var D=E.length-1;D>=0;D--){var L=E.item(D);-1===Pp.indexOf(L)&&S.style.setProperty(L,E.getPropertyValue(L))}return S},Yf=function(E){var S="";return E&&(S+="<!DOCTYPE ",E.name&&(S+=E.name),E.internalSubset&&(S+=E.internalSubset),E.publicId&&(S+='"'+E.publicId+'"'),E.systemId&&(S+='"'+E.systemId+'"'),S+=">"),S},GT=function(E,S,D){E&&E.defaultView&&(S!==E.defaultView.pageXOffset||D!==E.defaultView.pageYOffset)&&E.defaultView.scrollTo(S,D)},QT=function(E){var S=E[0],L=E[2];S.scrollLeft=E[1],S.scrollTop=L},J6="___html2canvas___pseudoelement_before",zp="___html2canvas___pseudoelement_after",lA='{\n    content: "" !important;\n    display: none !important;\n}',Qy=function(E){ph(E,"."+J6+":before"+lA+"\n         ."+zp+":after"+lA)},ph=function(E,S){var D=E.ownerDocument;if(D){var L=D.createElement("style");L.textContent=S,E.appendChild(L)}},Wy=function(){function E(){}return E.getOrigin=function(S){var D=E._link;return D?(D.href=S,D.href=D.href,D.protocol+D.hostname+D.port):"about:blank"},E.isSameOrigin=function(S){return E.getOrigin(S)===E._origin},E.setContext=function(S){E._link=S.document.createElement("a"),E._origin=E.getOrigin(S.location.href)},E._origin="about:blank",E}(),WT=function(){function E(S,D){this.context=S,this._options=D,this._cache={}}return E.prototype.addImage=function(S){var D=Promise.resolve();return this.has(S)||(uA(S)||yl(S))&&(this._cache[S]=this.loadImage(S)).catch(function(){}),D},E.prototype.match=function(S){return this._cache[S]},E.prototype.loadImage=function(S){return Se(this,void 0,void 0,function(){var D,L,z,U,ne=this;return Oe(this,function(ye){switch(ye.label){case 0:return D=Wy.isSameOrigin(S),L=!t3(S)&&!0===this._options.useCORS&&J2.SUPPORT_CORS_IMAGES&&!D,z=!t3(S)&&!D&&!uA(S)&&"string"==typeof this._options.proxy&&J2.SUPPORT_CORS_XHR&&!L,D||!1!==this._options.allowTaint||t3(S)||uA(S)||z||L?(U=S,z?[4,this.proxy(U)]:[3,2]):[2];case 1:U=ye.sent(),ye.label=2;case 2:return this.context.logger.debug("Added image "+S.substring(0,256)),[4,new Promise(function(be,Ye){var lt=new Image;lt.onload=function(){return be(lt)},lt.onerror=Ye,(KT(U)||L)&&(lt.crossOrigin="anonymous"),lt.src=U,!0===lt.complete&&setTimeout(function(){return be(lt)},500),ne._options.imageTimeout>0&&setTimeout(function(){return Ye("Timed out ("+ne._options.imageTimeout+"ms) loading image")},ne._options.imageTimeout)})];case 3:return[2,ye.sent()]}})})},E.prototype.has=function(S){return typeof this._cache[S]<"u"},E.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},E.prototype.proxy=function(S){var D=this,L=this._options.proxy;if(!L)throw new Error("No proxy defined");var z=S.substring(0,256);return new Promise(function(U,ne){var ye=J2.SUPPORT_RESPONSE_TYPE?"blob":"text",be=new XMLHttpRequest;be.onload=function(){if(200===be.status)if("text"===ye)U(be.response);else{var dt=new FileReader;dt.addEventListener("load",function(){return U(dt.result)},!1),dt.addEventListener("error",function(Ft){return ne(Ft)},!1),dt.readAsDataURL(be.response)}else ne("Failed to proxy resource "+z+" with status code "+be.status)},be.onerror=ne;var Ye=L.indexOf("?")>-1?"&":"?";if(be.open("GET",""+L+Ye+"url="+encodeURIComponent(S)+"&responseType="+ye),"text"!==ye&&be instanceof XMLHttpRequest&&(be.responseType=ye),D._options.imageTimeout){var lt=D._options.imageTimeout;be.timeout=lt,be.ontimeout=function(){return ne("Timed out ("+lt+"ms) proxying "+z)}}be.send()})},E}(),jT=/^data:image\/svg\+xml/i,$T=/^data:image\/.*;base64,/i,qT=/^data:image\/.*/i,yl=function(E){return J2.SUPPORT_SVG_DRAWING||!XT(E)},t3=function(E){return qT.test(E)},KT=function(E){return $T.test(E)},uA=function(E){return"blob"===E.substr(0,4)},XT=function(E){return"svg"===E.substr(-3).toLowerCase()||jT.test(E)},Kn=function(){function E(S,D){this.type=0,this.x=S,this.y=D}return E.prototype.add=function(S,D){return new E(this.x+S,this.y+D)},E}(),Zf=function(E,S,D){return new Kn(E.x+(S.x-E.x)*D,E.y+(S.y-E.y)*D)},Op=function(){function E(S,D,L,z){this.type=1,this.start=S,this.startControl=D,this.endControl=L,this.end=z}return E.prototype.subdivide=function(S,D){var L=Zf(this.start,this.startControl,S),z=Zf(this.startControl,this.endControl,S),U=Zf(this.endControl,this.end,S),ne=Zf(L,z,S),ye=Zf(z,U,S),be=Zf(ne,ye,S);return D?new E(this.start,L,ne,be):new E(be,ye,U,this.end)},E.prototype.add=function(S,D){return new E(this.start.add(S,D),this.startControl.add(S,D),this.endControl.add(S,D),this.end.add(S,D))},E.prototype.reverse=function(){return new E(this.end,this.endControl,this.startControl,this.start)},E}(),wl=function(E){return 1===E.type},YT=function E(S){var D=S.styles,L=S.bounds,z=g2(D.borderTopLeftRadius,L.width,L.height),U=z[0],ne=z[1],ye=g2(D.borderTopRightRadius,L.width,L.height),be=ye[0],Ye=ye[1],lt=g2(D.borderBottomRightRadius,L.width,L.height),dt=lt[0],Ft=lt[1],Gn=g2(D.borderBottomLeftRadius,L.width,L.height),Tn=Gn[0],Qn=Gn[1],Cr=[];Cr.push((U+be)/L.width),Cr.push((Tn+dt)/L.width),Cr.push((ne+Qn)/L.height),Cr.push((Ye+Ft)/L.height);var _i=Math.max.apply(Math,Cr);_i>1&&(U/=_i,ne/=_i,be/=_i,Ye/=_i,dt/=_i,Ft/=_i,Tn/=_i,Qn/=_i);var ui=L.width-be,Gs=L.height-Ft,xr=L.width-dt,er=L.height-Qn,Xn=D.borderTopWidth,Ps=D.borderRightWidth,Ls=D.borderBottomWidth,Oi=D.borderLeftWidth,E1=ki(D.paddingTop,S.bounds.width),X1=ki(D.paddingRight,S.bounds.width),gn=ki(D.paddingBottom,S.bounds.width),vo=ki(D.paddingLeft,S.bounds.width);this.topLeftBorderDoubleOuterBox=U>0||ne>0?ha(L.left+Oi/3,L.top+Xn/3,U-Oi/3,ne-Xn/3,Xs.TOP_LEFT):new Kn(L.left+Oi/3,L.top+Xn/3),this.topRightBorderDoubleOuterBox=U>0||ne>0?ha(L.left+ui,L.top+Xn/3,be-Ps/3,Ye-Xn/3,Xs.TOP_RIGHT):new Kn(L.left+L.width-Ps/3,L.top+Xn/3),this.bottomRightBorderDoubleOuterBox=dt>0||Ft>0?ha(L.left+xr,L.top+Gs,dt-Ps/3,Ft-Ls/3,Xs.BOTTOM_RIGHT):new Kn(L.left+L.width-Ps/3,L.top+L.height-Ls/3),this.bottomLeftBorderDoubleOuterBox=Tn>0||Qn>0?ha(L.left+Oi/3,L.top+er,Tn-Oi/3,Qn-Ls/3,Xs.BOTTOM_LEFT):new Kn(L.left+Oi/3,L.top+L.height-Ls/3),this.topLeftBorderDoubleInnerBox=U>0||ne>0?ha(L.left+2*Oi/3,L.top+2*Xn/3,U-2*Oi/3,ne-2*Xn/3,Xs.TOP_LEFT):new Kn(L.left+2*Oi/3,L.top+2*Xn/3),this.topRightBorderDoubleInnerBox=U>0||ne>0?ha(L.left+ui,L.top+2*Xn/3,be-2*Ps/3,Ye-2*Xn/3,Xs.TOP_RIGHT):new Kn(L.left+L.width-2*Ps/3,L.top+2*Xn/3),this.bottomRightBorderDoubleInnerBox=dt>0||Ft>0?ha(L.left+xr,L.top+Gs,dt-2*Ps/3,Ft-2*Ls/3,Xs.BOTTOM_RIGHT):new Kn(L.left+L.width-2*Ps/3,L.top+L.height-2*Ls/3),this.bottomLeftBorderDoubleInnerBox=Tn>0||Qn>0?ha(L.left+2*Oi/3,L.top+er,Tn-2*Oi/3,Qn-2*Ls/3,Xs.BOTTOM_LEFT):new Kn(L.left+2*Oi/3,L.top+L.height-2*Ls/3),this.topLeftBorderStroke=U>0||ne>0?ha(L.left+Oi/2,L.top+Xn/2,U-Oi/2,ne-Xn/2,Xs.TOP_LEFT):new Kn(L.left+Oi/2,L.top+Xn/2),this.topRightBorderStroke=U>0||ne>0?ha(L.left+ui,L.top+Xn/2,be-Ps/2,Ye-Xn/2,Xs.TOP_RIGHT):new Kn(L.left+L.width-Ps/2,L.top+Xn/2),this.bottomRightBorderStroke=dt>0||Ft>0?ha(L.left+xr,L.top+Gs,dt-Ps/2,Ft-Ls/2,Xs.BOTTOM_RIGHT):new Kn(L.left+L.width-Ps/2,L.top+L.height-Ls/2),this.bottomLeftBorderStroke=Tn>0||Qn>0?ha(L.left+Oi/2,L.top+er,Tn-Oi/2,Qn-Ls/2,Xs.BOTTOM_LEFT):new Kn(L.left+Oi/2,L.top+L.height-Ls/2),this.topLeftBorderBox=U>0||ne>0?ha(L.left,L.top,U,ne,Xs.TOP_LEFT):new Kn(L.left,L.top),this.topRightBorderBox=be>0||Ye>0?ha(L.left+ui,L.top,be,Ye,Xs.TOP_RIGHT):new Kn(L.left+L.width,L.top),this.bottomRightBorderBox=dt>0||Ft>0?ha(L.left+xr,L.top+Gs,dt,Ft,Xs.BOTTOM_RIGHT):new Kn(L.left+L.width,L.top+L.height),this.bottomLeftBorderBox=Tn>0||Qn>0?ha(L.left,L.top+er,Tn,Qn,Xs.BOTTOM_LEFT):new Kn(L.left,L.top+L.height),this.topLeftPaddingBox=U>0||ne>0?ha(L.left+Oi,L.top+Xn,Math.max(0,U-Oi),Math.max(0,ne-Xn),Xs.TOP_LEFT):new Kn(L.left+Oi,L.top+Xn),this.topRightPaddingBox=be>0||Ye>0?ha(L.left+Math.min(ui,L.width-Ps),L.top+Xn,ui>L.width+Ps?0:Math.max(0,be-Ps),Math.max(0,Ye-Xn),Xs.TOP_RIGHT):new Kn(L.left+L.width-Ps,L.top+Xn),this.bottomRightPaddingBox=dt>0||Ft>0?ha(L.left+Math.min(xr,L.width-Oi),L.top+Math.min(Gs,L.height-Ls),Math.max(0,dt-Ps),Math.max(0,Ft-Ls),Xs.BOTTOM_RIGHT):new Kn(L.left+L.width-Ps,L.top+L.height-Ls),this.bottomLeftPaddingBox=Tn>0||Qn>0?ha(L.left+Oi,L.top+Math.min(er,L.height-Ls),Math.max(0,Tn-Oi),Math.max(0,Qn-Ls),Xs.BOTTOM_LEFT):new Kn(L.left+Oi,L.top+L.height-Ls),this.topLeftContentBox=U>0||ne>0?ha(L.left+Oi+vo,L.top+Xn+E1,Math.max(0,U-(Oi+vo)),Math.max(0,ne-(Xn+E1)),Xs.TOP_LEFT):new Kn(L.left+Oi+vo,L.top+Xn+E1),this.topRightContentBox=be>0||Ye>0?ha(L.left+Math.min(ui,L.width+Oi+vo),L.top+Xn+E1,ui>L.width+Oi+vo?0:be-Oi+vo,Ye-(Xn+E1),Xs.TOP_RIGHT):new Kn(L.left+L.width-(Ps+X1),L.top+Xn+E1),this.bottomRightContentBox=dt>0||Ft>0?ha(L.left+Math.min(xr,L.width-(Oi+vo)),L.top+Math.min(Gs,L.height+Xn+E1),Math.max(0,dt-(Ps+X1)),Ft-(Ls+gn),Xs.BOTTOM_RIGHT):new Kn(L.left+L.width-(Ps+X1),L.top+L.height-(Ls+gn)),this.bottomLeftContentBox=Tn>0||Qn>0?ha(L.left+Oi+vo,L.top+er,Math.max(0,Tn-(Oi+vo)),Qn-(Ls+gn),Xs.BOTTOM_LEFT):new Kn(L.left+Oi+vo,L.top+L.height-(Ls+gn))},Xs=(()=>{return(E=Xs||(Xs={}))[E.TOP_LEFT=0]="TOP_LEFT",E[E.TOP_RIGHT=1]="TOP_RIGHT",E[E.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",E[E.BOTTOM_LEFT=3]="BOTTOM_LEFT",Xs;var E})(),ha=function(E,S,D,L,z){var U=(Math.sqrt(2)-1)/3*4,ne=D*U,ye=L*U,be=E+D,Ye=S+L;switch(z){case Xs.TOP_LEFT:return new Op(new Kn(E,Ye),new Kn(E,Ye-ye),new Kn(be-ne,S),new Kn(be,S));case Xs.TOP_RIGHT:return new Op(new Kn(E,S),new Kn(E+ne,S),new Kn(be,Ye-ye),new Kn(be,Ye));case Xs.BOTTOM_RIGHT:return new Op(new Kn(be,S),new Kn(be,S+ye),new Kn(E+ne,Ye),new Kn(E,Ye));default:return new Op(new Kn(be,Ye),new Kn(be-ne,Ye),new Kn(E,S+ye),new Kn(E,S))}},Np=function(E){return[E.topLeftBorderBox,E.topRightBorderBox,E.bottomRightBorderBox,E.bottomLeftBorderBox]},n3=function(E){return[E.topLeftPaddingBox,E.topRightPaddingBox,E.bottomRightPaddingBox,E.bottomLeftPaddingBox]},e8=function E(S,D,L){this.offsetX=S,this.offsetY=D,this.matrix=L,this.type=0,this.target=6},t8=function E(S,D){this.path=S,this.target=D,this.type=1},jy=function E(S){this.opacity=S,this.type=2,this.target=6},ZT=function(E){return 1===E.type},JT=function(E,S){return E.length===S.length&&E.some(function(D,L){return D===S[L]})},Up=function E(S){this.element=S,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},eL=function(){function E(S,D){if(this.container=S,this.parent=D,this.effects=[],this.curves=new YT(this.container),this.container.styles.opacity<1&&this.effects.push(new jy(this.container.styles.opacity)),null!==this.container.styles.transform&&this.effects.push(new e8(this.container.bounds.left+this.container.styles.transformOrigin[0].number,this.container.bounds.top+this.container.styles.transformOrigin[1].number,this.container.styles.transform)),0!==this.container.styles.overflowX){var ne=Np(this.curves),ye=n3(this.curves);JT(ne,ye)?this.effects.push(new t8(ne,6)):(this.effects.push(new t8(ne,2)),this.effects.push(new t8(ye,4)))}}return E.prototype.getEffects=function(S){for(var D=-1===[2,3].indexOf(this.container.styles.position),L=this.parent,z=this.effects.slice(0);L;){var U=L.effects.filter(function(be){return!ZT(be)});if(D||0!==L.container.styles.position||!L.parent){if(z.unshift.apply(z,U),D=-1===[2,3].indexOf(L.container.styles.position),0!==L.container.styles.overflowX){var ne=Np(L.curves),ye=n3(L.curves);JT(ne,ye)||z.unshift(new t8(ye,6))}}else z.unshift.apply(z,U);L=L.parent}return z.filter(function(be){return ks(be.target,S)})},E}(),qy=function(E,S,D,L){E.container.elements.forEach(function(z){var U=ks(z.flags,4),ne=ks(z.flags,2),ye=new eL(z,E);ks(z.styles.display,2048)&&L.push(ye);var be=ks(z.flags,8)?[]:L;if(U||ne){var Ye=U||z.styles.isPositioned()?D:S,lt=new Up(ye);if(z.styles.isPositioned()||z.styles.opacity<1||z.styles.isTransformed()){var dt=z.styles.zIndex.order;if(dt<0){var Ft=0;Ye.negativeZIndex.some(function(Tn,Qn){return dt>Tn.element.container.styles.zIndex.order?(Ft=Qn,!1):Ft>0}),Ye.negativeZIndex.splice(Ft,0,lt)}else if(dt>0){var Gn=0;Ye.positiveZIndex.some(function(Tn,Qn){return dt>=Tn.element.container.styles.zIndex.order?(Gn=Qn+1,!1):Gn>0}),Ye.positiveZIndex.splice(Gn,0,lt)}else Ye.zeroOrAutoZIndexOrTransformedOrOpacity.push(lt)}else z.styles.isFloating()?Ye.nonPositionedFloats.push(lt):Ye.nonPositionedInlineLevel.push(lt);qy(ye,lt,U?lt:D,be)}else z.styles.isInlineLevel()?S.inlineLevel.push(ye):S.nonInlineLevel.push(ye),qy(ye,S,D,be);ks(z.flags,8)&&fA(z,be)})},fA=function(E,S){for(var D=E instanceof Ly?E.start:1,L=E instanceof Ly&&E.reversed,z=0;z<S.length;z++){var U=S[z];U.container instanceof PT&&"number"==typeof U.container.value&&0!==U.container.value&&(D=U.container.value),U.listValue=Y6(D,U.container.styles.listStyleType,!0),D+=L?-1:1}},Ky=function(E,S){switch(S){case 0:return Cl(E.topLeftBorderBox,E.topLeftPaddingBox,E.topRightBorderBox,E.topRightPaddingBox);case 1:return Cl(E.topRightBorderBox,E.topRightPaddingBox,E.bottomRightBorderBox,E.bottomRightPaddingBox);case 2:return Cl(E.bottomRightBorderBox,E.bottomRightPaddingBox,E.bottomLeftBorderBox,E.bottomLeftPaddingBox);default:return Cl(E.bottomLeftBorderBox,E.bottomLeftPaddingBox,E.topLeftBorderBox,E.topLeftPaddingBox)}},gh=function(E,S){var D=[];return wl(E)?D.push(E.subdivide(.5,!1)):D.push(E),wl(S)?D.push(S.subdivide(.5,!0)):D.push(S),D},Cl=function(E,S,D,L){var z=[];return wl(E)?z.push(E.subdivide(.5,!1)):z.push(E),wl(D)?z.push(D.subdivide(.5,!0)):z.push(D),wl(L)?z.push(L.subdivide(.5,!0).reverse()):z.push(L),wl(S)?z.push(S.subdivide(.5,!1).reverse()):z.push(S),z},Gp=function(E){var D=E.styles;return E.bounds.add(D.borderLeftWidth,D.borderTopWidth,-(D.borderRightWidth+D.borderLeftWidth),-(D.borderTopWidth+D.borderBottomWidth))},Qp=function(E){var S=E.styles,D=E.bounds,L=ki(S.paddingLeft,D.width),z=ki(S.paddingRight,D.width),U=ki(S.paddingTop,D.width),ne=ki(S.paddingBottom,D.width);return D.add(L+S.borderLeftWidth,U+S.borderTopWidth,-(S.borderRightWidth+S.borderLeftWidth+L+z),-(S.borderTopWidth+S.borderBottomWidth+U+ne))},dA=function(E,S,D){var L=function(E,S){return 0===E?S.bounds:2===E?Qp(S):Gp(S)}(Jf(E.styles.backgroundOrigin,S),E),z=function(E,S){return 0===E?S.bounds:2===E?Qp(S):Gp(S)}(Jf(E.styles.backgroundClip,S),E),U=rL(Jf(E.styles.backgroundSize,S),D,L),ne=U[0],ye=U[1],be=g2(Jf(E.styles.backgroundPosition,S),L.width-ne,L.height-ye);return[sL(Jf(E.styles.backgroundRepeat,S),be,U,L,z),Math.round(L.left+be[0]),Math.round(L.top+be[1]),ne,ye]},xl=function(E){return nn(E)&&E.value===L3.AUTO},n8=function(E){return"number"==typeof E},rL=function(E,S,D){var L=S[0],z=S[1],U=S[2],ne=E[0],ye=E[1];if(!ne)return[0,0];if(Rs(ne)&&ye&&Rs(ye))return[ki(ne,D.width),ki(ye,D.height)];var be=n8(U);if(nn(ne)&&(ne.value===L3.CONTAIN||ne.value===L3.COVER))return n8(U)?D.width/D.height<U!=(ne.value===L3.COVER)?[D.width,D.width/U]:[D.height*U,D.height]:[D.width,D.height];var lt=n8(L),dt=n8(z),Ft=lt||dt;if(xl(ne)&&(!ye||xl(ye)))return lt&&dt?[L,z]:be||Ft?Ft&&be?[lt?L:z*U,dt?z:L/U]:[lt?L:D.width,dt?z:D.height]:[D.width,D.height];if(be){var _i=0,ui=0;return Rs(ne)?_i=ki(ne,D.width):Rs(ye)&&(ui=ki(ye,D.height)),xl(ne)?_i=ui*U:(!ye||xl(ye))&&(ui=_i/U),[_i,ui]}var Gs=null,xr=null;if(Rs(ne)?Gs=ki(ne,D.width):ye&&Rs(ye)&&(xr=ki(ye,D.height)),null!==Gs&&(!ye||xl(ye))&&(xr=lt&&dt?Gs/L*z:D.height),null!==xr&&xl(ne)&&(Gs=lt&&dt?xr/z*L:D.width),null!==Gs&&null!==xr)return[Gs,xr];throw new Error("Unable to calculate background-size for element")},Jf=function(E,S){var D=E[S];return typeof D>"u"?E[0]:D},sL=function(E,S,D,L,z){var U=S[0],ne=S[1],ye=D[0],be=D[1];switch(E){case 2:return[new Kn(Math.round(L.left),Math.round(L.top+ne)),new Kn(Math.round(L.left+L.width),Math.round(L.top+ne)),new Kn(Math.round(L.left+L.width),Math.round(be+L.top+ne)),new Kn(Math.round(L.left),Math.round(be+L.top+ne))];case 3:return[new Kn(Math.round(L.left+U),Math.round(L.top)),new Kn(Math.round(L.left+U+ye),Math.round(L.top)),new Kn(Math.round(L.left+U+ye),Math.round(L.height+L.top)),new Kn(Math.round(L.left+U),Math.round(L.height+L.top))];case 1:return[new Kn(Math.round(L.left+U),Math.round(L.top+ne)),new Kn(Math.round(L.left+U+ye),Math.round(L.top+ne)),new Kn(Math.round(L.left+U+ye),Math.round(L.top+ne+be)),new Kn(Math.round(L.left+U),Math.round(L.top+ne+be))];default:return[new Kn(Math.round(z.left),Math.round(z.top)),new Kn(Math.round(z.left+z.width),Math.round(z.top)),new Kn(Math.round(z.left+z.width),Math.round(z.height+z.top)),new Kn(Math.round(z.left),Math.round(z.height+z.top))]}},Yy="Hidden Text",SV=function(){function E(S){this._data={},this._document=S}return E.prototype.parseMetrics=function(S,D){var L=this._document.createElement("div"),z=this._document.createElement("img"),U=this._document.createElement("span"),ne=this._document.body;L.style.visibility="hidden",L.style.fontFamily=S,L.style.fontSize=D,L.style.margin="0",L.style.padding="0",L.style.whiteSpace="nowrap",ne.appendChild(L),z.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",z.width=1,z.height=1,z.style.margin="0",z.style.padding="0",z.style.verticalAlign="baseline",U.style.fontFamily=S,U.style.fontSize=D,U.style.margin="0",U.style.padding="0",U.appendChild(this._document.createTextNode(Yy)),L.appendChild(U),L.appendChild(z);var ye=z.offsetTop-U.offsetTop+2;L.removeChild(U),L.appendChild(this._document.createTextNode(Yy)),L.style.lineHeight="normal",z.style.verticalAlign="super";var be=z.offsetTop-L.offsetTop+2;return ne.removeChild(L),{baseline:ye,middle:be}},E.prototype.getMetrics=function(S,D){var L=S+" "+D;return typeof this._data[L]>"u"&&(this._data[L]=this.parseMetrics(S,D)),this._data[L]},E}(),aL=function E(S,D){this.context=S,this.options=D},pA=function(E){function S(D,L){var z=E.call(this,D,L)||this;return z._activeEffects=[],z.canvas=L.canvas?L.canvas:document.createElement("canvas"),z.ctx=z.canvas.getContext("2d"),L.canvas||(z.canvas.width=Math.floor(L.width*L.scale),z.canvas.height=Math.floor(L.height*L.scale),z.canvas.style.width=L.width+"px",z.canvas.style.height=L.height+"px"),z.fontMetrics=new SV(document),z.ctx.scale(z.options.scale,z.options.scale),z.ctx.translate(-L.x,-L.y),z.ctx.textBaseline="bottom",z._activeEffects=[],z.context.logger.debug("Canvas renderer initialized ("+L.width+"x"+L.height+") with scale "+L.scale),z}return Me(S,E),S.prototype.applyEffects=function(D){for(var L=this;this._activeEffects.length;)this.popEffect();D.forEach(function(z){return L.applyEffect(z)})},S.prototype.applyEffect=function(D){this.ctx.save(),function(E){return 2===E.type}(D)&&(this.ctx.globalAlpha=D.opacity),function(E){return 0===E.type}(D)&&(this.ctx.translate(D.offsetX,D.offsetY),this.ctx.transform(D.matrix[0],D.matrix[1],D.matrix[2],D.matrix[3],D.matrix[4],D.matrix[5]),this.ctx.translate(-D.offsetX,-D.offsetY)),ZT(D)&&(this.path(D.path),this.ctx.clip()),this._activeEffects.push(D)},S.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},S.prototype.renderStack=function(D){return Se(this,void 0,void 0,function(){return Oe(this,function(z){switch(z.label){case 0:return D.element.container.styles.isVisible()?[4,this.renderStackContent(D)]:[3,2];case 1:z.sent(),z.label=2;case 2:return[2]}})})},S.prototype.renderNode=function(D){return Se(this,void 0,void 0,function(){return Oe(this,function(L){switch(L.label){case 0:return ks(D.container.flags,16),D.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(D)]:[3,3];case 1:return L.sent(),[4,this.renderNodeContent(D)];case 2:L.sent(),L.label=3;case 3:return[2]}})})},S.prototype.renderTextWithLetterSpacing=function(D,L,z){var U=this;0===L?this.ctx.fillText(D.text,D.bounds.left,D.bounds.top+z):V6(D.text).reduce(function(ye,be){return U.ctx.fillText(be,ye,D.bounds.top+z),ye+U.ctx.measureText(be).width},D.bounds.left)},S.prototype.createFontStyle=function(D){var L=D.fontVariant.filter(function(ne){return"normal"===ne||"small-caps"===ne}).join(""),z=tw(D.fontFamily).join(", "),U=Li(D.fontSize)?""+D.fontSize.number+D.fontSize.unit:D.fontSize.number+"px";return[[D.fontStyle,L,D.fontWeight,U,z].join(" "),z,U]},S.prototype.renderTextNode=function(D,L){return Se(this,void 0,void 0,function(){var z,ne,ye,be,Ye,lt,dt,Ft=this;return Oe(this,function(Gn){return z=this.createFontStyle(L),ne=z[1],ye=z[2],this.ctx.font=z[0],this.ctx.direction=1===L.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",be=this.fontMetrics.getMetrics(ne,ye),Ye=be.baseline,lt=be.middle,dt=L.paintOrder,D.textBounds.forEach(function(Tn){dt.forEach(function(Qn){switch(Qn){case 0:Ft.ctx.fillStyle=ya(L.color),Ft.renderTextWithLetterSpacing(Tn,L.letterSpacing,Ye);var Cr=L.textShadow;Cr.length&&Tn.text.trim().length&&(Cr.slice(0).reverse().forEach(function(_i){Ft.ctx.shadowColor=ya(_i.color),Ft.ctx.shadowOffsetX=_i.offsetX.number*Ft.options.scale,Ft.ctx.shadowOffsetY=_i.offsetY.number*Ft.options.scale,Ft.ctx.shadowBlur=_i.blur.number,Ft.renderTextWithLetterSpacing(Tn,L.letterSpacing,Ye)}),Ft.ctx.shadowColor="",Ft.ctx.shadowOffsetX=0,Ft.ctx.shadowOffsetY=0,Ft.ctx.shadowBlur=0),L.textDecorationLine.length&&(Ft.ctx.fillStyle=ya(L.textDecorationColor||L.color),L.textDecorationLine.forEach(function(_i){switch(_i){case 1:Ft.ctx.fillRect(Tn.bounds.left,Math.round(Tn.bounds.top+Ye),Tn.bounds.width,1);break;case 2:Ft.ctx.fillRect(Tn.bounds.left,Math.round(Tn.bounds.top),Tn.bounds.width,1);break;case 3:Ft.ctx.fillRect(Tn.bounds.left,Math.ceil(Tn.bounds.top+lt),Tn.bounds.width,1)}}));break;case 1:L.webkitTextStrokeWidth&&Tn.text.trim().length&&(Ft.ctx.strokeStyle=ya(L.webkitTextStrokeColor),Ft.ctx.lineWidth=L.webkitTextStrokeWidth,Ft.ctx.lineJoin=window.chrome?"miter":"round",Ft.ctx.strokeText(Tn.text,Tn.bounds.left,Tn.bounds.top+Ye)),Ft.ctx.strokeStyle="",Ft.ctx.lineWidth=0,Ft.ctx.lineJoin="miter"}})}),[2]})})},S.prototype.renderReplacedElement=function(D,L,z){if(z&&D.intrinsicWidth>0&&D.intrinsicHeight>0){var U=Qp(D),ne=n3(L);this.path(ne),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(z,0,0,D.intrinsicWidth,D.intrinsicHeight,U.left,U.top,U.width,U.height),this.ctx.restore()}},S.prototype.renderNodeContent=function(D){return Se(this,void 0,void 0,function(){var L,z,U,ne,ye,lt,dt,Ft,Tn,Qn,Cr,_i,ui,Gs,xr,er;return Oe(this,function(Xn){switch(Xn.label){case 0:this.applyEffects(D.getEffects(4)),z=D.curves,U=(L=D.container).styles,ne=0,ye=L.textNodes,Xn.label=1;case 1:return ne<ye.length?[4,this.renderTextNode(ye[ne],U)]:[3,4];case 2:Xn.sent(),Xn.label=3;case 3:return ne++,[3,1];case 4:if(!(L instanceof Ym))return[3,8];Xn.label=5;case 5:return Xn.trys.push([5,7,,8]),[4,this.context.cache.match(L.src)];case 6:return ui=Xn.sent(),this.renderReplacedElement(L,z,ui),[3,8];case 7:return Xn.sent(),this.context.logger.error("Error loading image "+L.src),[3,8];case 8:if(L instanceof Ey&&this.renderReplacedElement(L,z,L.canvas),!(L instanceof Ty))return[3,12];Xn.label=9;case 9:return Xn.trys.push([9,11,,12]),[4,this.context.cache.match(L.svg)];case 10:return ui=Xn.sent(),this.renderReplacedElement(L,z,ui),[3,12];case 11:return Xn.sent(),this.context.logger.error("Error loading svg "+L.svg.substring(0,255)),[3,12];case 12:return L instanceof Fy&&L.tree?[4,new S(this.context,{scale:this.options.scale,backgroundColor:L.backgroundColor,x:0,y:0,width:L.width,height:L.height}).render(L.tree)]:[3,14];case 13:lt=Xn.sent(),L.width&&L.height&&this.ctx.drawImage(lt,0,0,L.width,L.height,L.bounds.left,L.bounds.top,L.bounds.width,L.bounds.height),Xn.label=14;case 14:if(L instanceof eA&&(dt=Math.min(L.bounds.width,L.bounds.height),L.type===Jm?L.checked&&(this.ctx.save(),this.path([new Kn(L.bounds.left+.39363*dt,L.bounds.top+.79*dt),new Kn(L.bounds.left+.16*dt,L.bounds.top+.5549*dt),new Kn(L.bounds.left+.27347*dt,L.bounds.top+.44071*dt),new Kn(L.bounds.left+.39694*dt,L.bounds.top+.5649*dt),new Kn(L.bounds.left+.72983*dt,L.bounds.top+.23*dt),new Kn(L.bounds.left+.84*dt,L.bounds.top+.34085*dt),new Kn(L.bounds.left+.39363*dt,L.bounds.top+.79*dt)]),this.ctx.fillStyle=ya(Iy),this.ctx.fill(),this.ctx.restore()):L.type===Q6&&L.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(L.bounds.left+dt/2,L.bounds.top+dt/2,dt/4,0,2*Math.PI,!0),this.ctx.fillStyle=ya(Iy),this.ctx.fill(),this.ctx.restore())),Zy(L)&&L.value.length){switch(Ft=this.createFontStyle(U),Tn=this.fontMetrics.getMetrics(xr=Ft[0],Ft[1]).baseline,this.ctx.font=xr,this.ctx.fillStyle=ya(U.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ew(L.styles.textAlign),er=Qp(L),Qn=0,L.styles.textAlign){case 1:Qn+=er.width/2;break;case 2:Qn+=er.width}Cr=er.add(Qn,0,0,-er.height/2+1),this.ctx.save(),this.path([new Kn(er.left,er.top),new Kn(er.left+er.width,er.top),new Kn(er.left+er.width,er.top+er.height),new Kn(er.left,er.top+er.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new su(L.value,Cr),U.letterSpacing,Tn),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ks(L.styles.display,2048))return[3,20];if(null===L.styles.listStyleImage)return[3,19];if(0!==(_i=L.styles.listStyleImage).type)return[3,18];ui=void 0,Gs=_i.url,Xn.label=15;case 15:return Xn.trys.push([15,17,,18]),[4,this.context.cache.match(Gs)];case 16:return ui=Xn.sent(),this.ctx.drawImage(ui,L.bounds.left-(ui.width+10),L.bounds.top),[3,18];case 17:return Xn.sent(),this.context.logger.error("Error loading list-style-image "+Gs),[3,18];case 18:return[3,20];case 19:D.listValue&&-1!==L.styles.listStyleType&&(xr=this.createFontStyle(U)[0],this.ctx.font=xr,this.ctx.fillStyle=ya(U.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",er=new Fe(L.bounds.left,L.bounds.top+ki(L.styles.paddingTop,L.bounds.width),L.bounds.width,K1(U.lineHeight,U.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new su(D.listValue,er),U.letterSpacing,K1(U.lineHeight,U.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Xn.label=20;case 20:return[2]}})})},S.prototype.renderStackContent=function(D){return Se(this,void 0,void 0,function(){var L,z,U,ne,ye,be,Ye,lt,dt,Ft,Gn,Tn,Qn,Cr;return Oe(this,function(ui){switch(ui.label){case 0:return ks(D.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(D.element)];case 1:ui.sent(),L=0,z=D.negativeZIndex,ui.label=2;case 2:return L<z.length?[4,this.renderStack(z[L])]:[3,5];case 3:ui.sent(),ui.label=4;case 4:return L++,[3,2];case 5:return[4,this.renderNodeContent(D.element)];case 6:ui.sent(),U=0,ne=D.nonInlineLevel,ui.label=7;case 7:return U<ne.length?[4,this.renderNode(ne[U])]:[3,10];case 8:ui.sent(),ui.label=9;case 9:return U++,[3,7];case 10:ye=0,be=D.nonPositionedFloats,ui.label=11;case 11:return ye<be.length?[4,this.renderStack(be[ye])]:[3,14];case 12:ui.sent(),ui.label=13;case 13:return ye++,[3,11];case 14:Ye=0,lt=D.nonPositionedInlineLevel,ui.label=15;case 15:return Ye<lt.length?[4,this.renderStack(lt[Ye])]:[3,18];case 16:ui.sent(),ui.label=17;case 17:return Ye++,[3,15];case 18:dt=0,Ft=D.inlineLevel,ui.label=19;case 19:return dt<Ft.length?[4,this.renderNode(Ft[dt])]:[3,22];case 20:ui.sent(),ui.label=21;case 21:return dt++,[3,19];case 22:Gn=0,Tn=D.zeroOrAutoZIndexOrTransformedOrOpacity,ui.label=23;case 23:return Gn<Tn.length?[4,this.renderStack(Tn[Gn])]:[3,26];case 24:ui.sent(),ui.label=25;case 25:return Gn++,[3,23];case 26:Qn=0,Cr=D.positiveZIndex,ui.label=27;case 27:return Qn<Cr.length?[4,this.renderStack(Cr[Qn])]:[3,30];case 28:ui.sent(),ui.label=29;case 29:return Qn++,[3,27];case 30:return[2]}})})},S.prototype.mask=function(D){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(D.slice(0).reverse()),this.ctx.closePath()},S.prototype.path=function(D){this.ctx.beginPath(),this.formatPath(D),this.ctx.closePath()},S.prototype.formatPath=function(D){var L=this;D.forEach(function(z,U){var ne=wl(z)?z.start:z;0===U?L.ctx.moveTo(ne.x,ne.y):L.ctx.lineTo(ne.x,ne.y),wl(z)&&L.ctx.bezierCurveTo(z.startControl.x,z.startControl.y,z.endControl.x,z.endControl.y,z.end.x,z.end.y)})},S.prototype.renderRepeat=function(D,L,z,U){this.path(D),this.ctx.fillStyle=L,this.ctx.translate(z,U),this.ctx.fill(),this.ctx.translate(-z,-U)},S.prototype.resizeImage=function(D,L,z){var U;if(D.width===L&&D.height===z)return D;var ye=(null!==(U=this.canvas.ownerDocument)&&void 0!==U?U:document).createElement("canvas");return ye.width=Math.max(1,L),ye.height=Math.max(1,z),ye.getContext("2d").drawImage(D,0,0,D.width,D.height,0,0,L,z),ye},S.prototype.renderBackgroundImage=function(D){return Se(this,void 0,void 0,function(){var L,z,U,ne,ye;return Oe(this,function(Ye){switch(Ye.label){case 0:L=D.styles.backgroundImage.length-1,z=function(lt){var dt,Ft,Gn,Tn,Qn,Cr,_i,ui,Gs,xr,er,Xn,Ps,Ls,Oi,E1,X1,gn,vo,ec,r3,Go,zc,mh,F2,m0,lu,Ah,uu,hu,A0;return Oe(this,function(s8){switch(s8.label){case 0:if(0!==lt.type)return[3,5];dt=void 0,Ft=lt.url,s8.label=1;case 1:return s8.trys.push([1,3,,4]),[4,U.context.cache.match(Ft)];case 2:return dt=s8.sent(),[3,4];case 3:return s8.sent(),U.context.logger.error("Error loading background-image "+Ft),[3,4];case 4:return dt&&(Gn=dA(D,L,[dt.width,dt.height,dt.width/dt.height]),E1=Gn[0],Go=Gn[1],zc=Gn[2],Ls=U.ctx.createPattern(U.resizeImage(dt,vo=Gn[3],ec=Gn[4]),"repeat"),U.renderRepeat(E1,Ls,Go,zc)),[3,6];case 5:!function(E){return 1===E.type}(lt)?function(E){return 2===E.type}(lt)&&(Oi=dA(D,L,[null,null,null]),E1=Oi[0],X1=Oi[1],gn=Oi[2],ec=Oi[4],Go=ki((r3=0===lt.position.length?[p2]:lt.position)[0],vo=Oi[3]),zc=ki(r3[r3.length-1],ec),mh=function(E,S,D,L,z){var U=0,ne=0;switch(E.size){case 0:0===E.shape?U=ne=Math.min(Math.abs(S),Math.abs(S-L),Math.abs(D),Math.abs(D-z)):1===E.shape&&(U=Math.min(Math.abs(S),Math.abs(S-L)),ne=Math.min(Math.abs(D),Math.abs(D-z)));break;case 2:if(0===E.shape)U=ne=Math.min(so(S,D),so(S,D-z),so(S-L,D),so(S-L,D-z));else if(1===E.shape){var ye=Math.min(Math.abs(D),Math.abs(D-z))/Math.min(Math.abs(S),Math.abs(S-L)),be=fp(L,z,S,D,!0);ne=ye*(U=so(be[0]-S,(be[1]-D)/ye))}break;case 1:0===E.shape?U=ne=Math.max(Math.abs(S),Math.abs(S-L),Math.abs(D),Math.abs(D-z)):1===E.shape&&(U=Math.max(Math.abs(S),Math.abs(S-L)),ne=Math.max(Math.abs(D),Math.abs(D-z)));break;case 3:if(0===E.shape)U=ne=Math.max(so(S,D),so(S,D-z),so(S-L,D),so(S-L,D-z));else if(1===E.shape){ye=Math.max(Math.abs(D),Math.abs(D-z))/Math.max(Math.abs(S),Math.abs(S-L));var dt=fp(L,z,S,D,!1);ne=ye*(U=so(dt[0]-S,(dt[1]-D)/ye))}}return Array.isArray(E.size)&&(U=ki(E.size[0],L),ne=2===E.size.length?ki(E.size[1],z):U),[U,ne]}(lt,Go,zc,vo,ec),m0=mh[1],(F2=mh[0])>0&&m0>0&&(lu=U.ctx.createRadialGradient(X1+Go,gn+zc,0,X1+Go,gn+zc,F2),gl(lt.stops,2*F2).forEach(function(vh){return lu.addColorStop(vh.stop,ya(vh.color))}),U.path(E1),U.ctx.fillStyle=lu,F2!==m0?(Ah=D.bounds.left+.5*D.bounds.width,uu=D.bounds.top+.5*D.bounds.height,A0=1/(hu=m0/F2),U.ctx.save(),U.ctx.translate(Ah,uu),U.ctx.transform(1,0,0,hu,0,0),U.ctx.translate(-Ah,-uu),U.ctx.fillRect(X1,A0*(gn-uu)+uu,vo,ec*A0),U.ctx.restore()):U.ctx.fill())):(Tn=dA(D,L,[null,null,null]),E1=Tn[0],Go=Tn[1],zc=Tn[2],Qn=Ac(lt.angle,vo=Tn[3],ec=Tn[4]),Cr=Qn[0],_i=Qn[1],ui=Qn[2],Gs=Qn[3],xr=Qn[4],(er=document.createElement("canvas")).width=vo,er.height=ec,Xn=er.getContext("2d"),Ps=Xn.createLinearGradient(_i,Gs,ui,xr),gl(lt.stops,Cr).forEach(function(vh){return Ps.addColorStop(vh.stop,ya(vh.color))}),Xn.fillStyle=Ps,Xn.fillRect(0,0,vo,ec),vo>0&&ec>0&&(Ls=U.ctx.createPattern(er,"repeat"),U.renderRepeat(E1,Ls,Go,zc))),s8.label=6;case 6:return L--,[2]}})},U=this,ne=0,ye=D.styles.backgroundImage.slice(0).reverse(),Ye.label=1;case 1:return ne<ye.length?[5,z(ye[ne])]:[3,4];case 2:Ye.sent(),Ye.label=3;case 3:return ne++,[3,1];case 4:return[2]}})})},S.prototype.renderSolidBorder=function(D,L,z){return Se(this,void 0,void 0,function(){return Oe(this,function(U){return this.path(Ky(z,L)),this.ctx.fillStyle=ya(D),this.ctx.fill(),[2]})})},S.prototype.renderDoubleBorder=function(D,L,z,U){return Se(this,void 0,void 0,function(){var ne,ye;return Oe(this,function(be){switch(be.label){case 0:return L<3?[4,this.renderSolidBorder(D,z,U)]:[3,2];case 1:return be.sent(),[2];case 2:return ne=function(E,S){switch(S){case 0:return Cl(E.topLeftBorderBox,E.topLeftBorderDoubleOuterBox,E.topRightBorderBox,E.topRightBorderDoubleOuterBox);case 1:return Cl(E.topRightBorderBox,E.topRightBorderDoubleOuterBox,E.bottomRightBorderBox,E.bottomRightBorderDoubleOuterBox);case 2:return Cl(E.bottomRightBorderBox,E.bottomRightBorderDoubleOuterBox,E.bottomLeftBorderBox,E.bottomLeftBorderDoubleOuterBox);default:return Cl(E.bottomLeftBorderBox,E.bottomLeftBorderDoubleOuterBox,E.topLeftBorderBox,E.topLeftBorderDoubleOuterBox)}}(U,z),this.path(ne),this.ctx.fillStyle=ya(D),this.ctx.fill(),ye=function(E,S){switch(S){case 0:return Cl(E.topLeftBorderDoubleInnerBox,E.topLeftPaddingBox,E.topRightBorderDoubleInnerBox,E.topRightPaddingBox);case 1:return Cl(E.topRightBorderDoubleInnerBox,E.topRightPaddingBox,E.bottomRightBorderDoubleInnerBox,E.bottomRightPaddingBox);case 2:return Cl(E.bottomRightBorderDoubleInnerBox,E.bottomRightPaddingBox,E.bottomLeftBorderDoubleInnerBox,E.bottomLeftPaddingBox);default:return Cl(E.bottomLeftBorderDoubleInnerBox,E.bottomLeftPaddingBox,E.topLeftBorderDoubleInnerBox,E.topLeftPaddingBox)}}(U,z),this.path(ye),this.ctx.fill(),[2]}})})},S.prototype.renderNodeBackgroundAndBorders=function(D){return Se(this,void 0,void 0,function(){var L,z,U,ne,ye,be,Ye,lt,dt=this;return Oe(this,function(Ft){switch(Ft.label){case 0:return this.applyEffects(D.getEffects(2)),z=!m2((L=D.container.styles).backgroundColor)||L.backgroundImage.length,U=[{style:L.borderTopStyle,color:L.borderTopColor,width:L.borderTopWidth},{style:L.borderRightStyle,color:L.borderRightColor,width:L.borderRightWidth},{style:L.borderBottomStyle,color:L.borderBottomColor,width:L.borderBottomWidth},{style:L.borderLeftStyle,color:L.borderLeftColor,width:L.borderLeftWidth}],ne=Jy(Jf(L.backgroundClip,0),D.curves),z||L.boxShadow.length?(this.ctx.save(),this.path(ne),this.ctx.clip(),m2(L.backgroundColor)||(this.ctx.fillStyle=ya(L.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(D.container)]):[3,2];case 1:Ft.sent(),this.ctx.restore(),L.boxShadow.slice(0).reverse().forEach(function(Gn){dt.ctx.save();var Tn=Np(D.curves),Qn=Gn.inset?0:1e4,Cr=function(E,S,D,L,z){return E.map(function(U,ne){switch(ne){case 0:return U.add(S,D);case 1:return U.add(S+L,D);case 2:return U.add(S+L,D+z);case 3:return U.add(S,D+z)}return U})}(Tn,(Gn.inset?1:-1)*Gn.spread.number-Qn,(Gn.inset?1:-1)*Gn.spread.number,Gn.spread.number*(Gn.inset?-2:2),Gn.spread.number*(Gn.inset?-2:2));Gn.inset?(dt.path(Tn),dt.ctx.clip(),dt.mask(Cr)):(dt.mask(Tn),dt.ctx.clip(),dt.path(Cr)),dt.ctx.shadowOffsetX=Gn.offsetX.number+Qn,dt.ctx.shadowOffsetY=Gn.offsetY.number,dt.ctx.shadowColor=ya(Gn.color),dt.ctx.shadowBlur=Gn.blur.number,dt.ctx.fillStyle=Gn.inset?ya(Gn.color):"rgba(0,0,0,1)",dt.ctx.fill(),dt.ctx.restore()}),Ft.label=2;case 2:ye=0,be=0,Ye=U,Ft.label=3;case 3:return be<Ye.length?0!==(lt=Ye[be]).style&&!m2(lt.color)&&lt.width>0?2!==lt.style?[3,5]:[4,this.renderDashedDottedBorder(lt.color,lt.width,ye,D.curves,2)]:[3,11]:[3,13];case 4:return Ft.sent(),[3,11];case 5:return 3!==lt.style?[3,7]:[4,this.renderDashedDottedBorder(lt.color,lt.width,ye,D.curves,3)];case 6:return Ft.sent(),[3,11];case 7:return 4!==lt.style?[3,9]:[4,this.renderDoubleBorder(lt.color,lt.width,ye,D.curves)];case 8:return Ft.sent(),[3,11];case 9:return[4,this.renderSolidBorder(lt.color,ye,D.curves)];case 10:Ft.sent(),Ft.label=11;case 11:ye++,Ft.label=12;case 12:return be++,[3,3];case 13:return[2]}})})},S.prototype.renderDashedDottedBorder=function(D,L,z,U,ne){return Se(this,void 0,void 0,function(){var ye,be,Ye,lt,dt,Ft,Gn,Tn,Qn,Cr,_i,ui,Gs,xr,er,Xn;return Oe(this,function(Ps){return this.ctx.save(),ye=function(E,S){switch(S){case 0:return gh(E.topLeftBorderStroke,E.topRightBorderStroke);case 1:return gh(E.topRightBorderStroke,E.bottomRightBorderStroke);case 2:return gh(E.bottomRightBorderStroke,E.bottomLeftBorderStroke);default:return gh(E.bottomLeftBorderStroke,E.topLeftBorderStroke)}}(U,z),be=Ky(U,z),2===ne&&(this.path(be),this.ctx.clip()),wl(be[0])?(Ye=be[0].start.x,lt=be[0].start.y):(Ye=be[0].x,lt=be[0].y),wl(be[1])?(dt=be[1].end.x,Ft=be[1].end.y):(dt=be[1].x,Ft=be[1].y),Gn=0===z||2===z?Math.abs(Ye-dt):Math.abs(lt-Ft),this.ctx.beginPath(),this.formatPath(3===ne?ye:be.slice(0,2)),Tn=L<3?3*L:2*L,Qn=L<3?2*L:L,3===ne&&(Tn=L,Qn=L),Cr=!0,Gn<=2*Tn?Cr=!1:Gn<=2*Tn+Qn?(Tn*=_i=Gn/(2*Tn+Qn),Qn*=_i):(ui=Math.floor((Gn+Qn)/(Tn+Qn)),Gs=(Gn-ui*Tn)/(ui-1),Qn=(xr=(Gn-(ui+1)*Tn)/ui)<=0||Math.abs(Qn-Gs)<Math.abs(Qn-xr)?Gs:xr),Cr&&this.ctx.setLineDash(3===ne?[0,Tn+Qn]:[Tn,Qn]),3===ne?(this.ctx.lineCap="round",this.ctx.lineWidth=L):this.ctx.lineWidth=2*L+1.1,this.ctx.strokeStyle=ya(D),this.ctx.stroke(),this.ctx.setLineDash([]),2===ne&&(wl(be[0])&&(er=be[3],Xn=be[0],this.ctx.beginPath(),this.formatPath([new Kn(er.end.x,er.end.y),new Kn(Xn.start.x,Xn.start.y)]),this.ctx.stroke()),wl(be[1])&&(er=be[1],Xn=be[2],this.ctx.beginPath(),this.formatPath([new Kn(er.end.x,er.end.y),new Kn(Xn.start.x,Xn.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},S.prototype.render=function(D){return Se(this,void 0,void 0,function(){var L;return Oe(this,function(z){switch(z.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ya(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),L=function(E){var S=new eL(E,null),D=new Up(S),L=[];return qy(S,D,D,L),fA(S.container,L),D}(D),[4,this.renderStack(L)];case 1:return z.sent(),this.applyEffects([]),[2,this.canvas]}})})},S}(aL),Zy=function(E){return E instanceof Ry||E instanceof By||E instanceof eA&&E.type!==Q6&&E.type!==Jm},Jy=function(E,S){switch(E){case 0:return Np(S);case 2:return function(E){return[E.topLeftContentBox,E.topRightContentBox,E.bottomRightContentBox,E.bottomLeftContentBox]}(S);default:return n3(S)}},ew=function(E){switch(E){case 1:return"center";case 2:return"right";default:return"left"}},cL=["-apple-system","system-ui"],tw=function(E){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?E.filter(function(S){return-1===cL.indexOf(S)}):E},nw=function(E){function S(D,L){var z=E.call(this,D,L)||this;return z.canvas=L.canvas?L.canvas:document.createElement("canvas"),z.ctx=z.canvas.getContext("2d"),z.options=L,z.canvas.width=Math.floor(L.width*L.scale),z.canvas.height=Math.floor(L.height*L.scale),z.canvas.style.width=L.width+"px",z.canvas.style.height=L.height+"px",z.ctx.scale(z.options.scale,z.options.scale),z.ctx.translate(-L.x,-L.y),z.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+L.width+"x"+L.height+" at "+L.x+","+L.y+") with scale "+L.scale),z}return Me(S,E),S.prototype.render=function(D){return Se(this,void 0,void 0,function(){var L,z;return Oe(this,function(U){switch(U.label){case 0:return L=My(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,D),[4,gA(L)];case 1:return z=U.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ya(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(z,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},S}(aL),gA=function(E){return new Promise(function(S,D){var L=new Image;L.onload=function(){S(L)},L.onerror=D,L.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(E))})},EV=function(){function E(S){var L=S.enabled;this.id=S.id,this.enabled=L,this.start=Date.now()}return E.prototype.debug=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.debug?console.debug.apply(console,He([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},E.prototype.getTime=function(){return Date.now()-this.start},E.prototype.info=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&typeof window<"u"&&window.console&&"function"==typeof console.info&&console.info.apply(console,He([this.id,this.getTime()+"ms"],S))},E.prototype.warn=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.warn?console.warn.apply(console,He([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},E.prototype.error=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.error?console.error.apply(console,He([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},E.instances={},E}(),lL=function(){function E(S,D){var L;this.windowBounds=D,this.instanceName="#"+E.instanceCount++,this.logger=new EV({id:this.instanceName,enabled:S.logging}),this.cache=null!==(L=S.cache)&&void 0!==L?L:new WT(this,S)}return E.instanceCount=1,E}();typeof window<"u"&&Wy.setContext(window);var iw=function(E,S){return Se(void 0,void 0,void 0,function(){var D,L,z,U,ne,ye,be,Ye,lt,dt,Ft,Gn,Tn,Qn,Cr,_i,ui,Gs,xr,er,Xn,Ls,Oi,E1,X1,gn,vo,ec,r3,Go,zc,mh,F2,m0,lu,Ah,uu,hu;return Oe(this,function(A0){switch(A0.label){case 0:if(!E||"object"!=typeof E)return[2,Promise.reject("Invalid element provided as first argument")];if(!(D=E.ownerDocument))throw new Error("Element is not attached to a Document");if(!(L=D.defaultView))throw new Error("Document is not attached to a Window");return z={allowTaint:null!==(Ls=S.allowTaint)&&void 0!==Ls&&Ls,imageTimeout:null!==(Oi=S.imageTimeout)&&void 0!==Oi?Oi:15e3,proxy:S.proxy,useCORS:null!==(E1=S.useCORS)&&void 0!==E1&&E1},U=ue({logging:null===(X1=S.logging)||void 0===X1||X1,cache:S.cache},z),ne={windowWidth:null!==(gn=S.windowWidth)&&void 0!==gn?gn:L.innerWidth,windowHeight:null!==(vo=S.windowHeight)&&void 0!==vo?vo:L.innerHeight,scrollX:null!==(ec=S.scrollX)&&void 0!==ec?ec:L.pageXOffset,scrollY:null!==(r3=S.scrollY)&&void 0!==r3?r3:L.pageYOffset},ye=new Fe(ne.scrollX,ne.scrollY,ne.windowWidth,ne.windowHeight),be=new lL(U,ye),Ye=null!==(Go=S.foreignObjectRendering)&&void 0!==Go&&Go,lt={allowTaint:null!==(zc=S.allowTaint)&&void 0!==zc&&zc,onclone:S.onclone,ignoreElements:S.ignoreElements,inlineImages:Ye,copyStyles:Ye},be.logger.debug("Starting document clone with size "+ye.width+"x"+ye.height+" scrolled to "+-ye.left+","+-ye.top),dt=new VT(be,E,lt),(Ft=dt.clonedReferenceElement)?[4,dt.toIFrame(D,ye)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Gn=A0.sent(),Tn=ys(Ft)||function(E){return"HTML"===E.tagName}(Ft)?function(E){var S=E.body,D=E.documentElement;if(!S||!D)throw new Error("Unable to get document size");var L=Math.max(Math.max(S.scrollWidth,D.scrollWidth),Math.max(S.offsetWidth,D.offsetWidth),Math.max(S.clientWidth,D.clientWidth)),z=Math.max(Math.max(S.scrollHeight,D.scrollHeight),Math.max(S.offsetHeight,D.offsetHeight),Math.max(S.clientHeight,D.clientHeight));return new Fe(0,0,L,z)}(Ft.ownerDocument):De(be,Ft),Qn=Tn.width,Cr=Tn.height,_i=Tn.left,ui=Tn.top,Gs=rw(be,Ft,S.backgroundColor),xr={canvas:S.canvas,backgroundColor:Gs,scale:null!==(F2=null!==(mh=S.scale)&&void 0!==mh?mh:L.devicePixelRatio)&&void 0!==F2?F2:1,x:(null!==(m0=S.x)&&void 0!==m0?m0:0)+_i,y:(null!==(lu=S.y)&&void 0!==lu?lu:0)+ui,width:null!==(Ah=S.width)&&void 0!==Ah?Ah:Math.ceil(Qn),height:null!==(uu=S.height)&&void 0!==uu?uu:Math.ceil(Cr)},Ye?(be.logger.debug("Document cloned, using foreign object rendering"),[4,new nw(be,xr).render(Ft)]):[3,3];case 2:return er=A0.sent(),[3,5];case 3:return be.logger.debug("Document cloned, element located at "+_i+","+ui+" with size "+Qn+"x"+Cr+" using computed rendering"),be.logger.debug("Starting DOM parsing"),Xn=Wf(be,Ft),Gs===Xn.styles.backgroundColor&&(Xn.styles.backgroundColor=x1.TRANSPARENT),be.logger.debug("Starting renderer for element at "+xr.x+","+xr.y+" with size "+xr.width+"x"+xr.height),[4,new pA(be,xr).render(Xn)];case 4:er=A0.sent(),A0.label=5;case 5:return(!(null!==(hu=S.removeContainer)&&void 0!==hu)||hu)&&(VT.destroy(Gn)||be.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),be.logger.debug("Finished rendering"),[2,er]}})})},rw=function(E,S,D){var L=S.ownerDocument,z=L.documentElement?bo(E,getComputedStyle(L.documentElement).backgroundColor):x1.TRANSPARENT,U=L.body?bo(E,getComputedStyle(L.body).backgroundColor):x1.TRANSPARENT,ne="string"==typeof D?bo(E,D):null===D?x1.TRANSPARENT:4294967295;return S===L.documentElement?m2(z)?m2(U)?ne:U:z:ne};return function(E,S){return void 0===S&&(S={}),iw(E,S)}}()},3407:(Nt,et,Me)=>{"use strict";var ue=Me(6259)(),Oe=Me(5834)("Object.prototype.toString"),He=function(ct){return!(ue&&ct&&"object"==typeof ct&&Symbol.toStringTag in ct)&&"[object Arguments]"===Oe(ct)},Fe=function(ct){return!!He(ct)||null!==ct&&"object"==typeof ct&&"number"==typeof ct.length&&ct.length>=0&&"[object Array]"!==Oe(ct)&&"[object Function]"===Oe(ct.callee)},De=function(){return He(arguments)}();He.isLegacyArguments=Fe,Nt.exports=De?He:Fe},2374:(Nt,et,Me)=>{"use strict";var ue=Date.prototype.getDay,Oe=Object.prototype.toString,Fe=Me(6259)();Nt.exports=function(We){return"object"==typeof We&&null!==We&&(Fe?function(We){try{return ue.call(We),!0}catch{return!1}}(We):"[object Date]"===Oe.call(We))}},2342:(Nt,et,Me)=>{"use strict";var Oe,He,Fe,De,ue=Me(5834),Se=Me(6259)();if(Se){Oe=ue("Object.prototype.hasOwnProperty"),He=ue("RegExp.prototype.exec"),Fe={};var We=function(){throw Fe};De={toString:We,valueOf:We},"symbol"==typeof Symbol.toPrimitive&&(De[Symbol.toPrimitive]=We)}var ct=ue("Object.prototype.toString"),ft=Object.getOwnPropertyDescriptor;Nt.exports=Se?function(st){if(!st||"object"!=typeof st)return!1;var yt=ft(st,"lastIndex");if(!yt||!Oe(yt,"value"))return!1;try{He(st,De)}catch(Ne){return Ne===Fe}}:function(st){return!(!st||"object"!=typeof st&&"function"!=typeof st)&&"[object RegExp]"===ct(st)}},5943:Nt=>{"use strict";var et=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;function Se(He){if(null==He)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(He)}Nt.exports=function Oe(){try{if(!Object.assign)return!1;var He=new String("abc");if(He[5]="de","5"===Object.getOwnPropertyNames(He)[0])return!1;for(var Fe={},De=0;De<10;De++)Fe["_"+String.fromCharCode(De)]=De;if("0123456789"!==Object.getOwnPropertyNames(Fe).map(function(ft){return Fe[ft]}).join(""))return!1;var ct={};return"abcdefghijklmnopqrst".split("").forEach(function(ft){ct[ft]=ft}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},ct)).join("")}catch{return!1}}()?Object.assign:function(He,Fe){for(var De,ct,We=Se(He),ft=1;ft<arguments.length;ft++){for(var Vt in De=Object(arguments[ft]))Me.call(De,Vt)&&(We[Vt]=De[Vt]);if(et){ct=et(De);for(var Ct=0;Ct<ct.length;Ct++)ue.call(De,ct[Ct])&&(We[ct[Ct]]=De[ct[Ct]])}}return We}},1175:Nt=>{"use strict";var et=function(Me){return Me!=Me};Nt.exports=function(ue,Se){return 0===ue&&0===Se?1/ue==1/Se:!!(ue===Se||et(ue)&&et(Se))}},2e3:(Nt,et,Me)=>{"use strict";var ue=Me(2358),Se=Me(5685),Oe=Me(1175),He=Me(6305),Fe=Me(3859),De=Se(He(),Object);ue(De,{getPolyfill:He,implementation:Oe,shim:Fe}),Nt.exports=De},6305:(Nt,et,Me)=>{"use strict";var ue=Me(1175);Nt.exports=function(){return"function"==typeof Object.is?Object.is:ue}},3859:(Nt,et,Me)=>{"use strict";var ue=Me(6305),Se=Me(2358);Nt.exports=function(){var He=ue();return Se(Object,{is:He},{is:function(){return Object.is!==He}}),He}},2450:(Nt,et,Me)=>{"use strict";var ue;if(!Object.keys){var Se=Object.prototype.hasOwnProperty,Oe=Object.prototype.toString,He=Me(9978),Fe=Object.prototype.propertyIsEnumerable,De=!Fe.call({toString:null},"toString"),We=Fe.call(function(){},"prototype"),ct=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ft=function(yt){var qt=yt.constructor;return qt&&qt.prototype===yt},Vt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ct=function(){if(typeof window>"u")return!1;for(var yt in window)try{if(!Vt["$"+yt]&&Se.call(window,yt)&&null!==window[yt]&&"object"==typeof window[yt])try{ft(window[yt])}catch{return!0}}catch{return!0}return!1}();ue=function(qt){var Ne=null!==qt&&"object"==typeof qt,Ke="[object Function]"===Oe.call(qt),j=He(qt),X=Ne&&"[object String]"===Oe.call(qt),Y=[];if(!Ne&&!Ke&&!j)throw new TypeError("Object.keys called on a non-object");var we=We&&Ke;if(X&&qt.length>0&&!Se.call(qt,0))for(var Z=0;Z<qt.length;++Z)Y.push(String(Z));if(j&&qt.length>0)for(var re=0;re<qt.length;++re)Y.push(String(re));else for(var ce in qt)(!we||"prototype"!==ce)&&Se.call(qt,ce)&&Y.push(String(ce));if(De)for(var $=function(yt){if(typeof window>"u"||!Ct)return ft(yt);try{return ft(yt)}catch{return!1}}(qt),je=0;je<ct.length;++je)(!$||"constructor"!==ct[je])&&Se.call(qt,ct[je])&&Y.push(ct[je]);return Y}}Nt.exports=ue},1356:(Nt,et,Me)=>{"use strict";var ue=Array.prototype.slice,Se=Me(9978),Oe=Object.keys,He=Oe?function(We){return Oe(We)}:Me(2450),Fe=Object.keys;He.shim=function(){if(Object.keys){var We=function(){var ct=Object.keys(arguments);return ct&&ct.length===arguments.length}(1,2);We||(Object.keys=function(ft){return Se(ft)?Fe(ue.call(ft)):Fe(ft)})}else Object.keys=He;return Object.keys||He},Nt.exports=He},9978:Nt=>{"use strict";var et=Object.prototype.toString;Nt.exports=function(ue){var Se=et.call(ue),Oe="[object Arguments]"===Se;return Oe||(Oe="[object Array]"!==Se&&null!==ue&&"object"==typeof ue&&"number"==typeof ue.length&&ue.length>=0&&"[object Function]"===et.call(ue.callee)),Oe}},1766:Nt=>{Nt.exports=function(Me,ue,Se,Oe){var He=Me[0],Fe=Me[1],De=!1;void 0===Se&&(Se=0),void 0===Oe&&(Oe=ue.length);for(var We=(Oe-Se)/2,ct=0,ft=We-1;ct<We;ft=ct++){var Vt=ue[Se+2*ct+0],Ct=ue[Se+2*ct+1],yt=ue[Se+2*ft+1];Ct>Fe!=yt>Fe&&He<(ue[Se+2*ft+0]-Vt)*(Fe-Ct)/(yt-Ct)+Vt&&(De=!De)}return De}},3870:(Nt,et,Me)=>{var ue=Me(1766),Se=Me(2260);Nt.exports=function(He,Fe,De,We){return Fe.length>0&&Array.isArray(Fe[0])?Se(He,Fe,De,We):ue(He,Fe,De,We)},Nt.exports.nested=Se,Nt.exports.flat=ue},2260:Nt=>{Nt.exports=function(Me,ue,Se,Oe){var He=Me[0],Fe=Me[1],De=!1;void 0===Se&&(Se=0),void 0===Oe&&(Oe=ue.length);for(var We=Oe-Se,ct=0,ft=We-1;ct<We;ft=ct++){var Vt=ue[ct+Se][0],Ct=ue[ct+Se][1],yt=ue[ft+Se][1];Ct>Fe!=yt>Fe&&He<(ue[ft+Se][0]-Vt)*(Fe-Ct)/(yt-Ct)+Vt&&(De=!De)}return De}},9855:function(Nt){Nt.exports=function(){"use strict";function et(nt,le){if(!(nt instanceof le))throw new TypeError("Cannot call a class as a function")}function Me(nt,le){for(var ee=0;ee<le.length;ee++){var J=le[ee];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(nt,J.key,J)}}function ue(nt,le,ee){return le&&Me(nt.prototype,le),ee&&Me(nt,ee),nt}var Se=function nt(le,ee){this.next=null,this.key=le,this.data=ee,this.left=null,this.right=null};function Oe(nt,le){return nt>le?1:nt<le?-1:0}function He(nt,le,ee){for(var J=new Se(null,null),Ee=J,$e=J;;){var mt=ee(nt,le.key);if(mt<0){if(null===le.left)break;if(ee(nt,le.left.key)<0&&(le.left=(Ut=le.left).right,Ut.right=le,null===(le=Ut).left))break;$e.left=le,$e=le,le=le.left}else{if(!(mt>0))break;if(null===le.right)break;var Ut;if(ee(nt,le.right.key)>0&&(le.right=(Ut=le.right).left,Ut.left=le,null===(le=Ut).right))break;Ee.right=le,Ee=le,le=le.right}}return Ee.right=le.left,$e.left=le.right,le.left=J.right,le.right=J.left,le}function Fe(nt,le,ee,J){var Ee=new Se(nt,le);if(null===ee)return Ee.left=Ee.right=null,Ee;var $e=J(nt,(ee=He(nt,ee,J)).key);return $e<0?(Ee.left=ee.left,Ee.right=ee,ee.left=null):$e>=0&&(Ee.right=ee.right,Ee.left=ee,ee.right=null),Ee}function De(nt,le,ee){var J=null,Ee=null;if(le){var $e=ee((le=He(nt,le,ee)).key,nt);0===$e?(J=le.left,Ee=le.right):$e<0?(Ee=le.right,le.right=null,J=le):(J=le.left,le.left=null,Ee=le)}return{left:J,right:Ee}}function ct(nt,le,ee,J,Ee){if(nt){J(le+(ee?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+Ee(nt)+"\n");var $e=le+(ee?"    ":"\u2502   ");nt.left&&ct(nt.left,$e,!1,J,Ee),nt.right&&ct(nt.right,$e,!0,J,Ee)}}var ft=function(){function nt(le){void 0===le&&(le=Oe),this._root=null,this._size=0,this._comparator=le}return nt.prototype.insert=function(le,ee){return this._size++,this._root=Fe(le,ee,this._root,this._comparator)},nt.prototype.add=function(le,ee){var J=new Se(le,ee);null===this._root&&(J.left=J.right=null,this._size++,this._root=J);var Ee=this._comparator,$e=He(le,this._root,Ee),mt=Ee(le,$e.key);return 0===mt?this._root=$e:(mt<0?(J.left=$e.left,J.right=$e,$e.left=null):mt>0&&(J.right=$e.right,J.left=$e,$e.right=null),this._size++,this._root=J),this._root},nt.prototype.remove=function(le){this._root=this._remove(le,this._root,this._comparator)},nt.prototype._remove=function(le,ee,J){var Ee;return null===ee?null:0===J(le,(ee=He(le,ee,J)).key)?(null===ee.left?Ee=ee.right:(Ee=He(le,ee.left,J)).right=ee.right,this._size--,Ee):ee},nt.prototype.pop=function(){var le=this._root;if(le){for(;le.left;)le=le.left;return this._root=He(le.key,this._root,this._comparator),this._root=this._remove(le.key,this._root,this._comparator),{key:le.key,data:le.data}}return null},nt.prototype.findStatic=function(le){for(var ee=this._root,J=this._comparator;ee;){var Ee=J(le,ee.key);if(0===Ee)return ee;ee=Ee<0?ee.left:ee.right}return null},nt.prototype.find=function(le){return this._root&&(this._root=He(le,this._root,this._comparator),0!==this._comparator(le,this._root.key))?null:this._root},nt.prototype.contains=function(le){for(var ee=this._root,J=this._comparator;ee;){var Ee=J(le,ee.key);if(0===Ee)return!0;ee=Ee<0?ee.left:ee.right}return!1},nt.prototype.forEach=function(le,ee){for(var J=this._root,Ee=[],$e=!1;!$e;)null!==J?(Ee.push(J),J=J.left):0!==Ee.length?(J=Ee.pop(),le.call(ee,J),J=J.right):$e=!0;return this},nt.prototype.range=function(le,ee,J,Ee){for(var $e=[],mt=this._comparator,Ut=this._root;0!==$e.length||Ut;)if(Ut)$e.push(Ut),Ut=Ut.left;else{if(mt((Ut=$e.pop()).key,ee)>0)break;if(mt(Ut.key,le)>=0&&J.call(Ee,Ut))return this;Ut=Ut.right}return this},nt.prototype.keys=function(){var le=[];return this.forEach(function(ee){return le.push(ee.key)}),le},nt.prototype.values=function(){var le=[];return this.forEach(function(ee){return le.push(ee.data)}),le},nt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},nt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},nt.prototype.minNode=function(le){if(void 0===le&&(le=this._root),le)for(;le.left;)le=le.left;return le},nt.prototype.maxNode=function(le){if(void 0===le&&(le=this._root),le)for(;le.right;)le=le.right;return le},nt.prototype.at=function(le){for(var ee=this._root,J=!1,Ee=0,$e=[];!J;)if(ee)$e.push(ee),ee=ee.left;else if($e.length>0){if(ee=$e.pop(),Ee===le)return ee;Ee++,ee=ee.right}else J=!0;return null},nt.prototype.next=function(le){var ee=this._root,J=null;if(le.right){for(J=le.right;J.left;)J=J.left;return J}for(var Ee=this._comparator;ee;){var $e=Ee(le.key,ee.key);if(0===$e)break;$e<0?(J=ee,ee=ee.left):ee=ee.right}return J},nt.prototype.prev=function(le){var ee=this._root,J=null;if(null!==le.left){for(J=le.left;J.right;)J=J.right;return J}for(var Ee=this._comparator;ee;){var $e=Ee(le.key,ee.key);if(0===$e)break;$e<0?ee=ee.left:(J=ee,ee=ee.right)}return J},nt.prototype.clear=function(){return this._root=null,this._size=0,this},nt.prototype.toList=function(){return function st(nt){for(var le=nt,ee=[],J=!1,Ee=new Se(null,null),$e=Ee;!J;)le?(ee.push(le),le=le.left):ee.length>0?le=(le=$e=$e.next=ee.pop()).right:J=!0;return $e.next=null,Ee.next}(this._root)},nt.prototype.load=function(le,ee,J){void 0===ee&&(ee=[]),void 0===J&&(J=!1);var Ee=le.length,$e=this._comparator;if(J&&Ne(le,ee,0,Ee-1,$e),null===this._root)this._root=Vt(le,ee,0,Ee),this._size=Ee;else{var mt=function qt(nt,le,ee){for(var J=new Se(null,null),Ee=J,$e=nt,mt=le;null!==$e&&null!==mt;)ee($e.key,mt.key)<0?(Ee.next=$e,$e=$e.next):(Ee.next=mt,mt=mt.next),Ee=Ee.next;return null!==$e?Ee.next=$e:null!==mt&&(Ee.next=mt),J.next}(this.toList(),function Ct(nt,le){for(var ee=new Se(null,null),J=ee,Ee=0;Ee<nt.length;Ee++)J=J.next=new Se(nt[Ee],le[Ee]);return J.next=null,ee.next}(le,ee),$e);this._root=yt({head:mt},0,Ee=this._size+Ee)}return this},nt.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(nt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(nt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),nt.prototype.toString=function(le){void 0===le&&(le=function(Ee){return String(Ee.key)});var ee=[];return ct(this._root,"",!0,function(J){return ee.push(J)},le),ee.join("")},nt.prototype.update=function(le,ee,J){var Ee=this._comparator,$e=De(le,this._root,Ee),mt=$e.left,Ut=$e.right;Ee(le,ee)<0?Ut=Fe(ee,J,Ut,Ee):mt=Fe(ee,J,mt,Ee),this._root=function We(nt,le,ee){return null===le?nt:(null===nt||((le=He(nt.key,le,ee)).left=nt),le)}(mt,Ut,Ee)},nt.prototype.split=function(le){return De(le,this._root,this._comparator)},nt}();function Vt(nt,le,ee,J){var Ee=J-ee;if(Ee>0){var $e=ee+Math.floor(Ee/2),Kt=new Se(nt[$e],le[$e]);return Kt.left=Vt(nt,le,ee,$e),Kt.right=Vt(nt,le,$e+1,J),Kt}return null}function yt(nt,le,ee){var J=ee-le;if(J>0){var Ee=le+Math.floor(J/2),$e=yt(nt,le,Ee),mt=nt.head;return mt.left=$e,nt.head=nt.head.next,mt.right=yt(nt,Ee+1,ee),mt}return null}function Ne(nt,le,ee,J,Ee){if(!(ee>=J)){for(var $e=nt[ee+J>>1],mt=ee-1,Ut=J+1;;){do{mt++}while(Ee(nt[mt],$e)<0);do{Ut--}while(Ee(nt[Ut],$e)>0);if(mt>=Ut)break;var Kt=nt[mt];nt[mt]=nt[Ut],nt[Ut]=Kt,Kt=le[mt],le[mt]=le[Ut],le[Ut]=Kt}Ne(nt,le,ee,Ut,Ee),Ne(nt,le,Ut+1,J,Ee)}}var Ke=function(le,ee){return le.ll.x<=ee.x&&ee.x<=le.ur.x&&le.ll.y<=ee.y&&ee.y<=le.ur.y},j=function(le,ee){return ee.ur.x<le.ll.x||le.ur.x<ee.ll.x||ee.ur.y<le.ll.y||le.ur.y<ee.ll.y?null:{ll:{x:le.ll.x<ee.ll.x?ee.ll.x:le.ll.x,y:le.ll.y<ee.ll.y?ee.ll.y:le.ll.y},ur:{x:le.ur.x<ee.ur.x?le.ur.x:ee.ur.x,y:le.ur.y<ee.ur.y?le.ur.y:ee.ur.y}}},X=Number.EPSILON;void 0===X&&(X=Math.pow(2,-52));var Y=X*X,we=function(le,ee){if(-X<le&&le<X&&-X<ee&&ee<X)return 0;var J=le-ee;return J*J<Y*le*ee?0:le<ee?-1:1},Z=function(){function nt(){et(this,nt),this.reset()}return ue(nt,[{key:"reset",value:function(){this.xRounder=new re,this.yRounder=new re}},{key:"round",value:function(ee,J){return{x:this.xRounder.round(ee),y:this.yRounder.round(J)}}}]),nt}(),re=function(){function nt(){et(this,nt),this.tree=new ft,this.round(0)}return ue(nt,[{key:"round",value:function(ee){var J=this.tree.add(ee),Ee=this.tree.prev(J);if(null!==Ee&&0===we(J.key,Ee.key))return this.tree.remove(ee),Ee.key;var $e=this.tree.next(J);return null!==$e&&0===we(J.key,$e.key)?(this.tree.remove(ee),$e.key):ee}}]),nt}(),ce=new Z,$=function(le,ee){return le.x*ee.y-le.y*ee.x},je=function(le,ee){return le.x*ee.x+le.y*ee.y},Ie=function(le,ee,J){var mt=$({x:ee.x-le.x,y:ee.y-le.y},{x:J.x-le.x,y:J.y-le.y});return we(mt,0)},Pe=function(le){return Math.sqrt(je(le,le))},se=function(le,ee,J){var Ee={x:ee.x-le.x,y:ee.y-le.y},$e={x:J.x-le.x,y:J.y-le.y};return $($e,Ee)/Pe($e)/Pe(Ee)},kt=function(le,ee,J){var Ee={x:ee.x-le.x,y:ee.y-le.y},$e={x:J.x-le.x,y:J.y-le.y};return je($e,Ee)/Pe($e)/Pe(Ee)},At=function(le,ee,J){return 0===ee.y?null:{x:le.x+ee.x/ee.y*(J-le.y),y:J}},xe=function(le,ee,J){return 0===ee.x?null:{x:J,y:le.y+ee.y/ee.x*(J-le.x)}},Ce=function(){function nt(le,ee){et(this,nt),void 0===le.events?le.events=[this]:le.events.push(this),this.point=le,this.isLeft=ee}return ue(nt,null,[{key:"compare",value:function(ee,J){var Ee=nt.comparePoints(ee.point,J.point);return 0!==Ee?Ee:(ee.point!==J.point&&ee.link(J),ee.isLeft!==J.isLeft?ee.isLeft?1:-1:it.compare(ee.segment,J.segment))}},{key:"comparePoints",value:function(ee,J){return ee.x<J.x?-1:ee.x>J.x?1:ee.y<J.y?-1:ee.y>J.y?1:0}}]),ue(nt,[{key:"link",value:function(ee){if(ee.point===this.point)throw new Error("Tried to link already linked events");for(var J=ee.point.events,Ee=0,$e=J.length;Ee<$e;Ee++){var mt=J[Ee];this.point.events.push(mt),mt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var ee=this.point.events.length,J=0;J<ee;J++){var Ee=this.point.events[J];if(void 0===Ee.segment.consumedBy)for(var $e=J+1;$e<ee;$e++){var mt=this.point.events[$e];void 0===mt.consumedBy&&Ee.otherSE.point.events===mt.otherSE.point.events&&Ee.segment.consume(mt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var ee=[],J=0,Ee=this.point.events.length;J<Ee;J++){var $e=this.point.events[J];$e!==this&&!$e.segment.ringOut&&$e.segment.isInResult()&&ee.push($e)}return ee}},{key:"getLeftmostComparator",value:function(ee){var J=this,Ee=new Map,$e=function(Ut){var Kt=Ut.otherSE;Ee.set(Ut,{sine:se(J.point,ee.point,Kt.point),cosine:kt(J.point,ee.point,Kt.point)})};return function(mt,Ut){Ee.has(mt)||$e(mt),Ee.has(Ut)||$e(Ut);var Kt=Ee.get(mt),Mt=Kt.sine,xi=Kt.cosine,Fi=Ee.get(Ut),_n=Fi.sine,Ii=Fi.cosine;return Mt>=0&&_n>=0?xi<Ii?1:xi>Ii?-1:0:Mt<0&&_n<0?xi<Ii?-1:xi>Ii?1:0:_n<Mt?-1:_n>Mt?1:0}}}]),nt}(),Qe=0,it=function(){function nt(le,ee,J,Ee){et(this,nt),this.id=++Qe,this.leftSE=le,le.segment=this,le.otherSE=ee,this.rightSE=ee,ee.segment=this,ee.otherSE=le,this.rings=J,this.windings=Ee}return ue(nt,null,[{key:"compare",value:function(ee,J){var Ee=ee.leftSE.point.x,$e=J.leftSE.point.x,mt=ee.rightSE.point.x,Ut=J.rightSE.point.x;if(Ut<Ee)return 1;if(mt<$e)return-1;var Kt=ee.leftSE.point.y,Mt=J.leftSE.point.y,xi=ee.rightSE.point.y,Fi=J.rightSE.point.y;if(Ee<$e){if(Mt<Kt&&Mt<xi)return 1;if(Mt>Kt&&Mt>xi)return-1;var _n=ee.comparePoint(J.leftSE.point);if(_n<0)return 1;if(_n>0)return-1;var Ii=J.comparePoint(ee.rightSE.point);return 0!==Ii?Ii:-1}if(Ee>$e){if(Kt<Mt&&Kt<Fi)return-1;if(Kt>Mt&&Kt>Fi)return 1;var _r=J.comparePoint(ee.leftSE.point);if(0!==_r)return _r;var lr=ee.comparePoint(J.rightSE.point);return lr<0?1:lr>0?-1:1}if(Kt<Mt)return-1;if(Kt>Mt)return 1;if(mt<Ut){var yr=J.comparePoint(ee.rightSE.point);if(0!==yr)return yr}if(mt>Ut){var Os=ee.comparePoint(J.rightSE.point);if(Os<0)return 1;if(Os>0)return-1}if(mt!==Ut){var va=xi-Kt,Fo=mt-Ee,xo=Fi-Mt,_a=Ut-$e;if(va>Fo&&xo<_a)return 1;if(va<Fo&&xo>_a)return-1}return mt>Ut?1:mt<Ut||xi<Fi?-1:xi>Fi?1:ee.id<J.id?-1:ee.id>J.id?1:0}}]),ue(nt,[{key:"replaceRightSE",value:function(ee){this.rightSE=ee,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var ee=this.leftSE.point.y,J=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:ee<J?ee:J},ur:{x:this.rightSE.point.x,y:ee>J?ee:J}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(ee){return ee.x===this.leftSE.point.x&&ee.y===this.leftSE.point.y||ee.x===this.rightSE.point.x&&ee.y===this.rightSE.point.y}},{key:"comparePoint",value:function(ee){if(this.isAnEndpoint(ee))return 0;var J=this.leftSE.point,Ee=this.rightSE.point,$e=this.vector();if(J.x===Ee.x)return ee.x===J.x?0:ee.x<J.x?1:-1;if(ee.x===J.x+(ee.y-J.y)/$e.y*$e.x)return 0;var Mt=J.y+(ee.x-J.x)/$e.x*$e.y;return ee.y===Mt?0:ee.y<Mt?-1:1}},{key:"getIntersection",value:function(ee){var J=this.bbox(),Ee=ee.bbox(),$e=j(J,Ee);if(null===$e)return null;var mt=this.leftSE.point,Ut=this.rightSE.point,Kt=ee.leftSE.point,Mt=ee.rightSE.point,xi=Ke(J,Kt)&&0===this.comparePoint(Kt),Fi=Ke(Ee,mt)&&0===ee.comparePoint(mt),_n=Ke(J,Mt)&&0===this.comparePoint(Mt),Ii=Ke(Ee,Ut)&&0===ee.comparePoint(Ut);if(Fi&&xi)return Ii&&!_n?Ut:!Ii&&_n?Mt:null;if(Fi)return _n&&mt.x===Mt.x&&mt.y===Mt.y?null:mt;if(xi)return Ii&&Ut.x===Kt.x&&Ut.y===Kt.y?null:Kt;if(Ii&&_n)return null;if(Ii)return Ut;if(_n)return Mt;var _r=function(le,ee,J,Ee){if(0===ee.x)return xe(J,Ee,le.x);if(0===Ee.x)return xe(le,ee,J.x);if(0===ee.y)return At(J,Ee,le.y);if(0===Ee.y)return At(le,ee,J.y);var $e=$(ee,Ee);if(0==$e)return null;var mt={x:J.x-le.x,y:J.y-le.y},Ut=$(mt,ee)/$e,Kt=$(mt,Ee)/$e;return{x:(le.x+Kt*ee.x+(J.x+Ut*Ee.x))/2,y:(le.y+Kt*ee.y+(J.y+Ut*Ee.y))/2}}(mt,this.vector(),Kt,ee.vector());return null!==_r&&Ke($e,_r)?ce.round(_r.x,_r.y):null}},{key:"split",value:function(ee){var J=[],Ee=void 0!==ee.events,$e=new Ce(ee,!0),mt=new Ce(ee,!1),Ut=this.rightSE;this.replaceRightSE(mt),J.push(mt),J.push($e);var Kt=new nt($e,Ut,this.rings.slice(),this.windings.slice());return Ce.comparePoints(Kt.leftSE.point,Kt.rightSE.point)>0&&Kt.swapEvents(),Ce.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Ee&&($e.checkForConsuming(),mt.checkForConsuming()),J}},{key:"swapEvents",value:function(){var ee=this.rightSE;this.rightSE=this.leftSE,this.leftSE=ee,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var J=0,Ee=this.windings.length;J<Ee;J++)this.windings[J]*=-1}},{key:"consume",value:function(ee){for(var J=this,Ee=ee;J.consumedBy;)J=J.consumedBy;for(;Ee.consumedBy;)Ee=Ee.consumedBy;var $e=nt.compare(J,Ee);if(0!==$e){if($e>0){var mt=J;J=Ee,Ee=mt}if(J.prev===Ee){var Ut=J;J=Ee,Ee=Ut}for(var Kt=0,Mt=Ee.rings.length;Kt<Mt;Kt++){var xi=Ee.rings[Kt],Fi=Ee.windings[Kt],_n=J.rings.indexOf(xi);-1===_n?(J.rings.push(xi),J.windings.push(Fi)):J.windings[_n]+=Fi}Ee.rings=null,Ee.windings=null,Ee.consumedBy=J,Ee.leftSE.consumedBy=J.leftSE,Ee.rightSE.consumedBy=J.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var ee=this.beforeState();this._afterState={rings:ee.rings.slice(0),windings:ee.windings.slice(0),multiPolys:[]};for(var J=this._afterState.rings,Ee=this._afterState.windings,$e=this._afterState.multiPolys,mt=0,Ut=this.rings.length;mt<Ut;mt++){var Kt=this.rings[mt],Mt=this.windings[mt],xi=J.indexOf(Kt);-1===xi?(J.push(Kt),Ee.push(Mt)):Ee[xi]+=Mt}for(var Fi=[],_n=[],Ii=0,_r=J.length;Ii<_r;Ii++)if(0!==Ee[Ii]){var lr=J[Ii],yr=lr.poly;if(-1===_n.indexOf(yr))if(lr.isExterior)Fi.push(yr);else{-1===_n.indexOf(yr)&&_n.push(yr);var Os=Fi.indexOf(lr.poly);-1!==Os&&Fi.splice(Os,1)}}for(var va=0,Fo=Fi.length;va<Fo;va++){var xo=Fi[va].multiPoly;-1===$e.indexOf(xo)&&$e.push(xo)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var ee=this.beforeState().multiPolys,J=this.afterState().multiPolys;switch(rn.type){case"union":this._isInResult=0===ee.length!=(0===J.length);break;case"intersection":var mt,Ut;ee.length<J.length?(mt=ee.length,Ut=J.length):(mt=J.length,Ut=ee.length),this._isInResult=Ut===rn.numMultiPolys&&mt<Ut;break;case"xor":var Kt=Math.abs(ee.length-J.length);this._isInResult=Kt%2==1;break;case"difference":var Mt=function(Fi){return 1===Fi.length&&Fi[0].isSubject};this._isInResult=Mt(ee)!==Mt(J);break;default:throw new Error("Unrecognized operation type found ".concat(rn.type))}return this._isInResult}}],[{key:"fromRing",value:function(ee,J,Ee){var $e,mt,Ut,Kt=Ce.comparePoints(ee,J);if(Kt<0)$e=ee,mt=J,Ut=1;else{if(!(Kt>0))throw new Error("Tried to create degenerate segment at [".concat(ee.x,", ").concat(ee.y,"]"));$e=J,mt=ee,Ut=-1}return new nt(new Ce($e,!0),new Ce(mt,!1),[Ee],[Ut])}}]),nt}(),_e=function(){function nt(le,ee,J){if(et(this,nt),!Array.isArray(le)||0===le.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=ee,this.isExterior=J,this.segments=[],"number"!=typeof le[0][0]||"number"!=typeof le[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Ee=ce.round(le[0][0],le[0][1]);this.bbox={ll:{x:Ee.x,y:Ee.y},ur:{x:Ee.x,y:Ee.y}};for(var $e=Ee,mt=1,Ut=le.length;mt<Ut;mt++){if("number"!=typeof le[mt][0]||"number"!=typeof le[mt][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Kt=ce.round(le[mt][0],le[mt][1]);Kt.x===$e.x&&Kt.y===$e.y||(this.segments.push(it.fromRing($e,Kt,this)),Kt.x<this.bbox.ll.x&&(this.bbox.ll.x=Kt.x),Kt.y<this.bbox.ll.y&&(this.bbox.ll.y=Kt.y),Kt.x>this.bbox.ur.x&&(this.bbox.ur.x=Kt.x),Kt.y>this.bbox.ur.y&&(this.bbox.ur.y=Kt.y),$e=Kt)}(Ee.x!==$e.x||Ee.y!==$e.y)&&this.segments.push(it.fromRing($e,Ee,this))}return ue(nt,[{key:"getSweepEvents",value:function(){for(var ee=[],J=0,Ee=this.segments.length;J<Ee;J++){var $e=this.segments[J];ee.push($e.leftSE),ee.push($e.rightSE)}return ee}}]),nt}(),St=function(){function nt(le,ee){if(et(this,nt),!Array.isArray(le))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new _e(le[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var J=1,Ee=le.length;J<Ee;J++){var $e=new _e(le[J],this,!1);$e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=$e.bbox.ll.x),$e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=$e.bbox.ll.y),$e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=$e.bbox.ur.x),$e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=$e.bbox.ur.y),this.interiorRings.push($e)}this.multiPoly=ee}return ue(nt,[{key:"getSweepEvents",value:function(){for(var ee=this.exteriorRing.getSweepEvents(),J=0,Ee=this.interiorRings.length;J<Ee;J++)for(var $e=this.interiorRings[J].getSweepEvents(),mt=0,Ut=$e.length;mt<Ut;mt++)ee.push($e[mt]);return ee}}]),nt}(),Je=function(){function nt(le,ee){if(et(this,nt),!Array.isArray(le))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof le[0][0][0]&&(le=[le])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var J=0,Ee=le.length;J<Ee;J++){var $e=new St(le[J],this);$e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=$e.bbox.ll.x),$e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=$e.bbox.ll.y),$e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=$e.bbox.ur.x),$e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=$e.bbox.ur.y),this.polys.push($e)}this.isSubject=ee}return ue(nt,[{key:"getSweepEvents",value:function(){for(var ee=[],J=0,Ee=this.polys.length;J<Ee;J++)for(var $e=this.polys[J].getSweepEvents(),mt=0,Ut=$e.length;mt<Ut;mt++)ee.push($e[mt]);return ee}}]),nt}(),en=function(){function nt(le){et(this,nt),this.events=le;for(var ee=0,J=le.length;ee<J;ee++)le[ee].segment.ringOut=this;this.poly=null}return ue(nt,null,[{key:"factory",value:function(ee){for(var J=[],Ee=0,$e=ee.length;Ee<$e;Ee++){var mt=ee[Ee];if(mt.isInResult()&&!mt.ringOut){for(var Ut=null,Kt=mt.leftSE,Mt=mt.rightSE,xi=[Kt],Fi=Kt.point,_n=[];Ut=Kt,xi.push(Kt=Mt),Kt.point!==Fi;)for(;;){var Ii=Kt.getAvailableLinkedEvents();if(0===Ii.length){var _r=xi[0].point,lr=xi[xi.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(_r.x,",")+" ".concat(_r.y,"]. Last matching segment found ends at")+" [".concat(lr.x,", ").concat(lr.y,"]."))}if(1===Ii.length){Mt=Ii[0].otherSE;break}for(var yr=null,Os=0,va=_n.length;Os<va;Os++)if(_n[Os].point===Kt.point){yr=Os;break}if(null===yr){_n.push({index:xi.length,point:Kt.point});var _a=Kt.getLeftmostComparator(Ut);Mt=Ii.sort(_a)[0].otherSE;break}var Fo=_n.splice(yr)[0],xo=xi.splice(Fo.index);xo.unshift(xo[0].otherSE),J.push(new nt(xo.reverse()))}J.push(new nt(xi))}}return J}}]),ue(nt,[{key:"getGeom",value:function(){for(var ee=this.events[0].point,J=[ee],Ee=1,$e=this.events.length-1;Ee<$e;Ee++){var mt=this.events[Ee].point;0!==Ie(mt,ee,this.events[Ee+1].point)&&(J.push(mt),ee=mt)}if(1===J.length)return null;0===Ie(J[0],ee,J[1])&&J.shift(),J.push(J[0]);for(var xi=this.isExteriorRing()?1:-1,Fi=this.isExteriorRing()?0:J.length-1,_n=this.isExteriorRing()?J.length:-1,Ii=[],_r=Fi;_r!=_n;_r+=xi)Ii.push([J[_r].x,J[_r].y]);return Ii}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var ee=this.enclosingRing();this._isExteriorRing=!ee||!ee.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var ee=this.events[0],J=1,Ee=this.events.length;J<Ee;J++){var $e=this.events[J];Ce.compare(ee,$e)>0&&(ee=$e)}for(var mt=ee.segment.prevInResult(),Ut=mt?mt.prevInResult():null;;){if(!mt)return null;if(!Ut)return mt.ringOut;if(Ut.ringOut!==mt.ringOut)return Ut.ringOut.enclosingRing()!==mt.ringOut?mt.ringOut:mt.ringOut.enclosingRing();mt=Ut.prevInResult(),Ut=mt?mt.prevInResult():null}}}]),nt}(),vt=function(){function nt(le){et(this,nt),this.exteriorRing=le,le.poly=this,this.interiorRings=[]}return ue(nt,[{key:"addInterior",value:function(ee){this.interiorRings.push(ee),ee.poly=this}},{key:"getGeom",value:function(){var ee=[this.exteriorRing.getGeom()];if(null===ee[0])return null;for(var J=0,Ee=this.interiorRings.length;J<Ee;J++){var $e=this.interiorRings[J].getGeom();null!==$e&&ee.push($e)}return ee}}]),nt}(),Mn=function(){function nt(le){et(this,nt),this.rings=le,this.polys=this._composePolys(le)}return ue(nt,[{key:"getGeom",value:function(){for(var ee=[],J=0,Ee=this.polys.length;J<Ee;J++){var $e=this.polys[J].getGeom();null!==$e&&ee.push($e)}return ee}},{key:"_composePolys",value:function(ee){for(var J=[],Ee=0,$e=ee.length;Ee<$e;Ee++){var mt=ee[Ee];if(!mt.poly)if(mt.isExteriorRing())J.push(new vt(mt));else{var Ut=mt.enclosingRing();Ut.poly||J.push(new vt(Ut)),Ut.poly.addInterior(mt)}}return J}}]),nt}(),yn=function(){function nt(le){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it.compare;et(this,nt),this.queue=le,this.tree=new ft(ee),this.segments=[]}return ue(nt,[{key:"process",value:function(ee){var J=ee.segment,Ee=[];if(ee.consumedBy)return ee.isLeft?this.queue.remove(ee.otherSE):this.tree.remove(J),Ee;var $e=ee.isLeft?this.tree.insert(J):this.tree.find(J);if(!$e)throw new Error("Unable to find segment #".concat(J.id," ")+"[".concat(J.leftSE.point.x,", ").concat(J.leftSE.point.y,"] -> ")+"[".concat(J.rightSE.point.x,", ").concat(J.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var mt=$e,Ut=$e,Kt=void 0,Mt=void 0;void 0===Kt;)null===(mt=this.tree.prev(mt))?Kt=null:void 0===mt.key.consumedBy&&(Kt=mt.key);for(;void 0===Mt;)null===(Ut=this.tree.next(Ut))?Mt=null:void 0===Ut.key.consumedBy&&(Mt=Ut.key);if(ee.isLeft){var xi=null;if(Kt){var Fi=Kt.getIntersection(J);if(null!==Fi&&(J.isAnEndpoint(Fi)||(xi=Fi),!Kt.isAnEndpoint(Fi)))for(var _n=this._splitSafely(Kt,Fi),Ii=0,_r=_n.length;Ii<_r;Ii++)Ee.push(_n[Ii])}var lr=null;if(Mt){var yr=Mt.getIntersection(J);if(null!==yr&&(J.isAnEndpoint(yr)||(lr=yr),!Mt.isAnEndpoint(yr)))for(var Os=this._splitSafely(Mt,yr),va=0,Fo=Os.length;va<Fo;va++)Ee.push(Os[va])}if(null!==xi||null!==lr){var xo;xo=null===xi?lr:null===lr||Ce.comparePoints(xi,lr)<=0?xi:lr,this.queue.remove(J.rightSE),Ee.push(J.rightSE);for(var vs=J.split(xo),W1=0,ko=vs.length;W1<ko;W1++)Ee.push(vs[W1])}Ee.length>0?(this.tree.remove(J),Ee.push(ee)):(this.segments.push(J),J.prev=Kt)}else{if(Kt&&Mt){var tn=Kt.getIntersection(Mt);if(null!==tn){if(!Kt.isAnEndpoint(tn))for(var Ic=this._splitSafely(Kt,tn),l2=0,Bi=Ic.length;l2<Bi;l2++)Ee.push(Ic[l2]);if(!Mt.isAnEndpoint(tn))for(var W2=this._splitSafely(Mt,tn),lo=0,ol=W2.length;lo<ol;lo++)Ee.push(W2[lo])}}this.tree.remove(J)}return Ee}},{key:"_splitSafely",value:function(ee,J){this.tree.remove(ee);var Ee=ee.rightSE;this.queue.remove(Ee);var $e=ee.split(J);return $e.push(Ee),void 0===ee.consumedBy&&this.tree.insert(ee),$e}}]),nt}(),ci=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,$t=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,rn=new(function(){function nt(){et(this,nt)}return ue(nt,[{key:"run",value:function(ee,J,Ee){rn.type=ee,ce.reset();for(var $e=[new Je(J,!0)],mt=0,Ut=Ee.length;mt<Ut;mt++)$e.push(new Je(Ee[mt],!1));if(rn.numMultiPolys=$e.length,"difference"===rn.type)for(var Kt=$e[0],Mt=1;Mt<$e.length;)null!==j($e[Mt].bbox,Kt.bbox)?Mt++:$e.splice(Mt,1);if("intersection"===rn.type)for(var xi=0,Fi=$e.length;xi<Fi;xi++)for(var _n=$e[xi],Ii=xi+1,_r=$e.length;Ii<_r;Ii++)if(null===j(_n.bbox,$e[Ii].bbox))return[];for(var lr=new ft(Ce.compare),yr=0,Os=$e.length;yr<Os;yr++)for(var va=$e[yr].getSweepEvents(),Fo=0,xo=va.length;Fo<xo;Fo++)if(lr.insert(va[Fo]),lr.size>ci)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _a=new yn(lr),vs=lr.size,W1=lr.pop();W1;){var ko=W1.key;if(lr.size===vs){var tn=ko.segment;throw new Error("Unable to pop() ".concat(ko.isLeft?"left":"right"," SweepEvent ")+"[".concat(ko.point.x,", ").concat(ko.point.y,"] from segment #").concat(tn.id," ")+"[".concat(tn.leftSE.point.x,", ").concat(tn.leftSE.point.y,"] -> ")+"[".concat(tn.rightSE.point.x,", ").concat(tn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(lr.size>ci)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_a.segments.length>$t)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Ic=_a.process(ko),l2=0,Bi=Ic.length;l2<Bi;l2++){var W2=Ic[l2];void 0===W2.consumedBy&&lr.insert(W2)}vs=lr.size,W1=lr.pop()}ce.reset();var lo=en.factory(_a.segments);return new Mn(lo).getGeom()}}]),nt}());return{union:function(le){for(var ee=arguments.length,J=new Array(ee>1?ee-1:0),Ee=1;Ee<ee;Ee++)J[Ee-1]=arguments[Ee];return rn.run("union",le,J)},intersection:function(le){for(var ee=arguments.length,J=new Array(ee>1?ee-1:0),Ee=1;Ee<ee;Ee++)J[Ee-1]=arguments[Ee];return rn.run("intersection",le,J)},xor:function(le){for(var ee=arguments.length,J=new Array(ee>1?ee-1:0),Ee=1;Ee<ee;Ee++)J[Ee-1]=arguments[Ee];return rn.run("xor",le,J)},difference:function(le){for(var ee=arguments.length,J=new Array(ee>1?ee-1:0),Ee=1;Ee<ee;Ee++)J[Ee-1]=arguments[Ee];return rn.run("difference",le,J)}}}()},2402:function(Nt){Nt.exports=function(){"use strict";function et(Ne,Ke,j,X,Y){!function we(Z,re,ce,$,je){for(;$>ce;){if($-ce>600){var Ie=$-ce+1,Pe=re-ce+1,se=Math.log(Ie),kt=.5*Math.exp(2*se/3),At=.5*Math.sqrt(se*kt*(Ie-kt)/Ie)*(Pe-Ie/2<0?-1:1);we(Z,re,Math.max(ce,Math.floor(re-Pe*kt/Ie+At)),Math.min($,Math.floor(re+(Ie-Pe)*kt/Ie+At)),je)}var Ce=Z[re],Qe=ce,it=$;for(Me(Z,ce,re),je(Z[$],Ce)>0&&Me(Z,ce,$);Qe<it;){for(Me(Z,Qe,it),Qe++,it--;je(Z[Qe],Ce)<0;)Qe++;for(;je(Z[it],Ce)>0;)it--}0===je(Z[ce],Ce)?Me(Z,ce,it):Me(Z,++it,$),it<=re&&(ce=it+1),re<=it&&($=it-1)}}(Ne,Ke,j||0,X||Ne.length-1,Y||ue)}function Me(Ne,Ke,j){var X=Ne[Ke];Ne[Ke]=Ne[j],Ne[j]=X}function ue(Ne,Ke){return Ne<Ke?-1:Ne>Ke?1:0}var Se=function(Ne){void 0===Ne&&(Ne=9),this._maxEntries=Math.max(4,Ne),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Oe(Ne,Ke,j){if(!j)return Ke.indexOf(Ne);for(var X=0;X<Ke.length;X++)if(j(Ne,Ke[X]))return X;return-1}function He(Ne,Ke){Fe(Ne,0,Ne.children.length,Ke,Ne)}function Fe(Ne,Ke,j,X,Y){Y||(Y=yt(null)),Y.minX=1/0,Y.minY=1/0,Y.maxX=-1/0,Y.maxY=-1/0;for(var we=Ke;we<j;we++){var Z=Ne.children[we];De(Y,Ne.leaf?X(Z):Z)}return Y}function De(Ne,Ke){return Ne.minX=Math.min(Ne.minX,Ke.minX),Ne.minY=Math.min(Ne.minY,Ke.minY),Ne.maxX=Math.max(Ne.maxX,Ke.maxX),Ne.maxY=Math.max(Ne.maxY,Ke.maxY),Ne}function We(Ne,Ke){return Ne.minX-Ke.minX}function ct(Ne,Ke){return Ne.minY-Ke.minY}function ft(Ne){return(Ne.maxX-Ne.minX)*(Ne.maxY-Ne.minY)}function Vt(Ne){return Ne.maxX-Ne.minX+(Ne.maxY-Ne.minY)}function Ct(Ne,Ke){return Ne.minX<=Ke.minX&&Ne.minY<=Ke.minY&&Ke.maxX<=Ne.maxX&&Ke.maxY<=Ne.maxY}function st(Ne,Ke){return Ke.minX<=Ne.maxX&&Ke.minY<=Ne.maxY&&Ke.maxX>=Ne.minX&&Ke.maxY>=Ne.minY}function yt(Ne){return{children:Ne,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function qt(Ne,Ke,j,X,Y){for(var we=[Ke,j];we.length;)if(!((j=we.pop())-(Ke=we.pop())<=X)){var Z=Ke+Math.ceil((j-Ke)/X/2)*X;et(Ne,Z,Ke,j,Y),we.push(Ke,Z,Z,j)}}return Se.prototype.all=function(){return this._all(this.data,[])},Se.prototype.search=function(Ne){var Ke=this.data,j=[];if(!st(Ne,Ke))return j;for(var X=this.toBBox,Y=[];Ke;){for(var we=0;we<Ke.children.length;we++){var Z=Ke.children[we],re=Ke.leaf?X(Z):Z;st(Ne,re)&&(Ke.leaf?j.push(Z):Ct(Ne,re)?this._all(Z,j):Y.push(Z))}Ke=Y.pop()}return j},Se.prototype.collides=function(Ne){var Ke=this.data;if(!st(Ne,Ke))return!1;for(var j=[];Ke;){for(var X=0;X<Ke.children.length;X++){var Y=Ke.children[X],we=Ke.leaf?this.toBBox(Y):Y;if(st(Ne,we)){if(Ke.leaf||Ct(Ne,we))return!0;j.push(Y)}}Ke=j.pop()}return!1},Se.prototype.load=function(Ne){if(!Ne||!Ne.length)return this;if(Ne.length<this._minEntries){for(var Ke=0;Ke<Ne.length;Ke++)this.insert(Ne[Ke]);return this}var j=this._build(Ne.slice(),0,Ne.length-1,0);if(this.data.children.length)if(this.data.height===j.height)this._splitRoot(this.data,j);else{if(this.data.height<j.height){var X=this.data;this.data=j,j=X}this._insert(j,this.data.height-j.height-1,!0)}else this.data=j;return this},Se.prototype.insert=function(Ne){return Ne&&this._insert(Ne,this.data.height-1),this},Se.prototype.clear=function(){return this.data=yt([]),this},Se.prototype.remove=function(Ne,Ke){if(!Ne)return this;for(var j,X,Y,we=this.data,Z=this.toBBox(Ne),re=[],ce=[];we||re.length;){if(we||(we=re.pop(),X=re[re.length-1],j=ce.pop(),Y=!0),we.leaf){var $=Oe(Ne,we.children,Ke);if(-1!==$)return we.children.splice($,1),re.push(we),this._condense(re),this}Y||we.leaf||!Ct(we,Z)?X?(j++,we=X.children[j],Y=!1):we=null:(re.push(we),ce.push(j),j=0,X=we,we=we.children[0])}return this},Se.prototype.toBBox=function(Ne){return Ne},Se.prototype.compareMinX=function(Ne,Ke){return Ne.minX-Ke.minX},Se.prototype.compareMinY=function(Ne,Ke){return Ne.minY-Ke.minY},Se.prototype.toJSON=function(){return this.data},Se.prototype.fromJSON=function(Ne){return this.data=Ne,this},Se.prototype._all=function(Ne,Ke){for(var j=[];Ne;)Ne.leaf?Ke.push.apply(Ke,Ne.children):j.push.apply(j,Ne.children),Ne=j.pop();return Ke},Se.prototype._build=function(Ne,Ke,j,X){var Y,we=j-Ke+1,Z=this._maxEntries;if(we<=Z)return He(Y=yt(Ne.slice(Ke,j+1)),this.toBBox),Y;X||(X=Math.ceil(Math.log(we)/Math.log(Z)),Z=Math.ceil(we/Math.pow(Z,X-1))),(Y=yt([])).leaf=!1,Y.height=X;var re=Math.ceil(we/Z),ce=re*Math.ceil(Math.sqrt(Z));qt(Ne,Ke,j,ce,this.compareMinX);for(var $=Ke;$<=j;$+=ce){var je=Math.min($+ce-1,j);qt(Ne,$,je,re,this.compareMinY);for(var Ie=$;Ie<=je;Ie+=re){var Pe=Math.min(Ie+re-1,je);Y.children.push(this._build(Ne,Ie,Pe,X-1))}}return He(Y,this.toBBox),Y},Se.prototype._chooseSubtree=function(Ne,Ke,j,X){for(;X.push(Ke),!Ke.leaf&&X.length-1!==j;){for(var Y=1/0,we=1/0,Z=void 0,re=0;re<Ke.children.length;re++){var ce=Ke.children[re],$=ft(ce),je=(Ie=Ne,Pe=ce,(Math.max(Pe.maxX,Ie.maxX)-Math.min(Pe.minX,Ie.minX))*(Math.max(Pe.maxY,Ie.maxY)-Math.min(Pe.minY,Ie.minY))-$);je<we?(we=je,Y=$<Y?$:Y,Z=ce):je===we&&$<Y&&(Y=$,Z=ce)}Ke=Z||Ke.children[0]}var Ie,Pe;return Ke},Se.prototype._insert=function(Ne,Ke,j){var X=j?Ne:this.toBBox(Ne),Y=[],we=this._chooseSubtree(X,this.data,Ke,Y);for(we.children.push(Ne),De(we,X);Ke>=0&&Y[Ke].children.length>this._maxEntries;)this._split(Y,Ke),Ke--;this._adjustParentBBoxes(X,Y,Ke)},Se.prototype._split=function(Ne,Ke){var j=Ne[Ke],X=j.children.length,Y=this._minEntries;this._chooseSplitAxis(j,Y,X);var we=this._chooseSplitIndex(j,Y,X),Z=yt(j.children.splice(we,j.children.length-we));Z.height=j.height,Z.leaf=j.leaf,He(j,this.toBBox),He(Z,this.toBBox),Ke?Ne[Ke-1].children.push(Z):this._splitRoot(j,Z)},Se.prototype._splitRoot=function(Ne,Ke){this.data=yt([Ne,Ke]),this.data.height=Ne.height+1,this.data.leaf=!1,He(this.data,this.toBBox)},Se.prototype._chooseSplitIndex=function(Ne,Ke,j){for(var X,Y,we,Z,re,ce,$,je=1/0,Ie=1/0,Pe=Ke;Pe<=j-Ke;Pe++){var se=Fe(Ne,0,Pe,this.toBBox),kt=Fe(Ne,Pe,j,this.toBBox),At=(Y=se,we=kt,void 0,void 0,void 0,void 0,Z=Math.max(Y.minX,we.minX),re=Math.max(Y.minY,we.minY),ce=Math.min(Y.maxX,we.maxX),$=Math.min(Y.maxY,we.maxY),Math.max(0,ce-Z)*Math.max(0,$-re)),xe=ft(se)+ft(kt);At<je?(je=At,X=Pe,Ie=xe<Ie?xe:Ie):At===je&&xe<Ie&&(Ie=xe,X=Pe)}return X||j-Ke},Se.prototype._chooseSplitAxis=function(Ne,Ke,j){var X=Ne.leaf?this.compareMinX:We,Y=Ne.leaf?this.compareMinY:ct;this._allDistMargin(Ne,Ke,j,X)<this._allDistMargin(Ne,Ke,j,Y)&&Ne.children.sort(X)},Se.prototype._allDistMargin=function(Ne,Ke,j,X){Ne.children.sort(X);for(var Y=this.toBBox,we=Fe(Ne,0,Ke,Y),Z=Fe(Ne,j-Ke,j,Y),re=Vt(we)+Vt(Z),ce=Ke;ce<j-Ke;ce++){var $=Ne.children[ce];De(we,Ne.leaf?Y($):$),re+=Vt(we)}for(var je=j-Ke-1;je>=Ke;je--){var Ie=Ne.children[je];De(Z,Ne.leaf?Y(Ie):Ie),re+=Vt(Z)}return re},Se.prototype._adjustParentBBoxes=function(Ne,Ke,j){for(var X=j;X>=0;X--)De(Ke[X],Ne)},Se.prototype._condense=function(Ne){for(var Ke=Ne.length-1,j=void 0;Ke>=0;Ke--)0===Ne[Ke].children.length?Ke>0?(j=Ne[Ke-1].children).splice(j.indexOf(Ne[Ke]),1):this.clear():He(Ne[Ke],this.toBBox)},Se}()},4468:(Nt,et,Me)=>{"use strict";var ue=Me(9582).functionsHaveConfigurableNames(),Se=Object,Oe=TypeError;Nt.exports=function(){if(null!=this&&this!==Se(this))throw new Oe("RegExp.prototype.flags getter called on non-object");var Fe="";return this.hasIndices&&(Fe+="d"),this.global&&(Fe+="g"),this.ignoreCase&&(Fe+="i"),this.multiline&&(Fe+="m"),this.dotAll&&(Fe+="s"),this.unicode&&(Fe+="u"),this.sticky&&(Fe+="y"),Fe},ue&&Object.defineProperty&&Object.defineProperty(Nt.exports,"name",{value:"get flags"})},9235:(Nt,et,Me)=>{"use strict";var ue=Me(2358),Se=Me(5685),Oe=Me(4468),He=Me(6343),Fe=Me(1956),De=Se(He());ue(De,{getPolyfill:He,implementation:Oe,shim:Fe}),Nt.exports=De},6343:(Nt,et,Me)=>{"use strict";var ue=Me(4468),Se=Me(2358).supportsDescriptors,Oe=Object.getOwnPropertyDescriptor;Nt.exports=function(){if(Se&&"gim"===/a/gim.flags){var Fe=Oe(RegExp.prototype,"flags");if(Fe&&"function"==typeof Fe.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var De="",We={};if(Object.defineProperty(We,"hasIndices",{get:function(){De+="d"}}),Object.defineProperty(We,"sticky",{get:function(){De+="y"}}),"dy"===De)return Fe.get}}return ue}},1956:(Nt,et,Me)=>{"use strict";var ue=Me(2358).supportsDescriptors,Se=Me(6343),Oe=Object.getOwnPropertyDescriptor,He=Object.defineProperty,Fe=TypeError,De=Object.getPrototypeOf,We=/a/;Nt.exports=function(){if(!ue||!De)throw new Fe("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var ft=Se(),Vt=De(We),Ct=Oe(Vt,"flags");return(!Ct||Ct.get!==ft)&&He(Vt,"flags",{configurable:!0,enumerable:!1,get:ft}),ft}},9231:Nt=>{"use strict";Nt.exports={eudist:function(Me,ue,Se){for(var Oe=Me.length,He=0,Fe=0;Fe<Oe;Fe++){var De=(Me[Fe]||0)-(ue[Fe]||0);He+=De*De}return Se?Math.sqrt(He):He},mandist:function(Me,ue,Se){for(var Oe=Me.length,He=0,Fe=0;Fe<Oe;Fe++)He+=Math.abs((Me[Fe]||0)-(ue[Fe]||0));return Se?Math.sqrt(He):He},dist:function(Me,ue,Se){var Oe=Math.abs(Me-ue);return Se?Oe:Oe*Oe}}},5561:(Nt,et,Me)=>{"use strict";var ue=Me(9231),Se=ue.eudist,Oe=ue.dist;Nt.exports={kmrand:function(Fe,De){for(var We={},ct=[],ft=De<<2,Vt=Fe.length,Ct=Fe[0].length>0;ct.length<De&&ft-- >0;){var st=Fe[Math.floor(Math.random()*Vt)],yt=Ct?st.join("_"):""+st;We[yt]||(We[yt]=!0,ct.push(st))}if(ct.length<De)throw new Error("Error initializating clusters");return ct},kmpp:function(Fe,De){var We=Fe[0].length?Se:Oe,ct=[],ft=Fe.length,Vt=Fe[0].length>0,st=Fe[Math.floor(Math.random()*ft)];for(Vt&&st.join("_"),ct.push(st);ct.length<De;){for(var qt=[],Ne=ct.length,Ke=0,j=[],X=0;X<ft;X++){for(var Y=1/0,we=0;we<Ne;we++){var Z=We(Fe[X],ct[we]);Z<=Y&&(Y=Z)}qt[X]=Y}for(var re=0;re<ft;re++)Ke+=qt[re];for(var ce=0;ce<ft;ce++)j[ce]={i:ce,v:Fe[ce],pr:qt[ce]/Ke,cs:0};j.sort(function(Pe,se){return Pe.pr-se.pr}),j[0].cs=j[0].pr;for(var $=1;$<ft;$++)j[$].cs=j[$-1].cs+j[$].pr;for(var je=Math.random(),Ie=0;Ie<ft-1&&j[Ie++].cs<je;);ct.push(j[Ie-1].v)}return ct}}},9475:(Nt,et,Me)=>{"use strict";var ue=Me(9231),Se=Me(5561),Oe=ue.eudist,De=Se.kmrand,We=Se.kmpp;function ft(Ct,st,yt){yt=yt||[];for(var qt=0;qt<Ct;qt++)yt[qt]=st;return yt}Nt.exports=function Vt(Ct,st,yt,qt){var Ne=[],Ke=[],j=[],X=[],Y=!1,we=qt||1e4,Z=Ct.length,re=Ct[0].length,ce=re>0,$=[];if(yt)Ne="kmrand"==yt?De(Ct,st):"kmpp"==yt?We(Ct,st):yt;else for(var je={};Ne.length<st;){var Ie=Math.floor(Math.random()*Z);je[Ie]||(je[Ie]=!0,Ne.push(Ct[Ie]))}do{ft(st,0,$);for(var Pe=0;Pe<Z;Pe++){for(var se=1/0,kt=0,At=0;At<st;At++)(X=ce?Oe(Ct[Pe],Ne[At]):Math.abs(Ct[Pe]-Ne[At]))<=se&&(se=X,kt=At);j[Pe]=kt,$[kt]++}for(var xe=[],Ce=(Ke=[],0);Ce<st;Ce++)xe[Ce]=ce?ft(re,0,xe[Ce]):0,Ke[Ce]=Ne[Ce];if(ce){for(var Qe=0;Qe<st;Qe++)Ne[Qe]=[];for(var it=0;it<Z;it++)for(var St=xe[j[it]],Je=Ct[it],en=0;en<re;en++)St[en]+=Je[en];Y=!0;for(var vt=0;vt<st;vt++){for(var Mn=Ne[vt],yn=xe[vt],ci=Ke[vt],$t=$[vt],$n=0;$n<re;$n++)Mn[$n]=yn[$n]/$t||0;if(Y)for(var rn=0;rn<re;rn++)if(ci[rn]!=Mn[rn]){Y=!1;break}}}else{for(var Ds=0;Ds<Z;Ds++)xe[j[Ds]]+=Ct[Ds];for(var $s=0;$s<st;$s++)Ne[$s]=xe[$s]/$[$s]||0;Y=!0;for(var di=0;di<st;di++)if(Ke[di]!=Ne[di]){Y=!1;break}}Y=Y||--we<=0}while(!Y);return{it:1e4-we,k:st,idxs:j,centroids:Ne}}},7253:(Nt,et,Me)=>{"use strict";Me.r(et),Me.d(et,{default:()=>ue});class ue{constructor(He=[],Fe=Se){if(this.data=He,this.length=this.data.length,this.compare=Fe,this.length>0)for(let De=(this.length>>1)-1;De>=0;De--)this._down(De)}push(He){this.data.push(He),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const He=this.data[0],Fe=this.data.pop();return this.length--,this.length>0&&(this.data[0]=Fe,this._down(0)),He}peek(){return this.data[0]}_up(He){const{data:Fe,compare:De}=this,We=Fe[He];for(;He>0;){const ct=He-1>>1,ft=Fe[ct];if(De(We,ft)>=0)break;Fe[He]=ft,He=ct}Fe[He]=We}_down(He){const{data:Fe,compare:De}=this,We=this.length>>1,ct=Fe[He];for(;He<We;){let ft=1+(He<<1),Vt=Fe[ft];const Ct=ft+1;if(Ct<this.length&&De(Fe[Ct],Vt)<0&&(ft=Ct,Vt=Fe[Ct]),De(Vt,ct)>=0)break;Fe[He]=Vt,He=ft}Fe[He]=ct}}function Se(Oe,He){return Oe<He?-1:Oe>He?1:0}},770:function(Nt,et){!function(Me){"use strict";function ue(){}function Se(h){this.message=h||""}function Oe(h){this.message=h||""}function He(h){this.message=h||""}function Fe(){}function De(h){return null===h?hc:h.color}function We(h){return null===h?null:h.parent}function ct(h,d){null!==h&&(h.color=d)}function ft(h){return null===h?null:h.left}function Vt(h){return null===h?null:h.right}function Ct(){this.root_=null,this.size_=0}function st(){}function yt(){this.array_=[],arguments[0]instanceof vs&&this.addAll(arguments[0])}function qt(){}function Ne(h){this.message=h||""}function Ke(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(h){if(null==this)throw new TypeError(this+" is not an object");var d=Object(this),m=Math.max(Math.min(d.length,9007199254740991),0)||0,v=1 in arguments&&parseInt(Number(arguments[1]),10)||0;v=v<0?Math.max(m+v,0):Math.min(v,m);var x=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:m;for(x=x<0?Math.max(m+arguments[2],0):Math.min(x,m);v<x;)d[v]=h,++v;return d},writable:!0}),Number.isFinite=Number.isFinite||function(h){return"number"==typeof h&&isFinite(h)},Number.isInteger=Number.isInteger||function(h){return"number"==typeof h&&isFinite(h)&&Math.floor(h)===h},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(h){return h!=h},Math.trunc=Math.trunc||function(h){return h<0?Math.ceil(h):Math.floor(h)};var j=function(){};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.prototype.equalsWithTolerance=function(h,d,m){return Math.abs(h-d)<=m};var X=function(h){function d(m){h.call(this,m),this.name="IllegalArgumentException",this.message=m,this.stack=(new h).stack}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(Error),Y=function(){},we={MAX_VALUE:{configurable:!0}};Y.isNaN=function(h){return Number.isNaN(h)},Y.doubleToLongBits=function(h){return h},Y.longBitsToDouble=function(h){return h},Y.isInfinite=function(h){return!Number.isFinite(h)},we.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Y,we);var Z=function(){},re=function(){},ce=function(){},$=function h(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=h.NULL_ORDINATE;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.z=d.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=h.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},je={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};$.prototype.setOrdinate=function(h,d){switch(h){case $.X:this.x=d;break;case $.Y:this.y=d;break;case $.Z:this.z=d;break;default:throw new X("Invalid ordinate index: "+h)}},$.prototype.equals2D=function(){if(1===arguments.length){var h=arguments[0];return this.x===h.x&&this.y===h.y}if(2===arguments.length){var d=arguments[0],m=arguments[1];return!!j.equalsWithTolerance(this.x,d.x,m)&&!!j.equalsWithTolerance(this.y,d.y,m)}},$.prototype.getOrdinate=function(h){switch(h){case $.X:return this.x;case $.Y:return this.y;case $.Z:return this.z}throw new X("Invalid ordinate index: "+h)},$.prototype.equals3D=function(h){return this.x===h.x&&this.y===h.y&&(this.z===h.z||Y.isNaN(this.z))&&Y.isNaN(h.z)},$.prototype.equals=function(h){return h instanceof $&&this.equals2D(h)},$.prototype.equalInZ=function(h,d){return j.equalsWithTolerance(this.z,h.z,d)},$.prototype.compareTo=function(h){return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0},$.prototype.clone=function(){},$.prototype.copy=function(){return new $(this)},$.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},$.prototype.distance3D=function(h){var d=this.x-h.x,m=this.y-h.y,v=this.z-h.z;return Math.sqrt(d*d+m*m+v*v)},$.prototype.distance=function(h){var d=this.x-h.x,m=this.y-h.y;return Math.sqrt(d*d+m*m)},$.prototype.hashCode=function(){var h=17;return 37*(h=37*h+$.hashCode(this.x))+$.hashCode(this.y)},$.prototype.setCoordinate=function(h){this.x=h.x,this.y=h.y,this.z=h.z},$.prototype.interfaces_=function(){return[Z,re,ue]},$.prototype.getClass=function(){return $},$.hashCode=function(){if(1===arguments.length){var d=Y.doubleToLongBits(arguments[0]);return Math.trunc((d^d)>>>32)}},je.DimensionalComparator.get=function(){return Ie},je.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},je.NULL_ORDINATE.get=function(){return Y.NaN},je.X.get=function(){return 0},je.Y.get=function(){return 1},je.Z.get=function(){return 2},Object.defineProperties($,je);var Ie=function(h){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var d=arguments[0];if(2!==d&&3!==d)throw new X("only 2 or 3 dimensions may be specified");this._dimensionsToTest=d}};Ie.prototype.compare=function(h,d){var m=h,v=d,x=Ie.compare(m.x,v.x);if(0!==x)return x;var B=Ie.compare(m.y,v.y);return 0!==B?B:this._dimensionsToTest<=2?0:Ie.compare(m.z,v.z)},Ie.prototype.interfaces_=function(){return[ce]},Ie.prototype.getClass=function(){return Ie},Ie.compare=function(h,d){return h<d?-1:h>d?1:Y.isNaN(h)?Y.isNaN(d)?0:-1:Y.isNaN(d)?1:0};var Pe=function(){};Pe.prototype.create=function(){},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe};var se=function(){},kt={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};se.prototype.interfaces_=function(){return[]},se.prototype.getClass=function(){return se},se.toLocationSymbol=function(h){switch(h){case se.EXTERIOR:return"e";case se.BOUNDARY:return"b";case se.INTERIOR:return"i";case se.NONE:return"-"}throw new X("Unknown location value: "+h)},kt.INTERIOR.get=function(){return 0},kt.BOUNDARY.get=function(){return 1},kt.EXTERIOR.get=function(){return 2},kt.NONE.get=function(){return-1},Object.defineProperties(se,kt);var At=function(h,d){return h.interfaces_&&h.interfaces_().indexOf(d)>-1},xe=function(){},qe={LOG_10:{configurable:!0}};xe.prototype.interfaces_=function(){return[]},xe.prototype.getClass=function(){return xe},xe.log10=function(h){var d=Math.log(h);return Y.isInfinite(d)||Y.isNaN(d)?d:d/xe.LOG_10},xe.min=function(h,d,m,v){var x=h;return d<x&&(x=d),m<x&&(x=m),v<x&&(x=v),x},xe.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1],m=arguments[2];return h<d?d:h>m?m:h}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var v=arguments[0],x=arguments[1],B=arguments[2];return v<x?x:v>B?B:v}},xe.wrap=function(h,d){return h<0?d- -h%d:h%d},xe.max=function(){if(3===arguments.length){var d=arguments[1],m=arguments[2],v=arguments[0];return d>v&&(v=d),m>v&&(v=m),v}if(4===arguments.length){var B=arguments[1],H=arguments[2],q=arguments[3],pe=arguments[0];return B>pe&&(pe=B),H>pe&&(pe=H),q>pe&&(pe=q),pe}},xe.average=function(h,d){return(h+d)/2},qe.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(xe,qe);var Ce=function(h){this.str=h};Ce.prototype.append=function(h){this.str+=h},Ce.prototype.setCharAt=function(h,d){this.str=this.str.substr(0,h)+d+this.str.substr(h+1)},Ce.prototype.toString=function(h){return this.str};var Qe=function(h){this.value=h};Qe.prototype.intValue=function(){return this.value},Qe.prototype.compareTo=function(h){return this.value<h?-1:this.value>h?1:0},Qe.isNaN=function(h){return Number.isNaN(h)};var it=function(){};it.isWhitespace=function(h){return h<=32&&h>=0||127===h},it.toUpperCase=function(h){return h.toUpperCase()};var _e=function h(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof h?this.init(arguments[0]):"string"==typeof arguments[0]&&h.call(this,h.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},St={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};_e.prototype.le=function(h){return(this._hi<h._hi||this._hi===h._hi)&&this._lo<=h._lo},_e.prototype.extractSignificantDigits=function(h,d){var m=this.abs(),v=_e.magnitude(m._hi),x=_e.TEN.pow(v);(m=m.divide(x)).gt(_e.TEN)?(m=m.divide(_e.TEN),v+=1):m.lt(_e.ONE)&&(m=m.multiply(_e.TEN),v-=1);for(var B=v+1,H=new Ce,q=_e.MAX_PRINT_DIGITS-1,pe=0;pe<=q;pe++){h&&pe===B&&H.append(".");var Ue=Math.trunc(m._hi);if(Ue<0)break;var gt=!1,pt=0;Ue>9?(gt=!0,pt="9"):pt="0"+Ue,H.append(pt),m=m.subtract(_e.valueOf(Ue)).multiply(_e.TEN),gt&&m.selfAdd(_e.TEN);var ln=!0,bn=_e.magnitude(m._hi);if(bn<0&&Math.abs(bn)>=q-pe&&(ln=!1),!ln)break}return d[0]=v,H.toString()},_e.prototype.sqr=function(){return this.multiply(this)},_e.prototype.doubleValue=function(){return this._hi+this._lo},_e.prototype.subtract=function(){return arguments[0]instanceof _e?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},_e.prototype.equals=function(){if(1===arguments.length){var h=arguments[0];return this._hi===h._hi&&this._lo===h._lo}},_e.prototype.isZero=function(){return 0===this._hi&&0===this._lo},_e.prototype.selfSubtract=function(){if(arguments[0]instanceof _e){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h._hi,-h._lo)}if("number"==typeof arguments[0]){var d=arguments[0];return this.isNaN()?this:this.selfAdd(-d,0)}},_e.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},_e.prototype.min=function(h){return this.le(h)?this:h},_e.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof _e){var h=arguments[0];return this.selfDivide(h._hi,h._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],x=null,B=null,H=null,q=null,pe=null,Ue=null,gt=null,pt=null;return this._hi=pt=(pe=this._hi/m)+(Ue=(this._hi-(gt=pe*m)-(pt=(x=(Ue=_e.SPLIT*pe)-(x=Ue-pe))*(H=(pt=_e.SPLIT*m)-(H=pt-m))-gt+x*(q=m-H)+(B=pe-x)*H+B*q)+this._lo-pe*arguments[1])/m),this._lo=pe-pt+Ue,this}},_e.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},_e.prototype.divide=function(){if(arguments[0]instanceof _e){var h=arguments[0],d=null,m=null,v=null,x=null,B=null,H=null,q=null,pe=null;return m=(B=this._hi/h._hi)-(d=(H=_e.SPLIT*B)-(d=H-B)),pe=d*(v=(pe=_e.SPLIT*h._hi)-(v=pe-h._hi))-(q=B*h._hi)+d*(x=h._hi-v)+m*v+m*x,new _e(pe=B+(H=(this._hi-q-pe+this._lo-B*h._lo)/h._hi),B-pe+H)}if("number"==typeof arguments[0]){var Ue=arguments[0];return Y.isNaN(Ue)?_e.createNaN():_e.copy(this).selfDivide(Ue,0)}},_e.prototype.ge=function(h){return(this._hi>h._hi||this._hi===h._hi)&&this._lo>=h._lo},_e.prototype.pow=function(h){if(0===h)return _e.valueOf(1);var d=new _e(this),m=_e.valueOf(1),v=Math.abs(h);if(v>1)for(;v>0;)v%2==1&&m.selfMultiply(d),(v/=2)>0&&(d=d.sqr());else m=d;return h<0?m.reciprocal():m},_e.prototype.ceil=function(){if(this.isNaN())return _e.NaN;var h=Math.ceil(this._hi),d=0;return h===this._hi&&(d=Math.ceil(this._lo)),new _e(h,d)},_e.prototype.compareTo=function(h){return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0},_e.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},_e.prototype.setValue=function(){return arguments[0]instanceof _e||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},_e.prototype.max=function(h){return this.ge(h)?this:h},_e.prototype.sqrt=function(){if(this.isZero())return _e.valueOf(0);if(this.isNegative())return _e.NaN;var h=1/Math.sqrt(this._hi),m=_e.valueOf(this._hi*h),v=this.subtract(m.sqr())._hi*(.5*h);return m.add(v)},_e.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof _e){var h=arguments[0];return this.selfAdd(h._hi,h._lo)}if("number"==typeof arguments[0]){var d=arguments[0],m=null,v=null,x=null,H=null,q=null;return this._hi=(m=(x=this._hi+d)+(q=d-(H=x-this._hi)+(this._hi-(x-H))+this._lo))+(v=q+(x-m)),this._lo=v+(m-this._hi),this}}else if(2===arguments.length){var pe=arguments[0],Ue=arguments[1],gt=null,pt=null,ln=null,bn=null,Rn=null,Zn=null,Pr=null;Rn=(bn=this._hi+pe)-(Zn=bn-this._hi),ln=(pt=this._lo+Ue)-(Pr=pt-this._lo);var So=(gt=bn+(Zn=(Rn=pe-Zn+(this._hi-Rn))+pt))+(Zn=(ln=Ue-Pr+(this._lo-ln))+(Zn+(bn-gt))),o1=Zn+(gt-So);return this._hi=So,this._lo=o1,this}},_e.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof _e){var h=arguments[0];return this.selfMultiply(h._hi,h._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],x=null,B=null,H=null,q=null,pe=null,Ue=null;x=(pe=_e.SPLIT*this._hi)-this._hi,x=pe-x;var gt=(pe=this._hi*m)+(Ue=x*(H=(Ue=_e.SPLIT*m)-(H=Ue-m))-pe+x*(q=m-H)+(B=this._hi-x)*H+B*q+(this._hi*arguments[1]+this._lo*m)),pt=Ue+(x=pe-gt);return this._hi=gt,this._lo=pt,this}},_e.prototype.selfSqr=function(){return this.selfMultiply(this)},_e.prototype.floor=function(){if(this.isNaN())return _e.NaN;var h=Math.floor(this._hi),d=0;return h===this._hi&&(d=Math.floor(this._lo)),new _e(h,d)},_e.prototype.negate=function(){return this.isNaN()?this:new _e(-this._hi,-this._lo)},_e.prototype.clone=function(){},_e.prototype.multiply=function(){if(arguments[0]instanceof _e){var h=arguments[0];return h.isNaN()?_e.createNaN():_e.copy(this).selfMultiply(h)}if("number"==typeof arguments[0]){var d=arguments[0];return Y.isNaN(d)?_e.createNaN():_e.copy(this).selfMultiply(d,0)}},_e.prototype.isNaN=function(){return Y.isNaN(this._hi)},_e.prototype.intValue=function(){return Math.trunc(this._hi)},_e.prototype.toString=function(){var h=_e.magnitude(this._hi);return h>=-3&&h<=20?this.toStandardNotation():this.toSciNotation()},_e.prototype.toStandardNotation=function(){var h=this.getSpecialNumberString();if(null!==h)return h;var d=new Array(1).fill(null),m=this.extractSignificantDigits(!0,d),v=d[0]+1,x=m;return"."===m.charAt(0)?x="0"+m:v<0?x="0."+_e.stringOfChar("0",-v)+m:-1===m.indexOf(".")&&(x=m+_e.stringOfChar("0",v-m.length)+".0"),this.isNegative()?"-"+x:x},_e.prototype.reciprocal=function(){var d,v,x,H,h=null,m=null,B=null,q=null;d=(x=1/this._hi)-(h=(B=_e.SPLIT*x)-(h=B-x)),m=(q=_e.SPLIT*this._hi)-this._hi;var pe=x+(B=(1-(H=x*this._hi)-(q=h*(m=q-m)-H+h*(v=this._hi-m)+d*m+d*v)-x*this._lo)/this._hi);return new _e(pe,x-pe+B)},_e.prototype.toSciNotation=function(){if(this.isZero())return _e.SCI_NOT_ZERO;var h=this.getSpecialNumberString();if(null!==h)return h;var d=new Array(1).fill(null),m=this.extractSignificantDigits(!1,d),v=_e.SCI_NOT_EXPONENT_CHAR+d[0];if("0"===m.charAt(0))throw new Error("Found leading zero: "+m);var x="";m.length>1&&(x=m.substring(1));var B=m.charAt(0)+"."+x;return this.isNegative()?"-"+B+v:B+v},_e.prototype.abs=function(){return this.isNaN()?_e.NaN:this.isNegative()?this.negate():new _e(this)},_e.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},_e.prototype.lt=function(h){return(this._hi<h._hi||this._hi===h._hi)&&this._lo<h._lo},_e.prototype.add=function(){if(arguments[0]instanceof _e){var h=arguments[0];return _e.copy(this).selfAdd(h)}if("number"==typeof arguments[0]){var d=arguments[0];return _e.copy(this).selfAdd(d)}},_e.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof _e){var d=arguments[0];this._hi=d._hi,this._lo=d._lo}}else if(2===arguments.length){var v=arguments[1];this._hi=arguments[0],this._lo=v}},_e.prototype.gt=function(h){return(this._hi>h._hi||this._hi===h._hi)&&this._lo>h._lo},_e.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},_e.prototype.trunc=function(){return this.isNaN()?_e.NaN:this.isPositive()?this.floor():this.ceil()},_e.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},_e.prototype.interfaces_=function(){return[ue,Z,re]},_e.prototype.getClass=function(){return _e},_e.sqr=function(h){return _e.valueOf(h).selfMultiply(h)},_e.valueOf=function(){return"string"==typeof arguments[0]?_e.parse(arguments[0]):"number"==typeof arguments[0]?new _e(arguments[0]):void 0},_e.sqrt=function(h){return _e.valueOf(h).sqrt()},_e.parse=function(h){for(var d=0,m=h.length;it.isWhitespace(h.charAt(d));)d++;var v=!1;if(d<m){var x=h.charAt(d);"-"!==x&&"+"!==x||(d++,"-"===x&&(v=!0))}for(var B=new _e,H=0,q=0,pe=0;!(d>=m);){var Ue=h.charAt(d);if(d++,it.isDigit(Ue)){var gt=Ue-"0";B.selfMultiply(_e.TEN),B.selfAdd(gt),H++}else{if("."!==Ue){if("e"===Ue||"E"===Ue){var pt=h.substring(d);try{pe=Qe.parseInt(pt)}catch(Pr){throw Pr instanceof Error?new Error("Invalid exponent "+pt+" in string "+h):Pr}break}throw new Error("Unexpected character '"+Ue+"' at position "+d+" in string "+h)}q=H}}var ln=B,bn=H-q-pe;if(0===bn)ln=B;else if(bn>0){var Rn=_e.TEN.pow(bn);ln=B.divide(Rn)}else if(bn<0){var Zn=_e.TEN.pow(-bn);ln=B.multiply(Zn)}return v?ln.negate():ln},_e.createNaN=function(){return new _e(Y.NaN,Y.NaN)},_e.copy=function(h){return new _e(h)},_e.magnitude=function(h){var d=Math.abs(h),m=Math.log(d)/Math.log(10),v=Math.trunc(Math.floor(m));return 10*Math.pow(10,v)<=d&&(v+=1),v},_e.stringOfChar=function(h,d){for(var m=new Ce,v=0;v<d;v++)m.append(h);return m.toString()},St.PI.get=function(){return new _e(3.141592653589793,12246467991473532e-32)},St.TWO_PI.get=function(){return new _e(6.283185307179586,24492935982947064e-32)},St.PI_2.get=function(){return new _e(1.5707963267948966,6123233995736766e-32)},St.E.get=function(){return new _e(2.718281828459045,14456468917292502e-32)},St.NaN.get=function(){return new _e(Y.NaN,Y.NaN)},St.EPS.get=function(){return 123259516440783e-46},St.SPLIT.get=function(){return 134217729},St.MAX_PRINT_DIGITS.get=function(){return 32},St.TEN.get=function(){return _e.valueOf(10)},St.ONE.get=function(){return _e.valueOf(1)},St.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},St.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(_e,St);var Je=function(){},en={DP_SAFE_EPSILON:{configurable:!0}};Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.orientationIndex=function(h,d,m){var v=Je.orientationIndexFilter(h,d,m);if(v<=1)return v;var x=_e.valueOf(d.x).selfAdd(-h.x),B=_e.valueOf(d.y).selfAdd(-h.y),H=_e.valueOf(m.x).selfAdd(-d.x),q=_e.valueOf(m.y).selfAdd(-d.y);return x.selfMultiply(q).selfSubtract(B.selfMultiply(H)).signum()},Je.signOfDet2x2=function(h,d,m,v){return h.multiply(v).selfSubtract(d.multiply(m)).signum()},Je.intersection=function(h,d,m,v){var x=_e.valueOf(v.y).selfSubtract(m.y).selfMultiply(_e.valueOf(d.x).selfSubtract(h.x)),B=_e.valueOf(v.x).selfSubtract(m.x).selfMultiply(_e.valueOf(d.y).selfSubtract(h.y)),H=x.subtract(B),q=_e.valueOf(v.x).selfSubtract(m.x).selfMultiply(_e.valueOf(h.y).selfSubtract(m.y)),pe=_e.valueOf(v.y).selfSubtract(m.y).selfMultiply(_e.valueOf(h.x).selfSubtract(m.x)),Ue=q.subtract(pe).selfDivide(H).doubleValue(),gt=_e.valueOf(h.x).selfAdd(_e.valueOf(d.x).selfSubtract(h.x).selfMultiply(Ue)).doubleValue(),pt=_e.valueOf(d.x).selfSubtract(h.x).selfMultiply(_e.valueOf(h.y).selfSubtract(m.y)),ln=_e.valueOf(d.y).selfSubtract(h.y).selfMultiply(_e.valueOf(h.x).selfSubtract(m.x)),bn=pt.subtract(ln).selfDivide(H).doubleValue(),Rn=_e.valueOf(m.y).selfAdd(_e.valueOf(v.y).selfSubtract(m.y).selfMultiply(bn)).doubleValue();return new $(gt,Rn)},Je.orientationIndexFilter=function(h,d,m){var v=null,x=(h.x-m.x)*(d.y-m.y),B=(h.y-m.y)*(d.x-m.x),H=x-B;if(x>0){if(B<=0)return Je.signum(H);v=x+B}else{if(!(x<0)||B>=0)return Je.signum(H);v=-x-B}var q=Je.DP_SAFE_EPSILON*v;return H>=q||-H>=q?Je.signum(H):2},Je.signum=function(h){return h>0?1:h<0?-1:0},en.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Je,en);var vt=function(){},Mn={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Mn.X.get=function(){return 0},Mn.Y.get=function(){return 1},Mn.Z.get=function(){return 2},Mn.M.get=function(){return 3},vt.prototype.setOrdinate=function(h,d,m){},vt.prototype.size=function(){},vt.prototype.getOrdinate=function(h,d){},vt.prototype.getCoordinate=function(){},vt.prototype.getCoordinateCopy=function(h){},vt.prototype.getDimension=function(){},vt.prototype.getX=function(h){},vt.prototype.clone=function(){},vt.prototype.expandEnvelope=function(h){},vt.prototype.copy=function(){},vt.prototype.getY=function(h){},vt.prototype.toCoordinateArray=function(){},vt.prototype.interfaces_=function(){return[re]},vt.prototype.getClass=function(){return vt},Object.defineProperties(vt,Mn);var yn=function(){},ci=function(h){function d(){h.call(this,"Projective point not representable on the Cartesian plane.")}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(yn),$t=function(){};$t.arraycopy=function(h,d,m,v,x){for(var B=0,H=d;H<d+x;H++)m[v+B]=h[H],B++},$t.getProperty=function(h){return{"line.separator":"\n"}[h]};var $n=function h(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var v=arguments[1];this.x=arguments[0],this.y=v,this.w=1}else if(arguments[0]instanceof h&&arguments[1]instanceof h){var x=arguments[0],B=arguments[1];this.x=x.y*B.w-B.y*x.w,this.y=B.x*x.w-x.x*B.w,this.w=x.x*B.y-B.x*x.y}else if(arguments[0]instanceof $&&arguments[1]instanceof $){var H=arguments[0],q=arguments[1];this.x=H.y-q.y,this.y=q.x-H.x,this.w=H.x*q.y-q.x*H.y}}else if(3===arguments.length){var Ue=arguments[1],gt=arguments[2];this.x=arguments[0],this.y=Ue,this.w=gt}else if(4===arguments.length){var pt=arguments[0],ln=arguments[1],bn=arguments[2],Rn=arguments[3],Zn=pt.y-ln.y,Pr=ln.x-pt.x,So=pt.x*ln.y-ln.x*pt.y,o1=bn.y-Rn.y,ml=Rn.x-bn.x,Al=bn.x*Rn.y-Rn.x*bn.y;this.x=Pr*Al-ml*So,this.y=o1*So-Zn*Al,this.w=Zn*ml-o1*Pr}};$n.prototype.getY=function(){var h=this.y/this.w;if(Y.isNaN(h)||Y.isInfinite(h))throw new ci;return h},$n.prototype.getX=function(){var h=this.x/this.w;if(Y.isNaN(h)||Y.isInfinite(h))throw new ci;return h},$n.prototype.getCoordinate=function(){var h=new $;return h.x=this.getX(),h.y=this.getY(),h},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.intersection=function(h,d,m,v){var x=h.y-d.y,B=d.x-h.x,H=h.x*d.y-d.x*h.y,q=m.y-v.y,pe=v.x-m.x,Ue=m.x*v.y-v.x*m.y,gt=x*pe-q*B,pt=(B*Ue-pe*H)/gt,ln=(q*H-x*Ue)/gt;if(Y.isNaN(pt)||Y.isInfinite(pt)||Y.isNaN(ln)||Y.isInfinite(ln))throw new ci;return new $(pt,ln)};var rn=function h(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof $){var d=arguments[0];this.init(d.x,d.x,d.y,d.y)}else arguments[0]instanceof h&&this.init(arguments[0]);else if(2===arguments.length){var v=arguments[0],x=arguments[1];this.init(v.x,x.x,v.y,x.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},Ds={serialVersionUID:{configurable:!0}};rn.prototype.getArea=function(){return this.getWidth()*this.getHeight()},rn.prototype.equals=function(h){if(!(h instanceof rn))return!1;var d=h;return this.isNull()?d.isNull():this._maxx===d.getMaxX()&&this._maxy===d.getMaxY()&&this._minx===d.getMinX()&&this._miny===d.getMinY()},rn.prototype.intersection=function(h){return this.isNull()||h.isNull()||!this.intersects(h)?new rn:new rn(this._minx>h._minx?this._minx:h._minx,this._maxx<h._maxx?this._maxx:h._maxx,this._miny>h._miny?this._miny:h._miny,this._maxy<h._maxy?this._maxy:h._maxy)},rn.prototype.isNull=function(){return this._maxx<this._minx},rn.prototype.getMaxX=function(){return this._maxx},rn.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];return this.covers(h.x,h.y)}if(arguments[0]instanceof rn){var d=arguments[0];return!this.isNull()&&!d.isNull()&&d.getMinX()>=this._minx&&d.getMaxX()<=this._maxx&&d.getMinY()>=this._miny&&d.getMaxY()<=this._maxy}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return!this.isNull()&&m>=this._minx&&m<=this._maxx&&v>=this._miny&&v<=this._maxy}},rn.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof rn){var h=arguments[0];return!this.isNull()&&!h.isNull()&&!(h._minx>this._maxx||h._maxx<this._minx||h._miny>this._maxy||h._maxy<this._miny)}if(arguments[0]instanceof $){var d=arguments[0];return this.intersects(d.x,d.y)}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return!this.isNull()&&!(m>this._maxx||m<this._minx||v>this._maxy||v<this._miny)}},rn.prototype.getMinY=function(){return this._miny},rn.prototype.getMinX=function(){return this._minx},rn.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];this.expandToInclude(h.x,h.y)}else if(arguments[0]instanceof rn){var d=arguments[0];if(d.isNull())return null;this.isNull()?(this._minx=d.getMinX(),this._maxx=d.getMaxX(),this._miny=d.getMinY(),this._maxy=d.getMaxY()):(d._minx<this._minx&&(this._minx=d._minx),d._maxx>this._maxx&&(this._maxx=d._maxx),d._miny<this._miny&&(this._miny=d._miny),d._maxy>this._maxy&&(this._maxy=d._maxy))}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this.isNull()?(this._minx=m,this._maxx=m,this._miny=v,this._maxy=v):(m<this._minx&&(this._minx=m),m>this._maxx&&(this._maxx=m),v<this._miny&&(this._miny=v),v>this._maxy&&(this._maxy=v))}},rn.prototype.minExtent=function(){if(this.isNull())return 0;var h=this.getWidth(),d=this.getHeight();return h<d?h:d},rn.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},rn.prototype.compareTo=function(h){var d=h;return this.isNull()?d.isNull()?0:-1:d.isNull()?1:this._minx<d._minx?-1:this._minx>d._minx?1:this._miny<d._miny?-1:this._miny>d._miny?1:this._maxx<d._maxx?-1:this._maxx>d._maxx?1:this._maxy<d._maxy?-1:this._maxy>d._maxy?1:0},rn.prototype.translate=function(h,d){if(this.isNull())return null;this.init(this.getMinX()+h,this.getMaxX()+h,this.getMinY()+d,this.getMaxY()+d)},rn.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},rn.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},rn.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},rn.prototype.maxExtent=function(){if(this.isNull())return 0;var h=this.getWidth(),d=this.getHeight();return h>d?h:d},rn.prototype.expandBy=function(){if(1===arguments.length){var h=arguments[0];this.expandBy(h,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this.isNull())return null;this._minx-=d,this._maxx+=d,this._miny-=m,this._maxy+=m,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},rn.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof rn)return this.covers(arguments[0]);if(arguments[0]instanceof $)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},rn.prototype.centre=function(){return this.isNull()?null:new $((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},rn.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];this.init(h.x,h.x,h.y,h.y)}else if(arguments[0]instanceof rn){var d=arguments[0];this._minx=d._minx,this._maxx=d._maxx,this._miny=d._miny,this._maxy=d._maxy}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this.init(m.x,v.x,m.y,v.y)}else if(4===arguments.length){var x=arguments[0],B=arguments[1],H=arguments[2],q=arguments[3];x<B?(this._minx=x,this._maxx=B):(this._minx=B,this._maxx=x),H<q?(this._miny=H,this._maxy=q):(this._miny=q,this._maxy=H)}},rn.prototype.getMaxY=function(){return this._maxy},rn.prototype.distance=function(h){if(this.intersects(h))return 0;var d=0;this._maxx<h._minx?d=h._minx-this._maxx:this._minx>h._maxx&&(d=this._minx-h._maxx);var m=0;return this._maxy<h._miny?m=h._miny-this._maxy:this._miny>h._maxy&&(m=this._miny-h._maxy),0===d?m:0===m?d:Math.sqrt(d*d+m*m)},rn.prototype.hashCode=function(){var h=17;return 37*(h=37*(h=37*(h=37*h+$.hashCode(this._minx))+$.hashCode(this._maxx))+$.hashCode(this._miny))+$.hashCode(this._maxy)},rn.prototype.interfaces_=function(){return[Z,ue]},rn.prototype.getClass=function(){return rn},rn.intersects=function(){if(3===arguments.length){var h=arguments[0],d=arguments[1],m=arguments[2];return m.x>=(h.x<d.x?h.x:d.x)&&m.x<=(h.x>d.x?h.x:d.x)&&m.y>=(h.y<d.y?h.y:d.y)&&m.y<=(h.y>d.y?h.y:d.y)}if(4===arguments.length){var v=arguments[0],x=arguments[1],B=arguments[2],H=arguments[3],q=Math.min(B.x,H.x),pe=Math.max(B.x,H.x),Ue=Math.min(v.x,x.x),gt=Math.max(v.x,x.x);return!(Ue>pe||gt<q||(q=Math.min(B.y,H.y),pe=Math.max(B.y,H.y),Ue=Math.min(v.y,x.y),gt=Math.max(v.y,x.y),Ue>pe||gt<q))}},Ds.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(rn,Ds);var As={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},$s=function(h){this.geometryFactory=h||new $i};$s.prototype.read=function(h){var d,m;h=h.replace(/[\n\r]/g," ");var x=As.typeStr.exec(h);if(-1!==h.search("EMPTY")&&((x=As.emptyTypeStr.exec(h))[2]=void 0),x&&(m=x[1].toLowerCase(),mi[m]&&(d=mi[m].apply(this,[x[2]]))),void 0===d)throw new Error("Could not parse WKT "+h);return d},$s.prototype.write=function(h){return this.extractGeometry(h)},$s.prototype.extractGeometry=function(h){var d=h.getGeometryType().toLowerCase();if(!di[d])return null;var m=d.toUpperCase();return h.isEmpty()?m+" EMPTY":m+"("+di[d].apply(this,[h])+")"};var di={coordinate:function(h){return h.x+" "+h.y},point:function(h){return di.coordinate.call(this,h._coordinates._coordinates[0])},multipoint:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push("("+di.point.apply(this,[h._geometries[m]])+")");return d.join(",")},linestring:function(h){for(var d=[],m=0,v=h._points._coordinates.length;m<v;++m)d.push(di.coordinate.apply(this,[h._points._coordinates[m]]));return d.join(",")},linearring:function(h){for(var d=[],m=0,v=h._points._coordinates.length;m<v;++m)d.push(di.coordinate.apply(this,[h._points._coordinates[m]]));return d.join(",")},multilinestring:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push("("+di.linestring.apply(this,[h._geometries[m]])+")");return d.join(",")},polygon:function(h){var d=[];d.push("("+di.linestring.apply(this,[h._shell])+")");for(var m=0,v=h._holes.length;m<v;++m)d.push("("+di.linestring.apply(this,[h._holes[m]])+")");return d.join(",")},multipolygon:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push("("+di.polygon.apply(this,[h._geometries[m]])+")");return d.join(",")},geometrycollection:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push(this.extractGeometry(h._geometries[m]));return d.join(",")}},mi={point:function(h){if(void 0===h)return this.geometryFactory.createPoint();var d=h.trim().split(As.spaces);return this.geometryFactory.createPoint(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])))},multipoint:function(h){if(void 0===h)return this.geometryFactory.createMultiPoint();for(var d,m=h.trim().split(","),v=[],x=0,B=m.length;x<B;++x)d=m[x].replace(As.trimParens,"$1"),v.push(mi.point.apply(this,[d]));return this.geometryFactory.createMultiPoint(v)},linestring:function(h){if(void 0===h)return this.geometryFactory.createLineString();for(var d,m=h.trim().split(","),v=[],x=0,B=m.length;x<B;++x)d=m[x].trim().split(As.spaces),v.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLineString(v)},linearring:function(h){if(void 0===h)return this.geometryFactory.createLinearRing();for(var d,m=h.trim().split(","),v=[],x=0,B=m.length;x<B;++x)d=m[x].trim().split(As.spaces),v.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLinearRing(v)},multilinestring:function(h){if(void 0===h)return this.geometryFactory.createMultiLineString();for(var d,m=h.trim().split(As.parenComma),v=[],x=0,B=m.length;x<B;++x)d=m[x].replace(As.trimParens,"$1"),v.push(mi.linestring.apply(this,[d]));return this.geometryFactory.createMultiLineString(v)},polygon:function(h){if(void 0===h)return this.geometryFactory.createPolygon();for(var d,m,v,x,B=h.trim().split(As.parenComma),H=[],q=0,pe=B.length;q<pe;++q)d=B[q].replace(As.trimParens,"$1"),m=mi.linestring.apply(this,[d]),v=this.geometryFactory.createLinearRing(m._points),0===q?x=v:H.push(v);return this.geometryFactory.createPolygon(x,H)},multipolygon:function(h){if(void 0===h)return this.geometryFactory.createMultiPolygon();for(var d,m=h.trim().split(As.doubleParenComma),v=[],x=0,B=m.length;x<B;++x)d=m[x].replace(As.trimParens,"$1"),v.push(mi.polygon.apply(this,[d]));return this.geometryFactory.createMultiPolygon(v)},geometrycollection:function(h){if(void 0===h)return this.geometryFactory.createGeometryCollection();for(var d=(h=h.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),m=[],v=0,x=d.length;v<x;++v)m.push(this.read(d[v]));return this.geometryFactory.createGeometryCollection(m)}},nt=function(h){this.parser=new $s(h)};nt.prototype.write=function(h){return this.parser.write(h)},nt.toLineString=function(h,d){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+h.x+" "+h.y+", "+d.x+" "+d.y+" )"};var le=function(h){function d(m){h.call(this,m),this.name="RuntimeException",this.message=m,this.stack=(new h).stack}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(Error),ee=function(h){function d(){h.call(this),0===arguments.length?h.call(this):1===arguments.length&&h.call(this,arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(le),J=function(){};J.prototype.interfaces_=function(){return[]},J.prototype.getClass=function(){return J},J.shouldNeverReachHere=function(){if(0===arguments.length)J.shouldNeverReachHere(null);else if(1===arguments.length){var h=arguments[0];throw new ee("Should never reach here"+(null!==h?": "+h:""))}},J.isTrue=function(){var d;if(1===arguments.length)J.isTrue(arguments[0],null);else if(2===arguments.length&&(d=arguments[1],!arguments[0]))throw null===d?new ee:new ee(d)},J.equals=function(){var h,d,m;if(2===arguments.length)J.equals(h=arguments[0],d=arguments[1],null);else if(3===arguments.length&&(m=arguments[2],!(d=arguments[1]).equals(h=arguments[0])))throw new ee("Expected "+h+" but encountered "+d+(null!==m?": "+m:""))};var Ee=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new $,this._intPt[1]=new $,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},$e={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Ee.prototype.getIndexAlongSegment=function(h,d){return this.computeIntLineIndex(),this._intLineIndex[h][d]},Ee.prototype.getTopologySummary=function(){var h=new Ce;return this.isEndPoint()&&h.append(" endpoint"),this._isProper&&h.append(" proper"),this.isCollinear()&&h.append(" collinear"),h.toString()},Ee.prototype.computeIntersection=function(h,d,m,v){this._inputLines[0][0]=h,this._inputLines[0][1]=d,this._inputLines[1][0]=m,this._inputLines[1][1]=v,this._result=this.computeIntersect(h,d,m,v)},Ee.prototype.getIntersectionNum=function(){return this._result},Ee.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var h=arguments[0];this.getEdgeDistance(h,0)>this.getEdgeDistance(h,1)?(this._intLineIndex[h][0]=0,this._intLineIndex[h][1]=1):(this._intLineIndex[h][0]=1,this._intLineIndex[h][1]=0)}},Ee.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Ee.prototype.setPrecisionModel=function(h){this._precisionModel=h},Ee.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var h=arguments[0],d=0;d<this._result;d++)if(!this._intPt[d].equals2D(this._inputLines[h][0])&&!this._intPt[d].equals2D(this._inputLines[h][1]))return!0;return!1}},Ee.prototype.getIntersection=function(h){return this._intPt[h]},Ee.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Ee.prototype.hasIntersection=function(){return this._result!==Ee.NO_INTERSECTION},Ee.prototype.getEdgeDistance=function(h,d){return Ee.computeEdgeDistance(this._intPt[d],this._inputLines[h][0],this._inputLines[h][1])},Ee.prototype.isCollinear=function(){return this._result===Ee.COLLINEAR_INTERSECTION},Ee.prototype.toString=function(){return nt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+nt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Ee.prototype.getEndpoint=function(h,d){return this._inputLines[h][d]},Ee.prototype.isIntersection=function(h){for(var d=0;d<this._result;d++)if(this._intPt[d].equals2D(h))return!0;return!1},Ee.prototype.getIntersectionAlongSegment=function(h,d){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[h][d]]},Ee.prototype.interfaces_=function(){return[]},Ee.prototype.getClass=function(){return Ee},Ee.computeEdgeDistance=function(h,d,m){var v=Math.abs(m.x-d.x),x=Math.abs(m.y-d.y),B=-1;if(h.equals(d))B=0;else if(h.equals(m))B=v>x?v:x;else{var H=Math.abs(h.x-d.x),q=Math.abs(h.y-d.y);0!==(B=v>x?H:q)||h.equals(d)||(B=Math.max(H,q))}return J.isTrue(!(0===B&&!h.equals(d)),"Bad distance calculation"),B},Ee.nonRobustComputeEdgeDistance=function(h,d,m){var v=h.x-d.x,x=h.y-d.y,B=Math.sqrt(v*v+x*x);return J.isTrue(!(0===B&&!h.equals(d)),"Invalid distance calculation"),B},$e.DONT_INTERSECT.get=function(){return 0},$e.DO_INTERSECT.get=function(){return 1},$e.COLLINEAR.get=function(){return 2},$e.NO_INTERSECTION.get=function(){return 0},$e.POINT_INTERSECTION.get=function(){return 1},$e.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Ee,$e);var mt=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isInSegmentEnvelopes=function(m){var v=new rn(this._inputLines[0][0],this._inputLines[0][1]),x=new rn(this._inputLines[1][0],this._inputLines[1][1]);return v.contains(m)&&x.contains(m)},d.prototype.computeIntersection=function(){if(3!==arguments.length)return h.prototype.computeIntersection.apply(this,arguments);var m=arguments[0],v=arguments[1],x=arguments[2];if(this._isProper=!1,rn.intersects(v,x,m)&&0===Mt.orientationIndex(v,x,m)&&0===Mt.orientationIndex(x,v,m))return this._isProper=!0,(m.equals(v)||m.equals(x))&&(this._isProper=!1),this._result=h.POINT_INTERSECTION,null;this._result=h.NO_INTERSECTION},d.prototype.normalizeToMinimum=function(m,v,x,B,H){H.x=this.smallestInAbsValue(m.x,v.x,x.x,B.x),H.y=this.smallestInAbsValue(m.y,v.y,x.y,B.y),m.x-=H.x,m.y-=H.y,v.x-=H.x,v.y-=H.y,x.x-=H.x,x.y-=H.y,B.x-=H.x,B.y-=H.y},d.prototype.safeHCoordinateIntersection=function(m,v,x,B){var H=null;try{H=$n.intersection(m,v,x,B)}catch(q){if(!(q instanceof ci))throw q;H=d.nearestEndpoint(m,v,x,B)}return H},d.prototype.intersection=function(m,v,x,B){var H=this.intersectionWithNormalization(m,v,x,B);return this.isInSegmentEnvelopes(H)||(H=new $(d.nearestEndpoint(m,v,x,B))),null!==this._precisionModel&&this._precisionModel.makePrecise(H),H},d.prototype.smallestInAbsValue=function(m,v,x,B){var H=m,q=Math.abs(H);return Math.abs(v)<q&&(H=v,q=Math.abs(v)),Math.abs(x)<q&&(H=x,q=Math.abs(x)),Math.abs(B)<q&&(H=B),H},d.prototype.checkDD=function(m,v,x,B,H){var q=Je.intersection(m,v,x,B),pe=this.isInSegmentEnvelopes(q);$t.out.println("DD in env = "+pe+"  --------------------- "+q),H.distance(q)>1e-4&&$t.out.println("Distance = "+H.distance(q))},d.prototype.intersectionWithNormalization=function(m,v,x,B){var H=new $(m),q=new $(v),pe=new $(x),Ue=new $(B),gt=new $;this.normalizeToEnvCentre(H,q,pe,Ue,gt);var pt=this.safeHCoordinateIntersection(H,q,pe,Ue);return pt.x+=gt.x,pt.y+=gt.y,pt},d.prototype.computeCollinearIntersection=function(m,v,x,B){var H=rn.intersects(m,v,x),q=rn.intersects(m,v,B),pe=rn.intersects(x,B,m),Ue=rn.intersects(x,B,v);return H&&q?(this._intPt[0]=x,this._intPt[1]=B,h.COLLINEAR_INTERSECTION):pe&&Ue?(this._intPt[0]=m,this._intPt[1]=v,h.COLLINEAR_INTERSECTION):H&&pe?(this._intPt[0]=x,this._intPt[1]=m,!x.equals(m)||q||Ue?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):H&&Ue?(this._intPt[0]=x,this._intPt[1]=v,!x.equals(v)||q||pe?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):q&&pe?(this._intPt[0]=B,this._intPt[1]=m,!B.equals(m)||H||Ue?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):q&&Ue?(this._intPt[0]=B,this._intPt[1]=v,!B.equals(v)||H||pe?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):h.NO_INTERSECTION},d.prototype.normalizeToEnvCentre=function(m,v,x,B,H){var q=m.x<v.x?m.x:v.x,pe=m.y<v.y?m.y:v.y,Ue=m.x>v.x?m.x:v.x,gt=m.y>v.y?m.y:v.y,pt=x.x<B.x?x.x:B.x,ln=x.y<B.y?x.y:B.y,bn=x.x>B.x?x.x:B.x,Rn=x.y>B.y?x.y:B.y,Pr=((pe>ln?pe:ln)+(gt<Rn?gt:Rn))/2;H.x=((q>pt?q:pt)+(Ue<bn?Ue:bn))/2,H.y=Pr,m.x-=H.x,m.y-=H.y,v.x-=H.x,v.y-=H.y,x.x-=H.x,x.y-=H.y,B.x-=H.x,B.y-=H.y},d.prototype.computeIntersect=function(m,v,x,B){if(this._isProper=!1,!rn.intersects(m,v,x,B))return h.NO_INTERSECTION;var H=Mt.orientationIndex(m,v,x),q=Mt.orientationIndex(m,v,B);if(H>0&&q>0||H<0&&q<0)return h.NO_INTERSECTION;var pe=Mt.orientationIndex(x,B,m),Ue=Mt.orientationIndex(x,B,v);return pe>0&&Ue>0||pe<0&&Ue<0?h.NO_INTERSECTION:0===H&&0===q&&0===pe&&0===Ue?this.computeCollinearIntersection(m,v,x,B):(0===H||0===q||0===pe||0===Ue?(this._isProper=!1,m.equals2D(x)||m.equals2D(B)?this._intPt[0]=m:v.equals2D(x)||v.equals2D(B)?this._intPt[0]=v:0===H?this._intPt[0]=new $(x):0===q?this._intPt[0]=new $(B):0===pe?this._intPt[0]=new $(m):0===Ue&&(this._intPt[0]=new $(v))):(this._isProper=!0,this._intPt[0]=this.intersection(m,v,x,B)),h.POINT_INTERSECTION)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.nearestEndpoint=function(m,v,x,B){var H=m,q=Mt.distancePointLine(m,x,B),pe=Mt.distancePointLine(v,x,B);return pe<q&&(q=pe,H=v),(pe=Mt.distancePointLine(x,m,v))<q&&(q=pe,H=x),(pe=Mt.distancePointLine(B,m,v))<q&&(q=pe,H=B),H},d}(Ee),Ut=function(){};Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut},Ut.orientationIndex=function(h,d,m){return Ut.signOfDet2x2(d.x-h.x,d.y-h.y,m.x-d.x,m.y-d.y)},Ut.signOfDet2x2=function(h,d,m,v){var x=null,B=null,H=null;if(x=1,0===h||0===v)return 0===d||0===m?0:d>0?m>0?-x:x:m>0?x:-x;if(0===d||0===m)return v>0?h>0?x:-x:h>0?-x:x;if(d>0?v>0?d<=v||(x=-x,B=h,h=m,m=B,B=d,d=v,v=B):d<=-v?(x=-x,m=-m,v=-v):(B=h,h=-m,m=B,B=d,d=-v,v=B):v>0?-d<=v?(x=-x,h=-h,d=-d):(B=-h,h=m,m=B,B=-d,d=v,v=B):d>=v?(h=-h,d=-d,m=-m,v=-v):(x=-x,B=-h,h=-m,m=B,B=-d,d=-v,v=B),h>0){if(!(m>0&&h<=m))return x}else{if(m>0||!(h>=m))return-x;x=-x,h=-h,m=-m}for(;;){if((v-=(H=Math.floor(m/h))*d)<0)return-x;if(v>d)return x;if(h>(m-=H*h)+m){if(d<v+v)return x}else{if(d>v+v)return-x;m=h-m,v=d-v,x=-x}if(0===v)return 0===m?0:-x;if(0===m||(h-=(H=Math.floor(h/m))*m,(d-=H*v)<0))return x;if(d>v)return-x;if(m>h+h){if(v<d+d)return-x}else{if(v>d+d)return x;h=m-h,d=v-d,x=-x}if(0===d)return 0===h?0:x;if(0===h)return-x}};var Kt=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Kt.prototype.countSegment=function(h,d){if(h.x<this._p.x&&d.x<this._p.x)return null;if(this._p.x===d.x&&this._p.y===d.y)return this._isPointOnSegment=!0,null;if(h.y===this._p.y&&d.y===this._p.y){var m=h.x,v=d.x;return m>v&&(m=d.x,v=h.x),this._p.x>=m&&this._p.x<=v&&(this._isPointOnSegment=!0),null}if(h.y>this._p.y&&d.y<=this._p.y||d.y>this._p.y&&h.y<=this._p.y){var B=h.y-this._p.y,q=d.y-this._p.y,pe=Ut.signOfDet2x2(h.x-this._p.x,B,d.x-this._p.x,q);if(0===pe)return this._isPointOnSegment=!0,null;q<B&&(pe=-pe),pe>0&&this._crossingCount++}},Kt.prototype.isPointInPolygon=function(){return this.getLocation()!==se.EXTERIOR},Kt.prototype.getLocation=function(){return this._isPointOnSegment?se.BOUNDARY:this._crossingCount%2==1?se.INTERIOR:se.EXTERIOR},Kt.prototype.isOnSegment=function(){return this._isPointOnSegment},Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt},Kt.locatePointInRing=function(){if(arguments[0]instanceof $&&At(arguments[1],vt)){for(var d=arguments[1],m=new Kt(arguments[0]),v=new $,x=new $,B=1;B<d.size();B++)if(d.getCoordinate(B,v),d.getCoordinate(B-1,x),m.countSegment(v,x),m.isOnSegment())return m.getLocation();return m.getLocation()}if(arguments[0]instanceof $&&arguments[1]instanceof Array){for(var q=arguments[1],pe=new Kt(arguments[0]),Ue=1;Ue<q.length;Ue++)if(pe.countSegment(q[Ue],q[Ue-1]),pe.isOnSegment())return pe.getLocation();return pe.getLocation()}};var Mt=function(){},xi={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt},Mt.orientationIndex=function(h,d,m){return Je.orientationIndex(h,d,m)},Mt.signedArea=function(){if(arguments[0]instanceof Array){var h=arguments[0];if(h.length<3)return 0;for(var d=0,m=h[0].x,v=1;v<h.length-1;v++)d+=(h[v].x-m)*(h[v-1].y-h[v+1].y);return d/2}if(At(arguments[0],vt)){var H=arguments[0],q=H.size();if(q<3)return 0;var pe=new $,Ue=new $,gt=new $;H.getCoordinate(0,Ue),H.getCoordinate(1,gt);var pt=Ue.x;gt.x-=pt;for(var ln=0,bn=1;bn<q-1;bn++)pe.y=Ue.y,Ue.x=gt.x,Ue.y=gt.y,H.getCoordinate(bn+1,gt),gt.x-=pt,ln+=Ue.x*(pe.y-gt.y);return ln/2}},Mt.distanceLineLine=function(h,d,m,v){if(h.equals(d))return Mt.distancePointLine(h,m,v);if(m.equals(v))return Mt.distancePointLine(v,h,d);var x=!1;if(rn.intersects(h,d,m,v)){var B=(d.x-h.x)*(v.y-m.y)-(d.y-h.y)*(v.x-m.x);if(0===B)x=!0;else{var q=((h.y-m.y)*(d.x-h.x)-(h.x-m.x)*(d.y-h.y))/B,pe=((h.y-m.y)*(v.x-m.x)-(h.x-m.x)*(v.y-m.y))/B;(pe<0||pe>1||q<0||q>1)&&(x=!0)}}else x=!0;return x?xe.min(Mt.distancePointLine(h,m,v),Mt.distancePointLine(d,m,v),Mt.distancePointLine(m,h,d),Mt.distancePointLine(v,h,d)):0},Mt.isPointInRing=function(h,d){return Mt.locatePointInRing(h,d)!==se.EXTERIOR},Mt.computeLength=function(h){var d=h.size();if(d<=1)return 0;var m=0,v=new $;h.getCoordinate(0,v);for(var x=v.x,B=v.y,H=1;H<d;H++){h.getCoordinate(H,v);var q=v.x,pe=v.y,Ue=q-x,gt=pe-B;m+=Math.sqrt(Ue*Ue+gt*gt),x=q,B=pe}return m},Mt.isCCW=function(h){var d=h.length-1;if(d<3)throw new X("Ring has fewer than 4 points, so orientation cannot be determined");for(var m=h[0],v=0,x=1;x<=d;x++){var B=h[x];B.y>m.y&&(m=B,v=x)}var H=v;do{(H-=1)<0&&(H=d)}while(h[H].equals2D(m)&&H!==v);var q=v;do{q=(q+1)%d}while(h[q].equals2D(m)&&q!==v);var pe=h[H],Ue=h[q];if(pe.equals2D(m)||Ue.equals2D(m)||pe.equals2D(Ue))return!1;var gt=Mt.computeOrientation(pe,m,Ue);return 0===gt?pe.x>Ue.x:gt>0},Mt.locatePointInRing=function(h,d){return Kt.locatePointInRing(h,d)},Mt.distancePointLinePerpendicular=function(h,d,m){var v=(m.x-d.x)*(m.x-d.x)+(m.y-d.y)*(m.y-d.y);return Math.abs(((d.y-h.y)*(m.x-d.x)-(d.x-h.x)*(m.y-d.y))/v)*Math.sqrt(v)},Mt.computeOrientation=function(h,d,m){return Mt.orientationIndex(h,d,m)},Mt.distancePointLine=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];if(0===d.length)throw new X("Line array must contain at least one vertex");for(var m=h.distance(d[0]),v=0;v<d.length-1;v++){var x=Mt.distancePointLine(h,d[v],d[v+1]);x<m&&(m=x)}return m}if(3===arguments.length){var B=arguments[0],H=arguments[1],q=arguments[2];if(H.x===q.x&&H.y===q.y)return B.distance(H);var pe=(q.x-H.x)*(q.x-H.x)+(q.y-H.y)*(q.y-H.y),Ue=((B.x-H.x)*(q.x-H.x)+(B.y-H.y)*(q.y-H.y))/pe;return Ue<=0?B.distance(H):Ue>=1?B.distance(q):Math.abs(((H.y-B.y)*(q.x-H.x)-(H.x-B.x)*(q.y-H.y))/pe)*Math.sqrt(pe)}},Mt.isOnLine=function(h,d){for(var m=new mt,v=1;v<d.length;v++)if(m.computeIntersection(h,d[v-1],d[v]),m.hasIntersection())return!0;return!1},xi.CLOCKWISE.get=function(){return-1},xi.RIGHT.get=function(){return Mt.CLOCKWISE},xi.COUNTERCLOCKWISE.get=function(){return 1},xi.LEFT.get=function(){return Mt.COUNTERCLOCKWISE},xi.COLLINEAR.get=function(){return 0},xi.STRAIGHT.get=function(){return Mt.COLLINEAR},Object.defineProperties(Mt,xi);var Fi=function(){};Fi.prototype.filter=function(h){},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi};var _n=function(){var h=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=h,this._SRID=h.getSRID()},Ii={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};_n.prototype.isGeometryCollection=function(){return this.getSortIndex()===_n.SORTINDEX_GEOMETRYCOLLECTION},_n.prototype.getFactory=function(){return this._factory},_n.prototype.getGeometryN=function(h){return this},_n.prototype.getArea=function(){return 0},_n.prototype.isRectangle=function(){return!1},_n.prototype.equals=function(){if(arguments[0]instanceof _n){var h=arguments[0];return null!==h&&this.equalsTopo(h)}if(arguments[0]instanceof Object){var d=arguments[0];return d instanceof _n&&this.equalsExact(d)}},_n.prototype.equalsExact=function(h){return this===h||this.equalsExact(h,0)},_n.prototype.geometryChanged=function(){this.apply(_n.geometryChangedFilter)},_n.prototype.geometryChangedAction=function(){this._envelope=null},_n.prototype.equalsNorm=function(h){return null!==h&&this.norm().equalsExact(h.norm())},_n.prototype.getLength=function(){return 0},_n.prototype.getNumGeometries=function(){return 1},_n.prototype.compareTo=function(){if(1===arguments.length){var h=arguments[0],d=h;return this.getSortIndex()!==d.getSortIndex()?this.getSortIndex()-d.getSortIndex():this.isEmpty()&&d.isEmpty()?0:this.isEmpty()?-1:d.isEmpty()?1:this.compareToSameClass(h)}if(2===arguments.length){var m=arguments[0],v=arguments[1];return this.getSortIndex()!==m.getSortIndex()?this.getSortIndex()-m.getSortIndex():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(m,v)}},_n.prototype.getUserData=function(){return this._userData},_n.prototype.getSRID=function(){return this._SRID},_n.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},_n.prototype.checkNotGeometryCollection=function(h){if(h.getSortIndex()===_n.SORTINDEX_GEOMETRYCOLLECTION)throw new X("This method does not support GeometryCollection arguments")},_n.prototype.equal=function(h,d,m){return 0===m?h.equals(d):h.distance(d)<=m},_n.prototype.norm=function(){var h=this.copy();return h.normalize(),h},_n.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},_n.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new rn(this._envelope)},_n.prototype.setSRID=function(h){this._SRID=h},_n.prototype.setUserData=function(h){this._userData=h},_n.prototype.compare=function(h,d){for(var m=h.iterator(),v=d.iterator();m.hasNext()&&v.hasNext();){var x=m.next(),B=v.next(),H=x.compareTo(B);if(0!==H)return H}return m.hasNext()?1:v.hasNext()?-1:0},_n.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},_n.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===_n.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===_n.SORTINDEX_MULTIPOINT||this.getSortIndex()===_n.SORTINDEX_MULTILINESTRING||this.getSortIndex()===_n.SORTINDEX_MULTIPOLYGON},_n.prototype.interfaces_=function(){return[re,Z,ue]},_n.prototype.getClass=function(){return _n},_n.hasNonEmptyElements=function(h){for(var d=0;d<h.length;d++)if(!h[d].isEmpty())return!0;return!1},_n.hasNullElements=function(h){for(var d=0;d<h.length;d++)if(null===h[d])return!0;return!1},Ii.serialVersionUID.get=function(){return 0x799ea46522854c00},Ii.SORTINDEX_POINT.get=function(){return 0},Ii.SORTINDEX_MULTIPOINT.get=function(){return 1},Ii.SORTINDEX_LINESTRING.get=function(){return 2},Ii.SORTINDEX_LINEARRING.get=function(){return 3},Ii.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ii.SORTINDEX_POLYGON.get=function(){return 5},Ii.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ii.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ii.geometryChangedFilter.get=function(){return _r},Object.defineProperties(_n,Ii);var _r=function(){};_r.interfaces_=function(){return[Fi]},_r.filter=function(h){h.geometryChangedAction()};var lr=function(){};lr.prototype.filter=function(h){},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var yr=function(){},Os={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};yr.prototype.isInBoundary=function(h){},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},Os.Mod2BoundaryNodeRule.get=function(){return va},Os.EndPointBoundaryNodeRule.get=function(){return Fo},Os.MultiValentEndPointBoundaryNodeRule.get=function(){return xo},Os.MonoValentEndPointBoundaryNodeRule.get=function(){return _a},Os.MOD2_BOUNDARY_RULE.get=function(){return new va},Os.ENDPOINT_BOUNDARY_RULE.get=function(){return new Fo},Os.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new xo},Os.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _a},Os.OGC_SFS_BOUNDARY_RULE.get=function(){return yr.MOD2_BOUNDARY_RULE},Object.defineProperties(yr,Os);var va=function(){};va.prototype.isInBoundary=function(h){return h%2==1},va.prototype.interfaces_=function(){return[yr]},va.prototype.getClass=function(){return va};var Fo=function(){};Fo.prototype.isInBoundary=function(h){return h>0},Fo.prototype.interfaces_=function(){return[yr]},Fo.prototype.getClass=function(){return Fo};var xo=function(){};xo.prototype.isInBoundary=function(h){return h>1},xo.prototype.interfaces_=function(){return[yr]},xo.prototype.getClass=function(){return xo};var _a=function(){};_a.prototype.isInBoundary=function(h){return 1===h},_a.prototype.interfaces_=function(){return[yr]},_a.prototype.getClass=function(){return _a};var vs=function(){};vs.prototype.add=function(){},vs.prototype.addAll=function(){},vs.prototype.isEmpty=function(){},vs.prototype.iterator=function(){},vs.prototype.size=function(){},vs.prototype.toArray=function(){},vs.prototype.remove=function(){},(Se.prototype=new Error).name="IndexOutOfBoundsException";var W1=function(){};W1.prototype.hasNext=function(){},W1.prototype.next=function(){},W1.prototype.remove=function(){};var ko=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.get=function(){},d.prototype.set=function(){},d.prototype.isEmpty=function(){},d}(vs);(Oe.prototype=new Error).name="NoSuchElementException";var tn=function(h){function d(){h.call(this),this.array_=[],arguments[0]instanceof vs&&this.addAll(arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.ensureCapacity=function(){},d.prototype.interfaces_=function(){return[h,vs]},d.prototype.add=function(m){return 1===arguments.length?this.array_.push(m):this.array_.splice(arguments[0],arguments[1]),!0},d.prototype.clear=function(){this.array_=[]},d.prototype.addAll=function(m){for(var v=m.iterator();v.hasNext();)this.add(v.next());return!0},d.prototype.set=function(m,v){var x=this.array_[m];return this.array_[m]=v,x},d.prototype.iterator=function(){return new Ic(this)},d.prototype.get=function(m){if(m<0||m>=this.size())throw new Se;return this.array_[m]},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.size=function(){return this.array_.length},d.prototype.toArray=function(){for(var m=[],v=0,x=this.array_.length;v<x;v++)m.push(this.array_[v]);return m},d.prototype.remove=function(m){for(var v=!1,x=0,B=this.array_.length;x<B;x++)if(this.array_[x]===m){this.array_.splice(x,1),v=!0;break}return v},d}(ko),Ic=function(h){function d(m){h.call(this),this.arrayList_=m,this.position_=0}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Oe;return this.arrayList_.get(this.position_++)},d.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},d.prototype.set=function(m){return this.arrayList_.set(this.position_-1,m)},d.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},d}(W1),l2=function(h){function d(){if(h.call(this),0!==arguments.length)if(1===arguments.length){var v=arguments[0];this.ensureCapacity(v.length),this.add(v,!0)}else if(2===arguments.length){var x=arguments[0],B=arguments[1];this.ensureCapacity(x.length),this.add(x,B)}}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={coordArrayType:{configurable:!0}};return m.coordArrayType.get=function(){return new Array(0).fill(null)},d.prototype.getCoordinate=function(v){return this.get(v)},d.prototype.addAll=function(){if(2===arguments.length){for(var x=arguments[1],B=!1,H=arguments[0].iterator();H.hasNext();)this.add(H.next(),x),B=!0;return B}return h.prototype.addAll.apply(this,arguments)},d.prototype.clone=function(){for(var v=h.prototype.clone.call(this),x=0;x<this.size();x++)v.add(x,this.get(x).copy());return v},d.prototype.toCoordinateArray=function(){return this.toArray(d.coordArrayType)},d.prototype.add=function(){if(1===arguments.length)h.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof $&&"boolean"==typeof arguments[1]){var H=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(H))return null;h.prototype.add.call(this,H)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var Ue=arguments[0],gt=arguments[1];if(arguments[2])for(var pt=0;pt<Ue.length;pt++)this.add(Ue[pt],gt);else for(var ln=Ue.length-1;ln>=0;ln--)this.add(Ue[ln],gt);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof $){var bn=arguments[0],Rn=arguments[1];if(!arguments[2]){var Zn=this.size();if(Zn>0&&(bn>0&&this.get(bn-1).equals2D(Rn)||bn<Zn&&this.get(bn).equals2D(Rn)))return null}h.prototype.add.call(this,bn,Rn)}}else if(4===arguments.length){var Pr=arguments[0],So=arguments[1],o1=arguments[2],ml=arguments[3],Al=1;o1>ml&&(Al=-1);for(var ah=o1;ah!==ml;ah+=Al)this.add(Pr[ah],So);return!0}},d.prototype.closeRing=function(){this.size()>0&&this.add(new $(this.get(0)),!1)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},Object.defineProperties(d,m),d}(tn),Bi=function(){},W2={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};W2.ForwardComparator.get=function(){return lo},W2.BidirectionalComparator.get=function(){return ol},W2.coordArrayType.get=function(){return new Array(0).fill(null)},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Bi.isRing=function(h){return!(h.length<4||!h[0].equals2D(h[h.length-1]))},Bi.ptNotInList=function(h,d){for(var m=0;m<h.length;m++){var v=h[m];if(Bi.indexOf(v,d)<0)return v}return null},Bi.scroll=function(h,d){var m=Bi.indexOf(d,h);if(m<0)return null;var v=new Array(h.length).fill(null);$t.arraycopy(h,m,v,0,h.length-m),$t.arraycopy(h,0,v,h.length-m,m),$t.arraycopy(v,0,h,0,h.length)},Bi.equals=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];if(h===d)return!0;if(null===h||null===d||h.length!==d.length)return!1;for(var m=0;m<h.length;m++)if(!h[m].equals(d[m]))return!1;return!0}if(3===arguments.length){var v=arguments[0],x=arguments[1],B=arguments[2];if(v===x)return!0;if(null===v||null===x||v.length!==x.length)return!1;for(var H=0;H<v.length;H++)if(0!==B.compare(v[H],x[H]))return!1;return!0}},Bi.intersection=function(h,d){for(var m=new l2,v=0;v<h.length;v++)d.intersects(h[v])&&m.add(h[v],!0);return m.toCoordinateArray()},Bi.hasRepeatedPoints=function(h){for(var d=1;d<h.length;d++)if(h[d-1].equals(h[d]))return!0;return!1},Bi.removeRepeatedPoints=function(h){return Bi.hasRepeatedPoints(h)?new l2(h,!1).toCoordinateArray():h},Bi.reverse=function(h){for(var d=h.length-1,m=Math.trunc(d/2),v=0;v<=m;v++){var x=h[v];h[v]=h[d-v],h[d-v]=x}},Bi.removeNull=function(h){for(var d=0,m=0;m<h.length;m++)null!==h[m]&&d++;var v=new Array(d).fill(null);if(0===d)return v;for(var x=0,B=0;B<h.length;B++)null!==h[B]&&(v[x++]=h[B]);return v},Bi.copyDeep=function(){if(1===arguments.length){for(var h=arguments[0],d=new Array(h.length).fill(null),m=0;m<h.length;m++)d[m]=new $(h[m]);return d}if(5===arguments.length)for(var v=arguments[0],x=arguments[1],B=arguments[2],H=arguments[3],q=arguments[4],pe=0;pe<q;pe++)B[H+pe]=new $(v[x+pe])},Bi.isEqualReversed=function(h,d){for(var m=0;m<h.length;m++)if(0!==h[m].compareTo(d[h.length-m-1]))return!1;return!0},Bi.envelope=function(h){for(var d=new rn,m=0;m<h.length;m++)d.expandToInclude(h[m]);return d},Bi.toCoordinateArray=function(h){return h.toArray(Bi.coordArrayType)},Bi.atLeastNCoordinatesOrNothing=function(h,d){return d.length>=h?d:[]},Bi.indexOf=function(h,d){for(var m=0;m<d.length;m++)if(h.equals(d[m]))return m;return-1},Bi.increasingDirection=function(h){for(var d=0;d<Math.trunc(h.length/2);d++){var v=h[d].compareTo(h[h.length-1-d]);if(0!==v)return v}return 1},Bi.compare=function(h,d){for(var m=0;m<h.length&&m<d.length;){var v=h[m].compareTo(d[m]);if(0!==v)return v;m++}return m<d.length?-1:m<h.length?1:0},Bi.minCoordinate=function(h){for(var d=null,m=0;m<h.length;m++)(null===d||d.compareTo(h[m])>0)&&(d=h[m]);return d},Bi.extract=function(h,d,m){d=xe.clamp(d,0,h.length);var v=(m=xe.clamp(m,-1,h.length))-d+1;m<0&&(v=0),d>=h.length&&(v=0),m<d&&(v=0);var x=new Array(v).fill(null);if(0===v)return x;for(var B=0,H=d;H<=m;H++)x[B++]=h[H];return x},Object.defineProperties(Bi,W2);var lo=function(){};lo.prototype.compare=function(h,d){return Bi.compare(h,d)},lo.prototype.interfaces_=function(){return[ce]},lo.prototype.getClass=function(){return lo};var ol=function(){};ol.prototype.compare=function(h,d){var m=h,v=d;if(m.length<v.length)return-1;if(m.length>v.length)return 1;if(0===m.length)return 0;var x=Bi.compare(m,v);return Bi.isEqualReversed(m,v)?0:x},ol.prototype.OLDcompare=function(h,d){var m=h,v=d;if(m.length<v.length)return-1;if(m.length>v.length)return 1;if(0===m.length)return 0;for(var x=Bi.increasingDirection(m),B=Bi.increasingDirection(v),H=x>0?0:m.length-1,q=B>0?0:m.length-1,pe=0;pe<m.length;pe++){var Ue=m[H].compareTo(v[q]);if(0!==Ue)return Ue;H+=x,q+=B}return 0},ol.prototype.interfaces_=function(){return[ce]},ol.prototype.getClass=function(){return ol};var X4=function(){};X4.prototype.get=function(){},X4.prototype.put=function(){},X4.prototype.size=function(){},X4.prototype.values=function(){},X4.prototype.entrySet=function(){};var Bm=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(X4);(He.prototype=new Error).name="OperationNotSupported",(Fe.prototype=new vs).contains=function(){};var Df=function(h){function d(){h.call(this),this.array_=[],arguments[0]instanceof vs&&this.addAll(arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.contains=function(m){for(var v=0,x=this.array_.length;v<x;v++)if(this.array_[v]===m)return!0;return!1},d.prototype.add=function(m){return!this.contains(m)&&(this.array_.push(m),!0)},d.prototype.addAll=function(m){for(var v=m.iterator();v.hasNext();)this.add(v.next());return!0},d.prototype.remove=function(m){throw new Error},d.prototype.size=function(){return this.array_.length},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.toArray=function(){for(var m=[],v=0,x=this.array_.length;v<x;v++)m.push(this.array_[v]);return m},d.prototype.iterator=function(){return new Tr(this)},d}(Fe),Tr=function(h){function d(m){h.call(this),this.hashSet_=m,this.position_=0}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Oe;return this.hashSet_.array_[this.position_++]},d.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},d.prototype.remove=function(){throw new He},d}(W1),hc=0;(Ct.prototype=new Bm).get=function(h){for(var d=this.root_;null!==d;){var m=h.compareTo(d.key);if(m<0)d=d.left;else{if(!(m>0))return d.value;d=d.right}}return null},Ct.prototype.put=function(h,d){if(null===this.root_)return this.root_={key:h,value:d,left:null,right:null,parent:null,color:hc,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var m,v,x=this.root_;do{if(m=x,(v=h.compareTo(x.key))<0)x=x.left;else{if(!(v>0)){var B=x.value;return x.value=d,B}x=x.right}}while(null!==x);var H={key:h,left:null,right:null,value:d,parent:m,color:hc,getValue:function(){return this.value},getKey:function(){return this.key}};return v<0?m.left=H:m.right=H,this.fixAfterInsertion(H),this.size_++,null},Ct.prototype.fixAfterInsertion=function(h){for(h.color=1;null!=h&&h!==this.root_&&1===h.parent.color;)if(We(h)===ft(We(We(h)))){var d=Vt(We(We(h)));1===De(d)?(ct(We(h),hc),ct(d,hc),ct(We(We(h)),1),h=We(We(h))):(h===Vt(We(h))&&(h=We(h),this.rotateLeft(h)),ct(We(h),hc),ct(We(We(h)),1),this.rotateRight(We(We(h))))}else{var m=ft(We(We(h)));1===De(m)?(ct(We(h),hc),ct(m,hc),ct(We(We(h)),1),h=We(We(h))):(h===ft(We(h))&&(h=We(h),this.rotateRight(h)),ct(We(h),hc),ct(We(We(h)),1),this.rotateLeft(We(We(h))))}this.root_.color=hc},Ct.prototype.values=function(){var h=new tn,d=this.getFirstEntry();if(null!==d)for(h.add(d.value);null!==(d=Ct.successor(d));)h.add(d.value);return h},Ct.prototype.entrySet=function(){var h=new Df,d=this.getFirstEntry();if(null!==d)for(h.add(d);null!==(d=Ct.successor(d));)h.add(d);return h},Ct.prototype.rotateLeft=function(h){if(null!=h){var d=h.right;h.right=d.left,null!=d.left&&(d.left.parent=h),d.parent=h.parent,null===h.parent?this.root_=d:h.parent.left===h?h.parent.left=d:h.parent.right=d,d.left=h,h.parent=d}},Ct.prototype.rotateRight=function(h){if(null!=h){var d=h.left;h.left=d.right,null!=d.right&&(d.right.parent=h),d.parent=h.parent,null===h.parent?this.root_=d:h.parent.right===h?h.parent.right=d:h.parent.left=d,d.right=h,h.parent=d}},Ct.prototype.getFirstEntry=function(){var h=this.root_;if(null!=h)for(;null!=h.left;)h=h.left;return h},Ct.successor=function(h){if(null===h)return null;if(null!==h.right){for(var d=h.right;null!==d.left;)d=d.left;return d}for(var m=h.parent,v=h;null!==m&&v===m.right;)v=m,m=m.parent;return m},Ct.prototype.size=function(){return this.size_};var Y4=function(){};Y4.prototype.interfaces_=function(){return[]},Y4.prototype.getClass=function(){return Y4},st.prototype=new Fe,(yt.prototype=new st).contains=function(h){for(var d=0,m=this.array_.length;d<m;d++)if(0===this.array_[d].compareTo(h))return!0;return!1},yt.prototype.add=function(h){if(this.contains(h))return!1;for(var d=0,m=this.array_.length;d<m;d++)if(1===this.array_[d].compareTo(h))return this.array_.splice(d,0,h),!0;return this.array_.push(h),!0},yt.prototype.addAll=function(h){for(var d=h.iterator();d.hasNext();)this.add(d.next());return!0},yt.prototype.remove=function(h){throw new He},yt.prototype.size=function(){return this.array_.length},yt.prototype.isEmpty=function(){return 0===this.array_.length},yt.prototype.toArray=function(){for(var h=[],d=0,m=this.array_.length;d<m;d++)h.push(this.array_[d]);return h},yt.prototype.iterator=function(){return new Da(this)};var Da=function(h){this.treeSet_=h,this.position_=0};Da.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Oe;return this.treeSet_.array_[this.position_++]},Da.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Da.prototype.remove=function(){throw new He};var jl=function(){};jl.sort=function(){var h,d,m,x=arguments[0];if(1===arguments.length)x.sort(function(H,q){return H.compareTo(q)});else if(2===arguments.length)m=arguments[1],x.sort(function(H,q){return m.compare(H,q)});else if(3===arguments.length){(d=x.slice(arguments[1],arguments[2])).sort();var B=x.slice(0,arguments[1]).concat(d,x.slice(arguments[2],x.length));for(x.splice(0,x.length),h=0;h<B.length;h++)x.push(B[h])}else if(4===arguments.length)for(d=x.slice(arguments[1],arguments[2]),m=arguments[3],d.sort(function(H,q){return m.compare(H,q)}),B=x.slice(0,arguments[1]).concat(d,x.slice(arguments[2],x.length)),x.splice(0,x.length),h=0;h<B.length;h++)x.push(B[h])},jl.asList=function(h){for(var d=new tn,m=0,v=h.length;m<v;m++)d.add(h[m]);return d};var Mi=function(){},Za={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Za.P.get=function(){return 0},Za.L.get=function(){return 1},Za.A.get=function(){return 2},Za.FALSE.get=function(){return-1},Za.TRUE.get=function(){return-2},Za.DONTCARE.get=function(){return-3},Za.SYM_FALSE.get=function(){return"F"},Za.SYM_TRUE.get=function(){return"T"},Za.SYM_DONTCARE.get=function(){return"*"},Za.SYM_P.get=function(){return"0"},Za.SYM_L.get=function(){return"1"},Za.SYM_A.get=function(){return"2"},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.toDimensionSymbol=function(h){switch(h){case Mi.FALSE:return Mi.SYM_FALSE;case Mi.TRUE:return Mi.SYM_TRUE;case Mi.DONTCARE:return Mi.SYM_DONTCARE;case Mi.P:return Mi.SYM_P;case Mi.L:return Mi.SYM_L;case Mi.A:return Mi.SYM_A}throw new X("Unknown dimension value: "+h)},Mi.toDimensionValue=function(h){switch(it.toUpperCase(h)){case Mi.SYM_FALSE:return Mi.FALSE;case Mi.SYM_TRUE:return Mi.TRUE;case Mi.SYM_DONTCARE:return Mi.DONTCARE;case Mi.SYM_P:return Mi.P;case Mi.SYM_L:return Mi.L;case Mi.SYM_A:return Mi.A}throw new X("Unknown dimension symbol: "+h)},Object.defineProperties(Mi,Za);var Ia=function(){};Ia.prototype.filter=function(h){},Ia.prototype.interfaces_=function(){return[]},Ia.prototype.getClass=function(){return Ia};var fc=function(){};fc.prototype.filter=function(h,d){},fc.prototype.isDone=function(){},fc.prototype.isGeometryChanged=function(){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var m1=function(h){function d(v,x){if(h.call(this,x),this._geometries=v||[],h.hasNullElements(this._geometries))throw new X("geometries must not contain null elements")}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){for(var v=new rn,x=0;x<this._geometries.length;x++)v.expandToInclude(this._geometries[x].getEnvelopeInternal());return v},d.prototype.getGeometryN=function(v){return this._geometries[v]},d.prototype.getSortIndex=function(){return h.SORTINDEX_GEOMETRYCOLLECTION},d.prototype.getCoordinates=function(){for(var v=new Array(this.getNumPoints()).fill(null),x=-1,B=0;B<this._geometries.length;B++)for(var H=this._geometries[B].getCoordinates(),q=0;q<H.length;q++)v[++x]=H[q];return v},d.prototype.getArea=function(){for(var v=0,x=0;x<this._geometries.length;x++)v+=this._geometries[x].getArea();return v},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],x=arguments[1];if(!this.isEquivalentClass(v))return!1;var B=v;if(this._geometries.length!==B._geometries.length)return!1;for(var H=0;H<this._geometries.length;H++)if(!this._geometries[H].equalsExact(B._geometries[H],x))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var v=0;v<this._geometries.length;v++)this._geometries[v].normalize();jl.sort(this._geometries)},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},d.prototype.getBoundaryDimension=function(){for(var v=Mi.FALSE,x=0;x<this._geometries.length;x++)v=Math.max(v,this._geometries[x].getBoundaryDimension());return v},d.prototype.getDimension=function(){for(var v=Mi.FALSE,x=0;x<this._geometries.length;x++)v=Math.max(v,this._geometries[x].getDimension());return v},d.prototype.getLength=function(){for(var v=0,x=0;x<this._geometries.length;x++)v+=this._geometries[x].getLength();return v},d.prototype.getNumPoints=function(){for(var v=0,x=0;x<this._geometries.length;x++)v+=this._geometries[x].getNumPoints();return v},d.prototype.getNumGeometries=function(){return this._geometries.length},d.prototype.reverse=function(){for(var x=new Array(this._geometries.length).fill(null),B=0;B<this._geometries.length;B++)x[B]=this._geometries[B].reverse();return this.getFactory().createGeometryCollection(x)},d.prototype.compareToSameClass=function(){if(1===arguments.length){var v=arguments[0],x=new yt(jl.asList(this._geometries)),B=new yt(jl.asList(v._geometries));return this.compare(x,B)}if(2===arguments.length){for(var q=arguments[1],pe=arguments[0],Ue=this.getNumGeometries(),gt=pe.getNumGeometries(),pt=0;pt<Ue&&pt<gt;){var ln=this.getGeometryN(pt),bn=pe.getGeometryN(pt),Rn=ln.compareToSameClass(bn,q);if(0!==Rn)return Rn;pt++}return pt<Ue?1:pt<gt?-1:0}},d.prototype.apply=function(){if(At(arguments[0],lr))for(var v=arguments[0],x=0;x<this._geometries.length;x++)this._geometries[x].apply(v);else if(At(arguments[0],fc)){var B=arguments[0];if(0===this._geometries.length)return null;for(var H=0;H<this._geometries.length&&(this._geometries[H].apply(B),!B.isDone());H++);B.isGeometryChanged()&&this.geometryChanged()}else if(At(arguments[0],Ia)){var q=arguments[0];q.filter(this);for(var pe=0;pe<this._geometries.length;pe++)this._geometries[pe].apply(q)}else if(At(arguments[0],Fi)){var Ue=arguments[0];Ue.filter(this);for(var gt=0;gt<this._geometries.length;gt++)this._geometries[gt].apply(Ue)}},d.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),J.shouldNeverReachHere(),null},d.prototype.clone=function(){var v=h.prototype.clone.call(this);v._geometries=new Array(this._geometries.length).fill(null);for(var x=0;x<this._geometries.length;x++)v._geometries[x]=this._geometries[x].clone();return v},d.prototype.getGeometryType=function(){return"GeometryCollection"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),x=0;x<v.length;x++)v[x]=this._geometries[x].copy();return new d(v,this._factory)},d.prototype.isEmpty=function(){for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isEmpty())return!1;return!0},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(d,m),d}(_n),C3=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return _n.SORTINDEX_MULTILINESTRING},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],x=arguments[1];return!!this.isEquivalentClass(v)&&h.prototype.equalsExact.call(this,v,x)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?Mi.FALSE:0},d.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isClosed())return!1;return!0},d.prototype.getDimension=function(){return 1},d.prototype.reverse=function(){for(var v=this._geometries.length,x=new Array(v).fill(null),B=0;B<this._geometries.length;B++)x[v-1-B]=this._geometries[B].reverse();return this.getFactory().createMultiLineString(x)},d.prototype.getBoundary=function(){return new A1(this).getBoundary()},d.prototype.getGeometryType=function(){return"MultiLineString"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),x=0;x<v.length;x++)v[x]=this._geometries[x].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[Y4]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(d,m),d}(m1),A1=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var h=arguments[0],d=yr.MOD2_BOUNDARY_RULE;this._geom=h,this._geomFact=h.getFactory(),this._bnRule=d}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this._geom=m,this._geomFact=m.getFactory(),this._bnRule=v}};A1.prototype.boundaryMultiLineString=function(h){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var d=this.computeBoundaryCoordinates(h);return 1===d.length?this._geomFact.createPoint(d[0]):this._geomFact.createMultiPointFromCoords(d)},A1.prototype.getBoundary=function(){return this._geom instanceof uo?this.boundaryLineString(this._geom):this._geom instanceof C3?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},A1.prototype.boundaryLineString=function(h){return this._geom.isEmpty()?this.getEmptyMultiPoint():h.isClosed()?this._bnRule.isInBoundary(2)?h.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([h.getStartPoint(),h.getEndPoint()])},A1.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},A1.prototype.computeBoundaryCoordinates=function(h){var d=new tn;this._endpointMap=new Ct;for(var m=0;m<h.getNumGeometries();m++){var v=h.getGeometryN(m);0!==v.getNumPoints()&&(this.addEndpoint(v.getCoordinateN(0)),this.addEndpoint(v.getCoordinateN(v.getNumPoints()-1)))}for(var x=this._endpointMap.entrySet().iterator();x.hasNext();){var B=x.next(),H=B.getValue().count;this._bnRule.isInBoundary(H)&&d.add(B.getKey())}return Bi.toCoordinateArray(d)},A1.prototype.addEndpoint=function(h){var d=this._endpointMap.get(h);null===d&&(d=new Yu,this._endpointMap.put(h,d)),d.count++},A1.prototype.interfaces_=function(){return[]},A1.prototype.getClass=function(){return A1},A1.getBoundary=function(){return 1===arguments.length?new A1(arguments[0]).getBoundary():2===arguments.length?new A1(arguments[0],arguments[1]).getBoundary():void 0};var Yu=function(){this.count=null};Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu};var v1=function(){},T6={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};v1.prototype.interfaces_=function(){return[]},v1.prototype.getClass=function(){return v1},v1.chars=function(h,d){for(var m=new Array(d).fill(null),v=0;v<d;v++)m[v]=h;return String(m)},v1.getStackTrace=function(){if(1===arguments.length){var h=arguments[0],d=new function(){},m=new function(){}(d);return h.printStackTrace(m),d.toString()}if(2===arguments.length){for(var x=arguments[1],B="",H=new function(){}(new function(){}(v1.getStackTrace(arguments[0]))),q=0;q<x;q++)try{B+=H.readLine()+v1.NEWLINE}catch(pe){if(!(pe instanceof qt))throw pe;J.shouldNeverReachHere()}return B}},v1.split=function(h,d){for(var m=d.length,v=new tn,x=""+h,B=x.indexOf(d);B>=0;){var H=x.substring(0,B);v.add(H),B=(x=x.substring(B+m)).indexOf(d)}x.length>0&&v.add(x);for(var q=new Array(v.size()).fill(null),pe=0;pe<q.length;pe++)q[pe]=v.get(pe);return q},v1.toString=function(){if(1===arguments.length)return v1.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},v1.spaces=function(h){return v1.chars(" ",h)},T6.NEWLINE.get=function(){return $t.getProperty("line.separator")},T6.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(v1,T6);var mo=function(){};mo.prototype.interfaces_=function(){return[]},mo.prototype.getClass=function(){return mo},mo.copyCoord=function(h,d,m,v){for(var x=Math.min(h.getDimension(),m.getDimension()),B=0;B<x;B++)m.setOrdinate(v,B,h.getOrdinate(d,B))},mo.isRing=function(h){var d=h.size();return 0===d||!(d<=3)&&h.getOrdinate(0,vt.X)===h.getOrdinate(d-1,vt.X)&&h.getOrdinate(0,vt.Y)===h.getOrdinate(d-1,vt.Y)},mo.isEqual=function(h,d){var m=h.size();if(m!==d.size())return!1;for(var v=Math.min(h.getDimension(),d.getDimension()),x=0;x<m;x++)for(var B=0;B<v;B++){var H=h.getOrdinate(x,B),q=d.getOrdinate(x,B);if(!(h.getOrdinate(x,B)===d.getOrdinate(x,B)||Y.isNaN(H)&&Y.isNaN(q)))return!1}return!0},mo.extend=function(h,d,m){var v=h.create(m,d.getDimension()),x=d.size();if(mo.copy(d,0,v,0,x),x>0)for(var B=x;B<m;B++)mo.copy(d,x-1,v,B,1);return v},mo.reverse=function(h){for(var d=h.size()-1,m=Math.trunc(d/2),v=0;v<=m;v++)mo.swap(h,v,d-v)},mo.swap=function(h,d,m){if(d===m)return null;for(var v=0;v<h.getDimension();v++){var x=h.getOrdinate(d,v);h.setOrdinate(d,v,h.getOrdinate(m,v)),h.setOrdinate(m,v,x)}},mo.copy=function(h,d,m,v,x){for(var B=0;B<x;B++)mo.copyCoord(h,d+B,m,v+B)},mo.toString=function(){if(1===arguments.length){var h=arguments[0],d=h.size();if(0===d)return"()";var m=h.getDimension(),v=new Ce;v.append("(");for(var x=0;x<d;x++){x>0&&v.append(" ");for(var B=0;B<m;B++)B>0&&v.append(","),v.append(v1.toString(h.getOrdinate(x,B)))}return v.append(")"),v.toString()}},mo.ensureValidRing=function(h,d){var m=d.size();return 0===m?d:m<=3?mo.createClosedRing(h,d,4):d.getOrdinate(0,vt.X)===d.getOrdinate(m-1,vt.X)&&d.getOrdinate(0,vt.Y)===d.getOrdinate(m-1,vt.Y)?d:mo.createClosedRing(h,d,m+1)},mo.createClosedRing=function(h,d,m){var v=h.create(m,d.getDimension()),x=d.size();mo.copy(d,0,v,0,x);for(var B=x;B<m;B++)mo.copy(d,0,v,B,1);return v};var uo=function(h){function d(v,x){h.call(this,x),this._points=null,this.init(v)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new rn:this._points.expandEnvelope(new rn)},d.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},d.prototype.getSortIndex=function(){return h.SORTINDEX_LINESTRING},d.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],x=arguments[1];if(!this.isEquivalentClass(v))return!1;var B=v;if(this._points.size()!==B._points.size())return!1;for(var H=0;H<this._points.size();H++)if(!this.equal(this._points.getCoordinate(H),B._points.getCoordinate(H),x))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var v=0;v<Math.trunc(this._points.size()/2);v++){var x=this._points.size()-1-v;if(!this._points.getCoordinate(v).equals(this._points.getCoordinate(x)))return this._points.getCoordinate(v).compareTo(this._points.getCoordinate(x))>0&&mo.reverse(this._points),null}},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?Mi.FALSE:0},d.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},d.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},d.prototype.getDimension=function(){return 1},d.prototype.getLength=function(){return Mt.computeLength(this._points)},d.prototype.getNumPoints=function(){return this._points.size()},d.prototype.reverse=function(){var v=this._points.copy();return mo.reverse(v),this.getFactory().createLineString(v)},d.prototype.compareToSameClass=function(){if(1===arguments.length){for(var v=arguments[0],x=0,B=0;x<this._points.size()&&B<v._points.size();){var H=this._points.getCoordinate(x).compareTo(v._points.getCoordinate(B));if(0!==H)return H;x++,B++}return x<this._points.size()?1:B<v._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},d.prototype.apply=function(){if(At(arguments[0],lr))for(var v=arguments[0],x=0;x<this._points.size();x++)v.filter(this._points.getCoordinate(x));else if(At(arguments[0],fc)){var B=arguments[0];if(0===this._points.size())return null;for(var H=0;H<this._points.size()&&(B.filter(this._points,H),!B.isDone());H++);B.isGeometryChanged()&&this.geometryChanged()}else(At(arguments[0],Ia)||At(arguments[0],Fi))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return new A1(this).getBoundary()},d.prototype.isEquivalentClass=function(v){return v instanceof d},d.prototype.clone=function(){var v=h.prototype.clone.call(this);return v._points=this._points.clone(),v},d.prototype.getCoordinateN=function(v){return this._points.getCoordinate(v)},d.prototype.getGeometryType=function(){return"LineString"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._points},d.prototype.isEmpty=function(){return 0===this._points.size()},d.prototype.init=function(v){if(null===v&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),1===v.size())throw new X("Invalid number of points in LineString (found "+v.size()+" - must be 0 or >= 2)");this._points=v},d.prototype.isCoordinate=function(v){for(var x=0;x<this._points.size();x++)if(this._points.getCoordinate(x).equals(v))return!0;return!1},d.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},d.prototype.getPointN=function(v){return this.getFactory().createPoint(this._points.getCoordinate(v))},d.prototype.interfaces_=function(){return[Y4]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(d,m),d}(_n),rh=function(){};rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh};var u2=function(h){function d(v,x){h.call(this,x),this._coordinates=v||null,this.init(this._coordinates)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new rn;var v=new rn;return v.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),v},d.prototype.getSortIndex=function(){return h.SORTINDEX_POINT},d.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],x=arguments[1];return!!this.isEquivalentClass(v)&&(!(!this.isEmpty()||!v.isEmpty())||this.isEmpty()===v.isEmpty()&&this.equal(v.getCoordinate(),this.getCoordinate(),x))}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){},d.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},d.prototype.getBoundaryDimension=function(){return Mi.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getNumPoints=function(){return this.isEmpty()?0:1},d.prototype.reverse=function(){return this.copy()},d.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},d.prototype.compareToSameClass=function(){if(1===arguments.length){var v=arguments[0];return this.getCoordinate().compareTo(v.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},d.prototype.apply=function(){if(At(arguments[0],lr)){var v=arguments[0];if(this.isEmpty())return null;v.filter(this.getCoordinate())}else if(At(arguments[0],fc)){var x=arguments[0];if(this.isEmpty())return null;x.filter(this._coordinates,0),x.isGeometryChanged()&&this.geometryChanged()}else(At(arguments[0],Ia)||At(arguments[0],Fi))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.clone=function(){var v=h.prototype.clone.call(this);return v._coordinates=this._coordinates.clone(),v},d.prototype.getGeometryType=function(){return"Point"},d.prototype.copy=function(){return new d(this._coordinates.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._coordinates},d.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},d.prototype.isEmpty=function(){return 0===this._coordinates.size()},d.prototype.init=function(v){null===v&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),J.isTrue(v.size()<=1),this._coordinates=v},d.prototype.isSimple=function(){return!0},d.prototype.interfaces_=function(){return[rh]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(d,m),d}(_n),dc=function(){};dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc};var Po=function(h){function d(v,x,B){if(h.call(this,B),this._shell=null,this._holes=null,null===v&&(v=this.getFactory().createLinearRing()),null===x&&(x=[]),h.hasNullElements(x))throw new X("holes must not contain null elements");if(v.isEmpty()&&h.hasNonEmptyElements(x))throw new X("shell is empty but holes are not");this._shell=v,this._holes=x}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},d.prototype.getSortIndex=function(){return h.SORTINDEX_POLYGON},d.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var v=new Array(this.getNumPoints()).fill(null),x=-1,B=this._shell.getCoordinates(),H=0;H<B.length;H++)v[++x]=B[H];for(var q=0;q<this._holes.length;q++)for(var pe=this._holes[q].getCoordinates(),Ue=0;Ue<pe.length;Ue++)v[++x]=pe[Ue];return v},d.prototype.getArea=function(){var v=0;v+=Math.abs(Mt.signedArea(this._shell.getCoordinateSequence()));for(var x=0;x<this._holes.length;x++)v-=Math.abs(Mt.signedArea(this._holes[x].getCoordinateSequence()));return v},d.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var v=this._shell.getCoordinateSequence(),x=this.getEnvelopeInternal(),B=0;B<5;B++){var H=v.getX(B);if(H!==x.getMinX()&&H!==x.getMaxX())return!1;var q=v.getY(B);if(q!==x.getMinY()&&q!==x.getMaxY())return!1}for(var pe=v.getX(0),Ue=v.getY(0),gt=1;gt<=4;gt++){var pt=v.getX(gt),ln=v.getY(gt);if(pt!==pe==(ln!==Ue))return!1;pe=pt,Ue=ln}return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],x=arguments[1];if(!this.isEquivalentClass(v))return!1;var B=v;if(!this._shell.equalsExact(B._shell,x)||this._holes.length!==B._holes.length)return!1;for(var pe=0;pe<this._holes.length;pe++)if(!this._holes[pe].equalsExact(B._holes[pe],x))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var v=0;v<this._holes.length;v++)this.normalize(this._holes[v],!1);jl.sort(this._holes)}else if(2===arguments.length){var x=arguments[0],B=arguments[1];if(x.isEmpty())return null;var H=new Array(x.getCoordinates().length-1).fill(null);$t.arraycopy(x.getCoordinates(),0,H,0,H.length);var q=Bi.minCoordinate(x.getCoordinates());Bi.scroll(H,q),$t.arraycopy(H,0,x.getCoordinates(),0,H.length),x.getCoordinates()[H.length]=H[0],Mt.isCCW(x.getCoordinates())===B&&Bi.reverse(x.getCoordinates())}},d.prototype.getCoordinate=function(){return this._shell.getCoordinate()},d.prototype.getNumInteriorRing=function(){return this._holes.length},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.getLength=function(){var v=0;v+=this._shell.getLength();for(var x=0;x<this._holes.length;x++)v+=this._holes[x].getLength();return v},d.prototype.getNumPoints=function(){for(var v=this._shell.getNumPoints(),x=0;x<this._holes.length;x++)v+=this._holes[x].getNumPoints();return v},d.prototype.reverse=function(){var v=this.copy();v._shell=this._shell.copy().reverse(),v._holes=new Array(this._holes.length).fill(null);for(var x=0;x<this._holes.length;x++)v._holes[x]=this._holes[x].copy().reverse();return v},d.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},d.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var q=arguments[1],pe=arguments[0],pt=this._shell.compareToSameClass(pe._shell,q);if(0!==pt)return pt;for(var ln=this.getNumInteriorRing(),bn=pe.getNumInteriorRing(),Rn=0;Rn<ln&&Rn<bn;){var Zn=this.getInteriorRingN(Rn),Pr=pe.getInteriorRingN(Rn),So=Zn.compareToSameClass(Pr,q);if(0!==So)return So;Rn++}return Rn<ln?1:Rn<bn?-1:0}},d.prototype.apply=function(v){if(At(v,lr)){this._shell.apply(v);for(var x=0;x<this._holes.length;x++)this._holes[x].apply(v)}else if(At(v,fc)){if(this._shell.apply(v),!v.isDone())for(var B=0;B<this._holes.length&&(this._holes[B].apply(v),!v.isDone());B++);v.isGeometryChanged()&&this.geometryChanged()}else if(At(v,Ia))v.filter(this);else if(At(v,Fi)){v.filter(this),this._shell.apply(v);for(var H=0;H<this._holes.length;H++)this._holes[H].apply(v)}},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var v=new Array(this._holes.length+1).fill(null);v[0]=this._shell;for(var x=0;x<this._holes.length;x++)v[x+1]=this._holes[x];return v.length<=1?this.getFactory().createLinearRing(v[0].getCoordinateSequence()):this.getFactory().createMultiLineString(v)},d.prototype.clone=function(){var v=h.prototype.clone.call(this);v._shell=this._shell.clone(),v._holes=new Array(this._holes.length).fill(null);for(var x=0;x<this._holes.length;x++)v._holes[x]=this._holes[x].clone();return v},d.prototype.getGeometryType=function(){return"Polygon"},d.prototype.copy=function(){for(var v=this._shell.copy(),x=new Array(this._holes.length).fill(null),B=0;B<x.length;B++)x[B]=this._holes[B].copy();return new d(v,x,this._factory)},d.prototype.getExteriorRing=function(){return this._shell},d.prototype.isEmpty=function(){return this._shell.isEmpty()},d.prototype.getInteriorRingN=function(v){return this._holes[v]},d.prototype.interfaces_=function(){return[dc]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(d,m),d}(_n),$l=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return _n.SORTINDEX_MULTIPOINT},d.prototype.isValid=function(){return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],x=arguments[1];return!!this.isEquivalentClass(v)&&h.prototype.equalsExact.call(this,v,x)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():h.prototype.getCoordinate.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return Mi.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.getGeometryType=function(){return"MultiPoint"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),x=0;x<v.length;x++)v[x]=this._geometries[x].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[rh]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(d,m),d}(m1),Bc=function(h){function d(v,x){v instanceof $&&x instanceof $i&&(v=x.getCoordinateSequenceFactory().create(v)),h.call(this,v,x),this.validateConstruction()}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return _n.SORTINDEX_LINEARRING},d.prototype.getBoundaryDimension=function(){return Mi.FALSE},d.prototype.isClosed=function(){return!!this.isEmpty()||h.prototype.isClosed.call(this)},d.prototype.reverse=function(){var v=this._points.copy();return mo.reverse(v),this.getFactory().createLinearRing(v)},d.prototype.validateConstruction=function(){if(!this.isEmpty()&&!h.prototype.isClosed.call(this))throw new X("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<d.MINIMUM_VALID_SIZE)throw new X("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},d.prototype.getGeometryType=function(){return"LinearRing"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.MINIMUM_VALID_SIZE.get=function(){return 4},m.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(d,m),d}(uo),D2=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return _n.SORTINDEX_MULTIPOLYGON},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],x=arguments[1];return!!this.isEquivalentClass(v)&&h.prototype.equalsExact.call(this,v,x)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.reverse=function(){for(var x=new Array(this._geometries.length).fill(null),B=0;B<this._geometries.length;B++)x[B]=this._geometries[B].reverse();return this.getFactory().createMultiPolygon(x)},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var v=new tn,x=0;x<this._geometries.length;x++)for(var B=this._geometries[x].getBoundary(),H=0;H<B.getNumGeometries();H++)v.add(B.getGeometryN(H));var q=new Array(v.size()).fill(null);return this.getFactory().createMultiLineString(v.toArray(q))},d.prototype.getGeometryType=function(){return"MultiPolygon"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),x=0;x<v.length;x++)v[x]=this._geometries[x].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[dc]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(d,m),d}(m1),us=function(h){this._factory=h||null,this._isUserDataCopied=!1},al={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};us.prototype.setCopyUserData=function(h){this._isUserDataCopied=h},us.prototype.edit=function(h,d){if(null===h)return null;var m=this.editInternal(h,d);return this._isUserDataCopied&&m.setUserData(h.getUserData()),m},us.prototype.editInternal=function(h,d){return null===this._factory&&(this._factory=h.getFactory()),h instanceof m1?this.editGeometryCollection(h,d):h instanceof Po?this.editPolygon(h,d):h instanceof u2||h instanceof uo?d.edit(h,this._factory):(J.shouldNeverReachHere("Unsupported Geometry class: "+h.getClass().getName()),null)},us.prototype.editGeometryCollection=function(h,d){for(var m=d.edit(h,this._factory),v=new tn,x=0;x<m.getNumGeometries();x++){var B=this.edit(m.getGeometryN(x),d);null===B||B.isEmpty()||v.add(B)}return m.getClass()===$l?this._factory.createMultiPoint(v.toArray([])):m.getClass()===C3?this._factory.createMultiLineString(v.toArray([])):m.getClass()===D2?this._factory.createMultiPolygon(v.toArray([])):this._factory.createGeometryCollection(v.toArray([]))},us.prototype.editPolygon=function(h,d){var m=d.edit(h,this._factory);if(null===m&&(m=this._factory.createPolygon(null)),m.isEmpty())return m;var v=this.edit(m.getExteriorRing(),d);if(null===v||v.isEmpty())return this._factory.createPolygon();for(var x=new tn,B=0;B<m.getNumInteriorRing();B++){var H=this.edit(m.getInteriorRingN(B),d);null===H||H.isEmpty()||x.add(H)}return this._factory.createPolygon(v,x.toArray([]))},us.prototype.interfaces_=function(){return[]},us.prototype.getClass=function(){return us},us.GeometryEditorOperation=function(){},al.NoOpGeometryOperation.get=function(){return x3},al.CoordinateOperation.get=function(){return cl},al.CoordinateSequenceOperation.get=function(){return Is},Object.defineProperties(us,al);var x3=function(){};x3.prototype.edit=function(h,d){return h},x3.prototype.interfaces_=function(){return[us.GeometryEditorOperation]},x3.prototype.getClass=function(){return x3};var cl=function(){};cl.prototype.edit=function(h,d){var m=this.editCoordinates(h.getCoordinates(),h);return null===m?h:h instanceof Bc?d.createLinearRing(m):h instanceof uo?d.createLineString(m):h instanceof u2?m.length>0?d.createPoint(m[0]):d.createPoint():h},cl.prototype.interfaces_=function(){return[us.GeometryEditorOperation]},cl.prototype.getClass=function(){return cl};var Is=function(){};Is.prototype.edit=function(h,d){return h instanceof Bc?d.createLinearRing(this.edit(h.getCoordinateSequence(),h)):h instanceof uo?d.createLineString(this.edit(h.getCoordinateSequence(),h)):h instanceof u2?d.createPoint(this.edit(h.getCoordinateSequence(),h)):h},Is.prototype.interfaces_=function(){return[us.GeometryEditorOperation]},Is.prototype.getClass=function(){return Is};var ho=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var h=arguments[0];this._coordinates=new Array(h).fill(null);for(var d=0;d<h;d++)this._coordinates[d]=new $}else if(At(arguments[0],vt)){var m=arguments[0];if(null===m)return this._coordinates=new Array(0).fill(null),null;this._dimension=m.getDimension(),this._coordinates=new Array(m.size()).fill(null);for(var v=0;v<this._coordinates.length;v++)this._coordinates[v]=m.getCoordinateCopy(v)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var x=arguments[0],B=arguments[1];this._coordinates=x,this._dimension=B,null===x&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var H=arguments[0],q=arguments[1];this._coordinates=new Array(H).fill(null),this._dimension=q;for(var pe=0;pe<H;pe++)this._coordinates[pe]=new $}},io={serialVersionUID:{configurable:!0}};ho.prototype.setOrdinate=function(h,d,m){switch(d){case vt.X:this._coordinates[h].x=m;break;case vt.Y:this._coordinates[h].y=m;break;case vt.Z:this._coordinates[h].z=m;break;default:throw new X("invalid ordinateIndex")}},ho.prototype.size=function(){return this._coordinates.length},ho.prototype.getOrdinate=function(h,d){switch(d){case vt.X:return this._coordinates[h].x;case vt.Y:return this._coordinates[h].y;case vt.Z:return this._coordinates[h].z}return Y.NaN},ho.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var d=arguments[0],m=arguments[1];m.x=this._coordinates[d].x,m.y=this._coordinates[d].y,m.z=this._coordinates[d].z}},ho.prototype.getCoordinateCopy=function(h){return new $(this._coordinates[h])},ho.prototype.getDimension=function(){return this._dimension},ho.prototype.getX=function(h){return this._coordinates[h].x},ho.prototype.clone=function(){for(var h=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)h[d]=this._coordinates[d].clone();return new ho(h,this._dimension)},ho.prototype.expandEnvelope=function(h){for(var d=0;d<this._coordinates.length;d++)h.expandToInclude(this._coordinates[d]);return h},ho.prototype.copy=function(){for(var h=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)h[d]=this._coordinates[d].copy();return new ho(h,this._dimension)},ho.prototype.toString=function(){if(this._coordinates.length>0){var h=new Ce(17*this._coordinates.length);h.append("("),h.append(this._coordinates[0]);for(var d=1;d<this._coordinates.length;d++)h.append(", "),h.append(this._coordinates[d]);return h.append(")"),h.toString()}return"()"},ho.prototype.getY=function(h){return this._coordinates[h].y},ho.prototype.toCoordinateArray=function(){return this._coordinates},ho.prototype.interfaces_=function(){return[vt,ue]},ho.prototype.getClass=function(){return ho},io.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ho,io);var h2=function(){},Zu={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};h2.prototype.readResolve=function(){return h2.instance()},h2.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ho(arguments[0]);if(At(arguments[0],vt))return new ho(arguments[0])}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return v>3&&(v=3),v<2?new ho(m):new ho(m,v)}},h2.prototype.interfaces_=function(){return[Pe,ue]},h2.prototype.getClass=function(){return h2},h2.instance=function(){return h2.instanceObject},Zu.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Zu.instanceObject.get=function(){return new h2},Object.defineProperties(h2,Zu);var pr=function(h){function d(){h.call(this),this.map_=new Map}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.get=function(m){return this.map_.get(m)||null},d.prototype.put=function(m,v){return this.map_.set(m,v),v},d.prototype.values=function(){for(var m=new tn,v=this.map_.values(),x=v.next();!x.done;)m.add(x.value),x=v.next();return m},d.prototype.entrySet=function(){var m=new Df;return this.map_.entries().forEach(function(v){return m.add(v)}),m},d.prototype.size=function(){return this.map_.size()},d}(X4),Ln=function h(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=h.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ll){var d=arguments[0];this._modelType=d,d===h.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var m=arguments[0];this._modelType=h.FIXED,this.setScale(m)}else if(arguments[0]instanceof h){var v=arguments[0];this._modelType=v._modelType,this._scale=v._scale}},_1={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ln.prototype.equals=function(h){return h instanceof Ln&&this._modelType===h._modelType&&this._scale===h._scale},Ln.prototype.compareTo=function(h){var d=h,m=this.getMaximumSignificantDigits(),v=d.getMaximumSignificantDigits();return new Qe(m).compareTo(new Qe(v))},Ln.prototype.getScale=function(){return this._scale},Ln.prototype.isFloating=function(){return this._modelType===Ln.FLOATING||this._modelType===Ln.FLOATING_SINGLE},Ln.prototype.getType=function(){return this._modelType},Ln.prototype.toString=function(){var h="UNKNOWN";return this._modelType===Ln.FLOATING?h="Floating":this._modelType===Ln.FLOATING_SINGLE?h="Floating-Single":this._modelType===Ln.FIXED&&(h="Fixed (Scale="+this.getScale()+")"),h},Ln.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var h=arguments[0];return Y.isNaN(h)||this._modelType===Ln.FLOATING_SINGLE?h:this._modelType===Ln.FIXED?Math.round(h*this._scale)/this._scale:h}if(arguments[0]instanceof $){var d=arguments[0];if(this._modelType===Ln.FLOATING)return null;d.x=this.makePrecise(d.x),d.y=this.makePrecise(d.y)}},Ln.prototype.getMaximumSignificantDigits=function(){var h=16;return this._modelType===Ln.FLOATING?h=16:this._modelType===Ln.FLOATING_SINGLE?h=6:this._modelType===Ln.FIXED&&(h=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),h},Ln.prototype.setScale=function(h){this._scale=Math.abs(h)},Ln.prototype.interfaces_=function(){return[ue,Z]},Ln.prototype.getClass=function(){return Ln},Ln.mostPrecise=function(h,d){return h.compareTo(d)>=0?h:d},_1.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},_1.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Ln,_1);var ll=function h(d){this._name=d||null,h.nameToTypeMap.put(d,this)},jt={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ll.prototype.readResolve=function(){return ll.nameToTypeMap.get(this._name)},ll.prototype.toString=function(){return this._name},ll.prototype.interfaces_=function(){return[ue]},ll.prototype.getClass=function(){return ll},jt.serialVersionUID.get=function(){return-552860263173159e4},jt.nameToTypeMap.get=function(){return new pr},Object.defineProperties(ll,jt),Ln.Type=ll,Ln.FIXED=new ll("FIXED"),Ln.FLOATING=new ll("FLOATING"),Ln.FLOATING_SINGLE=new ll("FLOATING SINGLE");var $i=function h(){this._precisionModel=new Ln,this._SRID=0,this._coordinateSequenceFactory=h.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?At(arguments[0],Pe)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ln&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Zi={serialVersionUID:{configurable:!0}};$i.prototype.toGeometry=function(h){return h.isNull()?this.createPoint(null):h.getMinX()===h.getMaxX()&&h.getMinY()===h.getMaxY()?this.createPoint(new $(h.getMinX(),h.getMinY())):h.getMinX()===h.getMaxX()||h.getMinY()===h.getMaxY()?this.createLineString([new $(h.getMinX(),h.getMinY()),new $(h.getMaxX(),h.getMaxY())]):this.createPolygon(this.createLinearRing([new $(h.getMinX(),h.getMinY()),new $(h.getMinX(),h.getMaxY()),new $(h.getMaxX(),h.getMaxY()),new $(h.getMaxX(),h.getMinY()),new $(h.getMinX(),h.getMinY())]),null)},$i.prototype.createLineString=function(h){return h?h instanceof Array?new uo(this.getCoordinateSequenceFactory().create(h),this):At(h,vt)?new uo(h,this):void 0:new uo(this.getCoordinateSequenceFactory().create([]),this)},$i.prototype.createMultiLineString=function(){return 0===arguments.length?new C3(null,this):1===arguments.length?new C3(arguments[0],this):void 0},$i.prototype.buildGeometry=function(h){for(var d=null,m=!1,v=!1,x=h.iterator();x.hasNext();){var B=x.next(),H=B.getClass();null===d&&(d=H),H!==d&&(m=!0),B.isGeometryCollectionOrDerived()&&(v=!0)}if(null===d)return this.createGeometryCollection();if(m||v)return this.createGeometryCollection($i.toGeometryArray(h));var q=h.iterator().next();if(h.size()>1){if(q instanceof Po)return this.createMultiPolygon($i.toPolygonArray(h));if(q instanceof uo)return this.createMultiLineString($i.toLineStringArray(h));if(q instanceof u2)return this.createMultiPoint($i.toPointArray(h));J.shouldNeverReachHere("Unhandled class: "+q.getClass().getName())}return q},$i.prototype.createMultiPointFromCoords=function(h){return this.createMultiPoint(null!==h?this.getCoordinateSequenceFactory().create(h):null)},$i.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];return this.createPoint(null!==h?this.getCoordinateSequenceFactory().create([h]):null)}if(At(arguments[0],vt))return new u2(arguments[0],this)}},$i.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},$i.prototype.createPolygon=function(){if(0===arguments.length)return new Po(null,null,this);if(1===arguments.length){if(At(arguments[0],vt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Bc)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new Po(arguments[0],arguments[1],this)},$i.prototype.getSRID=function(){return this._SRID},$i.prototype.createGeometryCollection=function(){return 0===arguments.length?new m1(null,this):1===arguments.length?new m1(arguments[0],this):void 0},$i.prototype.createGeometry=function(h){return new us(this).edit(h,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},$i.prototype.getPrecisionModel=function(){return this._precisionModel},$i.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var h=arguments[0];return this.createLinearRing(null!==h?this.getCoordinateSequenceFactory().create(h):null)}if(At(arguments[0],vt))return new Bc(arguments[0],this)}},$i.prototype.createMultiPolygon=function(){return 0===arguments.length?new D2(null,this):1===arguments.length?new D2(arguments[0],this):void 0},$i.prototype.createMultiPoint=function(){if(0===arguments.length)return new $l(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new $l(arguments[0],this);if(arguments[0]instanceof Array){var d=arguments[0];return this.createMultiPoint(null!==d?this.getCoordinateSequenceFactory().create(d):null)}if(At(arguments[0],vt)){var m=arguments[0];if(null===m)return this.createMultiPoint(new Array(0).fill(null));for(var v=new Array(m.size()).fill(null),x=0;x<m.size();x++){var B=this.getCoordinateSequenceFactory().create(1,m.getDimension());mo.copy(m,x,B,0,1),v[x]=this.createPoint(B)}return this.createMultiPoint(v)}}},$i.prototype.interfaces_=function(){return[ue]},$i.prototype.getClass=function(){return $i},$i.toMultiPolygonArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},$i.toGeometryArray=function(h){if(null===h)return null;var d=new Array(h.size()).fill(null);return h.toArray(d)},$i.getDefaultCoordinateSequenceFactory=function(){return h2.instance()},$i.toMultiLineStringArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},$i.toLineStringArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},$i.toMultiPointArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},$i.toLinearRingArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},$i.toPointArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},$i.toPolygonArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},$i.createPointFromInternalCoord=function(h,d){return d.getPrecisionModel().makePrecise(h),d.getFactory().createPoint(h)},Zi.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties($i,Zi);var Bs=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],If=function(h){this.geometryFactory=h||new $i};If.prototype.read=function(h){var d,m=(d="string"==typeof h?JSON.parse(h):h).type;if(!ul[m])throw new Error("Unknown GeoJSON type: "+d.type);return-1!==Bs.indexOf(m)?ul[m].apply(this,[d.coordinates]):ul[m].apply(this,"GeometryCollection"===m?[d.geometries]:[d])},If.prototype.write=function(h){var d=h.getGeometryType();if(!ql[d])throw new Error("Geometry is not supported");return ql[d].apply(this,[h])};var ul={Feature:function(h){var d={};for(var m in h)d[m]=h[m];if(h.geometry){if(!ul[h.geometry.type])throw new Error("Unknown GeoJSON type: "+h.type);d.geometry=this.read(h.geometry)}return h.bbox&&(d.bbox=ul.bbox.apply(this,[h.bbox])),d},FeatureCollection:function(h){var d={};if(h.features){d.features=[];for(var m=0;m<h.features.length;++m)d.features.push(this.read(h.features[m]))}return h.bbox&&(d.bbox=this.parse.bbox.apply(this,[h.bbox])),d},coordinates:function(h){for(var d=[],m=0;m<h.length;++m){var v=h[m];d.push(new $(v[0],v[1]))}return d},bbox:function(h){return this.geometryFactory.createLinearRing([new $(h[0],h[1]),new $(h[2],h[1]),new $(h[2],h[3]),new $(h[0],h[3]),new $(h[0],h[1])])},Point:function(h){var d=new $(h[0],h[1]);return this.geometryFactory.createPoint(d)},MultiPoint:function(h){for(var d=[],m=0;m<h.length;++m)d.push(ul.Point.apply(this,[h[m]]));return this.geometryFactory.createMultiPoint(d)},LineString:function(h){var d=ul.coordinates.apply(this,[h]);return this.geometryFactory.createLineString(d)},MultiLineString:function(h){for(var d=[],m=0;m<h.length;++m)d.push(ul.LineString.apply(this,[h[m]]));return this.geometryFactory.createMultiLineString(d)},Polygon:function(h){for(var d=ul.coordinates.apply(this,[h[0]]),m=this.geometryFactory.createLinearRing(d),v=[],x=1;x<h.length;++x){var H=ul.coordinates.apply(this,[h[x]]),q=this.geometryFactory.createLinearRing(H);v.push(q)}return this.geometryFactory.createPolygon(m,v)},MultiPolygon:function(h){for(var d=[],m=0;m<h.length;++m)d.push(ul.Polygon.apply(this,[h[m]]));return this.geometryFactory.createMultiPolygon(d)},GeometryCollection:function(h){for(var d=[],m=0;m<h.length;++m)d.push(this.read(h[m]));return this.geometryFactory.createGeometryCollection(d)}},ql={coordinate:function(h){return[h.x,h.y]},Point:function(h){return{type:"Point",coordinates:ql.coordinate.apply(this,[h.getCoordinate()])}},MultiPoint:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var x=ql.Point.apply(this,[h._geometries[m]]);d.push(x.coordinates)}return{type:"MultiPoint",coordinates:d}},LineString:function(h){for(var d=[],m=h.getCoordinates(),v=0;v<m.length;++v)d.push(ql.coordinate.apply(this,[m[v]]));return{type:"LineString",coordinates:d}},MultiLineString:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var x=ql.LineString.apply(this,[h._geometries[m]]);d.push(x.coordinates)}return{type:"MultiLineString",coordinates:d}},Polygon:function(h){var d=[],m=ql.LineString.apply(this,[h._shell]);d.push(m.coordinates);for(var v=0;v<h._holes.length;++v){var B=ql.LineString.apply(this,[h._holes[v]]);d.push(B.coordinates)}return{type:"Polygon",coordinates:d}},MultiPolygon:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var x=ql.Polygon.apply(this,[h._geometries[m]]);d.push(x.coordinates)}return{type:"MultiPolygon",coordinates:d}},GeometryCollection:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var v=h._geometries[m],x=v.getGeometryType();d.push(ql[x].apply(this,[v]))}return{type:"GeometryCollection",geometries:d}}},b3=function(h){this.geometryFactory=h||new $i,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new If(this.geometryFactory)};b3.prototype.read=function(h){var d=this.parser.read(h);return this.precisionModel.getType()===Ln.FIXED&&this.reducePrecision(d),d},b3.prototype.reducePrecision=function(h){var d,m;if(h.coordinate)this.precisionModel.makePrecise(h.coordinate);else if(h.points)for(d=0,m=h.points.length;d<m;d++)this.precisionModel.makePrecise(h.points[d]);else if(h.geometries)for(d=0,m=h.geometries.length;d<m;d++)this.reducePrecision(h.geometries[d])};var j2=function(){this.parser=new If(this.geometryFactory)};j2.prototype.write=function(h){return this.parser.write(h)};var cn=function(){},Bf={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn},cn.opposite=function(h){return h===cn.LEFT?cn.RIGHT:h===cn.RIGHT?cn.LEFT:h},Bf.ON.get=function(){return 0},Bf.LEFT.get=function(){return 1},Bf.RIGHT.get=function(){return 2},Object.defineProperties(cn,Bf),(Ne.prototype=new Error).name="EmptyStackException",(Ke.prototype=new ko).add=function(h){return this.array_.push(h),!0},Ke.prototype.get=function(h){if(h<0||h>=this.size())throw new Error;return this.array_[h]},Ke.prototype.push=function(h){return this.array_.push(h),h},Ke.prototype.pop=function(h){if(0===this.array_.length)throw new Ne;return this.array_.pop()},Ke.prototype.peek=function(){if(0===this.array_.length)throw new Ne;return this.array_[this.array_.length-1]},Ke.prototype.empty=function(){return 0===this.array_.length},Ke.prototype.isEmpty=function(){return this.empty()},Ke.prototype.search=function(h){return this.array_.indexOf(h)},Ke.prototype.size=function(){return this.array_.length},Ke.prototype.toArray=function(){for(var h=[],d=0,m=this.array_.length;d<m;d++)h.push(this.array_[d]);return h};var hl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};hl.prototype.getCoordinate=function(){return this._minCoord},hl.prototype.getRightmostSide=function(h,d){var m=this.getRightmostSideOfSegment(h,d);return m<0&&(m=this.getRightmostSideOfSegment(h,d-1)),m<0&&(this._minCoord=null,this.checkForRightmostCoordinate(h)),m},hl.prototype.findRightmostEdgeAtVertex=function(){var h=this._minDe.getEdge().getCoordinates();J.isTrue(this._minIndex>0&&this._minIndex<h.length,"rightmost point expected to be interior vertex of edge");var d=h[this._minIndex-1],m=h[this._minIndex+1],v=Mt.computeOrientation(this._minCoord,m,d),x=!1;(d.y<this._minCoord.y&&m.y<this._minCoord.y&&v===Mt.COUNTERCLOCKWISE||d.y>this._minCoord.y&&m.y>this._minCoord.y&&v===Mt.CLOCKWISE)&&(x=!0),x&&(this._minIndex=this._minIndex-1)},hl.prototype.getRightmostSideOfSegment=function(h,d){var m=h.getEdge().getCoordinates();if(d<0||d+1>=m.length||m[d].y===m[d+1].y)return-1;var v=cn.LEFT;return m[d].y<m[d+1].y&&(v=cn.RIGHT),v},hl.prototype.getEdge=function(){return this._orientedDe},hl.prototype.checkForRightmostCoordinate=function(h){for(var d=h.getEdge().getCoordinates(),m=0;m<d.length-1;m++)(null===this._minCoord||d[m].x>this._minCoord.x)&&(this._minDe=h,this._minIndex=m,this._minCoord=d[m])},hl.prototype.findRightmostEdgeAtNode=function(){var h=this._minDe.getNode().getEdges();this._minDe=h.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},hl.prototype.findEdge=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next();m.isForward()&&this.checkForRightmostCoordinate(m)}J.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===cn.LEFT&&(this._orientedDe=this._minDe.getSym())},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl};var Ja=function(h){function d(m,v){h.call(this,d.msgWithCoord(m,v)),this.pt=v?new $(v):null,this.name="TopologyException"}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getCoordinate=function(){return this.pt},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.msgWithCoord=function(m,v){return v?m:m+" [ "+v+" ]"},d}(le),sh=function(){this.array_=[]};sh.prototype.addLast=function(h){this.array_.push(h)},sh.prototype.removeFirst=function(){return this.array_.shift()},sh.prototype.isEmpty=function(){return 0===this.array_.length};var Ko=function(){this._finder=null,this._dirEdgeList=new tn,this._nodes=new tn,this._rightMostCoord=null,this._env=null,this._finder=new hl};Ko.prototype.clearVisitedEdges=function(){for(var h=this._dirEdgeList.iterator();h.hasNext();)h.next().setVisited(!1)},Ko.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ko.prototype.computeNodeDepth=function(h){for(var d=null,m=h.getEdges().iterator();m.hasNext();){var v=m.next();if(v.isVisited()||v.getSym().isVisited()){d=v;break}}if(null===d)throw new Ja("unable to find edge to compute depths at "+h.getCoordinate());h.getEdges().computeDepths(d);for(var x=h.getEdges().iterator();x.hasNext();){var B=x.next();B.setVisited(!0),this.copySymDepths(B)}},Ko.prototype.computeDepth=function(h){this.clearVisitedEdges();var d=this._finder.getEdge();d.setEdgeDepths(cn.RIGHT,h),this.copySymDepths(d),this.computeDepths(d)},Ko.prototype.create=function(h){this.addReachable(h),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ko.prototype.findResultEdges=function(){for(var h=this._dirEdgeList.iterator();h.hasNext();){var d=h.next();d.getDepth(cn.RIGHT)>=1&&d.getDepth(cn.LEFT)<=0&&!d.isInteriorAreaEdge()&&d.setInResult(!0)}},Ko.prototype.computeDepths=function(h){var d=new Df,m=new sh,v=h.getNode();for(m.addLast(v),d.add(v),h.setVisited(!0);!m.isEmpty();){var x=m.removeFirst();d.add(x),this.computeNodeDepth(x);for(var B=x.getEdges().iterator();B.hasNext();){var H=B.next().getSym();if(!H.isVisited()){var q=H.getNode();d.contains(q)||(m.addLast(q),d.add(q))}}}},Ko.prototype.compareTo=function(h){return this._rightMostCoord.x<h._rightMostCoord.x?-1:this._rightMostCoord.x>h._rightMostCoord.x?1:0},Ko.prototype.getEnvelope=function(){if(null===this._env){for(var h=new rn,d=this._dirEdgeList.iterator();d.hasNext();)for(var m=d.next().getEdge().getCoordinates(),v=0;v<m.length-1;v++)h.expandToInclude(m[v]);this._env=h}return this._env},Ko.prototype.addReachable=function(h){var d=new Ke;for(d.add(h);!d.empty();){var m=d.pop();this.add(m,d)}},Ko.prototype.copySymDepths=function(h){var d=h.getSym();d.setDepth(cn.LEFT,h.getDepth(cn.RIGHT)),d.setDepth(cn.RIGHT,h.getDepth(cn.LEFT))},Ko.prototype.add=function(h,d){h.setVisited(!0),this._nodes.add(h);for(var m=h.getEdges().iterator();m.hasNext();){var v=m.next();this._dirEdgeList.add(v);var x=v.getSym().getNode();x.isVisited()||d.push(x)}},Ko.prototype.getNodes=function(){return this._nodes},Ko.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ko.prototype.interfaces_=function(){return[Z]},Ko.prototype.getClass=function(){return Ko};var Ns=function h(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var m=arguments[0];this.init(1),this.location[cn.ON]=m}else if(arguments[0]instanceof h){var v=arguments[0];if(this.init(v.location.length),null!==v)for(var x=0;x<this.location.length;x++)this.location[x]=v.location[x]}}else if(3===arguments.length){var B=arguments[0],H=arguments[1],q=arguments[2];this.init(3),this.location[cn.ON]=B,this.location[cn.LEFT]=H,this.location[cn.RIGHT]=q}};Ns.prototype.setAllLocations=function(h){for(var d=0;d<this.location.length;d++)this.location[d]=h},Ns.prototype.isNull=function(){for(var h=0;h<this.location.length;h++)if(this.location[h]!==se.NONE)return!1;return!0},Ns.prototype.setAllLocationsIfNull=function(h){for(var d=0;d<this.location.length;d++)this.location[d]===se.NONE&&(this.location[d]=h)},Ns.prototype.isLine=function(){return 1===this.location.length},Ns.prototype.merge=function(h){if(h.location.length>this.location.length){var d=new Array(3).fill(null);d[cn.ON]=this.location[cn.ON],d[cn.LEFT]=se.NONE,d[cn.RIGHT]=se.NONE,this.location=d}for(var m=0;m<this.location.length;m++)this.location[m]===se.NONE&&m<h.location.length&&(this.location[m]=h.location[m])},Ns.prototype.getLocations=function(){return this.location},Ns.prototype.flip=function(){if(this.location.length<=1)return null;var h=this.location[cn.LEFT];this.location[cn.LEFT]=this.location[cn.RIGHT],this.location[cn.RIGHT]=h},Ns.prototype.toString=function(){var h=new Ce;return this.location.length>1&&h.append(se.toLocationSymbol(this.location[cn.LEFT])),h.append(se.toLocationSymbol(this.location[cn.ON])),this.location.length>1&&h.append(se.toLocationSymbol(this.location[cn.RIGHT])),h.toString()},Ns.prototype.setLocations=function(h,d,m){this.location[cn.ON]=h,this.location[cn.LEFT]=d,this.location[cn.RIGHT]=m},Ns.prototype.get=function(h){return h<this.location.length?this.location[h]:se.NONE},Ns.prototype.isArea=function(){return this.location.length>1},Ns.prototype.isAnyNull=function(){for(var h=0;h<this.location.length;h++)if(this.location[h]===se.NONE)return!0;return!1},Ns.prototype.setLocation=function(){1===arguments.length?this.setLocation(cn.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},Ns.prototype.init=function(h){this.location=new Array(h).fill(null),this.setAllLocations(se.NONE)},Ns.prototype.isEqualOnSide=function(h,d){return this.location[d]===h.location[d]},Ns.prototype.allPositionsEqual=function(h){for(var d=0;d<this.location.length;d++)if(this.location[d]!==h)return!1;return!0},Ns.prototype.interfaces_=function(){return[]},Ns.prototype.getClass=function(){return Ns};var hs=function h(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var d=arguments[0];this.elt[0]=new Ns(d),this.elt[1]=new Ns(d)}else if(arguments[0]instanceof h){var m=arguments[0];this.elt[0]=new Ns(m.elt[0]),this.elt[1]=new Ns(m.elt[1])}}else if(2===arguments.length){var v=arguments[0],x=arguments[1];this.elt[0]=new Ns(se.NONE),this.elt[1]=new Ns(se.NONE),this.elt[v].setLocation(x)}else if(3===arguments.length){var B=arguments[0],H=arguments[1],q=arguments[2];this.elt[0]=new Ns(B,H,q),this.elt[1]=new Ns(B,H,q)}else if(4===arguments.length){var pe=arguments[0],Ue=arguments[1],gt=arguments[2],pt=arguments[3];this.elt[0]=new Ns(se.NONE,se.NONE,se.NONE),this.elt[1]=new Ns(se.NONE,se.NONE,se.NONE),this.elt[pe].setLocations(Ue,gt,pt)}};hs.prototype.getGeometryCount=function(){var h=0;return this.elt[0].isNull()||h++,this.elt[1].isNull()||h++,h},hs.prototype.setAllLocations=function(h,d){this.elt[h].setAllLocations(d)},hs.prototype.isNull=function(h){return this.elt[h].isNull()},hs.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var h=arguments[0];this.setAllLocationsIfNull(0,h),this.setAllLocationsIfNull(1,h)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},hs.prototype.isLine=function(h){return this.elt[h].isLine()},hs.prototype.merge=function(h){for(var d=0;d<2;d++)null===this.elt[d]&&null!==h.elt[d]?this.elt[d]=new Ns(h.elt[d]):this.elt[d].merge(h.elt[d])},hs.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},hs.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(cn.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},hs.prototype.toString=function(){var h=new Ce;return null!==this.elt[0]&&(h.append("A:"),h.append(this.elt[0].toString())),null!==this.elt[1]&&(h.append(" B:"),h.append(this.elt[1].toString())),h.toString()},hs.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},hs.prototype.isAnyNull=function(h){return this.elt[h].isAnyNull()},hs.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(cn.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},hs.prototype.isEqualOnSide=function(h,d){return this.elt[0].isEqualOnSide(h.elt[0],d)&&this.elt[1].isEqualOnSide(h.elt[1],d)},hs.prototype.allPositionsEqual=function(h,d){return this.elt[h].allPositionsEqual(d)},hs.prototype.toLine=function(h){this.elt[h].isArea()&&(this.elt[h]=new Ns(this.elt[h].location[0]))},hs.prototype.interfaces_=function(){return[]},hs.prototype.getClass=function(){return hs},hs.toLineLabel=function(h){for(var d=new hs(se.NONE),m=0;m<2;m++)d.setLocation(m,h.getLocation(m));return d};var Ho=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new tn,this._pts=new tn,this._label=new hs(se.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new tn,this._geometryFactory=null;var h=arguments[0];this._geometryFactory=arguments[1],this.computePoints(h),this.computeRing()};Ho.prototype.computeRing=function(){if(null!==this._ring)return null;for(var h=new Array(this._pts.size()).fill(null),d=0;d<this._pts.size();d++)h[d]=this._pts.get(d);this._ring=this._geometryFactory.createLinearRing(h),this._isHole=Mt.isCCW(this._ring.getCoordinates())},Ho.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ho.prototype.computePoints=function(h){this._startDe=h;var d=h,m=!0;do{if(null===d)throw new Ja("Found null DirectedEdge");if(d.getEdgeRing()===this)throw new Ja("Directed Edge visited twice during ring-building at "+d.getCoordinate());this._edges.add(d);var v=d.getLabel();J.isTrue(v.isArea()),this.mergeLabel(v),this.addPoints(d.getEdge(),d.isForward(),m),m=!1,this.setEdgeRing(d,this),d=this.getNext(d)}while(d!==this._startDe)},Ho.prototype.getLinearRing=function(){return this._ring},Ho.prototype.getCoordinate=function(h){return this._pts.get(h)},Ho.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var h=this._startDe;do{var d=h.getNode().getEdges().getOutgoingDegree(this);d>this._maxNodeDegree&&(this._maxNodeDegree=d),h=this.getNext(h)}while(h!==this._startDe);this._maxNodeDegree*=2},Ho.prototype.addPoints=function(h,d,m){var v=h.getCoordinates();if(d){var x=1;m&&(x=0);for(var B=x;B<v.length;B++)this._pts.add(v[B])}else{var H=v.length-2;m&&(H=v.length-1);for(var q=H;q>=0;q--)this._pts.add(v[q])}},Ho.prototype.isHole=function(){return this._isHole},Ho.prototype.setInResult=function(){var h=this._startDe;do{h.getEdge().setInResult(!0),h=h.getNext()}while(h!==this._startDe)},Ho.prototype.containsPoint=function(h){var d=this.getLinearRing();if(!d.getEnvelopeInternal().contains(h)||!Mt.isPointInRing(h,d.getCoordinates()))return!1;for(var m=this._holes.iterator();m.hasNext();)if(m.next().containsPoint(h))return!1;return!0},Ho.prototype.addHole=function(h){this._holes.add(h)},Ho.prototype.isShell=function(){return null===this._shell},Ho.prototype.getLabel=function(){return this._label},Ho.prototype.getEdges=function(){return this._edges},Ho.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ho.prototype.getShell=function(){return this._shell},Ho.prototype.mergeLabel=function(){if(1===arguments.length){var h=arguments[0];this.mergeLabel(h,0),this.mergeLabel(h,1)}else if(2===arguments.length){var m=arguments[1],v=arguments[0].getLocation(m,cn.RIGHT);if(v===se.NONE)return null;if(this._label.getLocation(m)===se.NONE)return this._label.setLocation(m,v),null}},Ho.prototype.setShell=function(h){this._shell=h,null!==h&&h.addHole(this)},Ho.prototype.toPolygon=function(h){for(var d=new Array(this._holes.size()).fill(null),m=0;m<this._holes.size();m++)d[m]=this._holes.get(m).getLinearRing();return h.createPolygon(this.getLinearRing(),d)},Ho.prototype.interfaces_=function(){return[]},Ho.prototype.getClass=function(){return Ho};var Rf=function(h){function d(){h.call(this,arguments[0],arguments[1])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.setEdgeRing=function(m,v){m.setMinEdgeRing(v)},d.prototype.getNext=function(m){return m.getNextMin()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ho),Rm=function(h){function d(){h.call(this,arguments[0],arguments[1])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.buildMinimalRings=function(){var m=new tn,v=this._startDe;do{if(null===v.getMinEdgeRing()){var x=new Rf(v,this._geometryFactory);m.add(x)}v=v.getNext()}while(v!==this._startDe);return m},d.prototype.setEdgeRing=function(m,v){m.setEdgeRing(v)},d.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var m=this._startDe;do{m.getNode().getEdges().linkMinimalDirectedEdges(this),m=m.getNext()}while(m!==this._startDe)},d.prototype.getNext=function(m){return m.getNext()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ho),$2=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};$2.prototype.setVisited=function(h){this._isVisited=h},$2.prototype.setInResult=function(h){this._isInResult=h},$2.prototype.isCovered=function(){return this._isCovered},$2.prototype.isCoveredSet=function(){return this._isCoveredSet},$2.prototype.setLabel=function(h){this._label=h},$2.prototype.getLabel=function(){return this._label},$2.prototype.setCovered=function(h){this._isCovered=h,this._isCoveredSet=!0},$2.prototype.updateIM=function(h){J.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(h)},$2.prototype.isInResult=function(){return this._isInResult},$2.prototype.isVisited=function(){return this._isVisited},$2.prototype.interfaces_=function(){return[]},$2.prototype.getClass=function(){return $2};var f2=function(h){function d(){h.call(this),this._coord=null,this._edges=null;var v=arguments[1];this._coord=arguments[0],this._edges=v,this._label=new hs(0,se.NONE)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isIncidentEdgeInResult=function(){for(var m=this.getEdges().getEdges().iterator();m.hasNext();)if(m.next().getEdge().isInResult())return!0;return!1},d.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},d.prototype.getCoordinate=function(){return this._coord},d.prototype.print=function(m){m.println("node "+this._coord+" lbl: "+this._label)},d.prototype.computeIM=function(m){},d.prototype.computeMergedLocation=function(m,v){var x=se.NONE;if(x=this._label.getLocation(v),!m.isNull(v)){var B=m.getLocation(v);x!==se.BOUNDARY&&(x=B)}return x},d.prototype.setLabel=function(){if(2!==arguments.length)return h.prototype.setLabel.apply(this,arguments);var m=arguments[0],v=arguments[1];null===this._label?this._label=new hs(m,v):this._label.setLocation(m,v)},d.prototype.getEdges=function(){return this._edges},d.prototype.mergeLabel=function(){if(arguments[0]instanceof d)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof hs)for(var v=arguments[0],x=0;x<2;x++){var B=this.computeMergedLocation(v,x);this._label.getLocation(x)===se.NONE&&this._label.setLocation(x,B)}},d.prototype.add=function(m){this._edges.insert(m),m.setNode(this)},d.prototype.setLabelBoundary=function(m){if(null===this._label)return null;var v=se.NONE;null!==this._label&&(v=this._label.getLocation(m)),this._label.setLocation(m,v===se.BOUNDARY?se.INTERIOR:se.BOUNDARY)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}($2),ur=function(){this.nodeMap=new Ct,this.nodeFact=null,this.nodeFact=arguments[0]};ur.prototype.find=function(h){return this.nodeMap.get(h)},ur.prototype.addNode=function(){if(arguments[0]instanceof $){var h=arguments[0],d=this.nodeMap.get(h);return null===d&&(d=this.nodeFact.createNode(h),this.nodeMap.put(h,d)),d}if(arguments[0]instanceof f2){var m=arguments[0],v=this.nodeMap.get(m.getCoordinate());return null===v?(this.nodeMap.put(m.getCoordinate(),m),m):(v.mergeLabel(m),v)}},ur.prototype.print=function(h){for(var d=this.iterator();d.hasNext();)d.next().print(h)},ur.prototype.iterator=function(){return this.nodeMap.values().iterator()},ur.prototype.values=function(){return this.nodeMap.values()},ur.prototype.getBoundaryNodes=function(h){for(var d=new tn,m=this.iterator();m.hasNext();){var v=m.next();v.getLabel().getLocation(h)===se.BOUNDARY&&d.add(v)}return d},ur.prototype.add=function(h){var d=h.getCoordinate();this.addNode(d).add(h)},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var Es=function(){},Ff={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Es.prototype.interfaces_=function(){return[]},Es.prototype.getClass=function(){return Es},Es.isNorthern=function(h){return h===Es.NE||h===Es.NW},Es.isOpposite=function(h,d){return h!==d&&(h-d+4)%4==2},Es.commonHalfPlane=function(h,d){if(h===d)return h;if((h-d+4)%4==2)return-1;var m=h<d?h:d;return 0===m&&3===(h>d?h:d)?3:m},Es.isInHalfPlane=function(h,d){return d===Es.SE?h===Es.SE||h===Es.SW:h===d||h===d+1},Es.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1];if(0===h&&0===d)throw new X("Cannot compute the quadrant for point ( "+h+", "+d+" )");return h>=0?d>=0?Es.NE:Es.SE:d>=0?Es.NW:Es.SW}if(arguments[0]instanceof $&&arguments[1]instanceof $){var m=arguments[0],v=arguments[1];if(v.x===m.x&&v.y===m.y)throw new X("Cannot compute the quadrant for two identical points "+m);return v.x>=m.x?v.y>=m.y?Es.NE:Es.SE:v.y>=m.y?Es.NW:Es.SW}},Ff.NE.get=function(){return 0},Ff.NW.get=function(){return 1},Ff.SW.get=function(){return 2},Ff.SE.get=function(){return 3},Object.defineProperties(Es,Ff);var fo=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var m=arguments[1],v=arguments[2];this._edge=arguments[0],this.init(m,v),this._label=null}else if(4===arguments.length){var B=arguments[1],H=arguments[2],q=arguments[3];this._edge=arguments[0],this.init(B,H),this._label=q}};fo.prototype.compareDirection=function(h){return this._dx===h._dx&&this._dy===h._dy?0:this._quadrant>h._quadrant?1:this._quadrant<h._quadrant?-1:Mt.computeOrientation(h._p0,h._p1,this._p1)},fo.prototype.getDy=function(){return this._dy},fo.prototype.getCoordinate=function(){return this._p0},fo.prototype.setNode=function(h){this._node=h},fo.prototype.print=function(h){var d=Math.atan2(this._dy,this._dx),m=this.getClass().getName(),v=m.lastIndexOf("."),x=m.substring(v+1);h.print("  "+x+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+d+"   "+this._label)},fo.prototype.compareTo=function(h){return this.compareDirection(h)},fo.prototype.getDirectedCoordinate=function(){return this._p1},fo.prototype.getDx=function(){return this._dx},fo.prototype.getLabel=function(){return this._label},fo.prototype.getEdge=function(){return this._edge},fo.prototype.getQuadrant=function(){return this._quadrant},fo.prototype.getNode=function(){return this._node},fo.prototype.toString=function(){var h=Math.atan2(this._dy,this._dx),d=this.getClass().getName(),m=d.lastIndexOf(".");return"  "+d.substring(m+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label},fo.prototype.computeLabel=function(h){},fo.prototype.init=function(h,d){this._p0=h,this._p1=d,this._dx=d.x-h.x,this._dy=d.y-h.y,this._quadrant=Es.quadrant(this._dx,this._dy),J.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},fo.prototype.interfaces_=function(){return[Z]},fo.prototype.getClass=function(){return fo};var Lt=function(h){function d(){var m=arguments[0],v=arguments[1];if(h.call(this,m),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=v,v)this.init(m.getCoordinate(0),m.getCoordinate(1));else{var x=m.getNumPoints()-1;this.init(m.getCoordinate(x),m.getCoordinate(x-1))}this.computeDirectedLabel()}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getNextMin=function(){return this._nextMin},d.prototype.getDepth=function(m){return this._depth[m]},d.prototype.setVisited=function(m){this._isVisited=m},d.prototype.computeDirectedLabel=function(){this._label=new hs(this._edge.getLabel()),this._isForward||this._label.flip()},d.prototype.getNext=function(){return this._next},d.prototype.setDepth=function(m,v){if(-999!==this._depth[m]&&this._depth[m]!==v)throw new Ja("assigned depths do not match",this.getCoordinate());this._depth[m]=v},d.prototype.isInteriorAreaEdge=function(){for(var m=!0,v=0;v<2;v++)this._label.isArea(v)&&this._label.getLocation(v,cn.LEFT)===se.INTERIOR&&this._label.getLocation(v,cn.RIGHT)===se.INTERIOR||(m=!1);return m},d.prototype.setNextMin=function(m){this._nextMin=m},d.prototype.print=function(m){h.prototype.print.call(this,m),m.print(" "+this._depth[cn.LEFT]+"/"+this._depth[cn.RIGHT]),m.print(" ("+this.getDepthDelta()+")"),this._isInResult&&m.print(" inResult")},d.prototype.setMinEdgeRing=function(m){this._minEdgeRing=m},d.prototype.isLineEdge=function(){var m=this._label.isLine(0)||this._label.isLine(1),v=!this._label.isArea(0)||this._label.allPositionsEqual(0,se.EXTERIOR),x=!this._label.isArea(1)||this._label.allPositionsEqual(1,se.EXTERIOR);return m&&v&&x},d.prototype.setEdgeRing=function(m){this._edgeRing=m},d.prototype.getMinEdgeRing=function(){return this._minEdgeRing},d.prototype.getDepthDelta=function(){var m=this._edge.getDepthDelta();return this._isForward||(m=-m),m},d.prototype.setInResult=function(m){this._isInResult=m},d.prototype.getSym=function(){return this._sym},d.prototype.isForward=function(){return this._isForward},d.prototype.getEdge=function(){return this._edge},d.prototype.printEdge=function(m){this.print(m),m.print(" "),this._isForward?this._edge.print(m):this._edge.printReverse(m)},d.prototype.setSym=function(m){this._sym=m},d.prototype.setVisitedEdge=function(m){this.setVisited(m),this._sym.setVisited(m)},d.prototype.setEdgeDepths=function(m,v){var x=this.getEdge().getDepthDelta();this._isForward||(x=-x);var B=1;m===cn.LEFT&&(B=-1);var H=cn.opposite(m),q=v+x*B;this.setDepth(m,v),this.setDepth(H,q)},d.prototype.getEdgeRing=function(){return this._edgeRing},d.prototype.isInResult=function(){return this._isInResult},d.prototype.setNext=function(m){this._next=m},d.prototype.isVisited=function(){return this._isVisited},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.depthFactor=function(m,v){return m===se.EXTERIOR&&v===se.INTERIOR?1:m===se.INTERIOR&&v===se.EXTERIOR?-1:0},d}(fo),Z4=function(){};Z4.prototype.createNode=function(h){return new f2(h,null)},Z4.prototype.interfaces_=function(){return[]},Z4.prototype.getClass=function(){return Z4};var wn=function(){this._edges=new tn,this._nodes=null,this._edgeEndList=new tn,0===arguments.length?this._nodes=new ur(new Z4):1===arguments.length&&(this._nodes=new ur(arguments[0]))};wn.prototype.printEdges=function(h){h.println("Edges:");for(var d=0;d<this._edges.size();d++){h.println("edge "+d+":");var m=this._edges.get(d);m.print(h),m.eiList.print(h)}},wn.prototype.find=function(h){return this._nodes.find(h)},wn.prototype.addNode=function(){return arguments[0]instanceof f2||arguments[0]instanceof $?this._nodes.addNode(arguments[0]):void 0},wn.prototype.getNodeIterator=function(){return this._nodes.iterator()},wn.prototype.linkResultDirectedEdges=function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkResultDirectedEdges()},wn.prototype.debugPrintln=function(h){$t.out.println(h)},wn.prototype.isBoundaryNode=function(h,d){var m=this._nodes.find(d);if(null===m)return!1;var v=m.getLabel();return null!==v&&v.getLocation(h)===se.BOUNDARY},wn.prototype.linkAllDirectedEdges=function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkAllDirectedEdges()},wn.prototype.matchInSameDirection=function(h,d,m,v){return!!h.equals(m)&&Mt.computeOrientation(h,d,v)===Mt.COLLINEAR&&Es.quadrant(h,d)===Es.quadrant(m,v)},wn.prototype.getEdgeEnds=function(){return this._edgeEndList},wn.prototype.debugPrint=function(h){$t.out.print(h)},wn.prototype.getEdgeIterator=function(){return this._edges.iterator()},wn.prototype.findEdgeInSameDirection=function(h,d){for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m),x=v.getCoordinates();if(this.matchInSameDirection(h,d,x[0],x[1])||this.matchInSameDirection(h,d,x[x.length-1],x[x.length-2]))return v}return null},wn.prototype.insertEdge=function(h){this._edges.add(h)},wn.prototype.findEdgeEnd=function(h){for(var d=this.getEdgeEnds().iterator();d.hasNext();){var m=d.next();if(m.getEdge()===h)return m}return null},wn.prototype.addEdges=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next();this._edges.add(m);var v=new Lt(m,!0),x=new Lt(m,!1);v.setSym(x),x.setSym(v),this.add(v),this.add(x)}},wn.prototype.add=function(h){this._nodes.add(h),this._edgeEndList.add(h)},wn.prototype.getNodes=function(){return this._nodes.values()},wn.prototype.findEdge=function(h,d){for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m),x=v.getCoordinates();if(h.equals(x[0])&&d.equals(x[1]))return v}return null},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.linkResultDirectedEdges=function(h){for(var d=h.iterator();d.hasNext();)d.next().getEdges().linkResultDirectedEdges()};var e1=function(){this._geometryFactory=null,this._shellList=new tn,this._geometryFactory=arguments[0]};e1.prototype.sortShellsAndHoles=function(h,d,m){for(var v=h.iterator();v.hasNext();){var x=v.next();x.isHole()?m.add(x):d.add(x)}},e1.prototype.computePolygons=function(h){for(var d=new tn,m=h.iterator();m.hasNext();){var v=m.next().toPolygon(this._geometryFactory);d.add(v)}return d},e1.prototype.placeFreeHoles=function(h,d){for(var m=d.iterator();m.hasNext();){var v=m.next();if(null===v.getShell()){var x=this.findEdgeRingContaining(v,h);if(null===x)throw new Ja("unable to assign hole to a shell",v.getCoordinate(0));v.setShell(x)}}},e1.prototype.buildMinimalEdgeRings=function(h,d,m){for(var v=new tn,x=h.iterator();x.hasNext();){var B=x.next();if(B.getMaxNodeDegree()>2){B.linkDirectedEdgesForMinimalEdgeRings();var H=B.buildMinimalRings(),q=this.findShell(H);null!==q?(this.placePolygonHoles(q,H),d.add(q)):m.addAll(H)}else v.add(B)}return v},e1.prototype.containsPoint=function(h){for(var d=this._shellList.iterator();d.hasNext();)if(d.next().containsPoint(h))return!0;return!1},e1.prototype.buildMaximalEdgeRings=function(h){for(var d=new tn,m=h.iterator();m.hasNext();){var v=m.next();if(v.isInResult()&&v.getLabel().isArea()&&null===v.getEdgeRing()){var x=new Rm(v,this._geometryFactory);d.add(x),x.setInResult()}}return d},e1.prototype.placePolygonHoles=function(h,d){for(var m=d.iterator();m.hasNext();){var v=m.next();v.isHole()&&v.setShell(h)}},e1.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},e1.prototype.findEdgeRingContaining=function(h,d){for(var m=h.getLinearRing(),v=m.getEnvelopeInternal(),x=m.getCoordinateN(0),B=null,H=null,q=d.iterator();q.hasNext();){var pe=q.next(),Ue=pe.getLinearRing(),gt=Ue.getEnvelopeInternal();null!==B&&(H=B.getLinearRing().getEnvelopeInternal());var pt=!1;gt.contains(v)&&Mt.isPointInRing(x,Ue.getCoordinates())&&(pt=!0),pt&&(null===B||H.contains(gt))&&(B=pe)}return B},e1.prototype.findShell=function(h){for(var d=0,m=null,v=h.iterator();v.hasNext();){var x=v.next();x.isHole()||(m=x,d++)}return J.isTrue(d<=1,"found two shells in MinimalEdgeRing list"),m},e1.prototype.add=function(){if(1===arguments.length){var h=arguments[0];this.add(h.getEdgeEnds(),h.getNodes())}else if(2===arguments.length){var d=arguments[0];wn.linkResultDirectedEdges(arguments[1]);var v=this.buildMaximalEdgeRings(d),x=new tn,B=this.buildMinimalEdgeRings(v,this._shellList,x);this.sortShellsAndHoles(B,this._shellList,x),this.placeFreeHoles(this._shellList,x)}},e1.prototype.interfaces_=function(){return[]},e1.prototype.getClass=function(){return e1};var Ju=function(){};Ju.prototype.getBounds=function(){},Ju.prototype.interfaces_=function(){return[]},Ju.prototype.getClass=function(){return Ju};var q2=function(){this._bounds=null,this._item=null;var d=arguments[1];this._bounds=arguments[0],this._item=d};q2.prototype.getItem=function(){return this._item},q2.prototype.getBounds=function(){return this._bounds},q2.prototype.interfaces_=function(){return[Ju,ue]},q2.prototype.getClass=function(){return q2};var fl=function(){this._size=null,this._items=null,this._size=0,this._items=new tn,this._items.add(null)};fl.prototype.poll=function(){if(this.isEmpty())return null;var h=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),h},fl.prototype.size=function(){return this._size},fl.prototype.reorder=function(h){for(var d=null,m=this._items.get(h);2*h<=this._size&&((d=2*h)!==this._size&&this._items.get(d+1).compareTo(this._items.get(d))<0&&d++,this._items.get(d).compareTo(m)<0);h=d)this._items.set(h,this._items.get(d));this._items.set(h,m)},fl.prototype.clear=function(){this._size=0,this._items.clear()},fl.prototype.isEmpty=function(){return 0===this._size},fl.prototype.add=function(h){this._items.add(null),this._size+=1;var d=this._size;for(this._items.set(0,h);h.compareTo(this._items.get(Math.trunc(d/2)))<0;d/=2)this._items.set(d,this._items.get(Math.trunc(d/2)));this._items.set(d,h)},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl};var Kl=function(){};Kl.prototype.visitItem=function(h){},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var M3=function(){};M3.prototype.insert=function(h,d){},M3.prototype.remove=function(h,d){},M3.prototype.query=function(){},M3.prototype.interfaces_=function(){return[]},M3.prototype.getClass=function(){return M3};var Ao=function(){this._childBoundables=new tn,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},kf={serialVersionUID:{configurable:!0}};Ao.prototype.getLevel=function(){return this._level},Ao.prototype.size=function(){return this._childBoundables.size()},Ao.prototype.getChildBoundables=function(){return this._childBoundables},Ao.prototype.addChildBoundable=function(h){J.isTrue(null===this._bounds),this._childBoundables.add(h)},Ao.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ao.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ao.prototype.interfaces_=function(){return[Ju,ue]},Ao.prototype.getClass=function(){return Ao},kf.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ao,kf);var qs=function(){};qs.reverseOrder=function(){return{compare:function(h,d){return d.compareTo(h)}}},qs.min=function(h){return qs.sort(h),h.get(0)},qs.sort=function(h,d){var m=h.toArray();d?jl.sort(m,d):jl.sort(m);for(var v=h.iterator(),x=0,B=m.length;x<B;x++)v.next(),v.set(m[x])},qs.singletonList=function(h){var d=new tn;return d.add(h),d};var zo=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var d=arguments[1],m=arguments[2];this._boundable1=arguments[0],this._boundable2=d,this._itemDistance=m,this._distance=this.distance()};zo.prototype.expandToQueue=function(h,d){var m=zo.isComposite(this._boundable1),v=zo.isComposite(this._boundable2);if(m&&v)return zo.area(this._boundable1)>zo.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,h,d),null):(this.expand(this._boundable2,this._boundable1,h,d),null);if(m)return this.expand(this._boundable1,this._boundable2,h,d),null;if(v)return this.expand(this._boundable2,this._boundable1,h,d),null;throw new X("neither boundable is composite")},zo.prototype.isLeaves=function(){return!(zo.isComposite(this._boundable1)||zo.isComposite(this._boundable2))},zo.prototype.compareTo=function(h){return this._distance<h._distance?-1:this._distance>h._distance?1:0},zo.prototype.expand=function(h,d,m,v){for(var x=h.getChildBoundables().iterator();x.hasNext();){var B=x.next(),H=new zo(B,d,this._itemDistance);H.getDistance()<v&&m.add(H)}},zo.prototype.getBoundable=function(h){return 0===h?this._boundable1:this._boundable2},zo.prototype.getDistance=function(){return this._distance},zo.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},zo.prototype.interfaces_=function(){return[Z]},zo.prototype.getClass=function(){return zo},zo.area=function(h){return h.getBounds().getArea()},zo.isComposite=function(h){return h instanceof Ao};var Hn=function h(){if(this._root=null,this._built=!1,this._itemBoundables=new tn,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=h.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var m=arguments[0];J.isTrue(m>1,"Node capacity must be greater than 1"),this._nodeCapacity=m}},e0={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Hn.prototype.getNodeCapacity=function(){return this._nodeCapacity},Hn.prototype.lastNode=function(h){return h.get(h.size()-1)},Hn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var h=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var m=d.next();m instanceof Ao?h+=this.size(m):m instanceof q2&&(h+=1)}return h}},Hn.prototype.removeItem=function(h,d){for(var m=null,v=h.getChildBoundables().iterator();v.hasNext();){var x=v.next();x instanceof q2&&x.getItem()===d&&(m=x)}return null!==m&&(h.getChildBoundables().remove(m),!0)},Hn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var h=this.itemsTree(this._root);return null===h?new tn:h}if(1===arguments.length){for(var d=arguments[0],m=new tn,v=d.getChildBoundables().iterator();v.hasNext();){var x=v.next();if(x instanceof Ao){var B=this.itemsTree(x);null!==B&&m.add(B)}else x instanceof q2?m.add(x.getItem()):J.shouldNeverReachHere()}return m.size()<=0?null:m}},Hn.prototype.insert=function(h,d){J.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new q2(h,d))},Hn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var h=arguments[0],d=new tn;return this.boundablesAtLevel(h,this._root,d),d}if(3===arguments.length){var m=arguments[0],v=arguments[1],x=arguments[2];if(J.isTrue(m>-2),v.getLevel()===m)return x.add(v),null;for(var B=v.getChildBoundables().iterator();B.hasNext();){var H=B.next();H instanceof Ao?this.boundablesAtLevel(m,H,x):(J.isTrue(H instanceof q2),-1===m&&x.add(H))}return null}},Hn.prototype.query=function(){if(1===arguments.length){var h=arguments[0];this.build();var d=new tn;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),h)&&this.query(h,this._root,d),d}if(2===arguments.length){var m=arguments[0],v=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.query(m,this._root,v)}else if(3===arguments.length)if(At(arguments[2],Kl)&&arguments[0]instanceof Object&&arguments[1]instanceof Ao)for(var x=arguments[0],H=arguments[2],q=arguments[1].getChildBoundables(),pe=0;pe<q.size();pe++){var Ue=q.get(pe);this.getIntersectsOp().intersects(Ue.getBounds(),x)&&(Ue instanceof Ao?this.query(x,Ue,H):Ue instanceof q2?H.visitItem(Ue.getItem()):J.shouldNeverReachHere())}else if(At(arguments[2],ko)&&arguments[0]instanceof Object&&arguments[1]instanceof Ao)for(var gt=arguments[0],ln=arguments[2],bn=arguments[1].getChildBoundables(),Rn=0;Rn<bn.size();Rn++){var Zn=bn.get(Rn);this.getIntersectsOp().intersects(Zn.getBounds(),gt)&&(Zn instanceof Ao?this.query(gt,Zn,ln):Zn instanceof q2?ln.add(Zn.getItem()):J.shouldNeverReachHere())}},Hn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Hn.prototype.getRoot=function(){return this.build(),this._root},Hn.prototype.remove=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),h)&&this.remove(h,this._root,d)}if(3===arguments.length){var m=arguments[0],v=arguments[1],x=arguments[2],B=this.removeItem(v,x);if(B)return!0;for(var H=null,q=v.getChildBoundables().iterator();q.hasNext();){var pe=q.next();if(this.getIntersectsOp().intersects(pe.getBounds(),m)&&pe instanceof Ao&&(B=this.remove(m,pe,x))){H=pe;break}}return null!==H&&H.getChildBoundables().isEmpty()&&v.getChildBoundables().remove(H),B}},Hn.prototype.createHigherLevels=function(h,d){J.isTrue(!h.isEmpty());var m=this.createParentBoundables(h,d+1);return 1===m.size()?m.get(0):this.createHigherLevels(m,d+1)},Hn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var h=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var m=d.next();if(m instanceof Ao){var v=this.depth(m);v>h&&(h=v)}}return h+1}},Hn.prototype.createParentBoundables=function(h,d){J.isTrue(!h.isEmpty());var m=new tn;m.add(this.createNode(d));var v=new tn(h);qs.sort(v,this.getComparator());for(var x=v.iterator();x.hasNext();){var B=x.next();this.lastNode(m).getChildBoundables().size()===this.getNodeCapacity()&&m.add(this.createNode(d)),this.lastNode(m).addChildBoundable(B)}return m},Hn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Hn.prototype.interfaces_=function(){return[ue]},Hn.prototype.getClass=function(){return Hn},Hn.compareDoubles=function(h,d){return h>d?1:h<d?-1:0},e0.IntersectsOp.get=function(){return Fm},e0.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},e0.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Hn,e0);var Fm=function(){},j1=function(){};j1.prototype.distance=function(h,d){},j1.prototype.interfaces_=function(){return[]},j1.prototype.getClass=function(){return j1};var L6=function(h){function d(v){h.call(this,v=v||d.DEFAULT_NODE_CAPACITY)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return d.prototype.createParentBoundablesFromVerticalSlices=function(v,x){J.isTrue(v.length>0);for(var B=new tn,H=0;H<v.length;H++)B.addAll(this.createParentBoundablesFromVerticalSlice(v[H],x));return B},d.prototype.createNode=function(v){return new Pf(v)},d.prototype.size=function(){return 0===arguments.length?h.prototype.size.call(this):h.prototype.size.apply(this,arguments)},d.prototype.insert=function(){if(2!==arguments.length)return h.prototype.insert.apply(this,arguments);var v=arguments[0],x=arguments[1];if(v.isNull())return null;h.prototype.insert.call(this,v,x)},d.prototype.getIntersectsOp=function(){return d.intersectsOp},d.prototype.verticalSlices=function(v,x){for(var B=Math.trunc(Math.ceil(v.size()/x)),H=new Array(x).fill(null),q=v.iterator(),pe=0;pe<x;pe++){H[pe]=new tn;for(var Ue=0;q.hasNext()&&Ue<B;){var gt=q.next();H[pe].add(gt),Ue++}}return H},d.prototype.query=function(){if(1===arguments.length)return h.prototype.query.call(this,arguments[0]);2===arguments.length?h.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(At(arguments[2],Kl)&&arguments[0]instanceof Object&&arguments[1]instanceof Ao||At(arguments[2],ko)&&arguments[0]instanceof Object&&arguments[1]instanceof Ao)&&h.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},d.prototype.getComparator=function(){return d.yComparator},d.prototype.createParentBoundablesFromVerticalSlice=function(v,x){return h.prototype.createParentBoundables.call(this,v,x)},d.prototype.remove=function(){return 2===arguments.length?h.prototype.remove.call(this,arguments[0],arguments[1]):h.prototype.remove.apply(this,arguments)},d.prototype.depth=function(){return 0===arguments.length?h.prototype.depth.call(this):h.prototype.depth.apply(this,arguments)},d.prototype.createParentBoundables=function(v,x){J.isTrue(!v.isEmpty());var B=Math.trunc(Math.ceil(v.size()/this.getNodeCapacity())),H=new tn(v);qs.sort(H,d.xComparator);var q=this.verticalSlices(H,Math.trunc(Math.ceil(Math.sqrt(B))));return this.createParentBoundablesFromVerticalSlices(q,x)},d.prototype.nearestNeighbour=function(){if(1===arguments.length){if(At(arguments[0],j1)){var v=arguments[0],x=new zo(this.getRoot(),this.getRoot(),v);return this.nearestNeighbour(x)}if(arguments[0]instanceof zo)return this.nearestNeighbour(arguments[0],Y.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof d&&At(arguments[1],j1)){var H=arguments[0],q=arguments[1],pe=new zo(this.getRoot(),H.getRoot(),q);return this.nearestNeighbour(pe)}if(arguments[0]instanceof zo&&"number"==typeof arguments[1]){var Ue=arguments[0],gt=arguments[1],pt=null,ln=new fl;for(ln.add(Ue);!ln.isEmpty()&&gt>0;){var bn=ln.poll(),Rn=bn.getDistance();if(Rn>=gt)break;bn.isLeaves()?(gt=Rn,pt=bn):bn.expandToQueue(ln,gt)}return[pt.getBoundable(0).getItem(),pt.getBoundable(1).getItem()]}}else if(3===arguments.length){var So=arguments[2],o1=new q2(arguments[0],arguments[1]),ml=new zo(this.getRoot(),o1,So);return this.nearestNeighbour(ml)[0]}},d.prototype.interfaces_=function(){return[M3,ue]},d.prototype.getClass=function(){return d},d.centreX=function(v){return d.avg(v.getMinX(),v.getMaxX())},d.avg=function(v,x){return(v+x)/2},d.centreY=function(v){return d.avg(v.getMinY(),v.getMaxY())},m.STRtreeNode.get=function(){return Pf},m.serialVersionUID.get=function(){return 0x39920f7d5f261e0},m.xComparator.get=function(){return{interfaces_:function(){return[ce]},compare:function(v,x){return h.compareDoubles(d.centreX(v.getBounds()),d.centreX(x.getBounds()))}}},m.yComparator.get=function(){return{interfaces_:function(){return[ce]},compare:function(v,x){return h.compareDoubles(d.centreY(v.getBounds()),d.centreY(x.getBounds()))}}},m.intersectsOp.get=function(){return{interfaces_:function(){return[h.IntersectsOp]},intersects:function(v,x){return v.intersects(x)}}},m.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(d,m),d}(Hn),Pf=function(h){function d(){h.call(this,arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.computeBounds=function(){for(var m=null,v=this.getChildBoundables().iterator();v.hasNext();){var x=v.next();null===m?m=new rn(x.getBounds()):m.expandToInclude(x.getBounds())}return m},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ao),po=function(){};po.prototype.interfaces_=function(){return[]},po.prototype.getClass=function(){return po},po.relativeSign=function(h,d){return h<d?-1:h>d?1:0},po.compare=function(h,d,m){if(d.equals2D(m))return 0;var v=po.relativeSign(d.x,m.x),x=po.relativeSign(d.y,m.y);switch(h){case 0:return po.compareValue(v,x);case 1:return po.compareValue(x,v);case 2:return po.compareValue(x,-v);case 3:return po.compareValue(-v,x);case 4:return po.compareValue(-v,-x);case 5:return po.compareValue(-x,-v);case 6:return po.compareValue(-x,v);case 7:return po.compareValue(v,-x)}return J.shouldNeverReachHere("invalid octant value"),0},po.compareValue=function(h,d){return h<0?-1:h>0?1:d<0?-1:d>0?1:0};var Ba=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var h=arguments[0],d=arguments[1],m=arguments[2],v=arguments[3];this._segString=h,this.coord=new $(d),this.segmentIndex=m,this._segmentOctant=v,this._isInterior=!d.equals2D(h.getCoordinate(m))};Ba.prototype.getCoordinate=function(){return this.coord},Ba.prototype.print=function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex)},Ba.prototype.compareTo=function(h){var d=h;return this.segmentIndex<d.segmentIndex?-1:this.segmentIndex>d.segmentIndex?1:this.coord.equals2D(d.coord)?0:po.compare(this._segmentOctant,this.coord,d.coord)},Ba.prototype.isEndPoint=function(h){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===h},Ba.prototype.isInterior=function(){return this._isInterior},Ba.prototype.interfaces_=function(){return[Z]},Ba.prototype.getClass=function(){return Ba};var $1=function(){this._nodeMap=new Ct,this._edge=null,this._edge=arguments[0]};$1.prototype.getSplitCoordinates=function(){var h=new l2;this.addEndpoints();for(var d=this.iterator(),m=d.next();d.hasNext();){var v=d.next();this.addEdgeCoordinates(m,v,h),m=v}return h.toCoordinateArray()},$1.prototype.addCollapsedNodes=function(){var h=new tn;this.findCollapsesFromInsertedNodes(h),this.findCollapsesFromExistingVertices(h);for(var d=h.iterator();d.hasNext();){var m=d.next().intValue();this.add(this._edge.getCoordinate(m),m)}},$1.prototype.print=function(h){h.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(h)},$1.prototype.findCollapsesFromExistingVertices=function(h){for(var d=0;d<this._edge.size()-2;d++){var m=this._edge.getCoordinate(d),v=this._edge.getCoordinate(d+2);m.equals2D(v)&&h.add(new Qe(d+1))}},$1.prototype.addEdgeCoordinates=function(h,d,m){var v=this._edge.getCoordinate(d.segmentIndex),x=d.isInterior()||!d.coord.equals2D(v);m.add(new $(h.coord),!1);for(var B=h.segmentIndex+1;B<=d.segmentIndex;B++)m.add(this._edge.getCoordinate(B));x&&m.add(new $(d.coord))},$1.prototype.iterator=function(){return this._nodeMap.values().iterator()},$1.prototype.addSplitEdges=function(h){this.addEndpoints(),this.addCollapsedNodes();for(var d=this.iterator(),m=d.next();d.hasNext();){var v=d.next(),x=this.createSplitEdge(m,v);h.add(x),m=v}},$1.prototype.findCollapseIndex=function(h,d,m){if(!h.coord.equals2D(d.coord))return!1;var v=d.segmentIndex-h.segmentIndex;return d.isInterior()||v--,1===v&&(m[0]=h.segmentIndex+1,!0)},$1.prototype.findCollapsesFromInsertedNodes=function(h){for(var d=new Array(1).fill(null),m=this.iterator(),v=m.next();m.hasNext();){var x=m.next();this.findCollapseIndex(v,x,d)&&h.add(new Qe(d[0])),v=x}},$1.prototype.getEdge=function(){return this._edge},$1.prototype.addEndpoints=function(){var h=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(h),h)},$1.prototype.createSplitEdge=function(h,d){var m=d.segmentIndex-h.segmentIndex+2,v=this._edge.getCoordinate(d.segmentIndex),x=d.isInterior()||!d.coord.equals2D(v);x||m--;var B=new Array(m).fill(null),H=0;B[H++]=new $(h.coord);for(var q=h.segmentIndex+1;q<=d.segmentIndex;q++)B[H++]=this._edge.getCoordinate(q);return x&&(B[H]=new $(d.coord)),new No(B,this._edge.getData())},$1.prototype.add=function(h,d){var m=new Ba(this._edge,h,d,this._edge.getSegmentOctant(d)),v=this._nodeMap.get(m);return null!==v?(J.isTrue(v.coord.equals2D(h),"Found equal nodes with different coordinates"),v):(this._nodeMap.put(m,m),m)},$1.prototype.checkSplitEdgesCorrectness=function(h){var d=this._edge.getCoordinates(),m=h.get(0).getCoordinate(0);if(!m.equals2D(d[0]))throw new le("bad split edge start point at "+m);var v=h.get(h.size()-1).getCoordinates(),x=v[v.length-1];if(!x.equals2D(d[d.length-1]))throw new le("bad split edge end point at "+x)},$1.prototype.interfaces_=function(){return[]},$1.prototype.getClass=function(){return $1};var pc=function(){};pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},pc.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1];if(0===h&&0===d)throw new X("Cannot compute the octant for point ( "+h+", "+d+" )");var m=Math.abs(h),v=Math.abs(d);return h>=0?d>=0?m>=v?0:1:m>=v?7:6:d>=0?m>=v?3:2:m>=v?4:5}if(arguments[0]instanceof $&&arguments[1]instanceof $){var x=arguments[0],B=arguments[1],H=B.x-x.x,q=B.y-x.y;if(0===H&&0===q)throw new X("Cannot compute the octant for two identical points "+x);return pc.octant(H,q)}};var Oo=function(){};Oo.prototype.getCoordinates=function(){},Oo.prototype.size=function(){},Oo.prototype.getCoordinate=function(h){},Oo.prototype.isClosed=function(){},Oo.prototype.setData=function(h){},Oo.prototype.getData=function(){},Oo.prototype.interfaces_=function(){return[]},Oo.prototype.getClass=function(){return Oo};var _s=function(){};_s.prototype.addIntersection=function(h,d){},_s.prototype.interfaces_=function(){return[Oo]},_s.prototype.getClass=function(){return _s};var No=function(){this._nodeList=new $1(this),this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};No.prototype.getCoordinates=function(){return this._pts},No.prototype.size=function(){return this._pts.length},No.prototype.getCoordinate=function(h){return this._pts[h]},No.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},No.prototype.getSegmentOctant=function(h){return h===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(h),this.getCoordinate(h+1))},No.prototype.setData=function(h){this._data=h},No.prototype.safeOctant=function(h,d){return h.equals2D(d)?0:pc.octant(h,d)},No.prototype.getData=function(){return this._data},No.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var v=arguments[1],B=new $(arguments[0].getIntersection(arguments[3]));this.addIntersection(B,v)}},No.prototype.toString=function(){return nt.toLineString(new ho(this._pts))},No.prototype.getNodeList=function(){return this._nodeList},No.prototype.addIntersectionNode=function(h,d){var m=d,v=m+1;return v<this._pts.length&&h.equals2D(this._pts[v])&&(m=v),this._nodeList.add(h,m)},No.prototype.addIntersections=function(h,d,m){for(var v=0;v<h.getIntersectionNum();v++)this.addIntersection(h,d,m,v)},No.prototype.interfaces_=function(){return[_s]},No.prototype.getClass=function(){return No},No.getNodedSubstrings=function(){if(1===arguments.length){var h=arguments[0],d=new tn;return No.getNodedSubstrings(h,d),d}if(2===arguments.length)for(var v=arguments[1],x=arguments[0].iterator();x.hasNext();)x.next().getNodeList().addSplitEdges(v)};var li=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new $,this.p1=new $;else if(1===arguments.length){var h=arguments[0];this.p0=new $(h.p0),this.p1=new $(h.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var v=arguments[2],x=arguments[3];this.p0=new $(arguments[0],arguments[1]),this.p1=new $(v,x)}},J4={serialVersionUID:{configurable:!0}};li.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},li.prototype.orientationIndex=function(){if(arguments[0]instanceof li){var h=arguments[0],d=Mt.orientationIndex(this.p0,this.p1,h.p0),m=Mt.orientationIndex(this.p0,this.p1,h.p1);return d>=0&&m>=0||d<=0&&m<=0?Math.max(d,m):0}if(arguments[0]instanceof $)return Mt.orientationIndex(this.p0,this.p1,arguments[0])},li.prototype.toGeometry=function(h){return h.createLineString([this.p0,this.p1])},li.prototype.isVertical=function(){return this.p0.x===this.p1.x},li.prototype.equals=function(h){if(!(h instanceof li))return!1;var d=h;return this.p0.equals(d.p0)&&this.p1.equals(d.p1)},li.prototype.intersection=function(h){var d=new mt;return d.computeIntersection(this.p0,this.p1,h.p0,h.p1),d.hasIntersection()?d.getIntersection(0):null},li.prototype.project=function(){if(arguments[0]instanceof $){var h=arguments[0];if(h.equals(this.p0)||h.equals(this.p1))return new $(h);var d=this.projectionFactor(h),m=new $;return m.x=this.p0.x+d*(this.p1.x-this.p0.x),m.y=this.p0.y+d*(this.p1.y-this.p0.y),m}if(arguments[0]instanceof li){var v=arguments[0],x=this.projectionFactor(v.p0),B=this.projectionFactor(v.p1);if(x>=1&&B>=1||x<=0&&B<=0)return null;var H=this.project(v.p0);x<0&&(H=this.p0),x>1&&(H=this.p1);var q=this.project(v.p1);return B<0&&(q=this.p0),B>1&&(q=this.p1),new li(H,q)}},li.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},li.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},li.prototype.getCoordinate=function(h){return 0===h?this.p0:this.p1},li.prototype.distancePerpendicular=function(h){return Mt.distancePointLinePerpendicular(h,this.p0,this.p1)},li.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},li.prototype.midPoint=function(){return li.midPoint(this.p0,this.p1)},li.prototype.projectionFactor=function(h){if(h.equals(this.p0))return 0;if(h.equals(this.p1))return 1;var d=this.p1.x-this.p0.x,m=this.p1.y-this.p0.y,v=d*d+m*m;return v<=0?Y.NaN:((h.x-this.p0.x)*d+(h.y-this.p0.y)*m)/v},li.prototype.closestPoints=function(h){var d=this.intersection(h);if(null!==d)return[d,d];var m=new Array(2).fill(null),v=Y.MAX_VALUE,x=null,B=this.closestPoint(h.p0);v=B.distance(h.p0),m[0]=B,m[1]=h.p0;var H=this.closestPoint(h.p1);(x=H.distance(h.p1))<v&&(v=x,m[0]=H,m[1]=h.p1);var q=h.closestPoint(this.p0);(x=q.distance(this.p0))<v&&(v=x,m[0]=this.p0,m[1]=q);var pe=h.closestPoint(this.p1);return(x=pe.distance(this.p1))<v&&(v=x,m[0]=this.p1,m[1]=pe),m},li.prototype.closestPoint=function(h){var d=this.projectionFactor(h);return d>0&&d<1?this.project(h):this.p0.distance(h)<this.p1.distance(h)?this.p0:this.p1},li.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},li.prototype.getLength=function(){return this.p0.distance(this.p1)},li.prototype.compareTo=function(h){var d=h,m=this.p0.compareTo(d.p0);return 0!==m?m:this.p1.compareTo(d.p1)},li.prototype.reverse=function(){var h=this.p0;this.p0=this.p1,this.p1=h},li.prototype.equalsTopo=function(h){return this.p0.equals(h.p0)&&(this.p1.equals(h.p1)||this.p0.equals(h.p1))&&this.p1.equals(h.p0)},li.prototype.lineIntersection=function(h){try{return $n.intersection(this.p0,this.p1,h.p0,h.p1)}catch(d){if(!(d instanceof ci))throw d}return null},li.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},li.prototype.pointAlongOffset=function(h,d){var m=this.p0.x+h*(this.p1.x-this.p0.x),v=this.p0.y+h*(this.p1.y-this.p0.y),x=this.p1.x-this.p0.x,B=this.p1.y-this.p0.y,H=Math.sqrt(x*x+B*B),q=0,pe=0;if(0!==d){if(H<=0)throw new Error("Cannot compute offset from zero-length line segment");q=d*x/H,pe=d*B/H}return new $(m-pe,v+q)},li.prototype.setCoordinates=function(){if(1===arguments.length){var h=arguments[0];this.setCoordinates(h.p0,h.p1)}else if(2===arguments.length){var d=arguments[0],m=arguments[1];this.p0.x=d.x,this.p0.y=d.y,this.p1.x=m.x,this.p1.y=m.y}},li.prototype.segmentFraction=function(h){var d=this.projectionFactor(h);return d<0?d=0:(d>1||Y.isNaN(d))&&(d=1),d},li.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},li.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},li.prototype.distance=function(){if(arguments[0]instanceof li){var h=arguments[0];return Mt.distanceLineLine(this.p0,this.p1,h.p0,h.p1)}if(arguments[0]instanceof $)return Mt.distancePointLine(arguments[0],this.p0,this.p1)},li.prototype.pointAlong=function(h){var d=new $;return d.x=this.p0.x+h*(this.p1.x-this.p0.x),d.y=this.p0.y+h*(this.p1.y-this.p0.y),d},li.prototype.hashCode=function(){var h=Y.doubleToLongBits(this.p0.x);h^=31*Y.doubleToLongBits(this.p0.y);var d=Math.trunc(h)^Math.trunc(h>>32),m=Y.doubleToLongBits(this.p1.x);return m^=31*Y.doubleToLongBits(this.p1.y),d^Math.trunc(m)^Math.trunc(m>>32)},li.prototype.interfaces_=function(){return[Z,ue]},li.prototype.getClass=function(){return li},li.midPoint=function(h,d){return new $((h.x+d.x)/2,(h.y+d.y)/2)},J4.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(li,J4);var kr=function(){this.tempEnv1=new rn,this.tempEnv2=new rn,this._overlapSeg1=new li,this._overlapSeg2=new li};kr.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var m=arguments[2],v=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),m.getLineSegment(v,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr};var t1=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var d=arguments[1],m=arguments[2],v=arguments[3];this._pts=arguments[0],this._start=d,this._end=m,this._context=v};t1.prototype.getLineSegment=function(h,d){d.p0=this._pts[h],d.p1=this._pts[h+1]},t1.prototype.computeSelect=function(h,d,m,v){if(v.tempEnv1.init(this._pts[d],this._pts[m]),m-d==1)return v.select(this,d),null;if(!h.intersects(v.tempEnv1))return null;var H=Math.trunc((d+m)/2);d<H&&this.computeSelect(h,d,H,v),H<m&&this.computeSelect(h,H,m,v)},t1.prototype.getCoordinates=function(){for(var h=new Array(this._end-this._start+1).fill(null),d=0,m=this._start;m<=this._end;m++)h[d++]=this._pts[m];return h},t1.prototype.computeOverlaps=function(h,d){this.computeOverlapsInternal(this._start,this._end,h,h._start,h._end,d)},t1.prototype.setId=function(h){this._id=h},t1.prototype.select=function(h,d){this.computeSelect(h,this._start,this._end,d)},t1.prototype.getEnvelope=function(){return null===this._env&&(this._env=new rn(this._pts[this._start],this._pts[this._end])),this._env},t1.prototype.getEndIndex=function(){return this._end},t1.prototype.getStartIndex=function(){return this._start},t1.prototype.getContext=function(){return this._context},t1.prototype.getId=function(){return this._id},t1.prototype.computeOverlapsInternal=function(h,d,m,v,x,B){var H=this._pts[h],q=this._pts[d],pe=m._pts[v],Ue=m._pts[x];if(d-h==1&&x-v==1)return B.overlap(this,h,m,v),null;if(B.tempEnv1.init(H,q),B.tempEnv2.init(pe,Ue),!B.tempEnv1.intersects(B.tempEnv2))return null;var gt=Math.trunc((h+d)/2),pt=Math.trunc((v+x)/2);h<gt&&(v<pt&&this.computeOverlapsInternal(h,gt,m,v,pt,B),pt<x&&this.computeOverlapsInternal(h,gt,m,pt,x,B)),gt<d&&(v<pt&&this.computeOverlapsInternal(gt,d,m,v,pt,B),pt<x&&this.computeOverlapsInternal(gt,d,m,pt,x,B))},t1.prototype.interfaces_=function(){return[]},t1.prototype.getClass=function(){return t1};var K2=function(){};K2.prototype.interfaces_=function(){return[]},K2.prototype.getClass=function(){return K2},K2.getChainStartIndices=function(h){var d=0,m=new tn;m.add(new Qe(d));do{var v=K2.findChainEnd(h,d);m.add(new Qe(v)),d=v}while(d<h.length-1);return K2.toIntArray(m)},K2.findChainEnd=function(h,d){for(var m=d;m<h.length-1&&h[m].equals2D(h[m+1]);)m++;if(m>=h.length-1)return h.length-1;for(var v=Es.quadrant(h[m],h[m+1]),x=d+1;x<h.length&&(h[x-1].equals2D(h[x])||Es.quadrant(h[x-1],h[x])===v);)x++;return x-1},K2.getChains=function(){if(1===arguments.length)return K2.getChains(arguments[0],null);if(2===arguments.length){for(var d=arguments[0],m=arguments[1],v=new tn,x=K2.getChainStartIndices(d),B=0;B<x.length-1;B++){var H=new t1(d,x[B],x[B+1],m);v.add(H)}return v}},K2.toIntArray=function(h){for(var d=new Array(h.size()).fill(null),m=0;m<d.length;m++)d[m]=h.get(m).intValue();return d};var Xl=function(){};Xl.prototype.computeNodes=function(h){},Xl.prototype.getNodedSubstrings=function(){},Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl};var t0=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};t0.prototype.setSegmentIntersector=function(h){this._segInt=h},t0.prototype.interfaces_=function(){return[Xl]},t0.prototype.getClass=function(){return t0};var dl=function(h){function d(v){v?h.call(this,v):h.call(this),this._monoChains=new tn,this._index=new L6,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={SegmentOverlapAction:{configurable:!0}};return d.prototype.getMonotoneChains=function(){return this._monoChains},d.prototype.getNodedSubstrings=function(){return No.getNodedSubstrings(this._nodedSegStrings)},d.prototype.getIndex=function(){return this._index},d.prototype.add=function(v){for(var x=K2.getChains(v.getCoordinates(),v).iterator();x.hasNext();){var B=x.next();B.setId(this._idCounter++),this._index.insert(B.getEnvelope(),B),this._monoChains.add(B)}},d.prototype.computeNodes=function(v){this._nodedSegStrings=v;for(var x=v.iterator();x.hasNext();)this.add(x.next());this.intersectChains()},d.prototype.intersectChains=function(){for(var v=new n0(this._segInt),x=this._monoChains.iterator();x.hasNext();)for(var B=x.next(),H=this._index.query(B.getEnvelope()).iterator();H.hasNext();){var q=H.next();if(q.getId()>B.getId()&&(B.computeOverlaps(q,v),this._nOverlaps++),this._segInt.isDone())return null}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.SegmentOverlapAction.get=function(){return n0},Object.defineProperties(d,m),d}(t0),n0=function(h){function d(){h.call(this),this._si=null,this._si=arguments[0]}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.overlap=function(){if(4!==arguments.length)return h.prototype.overlap.apply(this,arguments);var v=arguments[1],x=arguments[2],B=arguments[3],H=arguments[0].getContext(),q=x.getContext();this._si.processIntersections(H,v,q,B)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(kr),Lr=function h(){if(this._quadrantSegments=h.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=h.CAP_ROUND,this._joinStyle=h.JOIN_ROUND,this._mitreLimit=h.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=h.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var v=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(v)}else if(4===arguments.length){var B=arguments[1],H=arguments[2],q=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(B),this.setJoinStyle(H),this.setMitreLimit(q)}},On={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Lr.prototype.getEndCapStyle=function(){return this._endCapStyle},Lr.prototype.isSingleSided=function(){return this._isSingleSided},Lr.prototype.setQuadrantSegments=function(h){this._quadrantSegments=h,0===this._quadrantSegments&&(this._joinStyle=Lr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Lr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),h<=0&&(this._quadrantSegments=1),this._joinStyle!==Lr.JOIN_ROUND&&(this._quadrantSegments=Lr.DEFAULT_QUADRANT_SEGMENTS)},Lr.prototype.getJoinStyle=function(){return this._joinStyle},Lr.prototype.setJoinStyle=function(h){this._joinStyle=h},Lr.prototype.setSimplifyFactor=function(h){this._simplifyFactor=h<0?0:h},Lr.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Lr.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Lr.prototype.setEndCapStyle=function(h){this._endCapStyle=h},Lr.prototype.getMitreLimit=function(){return this._mitreLimit},Lr.prototype.setMitreLimit=function(h){this._mitreLimit=h},Lr.prototype.setSingleSided=function(h){this._isSingleSided=h},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.bufferDistanceError=function(h){var d=Math.PI/2/h;return 1-Math.cos(d/2)},On.CAP_ROUND.get=function(){return 1},On.CAP_FLAT.get=function(){return 2},On.CAP_SQUARE.get=function(){return 3},On.JOIN_ROUND.get=function(){return 1},On.JOIN_MITRE.get=function(){return 2},On.JOIN_BEVEL.get=function(){return 3},On.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},On.DEFAULT_MITRE_LIMIT.get=function(){return 5},On.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Lr,On);var Ks=function(h){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Mt.COUNTERCLOCKWISE,this._inputLine=h||null},r0={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Ks.prototype.isDeletable=function(h,d,m,v){var x=this._inputLine[h],B=this._inputLine[d],H=this._inputLine[m];return!!this.isConcave(x,B,H)&&!!this.isShallow(x,B,H,v)&&this.isShallowSampled(x,B,h,m,v)},Ks.prototype.deleteShallowConcavities=function(){for(var h=1,d=this.findNextNonDeletedIndex(h),m=this.findNextNonDeletedIndex(d),v=!1;m<this._inputLine.length;){var x=!1;this.isDeletable(h,d,m,this._distanceTol)&&(this._isDeleted[d]=Ks.DELETE,x=!0,v=!0),d=this.findNextNonDeletedIndex(h=x?m:d),m=this.findNextNonDeletedIndex(d)}return v},Ks.prototype.isShallowConcavity=function(h,d,m,v){return Mt.computeOrientation(h,d,m)===this._angleOrientation&&Mt.distancePointLine(d,h,m)<v},Ks.prototype.isShallowSampled=function(h,d,m,v,x){var B=Math.trunc((v-m)/Ks.NUM_PTS_TO_CHECK);B<=0&&(B=1);for(var H=m;H<v;H+=B)if(!this.isShallow(h,d,this._inputLine[H],x))return!1;return!0},Ks.prototype.isConcave=function(h,d,m){return Mt.computeOrientation(h,d,m)===this._angleOrientation},Ks.prototype.simplify=function(h){this._distanceTol=Math.abs(h),h<0&&(this._angleOrientation=Mt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var d=!1;do{d=this.deleteShallowConcavities()}while(d);return this.collapseLine()},Ks.prototype.findNextNonDeletedIndex=function(h){for(var d=h+1;d<this._inputLine.length&&this._isDeleted[d]===Ks.DELETE;)d++;return d},Ks.prototype.isShallow=function(h,d,m,v){return Mt.distancePointLine(d,h,m)<v},Ks.prototype.collapseLine=function(){for(var h=new l2,d=0;d<this._inputLine.length;d++)this._isDeleted[d]!==Ks.DELETE&&h.add(this._inputLine[d]);return h.toCoordinateArray()},Ks.prototype.interfaces_=function(){return[]},Ks.prototype.getClass=function(){return Ks},Ks.simplify=function(h,d){return new Ks(h).simplify(d)},r0.INIT.get=function(){return 0},r0.DELETE.get=function(){return 1},r0.KEEP.get=function(){return 1},r0.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Ks,r0);var d2=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new tn},oi={COORDINATE_ARRAY_TYPE:{configurable:!0}};d2.prototype.getCoordinates=function(){return this._ptList.toArray(d2.COORDINATE_ARRAY_TYPE)},d2.prototype.setPrecisionModel=function(h){this._precisionModel=h},d2.prototype.addPt=function(h){var d=new $(h);if(this._precisionModel.makePrecise(d),this.isRedundant(d))return null;this._ptList.add(d)},d2.prototype.revere=function(){},d2.prototype.addPts=function(h,d){if(d)for(var m=0;m<h.length;m++)this.addPt(h[m]);else for(var v=h.length-1;v>=0;v--)this.addPt(h[v])},d2.prototype.isRedundant=function(h){if(this._ptList.size()<1)return!1;var d=this._ptList.get(this._ptList.size()-1);return h.distance(d)<this._minimimVertexDistance},d2.prototype.toString=function(){return(new $i).createLineString(this.getCoordinates()).toString()},d2.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var h=new $(this._ptList.get(0)),d=this._ptList.get(this._ptList.size()-1);if(h.equals(d))return null;this._ptList.add(h)},d2.prototype.setMinimumVertexDistance=function(h){this._minimimVertexDistance=h},d2.prototype.interfaces_=function(){return[]},d2.prototype.getClass=function(){return d2},oi.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(d2,oi);var hr=function(){},f4={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr},hr.toDegrees=function(h){return 180*h/Math.PI},hr.normalize=function(h){for(;h>Math.PI;)h-=hr.PI_TIMES_2;for(;h<=-Math.PI;)h+=hr.PI_TIMES_2;return h},hr.angle=function(){if(1===arguments.length){var h=arguments[0];return Math.atan2(h.y,h.x)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return Math.atan2(m.y-d.y,m.x-d.x)}},hr.isAcute=function(h,d,m){return(h.x-d.x)*(m.x-d.x)+(h.y-d.y)*(m.y-d.y)>0},hr.isObtuse=function(h,d,m){return(h.x-d.x)*(m.x-d.x)+(h.y-d.y)*(m.y-d.y)<0},hr.interiorAngle=function(h,d,m){var v=hr.angle(d,h),x=hr.angle(d,m);return Math.abs(x-v)},hr.normalizePositive=function(h){if(h<0){for(;h<0;)h+=hr.PI_TIMES_2;h>=hr.PI_TIMES_2&&(h=0)}else{for(;h>=hr.PI_TIMES_2;)h-=hr.PI_TIMES_2;h<0&&(h=0)}return h},hr.angleBetween=function(h,d,m){var v=hr.angle(d,h),x=hr.angle(d,m);return hr.diff(v,x)},hr.diff=function(h,d){var m=null;return(m=h<d?d-h:h-d)>Math.PI&&(m=2*Math.PI-m),m},hr.toRadians=function(h){return h*Math.PI/180},hr.getTurn=function(h,d){var m=Math.sin(d-h);return m>0?hr.COUNTERCLOCKWISE:m<0?hr.CLOCKWISE:hr.NONE},hr.angleBetweenOriented=function(h,d,m){var v=hr.angle(d,h),x=hr.angle(d,m)-v;return x<=-Math.PI?x+hr.PI_TIMES_2:x>Math.PI?x-hr.PI_TIMES_2:x},f4.PI_TIMES_2.get=function(){return 2*Math.PI},f4.PI_OVER_2.get=function(){return Math.PI/2},f4.PI_OVER_4.get=function(){return Math.PI/4},f4.COUNTERCLOCKWISE.get=function(){return Mt.COUNTERCLOCKWISE},f4.CLOCKWISE.get=function(){return Mt.CLOCKWISE},f4.NONE.get=function(){return Mt.COLLINEAR},Object.defineProperties(hr,f4);var ht=function h(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new li,this._seg1=new li,this._offset0=new li,this._offset1=new li,this._side=0,this._hasNarrowConcaveAngle=!1;var m=arguments[1],v=arguments[2];this._precisionModel=arguments[0],this._bufParams=m,this._li=new mt,this._filletAngleQuantum=Math.PI/2/m.getQuadrantSegments(),m.getQuadrantSegments()>=8&&m.getJoinStyle()===Lr.JOIN_ROUND&&(this._closingSegLengthFactor=h.MAX_CLOSING_SEG_LEN_FACTOR),this.init(v)},y1={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ht.prototype.addNextSegment=function(h,d){if(this._s0=this._s1,this._s1=this._s2,this._s2=h,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var m=Mt.computeOrientation(this._s0,this._s1,this._s2),v=m===Mt.CLOCKWISE&&this._side===cn.LEFT||m===Mt.COUNTERCLOCKWISE&&this._side===cn.RIGHT;0===m?this.addCollinear(d):v?this.addOutsideTurn(m,d):this.addInsideTurn(m,d)},ht.prototype.addLineEndCap=function(h,d){var m=new li(h,d),v=new li;this.computeOffsetSegment(m,cn.LEFT,this._distance,v);var x=new li;this.computeOffsetSegment(m,cn.RIGHT,this._distance,x);var q=Math.atan2(d.y-h.y,d.x-h.x);switch(this._bufParams.getEndCapStyle()){case Lr.CAP_ROUND:this._segList.addPt(v.p1),this.addFilletArc(d,q+Math.PI/2,q-Math.PI/2,Mt.CLOCKWISE,this._distance),this._segList.addPt(x.p1);break;case Lr.CAP_FLAT:this._segList.addPt(v.p1),this._segList.addPt(x.p1);break;case Lr.CAP_SQUARE:var pe=new $;pe.x=Math.abs(this._distance)*Math.cos(q),pe.y=Math.abs(this._distance)*Math.sin(q);var Ue=new $(v.p1.x+pe.x,v.p1.y+pe.y),gt=new $(x.p1.x+pe.x,x.p1.y+pe.y);this._segList.addPt(Ue),this._segList.addPt(gt)}},ht.prototype.getCoordinates=function(){return this._segList.getCoordinates()},ht.prototype.addMitreJoin=function(h,d,m,v){var x=!0,B=null;try{B=$n.intersection(d.p0,d.p1,m.p0,m.p1),(v<=0?1:B.distance(h)/Math.abs(v))>this._bufParams.getMitreLimit()&&(x=!1)}catch(H){if(!(H instanceof ci))throw H;B=new $(0,0),x=!1}x?this._segList.addPt(B):this.addLimitedMitreJoin(d,m,v,this._bufParams.getMitreLimit())},ht.prototype.addFilletCorner=function(h,d,m,v,x){var q=Math.atan2(d.y-h.y,d.x-h.x),gt=Math.atan2(m.y-h.y,m.x-h.x);v===Mt.CLOCKWISE?q<=gt&&(q+=2*Math.PI):q>=gt&&(q-=2*Math.PI),this._segList.addPt(d),this.addFilletArc(h,q,gt,v,x),this._segList.addPt(m)},ht.prototype.addOutsideTurn=function(h,d){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ht.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Lr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Lr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(d&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,h,this._distance),this._segList.addPt(this._offset1.p0))},ht.prototype.createSquare=function(h){this._segList.addPt(new $(h.x+this._distance,h.y+this._distance)),this._segList.addPt(new $(h.x+this._distance,h.y-this._distance)),this._segList.addPt(new $(h.x-this._distance,h.y-this._distance)),this._segList.addPt(new $(h.x-this._distance,h.y+this._distance)),this._segList.closeRing()},ht.prototype.addSegments=function(h,d){this._segList.addPts(h,d)},ht.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},ht.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},ht.prototype.initSideSegments=function(h,d,m){this._s1=h,this._s2=d,this._side=m,this._seg1.setCoordinates(h,d),this.computeOffsetSegment(this._seg1,m,this._distance,this._offset1)},ht.prototype.addLimitedMitreJoin=function(h,d,m,v){var x=this._seg0.p1,B=hr.angle(x,this._seg0.p0),H=hr.angleBetweenOriented(this._seg0.p0,x,this._seg1.p1)/2,q=hr.normalize(B+H),pe=hr.normalize(q+Math.PI),Ue=v*m,gt=m-Ue*Math.abs(Math.sin(H)),pt=x.x+Ue*Math.cos(pe),ln=x.y+Ue*Math.sin(pe),bn=new $(pt,ln),Rn=new li(x,bn),Zn=Rn.pointAlongOffset(1,gt),Pr=Rn.pointAlongOffset(1,-gt);this._side===cn.LEFT?(this._segList.addPt(Zn),this._segList.addPt(Pr)):(this._segList.addPt(Pr),this._segList.addPt(Zn))},ht.prototype.computeOffsetSegment=function(h,d,m,v){var x=d===cn.LEFT?1:-1,B=h.p1.x-h.p0.x,H=h.p1.y-h.p0.y,q=Math.sqrt(B*B+H*H),pe=x*m*B/q,Ue=x*m*H/q;v.p0.x=h.p0.x-Ue,v.p0.y=h.p0.y+pe,v.p1.x=h.p1.x-Ue,v.p1.y=h.p1.y+pe},ht.prototype.addFilletArc=function(h,d,m,v,x){var B=v===Mt.CLOCKWISE?-1:1,H=Math.abs(d-m),q=Math.trunc(H/this._filletAngleQuantum+.5);if(q<1)return null;for(var pe=H/q,Ue=0,gt=new $;Ue<H;){var pt=d+B*Ue;gt.x=h.x+x*Math.cos(pt),gt.y=h.y+x*Math.sin(pt),this._segList.addPt(gt),Ue+=pe}},ht.prototype.addInsideTurn=function(h,d){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ht.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var m=new $((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(m);var v=new $((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(v)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},ht.prototype.createCircle=function(h){var d=new $(h.x+this._distance,h.y);this._segList.addPt(d),this.addFilletArc(h,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},ht.prototype.addBevelJoin=function(h,d){this._segList.addPt(h.p1),this._segList.addPt(d.p0)},ht.prototype.init=function(h){this._distance=h,this._maxCurveSegmentError=h*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new d2,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(h*ht.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},ht.prototype.addCollinear=function(h){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Lr.JOIN_BEVEL||this._bufParams.getJoinStyle()===Lr.JOIN_MITRE?(h&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Mt.CLOCKWISE,this._distance))},ht.prototype.closeRing=function(){this._segList.closeRing()},ht.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht},y1.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},y1.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},y1.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},y1.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(ht,y1);var Ji=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var d=arguments[1];this._precisionModel=arguments[0],this._bufParams=d};Ji.prototype.getOffsetCurve=function(h,d){if(this._distance=d,0===d)return null;var m=d<0,v=Math.abs(d),x=this.getSegGen(v);h.length<=1?this.computePointCurve(h[0],x):this.computeOffsetCurve(h,m,x);var B=x.getCoordinates();return m&&Bi.reverse(B),B},Ji.prototype.computeSingleSidedBufferCurve=function(h,d,m){var v=this.simplifyTolerance(this._distance);if(d){m.addSegments(h,!0);var x=Ks.simplify(h,-v),B=x.length-1;m.initSideSegments(x[B],x[B-1],cn.LEFT),m.addFirstSegment();for(var H=B-2;H>=0;H--)m.addNextSegment(x[H],!0)}else{m.addSegments(h,!1);var q=Ks.simplify(h,v),pe=q.length-1;m.initSideSegments(q[0],q[1],cn.LEFT),m.addFirstSegment();for(var Ue=2;Ue<=pe;Ue++)m.addNextSegment(q[Ue],!0)}m.addLastSegment(),m.closeRing()},Ji.prototype.computeRingBufferCurve=function(h,d,m){var v=this.simplifyTolerance(this._distance);d===cn.RIGHT&&(v=-v);var x=Ks.simplify(h,v),B=x.length-1;m.initSideSegments(x[B-1],x[0],d);for(var H=1;H<=B;H++)m.addNextSegment(x[H],1!==H);m.closeRing()},Ji.prototype.computeLineBufferCurve=function(h,d){var m=this.simplifyTolerance(this._distance),v=Ks.simplify(h,m),x=v.length-1;d.initSideSegments(v[0],v[1],cn.LEFT);for(var B=2;B<=x;B++)d.addNextSegment(v[B],!0);d.addLastSegment(),d.addLineEndCap(v[x-1],v[x]);var H=Ks.simplify(h,-m),q=H.length-1;d.initSideSegments(H[q],H[q-1],cn.LEFT);for(var pe=q-2;pe>=0;pe--)d.addNextSegment(H[pe],!0);d.addLastSegment(),d.addLineEndCap(H[1],H[0]),d.closeRing()},Ji.prototype.computePointCurve=function(h,d){switch(this._bufParams.getEndCapStyle()){case Lr.CAP_ROUND:d.createCircle(h);break;case Lr.CAP_SQUARE:d.createSquare(h)}},Ji.prototype.getLineCurve=function(h,d){if(this._distance=d,d<0&&!this._bufParams.isSingleSided()||0===d)return null;var m=Math.abs(d),v=this.getSegGen(m);return h.length<=1?this.computePointCurve(h[0],v):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(h,d<0,v):this.computeLineBufferCurve(h,v),v.getCoordinates()},Ji.prototype.getBufferParameters=function(){return this._bufParams},Ji.prototype.simplifyTolerance=function(h){return h*this._bufParams.getSimplifyFactor()},Ji.prototype.getRingCurve=function(h,d,m){if(this._distance=m,h.length<=2)return this.getLineCurve(h,m);if(0===m)return Ji.copyCoordinates(h);var v=this.getSegGen(m);return this.computeRingBufferCurve(h,d,v),v.getCoordinates()},Ji.prototype.computeOffsetCurve=function(h,d,m){var v=this.simplifyTolerance(this._distance);if(d){var x=Ks.simplify(h,-v),B=x.length-1;m.initSideSegments(x[B],x[B-1],cn.LEFT),m.addFirstSegment();for(var H=B-2;H>=0;H--)m.addNextSegment(x[H],!0)}else{var q=Ks.simplify(h,v),pe=q.length-1;m.initSideSegments(q[0],q[1],cn.LEFT),m.addFirstSegment();for(var Ue=2;Ue<=pe;Ue++)m.addNextSegment(q[Ue],!0)}m.addLastSegment()},Ji.prototype.getSegGen=function(h){return new ht(this._precisionModel,this._bufParams,h)},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji},Ji.copyCoordinates=function(h){for(var d=new Array(h.length).fill(null),m=0;m<d.length;m++)d[m]=new $(h[m]);return d};var Xo=function(){this._subgraphs=null,this._seg=new li,this._cga=new Mt,this._subgraphs=arguments[0]},q1={DepthSegment:{configurable:!0}};Xo.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var h=arguments[0],d=new tn,m=this._subgraphs.iterator();m.hasNext();){var v=m.next(),x=v.getEnvelope();h.y<x.getMinY()||h.y>x.getMaxY()||this.findStabbedSegments(h,v.getDirectedEdges(),d)}return d}if(3===arguments.length)if(At(arguments[2],ko)&&arguments[0]instanceof $&&arguments[1]instanceof Lt){for(var B=arguments[0],H=arguments[1],q=arguments[2],pe=H.getEdge().getCoordinates(),Ue=0;Ue<pe.length-1;Ue++)if(this._seg.p0=pe[Ue],this._seg.p1=pe[Ue+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<B.x||this._seg.isHorizontal()||B.y<this._seg.p0.y||B.y>this._seg.p1.y||Mt.computeOrientation(this._seg.p0,this._seg.p1,B)===Mt.RIGHT)){var gt=H.getDepth(cn.LEFT);this._seg.p0.equals(pe[Ue])||(gt=H.getDepth(cn.RIGHT));var pt=new X2(this._seg,gt);q.add(pt)}}else if(At(arguments[2],ko)&&arguments[0]instanceof $&&At(arguments[1],ko))for(var ln=arguments[0],Rn=arguments[2],Zn=arguments[1].iterator();Zn.hasNext();){var Pr=Zn.next();Pr.isForward()&&this.findStabbedSegments(ln,Pr,Rn)}},Xo.prototype.getDepth=function(h){var d=this.findStabbedSegments(h);return 0===d.size()?0:qs.min(d)._leftDepth},Xo.prototype.interfaces_=function(){return[]},Xo.prototype.getClass=function(){return Xo},q1.DepthSegment.get=function(){return X2},Object.defineProperties(Xo,q1);var X2=function(){this._upwardSeg=null,this._leftDepth=null;var d=arguments[1];this._upwardSeg=new li(arguments[0]),this._leftDepth=d};X2.prototype.compareTo=function(h){var d=h;if(this._upwardSeg.minX()>=d._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=d._upwardSeg.minX())return-1;var m=this._upwardSeg.orientationIndex(d._upwardSeg);return 0!==m||0!=(m=-1*d._upwardSeg.orientationIndex(this._upwardSeg))?m:this._upwardSeg.compareTo(d._upwardSeg)},X2.prototype.compareX=function(h,d){var m=h.p0.compareTo(d.p0);return 0!==m?m:h.p1.compareTo(d.p1)},X2.prototype.toString=function(){return this._upwardSeg.toString()},X2.prototype.interfaces_=function(){return[Z]},X2.prototype.getClass=function(){return X2};var Li=function(h,d,m){this.p0=h||null,this.p1=d||null,this.p2=m||null};Li.prototype.area=function(){return Li.area(this.p0,this.p1,this.p2)},Li.prototype.signedArea=function(){return Li.signedArea(this.p0,this.p1,this.p2)},Li.prototype.interpolateZ=function(h){if(null===h)throw new X("Supplied point is null.");return Li.interpolateZ(h,this.p0,this.p1,this.p2)},Li.prototype.longestSideLength=function(){return Li.longestSideLength(this.p0,this.p1,this.p2)},Li.prototype.isAcute=function(){return Li.isAcute(this.p0,this.p1,this.p2)},Li.prototype.circumcentre=function(){return Li.circumcentre(this.p0,this.p1,this.p2)},Li.prototype.area3D=function(){return Li.area3D(this.p0,this.p1,this.p2)},Li.prototype.centroid=function(){return Li.centroid(this.p0,this.p1,this.p2)},Li.prototype.inCentre=function(){return Li.inCentre(this.p0,this.p1,this.p2)},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.area=function(h,d,m){return Math.abs(((m.x-h.x)*(d.y-h.y)-(d.x-h.x)*(m.y-h.y))/2)},Li.signedArea=function(h,d,m){return((m.x-h.x)*(d.y-h.y)-(d.x-h.x)*(m.y-h.y))/2},Li.det=function(h,d,m,v){return h*v-d*m},Li.interpolateZ=function(h,d,m,v){var x=d.x,B=d.y,H=m.x-x,q=v.x-x,pe=m.y-B,Ue=v.y-B,gt=H*Ue-q*pe,pt=h.x-x,ln=h.y-B;return d.z+(Ue*pt-q*ln)/gt*(m.z-d.z)+(-pe*pt+H*ln)/gt*(v.z-d.z)},Li.longestSideLength=function(h,d,m){var v=h.distance(d),x=d.distance(m),B=m.distance(h),H=v;return x>H&&(H=x),B>H&&(H=B),H},Li.isAcute=function(h,d,m){return!!hr.isAcute(h,d,m)&&!!hr.isAcute(d,m,h)&&!!hr.isAcute(m,h,d)},Li.circumcentre=function(h,d,m){var v=m.x,x=m.y,B=h.x-v,H=h.y-x,q=d.x-v,pe=d.y-x,Ue=2*Li.det(B,H,q,pe),gt=Li.det(H,B*B+H*H,pe,q*q+pe*pe),pt=Li.det(B,B*B+H*H,q,q*q+pe*pe);return new $(v-gt/Ue,x+pt/Ue)},Li.perpendicularBisector=function(h,d){var m=d.x-h.x,v=d.y-h.y,x=new $n(h.x+m/2,h.y+v/2,1),B=new $n(h.x-v+m/2,h.y+m+v/2,1);return new $n(x,B)},Li.angleBisector=function(h,d,m){var v=d.distance(h),x=v/(v+d.distance(m));return new $(h.x+x*(m.x-h.x),h.y+x*(m.y-h.y))},Li.area3D=function(h,d,m){var v=d.x-h.x,x=d.y-h.y,B=d.z-h.z,H=m.x-h.x,q=m.y-h.y,pe=m.z-h.z,Ue=x*pe-B*q,gt=B*H-v*pe,pt=v*q-x*H;return Math.sqrt(Ue*Ue+gt*gt+pt*pt)/2},Li.centroid=function(h,d,m){return new $((h.x+d.x+m.x)/3,(h.y+d.y+m.y)/3)},Li.inCentre=function(h,d,m){var v=d.distance(m),x=h.distance(m),B=h.distance(d),H=v+x+B;return new $((v*h.x+x*d.x+B*m.x)/H,(v*h.y+x*d.y+B*m.y)/H)};var Vs=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new tn;var d=arguments[1],m=arguments[2];this._inputGeom=arguments[0],this._distance=d,this._curveBuilder=m};Vs.prototype.addPoint=function(h){if(this._distance<=0)return null;var d=h.getCoordinates(),m=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(m,se.EXTERIOR,se.INTERIOR)},Vs.prototype.addPolygon=function(h){var d=this._distance,m=cn.LEFT;this._distance<0&&(d=-this._distance,m=cn.RIGHT);var v=h.getExteriorRing(),x=Bi.removeRepeatedPoints(v.getCoordinates());if(this._distance<0&&this.isErodedCompletely(v,this._distance)||this._distance<=0&&x.length<3)return null;this.addPolygonRing(x,d,m,se.EXTERIOR,se.INTERIOR);for(var B=0;B<h.getNumInteriorRing();B++){var H=h.getInteriorRingN(B),q=Bi.removeRepeatedPoints(H.getCoordinates());this._distance>0&&this.isErodedCompletely(H,-this._distance)||this.addPolygonRing(q,d,cn.opposite(m),se.INTERIOR,se.EXTERIOR)}},Vs.prototype.isTriangleErodedCompletely=function(h,d){var m=new Li(h[0],h[1],h[2]),v=m.inCentre();return Mt.distancePointLine(v,m.p0,m.p1)<Math.abs(d)},Vs.prototype.addLineString=function(h){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var d=Bi.removeRepeatedPoints(h.getCoordinates()),m=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(m,se.EXTERIOR,se.INTERIOR)},Vs.prototype.addCurve=function(h,d,m){if(null===h||h.length<2)return null;var v=new No(h,new hs(0,se.BOUNDARY,d,m));this._curveList.add(v)},Vs.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Vs.prototype.addPolygonRing=function(h,d,m,v,x){if(0===d&&h.length<Bc.MINIMUM_VALID_SIZE)return null;var B=v,H=x;h.length>=Bc.MINIMUM_VALID_SIZE&&Mt.isCCW(h)&&(B=x,H=v,m=cn.opposite(m));var q=this._curveBuilder.getRingCurve(h,m,d);this.addCurve(q,B,H)},Vs.prototype.add=function(h){if(h.isEmpty())return null;h instanceof Po?this.addPolygon(h):h instanceof uo?this.addLineString(h):h instanceof u2?this.addPoint(h):(h instanceof $l||h instanceof C3||h instanceof D2||h instanceof m1)&&this.addCollection(h)},Vs.prototype.isErodedCompletely=function(h,d){var m=h.getCoordinates();if(m.length<4)return d<0;if(4===m.length)return this.isTriangleErodedCompletely(m,d);var v=h.getEnvelopeInternal(),x=Math.min(v.getHeight(),v.getWidth());return d<0&&2*Math.abs(d)>x},Vs.prototype.addCollection=function(h){for(var d=0;d<h.getNumGeometries();d++){var m=h.getGeometryN(d);this.add(m)}},Vs.prototype.interfaces_=function(){return[]},Vs.prototype.getClass=function(){return Vs};var nn=function(){};nn.prototype.locate=function(h){},nn.prototype.interfaces_=function(){return[]},nn.prototype.getClass=function(){return nn};var Ri=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var h=arguments[0];this._parent=h,this._atStart=!0,this._index=0,this._max=h.getNumGeometries()};Ri.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ri.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Oe;var h=this._parent.getGeometryN(this._index++);return h instanceof m1?(this._subcollectionIterator=new Ri(h),this._subcollectionIterator.next()):h},Ri.prototype.remove=function(){throw new Error(this.getClass().getName())},Ri.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ri.prototype.interfaces_=function(){return[W1]},Ri.prototype.getClass=function(){return Ri},Ri.isAtomic=function(h){return!(h instanceof m1)};var gr=function(){this._geom=null,this._geom=arguments[0]};gr.prototype.locate=function(h){return gr.locate(h,this._geom)},gr.prototype.interfaces_=function(){return[nn]},gr.prototype.getClass=function(){return gr},gr.isPointInRing=function(h,d){return!!d.getEnvelopeInternal().intersects(h)&&Mt.isPointInRing(h,d.getCoordinates())},gr.containsPointInPolygon=function(h,d){if(d.isEmpty())return!1;var m=d.getExteriorRing();if(!gr.isPointInRing(h,m))return!1;for(var v=0;v<d.getNumInteriorRing();v++){var x=d.getInteriorRingN(v);if(gr.isPointInRing(h,x))return!1}return!0},gr.containsPoint=function(h,d){if(d instanceof Po)return gr.containsPointInPolygon(h,d);if(d instanceof m1)for(var m=new Ri(d);m.hasNext();){var v=m.next();if(v!==d&&gr.containsPoint(h,v))return!0}return!1},gr.locate=function(h,d){return d.isEmpty()?se.EXTERIOR:gr.containsPoint(h,d)?se.INTERIOR:se.EXTERIOR};var Ts=function(){this._edgeMap=new Ct,this._edgeList=null,this._ptInAreaLocation=[se.NONE,se.NONE]};Ts.prototype.getNextCW=function(h){this.getEdges();var d=this._edgeList.indexOf(h),m=d-1;return 0===d&&(m=this._edgeList.size()-1),this._edgeList.get(m)},Ts.prototype.propagateSideLabels=function(h){for(var d=se.NONE,m=this.iterator();m.hasNext();){var v=m.next().getLabel();v.isArea(h)&&v.getLocation(h,cn.LEFT)!==se.NONE&&(d=v.getLocation(h,cn.LEFT))}if(d===se.NONE)return null;for(var x=d,B=this.iterator();B.hasNext();){var H=B.next(),q=H.getLabel();if(q.getLocation(h,cn.ON)===se.NONE&&q.setLocation(h,cn.ON,x),q.isArea(h)){var pe=q.getLocation(h,cn.LEFT),Ue=q.getLocation(h,cn.RIGHT);if(Ue!==se.NONE){if(Ue!==x)throw new Ja("side location conflict",H.getCoordinate());pe===se.NONE&&J.shouldNeverReachHere("found single null side (at "+H.getCoordinate()+")"),x=pe}else J.isTrue(q.getLocation(h,cn.LEFT)===se.NONE,"found single null side"),q.setLocation(h,cn.RIGHT,x),q.setLocation(h,cn.LEFT,x)}}},Ts.prototype.getCoordinate=function(){var h=this.iterator();return h.hasNext()?h.next().getCoordinate():null},Ts.prototype.print=function(h){$t.out.println("EdgeEndStar:   "+this.getCoordinate());for(var d=this.iterator();d.hasNext();)d.next().print(h)},Ts.prototype.isAreaLabelsConsistent=function(h){return this.computeEdgeEndLabels(h.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Ts.prototype.checkAreaLabelsConsistent=function(h){var d=this.getEdges();if(d.size()<=0)return!0;var m=d.size()-1,v=d.get(m).getLabel().getLocation(h,cn.LEFT);J.isTrue(v!==se.NONE,"Found unlabelled area edge");for(var x=v,B=this.iterator();B.hasNext();){var H=B.next().getLabel();J.isTrue(H.isArea(h),"Found non-area edge");var q=H.getLocation(h,cn.LEFT),pe=H.getLocation(h,cn.RIGHT);if(q===pe||pe!==x)return!1;x=q}return!0},Ts.prototype.findIndex=function(h){this.iterator();for(var d=0;d<this._edgeList.size();d++)if(this._edgeList.get(d)===h)return d;return-1},Ts.prototype.iterator=function(){return this.getEdges().iterator()},Ts.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new tn(this._edgeMap.values())),this._edgeList},Ts.prototype.getLocation=function(h,d,m){return this._ptInAreaLocation[h]===se.NONE&&(this._ptInAreaLocation[h]=gr.locate(d,m[h].getGeometry())),this._ptInAreaLocation[h]},Ts.prototype.toString=function(){var h=new Ce;h.append("EdgeEndStar:   "+this.getCoordinate()),h.append("\n");for(var d=this.iterator();d.hasNext();){var m=d.next();h.append(m),h.append("\n")}return h.toString()},Ts.prototype.computeEdgeEndLabels=function(h){for(var d=this.iterator();d.hasNext();)d.next().computeLabel(h)},Ts.prototype.computeLabelling=function(h){this.computeEdgeEndLabels(h[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var d=[!1,!1],m=this.iterator();m.hasNext();)for(var v=m.next().getLabel(),x=0;x<2;x++)v.isLine(x)&&v.getLocation(x)===se.BOUNDARY&&(d[x]=!0);for(var B=this.iterator();B.hasNext();)for(var H=B.next(),q=H.getLabel(),pe=0;pe<2;pe++)if(q.isAnyNull(pe)){var Ue=se.NONE;if(d[pe])Ue=se.EXTERIOR;else{var gt=H.getCoordinate();Ue=this.getLocation(pe,gt,h)}q.setAllLocationsIfNull(pe,Ue)}},Ts.prototype.getDegree=function(){return this._edgeMap.size()},Ts.prototype.insertEdgeEnd=function(h,d){this._edgeMap.put(h,d),this._edgeList=null},Ts.prototype.interfaces_=function(){return[]},Ts.prototype.getClass=function(){return Ts};var Rc=function(h){function d(){h.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var m=null,v=null,x=this._SCANNING_FOR_INCOMING,B=0;B<this._resultAreaEdgeList.size();B++){var H=this._resultAreaEdgeList.get(B),q=H.getSym();if(H.getLabel().isArea())switch(null===m&&H.isInResult()&&(m=H),x){case this._SCANNING_FOR_INCOMING:if(!q.isInResult())continue;v=q,x=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!H.isInResult())continue;v.setNext(H),x=this._SCANNING_FOR_INCOMING}}if(x===this._LINKING_TO_OUTGOING){if(null===m)throw new Ja("no outgoing dirEdge found",this.getCoordinate());J.isTrue(m.isInResult(),"unable to link last incoming dirEdge"),v.setNext(m)}},d.prototype.insert=function(m){this.insertEdgeEnd(m,m)},d.prototype.getRightmostEdge=function(){var m=this.getEdges(),v=m.size();if(v<1)return null;var x=m.get(0);if(1===v)return x;var B=m.get(v-1),H=x.getQuadrant(),q=B.getQuadrant();return Es.isNorthern(H)&&Es.isNorthern(q)?x:Es.isNorthern(H)||Es.isNorthern(q)?0!==x.getDy()?x:0!==B.getDy()?B:(J.shouldNeverReachHere("found two horizontal edges incident on node"),null):B},d.prototype.print=function(m){$t.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var v=this.iterator();v.hasNext();){var x=v.next();m.print("out "),x.print(m),m.println(),m.print("in "),x.getSym().print(m),m.println()}},d.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new tn;for(var m=this.iterator();m.hasNext();){var v=m.next();(v.isInResult()||v.getSym().isInResult())&&this._resultAreaEdgeList.add(v)}return this._resultAreaEdgeList},d.prototype.updateLabelling=function(m){for(var v=this.iterator();v.hasNext();){var x=v.next().getLabel();x.setAllLocationsIfNull(0,m.getLocation(0)),x.setAllLocationsIfNull(1,m.getLocation(1))}},d.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var m=null,v=null,x=this._edgeList.size()-1;x>=0;x--){var B=this._edgeList.get(x),H=B.getSym();null===v&&(v=H),null!==m&&H.setNext(m),m=B}v.setNext(m)},d.prototype.computeDepths=function(){if(1===arguments.length){var m=arguments[0],v=this.findIndex(m),x=m.getDepth(cn.LEFT),B=m.getDepth(cn.RIGHT),H=this.computeDepths(v+1,this._edgeList.size(),x);if(this.computeDepths(0,v,H)!==B)throw new Ja("depth mismatch at "+m.getCoordinate())}else if(3===arguments.length){for(var pe=arguments[1],Ue=arguments[2],gt=arguments[0];gt<pe;gt++){var pt=this._edgeList.get(gt);pt.setEdgeDepths(cn.RIGHT,Ue),Ue=pt.getDepth(cn.LEFT)}return Ue}},d.prototype.mergeSymLabels=function(){for(var m=this.iterator();m.hasNext();){var v=m.next();v.getLabel().merge(v.getSym().getLabel())}},d.prototype.linkMinimalDirectedEdges=function(m){for(var v=null,x=null,B=this._SCANNING_FOR_INCOMING,H=this._resultAreaEdgeList.size()-1;H>=0;H--){var q=this._resultAreaEdgeList.get(H),pe=q.getSym();switch(null===v&&q.getEdgeRing()===m&&(v=q),B){case this._SCANNING_FOR_INCOMING:if(pe.getEdgeRing()!==m)continue;x=pe,B=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(q.getEdgeRing()!==m)continue;x.setNextMin(q),B=this._SCANNING_FOR_INCOMING}}B===this._LINKING_TO_OUTGOING&&(J.isTrue(null!==v,"found null for first outgoing dirEdge"),J.isTrue(v.getEdgeRing()===m,"unable to link last incoming dirEdge"),x.setNextMin(v))},d.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var m=0,v=this.iterator();v.hasNext();)v.next().isInResult()&&m++;return m}if(1===arguments.length){for(var x=arguments[0],B=0,H=this.iterator();H.hasNext();)H.next().getEdgeRing()===x&&B++;return B}},d.prototype.getLabel=function(){return this._label},d.prototype.findCoveredLineEdges=function(){for(var m=se.NONE,v=this.iterator();v.hasNext();){var x=v.next(),B=x.getSym();if(!x.isLineEdge()){if(x.isInResult()){m=se.INTERIOR;break}if(B.isInResult()){m=se.EXTERIOR;break}}}if(m===se.NONE)return null;for(var H=m,q=this.iterator();q.hasNext();){var pe=q.next(),Ue=pe.getSym();pe.isLineEdge()?pe.getEdge().setCovered(H===se.INTERIOR):(pe.isInResult()&&(H=se.EXTERIOR),Ue.isInResult()&&(H=se.INTERIOR))}},d.prototype.computeLabelling=function(m){h.prototype.computeLabelling.call(this,m),this._label=new hs(se.NONE);for(var v=this.iterator();v.hasNext();)for(var x=v.next().getEdge().getLabel(),B=0;B<2;B++){var H=x.getLocation(B);H!==se.INTERIOR&&H!==se.BOUNDARY||this._label.setLocation(B,se.INTERIOR)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ts),ro=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.createNode=function(m){return new f2(m,new Rc)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Z4),I2=function h(){this._pts=null,this._orientation=null;var d=arguments[0];this._pts=d,this._orientation=h.orientation(d)};I2.prototype.compareTo=function(h){return I2.compareOriented(this._pts,this._orientation,h._pts,h._orientation)},I2.prototype.interfaces_=function(){return[Z]},I2.prototype.getClass=function(){return I2},I2.orientation=function(h){return 1===Bi.increasingDirection(h)},I2.compareOriented=function(h,d,m,v){for(var x=d?1:-1,B=v?1:-1,H=d?h.length:-1,q=v?m.length:-1,pe=d?0:h.length-1,Ue=v?0:m.length-1;;){var gt=h[pe].compareTo(m[Ue]);if(0!==gt)return gt;var pt=(pe+=x)===H,ln=(Ue+=B)===q;if(pt&&!ln)return-1;if(!pt&&ln)return 1;if(pt&&ln)return 0}};var fr=function(){this._edges=new tn,this._ocaMap=new Ct};fr.prototype.print=function(h){h.print("MULTILINESTRING ( ");for(var d=0;d<this._edges.size();d++){var m=this._edges.get(d);d>0&&h.print(","),h.print("(");for(var v=m.getCoordinates(),x=0;x<v.length;x++)x>0&&h.print(","),h.print(v[x].x+" "+v[x].y);h.println(")")}h.print(")  ")},fr.prototype.addAll=function(h){for(var d=h.iterator();d.hasNext();)this.add(d.next())},fr.prototype.findEdgeIndex=function(h){for(var d=0;d<this._edges.size();d++)if(this._edges.get(d).equals(h))return d;return-1},fr.prototype.iterator=function(){return this._edges.iterator()},fr.prototype.getEdges=function(){return this._edges},fr.prototype.get=function(h){return this._edges.get(h)},fr.prototype.findEqualEdge=function(h){var d=new I2(h.getCoordinates());return this._ocaMap.get(d)},fr.prototype.add=function(h){this._edges.add(h);var d=new I2(h.getCoordinates());this._ocaMap.put(d,h)},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr};var Rs=function(){};Rs.prototype.processIntersections=function(h,d,m,v){},Rs.prototype.isDone=function(){},Rs.prototype.interfaces_=function(){return[]},Rs.prototype.getClass=function(){return Rs};var Ra=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};Ra.prototype.isTrivialIntersection=function(h,d,m,v){if(h===m&&1===this._li.getIntersectionNum()){if(Ra.isAdjacentSegments(d,v))return!0;if(h.isClosed()){var x=h.size()-1;if(0===d&&v===x||0===v&&d===x)return!0}}return!1},Ra.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ra.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ra.prototype.getLineIntersector=function(){return this._li},Ra.prototype.hasProperIntersection=function(){return this._hasProper},Ra.prototype.processIntersections=function(h,d,m,v){if(h===m&&d===v)return null;this.numTests++;var x=h.getCoordinates()[d],B=h.getCoordinates()[d+1],H=m.getCoordinates()[v],q=m.getCoordinates()[v+1];this._li.computeIntersection(x,B,H,q),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(h,d,m,v)||(this._hasIntersection=!0,h.addIntersections(this._li,d,0),m.addIntersections(this._li,v,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Ra.prototype.hasIntersection=function(){return this._hasIntersection},Ra.prototype.isDone=function(){return!1},Ra.prototype.hasInteriorIntersection=function(){return this._hasInterior},Ra.prototype.interfaces_=function(){return[Rs]},Ra.prototype.getClass=function(){return Ra},Ra.isAdjacentSegments=function(h,d){return 1===Math.abs(h-d)};var ii=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var d=arguments[1],m=arguments[2];this.coord=new $(arguments[0]),this.segmentIndex=d,this.dist=m};ii.prototype.getSegmentIndex=function(){return this.segmentIndex},ii.prototype.getCoordinate=function(){return this.coord},ii.prototype.print=function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex),h.println(" dist = "+this.dist)},ii.prototype.compareTo=function(h){return this.compare(h.segmentIndex,h.dist)},ii.prototype.isEndPoint=function(h){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===h},ii.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},ii.prototype.getDistance=function(){return this.dist},ii.prototype.compare=function(h,d){return this.segmentIndex<h?-1:this.segmentIndex>h?1:this.dist<d?-1:this.dist>d?1:0},ii.prototype.interfaces_=function(){return[Z]},ii.prototype.getClass=function(){return ii};var p2=function(){this._nodeMap=new Ct,this.edge=null,this.edge=arguments[0]};p2.prototype.print=function(h){h.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(h)},p2.prototype.iterator=function(){return this._nodeMap.values().iterator()},p2.prototype.addSplitEdges=function(h){this.addEndpoints();for(var d=this.iterator(),m=d.next();d.hasNext();){var v=d.next(),x=this.createSplitEdge(m,v);h.add(x),m=v}},p2.prototype.addEndpoints=function(){var h=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[h],h,0)},p2.prototype.createSplitEdge=function(h,d){var m=d.segmentIndex-h.segmentIndex+2,x=d.dist>0||!d.coord.equals2D(this.edge.pts[d.segmentIndex]);x||m--;var B=new Array(m).fill(null),H=0;B[H++]=new $(h.coord);for(var q=h.segmentIndex+1;q<=d.segmentIndex;q++)B[H++]=this.edge.pts[q];return x&&(B[H]=d.coord),new S3(B,new hs(this.edge._label))},p2.prototype.add=function(h,d,m){var v=new ii(h,d,m),x=this._nodeMap.get(v);return null!==x?x:(this._nodeMap.put(v,v),v)},p2.prototype.isIntersection=function(h){for(var d=this.iterator();d.hasNext();)if(d.next().coord.equals(h))return!0;return!1},p2.prototype.interfaces_=function(){return[]},p2.prototype.getClass=function(){return p2};var Fa=function(){};Fa.prototype.getChainStartIndices=function(h){var d=0,m=new tn;m.add(new Qe(d));do{var v=this.findChainEnd(h,d);m.add(new Qe(v)),d=v}while(d<h.length-1);return Fa.toIntArray(m)},Fa.prototype.findChainEnd=function(h,d){for(var m=Es.quadrant(h[d],h[d+1]),v=d+1;v<h.length&&Es.quadrant(h[v-1],h[v])===m;)v++;return v-1},Fa.prototype.interfaces_=function(){return[]},Fa.prototype.getClass=function(){return Fa},Fa.toIntArray=function(h){for(var d=new Array(h.size()).fill(null),m=0;m<d.length;m++)d[m]=h.get(m).intValue();return d};var g2=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new rn,this.env2=new rn;var h=arguments[0];this.e=h,this.pts=h.getCoordinates();var d=new Fa;this.startIndex=d.getChainStartIndices(this.pts)};g2.prototype.getCoordinates=function(){return this.pts},g2.prototype.getMaxX=function(h){var d=this.pts[this.startIndex[h]].x,m=this.pts[this.startIndex[h+1]].x;return d>m?d:m},g2.prototype.getMinX=function(h){var d=this.pts[this.startIndex[h]].x,m=this.pts[this.startIndex[h+1]].x;return d<m?d:m},g2.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var h=arguments[0],d=arguments[1],m=arguments[2];this.computeIntersectsForChain(this.startIndex[h],this.startIndex[h+1],d,d.startIndex[m],d.startIndex[m+1],arguments[3])}else if(6===arguments.length){var x=arguments[0],B=arguments[1],H=arguments[2],q=arguments[3],pe=arguments[4],Ue=arguments[5],gt=this.pts[x],pt=this.pts[B],ln=H.pts[q],bn=H.pts[pe];if(B-x==1&&pe-q==1)return Ue.addIntersections(this.e,x,H.e,q),null;if(this.env1.init(gt,pt),this.env2.init(ln,bn),!this.env1.intersects(this.env2))return null;var Rn=Math.trunc((x+B)/2),Zn=Math.trunc((q+pe)/2);x<Rn&&(q<Zn&&this.computeIntersectsForChain(x,Rn,H,q,Zn,Ue),Zn<pe&&this.computeIntersectsForChain(x,Rn,H,Zn,pe,Ue)),Rn<B&&(q<Zn&&this.computeIntersectsForChain(Rn,B,H,q,Zn,Ue),Zn<pe&&this.computeIntersectsForChain(Rn,B,H,Zn,pe,Ue))}},g2.prototype.getStartIndexes=function(){return this.startIndex},g2.prototype.computeIntersects=function(h,d){for(var m=0;m<this.startIndex.length-1;m++)for(var v=0;v<h.startIndex.length-1;v++)this.computeIntersectsForChain(m,h,v,d)},g2.prototype.interfaces_=function(){return[]},g2.prototype.getClass=function(){return g2};var ki=function h(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var d=0;d<2;d++)for(var m=0;m<3;m++)this._depth[d][m]=h.NULL_VALUE},w1={NULL_VALUE:{configurable:!0}};ki.prototype.getDepth=function(h,d){return this._depth[h][d]},ki.prototype.setDepth=function(h,d,m){this._depth[h][d]=m},ki.prototype.isNull=function(){if(0===arguments.length){for(var h=0;h<2;h++)for(var d=0;d<3;d++)if(this._depth[h][d]!==ki.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===ki.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===ki.NULL_VALUE:void 0},ki.prototype.normalize=function(){for(var h=0;h<2;h++)if(!this.isNull(h)){var d=this._depth[h][1];this._depth[h][2]<d&&(d=this._depth[h][2]),d<0&&(d=0);for(var m=1;m<3;m++){var v=0;this._depth[h][m]>d&&(v=1),this._depth[h][m]=v}}},ki.prototype.getDelta=function(h){return this._depth[h][cn.RIGHT]-this._depth[h][cn.LEFT]},ki.prototype.getLocation=function(h,d){return this._depth[h][d]<=0?se.EXTERIOR:se.INTERIOR},ki.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ki.prototype.add=function(){if(1===arguments.length)for(var h=arguments[0],d=0;d<2;d++)for(var m=1;m<3;m++){var v=h.getLocation(d,m);v!==se.EXTERIOR&&v!==se.INTERIOR||(this.isNull(d,m)?this._depth[d][m]=ki.depthAtLocation(v):this._depth[d][m]+=ki.depthAtLocation(v))}else 3===arguments.length&&arguments[2]===se.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.depthAtLocation=function(h){return h===se.EXTERIOR?0:h===se.INTERIOR?1:ki.NULL_VALUE},w1.NULL_VALUE.get=function(){return-1},Object.defineProperties(ki,w1);var S3=function(h){function d(){if(h.call(this),this.pts=null,this._env=null,this.eiList=new p2(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ki,this._depthDelta=0,1===arguments.length)d.call(this,arguments[0],null);else if(2===arguments.length){var x=arguments[1];this.pts=arguments[0],this._label=x}}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getDepth=function(){return this._depth},d.prototype.getCollapsedEdge=function(){var m=new Array(2).fill(null);return m[0]=this.pts[0],m[1]=this.pts[1],new d(m,hs.toLineLabel(this._label))},d.prototype.isIsolated=function(){return this._isIsolated},d.prototype.getCoordinates=function(){return this.pts},d.prototype.setIsolated=function(m){this._isIsolated=m},d.prototype.setName=function(m){this._name=m},d.prototype.equals=function(m){if(!(m instanceof d))return!1;var v=m;if(this.pts.length!==v.pts.length)return!1;for(var x=!0,B=!0,H=this.pts.length,q=0;q<this.pts.length;q++)if(this.pts[q].equals2D(v.pts[q])||(x=!1),this.pts[q].equals2D(v.pts[--H])||(B=!1),!x&&!B)return!1;return!0},d.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},d.prototype.print=function(m){m.print("edge "+this._name+": "),m.print("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&m.print(","),m.print(this.pts[v].x+" "+this.pts[v].y);m.print(")  "+this._label+" "+this._depthDelta)},d.prototype.computeIM=function(m){d.updateIM(this._label,m)},d.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},d.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},d.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},d.prototype.getDepthDelta=function(){return this._depthDelta},d.prototype.getNumPoints=function(){return this.pts.length},d.prototype.printReverse=function(m){m.print("edge "+this._name+": ");for(var v=this.pts.length-1;v>=0;v--)m.print(this.pts[v]+" ");m.println("")},d.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new g2(this)),this._mce},d.prototype.getEnvelope=function(){if(null===this._env){this._env=new rn;for(var m=0;m<this.pts.length;m++)this._env.expandToInclude(this.pts[m])}return this._env},d.prototype.addIntersection=function(m,v,x,B){var H=new $(m.getIntersection(B)),q=v,pe=m.getEdgeDistance(x,B),Ue=q+1;Ue<this.pts.length&&H.equals2D(this.pts[Ue])&&(q=Ue,pe=0),this.eiList.add(H,q,pe)},d.prototype.toString=function(){var m=new Ce;m.append("edge "+this._name+": "),m.append("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&m.append(","),m.append(this.pts[v].x+" "+this.pts[v].y);return m.append(")  "+this._label+" "+this._depthDelta),m.toString()},d.prototype.isPointwiseEqual=function(m){if(this.pts.length!==m.pts.length)return!1;for(var v=0;v<this.pts.length;v++)if(!this.pts[v].equals2D(m.pts[v]))return!1;return!0},d.prototype.setDepthDelta=function(m){this._depthDelta=m},d.prototype.getEdgeIntersectionList=function(){return this.eiList},d.prototype.addIntersections=function(m,v,x){for(var B=0;B<m.getIntersectionNum();B++)this.addIntersection(m,v,x,B)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.updateIM=function(){if(2!==arguments.length)return h.prototype.updateIM.apply(this,arguments);var m=arguments[0],v=arguments[1];v.setAtLeastIfValid(m.getLocation(0,cn.ON),m.getLocation(1,cn.ON),1),m.isArea()&&(v.setAtLeastIfValid(m.getLocation(0,cn.LEFT),m.getLocation(1,cn.LEFT),2),v.setAtLeastIfValid(m.getLocation(0,cn.RIGHT),m.getLocation(1,cn.RIGHT),2))},d}($2),Vo=function(h){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new fr,this._bufParams=h||null};Vo.prototype.setWorkingPrecisionModel=function(h){this._workingPrecisionModel=h},Vo.prototype.insertUniqueEdge=function(h){var d=this._edgeList.findEqualEdge(h);if(null!==d){var m=d.getLabel(),v=h.getLabel();d.isPointwiseEqual(h)||(v=new hs(h.getLabel())).flip(),m.merge(v);var x=Vo.depthDelta(v),B=d.getDepthDelta()+x;d.setDepthDelta(B)}else this._edgeList.add(h),h.setDepthDelta(Vo.depthDelta(h.getLabel()))},Vo.prototype.buildSubgraphs=function(h,d){for(var m=new tn,v=h.iterator();v.hasNext();){var x=v.next(),B=x.getRightmostCoordinate(),H=new Xo(m).getDepth(B);x.computeDepth(H),x.findResultEdges(),m.add(x),d.add(x.getDirectedEdges(),x.getNodes())}},Vo.prototype.createSubgraphs=function(h){for(var d=new tn,m=h.getNodes().iterator();m.hasNext();){var v=m.next();if(!v.isVisited()){var x=new Ko;x.create(v),d.add(x)}}return qs.sort(d,qs.reverseOrder()),d},Vo.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Vo.prototype.getNoder=function(h){if(null!==this._workingNoder)return this._workingNoder;var d=new dl,m=new mt;return m.setPrecisionModel(h),d.setSegmentIntersector(new Ra(m)),d},Vo.prototype.buffer=function(h,d){var m=this._workingPrecisionModel;null===m&&(m=h.getPrecisionModel()),this._geomFact=h.getFactory();var v=new Ji(m,this._bufParams),x=new Vs(h,d,v).getCurves();if(x.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(x,m),this._graph=new wn(new ro),this._graph.addEdges(this._edgeList.getEdges());var B=this.createSubgraphs(this._graph),H=new e1(this._geomFact);this.buildSubgraphs(B,H);var q=H.getPolygons();return q.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(q)},Vo.prototype.computeNodedEdges=function(h,d){var m=this.getNoder(d);m.computeNodes(h);for(var v=m.getNodedSubstrings().iterator();v.hasNext();){var x=v.next(),B=x.getCoordinates();if(2!==B.length||!B[0].equals2D(B[1])){var H=x.getData(),q=new S3(x.getCoordinates(),new hs(H));this.insertUniqueEdge(q)}}},Vo.prototype.setNoder=function(h){this._workingNoder=h},Vo.prototype.interfaces_=function(){return[]},Vo.prototype.getClass=function(){return Vo},Vo.depthDelta=function(h){var d=h.getLocation(0,cn.LEFT),m=h.getLocation(0,cn.RIGHT);return d===se.INTERIOR&&m===se.EXTERIOR?1:d===se.EXTERIOR&&m===se.INTERIOR?-1:0},Vo.convertSegStrings=function(h){for(var d=new $i,m=new tn;h.hasNext();){var v=h.next(),x=d.createLineString(v.getCoordinates());m.add(x)}return d.buildGeometry(m)};var ka=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var d=arguments[1];this._noder=arguments[0],this._scaleFactor=d,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var v=arguments[1],x=arguments[2],B=arguments[3];this._noder=arguments[0],this._scaleFactor=v,this._offsetX=x,this._offsetY=B,this._isScaled=!this.isIntegerPrecision()}};ka.prototype.rescale=function(){if(At(arguments[0],vs))for(var h=arguments[0].iterator();h.hasNext();){var d=h.next();this.rescale(d.getCoordinates())}else if(arguments[0]instanceof Array){for(var m=arguments[0],v=0;v<m.length;v++)m[v].x=m[v].x/this._scaleFactor+this._offsetX,m[v].y=m[v].y/this._scaleFactor+this._offsetY;2===m.length&&m[0].equals2D(m[1])&&$t.out.println(m)}},ka.prototype.scale=function(){if(At(arguments[0],vs)){for(var h=arguments[0],d=new tn,m=h.iterator();m.hasNext();){var v=m.next();d.add(new No(this.scale(v.getCoordinates()),v.getData()))}return d}if(arguments[0]instanceof Array){for(var x=arguments[0],B=new Array(x.length).fill(null),H=0;H<x.length;H++)B[H]=new $(Math.round((x[H].x-this._offsetX)*this._scaleFactor),Math.round((x[H].y-this._offsetY)*this._scaleFactor),x[H].z);return Bi.removeRepeatedPoints(B)}},ka.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ka.prototype.getNodedSubstrings=function(){var h=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(h),h},ka.prototype.computeNodes=function(h){var d=h;this._isScaled&&(d=this.scale(h)),this._noder.computeNodes(d)},ka.prototype.interfaces_=function(){return[Xl]},ka.prototype.getClass=function(){return ka};var Pa=function(){this._li=new mt,this._segStrings=null,this._segStrings=arguments[0]},Hf={fact:{configurable:!0}};Pa.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();){var d=h.next().getCoordinates();this.checkEndPtVertexIntersections(d[0],this._segStrings),this.checkEndPtVertexIntersections(d[d.length-1],this._segStrings)}else if(2===arguments.length)for(var m=arguments[0],v=arguments[1].iterator();v.hasNext();)for(var x=v.next().getCoordinates(),B=1;B<x.length-1;B++)if(x[B].equals(m))throw new le("found endpt/interior pt intersection at index "+B+" :pt "+m)},Pa.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();)for(var d=h.next(),m=this._segStrings.iterator();m.hasNext();){var v=m.next();this.checkInteriorIntersections(d,v)}else if(2===arguments.length)for(var x=arguments[0],B=arguments[1],H=x.getCoordinates(),q=B.getCoordinates(),pe=0;pe<H.length-1;pe++)for(var Ue=0;Ue<q.length-1;Ue++)this.checkInteriorIntersections(x,pe,B,Ue);else if(4===arguments.length){var gt=arguments[0],pt=arguments[1],ln=arguments[2],bn=arguments[3];if(gt===ln&&pt===bn)return null;var Rn=gt.getCoordinates()[pt],Zn=gt.getCoordinates()[pt+1],Pr=ln.getCoordinates()[bn],So=ln.getCoordinates()[bn+1];if(this._li.computeIntersection(Rn,Zn,Pr,So),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Rn,Zn)||this.hasInteriorIntersection(this._li,Pr,So)))throw new le("found non-noded intersection at "+Rn+"-"+Zn+" and "+Pr+"-"+So)}},Pa.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Pa.prototype.checkCollapses=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();){var d=h.next();this.checkCollapses(d)}else if(1===arguments.length)for(var m=arguments[0].getCoordinates(),v=0;v<m.length-2;v++)this.checkCollapse(m[v],m[v+1],m[v+2])},Pa.prototype.hasInteriorIntersection=function(h,d,m){for(var v=0;v<h.getIntersectionNum();v++){var x=h.getIntersection(v);if(!x.equals(d)&&!x.equals(m))return!0}return!1},Pa.prototype.checkCollapse=function(h,d,m){if(h.equals(m))throw new le("found non-noded collapse at "+Pa.fact.createLineString([h,d,m]))},Pa.prototype.interfaces_=function(){return[]},Pa.prototype.getClass=function(){return Pa},Hf.fact.get=function(){return new $i},Object.defineProperties(Pa,Hf);var cr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var h=arguments[0],d=arguments[1],m=arguments[2];if(this._originalPt=h,this._pt=h,this._scaleFactor=d,this._li=m,d<=0)throw new X("Scale factor must be non-zero");1!==d&&(this._pt=new $(this.scale(h.x),this.scale(h.y)),this._p0Scaled=new $,this._p1Scaled=new $),this.initCorners(this._pt)},gc={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};cr.prototype.intersectsScaled=function(h,d){var m=Math.min(h.x,d.x),v=Math.max(h.x,d.x),x=Math.min(h.y,d.y),B=Math.max(h.y,d.y),H=this._maxx<m||this._minx>v||this._maxy<x||this._miny>B;if(H)return!1;var q=this.intersectsToleranceSquare(h,d);return J.isTrue(!(H&&q),"Found bad envelope test"),q},cr.prototype.initCorners=function(h){this._minx=h.x-.5,this._maxx=h.x+.5,this._miny=h.y-.5,this._maxy=h.y+.5,this._corner[0]=new $(this._maxx,this._maxy),this._corner[1]=new $(this._minx,this._maxy),this._corner[2]=new $(this._minx,this._miny),this._corner[3]=new $(this._maxx,this._miny)},cr.prototype.intersects=function(h,d){return 1===this._scaleFactor?this.intersectsScaled(h,d):(this.copyScaled(h,this._p0Scaled),this.copyScaled(d,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},cr.prototype.scale=function(h){return Math.round(h*this._scaleFactor)},cr.prototype.getCoordinate=function(){return this._originalPt},cr.prototype.copyScaled=function(h,d){d.x=this.scale(h.x),d.y=this.scale(h.y)},cr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var h=cr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new rn(this._originalPt.x-h,this._originalPt.x+h,this._originalPt.y-h,this._originalPt.y+h)}return this._safeEnv},cr.prototype.intersectsPixelClosure=function(h,d){return this._li.computeIntersection(h,d,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},cr.prototype.intersectsToleranceSquare=function(h,d){var m=!1,v=!1;return this._li.computeIntersection(h,d,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(h,d,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(m=!0),this._li.computeIntersection(h,d,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(v=!0),this._li.computeIntersection(h,d,this._corner[3],this._corner[0]),this._li.isProper()||m&&v||h.equals(this._pt)||d.equals(this._pt)))))},cr.prototype.addSnappedNode=function(h,d){var m=h.getCoordinate(d),v=h.getCoordinate(d+1);return!!this.intersects(m,v)&&(h.addIntersection(this.getCoordinate(),d),!0)},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},gc.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(cr,gc);var Fc=function(){this.tempEnv1=new rn,this.selectedSegment=new li};Fc.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc};var m2=function(){this._index=null,this._index=arguments[0]},ya={HotPixelSnapAction:{configurable:!0}};m2.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var d=arguments[0],m=arguments[1],v=arguments[2],x=d.getSafeEnvelope(),B=new mc(d,m,v);return this._index.query(x,{interfaces_:function(){return[Kl]},visitItem:function(H){H.select(x,B)}}),B.isNodeAdded()}},m2.prototype.interfaces_=function(){return[]},m2.prototype.getClass=function(){return m2},ya.HotPixelSnapAction.get=function(){return mc},Object.defineProperties(m2,ya);var mc=function(h){function d(){h.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var v=arguments[1],x=arguments[2];this._hotPixel=arguments[0],this._parentEdge=v,this._hotPixelVertexIndex=x}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isNodeAdded=function(){return this._isNodeAdded},d.prototype.select=function(){if(2!==arguments.length)return h.prototype.select.apply(this,arguments);var v=arguments[1],x=arguments[0].getContext();if(null!==this._parentEdge&&x===this._parentEdge&&v===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(x,v)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Fc),pl=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new tn};pl.prototype.processIntersections=function(h,d,m,v){if(h===m&&d===v)return null;var x=h.getCoordinates()[d],B=h.getCoordinates()[d+1],H=m.getCoordinates()[v],q=m.getCoordinates()[v+1];if(this._li.computeIntersection(x,B,H,q),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var pe=0;pe<this._li.getIntersectionNum();pe++)this._interiorIntersections.add(this._li.getIntersection(pe));h.addIntersections(this._li,d,0),m.addIntersections(this._li,v,1)}},pl.prototype.isDone=function(){return!1},pl.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pl.prototype.interfaces_=function(){return[Rs]},pl.prototype.getClass=function(){return pl};var C1=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var h=arguments[0];this._pm=h,this._li=new mt,this._li.setPrecisionModel(h),this._scaleFactor=h.getScale()};C1.prototype.checkCorrectness=function(h){var d=No.getNodedSubstrings(h),m=new Pa(d);try{m.checkValid()}catch(v){if(!(v instanceof yn))throw v;v.printStackTrace()}},C1.prototype.getNodedSubstrings=function(){return No.getNodedSubstrings(this._nodedSegStrings)},C1.prototype.snapRound=function(h,d){var m=this.findInteriorIntersections(h,d);this.computeIntersectionSnaps(m),this.computeVertexSnaps(h)},C1.prototype.findInteriorIntersections=function(h,d){var m=new pl(d);return this._noder.setSegmentIntersector(m),this._noder.computeNodes(h),m.getInteriorIntersections()},C1.prototype.computeVertexSnaps=function(){if(At(arguments[0],vs))for(var h=arguments[0].iterator();h.hasNext();){var d=h.next();this.computeVertexSnaps(d)}else if(arguments[0]instanceof No)for(var m=arguments[0],v=m.getCoordinates(),x=0;x<v.length;x++){var B=new cr(v[x],this._scaleFactor,this._li);this._pointSnapper.snap(B,m,x)&&m.addIntersection(v[x],x)}},C1.prototype.computeNodes=function(h){this._nodedSegStrings=h,this._noder=new dl,this._pointSnapper=new m2(this._noder.getIndex()),this.snapRound(h,this._li)},C1.prototype.computeIntersectionSnaps=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next(),v=new cr(m,this._scaleFactor,this._li);this._pointSnapper.snap(v)}},C1.prototype.interfaces_=function(){return[Xl]},C1.prototype.getClass=function(){return C1};var Dr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Lr,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var m=arguments[1];this._argGeom=arguments[0],this._bufParams=m}},eu={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Dr.prototype.bufferFixedPrecision=function(h){var d=new ka(new C1(new Ln(1)),h.getScale()),m=new Vo(this._bufParams);m.setWorkingPrecisionModel(h),m.setNoder(d),this._resultGeometry=m.buffer(this._argGeom,this._distance)},Dr.prototype.bufferReducedPrecision=function(){var h=this;if(0===arguments.length){for(var d=Dr.MAX_PRECISION_DIGITS;d>=0;d--){try{h.bufferReducedPrecision(d)}catch(B){if(!(B instanceof Ja))throw B;h._saveException=B}if(null!==h._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var v=Dr.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),x=new Ln(v);this.bufferFixedPrecision(x)}},Dr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var h=this._argGeom.getFactory().getPrecisionModel();h.getType()===Ln.FIXED?this.bufferFixedPrecision(h):this.bufferReducedPrecision()},Dr.prototype.setQuadrantSegments=function(h){this._bufParams.setQuadrantSegments(h)},Dr.prototype.bufferOriginalPrecision=function(){try{var h=new Vo(this._bufParams);this._resultGeometry=h.buffer(this._argGeom,this._distance)}catch(d){if(!(d instanceof le))throw d;this._saveException=d}},Dr.prototype.getResultGeometry=function(h){return this._distance=h,this.computeGeometry(),this._resultGeometry},Dr.prototype.setEndCapStyle=function(h){this._bufParams.setEndCapStyle(h)},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.bufferOp=function(){if(2===arguments.length){var d=arguments[1];return new Dr(arguments[0]).getResultGeometry(d)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof _n&&"number"==typeof arguments[1]){var v=arguments[1],x=arguments[2],B=new Dr(arguments[0]);return B.setQuadrantSegments(x),B.getResultGeometry(v)}if(arguments[2]instanceof Lr&&arguments[0]instanceof _n&&"number"==typeof arguments[1]){var q=arguments[1];return new Dr(arguments[0],arguments[2]).getResultGeometry(q)}}else if(4===arguments.length){var gt=arguments[1],pt=arguments[2],ln=arguments[3],bn=new Dr(arguments[0]);return bn.setQuadrantSegments(pt),bn.setEndCapStyle(ln),bn.getResultGeometry(gt)}},Dr.precisionScaleFactor=function(h,d,m){var v=h.getEnvelopeInternal(),x=xe.max(Math.abs(v.getMaxX()),Math.abs(v.getMaxY()),Math.abs(v.getMinX()),Math.abs(v.getMinY()))+2*(d>0?d:0),B=m-Math.trunc(Math.log(x)/Math.log(10)+1);return Math.pow(10,B)},eu.CAP_ROUND.get=function(){return Lr.CAP_ROUND},eu.CAP_BUTT.get=function(){return Lr.CAP_FLAT},eu.CAP_FLAT.get=function(){return Lr.CAP_FLAT},eu.CAP_SQUARE.get=function(){return Lr.CAP_SQUARE},eu.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Dr,eu);var Fs=function(){this._pt=[new $,new $],this._distance=Y.NaN,this._isNull=!0};Fs.prototype.getCoordinates=function(){return this._pt},Fs.prototype.getCoordinate=function(h){return this._pt[h]},Fs.prototype.setMinimum=function(){if(1===arguments.length){var h=arguments[0];this.setMinimum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v<this._distance&&this.initialize(d,m,v)}},Fs.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var h=arguments[0],d=arguments[1];this._pt[0].setCoordinate(h),this._pt[1].setCoordinate(d),this._distance=h.distance(d),this._isNull=!1}else if(3===arguments.length){var v=arguments[1],x=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(v),this._distance=x,this._isNull=!1}},Fs.prototype.getDistance=function(){return this._distance},Fs.prototype.setMaximum=function(){if(1===arguments.length){var h=arguments[0];this.setMaximum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v>this._distance&&this.initialize(d,m,v)}},Fs.prototype.interfaces_=function(){return[]},Fs.prototype.getClass=function(){return Fs};var bo=function(){};bo.prototype.interfaces_=function(){return[]},bo.prototype.getClass=function(){return bo},bo.computeDistance=function(){if(arguments[2]instanceof Fs&&arguments[0]instanceof uo&&arguments[1]instanceof $)for(var d=arguments[1],m=arguments[2],v=arguments[0].getCoordinates(),x=new li,B=0;B<v.length-1;B++){x.setCoordinates(v[B],v[B+1]);var H=x.closestPoint(d);m.setMinimum(H,d)}else if(arguments[2]instanceof Fs&&arguments[0]instanceof Po&&arguments[1]instanceof $){var q=arguments[0],pe=arguments[1],Ue=arguments[2];bo.computeDistance(q.getExteriorRing(),pe,Ue);for(var gt=0;gt<q.getNumInteriorRing();gt++)bo.computeDistance(q.getInteriorRingN(gt),pe,Ue)}else if(arguments[2]instanceof Fs&&arguments[0]instanceof _n&&arguments[1]instanceof $){var pt=arguments[0],ln=arguments[1],bn=arguments[2];if(pt instanceof uo)bo.computeDistance(pt,ln,bn);else if(pt instanceof Po)bo.computeDistance(pt,ln,bn);else if(pt instanceof m1)for(var Rn=pt,Zn=0;Zn<Rn.getNumGeometries();Zn++){var Pr=Rn.getGeometryN(Zn);bo.computeDistance(Pr,ln,bn)}else bn.setMinimum(pt.getCoordinate(),ln)}else if(arguments[2]instanceof Fs&&arguments[0]instanceof li&&arguments[1]instanceof $){var o1=arguments[1],ml=arguments[2],Al=arguments[0].closestPoint(o1);ml.setMinimum(Al,o1)}};var x1=function(h){this._maxPtDist=new Fs,this._inputGeom=h||null},s0={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};x1.prototype.computeMaxMidpointDistance=function(h){var d=new la(this._inputGeom);h.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},x1.prototype.computeMaxVertexDistance=function(h){var d=new Yl(this._inputGeom);h.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},x1.prototype.findDistance=function(h){return this.computeMaxVertexDistance(h),this.computeMaxMidpointDistance(h),this._maxPtDist.getDistance()},x1.prototype.getDistancePoints=function(){return this._maxPtDist},x1.prototype.interfaces_=function(){return[]},x1.prototype.getClass=function(){return x1},s0.MaxPointDistanceFilter.get=function(){return Yl},s0.MaxMidpointDistanceFilter.get=function(){return la},Object.defineProperties(x1,s0);var Yl=function(h){this._maxPtDist=new Fs,this._minPtDist=new Fs,this._geom=h||null};Yl.prototype.filter=function(h){this._minPtDist.initialize(),bo.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Yl.prototype.getMaxPointDistance=function(){return this._maxPtDist},Yl.prototype.interfaces_=function(){return[lr]},Yl.prototype.getClass=function(){return Yl};var la=function(h){this._maxPtDist=new Fs,this._minPtDist=new Fs,this._geom=h||null};la.prototype.filter=function(h,d){if(0===d)return null;var m=h.getCoordinate(d-1),v=h.getCoordinate(d),x=new $((m.x+v.x)/2,(m.y+v.y)/2);this._minPtDist.initialize(),bo.computeDistance(this._geom,x,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},la.prototype.isDone=function(){return!1},la.prototype.isGeometryChanged=function(){return!1},la.prototype.getMaxPointDistance=function(){return this._maxPtDist},la.prototype.interfaces_=function(){return[fc]},la.prototype.getClass=function(){return la};var gl=function(h){this._comps=h||null};gl.prototype.filter=function(h){h instanceof Po&&this._comps.add(h)},gl.prototype.interfaces_=function(){return[Ia]},gl.prototype.getClass=function(){return gl},gl.getPolygons=function(){if(1===arguments.length)return gl.getPolygons(arguments[0],new tn);if(2===arguments.length){var d=arguments[0],m=arguments[1];return d instanceof Po?m.add(d):d instanceof m1&&d.apply(new gl(m)),m}};var n1=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var m=arguments[1];this._lines=arguments[0],this._isForcedToLineString=m}};n1.prototype.filter=function(h){if(this._isForcedToLineString&&h instanceof Bc){var d=h.getFactory().createLineString(h.getCoordinateSequence());return this._lines.add(d),null}h instanceof uo&&this._lines.add(h)},n1.prototype.setForceToLineString=function(h){this._isForcedToLineString=h},n1.prototype.interfaces_=function(){return[Fi]},n1.prototype.getClass=function(){return n1},n1.getGeometry=function(){if(1===arguments.length){var h=arguments[0];return h.getFactory().buildGeometry(n1.getLines(h))}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d.getFactory().buildGeometry(n1.getLines(d,m))}},n1.getLines=function(){if(1===arguments.length)return n1.getLines(arguments[0],!1);if(2===arguments.length){if(At(arguments[0],vs)&&At(arguments[1],vs)){for(var m=arguments[1],v=arguments[0].iterator();v.hasNext();){var x=v.next();n1.getLines(x,m)}return m}if(arguments[0]instanceof _n&&"boolean"==typeof arguments[1]){var B=arguments[0],H=arguments[1],q=new tn;return B.apply(new n1(q,H)),q}if(arguments[0]instanceof _n&&At(arguments[1],vs)){var pe=arguments[0],Ue=arguments[1];return pe instanceof uo?Ue.add(pe):pe.apply(new n1(Ue)),Ue}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&At(arguments[0],vs)&&At(arguments[1],vs)){for(var pt=arguments[1],ln=arguments[2],bn=arguments[0].iterator();bn.hasNext();){var Rn=bn.next();n1.getLines(Rn,pt,ln)}return pt}if("boolean"==typeof arguments[2]&&arguments[0]instanceof _n&&At(arguments[1],vs)){var Pr=arguments[1];return arguments[0].apply(new n1(Pr,arguments[2])),Pr}}};var Ac=function(){if(this._boundaryRule=yr.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var h=arguments[0];if(null===h)throw new X("Rule must be non-null");this._boundaryRule=h}};Ac.prototype.locateInternal=function(){if(arguments[0]instanceof $&&arguments[1]instanceof Po){var h=arguments[0],d=arguments[1];if(d.isEmpty())return se.EXTERIOR;var m=d.getExteriorRing(),v=this.locateInPolygonRing(h,m);if(v===se.EXTERIOR)return se.EXTERIOR;if(v===se.BOUNDARY)return se.BOUNDARY;for(var x=0;x<d.getNumInteriorRing();x++){var B=d.getInteriorRingN(x),H=this.locateInPolygonRing(h,B);if(H===se.INTERIOR)return se.EXTERIOR;if(H===se.BOUNDARY)return se.BOUNDARY}return se.INTERIOR}if(arguments[0]instanceof $&&arguments[1]instanceof uo){var q=arguments[0],pe=arguments[1];if(!pe.getEnvelopeInternal().intersects(q))return se.EXTERIOR;var Ue=pe.getCoordinates();return pe.isClosed()||!q.equals(Ue[0])&&!q.equals(Ue[Ue.length-1])?Mt.isOnLine(q,Ue)?se.INTERIOR:se.EXTERIOR:se.BOUNDARY}if(arguments[0]instanceof $&&arguments[1]instanceof u2){var gt=arguments[0];return arguments[1].getCoordinate().equals2D(gt)?se.INTERIOR:se.EXTERIOR}},Ac.prototype.locateInPolygonRing=function(h,d){return d.getEnvelopeInternal().intersects(h)?Mt.locatePointInRing(h,d.getCoordinates()):se.EXTERIOR},Ac.prototype.intersects=function(h,d){return this.locate(h,d)!==se.EXTERIOR},Ac.prototype.updateLocationInfo=function(h){h===se.INTERIOR&&(this._isIn=!0),h===se.BOUNDARY&&this._numBoundaries++},Ac.prototype.computeLocation=function(h,d){if(d instanceof u2&&this.updateLocationInfo(this.locateInternal(h,d)),d instanceof uo)this.updateLocationInfo(this.locateInternal(h,d));else if(d instanceof Po)this.updateLocationInfo(this.locateInternal(h,d));else if(d instanceof C3)for(var m=d,v=0;v<m.getNumGeometries();v++){var x=m.getGeometryN(v);this.updateLocationInfo(this.locateInternal(h,x))}else if(d instanceof D2)for(var B=d,H=0;H<B.getNumGeometries();H++){var q=B.getGeometryN(H);this.updateLocationInfo(this.locateInternal(h,q))}else if(d instanceof m1)for(var pe=new Ri(d);pe.hasNext();){var Ue=pe.next();Ue!==d&&this.computeLocation(h,Ue)}},Ac.prototype.locate=function(h,d){return d.isEmpty()?se.EXTERIOR:d instanceof uo||d instanceof Po?this.locateInternal(h,d):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(h,d),this._boundaryRule.isInBoundary(this._numBoundaries)?se.BOUNDARY:this._numBoundaries>0||this._isIn?se.INTERIOR:se.EXTERIOR)},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac};var so=function h(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)h.call(this,arguments[0],h.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var x=arguments[1],B=arguments[2];this._component=arguments[0],this._segIndex=x,this._pt=B}},fp={INSIDE_AREA:{configurable:!0}};so.prototype.isInsideArea=function(){return this._segIndex===so.INSIDE_AREA},so.prototype.getCoordinate=function(){return this._pt},so.prototype.getGeometryComponent=function(){return this._component},so.prototype.getSegmentIndex=function(){return this._segIndex},so.prototype.interfaces_=function(){return[]},so.prototype.getClass=function(){return so},fp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(so,fp);var d4=function(h){this._pts=h||null};d4.prototype.filter=function(h){h instanceof u2&&this._pts.add(h)},d4.prototype.interfaces_=function(){return[Ia]},d4.prototype.getClass=function(){return d4},d4.getPoints=function(){if(1===arguments.length){var h=arguments[0];return h instanceof u2?qs.singletonList(h):d4.getPoints(h,new tn)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d instanceof u2?m.add(d):d instanceof m1&&d.apply(new d4(m)),m}};var o0=function(){this._locations=null,this._locations=arguments[0]};o0.prototype.filter=function(h){(h instanceof u2||h instanceof uo||h instanceof Po)&&this._locations.add(new so(h,0,h.getCoordinate()))},o0.prototype.interfaces_=function(){return[Ia]},o0.prototype.getClass=function(){return o0},o0.getLocations=function(h){var d=new tn;return h.apply(new o0(d)),d};var ua=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ac,this._minDistanceLocation=null,this._minDistance=Y.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var m=arguments[0],v=arguments[1],x=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=m,this._geom[1]=v,this._terminateDistance=x}};ua.prototype.computeContainmentDistance=function(){if(0===arguments.length){var h=new Array(2).fill(null);if(this.computeContainmentDistance(0,h),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1],v=1-d,x=gl.getPolygons(this._geom[d]);if(x.size()>0){var B=o0.getLocations(this._geom[v]);if(this.computeContainmentDistance(B,x,m),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[v]=m[0],this._minDistanceLocation[d]=m[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&At(arguments[0],ko)&&At(arguments[1],ko)){for(var H=arguments[0],q=arguments[1],pe=arguments[2],Ue=0;Ue<H.size();Ue++)for(var gt=H.get(Ue),pt=0;pt<q.size();pt++)if(this.computeContainmentDistance(gt,q.get(pt),pe),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof so&&arguments[1]instanceof Po){var ln=arguments[0],bn=arguments[1],Rn=arguments[2],Zn=ln.getCoordinate();if(se.EXTERIOR!==this._ptLocator.locate(Zn,bn))return this._minDistance=0,Rn[0]=ln,Rn[1]=new so(bn,Zn),null}},ua.prototype.computeMinDistanceLinesPoints=function(h,d,m){for(var v=0;v<h.size();v++)for(var x=h.get(v),B=0;B<d.size();B++){var H=d.get(B);if(this.computeMinDistance(x,H,m),this._minDistance<=this._terminateDistance)return null}},ua.prototype.computeFacetDistance=function(){var h=new Array(2).fill(null),d=n1.getLines(this._geom[0]),m=n1.getLines(this._geom[1]),v=d4.getPoints(this._geom[0]),x=d4.getPoints(this._geom[1]);return this.computeMinDistanceLines(d,m,h),this.updateMinDistance(h,!1),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistanceLinesPoints(d,x,h),this.updateMinDistance(h,!1),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistanceLinesPoints(m,v,h),this.updateMinDistance(h,!0),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistancePoints(v,x,h),void this.updateMinDistance(h,!1))))},ua.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},ua.prototype.updateMinDistance=function(h,d){if(null===h[0])return null;d?(this._minDistanceLocation[0]=h[1],this._minDistanceLocation[1]=h[0]):(this._minDistanceLocation[0]=h[0],this._minDistanceLocation[1]=h[1])},ua.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},ua.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof uo&&arguments[1]instanceof u2){var h=arguments[0],d=arguments[1],m=arguments[2];if(h.getEnvelopeInternal().distance(d.getEnvelopeInternal())>this._minDistance)return null;for(var v=h.getCoordinates(),x=d.getCoordinate(),B=0;B<v.length-1;B++){var H=Mt.distancePointLine(x,v[B],v[B+1]);if(H<this._minDistance){this._minDistance=H;var q=new li(v[B],v[B+1]).closestPoint(x);m[0]=new so(h,B,q),m[1]=new so(d,0,x)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof uo&&arguments[1]instanceof uo){var pe=arguments[0],Ue=arguments[1],gt=arguments[2];if(pe.getEnvelopeInternal().distance(Ue.getEnvelopeInternal())>this._minDistance)return null;for(var pt=pe.getCoordinates(),ln=Ue.getCoordinates(),bn=0;bn<pt.length-1;bn++)for(var Rn=0;Rn<ln.length-1;Rn++){var Zn=Mt.distanceLineLine(pt[bn],pt[bn+1],ln[Rn],ln[Rn+1]);if(Zn<this._minDistance){this._minDistance=Zn;var Pr=new li(pt[bn],pt[bn+1]),So=new li(ln[Rn],ln[Rn+1]),o1=Pr.closestPoints(So);gt[0]=new so(pe,bn,o1[0]),gt[1]=new so(Ue,Rn,o1[1])}if(this._minDistance<=this._terminateDistance)return null}}},ua.prototype.computeMinDistancePoints=function(h,d,m){for(var v=0;v<h.size();v++)for(var x=h.get(v),B=0;B<d.size();B++){var H=d.get(B),q=x.getCoordinate().distance(H.getCoordinate());if(q<this._minDistance&&(this._minDistance=q,m[0]=new so(x,0,x.getCoordinate()),m[1]=new so(H,0,H.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},ua.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new X("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},ua.prototype.computeMinDistanceLines=function(h,d,m){for(var v=0;v<h.size();v++)for(var x=h.get(v),B=0;B<d.size();B++){var H=d.get(B);if(this.computeMinDistance(x,H,m),this._minDistance<=this._terminateDistance)return null}},ua.prototype.interfaces_=function(){return[]},ua.prototype.getClass=function(){return ua},ua.distance=function(h,d){return new ua(h,d).distance()},ua.isWithinDistance=function(h,d,m){return new ua(h,d,m).distance()<=m},ua.nearestPoints=function(h,d){return new ua(h,d).nearestPoints()};var b1=function(){this._pt=[new $,new $],this._distance=Y.NaN,this._isNull=!0};b1.prototype.getCoordinates=function(){return this._pt},b1.prototype.getCoordinate=function(h){return this._pt[h]},b1.prototype.setMinimum=function(){if(1===arguments.length){var h=arguments[0];this.setMinimum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v<this._distance&&this.initialize(d,m,v)}},b1.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var h=arguments[0],d=arguments[1];this._pt[0].setCoordinate(h),this._pt[1].setCoordinate(d),this._distance=h.distance(d),this._isNull=!1}else if(3===arguments.length){var v=arguments[1],x=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(v),this._distance=x,this._isNull=!1}},b1.prototype.toString=function(){return nt.toLineString(this._pt[0],this._pt[1])},b1.prototype.getDistance=function(){return this._distance},b1.prototype.setMaximum=function(){if(1===arguments.length){var h=arguments[0];this.setMaximum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v>this._distance&&this.initialize(d,m,v)}},b1.prototype.interfaces_=function(){return[]},b1.prototype.getClass=function(){return b1};var kc=function(){};kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc},kc.computeDistance=function(){if(arguments[2]instanceof b1&&arguments[0]instanceof uo&&arguments[1]instanceof $)for(var h=arguments[0],d=arguments[1],m=arguments[2],v=new li,x=h.getCoordinates(),B=0;B<x.length-1;B++){v.setCoordinates(x[B],x[B+1]);var H=v.closestPoint(d);m.setMinimum(H,d)}else if(arguments[2]instanceof b1&&arguments[0]instanceof Po&&arguments[1]instanceof $){var q=arguments[0],pe=arguments[1],Ue=arguments[2];kc.computeDistance(q.getExteriorRing(),pe,Ue);for(var gt=0;gt<q.getNumInteriorRing();gt++)kc.computeDistance(q.getInteriorRingN(gt),pe,Ue)}else if(arguments[2]instanceof b1&&arguments[0]instanceof _n&&arguments[1]instanceof $){var pt=arguments[0],ln=arguments[1],bn=arguments[2];if(pt instanceof uo)kc.computeDistance(pt,ln,bn);else if(pt instanceof Po)kc.computeDistance(pt,ln,bn);else if(pt instanceof m1)for(var Rn=pt,Zn=0;Zn<Rn.getNumGeometries();Zn++){var Pr=Rn.getGeometryN(Zn);kc.computeDistance(Pr,ln,bn)}else bn.setMinimum(pt.getCoordinate(),ln)}else if(arguments[2]instanceof b1&&arguments[0]instanceof li&&arguments[1]instanceof $){var o1=arguments[1],ml=arguments[2],Al=arguments[0].closestPoint(o1);ml.setMinimum(Al,o1)}};var Y2=function(){this._g0=null,this._g1=null,this._ptDist=new b1,this._densifyFrac=0;var d=arguments[1];this._g0=arguments[0],this._g1=d},D6={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Y2.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Y2.prototype.setDensifyFraction=function(h){if(h>1||h<=0)throw new X("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=h},Y2.prototype.compute=function(h,d){this.computeOrientedDistance(h,d,this._ptDist),this.computeOrientedDistance(d,h,this._ptDist)},Y2.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Y2.prototype.computeOrientedDistance=function(h,d,m){var v=new tu(d);if(h.apply(v),m.setMaximum(v.getMaxPointDistance()),this._densifyFrac>0){var x=new E3(d,this._densifyFrac);h.apply(x),m.setMaximum(x.getMaxPointDistance())}},Y2.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Y2.prototype.interfaces_=function(){return[]},Y2.prototype.getClass=function(){return Y2},Y2.distance=function(){if(2===arguments.length)return new Y2(arguments[0],arguments[1]).distance();if(3===arguments.length){var x=arguments[2],B=new Y2(arguments[0],arguments[1]);return B.setDensifyFraction(x),B.distance()}},D6.MaxPointDistanceFilter.get=function(){return tu},D6.MaxDensifiedByFractionDistanceFilter.get=function(){return E3},Object.defineProperties(Y2,D6);var tu=function(){this._maxPtDist=new b1,this._minPtDist=new b1,this._euclideanDist=new kc,this._geom=null,this._geom=arguments[0]};tu.prototype.filter=function(h){this._minPtDist.initialize(),kc.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},tu.prototype.getMaxPointDistance=function(){return this._maxPtDist},tu.prototype.interfaces_=function(){return[lr]},tu.prototype.getClass=function(){return tu};var E3=function(){this._maxPtDist=new b1,this._minPtDist=new b1,this._geom=null,this._numSubSegs=0;var d=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/d))};E3.prototype.filter=function(h,d){if(0===d)return null;for(var m=h.getCoordinate(d-1),v=h.getCoordinate(d),x=(v.x-m.x)/this._numSubSegs,B=(v.y-m.y)/this._numSubSegs,H=0;H<this._numSubSegs;H++){var Ue=new $(m.x+H*x,m.y+H*B);this._minPtDist.initialize(),kc.computeDistance(this._geom,Ue,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},E3.prototype.isDone=function(){return!1},E3.prototype.isGeometryChanged=function(){return!1},E3.prototype.getMaxPointDistance=function(){return this._maxPtDist},E3.prototype.interfaces_=function(){return[fc]},E3.prototype.getClass=function(){return E3};var A2=function(h,d,m){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=h||null,this._bufDistance=d||null,this._result=m||null},I6={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};A2.prototype.checkMaximumDistance=function(h,d,m){var v=new Y2(d,h);if(v.setDensifyFraction(.25),this._maxDistanceFound=v.orientedDistance(),this._maxDistanceFound>m){this._isValid=!1;var x=v.getCoordinates();this._errorLocation=x[1],this._errorIndicator=h.getFactory().createLineString(x),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+nt.toLineString(x[0],x[1])+")"}},A2.prototype.isValid=function(){var h=Math.abs(this._bufDistance),d=A2.MAX_DISTANCE_DIFF_FRAC*h;return this._minValidDistance=h-d,this._maxValidDistance=h+d,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),A2.VERBOSE&&$t.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},A2.prototype.checkNegativeValid=function(){if(!(this._input instanceof Po||this._input instanceof D2||this._input instanceof m1))return null;var h=this.getPolygonLines(this._input);if(this.checkMinimumDistance(h,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(h,this._result,this._maxValidDistance)},A2.prototype.getErrorIndicator=function(){return this._errorIndicator},A2.prototype.checkMinimumDistance=function(h,d,m){var v=new ua(h,d,m);if(this._minDistanceFound=v.distance(),this._minDistanceFound<m){this._isValid=!1;var x=v.nearestPoints();this._errorLocation=v.nearestPoints()[1],this._errorIndicator=h.getFactory().createLineString(x),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+nt.toLineString(x[0],x[1])+" )"}},A2.prototype.checkPositiveValid=function(){var h=this._result.getBoundary();if(this.checkMinimumDistance(this._input,h,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,h,this._maxValidDistance)},A2.prototype.getErrorLocation=function(){return this._errorLocation},A2.prototype.getPolygonLines=function(h){for(var d=new tn,m=new n1(d),v=gl.getPolygons(h).iterator();v.hasNext();)v.next().apply(m);return h.getFactory().buildGeometry(d)},A2.prototype.getErrorMessage=function(){return this._errMsg},A2.prototype.interfaces_=function(){return[]},A2.prototype.getClass=function(){return A2},I6.VERBOSE.get=function(){return!1},I6.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(A2,I6);var Ha=function(h,d,m){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=h||null,this._distance=d||null,this._result=m||null},dp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Ha.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Ha.prototype.checkEnvelope=function(){if(this._distance<0)return null;var h=this._distance*Ha.MAX_ENV_DIFF_FRAC;0===h&&(h=.001);var d=new rn(this._input.getEnvelopeInternal());d.expandBy(this._distance);var m=new rn(this._result.getEnvelopeInternal());m.expandBy(h),m.contains(d)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(m)),this.report("Envelope")},Ha.prototype.checkDistance=function(){var h=new A2(this._input,this._distance,this._result);h.isValid()||(this._isValid=!1,this._errorMsg=h.getErrorMessage(),this._errorLocation=h.getErrorLocation(),this._errorIndicator=h.getErrorIndicator()),this.report("Distance")},Ha.prototype.checkArea=function(){var h=this._input.getArea(),d=this._result.getArea();this._distance>0&&h>d&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&h<d&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Ha.prototype.checkPolygonal=function(){this._result instanceof Po||this._result instanceof D2||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Ha.prototype.getErrorIndicator=function(){return this._errorIndicator},Ha.prototype.getErrorLocation=function(){return this._errorLocation},Ha.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Ha.prototype.report=function(h){if(!Ha.VERBOSE)return null;$t.out.println("Check "+h+": "+(this._isValid?"passed":"FAILED"))},Ha.prototype.getErrorMessage=function(){return this._errorMsg},Ha.prototype.interfaces_=function(){return[]},Ha.prototype.getClass=function(){return Ha},Ha.isValidMsg=function(h,d,m){var v=new Ha(h,d,m);return v.isValid()?null:v.getErrorMessage()},Ha.isValid=function(h,d,m){return!!new Ha(h,d,m).isValid()},dp.VERBOSE.get=function(){return!1},dp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ha,dp);var v2=function(){this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};v2.prototype.getCoordinates=function(){return this._pts},v2.prototype.size=function(){return this._pts.length},v2.prototype.getCoordinate=function(h){return this._pts[h]},v2.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},v2.prototype.getSegmentOctant=function(h){return h===this._pts.length-1?-1:pc.octant(this.getCoordinate(h),this.getCoordinate(h+1))},v2.prototype.setData=function(h){this._data=h},v2.prototype.getData=function(){return this._data},v2.prototype.toString=function(){return nt.toLineString(new ho(this._pts))},v2.prototype.interfaces_=function(){return[Oo]},v2.prototype.getClass=function(){return v2};var Yo=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new tn,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};Yo.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Yo.prototype.setCheckEndSegmentsOnly=function(h){this._isCheckEndSegmentsOnly=h},Yo.prototype.getIntersectionSegments=function(){return this._intSegments},Yo.prototype.count=function(){return this._intersectionCount},Yo.prototype.getIntersections=function(){return this._intersections},Yo.prototype.setFindAllIntersections=function(h){this._findAllIntersections=h},Yo.prototype.setKeepIntersections=function(h){this._keepIntersections=h},Yo.prototype.processIntersections=function(h,d,m,v){if(!this._findAllIntersections&&this.hasIntersection()||h===m&&d===v||this._isCheckEndSegmentsOnly&&!this.isEndSegment(h,d)&&!this.isEndSegment(m,v))return null;var x=h.getCoordinates()[d],B=h.getCoordinates()[d+1],H=m.getCoordinates()[v],q=m.getCoordinates()[v+1];this._li.computeIntersection(x,B,H,q),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=x,this._intSegments[1]=B,this._intSegments[2]=H,this._intSegments[3]=q,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Yo.prototype.isEndSegment=function(h,d){return 0===d||d>=h.size()-2},Yo.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Yo.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Yo.prototype.interfaces_=function(){return[Rs]},Yo.prototype.getClass=function(){return Yo},Yo.createAllIntersectionsFinder=function(h){var d=new Yo(h);return d.setFindAllIntersections(!0),d},Yo.createAnyIntersectionFinder=function(h){return new Yo(h)},Yo.createIntersectionCounter=function(h){var d=new Yo(h);return d.setFindAllIntersections(!0),d.setKeepIntersections(!1),d};var Pc=function(){this._li=new mt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};Pc.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Pc.prototype.getIntersections=function(){return this._segInt.getIntersections()},Pc.prototype.isValid=function(){return this.execute(),this._isValid},Pc.prototype.setFindAllIntersections=function(h){this._findAllIntersections=h},Pc.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Yo(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var h=new dl;if(h.setSegmentIntersector(this._segInt),h.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Pc.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ja(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Pc.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var h=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+nt.toLineString(h[0],h[1])+" and "+nt.toLineString(h[2],h[3])},Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},Pc.computeIntersections=function(h){var d=new Pc(h);return d.setFindAllIntersections(!0),d.isValid(),d.getIntersections()};var T3=function h(){this._nv=null,this._nv=new Pc(h.toSegmentStrings(arguments[0]))};T3.prototype.checkValid=function(){this._nv.checkValid()},T3.prototype.interfaces_=function(){return[]},T3.prototype.getClass=function(){return T3},T3.toSegmentStrings=function(h){for(var d=new tn,m=h.iterator();m.hasNext();){var v=m.next();d.add(new v2(v.getCoordinates(),v))}return d},T3.checkValid=function(h){new T3(h).checkValid()};var a0=function(h){this._mapOp=h};a0.prototype.map=function(h){for(var d=new tn,m=0;m<h.getNumGeometries();m++){var v=this._mapOp.map(h.getGeometryN(m));v.isEmpty()||d.add(v)}return h.getFactory().createGeometryCollection($i.toGeometryArray(d))},a0.prototype.interfaces_=function(){return[]},a0.prototype.getClass=function(){return a0},a0.map=function(h,d){return new a0(d).map(h)};var r1=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new tn,this._resultLineList=new tn;var d=arguments[1],m=arguments[2];this._op=arguments[0],this._geometryFactory=d,this._ptLocator=m};r1.prototype.collectLines=function(h){for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var m=d.next();this.collectLineEdge(m,h,this._lineEdgesList),this.collectBoundaryTouchEdge(m,h,this._lineEdgesList)}},r1.prototype.labelIsolatedLine=function(h,d){var m=this._ptLocator.locate(h.getCoordinate(),this._op.getArgGeometry(d));h.getLabel().setLocation(d,m)},r1.prototype.build=function(h){return this.findCoveredLineEdges(),this.collectLines(h),this.buildLines(h),this._resultLineList},r1.prototype.collectLineEdge=function(h,d,m){var v=h.getLabel(),x=h.getEdge();h.isLineEdge()&&(h.isVisited()||!zi.isResultOfOp(v,d)||x.isCovered()||(m.add(x),h.setVisitedEdge(!0)))},r1.prototype.findCoveredLineEdges=function(){for(var h=this._op.getGraph().getNodes().iterator();h.hasNext();)h.next().getEdges().findCoveredLineEdges();for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var m=d.next(),v=m.getEdge();if(m.isLineEdge()&&!v.isCoveredSet()){var x=this._op.isCoveredByA(m.getCoordinate());v.setCovered(x)}}},r1.prototype.labelIsolatedLines=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next(),v=m.getLabel();m.isIsolated()&&(v.isNull(0)?this.labelIsolatedLine(m,0):this.labelIsolatedLine(m,1))}},r1.prototype.buildLines=function(h){for(var d=this._lineEdgesList.iterator();d.hasNext();){var m=d.next(),v=this._geometryFactory.createLineString(m.getCoordinates());this._resultLineList.add(v),m.setInResult(!0)}},r1.prototype.collectBoundaryTouchEdge=function(h,d,m){var v=h.getLabel();return h.isLineEdge()||h.isVisited()||h.isInteriorAreaEdge()||h.getEdge().isInResult()?null:(J.isTrue(!(h.isInResult()||h.getSym().isInResult())||!h.getEdge().isInResult()),void(zi.isResultOfOp(v,d)&&d===zi.INTERSECTION&&(m.add(h.getEdge()),h.setVisitedEdge(!0))))},r1.prototype.interfaces_=function(){return[]},r1.prototype.getClass=function(){return r1};var nu=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new tn;var d=arguments[1];this._op=arguments[0],this._geometryFactory=d};nu.prototype.filterCoveredNodeToPoint=function(h){var d=h.getCoordinate();if(!this._op.isCoveredByLA(d)){var m=this._geometryFactory.createPoint(d);this._resultPointList.add(m)}},nu.prototype.extractNonCoveredResultNodes=function(h){for(var d=this._op.getGraph().getNodes().iterator();d.hasNext();){var m=d.next();if(!(m.isInResult()||m.isIncidentEdgeInResult()||0!==m.getEdges().getDegree()&&h!==zi.INTERSECTION)){var v=m.getLabel();zi.isResultOfOp(v,h)&&this.filterCoveredNodeToPoint(m)}}},nu.prototype.build=function(h){return this.extractNonCoveredResultNodes(h),this._resultPointList},nu.prototype.interfaces_=function(){return[]},nu.prototype.getClass=function(){return nu};var wr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};wr.prototype.transformPoint=function(h,d){return this._factory.createPoint(this.transformCoordinates(h.getCoordinateSequence(),h))},wr.prototype.transformPolygon=function(h,d){var m=!0,v=this.transformLinearRing(h.getExteriorRing(),h);null!==v&&v instanceof Bc&&!v.isEmpty()||(m=!1);for(var x=new tn,B=0;B<h.getNumInteriorRing();B++){var H=this.transformLinearRing(h.getInteriorRingN(B),h);null===H||H.isEmpty()||(H instanceof Bc||(m=!1),x.add(H))}if(m)return this._factory.createPolygon(v,x.toArray([]));var q=new tn;return null!==v&&q.add(v),q.addAll(x),this._factory.buildGeometry(q)},wr.prototype.createCoordinateSequence=function(h){return this._factory.getCoordinateSequenceFactory().create(h)},wr.prototype.getInputGeometry=function(){return this._inputGeom},wr.prototype.transformMultiLineString=function(h,d){for(var m=new tn,v=0;v<h.getNumGeometries();v++){var x=this.transformLineString(h.getGeometryN(v),h);null!==x&&(x.isEmpty()||m.add(x))}return this._factory.buildGeometry(m)},wr.prototype.transformCoordinates=function(h,d){return this.copy(h)},wr.prototype.transformLineString=function(h,d){return this._factory.createLineString(this.transformCoordinates(h.getCoordinateSequence(),h))},wr.prototype.transformMultiPoint=function(h,d){for(var m=new tn,v=0;v<h.getNumGeometries();v++){var x=this.transformPoint(h.getGeometryN(v),h);null!==x&&(x.isEmpty()||m.add(x))}return this._factory.buildGeometry(m)},wr.prototype.transformMultiPolygon=function(h,d){for(var m=new tn,v=0;v<h.getNumGeometries();v++){var x=this.transformPolygon(h.getGeometryN(v),h);null!==x&&(x.isEmpty()||m.add(x))}return this._factory.buildGeometry(m)},wr.prototype.copy=function(h){return h.copy()},wr.prototype.transformGeometryCollection=function(h,d){for(var m=new tn,v=0;v<h.getNumGeometries();v++){var x=this.transform(h.getGeometryN(v));null!==x&&(this._pruneEmptyGeometry&&x.isEmpty()||m.add(x))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection($i.toGeometryArray(m)):this._factory.buildGeometry(m)},wr.prototype.transform=function(h){if(this._inputGeom=h,this._factory=h.getFactory(),h instanceof u2)return this.transformPoint(h,null);if(h instanceof $l)return this.transformMultiPoint(h,null);if(h instanceof Bc)return this.transformLinearRing(h,null);if(h instanceof uo)return this.transformLineString(h,null);if(h instanceof C3)return this.transformMultiLineString(h,null);if(h instanceof Po)return this.transformPolygon(h,null);if(h instanceof D2)return this.transformMultiPolygon(h,null);if(h instanceof m1)return this.transformGeometryCollection(h,null);throw new X("Unknown Geometry subtype: "+h.getClass().getName())},wr.prototype.transformLinearRing=function(h,d){var m=this.transformCoordinates(h.getCoordinateSequence(),h);if(null===m)return this._factory.createLinearRing(null);var v=m.size();return v>0&&v<4&&!this._preserveType?this._factory.createLineString(m):this._factory.createLinearRing(m)},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr};var Hc=function h(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new li,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof uo&&"number"==typeof arguments[1]){var m=arguments[1];h.call(this,arguments[0].getCoordinates(),m)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var v=arguments[0],x=arguments[1];this._srcPts=v,this._isClosed=h.isClosed(v),this._snapTolerance=x}};Hc.prototype.snapVertices=function(h,d){for(var m=this._isClosed?h.size()-1:h.size(),v=0;v<m;v++){var x=h.get(v),B=this.findSnapForVertex(x,d);null!==B&&(h.set(v,new $(B)),0===v&&this._isClosed&&h.set(h.size()-1,new $(B)))}},Hc.prototype.findSnapForVertex=function(h,d){for(var m=0;m<d.length;m++){if(h.equals2D(d[m]))return null;if(h.distance(d[m])<this._snapTolerance)return d[m]}return null},Hc.prototype.snapTo=function(h){var d=new l2(this._srcPts);return this.snapVertices(d,h),this.snapSegments(d,h),d.toCoordinateArray()},Hc.prototype.snapSegments=function(h,d){if(0===d.length)return null;var m=d.length;d[0].equals2D(d[d.length-1])&&(m=d.length-1);for(var v=0;v<m;v++){var x=d[v],B=this.findSegmentIndexToSnap(x,h);B>=0&&h.add(B+1,new $(x),!1)}},Hc.prototype.findSegmentIndexToSnap=function(h,d){for(var m=Y.MAX_VALUE,v=-1,x=0;x<d.size()-1;x++){if(this._seg.p0=d.get(x),this._seg.p1=d.get(x+1),this._seg.p0.equals2D(h)||this._seg.p1.equals2D(h)){if(this._allowSnappingToSourceVertices)continue;return-1}var B=this._seg.distance(h);B<this._snapTolerance&&B<m&&(m=B,v=x)}return v},Hc.prototype.setAllowSnappingToSourceVertices=function(h){this._allowSnappingToSourceVertices=h},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Hc.isClosed=function(h){return!(h.length<=1)&&h[0].equals2D(h[h.length-1])};var Mo=function(h){this._srcGeom=h||null},pp={SNAP_PRECISION_FACTOR:{configurable:!0}};Mo.prototype.snapTo=function(h,d){var m=this.extractTargetCoordinates(h);return new L3(d,m).transform(this._srcGeom)},Mo.prototype.snapToSelf=function(h,d){var m=this.extractTargetCoordinates(this._srcGeom),v=new L3(h,m,!0).transform(this._srcGeom),x=v;return d&&At(x,dc)&&(x=v.buffer(0)),x},Mo.prototype.computeSnapTolerance=function(h){return this.computeMinimumSegmentLength(h)/10},Mo.prototype.extractTargetCoordinates=function(h){for(var d=new yt,m=h.getCoordinates(),v=0;v<m.length;v++)d.add(m[v]);return d.toArray(new Array(0).fill(null))},Mo.prototype.computeMinimumSegmentLength=function(h){for(var d=Y.MAX_VALUE,m=0;m<h.length-1;m++){var v=h[m].distance(h[m+1]);v<d&&(d=v)}return d},Mo.prototype.interfaces_=function(){return[]},Mo.prototype.getClass=function(){return Mo},Mo.snap=function(h,d,m){var v=new Array(2).fill(null),x=new Mo(h);v[0]=x.snapTo(d,m);var B=new Mo(d);return v[1]=B.snapTo(v[0],m),v},Mo.computeOverlaySnapTolerance=function(){if(1===arguments.length){var h=arguments[0],d=Mo.computeSizeBasedSnapTolerance(h),m=h.getPrecisionModel();if(m.getType()===Ln.FIXED){var v=1/m.getScale()*2/1.415;v>d&&(d=v)}return d}if(2===arguments.length){var B=arguments[1];return Math.min(Mo.computeOverlaySnapTolerance(arguments[0]),Mo.computeOverlaySnapTolerance(B))}},Mo.computeSizeBasedSnapTolerance=function(h){var d=h.getEnvelopeInternal();return Math.min(d.getHeight(),d.getWidth())*Mo.SNAP_PRECISION_FACTOR},Mo.snapToSelf=function(h,d,m){return new Mo(h).snapToSelf(d,m)},pp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Mo,pp);var L3=function(h){function d(m,v,x){h.call(this),this._snapTolerance=m||null,this._snapPts=v||null,this._isSelfSnap=void 0!==x&&x}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.snapLine=function(m,v){var x=new Hc(m,this._snapTolerance);return x.setAllowSnappingToSourceVertices(this._isSelfSnap),x.snapTo(v)},d.prototype.transformCoordinates=function(m,v){var x=m.toCoordinateArray(),B=this.snapLine(x,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(B)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(wr),s1=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};s1.prototype.getCommon=function(){return Y.longBitsToDouble(this._commonBits)},s1.prototype.add=function(h){var d=Y.doubleToLongBits(h);return this._isFirst?(this._commonBits=d,this._commonSignExp=s1.signExpBits(this._commonBits),this._isFirst=!1,null):s1.signExpBits(d)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=s1.numCommonMostSigMantissaBits(this._commonBits,d),void(this._commonBits=s1.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},s1.prototype.toString=function(){if(1===arguments.length){var h=arguments[0],d=Y.longBitsToDouble(h),m="0000000000000000000000000000000000000000000000000000000000000000"+Y.toBinaryString(h),v=m.substring(m.length-64);return v.substring(0,1)+"  "+v.substring(1,12)+"(exp) "+v.substring(12)+" [ "+d+" ]"}},s1.prototype.interfaces_=function(){return[]},s1.prototype.getClass=function(){return s1},s1.getBit=function(h,d){return 0!=(h&1<<d)?1:0},s1.signExpBits=function(h){return h>>52},s1.zeroLowerBits=function(h,d){return h&~((1<<d)-1)},s1.numCommonMostSigMantissaBits=function(h,d){for(var m=0,v=52;v>=0;v--){if(s1.getBit(h,v)!==s1.getBit(d,v))return m;m++}return 52};var D3=function(){this._commonCoord=null,this._ccFilter=new iu},p4={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};D3.prototype.addCommonBits=function(h){var d=new za(this._commonCoord);h.apply(d),h.geometryChanged()},D3.prototype.removeCommonBits=function(h){if(0===this._commonCoord.x&&0===this._commonCoord.y)return h;var d=new $(this._commonCoord);d.x=-d.x,d.y=-d.y;var m=new za(d);return h.apply(m),h.geometryChanged(),h},D3.prototype.getCommonCoordinate=function(){return this._commonCoord},D3.prototype.add=function(h){h.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},D3.prototype.interfaces_=function(){return[]},D3.prototype.getClass=function(){return D3},p4.CommonCoordinateFilter.get=function(){return iu},p4.Translater.get=function(){return za},Object.defineProperties(D3,p4);var iu=function(){this._commonBitsX=new s1,this._commonBitsY=new s1};iu.prototype.filter=function(h){this._commonBitsX.add(h.x),this._commonBitsY.add(h.y)},iu.prototype.getCommonCoordinate=function(){return new $(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},iu.prototype.interfaces_=function(){return[lr]},iu.prototype.getClass=function(){return iu};var za=function(){this.trans=null,this.trans=arguments[0]};za.prototype.filter=function(h,d){var m=h.getOrdinate(d,0)+this.trans.x,v=h.getOrdinate(d,1)+this.trans.y;h.setOrdinate(d,0,m),h.setOrdinate(d,1,v)},za.prototype.isDone=function(){return!1},za.prototype.isGeometryChanged=function(){return!0},za.prototype.interfaces_=function(){return[fc]},za.prototype.getClass=function(){return za};var Zo=function(h,d){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=h,this._geom[1]=d,this.computeSnapTolerance()};Zo.prototype.selfSnap=function(h){return new Mo(h).snapTo(h,this._snapTolerance)},Zo.prototype.removeCommonBits=function(h){this._cbr=new D3,this._cbr.add(h[0]),this._cbr.add(h[1]);var d=new Array(2).fill(null);return d[0]=this._cbr.removeCommonBits(h[0].copy()),d[1]=this._cbr.removeCommonBits(h[1].copy()),d},Zo.prototype.prepareResult=function(h){return this._cbr.addCommonBits(h),h},Zo.prototype.getResultGeometry=function(h){var d=this.snap(this._geom),m=zi.overlayOp(d[0],d[1],h);return this.prepareResult(m)},Zo.prototype.checkValid=function(h){h.isValid()||$t.out.println("Snapped geometry is invalid")},Zo.prototype.computeSnapTolerance=function(){this._snapTolerance=Mo.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Zo.prototype.snap=function(h){var d=this.removeCommonBits(h);return Mo.snap(d[0],d[1],this._snapTolerance)},Zo.prototype.interfaces_=function(){return[]},Zo.prototype.getClass=function(){return Zo},Zo.overlayOp=function(h,d,m){return new Zo(h,d).getResultGeometry(m)},Zo.union=function(h,d){return Zo.overlayOp(h,d,zi.UNION)},Zo.intersection=function(h,d){return Zo.overlayOp(h,d,zi.INTERSECTION)},Zo.symDifference=function(h,d){return Zo.overlayOp(h,d,zi.SYMDIFFERENCE)},Zo.difference=function(h,d){return Zo.overlayOp(h,d,zi.DIFFERENCE)};var M1=function(h,d){this._geom=new Array(2).fill(null),this._geom[0]=h,this._geom[1]=d};M1.prototype.getResultGeometry=function(h){var d=null,m=!1,v=null;try{d=zi.overlayOp(this._geom[0],this._geom[1],h),m=!0}catch(x){if(!(x instanceof le))throw x;v=x}if(!m)try{d=Zo.overlayOp(this._geom[0],this._geom[1],h)}catch(x){throw x instanceof le?v:x}return d},M1.prototype.interfaces_=function(){return[]},M1.prototype.getClass=function(){return M1},M1.overlayOp=function(h,d,m){return new M1(h,d).getResultGeometry(m)},M1.union=function(h,d){return M1.overlayOp(h,d,zi.UNION)},M1.intersection=function(h,d){return M1.overlayOp(h,d,zi.INTERSECTION)},M1.symDifference=function(h,d){return M1.overlayOp(h,d,zi.SYMDIFFERENCE)},M1.difference=function(h,d){return M1.overlayOp(h,d,zi.DIFFERENCE)};var Zl=function(){this.mce=null,this.chainIndex=null;var d=arguments[1];this.mce=arguments[0],this.chainIndex=d};Zl.prototype.computeIntersections=function(h,d){this.mce.computeIntersectsForChain(this.chainIndex,h.mce,h.chainIndex,d)},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var _2=function h(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var d=arguments[0],m=arguments[1];this._eventType=h.DELETE,this._xValue=d,this._insertEvent=m}else if(3===arguments.length){var v=arguments[0],x=arguments[1],B=arguments[2];this._eventType=h.INSERT,this._label=v,this._xValue=x,this._obj=B}},gp={INSERT:{configurable:!0},DELETE:{configurable:!0}};_2.prototype.isDelete=function(){return this._eventType===_2.DELETE},_2.prototype.setDeleteEventIndex=function(h){this._deleteEventIndex=h},_2.prototype.getObject=function(){return this._obj},_2.prototype.compareTo=function(h){return this._xValue<h._xValue?-1:this._xValue>h._xValue?1:this._eventType<h._eventType?-1:this._eventType>h._eventType?1:0},_2.prototype.getInsertEvent=function(){return this._insertEvent},_2.prototype.isInsert=function(){return this._eventType===_2.INSERT},_2.prototype.isSameLabel=function(h){return null!==this._label&&this._label===h._label},_2.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},_2.prototype.interfaces_=function(){return[Z]},_2.prototype.getClass=function(){return _2},gp.INSERT.get=function(){return 1},gp.DELETE.get=function(){return 2},Object.defineProperties(_2,gp);var Jo=function(){};Jo.prototype.interfaces_=function(){return[]},Jo.prototype.getClass=function(){return Jo};var Oa=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var d=arguments[1],m=arguments[2];this._li=arguments[0],this._includeProper=d,this._recordIsolated=m};Oa.prototype.isTrivialIntersection=function(h,d,m,v){if(h===m&&1===this._li.getIntersectionNum()){if(Oa.isAdjacentSegments(d,v))return!0;if(h.isClosed()){var x=h.getNumPoints()-1;if(0===d&&v===x||0===v&&d===x)return!0}}return!1},Oa.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Oa.prototype.setIsDoneIfProperInt=function(h){this._isDoneWhenProperInt=h},Oa.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Oa.prototype.isBoundaryPointInternal=function(h,d){for(var m=d.iterator();m.hasNext();){var v=m.next().getCoordinate();if(h.isIntersection(v))return!0}return!1},Oa.prototype.hasProperIntersection=function(){return this._hasProper},Oa.prototype.hasIntersection=function(){return this._hasIntersection},Oa.prototype.isDone=function(){return this._isDone},Oa.prototype.isBoundaryPoint=function(h,d){return!(null===d||!this.isBoundaryPointInternal(h,d[0])&&!this.isBoundaryPointInternal(h,d[1]))},Oa.prototype.setBoundaryNodes=function(h,d){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=h,this._bdyNodes[1]=d},Oa.prototype.addIntersections=function(h,d,m,v){if(h===m&&d===v)return null;this.numTests++;var x=h.getCoordinates()[d],B=h.getCoordinates()[d+1],H=m.getCoordinates()[v],q=m.getCoordinates()[v+1];this._li.computeIntersection(x,B,H,q),this._li.hasIntersection()&&(this._recordIsolated&&(h.setIsolated(!1),m.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(h,d,m,v)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(h.addIntersections(this._li,d,0),m.addIntersections(this._li,v,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa},Oa.isAdjacentSegments=function(h,d){return 1===Math.abs(h-d)};var B6=function(h){function d(){h.call(this),this.events=new tn,this.nOverlaps=null}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.prepareEvents=function(){qs.sort(this.events);for(var m=0;m<this.events.size();m++){var v=this.events.get(m);v.isDelete()&&v.getInsertEvent().setDeleteEventIndex(m)}},d.prototype.computeIntersections=function(){if(1===arguments.length){var m=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var v=0;v<this.events.size();v++){var x=this.events.get(v);if(x.isInsert()&&this.processOverlaps(v,x.getDeleteEventIndex(),x,m),m.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Oa&&At(arguments[0],ko)&&At(arguments[1],ko)){var B=arguments[0],H=arguments[1],q=arguments[2];this.addEdges(B,B),this.addEdges(H,H),this.computeIntersections(q)}else if("boolean"==typeof arguments[2]&&At(arguments[0],ko)&&arguments[1]instanceof Oa){var pe=arguments[0],Ue=arguments[1];arguments[2]?this.addEdges(pe,null):this.addEdges(pe),this.computeIntersections(Ue)}},d.prototype.addEdge=function(m,v){for(var x=m.getMonotoneChainEdge(),B=x.getStartIndexes(),H=0;H<B.length-1;H++){var q=new Zl(x,H),pe=new _2(v,x.getMinX(H),q);this.events.add(pe),this.events.add(new _2(x.getMaxX(H),pe))}},d.prototype.processOverlaps=function(m,v,x,B){for(var H=x.getObject(),q=m;q<v;q++){var pe=this.events.get(q);if(pe.isInsert()){var Ue=pe.getObject();x.isSameLabel(pe)||(H.computeIntersections(Ue,B),this.nOverlaps++)}}},d.prototype.addEdges=function(){if(1===arguments.length)for(var m=arguments[0].iterator();m.hasNext();){var v=m.next();this.addEdge(v,v)}else if(2===arguments.length)for(var B=arguments[1],H=arguments[0].iterator();H.hasNext();){var q=H.next();this.addEdge(q,B)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Jo),Z2=function(){this._min=Y.POSITIVE_INFINITY,this._max=Y.NEGATIVE_INFINITY},vc={NodeComparator:{configurable:!0}};Z2.prototype.getMin=function(){return this._min},Z2.prototype.intersects=function(h,d){return!(this._min>d||this._max<h)},Z2.prototype.getMax=function(){return this._max},Z2.prototype.toString=function(){return nt.toLineString(new $(this._min,0),new $(this._max,0))},Z2.prototype.interfaces_=function(){return[]},Z2.prototype.getClass=function(){return Z2},vc.NodeComparator.get=function(){return oh},Object.defineProperties(Z2,vc);var oh=function(){};oh.prototype.compare=function(h,d){var x=(h._min+h._max)/2,B=(d._min+d._max)/2;return x<B?-1:x>B?1:0},oh.prototype.interfaces_=function(){return[ce]},oh.prototype.getClass=function(){return oh};var R6=function(h){function d(){h.call(this),this._item=null;var v=arguments[1],x=arguments[2];this._min=arguments[0],this._max=v,this._item=x}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.query=function(m,v,x){if(!this.intersects(m,v))return null;x.visitItem(this._item)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Z2),I3=function(h){function d(){h.call(this),this._node1=null,this._node2=null;var v=arguments[1];this._node1=arguments[0],this._node2=v,this.buildExtent(this._node1,this._node2)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.buildExtent=function(m,v){this._min=Math.min(m._min,v._min),this._max=Math.max(m._max,v._max)},d.prototype.query=function(m,v,x){if(!this.intersects(m,v))return null;null!==this._node1&&this._node1.query(m,v,x),null!==this._node2&&this._node2.query(m,v,x)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Z2),ea=function(){this._leaves=new tn,this._root=null,this._level=0};ea.prototype.buildTree=function(){qs.sort(this._leaves,new Z2.NodeComparator);for(var h=this._leaves,d=null,m=new tn;;){if(this.buildLevel(h,m),1===m.size())return m.get(0);d=h,h=m,m=d}},ea.prototype.insert=function(h,d,m){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new R6(h,d,m))},ea.prototype.query=function(h,d,m){this.init(),this._root.query(h,d,m)},ea.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},ea.prototype.printNode=function(h){$t.out.println(nt.toLineString(new $(h._min,this._level),new $(h._max,this._level)))},ea.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},ea.prototype.buildLevel=function(h,d){this._level++,d.clear();for(var m=0;m<h.size();m+=2){var v=h.get(m);if(null===(m+1<h.size()?h.get(m):null))d.add(v);else{var x=new I3(h.get(m),h.get(m+1));d.add(x)}}},ea.prototype.interfaces_=function(){return[]},ea.prototype.getClass=function(){return ea};var c0=function(){this._items=new tn};c0.prototype.visitItem=function(h){this._items.add(h)},c0.prototype.getItems=function(){return this._items},c0.prototype.interfaces_=function(){return[Kl]},c0.prototype.getClass=function(){return c0};var B3=function(){this._index=null;var h=arguments[0];if(!At(h,dc))throw new X("Argument must be Polygonal");this._index=new R3(h)},F6={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};B3.prototype.locate=function(h){var d=new Kt(h),m=new _c(d);return this._index.query(h.y,h.y,m),d.getLocation()},B3.prototype.interfaces_=function(){return[nn]},B3.prototype.getClass=function(){return B3},F6.SegmentVisitor.get=function(){return _c},F6.IntervalIndexedGeometry.get=function(){return R3},Object.defineProperties(B3,F6);var _c=function(){this._counter=null,this._counter=arguments[0]};_c.prototype.visitItem=function(h){var d=h;this._counter.countSegment(d.getCoordinate(0),d.getCoordinate(1))},_c.prototype.interfaces_=function(){return[Kl]},_c.prototype.getClass=function(){return _c};var R3=function(){this._index=new ea,this.init(arguments[0])};R3.prototype.init=function(h){for(var d=n1.getLines(h).iterator();d.hasNext();){var m=d.next().getCoordinates();this.addLine(m)}},R3.prototype.addLine=function(h){for(var d=1;d<h.length;d++){var m=new li(h[d-1],h[d]),v=Math.min(m.p0.y,m.p1.y),x=Math.max(m.p0.y,m.p1.y);this._index.insert(v,x,m)}},R3.prototype.query=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=new c0;return this._index.query(h,d,m),m.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},R3.prototype.interfaces_=function(){return[]},R3.prototype.getClass=function(){return R3};var ru=function(h){function d(){if(h.call(this),this._parentGeom=null,this._lineEdgeMap=new pr,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ac,2===arguments.length){var v=arguments[1],x=yr.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=v,this._boundaryNodeRule=x,null!==v&&this.add(v)}else if(3===arguments.length){var H=arguments[1],q=arguments[2];this._argIndex=arguments[0],this._parentGeom=H,this._boundaryNodeRule=q,null!==H&&this.add(H)}}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.insertBoundaryPoint=function(m,v){var x=this._nodes.addNode(v).getLabel(),B=1;x.getLocation(m,cn.ON)===se.BOUNDARY&&B++;var H=d.determineBoundary(this._boundaryNodeRule,B);x.setLocation(m,H)},d.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var B=arguments[1],H=arguments[2],q=new Oa(arguments[0],!0,!1);return q.setIsDoneIfProperInt(H),this.createEdgeSetIntersector().computeIntersections(this._edges,q,B||!(this._parentGeom instanceof Bc||this._parentGeom instanceof Po||this._parentGeom instanceof D2)),this.addSelfIntersectionNodes(this._argIndex),q}},d.prototype.computeSplitEdges=function(m){for(var v=this._edges.iterator();v.hasNext();)v.next().eiList.addSplitEdges(m)},d.prototype.computeEdgeIntersections=function(m,v,x){var B=new Oa(v,x,!0);return B.setBoundaryNodes(this.getBoundaryNodes(),m.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,m._edges,B),B},d.prototype.getGeometry=function(){return this._parentGeom},d.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},d.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},d.prototype.addPoint=function(){if(arguments[0]instanceof u2){var m=arguments[0].getCoordinate();this.insertPoint(this._argIndex,m,se.INTERIOR)}else arguments[0]instanceof $&&this.insertPoint(this._argIndex,arguments[0],se.INTERIOR)},d.prototype.addPolygon=function(m){this.addPolygonRing(m.getExteriorRing(),se.EXTERIOR,se.INTERIOR);for(var v=0;v<m.getNumInteriorRing();v++){var x=m.getInteriorRingN(v);this.addPolygonRing(x,se.INTERIOR,se.EXTERIOR)}},d.prototype.addEdge=function(m){this.insertEdge(m);var v=m.getCoordinates();this.insertPoint(this._argIndex,v[0],se.BOUNDARY),this.insertPoint(this._argIndex,v[v.length-1],se.BOUNDARY)},d.prototype.addLineString=function(m){var v=Bi.removeRepeatedPoints(m.getCoordinates());if(v.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=v[0],null;var x=new S3(v,new hs(this._argIndex,se.INTERIOR));this._lineEdgeMap.put(m,x),this.insertEdge(x),J.isTrue(v.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,v[0]),this.insertBoundaryPoint(this._argIndex,v[v.length-1])},d.prototype.getInvalidPoint=function(){return this._invalidPoint},d.prototype.getBoundaryPoints=function(){for(var m=this.getBoundaryNodes(),v=new Array(m.size()).fill(null),x=0,B=m.iterator();B.hasNext();){var H=B.next();v[x++]=H.getCoordinate().copy()}return v},d.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},d.prototype.addSelfIntersectionNode=function(m,v,x){if(this.isBoundaryNode(m,v))return null;x===se.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(m,v):this.insertPoint(m,v,x)},d.prototype.addPolygonRing=function(m,v,x){if(m.isEmpty())return null;var B=Bi.removeRepeatedPoints(m.getCoordinates());if(B.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=B[0],null;var H=v,q=x;Mt.isCCW(B)&&(H=x,q=v);var pe=new S3(B,new hs(this._argIndex,se.BOUNDARY,H,q));this._lineEdgeMap.put(m,pe),this.insertEdge(pe),this.insertPoint(this._argIndex,B[0],se.BOUNDARY)},d.prototype.insertPoint=function(m,v,x){var B=this._nodes.addNode(v),H=B.getLabel();null===H?B._label=new hs(m,x):H.setLocation(m,x)},d.prototype.createEdgeSetIntersector=function(){return new B6},d.prototype.addSelfIntersectionNodes=function(m){for(var v=this._edges.iterator();v.hasNext();)for(var x=v.next(),B=x.getLabel().getLocation(m),H=x.eiList.iterator();H.hasNext();){var q=H.next();this.addSelfIntersectionNode(m,q.coord,B)}},d.prototype.add=function(){if(1!==arguments.length)return h.prototype.add.apply(this,arguments);var m=arguments[0];if(m.isEmpty())return null;if(m instanceof D2&&(this._useBoundaryDeterminationRule=!1),m instanceof Po)this.addPolygon(m);else if(m instanceof uo)this.addLineString(m);else if(m instanceof u2)this.addPoint(m);else if(m instanceof $l)this.addCollection(m);else if(m instanceof C3)this.addCollection(m);else if(m instanceof D2)this.addCollection(m);else{if(!(m instanceof m1))throw new Error(m.getClass().getName());this.addCollection(m)}},d.prototype.addCollection=function(m){for(var v=0;v<m.getNumGeometries();v++){var x=m.getGeometryN(v);this.add(x)}},d.prototype.locate=function(m){return At(this._parentGeom,dc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new B3(this._parentGeom)),this._areaPtLocator.locate(m)):this._ptLocator.locate(m,this._parentGeom)},d.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):h.prototype.findEdge.apply(this,arguments)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.determineBoundary=function(m,v){return m.isInBoundary(v)?se.BOUNDARY:se.INTERIOR},d}(wn),Hi=function(){if(this._li=new mt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var h=arguments[0];this.setComputationPrecision(h.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ru(0,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1],v=yr.OGC_SFS_BOUNDARY_RULE;d.getPrecisionModel().compareTo(m.getPrecisionModel())>=0?this.setComputationPrecision(d.getPrecisionModel()):this.setComputationPrecision(m.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ru(0,d,v),this._arg[1]=new ru(1,m,v)}else if(3===arguments.length){var x=arguments[0],B=arguments[1],H=arguments[2];x.getPrecisionModel().compareTo(B.getPrecisionModel())>=0?this.setComputationPrecision(x.getPrecisionModel()):this.setComputationPrecision(B.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ru(0,x,H),this._arg[1]=new ru(1,B,H)}};Hi.prototype.getArgGeometry=function(h){return this._arg[h].getGeometry()},Hi.prototype.setComputationPrecision=function(h){this._resultPrecisionModel=h,this._li.setPrecisionModel(this._resultPrecisionModel)},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var F3=function(){};F3.prototype.interfaces_=function(){return[]},F3.prototype.getClass=function(){return F3},F3.map=function(){if(arguments[0]instanceof _n&&At(arguments[1],F3.MapOp)){for(var h=arguments[0],d=arguments[1],m=new tn,v=0;v<h.getNumGeometries();v++){var x=d.map(h.getGeometryN(v));null!==x&&m.add(x)}return h.getFactory().buildGeometry(m)}if(At(arguments[0],vs)&&At(arguments[1],F3.MapOp)){for(var B=arguments[0],H=arguments[1],q=new tn,pe=B.iterator();pe.hasNext();){var Ue=pe.next(),gt=H.map(Ue);null!==gt&&q.add(gt)}return q}},F3.MapOp=function(){};var zi=function(h){function d(){var m=arguments[0];h.call(this,m,arguments[1]),this._ptLocator=new Ac,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new fr,this._resultPolyList=new tn,this._resultLineList=new tn,this._resultPointList=new tn,this._graph=new wn(new ro),this._geomFact=m.getFactory()}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.insertUniqueEdge=function(m){var v=this._edgeList.findEqualEdge(m);if(null!==v){var x=v.getLabel(),B=m.getLabel();v.isPointwiseEqual(m)||(B=new hs(m.getLabel())).flip();var H=v.getDepth();H.isNull()&&H.add(x),H.add(B),x.merge(B)}else this._edgeList.add(m)},d.prototype.getGraph=function(){return this._graph},d.prototype.cancelDuplicateResultEdges=function(){for(var m=this._graph.getEdgeEnds().iterator();m.hasNext();){var v=m.next(),x=v.getSym();v.isInResult()&&x.isInResult()&&(v.setInResult(!1),x.setInResult(!1))}},d.prototype.isCoveredByLA=function(m){return!!this.isCovered(m,this._resultLineList)||!!this.isCovered(m,this._resultPolyList)},d.prototype.computeGeometry=function(m,v,x,B){var H=new tn;return H.addAll(m),H.addAll(v),H.addAll(x),H.isEmpty()?d.createEmptyResult(B,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(H)},d.prototype.mergeSymLabels=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().mergeSymLabels()},d.prototype.isCovered=function(m,v){for(var x=v.iterator();x.hasNext();){var B=x.next();if(this._ptLocator.locate(m,B)!==se.EXTERIOR)return!0}return!1},d.prototype.replaceCollapsedEdges=function(){for(var m=new tn,v=this._edgeList.iterator();v.hasNext();){var x=v.next();x.isCollapsed()&&(v.remove(),m.add(x.getCollapsedEdge()))}this._edgeList.addAll(m)},d.prototype.updateNodeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var v=m.next(),x=v.getEdges().getLabel();v.getLabel().merge(x)}},d.prototype.getResultGeometry=function(m){return this.computeOverlay(m),this._resultGeom},d.prototype.insertUniqueEdges=function(m){for(var v=m.iterator();v.hasNext();){var x=v.next();this.insertUniqueEdge(x)}},d.prototype.computeOverlay=function(m){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var v=new tn;this._arg[0].computeSplitEdges(v),this._arg[1].computeSplitEdges(v),this.insertUniqueEdges(v),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),T3.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(m),this.cancelDuplicateResultEdges();var x=new e1(this._geomFact);x.add(this._graph),this._resultPolyList=x.getPolygons();var B=new r1(this,this._geomFact,this._ptLocator);this._resultLineList=B.build(m);var H=new nu(this,this._geomFact,this._ptLocator);this._resultPointList=H.build(m),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,m)},d.prototype.labelIncompleteNode=function(m,v){var x=this._ptLocator.locate(m.getCoordinate(),this._arg[v].getGeometry());m.getLabel().setLocation(v,x)},d.prototype.copyPoints=function(m){for(var v=this._arg[m].getNodeIterator();v.hasNext();){var x=v.next();this._graph.addNode(x.getCoordinate()).setLabel(m,x.getLabel().getLocation(m))}},d.prototype.findResultAreaEdges=function(m){for(var v=this._graph.getEdgeEnds().iterator();v.hasNext();){var x=v.next(),B=x.getLabel();B.isArea()&&!x.isInteriorAreaEdge()&&d.isResultOfOp(B.getLocation(0,cn.RIGHT),B.getLocation(1,cn.RIGHT),m)&&x.setInResult(!0)}},d.prototype.computeLabelsFromDepths=function(){for(var m=this._edgeList.iterator();m.hasNext();){var v=m.next(),x=v.getLabel(),B=v.getDepth();if(!B.isNull()){B.normalize();for(var H=0;H<2;H++)x.isNull(H)||!x.isArea()||B.isNull(H)||(0===B.getDelta(H)?x.toLine(H):(J.isTrue(!B.isNull(H,cn.LEFT),"depth of LEFT side has not been initialized"),x.setLocation(H,cn.LEFT,B.getLocation(H,cn.LEFT)),J.isTrue(!B.isNull(H,cn.RIGHT),"depth of RIGHT side has not been initialized"),x.setLocation(H,cn.RIGHT,B.getLocation(H,cn.RIGHT))))}}},d.prototype.computeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},d.prototype.labelIncompleteNodes=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var v=m.next(),x=v.getLabel();v.isIsolated()&&(x.isNull(0)?this.labelIncompleteNode(v,0):this.labelIncompleteNode(v,1)),v.getEdges().updateLabelling(x)}},d.prototype.isCoveredByA=function(m){return!!this.isCovered(m,this._resultPolyList)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Hi);zi.overlayOp=function(h,d,m){return new zi(h,d).getResultGeometry(m)},zi.intersection=function(h,d){if(h.isEmpty()||d.isEmpty())return zi.createEmptyResult(zi.INTERSECTION,h,d,h.getFactory());if(h.isGeometryCollection()){var m=d;return a0.map(h,{interfaces_:function(){return[F3.MapOp]},map:function(v){return v.intersection(m)}})}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),M1.overlayOp(h,d,zi.INTERSECTION)},zi.symDifference=function(h,d){if(h.isEmpty()||d.isEmpty()){if(h.isEmpty()&&d.isEmpty())return zi.createEmptyResult(zi.SYMDIFFERENCE,h,d,h.getFactory());if(h.isEmpty())return d.copy();if(d.isEmpty())return h.copy()}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),M1.overlayOp(h,d,zi.SYMDIFFERENCE)},zi.resultDimension=function(h,d,m){var v=d.getDimension(),x=m.getDimension(),B=-1;switch(h){case zi.INTERSECTION:B=Math.min(v,x);break;case zi.UNION:B=Math.max(v,x);break;case zi.DIFFERENCE:B=v;break;case zi.SYMDIFFERENCE:B=Math.max(v,x)}return B},zi.createEmptyResult=function(h,d,m,v){var x=null;switch(zi.resultDimension(h,d,m)){case-1:x=v.createGeometryCollection(new Array(0).fill(null));break;case 0:x=v.createPoint();break;case 1:x=v.createLineString();break;case 2:x=v.createPolygon()}return x},zi.difference=function(h,d){return h.isEmpty()?zi.createEmptyResult(zi.DIFFERENCE,h,d,h.getFactory()):d.isEmpty()?h.copy():(h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),M1.overlayOp(h,d,zi.DIFFERENCE))},zi.isResultOfOp=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=h.getLocation(0),v=h.getLocation(1);return zi.isResultOfOp(m,v,d)}if(3===arguments.length){var x=arguments[0],B=arguments[1];switch(x===se.BOUNDARY&&(x=se.INTERIOR),B===se.BOUNDARY&&(B=se.INTERIOR),arguments[2]){case zi.INTERSECTION:return x===se.INTERIOR&&B===se.INTERIOR;case zi.UNION:return x===se.INTERIOR||B===se.INTERIOR;case zi.DIFFERENCE:return x===se.INTERIOR&&B!==se.INTERIOR;case zi.SYMDIFFERENCE:return x===se.INTERIOR&&B!==se.INTERIOR||x!==se.INTERIOR&&B===se.INTERIOR}return!1}},zi.INTERSECTION=1,zi.UNION=2,zi.DIFFERENCE=3,zi.SYMDIFFERENCE=4;var yc=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ac,this._seg=new li;var h=arguments[0],d=arguments[1];this._g=h,this._boundaryDistanceTolerance=d,this._linework=this.extractLinework(h)};yc.prototype.isWithinToleranceOfBoundary=function(h){for(var d=0;d<this._linework.getNumGeometries();d++)for(var m=this._linework.getGeometryN(d).getCoordinateSequence(),v=0;v<m.size()-1;v++)if(m.getCoordinate(v,this._seg.p0),m.getCoordinate(v+1,this._seg.p1),this._seg.distance(h)<=this._boundaryDistanceTolerance)return!0;return!1},yc.prototype.getLocation=function(h){return this.isWithinToleranceOfBoundary(h)?se.BOUNDARY:this._ptLocator.locate(h,this._g)},yc.prototype.extractLinework=function(h){var d=new l0;h.apply(d);var m=d.getLinework(),v=$i.toLineStringArray(m);return h.getFactory().createMultiLineString(v)},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc};var l0=function(){this._linework=null,this._linework=new tn};l0.prototype.getLinework=function(){return this._linework},l0.prototype.filter=function(h){if(h instanceof Po){var d=h;this._linework.add(d.getExteriorRing());for(var m=0;m<d.getNumInteriorRing();m++)this._linework.add(d.getInteriorRingN(m))}},l0.prototype.interfaces_=function(){return[Ia]},l0.prototype.getClass=function(){return l0};var g4=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};g4.prototype.extractPoints=function(h,d,m){for(var v=h.getCoordinates(),x=0;x<v.length-1;x++)this.computeOffsetPoints(v[x],v[x+1],d,m)},g4.prototype.setSidesToGenerate=function(h,d){this._doLeft=h,this._doRight=d},g4.prototype.getPoints=function(h){for(var d=new tn,m=n1.getLines(this._g).iterator();m.hasNext();){var v=m.next();this.extractPoints(v,h,d)}return d},g4.prototype.computeOffsetPoints=function(h,d,m,v){var x=d.x-h.x,B=d.y-h.y,H=Math.sqrt(x*x+B*B),q=m*x/H,pe=m*B/H,Ue=(d.x+h.x)/2,gt=(d.y+h.y)/2;if(this._doLeft){var pt=new $(Ue-pe,gt+q);v.add(pt)}if(this._doRight){var ln=new $(Ue+pe,gt-q);v.add(ln)}},g4.prototype.interfaces_=function(){return[]},g4.prototype.getClass=function(){return g4};var K1=function h(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=h.TOLERANCE,this._testCoords=new tn;var d=arguments[0],m=arguments[1],v=arguments[2];this._boundaryDistanceTolerance=h.computeBoundaryDistanceTolerance(d,m),this._geom=[d,m,v],this._locFinder=[new yc(this._geom[0],this._boundaryDistanceTolerance),new yc(this._geom[1],this._boundaryDistanceTolerance),new yc(this._geom[2],this._boundaryDistanceTolerance)]},mp={TOLERANCE:{configurable:!0}};K1.prototype.reportResult=function(h,d,m){$t.out.println("Overlay result invalid - A:"+se.toLocationSymbol(d[0])+" B:"+se.toLocationSymbol(d[1])+" expected:"+(m?"i":"e")+" actual:"+se.toLocationSymbol(d[2]))},K1.prototype.isValid=function(h){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(h)},K1.prototype.checkValid=function(){if(1===arguments.length){for(var h=arguments[0],d=0;d<this._testCoords.size();d++){var m=this._testCoords.get(d);if(!this.checkValid(h,m))return this._invalidLocation=m,!1}return!0}if(2===arguments.length){var v=arguments[0],x=arguments[1];return this._location[0]=this._locFinder[0].getLocation(x),this._location[1]=this._locFinder[1].getLocation(x),this._location[2]=this._locFinder[2].getLocation(x),!!K1.hasLocation(this._location,se.BOUNDARY)||this.isValidResult(v,this._location)}},K1.prototype.addTestPts=function(h){var d=new g4(h);this._testCoords.addAll(d.getPoints(5*this._boundaryDistanceTolerance))},K1.prototype.isValidResult=function(h,d){var m=zi.isResultOfOp(d[0],d[1],h),v=!(m^d[2]===se.INTERIOR);return v||this.reportResult(h,d,m),v},K1.prototype.getInvalidLocation=function(){return this._invalidLocation},K1.prototype.interfaces_=function(){return[]},K1.prototype.getClass=function(){return K1},K1.hasLocation=function(h,d){for(var m=0;m<3;m++)if(h[m]===d)return!0;return!1},K1.computeBoundaryDistanceTolerance=function(h,d){return Math.min(Mo.computeSizeBasedSnapTolerance(h),Mo.computeSizeBasedSnapTolerance(d))},K1.isValid=function(h,d,m,v){return new K1(h,d,v).isValid(m)},mp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(K1,mp);var B2=function h(d){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=h.extractFactory(d),this._inputGeoms=d};B2.prototype.extractElements=function(h,d){if(null===h)return null;for(var m=0;m<h.getNumGeometries();m++){var v=h.getGeometryN(m);this._skipEmpty&&v.isEmpty()||d.add(v)}},B2.prototype.combine=function(){for(var h=new tn,d=this._inputGeoms.iterator();d.hasNext();){var m=d.next();this.extractElements(m,h)}return 0===h.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(h)},B2.prototype.interfaces_=function(){return[]},B2.prototype.getClass=function(){return B2},B2.combine=function(){return 1===arguments.length?new B2(arguments[0]).combine():2===arguments.length?new B2(B2.createList(arguments[0],arguments[1])).combine():3===arguments.length?new B2(B2.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},B2.extractFactory=function(h){return h.isEmpty()?null:h.iterator().next().getFactory()},B2.createList=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=new tn;return m.add(h),m.add(d),m}if(3===arguments.length){var v=arguments[0],x=arguments[1],B=arguments[2],H=new tn;return H.add(v),H.add(x),H.add(B),H}};var Dt=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new tn)},Sr={STRTREE_NODE_CAPACITY:{configurable:!0}};Dt.prototype.reduceToGeometries=function(h){for(var d=new tn,m=h.iterator();m.hasNext();){var v=m.next(),x=null;At(v,ko)?x=this.unionTree(v):v instanceof _n&&(x=v),d.add(x)}return d},Dt.prototype.extractByEnvelope=function(h,d,m){for(var v=new tn,x=0;x<d.getNumGeometries();x++){var B=d.getGeometryN(x);B.getEnvelopeInternal().intersects(h)?v.add(B):m.add(B)}return this._geomFactory.buildGeometry(v)},Dt.prototype.unionOptimized=function(h,d){var m=h.getEnvelopeInternal(),v=d.getEnvelopeInternal();if(!m.intersects(v))return B2.combine(h,d);if(h.getNumGeometries()<=1&&d.getNumGeometries()<=1)return this.unionActual(h,d);var x=m.intersection(v);return this.unionUsingEnvelopeIntersection(h,d,x)},Dt.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var h=new L6(Dt.STRTREE_NODE_CAPACITY),d=this._inputPolys.iterator();d.hasNext();){var m=d.next();h.insert(m.getEnvelopeInternal(),m)}this._inputPolys=null;var v=h.itemsTree();return this.unionTree(v)},Dt.prototype.binaryUnion=function(){if(1===arguments.length){var h=arguments[0];return this.binaryUnion(h,0,h.size())}if(3===arguments.length){var d=arguments[0],m=arguments[1],v=arguments[2];if(v-m<=1){var x=Dt.getGeometry(d,m);return this.unionSafe(x,null)}if(v-m==2)return this.unionSafe(Dt.getGeometry(d,m),Dt.getGeometry(d,m+1));var B=Math.trunc((v+m)/2),H=this.binaryUnion(d,m,B),q=this.binaryUnion(d,B,v);return this.unionSafe(H,q)}},Dt.prototype.repeatedUnion=function(h){for(var d=null,m=h.iterator();m.hasNext();){var v=m.next();d=null===d?v.copy():d.union(v)}return d},Dt.prototype.unionSafe=function(h,d){return null===h&&null===d?null:null===h?d.copy():null===d?h.copy():this.unionOptimized(h,d)},Dt.prototype.unionActual=function(h,d){return Dt.restrictToPolygons(h.union(d))},Dt.prototype.unionTree=function(h){var d=this.reduceToGeometries(h);return this.binaryUnion(d)},Dt.prototype.unionUsingEnvelopeIntersection=function(h,d,m){var v=new tn,x=this.extractByEnvelope(m,h,v),B=this.extractByEnvelope(m,d,v),H=this.unionActual(x,B);return v.add(H),B2.combine(v)},Dt.prototype.bufferUnion=function(){if(1===arguments.length){var h=arguments[0];return h.get(0).getFactory().buildGeometry(h).buffer(0)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d.getFactory().createGeometryCollection([d,m]).buffer(0)}},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},Dt.restrictToPolygons=function(h){if(At(h,dc))return h;var d=gl.getPolygons(h);return 1===d.size()?d.get(0):h.getFactory().createMultiPolygon($i.toPolygonArray(d))},Dt.getGeometry=function(h,d){return d>=h.size()?null:h.get(d)},Dt.union=function(h){return new Dt(h).union()},Sr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Dt,Sr);var Ai=function(){};Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.union=function(h,d){if(h.isEmpty()||d.isEmpty()){if(h.isEmpty()&&d.isEmpty())return zi.createEmptyResult(zi.UNION,h,d,h.getFactory());if(h.isEmpty())return d.copy();if(d.isEmpty())return h.copy()}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),M1.overlayOp(h,d,zi.UNION)},Me.GeoJSONReader=b3,Me.GeoJSONWriter=j2,Me.OverlayOp=zi,Me.UnionOp=Ai,Me.BufferOp=Dr,Object.defineProperty(Me,"__esModule",{value:!0})}(et)}},Nt=>{Nt(Nt.s=2086)}]);